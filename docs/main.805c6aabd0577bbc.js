"use strict";var fL=Object.defineProperty,pL=Object.defineProperties,gL=Object.getOwnPropertyDescriptors,nR=Object.getOwnPropertySymbols,mL=Object.prototype.hasOwnProperty,yL=Object.prototype.propertyIsEnumerable,rR=(Ze,ye,N)=>ye in Ze?fL(Ze,ye,{enumerable:!0,configurable:!0,writable:!0,value:N}):Ze[ye]=N,iR=(Ze,ye)=>{for(var N in ye||(ye={}))mL.call(ye,N)&&rR(Ze,N,ye[N]);if(nR)for(var N of nR(ye))yL.call(ye,N)&&rR(Ze,N,ye[N]);return Ze},sR=(Ze,ye)=>pL(Ze,gL(ye));(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(Ze,ye,N)=>{N.d(ye,{Dh:()=>oe,GT:()=>de,cc:()=>Re,hO:()=>Be,on:()=>$,pX:()=>re,xv:()=>le});var c=N(5e3),J=N(127),O=N(5813);Ze=N.hmd(Ze);const se=["ngOnDestroy"],re=(be,We,tt,xe={})=>new Proxy(be,{get:(Ee,Ce)=>tt.runOutsideAngular(()=>{var Ve;if(be[Ce])return(null===(Ve=null==xe?void 0:xe.spy)||void 0===Ve?void 0:Ve.get)&&xe.spy.get(Ce,be[Ce]),be[Ce];if(se.indexOf(Ce)>-1)return()=>{};const Ue=We.toPromise().then(B=>{const we=B&&B[Ce];return"function"==typeof we?we.bind(B):we&&we.then?we.then(W=>tt.run(()=>W)):tt.run(()=>we)});return new Proxy(()=>{},{get:(B,we)=>Ue[we],apply:(B,we,W)=>Ue.then(ie=>{var te;const me=ie&&ie(...W);return(null===(te=null==xe?void 0:xe.spy)||void 0===te?void 0:te.apply)&&xe.spy.apply(Ce,W,me),me})})})}),de=(be,We)=>{We.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(xe=>{Object.defineProperty(be.prototype,xe,Object.getOwnPropertyDescriptor(tt.prototype||tt,xe))})})};class ue{constructor(We){return We}}const oe=new c.OlP("angularfire2.app.options"),le=new c.OlP("angularfire2.app.name");function $(be,We,tt){const Ee="object"==typeof tt&&tt||{};Ee.name=Ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const Ve=J.Z.apps.filter(Ue=>Ue&&Ue.name===Ee.name)[0]||We.runOutsideAngular(()=>J.Z.initializeApp(be,Ee));try{JSON.stringify(be)!==JSON.stringify(Ve.options)&&j("error",`${Ve.name} Firebase App already initialized with different options${Ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new ue(Ve)}const j=(be,...We)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[be](...We)},K={provide:ue,useFactory:$,deps:[oe,c.R0b,[new c.FiY,le]]};let Be=(()=>{class be{constructor(tt){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",c.q4F.full,tt.toString())}static initializeApp(tt,xe){return{ngModule:be,providers:[{provide:oe,useValue:tt},{provide:le,useValue:xe}]}}}return be.\u0275fac=function(tt){return new(tt||be)(c.LFG(c.Lbi))},be.\u0275mod=c.oAB({type:be}),be.\u0275inj=c.cJS({providers:[K]}),be})();function Re(be,We,tt,xe,Ee){const[,Ce,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===be)||[];if(Ce)return function Ae(be,We){try{return be.toString()===We.toString()}catch(tt){return be===We}}(Ee,Ve)||(_e("error",`${We} was already initialized on the ${tt} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Ee,was:Ve})),Ce;{const Ue=xe();return globalThis.\u0275AngularfireInstanceCache.push([be,Ue,Ee]),Ue}}const Qe=!!Ze.hot,_e=(be,...We)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[be](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ze,ye,N)=>{N.d(ye,{q4:()=>Pa,iC:()=>Vh,fc:()=>rr,HU:()=>md,vb:()=>rg,JM:()=>ra});var c=N(5e3),J=N(5867),O=N(5861),se=N(9681),re=N(2090),de=N(4859),ue=N(1877),oe=N(8766);const le="@firebase/installations",$="0.5.9",K=`w:${$}`,Be="FIS_v2",We=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(C){return C instanceof re.ZR&&C.code.includes("request-failed")}function xe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ee(C){return{token:C.token,requestStatus:2,expiresIn:ie(C.expiresIn),creationTime:Date.now()}}function Ce(C,D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(C,D){const F=(yield D.json()).error;return We.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function B(C,{refreshToken:D}){const R=Ue(C);return R.append("Authorization",function te(C){return`${Be} ${C}`}(D)),R}function we(C){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function ie(C){return Number(C.replace("s","000"))}function me(C,D){return ae.apply(this,arguments)}function ae(){return(ae=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:R}){const F=xe(C),Y=Ue(C),ne=D.getImmediate({optional:!0});if(ne){const lt=yield ne.getHeartbeatsHeader();lt&&Y.append("x-firebase-client",lt)}const ze={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:Be,appId:C.appId,sdkVersion:K})},rt=yield we(()=>fetch(F,ze));if(rt.ok){const lt=yield rt.json();return{fid:lt.fid||R,registrationStatus:2,refreshToken:lt.refreshToken,authToken:Ee(lt.authToken)}}throw yield Ce("Create Installation",rt)})).apply(this,arguments)}function Pe(C){return new Promise(D=>{setTimeout(D,C)})}const Bt=/^[cdef][\w-]{21}$/;function Ge(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function Yt(C){return function ut(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Bt.test(R)?R:""}catch(C){return""}}function yn(C){return`${C.appName}!${C.appId}`}const Xt=new Map;function Zt(C,D){const R=yn(C);Pt(R,D),function rs(C,D){const R=function ur(){return!Yr&&"BroadcastChannel"in self&&(Yr=new BroadcastChannel("[Firebase] FID Change"),Yr.onmessage=C=>{Pt(C.data.key,C.data.fid)}),Yr}();R&&R.postMessage({key:C,fid:D}),function Ir(){0===Xt.size&&Yr&&(Yr.close(),Yr=null)}()}(R,D)}function Pt(C,D){const R=Xt.get(C);if(R)for(const F of R)F(D)}let Yr=null;const Qr="firebase-installations-store";let pi=null;function yt(){return pi||(pi=(0,oe.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Qr)}})),pi}function Jr(C,D){return hn.apply(this,arguments)}function hn(){return(hn=(0,O.Z)(function*(C,D){const R=yn(C),Y=(yield yt()).transaction(Qr,"readwrite"),ne=Y.objectStore(Qr),ge=yield ne.get(R);return yield ne.put(D,R),yield Y.done,(!ge||ge.fid!==D.fid)&&Zt(C,D.fid),D})).apply(this,arguments)}function _n(C){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(C){const D=yn(C),F=(yield yt()).transaction(Qr,"readwrite");yield F.objectStore(Qr).delete(D),yield F.done})).apply(this,arguments)}function Xr(C,D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(C,D){const R=yn(C),Y=(yield yt()).transaction(Qr,"readwrite"),ne=Y.objectStore(Qr),ge=yield ne.get(R),ze=D(ge);return void 0===ze?yield ne.delete(R):yield ne.put(ze,R),yield Y.done,ze&&(!ge||ge.fid!==ze.fid)&&Zt(C,ze.fid),ze})).apply(this,arguments)}function In(C){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(C){let D;const R=yield Xr(C.appConfig,F=>{const Y=Lo(F),ne=jt(C,Y);return D=ne.registrationPromise,ne.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function Lo(C){return so(C||{fid:Ge(),registrationStatus:0})}function jt(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(We.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function ot(C,D){return Et.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:lr(C)}:{installationEntry:D}}function Et(){return(Et=(0,O.Z)(function*(C,D){try{const R=yield me(C,D);return Jr(C.appConfig,R)}catch(R){throw tt(R)&&409===R.customData.serverCode?yield _n(C.appConfig):yield Jr(C.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function lr(C){return ei.apply(this,arguments)}function ei(){return(ei=(0,O.Z)(function*(C){let D=yield Ut(C.appConfig);for(;1===D.registrationStatus;)yield Pe(100),D=yield Ut(C.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:F}=yield In(C);return F||R}return D})).apply(this,arguments)}function Ut(C){return Xr(C,D=>{if(!D)throw We.create("installation-not-found");return so(D)})}function so(C){return function cr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function dr(C,D){return U.apply(this,arguments)}function U(){return(U=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:D},R){const F=q(C,R),Y=B(C,R),ne=D.getImmediate({optional:!0});if(ne){const lt=yield ne.getHeartbeatsHeader();lt&&Y.append("x-firebase-client",lt)}const ze={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:C.appId}})},rt=yield we(()=>fetch(F,ze));if(rt.ok)return Ee(yield rt.json());throw yield Ce("Generate Auth Token",rt)})).apply(this,arguments)}function q(C,{fid:D}){return`${xe(C)}/${D}/authTokens:generate`}function Z(C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(C,D=!1){let R;const F=yield Xr(C.appConfig,ne=>{if(!Dt(ne))throw We.create("not-registered");const ge=ne.authToken;if(!D&&rn(ge))return ne;if(1===ge.requestStatus)return R=H(C,D),ne;{if(!navigator.onLine)throw We.create("app-offline");const ze=On(ne);return R=Ke(C,ze),ze}});return R?yield R:F.authToken})).apply(this,arguments)}function H(C,D){return X.apply(this,arguments)}function X(){return(X=(0,O.Z)(function*(C,D){let R=yield ke(C.appConfig);for(;1===R.authToken.requestStatus;)yield Pe(100),R=yield ke(C.appConfig);const F=R.authToken;return 0===F.requestStatus?Z(C,D):F})).apply(this,arguments)}function ke(C){return Xr(C,D=>{if(!Dt(D))throw We.create("not-registered");return function Dr(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ke(C,D){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*(C,D){try{const R=yield dr(C,D),F=Object.assign(Object.assign({},D),{authToken:R});return yield Jr(C.appConfig,F),R}catch(R){if(!tt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Jr(C.appConfig,F)}else yield _n(C.appConfig);throw R}})).apply(this,arguments)}function Dt(C){return void 0!==C&&2===C.registrationStatus}function rn(C){return 2===C.requestStatus&&!function It(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function On(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function _a(){return(_a=(0,O.Z)(function*(C){const D=C,{installationEntry:R,registrationPromise:F}=yield In(D);return F?F.catch(console.error):Z(D).catch(console.error),R.fid})).apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(C,D=!1){const R=C;return yield Pn(R),(yield Z(R,D)).token})).apply(this,arguments)}function Pn(C){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,O.Z)(function*(C){const{registrationPromise:D}=yield In(C);D&&(yield D)})).apply(this,arguments)}function Uo(C){return We.create("missing-app-config-values",{valueName:C})}const Ur="installations",at=C=>{const D=C.getProvider("app").getImmediate(),R=function Jn(C){if(!C||!C.options)throw Uo("App Configuration");if(!C.name)throw Uo("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!C.options[R])throw Uo(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Jt=C=>{const D=C.getProvider("app").getImmediate(),R=(0,se._getProvider)(D,Ur).getImmediate();return{getId:()=>function su(C){return _a.apply(this,arguments)}(R),getToken:Y=>function ou(C){return va.apply(this,arguments)}(R,Y)}};(function Vr(){(0,se._registerComponent)(new de.wA(Ur,at,"PUBLIC")),(0,se._registerComponent)(new de.wA("installations-internal",Jt,"PRIVATE"))})(),(0,se.registerVersion)(le,$),(0,se.registerVersion)(le,$,"esm2017");const Ri="@firebase/remote-config",vn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qp{constructor(D,R,F,Y){this.client=D,this.storage=R,this.storageCache=F,this.logger=Y}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-R,Y=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var R=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Y;D.eTag=Y&&Y.eTag;const ne=yield R.client.fetch(D),ge=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&ge.push(R.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(ge),ne})()}}function Gc(C=navigator){return C.languages&&C.languages[0]||C.language}class hr{constructor(D,R,F,Y,ne,ge){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=F,this.projectId=Y,this.apiKey=ne,this.appId=ge}fetch(D){var R=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),ge=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},rt={sdk_version:R.sdkVersion,app_instance_id:F,app_instance_id_token:Y,app_id:R.appId,language_code:Gc()},lt={method:"POST",headers:ze,body:JSON.stringify(rt)},$t=fetch(ge,lt),At=new Promise((mr,ms)=>{D.signal.addEventListener(()=>{const qs=new Error("The operation was aborted.");qs.name="AbortError",ms(qs)})});let Sn;try{yield Promise.race([$t,At]),Sn=yield $t}catch(mr){let ms="fetch-client-network";throw"AbortError"===mr.name&&(ms="fetch-timeout"),vn.create(ms,{originalErrorMessage:mr.message})}let zn=Sn.status;const gs=Sn.headers.get("ETag")||void 0;let Gi,Ei;if(200===Sn.status){let mr;try{mr=yield Sn.json()}catch(ms){throw vn.create("fetch-client-parse",{originalErrorMessage:ms.message})}Gi=mr.entries,Ei=mr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ei?zn=500:"NO_CHANGE"===Ei?zn=304:("NO_TEMPLATE"===Ei||"EMPTY_CONFIG"===Ei)&&(Gi={}),304!==zn&&200!==zn)throw vn.create("fetch-status",{httpStatus:zn});return{status:zn,eTag:gs,config:Gi}})()}}class Zp{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,O.Z)(function*(){const F=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:F}){var Y=this;return(0,O.Z)(function*(){yield function Rs(C,D){return new Promise((R,F)=>{const Y=Math.max(D-Date.now(),0),ne=setTimeout(R,Y);C.addEventListener(()=>{clearTimeout(ne),F(vn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const ne=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function qc(C){if(!(C instanceof re.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const ge={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(ge),Y.attemptFetch(D,ge)}})()}}class zc{constructor(D,R,F,Y,ne){this.app=D,this._client=R,this._storageCache=F,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vl(C,D){const R=C.target.error||void 0;return vn.create(D,{originalErrorMessage:R&&R.message})}const ks="app_namespace_store";class Kp{constructor(D,R,F,Y=function Wp(){return new Promise((C,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=F=>{D(vl(F,"storage-open"))},R.onsuccess=F=>{C(F.target.result)},R.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ks,{keyPath:"compositeKey"})}}catch(R){D(vn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,O.Z)(function*(){const F=yield R.openDbPromise;return new Promise((Y,ne)=>{const ze=F.transaction([ks],"readonly").objectStore(ks),rt=R.createCompositeKey(D);try{const lt=ze.get(rt);lt.onerror=$t=>{ne(vl($t,"storage-get"))},lt.onsuccess=$t=>{const At=$t.target.result;Y(At?At.value:void 0)}}catch(lt){ne(vn.create("storage-get",{originalErrorMessage:lt&&lt.message}))}})})()}set(D,R){var F=this;return(0,O.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((ne,ge)=>{const rt=Y.transaction([ks],"readwrite").objectStore(ks),lt=F.createCompositeKey(D);try{const $t=rt.put({compositeKey:lt,value:R});$t.onerror=At=>{ge(vl(At,"storage-set"))},$t.onsuccess=()=>{ne()}}catch($t){ge(vn.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(D){var R=this;return(0,O.Z)(function*(){const F=yield R.openDbPromise;return new Promise((Y,ne)=>{const ze=F.transaction([ks],"readwrite").objectStore(ks),rt=R.createCompositeKey(D);try{const lt=ze.delete(rt);lt.onerror=$t=>{ne(vl($t,"storage-delete"))},lt.onsuccess=()=>{Y()}}catch(lt){ne(vn.create("storage-delete",{originalErrorMessage:lt&&lt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Kc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const R=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),ne=yield R;ne&&(D.lastFetchStatus=ne);const ge=yield F;ge&&(D.lastSuccessfulFetchTimestampMillis=ge);const ze=yield Y;ze&&(D.activeConfig=ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function cu(){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Vo(){(0,se._registerComponent)(new de.wA("remote-config",function C(D,{instanceIdentifier:R}){const F=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw vn.create("registration-window");if(!(0,re.hl)())throw vn.create("indexed-db-unavailable");const{projectId:ne,apiKey:ge,appId:ze}=F.options;if(!ne)throw vn.create("registration-project-id");if(!ge)throw vn.create("registration-api-key");if(!ze)throw vn.create("registration-app-id");const rt=new Kp(ze,F.name,R=R||"firebase"),lt=new Kc(rt),$t=new ue.Yd(Ri);$t.logLevel=ue.in.ERROR;const At=new hr(Y,se.SDK_VERSION,R,ne,ge,ze),Sn=new Zp(At,rt),zn=new qp(Sn,rt,lt,$t),gs=new zc(F,zn,lt,rt,$t);return function en(C){const D=(0,re.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(gs),gs},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Ri,"0.3.8"),(0,se.registerVersion)(Ri,"0.3.8","esm2017")}();const Qc="/firebase-messaging-sw.js",Xn="/firebase-cloud-messaging-push-scope",uo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Bo="google.c.a.c_id",Jc="google.c.a.c_l",Oh="google.c.a.ts",Ia="google.c.a.e";var jo=(()=>{return(C=jo||(jo={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",jo;var C})();function Ar(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xc(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(R),Y=new Uint8Array(F.length);for(let ne=0;ne<F.length;++ne)Y[ne]=F.charCodeAt(ne);return Y}const Sr="fcm_token_details_db",ti="fcm_token_object_Store";function wl(C){return ed.apply(this,arguments)}function ed(){return ed=(0,O.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Sr))return null;let D=null;return(yield(0,oe.X3)(Sr,5,{upgrade:(F=(0,O.Z)(function*(Y,ne,ge,ze){var rt;if(ne<2||!Y.objectStoreNames.contains(ti))return;const lt=ze.objectStore(ti),$t=yield lt.index("fcmSenderId").get(C);if(yield lt.clear(),$t)if(2===ne){const At=$t;if(!At.auth||!At.p256dh||!At.endpoint)return;D={token:At.fcmToken,createTime:null!==(rt=At.createTime)&&void 0!==rt?rt:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Ar(At.vapidKey)}}}else if(3===ne){const At=$t;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ar(At.auth),p256dh:Ar(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ar(At.vapidKey)}}}else if(4===ne){const At=$t;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ar(At.auth),p256dh:Ar(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ar(At.vapidKey)}}}}),function(ne,ge,ze,rt){return F.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Sr),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),El(D)?D:null;var F}),ed.apply(this,arguments)}function El(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Li="firebase-messaging-store";let Ph=null;function tn(){return Ph||(Ph=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Li)}})),Ph}function Da(C){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(C){const D=er(C),F=yield(yield tn()).transaction(Li).objectStore(Li).get(D);if(F)return F;{const Y=yield wl(C.appConfig.senderId);if(Y)return yield zt(C,Y),Y}})).apply(this,arguments)}function zt(C,D){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(C,D){const R=er(C),Y=(yield tn()).transaction(Li,"readwrite");return yield Y.objectStore(Li).put(D,R),yield Y.done,D})).apply(this,arguments)}function du(C){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,O.Z)(function*(C){const D=er(C),F=(yield tn()).transaction(Li,"readwrite");yield F.objectStore(Li).delete(D),yield F.done})).apply(this,arguments)}function er({appConfig:C}){return C.appId}const ln=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ui(C,D){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*(C,D){const R=yield Go(C),F=Os(D),Y={method:"POST",headers:R,body:JSON.stringify(F)};let ne;try{ne=yield(yield fetch(Vi(C.appConfig),Y)).json()}catch(ge){throw ln.create("token-subscribe-failed",{errorInfo:ge})}if(ne.error)throw ln.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw ln.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function ho(C,D){return os.apply(this,arguments)}function os(){return(os=(0,O.Z)(function*(C,D){const R=yield Go(C),F=Os(D.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(F)};let ne;try{ne=yield(yield fetch(`${Vi(C.appConfig)}/${D.token}`,Y)).json()}catch(ge){throw ln.create("token-update-failed",{errorInfo:ge})}if(ne.error)throw ln.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw ln.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Aa(C,D){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(C,D){const F={method:"DELETE",headers:yield Go(C)};try{const ne=yield(yield fetch(`${Vi(C.appConfig)}/${D}`,F)).json();if(ne.error)throw ln.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw ln.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Vi({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Go(C){return _t.apply(this,arguments)}function _t(){return(_t=(0,O.Z)(function*({appConfig:C,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Os({p256dh:C,auth:D,endpoint:R,vapidKey:F}){const Y={web:{endpoint:R,auth:D,p256dh:C}};return F!==uo&&(Y.web.applicationPubKey=F),Y}const Il=6048e5;function Sa(C){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,O.Z)(function*(C){const D=yield Zo(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:Ar(D.getKey("auth")),p256dh:Ar(D.getKey("p256dh"))},F=yield Da(C.firebaseDependencies);if(F){if(pu(F.subscriptionOptions,R))return Date.now()>=F.createTime+Il?Tl(C,{token:F.token,createTime:Date.now(),subscriptionOptions:R}):F.token;try{yield Aa(C.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return Te(C.firebaseDependencies,R)}return Te(C.firebaseDependencies,R)})).apply(this,arguments)}function hu(C){return fu.apply(this,arguments)}function fu(){return(fu=(0,O.Z)(function*(C){const D=yield Da(C.firebaseDependencies);D&&(yield Aa(C.firebaseDependencies,D.token),yield du(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Tl(C,D){return qo.apply(this,arguments)}function qo(){return(qo=(0,O.Z)(function*(C,D){try{const R=yield ho(C.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield zt(C.firebaseDependencies,F),R}catch(R){throw yield hu(C),R}})).apply(this,arguments)}function Te(C,D){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(C,D){const F={token:yield Ui(C,D),createTime:Date.now(),subscriptionOptions:D};return yield zt(C,F),F.token})).apply(this,arguments)}function Zo(C,D){return un.apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xc(D)})})).apply(this,arguments)}function pu(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function fo(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ni(C,D){if(!D.notification)return;C.notification={};const R=D.notification.title;R&&(C.notification.title=R);const F=D.notification.body;F&&(C.notification.body=F);const Y=D.notification.image;Y&&(C.notification.image=Y)}(D,C),function Al(C,D){!D.data||(C.data=D.data)}(D,C),function Sl(C,D){if(!D.fcmOptions)return;C.fcmOptions={};const R=D.fcmOptions.link;R&&(C.fcmOptions.link=R);const F=D.fcmOptions.analytics_label;F&&(C.fcmOptions.analyticsLabel=F)}(D,C),D}function xl(C){return"object"==typeof C&&!!C&&Bo in C}function td(C,D){const R=[];for(let F=0;F<C.length;F++)R.push(C.charAt(F)),F<D.length&&R.push(D.charAt(F));return R.join("")}function as(C){return ln.create("missing-app-config-values",{valueName:C})}td("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),td("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fr{constructor(D,R,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Yp(C){if(!C||!C.options)throw as("App Configuration Object");if(!C.name)throw as("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const F of D)if(!R[F])throw as(F);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:R,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ri(C){return gu.apply(this,arguments)}function gu(){return(gu=(0,O.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Qc,{scope:Xn}),C.swRegistration.update().catch(()=>{})}catch(D){throw ln.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ps(C,D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield ri(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function Ml(C,D){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=uo)})).apply(this,arguments)}function Rl(){return(Rl=(0,O.Z)(function*(C,D){if(!navigator)throw ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ln.create("permission-blocked");return yield Ml(C,null==D?void 0:D.vapidKey),yield Ps(C,null==D?void 0:D.serviceWorkerRegistration),Sa(C)})).apply(this,arguments)}function xa(C,D,R){return _u.apply(this,arguments)}function _u(){return(_u=(0,O.Z)(function*(C,D,R){const F=vu(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:R[Bo],message_name:R[Jc],message_time:R[Oh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vu(C){switch(C){case jo.NOTIFICATION_CLICKED:return"notification_open";case jo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function rd(){return(rd=(0,O.Z)(function*(C,D){const R=D.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===jo.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(fo(R)):C.onMessageHandler.next(fo(R)));const F=R.data;xl(F)&&"1"===F[Ia]&&(yield xa(C,R.messageType,F))})).apply(this,arguments)}const wu="@firebase/messaging",id=C=>{const D=new fr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function nd(C,D){return rd.apply(this,arguments)}(D,R)),D},zo=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:F=>function yu(C,D){return Rl.apply(this,arguments)}(D,F)}};function Eu(){return $r.apply(this,arguments)}function $r(){return($r=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sd(){(0,se._registerComponent)(new de.wA("messaging",id,"PUBLIC")),(0,se._registerComponent)(new de.wA("messaging-internal",zo,"PRIVATE")),(0,se.registerVersion)(wu,"0.9.13"),(0,se.registerVersion)(wu,"0.9.13","esm2017")}();const ad="analytics",Jp="firebase_id",us="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mo="https://www.googletagmanager.com/gtag/js",Un=new ue.Yd("@firebase/analytics");function ud(C){return Promise.all(C.map(D=>D.catch(R=>R)))}function Xp(C,D){const R=document.createElement("script");R.src=`${mo}?l=${C}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Wo(C,D,R,F,Y,ne){return bu.apply(this,arguments)}function bu(){return(bu=(0,O.Z)(function*(C,D,R,F,Y,ne){const ge=F[Y];try{if(ge)yield D[ge];else{const rt=(yield ud(R)).find(lt=>lt.measurementId===Y);rt&&(yield D[rt.appId])}}catch(ze){Un.error(ze)}C("config",Y,ne)})).apply(this,arguments)}function eg(C,D,R,F,Y){return ls.apply(this,arguments)}function ls(){return(ls=(0,O.Z)(function*(C,D,R,F,Y){try{let ne=[];if(Y&&Y.send_to){let ge=Y.send_to;Array.isArray(ge)||(ge=[ge]);const ze=yield ud(R);for(const rt of ge){const lt=ze.find(At=>At.measurementId===rt),$t=lt&&D[lt.appId];if(!$t){ne=[];break}ne.push($t)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),C("event",F,Y||{})}catch(ne){Un.error(ne)}})).apply(this,arguments)}function Wt(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(mo))return D;return null}const nt=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ka=new class wn{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function ld(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Ko(C){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,O.Z)(function*(C){var D;const{appId:R,apiKey:F}=C,Y={method:"GET",headers:ld(F)},ne=us.replace("{app-id}",R),ge=yield fetch(ne,Y);if(200!==ge.status&&304!==ge.status){let ze="";try{const rt=yield ge.json();(null===(D=rt.error)||void 0===D?void 0:D.message)&&(ze=rt.error.message)}catch(rt){}throw nt.create("config-fetch-failed",{httpStatus:ge.status,responseMessage:ze})}return ge.json()})).apply(this,arguments)}function En(C){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(C,D=ka,R){const{appId:F,apiKey:Y,measurementId:ne}=C.options;if(!F)throw nt.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:F};throw nt.create("no-api-key")}const ge=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new Nl;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==R?R:6e4),Bi({appId:F,apiKey:Y,measurementId:ne},ge,ze,D)})).apply(this,arguments)}function Bi(C,D,R){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:R},F,Y=ka){const{appId:ne,measurementId:ge}=C;try{yield cd(F,D)}catch(ze){if(ge)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ne,measurementId:ge};throw ze}try{const ze=yield Ko(C);return Y.deleteThrottleMetadata(ne),ze}catch(ze){if(!dd(ze)){if(Y.deleteThrottleMetadata(ne),ge)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ne,measurementId:ge};throw ze}const rt=503===Number(ze.customData.httpStatus)?(0,re.$s)(R,Y.intervalMillis,30):(0,re.$s)(R,Y.intervalMillis),lt={throttleEndTimeMillis:Date.now()+rt,backoffCount:R+1};return Y.setThrottleMetadata(ne,lt),Un.debug(`Calling attemptFetch again in ${rt} millis`),Bi(C,lt,F,Y)}})).apply(this,arguments)}function cd(C,D){return new Promise((R,F)=>{const Y=Math.max(D-Date.now(),0),ne=setTimeout(R,Y);C.addEventListener(()=>{clearTimeout(ne),F(nt.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function dd(C){if(!(C instanceof re.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Nl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Ol(){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,O.Z)(function*(){if(!(0,re.hl)())return Un.warn(nt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return Un.warn(nt.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(C,D,R,F,Y,ne,ge){var ze;const rt=En(C);rt.then(zn=>{R[zn.measurementId]=zn.appId,C.options.measurementId&&zn.measurementId!==C.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zn=>Un.error(zn)),D.push(rt);const lt=Ol().then(zn=>{if(zn)return F.getId()}),[$t,At]=yield Promise.all([rt,lt]);Wt()||Xp(ne,$t.measurementId),Y("js",new Date);const Sn=null!==(ze=null==ge?void 0:ge.config)&&void 0!==ze?ze:{};return Sn.origin="firebase",Sn.update=!0,null!=At&&(Sn[Jp]=At),Y("config",$t.measurementId,Sn),$t.measurementId})).apply(this,arguments)}class _o{constructor(D){this.app=D}_delete(){return delete nr[this.app.options.appId],Promise.resolve()}}let nr={},vo=[];const wo={};let Jo,Bs,Qo="dataLayer",Eo=!1;function cs(C,D,R){!function Na(){const C=[];if((0,re.ru)()&&C.push("This is a browser extension environment."),(0,re.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),R=nt.create("invalid-analytics-context",{errorInfo:D});Un.warn(R.message)}}();const F=C.options.appId;if(!F)throw nt.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw nt.create("no-api-key");Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=nr[F])throw nt.create("already-exists",{id:F});if(!Eo){!function yo(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Qo);const{wrappedGtag:ne,gtagCore:ge}=function tg(C,D,R,F,Y){let ne=function(...ge){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function Cu(C,D,R,F){function ne(){return(ne=(0,O.Z)(function*(ge,ze,rt){try{"event"===ge?yield eg(C,D,R,ze,rt):"config"===ge?yield Wo(C,D,R,F,ze,rt):C("set",ze)}catch(lt){Un.error(lt)}})).apply(this,arguments)}return function Y(ge,ze,rt){return ne.apply(this,arguments)}}(ne,C,D,R),{gtagCore:ne,wrappedGtag:window[Y]}}(nr,vo,wo,Qo,"gtag");Bs=ne,Jo=ge,Eo=!0}return nr[F]=function Us(C,D,R,F,Y,ne,ge){return Yo.apply(this,arguments)}(C,vo,wo,D,Jo,Qo,R),new _o(C)}function Bn(){return(Bn=(0,O.Z)(function*(C,D,R,F,Y){if(Y&&Y.global)C("event",R,F);else{const ne=yield D;C("event",R,Object.assign(Object.assign({},F),{send_to:ne}))}})).apply(this,arguments)}function vi(){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}const Hr="@firebase/analytics";!function $s(){(0,se._registerComponent)(new de.wA(ad,(D,{options:R})=>cs(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,se._registerComponent)(new de.wA("analytics-internal",function C(D){try{const R=D.getProvider(ad).getImmediate();return{logEvent:(F,Y,ne)=>function Xo(C,D,R,F){C=(0,re.m9)(C),function bo(C,D,R,F,Y){return Bn.apply(this,arguments)}(Bs,nr[C.app.options.appId],D,R,F).catch(Y=>Un.error(Y))}(R,F,Y,ne)}}catch(R){throw nt.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,se.registerVersion)(Hr,"0.7.9"),(0,se.registerVersion)(Hr,"0.7.9","esm2017")}();var fd=N(4408),Ul=N(7565);const Oa=new class An extends Ul.v{}(class $i extends fd.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,R,F):D.flush(this)}});var pd=N(4986),Uh=N(8505),pr=N(5363),Mr=N(9468);const Pa=new c.GfV("7.3.0"),ea="__angularfire_symbol__analyticsIsSupportedValue",hs="__angularfire_symbol__analyticsIsSupported",Hs="__angularfire_symbol__remoteConfigIsSupportedValue",fs="__angularfire_symbol__remoteConfigIsSupported",ta="__angularfire_symbol__messagingIsSupportedValue",Nt="__angularfire_symbol__messagingIsSupported";function ra(C,D,R){if(D){if(1===D.length)return D[0];const ne=D.filter(ge=>ge.app===R);if(1===ne.length)return ne[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[hs]||(globalThis[hs]=vi().then(C=>globalThis[ea]=C).catch(()=>globalThis[ea]=!1)),globalThis[Nt]||(globalThis[Nt]=Eu().then(C=>globalThis[ta]=C).catch(()=>globalThis[ta]=!1)),globalThis[fs]||(globalThis[fs]=cu().then(C=>globalThis[Hs]=C).catch(()=>globalThis[Hs]=!1));const rg=(C,D)=>{const R=D?[D]:(0,J.C6)(),F=[];return R.forEach(Y=>{Y.container.getProvider(C).instances.forEach(ge=>{F.includes(ge)||F.push(ge)})}),F};function ps(){}class wi{constructor(D,R=Oa){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,F){const Y=this.zone;return this.delegate.schedule(function(ge){Y.runGuarded(()=>{D.apply(this,[ge])})},R,F)}}class Tu{constructor(D){this.zone=D,this.task=null}call(D,R){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ps,{},ps,ps)),R.pipe((0,Uh.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let md=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new wi(Zone.current)),this.insideAngular=R.run(()=>new wi(Zone.current,pd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(c.LFG(c.R0b))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Hi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function rr(C){return C.pipe((0,pr.Q)(Hi().outsideAngular))}function Vh(C){return Hi(),function Gs(C){return function(R){return(R=R.lift(new Tu(C.ngZone))).pipe((0,Mr.R)(C.outsideAngular),(0,pr.Q)(C.insideAngular))}}(Hi())(C)}},2090:(Ze,ye,N)=>{N.d(ye,{$s:()=>Ut,BH:()=>Be,G6:()=>Ue,L:()=>oe,LL:()=>ae,Mn:()=>Ce,Sg:()=>Re,UG:()=>_e,US:()=>de,ZB:()=>j,ZR:()=>me,b$:()=>tt,d:()=>xe,eu:()=>we,hl:()=>B,jU:()=>be,m9:()=>dr,ne:()=>pi,pd:()=>As,r3:()=>Cr,ru:()=>We,tV:()=>le,uI:()=>Qe,vZ:()=>Yr,w1:()=>Ee,xO:()=>Ir,xb:()=>Pt,z$:()=>Ae,zI:()=>W,zd:()=>Mi});const se=function(U){const q=[];let Z=0;for(let Ie=0;Ie<U.length;Ie++){let H=U.charCodeAt(Ie);H<128?q[Z++]=H:H<2048?(q[Z++]=H>>6|192,q[Z++]=63&H|128):55296==(64512&H)&&Ie+1<U.length&&56320==(64512&U.charCodeAt(Ie+1))?(H=65536+((1023&H)<<10)+(1023&U.charCodeAt(++Ie)),q[Z++]=H>>18|240,q[Z++]=H>>12&63|128,q[Z++]=H>>6&63|128,q[Z++]=63&H|128):(q[Z++]=H>>12|224,q[Z++]=H>>6&63|128,q[Z++]=63&H|128)}return q},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,q){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let H=0;H<U.length;H+=3){const X=U[H],ke=H+1<U.length,Ke=ke?U[H+1]:0,pt=H+2<U.length,Dt=pt?U[H+2]:0;let On=(15&Ke)<<2|Dt>>6,Dr=63&Dt;pt||(Dr=64,ke||(On=64)),Ie.push(Z[X>>2],Z[(3&X)<<4|Ke>>4],Z[On],Z[Dr])}return Ie.join("")},encodeString(U,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(U):this.encodeByteArray(se(U),q)},decodeString(U,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(U):function(U){const q=[];let Z=0,Ie=0;for(;Z<U.length;){const H=U[Z++];if(H<128)q[Ie++]=String.fromCharCode(H);else if(H>191&&H<224){const X=U[Z++];q[Ie++]=String.fromCharCode((31&H)<<6|63&X)}else if(H>239&&H<365){const pt=((7&H)<<18|(63&U[Z++])<<12|(63&U[Z++])<<6|63&U[Z++])-65536;q[Ie++]=String.fromCharCode(55296+(pt>>10)),q[Ie++]=String.fromCharCode(56320+(1023&pt))}else{const X=U[Z++],ke=U[Z++];q[Ie++]=String.fromCharCode((15&H)<<12|(63&X)<<6|63&ke)}}return q.join("")}(this.decodeStringToByteArray(U,q))},decodeStringToByteArray(U,q){this.init_();const Z=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let H=0;H<U.length;){const X=Z[U.charAt(H++)],Ke=H<U.length?Z[U.charAt(H)]:0;++H;const Dt=H<U.length?Z[U.charAt(H)]:64;++H;const It=H<U.length?Z[U.charAt(H)]:64;if(++H,null==X||null==Ke||null==Dt||null==It)throw Error();Ie.push(X<<2|Ke>>4),64!==Dt&&(Ie.push(Ke<<4&240|Dt>>2),64!==It&&Ie.push(Dt<<6&192|It))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},oe=function(U){return function(U){const q=se(U);return de.encodeByteArray(q,!0)}(U).replace(/\./g,"")},le=function(U){try{return de.decodeString(U,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function j(U,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return q}for(const Z in q)!q.hasOwnProperty(Z)||!K(Z)||(U[Z]=j(U[Z],q[Z]));return U}function K(U){return"__proto__"!==U}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Z)=>{this.resolve=q,this.reject=Z})}wrapCallback(q){return(Z,Ie)=>{Z?this.reject(Z):this.resolve(Ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Z):q(Z,Ie))}}}function Re(U,q){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=q||"demo-project",H=U.iat||0,X=U.sub||U.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:H,exp:H+3600,auth_time:H,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},U);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(ke)),""].join(".")}function Ae(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function be(){return"object"==typeof self&&self.self===self}function We(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function tt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Ae().indexOf("Electron/")>=0}function Ee(){const U=Ae();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ce(){return Ae().indexOf("MSAppHost/")>=0}function Ue(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function we(){return new Promise((U,q)=>{try{let Z=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(Ie);H.onsuccess=()=>{H.result.close(),Z||self.indexedDB.deleteDatabase(Ie),U(!0)},H.onupgradeneeded=()=>{Z=!1},H.onerror=()=>{var X;q((null===(X=H.error)||void 0===X?void 0:X.message)||"")}}catch(Z){q(Z)}})}function W(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(q,Z,Ie){super(Z),this.code=q,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(q,Z,Ie){this.service=q,this.serviceName=Z,this.errors=Ie}create(q,...Z){const Ie=Z[0]||{},H=`${this.service}/${q}`,X=this.errors[q],ke=X?function Pe(U,q){return U.replace(ut,(Z,Ie)=>{const H=q[Ie];return null!=H?String(H):`<${Ie}?>`})}(X,Ie):"Error";return new me(H,`${this.serviceName}: ${ke} (${H}).`,Ie)}}const ut=/\{\$([^}]+)}/g;function Cr(U,q){return Object.prototype.hasOwnProperty.call(U,q)}function Pt(U){for(const q in U)if(Object.prototype.hasOwnProperty.call(U,q))return!1;return!0}function Yr(U,q){if(U===q)return!0;const Z=Object.keys(U),Ie=Object.keys(q);for(const H of Z){if(!Ie.includes(H))return!1;const X=U[H],ke=q[H];if(ur(X)&&ur(ke)){if(!Yr(X,ke))return!1}else if(X!==ke)return!1}for(const H of Ie)if(!Z.includes(H))return!1;return!0}function ur(U){return null!==U&&"object"==typeof U}function Ir(U){const q=[];for(const[Z,Ie]of Object.entries(U))Array.isArray(Ie)?Ie.forEach(H=>{q.push(encodeURIComponent(Z)+"="+encodeURIComponent(H))}):q.push(encodeURIComponent(Z)+"="+encodeURIComponent(Ie));return q.length?"&"+q.join("&"):""}function Mi(U){const q={};return U.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[H,X]=Ie.split("=");q[decodeURIComponent(H)]=decodeURIComponent(X)}}),q}function As(U){const q=U.indexOf("?");if(!q)return"";const Z=U.indexOf("#",q);return U.substring(q,Z>0?Z:void 0)}function pi(U,q){const Z=new yt(U,q);return Z.subscribe.bind(Z)}class yt{constructor(q,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{q(this)}).catch(Ie=>{this.error(Ie)})}next(q){this.forEachObserver(Z=>{Z.next(q)})}error(q){this.forEachObserver(Z=>{Z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Z,Ie){let H;if(void 0===q&&void 0===Z&&void 0===Ie)throw new Error("Missing Observer.");H=function hn(U,q){if("object"!=typeof U||null===U)return!1;for(const Z of q)if(Z in U&&"function"==typeof U[Z])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:Z,complete:Ie},void 0===H.next&&(H.next=_n),void 0===H.error&&(H.error=_n),void 0===H.complete&&(H.complete=_n);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(ke){}}),this.observers.push(H),X}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,q)}sendOne(q,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Z(this.observers[q])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _n(){}function Ut(U,q=1e3,Z=2){const Ie=q*Math.pow(Z,U),H=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+H)}function dr(U){return U&&U._delegate?U._delegate:U}},2943:(Ze,ye,N)=>{var c=N(5e3);let J=null;function O(){return J}const ue=new c.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function le(){return(0,c.LFG)(j)}()},providedIn:"platform"}),n})();const $=new c.OlP("Location Initialized");let j=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){K()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){K()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Be(){return new j((0,c.LFG)(ue))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function be(n){const e=(0,c.LFG)(ue).location;return new tt((0,c.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new c.OlP("appBaseHref");let tt=(()=>{class n extends _e{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+Qe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+Qe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oe),c.LFG(We,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+Qe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+Qe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oe),c.LFG(We,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ae(Ue(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function Ve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=Re,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(c.LFG(_e),c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ce(){return new Ee((0,c.LFG)(_e),(0,c.LFG)(oe))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}var we=(()=>((we=we||{})[we.Decimal=0]="Decimal",we[we.Percent=1]="Percent",we[we.Currency=2]="Currency",we[we.Scientific=3]="Scientific",we))(),ae=(()=>((ae=ae||{})[ae.Decimal=0]="Decimal",ae[ae.Group=1]="Group",ae[ae.List=2]="List",ae[ae.PercentSign=3]="PercentSign",ae[ae.PlusSign=4]="PlusSign",ae[ae.MinusSign=5]="MinusSign",ae[ae.Exponential=6]="Exponential",ae[ae.SuperscriptingExponent=7]="SuperscriptingExponent",ae[ae.PerMille=8]="PerMille",ae[ae.Infinity=9]="Infinity",ae[ae.NaN=10]="NaN",ae[ae.TimeSeparator=11]="TimeSeparator",ae[ae.CurrencyDecimal=12]="CurrencyDecimal",ae[ae.CurrencyGroup=13]="CurrencyGroup",ae))();function Pt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(void 0===r){if(e===ae.CurrencyDecimal)return t[c.wAp.NumberSymbols][ae.Decimal];if(e===ae.CurrencyGroup)return t[c.wAp.NumberSymbols][ae.Group]}return r}const Tr=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ki(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let Br=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class xs{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ln=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new xs(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),ao(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{ao(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ao(n,e){n.context.$implicit=e.item}let an=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new en,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){uu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){uu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class en{constructor(){this.$implicit=null,this.ngIf=null}}function uu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function hr(n,e){return new c.vHH(2100,"")}class Rs{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class qc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Zp=new qc,ss=new Rs;let Zc=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return Zp;if((0,c.F4k)(t))return ss;throw hr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1}),n})(),Xn=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function Fi(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function He(n,e,t){return function Uo(n,e,t,r,s,u,d=!1){let m="",w=!1;if(isFinite(n)){let I=function Ri(n){let r,s,u,d,m,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(m=e.length))r=[0],s=1;else{for(m--;"0"===e.charAt(m);)m--;for(s-=u,r=[],d=0;u<=m;u++,d++)r[d]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);d&&(I=function Vr(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(I));let T=e.minInt,M=e.minFrac,L=e.maxFrac;if(u){const Ct=u.match(Tr);if(null===Ct)throw new Error(`${u} is not a valid digit info`);const ht=Ct[1],st=Ct[3],St=Ct[5];null!=ht&&(T=ki(ht)),null!=st&&(M=ki(st)),null!=St?L=ki(St):null!=st&&M>L&&(L=M)}!function Dn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let d=u+n.integerLen,m=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let M=d;M<r.length;M++)r[M]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let M=1;M<d;M++)r[M]=0}if(m>=5)if(d-1<0){for(let M=0;M>d;M--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;s<Math.max(0,u);s++)r.push(0);let w=0!==u;const I=e+n.integerLen,T=r.reduceRight(function(M,L,G,ee){return ee[G]=(L+=M)<10?L:L-10,w&&(0===ee[G]&&G>=I?ee.pop():w=!1),L>=10?1:0},0);T&&(r.unshift(T),n.integerLen++)}(I,M,L);let G=I.digits,ee=I.integerLen;const Se=I.exponent;let Me=[];for(w=G.every(Ct=>!Ct);ee<T;ee++)G.unshift(0);for(;ee<0;ee++)G.unshift(0);ee>0?Me=G.splice(ee,G.length):(Me=G,G=[0]);const vt=[];for(G.length>=e.lgSize&&vt.unshift(G.splice(-e.lgSize,G.length).join(""));G.length>e.gSize;)vt.unshift(G.splice(-e.gSize,G.length).join(""));G.length&&vt.unshift(G.join("")),m=vt.join(Pt(t,r)),Me.length&&(m+=Pt(t,s)+Me.join("")),Se&&(m+=Pt(t,ae.Exponential)+"+"+Se)}else m=Pt(t,ae.Infinity);return m=n<0&&!w?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,function Jt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],d=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],m=d[0],w=d[1]||"";t.posPre=m.substr(0,m.indexOf("#"));for(let T=0;T<w.length;T++){const M=w.charAt(T);"0"===M?t.minFrac=t.maxFrac=T+1:"#"===M?t.maxFrac=T+1:t.posSuf+=M}const I=m.split(",");if(t.gSize=I[1]?I[1].length:0,t.lgSize=I[2]||I[1]?(I[2]||I[1]).length:0,u){const T=s.length-t.posPre.length-t.posSuf.length,M=u.indexOf("#");t.negPre=u.substr(0,M).replace(/'/g,""),t.negSuf=u.substr(M+T).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function rs(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,we.Percent),Pt(e,ae.MinusSign)),e,ae.Group,ae.Decimal,t,!0).replace(new RegExp("%","g"),Pt(e,ae.PercentSign))}(function Bo(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(u){throw hr()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"percent",type:n,pure:!0}),n})();let Ia=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function $o(n){return"server"===n}let El=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Ho((0,c.LFG)(ue),window)}),n})();class Ho{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Li(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=bl(this.window.history)||bl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function bl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class co extends class Da extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){J||(J=n)}(new co)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ta(){return zt=zt||document.querySelector("base"),zt?zt.getAttribute("href"):null}();return null==t?null:function Ns(n){du=du||document.createElement("a"),du.setAttribute("href",n);const e=du.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ea(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let du,zt=null;const er=new c.OlP("TRANSITION_ID"),ln=[{provide:c.ip1,useFactory:function Cl(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[er,ue,c.zs3],multi:!0}];class Ui{static init(){(0,c.VLi)(new Ui)}addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let tr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ho=new c.OlP("EventManagerPlugins");let os=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const d=s[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ho),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Aa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let yi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Vi=(()=>{class n extends yi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,s.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Go),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Go))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Go(n){O().remove(n)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Os=/%COMP%/g;function qo(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?qo(n,s,t):(s=s.replace(Os,n),t.push(s))}return t}function Te(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Zo=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new un(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new ni(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new Al(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=qo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(os),c.LFG(Vi),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class un{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_t[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=_t[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=_t[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Te(r)):this.eventManager.addEventListener(e,t,Te(r))}}class ni extends un{constructor(e,t,r,s){super(e),this.component=r;const u=qo(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function fu(n){return"_ngcontent-%COMP%".replace(Os,n)}(s+"-"+r.id),this.hostAttr=function Tl(n){return"_nghost-%COMP%".replace(Os,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Al extends un{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=qo(s.id,s.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Sl=(()=>{class n extends Aa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const xl=["alt","control","meta","shift"],Yp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},as={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ri=(()=>{class n extends Aa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="";if(xl.forEach(w=>{const I=r.indexOf(w);I>-1&&(r.splice(I,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=s,m.fullKey=d,m}static getEventFullKey(t){let r="",s=function gu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&as.hasOwnProperty(e)&&(e=as[e]))}return Yp[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),xl.forEach(u=>{u!=s&&fr[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const yu=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Ps(){co.makeCurrent(),Ui.init()},multi:!0},{provide:ue,useFactory:function Ml(){return(0,c.RDi)(document),document},deps:[]}]),Rl=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function _i(){return new c.qLn},deps:[]},{provide:ho,useClass:Sl,multi:!0,deps:[ue,c.R0b,c.Lbi]},{provide:ho,useClass:ri,multi:!0,deps:[ue]},{provide:Zo,useClass:Zo,deps:[os,Vi,c.AFp]},{provide:c.FYo,useExisting:Zo},{provide:yi,useExisting:Vi},{provide:Vi,useClass:Vi,deps:[ue]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:os,useClass:os,deps:[ho,c.R0b]},{provide:class tn{},useClass:tr,deps:[]}];let xa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:er,useExisting:c.AFp},ln]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Rl,imports:[Ia,c.hGG]}),n})();"undefined"!=typeof window&&window;var Wt=N(8996),Ra=N(3269);function nt(...n){const e=(0,Ra.yG)(n);return(0,Wt.D)(n,e)}var xr=N(7579);class ii extends xr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var wn=N(9751);const{isArray:ka}=Array,{getPrototypeOf:ld,prototype:Ko,keys:Fs}=Object;function En(n){if(1===n.length){const e=n[0];if(ka(e))return{args:e,keys:null};if(function Ls(n){return n&&"object"==typeof n&&ld(n)===Ko}(e)){const t=Fs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Bi=N(4671),gt=N(4004);const{isArray:cd}=Array;function Nl(n){return(0,gt.U)(e=>function dd(n,e){return cd(e)?n(...e):n(e)}(n,e))}function Ol(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Vn=N(5403),Us=N(9672);function nr(n,e,t){n?(0,Us.f)(t,n,e):e()}var vo=N(576);function wo(n,e){const t=(0,vo.m)(n)?n:()=>n,r=s=>s.error(t());return new wn.y(e?s=>e.schedule(r,0,s):r)}const Vs=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Jo=N(8189);function Eo(...n){return function Bs(){return(0,Jo.J)(1)}()((0,Wt.D)(n,(0,Ra.yG)(n)))}var Pl=N(8421);function Na(n){return new wn.y(e=>{(0,Pl.Xf)(n()).subscribe(e)})}var cs=N(515),bo=N(727),Bn=N(4482);function Fl(){return(0,Bn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Vn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class js extends wn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Bn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Vn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bo.w0.EMPTY)}return e}refCount(){return Fl()(this)}}function cn(n,e){return(0,Bn.e)((t,r)=>{let s=null,u=0,d=!1;const m=()=>d&&!s&&r.complete();t.subscribe((0,Vn.x)(r,w=>{null==s||s.unsubscribe();let I=0;const T=u++;(0,Pl.Xf)(n(w,T)).subscribe(s=(0,Vn.x)(r,M=>r.next(e?e(w,M,T,I++):M),()=>{s=null,m()}))},()=>{d=!0,m()}))})}var si=N(5698);function Co(...n){const e=(0,Ra.yG)(n);return(0,Bn.e)((t,r)=>{(e?Eo(n,t,e):Eo(n,t)).subscribe(r)})}function ds(n,e,t,r,s){return(u,d)=>{let m=t,w=e,I=0;u.subscribe((0,Vn.x)(d,T=>{const M=I++;w=m?n(w,T,M):(m=!0,T),r&&d.next(w)},s&&(()=>{m&&d.next(w),d.complete()})))}}function ji(n,e){return(0,Bn.e)(ds(n,e,arguments.length>=2,!0))}function Zn(n,e){return(0,Bn.e)((t,r)=>{let s=0;t.subscribe((0,Vn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function oi(n){return(0,Bn.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Vn.x)(t,void 0,void 0,d=>{u=(0,Pl.Xf)(n(d,oi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var bn=N(5577);function vi(n,e){return(0,vo.m)(e)?(0,bn.z)(n,e,1):(0,bn.z)(n,1)}function Iu(n){return n<=0?()=>cs.E:(0,Bn.e)((e,t)=>{let r=[];e.subscribe((0,Vn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Ll(n=fn){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,Vn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function fn(){return new Vs}function Lh(n){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,Vn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function ng(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zn((s,u)=>n(s,u,r)):Bi.y,Iu(1),t?Lh(e):Ll(()=>new Vs))}function Xo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zn((s,u)=>n(s,u,r)):Bi.y,(0,si.q)(1),t?Lh(e):Ll(()=>new Vs))}var Hr=N(8505);class $s{constructor(e,t){this.id=e,this.url=t}}class fd extends $s{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $i extends $s{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ul extends $s{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class An extends $s{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Oa extends $s{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Du extends $s{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pd extends $s{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uh extends $s{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pr extends $s{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ea{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hs{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hs{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ta{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class gd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function na(n){return new gd(n)}const gr="ngNavigationCancelingError";function Fa(n){const e=Error("NavigationCancelingError: "+n);return e[gr]=!0,e}function rg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))s[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Tu(n[s],e[s]))return!1;return!0}function Tu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function md(n){return Array.prototype.concat.apply([],n)}function Hi(n){return n.length>0?n[n.length-1]:null}function on(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function rr(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Wt.D)(Promise.resolve(n)):nt(n)}const Vh={exact:function C(n,e,t){if(!lt(n.segments,e.segments)||!Y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:R},Gs={exact:function La(n,e){return wi(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Tu(n[t],e[t]))},ignored:()=>!0};function ia(n,e,t){return Vh[t.paths](n.root,e.root,t.matrixParams)&&Gs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function R(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!lt(s,t)||e.hasChildren()||!Y(s,t,r))}if(n.segments.length===t.length){if(!lt(n.segments,t)||!Y(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!R(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(lt(n.segments,s)&&Y(n.segments,s,r)&&n.children[Nt])&&F(n.children[Nt],e,u,r)}}function Y(n,e,t){return e.every((r,s)=>Gs[t](n[s].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=na(this.queryParams)),this._queryParamMap}toString(){return zn.serialize(this)}}class ge{constructor(e,t){this.segments=e,this.children=t,this.parent=null,on(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gs(this)}}class ze{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=na(this.parameters)),this._parameterMap}toString(){return jl(this)}}function lt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class At{}class Sn{parse(e){const t=new ig(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gi(e.root,!0)}`,r=function Bh(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${mr(t)}=${mr(s)}`).join("&"):`${mr(t)}=${mr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ms(n){return encodeURI(n)}(e.fragment)}`:""}`}}const zn=new Sn;function gs(n){return n.segments.map(e=>jl(e)).join("/")}function Gi(n,e){if(!n.hasChildren())return gs(n);if(e){const t=n.children[Nt]?Gi(n.children[Nt],!1):"",r=[];return on(n.children,(s,u)=>{u!==Nt&&r.push(`${u}:${Gi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $t(n,e){let t=[];return on(n.children,(r,s)=>{s===Nt&&(t=t.concat(e(r,s)))}),on(n.children,(r,s)=>{s!==Nt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Nt?[Gi(n.children[Nt],!1)]:[`${s}:${Gi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${gs(n)}/${t[0]}`:`${gs(n)}/(${t.join("//")})`}}function Ei(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mr(n){return Ei(n).replace(/%3B/gi,";")}function qs(n){return Ei(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bl(n){return decodeURIComponent(n)}function _d(n){return Bl(n.replace(/\+/g,"%20"))}function jl(n){return`${qs(n.path)}${function vd(n){return Object.keys(n).map(e=>`;${qs(e)}=${qs(n[e])}`).join("")}(n.parameters)}`}const jh=/^[^\/()?;=#]+/;function wd(n){const e=n.match(jh);return e?e[0]:""}const Au=/^[^=?&#]+/,$h=/^[^&#]+/;class ig{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new ge(e,t)),r}parseSegment(){const e=wd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ze(Bl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=wd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=wd(this.remaining);s&&(r=s,this.capture(r))}e[Bl(t)]=Bl(r)}parseQueryParam(e){const t=function $l(n){const e=n.match(Au);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function N0(n){const e=n.match($h);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=_d(t),u=_d(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wd(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Nt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Nt]:new ge([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Hh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=sg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Su(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Su(e,this._root).map(t=>t.value)}}function sg(n,e){if(n===e.value)return e;for(const t of e.children){const r=sg(n,t);if(r)return r}return null}function Su(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Su(n,t);if(r.length)return r.unshift(e),r}return[]}class Io{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Hl extends Hh{constructor(e,t){super(e),this.snapshot=t,Cd(this,e)}toString(){return this.snapshot.toString()}}function Ed(n,e){const t=function Mu(n,e){const d=new To([],{},{},"",{},Nt,e,null,n.root,-1,{});return new bd("",new Io(d,[]))}(n,e),r=new ii([new ze("",{})]),s=new ii({}),u=new ii({}),d=new ii({}),m=new ii(""),w=new Do(r,s,d,m,u,Nt,e,t.root);return w.snapshot=t.root,new Hl(new Io(w,[]),t)}class Do{constructor(e,t,r,s,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>na(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>na(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function og(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function O0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class To{constructor(e,t,r,s,u,d,m,w,I,T,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=I,this._lastPathIndex=T,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=na(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=na(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bd extends Hh{constructor(e,t){super(t),this.url=e,Cd(this,t)}toString(){return Gh(this._root)}}function Cd(n,e){e.value._routerState=n,e.children.forEach(t=>Cd(n,t))}function Gh(n){const e=n.children.length>0?` { ${n.children.map(Gh).join(", ")} } `:"";return`${n.value}${e}`}function Id(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wi(e.params,t.params)||n.params.next(t.params),function ps(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Dd(n,e){const t=wi(n.params,e.params)&&function rt(n,e){return lt(n,e)&&n.every((t,r)=>wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Dd(n.parent,e.parent))}function Gl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function xy(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Gl(n,r,s);return Gl(n,r)})}(n,e,t);return new Io(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Gl(n,m)),d}}const r=function My(n){return new Do(new ii(n.url),new ii(n.params),new ii(n.queryParams),new ii(n.fragment),new ii(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Gl(n,u));return new Io(r,s)}}function bi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ao(n){return"object"==typeof n&&null!=n&&n.outlets}function ql(n,e,t,r,s){let u={};if(r&&on(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(I=>`${I}`):`${m}`}),n===e)return new ne(t,u,s);const d=ky(n,e,t);return new ne(d,u,s)}function ky(n,e,t){const r={};return on(n.children,(s,u)=>{r[u]=s===e?t:ky(s,e,t)}),new ge(n.segments,r)}class ug{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bi(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Ao);if(s&&s!==Hi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Td{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cg(n,e,t){if(n||(n=new ge([],{})),0===n.segments.length&&n.hasChildren())return Ad(n,e,t);const r=function Ny(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],m=t[r];if(Ao(m))break;const w=`${m}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&I&&"object"==typeof I&&void 0===I.outlets){if(!Zh(w,I,d))return u;r+=2}else{if(!Zh(w,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new ge(n.segments.slice(0,r.pathIndex),{});return u.children[Nt]=new ge(n.segments.slice(r.pathIndex),n.children),Ad(u,0,s)}return r.match&&0===s.length?new ge(n.segments,{}):r.match&&!n.hasChildren()?Oy(n,e,t):r.match?Ad(n,0,s):Oy(n,e,t)}function Ad(n,e,t){if(0===t.length)return new ge(n.segments,{});{const r=function lg(n){return Ao(n[0])?n[0].outlets:{[Nt]:n}}(t),s={};return on(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[d]=cg(n.children[d],e,u))}),on(n.children,(u,d)=>{void 0===r[d]&&(s[d]=u)}),new ge(n.segments,s)}}function Oy(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Ao(u)){const w=Ua(u.outlets);return new ge(r,w)}if(0===s&&bi(t[0])){r.push(new ze(n.segments[e].path,Zl(t[0]))),s++;continue}const d=Ao(u)?u.outlets[Nt]:`${u}`,m=s<t.length-1?t[s+1]:null;d&&m&&bi(m)?(r.push(new ze(d,Zl(m))),s+=2):(r.push(new ze(d,{})),s++)}return new ge(r,{})}function Ua(n){const e={};return on(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Oy(new ge([],{}),0,t))}),e}function Zl(n){const e={};return on(n,(t,r)=>e[r]=`${t}`),e}function Zh(n,e,t){return n==t.path&&wi(e,t.parameters)}class zl{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Id(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=xu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),on(s,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=xu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=xu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=xu(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new fs(u.value.snapshot))}),e.children.length&&this.forwardEvent(new hs(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Id(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Id(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function Sd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=s,d.resolver=w,d.outlet&&d.outlet.activateWith(s,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class xd{constructor(e,t){this.routes=e,this.module=t}}function So(n){return"function"==typeof n}function Ru(n){return n instanceof ne}const Md=Symbol("INITIAL_VALUE");function Rd(){return cn(n=>function Yo(...n){const e=(0,Ra.yG)(n),t=(0,Ra.jO)(n),{args:r,keys:s}=En(n);if(0===r.length)return(0,Wt.D)([],e);const u=new wn.y(function _o(n,e,t=Bi.y){return r=>{nr(e,()=>{const{length:s}=n,u=new Array(s);let d=s,m=s;for(let w=0;w<s;w++)nr(e,()=>{const I=(0,Wt.D)(n[w],e);let T=!1;I.subscribe((0,Vn.x)(r,M=>{u[w]=M,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>Ol(s,d):Bi.y));return t?u.pipe(Nl(t)):u}(n.map(e=>e.pipe((0,si.q)(1),Co(Md)))).pipe(ji((e,t)=>{let r=!1;return t.reduce((s,u,d)=>s!==Md?s:(u===Md&&(r=!0),r||!1!==u&&d!==t.length-1&&!Ru(u)?s:u),e)},Md),Zn(e=>e!==Md),(0,gt.U)(e=>Ru(e)?e:!0===e),(0,si.q)(1)))}class hg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ku,this.attachRef=null}}class ku{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new hg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Kl=(()=>{class n{constructor(t,r,s,u,d){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Py(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ku),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Py{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Do?this.route:e===ku?this.childContexts:this.parent.get(e,t)}}let fg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Kl],encapsulation:2}),n})();function Yl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Nu(r,Fy(e,r))}}function Nu(n,e){n.children&&Yl(n.children,e)}function Fy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ql(n){const e=n.children&&n.children.map(Ql),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=fg),t}function Gr(n){return n.outlet||Nt}function xn(n,e){const t=n.filter(r=>Gr(r)===e);return t.push(...n.filter(r=>Gr(r)!==e)),t}const pg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},pg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||rg)(t,n,e);if(!u)return Object.assign({},pg);const d={};on(u.posParams,(w,I)=>{d[I]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Va(n,e,t,r,s="corrected"){if(t.length>0&&function Uy(n,e,t){return t.some(r=>sa(n,e,r)&&Gr(r)!==Nt)}(n,t,r)){const d=new ge(e,function Ly(n,e,t,r){const s={};s[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Gr(u)!==Nt){const d=new ge([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[Gr(u)]=d}return s}(n,e,r,new ge(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Vy(n,e,t){return t.some(r=>sa(n,e,r))}(n,t,r)){const d=new ge(n.segments,function gg(n,e,t,r,s,u){const d={};for(const m of r)if(sa(n,t,m)&&!s[Gr(m)]){const w=new ge([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Gr(m)]=w}return Object.assign(Object.assign({},s),d)}(n,e,t,r,n.children,s));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new ge(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function sa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mg(n,e,t,r){return!!(Gr(n)===r||r!==Nt&&sa(e,t,n))&&("**"===n.path||kd(e,n,t).matched)}function yg(n,e,t){return 0===e.length&&!n.children[t]}class Kh{constructor(e){this.segmentGroup=e||null}}class Ou{constructor(e){this.urlTree=e}}function Wn(n){return wo(new Kh(n))}function Nd(n){return wo(new Ou(n))}class Pu{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Va(this.urlTree.root,[],[],this.config).segmentGroup,t=new ge(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Nt).pipe((0,gt.U)(u=>this.createUrlTree(Jl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(oi(u=>{if(u instanceof Ou)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Kh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Nt).pipe((0,gt.U)(s=>this.createUrlTree(Jl(s),e.queryParams,e.fragment))).pipe(oi(s=>{throw s instanceof Kh?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new ge([],{[Nt]:e}):e;return new ne(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(u=>new ge([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Wt.D)(s).pipe(vi(u=>{const d=r.children[u],m=xn(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,gt.U)(w=>({segment:w,outlet:u})))}),ji((u,d)=>(u[d.outlet]=d.segment,u),{}),ng())}expandSegment(e,t,r,s,u,d){return(0,Wt.D)(r).pipe(vi(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,d).pipe(oi(I=>{if(I instanceof Kh)return nt(null);throw I}))),Xo(m=>!!m),oi((m,w)=>{if(m instanceof Vs||"EmptyError"===m.name)return yg(t,s,u)?nt(new ge([],{})):Wn(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,d,m){return mg(s,t,u,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d):Wn(t):Wn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Nd(u):this.lineralizeSegments(r,u).pipe((0,bn.z)(d=>{const m=new ge(d,{});return this.expandSegment(e,m,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){const{matched:m,consumedSegments:w,remainingSegments:I,positionalParamSegments:T}=kd(t,s,u);if(!m)return Wn(t);const M=this.applyRedirectCommands(w,s.redirectTo,T);return s.redirectTo.startsWith("/")?Nd(M):this.lineralizeSegments(s,M).pipe((0,bn.z)(L=>this.expandSegment(e,t,r,L.concat(I),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?nt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,gt.U)(M=>(r._loadedConfig=M,new ge(s,{})))):nt(new ge(s,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=kd(t,r,s);return d?this.getChildConfig(e,r,s).pipe((0,bn.z)(T=>{const M=T.module,L=T.routes,{segmentGroup:G,slicedSegments:ee}=Va(t,m,w,L),Se=new ge(G.segments,G.children);if(0===ee.length&&Se.hasChildren())return this.expandChildren(M,L,Se).pipe((0,gt.U)(ht=>new ge(m,ht)));if(0===L.length&&0===ee.length)return nt(new ge(m,{}));const Me=Gr(r)===u;return this.expandSegment(M,Se,L,ee,Me?Nt:u,!0).pipe((0,gt.U)(Ct=>new ge(m.concat(Ct.segments),Ct.children)))})):Wn(t)}getChildConfig(e,t,r){return t.children?nt(new xd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?nt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,bn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,gt.U)(u=>(t._loadedConfig=u,u))):function Od(n){return wo(Fa(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):nt(new xd([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?nt(s.map(d=>{const m=e.get(d);let w;if(function L0(n){return n&&So(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!So(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return rr(w)})).pipe(Rd(),(0,Hr.b)(d=>{if(!Ru(d))return;const m=Fa(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,gt.U)(d=>!0===d)):nt(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return nt(r);if(s.numberOfChildren>1||!s.children[Nt])return wo(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return on(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return on(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,s)}),new ge(u,d)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function Jl(n){const e={};for(const r of Object.keys(n.children)){const u=Jl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Qh(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new ge(n.segments.concat(e.segments),e.children)}return n}(new ge(n.segments,e))}class qr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class oa{constructor(e,t){this.component=e,this.route=t}}function Jh(n,e,t){const r=n._root;return Xl(r,e?e._root:null,t,[r.value])}function Ba(n,e,t){const r=function Xh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Xl(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=xu(e);return n.children.forEach(d=>{(function Pd(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function $y(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!lt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lt(n.url,e.url)||!wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dd(n,e)||!wi(n.queryParams,e.queryParams);default:return!Dd(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new qr(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Xl(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new oa(m.outlet.component,d))}else d&&Zi(e,m,s),s.canActivateChecks.push(new qr(r)),Xl(n,null,u.component?m?m.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),on(u,(d,m)=>Zi(d,t.getContext(m),s)),s}function Zi(n,e,t){const r=xu(n),s=n.value;on(r,(u,d)=>{Zi(u,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new oa(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class qy{}function ys(n){return new wn.y(e=>e.error(n))}class vg{constructor(e,t,r,s,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Va(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Nt);if(null===t)return null;const r=new To([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Io(r,t),u=new bd(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=og(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=xn(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const s=Eg(r);return function wg(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,s);if(null!==d)return d}return yg(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!mg(e,t,r,s))return null;let u,d=[],m=[];if("**"===e.path){const G=r.length>0?Hi(r).parameters:{};u=new To(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Gr(e),e.component,e,bg(t),ja(t)+r.length,f(e))}else{const G=kd(t,e,r);if(!G.matched)return null;d=G.consumedSegments,m=G.remainingSegments,u=new To(d,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Gr(e),e.component,e,bg(t),ja(t)+d.length,f(e))}const w=function Zy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:T}=Va(t,d,m,w.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===T.length&&I.hasChildren()){const G=this.processChildren(w,I);return null===G?null:[new Io(u,G)]}if(0===w.length&&0===T.length)return[new Io(u,[])];const M=Gr(e)===s,L=this.processSegment(w,I,T,M?Nt:s);return null===L?null:[new Io(u,L)]}}function nf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Eg(n){const e=[],t=new Set;for(const r of n){if(!nf(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Eg(r.children);e.push(new Io(r.value,s))}return e.filter(r=>!t.has(r))}function bg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ja(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function z(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Le(n){return cn(e=>{const t=n(e);return t?(0,Wt.D)(t).pipe((0,gt.U)(()=>e)):nt(e)})}class ct extends class ft{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Cn=new c.OlP("ROUTES");class ui{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,gt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new xd(md(d.injector.get(Cn,void 0,c.XFs.Self|c.XFs.Optional)).map(Ql),d)}),oi(u=>{throw t._loader$=void 0,u}));return t._loader$=new js(s,()=>new xr.x).pipe(Fl()),t._loader$}loadModuleFactory(e){return rr(e()).pipe((0,bn.z)(t=>t instanceof c.YKP?nt(t):(0,Wt.D)(this.compiler.compileModuleAsync(t))))}}class rf{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Cg(n){throw n}function $a(n,e,t){return e.parse("/")}function tc(n,e){return nt(null)}const Ud={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ig={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mn=(()=>{class n{constructor(t,r,s,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xr.x,this.errorHandler=Cg,this.malformedUriErrorHandler=$a,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:tc,afterPreactivation:tc},this.urlHandlingStrategy=new rf,this.routeReuseStrategy=new ct,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const M=d.get(c.R0b);this.isNgZoneEnabled=M instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Vl(){return new ne(new ge([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ui(d,m,L=>this.triggerEvent(new Mr(L)),L=>this.triggerEvent(new Pa(L))),this.routerState=Ed(this.currentUrlTree,this.rootComponentType),this.transitions=new ii({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Zn(s=>0!==s.id),(0,gt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),cn(s=>{let u=!1,d=!1;return nt(s).pipe((0,Hr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cn(m=>{const w=this.browserUrlTree.toString(),I=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return af(m.source)&&(this.browserUrlTree=m.extractedUrl),nt(m).pipe(cn(M=>{const L=this.transitions.getValue();return r.next(new fd(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?cs.E:Promise.resolve(M)}),function By(n,e,t,r){return cn(s=>function ir(n,e,t,r,s){return new Pu(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,gt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Hr.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function g(n,e,t,r,s){return(0,bn.z)(u=>function ec(n,e,t,r,s="emptyOnly",u="legacy"){try{const d=new vg(n,e,t,r,s,u).recognize();return null===d?ys(new qy):nt(d)}catch(d){return ys(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,gt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Hr.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(G,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new Oa(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:ee,restoredState:Se,extras:Me}=m,vt=new fd(L,this.serializeUrl(G),ee,Se);r.next(vt);const Ct=Ed(G,this.rootComponentType).snapshot;return nt(Object.assign(Object.assign({},m),{targetSnapshot:Ct,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),cs.E}),Le(m=>{const{targetSnapshot:w,id:I,extractedUrl:T,rawUrl:M,extras:{skipLocationChange:L,replaceUrl:G}}=m;return this.hooks.beforePreactivation(w,{navigationId:I,appliedUrlTree:T,rawUrlTree:M,skipLocationChange:!!L,replaceUrl:!!G})}),(0,Hr.b)(m=>{const w=new Du(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,gt.U)(m=>Object.assign(Object.assign({},m),{guards:Jh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Fd(n,e){return(0,bn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?nt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Hy(n,e,t,r){return(0,Wt.D)(n).pipe((0,bn.z)(s=>function tf(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?nt(u.map(m=>{const w=Ba(m,e,s);let I;if(function Wh(n){return n&&So(n.canDeactivate)}(w))I=rr(w.canDeactivate(n,e,t,r));else{if(!So(w))throw new Error("Invalid CanDeactivate guard");I=rr(w(n,e,t,r))}return I.pipe(Xo())})).pipe(Rd()):nt(!0)}(s.component,s.route,t,e,r)),Xo(s=>!0!==s,!0))}(d,r,s,n).pipe((0,bn.z)(m=>m&&function dg(n){return"boolean"==typeof n}(m)?function Gy(n,e,t,r){return(0,Wt.D)(e).pipe(vi(s=>Eo(function _g(n,e){return null!==n&&e&&e(new ea(n)),nt(!0)}(s.route.parent,r),function Ld(n,e){return null!==n&&e&&e(new Hs(n)),nt(!0)}(s.route,r),function ef(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function jy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Na(()=>nt(d.guards.map(w=>{const I=Ba(w,d.node,t);let T;if(function zh(n){return n&&So(n.canActivateChild)}(I))T=rr(I.canActivateChild(r,n));else{if(!So(I))throw new Error("Invalid CanActivateChild guard");T=rr(I(r,n))}return T.pipe(Xo())})).pipe(Rd())));return nt(u).pipe(Rd())}(n,s.path,t),function ai(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const s=r.map(u=>Na(()=>{const d=Ba(u,e,t);let m;if(function Wl(n){return n&&So(n.canActivate)}(d))m=rr(d.canActivate(e,n));else{if(!So(d))throw new Error("Invalid CanActivate guard");m=rr(d(e,n))}return m.pipe(Xo())}));return nt(s).pipe(Rd())}(n,s.route,t))),Xo(s=>!0!==s,!0))}(r,u,n,e):nt(m)),(0,gt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Hr.b)(m=>{if(Ru(m.guardsResult)){const I=Fa(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw I.url=m.guardsResult,I}const w=new pd(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Zn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Le(m=>{if(m.guards.canActivateChecks.length)return nt(m).pipe((0,Hr.b)(w=>{const I=new Uh(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(I)}),cn(w=>{let I=!1;return nt(w).pipe(function v(n,e){return(0,bn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return nt(t);let u=0;return(0,Wt.D)(s).pipe(vi(d=>function A(n,e,t,r){return function k(n,e,t,r){const s=z(n);if(0===s.length)return nt({});const u={};return(0,Wt.D)(s).pipe((0,bn.z)(d=>function he(n,e,t,r){const s=Ba(n,e,r);return rr(s.resolve?s.resolve(e,t):s(e,t))}(n[d],e,t,r).pipe((0,Hr.b)(m=>{u[d]=m}))),Iu(1),(0,bn.z)(()=>z(u).length===s.length?nt(u):cs.E))}(n._resolve,n,e,r).pipe((0,gt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),og(n,t).resolve),null)))}(d.route,r,n,e)),(0,Hr.b)(()=>u++),Iu(1),(0,bn.z)(d=>u===s.length?nt(t):cs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Hr.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Hr.b)(w=>{const I=new pr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(I)}))}),Le(m=>{const{targetSnapshot:w,id:I,extractedUrl:T,rawUrl:M,extras:{skipLocationChange:L,replaceUrl:G}}=m;return this.hooks.afterPreactivation(w,{navigationId:I,appliedUrlTree:T,rawUrlTree:M,skipLocationChange:!!L,replaceUrl:!!G})}),(0,gt.U)(m=>{const w=function ag(n,e,t){const r=Gl(n,e._root,t?t._root:void 0);return new Hl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Hr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new zl(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Hr.b)({next(){u=!0},complete(){u=!0}}),function hd(n){return(0,Bn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===s.id&&(this.currentNavigation=null)}),oi(m=>{if(d=!0,function ra(n){return n&&n[gr]}(m)){const w=Ru(m.url);w||(this.navigated=!0,this.restoreHistory(s,!0));const I=new Ul(s.id,this.serializeUrl(s.extractedUrl),m.message);r.next(I),w?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),M={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||af(s.source)};this.scheduleNavigation(T,"imperative",null,M,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new An(s.id,this.serializeUrl(s.extractedUrl),m);r.next(w);try{s.resolve(this.errorHandler(m))}catch(I){s.reject(I)}}return cs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},d=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Yl(t),this.config=t.map(Ql),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,I=s||this.routerState.root,T=w?this.currentUrlTree.fragment:d;let M=null;switch(m){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function Ry(n,e,t,r,s){if(0===t.length)return ql(e.root,e.root,e.root,r,s);const u=function P0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ug(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return on(u.outlets,(w,I)=>{m[I]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new ug(t,e,r)}(t);if(u.toRoot())return ql(e.root,e.root,new ge([],{}),r,s);const d=function F0(n,e,t){if(n.isAbsolute)return new Td(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Td(u,u===e.root,0)}const r=bi(n.commands[0])?0:1;return function qh(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Td(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?Ad(d.segmentGroup,d.index,u.commands):cg(d.segmentGroup,d.index,u.commands);return ql(e.root,d.segmentGroup,m,r,s)}(I,this.currentUrlTree,t,M,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Ru(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function sf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},Ud):!1===r?Object.assign({},Ig):r,Ru(t))return ia(this.currentUrlTree,t,s);const u=this.parseUrl(t);return ia(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $i(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let I,T,M;d?(I=d.resolve,T=d.reject,M=d.promise):M=new Promise((ee,Se)=>{I=ee,T=Se});const L=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),G=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):G=0,this.setTransition({id:L,targetPageId:G,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:T,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(ee=>Promise.reject(ee))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new Ul(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function af(n){return"imperative"!==n}let uf=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new xr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Lu(this.skipLocationChange),replaceUrl:Lu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Lu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Mn),c.Y36(Do),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),Ha=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new xr.x,this.subscription=t.events.subscribe(u=>{u instanceof $i&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,d){if(0!==t||r||s||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Lu(this.skipLocationChange),replaceUrl:Lu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Lu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Mn),c.Y36(Do),c.Y36(_e))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function Lu(n){return""===n||!!n}let V0=(()=>{class n{constructor(t,r,s,u,d,m){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=d,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(w=>{w instanceof $i&&this.update()})}ngAfterContentInit(){nt(this.links.changes,this.linksWithHrefs.changes,nt(null)).pipe((0,Jo.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(s=>!!s).map(s=>s.onChanges);this.linkInputChangesSubscription=(0,Wt.D)(r).pipe((0,Jo.J)()).subscribe(s=>{this.isActive!==this.isLinkActive(this.router)(s)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function B0(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Mn),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(uf,8),c.Y36(Ha,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&(c.Suo(s,uf,5),c.Suo(s,Ha,5)),2&t){let u;c.iGM(u=c.CRH())&&(r.links=u),c.iGM(u=c.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[c.TTD]}),n})();class Dg{}class Tg{preload(e,t){return nt(null)}}let $0=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new ui(s,r,w=>t.triggerEvent(new Mr(w)),w=>t.triggerEvent(new Pa(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zn(t=>t instanceof $i),vi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;s.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,Wt.D)(s).pipe((0,Jo.J)(),(0,gt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?nt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,bn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mn),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(Dg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),zy=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $i&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ta&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ta(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Uu=new c.OlP("ROUTER_CONFIGURATION"),Vu=new c.OlP("ROUTER_FORROOT_GUARD"),H0=[Ee,{provide:At,useClass:Sn},{provide:Mn,useFactory:function Z0(n,e,t,r,s,u,d={},m,w){const I=new Mn(null,n,e,t,r,s,md(u));return m&&(I.urlHandlingStrategy=m),w&&(I.routeReuseStrategy=w),function Ky(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,I),d.enableTracing&&I.events.subscribe(T=>{var M,L;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(L=console.groupEnd)||void 0===L||L.call(console)}),I},deps:[At,ku,Ee,c.zs3,c.Sil,Cn,Uu,[class Fu{},new c.FiY],[class Ye{},new c.FiY]]},ku,{provide:Do,useFactory:function z0(n){return n.routerState.root},deps:[Mn]},$0,Tg,class j0{preload(e,t){return t().pipe(oi(()=>nt(null)))}},{provide:Uu,useValue:{enableTracing:!1}}];function G0(){return new c.PXZ("Router",Mn)}let Ag=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[H0,Wy(t),{provide:Vu,useFactory:q0,deps:[[Mn,new c.FiY,new c.tp0]]},{provide:Uu,useValue:r||{}},{provide:_e,useFactory:eI,deps:[oe,[new c.tBr(We),new c.FiY],Uu]},{provide:zy,useFactory:Sg,deps:[Mn,El,Uu]},{provide:Dg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Tg},{provide:c.PXZ,multi:!0,useFactory:G0},[Vd,{provide:c.ip1,multi:!0,useFactory:xg,deps:[Vd]},{provide:Mg,useFactory:W0,deps:[Vd]},{provide:c.tb,multi:!0,useExisting:Mg}]]}}static forChild(t){return{ngModule:n,providers:[Wy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vu,8),c.LFG(Mn,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Sg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new zy(n,e,t)}function eI(n,e,t={}){return t.useHash?new xe(n,e):new tt(n,e)}function q0(n){return"guarded"}function Wy(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Cn,multi:!0,useValue:n}]}let Vd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new xr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(m=>r=m),u=this.injector.get(Mn),d=this.injector.get(Uu);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?nt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(Uu),s=this.injector.get($0),u=this.injector.get(zy),d=this.injector.get(Mn),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),s.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function xg(n){return n.appInitializer.bind(n)}function W0(n){return n.bootstrapListener.bind(n)}const Mg=new c.OlP("Router Initializer"),nI=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:104,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"video",1),c._UZ(2,"source",2),c.qZA(),c._UZ(3,"div",3),c.TgZ(4,"div",4),c._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),c.qZA(),c.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),c._uU(13,"Clip it and ship it!"),c.qZA(),c.TgZ(14,"p"),c._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),c.qZA()()()(),c.TgZ(16,"section",9)(17,"h1",10),c._uU(18,"Latest"),c.qZA(),c.TgZ(19,"div",11)(20,"a",12),c._UZ(21,"img",13),c.TgZ(22,"div",14)(23,"div",15)(24,"div",16),c.O4$(),c.TgZ(25,"svg",17),c._UZ(26,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(27,"div",19)(28,"h2",20),c._uU(29," Game Highlighting Clip "),c.qZA(),c.TgZ(30,"p",21),c._uU(31," Luis Ramirez \xb7 "),c.TgZ(32,"span",22),c._uU(33,"March 31, 2020"),c.qZA()()()(),c.TgZ(34,"a",12),c._UZ(35,"img",23),c.TgZ(36,"div",14)(37,"div",15)(38,"div",16),c.O4$(),c.TgZ(39,"svg",17),c._UZ(40,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(41,"div",19)(42,"h2",20),c._uU(43," Game Highlighting Clip "),c.qZA(),c.TgZ(44,"p",21),c._uU(45," Luis Ramirez \xb7 "),c.TgZ(46,"span",22),c._uU(47,"March 31, 2020"),c.qZA()()()(),c.TgZ(48,"a",12),c._UZ(49,"img",24),c.TgZ(50,"div",14)(51,"div",15)(52,"div",16),c.O4$(),c.TgZ(53,"svg",17),c._UZ(54,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(55,"div",19)(56,"h2",20),c._uU(57," Game Highlighting Clip "),c.qZA(),c.TgZ(58,"p",21),c._uU(59," Luis Ramirez \xb7 "),c.TgZ(60,"span",22),c._uU(61,"March 31, 2020"),c.qZA()()()(),c.TgZ(62,"a",12),c._UZ(63,"img",23),c.TgZ(64,"div",14)(65,"div",15)(66,"div",16),c.O4$(),c.TgZ(67,"svg",17),c._UZ(68,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(69,"div",19)(70,"h2",20),c._uU(71," Game Highlighting Clip "),c.qZA(),c.TgZ(72,"p",21),c._uU(73," Luis Ramirez \xb7 "),c.TgZ(74,"span",22),c._uU(75,"March 31, 2020"),c.qZA()()()(),c.TgZ(76,"a",12),c._UZ(77,"img",24),c.TgZ(78,"div",14)(79,"div",15)(80,"div",16),c.O4$(),c.TgZ(81,"svg",17),c._UZ(82,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(83,"div",19)(84,"h2",20),c._uU(85," Game Highlighting Clip "),c.qZA(),c.TgZ(86,"p",21),c._uU(87," Luis Ramirez \xb7 "),c.TgZ(88,"span",22),c._uU(89,"March 31, 2020"),c.qZA()()()(),c.TgZ(90,"a",12),c._UZ(91,"img",13),c.TgZ(92,"div",14)(93,"div",15)(94,"div",16),c.O4$(),c.TgZ(95,"svg",17),c._UZ(96,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(97,"div",19)(98,"h2",20),c._uU(99," Game Highlighting Clip "),c.qZA(),c.TgZ(100,"p",21),c._uU(101," Luis Ramirez \xb7 "),c.TgZ(102,"span",22),c._uU(103,"March 31, 2020"),c.qZA()()()()()())},styles:[""]}),n})()},{path:"about",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,template:function(t,r){1&t&&(c.TgZ(0,"p"),c._uU(1,"about works!"),c.qZA())},styles:[""]}),n})()},{path:"clip/:id",component:(()=>{class n{constructor(t){this.route=t,this.id=""}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Do))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-clip"]],decls:57,vars:1,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative"],["controls","","data-setup","{}",1,"video-js","vjs-theme-forest","mx-auto"],["src","assets/video/hero.webm","type","video/webm"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c._uU(5," Uploaded By Luis on "),c.TgZ(6,"span"),c._uU(7,"March 25, 2022"),c.qZA()(),c.TgZ(8,"div",4)(9,"video",5),c._UZ(10,"source",6),c.qZA()()()(),c.TgZ(11,"div",7)(12,"h2",8),c._uU(13,"More Clips"),c.qZA(),c.TgZ(14,"div",9)(15,"a",10),c._UZ(16,"img",11),c.TgZ(17,"div",4)(18,"div",12)(19,"div",13),c.O4$(),c.TgZ(20,"svg",14),c._UZ(21,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(22,"div",16)(23,"h2",17),c._uU(24," Game Highlighting Clip "),c.qZA(),c.TgZ(25,"p",18),c._uU(26," Luis Ramirez \xb7 "),c.TgZ(27,"span",19),c._uU(28,"March 31, 2020"),c.qZA()()()(),c.TgZ(29,"a",10),c._UZ(30,"img",20),c.TgZ(31,"div",4)(32,"div",12)(33,"div",13),c.O4$(),c.TgZ(34,"svg",14),c._UZ(35,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(36,"div",16)(37,"h2",17),c._uU(38," Game Highlighting Clip "),c.qZA(),c.TgZ(39,"p",18),c._uU(40," Luis Ramirez \xb7 "),c.TgZ(41,"span",19),c._uU(42,"March 31, 2020"),c.qZA()()()(),c.TgZ(43,"a",10),c._UZ(44,"img",21),c.TgZ(45,"div",4)(46,"div",12)(47,"div",13),c.O4$(),c.TgZ(48,"svg",14),c._UZ(49,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(50,"div",16)(51,"h2",17),c._uU(52," Game Highlighting Clip "),c.qZA(),c.TgZ(53,"p",18),c._uU(54," Luis Ramirez \xb7 "),c.TgZ(55,"span",19),c._uU(56,"March 31, 2020"),c.qZA()()()()()()),2&t&&(c.xp6(3),c.Oqu(r.id))},styles:[""]}),n})()},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-not-found"]],decls:15,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1),c._uU(2,"404"),c.qZA(),c._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),c.qZA())},styles:[""]}),n})()}];let Q0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Ag.forRoot(nI)],Ag]}),n})();var pe=N(5861),lf=N(4986),rS=N(5032);function Yy(n,e){return e?t=>Eo(e.pipe((0,si.q)(1),function J0(){return(0,Bn.e)((n,e)=>{n.subscribe((0,Vn.x)(e,rS.Z))})}()),t.pipe(Yy(n))):(0,bn.z)((t,r)=>n(t,r).pipe((0,si.q)(1),function rI(n){return(0,gt.U)(()=>n)}(t)))}var iI=N(3532);var X0=N(6451),kg=N(5363),aI=N(6063);class uI extends xr.x{constructor(e=1/0,t=1/0,r=aI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!s&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var lI=N(3099);function Qy(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,lI.B)({connector:()=>new uI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function ew(n,e){return(0,vo.m)(e)?cn(()=>n,e):cn(()=>n)}var Jy=N(9468),Rn=N(5813),dt=N(2011);N(5867);var _s=N(9681),Bu=N(4859),xt=N(2090),ju=N(1877);const sw=new Map,hI={activated:!1,tokenObservers:[]},fI={initialized:!1,enabled:!1};function yr(n){return sw.get(n)||hI}function aa(n,e){sw.set(n,e)}function Og(){return fI}class oS{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield function aS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zi=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gI(n){if(!yr(n).activated)throw zi.create("use-before-activation",{appName:n.name})}function ua(n,e){return df.apply(this,arguments)}function df(){return(df=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const M=yield s.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(M){throw zi.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==d.status)throw zi.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(M){throw zi.create("fetch-parse-error",{originalErrorMessage:M.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const I=1e3*Number(w[1]),T=Date.now();return{token:m.token,expireTimeMillis:T+I,issuedAtTimeMillis:T}})).apply(this,arguments)}function o_(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const hf="firebase-app-check-store";let ff=null;function hw(){return ff||(ff=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(zi.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(hf,{keyPath:"compositeKey"})}}catch(t){e(zi.create("storage-open",{originalErrorMessage:t.message}))}}),ff)}function nc(){return(nc=(0,pe.Z)(function*(n,e){const r=(yield hw()).transaction(hf,"readwrite"),u=r.objectStore(hf).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var I;m(zi.create("storage-set",{originalErrorMessage:null===(I=w.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const Za=new ju.Yd("@firebase/app-check");function c_(n,e){return(0,xt.hl)()?function yI(n,e){return function pw(n,e){return nc.apply(this,arguments)}(function ic(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Za.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Fg(){return Og().enabled}function d_(){return jd.apply(this,arguments)}function jd(){return(jd=(0,pe.Z)(function*(){const n=Og();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mw={error:"UNKNOWN_ERROR"};function cS(n){return xt.US.encodeString(JSON.stringify(n),!1)}function mf(n){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,pe.Z)(function*(n,e=!1){const t=n.app;gI(t);const r=yr(t);let u,s=r.token;if(!s){const w=yield r.cachedTokenPromise;w&&Vg(w)&&(s=w)}if(!e&&s&&Vg(s))return{token:s.token};let m,d=!1;if(Fg()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ua(o_(t,yield d_()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),d=!0);const w=yield r.exchangeTokenPromise;return yield c_(t,w),aa(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),s=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Za.warn(w.message):Za.error(w),u=w}return s?(m={token:s.token},aa(t,Object.assign(Object.assign({},r),{token:s})),yield c_(t,s)):m=EI(u),d&&Wi(t,m),m})).apply(this,arguments)}function Ug(n,e){const t=yr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),aa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function yw(n){const{app:e}=n,t=yr(e);let r=t.tokenRefresher;r||(r=function wI(n){const{app:e}=n;return new oS((0,pe.Z)(function*(){let r;if(r=yr(e).token?yield mf(n,!0):yield mf(n),r.error)throw r.error}),()=>!0,()=>{const t=yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),aa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Wi(n,e){const t=yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function Vg(n){return n.expireTimeMillis-Date.now()>0}function EI(n){return{token:cS(mw),error:n}}class dS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yr(this.app);for(const t of e)Ug(this.app,t.next);return Promise.resolve()}}const Iw="app-check-internal";!function SI(){(0,_s._registerComponent)(new Bu.wA("app-check",n=>function hS(n,e){return new dS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Iw).initialize()})),(0,_s._registerComponent)(new Bu.wA(Iw,n=>function _w(n){return{getToken:e=>mf(n,e),addTokenListener:e=>function h_(n,e,t,r){const{app:s}=n,u=yr(s),d={next:t,error:r,type:e};if(aa(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Vg(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),yw(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>yw(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ug(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_s.registerVersion)("@firebase/app-check","0.5.8")}();class Hg{constructor(){return(0,Rn.vb)("app-check")}}"undefined"!=typeof window&&window;var wf=N(127);const PI=new c.OlP("angularfire2.auth.use-emulator"),Gg=new c.OlP("angularfire2.auth.settings"),w_=new c.OlP("angularfire2.auth.tenant-id"),qg=new c.OlP("angularfire2.auth.langugage-code"),$d=new c.OlP("angularfire2.auth.use-device-language"),Aw=new c.OlP("angularfire.auth.persistence"),Zg=(n,e,t,r,s,u,d,m)=>(0,dt.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),d)for(const[I,T]of Object.entries(d))w.settings[I]=T;return m&&w.setPersistence(m),w},[t,r,s,u,d,m]);let sc=(()=>{class n{constructor(t,r,s,u,d,m,w,I,T,M,L,G){const ee=new xr.x,Se=nt(void 0).pipe((0,kg.Q)(d.outsideAngular),cn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8775)))),(0,gt.U)(()=>(0,dt.on)(t,u,r)),(0,gt.U)(Me=>Zg(Me,u,m,I,T,M,w,L)),Qy({bufferSize:1,refCount:!1}));if($o(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{Se.pipe(Xo()).subscribe();const vt=Se.pipe(cn(st=>st.getRedirectResult().then(St=>St,()=>null)),Rn.iC,Qy({bufferSize:1,refCount:!1})),Ct=Se.pipe(cn(st=>new wn.y(St=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(Xe=>St.next(Xe),Xe=>St.error(Xe),()=>St.complete()))})))),ht=Se.pipe(cn(st=>new wn.y(St=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(Xe=>St.next(Xe),Xe=>St.error(Xe),()=>St.complete()))}))));this.authState=vt.pipe(ew(Ct),(0,Jy.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular)),this.user=vt.pipe(ew(ht),(0,Jy.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular)),this.idToken=this.user.pipe(cn(st=>st?(0,Wt.D)(st.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(cn(st=>st?(0,Wt.D)(st.getIdTokenResult()):nt(null))),this.credential=(0,X0.T)(vt,ee,this.authState.pipe(Zn(st=>!st))).pipe((0,gt.U)(st=>(null==st?void 0:st.user)?st:null),(0,Jy.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular))}return(0,dt.pX)(this,Se,u,{spy:{apply:(Me,vt,Ct)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&Ct.then(ht=>ee.next(ht))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(dt.Dh),c.LFG(dt.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Rn.HU),c.LFG(PI,8),c.LFG(Gg,8),c.LFG(w_,8),c.LFG(qg,8),c.LFG($d,8),c.LFG(Aw,8),c.LFG(Hg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Sw=(()=>{class n{constructor(){wf.Z.registerVersion("angularfire",Rn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[sc]}),n})();function zg(){return(0,Bn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Vn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function E_(n,e){return n===e}N(8775);var Je,xw=N(3942),Mw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ki={},b_=b_||{},kt=Mw||self;function za(){}function C_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ef(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var I_="closure_uid_"+(1e9*Math.random()>>>0),la=0;function D_(n,e,t){return n.call.apply(n.bind,arguments)}function Rw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Rr(n,e,t){return(Rr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D_:Rw).apply(null,arguments)}function bf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function kr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[s].apply(r,d)}}function Hu(){this.s=this.s,this.o=this.o}var VI={};Hu.prototype.s=!1,Hu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function LI(n){return Object.prototype.hasOwnProperty.call(n,I_)&&n[I_]||(n[I_]=++la)}(this);delete VI[n]}},Hu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},T_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function A_(n){return Array.prototype.concat.apply([],arguments)}function S_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Wg(n){return/^[\s\xa0]*$/.test(n)}var Ci,BI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Yi(n,e){return-1!=n.indexOf(e)}function Cf(n,e){return n<e?-1:n>e?1:0}e:{var x_=kt.navigator;if(x_){var M_=x_.userAgent;if(M_){Ci=M_;break e}}Ci=""}function Nw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Zs(n){const e={};for(const t in n)e[t]=n[t];return e}var jI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $I(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<jI.length;u++)t=jI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Kg(n){return Kg[" "](n),n}Kg[" "]=za;var Xg,n,Pw=Yi(Ci,"Opera"),Hd=Yi(Ci,"Trident")||Yi(Ci,"MSIE"),HI=Yi(Ci,"Edge"),Yg=HI||Hd,Qg=Yi(Ci,"Gecko")&&!(Yi(Ci.toLowerCase(),"webkit")&&!Yi(Ci,"Edge"))&&!(Yi(Ci,"Trident")||Yi(Ci,"MSIE"))&&!Yi(Ci,"Edge"),GI=Yi(Ci.toLowerCase(),"webkit")&&!Yi(Ci,"Edge");function Jg(){var n=kt.document;return n?n.documentMode:void 0}e:{var R_="",k_=(n=Ci,Qg?/rv:([^\);]+)(\)|;)/.exec(n):HI?/Edge\/([\d\.]+)/.exec(n):Hd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):GI?/WebKit\/(\S+)/.exec(n):Pw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(k_&&(R_=k_?k_[1]:""),Hd){var N_=Jg();if(null!=N_&&N_>parseFloat(R_)){Xg=String(N_);break e}}Xg=R_}var qI={};var zI=kt.document&&Hd&&(Jg()||parseInt(Xg,10))||void 0,If=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",za,e),kt.removeEventListener("test",za,e)}catch(t){}return n}();function li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Df(n,e){if(li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Qg){e:{try{Kg(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:O_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Df.Z.h.call(this)}}li.prototype.h=function(){this.defaultPrevented=!0},kr(Df,li);var O_={2:"touch",3:"pen",4:"mouse"};Df.prototype.h=function(){Df.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qi="closure_listenable_"+(1e6*Math.random()|0),Tf=0;function ci(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++Tf,this.ca=this.fa=!1}function ca(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ac(n){this.src=n,this.g={},this.h=0}function Ji(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=kw(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(ca(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Af(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}ac.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Af(n,e,r,s);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new ci(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var Gu="closure_lm_"+(1e6*Math.random()|0),qu={};function uc(n,e,t,r,s){if(r&&r.once)return cc(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)uc(n,e[u],t,r,s);return null}return t=nm(t),n&&n[Qi]?n.N(e,t,Ef(r)?!!r.capture:!!r,s):lc(n,e,t,!1,r,s)}function lc(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var d=Ef(s)?!!s.capture:!!s,m=em(n);if(m||(n[Gu]=m=new ac(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function qd(){var e=Fw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)If||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(hc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cc(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)cc(n,e[u],t,r,s);return null}return t=nm(t),n&&n[Qi]?n.O(e,t,Ef(r)?!!r.capture:!!r,s):lc(n,e,t,!0,r,s)}function dc(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)dc(n,e[u],t,r,s);else r=Ef(r)?!!r.capture:!!r,t=nm(t),n&&n[Qi]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Af(u=n.g[e],t,r,s))&&(ca(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=em(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Af(e,t,r,s)),(t=-1<n?e[n]:null)&&Zu(t))}function Zu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Qi])Ji(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=em(e))?(Ji(t,n),0==t.h&&(t.src=null,e[Gu]=null)):ca(n)}}}function hc(n){return n in qu?qu[n]:qu[n]="on"+n}function Fw(n,e){if(n.ca)n=!0;else{e=new Df(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Zu(n),n=t.call(r,e)}return n}function em(n){return(n=n[Gu])instanceof ac?n:null}var tm="__closure_events_fn_"+(1e9*Math.random()>>>0);function nm(n){return"function"==typeof n?n:(n[tm]||(n[tm]=function(e){return n.handleEvent(e)}),n[tm])}function _r(){Hu.call(this),this.i=new ac(this),this.P=this,this.I=null}function Nr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new li(e,n);else if(e instanceof li)e.target=e.target||n;else{var s=e;$I(e=new li(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];s=Sf(d,r,!0,e)&&s}if(s=Sf(d=e.g=n,r,!0,e)&&s,s=Sf(d,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Sf(d=e.g=t[u],r,!1,e)&&s}function Sf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&Ji(n.i,d),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}kr(_r,Hu),_r.prototype[Qi]=!0,_r.prototype.removeEventListener=function(n,e,t,r){dc(this,n,e,t,r)},_r.prototype.M=function(){if(_r.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ca(t[r]);delete n.g[e],n.h--}}this.I=null},_r.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},_r.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rm=kt.JSON.stringify;function Lw(){var n=Vw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var F_,P_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new KI,n=>n.reset());class KI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Uw(n){kt.setTimeout(()=>{throw n},0)}function im(n,e){F_||function YI(){var n=kt.Promise.resolve(void 0);F_=function(){n.then(Bw)}}(),sm||(F_(),sm=!0),Vw.add(n,e)}var sm=!1,Vw=new class WI{constructor(){this.h=this.g=null}add(e,t){const r=P_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Bw(){for(var n;n=Lw();){try{n.h.call(n.g)}catch(t){Uw(t)}var e=P_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}sm=!1}function om(n,e){_r.call(this),this.h=n||1,this.g=e||kt,this.j=Rr(this.kb,this),this.l=Date.now()}function L_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function jw(n,e,t){if("function"==typeof n)t&&(n=Rr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Rr(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function $w(n){n.g=jw(()=>{n.g=null,n.i&&(n.i=!1,$w(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}kr(om,_r),(Je=om.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nr(this,"tick"),this.da&&(L_(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){om.Z.M.call(this),L_(this),delete this.g};class U_ extends Hu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$w(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fc(n){Hu.call(this),this.h=n,this.g={}}kr(fc,Hu);var Hw=[];function QI(n,e,t,r){Array.isArray(t)||(t&&(Hw[0]=t.toString()),t=Hw);for(var s=0;s<t.length;s++){var u=uc(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function JI(n){Nw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Zu(e)},n),n.g={}}function V_(){this.g=!0}function xf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zd(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<s.length;d++)s[d]=""}}}return rm(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}fc.prototype.M=function(){fc.Z.M.call(this),JI(this)},fc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},V_.prototype.Aa=function(){this.g=!1},V_.prototype.info=function(){};var pc={},B_=null;function am(){return B_=B_||new _r}function j_(n){li.call(this,pc.Ma,n)}function zu(n){const e=am();Nr(e,new j_(e,n))}function qw(n,e){li.call(this,pc.STAT_EVENT,n),this.stat=e}function di(n){const e=am();Nr(e,new qw(e,n))}function Zw(n,e){li.call(this,pc.Na,n),this.size=e}function Mf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}pc.Ma="serverreachability",kr(j_,li),pc.STAT_EVENT="statevent",kr(qw,li),pc.Na="timingevent",kr(Zw,li);var um={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},zw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $_(){}function Ww(){}$_.prototype.h=null;var Kw,zd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function lm(){li.call(this,"d")}function Rf(){li.call(this,"c")}function Wd(){}function kf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new fc(this),this.P=Nf,this.W=new om(n=Yg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tD}function tD(){this.i=null,this.g="",this.h=!1}kr(lm,li),kr(Rf,li),kr(Wd,$_),Wd.prototype.g=function(){return new XMLHttpRequest},Wd.prototype.i=function(){return{}},Kw=new Wd;var Nf=45e3,cm={},Kd={};function Of(n,e,t){n.K=1,n.v=Yd(ko(e)),n.s=t,n.U=!0,Yw(n,null)}function Yw(n,e){n.F=Date.now(),dm(n),n.A=ko(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),W_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new tD,n.g=DE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new U_(Rr(n.Ia,n,n.g),n.O)),QI(n.V,n.g,"readystatechange",n.gb),e=n.H?Zs(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),zu(1),function XI(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var I=m[w].split("=");if(1<I.length){var T=I[0];I=I[1];var M=T.split("_");d=2<=M.length&&"type"==M[1]?d+(T+"=")+I+"&":d+(T+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Pf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ff(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=G_(n,t),s==Kd){4==e&&(n.o=4,di(14),r=!1),xf(n.j,n.m,null,"[Incomplete Response]");break}if(s==cm){n.o=4,di(15),xf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xf(n.j,n.m,s,null),hm(n,s)}Pf(n)&&s!=Kd&&s!=cm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ov(e),e.L=!0,di(11))):(xf(n.j,n.m,t,"[Invalid Chunked Response]"),Ku(n),Wu(n))}function G_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Kd:(t=Number(e.substring(t,r)),isNaN(t)?cm:(r+=1)+t>e.length?Kd:(e=e.substr(r,t),n.C=r+t,e))}function dm(n){n.Y=Date.now()+n.P,Qw(n,n.P)}function Qw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Mf(Rr(n.eb,n),e)}function gc(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function Wu(n){0==n.l.G||n.I||EE(n.l,n)}function Ku(n){gc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,L_(n.W),JI(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function hm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Y_(t.i,n)))if(t.I=n.N,!n.J&&Y_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=Mf(Rr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;vm(t),Zf(t)}sv(t),di(18)}if(1>=yc(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else vc(t,11)}else if((n.J||t.g==n)&&vm(t),!Wg(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const T=I[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const M=I[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const ee=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var u=r.i;!u.g&&(Yi(ee,"spdy")||Yi(ee,"quic")||Yi(ee,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Q_(u,u.h),u.h=null))}if(r.D){const Se=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.sa=Se,pn(r.F,r.D,Se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=IE(r,r.H?r.la:null,r.W),d.J){J_(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(gc(m),dm(m)),r.g=d}else vE(r);0<t.l.length&&zf(t)}else"stop"!=I[0]&&"close"!=I[0]||vc(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?vc(t,7):qf(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}zu(4)}catch(I){}}function fm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(C_(n)||"string"==typeof n)T_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(C_(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function q_(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(C_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function mc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof mc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Lf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Yu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)Yu(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function Yu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=kf.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==Ks(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const T=Ks(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>T)&&(3!=T||Yg||this.g&&(this.h.h||this.g.ga()||gE(this.g)))){this.I||4!=T||7==e||zu(8==e||0>=M?3:2),gc(this);var t=this.g.ba();this.N=t;t:if(Pf(this)){var r=gE(this.g);n="";var s=r.length,u=4==Ks(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ku(this),Wu(this);var d="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Gw(n,e,t,r,s,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wg(m)){var I=m;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,di(12),Ku(this),Wu(this);break e}xf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hm(this,t)}this.U?(Ff(this,T,d),Yg&&this.i&&3==T&&(QI(this.V,this.W,"tick",this.fb),this.W.start())):(xf(this.j,this.m,d,null),hm(this,d)),4==T&&Ku(this),this.i&&!this.I&&(4==T?EE(this.l,this):(this.i=!1,dm(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,di(12)):(this.o=0,di(13)),Ku(this),Wu(this)}}}catch(T){}},Je.fb=function(){if(this.g){var n=Ks(this.g),e=this.g.ga();this.C<e.length&&(gc(this),Ff(this,n,e),this.i&&4!=n&&dm(this))}},Je.cancel=function(){this.I=!0,Ku(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function eD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zu(3),di(17)),Ku(this),this.o=2,Wu(this)):Qw(this,this.Y-n)},(Je=mc.prototype).R=function(){Lf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return Lf(this),this.g.concat()},Je.get=function(n,e){return Yu(this.h,n)?this.h[n]:e},Je.set=function(n,e){Yu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var Jw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qu){this.g=void 0!==e?e:n.g,Uf(this,n.j),this.s=n.s,pm(this,n.i),Vf(this,n.m),this.l=n.l,e=n.h;var t=new Bf;t.i=e.i,e.g&&(t.g=new mc(e.g),t.h=e.h),Z_(this,t),this.o=n.o}else n&&(t=String(n).match(Jw))?(this.g=!!e,Uf(this,t[1]||"",!0),this.s=Qd(t[2]||""),pm(this,t[3]||"",!0),Vf(this,t[4]),this.l=Qd(t[5]||"",!0),Z_(this,t[6]||"",!0),this.o=Qd(t[7]||"")):(this.g=!!e,this.h=new Bf(null,this.g))}function ko(n){return new Qu(n)}function Uf(n,e,t){n.j=t?Qd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function pm(n,e,t){n.i=t?Qd(e,!0):e}function Vf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Z_(n,e,t){e instanceof Bf?(n.h=e,function rD(n,e){e&&!n.j&&(Wa(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(sE(this,r),W_(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Jd(e,CS)),n.h=new Bf(e,n.g))}function pn(n,e,t){n.h.set(e,t)}function Yd(n){return pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,nE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jd(e,z_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jd(e,z_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jd(t,"/"==t.charAt(0)?iE:rE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jd(t,nD)),n.join("")};var z_=/[#\/\?@]/g,rE=/[#\?:]/g,iE=/[#\?]/g,CS=/[#\?@]/g,nD=/#/g;function Bf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wa(n){n.g||(n.g=new mc,n.h=0,n.i&&function Xw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function sE(n,e){Wa(n),e=Xd(n,e),Yu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Yu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Lf(n)))}function sr(n,e){return Wa(n),e=Xd(n,e),Yu(n.g.h,e)}function W_(n,e,t){sE(n,e),0<t.length&&(n.i=null,n.g.set(Xd(n,e),S_(t)),n.h+=t.length)}function Xd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function aE(n){this.l=n||uE,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ea&&kt.g.Ea()&&kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=Bf.prototype).add=function(n,e){Wa(this),this.i=null,n=Xd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){Wa(this),this.g.forEach(function(t,r){T_(t,function(s){n.call(e,s,r,this)},this)},this)},Je.T=function(){Wa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},Je.R=function(n){Wa(this);var e=[];if("string"==typeof n)sr(this,n)&&(e=A_(e,this.g.get(Xd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=A_(e,n[t])}return e},Je.set=function(n,e){return Wa(this),this.i=null,sr(this,n=Xd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=s;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var uE=10;function K_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function yc(n){return n.h?1:n.g?n.g.size:0}function Y_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Q_(n,e){n.g?n.g.add(e):n.h=e}function J_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return S_(n.i)}function gm(){}function IS(){this.g=new gm}function cE(n,e,t){const r=t||"";try{fm(n,function(s,u){let d=s;Ef(s)&&(d=rm(s)),e.push(r+u+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function vs(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function jf(n){this.l=n.$b||null,this.j=n.ib||!1}function mm(n,e){_r.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=zs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aE.prototype.cancel=function(){if(this.i=lE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},gm.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},gm.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},kr(jf,$_),jf.prototype.g=function(){return new mm(this.l,this.j)},jf.prototype.i=function(n){return function(){return n}}({}),kr(mm,_r);var zs=0;function Ws(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ii(n){n.readyState=4,n.l=null,n.j=null,n.A=null,eh(n)}function eh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=mm.prototype).open=function(n,e){if(this.readyState!=zs)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,eh(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ii(this)),this.readyState=zs},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,eh(this)),this.g&&(this.readyState=3,eh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==kt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ws(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ii(this):eh(this),3==this.readyState&&Ws(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,Ii(this))},Je.Ta=function(n){this.g&&(this.response=n,Ii(this))},Je.ha=function(){this.g&&Ii(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(mm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dE=kt.JSON.parse;function or(n){_r.call(this),this.headers=new mc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hE,this.K=this.L=!1}kr(or,_r);var hE="",iD=/^https?$/i,sD=["POST","PUT"];function $f(n){return"content-type"==n.toLowerCase()}function fE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,tv(n),Hf(n)}function tv(n){n.D||(n.D=!0,Nr(n,"complete"),Nr(n,"error"))}function pE(n){if(n.h&&void 0!==b_&&(!n.C[1]||4!=Ks(n)||2!=n.ba()))if(n.v&&4==Ks(n))jw(n.Fa,0,n);else if(Nr(n,"readystatechange"),4==Ks(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(Jw)[1]||null;if(!s&&kt.self&&kt.self.location){var u=kt.self.location.protocol;s=u.substr(0,u.length-1)}r=!iD.test(s?s.toLowerCase():"")}t=r}if(t)Nr(n,"complete"),Nr(n,"success");else{n.m=6;try{var d=2<Ks(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",tv(n)}}finally{Hf(n)}}}function Hf(n,e){if(n.g){nv(n);const t=n.g,r=n.C[0]?za:null;n.g=null,n.C=null,e||Nr(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function nv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function Ks(n){return n.g?n.g.readyState:0}function gE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case hE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ym(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function mE(n){let e="";return Nw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pn(n,e,t))}function _c(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Gf(n){this.za=0,this.l=[],this.h=new V_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_c("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_c("baseRetryDelayMs",5e3,n),this.$a=_c("retryDelaySeedMs",1e4,n),this.Ya=_c("forwardChannelMaxRetries",2,n),this.ra=_c("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new aE(n&&n.concurrentRequestLimit),this.Ca=new IS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function qf(n){if(rv(n),3==n.G){var e=n.V++,t=ko(n.F);pn(t,"SID",n.J),pn(t,"RID",e),pn(t,"TYPE","terminate"),th(n,t),(e=new kf(n,n.h,e,void 0)).K=2,e.v=Yd(ko(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=DE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),dm(e)}CE(n)}function Zf(n){n.g&&(ov(n),n.g.cancel(),n.g=null)}function rv(n){Zf(n),n.u&&(kt.clearTimeout(n.u),n.u=null),vm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function _m(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&zf(n)}function zf(n){K_(n.i)||n.m||(n.m=!0,im(n.Ha,n),n.C=0)}function iv(n,e){var t;t=e?e.m:n.V++;const r=ko(n.F);pn(r,"SID",n.J),pn(r,"RID",t),pn(r,"AID",n.U),th(n,r),n.o&&n.s&&ym(r,n.o,n.s),t=new kf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=_E(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Q_(n.i,t),Of(t,r,e)}function th(n,e){n.j&&fm({},function(t,r){pn(e,r,t)})}function _E(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Rr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=s[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let I=s[w].h;const T=s[w].g;if(I-=u,0>I)u=Math.max(0,s[w].h-100),m=!1;else try{cE(T,d,"req"+I+"_")}catch(M){r&&r(T)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function vE(n){n.g||n.u||(n.Y=1,im(n.Ga,n),n.A=0)}function sv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Mf(Rr(n.Ga,n),bE(n,n.A)),n.A++,0))}function ov(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function wE(n){n.g=new kf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ko(n.oa);pn(e,"RID","rpc"),pn(e,"SID",n.J),pn(e,"CI",n.N?"0":"1"),pn(e,"AID",n.U),th(n,e),pn(e,"TYPE","xmlhttp"),n.o&&n.s&&ym(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Yd(ko(e)),t.s=null,t.U=!0,Yw(t,n)}function vm(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function EE(n,e){var t=null;if(n.g==e){vm(n),ov(n),n.g=null;var r=2}else{if(!Y_(n.i,e))return;t=e.D,J_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Nr(r=am(),new Zw(r,t,e,s)),zf(n)}else vE(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function yE(n,e){return!(yc(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Mf(Rr(n.Ha,n,e),bE(n,n.C)),n.C++,0)))}(n,e)||2==r&&sv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:vc(n,5);break;case 4:vc(n,10);break;case 3:vc(n,6);break;default:vc(n,2)}}function bE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function vc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Rr(n.jb,n);t||(t=new Qu("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||Uf(t,"https"),Yd(t)),function X_(n,e){const t=new V_;if(kt.Image){const r=new Image;r.onload=bf(vs,t,r,"TestLoadImage: loaded",!0,e),r.onerror=bf(vs,t,r,"TestLoadImage: error",!1,e),r.onabort=bf(vs,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=bf(vs,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else di(2);n.G=0,n.j&&n.j.va(e),CE(n),rv(n)}function CE(n){n.G=0,n.I=-1,n.j&&((0!=lE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,S_(n.l),n.l.length=0),n.j.ua())}function IE(n,e,t){let r=function eE(n){return n instanceof Qu?ko(n):new Qu(n,void 0)}(t);if(""!=r.i)e&&pm(r,e+"."+r.i),Vf(r,r.m);else{const s=kt.location;r=function tE(n,e,t,r){var s=new Qu(null,void 0);return n&&Uf(s,n),e&&pm(s,e),t&&Vf(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&Nw(n.aa,function(s,u){pn(r,u,s)}),t=n.sa,(e=n.D)&&t&&pn(r,e,t),pn(r,"VER",n.ma),th(n,r),r}function DE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new or(t&&n.Ba&&!n.qa?new jf({ib:!0}):n.qa)).L=n.H,e}function TE(){}function wm(){if(Hd&&!(10<=Number(zI)))throw Error("Environmental error: no available transport.")}function ws(n,e){_r.call(this),this.g=new Gf(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Wg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new nh(this)}function AE(n){lm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function SE(){Rf.call(this),this.status=1}function nh(n){this.g=n}(Je=or.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kw.g(),this.C=function H_(n){return n.h||(n.h=n.i())}(this.u?this.u:Kw),this.g.onreadystatechange=Rr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void fE(this,u)}n=t||"";const s=new mc(this.headers);r&&fm(r,function(u,d){s.set(d,u)}),r=function bS(n){e:{var e=$f;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=kt.FormData&&n instanceof kt.FormData,!(0<=kw(sD,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nv(this),0<this.B&&((this.K=function ev(n){return Hd&&function ZI(){return function Ow(n){var e=qI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=BI(String(Xg)).split("."),t=BI("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",u=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Cf(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Cf(0==s[2].length,0==u[2].length)||Cf(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rr(this.pa,this)):this.A=jw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){fE(this,u)}},Je.pa=function(){void 0!==b_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Nr(this,"complete"),Nr(this,"abort"),Hf(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hf(this,!0)),or.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?pE(this):this.cb())},Je.cb=function(){pE(this)},Je.ba=function(){try{return 2<Ks(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dE(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=Gf.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new kf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Zs(u),$I(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_E(this,s,e),pn(t=ko(this.F),"RID",n),pn(t,"CVER",22),this.D&&pn(t,"X-HTTP-Session-Id",this.D),th(this,t),this.o&&u&&ym(t,this.o,u),Q_(this.i,s),this.Ra&&pn(t,"TYPE","init"),this.ja?(pn(t,"$req",e),pn(t,"SID","null"),s.$=!0,Of(s,t,null)):Of(s,t,e),this.G=2}}else 3==this.G&&(n?iv(this,n):0==this.l.length||K_(this.i)||iv(this))},Je.Ga=function(){if(this.u=null,wE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Mf(Rr(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,di(10),Zf(this),wE(this))},Je.ab=function(){null!=this.v&&(this.v=null,Zf(this),sv(this),di(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),di(2)):(this.h.info("Failed to ping google.com"),di(1))},(Je=TE.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},wm.prototype.g=function(n,e){return new ws(n,e)},kr(ws,_r),ws.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),im(Rr(n.hb,n,e))),di(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=IE(n,null,n.W),zf(n)},ws.prototype.close=function(){qf(this.g)},ws.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,_m(this.g,e)}else this.v?((e={}).__data__=rm(n),_m(this.g,e)):_m(this.g,n)},ws.prototype.M=function(){this.g.j=null,delete this.j,qf(this.g),delete this.g,ws.Z.M.call(this)},kr(AE,lm),kr(SE,Rf),kr(nh,TE),nh.prototype.xa=function(){Nr(this.g,"a")},nh.prototype.wa=function(n){Nr(this.g,new AE(n))},nh.prototype.va=function(n){Nr(this.g,new SE(n))},nh.prototype.ua=function(){Nr(this.g,"b")},wm.prototype.createWebChannel=wm.prototype.g,ws.prototype.send=ws.prototype.u,ws.prototype.open=ws.prototype.m,ws.prototype.close=ws.prototype.close,um.NO_ERROR=0,um.TIMEOUT=8,um.HTTP_ERROR=6,zw.COMPLETE="complete",Ww.EventType=zd,zd.OPEN="a",zd.CLOSE="b",zd.ERROR="c",zd.MESSAGE="d",_r.prototype.listen=_r.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.La,or.prototype.getLastErrorCode=or.prototype.Da,or.prototype.getStatus=or.prototype.ba,or.prototype.getResponseJson=or.prototype.Qa,or.prototype.getResponseText=or.prototype.ga,or.prototype.send=or.prototype.ea;var xE=Ki.createWebChannelTransport=function(){return new wm},ME=Ki.getStatEventTarget=function(){return am()},Em=Ki.ErrorCode=um,RE=Ki.EventType=zw,kE=Ki.Event=pc,av=Ki.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},NE=Ki.FetchXmlHttpFactory=jf,Wf=Ki.WebChannel=Ww,OE=Ki.XhrIo=or;const uv="@firebase/firestore";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let Ys="9.8.0";const Ju=new ju.Yd("@firebase/firestore");function lv(){return Ju.logLevel}function Fe(n,...e){if(Ju.logLevel<=ju.in.DEBUG){const t=e.map(Cm);Ju.debug(`Firestore (${Ys}): ${n}`,...t)}}function jn(n,...e){if(Ju.logLevel<=ju.in.ERROR){const t=e.map(Cm);Ju.error(`Firestore (${Ys}): ${n}`,...t)}}function bm(n,...e){if(Ju.logLevel<=ju.in.WARN){const t=e.map(Cm);Ju.warn(`Firestore (${Ys}): ${n}`,...t)}}function Cm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: `+n;throw jn(e),new Error(e)}function Rt(n,e){n||it()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class PE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Im{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class Dm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $n{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let d=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Kn,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const I=d;e.enqueueRetryable((0,pe.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},w=I=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(I=>w(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?w(I):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Kn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new PE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Or(e)}}class DS{constructor(e,t,r){this.type="FirstParty",this.user=Or.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class FE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new DS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new LE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Xi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function UE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Xi.A=-1;class cv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=UE(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function ih(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function VE(n){return n+"\0"}class gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new gn(0,0))}static max(){return new Tt(new gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function BE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sh{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===sh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gt extends sh{construct(e,t,r){return new Gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Gt(t)}static emptyPath(){return new Gt([])}}const jE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends sh{construct(e,t,r){return new vr(e,t,r)}static isValidIdentifier(e){return jE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(d=!d,s++):"."!==m||d?(r+=m,s++):(u(),s++)}if(u(),d)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(t)}static emptyPath(){return new vr([])}}class da{constructor(e){this.fields=e,e.sort(vr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const uD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xu(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=uD.exec(n);if(Rt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kn(n.seconds),nanos:kn(n.nanos)}}function kn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function el(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function Tm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $E(n){const e=n.mapValue.fields.__previous_value__;return Tm(e)?$E(e):e}function oh(n){const e=Xu(n.mapValue.fields.__local_write_time__.timestampValue);return new gn(e.seconds,e.nanos)}class lD{constructor(e,t,r,s,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Ka{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ka("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}function Am(n){return null==n}function Sm(n){return 0===n&&1/n==-1/0}function cD(n){return"number"==typeof n&&Number.isInteger(n)&&!Sm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Gt.fromString(e))}static fromName(e){return new $e(Gt.fromString(e).popFirst(5))}static empty(){return new $e(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Gt(e.slice()))}}const Ya={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ec={nullValue:"NULL_VALUE"};function bc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tm(n)?4:fv(n)?9007199254740991:10:it()}function ha(n,e){if(n===e)return!0;const t=bc(n);if(t!==bc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return oh(n).isEqual(oh(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Xu(r.timestampValue),d=Xu(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,el(n.bytesValue).isEqual(el(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return kn(r.geoPointValue.latitude)===kn(s.geoPointValue.latitude)&&kn(r.geoPointValue.longitude)===kn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return kn(r.integerValue)===kn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=kn(r.doubleValue),d=kn(s.doubleValue);return u===d?Sm(u)===Sm(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ih(n.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:return function(r,s){const u=r.mapValue.fields||{},d=s.mapValue.fields||{};if(BE(u)!==BE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!ha(u[m],d[m])))return!1;return!0}(n,e);default:return it()}var s}function ah(n,e){return void 0!==(n.values||[]).find(t=>ha(t,e))}function Qs(n,e){if(n===e)return 0;const t=bc(n),r=bc(e);if(t!==r)return Ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=kn(s.integerValue||s.doubleValue),m=kn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return HE(n.timestampValue,e.timestampValue);case 4:return HE(oh(n),oh(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(s,u){const d=el(s),m=el(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const I=Ot(d[w],m[w]);if(0!==I)return I}return Ot(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Ot(kn(s.latitude),kn(u.latitude));return 0!==d?d:Ot(kn(s.longitude),kn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const I=Qs(d[w],m[w]);if(I)return I}return Ot(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Ya.mapValue&&u===Ya.mapValue)return 0;if(s===Ya.mapValue)return 1;if(u===Ya.mapValue)return-1;const d=s.fields||{},m=Object.keys(d),w=u.fields||{},I=Object.keys(w);m.sort(),I.sort();for(let T=0;T<m.length&&T<I.length;++T){const M=Ot(m[T],I[T]);if(0!==M)return M;const L=Qs(d[m[T]],w[I[T]]);if(0!==L)return L}return Ot(m.length,I.length)}(n.mapValue,e.mapValue);default:throw it()}}function HE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=Xu(n),r=Xu(e),s=Ot(t.seconds,r.seconds);return 0!==s?s:Ot(t.nanos,r.nanos)}function uh(n){return dv(n)}function dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Xu(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?el(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=dv(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of s)d?d=!1:u+=",",u+=`${m}:${dv(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function Cc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hv(n){return!!n&&"integerValue"in n}function lh(n){return!!n&&"arrayValue"in n}function GE(n){return!!n&&"nullValue"in n}function qE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qa(n){return!!n&&"mapValue"in n}function Qf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dD(n){return"nullValue"in n?Ec:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cc(Ka.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function ZE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cc(Ka.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ya:it()}function zE(n,e){const t=Qs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function pv(n,e){const t=Qs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qf(t)}setAll(e){let t=vr.emptyPath(),r={},s=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}d?r[m.lastSegment()]=Qf(d):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Qa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Qa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){wc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new hi(Qf(this.value))}}function xm(n){const e=[];return wc(n.fields,(t,r)=>{const s=new vr([t]);if(Qa(r)){const u=xm(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new da(e)}class mn{constructor(e,t,r,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new mn(e,0,Tt.min(),Tt.min(),hi.empty(),0)}static newFoundDocument(e,t,r){return new mn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new mn(e,2,t,Tt.min(),hi.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Tt.min(),hi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Mm(n){return n.fields.find(e=>2===e.kind)}function Ic(n){return n.fields.filter(e=>2!==e.kind)}Jf.UNKNOWN_ID=-1;class Rm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xf(0,Js.min())}}function km(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Tt.fromTimestamp(1e9===r?new gn(t+1,0):new gn(t,r));return new Js(s,$e.empty(),e)}function hD(n){return new Js(n.readTime,n.key,-1)}class Js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Js(Tt.min(),$e.empty(),-1)}static max(){return new Js(Tt.max(),$e.empty(),-1)}}function WE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}class Yn{constructor(e,t){this.comparator=e,this.root=t||Zr.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nm(this.root,e,this.comparator,!0)}}class Nm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:Zr.RED,this.left=null!=s?s:Zr.EMPTY,this.right=null!=u?u:Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Zr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Zr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1,Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new KE(this.data.getIterator())}getIteratorFrom(e){return new KE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class KE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ch(n){return n.hasNext()?n.getNext():void 0}class fD{constructor(e,t=null,r=[],s=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function gv(n,e=null,t=[],r=[],s=null,u=null,d=null){return new fD(n,e,t,r,s,u,d)}function tl(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+uh(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Am(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uh(r)).join(",")),e.P=t}return e.P}function ep(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!yD(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!ha(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_D(n.startAt,e.startAt)&&_D(n.endAt,e.endAt)}function tp(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Om(n,e){return n.filters.filter(t=>t instanceof Er&&t.field.isEqual(e))}function YE(n,e,t){let r=Ec,s=!0;for(const u of Om(n,e)){let d=Ec,m=!0;switch(u.op){case"<":case"<=":d=dD(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Ec}zE({value:r,inclusive:s},{value:d,inclusive:m})<0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];zE({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function QE(n,e,t){let r=Ya,s=!0;for(const u of Om(n,e)){let d=Ya,m=!0;switch(u.op){case">=":case">":d=ZE(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Ya}pv({value:r,inclusive:s},{value:d,inclusive:m})>0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];pv({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class Er extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new mv(e,t,r):"array-contains"===t?new gD(e,r):"in"===t?new _v(e,r):"not-in"===t?new mD(e,r):"array-contains-any"===t?new eb(e,r):new Er(e,t,r)}static V(e,t,r){return"in"===t?new JE(e,r):new yv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Qs(t,this.value)):null!==t&&bc(this.value)===bc(t)&&this.v(Qs(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class mv extends Er{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class JE extends Er{constructor(e,t){super(e,"in",t),this.keys=XE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yv extends Er{constructor(e,t){super(e,"not-in",t),this.keys=XE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function XE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class gD extends Er{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lh(t)&&ah(t.arrayValue,this.value)}}class _v extends Er{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ah(this.value.arrayValue,t)}}class mD extends Er{constructor(e,t){super(e,"not-in",t)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ah(this.value.arrayValue,t)}}class eb extends Er{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ah(this.value.arrayValue,r))}}class nl{constructor(e,t){this.position=e,this.inclusive=t}}class Dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function yD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function vv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):Qs(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function _D(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ha(n.position[t],e.position[t]))return!1;return!0}class Ja{constructor(e,t=null,r=[],s=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function np(n,e,t,r,s,u,d,m){return new Ja(n,e,t,r,s,u,d,m)}function dh(n){return new Ja(n)}function Tc(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function wv(n){for(const e of n.filters)if(e.S())return e.field;return null}function tb(n){return null!==n.collectionGroup}function Ac(n){const e=qe(n);if(null===e.D){e.D=[];const t=wv(e),r=Tc(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Dc(t)),e.D.push(new Dc(vr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Dc(vr.keyField(),u))}}}return e.D}function Xs(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=gv(e.path,e.collectionGroup,Ac(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ac(e))t.push(new Dc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new nl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new nl(e.startAt.position,e.startAt.inclusive):null;e.C=gv(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.C}function nb(n,e,t){return new Ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rp(n,e){return ep(Xs(n),Xs(e))&&n.limitType===e.limitType}function rb(n){return`${tl(Xs(n))}|lt:${n.limitType}`}function Pm(n){return`Query(target=${function pD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${uh(r.value)}`;var r}).join(", ")}]`),Am(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>uh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>uh(t)).join(",")),`Target(${e})`}(Xs(n))}; limitType=${n.limitType})`}function Fm(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):$e.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,d){const m=vv(s,u,d);return s.inclusive?m<=0:m<0}(t.startAt,Ac(t),r)||t.endAt&&!function(s,u,d){const m=vv(s,u,d);return s.inclusive?m>=0:m>0}(t.endAt,Ac(t),r)));var t,r}function Lm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ip(n){return(e,t)=>{let r=!1;for(const s of Ac(n)){const u=sp(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function sp(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(s,u,d){const m=u.data.field(s),w=d.data.field(s);return null!==m&&null!==w?Qs(m,w):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function ib(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sm(e)?"-0":e}}function Ev(n){return{integerValue:""+n}}function bv(n,e){return cD(e)?Ev(e):ib(n,e)}class Um{constructor(){this._=void 0}}function vD(n,e,t){return n instanceof op?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Sc?ob(n,e):n instanceof eo?Iv(n,e):function(r,s){const u=sb(r,s),d=wD(u)+wD(r.k);return hv(u)&&hv(r.k)?Ev(d):ib(r.M,d)}(n,e)}function Cv(n,e,t){return n instanceof Sc?ob(n,e):n instanceof eo?Iv(n,e):t}function sb(n,e){return n instanceof No?hv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class op extends Um{}class Sc extends Um{constructor(e){super(),this.elements=e}}function ob(n,e){const t=Dv(e);for(const r of n.elements)t.some(s=>ha(s,r))||t.push(r);return{arrayValue:{values:t}}}class eo extends Um{constructor(e){super(),this.elements=e}}function Iv(n,e){let t=Dv(e);for(const r of n.elements)t=t.filter(s=>!ha(s,r));return{arrayValue:{values:t}}}class No extends Um{constructor(e,t){super(),this.M=e,this.k=t}}function wD(n){return kn(n.integerValue||n.doubleValue)}function Dv(n){return lh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ap{constructor(e,t){this.field=e,this.transform=t}}class ab{constructor(e,t){this.version=e,this.transformResults=t}}class br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function up(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fh{}function ub(n,e,t){n instanceof lp?function(r,s,u){const d=r.value.clone(),m=fb(r.fieldTransforms,s,u.transformResults);d.setAll(m),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof xc?function(r,s,u){if(!up(r.precondition,s))return void s.convertToUnknownDocument(u.version);const d=fb(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(hb(r)),m.setAll(d),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Vm(n,e,t){var s;n instanceof lp?function(r,s,u){if(!up(r.precondition,s))return;const d=r.value.clone(),m=pb(r.fieldTransforms,u,s);d.setAll(m),s.convertToFoundDocument(db(s),d).setHasLocalMutations()}(n,e,t):n instanceof xc?function(r,s,u){if(!up(r.precondition,s))return;const d=pb(r.fieldTransforms,u,s),m=s.data;m.setAll(hb(r)),m.setAll(d),s.convertToFoundDocument(db(s),m).setHasLocalMutations()}(n,e,t):up(n.precondition,s=e)&&s.convertToNoDocument(Tt.min())}function lb(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=sb(r.transform,s||null);null!=u&&(null==t&&(t=hi.empty()),t.set(r.field,u))}return t||null}function cb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ih(t,r,(s,u)=>function TS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sc&&r instanceof Sc||t instanceof eo&&r instanceof eo?ih(t.elements,r.elements,ha):t instanceof No&&r instanceof No?ha(t.k,r.k):t instanceof op&&r instanceof op);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function db(n){return n.isFoundDocument()?n.version:Tt.min()}class lp extends fh{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}}class xc extends fh{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}}function hb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fb(n,e,t){const r=new Map;Rt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,m=e.data.field(u.field);r.set(u.field,Cv(d,m,t[s]))}return r}function pb(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,vD(u,d,e))}return r}class Xa extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Bm extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class gb{constructor(e){this.count=e}}var Qn,qt;function Tv(n){switch(n){default:return it();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function Av(n){if(void 0===n)return jn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Qn.OK:return ce.OK;case Qn.CANCELLED:return ce.CANCELLED;case Qn.UNKNOWN:return ce.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return ce.INTERNAL;case Qn.UNAVAILABLE:return ce.UNAVAILABLE;case Qn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Qn.NOT_FOUND:return ce.NOT_FOUND;case Qn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Qn.ABORTED:return ce.ABORTED;case Qn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Qn.DATA_LOSS:return ce.DATA_LOSS;default:return it()}}(qt=Qn||(Qn={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";class rl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){wc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return Kf(this.inner)}size(){return this.innerSize}}const mb=new Yn($e.comparator);function to(){return mb}const ED=new Yn($e.comparator);function Sv(...n){let e=ED;for(const t of n)e=e.insert(t.key,t);return e}function cp(){return new rl(n=>n.toString(),(n,e)=>n.isEqual(e))}const dp=new Yn($e.comparator),bD=new dn($e.comparator);function Qt(...n){let e=bD;for(const t of n)e=e.add(t);return e}const fa=new dn(Ot);function jm(){return fa}class il{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t)),new il(Tt.min(),r,jm(),to(),Qt())}}class eu{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new eu(wr.EMPTY_BYTE_STRING,t,Qt(),Qt(),Qt())}}class $m{constructor(e,t,r,s){this.O=e,this.removedTargetIds=t,this.key=r,this.F=s}}class yb{constructor(e,t){this.targetId=e,this.$=t}}class _b{constructor(e,t,r=wr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class hp{constructor(){this.B=0,this.L=wb(),this.U=wr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Qt(),t=Qt(),r=Qt();return this.L.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:it()}}),new eu(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=wb()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Hm{constructor(e){this.nt=e,this.st=new Map,this.it=to(),this.rt=vb(),this.ot=new dn(Ot)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,s)=>{this.ft(s)&&t(s)})}_t(e){const t=e.targetId,r=e.$.count,s=this.wt(t);if(s){const u=s.target;if(tp(u))if(0===r){const d=new $e(u.path);this.ct(t,d,mn.newNoDocument(d,Tt.min()))}else Rt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&tp(m.target)){const w=new $e(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,mn.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Qt();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const I=this.wt(w);return!I||2===I.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const s=new il(e,t,this.ot,this.it,r);return this.it=to(),this.rt=vb(),this.ot=new dn(Ot),s}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new hp,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new dn(Ot),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new hp),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function vb(){return new Yn($e.comparator)}function wb(){return new Yn($e.comparator)}const Eb={asc:"ASCENDING",desc:"DESCENDING"},bb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class xv{constructor(e,t){this.databaseId=e,this.N=t}}function ph(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cb(n,e){return n.N?e.toBase64():e.toUint8Array()}function CD(n,e){return ph(n,e.toTimestamp())}function zr(n){return Rt(!!n),Tt.fromTimestamp(function(e){const t=Xu(e);return new gn(t.seconds,t.nanos)}(n))}function fp(n,e){return(t=n,new Gt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Gm(n){const e=Gt.fromString(n);return Rt(Rb(e)),e}function gh(n,e){return fp(n.databaseId,e.path)}function no(n,e){const t=Gm(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Db(t))}function pp(n,e){return fp(n.databaseId,e)}function Ib(n){const e=Gm(n);return 4===e.length?Gt.emptyPath():Db(e)}function gp(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Db(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Tb(n,e,t){return{name:gh(n,e),fields:t.value.mapValue.fields}}function Mv(n,e,t){const r=no(n,e.name),s=zr(e.updateTime),u=new hi({mapValue:{fields:e.fields}}),d=mn.newFoundDocument(r,s,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function mp(n,e){let t;if(e instanceof lp)t={update:Tb(n,e.key,e.value)};else if(e instanceof Xa)t={delete:gh(n,e.key)};else if(e instanceof xc)t={update:Tb(n,e.key,e.data),updateMask:yp(e.fieldMask)};else{if(!(e instanceof Bm))return it();t={verify:gh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof op)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Sc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof eo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof No)return{fieldPath:u.field.canonicalString(),increment:d.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:CD(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:it()),t;var s}function qm(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?br.updateTime(zr(s.updateTime)):void 0!==s.exists?br.exists(s.exists):br.none():br.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,d){let m=null;"setToServerValue"in d?(Rt("REQUEST_TIME"===d.setToServerValue),m=new op):"appendMissingElements"in d?m=new Sc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new eo(d.removeAllFromArray.values||[]):"increment"in d?m=new No(u,d.increment):it();const w=vr.fromServerFormat(d.fieldPath);return new ap(w,m)}(n,s)):[];var s;if(e.update){const s=no(n,e.update.name),u=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new da((e.updateMask.fieldPaths||[]).map(I=>vr.fromServerFormat(I)));return new xc(s,u,d,t,r)}return new lp(s,u,t,r)}if(e.delete){const s=no(n,e.delete);return new Xa(s,t)}if(e.verify){const s=no(n,e.verify);return new Bm(s,t)}return it()}function xb(n,e){return{documents:[pp(n,e.path)]}}function kv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=pp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0===w.length)return;const I=w.map(T=>function(M){if("=="===M.op){if(qE(M.value))return{unaryFilter:{field:Oo(M.field),op:"IS_NAN"}};if(GE(M.value))return{unaryFilter:{field:Oo(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(qE(M.value))return{unaryFilter:{field:Oo(M.field),op:"IS_NOT_NAN"}};if(GE(M.value))return{unaryFilter:{field:Oo(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(M.field),op:Di(M.op),value:M.value}}}(T));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(I=>{return{field:Oo((T=I).field),direction:Mb(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(I=e.limit,n.N||Am(I)?I:{value:I});var I,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Nv(n){let e=Ib(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Rt(1===r);const T=t.from[0];T.allDescendants?s=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=Ov(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(T=>{return new Dc(mh((M=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(T){let M;return M="object"==typeof T?T.value:T,Am(M)?null:M}(t.limit));let w=null;var T;t.startAt&&(w=new nl((T=t.startAt).values||[],!!T.before));let I=null;return t.endAt&&(I=function(T){return new nl(T.values||[],!T.before)}(t.endAt)),np(e,s,d,u,m,"F",w,I)}function Ov(n){return n?void 0!==n.unaryFilter?[AS(n)]:void 0!==n.fieldFilter?[DD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Ov(e)).reduce((e,t)=>e.concat(t)):it():[]}function Mb(n){return Eb[n]}function Di(n){return bb[n]}function Oo(n){return{fieldPath:n.canonicalString()}}function mh(n){return vr.fromServerFormat(n.fieldPath)}function DD(n){return Er.create(mh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function AS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=mh(n.unaryFilter.field);return Er.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=mh(n.unaryFilter.field);return Er.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mh(n.unaryFilter.field);return Er.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=mh(n.unaryFilter.field);return Er.create(s,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function yp(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Rb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Wr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Pv(e)),e=TD(n.get(t),e);return Pv(e)}function TD(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Pv(n){return n+"\x01\x01"}function pa(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Gt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&it(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,d),s+="\0";break;case"\x11":s+=n.substring(u,d+1);break;default:it()}u=d+2}return new Gt(r)}const kb=["userId","batchId"];function yh(n,e){return[n,Wr(e)]}function Fv(n,e,t){return[n,Wr(e),t]}const Nb={},Zm=["prefixPath","collectionGroup","readTime","documentId"],Lv=["prefixPath","collectionGroup","documentId"],SS=["collectionGroup","readTime","prefixPath","documentId"],Ob=["canonicalId","targetId"],AD=["targetId","path"],Pb=["path","targetId"],zm=["collectionId","parent"],Fb=["indexId","uid"],SD=["uid","sequenceNumber"],Uv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vv=["indexId","uid","orderedDocumentKey"],xS=["userId","collectionPath","documentId"],xD=["userId","collectionPath","largestBatchId"],MD=["userId","collectionGroup","largestBatchId"],Bv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Lb=[...Bv,"documentOverlays"],Ub=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vb=[...Ub,"indexConfiguration","indexState","indexEntries"],jv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let s=0,u=0,d=!1;e.forEach(m=>{++s,m.next(()=>{++u,d&&u===s&&t()},w=>r(w))}),d=!0,u===s&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(s=>s?fe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}}class _p{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Kn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new _h(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const s=Gb(r.target.error);this.At.reject(new _h(e,s))}}static open(e,t,r,s){try{return new _p(t,e.transaction(s,r))}catch(u){throw new _h(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $b(t)}}class Po{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Po.Vt((0,xt.z$)())&&jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Mc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,xt.hl)())return!1;if(Po.St())return!0;const e=(0,xt.z$)(),t=Po.Vt(e),r=0<t&&t<10,s=Po.Dt(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{s(new _h(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;s("VersionError"===m.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new _h(e,m))},u.onupgradeneeded=d=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,pe.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=_p.open(u.db,e,d?"readonly":"readwrite",r),I=s(w).next(T=>(w.bt(),T)).catch(T=>(w.abort(T),fe.reject(T))).toPromise();return I.catch(()=>{}),yield w.Rt,I}catch(w){const I="FirebaseError"!==w.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",I),u.close(),!I)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Mc(this.Ft.delete())}}class _h extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sl(n){return"IndexedDbTransactionError"===n.name}class $b{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mc(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Mc(this.store.add(e))}get(e){return Mc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Mc(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Mc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.Kt(s,(d,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new fe((u,d)=>{s.onerror=m=>{d(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const s=this.cursor(r);return this.Kt(s,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Kt(s,t)}zt(e){const t=this.cursor({});return new fe((r,s)=>{t.onerror=u=>{const d=Gb(u.target.error);s(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((s,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void s();const w=new jb(m),I=t(m.primaryKey,m.value,w);if(I instanceof fe){const T=I.catch(M=>(w.done(),fe.reject(M)));r.push(T)}w.isDone?s():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Mc(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Gb(r.target.error);t(s)}})}let Hb=!1;function Gb(n){const e=Po.Vt((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hb||(Hb=!0,setTimeout(()=>{throw r},0)),r}}return n}class $v extends Bb{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Kr(n,e){const t=qe(n);return Po.xt(t.Ht,e)}class qb{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&ub(u,e,r[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Vm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Vm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(Tt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&ih(this.mutations,e.mutations,(t,r)=>cb(t,r))&&ih(this.baseMutations,e.baseMutations,(t,r)=>cb(t,r))}}class Zb{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Rt(e.mutations.length===r.length);let s=dp;const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new Zb(e,t,r,s)}}class zb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rc{constructor(e,t,r,s,u=Tt.min(),d=Tt.min(),m=wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class RD{constructor(e){this.Jt=e}}function kD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:kc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:gh(s=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ph(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:vh(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:vh(e.version)}}var s,u;return r}function kc(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ol(n){const e=new gn(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function al(n,e){const t=(e.baseMutations||[]).map(u=>qm(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>qm(n.Jt,u)),s=gn.fromMillis(e.localWriteTimeMs);return new qb(e.batchId,s,t,r)}function wh(n){const e=ol(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ol(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var s;return void 0!==n.query.documents?(Rt(1===(s=n.query).documents.length),r=Xs(dh(Ib(s.documents[0])))):r=Xs(Nv(n.query)),new Rc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken))}function Hv(n,e){const t=vh(e.snapshotVersion),r=vh(e.lastLimboFreeSnapshotVersion);let s;s=tp(e.target)?xb(n.Jt,e.target):kv(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Wb(n){const e=Nv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?nb(e,e.limit,"L"):e}function vp(n,e){return new zb(e.largestBatchId,qm(n.Jt,e.overlayMutation))}function Gv(n,e){const t=e.path.lastSegment();return[n,Wr(e.path.popLast()),t]}class ND{getBundleMetadata(e,t){return qv(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:ol(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return qv(e).put({bundleId:(r=t).id,createTime:vh(zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return OD(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:Wb(s.bundledQuery),readTime:ol(s.readTime)};var s})}saveNamedQuery(e,t){return OD(e).put({name:(r=t).name,readTime:vh(zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qv(n){return Kr(n,"bundles")}function OD(n){return Kr(n,"namedQueries")}class Zv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Zv(e,t.uid||"")}getOverlay(e,t){return wp(e).get(Gv(this.userId,t)).next(r=>r?vp(this.M,r):null)}saveOverlays(e,t,r){const s=[];return r.forEach((u,d)=>{const m=new zb(t,d);s.push(this.Xt(e,m))}),fe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(Wr(d.getCollectionPath())));const u=[];return s.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(wp(e).Qt("collectionPathOverlayIndex",m))}),fe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=cp(),u=Wr(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return wp(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const I=vp(this.M,w);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=cp();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wp(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,I,T)=>{const M=vp(this.M,I);u.size()<s||M.largestBatchId===d?(u.set(M.getKey(),M),d=M.largestBatchId):T.done()}).next(()=>u)}Xt(e,t){return wp(e).put(function(r,s,u){const[d,m,w]=Gv(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:mp(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function wp(n){return Kr(n,"documentOverlays")}class tu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(kn(e.integerValue));else if("doubleValue"in e){const r=kn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Sm(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(el(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?fv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const s of Object.keys(r))this.re(s,t),this.te(r[s],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const s of r)this.te(s,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function PD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function FD(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=PD(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}tu.fe=new tu;class RS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const s=t.codePointAt(0);this._e(240|s>>>18),this._e(128|63&s>>>12),this._e(128|63&s>>>6),this._e(128|63&s)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const s=t.codePointAt(0);this.ge(240|s>>>18),this.ge(128|63&s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s)}}this.ye()}Te(e){const t=this.Ee(e),r=FD(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Re(e){const t=this.Ee(e),r=FD(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class kS{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class LD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Ep{constructor(){this.De=new RS,this.Ce=new kS(this.De),this.xe=new LD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Nc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nc(this.indexId,this.documentKey,this.arrayValue,r)}}function Eh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Kb(n.arrayValue,e.arrayValue),0!==t?t:(t=Kb(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function Kb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class zv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Mm(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ic(e);let s=0,u=0;for(;s<r.length&&this.Be(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Fe){const d=r[s];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++s}for(;s<r.length;++s){const d=r[s];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class UD{constructor(){this.qe=new Es}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Js.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class Es{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new dn(Gt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new dn(Gt.comparator)).toArray()}}const Wm=new Uint8Array(0);class Wv{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Es,this.Ge=new rl(r=>tl(r),(r,s)=>ep(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Wr(s)};return Yb(e).put(u)}return fe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[VE(t),""],!1,!0);return Yb(e).qt(s).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(pa(d.parent))}return r})}addFieldIndex(e,t){const r=bh(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete s.indexId,r.add(s).next()}deleteFieldIndex(e,t){const r=bh(e),s=Cp(e),u=bp(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=bp(e);let s=!0;const u=new Map;return fe.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{s&&(s=!!m),u.set(d,m)})).next(()=>{if(s){let d=Qt();const m=[];return fe.forEach(u,(w,I)=>{var T;Fe("IndexedDbIndexManager",`Using index ${T=w,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ht=>`${ht.fieldPath}:${ht.kind}`).join(",")}`} to execute ${tl(t)}`);const M=function(ht,st){const St=Mm(st);if(void 0===St)return null;for(const Xe of Om(ht,St.fieldPath))switch(Xe.op){case"array-contains-any":return Xe.value.arrayValue.values||[];case"array-contains":return[Xe.value]}return null}(I,w),L=function(ht,st){const St=new Map;for(const Xe of Ic(st))for(const wt of Om(ht,Xe.fieldPath))switch(wt.op){case"==":case"in":St.set(Xe.fieldPath.canonicalString(),wt.value);break;case"not-in":case"!=":return St.set(Xe.fieldPath.canonicalString(),wt.value),Array.from(St.values())}return null}(I,w),G=function(ht,st){const St=[];let Xe=!0;for(const wt of Ic(st)){const fi=0===wt.kind?YE(ht,wt.fieldPath,ht.startAt):QE(ht,wt.fieldPath,ht.startAt);St.push(fi.value),Xe&&(Xe=fi.inclusive)}return new nl(St,Xe)}(I,w),ee=function(ht,st){const St=[];let Xe=!0;for(const wt of Ic(st)){const fi=0===wt.kind?QE(ht,wt.fieldPath,ht.endAt):YE(ht,wt.fieldPath,ht.endAt);St.push(fi.value),Xe&&(Xe=fi.inclusive)}return new nl(St,Xe)}(I,w),Se=this.We(w,I,G),Me=this.We(w,I,ee),vt=this.ze(w,I,L),Ct=this.He(w.indexId,M,Se,G.inclusive,Me,ee.inclusive,vt);return fe.forEach(Ct,ht=>r.Gt(ht,t.limit).next(st=>{st.forEach(St=>{const Xe=$e.fromSegments(St.documentKey);d.has(Xe)||(d=d.add(Xe),m.push(Xe))})}))}).next(()=>m)}return fe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,s,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),I=w/(null!=t?t.length:1),T=[];for(let M=0;M<w;++M){const L=t?this.Je(t[M/I]):Wm,G=this.Ye(e,L,r[M%I],s),ee=this.Xe(e,L,u[M%I],d),Se=m.map(Me=>this.Ye(e,L,Me,!0));T.push(...this.createRange(G,ee,Se))}return T}Ye(e,t,r,s){const u=new Nc(e,$e.empty(),t,r);return s?u:u.ke()}Xe(e,t,r,s){const u=new Nc(e,$e.empty(),t,r);return s?u.ke():u}je(e,t){const r=new zv(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return fe.forEach(this.Qe(t),s=>this.je(e,s).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new dn(vr.comparator),w=!1;for(const I of d.filters){const T=I;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?w=!0:m=m.add(T.field))}for(const I of d.orderBy)I.field.isKeyField()||(m=m.add(I.field));return m.size+(w?1:0)}(s)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Ep;for(const s of Ic(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const d=r.Ne(s.kind);tu.fe.Zt(u,d)}return r.Se()}Je(e){const t=new Ep;return tu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Ep;return tu.fe.Zt(Cc(this.databaseId,t),r.Ne(function(s){const u=Ic(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let s=[];s.push(new Ep);let u=0;for(const d of Ic(e)){const m=r[u++];for(const w of s)if(this.en(t,d.fieldPath)&&lh(m))s=this.nn(s,d,m);else{const I=w.Ne(d.kind);tu.fe.Zt(m,I)}}return this.sn(s)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const s=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of s){const w=new Ep;w.seed(m.Se()),tu.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Er&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=bh(e),s=Cp(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return fe.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{d.push(function(I,T){const M=T?new Xf(T.sequenceNumber,new Js(ol(T.readTime),new $e(pa(T.documentKey)),T.largestBatchId)):Xf.empty(),L=I.fields.map(([G,ee])=>new Rm(vr.fromServerFormat(G),ee));return new Jf(I.indexId,I.collectionGroup,L,M)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ot(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=bh(e),u=Cp(e);return this.rn(e).next(d=>s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>fe.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:vh((L=r).readTime),documentKey:Wr(L.documentKey.path),largestBatchId:L.largestBatchId});var L})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(s,u)=>{const d=r.get(s.collectionGroup);return(d?fe.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),fe.forEach(m,w=>this.on(e,s,w).next(I=>{const T=this.un(u,w);return I.isEqual(T)?fe.resolve():this.an(e,u,w,I,T)}))))})}cn(e,t,r,s){return bp(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,s){return bp(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const s=bp(e);let u=new dn(Eh);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new Nc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new dn(Eh);const s=this.Ze(t,e);if(null==s)return r;const u=Mm(t);if(null!=u){const d=e.data.field(u.fieldPath);if(lh(d))for(const m of d.arrayValue.values||[])r=r.add(new Nc(t.indexId,e.key,this.Je(m),s))}else r=r.add(new Nc(t.indexId,e.key,Wm,s));return r}an(e,t,r,s,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,I,T,M){const L=m.getIterator(),G=w.getIterator();let ee=ch(L),Se=ch(G);for(;ee||Se;){let Me=!1,vt=!1;if(ee&&Se){const Ct=I(ee,Se);Ct<0?vt=!0:Ct>0&&(Me=!0)}else null!=ee?vt=!0:Me=!0;Me?(T(Se),Se=ch(G)):vt?(M(ee),ee=ch(L)):(ee=ch(L),Se=ch(G))}}(s,u,Eh,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),fe.waitFor(d)}rn(e){let t=1;return Cp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Eh(d,m)).filter((d,m,w)=>!m||0!==Eh(d,w[m-1]));const s=[];s.push(e);for(const d of r){const m=Eh(d,e),w=Eh(d,t);if(0===m)s[0]=e.ke();else if(m>0&&w<0)s.push(d),s.push(d.ke());else if(w>0)break}s.push(t);const u=[];for(let d=0;d<s.length;d+=2)u.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,Wm,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,Wm,[]]));return u}getMinOffset(e,t){let r;return fe.forEach(this.Qe(t),s=>this.je(e,s).next(u=>{u?(!r||WE(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Js.min()})).next(()=>r)}}function Yb(n){return Kr(n,"collectionParents")}function bp(n){return Kr(n,"indexEntries")}function bh(n){return Kr(n,"indexConfiguration")}function Cp(n){return Kr(n,"indexState")}const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yv(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(T,M,L)=>(m++,L.delete()));u.push(w.next(()=>{Rt(1===m)}));const I=[];for(const T of t.mutations){const M=Fv(e,T.key.path,t.batchId);u.push(s.delete(M)),I.push(T.key)}return fe.waitFor(u).next(()=>I)}function Km(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(41943040,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class Qv{constructor(e,t,r,s){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=s,this.ln={}}static Yt(e,t,r,s){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Qv(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ga(e).Wt({index:"userMutationsIndex",range:r},(s,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=ro(e),d=ga(e);return d.add({}).next(m=>{Rt("number"==typeof m);const w=new qb(m,t,r,s),I=function(L,G,ee){const Se=ee.baseMutations.map(vt=>mp(L.Jt,vt)),Me=ee.mutations.map(vt=>mp(L.Jt,vt));return{userId:G,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:Se,mutations:Me}}(this.M,this.userId,w),T=[];let M=new dn((L,G)=>Ot(L.canonicalString(),G.canonicalString()));for(const L of s){const G=Fv(this.userId,L.key.path,m);M=M.add(L.key.path.popLast()),T.push(d.put(I)),T.push(u.put(G,Nb))}return M.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),fe.waitFor(T).next(()=>w)})}lookupMutationBatch(e,t){return ga(e).get(t).next(r=>r?(Rt(r.userId===this.userId),al(this.M,r)):null)}fn(e,t){return this.ln[t]?fe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.ln[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ga(e).Wt({index:"userMutationsIndex",range:s},(d,m,w)=>{m.userId===this.userId&&(Rt(m.batchId>=r),u=al(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ga(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(s,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ga(e).qt("userMutationsIndex",t).next(r=>r.map(s=>al(this.M,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return ro(e).Wt({range:s},(d,m,w)=>{const[I,T,M]=d,L=pa(T);if(I===this.userId&&t.path.isEqual(L))return ga(e).get(M).next(G=>{if(!G)throw it();Rt(G.userId===this.userId),u.push(al(this.M,G))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(Ot);const s=[];return t.forEach(u=>{const d=yh(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=ro(e).Wt({range:m},(I,T,M)=>{const[L,G,ee]=I,Se=pa(G);L===this.userId&&u.path.isEqual(Se)?r=r.add(ee):M.done()});s.push(w)}),fe.waitFor(s).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=yh(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new dn(Ot);return ro(e).Wt({range:d},(w,I,T)=>{const[M,L,G]=w,ee=pa(L);M===this.userId&&r.isPrefixOf(ee)?ee.length===s&&(m=m.add(G)):T.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(ga(e).get(u).next(d=>{if(null===d)throw it();Rt(d.userId===this.userId),r.push(al(this.M,d))}))}),fe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Yv(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),fe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return ro(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=pa(u[1]);s.push(w)}else m.done()}).next(()=>{Rt(0===s.length)})})}containsKey(e,t){return Qb(e,this.userId,t)}wn(e){return Jv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qb(n,e,t){const r=yh(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return ro(n).Wt({range:u,jt:!0},(m,w,I)=>{const[T,M,L]=m;T===e&&M===s&&(d=!0),I.done()}).next(()=>d)}function ga(n){return Kr(n,"mutations")}function ro(n){return Kr(n,"documentMutations")}function Jv(n){return Kr(n,"mutationQueues")}class ul{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ul(0)}static yn(){return new ul(-1)}}class VD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new ul(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Tt.fromTimestamp(new gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.In(e,s)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ip(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Ip(e).Wt((d,m)=>{const w=wh(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>fe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Ip(e).Wt((r,s)=>{const u=wh(s);t(u)})}pn(e){return Jb(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}In(e,t){return Jb(e).put("targetGlobalKey",t)}Tn(e,t){return Ip(e).put(Hv(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=tl(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ip(e).Wt({range:s,index:"queryTargetsIndex"},(d,m,w)=>{const I=wh(m);ep(t,I.target)&&(u=I,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=ll(e);return t.forEach(d=>{const m=Wr(d.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,d))}),fe.waitFor(s)}removeMatchingKeys(e,t,r){const s=ll(e);return fe.forEach(t,u=>{const d=Wr(u.path);return fe.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ll(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ll(e);let u=Qt();return s.Wt({range:r,jt:!0},(d,m,w)=>{const I=pa(d[1]),T=new $e(I);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Wr(t.path),s=IDBKeyRange.bound([r],[VE(r)],!1,!0);let u=0;return ll(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([d,m],w,I)=>{0!==d&&(u++,I.done())}).next(()=>u>0)}Et(e,t){return Ip(e).get(t).next(r=>r?wh(r):null)}}function Ip(n){return Kr(n,"targets")}function Jb(n){return Kr(n,"targetGlobal")}function ll(n){return Kr(n,"targetDocuments")}function Oc(n){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,pe.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==jv)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),Ym.apply(this,arguments)}function Xb([n,e],[t,r]){const s=Ot(n,t);return 0===s?Ot(e,r):s}class BD{constructor(e){this.An=e,this.buffer=new dn(Xb),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Xb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NS{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,pe.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(s){sl(s)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Oc(s)}yield t.Sn(e)}))}}class Xv{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(Xi.A);const r=new BD(t);return this.Dn.forEachTarget(e,s=>r.Pn(s.sequenceNumber)).next(()=>this.Dn.xn(e,s=>r.Pn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Kv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,s,u,d,m,w,I;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),s=this.params.maximumSequenceNumbersToCollect):s=M,d=Date.now(),this.nthSequenceNumber(e,s))).next(M=>(r=M,m=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),lv()<=ju.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${s} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${M} documents in `+(I-w)+`ms\nTotal Duration: ${I-T}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:M})))}}class eC{constructor(e,t){this.db=e,this.garbageCollector=new Xv(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,s)=>t(s))}addReference(e,t,r){return Qm(e,r)}removeReference(e,t,r){return Qm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Qm(e,t)}On(e,t){return function(r,s){let u=!1;return Jv(r).zt(d=>Qb(r,d,s).next(m=>(m&&(u=!0),fe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(I=>{if(!I)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Tt.min()),ll(e).delete([0,Wr(d.path)])))});s.push(w)}}).next(()=>fe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Qm(e,t)}Mn(e,t){const r=ll(e);let s,u=Xi.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:I})=>{0===d?(u!==Xi.A&&t(new $e(pa(s)),u),u=I,s=w):u=Xi.A}).next(()=>{u!==Xi.A&&t(new $e(pa(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qm(n,e){return ll(n).put((r=n.currentSequenceNumber,{targetId:0,path:Wr(e.path),sequenceNumber:r}));var r}class tC{constructor(){this.changes=new rl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nC{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return cl(e).put(r)}removeEntry(e,t,r){return cl(e).delete(function(s,u){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],kc(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=mn.newInvalidDocument(t);return cl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Dp(t))},(s,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:mn.newInvalidDocument(t)};return cl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Dp(t))},(s,u)=>{r={document:this.$n(t,u),size:Km(u)}}).next(()=>r)}getEntries(e,t){let r=to();return this.Ln(e,t,(s,u)=>{const d=this.$n(s,u);r=r.insert(s,d)}).next(()=>r)}Un(e,t){let r=to(),s=new Yn($e.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),s=s.insert(u,Km(d))}).next(()=>({documents:r,qn:s}))}Ln(e,t,r){if(t.isEmpty())return fe.resolve();let s=new dn(n0);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(Dp(s.first()),Dp(s.last())),d=s.getIterator();let m=d.getNext();return cl(e).Wt({index:"documentKeyIndex",range:u},(w,I,T)=>{const M=$e.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;m&&n0(m,M)<0;)r(m,null),m=d.getNext();m&&m.isEqual(M)&&(r(m,I),m=d.hasNext()?d.getNext():null),m?T.Ut(Dp(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),kc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cl(e).qt(IDBKeyRange.bound(s,u,!0)).next(d=>{let m=to();for(const w of d){const I=this.$n($e.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(I.key,I)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=to();const d=t0(t,r),m=t0(t,Js.max());return cl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,I,T)=>{const M=this.$n($e.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(M.key,M),u.size===s&&T.done()}).next(()=>u)}newChangeBuffer(e){return new e0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Jm(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Fn(e,t){return Jm(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function MS(n,e){let t;if(e.document)t=Mv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),s=ol(e.noDocument.readTime);t=mn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=$e.fromSegments(e.unknownDocument.path),s=ol(e.unknownDocument.version);t=mn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new gn(r[0],r[1]);return Tt.fromTimestamp(s)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return mn.newInvalidDocument(e)}}class e0 extends tC{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new rl(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new dn((u,d)=>Ot(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=kD(this.Kn.M,d);s=s.add(u.path.popLast()),r+=Km(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=kD(this.Kn.M,d.convertToNoDocument(Tt.min()));t.push(this.Kn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:s})=>(s.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Jm(n){return Kr(n,"remoteDocumentGlobal")}function cl(n){return Kr(n,"remoteDocumentsV14")}function Dp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function t0(n,e){const t=e.documentKey.path.toArray();return[n,kc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function n0(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ot(t[u],r[u]),s)return s;return s=Ot(t.length,r.length),s||(s=Ot(t[t.length-2],r[r.length-2]),s||Ot(t[t.length-1],r[r.length-1]))}class jD{constructor(e){this.M=e}kt(e,t,r,s){const u=new _p("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kb,{unique:!0}),m.createObjectStore("documentMutations"),rC(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=fe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),rC(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(I=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kb,{unique:!0});const T=w.store("mutations"),M=I.map(L=>T.put(L));return fe.waitFor(M)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.Qn(u))),r<6&&s>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&s>=7&&(d=d.next(()=>this.Wn(u))),r<8&&s>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&s>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.Hn(u))),r<11&&s>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:xS});w.createIndex("collectionPathOverlayIndex",xD,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",MD,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:Zm});w.createIndex("documentKeyIndex",Lv),w.createIndex("collectionGroupIndex",SS)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Fb}).createIndex("sequenceNumberIndex",SD,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Uv}).createIndex("documentKeyIndex",Vv,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,s)=>{t+=Km(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(s=>fe.forEach(s,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>fe.forEach(m,w=>{Rt(w.userId===u.userId);const I=al(this.M,w);return Yv(e,u.userId,I).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Wt((d,m)=>{const w=new Gt(d),I=[0,Wr(w)];u.push(t.get(I).next(T=>T?fe.resolve():t.put({targetId:0,path:Wr(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>fe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:zm});const r=t.store("collectionParents"),s=new Es,u=d=>{if(s.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Wr(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Gt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],I)=>{const T=pa(m);return u(T.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,s)=>{const u=wh(s),d=Hv(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),s=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(I=d,I.document?new $e(Gt.fromString(I.document.name).popFirst(5)):I.noDocument?$e.fromSegments(I.noDocument.path):I.unknownDocument?$e.fromSegments(I.unknownDocument.path):it()).path.toArray();var I;const T={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(m.put(T))}).next(()=>fe.waitFor(s))}}function rC(n){n.createObjectStore("targetDocuments",{keyPath:AD}).createIndex("documentTargetsIndex",Pb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ob,{unique:!0}),n.createObjectStore("targetGlobal")}const iC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sC{constructor(e,t,r,s,u,d,m,w,I,T,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=I,this.Zn=T,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=L=>Promise.resolve(),!sC.vt())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eC(this,s),this.hs=t+"main",this.M=new RD(w),this.ls=new Po(this.hs,this.ts,new jD(this.M)),this.fs=new VD(this.referenceDelegate,this.M),this.ds=new nC(this.M),this._s=new ND,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,iC);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Xi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,pe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(sl(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ch(e).get("owner").next(t=>fe.resolve(this.Ps(t)))}Vs(e){return Xm(e).delete(this.clientId)}vs(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Kr(r,"clientMetadata");return s.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return fe.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?fe.resolve(!0):Ch(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,iC);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xm(e).qt().next(r=>void 0===this.Ds(r,5e3).find(s=>{if(this.clientId!==s.clientId){const d=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new $v(t,Xi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Xm(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Qv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Wv(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Zv.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?Vb:13===d?Ub:12===d?Lb:11===d?Bv:void it();var d;let m;return this.ls.runTransaction(e,s,u,w=>(m=new $v(w,this.es?this.es.next():Xi.A),"readwrite-primary"===t?this.Es(m).next(I=>!!I||this.As(m)).next(I=>{if(!I)throw jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ne(ce.FAILED_PRECONDITION,jv);return r(m)}).next(I=>this.bs(m).next(()=>I)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return Ch(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,iC)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ch(e).put("owner",t)}static vt(){return Po.vt()}Rs(e){const t=Ch(e);return t.get("owner").next(r=>this.Ps(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(jn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){jn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ch(n){return Kr(n,"owner")}function Xm(n){return Kr(n,"clientMetadata")}function r0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $D{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(s=>{for(const u of r)u.applyToLocalView(s);return s})}qs(e,t){e.forEach((r,s)=>{for(const u of t)u.applyToLocalView(s)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.js(e,t.path):tb(t)?this.Ws(e,t,r):this.zs(e,t,r);var s}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let s=Sv();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Ws(e,t,r){const s=t.collectionGroup;let u=Sv();return this.indexManager.getCollectionParents(e,s).next(d=>fe.forEach(d,m=>{const w=(I=t,T=m.child(s),new Ja(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,T;return this.zs(e,w,r).next(I=>{I.forEach((T,M)=>{u=u.insert(T,M)})})}).next(()=>u))}zs(e,t,r){let s;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let I=s.get(w);null==I&&(I=mn.newInvalidDocument(w),s=s.insert(w,I)),Vm(m,I,d.localWriteTime),I.isFoundDocument()||(s=s.remove(w))}}).next(()=>(s.forEach((u,d)=>{Fm(t,d)||(s=s.remove(u))}),s))}}class oC{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=s}static Ys(e,t){let r=Qt(),s=Qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new oC(e,t.fromCache,r,s)}}class HD{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,s){return this.ti(e,t).next(u=>u||this.ei(e,t,s,r)).next(u=>u||this.ni(e,t))}ti(e,t){return fe.resolve(null)}ei(e,t,r,s){return function hh(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||s.isEqual(Tt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,s)?this.ni(e,t):(lv()<=ju.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pm(t)),this.ri(e,d,t,km(s,-1)))})}si(e,t){let r=new dn(ip(e));return t.forEach((s,u)=>{Fm(e,u)&&(r=r.add(u))}),r}ii(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}ni(e,t){return lv()<=ju.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Pm(t)),this.Zs.Qs(e,t,Js.min())}ri(e,t,r,s){return this.Zs.Qs(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class OS{constructor(e,t,r,s){this.persistence=e,this.oi=t,this.M=s,this.ui=new Yn(Ot),this.ai=new rl(u=>tl(u),ep),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new $D(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function GD(n,e,t,r){return new OS(n,e,t,r)}function qD(n,e){return s0.apply(this,arguments)}function s0(){return s0=(0,pe.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.Bs.getAllMutationBatches(r).next(u=>(s=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Qt();for(const I of s){d.push(I.batchId);for(const T of I.mutations)w=w.add(T.key)}for(const I of u){m.push(I.batchId);for(const T of I.mutations)w=w.add(T.key)}return t.fi.Ks(r,w).next(I=>({di:I,removedBatchIds:d,addedBatchIds:m}))})})}),s0.apply(this,arguments)}function ey(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,I){const T=w.batch,M=T.keys();let L=fe.resolve();return M.forEach(G=>{L=L.next(()=>I.getEntry(m,G)).next(ee=>{const Se=w.docVersions.get(G);Rt(null!==Se),ee.version.compareTo(Se)<0&&(T.applyToRemoteDocument(ee,w),ee.isValidDocument()&&(ee.setReadTime(w.commitVersion),I.addEntry(ee)))})}),L.next(()=>d.Bs.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,s))})}function aC(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function ZD(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});s=t.ui;const m=[];e.targetChanges.forEach((I,T)=>{const M=s.get(T);if(!M)return;m.push(t.fs.removeMatchingKeys(u,I.removedDocuments,T).next(()=>t.fs.addMatchingKeys(u,I.addedDocuments,T)));let L=M.withSequenceNumber(u.currentSequenceNumber);var G,ee,Se;e.targetMismatches.has(T)?L=L.withResumeToken(wr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),s=s.insert(T,L),ee=L,Se=I,(0===(G=M).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,L))});let w=to();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),m.push(o0(u,d,e.documentUpdates).next(I=>{w=I})),!r.isEqual(Tt.min())){const I=t.fs.getLastRemoteSnapshotVersion(u).next(T=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(I)}return fe.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=s,u))}function o0(n,e,t){let r=Qt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=to();return t.forEach((d,m)=>{const w=s.get(d);m.isNoDocument()&&m.version.isEqual(Tt.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Fe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function Pc(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Fc(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.fs.getTargetData(r,e).next(u=>u?(s=u,fe.resolve(s)):t.fs.allocateTargetId(r).next(d=>(s=new Rc(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function dl(n,e,t){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,pe.Z)(function*(n,e,t){const r=qe(n),s=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!sl(d))throw d;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(s.target)}),Tp.apply(this,arguments)}function ty(n,e,t){const r=qe(n);let s=Tt.min(),u=Qt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,I){const T=qe(m),M=T.ai.get(I);return void 0!==M?fe.resolve(T.ui.get(M)):T.fs.getTargetData(w,I)}(r,d,Xs(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(d,e,t?s:Tt.min(),t?u:Qt())).next(m=>(Ap(r,Lm(e),m),{documents:m,_i:u})))}function ny(n,e){const t=qe(n),r=qe(t.fs),s=t.ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function ry(n,e){const t=qe(n),r=t.ci.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.hi.getAllFromCollectionGroup(s,e,km(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Ap(t,e,s),s))}function Ap(n,e,t){let r=Tt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function uC(){return uC=(0,pe.Z)(function*(n,e,t,r){const s=qe(n);let u=Qt(),d=to();for(const I of t){const T=e.wi(I.metadata.name);I.document&&(u=u.add(T));const M=e.mi(I);M.setReadTime(e.gi(I.metadata.readTime)),d=d.insert(T,M)}const m=s.hi.newChangeBuffer({trackRemovals:!0}),w=yield Fc(s,(I=r,Xs(dh(Gt.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>o0(I,m,d).next(T=>(m.apply(I),T)).next(T=>s.fs.removeMatchingKeysForTargetId(I,w.targetId).next(()=>s.fs.addMatchingKeys(I,u,w.targetId)).next(()=>s.fi.Gs(I,T)).next(()=>T)))}),uC.apply(this,arguments)}function FS(n,e){return lC.apply(this,arguments)}function lC(){return lC=(0,pe.Z)(function*(n,e,t=Qt()){const r=yield Fc(n,Xs(Wb(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const d=zr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s._s.saveNamedQuery(u,e);const m=r.withResumeToken(wr.EMPTY_BYTE_STRING,d);return s.ui=s.ui.insert(m.targetId,m),s.fs.updateTargetData(u,m).next(()=>s.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.fs.addMatchingKeys(u,t,r.targetId)).next(()=>s._s.saveNamedQuery(u,e))})}),lC.apply(this,arguments)}class cC{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return fe.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:zr(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Wb(r.bundledQuery),readTime:zr(r.readTime)}),fe.resolve();var r}}class zD{constructor(){this.overlays=new Yn($e.comparator),this.Ii=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.Xt(e,t,u)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ii.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const s=cp(),u=t.length+1,d=new $e(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,I=w.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return fe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Yn((I,T)=>I-T);const d=this.overlays.getIterator();for(;d.hasNext();){const I=d.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let T=u.get(I.largestBatchId);null===T&&(T=cp(),u=u.insert(I.largestBatchId,T)),T.set(I.getKey(),I)}}const m=cp(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((I,T)=>m.set(I,T)),!(m.size()>=s)););return fe.resolve(m)}Xt(e,t,r){if(null===r)return;const s=this.overlays.get(r.key);if(null!==s){const d=this.Ii.get(s.largestBatchId).delete(r.key);this.Ii.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new zb(t,r));let u=this.Ii.get(t);void 0===u&&(u=Qt(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class a0{constructor(){this.Ti=new dn(Pr.Ei),this.Ai=new dn(Pr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Pr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Pr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new Gt([])),r=new Pr(t,e),s=new Pr(t,e+1),u=[];return this.Ai.forEachInRange([r,s],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new Gt([])),r=new Pr(t,e),s=new Pr(t,e+1);let u=Qt();return this.Ai.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Pr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||Ot(e.Ci,t.Ci)}static Ri(e,t){return Ot(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class WD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new dn(Pr.Ei)}checkEmpty(e){return fe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,s){const u=this.xi;this.xi++;const d=new qb(u,t,r,s);this.Bs.push(d);for(const m of s)this.Ni=this.Ni.add(new Pr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return fe.resolve(d)}lookupMutationBatch(e,t){return fe.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Mi(t+1),u=s<0?0:s;return fe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return fe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pr(t,0),s=new Pr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,s],d=>{const m=this.ki(d.Ci);u.push(m)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(Ot);return t.forEach(s=>{const u=new Pr(s,0),d=new Pr(s,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),fe.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const d=new Pr(new $e(u),0);let m=new dn(Ot);return this.Ni.forEachWhile(w=>{const I=w.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(m=m.add(w.Ci)),!0)},d),fe.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const s=this.ki(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Rt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return fe.forEach(t.mutations,s=>{const u=new Pr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Pr(t,0),s=this.Ni.firstAfterOrEqual(r);return fe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return fe.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class dC{constructor(e){this.$i=e,this.docs=new Yn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let r=to();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():mn.newInvalidDocument(s))}),fe.resolve(r)}getAllFromCollection(e,t,r){let s=to();const u=new $e(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||WE(hD(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return fe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){it()}Bi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new hC(this)}getSize(e){return fe.resolve(this.size)}}class hC extends tC{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Kn.addEntry(e,s)):this.Kn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class fC{constructor(e){this.persistence=e,this.Li=new rl(t=>tl(t),ep),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new a0,this.targetCount=0,this.Ki=ul.gn()}forEachTarget(e,t){return this.Li.forEach((r,s)=>t(s)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),fe.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new ul(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tn(t),fe.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),fe.waitFor(u).next(()=>s)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.qi.containsKey(t))}}class KD{constructor(e,t){this.Gi={},this.overlays={},this.es=new Xi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new fC(this),this.indexManager=new UD,this.ds=new dC(r=>this.referenceDelegate.Qi(r)),this.M=new RD(t),this._s=new cC(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new WD(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const s=new YD(this.es.next());return this.referenceDelegate.ji(),r(s).next(u=>this.referenceDelegate.Wi(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}zi(e,t){return fe.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class YD extends Bb{constructor(e){super(),this.currentSequenceNumber=e}}class iy{constructor(e){this.persistence=e,this.Hi=new a0,this.Ji=null}static Yi(e){return new iy(e)}get Xi(){if(this.Ji)return this.Ji;throw it()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(s=>this.Xi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Xi,r=>{const s=$e.fromPath(r);return this.Zi(e,s).next(u=>{u||t.removeEntry(s,Tt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return fe.or([()=>fe.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function sy(n,e){return`firestore_clients_${n}_${e}`}function QD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function oy(n,e){return`firestore_targets_${n}_${e}`}class Ih{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static tr(e,t,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new Ne(s.error.code,s.error.message))),d?new Ih(e,t,s.state,u):(jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ne(r.error.code,r.error.message))),u?new Sp(e,r.state,s):(jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ay{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=jm();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=cD(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return s?new ay(e,u):(jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pC{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pC(t.clientId,t.onlineState):(jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gC{constructor(){this.activeTargetIds=jm()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u0{constructor(e,t,r,s,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Yn(Ot),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=sy(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new gC),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Fs();for(const s of t){if(s===e.ir)continue;const u=e.getItem(sy(e.persistenceKey,s));if(u){const d=ay.tr(s,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const s=e.pr(r);s&&e.Ir(s)}for(const s of e.cr)e.ur(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(oy(this.persistenceKey,e));if(r){const s=Sp.tr(e,r);s&&(t=s.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(oy(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Ar(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Sr(s,null)}{const s=t.Dr(r.key,r.newValue);if(s)return t.Sr(s.clientId,s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Cr(r.key,r.newValue);if(s)return t.Nr(s)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const s=t.kr(r.key,r.newValue);if(s)return t.Mr(s)}}else if(r.key===t.mr){if(null!==r.newValue){const s=t.pr(r.newValue);if(s)return t.Ir(s)}}else if(r.key===t.lr){const s=function(u){let d=Xi.A;if(null!=u)try{const m=JSON.parse(u);Rt("number"==typeof m),d=m}catch(m){jn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);s!==Xi.A&&t.sequenceNumberHandler(s)}else if(r.key===t.gr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const s=new Ih(this.currentUser,e,t,r),u=QD(this.persistenceKey,this.currentUser,e);this.setItem(u,s.er())}Ar(e){const t=QD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const s=oy(this.persistenceKey,e),u=new Sp(e,t,r);this.setItem(s,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return ay.tr(r,t)}Cr(e,t){const r=this._r.exec(e),s=Number(r[1]);return Ih.tr(new Or(void 0!==r[2]?r[2]:null),s,t)}kr(e,t){const r=this.wr.exec(e),s=Number(r[1]);return Sp.tr(s,t)}pr(e){return pC.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),s=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(w=>{s.has(w)||d.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=jm();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class mC{constructor(){this.Ur=new gC,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new gC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LS{Kr(e){}shutdown(){}}class JD{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const US={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class VS{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class BS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const d=this.ho(e,t);Fe("RestConnection","Sending: ",d,r);const m={};return this.lo(m,s,u),this.fo(e,d,m,r).then(w=>(Fe("RestConnection","Received: ",w),w),w=>{throw bm("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,s,u){return this.co(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ys,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.uo}/v1/${t}:${US[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,d)=>{const m=new OE;m.listenOnce(RE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Em.NO_ERROR:const I=m.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(I)),u(I);break;case Em.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),d(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Em.HTTP_ERROR:const T=m.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',T,"response text:",m.getResponseText()),T>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const L=function(G){const ee=G.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ee)>=0?ee:ce.UNKNOWN}(M.status);d(new Ne(L,M.message))}else d(new Ne(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}wo(e,t,r){const s=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xE(),d=ME(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new NE({})),this.lo(m.initMessageHeaders,t,r),(0,xt.uI)()||(0,xt.b$)()||(0,xt.d)()||(0,xt.w1)()||(0,xt.Mn)()||(0,xt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=s.join("");Fe("Connection","Creating WebChannel: "+w,m);const I=u.createWebChannel(w,m);let T=!1,M=!1;const L=new VS({Jr:ee=>{M?Fe("Connection","Not sending because WebChannel is closed:",ee):(T||(Fe("Connection","Opening WebChannel transport."),I.open(),T=!0),Fe("Connection","WebChannel sending:",ee),I.send(ee))},Yr:()=>I.close()}),G=(ee,Se,Me)=>{ee.listen(Se,vt=>{try{Me(vt)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return G(I,Wf.EventType.OPEN,()=>{M||Fe("Connection","WebChannel transport opened.")}),G(I,Wf.EventType.CLOSE,()=>{M||(M=!0,Fe("Connection","WebChannel transport closed"),L.ro())}),G(I,Wf.EventType.ERROR,ee=>{M||(M=!0,bm("Connection","WebChannel transport errored:",ee),L.ro(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),G(I,Wf.EventType.MESSAGE,ee=>{var Se;if(!M){const Me=ee.data[0];Rt(!!Me);const vt=Me,Ct=vt.error||(null===(Se=vt[0])||void 0===Se?void 0:Se.error);if(Ct){Fe("Connection","WebChannel received error:",Ct);const ht=Ct.status;let st=function(Xe){const wt=Qn[Xe];if(void 0!==wt)return Av(wt)}(ht),St=Ct.message;void 0===st&&(st=ce.INTERNAL,St="Unknown error status: "+ht+" with message "+Ct.message),M=!0,L.ro(new Ne(st,St)),I.close()}else Fe("Connection","WebChannel received:",Me),L.oo(Me)}}),G(d,kE.STAT_EVENT,ee=>{ee.stat===av.PROXY?Fe("Connection","Detected buffering proxy"):ee.stat===av.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.io()},0),L}}function yC(){return"undefined"!=typeof window?window:null}function l0(){return"undefined"!=typeof document?document:null}function uy(n){return new xv(n,!0)}class _C{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class XD{constructor(e,t,r,s,u,d,m,w){this.Yn=e,this.Vo=r,this.vo=s,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new _C(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,pe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(jn(t.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Do===t&&this.Qo(r,s)},r=>{e(()=>{const s=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(s)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(s=>{r(()=>this.jo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.No.Ro((0,pe.Z)(function*(){e.state=0,e.start()}))}jo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i extends XD{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Ab(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:it(),s=e.targetChange.targetIds||[],u=function(w,I){return w.N?(Rt(void 0===I||"string"==typeof I),wr.fromBase64String(I||"")):(Rt(void 0===I||I instanceof Uint8Array),wr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const I=void 0===w.code?ce.UNKNOWN:Av(w.code);return new Ne(I,w.message||"")}(d);t=new _b(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=no(n,r.document.name),u=zr(r.document.updateTime),d=new hi({mapValue:{fields:r.document.fields}}),m=mn.newFoundDocument(s,u,d);t=new $m(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=no(n,r.document),u=r.readTime?zr(r.readTime):Tt.min(),d=mn.newNoDocument(s,u);t=new $m([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=no(n,r.document);t=new $m([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new gb(r.count||0);t=new yb(r.targetId,u)}}var w;return t}(this.M,e),r=function(s){if(!("targetChange"in s))return Tt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Tt.min():u.readTime?zr(u.readTime):Tt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=gp(this.M),t.addTarget=function(s,u){let d;const m=u.target;return d=tp(m)?{documents:xb(s,m)}:{query:kv(s,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Cb(s,u.resumeToken):u.snapshotVersion.compareTo(Tt.min())>0&&(d.readTime=ph(s,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function ID(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=gp(this.M),t.removeTarget=e,this.Lo(t)}}class o extends XD{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Sb(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,s){let u=zr(r.updateTime?r.updateTime:s);return u.isEqual(Tt.min())&&(u=zr(s)),new ab(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zr(e.commitTime);return this.listener.tu(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=gp(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>mp(this.M,r))};this.Lo(t)}}class a extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=s,this.su=!1}iu(){if(this.su)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(ce.UNKNOWN,s.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So._o(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(ce.UNKNOWN,s.toString())})}terminate(){this.su=!0}}class l{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(jn(t),this.uu=!1):Fe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class h{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;Oe(d)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(I){const T=qe(I);T.wu.add(4),yield E(T),T.yu.set("Unknown"),T.wu.delete(4),yield p(T)}),function(I){return w.apply(this,arguments)})(d))}))}),this.yu=new l(r,s)}}function p(n){return _.apply(this,arguments)}function _(){return _=(0,pe.Z)(function*(n){if(Oe(n))for(const e of n.mu)yield e(!0)}),_.apply(this,arguments)}function E(n){return b.apply(this,arguments)}function b(){return b=(0,pe.Z)(function*(n){for(const e of n.mu)yield e(!1)}),b.apply(this,arguments)}function S(n,e){const t=qe(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),ve(t)?Q(t):hy(t).Mo()&&P(t,e))}function x(n,e){const t=qe(n),r=hy(t);t._u.delete(e),r.Mo()&&V(t,e),0===t._u.size&&(r.Mo()?r.$o():Oe(t)&&t.yu.set("Unknown"))}function P(n,e){n.pu.Z(e.targetId),hy(n).Ho(e)}function V(n,e){n.pu.Z(e),hy(n).Jo(e)}function Q(n){n.pu=new Hm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),hy(n).start(),n.yu.au()}function ve(n){return Oe(n)&&!hy(n).ko()&&n._u.size>0}function Oe(n){return 0===qe(n).wu.size}function je(n){n.pu=void 0}function et(n){return De.apply(this,arguments)}function De(){return De=(0,pe.Z)(function*(n){n._u.forEach((e,t)=>{P(n,e)})}),De.apply(this,arguments)}function mt(n,e){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,pe.Z)(function*(n,e){je(n),ve(n)?(n.yu.lu(e),Q(n)):n.yu.set("Unknown")}),Vt.apply(this,arguments)}function nn(n,e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,pe.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof _b&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(s,u){const d=u.cause;for(const m of u.targetIds)s._u.has(m)&&(yield s.remoteSyncer.rejectListen(m,d),s._u.delete(m),s.pu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ma(n,r)}else if(e instanceof $m?n.pu.ut(e):e instanceof yb?n.pu._t(e):n.pu.ht(e),!t.isEqual(Tt.min()))try{const r=yield aC(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.pu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const I=s._u.get(w);I&&s._u.set(w,I.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=s._u.get(m);if(!w)return;s._u.set(m,w.withResumeToken(wr.EMPTY_BYTE_STRING,w.snapshotVersion)),V(s,m);const I=new Rc(w.target,m,1,w.sequenceNumber);P(s,I)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield ma(n,r)}var r}),Ti.apply(this,arguments)}function ma(n,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,pe.Z)(function*(n,e,t){if(!sl(e))throw e;n.wu.add(1),yield E(n),n.yu.set("Offline"),t||(t=()=>aC(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield p(n)}))}),xp.apply(this,arguments)}function ly(n,e){return e().catch(t=>ma(n,t,e))}function hl(n){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,pe.Z)(function*(n){const e=qe(n),t=Dh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;c0(e);)try{const s=yield Pc(e.localStore,r);if(null===s){0===e.du.length&&t.$o();break}r=s.batchId,d0(e,s)}catch(s){yield ma(e,s)}cy(e)&&dy(e)}),Mp.apply(this,arguments)}function c0(n){return Oe(n)&&n.du.length<10}function d0(n,e){n.du.push(e);const t=Dh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function cy(n){return Oe(n)&&!Dh(n).ko()&&n.du.length>0}function dy(n){Dh(n).start()}function h0(n){return eT.apply(this,arguments)}function eT(){return eT=(0,pe.Z)(function*(n){Dh(n).nu()}),eT.apply(this,arguments)}function lR(n){return tT.apply(this,arguments)}function tT(){return tT=(0,pe.Z)(function*(n){const e=Dh(n);for(const t of n.du)e.Zo(t.mutations)}),tT.apply(this,arguments)}function cR(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,pe.Z)(function*(n,e,t){const r=n.du.shift(),s=Zb.from(r,e,t);yield ly(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield hl(n)}),nT.apply(this,arguments)}function dR(n,e){return rT.apply(this,arguments)}function rT(){return rT=(0,pe.Z)(function*(n,e){var t;e&&Dh(n).Xo&&(yield(t=(0,pe.Z)(function*(r,s){if(Tv(u=s.code)&&u!==ce.ABORTED){const d=r.du.shift();Dh(r).Fo(),yield ly(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield hl(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),cy(n)&&dy(n)}),rT.apply(this,arguments)}function jS(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,pe.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Oe(t);t.wu.add(3),yield E(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield p(t)}),iT.apply(this,arguments)}function sT(n,e){return oT.apply(this,arguments)}function oT(){return oT=(0,pe.Z)(function*(n,e){const t=qe(n);e?(t.wu.delete(2),yield p(t)):e||(t.wu.add(2),yield E(t),t.yu.set("Unknown"))}),oT.apply(this,arguments)}function hy(n){return n.Iu||(n.Iu=function(e,t,r){const s=qe(e);return s.iu(),new i(t,s.So,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Xr:et.bind(null,n),eo:mt.bind(null,n),zo:nn.bind(null,n)}),n.mu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Iu.Fo(),ve(n)?Q(n):n.yu.set("Unknown")):(yield n.Iu.stop(),je(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Dh(n){return n.Tu||(n.Tu=function(e,t,r){const s=qe(e);return s.iu(),new o(t,s.So,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Xr:h0.bind(null,n),eo:dR.bind(null,n),eu:lR.bind(null,n),tu:cR.bind(null,n)}),n.mu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Tu.Fo(),yield hl(n)):(yield n.Tu.stop(),n.du.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class aT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,m=new aT(e,t,d,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(jn("AsyncQueue",`${e}: ${n}`),sl(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class py{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=Sv(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new py;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $S{constructor(){this.Eu=new Yn($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):it():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class gy{constructor(e,t,r,s,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new gy(e,t,py.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class hR{constructor(){this.Ru=void 0,this.listeners=[]}}class fR{constructor(){this.queries=new rl(e=>rb(e),rp),this.onlineState="Unknown",this.bu=new Set}}function uT(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,pe.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new hR),s)try{u.Ru=yield t.onListen(r)}catch(d){const m=fy(d,`Initialization of query '${Pm(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&hT(t)}),lT.apply(this,arguments)}function cT(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,pe.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),dT.apply(this,arguments)}function pR(n,e){const t=qe(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const m of d.listeners)m.Vu(s)&&(r=!0);d.Ru=s}}r&&hT(t)}function gR(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function hT(n){n.bu.forEach(e=>{e.next()})}class fT{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new gy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=gy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class mR{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class HS{constructor(e){this.M=e}wi(e){return no(this.M,e)}mi(e){return e.metadata.exists?Mv(this.M,e.document,!1):mn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return zr(e)}}class yR{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GS(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Gt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new HS(this.M);for(const s of e)if(s.metadata.queries){const u=r.wi(s.metadata.name);for(const d of s.metadata.queries){const m=(t.get(d)||Qt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function PS(n,e,t,r){return uC.apply(this,arguments)}(e.localStore,new HS(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const s of e.queries)yield FS(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function GS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qS{constructor(e){this.key=e}}class ZS{constructor(e){this.key=e}}class zS{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Qt(),this.mutatedKeys=Qt(),this.Gu=ip(e),this.Qu=new py(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new $S,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((T,M)=>{const L=s.get(T),G=Fm(this.query,M)?M:null,ee=!!L&&this.mutatedKeys.has(L.key),Se=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Me=!1;L&&G?L.data.isEqual(G.data)?ee!==Se&&(r.track({type:3,doc:G}),Me=!0):this.Hu(L,G)||(r.track({type:2,doc:G}),Me=!0,(w&&this.Gu(G,w)>0||I&&this.Gu(G,I)<0)&&(m=!0)):!L&&G?(r.track({type:0,doc:G}),Me=!0):L&&!G&&(r.track({type:1,doc:L}),Me=!0,(w||I)&&(m=!0)),Me&&(G?(d=d.add(G),u=Se?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const T="F"===this.query.limitType?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((I,T)=>function(M,L){const G=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return G(M)-G(L)}(I.type,T.type)||this.Gu(I.doc,T.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new gy(this.query,e.Qu,s,u,e.mutatedKeys,0===m,w,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new $S,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new ZS(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new qS(r))}),t}ta(e){this.Uu=e._i,this.Ku=Qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return gy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class _R{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vR{constructor(e){this.key=e,this.na=!1}}class wR{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new rl(m=>rb(m),rp),this.ra=new Map,this.oa=new Set,this.ua=new Yn($e.comparator),this.aa=new Map,this.ca=new a0,this.ha={},this.la=new Map,this.fa=ul.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function ER(n,e){return pT.apply(this,arguments)}function pT(){return pT=(0,pe.Z)(function*(n,e){const t=LT(n);let r,s;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ea();else{const d=yield Fc(t.localStore,Xs(e));t.isPrimaryClient&&S(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield gT(t,e,r,"current"===m)}return s}),pT.apply(this,arguments)}function gT(n,e,t,r){return mT.apply(this,arguments)}function mT(){return mT=(0,pe.Z)(function*(n,e,t,r){n._a=(T,M,L)=>{return(G=(0,pe.Z)(function*(ee,Se,Me,vt){let Ct=Se.view.Wu(Me);Ct.ii&&(Ct=yield ty(ee.localStore,Se.query,!1).then(({documents:St})=>Se.view.Wu(St,Ct)));const ht=vt&&vt.targetChanges.get(Se.targetId),st=Se.view.applyChanges(Ct,ee.isPrimaryClient,ht);return TT(ee,Se.targetId,st.Xu),st.snapshot}),function(ee,Se,Me,vt){return G.apply(this,arguments)})(n,T,M,L);var G};const s=yield ty(n.localStore,e,!0),u=new zS(e,s._i),d=u.Wu(s.documents),m=eu.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);TT(n,t,w.Xu);const I=new _R(e,t,u);return n.ia.set(e,I),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),mT.apply(this,arguments)}function bR(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,pe.Z)(function*(n,e){const t=qe(n),r=t.ia.get(e),s=t.ra.get(r.targetId);if(s.length>1)return t.ra.set(r.targetId,s.filter(u=>!rp(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield dl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),x(t.remoteStore,r.targetId),my(t,r.targetId)}).catch(Oc))):(my(t,r.targetId),yield dl(t.localStore,r.targetId,!0))}),yT.apply(this,arguments)}function _T(){return _T=(0,pe.Z)(function*(n,e,t){const r=UT(n);try{const s=yield function(u,d){const m=qe(u),w=gn.now(),I=d.reduce((M,L)=>M.add(L.key),Qt());let T;return m.persistence.runTransaction("Locally write mutations","readwrite",M=>m.fi.Ks(M,I).next(L=>{T=L;const G=[];for(const ee of d){const Se=lb(ee,T.get(ee.key));null!=Se&&G.push(new xc(ee.key,Se,xm(Se.value.mapValue),br.exists(!0)))}return m.Bs.addMutationBatch(M,w,G,d)})).then(M=>(M.applyToLocalDocumentSet(T),{batchId:M.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,m){let w=u.ha[u.currentUser.toKey()];w||(w=new Yn(Ot)),w=w.insert(d,m),u.ha[u.currentUser.toKey()]=w}(r,s.batchId,t),yield Lc(r,s.changes),yield hl(r.remoteStore)}catch(s){const u=fy(s,"Failed to persist write");t.reject(u)}}),_T.apply(this,arguments)}function WS(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,pe.Z)(function*(n,e){const t=qe(n);try{const r=yield ZD(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.aa.get(u);d&&(Rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.na=!0:s.modifiedDocuments.size>0?Rt(d.na):s.removedDocuments.size>0&&(Rt(d.na),d.na=!1))}),yield Lc(t,r,e)}catch(r){yield Oc(r)}}),vT.apply(this,arguments)}function KS(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&s.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let w=!1;m.queries.forEach((I,T)=>{for(const M of T.listeners)M.Pu(d)&&(w=!0)}),w&&hT(m)}(r.eventManager,e),s.length&&r.sa.zo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IR(n,e,t){return wT.apply(this,arguments)}function wT(){return wT=(0,pe.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.aa.get(e),u=s&&s.key;if(u){let d=new Yn($e.comparator);d=d.insert(u,mn.newNoDocument(u,Tt.min()));const m=Qt().add(u),w=new il(Tt.min(),new Map,new dn(Ot),d,m);yield WS(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),AT(r)}else yield dl(r.localStore,e,!1).then(()=>my(r,e,t)).catch(Oc)}),wT.apply(this,arguments)}function DR(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,pe.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield ey(t.localStore,e);DT(t,r,null),IT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Lc(t,s)}catch(s){yield Oc(s)}}),ET.apply(this,arguments)}function TR(n,e,t){return bT.apply(this,arguments)}function bT(){return bT=(0,pe.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let I;return m.Bs.lookupMutationBatch(w,d).next(T=>(Rt(null!==T),I=T.keys(),m.Bs.removeMutationBatch(w,T))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,I))})}(r.localStore,e);DT(r,e,t),IT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Lc(r,s)}catch(s){yield Oc(s)}}),bT.apply(this,arguments)}function CT(){return CT=(0,pe.Z)(function*(n,e){const t=qe(n);Oe(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.la.get(r)||[];s.push(e),t.la.set(r,s)}catch(r){const s=fy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),CT.apply(this,arguments)}function IT(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function DT(n,e,t){const r=qe(n);let s=r.ha[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ha[r.currentUser.toKey()]=s}}function my(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||YS(n,r)})}function YS(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(x(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),AT(n))}function TT(n,e,t){for(const r of t)r instanceof qS?(n.ca.addReference(r.key,e),SR(n,r)):r instanceof ZS?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||YS(n,r.key)):it()}function SR(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.oa.add(r),AT(n))}function AT(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(Gt.fromString(e)),r=n.fa.next();n.aa.set(r,new vR(t)),n.ua=n.ua.insert(t,r),S(n.remoteStore,new Rc(Xs(dh(t.path)),r,2,Xi.A))}}function Lc(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,pe.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{d.push(r._a(w,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,I.fromCache?"not-current":"current"),s.push(I);const T=oC.Ys(w.targetId,I);u.push(T)}}))}),yield Promise.all(d),r.sa.zo(s),yield(m=(0,pe.Z)(function*(w,I){const T=qe(w);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>fe.forEach(I,L=>fe.forEach(L.Hs,G=>T.persistence.referenceDelegate.addReference(M,L.targetId,G)).next(()=>fe.forEach(L.Js,G=>T.persistence.referenceDelegate.removeReference(M,L.targetId,G)))))}catch(M){if(!sl(M))throw M;Fe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const L=M.targetId;if(!M.fromCache){const G=T.ui.get(L),Se=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);T.ui=T.ui.insert(L,Se)}}}),function(w,I){return m.apply(this,arguments)})(r.localStore,u))}),ST.apply(this,arguments)}function xR(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,pe.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield qD(t.localStore,e);t.currentUser=e,(s=t).la.forEach(d=>{d.forEach(m=>{m.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Lc(t,r.di)}var s}),xT.apply(this,arguments)}function MR(n,e){const t=qe(n),r=t.aa.get(e);if(r&&r.na)return Qt().add(r.key);{let s=Qt();const u=t.ra.get(e);if(!u)return s;for(const d of u){const m=t.ia.get(d);s=s.unionWith(m.view.ju)}return s}}function RR(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,pe.Z)(function*(n,e){const t=qe(n),r=yield ty(t.localStore,e.query,!0),s=e.view.ta(r);return t.isPrimaryClient&&TT(t,e.targetId,s.Xu),s}),MT.apply(this,arguments)}function kR(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,pe.Z)(function*(n,e){const t=qe(n);return ry(t.localStore,e).then(r=>Lc(t,r))}),RT.apply(this,arguments)}function NR(n,e,t,r){return kT.apply(this,arguments)}function kT(){return kT=(0,pe.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(d,m){const w=qe(d),I=qe(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",T=>I.fn(T,m).next(M=>M?w.fi.Ks(T,M):fe.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield hl(s.remoteStore):"acknowledged"===t||"rejected"===t?(DT(s,e,r||null),IT(s,e),m=e,qe(qe(s.localStore).Bs)._n(m)):it(),yield Lc(s,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),kT.apply(this,arguments)}function NT(){return NT=(0,pe.Z)(function*(n,e){const t=qe(n);if(LT(t),UT(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield QS(t,r.toArray());t.da=!0,yield sT(t.remoteStore,!0);for(const u of s)S(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let s=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(my(t,d),dl(t.localStore,d,!0))),x(t.remoteStore,d)}),yield s,yield QS(t,r),function(u){const d=qe(u);d.aa.forEach((m,w)=>{x(d.remoteStore,w)}),d.ca.Si(),d.aa=new Map,d.ua=new Yn($e.comparator)}(t),t.da=!1,yield sT(t.remoteStore,!1)}}),NT.apply(this,arguments)}function QS(n,e,t){return OT.apply(this,arguments)}function OT(){return OT=(0,pe.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const d of e){let m;const w=r.ra.get(d);if(w&&0!==w.length){m=yield Fc(r.localStore,Xs(w[0]));for(const I of w){const T=r.ia.get(I),M=yield RR(r,T);M.snapshot&&u.push(M.snapshot)}}else{const I=yield ny(r.localStore,d);m=yield Fc(r.localStore,I),yield gT(r,JS(I),d,!1)}s.push(m)}return r.sa.zo(u),s}),OT.apply(this,arguments)}function JS(n){return np(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PR(n){const e=qe(n);return qe(qe(e.localStore).persistence).Fs()}function FR(n,e,t,r){return PT.apply(this,arguments)}function PT(){return PT=(0,pe.Z)(function*(n,e,t,r){const s=qe(n);if(s.da)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=s.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield ry(s.localStore,Lm(u[0])),m=il.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Lc(s,d,m);break}case"rejected":yield dl(s.localStore,e,!0),my(s,e,r);break;default:it()}}),PT.apply(this,arguments)}function LR(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,pe.Z)(function*(n,e,t){const r=LT(n);if(r.da){for(const s of e){if(r.ra.has(s)){Fe("SyncEngine","Adding an already active target "+s);continue}const u=yield ny(r.localStore,s),d=yield Fc(r.localStore,u);yield gT(r,JS(u),d.targetId,!1),S(r.remoteStore,d)}for(const s of t)r.ra.has(s)&&(yield dl(r.localStore,s,!1).then(()=>{x(r.remoteStore,s),my(r,s)}).catch(Oc))}}),FT.apply(this,arguments)}function LT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IR.bind(null,e),e.sa.zo=pR.bind(null,e.eventManager),e.sa.wa=gR.bind(null,e.eventManager),e}function UT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TR.bind(null,e),e}class XS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.M=uy(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return GD(this.persistence,new HD,e.initialUser,this.M)}ya(e){return new KD(iy.Yi,this.M)}ga(e){return new mC}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ex extends XS{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield UT(r.Ta.syncEngine),yield hl(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return GD(this.persistence,new HD,e.initialUser,this.M)}pa(e){return new NS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=r0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new sC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yC(),l0(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new mC}}class VR extends ex{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const s=r.Ta.syncEngine;r.sharedClientState instanceof u0&&(r.sharedClientState.syncEngine={$r:NR.bind(null,s),Br:FR.bind(null,s),Lr:LR.bind(null,s),Fs:PR.bind(null,s),Fr:kR.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,pe.Z)(function*(d){yield function OR(n,e){return NT.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=yC();if(!u0.vt(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=r0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new u0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class VT{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>KS(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=xR.bind(null,r.syncEngine),yield sT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fR}createDatastore(e){const t=uy(e.databaseInfo.databaseId),r=new BS(e.databaseInfo);return new a(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>KS(this.syncEngine,m,0),d=JD.vt()?new JD:new LS,new h(t,r,s,u,d);var t,r,s,u,d}createSyncEngine(e,t){return function(r,s,u,d,m,w,I){const T=new wR(r,s,u,d,m,w);return I&&(T.da=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=qe(t);Fe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield E(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tx(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class vC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class BR{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Kn,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),s=Number(r);isNaN(s)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(s);return new mR(JSON.parse(u),t.length+s)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,pe.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class jR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,pe.Z)(function*(u,d){const m=qe(u),w=gp(m.M)+"/documents",I={documents:d.map(G=>gh(m.M,G))},T=yield m._o("BatchGetDocuments",w,I),M=new Map;T.forEach(G=>{const ee=function Rv(n,e){return"found"in e?function(t,r){Rt(!!r.found);const s=no(t,r.found.name),u=zr(r.found.updateTime),d=new hi({mapValue:{fields:r.found.fields}});return mn.newFoundDocument(s,u,d)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const s=no(t,r.missing),u=zr(r.readTime);return mn.newNoDocument(s,u)}(n,e):it()}(m.M,G);M.set(ee.key.toString(),ee)});const L=[];return d.forEach(G=>{const ee=M.get(G.toString());Rt(!!ee),L.push(ee)}),L}),function(u,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=$e.fromPath(s);e.mutations.push(new Bm(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(s,u){const d=qe(s),m=gp(d.M)+"/documents",w={writes:u.map(I=>mp(d.M,I))};yield d.co("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?br.updateTime(t):br.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return br.updateTime(t)}return br.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $R{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.xa=r.maxAttempts,this.No=new _C(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,pe.Z)(function*(){const t=new jR(e.datastore),r=e.ka(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Ma(u)}))}).catch(s=>{e.Ma(s)})}))}ka(e){try{const t=this.updateFunction(e);return!Am(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Tv(t)}return!1}}class HR{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Or.UNAUTHENTICATED,this.clientId=cv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,pe.Z)(function*(m){Fe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=fy(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function nx(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,pe.Z)(function*(u){r.isEqual(u)||(yield qD(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),BT.apply(this,arguments)}function rx(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield $T(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>jS(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>jS(e.remoteStore,u)),n.onlineComponents=e}),jT.apply(this,arguments)}function $T(n){return HT.apply(this,arguments)}function HT(){return HT=(0,pe.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield nx(n,new XS)),n.offlineComponents}),HT.apply(this,arguments)}function wC(n){return GT.apply(this,arguments)}function GT(){return GT=(0,pe.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield rx(n,new VT)),n.onlineComponents}),GT.apply(this,arguments)}function ix(n){return $T(n).then(e=>e.persistence)}function qT(n){return $T(n).then(e=>e.localStore)}function sx(n){return wC(n).then(e=>e.remoteStore)}function ZT(n){return wC(n).then(e=>e.syncEngine)}function yy(n){return zT.apply(this,arguments)}function zT(){return zT=(0,pe.Z)(function*(n){const e=yield wC(n),t=e.eventManager;return t.onListen=ER.bind(null,e.syncEngine),t.onUnlisten=bR.bind(null,e.syncEngine),t}),zT.apply(this,arguments)}function ox(n,e,t={}){const r=new Kn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,u,d,m,w){const I=new vC({next:M=>{u.enqueueAndForget(()=>cT(s,T));const L=M.docs.has(d);!L&&M.fromCache?w.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&m&&"server"===m.source?w.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(M)},error:M=>w.reject(M)}),T=new fT(dh(d.path),I,{includeMetadataChanges:!0,ku:!0});return uT(s,T)}(yield yy(n),n.asyncQueue,e,t,r)})),r.promise}function ax(n,e,t={}){const r=new Kn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,u,d,m,w){const I=new vC({next:M=>{u.enqueueAndForget(()=>cT(s,T)),M.fromCache&&"server"===m.source?w.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(M)},error:M=>w.reject(M)}),T=new fT(d,I,{includeMetadataChanges:!0,ku:!0});return uT(s,T)}(yield yy(n),n.asyncQueue,e,t,r)})),r.promise}const ux=new Map;function WT(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lx(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cx(n){if(!$e.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dx(n){if($e.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function EC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=EC(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hx(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class fx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class f0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fx({}),this._settingsFrozen=!1,e instanceof Ka?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(s.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Im;switch(t.type){case"gapi":const r=t.client;return Rt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new FE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ux.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),ux.delete(e),t.terminate())}(this),Promise.resolve()}}class Nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class fl extends ts{constructor(e,t,r){super(e,t,dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new $e(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}function px(n,e,...t){if(n=(0,xt.m9)(n),WT("collection","path",e),n instanceof f0){const r=Gt.fromString(e,...t);return dx(r),new fl(n,null,r)}{if(!(n instanceof Nn||n instanceof fl))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return dx(r),new fl(n.firestore,null,r)}}function bC(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=cv.R()),WT("doc","path",e),n instanceof f0){const r=Gt.fromString(e,...t);return cx(r),new Nn(n,null,new $e(r))}{if(!(n instanceof Nn||n instanceof fl))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return cx(r),new Nn(n.firestore,n instanceof fl?n.converter:null,new $e(r))}}function gx(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof Nn||n instanceof fl)&&(e instanceof Nn||e instanceof fl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mx(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&rp(n._query,e._query)&&n.converter===e.converter}class ek{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new _C(this,"async_queue_retry"),this.Qa=()=>{const t=l0();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=l0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=l0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Kn;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,pe.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!sl(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,jn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const s=aT.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(s),s}ja(){this.Ua&&it()}verifyOperationInProgress(){}Ja(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function KT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class tk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hn extends f0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ek,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||yx(this),this._firestoreClient.terminate()}}function Fr(n){return n._firestoreClient||yx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new lD(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new HR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function _x(n,e,t){const r=new Kn;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield nx(n,t),yield rx(n,e),r.resolve()}catch(s){if(!("FirebaseError"===(u=s).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function vx(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Uc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(wr.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pl(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rp{constructor(e){this._methodName=e}}class CC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const dk=/^__.*__$/;class hk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new lp(e,this.data,t,this.fieldTransforms)}}class wx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ex(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class IC{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=s,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new IC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.nc({path:r,ic:!1});return s.rc(e),s}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.nc({path:r,ic:!1});return s.tc(),s}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return AC(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Ex(this.ec)&&dk.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class fk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||uy(e)}lc(e,t,r,s=!1){return new IC({ec:e,methodName:t,hc:r,path:vr.emptyPath(),ic:!1,cc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function kp(n){const e=n._freezeSettings(),t=uy(n._databaseId);return new fk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DC(n,e,t,r,s,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,s);XT("Data must be an object, but it was:",d,r);const m=Ix(r,d);let w,I;if(u.merge)w=new da(d.fieldMask),I=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const M of u.mergeFields){const L=eA(e,M,t);if(!d.contains(L))throw new Ne(ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);Tx(T,L)||T.push(L)}w=new da(T),I=d.fieldTransforms.filter(M=>w.covers(M.field))}else w=null,I=d.fieldTransforms;return new hk(new hi(m),w,I)}class p0 extends Rp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof p0}}function bx(n,e,t){return new IC({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class YT extends Rp{_toFieldTransform(e){return new ap(e.path,new op)}isEqual(e){return e instanceof YT}}class pk extends Rp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=bx(this,e,!0),r=this.fc.map(u=>Np(u,t)),s=new Sc(r);return new ap(e.path,s)}isEqual(e){return this===e}}class gk extends Rp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=bx(this,e,!0),r=this.fc.map(u=>Np(u,t)),s=new eo(r);return new ap(e.path,s)}isEqual(e){return this===e}}class mk extends Rp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new No(e.M,bv(e.M,this.dc));return new ap(e.path,t)}isEqual(e){return this===e}}function QT(n,e,t,r){const s=n.lc(1,e,t);XT("Data must be an object, but it was:",s,r);const u=[],d=hi.empty();wc(r,(w,I)=>{const T=TC(e,w,t);I=(0,xt.m9)(I);const M=s.oc(T);if(I instanceof p0)u.push(T);else{const L=Np(I,M);null!=L&&(u.push(T),d.set(T,L))}});const m=new da(u);return new wx(d,m,s.fieldTransforms)}function JT(n,e,t,r,s,u){const d=n.lc(1,e,t),m=[eA(e,r,t)],w=[s];if(u.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(eA(e,u[L])),w.push(u[L+1]);const I=[],T=hi.empty();for(let L=m.length-1;L>=0;--L)if(!Tx(I,m[L])){const G=m[L];let ee=w[L];ee=(0,xt.m9)(ee);const Se=d.oc(G);if(ee instanceof p0)I.push(G);else{const Me=Np(ee,Se);null!=Me&&(I.push(G),T.set(G,Me))}}const M=new da(I);return new wx(T,M,d.fieldTransforms)}function Cx(n,e,t,r=!1){return Np(t,n.lc(r?4:3,e))}function Np(n,e){if(Dx(n=(0,xt.m9)(n)))return XT("Unsupported field value:",e,n),Ix(n,e);if(n instanceof Rp)return function(t,r){if(!Ex(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const d of t){let m=Np(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bv(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=gn.fromDate(t);return{timestampValue:ph(r.M,s)}}if(t instanceof gn){const s=new gn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ph(r.M,s)}}if(t instanceof CC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pl)return{bytesValue:Cb(r.M,t._byteString)};if(t instanceof Nn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${EC(t)}`)}(n,e)}function Ix(n,e){const t={};return Kf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wc(n,(r,s)=>{const u=Np(s,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Dx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gn||n instanceof CC||n instanceof pl||n instanceof Nn||n instanceof Rp)}function XT(n,e,t){if(!Dx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=EC(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function eA(n,e,t){if((e=(0,xt.m9)(e))instanceof Uc)return e._internalPath;if("string"==typeof e)return TC(n,e);throw AC("Field path arguments must be of type string or ",n,!1,void 0,t)}const yk=new RegExp("[~\\*/\\[\\]]");function TC(n,e,t){if(e.search(yk)>=0)throw AC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uc(...e.split("."))._internalPath}catch(r){throw AC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AC(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${s}`),w+=")"),new Ne(ce.INVALID_ARGUMENT,m+n+w)}function Tx(n,e){return n.some(t=>t.isEqual(e))}class g0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _k(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(SC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _k extends g0{data(){return super.data()}}function SC(n,e){return"string"==typeof e?TC(n,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}class Op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vc extends g0{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new m0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(SC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class m0 extends Vc{data(e={}){return super.data(e)}}class Th{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Op(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new m0(this._firestore,this._userDataWriter,r.key,r,new Op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new m0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Op(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const m=new m0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Op(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,I=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),I=u.indexOf(d.doc.key)),{type:vk(d.type),doc:m,oldIndex:w,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function Ax(n,e){return n instanceof Vc&&e instanceof Vc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Th&&e instanceof Th&&n._firestore===e._firestore&&mx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Sx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class y0{}function Ah(n,...e){for(const t of e)n=t._apply(n);return n}class wk extends y0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=kp(e.firestore),r=function(s,u,d,m,w,I,T){let M;if(w.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){Ox(T,I);const G=[];for(const ee of T)G.push(Nx(m,s,ee));M={arrayValue:{values:G}}}else M=Nx(m,s,T)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||Ox(T,I),M=Cx(d,"where",T,"in"===I||"not-in"===I);const L=Er.create(w,I,M);return function(G,ee){if(ee.S()){const Me=wv(G);if(null!==Me&&!Me.isEqual(ee.field))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Me.toString()}' and '${ee.field.toString()}'`);const vt=Tc(G);null!==vt&&Px(0,ee.field,vt)}const Se=function(Me,vt){for(const Ct of Me.filters)if(vt.indexOf(Ct.op)>=0)return Ct.op;return null}(G,function(Me){switch(Me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==Se)throw new Ne(ce.INVALID_ARGUMENT,Se===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${Se.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ts(e.firestore,e.converter,function(s,u){const d=s.filters.concat([u]);return new Ja(s.path,s.collectionGroup,s.explicitOrderBy.slice(),d,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class bk extends y0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Dc(s,u);return function(m,w){if(null===Tc(m)){const I=wv(m);null!==I&&Px(0,I,w.field)}}(r,d),d}(e._query,this._c,this.gc);return new ts(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Ja(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xx extends y0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new ts(e.firestore,e.converter,nb(e._query,this.yc,this.Ic))}}class Mx extends y0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=kx(e,this.type,this.Tc,this.Ec);return new ts(e.firestore,e.converter,(s=t,new Ja((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class Rx extends y0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=kx(e,this.type,this.Tc,this.Ec);return new ts(e.firestore,e.converter,(s=t,new Ja((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function kx(n,e,t,r){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof g0)return function(s,u,d,m,w){if(!m)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const I=[];for(const T of Ac(s))if(T.field.isKeyField())I.push(Cc(u,m.key));else{const M=m.data.field(T.field);if(Tm(M))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=T.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(M)}return new nl(I,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=kp(n.firestore);return function(u,d,m,w,I,T){const M=u.explicitOrderBy;if(I.length>M.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<I.length;G++){const ee=I[G];if(M[G].field.isKeyField()){if("string"!=typeof ee)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ee}`);if(!tb(u)&&-1!==ee.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ee}' contains a slash.`);const Se=u.path.child(Gt.fromString(ee));if(!$e.isDocumentKey(Se))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Se}' is not because it contains an odd number of segments.`);const Me=new $e(Se);L.push(Cc(d,Me))}else{const Se=Cx(m,w,ee);L.push(Se)}}return new nl(L,T)}(n._query,n.firestore._databaseId,s,e,t,r)}}function Nx(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tb(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Gt.fromString(t));if(!$e.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cc(n,new $e(r))}if(t instanceof Nn)return Cc(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${EC(t)}.`)}function Ox(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Px(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Mk={maxAttempts:5};class tA{convertValue(e,t="none"){switch(bc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(el(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return wc(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new CC(kn(e.latitude),kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$E(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const t=Xu(e);return new gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Gt.fromString(e);Rt(Rb(r));const s=new Ka(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return s.isEqual(t)||jn(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function xC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Rk extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}class Fx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kp(e)}set(e,t,r){this._verifyNotCommitted();const s=Sh(e,this._firestore),u=xC(s.converter,t,r),d=DC(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,br.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Sh(e,this._firestore);let d;return d="string"==typeof(t=(0,xt.m9)(t))||t instanceof Uc?JT(this._dataReader,"WriteBatch.update",u._key,t,r,s):QT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,br.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sh(e,this._firestore);return this._mutations=this._mutations.concat(new Xa(t._key,br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sh(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pp extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function Lx(n,e,t){n=Kt(n,Nn);const r=Kt(n.firestore,Hn),s=xC(n.converter,e,t);return _y(r,[DC(kp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,br.none())])}function Ux(n,e,t,...r){n=Kt(n,Nn);const s=Kt(n.firestore,Hn),u=kp(s);let d;return d="string"==typeof(e=(0,xt.m9)(e))||e instanceof Uc?JT(u,"updateDoc",n._key,e,t,r):QT(u,"updateDoc",n._key,e),_y(s,[d.toMutation(n._key,br.exists(!0))])}function Vx(n,...e){var t,r,s;n=(0,xt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||KT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(KT(e[d])){const M=e[d];e[d]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[d+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[d+2]=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}let w,I,T;if(n instanceof Nn)I=Kt(n.firestore,Hn),T=dh(n._key.path),w={next:M=>{e[d]&&e[d](nA(I,n,M))},error:e[d+1],complete:e[d+2]};else{const M=Kt(n,ts);I=Kt(M.firestore,Hn),T=M._query;const L=new Pp(I);w={next:G=>{e[d]&&e[d](new Th(I,L,M,G))},error:e[d+1],complete:e[d+2]},Sx(n._query)}return function(M,L,G,ee){const Se=new vC(ee),Me=new fT(L,Se,G);return M.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return uT(yield yy(M),Me)})),()=>{Se.Aa(),M.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return cT(yield yy(M),Me)}))}}(Fr(I),T,m,w)}function _y(n,e){return function(t,r){const s=new Kn;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function CR(n,e,t){return _T.apply(this,arguments)}(yield ZT(t),r,s)})),s.promise}(Fr(n),e)}function nA(n,e,t){const r=t.docs.get(e._key),s=new Pp(n);return new Vc(n,s,e._key,r,new Op(t.hasPendingWrites,t.fromCache),e.converter)}class jk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kp(e)}get(e){const t=Sh(e,this._firestore),r=new Rk(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return it();const u=s[0];if(u.isFoundDocument())return new g0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new g0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const s=Sh(e,this._firestore),u=xC(s.converter,t,r),d=DC(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const u=Sh(e,this._firestore);let d;return d="string"==typeof(t=(0,xt.m9)(t))||t instanceof Uc?JT(this._dataReader,"Transaction.update",u._key,t,r,s):QT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Sh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sh(e,this._firestore),r=new Pp(this._firestore);return super.get(e).then(s=>new Vc(this._firestore,r,t._key,s._document,new Op(!1,!1),t.converter))}}function rA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jx(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function $x(){if(!function Yf(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ys=_s.SDK_VERSION,(0,_s._registerComponent)(new Bu.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new Hn(s,new $n(t.getProvider("auth-internal")),new oD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,_s.registerVersion)(uv,"3.4.9",n),(0,_s.registerVersion)(uv,"3.4.9","esm2017")}();class _0{constructor(e){this._delegate=e}static fromBase64String(e){return $x(),new _0(pl.fromBase64String(e))}static fromUint8Array(e){return jx(),new _0(pl.fromUint8Array(e))}toBase64(){return $x(),this._delegate.toBase64()}toUint8Array(){return jx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iA(n){return function Yk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Qk{enableIndexedDbPersistence(e,t){return function rk(n,e){vx(n=Kt(n,Hn));const t=Fr(n),r=n._freezeSettings(),s=new VT;return _x(t,s,new ex(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ik(n){vx(n=Kt(n,Hn));const e=Fr(n),t=n._freezeSettings(),r=new VT;return _x(e,r,new VR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function sk(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!Po.vt())return Promise.resolve();const s=r+"main";yield Po.delete(s)}),function(r){return t.apply(this,arguments)})(r0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Hx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ka||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function JR(n,e,t,r={}){var s;const u=(n=Kt(n,f0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&bm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Or.MOCK_USER;else{d=(0,xt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Or(w)}n._authCredentials=new Dm(new PE(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function ak(n){return function GR(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield ix(n),t=yield sx(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s.wu.delete(0),p(s)}(t)}))}(Fr(n=Kt(n,Hn)))}(this._delegate)}disableNetwork(){return function uk(n){return function qR(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield ix(n),t=yield sx(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(s){const u=qe(s);u.wu.add(0),yield E(u),u.yu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Fr(n=Kt(n,Hn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ok(n){return function(e){const t=new Kn;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function AR(n,e){return CT.apply(this,arguments)}(yield ZT(e),t)})),t.promise}(Fr(n=Kt(n,Hn)))}(this._delegate)}onSnapshotsInSync(e){return function Bk(n,e){return function WR(n,e){const t=new vC(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield yy(n),s=t,qe(r).bu.add(s),void s.next();var r,s})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield yy(n),s=t,void qe(r).bu.delete(s);var r,s}))}}(Fr(n=Kt(n,Hn)),KT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vy(this,px(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ya(this,bC(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Cs(this,function XR(n,e){if(n=Kt(n,f0),WT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new Ja(Gt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function $k(n,e,t){n=Kt(n,Hn);const r=Object.assign(Object.assign({},Mk),t);return function(s){if(s.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function KR(n,e,t){const r=new Kn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const s=yield(u=n,wC(u).then(d=>d.datastore));var u;new $R(n.asyncQueue,s,t,e,r).run()})),r.promise}(Fr(n),s=>e(new jk(n,s)),r)}(this._delegate,t=>e(new Gx(this,t)))}batch(){return Fr(this._delegate),new qx(new Fx(this._delegate,e=>_y(this._delegate,e)))}loadBundle(e){return function lk(n,e){const t=Fr(n=Kt(n,Hn)),r=new tk;return function YR(n,e,t,r){const s=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,I){if(w instanceof Uint8Array)return tx(w,I);if(w instanceof ArrayBuffer)return tx(new Uint8Array(w),I);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new BR(w,d);var w}(t,uy(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function UR(n,e,t){const r=qe(n);var s;(s=(0,pe.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(L,G){const ee=qe(L),Se=zr(G.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Me=>ee._s.getBundleMetadata(Me,G.id)).then(Me=>!!Me&&Me.createTime.compareTo(Se)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=w).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(GS(w));const I=new yR(w,u.localStore,d.M);let T=yield d.ma();for(;T;){const L=yield I.Fu(T);L&&m._updateProgress(L),T=yield d.ma()}const M=yield I.complete();return yield Lc(u,M.Lu,void 0),yield function(L,G){const ee=qe(L);return ee.persistence.runTransaction("Save bundle","readwrite",Se=>ee._s.saveBundleMetadata(Se,G))}(u.localStore,w),m._completeWith(M.progress),Promise.resolve(M.Bu)}catch(w){return bm("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var L}),function(u,d,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield ZT(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ck(n,e){return function QR(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s._s.getNamedQuery(u,r))}(yield qT(n),e)}))}(Fr(n=Kt(n,Hn)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Cs(this,t):null)}}class MC extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new _0(new pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ya.forKey(t,this.firestore,null)}}class Gx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MC(e)}get(e){const t=Lp(e);return this._delegate.get(t).then(r=>new v0(this._firestore,new Vc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Lp(e);return r?(rA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}}class qx{constructor(e){this._delegate=e}set(e,t,r){const s=Lp(e);return r?(rA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new m0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new w0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Fp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Fp(e,new MC(e),t),s.set(t,u)),u}}Fp.INSTANCES=new WeakMap;class ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ya(t,new Nn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new ya(t,new Nn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vy(this.firestore,px(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Nn&&gx(this._delegate,e)}set(e,t){t=rA("DocumentReference.set",t);try{return t?Lx(this._delegate,e,t):Lx(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ux(this._delegate,e):Ux(this._delegate,e,t,...r)}catch(s){throw bs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function Uk(n){return _y(Kt(n.firestore,Hn),[new Xa(n._key,br.none())])}(this._delegate)}onSnapshot(...e){const t=Zx(e),r=zx(e,s=>new v0(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Vx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Nk(n){n=Kt(n,Nn);const e=Kt(n.firestore,Hn),t=Fr(e),r=new Pp(e);return function ZR(n,e){const t=new Kn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,u,d){try{const m=yield function(w,I){const T=qe(w);return T.persistence.runTransaction("read document","readonly",M=>T.fi.Ls(M,I))}(s,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=fy(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(s,u,d){return r.apply(this,arguments)})(yield qT(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Vc(e,r,n._key,s,new Op(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ok(n){n=Kt(n,Nn);const e=Kt(n.firestore,Hn);return ox(Fr(e),n._key,{source:"server"}).then(t=>nA(e,n,t))}(this._delegate):function kk(n){n=Kt(n,Nn);const e=Kt(n.firestore,Hn);return ox(Fr(e),n._key).then(t=>nA(e,n,t))}(this._delegate),t.then(r=>new v0(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ya(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function Zx(n){for(const e of n)if("object"==typeof e&&!iA(e))return e;return{}}function zx(n,e){var t,r;let s;return s=iA(n[0])?n[0]:iA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class v0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ax(this._delegate,e._delegate)}}class w0 extends v0{data(e){const t=this._delegate.data(e);return function bt(n,e){n||it()}(void 0!==t),t}}class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MC(e)}where(e,t,r){try{return new Cs(this.firestore,Ah(this._delegate,function Ek(n,e,t){const r=e,s=SC("where",n);return new wk(s,r,t)}(e,t,r)))}catch(s){throw bs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Cs(this.firestore,Ah(this._delegate,function Ck(n,e="asc"){const t=e,r=SC("orderBy",n);return new bk(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Cs(this.firestore,Ah(this._delegate,function Ik(n){return hx("limit",n),new xx("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Cs(this.firestore,Ah(this._delegate,function Dk(n){return hx("limitToLast",n),new xx("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Cs(this.firestore,Ah(this._delegate,function Tk(...n){return new Mx("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Cs(this.firestore,Ah(this._delegate,function Ak(...n){return new Mx("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Cs(this.firestore,Ah(this._delegate,function Sk(...n){return new Rx("endBefore",n,!1)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Cs(this.firestore,Ah(this._delegate,function xk(...n){return new Rx("endAt",n,!0)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return mx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Fk(n){n=Kt(n,ts);const e=Kt(n.firestore,Hn),t=Fr(e),r=new Pp(e);return function zR(n,e){const t=new Kn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,u,d){try{const m=yield ty(s,u,!0),w=new zS(u,m._i),I=w.Wu(m.documents),T=w.applyChanges(I,!1);d.resolve(T.snapshot)}catch(m){const w=fy(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(s,u,d){return r.apply(this,arguments)})(yield qT(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Th(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function Lk(n){n=Kt(n,ts);const e=Kt(n.firestore,Hn),t=Fr(e),r=new Pp(e);return ax(t,n._query,{source:"server"}).then(s=>new Th(e,r,n,s))}(this._delegate):function Pk(n){n=Kt(n,ts);const e=Kt(n.firestore,Hn),t=Fr(e),r=new Pp(e);return Sx(n._query),ax(t,n._query).then(s=>new Th(e,r,n,s))}(this._delegate),t.then(r=>new sA(this.firestore,new Th(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Zx(e),r=zx(e,s=>new sA(this.firestore,new Th(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Vx(this._delegate,t,r)}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}class Xk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new w0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new w0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Xk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new w0(this._firestore,r))})}isEqual(e){return Ax(this._delegate,e._delegate)}}class vy extends Cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ya(this.firestore,e):null}doc(e){try{return new ya(this.firestore,void 0===e?bC(this._delegate):bC(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function Vk(n,e){const t=Kt(n.firestore,Hn),r=bC(n),s=xC(n.converter,e);return _y(t,[DC(kp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,br.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ya(this.firestore,t))}isEqual(e){return gx(this._delegate,e._delegate)}withConverter(e){return new vy(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}function Lp(n){return Kt(n,Nn)}class oA{constructor(...e){this._delegate=new Uc(...e)}static documentId(){return new oA(vr.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof Uc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Gk(){return new YT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=function Hk(){return new p0("deleteField")}();return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function qk(...n){return new pk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function Zk(...n){return new gk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=function zk(n){return new mk("increment",n)}(e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const eN={Firestore:Hx,GeoPoint:CC,Timestamp:gn,Blob:_0,Transaction:Gx,WriteBatch:qx,DocumentReference:ya,DocumentSnapshot:v0,Query:Cs,QueryDocumentSnapshot:w0,QuerySnapshot:sA,CollectionReference:vy,FieldPath:oA,FieldValue:Up,setLogLevel:function Jk(n){!function rh(n){Ju.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Wx(n,e){return function rN(n,e=lf.z){return new wn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function aA(n,e){return Wx(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function RC(n,e){return aA(n,e).pipe(Co(void 0),zg(),(0,gt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=s.find(T=>T.doc.ref.isEqual(d.ref)),I=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&I&&JSON.stringify(I.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function Kx(n,e,t){return RC(n,t).pipe(ji((r,s)=>function sN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function oN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return uA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return uA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return uA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function FI(n,e=Bi.y){return n=null!=n?n:E_,(0,Bn.e)((t,r)=>{let s,u=!0;t.subscribe((0,Vn.x)(r,d=>{const m=e(d);(u||!n(s,m))&&(u=!1,s=m,r.next(d))}))})}(),(0,gt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function uA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Yx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function nN(n){(function tN(n,e){n.INTERNAL.registerComponent(new Bu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},eN)))})(n,(e,t)=>new Hx(e,t,new Qk)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(xw.Z);class Qx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Co(void 0),zg(),Zn(([r,s])=>s.length>0||!r),(0,gt.U)(([r,s])=>s),Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Yx(e);return Kx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return aA(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rn.iC)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Rn.iC)}add(e){return this.ref.add(e)}doc(e){return new Jx(this.ref.doc(e),this.afs)}}class Jx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=tM(r,t);return new Qx(s,u,this.afs)}snapshotChanges(){return function iN(n,e){return Wx(n,e).pipe(Co(void 0),zg(),(0,gt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Wt.D)(this.ref.get(e)).pipe(Rn.iC)}}class aN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RC(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zn(t=>t.length>0),Rn.iC):RC(this.query,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Yx(e);return Kx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return aA(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Rn.iC)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Rn.iC)}}const Xx=new c.OlP("angularfire2.enableFirestorePersistence"),eM=new c.OlP("angularfire2.firestore.persistenceSettings"),uN=new c.OlP("angularfire2.firestore.settings"),lN=new c.OlP("angularfire2.firestore.use-emulator");function tM(n,e=(t=>t)){return{query:e(n),ref:n}}let lA=(()=>{class n{constructor(t,r,s,u,d,m,w,I,T,M,L,G,ee,Se,Me,vt,Ct){this.schedulers=w;const ht=(0,dt.on)(t,m,r),st=T;M&&Zg(ht,m,L,ee,Se,Me,G,vt),[this.firestore,this.persistenceEnabled$]=(0,dt.cc)(`${ht.name}.firestore`,"AngularFirestore",ht.name,()=>{const St=m.runOutsideAngular(()=>ht.firestore());if(u&&St.settings(u),st&&St.useEmulator(...st),s&&!$o(d)){const Xe=()=>{try{return(0,Wt.D)(St.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(wt){return"undefined"!=typeof console&&console.warn(wt),nt(!1)}};return[St,m.runOutsideAngular(Xe)]}return[St,nt(!1)]},[u,st,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=tM(s,r),m=this.schedulers.ngZone.run(()=>u);return new Qx(m,d,this)}collectionGroup(t,r){const s=r||(d=>d),u=this.firestore.collectionGroup(t);return new aN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new Jx(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(dt.Dh),c.LFG(dt.xv,8),c.LFG(Xx,8),c.LFG(uN,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Rn.HU),c.LFG(eM,8),c.LFG(lN,8),c.LFG(sc,8),c.LFG(PI,8),c.LFG(Gg,8),c.LFG(w_,8),c.LFG(qg,8),c.LFG($d,8),c.LFG(Aw,8),c.LFG(Hg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nM=(()=>{class n{constructor(){wf.Z.registerVersion("angularfire",Rn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Xx,useValue:!0},{provide:eM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[lA]}),n})(),wy=(()=>{class n{constructor(t,r,s,u){this.auth=t,this.db=r,this.route=s,this.router=u,this.redirect=!1,this.currentUser=null,this.userCollection=this.db.collection("users"),this.isAuthenticated$=t.user.pipe((0,gt.U)(d=>!!d)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function oI(n,e=lf.z){const t=function xo(n=0,e,t=lf.P){let r=-1;return null!=e&&((0,iI.K)(e)?t=e:r=e),new wn.y(s=>{let u=function sI(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let d=0;return t.schedule(function(){s.closed||(s.next(d++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,e);return Yy(()=>t)}(1e3)),this.router.events.pipe(Zn(d=>d instanceof $i),(0,gt.U)(d=>this.route.firstChild),cn(d=>{var m;return null!==(m=null==d?void 0:d.data)&&void 0!==m?m:nt({})})).subscribe(d=>{var m;this.redirect=null!==(m=d.authOnly)&&void 0!==m&&m}),this.auth.user.subscribe(d=>this.currentUser=d)}getUser(){return this.auth.user}createUser(t,r){return(0,Wt.D)(this.auth.createUserWithEmailAndPassword(t.email,r)).pipe(oi(d=>{throw console.log(d),d}),(0,si.q)(1),vi(d=>{if(null==d)throw Error("User credentials conn't be null !!\u{1f480}");return(0,Wt.D)(this.userCollection.doc(d.user.uid).set(t)).pipe((0,bn.z)(()=>(0,Wt.D)(d.user.updateProfile({displayName:t.name}))))})).pipe((0,gt.U)(d=>t),(0,si.q)(1))}login(t,r){var s=this;return(0,pe.Z)(function*(){yield s.auth.signInWithEmailAndPassword(t,r)})()}logout(){var t=this;return(0,pe.Z)(function*(){yield t.auth.signOut(),t.redirect&&(yield t.router.navigateByUrl("/"))})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(sc),c.LFG(lA),c.LFG(Do),c.LFG(Mn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ey=(()=>{class n{constructor(){this.modalsBag=[]}register(t){if(this.modalsBag.some(r=>r.Id==t))throw Error(`Dublicate modal key !! \u{1f480}\u{1f480} ... the key ${t} already exists \u{1f914}`);this.modalsBag.push({Id:t,visible:!1})}unRegister(t){this.modalsBag=this.modalsBag.filter(r=>r.Id!=t)}isModalOpen(t){var r,s;return null!==(s=null===(r=this.modalsBag.find(u=>u.Id==t))||void 0===r?void 0:r.visible)&&void 0!==s&&s}toggleModal(t){var r;let s=this.modalsBag.find(u=>u.Id==t);s&&(s.visible=null!==(r=!(null==s?void 0:s.visible))&&void 0!==r&&r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",14),c.NdJ("click",function(s){return c.CHM(t),c.oxw().openModal(s)}),c._uU(2,"Login / Register"),c.qZA()()}}const cA=function(){return{exact:!0}},dN=function(){return{sort:"1"}};function hN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",15),c._uU(2,"Manage"),c.qZA()(),c.TgZ(3,"li")(4,"a",16),c._uU(5,"Upload"),c.qZA()(),c.TgZ(6,"li")(7,"a",14),c.NdJ("click",function(s){return c.CHM(t),c.oxw().logout(s)}),c._uU(8,"Logout"),c.qZA()()}2&n&&(c.xp6(1),c.Q6J("routerLinkActiveOptions",c.DdM(3,cA))("queryParams",c.DdM(4,dN)),c.xp6(3),c.Q6J("routerLinkActiveOptions",c.DdM(5,cA)))}let fN=(()=>{class n{constructor(t,r,s){this.modalService=t,this.authService=r,this.router=s}ngOnInit(){}openModal(t){t.preventDefault(),this.modalService.toggleModal("auth-modal")}logout(t){var r=this;return(0,pe.Z)(function*(){t.preventDefault(),yield r.authService.logout()})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ey),c.Y36(wy),c.Y36(Mn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:6,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"]],template:function(t,r){if(1&t&&(c.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),c._uU(3,"Clipz"),c.qZA(),c.TgZ(4,"div",3)(5,"ul",4),c.YNc(6,cN,3,0,"li",5),c.ALo(7,"async"),c.YNc(8,hN,9,6,"ng-template",null,6,c.W1O),c.TgZ(10,"li")(11,"a",7),c._uU(12,"About"),c.qZA()()(),c.TgZ(13,"ul",8)(14,"li")(15,"a",9),c._UZ(16,"img",10),c.TgZ(17,"span",11),c._uU(18,"English"),c.qZA()()(),c.TgZ(19,"li",12)(20,"a",9),c._UZ(21,"img",13),c.TgZ(22,"span",11),c._uU(23,"French"),c.qZA()()()()()()()),2&t){const s=c.MAs(9);c.xp6(6),c.Q6J("ngIf",!c.lcZ(7,3,r.authService.isAuthenticatedWithDelay$))("ngIfElse",s),c.xp6(5),c.Q6J("routerLinkActiveOptions",c.DdM(5,cA))}},directives:[Ha,an,V0],pipes:[Zc],styles:[""]}),n})();const pN=[[["","heading",""]],"*"],gN=function(n){return{hidden:n}},mN=["[heading]","*"];let rM=(()=>{class n{constructor(t,r){this.modalService=t,this.element=r,this._modalId=""}set modalId(t){this.modalService.register(t),this._modalId=t}get modalId(){return this._modalId}closeModal(){this.modalService.toggleModal(this.modalId)}isModalOpen(){return this.modalService.isModalOpen(this.modalId)}ngOnInit(){document.body.appendChild(this.element.nativeElement)}ngOnDestroy(){this.modalService.unRegister(this.modalId),document.body.removeChild(this.element.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ey),c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId"},ngContentSelectors:mN,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(c.F$t(pN),c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c.NdJ("click",function(){return r.closeModal()}),c._UZ(3,"div",3),c.qZA(),c.TgZ(4,"span",4),c._uU(5,"\u200b"),c.qZA(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7),c.Hsn(9),c.TgZ(10,"div",8),c.NdJ("click",function(){return r.closeModal()}),c._uU(11," \u2715 "),c.qZA()(),c.Hsn(12,1),c.qZA()()()()),2&t&&c.Q6J("ngClass",c.VKq(1,gN,!r.isModalOpen()))},directives:[Br],styles:[""]}),n})();function yN(n,e){1&n&&c.Hsn(0,0,["*ngIf","isActive"])}const _N=["*"];let iM=(()=>{class n{constructor(){this.title="",this.isActive=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tab"]],inputs:{title:"title",isActive:"isActive"},ngContentSelectors:_N,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c.F$t(),c.YNc(0,yN,1,0,"ng-content",0)),2&t&&c.Q6J("ngIf",r.isActive)},directives:[an],styles:[""]}),n})();const vN=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function wN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",2)(1,"a",3),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().selectTab(u)}),c._uU(2),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngClass",c.WLB(2,vN,!t.isActive,t.isActive)),c.xp6(1),c.Oqu(t.title)}}const EN=["*"];let bN=(()=>{class n{constructor(){this.tabs=new c.n_E}ngAfterContentInit(){const t=this.tabs.filter(r=>r.isActive);(null==t?void 0:t.length)||this.selectTab(this.tabs.first),(null==t?void 0:t.length)>1&&this.selectTab(t[0])}selectTab(t){return this.tabs.forEach(r=>{r.isActive=!1}),t.isActive=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,s){if(1&t&&c.Suo(s,iM,4),2&t){let u;c.iGM(u=c.CRH())&&(r.tabs=u)}},ngContentSelectors:EN,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"ul",0),c.YNc(1,wN,3,5,"li",1),c.qZA(),c.Hsn(2)),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.tabs))},directives:[Ln,Br],styles:[""]}),n})(),CN=(()=>{class n{}return n.emailPattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,n})();const IN=["*"];let kC=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:IN,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA()),2&t&&c.Q6J("ngClass",r.bgColor)},directives:[Br],styles:[""]}),n})(),sM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Vp=(()=>{class n extends sM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const nu=new c.OlP("NgValueAccessor"),AN={provide:nu,useExisting:(0,c.Gpc)(()=>E0),multi:!0},xN=new c.OlP("CompositionEventMode");let E0=(()=>{class n extends sM{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function SN(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(xN,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([AN]),c.qOj]}),n})();function xh(n){return null==n||0===n.length}function aM(n){return null!=n&&"number"==typeof n.length}const Ai=new c.OlP("NgValidators"),Mh=new c.OlP("NgAsyncValidators"),MN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Si{static min(e){return function uM(n){return e=>{if(xh(e.value)||xh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function lM(n){return e=>{if(xh(e.value)||xh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return cM(e)}static requiredTrue(e){return function dM(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function hM(n){return xh(n.value)||MN.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function fM(n){return e=>xh(e.value)||!aM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function pM(n){return e=>aM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return gM(e)}static nullValidator(e){return null}static compose(e){return EM(e)}static composeAsync(e){return bM(e)}}function cM(n){return xh(n.value)?{required:!0}:null}function gM(n){if(!n)return NC;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(xh(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}function NC(n){return null}function mM(n){return null!=n}function yM(n){const e=(0,c.QGY)(n)?(0,Wt.D)(n):n;return(0,c.CqO)(e),e}function _M(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function vM(n,e){return e.map(t=>t(n))}function wM(n){return n.map(e=>function RN(n){return!n.validate}(e)?e:t=>e.validate(t))}function EM(n){if(!n)return null;const e=n.filter(mM);return 0==e.length?null:function(t){return _M(vM(t,e))}}function dA(n){return null!=n?EM(wM(n)):null}function bM(n){if(!n)return null;const e=n.filter(mM);return 0==e.length?null:function(t){return function DN(...n){const e=(0,Ra.jO)(n),{args:t,keys:r}=En(n),s=new wn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,I=d;for(let T=0;T<d;T++){let M=!1;(0,Pl.Xf)(t[T]).subscribe((0,Vn.x)(u,L=>{M||(M=!0,I--),m[T]=L},()=>w--,void 0,()=>{(!w||!M)&&(I||u.next(r?Ol(r,m):m),u.complete())}))}});return e?s.pipe(Nl(e)):s}(vM(t,e).map(yM)).pipe((0,gt.U)(_M))}}function hA(n){return null!=n?bM(wM(n)):null}function CM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IM(n){return n._rawValidators}function DM(n){return n._rawAsyncValidators}function fA(n){return n?Array.isArray(n)?n:[n]:[]}function OC(n,e){return Array.isArray(n)?n.includes(e):n===e}function TM(n,e){const t=fA(e);return fA(n).forEach(s=>{OC(t,s)||t.push(s)}),t}function AM(n,e){return fA(e).filter(t=>!OC(n,t))}class SM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Rh extends SM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Is extends SM{get formDirective(){return null}get path(){return null}}class xM{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let pA=(()=>{class n extends xM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Rh,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),b0=(()=>{class n extends xM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Is,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function C0(n,e){yA(n,e),e.valueAccessor.writeValue(n.value),function VN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&RM(n,e)})}(n,e),function jN(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function BN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&RM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function UN(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function LC(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),VC(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function UC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function yA(n,e){const t=IM(n);null!==e.validator?n.setValidators(CM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=DM(n);null!==e.asyncValidator?n.setAsyncValidators(CM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();UC(e._rawValidators,s),UC(e._rawAsyncValidators,s)}function VC(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=IM(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=DM(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return UC(e._rawValidators,r),UC(e._rawAsyncValidators,r),t}function RM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kM(n,e){yA(n,e)}function _A(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function OM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function vA(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===E0?t=u:function GN(n){return Object.getPrototypeOf(n.constructor)===Vp}(u)?r=u:s=u}),s||r||t||null}function wA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const I0="VALID",BC="INVALID",by="PENDING",D0="DISABLED";function bA(n){return(jC(n)?n.validators:n)||null}function PM(n){return Array.isArray(n)?dA(n):n||null}function CA(n,e){return(jC(e)?e.asyncValidators:n)||null}function FM(n){return Array.isArray(n)?hA(n):n||null}function jC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const LM=n=>n instanceof ru,IA=n=>n instanceof Cy;function UM(n){return LM(n)?n.value:n.getRawValue()}function VM(n,e){const t=IA(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function BM(n,e){IA(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new c.vHH(1002,"")})}class DA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=PM(this._rawValidators),this._composedAsyncValidatorFn=FM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===I0}get invalid(){return this.status===BC}get pending(){return this.status==by}get disabled(){return this.status===D0}get enabled(){return this.status!==D0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=PM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=FM(e)}addValidators(e){this.setValidators(TM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AM(e,this._rawAsyncValidators))}hasValidator(e){return OC(this._rawValidators,e)}hasAsyncValidator(e){return OC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=by,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=D0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=I0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===I0||this.status===by)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?D0:I0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=by,this._hasOwnPendingAsyncValidator=!0;const t=yM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function qN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=IA(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:(n=>n instanceof zN)(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?D0:this.errors?BC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(by)?by:this._anyControlsHaveStatus(BC)?BC:I0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ru extends DA{constructor(e=null,t,r){super(bA(t),CA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jC(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Cy extends DA{constructor(e,t,r){super(bA(t),CA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){BM(this,e),Object.keys(e).forEach(r=>{VM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=UM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class zN extends DA{constructor(e,t,r){super(bA(t),CA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){BM(this,e),e.forEach((r,s)=>{VM(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>UM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const WN={provide:Is,useExisting:(0,c.Gpc)(()=>$C)},T0=(()=>Promise.resolve(null))();let $C=(()=>{class n extends Is{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new Cy({},dA(t),hA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){T0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),C0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){T0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){T0.then(()=>{const r=this._findContainer(t.path),s=new Cy({});kM(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){T0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){T0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,OM(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ai,10),c.Y36(Mh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([WN]),c.qOj]}),n})();const YN={provide:Rh,useExisting:(0,c.Gpc)(()=>TA)},HM=(()=>Promise.resolve(null))();let TA=(()=>{class n extends Rh{constructor(t,r,s,u,d){super(),this._changeDetectorRef=d,this.control=new ru,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=vA(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_A(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){C0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){HM.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=""===r||r&&"false"!==r;HM.then(()=>{var u;s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function FC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Is,9),c.Y36(Ai,10),c.Y36(Mh,10),c.Y36(nu,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([YN]),c.qOj,c.TTD]}),n})(),A0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),qM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const AA=new c.OlP("NgModelWithFormControlWarning"),tO={provide:Rh,useExisting:(0,c.Gpc)(()=>SA)};let SA=(()=>{class n extends Rh{constructor(t,r,s,u){super(),this._ngModelWarningConfig=u,this.update=new c.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=vA(0,s)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&LC(r,this,!1),C0(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}_A(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&LC(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Ai,10),c.Y36(Mh,10),c.Y36(nu,10),c.Y36(AA,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[c._Bn([tO]),c.qOj,c.TTD]}),n})();const nO={provide:Is,useExisting:(0,c.Gpc)(()=>Iy)};let Iy=(()=>{class n extends Is{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(VC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return C0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){LC(t.control||null,t,!1),wA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,OM(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(LC(r||null,t),LM(s)&&(C0(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);kM(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function $N(n,e){return VC(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yA(this.form,this),this._oldForm&&VC(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ai,10),c.Y36(Mh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([nO]),c.qOj,c.TTD]}),n})();const oO={provide:nu,useExisting:(0,c.Gpc)(()=>RA),multi:!0};function YM(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let RA=(()=>{class n extends Vp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=YM(this._getOptionId(t),t);this.setProperty("value",s)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function aO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([oO]),c.qOj]}),n})(),QM=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(YM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(RA,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const uO={provide:nu,useExisting:(0,c.Gpc)(()=>kA),multi:!0};function JM(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let kA=(()=>{class n extends Vp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const s=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(s.indexOf(d.toString())>-1)}}else r=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const s=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let m=0;m<d.length;m++){const I=this._getOptionValue(d[m].value);s.push(I)}}else{const d=r.options;for(let m=0;m<d.length;m++){const w=d[m];if(w.selected){const I=this._getOptionValue(w.value);s.push(I)}}}this.value=s,t(s)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function lO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([uO]),c.qOj]}),n})(),XM=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(JM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(JM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(kA,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Bp=(()=>{class n{constructor(){this._validator=NC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):NC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const fO={provide:Ai,useExisting:(0,c.Gpc)(()=>HC),multi:!0};let HC=(()=>{class n extends Bp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function cO(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>cM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([fO]),c.qOj]}),n})();const _O={provide:Ai,useExisting:(0,c.Gpc)(()=>NA),multi:!0};let NA=(()=>{class n extends Bp{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>gM(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[c._Bn([_O]),c.qOj]}),n})(),u1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[qM]]}),n})(),vO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[u1]}),n})(),OA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:AA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[u1]}),n})();function wO(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.Oqu(t.alertMessage)}}function EO(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Field is required !! "),c.qZA())}function bO(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," You must enter a valid email !! "),c.qZA())}function CO(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Field is required !! "),c.qZA())}let IO=(()=>{class n{constructor(t,r){this.auth=t,this.modalService=r,this.constatns=CN,this.showAlert=!1,this.alertColor="blue",this.alertMessage="",this.credentials={email:"",password:""}}ngOnInit(){}login(){var t=this;return(0,pe.Z)(function*(){var r;try{t.showAlert=!0,t.alertColor="orange",t.alertMessage="Please wait ... \u{1f607}";const{email:s,password:u}=t.credentials;yield t.auth.login(s,u),t.showAlert=!1,t.modalService.toggleModal("auth-modal")}catch(s){t.showAlert=!0,t.alertColor="red",t.alertMessage=null!==(r=s.message)&&void 0!==r?r:"somthing went wrong !! \u{1f616}\u{1f613}",console.error(s)}})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(wy),c.Y36(Ey))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:18,vars:8,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","pattern","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(c.YNc(0,wO,2,2,"app-alert",0),c.TgZ(1,"form",1,2),c.NdJ("ngSubmit",function(){return r.login()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Email"),c.qZA(),c.TgZ(6,"input",5,6),c.NdJ("ngModelChange",function(u){return r.credentials.email=u}),c.qZA(),c.YNc(8,EO,2,0,"p",7),c.YNc(9,bO,2,0,"p",7),c.qZA(),c.TgZ(10,"div",3)(11,"label",4),c._uU(12,"Password"),c.qZA(),c.TgZ(13,"input",8,9),c.NdJ("ngModelChange",function(u){return r.credentials.password=u}),c.qZA(),c.YNc(15,CO,2,0,"p",7),c.qZA(),c.TgZ(16,"button",10),c._uU(17," Submit "),c.qZA()()),2&t){const s=c.MAs(2),u=c.MAs(7),d=c.MAs(14);c.Q6J("ngIf",r.showAlert),c.xp6(6),c.Q6J("ngModel",r.credentials.email)("pattern",r.constatns.emailPattern),c.xp6(2),c.Q6J("ngIf",u.dirty&&(null==u.errors?null:u.errors.required)),c.xp6(1),c.Q6J("ngIf",u.dirty&&(null==u.errors?null:u.errors.required)),c.xp6(4),c.Q6J("ngModel",r.credentials.password),c.xp6(2),c.Q6J("ngIf",d.dirty&&(null==d.errors?null:d.errors.required)),c.xp6(1),c.Q6J("disabled",s.invalid)}},directives:[an,kC,A0,b0,$C,E0,HC,pA,TA,NA],styles:[""]}),n})();class DO{static match(e,t,r=""){return s=>{const u=s.get(e),d=s.get(t);return u&&d?(u.value!==d.value&&d.setErrors({noMatch:r}),null):(console.error("Form control can not be found in the form group !!"),{controlNotFound:!1})}}}let l1=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(s=>s.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(sc))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();var TO=N(655);const GC=new c.OlP("ngx-mask config"),c1=new c.OlP("new ngx-mask config"),d1=new c.OlP("initial ngx-mask config"),AO={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new c.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},SO=["Hh:m0:s0","Hh:m0","m0:s0"],xO=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let h1=(()=>{class n{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,s,u,d)=>{var m,w;let I=[],T="";if(Array.isArray(u)){const Se=new RegExp(u.map(Me=>"[\\^$.|?*+()".indexOf(Me)>=0?`\\${Me}`:Me).join("|"));I=r.split(Se),T=null!==(w=null===(m=r.match(Se))||void 0===m?void 0:m[0])&&void 0!==w?w:""}else I=r.split(u),T=u;const M=I.length>1?`${T}${I[1]}`:"";let L=I[0];const G=this.separatorLimit.replace(/\s/g,"");G&&+G&&(L="-"===L[0]?`-${L.slice(1,L.length).slice(0,G.length)}`:L.slice(0,G.length));const ee=/(\d+)(\d{3})/;for(;s&&ee.test(L);)L=L.replace(ee,"$1"+s+"$2");return void 0===d?L+M:0===d?L:L+M.substr(0,d+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const s=r.split(".");return s.length>1?Number(s[s.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var s,u,d;for(let m=(null===(s=this.suffix)||void 0===s?void 0:s.length)-1;m>=0;m--){const w=this.suffix.substr(m,null===(u=this.suffix)||void 0===u?void 0:u.length);if(r.includes(w)&&(m-1<0||!r.includes(this.suffix.substr(m-1,null===(d=this.suffix)||void 0===d?void 0:d.length))))return r.replace(w,"")}return r},this.checkInputPrecision=(r,s,u)=>{if(s<1/0){if(Array.isArray(u)){const w=u.find(I=>I!==this.thousandSeparator);u=w||u[0]}const d=new RegExp(this._charToRegExpExpression(u)+`\\d{${s}}.*$`),m=r.match(d);m&&m[0].length-1>s&&(r=r.substring(0,r.length-(m[0].length-1-s))),0===s&&this._compareOrIncludes(r[r.length-1],u,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[s,u]=r;return this.customPattern=u,this.applyMask(t,s)}applyMask(t,r,s=0,u=!1,d=!1,m=(()=>{})){var w,I;if(!r||"string"!=typeof t)return"";let T=0,M="",L=!1,G=!1,ee=1,Se=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const Me=t.toString().split("");"IP"===r&&(this.ipError=Me.filter(Xe=>"."===Xe).length<3&&Me.length<7,r="099.099.099.099");const vt=[];for(let Xe=0;Xe<t.length;Xe++)(null===(w=t[Xe])||void 0===w?void 0:w.match("\\d"))&&vt.push(t[Xe]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==vt.length&&14!==vt.length,r=vt.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const Xe=this.getPrecision(r);t=this.checkInputPrecision(t,Xe,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),M=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!d?t.slice(1,t.length):t,d&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const Xe=this._charToRegExpExpression(this.thousandSeparator);let wt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Xe,"");if(Array.isArray(this.decimalMarker))for(const Gp of this.decimalMarker)wt=wt.replace(this._charToRegExpExpression(Gp),"");else wt=wt.replace(this._charToRegExpExpression(this.decimalMarker),"");const fi=new RegExp("["+wt+"]");(t.match(fi)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const $p=this.getPrecision(r),XA=(t=this.checkInputPrecision(t,$p,this.decimalMarker)).replace(new RegExp(Xe,"g"),"");M=this._formatWithSeparators(XA,this.thousandSeparator,this.decimalMarker,$p);const eS=M.indexOf(",")-t.indexOf(","),Hp=M.length-t.length;if(Hp>0&&","!==M[s]){G=!0;let Gp=0;do{this._shift.add(s+Gp),Gp++}while(Gp<Hp)}else 0!==eS&&s>0&&!(M.indexOf(",")>=s&&s>3)||!(M.indexOf(".")>=s&&s>3)&&Hp<=0?(this._shift.clear(),G=!0,ee=Hp,this._shift.add(s+=Hp)):this._shift.clear()}else for(let Xe=0,wt=Me[0];Xe<Me.length&&T!==r.length;Xe++,wt=Me[Xe])if(this._checkSymbolMask(wt,r[T])&&"?"===r[T+1])M+=wt,T+=2;else if("*"===r[T+1]&&L&&this._checkSymbolMask(wt,r[T+2]))M+=wt,T+=3,L=!1;else if(this._checkSymbolMask(wt,r[T])&&"*"===r[T+1])M+=wt,L=!0;else if("?"===r[T+1]&&this._checkSymbolMask(wt,r[T+2]))M+=wt,T+=3;else if(this._checkSymbolMask(wt,r[T])){if("H"===r[T]&&Number(wt)>2){T+=1,this._shiftStep(r,T,Me.length),Xe--,this.leadZeroDateTime&&(M+="0");continue}if("h"===r[T]&&"2"===M&&Number(wt)>3){T+=1,Xe--;continue}if("m"===r[T]&&Number(wt)>5){T+=1,this._shiftStep(r,T,Me.length),Xe--,this.leadZeroDateTime&&(M+="0");continue}if("s"===r[T]&&Number(wt)>5){T+=1,this._shiftStep(r,T,Me.length),Xe--,this.leadZeroDateTime&&(M+="0");continue}const fi=31;if("d"===r[T]&&(Number(wt)>3&&this.leadZeroDateTime||Number(t.slice(T,T+2))>fi||"/"===t[T+1])){T+=1,this._shiftStep(r,T,Me.length),Xe--,this.leadZeroDateTime&&(M+="0");continue}if("M"===r[T]){const XA=0===T&&(Number(wt)>2||Number(t.slice(T,T+2))>12||"/"===t[T+1]),eS=t.slice(T-3,T-1).includes("/")&&("/"===t[T-2]&&Number(t.slice(T-1,T+1))>12&&"/"!==t[T]||"/"===t[T]||"/"===t[T-3]&&Number(t.slice(T-2,T))>12&&"/"!==t[T-1]||"/"===t[T-1]),Hp=Number(t.slice(T-3,T-1))<=fi&&!t.slice(T-3,T-1).includes("/")&&"/"===t[T-1]&&(Number(t.slice(T,T+2))>12||"/"===t[T+1]),Gp=Number(t.slice(T-3,T-1))>fi&&!t.slice(T-3,T-1).includes("/")&&!t.slice(T-2,T).includes("/")&&Number(t.slice(T-2,T))>12,hL=Number(t.slice(T-3,T-1))<=fi&&!t.slice(T-3,T-1).includes("/")&&"/"!==t[T-1]&&Number(t.slice(T-1,T+1))>12;if(Number(wt)>1&&this.leadZeroDateTime||XA||eS||Hp||Gp||hL){T+=1,this._shiftStep(r,T,Me.length),Xe--,this.leadZeroDateTime&&(M+="0");continue}}M+=wt,T++}else" "===wt&&" "===r[T]?(M+=wt,T++):-1!==this.maskSpecialCharacters.indexOf(r[T])?(M+=r[T],T++,this._shiftStep(r,T,Me.length),Xe--):this.maskSpecialCharacters.indexOf(wt)>-1&&this.maskAvailablePatterns[r[T]]&&(null===(I=this.maskAvailablePatterns[r[T]])||void 0===I?void 0:I.optional)?(!!Me[T]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&(M+=Me[T]),T++,Xe--):"*"===this.maskExpression[T+1]&&this._findSpecialChar(this.maskExpression[T+2])&&this._findSpecialChar(wt)===this.maskExpression[T+2]&&L||"?"===this.maskExpression[T+1]&&this._findSpecialChar(this.maskExpression[T+2])&&this._findSpecialChar(wt)===this.maskExpression[T+2]&&L?(T+=3,M+=wt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(wt)<0&&wt!==this.placeHolderCharacter&&(Se=!0);M.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(M+=r[r.length-1]);let Ct=s+1;for(;this._shift.has(Ct);)ee++,Ct++;let ht=u&&!r.startsWith("separator")?T:this._shift.has(s)?ee:0;Se&&ht--,m(ht,G),ee<0&&this._shift.clear();let st=!1;d&&(st=Me.every(Xe=>this.maskSpecialCharacters.includes(Xe)));let St=`${this.prefix}${st?"":M}${this.suffix}`;return 0===M.length&&(St=`${this.prefix}${M}`),St}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,s)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===s&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,s){const u=/[*?]/g.test(t.slice(0,r))?s:r;this._shift.add(u+this.prefix.length||0)}_compareOrIncludes(t,r,s){return Array.isArray(r)?r.filter(u=>u!==s).includes(t):t===r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(GC))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),f1=(()=>{class n extends h1{constructor(t,r,s,u){super(r),this.document=t,this._config=r,this._elementRef=s,this._renderer=u,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=d=>{}}applyMask(t,r,s=0,u=!1,d=!1,m=(()=>{})){if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const w=t&&"number"==typeof this.selStart?t[this.selStart]:"";let I="";if(this.hiddenInput&&!this.writingValue){let G=this.actualValue.split("");""!==t&&G.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>G.length?G.splice(this.selStart,0,w):t.length<G.length&&(G.length-t.length==1?G.splice(this.selStart-1,1):G.splice(this.selStart,this.selEnd-this.selStart))):G=[],this.showMaskTyped&&(t=this.removeMask(t)),I=this.actualValue.length&&G.length<=t.length?this.shiftTypedSymbols(G.join("")):t}I=Boolean(I)&&I.length?I:t;const T=super.applyMask(I,r,s,u,d,m);if(this.actualValue=this.getActualValue(T),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(G=>!this._compareOrIncludes(G,this.decimalMarker,this.thousandSeparator))),this.formControlResult(T),!this.showMaskTyped)return this.hiddenInput&&T&&T.length?this.hideInput(T,this.maskExpression):T;const M=T.length,L=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const G=this._numberSkipedSymbols(T);return T+L.slice(M+G)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?T+L:T+L.slice(M)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let s=r.exec(t),u=0;for(;null!=s;)u+=1,s=r.exec(t);return u}applyValueChanges(t,r,s,u=(()=>{})){const d=this._elementRef.nativeElement;d.value=this.applyMask(d.value,this.maskExpression,t,r,s,u),d!==this._getActiveElement()&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((s,u)=>{var d,m;return this.maskAvailablePatterns&&this.maskAvailablePatterns[r[u]]&&(null===(d=this.maskAvailablePatterns[r[u]])||void 0===d?void 0:d.symbol)?null===(m=this.maskAvailablePatterns[r[u]])||void 0===m?void 0:m.symbol:s}).join("")}getActualValue(t){const r=t.split("").filter((s,u)=>this._checkSymbolMask(s,this.maskExpression[u])||this.maskSpecialCharacters.includes(this.maskExpression[u])&&s===this.maskExpression[u]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((u,d)=>{if(this.maskSpecialCharacters.includes(t[d+1])&&t[d+1]!==this.maskExpression[d+1])return r=u,t[d+1];if(r.length){const m=r;return r="",m}return u})||[]).join("")}numberToString(t){return t||0===t?Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(t)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(s=>this._findSpecialChar(s)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var r;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const s=[];for(let u=0;u<t.length;u++)(null===(r=t[u])||void 0===r?void 0:r.match("\\d"))&&s.push(t[u]);return s.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:s.length>3&&s.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:s.length>6&&s.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var r;const s=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,u=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return s;const d=[];for(let m=0;m<t.length;m++)(null===(r=t[m])||void 0===r?void 0:r.match("\\d"))&&d.push(t[m]);return d.length<=3?s.slice(d.length,s.length):d.length>3&&d.length<=6?s.slice(d.length+1,s.length):d.length>6&&d.length<=9?s.slice(d.length+2,s.length):d.length>9&&d.length<11?s.slice(d.length+3,s.length):11===d.length?"":12===d.length?u.slice(17===t.length?16:15,u.length):d.length>12&&d.length<=14?u.slice(d.length+4,u.length):""}_getActiveElement(t=this.document){var r;const s=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==s?void 0:s.activeElement)?this._getActiveElement(s):t.activeElement}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let s=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(s=s.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,s):Number(s):s}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue),c.LFG(GC),c.LFG(c.SBq),c.LFG(c.Qsj))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),MO=(()=>{class n{constructor(t,r,s){this.document=t,this._maskService=r,this._config=s,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new c.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=u=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:s,patterns:u,prefix:d,suffix:m,thousandSeparator:w,decimalMarker:I,dropSpecialCharacters:T,hiddenInput:M,showMaskTyped:L,placeHolderCharacter:G,shownMaskExpression:ee,showTemplate:Se,clearIfNotMatch:Me,validation:vt,separatorLimit:Ct,allowNegativeNumbers:ht,leadZeroDateTime:st,triggerOnMaskChange:St}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((Xe,wt)=>Xe.length-wt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),s){if(!s.currentValue||!Array.isArray(s.currentValue))return;this._maskService.maskSpecialCharacters=s.currentValue||[]}u&&u.currentValue&&(this._maskService.maskAvailablePatterns=u.currentValue),d&&(this._maskService.prefix=d.currentValue),m&&(this._maskService.suffix=m.currentValue),w&&(this._maskService.thousandSeparator=w.currentValue),I&&(this._maskService.decimalMarker=I.currentValue),T&&(this._maskService.dropSpecialCharacters=T.currentValue),M&&(this._maskService.hiddenInput=M.currentValue),L&&(this._maskService.showMaskTyped=L.currentValue),G&&(this._maskService.placeHolderCharacter=G.currentValue),ee&&(this._maskService.shownMaskExpression=ee.currentValue),Se&&(this._maskService.showTemplate=Se.currentValue),Me&&(this._maskService.clearIfNotMatch=Me.currentValue),vt&&(this._maskService.validation=vt.currentValue),Ct&&(this._maskService.separatorLimit=Ct.currentValue),ht&&(this._maskService.allowNegativeNumbers=ht.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Xe=>"-"!==Xe))),st&&(this._maskService.leadZeroDateTime=st.currentValue),St&&(this._maskService.triggerOnMaskChange=St.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||xO.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(SO.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const s in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[s].optional&&(this._maskValue.indexOf(s)!==this._maskValue.lastIndexOf(s)?r+=this._maskValue.split("").filter(d=>d===s).join("").length:-1!==this._maskValue.indexOf(s)&&r++,-1!==this._maskValue.indexOf(s)&&t.toString().length>=this._maskValue.indexOf(s)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const s=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<s)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){(""===t||null==t)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const s=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let u=0,d=!1;if(this._maskService.applyValueChanges(s,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(w,I)=>{this._justPasted=!1,u=w,d=I}),this._getActiveElement()!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let m=this._position?this._inputValue.length+s+u:s+("Backspace"!==this._code||d?u:0);m>this._getActualInputLength()&&(m=this._getActualInputLength()),m<0&&(m=0),r.setSelectionRange(m,m),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const d=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==d&&(r.value=d),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const s=t.target;if(this._inputValue=s.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===s.value.length&&(s.selectionStart=s.selectionEnd),8===t.keyCode&&0!==s.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&s.selectionStart<=this.prefix.length)s.setSelectionRange(this.prefix.length,s.selectionEnd);else if(this._inputValue.length!==s.selectionStart&&1!==s.selectionStart)for(;this.specialCharacters.includes(this._inputValue[s.selectionStart-1].toString())&&(this.prefix.length>=1&&s.selectionStart>this.prefix.length||0===this.prefix.length);)s.setSelectionRange(s.selectionStart-1,s.selectionEnd);this.checkSelectionOnDeletion(s),this._maskService.prefix.length&&s.selectionStart<=this._maskService.prefix.length&&s.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const u=s.selectionStart;8===t.keyCode&&!s.readOnly&&0===u&&s.selectionEnd===s.value.length&&0!==s.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<s.selectionStart?s.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(s.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=s.selectionStart,this._maskService.selEnd=s.selectionEnd}writeValue(t){return(0,TO.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),("number"==typeof t||this._maskValue.startsWith("separator"))&&(t=this._maskService.numberToString(t),Array.isArray(this.decimalMarker)||(t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t),this._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){var r;const s=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==s?void 0:s.activeElement)?this._getActiveElement(s):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,s,u)=>{if(this._start="{"===s?u:this._start,"}"!==s)return this._maskService._findSpecialChar(s)?r+s:r;this._end=u;const d=Number(t.slice(this._start+1,this._end));return r+new Array(d+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(s=>":"!==s).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,s;const u=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(s=this._maskService.removeMask(t))||void 0===s?void 0:s.length);if(this._inputValue&&u)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,u;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ue),c.Y36(f1),c.Y36(GC))},n.\u0275dir=c.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&c.NdJ("paste",function(){return r.onPaste()})("ngModelChange",function(u){return r.onModelChange(u)})("input",function(u){return r.onInput(u)})("blur",function(){return r.onBlur()})("click",function(u){return r.onClick(u)})("keydown",function(u){return r.onKeyDown(u)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[c._Bn([{provide:nu,useExisting:(0,c.Gpc)(()=>n),multi:!0},{provide:Ai,useExisting:(0,c.Gpc)(()=>n),multi:!0},f1]),c.TTD]}),n})();function RO(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}let kO=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:c1,useValue:t},{provide:d1,useValue:AO},{provide:GC,useFactory:RO,deps:[d1,c1]},h1]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const p1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function NO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Field is required !! "),c.qZA())}function OO(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.AsE(" The value you inputted is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," characters long. It must be at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," !! ")}}function PO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," You must enter a valid email !! "),c.qZA())}function FO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Value too low !! "),c.qZA())}function LO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Value too high !! "),c.qZA())}function UO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Password must be at least 8 characters, contain at least 1 uppercase letter, 1 lowercase letter, and 1 number, Can contain special characters !! "),c.qZA())}function VO(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.hij(" ",null==t.control.errors?null:t.control.errors.noMatch," ")}}function BO(n,e){if(1&n&&(c.ynx(0),c.YNc(1,NO,2,0,"p",2),c.YNc(2,OO,2,2,"p",2),c.YNc(3,PO,2,0,"p",2),c.YNc(4,FO,2,0,"p",2),c.YNc(5,LO,2,0,"p",2),c.YNc(6,UO,2,0,"p",2),c.YNc(7,VO,2,1,"p",2),c.Hsn(8),c.BQk()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch)}}p1.KeyboardEvent||(p1.KeyboardEvent=function(n,e){});const jO=[[["","validators",""]]],$O=["[validators]"];let PA=(()=>{class n{constructor(){this.control=new ru,this.placeholder="",this.type="text",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",placeholder:"placeholder",type:"type",format:"format"},ngContentSelectors:$O,decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"type","placeholder","formControl","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(c.F$t(jO),c._UZ(0,"input",0),c.YNc(1,BO,9,7,"ng-container",1)),2&t&&(c.Q6J("type",r.type)("placeholder",r.placeholder)("formControl",r.control)("mask",r.format)("dropSpecialCharacters",!1),c.xp6(1),c.Q6J("ngIf",r.control.dirty||r.control.touched))},directives:[E0,MO,pA,SA,an],styles:[""]}),n})();function HO(n,e){if(1&n&&(c.TgZ(0,"app-alert",13),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.Oqu(t.alertMessage)}}function GO(n,e){1&n&&(c.TgZ(0,"p",14),c._uU(1," The email is taken, Please use another email. "),c.qZA())}const qO=function(n,e){return{"opacity-50":n,"hover:bg-indigo-500":e}};let ZO=(()=>{class n{constructor(t,r){this.authService=t,this.emailTaken=r,this.showAlert=!1,this.alertMessage="",this.alertColor="orange",this.inSubmission=!1,this.name=new ru("",[Si.required,Si.minLength(3)]),this.email=new ru("",[Si.required,Si.email],[this.emailTaken.validate]),this.age=new ru("",[Si.required,Si.min(18),Si.max(120)]),this.password=new ru("",[Si.required,Si.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/)]),this.confirm_password=new ru("",[Si.required]),this.phoneNumber=new ru("",[Si.required,Si.minLength(15),Si.maxLength(15)]),this.registerForm=new Cy({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[DO.match("password","confirm_password","Confirm password doesn't match the entered password \u{1f914}\u{1f914}")])}ngOnInit(){}register(){this.inSubmission=!0,this.showAlert=!0,this.alertMessage="Please wait you account is being created. \u{1f607}";const t=this.registerForm.value.password,r={name:this.registerForm.value.name,email:this.registerForm.value.email,age:+this.registerForm.value.age,phoneNumber:this.registerForm.value.phoneNumber};try{this.authService.createUser(r,t).subscribe({next:s=>{this.alertMessage="Success! Your account has been created. \u{1f44c}\u{1f44c}",this.alertColor="green"},error:s=>{console.error(s),this.alertMessage=s.message,this.alertColor="red",this.inSubmission=!1},complete:()=>{this.inSubmission=!1}})}catch(s){return console.error(s),this.alertMessage=s.message,void(this.alertColor="red")}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(wy),c.Y36(l1))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],features:[c._Bn([l1])],decls:30,vars:14,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","text","placeholder","Enter Name",3,"control"],["placeholder","Enter Email",3,"control"],["validators",""],["class","text-red-400",4,"ngIf"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Enter Confirm Password",3,"control"],["type","text","placeholder","Enter phone number","format","(000)0-00000000",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition",3,"ngClass","disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){1&t&&(c.YNc(0,HO,2,2,"app-alert",0),c.TgZ(1,"form",1),c.NdJ("ngSubmit",function(){return r.register()}),c.TgZ(2,"div",2)(3,"label",3),c._uU(4,"Name"),c.qZA(),c._UZ(5,"app-input",4),c.qZA(),c.TgZ(6,"div",2)(7,"label",3),c._uU(8,"Email"),c.qZA(),c.TgZ(9,"app-input",5),c.ynx(10,6),c.YNc(11,GO,2,0,"p",7),c.BQk(),c.qZA()(),c.TgZ(12,"div",2)(13,"label",3),c._uU(14,"Age"),c.qZA(),c._UZ(15,"app-input",8),c.qZA(),c.TgZ(16,"div",2)(17,"label",3),c._uU(18,"Password"),c.qZA(),c._UZ(19,"app-input",9),c.qZA(),c.TgZ(20,"div",2)(21,"label",3),c._uU(22,"Confirm Password"),c.qZA(),c._UZ(23,"app-input",10),c.qZA(),c.TgZ(24,"div",2)(25,"label",3),c._uU(26,"Phone Number"),c.qZA(),c._UZ(27,"app-input",11),c.qZA(),c.TgZ(28,"button",12),c._uU(29," Submit "),c.qZA()()),2&t&&(c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.registerForm),c.xp6(4),c.Q6J("control",r.name),c.xp6(4),c.Q6J("control",r.email),c.xp6(2),c.Q6J("ngIf",null==r.email.errors?null:r.email.errors.emailTaken),c.xp6(4),c.Q6J("control",r.age),c.xp6(4),c.Q6J("control",r.password),c.xp6(4),c.Q6J("control",r.confirm_password),c.xp6(4),c.Q6J("control",r.phoneNumber),c.xp6(1),c.Q6J("ngClass",c.WLB(11,qO,r.registerForm.invalid,r.registerForm.valid))("disabled",r.registerForm.invalid||r.inSubmission))},directives:[an,kC,A0,b0,Iy,PA,Br],styles:[""]}),n})(),zO=(()=>{class n{constructor(t){this.modalService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ey))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalId","auth-modal"],["heading","",1,"text-2xl","font-bold"],["title","Login"],["title","Register"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Your Account"),c.qZA(),c.TgZ(3,"app-tabs-container")(4,"app-tab",2),c._UZ(5,"app-login"),c.qZA(),c.TgZ(6,"app-tab",3),c._UZ(7,"app-register"),c.qZA()()())},directives:[rM,bN,iM,IO,ZO],styles:[""]}),n})();function WO(n,e){1&n&&c._UZ(0,"app-auth-modal")}let KO=(()=>{class n{constructor(t){this.authService=t,this.title="clips"}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(wy))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav")(1,"router-outlet"),c.YNc(2,WO,1,0,"app-auth-modal",0),c.ALo(3,"async")),2&t&&(c.xp6(2),c.Q6J("ngIf",!c.lcZ(3,1,r.authService.isAuthenticatedWithDelay$)))},directives:[fN,Kl,an,zO],pipes:[Zc],styles:[""]}),n})(),g1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[],imports:[[Ia,OA,kO.forRoot()]]}),n})(),YO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Ia,g1,OA,vO]]}),n})();const FA_firebaseConfig={apiKey:"AIzaSyCM2m0Tp1mHtZ366u5F5zI1f5rdnDRnNak",authDomain:"clibs-8ef23.firebaseapp.com",projectId:"clibs-8ef23",storageBucket:"clibs-8ef23.appspot.com",messagingSenderId:"687873988109",appId:"1:687873988109:web:e620587fa5d4c544c82744"},m1="firebasestorage.googleapis.com",y1="storageBucket";class ar extends xt.ZR{constructor(e,t){super(LA(e),`Firebase Storage: ${t} (${LA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ar.prototype)}_codeEquals(e){return LA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function LA(n){return"storage/"+n}function UA(){return new ar("unknown","An unknown error occurred, please check the error payload for server response.")}function _1(){return new ar("canceled","User canceled the upload/download.")}function v1(){return new ar("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Dy(n){return new ar("invalid-argument",n)}function w1(){return new ar("app-deleted","The Firebase app was deleted.")}function E1(n){return new ar("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function S0(n,e){return new ar("invalid-format","String does not match format '"+n+"': "+e)}function x0(n){throw new ar("internal-error","Internal error: "+n)}class ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ns.makeFromUrl(e,t)}catch(s){return new ns(e,"")}if(""===r.path)return r;throw function aP(n){return new ar("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function I(st){st.path_=decodeURIComponent(st.path)}const M=t.replace(/[.]/g,"\\."),ht=[{regex:m,indices:{bucket:1,path:3},postModify:function u(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===m1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let st=0;st<ht.length;st++){const St=ht[st],Xe=St.regex.exec(e);if(Xe){let fi=Xe[St.indices.path];fi||(fi=""),r=new ns(Xe[St.indices.bucket],fi),St.postModify(r);break}}if(null==r)throw function oP(n){return new ar("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class dP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qC(n){return"string"==typeof n||n instanceof String}function b1(n){return VA()&&n instanceof Blob}function VA(){return"undefined"!=typeof Blob}function BA(n,e,t,r){if(r<e)throw Dy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Dy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function C1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var kh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(kh||(kh={})),kh))();class yP{constructor(e,t,r,s,u,d,m,w,I,T,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=w,this.timeout_=I,this.progressCallback_=T,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,G)=>{this.resolve_=L,this.reject_=G,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,d=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function pP(n){return void 0!==n}(w)?u():u(w)}catch(w){d(w)}else if(null!==m){const w=UA();w.serverResponse=m.getErrorText(),d(this.errorCallback_?this.errorCallback_(m,w):w)}else d(s.canceled?this.appDelete_?w1():_1():function sP(){return new ar("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ZC(!1,null,!0)):this.backoffId_=function hP(n,e,t){let r=1,s=null,u=null,d=!1,m=0;function w(){return 2===m}let I=!1;function T(...Me){I||(I=!0,e.apply(null,Me))}function M(Me){s=setTimeout(()=>{s=null,n(G,w())},Me)}function L(){u&&clearTimeout(u)}function G(Me,...vt){if(I)return void L();if(Me)return L(),void T.call(null,Me,...vt);if(w()||d)return L(),void T.call(null,Me,...vt);let ht;r<64&&(r*=2),1===m?(m=2,ht=0):ht=1e3*(r+Math.random()),M(ht)}let ee=!1;function Se(Me){ee||(ee=!0,L(),!I&&(null!==s?(Me||(m=2),clearTimeout(s),M(0)):Me||(m=1)))}return M(0),u=setTimeout(()=>{d=!0,Se(!0)},t),Se}((r,s)=>{if(s)return void r(!1,new ZC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===kh.NO_ERROR,w=u.getStatus();if(!m||this.isRetryStatusCode_(w)){const T=u.getErrorCode()===kh.ABORT;return void r(!1,new ZC(!1,null,T))}const I=-1!==this.successCodes_.indexOf(w);r(!0,new ZC(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function fP(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||u}}class ZC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function IP(...n){const e=function CP(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(VA())return new Blob(n);throw new ar("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jA{constructor(e,t){this.data=e,this.contentType=t||null}}function $A(n,e){switch(n){case Fo.RAW:return new jA(I1(e));case Fo.BASE64:case Fo.BASE64URL:return new jA(D1(n,e));case Fo.DATA_URL:return new jA(function SP(n){const e=new T1(n);return e.base64?D1(Fo.BASE64,e.rest):function AP(n){let e;try{e=decodeURIComponent(n)}catch(t){throw S0(Fo.DATA_URL,"Malformed data URL.")}return I1(e)}(e.rest)}(e),function xP(n){return new T1(n).contentType}(e))}throw UA()}function I1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function D1(n,e){switch(n){case Fo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw S0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Fo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw S0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function TP(n){return atob(n)}(e)}catch(s){throw S0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class T1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw S0(Fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function MP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class gl{constructor(e,t){let r=0,s="";b1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(b1(this.data_)){const s=function DP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new gl(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new gl(r,!0)}}static getBlob(...e){if(VA()){const t=e.map(r=>r instanceof gl?r.data_:r);return new gl(IP.apply(null,t))}{const t=e.map(d=>qC(d)?$A(Fo.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)s[u++]=d[m]}),new gl(s,!0)}}uploadData(){return this.data_}}function HA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function mP(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function A1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function NP(n,e){return e}class Ds{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||NP}}let zC=null;function M0(){if(zC)return zC;const n=[];n.push(new Ds("bucket")),n.push(new Ds("generation")),n.push(new Ds("metageneration")),n.push(new Ds("name","fullPath",!0));const t=new Ds("name");t.xform=function e(u,d){return function OP(n){return!qC(n)||n.length<2?n:A1(n)}(d)},n.push(t);const s=new Ds("size");return s.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(s),n.push(new Ds("timeCreated")),n.push(new Ds("updated")),n.push(new Ds("md5Hash",null,!0)),n.push(new Ds("cacheControl",null,!0)),n.push(new Ds("contentDisposition",null,!0)),n.push(new Ds("contentEncoding",null,!0)),n.push(new Ds("contentLanguage",null,!0)),n.push(new Ds("contentType",null,!0)),n.push(new Ds("metadata","customMetadata",!0)),zC=n,zC}function S1(n,e,t){const r=HA(e);return null===r?null:function FP(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function PP(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ns(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function GA(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const x1="prefixes";class ml{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function yl(n){if(!n)throw UA()}function WC(n,e){return function t(r,s){const u=S1(n,s,e);return yl(null!==u),u}}function Ty(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function rP(){return new ar("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function nP(){return new ar("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function tP(n){return new ar("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function iP(n){return new ar("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.serverResponse=r.serverResponse,s}}function R0(n){const e=Ty(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function eP(n){return new ar("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function R1(n,e,t){const s=Bc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new ml(s,"GET",WC(n,t),d);return m.errorHandler=R0(e),m}function $P(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=Bc(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,T=new ml(m,"GET",function BP(n,e){return function t(r,s){const u=function VP(n,e,t){const r=HA(t);return null===r?null:function UP(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[x1])for(const s of t[x1]){const u=s.replace(/\/$/,""),d=n._makeStorageReference(new ns(e,u));r.prefixes.push(d)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new ns(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return yl(null!==u),u}}(n,e.bucket),I);return T.urlParams=u,T.errorHandler=Ty(e),T}function N1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function ZP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class KC{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function qA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(s){yl(!1)}return yl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const YP={STATE_CHANGED:"state_changed"},Ts={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ZA(n){switch(n){case"running":case"pausing":case"canceling":return Ts.RUNNING;case"paused":return Ts.PAUSED;case"success":return Ts.SUCCESS;case"canceled":return Ts.CANCELED;default:return Ts.ERROR}}class QP{constructor(e,t,r){if(function gP(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Ay(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class XP extends class JP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=kh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=kh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=kh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw x0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw x0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw x0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw x0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw x0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function iu(){return new XP}class L1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=M0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function zP(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d=N1(e,r,s),m={name:d.fullPath},w=Bc(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},M=GA(d,t),ee=new ml(w,"POST",function G(Se){let Me;qA(Se);try{Me=Se.getResponseHeader("X-Goog-Upload-URL")}catch(vt){yl(!1)}return yl(qC(Me)),Me},n.maxUploadRetryTime);return ee.urlParams=m,ee.headers=T,ee.body=M,ee.errorHandler=Ty(e),ee}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,iu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function WP(n,e,t,r){const w=new ml(t,"POST",function u(I){const T=qA(I,["active","final"]);let M=null;try{M=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch(G){yl(!1)}M||yl(!1);const L=Number(M);return yl(!isNaN(L)),new KC(L,r.size(),"final"===T)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=Ty(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,iu,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new KC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let d;try{d=function KP(n,e,t,r,s,u,d,m){const w=new KC(0,0);if(d?(w.current=d.current,w.total=d.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function lP(){return new ar("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=w.total-w.current;let T=I;s>0&&(T=Math.min(T,s));const M=w.current,ee={"X-Goog-Upload-Command":T===I?"upload, finalize":"upload","X-Goog-Upload-Offset":`${w.current}`},Se=r.slice(M,M+T);if(null===Se)throw v1();const ht=new ml(t,"POST",function Me(st,St){const Xe=qA(st,["active","final"]),wt=w.current+T,fi=r.size();let $p;return $p="final"===Xe?WC(e,u)(st,St):null,new KC(wt,fi,"final"===Xe,$p)},e.maxUploadRetryTime);return ht.headers=ee,ht.body=Se.uploadData(),ht.progressCallback=m||null,ht.errorHandler=Ty(n),ht}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(d,iu,s,u);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=R1(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,iu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function O1(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let ht="";for(let st=0;st<2;st++)ht+=Math.random().toString().slice(2);return ht}();d["Content-Type"]="multipart/related; boundary="+w;const I=N1(e,r,s),T=GA(I,t),G=gl.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+w+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===G)throw v1();const ee={name:I.fullPath},Se=Bc(u,n.host,n._protocol),vt=n.maxUploadRetryTime,Ct=new ml(Se,"POST",WC(n,t),vt);return Ct.urlParams=ee,Ct.headers=d,Ct.body=G.uploadData(),Ct.errorHandler=Ty(e),Ct}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,iu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=_1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ZA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new QP(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ZA(this._state)){case Ts.SUCCESS:Ay(this._resolve.bind(null,this.snapshot))();break;case Ts.CANCELED:case Ts.ERROR:Ay(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ZA(this._state)){case Ts.RUNNING:case Ts.PAUSED:e.next&&Ay(e.next.bind(e,this.snapshot))();break;case Ts.SUCCESS:e.complete&&Ay(e.complete.bind(e))();break;default:e.error&&Ay(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class jp{constructor(e,t){this._service=e,this._location=t instanceof ns?t:ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new jp(e,t)}get root(){const e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return A1(this._location.path)}get storage(){return this._service}get parent(){const e=function RP(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ns(this._location.bucket,e);return new jp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw E1(e)}}function V1(n,e,t){return zA.apply(this,arguments)}function zA(){return zA=(0,pe.Z)(function*(n,e,t){const s=yield B1(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield V1(n,e,s.nextPageToken))}),zA.apply(this,arguments)}function B1(n,e){null!=e&&"number"==typeof e.maxResults&&BA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=$P(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,iu)}function dF(n){n._throwIfRoot("getDownloadURL");const e=function HP(n,e,t){const s=Bc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new ml(s,"GET",function jP(n,e){return function t(r,s){const u=S1(n,s,e);return yl(null!==u),function LP(n,e,t,r){const s=HA(e);if(null===s||!qC(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(I=>{const M=n.fullPath;return Bc("/b/"+d(n.bucket)+"/o/"+d(M),t,r)+C1({alt:"media",token:I})})[0]}(u,s,n.host,n._protocol)}}(n,t),d);return m.errorHandler=R0(e),m}(n.storage,n._location,M0());return n.storage.makeRequestWithTokens(e,iu).then(t=>{if(null===t)throw function cP(){return new ar("no-download-url","The given file does not have any download URLs.")}();return t})}function j1(n,e){const t=function kP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ns(n._location.bucket,t);return new jp(n.storage,r)}function $1(n,e){if(n instanceof WA){const t=n;if(null==t._bucket)throw function uP(){return new ar("no-default-bucket","No default bucket found. Did you set the '"+y1+"' property when initializing the app?")}();const r=new jp(t,t._bucket);return null!=e?$1(r,e):r}return void 0!==e?j1(n,e):n}function gF(n,e){if(e&&function fF(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof WA)return function pF(n,e){return new jp(n,e)}(n,e);throw Dy("To use ref(service, url), the first argument must be a Storage instance.")}return $1(n,e)}function H1(n,e){const t=null==e?void 0:e[y1];return null==t?null:ns.makeFromBucketSpec(t,n)}class WA{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=m1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?ns.makeFromBucketSpec(s,this._host):H1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ns.makeFromBucketSpec(this._url,e):H1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jp(this,e)}_makeRequest(e,t,r,s){if(this._deleted)return new dP(w1());{const u=function bP(n,e,t,r,s,u){const d=C1(n.urlParams),m=n.url+d,w=Object.assign({},n.headers);return function wP(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function _P(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function vP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(w,u),function EP(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new yP(m,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,r,s,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const G1="@firebase/storage";function z1(n,e){return gF(n=(0,xt.m9)(n),e)}function TF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new WA(t,r,s,e,_s.SDK_VERSION)}!function AF(){(0,_s._registerComponent)(new Bu.wA("storage",TF,"PUBLIC").setMultipleInstances(!0)),(0,_s.registerVersion)(G1,"0.9.6",""),(0,_s.registerVersion)(G1,"0.9.6","esm2017")}();class YC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class W1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new YC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new YC(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?d=>t(new YC(d,this,this._ref)):{next:t.next?d=>t.next(new YC(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class K1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new jc(e,this._service))}get items(){return this._delegate.items.map(e=>new jc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function IF(n,e){return j1(n,e)}(this._delegate,e);return new jc(t,this.storage)}get root(){return new jc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new jc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new W1(function yF(n,e,t){return function oF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new L1(n,new gl(e),t)}(n=(0,xt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Fo.RAW,r){this._throwIfRoot("putString");const s=$A(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new W1(new L1(this._delegate,new gl(s.data,!0),u),this)}listAll(){return function EF(n){return function uF(n){const e={prefixes:[],items:[]};return V1(n,e).then(()=>e)}(n=(0,xt.m9)(n))}(this._delegate).then(e=>new K1(e,this.storage))}list(e){return function wF(n,e){return B1(n=(0,xt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new K1(t,this.storage))}getMetadata(){return function _F(n){return function lF(n){n._throwIfRoot("getMetadata");const e=R1(n.storage,n._location,M0());return n.storage.makeRequestWithTokens(e,iu)}(n=(0,xt.m9)(n))}(this._delegate)}updateMetadata(e){return function vF(n,e){return function cF(n,e){n._throwIfRoot("updateMetadata");const t=function GP(n,e,t,r){const u=Bc(e.fullServerUrl(),n.host,n._protocol),m=GA(t,r),I=n.maxOperationRetryTime,T=new ml(u,"PATCH",WC(n,r),I);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=m,T.errorHandler=R0(e),T}(n.storage,n._location,e,M0());return n.storage.makeRequestWithTokens(t,iu)}(n=(0,xt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function bF(n){return dF(n=(0,xt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function CF(n){return function hF(n){n._throwIfRoot("deleteObject");const e=function qP(n,e){const r=Bc(e.fullServerUrl(),n.host,n._protocol),m=new ml(r,"DELETE",function d(w,I){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=R0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,iu)}(n=(0,xt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw E1(e)}}class Y1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Q1(e))throw Dy("ref() expected a child path but got a URL, use refFromURL instead.");return new jc(z1(this._delegate,e),this)}refFromURL(e){if(!Q1(e))throw Dy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ns.makeFromUrl(e,this._delegate.host)}catch(t){throw Dy("refFromUrl() expected a valid full URL but got an invalid one.")}return new jc(z1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function DF(n,e,t,r={}){!function mF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,xt.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Q1(n){return/^[A-Za-z]+:\/\//.test(n)}function RF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Y1(t,r)}function J1(n){const e=function NF(n){return new wn.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function QO(n,e=lf.z){return(0,Bn.e)((t,r)=>{let s=null,u=null,d=null;const m=()=>{if(s){s.unsubscribe(),s=null;const I=u;u=null,r.next(I)}};function w(){const I=d+n,T=e.now();if(T<I)return s=this.schedule(void 0,I-T),void r.add(s);m()}t.subscribe((0,Vn.x)(r,I=>{u=I,d=e.now(),s||(s=e.schedule(w,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,gt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function QC(n){return{getDownloadURL:()=>nt(void 0).pipe(Rn.fc,cn(()=>n.getDownloadURL()),Rn.iC),getMetadata:()=>nt(void 0).pipe(Rn.fc,cn(()=>n.getMetadata()),Rn.iC),delete:()=>(0,Wt.D)(n.delete()),child:e=>QC(n.child(e)),updateMetadata:e=>(0,Wt.D)(n.updateMetadata(e)),put:(e,t)=>J1(n.put(e,t)),putString:(e,t,r)=>J1(n.putString(e,t,r)),list:e=>(0,Wt.D)(n.list(e)),listAll:()=>(0,Wt.D)(n.listAll())}}!function kF(n){const e={TaskState:Ts,TaskEvent:YP,StringFormat:Fo,Storage:Y1,Reference:jc};n.INTERNAL.registerComponent(new Bu.wA("storage-compat",RF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(xw.Z);const OF=new c.OlP("angularfire2.storageBucket"),PF=new c.OlP("angularfire2.storage.maxUploadRetryTime"),FF=new c.OlP("angularfire2.storage.maxOperationRetryTime"),LF=new c.OlP("angularfire2.storage.use-emulator");let X1=(()=>{class n{constructor(t,r,s,u,d,m,w,I,T,M){const L=(0,dt.on)(t,d,r);this.storage=(0,dt.cc)(`${L.name}.storage.${s}`,"AngularFireStorage",L.name,()=>{const G=d.runOutsideAngular(()=>L.storage(s||void 0)),ee=T;return ee&&G.useEmulator(...ee),w&&G.setMaxUploadRetryTime(w),I&&G.setMaxOperationRetryTime(I),G},[w,I])}ref(t){return QC(this.storage.ref(t))}refFromURL(t){return QC(this.storage.refFromURL(t))}upload(t,r,s){return QC(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(dt.Dh),c.LFG(dt.xv,8),c.LFG(OF,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Rn.HU),c.LFG(PF,8),c.LFG(FF,8),c.LFG(LF,8),c.LFG(Hg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KA=(()=>{class n{constructor(t,r,s){this.db=t,this.auth=r,this.storage=s,this.clipsCollection=t.collection("clips")}createClip(t){return this.clipsCollection.add(t)}getUserClips(t){var r=this;return(0,pe.Z)(function*(){var s;return(yield r.clipsCollection.ref.where("uid","==",null===(s=r.auth.currentUser)||void 0===s?void 0:s.uid).orderBy("timestamp","1"===t?"desc":"asc").get()).docs})()}updateClip(t){return nt(this.clipsCollection.doc(t.id).set(t))}deleteClip(t){var r=this;return(0,pe.Z)(function*(){yield r.storage.ref(`${t.clipPath}`).delete(),yield r.clipsCollection.doc(t.id).delete()})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(lA),c.LFG(wy),c.LFG(X1))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UF(n,e){if(1&n&&(c.TgZ(0,"app-alert",9)(1,"p"),c._uU(2),c.qZA()()),2&n){const t=c.oxw();c.Q6J("color",t.alertMessageColor),c.xp6(2),c.Oqu(t.alertMessage)}}let VF=(()=>{class n{constructor(t,r){this.clipService=t,this.modalService=r,this.clip=null,this.clipUpdated=new c.vpe,this.alertMessageColor="red",this.alertMessage="",this.titleControl=new ru("",[Si.required,Si.minLength(3)]),this.clipFormGroup=new Cy({title:this.titleControl})}ngOnChanges(t){!this.clip||this.titleControl.setValue(this.clip.title)}ngOnInit(){}get showAlertMessage(){return!!this.alertMessage}updateClip(){this.clip.title=this.titleControl.value,this.clipFormGroup.disable(),this.alertMessage="Please wait! Your clip is being updated ...",this.alertMessageColor="blue",this.clipService.updateClip(this.clip).subscribe({next:()=>{this.alertMessage="Success! Your clip is updated \u{1f973}",this.alertMessageColor="green",setTimeout(()=>{this.modalService.toggleModal("edit-clip")},1e3),this.clipUpdated.emit(this.clip)},error:t=>{this.alertMessage="Update is failed, Please try again later, Or if you curious check the cosole error ... \u{1f914}",console.error(t),this.alertMessageColor="red"}}),this.clipFormGroup.enable()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(KA),c.Y36(Ey))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit"]],inputs:{clip:"clip"},outputs:{clipUpdated:"clipUpdated"},features:[c.TTD],decls:12,vars:3,consts:[["modalId","edit-clip"],["heading","",1,"text-2xl","font-bold"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none"],[3,"color"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Edit Video"),c.qZA(),c.YNc(3,UF,3,2,"app-alert",2),c.TgZ(4,"form",3),c.NdJ("ngSubmit",function(){return r.updateClip()}),c.TgZ(5,"div",4)(6,"label",5),c._uU(7,"Title"),c.qZA(),c._UZ(8,"app-input",6),c.qZA(),c.TgZ(9,"div",7)(10,"button",8),c._uU(11," Update "),c.qZA()()()()),2&t&&(c.xp6(3),c.Q6J("ngIf",r.showAlertMessage),c.xp6(1),c.Q6J("formGroup",r.clipFormGroup),c.xp6(4),c.Q6J("control",r.titleControl))},directives:[rM,an,kC,A0,b0,Iy,PA],styles:[""]}),n})();function BF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"a",11),c._UZ(2,"img",12),c.qZA(),c.TgZ(3,"div",13)(4,"a",14),c._uU(5),c.qZA(),c.TgZ(6,"a",15),c._uU(7," Copy Link "),c.qZA()(),c.TgZ(8,"div",16)(9,"a",17),c.NdJ("click",function(s){const d=c.CHM(t).$implicit;return c.oxw().openModal(s,d)}),c.TgZ(10,"span",18),c._uU(11,"build"),c.qZA()(),c.TgZ(12,"a",19),c.NdJ("click",function(s){const d=c.CHM(t).$implicit;return c.oxw().deleteClip(s,d)}),c.TgZ(13,"span",18),c._uU(14,"delete"),c.qZA()()()()}if(2&n){const t=e.$implicit;c.xp6(5),c.hij(" ",t.title," ")}}let jF=(()=>{class n{constructor(t,r,s,u){this.router=t,this.activatedRoute=r,this.clipService=s,this.modalService=u,this.orderBy="1",this.clips=[],this.currentClip=null,this.sort$=new ii("1")}ngOnInit(){this.activatedRoute.queryParams.subscribe(t=>{this.orderBy="2"===t.sort?t.sort:"1",this.getUserClips()})}sort(t){const{value:r}=t.target;this.router.navigateByUrl(`/manage?sort=${r}`),this.sort$.next(r)}getUserClips(){this.clips=[],this.sort$.subscribe(t=>{this.clipService.getUserClips(t).then(r=>{r.forEach(s=>{this.clips.push(Object.assign(Object.assign({},s.data()),{id:s.id}))})})})}openModal(t,r){t.preventDefault(),this.currentClip=r,this.modalService.toggleModal("edit-clip")}onClipUpdated(t){}deleteClip(t,r){var s=this;return(0,pe.Z)(function*(){t.preventDefault();try{yield s.clipService.deleteClip(r),s.clips.forEach((u,d)=>{u.id==r.id&&s.clips.splice(d,1)})}catch(u){console.error(u)}})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Mn),c.Y36(Do),c.Y36(KA),c.Y36(Ey))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-manage"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"clip","clipUpdated"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],["href","#"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"p-6","text-2xl"],["href","#",1,"font-bold","mb-2"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],[1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400",3,"click"],[1,"material-icons","text-base"],[1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"a",2),c._uU(3,"Upload Videos"),c.qZA(),c.TgZ(4,"select",3),c.NdJ("change",function(u){return r.sort(u)}),c.TgZ(5,"option",4),c._uU(6,"Recent Uploads"),c.qZA(),c.TgZ(7,"option",5),c._uU(8,"Oldest Uploads"),c.qZA()()()(),c.TgZ(9,"div",6)(10,"div",7),c.YNc(11,BF,15,1,"div",8),c.qZA()(),c.TgZ(12,"app-edit",9),c.NdJ("clipUpdated",function(u){return r.onClipUpdated(u)}),c.qZA()),2&t&&(c.xp6(5),c.Q6J("selected","1"==r.orderBy),c.xp6(2),c.Q6J("selected","2"==r.orderBy),c.xp6(4),c.Q6J("ngForOf",r.clips),c.xp6(1),c.Q6J("clip",r.currentClip))},directives:[Ha,QM,XM,Ln,VF],styles:[""]}),n})();var JC,$F=new Uint8Array(16);function HF(){if(!JC&&!(JC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return JC($F)}const GF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ZF=function qF(n){return"string"==typeof n&&GF.test(n)};for(var xi=[],YA=0;YA<256;++YA)xi.push((YA+256).toString(16).substr(1));const YF=function KF(n,e,t){var r=(n=n||{}).random||(n.rng||HF)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return function zF(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(xi[n[e+0]]+xi[n[e+1]]+xi[n[e+2]]+xi[n[e+3]]+"-"+xi[n[e+4]]+xi[n[e+5]]+"-"+xi[n[e+6]]+xi[n[e+7]]+"-"+xi[n[e+8]]+xi[n[e+9]]+"-"+xi[n[e+10]]+xi[n[e+11]]+xi[n[e+12]]+xi[n[e+13]]+xi[n[e+14]]+xi[n[e+15]]).toLowerCase();if(!ZF(t))throw TypeError("Stringified UUID is invalid");return t}(r)};let QF=(()=>{class n{hadleEvent(t){t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","app-event-bloker",""]],hostBindings:function(t,r){1&t&&c.NdJ("drop",function(u){return r.hadleEvent(u)})("dragover",function(u){return r.hadleEvent(u)})}}),n})();const JF=function(n){return{"bg-indigo-400 border-indigo-400 border-solid":n}};function XF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"input",5),c.NdJ("change",function(s){return c.CHM(t),c.oxw().storeFile(s)}),c.qZA(),c.TgZ(2,"div",6),c.NdJ("dragend",function(){return c.CHM(t),c.oxw().isDragover=!1})("dragover",function(){return c.CHM(t),c.oxw().isDragover=!0})("dragenter",function(){return c.CHM(t),c.oxw().isDragover=!0})("dragleave",function(){return c.CHM(t),c.oxw().isDragover=!1})("mouseleave",function(){return c.CHM(t),c.oxw().isDragover=!1})("drop",function(s){return c.CHM(t),c.oxw().storeFile(s)}),c.TgZ(3,"h5"),c._uU(4,"Drop your file here (mp4 only!)"),c.qZA()(),c.BQk()}if(2&n){const t=c.oxw();c.xp6(2),c.Q6J("ngClass",c.VKq(1,JF,t.isDragover))}}function eL(n,e){if(1&n&&(c.TgZ(0,"p"),c._uU(1),c.ALo(2,"percent"),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.Oqu(c.lcZ(2,1,t.percentage))}}function tL(n,e){if(1&n&&(c.TgZ(0,"app-alert",21)(1,"p"),c._uU(2),c.qZA(),c.YNc(3,eL,3,3,"p",22),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("color",t.alertMessageColor),c.xp6(2),c.Oqu(t.alertMessage),c.xp6(1),c.Q6J("ngIf",t.showPercentage)}}const nL=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700":e}};function rL(n,e){if(1&n){const t=c.EpF();c.YNc(0,tL,4,3,"app-alert",7),c.TgZ(1,"form",8),c.NdJ("ngSubmit",function(){return c.CHM(t),c.oxw().uploadFile()}),c.TgZ(2,"h2",9),c._uU(3,"Select a Thumbnail"),c.qZA(),c.TgZ(4,"div",10)(5,"div",11),c._UZ(6,"img",12),c.qZA(),c.TgZ(7,"div",13),c._UZ(8,"img",14),c.qZA(),c.TgZ(9,"div",13),c._UZ(10,"img",15),c.qZA()(),c.TgZ(11,"div",16)(12,"label",17),c._uU(13,"Title"),c.qZA(),c._UZ(14,"app-input",18),c.qZA(),c.TgZ(15,"div",19)(16,"button",20),c._uU(17," Publish "),c.qZA()()()}if(2&n){const t=c.oxw();c.Q6J("ngIf",t.showAlertMessage),c.xp6(1),c.Q6J("formGroup",t.uploadForm),c.xp6(13),c.Q6J("control",t.titleControl),c.xp6(2),c.Q6J("disabled",t.isUploading)("ngClass",c.WLB(5,nL,t.isUploading,!t.isUploading))}}let iL=(()=>{class n{constructor(t,r,s,u){this.storage=t,this.authService=r,this.clilpService=s,this.router=u,this.isUploading=!1,this.isDragover=!1,this.file=null,this.nextStep=!1,this.alertMessageColor="red",this.alertMessage="",this.percentage=0,this.user=null,this.titleControl=new ru("",[Si.required,Si.minLength(3)]),this.uploadForm=new Cy({title:this.titleControl}),this.authService.getUser().subscribe(d=>{this.user=d})}get showAlertMessage(){return!!this.alertMessage}get showPercentage(){return!!this.percentage}ngOnInit(){}storeFile(t){var r,s,u,d;this.file=t.dataTransfer?null!==(s=null===(r=t.dataTransfer)||void 0===r?void 0:r.files.item(0))&&void 0!==s?s:null:null!==(d=null===(u=t.target.files)||void 0===u?void 0:u.item(0))&&void 0!==d?d:null,this.file&&"video/mp4"===this.file.type&&(this.titleControl.setValue(this.file.name.replace(/\.[^/.]+$/,"")),this.nextStep=!0)}uploadFile(){var r,s,t=this;this.uploadForm.disable(),this.isUploading=!0;const m=`clips/${YF()}.mp4`;this.alertMessage="Please wait! Your file is being uploaded ...",this.alertMessageColor="blue",this.uploadFileTask=this.storage.upload(m,this.file);const w=this.storage.ref(m);var I;null===(r=this.uploadFileTask)||void 0===r||r.percentageChanges().subscribe(I=>{this.percentage=I/100}),null===(s=this.uploadFileTask)||void 0===s||s.snapshotChanges().pipe(ng(),cn(()=>w.getDownloadURL())).subscribe({next:(I=(0,pe.Z)(function*(T){var M,L,G;const ee={uid:null===(M=t.user)||void 0===M?void 0:M.uid,displayName:null===(L=t.user)||void 0===L?void 0:L.displayName,clipPath:m,fileName:null===(G=t.file)||void 0===G?void 0:G.name,title:t.titleControl.value,url:T,timestamp:wf.Z.firestore.FieldValue.serverTimestamp()},Se=yield t.clilpService.createClip(ee);t.alertMessage="Success! Your clip is now ready to share \u{1f973}",t.alertMessageColor="green",t.redirectToClipPage(Se.id)}),function(M){return I.apply(this,arguments)}),error:I=>{this.alertMessage="Upload is failed, Please try again later, Or if you curious check the cosole error ... \u{1f914}",console.error(I),this.alertMessageColor="red",this.uploadForm.enable()},complete:()=>{this.isUploading=!1,this.percentage=0}})}ngOnDestroy(){var t;null===(t=this.uploadFileTask)||void 0===t||t.cancel()}redirectToClipPage(t){setTimeout(()=>{this.router.navigate(["clip",t])},1e3)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(X1),c.Y36(wy),c.Y36(KA),c.Y36(Mn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload"]],decls:7,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],[4,"ngIf","ngIfElse"],["uploadFormContainer",""],["type","file",1,"mb-4",3,"change"],["app-event-bloker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragend","dragover","dragenter","dragleave","mouseleave","drop"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],[1,"border-8","cursor-pointer","border-green-400"],["src","assets/img/1.jpg"],[1,"border-8","cursor-pointer","border-transparent"],["src","assets/img/2.jpg"],["src","assets/img/3.jpg"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"],[4,"ngIf"]],template:function(t,r){if(1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2),c._uU(3,"Upload Video"),c.qZA(),c.YNc(4,XF,5,3,"ng-container",3),c.YNc(5,rL,18,8,"ng-template",null,4,c.W1O),c.qZA()()),2&t){const s=c.MAs(6);c.xp6(4),c.Q6J("ngIf",!r.nextStep)("ngIfElse",s)}},directives:[an,QF,Br,kC,A0,b0,Iy,PA],pipes:[Xn],styles:[""]}),n})();var sL=N(9635);const QA=(0,gt.U)(n=>!!n);let JA=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(s,u)=>{const d=s.data.authGuardPipe||(()=>QA);return this.auth.user.pipe((0,si.q)(1),d(s,u),(0,gt.U)(m=>"boolean"==typeof m?m:Array.isArray(m)?this.router.createUrlTree(m):this.router.parseUrl(m)))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mn),c.LFG(sc))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const eR=()=>(0,sL.z)(QA,(0,gt.U)(e=>e||"/")),uL=[{path:"manage-clips",redirectTo:"manage"},{path:"manage",component:jF,canActivate:[JA],data:{authOnly:!0,authGuardPipe:eR}},{path:"upload",component:iL,canActivate:[JA],data:{authOnly:!0,authGuardPipe:eR}}];let lL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Ag.forChild(uL)],Ag]}),n})(),cL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Ia,lL,g1,OA]]}),n})(),dL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[KO]}),n.\u0275inj=c.cJS({providers:[],imports:[[xa,YO,dt.hO.initializeApp(FA_firebaseConfig),Sw,nM,cL,Q0,nM]]}),n})();(0,c.G48)(),wf.Z.initializeApp(FA_firebaseConfig);let tR=!1;wf.Z.auth().onAuthStateChanged(()=>{tR||yu().bootstrapModule(dL).catch(n=>console.error(n)),tR=!0})},5867:(Ze,ye,N)=>{N.d(ye,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=N(9681);(0,c.registerVersion)("firebase","9.8.2","app")},127:(Ze,ye,N)=>{N.d(ye,{Z:()=>c.Z});var c=N(3942);c.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Ze,ye,N)=>{N.r(ye);var c=N(5861),J=N(3942),O=N(2090),se=N(9681),re=N(655),de=N(1877),ue=N(4859);const Ae=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qe=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new de.Yd("@firebase/auth");function tt(y,...f){We.logLevel<=de.in.ERROR&&We.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function xe(y,...f){throw Ue(y,...f)}function Ee(y,...f){return Ue(y,...f)}function Ce(y,f,g){const v=Object.assign(Object.assign({},Qe()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function Ve(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&xe(y,"argument-error"),Ce(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return _e.create(y,...f)}function B(y,f,...g){if(!y)throw Ue(f,...g)}function we(y){const f="INTERNAL ASSERTION FAILED: "+y;throw tt(f),new Error(f)}function W(y,f){y||we(f)}const ie=new Map;function te(y){W(y instanceof Function,"Expected a class definition");let f=ie.get(y);return f?(W(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ie.set(y,f),f)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Yt{constructor(f,g){this.shortDelay=f,this.longDelay=g,W(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yn(y,f){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Xt{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Cr=new Yt(3e4,6e4);function Ht(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Pt(y,f,g,v){return rs.apply(this,arguments)}function rs(){return(rs=(0,c.Z)(function*(y,f,g,v,A={}){return Yr(y,A,(0,c.Z)(function*(){let k={},z={};v&&("GET"===f?z=v:k={body:JSON.stringify(v)});const he=(0,O.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),Xt.fetch()(As(y,y.config.apiHost,g,he),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Yr(y,f,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,c.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Zt),f);try{const A=new Qr(y),k=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const z=yield k.json();if("needConfirmation"in z)throw pi(y,"account-exists-with-different-credential",z);if(k.ok&&!("errorMessage"in z))return z;{const he=k.ok?z.errorMessage:z.error.message,[Le,Ye]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw pi(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Le)throw pi(y,"email-already-in-use",z);if("USER_DISABLED"===Le)throw pi(y,"user-disabled",z);const ft=v[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Ce(y,ft,Ye);xe(y,ft)}}catch(A){if(A instanceof O.ZR)throw A;xe(y,"network-request-failed")}})).apply(this,arguments)}function Ir(y,f,g,v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,c.Z)(function*(y,f,g,v,A={}){const k=yield Pt(y,f,g,v,A);return"mfaPendingCredential"in k&&xe(y,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function As(y,f,g,v){const A=`${f}${g}?${v}`;return y.config.emulator?yn(y.config,A):`${y.config.apiScheme}://${A}`}class Qr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(Ee(this.auth,"network-request-failed")),Cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pi(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const A=Ee(y,f,v);return A.customData._tokenResponse=g,A}function Jr(){return(Jr=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function hn(y,f){return _n.apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function io(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Gn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Lo(){return(Lo=(0,c.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),A=ot(v);B(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,z=null==k?void 0:k.sign_in_provider;return{claims:A,token:v,authTime:Gn(jt(A.auth_time)),issuedAtTime:Gn(jt(A.iat)),expirationTime:Gn(jt(A.exp)),signInProvider:z||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function jt(y){return 1e3*Number(y)}function ot(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return tt("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(tt("Failed to decode base64 JWT payload"),null)}catch(A){return tt("Caught error parsing JWT payload as JSON",A),null}}function lr(y,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,c.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Ut(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ut({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class so{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class cr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gn(this.lastLoginAt),this.creationTime=Gn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dr(y){return U.apply(this,arguments)}function U(){return(U=(0,c.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),A=yield lr(y,io(g,{idToken:v}));B(null==A?void 0:A.users.length,g,"internal-error");const k=A.users[0];y._notifyReloadListener(k);const z=(null===(f=k.providerUserInfo)||void 0===f?void 0:f.length)?H(k.providerUserInfo):[],he=Ie(y.providerData,z),ft=!!y.isAnonymous&&!(y.email&&k.passwordHash||(null==he?void 0:he.length)),ct={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:he,metadata:new cr(k.createdAt,k.lastLoginAt),isAnonymous:ft};Object.assign(y,ct)})).apply(this,arguments)}function Z(){return(Z=(0,c.Z)(function*(y){const f=(0,O.m9)(y);yield dr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ie(y,f){return[...y.filter(v=>!f.some(A=>A.providerId===v.providerId)),...f]}function H(y){return y.map(f=>{var{providerId:g}=f,v=(0,re._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ke(){return(ke=(0,c.Z)(function*(y,f){const g=yield Yr(y,{},(0,c.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:k}=y.config,z=As(y,A,"/v1/token",`key=${k}`),he=yield y._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Xt.fetch()(z,{method:"POST",headers:he,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){B(f.idToken,"internal-error"),B(void 0!==f.idToken,"internal-error"),B(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Et(y){const f=ot(y);return B(f,"internal-error"),B(void 0!==f.exp,"internal-error"),B(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,c.Z)(function*(){return B(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,c.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:z}=yield function X(y,f){return ke.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(A,k,Number(z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:A,expirationTime:k}=g,z=new Ke;return v&&(B("string"==typeof v,"internal-error",{appName:f}),z.refreshToken=v),A&&(B("string"==typeof A,"internal-error",{appName:f}),z.accessToken=A),k&&(B("number"==typeof k,"internal-error",{appName:f}),z.expirationTime=k),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ke,this.toJSON())}_performRefresh(){return we("not implemented")}}function pt(y,f){B("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Dt{constructor(f){var{uid:g,auth:v,stsTokenManager:A}=f,k=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new so(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new cr(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const v=yield lr(g,g.stsTokenManager.getToken(g.auth,f));return B(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function gi(y){return Lo.apply(this,arguments)}(this,f)}reload(){return function q(y){return Z.apply(this,arguments)}(this)}_assign(f){this!==f&&(B(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Dt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,c.Z)(function*(){let A=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield dr(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield lr(f,function yt(y,f){return Jr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,A,k,z,he,Le,Ye,ft;const ct=null!==(v=g.displayName)&&void 0!==v?v:void 0,Cn=null!==(A=g.email)&&void 0!==A?A:void 0,ui=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,Fu=null!==(z=g.photoURL)&&void 0!==z?z:void 0,rf=null!==(he=g.tenantId)&&void 0!==he?he:void 0,Cg=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,$a=null!==(Ye=g.createdAt)&&void 0!==Ye?Ye:void 0,tc=null!==(ft=g.lastLoginAt)&&void 0!==ft?ft:void 0,{uid:Ud,emailVerified:Ig,isAnonymous:Mn,providerData:sf,stsTokenManager:af}=g;B(Ud&&af,f,"internal-error");const uf=Ke.fromJSON(this.name,af);B("string"==typeof Ud,f,"internal-error"),pt(ct,f.name),pt(Cn,f.name),B("boolean"==typeof Ig,f,"internal-error"),B("boolean"==typeof Mn,f,"internal-error"),pt(ui,f.name),pt(Fu,f.name),pt(rf,f.name),pt(Cg,f.name),pt($a,f.name),pt(tc,f.name);const Ha=new Dt({uid:Ud,auth:f,email:Cn,emailVerified:Ig,displayName:ct,isAnonymous:Mn,photoURL:Fu,phoneNumber:ui,tenantId:rf,stsTokenManager:uf,createdAt:$a,lastLoginAt:tc});return sf&&Array.isArray(sf)&&(Ha.providerData=sf.map(Lu=>Object.assign({},Lu))),Cg&&(Ha._redirectEventId=Cg),Ha}static _fromIdTokenResponse(f,g,v=!1){return(0,c.Z)(function*(){const A=new Ke;A.updateFromServerResponse(g);const k=new Dt({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:v});return yield dr(k),k})()}}const It=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,v){var A=this;return(0,c.Z)(function*(){A.storage[g]=v})()}_get(g){var v=this;return(0,c.Z)(function*(){const A=v.storage[g];return void 0===A?null:A})()}_remove(g){var v=this;return(0,c.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function On(y,f,g){return`firebase:${y}:${f}:${g}`}class Dr{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:A,name:k}=this.auth;this.fullUserKey=On(this.userKey,A.apiKey,k),this.fullPersistenceKey=On("persistence",A.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Dt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,c.Z)(function*(){if(!g.length)return new Dr(te(It),f,v);const A=(yield Promise.all(g.map(function(){var Ye=(0,c.Z)(function*(ft){if(yield ft._isAvailable())return ft});return function(ft){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let k=A[0]||te(It);const z=On(v,f.config.apiKey,f.name);let he=null;for(const Ye of g)try{const ft=yield Ye._get(z);if(ft){const ct=Dt._fromJSON(f,ft);Ye!==k&&(he=ct),k=Ye;break}}catch(ft){}const Le=A.filter(Ye=>Ye._shouldAllowMigration);return k._shouldAllowMigration&&Le.length?(k=Le[0],he&&(yield k._set(z,he.toJSON())),yield Promise.all(g.map(function(){var Ye=(0,c.Z)(function*(ft){if(ft!==k)try{yield ft._remove(z)}catch(ct){}});return function(ft){return Ye.apply(this,arguments)}}())),new Dr(k,f,v)):new Dr(k,f,v)})()}}function su(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Pn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(_a(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(is(f))return"Blackberry";if(Fn(f))return"Webos";if(ou(f))return"Safari";if((f.includes("chrome/")||va(f))&&!f.includes("edge/"))return"Chrome";if(Tr(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function _a(y=(0,O.z$)()){return/firefox\//i.test(y)}function ou(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function va(y=(0,O.z$)()){return/crios\//i.test(y)}function Pn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Tr(y=(0,O.z$)()){return/android/i.test(y)}function is(y=(0,O.z$)()){return/blackberry/i.test(y)}function Fn(y=(0,O.z$)()){return/webos/i.test(y)}function Lr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ss(y=(0,O.z$)()){return Lr(y)||Tr(y)||Fn(y)||is(y)||/windows phone/i.test(y)||Pn(y)}function Uo(y,f=[]){let g;switch(y){case"Browser":g=su((0,O.z$)());break;case"Worker":g=`${su((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${v}`}class Ur{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=k=>new Promise((z,he)=>{try{z(f(k))}catch(Le){he(Le)}});v.onAbort=g,this.queue.push(v);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,c.Z)(function*(){if(g.auth.currentUser===f)return;const v=[];try{for(const A of g.queue)yield A(f),A.onAbort&&v.push(A.onAbort)}catch(A){v.reverse();for(const k of v)try{k()}catch(z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A.message})}})()}}class He{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jt(this),this.idTokenSubscription=new Jt(this),this.beforeStateQueue=new Ur(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=te(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var A,k;if(!v._deleted&&(v.persistenceManager=yield Dr.create(v,f),!v._deleted)){if(null===(A=v._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(k=v.currentUser)||void 0===k?void 0:k.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var v;const A=yield g.assertedPersistence.getCurrentUser();let k=A,z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const he=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Le=null==k?void 0:k._redirectEventId,Ye=yield g.tryRedirectSignIn(f);(!he||he===Le)&&(null==Ye?void 0:Ye.user)&&(k=Ye.user,z=!0)}if(!k)return g.directlySetCurrentUser(null);if(!k._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(k)}catch(he){k=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(he))}return k?g.reloadAndSetCurrentUserOrClear(k):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===k._redirectEventId?g.directlySetCurrentUser(k):g.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){try{yield dr(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ge(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&B(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,c.Z)(function*(){if(!v._deleted)return f&&B(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,c.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,c.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&te(f)||g._popupRedirectResolver;B(v,g,"argument-error"),g.redirectPersistenceManager=yield Dr.create(g,[te(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var v,A;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,A){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return B(z,this,"internal-error"),z.then(()=>k(this.currentUser)),"function"==typeof g?f.addObserver(g,v,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Uo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function at(y){return(0,O.m9)(y)}class Jt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ri(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function ki(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class mi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return we("not implemented")}_getIdTokenResponse(f){return we("not implemented")}_linkToIdToken(f,g){return we("not implemented")}_getReauthenticationResolver(f){return we("not implemented")}}function vn(y,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:resetPassword",Ht(y,f))})).apply(this,arguments)}function Ea(y,f){return Br.apply(this,arguments)}function Br(){return(Br=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function au(y,f){return xs.apply(this,arguments)}function xs(){return(xs=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",Ht(y,f))})).apply(this,arguments)}function ao(){return(ao=(0,c.Z)(function*(y,f){return Ir(y,"POST","/v1/accounts:signInWithPassword",Ht(y,f))})).apply(this,arguments)}function Ms(y,f){return an.apply(this,arguments)}function an(){return(an=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendOobCode",Ht(y,f))})).apply(this,arguments)}function en(y,f){return uu.apply(this,arguments)}function uu(){return(uu=(0,c.Z)(function*(y,f){return Ms(y,f)})).apply(this,arguments)}function ba(y,f){return jr.apply(this,arguments)}function jr(){return(jr=(0,c.Z)(function*(y,f){return Ms(y,f)})).apply(this,arguments)}function Ni(y,f){return lu.apply(this,arguments)}function lu(){return(lu=(0,c.Z)(function*(y,f){return Ms(y,f)})).apply(this,arguments)}function Hc(y,f){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,c.Z)(function*(y,f){return Ms(y,f)})).apply(this,arguments)}function _l(){return(_l=(0,c.Z)(function*(y,f){return Ir(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,f))})).apply(this,arguments)}function Gc(){return(Gc=(0,c.Z)(function*(y,f){return Ir(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,f))})).apply(this,arguments)}class hr extends mi{constructor(f,g,v,A=null){super("password",v),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new hr(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new hr(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function Ln(y,f){return ao.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Pi(y,f){return _l.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:xe(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,c.Z)(function*(){switch(v.signInMethod){case"password":return Ea(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function qp(y,f){return Gc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:xe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Rs(y,f){return qc.apply(this,arguments)}function qc(){return(qc=(0,c.Z)(function*(y,f){return Ir(y,"POST","/v1/accounts:signInWithIdp",Ht(y,f))})).apply(this,arguments)}class ss extends mi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ss(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):xe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A}=g,k=(0,re._T)(g,["providerId","signInMethod"]);if(!v||!A)return null;const z=new ss(v,A);return z.idToken=k.idToken||void 0,z.accessToken=k.accessToken||void 0,z.secret=k.secret,z.nonce=k.nonce,z.pendingToken=k.pendingToken||null,z}_getIdTokenResponse(f){return Rs(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Rs(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Rs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function Zc(y,f){return zc.apply(this,arguments)}function zc(){return(zc=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendVerificationCode",Ht(y,f))})).apply(this,arguments)}function ks(){return(ks=(0,c.Z)(function*(y,f){return Ir(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,f))})).apply(this,arguments)}function Wc(){return(Wc=(0,c.Z)(function*(y,f){const g=yield Ir(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,f));if(g.temporaryProof)throw pi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Wp={USER_NOT_FOUND:"user-not-found"};function Kc(){return(Kc=(0,c.Z)(function*(y,f){return Ir(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Wp)})).apply(this,arguments)}class Vo extends mi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Vo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Vo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function vl(y,f){return ks.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function zp(y,f){return Wc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Kp(y,f){return Kc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:k}=f;return v||g||A||k?new Vo({verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:k}):null}}class cu{constructor(f){var g,v,A,k,z,he;const Le=(0,O.zd)((0,O.pd)(f)),Ye=null!==(g=Le.apiKey)&&void 0!==g?g:null,ft=null!==(v=Le.oobCode)&&void 0!==v?v:null,ct=function Nh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);B(Ye&&ft&&ct,"argument-error"),this.apiKey=Ye,this.operation=ct,this.code=ft,this.continueUrl=null!==(k=Le.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(z=Le.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(he=Le.tenantId)&&void 0!==he?he:null}static parseLink(f){const g=function Ca(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new cu(g)}catch(v){return null}}}let Qc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return hr._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const A=cu.parseLink(v);return B(A,"argument-error"),hr._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Xn{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class uo extends Xn{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Fi extends uo{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return B("providerId"in g&&"signInMethod"in g,"argument-error"),ss._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return B(f.idToken||f.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Fi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Fi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:k,nonce:z,providerId:he}=f;if(!v&&!A&&!g&&!k||!he)return null;try{return new Fi(he)._credential({idToken:g,accessToken:v,nonce:z,pendingToken:k})}catch(Le){return null}}}let Bo=(()=>{class y extends uo{constructor(){super("facebook.com")}static credential(g){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Jc=(()=>{class y extends uo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:A}=g;if(!v&&!A)return null;try{return y.credential(v,A)}catch(k){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Oh=(()=>{class y extends uo{constructor(){super("github.com")}static credential(g){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class lo extends mi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Rs(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Rs(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Rs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A,pendingToken:k}=g;return v&&A&&k&&v===A?new lo(v,k):null}static _create(f,g){return new lo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ar extends Xn{constructor(f){B(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ar.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ar.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=lo.fromJSON(f);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return lo._create(v,g)}catch(A){return null}}}let Xc=(()=>{class y extends uo{constructor(){super("twitter.com")}static credential(g,v){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=g;if(!v||!A)return null;try{return y.credential(v,A)}catch(k){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Sr(y,f){return $o.apply(this,arguments)}function $o(){return($o=(0,c.Z)(function*(y,f){return Ir(y,"POST","/v1/accounts:signUp",Ht(y,f))})).apply(this,arguments)}class ti{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,A=!1){return(0,c.Z)(function*(){const k=yield Dt._fromIdTokenResponse(f,v,A),z=wl(v);return new ti({user:k,providerId:z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const A=wl(v);return new ti({user:f,providerId:A,_tokenResponse:v,operationType:g})})()}}function wl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function El(){return(El=(0,c.Z)(function*(y){var f;const g=at(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ti({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Sr(g,{returnSecureToken:!0}),A=yield ti._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ho extends O.ZR{constructor(f,g,v,A){var k;super(g.code,g.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,Ho.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,A){return new Ho(f,g,v,A)}}function bl(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Ho._fromErrorAndOperation(y,k,f,v):k})}function Li(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function tn(){return(tn=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y);yield zt(!0,g,f);const{providerUserInfo:v}=yield hn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=Li(v||[]);return g.providerData=g.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Da(y,f){return co.apply(this,arguments)}function co(){return(co=(0,c.Z)(function*(y,f,g=!1){const v=yield lr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ti._forOperation(y,"link",v)})).apply(this,arguments)}function zt(y,f,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,c.Z)(function*(y,f,g){yield dr(f);const A=!1===y?"provider-already-linked":"no-such-provider";B(Li(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function du(y,f){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,c.Z)(function*(y,f,g=!1){const{auth:v}=y,A="reauthenticate";try{const k=yield lr(y,bl(v,A,f,y),g);B(k.idToken,v,"internal-error");const z=ot(k.idToken);B(z,v,"internal-error");const{sub:he}=z;return B(y.uid===he,v,"user-mismatch"),ti._forOperation(y,A,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&xe(v,"user-mismatch"),k}})).apply(this,arguments)}function er(y,f){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,c.Z)(function*(y,f,g=!1){const v="signIn",A=yield bl(y,v,f),k=yield ti._fromIdTokenResponse(y,v,A);return g||(yield y._updateCurrentUser(k.user)),k})).apply(this,arguments)}function ln(y,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,c.Z)(function*(y,f){return er(at(y),f)})).apply(this,arguments)}function tr(y,f){return ho.apply(this,arguments)}function ho(){return(ho=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y);return yield zt(!1,g,f.providerId),Da(g,f)})).apply(this,arguments)}function os(y,f){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,c.Z)(function*(y,f){return du((0,O.m9)(y),f)})).apply(this,arguments)}function yi(y,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,c.Z)(function*(y,f){return Ir(y,"POST","/v1/accounts:signInWithCustomToken",Ht(y,f))})).apply(this,arguments)}function _t(){return(_t=(0,c.Z)(function*(y,f){const g=at(y),v=yield yi(g,{token:f,returnSecureToken:!0}),A=yield ti._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Os{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Il._fromServerResponse(f,g):xe(f,"internal-error")}}class Il extends Os{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Il(g)}}function Sa(y,f,g){var v;B((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),B(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function hu(){return(hu=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&Sa(v,A,g),yield ba(v,A)})).apply(this,arguments)}function Tl(){return(Tl=(0,c.Z)(function*(y,f,g){yield vn((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Te(){return(Te=(0,c.Z)(function*(y,f){yield au((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ft(y,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield vn(g,{oobCode:f}),A=v.requestType;switch(B(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(v.mfaInfo,g,"internal-error");default:B(v.email,g,"internal-error")}let k=null;return v.mfaInfo&&(k=Os._fromServerResponse(at(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function pu(){return(pu=(0,c.Z)(function*(y,f){const{data:g}=yield Ft((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(y,f,g){const v=at(y),A=yield Sr(v,{returnSecureToken:!0,email:f,password:g}),k=yield ti._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}function xl(){return(xl=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};B(g.handleCodeInApp,v,"argument-error"),g&&Sa(v,A,g),yield Ni(v,A)})).apply(this,arguments)}function as(){return(as=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=Qc.credentialWithLink(f,g||Pe());return B(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),ln(v,A)})).apply(this,arguments)}function fr(y,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:createAuthUri",Ht(y,f))})).apply(this,arguments)}function Ps(){return(Ps=(0,c.Z)(function*(y,f){const v={identifier:f,continueUri:ut()?Pe():"http://localhost"},{signinMethods:A}=yield fr((0,O.m9)(y),v);return A||[]})).apply(this,arguments)}function Ml(){return(Ml=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Sa(g.auth,A,f);const{email:k}=yield en(g.auth,A);k!==y.email&&(yield y.reload())})).apply(this,arguments)}function yu(){return(yu=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Sa(v.auth,k,g);const{email:z}=yield Hc(v.auth,k);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Rl(y,f){return xa.apply(this,arguments)}function xa(){return(xa=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function vu(){return(vu=(0,c.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),k={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},z=yield lr(v,Rl(v.auth,k));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const he=v.providerData.find(({providerId:Le})=>"password"===Le);he&&(he.displayName=v.displayName,he.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function wu(y,f,g){return po.apply(this,arguments)}function po(){return(po=(0,c.Z)(function*(y,f,g){const{auth:v}=y,k={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(k.email=f),g&&(k.password=g);const z=yield lr(y,Ea(v,k));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class zo{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class sd extends zo{constructor(f,g,v,A){super(f,g,v),this.username=A}}class Eu extends zo{constructor(f,g){super(f,"facebook.com",g)}}class $r extends sd{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Fh extends zo{constructor(f,g){super(f,"google.com",g)}}class kl extends sd{constructor(f,g,v){super(f,"twitter.com",g,v)}}function qn(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function id(y){var f,g;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},k=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const z=null===(g=null===(f=ot(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new zo(k,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new Eu(k,A);case"github.com":return new $r(k,A);case"google.com":return new Fh(k,A);case"twitter.com":return new kl(k,A,y.screenName||null);case"custom":case"anonymous":return new zo(k,null);default:return new zo(k,v,A)}}(g)}class us{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new us("enroll",f)}static _fromMfaPendingCredential(f){return new us("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return us._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return us._fromIdtoken(f.multiFactorSession.idToken)}return null}}class mo{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=at(f),A=g.customData._serverResponse,k=(A.mfaInfo||[]).map(he=>Os._fromServerResponse(v,he));B(A.mfaPendingCredential,v,"internal-error");const z=us._fromMfaPendingCredential(A.mfaPendingCredential);return new mo(z,k,function(){var he=(0,c.Z)(function*(Le){const Ye=yield Le._process(v,z);delete A.mfaInfo,delete A.mfaPendingCredential;const ft=Object.assign(Object.assign({},A),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(g.operationType){case"signIn":const ct=yield ti._fromIdTokenResponse(v,g.operationType,ft);return yield v._updateCurrentUser(ct.user),ct;case"reauthenticate":return B(g.user,v,"internal-error"),ti._forOperation(g.user,g.operationType,ft);default:xe(v,"internal-error")}});return function(Le){return he.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function ud(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:start",Ht(y,f))}class Wo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>Os._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Wo(f)}getSession(){var f=this;return(0,c.Z)(function*(){return us._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,c.Z)(function*(){const A=f,k=yield v.getSession(),z=yield lr(v.user,A._process(v.user.auth,k,g));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){const v="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),k=yield lr(g.user,function yo(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==v),yield g.user._updateTokensIfNecessary(k);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const bu=new WeakMap,ls="__sak";class Cu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ls,"1"),this.storage.removeItem(ls),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const xr=(()=>{class y extends Cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function tg(){const y=(0,O.z$)();return ou(y)||Lr(y)}()&&function Jn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ss(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),k=this.localCache[v];A!==k&&g(v,k,A)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((he,Le,Ye)=>{this.notifyListeners(he,Ye)});const A=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(A);if(g.newValue!==he)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!v)return}const k=()=>{const he=this.storage.getItem(A);!v&&this.localCache[A]===he||this.notifyListeners(A,he)},z=this.storage.getItem(A);!function wa(){return(0,O.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?k():setTimeout(k,10)}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const k of Array.from(A))k(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var A=()=>super._set,k=this;return(0,c.Z)(function*(){yield A().call(k,g,v),k.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,A=this;return(0,c.Z)(function*(){const k=yield v().call(A,g);return A.localCache[g]=JSON.stringify(k),k})()}_remove(g){var v=()=>super._remove,A=this;return(0,c.Z)(function*(){yield v().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),wn=(()=>{class y extends Cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let ld=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(k=>k.isListeningto(g));if(v)return v;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,c.Z)(function*(){const A=g,{eventId:k,eventType:z,data:he}=A.data,Le=v.handlersMap[z];if(!(null==Le?void 0:Le.size))return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:z});const Ye=Array.from(Le).map(function(){var ct=(0,c.Z)(function*(Cn){return Cn(A.origin,he)});return function(Cn){return ct.apply(this,arguments)}}()),ft=yield function ka(y){return Promise.all(y.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Ye);A.ports[0].postMessage({status:"done",eventId:k,eventType:z,response:ft})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ko(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Fs{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var A=this;return(0,c.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let z,he;return new Promise((Le,Ye)=>{const ft=Ko("",20);k.port1.start();const ct=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);he={messageChannel:k,onMessage(Cn){const ui=Cn;if(ui.data.eventId===ft)switch(ui.data.status){case"ack":clearTimeout(ct),z=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Le(ui.data.response);break;default:clearTimeout(ct),clearTimeout(z),Ye(new Error("invalid_response"))}}},A.handlers.add(he),k.port1.addEventListener("message",he.onMessage),A.target.postMessage({eventType:f,eventId:ft,data:g},[k.port2])}).finally(()=>{he&&A.removeMessageHandler(he)})})()}}function En(){return window}function Bi(){return void 0!==En().WorkerGlobalScope&&"function"==typeof En().importScripts}function cd(){return(cd=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Ol="firebaseLocalStorageDb",Us="firebaseLocalStorage",Yo="fbase_key";class _o{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function nr(y,f){return y.transaction([Us],f?"readwrite":"readonly").objectStore(Us)}function wo(){const y=indexedDB.open(Ol,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Us,{keyPath:Yo})}catch(A){g(A)}}),y.addEventListener("success",(0,c.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Us)?f(v):(v.close(),yield function vo(){const y=indexedDB.deleteDatabase(Ol);return new _o(y).toPromise()}(),f(yield wo()))}))})}function Qo(y,f,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(y,f,g){const v=nr(y,!0).put({[Yo]:f,value:g});return new _o(v).toPromise()})).apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(y,f){const g=nr(y,!1).get(f),v=yield new _o(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Eo(y,f){const g=nr(y,!0).delete(f);return new _o(g).toPromise()}const bo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield wo()),g.db})()}_withRetries(g){var v=this;return(0,c.Z)(function*(){let A=0;for(;;)try{const k=yield v._openDb();return yield g(k)}catch(k){if(A++>3)throw k;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return Bi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=ld._getInstance(function Nl(){return Bi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,c.Z)(function*(A,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(A,k){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,c.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var v,A;if(g.activeServiceWorker=yield function gt(){return cd.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Fs(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);!k||(null===(v=k[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=k[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,c.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function dd(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield wo();return yield Qo(g,ls,"1"),yield Eo(g,ls),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,c.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(k=>Qo(k,g,v)),A.localCache[g]=v,A.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,c.Z)(function*(){const A=yield v._withRetries(k=>function Jo(y,f){return Bs.apply(this,arguments)}(k,g));return v.localCache[g]=A,A})()}_remove(g){var v=this;return(0,c.Z)(function*(){return v._withPendingWrite((0,c.Z)(function*(){return yield v._withRetries(A=>Eo(A,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const v=yield g._withRetries(z=>{const he=nr(z,!1).getAll();return new _o(he).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:z,value:he}of v)k.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(he)&&(g.notifyListeners(z,he),A.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!k.has(z)&&(g.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const k of Array.from(A))k(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Bn(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:start",Ht(y,f))}function cn(){return(cn=(0,c.Z)(function*(y){return(yield Pt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Co(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=A=>{const k=Ee("internal-error");k.customData=A,g(k)},v.type="text/javascript",v.charset="UTF-8",function si(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function ds(y){return`__${y}${Math.floor(1e6*Math.random())}`}const oi=1e12;class bn{constructor(f){this.auth=f,this.counter=oi,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new vi(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||oi;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||oi))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var v;return null===(v=g._widgets.get(f||oi))||void 0===v||v.execute(),""})()}}class vi{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;B(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Iu(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ll=ds("rcb"),fn=new Yt(3e4,6e4);class ng{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!En().grecaptcha}load(f,g=""){return B(function Xo(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(En().grecaptcha):new Promise((v,A)=>{const k=En().setTimeout(()=>{A(Ee(f,"network-request-failed"))},fn.get());En()[Ll]=()=>{En().clearTimeout(k),delete En()[Ll];const he=En().grecaptcha;if(!he)return void A(Ee(f,"internal-error"));const Le=he.render;he.render=(Ye,ft)=>{const ct=Le(Ye,ft);return this.counter++,ct},this.hostLanguage=g,v(he)},Co(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Ll,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),A(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!En().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hr{load(f){return(0,c.Z)(function*(){return new bn(f)})()}clearedOneInstance(){}}const hd="recaptcha",$s={theme:"light",type:"image"};class fd{constructor(f,g=Object.assign({},$s),v){this.parameters=g,this.type=hd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(v),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;B(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hr:new ng,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(k=>{const z=he=>{!he||(f.tokenChangeListeners.delete(z),k(he))};f.tokenChangeListeners.add(z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=En()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){B(ut()&&!Bi(),f.auth,"internal-error"),yield function $i(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function js(y){return cn.apply(this,arguments)}(f.auth);B(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ul{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Vo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Oa(){return(Oa=(0,c.Z)(function*(y,f,g){const v=at(y),A=yield Mr(v,f,(0,O.m9)(g));return new Ul(A,k=>ln(v,k))})).apply(this,arguments)}function pd(){return(pd=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield zt(!1,v,"phone");const A=yield Mr(v.auth,f,(0,O.m9)(g));return new Ul(A,k=>tr(v,k))})).apply(this,arguments)}function pr(){return(pr=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=yield Mr(v.auth,f,(0,O.m9)(g));return new Ul(A,k=>os(v,k))})).apply(this,arguments)}function Mr(y,f,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,c.Z)(function*(y,f,g){var v;const A=yield g.verify();try{let k;if(B("string"==typeof A,y,"argument-error"),B(g.type===hd,y,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const z=k.session;if("phoneNumber"in k)return B("enroll"===z.type,y,"internal-error"),(yield ud(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{B("signin"===z.type,y,"internal-error");const he=(null===(v=k.multiFactorHint)||void 0===v?void 0:v.uid)||k.multiFactorUid;return B(he,y,"missing-multi-factor-info"),(yield Bn(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Zc(y,{phoneNumber:k.phoneNumber,recaptchaToken:A});return z}}finally{g._reset()}})).apply(this,arguments)}function hs(){return(hs=(0,c.Z)(function*(y,f){yield Da((0,O.m9)(y),f)})).apply(this,arguments)}let Hs=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=at(g)}verifyPhoneNumber(g,v){return Mr(this.auth,g,(0,O.m9)(v))}static credential(g,v){return Vo._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:A}=g;return v&&A?Vo._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function fs(y,f){return f?te(f):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ta extends mi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Rs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Rs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Rs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Nt(y){return er(y.auth,new ta(y),y.bypassAuthState)}function gd(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),du(g,new ta(y),y.bypassAuthState)}function na(y){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),Da(g,new ta(y),y.bypassAuthState)})).apply(this,arguments)}class Fa{constructor(f,g,v,A,k=!1){this.auth=f,this.resolver=v,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(v,A){f.pendingPromise={resolve:v,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(v,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:k,tenantId:z,error:he,type:Le}=f;if(he)return void g.reject(he);const Ye={auth:g.auth,requestUri:v,sessionId:A,tenantId:z||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Ye))}catch(ft){g.reject(ft)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Nt;case"linkViaPopup":case"linkViaRedirect":return na;case"reauthViaPopup":case"reauthViaRedirect":return gd;default:xe(this.auth,"internal-error")}}resolve(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ra=new Yt(2e3,1e4);function ps(){return(ps=(0,c.Z)(function*(y,f,g){const v=at(y);Ve(y,f,Xn);const A=fs(v,g);return new yd(v,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function Tu(){return(Tu=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ve(v.auth,f,Xn);const A=fs(v.auth,g);return new yd(v.auth,"reauthViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}function Hi(){return(Hi=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ve(v.auth,f,Xn);const A=fs(v.auth,g);return new yd(v.auth,"linkViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}let yd=(()=>{class y extends Fa{constructor(g,v,A,k,z){super(g,v,k,z),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const v=yield g.execute();return B(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,c.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const v=Ko();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,A;this.pollId=(null===(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,ra.get())};g()}}return y.currentPopupAction=null,y})();const rr=new Map;class Vl extends Fa{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let v=rr.get(g.auth._key());if(!v){try{const k=(yield function Vh(y,f){return Gs.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(k)}catch(A){v=()=>Promise.reject(A)}rr.set(g.auth._key(),v)}return g.bypassAuthState||rr.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const A=yield v.auth._redirectUserForId(f.eventId);if(A)return v.user=A,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Gs(){return(Gs=(0,c.Z)(function*(y,f){const g=F(f),v=R(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(g));return yield v._remove(g),A})).apply(this,arguments)}function ia(y,f){return La.apply(this,arguments)}function La(){return(La=(0,c.Z)(function*(y,f){return R(y)._set(F(f),"true")})).apply(this,arguments)}function D(y,f){rr.set(y._key(),f)}function R(y){return te(y._redirectPersistence)}function F(y){return On("pendingRedirect",y.config.apiKey,y.name)}function ge(){return(ge=(0,c.Z)(function*(y,f,g){const v=at(y);Ve(y,f,Xn);const A=fs(v,g);return yield ia(A,v),A._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ve(v.auth,f,Xn);const A=fs(v.auth,g);yield ia(A,v.auth);const k=yield mr(v);return A._openRedirect(v.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function Sn(){return(Sn=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ve(v.auth,f,Xn);const A=fs(v.auth,g);yield zt(!1,v,f.providerId),yield ia(A,v.auth);const k=yield mr(v);return A._openRedirect(v.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function gs(){return(gs=(0,c.Z)(function*(y,f){return yield at(y)._initializationPromise,Gi(y,f,!1)})).apply(this,arguments)}function Gi(y,f){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,c.Z)(function*(y,f,g=!1){const v=at(y),A=fs(v,f),z=yield new Vl(v,A,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,f)),z})).apply(this,arguments)}function mr(y){return ms.apply(this,arguments)}function ms(){return(ms=(0,c.Z)(function*(y){const f=Ko(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Bl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function vd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jl(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!jl(f)){const A=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(Ee(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_d(f))}saveEventToCache(f){this.cachedEventUids.add(_d(f)),this.lastProcessedEventTime=Date.now()}}function _d(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function jl({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Bh(y){return jh.apply(this,arguments)}function jh(){return(jh=(0,c.Z)(function*(y,f={}){return Pt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const wd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Au=/^https?/;function $h(){return($h=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Bh(y);for(const g of f)try{if(N0(g))return}catch(v){}xe(y,"unauthorized-domain")})).apply(this,arguments)}function N0(y){const f=Pe(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===v}if(!Au.test(g))return!1;if(wd.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const ig=new Yt(3e4,6e4);function Hh(){const y=En().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Su=null;function Io(y){return Su=Su||function sg(y){return new Promise((f,g)=>{var v,A,k;function z(){Hh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Hh(),g(Ee(y,"network-request-failed"))},timeout:ig.get()})}if(null===(A=null===(v=En().gapi)||void 0===v?void 0:v.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(k=En().gapi)||void 0===k?void 0:k.load)){const he=ds("iframefcb");return En()[he]=()=>{gapi.load?z():g(Ee(y,"network-request-failed"))},Co(`https://apis.google.com/js/api.js?onload=${he}`).catch(Le=>g(Le))}z()}}).catch(f=>{throw Su=null,f})}(y),Su}const xu=new Yt(5e3,15e3),Mu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Do=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function og(y){const f=y.config;B(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?yn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},A=Do.get(y.config.apiHost);A&&(v.eid=A);const k=y._getFrameworks();return k.length&&(v.fw=k.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function To(){return To=(0,c.Z)(function*(y){const f=yield Io(y),g=En().gapi;return B(g,y,"internal-error"),f.open({where:document.body,url:og(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mu,dontclear:!0},v=>new Promise(function(){var A=(0,c.Z)(function*(k,z){yield v.restyle({setHideOnLeave:!1});const he=Ee(y,"network-request-failed"),Le=En().setTimeout(()=>{z(he)},xu.get());function Ye(){En().clearTimeout(Le),k(v)}v.ping(Ye).then(Ye,()=>{z(he)})});return function(k,z){return A.apply(this,arguments)}}()))}),To.apply(this,arguments)}const bd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ag{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function bi(y,f,g,v,A,k){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:se.SDK_VERSION,eventId:A};if(f instanceof Xn){f.setDefaultLanguage(y.languageCode),z.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Ye]of Object.entries(k||{}))z[Le]=Ye}if(f instanceof uo){const Le=f.getScopes().filter(Ye=>""!==Ye);Le.length>0&&(z.scopes=Le.join(","))}y.tenantId&&(z.tid=y.tenantId);const he=z;for(const Le of Object.keys(he))void 0===he[Le]&&delete he[Le];return`${function Ao({config:y}){return y.emulator?yn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(he).slice(1)}`}const ql="webStorageSupport";class Td extends class P0{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Td(f)}_finalizeEnroll(f,g,v){return function Xp(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Fl(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ht(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let F0=(()=>{class y{constructor(){}static assertion(g){return Td._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var qh="@firebase/auth";class cg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var A;f((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ua(){return window}function qi(){return(qi=(0,c.Z)(function*(y,f,g){var v;const{BuildInfo:A}=Ua();W(f.sessionId,"AuthEvent did not contain a session ID");const k=yield L0(f.sessionId),z={};return Lr()?z.ibi=A.packageName:Tr()?z.apn=A.packageName:xe(y,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=k,bi(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function Sd(){return(Sd=(0,c.Z)(function*(y){const{BuildInfo:f}=Ua(),g={};Lr()?g.iosBundleId=f.packageName:Tr()?g.androidPackageName=f.packageName:xe(y,"operation-not-supported-in-this-environment"),yield Bh(y,g)})).apply(this,arguments)}function dg(){return(dg=(0,c.Z)(function*(y,f,g){const{cordova:v}=Ua();let A=()=>{};try{yield new Promise((k,z)=>{let he=null;function Le(){var ct;k();const Cn=null===(ct=v.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof Cn&&Cn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ye(){he||(he=window.setTimeout(()=>{z(Ee(y,"redirect-cancelled-by-user"))},2e3))}function ft(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}f.addPassiveListener(Le),document.addEventListener("resume",Ye,!1),Tr()&&document.addEventListener("visibilitychange",ft,!1),A=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ft,!1),he&&window.clearTimeout(he)}})}finally{A()}})).apply(this,arguments)}function L0(y){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,c.Z)(function*(y){const f=zh(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function zh(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function Ny(y){(0,se._registerComponent)(new ue.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:k,authDomain:z}=v.options;return((he,Le)=>{B(k&&!k.includes(":"),"invalid-api-key",{appName:he.name}),B(!(null==z?void 0:z.includes(":")),"argument-error",{appName:he.name});const Ye={apiKey:k,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uo(y)},ft=new He(he,Le,Ye);return function ae(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(ft,g),ft})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ue.wA("auth-internal",f=>{const g=at(f.getProvider("auth").getImmediate());return new cg(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(qh,"0.20.2",function Ad(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(qh,"0.20.2","esm2017")}("Browser");class Md extends Bl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function ku(y){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,c.Z)(function*(y){const f=yield Yl()._get(Nu(y));return f&&(yield Yl()._remove(Nu(y))),f})).apply(this,arguments)}function fg(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function Yl(){return te(xr)}function Nu(y){return On("authEvent",y.config.apiKey,y.name)}function Gr(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Va(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function sa(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function yg(y=(0,O.z$)()){return!("file:"!==sa()&&"ionic:"!==sa()&&"capacitor:"!==sa()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yh(){try{const y=self.localStorage,f=Ko();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Nd(y=(0,O.z$)()){return function Ou(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Wn(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Od()&&(0,O.hl)()}return!1}function Od(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ir(){return(function mg(){return"http:"===sa()||"https:"===sa()}()||(0,O.ru)()||yg())&&!function Kh(){return(0,O.b$)()||(0,O.UG)()}()&&Yh()&&!Od()}function Pu(){return yg()&&"undefined"!=typeof document}function Jl(){return(Jl=(0,c.Z)(function*(){return!!Pu()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},oa=B,Jh="persistence";function Ba(y){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,c.Z)(function*(y){yield y._initializationPromise;const f=Pd(),g=On(Jh,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Pd(){var y;try{return(null===(y=function By(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const $y=B;class Zi{constructor(){this.browserResolver=te(class ky{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wn,this._completeRedirectFn=Gi,this._overrideRedirectResult=D}_openPopup(f,g,v,A){var k=this;return(0,c.Z)(function*(){var z;W(null===(z=k.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const he=bi(f,g,v,Pe(),A);return function Gl(y,f,g,v=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let he="";const Le=Object.assign(Object.assign({},bd),{width:v.toString(),height:A.toString(),top:k,left:z}),Ye=(0,O.z$)().toLowerCase();g&&(he=va(Ye)?"_blank":g),_a(Ye)&&(f=f||"http://localhost",Le.scrollbars="yes");const ft=Object.entries(Le).reduce((Cn,[ui,Fu])=>`${Cn}${ui}=${Fu},`,"");if(function oo(y=(0,O.z$)()){var f;return Lr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ye)&&"_self"!==he)return function xy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",he),new ag(null);const ct=window.open(f||"",he,ft);B(ct,y,"popup-blocked");try{ct.focus()}catch(Cn){}return new ag(ct)}(f,he,Ko())})()}_openRedirect(f,g,v,A){var k=this;return(0,c.Z)(function*(){return yield k._originValidation(f),function Ls(y){En().location.href=y}(bi(f,g,v,Pe(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:k}=this.eventManagers[g];return A?Promise.resolve(A):(W(k,"If manager is not set, promise should be"),k)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const v=yield function O0(y){return To.apply(this,arguments)}(f),A=new Bl(f);return v.register("authEvent",k=>(B(null==k?void 0:k.authEvent,f,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=v,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(ql,{type:ql},A=>{var k;const z=null===(k=null==A?void 0:A[0])||void 0===k?void 0:k[ql];void 0!==z&&g(!!z),xe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function $l(y){return $h.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ss()||ou()||Lr()}}),this.cordovaResolver=te(class pg{constructor(){this._redirectPersistence=wn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gi,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,c.Z)(function*(){const v=f._key();let A=g.eventManagers.get(v);return A||(A=new Md(f),g.eventManagers.set(v,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){xe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,A){var k=this;return(0,c.Z)(function*(){!function Ru(y){var f,g,v,A,k,z,he,Le,Ye,ft;const ct=Ua();B("function"==typeof(null===(f=null==ct?void 0:ct.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(g=null==ct?void 0:ct.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(k=null===(A=null===(v=null==ct?void 0:ct.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===k?void 0:k.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(Le=null===(he=null===(z=null==ct?void 0:ct.cordova)||void 0===z?void 0:z.plugins)||void 0===he?void 0:he.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(ft=null===(Ye=null==ct?void 0:ct.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ft?void 0:ft.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield k._initialize(f);yield z.initialized(),z.resetRedirect(),function C(){rr.clear()}(),yield k._originValidation(f);const he=function Rd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:fg(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(f,v,A);yield function hg(y,f){return Yl()._set(Nu(y),f)}(f,he);const Le=yield function Zh(y,f,g){return qi.apply(this,arguments)}(f,he,g),Ye=yield function xd(y){const{cordova:f}=Ua();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let A=null;v?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function $c(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Le);return function So(y,f,g){return dg.apply(this,arguments)}(f,z,Ye)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function zl(y){return Sd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:A,BuildInfo:k}=Ua(),z=setTimeout((0,c.Z)(function*(){yield ku(f),g.onEvent(Va())}),500),he=function(){var ft=(0,c.Z)(function*(ct){clearTimeout(z);const Cn=yield ku(f);let ui=null;Cn&&(null==ct?void 0:ct.url)&&(ui=function Py(y,f){var g,v;const A=function Ql(y){const f=Gr(y),g=f.link?decodeURIComponent(f.link):void 0,v=Gr(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Gr(A).link||A||v||g||y}(f);if(A.includes("/__/auth/callback")){const k=Gr(A),z=k.firebaseError?function Fy(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(k.firebaseError)):null,he=null===(v=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Le=he?Ee(he):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Cn,ct.url)),g.onEvent(ui||Va())});return function(Cn){return ft.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,he);const Le=A,Ye=`${k.packageName.toLowerCase()}://`;Ua().handleOpenURL=function(){var ft=(0,c.Z)(function*(ct){if(ct.toLowerCase().startsWith(Ye)&&he({url:ct}),"function"==typeof Le)try{Le(ct)}catch(Cn){console.error(Cn)}});return function(ct){return ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=wn,this._completeRedirectFn=Gi,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,A){var k=this;return(0,c.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(f,g,v,A)})()}_openRedirect(f,g,v,A){var k=this;return(0,c.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(f,g,v,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Pu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $y(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Qh(){return Jl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Fd(y){return y.unwrap()}function Gy(y){return _g(y)}function _g(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Hs.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=Jc;break;case"facebook.com":v=Bo;break;case"github.com":v=Oh;break;case"twitter.com":v=Xc;break;default:const{oauthIdToken:A,oauthAccessToken:k,oauthTokenSecret:z,pendingToken:he,nonce:Le}=f;return k||z||A||he?he?g.startsWith("saml.")?lo._create(g,he):ss._fromParams({providerId:g,signInMethod:g,pendingToken:he,idToken:A,accessToken:k}):new Fi(g).credential({idToken:A,accessToken:k,rawNonce:Le}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ai(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function Ld(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new qy(y,function Un(y,f){var g;const v=(0,O.m9)(y),A=f;return B(f.customData.operationType,v,"argument-error"),B(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),mo._fromError(v,A)}(y,f));else if(v){const A=_g(f),k=f;A&&(k.credential=A,k.tenantId=v.tenantId||void 0,k.email=v.email||void 0,k.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Gy(g),additionalUserInfo:qn(g),user:ys.getOrCreate(A)}})}function ef(y,f){return tf.apply(this,arguments)}function tf(){return(tf=(0,c.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>ai(y,g.confirm(v))}})).apply(this,arguments)}class qy{constructor(f,g){this.resolver=g,this.auth=function Hy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ai(Fd(this.auth),this.resolver.resolveSignIn(f))}}class ys{constructor(f){this._delegate=f,this.multiFactor=function eg(y){const f=(0,O.m9)(y);return bu.has(f)||bu.set(f,Wo._fromUser(f)),bu.get(f)}(f)}static getOrCreate(f){return ys.USER_MAP.has(f)||ys.USER_MAP.set(f,new ys(f)),ys.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return ai(g.auth,tr(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,c.Z)(function*(){return ef(v.auth,function Du(y,f,g){return pd.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return ai(g.auth,function md(y,f,g){return Hi.apply(this,arguments)}(g._delegate,f,Zi))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ba(at(g.auth)),function $t(y,f,g){return function At(y,f,g){return Sn.apply(this,arguments)}(y,f,g)}(g._delegate,f,Zi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return ai(g.auth,os(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return ef(this.auth,function Uh(y,f,g){return pr.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ai(this.auth,function wi(y,f,g){return Tu.apply(this,arguments)}(this._delegate,f,Zi))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ba(at(g.auth)),function ze(y,f,g){return function rt(y,f,g){return lt.apply(this,arguments)}(y,f,g)}(g._delegate,f,Zi)})()}sendEmailVerification(f){return function _i(y,f){return Ml.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function Ph(y,f){return tn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function nd(y,f){return wu((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function rd(y,f){return wu((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ea(y,f){return hs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function _u(y,f){return vu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function mu(y,f,g){return yu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ys.USER_MAP=new WeakMap;const ec=B;let vg=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;ec(A,"invalid-api-key",{appName:g.name}),ec(A,"invalid-api-key",{appName:g.name});const k="undefined"!=typeof window?Zi:void 0;this._delegate=v.initialize({options:{persistence:Zy(A,g.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(Ae),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ys.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Vr(y,f,g){const v=at(y);B(v._canInitEmulator,v,"emulator-config-failed"),B(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),k=Ri(f),{host:z,port:he}=function Dn(y){const f=Ri(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const k=A[1];return{host:k,port:ki(v.substr(k.length+1))}}{const[k,z]=v.split(":");return{host:k,port:ki(z)}}}(f);v.config.emulator={url:`${k}//${z}${null===he?"":`:${he}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:he,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function sn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function qo(y,f){return Te.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ft(this._delegate,g)}confirmPasswordReset(g,v){return function fu(y,f,g){return Tl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var A=this;return(0,c.Z)(function*(){return ai(A._delegate,function fo(y,f,g){return ni.apply(this,arguments)}(A._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function gu(y,f){return Ps.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function td(y,f){const g=cu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){ec(ir(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function zn(y,f){return gs.apply(this,arguments)}(g._delegate,Zi);return v?ai(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function gg(y,f){at(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,A){const{next:k,error:z,complete:he}=wg(g,v,A);return this._delegate.onAuthStateChanged(k,z,he)}onIdTokenChanged(g,v,A){const{next:k,error:z,complete:he}=wg(g,v,A);return this._delegate.onIdTokenChanged(k,z,he)}sendSignInLinkToEmail(g,v){return function Sl(y,f,g){return xl.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function Dl(y,f,g){return hu.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,c.Z)(function*(){let A;switch(function jy(y,f){oa(Object.values(qr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?oa(f!==qr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?oa(f===qr.NONE,y,"unsupported-persistence-type"):Od()?oa(f===qr.NONE||f===qr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):oa(f===qr.NONE||Yh(),y,"unsupported-persistence-type")}(v._delegate,g),g){case qr.SESSION:A=wn;break;case qr.LOCAL:A=(yield te(bo)._isAvailable())?bo:xr;break;case qr.NONE:A=It;break;default:return xe("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ai(this._delegate,function ed(y){return El.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ai(this._delegate,ln(this._delegate,g))}signInWithCustomToken(g){return ai(this._delegate,function Go(y,f){return _t.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return ai(this._delegate,function Al(y,f,g){return ln((0,O.m9)(y),Qc.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return ai(this._delegate,function Yp(y,f,g){return as.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return ef(this._delegate,function An(y,f,g){return Oa.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,c.Z)(function*(){return ec(ir(),v._delegate,"operation-not-supported-in-this-environment"),ai(v._delegate,function rg(y,f,g){return ps.apply(this,arguments)}(v._delegate,g,Zi))})()}signInWithRedirect(g){var v=this;return(0,c.Z)(function*(){return ec(ir(),v._delegate,"operation-not-supported-in-this-environment"),yield Ba(v._delegate),function Y(y,f,g){return function ne(y,f,g){return ge.apply(this,arguments)}(y,f,g)}(v._delegate,g,Zi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function un(y,f){return pu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=qr,y})();function wg(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const A=v;return{next:z=>A(z&&ys.getOrCreate(z)),error:f,complete:g}}function Zy(y,f){const g=function Xl(y,f){const g=Pd();if(!g)return[];const v=On(Jh,y,f);switch(g.getItem(v)){case qr.NONE:return[It];case qr.LOCAL:return[bo,wn];case qr.SESSION:return[wn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(bo)&&g.push(bo),"undefined"!=typeof window)for(const v of[xr,wn])g.includes(v)||g.push(v);return g.includes(It)||g.push(It),g}class nf{constructor(){this.providerId="phone",this._delegate=new Hs(Fd(J.Z.auth()))}static credential(f,g){return Hs.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}nf.PHONE_SIGN_IN_METHOD=Hs.PHONE_SIGN_IN_METHOD,nf.PROVIDER_ID=Hs.PROVIDER_ID;const Eg=B;class U0{constructor(f,g,v=J.Z.app()){var A;Eg(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new fd(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ja(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new vg(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qc,FacebookAuthProvider:Bo,GithubAuthProvider:Oh,GoogleAuthProvider:Jc,OAuthProvider:Fi,SAMLAuthProvider:Ar,PhoneAuthProvider:nf,PhoneMultiFactorGenerator:F0,RecaptchaVerifier:U0,TwitterAuthProvider:Xc,Auth:vg,AuthCredential:mi,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(J.Z)},9751:(Ze,ye,N)=>{N.d(ye,{y:()=>oe});var c=N(930),J=N(727),O=N(8822),se=N(9635),re=N(2416),de=N(576),ue=N(2806);let oe=(()=>{class K{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ae=new K;return Ae.source=this,Ae.operator=Re,Ae}subscribe(Re,Ae,Qe){const _e=function j(K){return K&&K instanceof c.Lv||function $(K){return K&&(0,de.m)(K.next)&&(0,de.m)(K.error)&&(0,de.m)(K.complete)}(K)&&(0,J.Nn)(K)}(Re)?Re:new c.Hp(Re,Ae,Qe);return(0,ue.x)(()=>{const{operator:be,source:We}=this;_e.add(be?be.call(_e,We):We?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ae){Re.error(Ae)}}forEach(Re,Ae){return new(Ae=le(Ae))((Qe,_e)=>{const be=new c.Hp({next:We=>{try{Re(We)}catch(tt){_e(tt),be.unsubscribe()}},error:_e,complete:Qe});this.subscribe(be)})}_subscribe(Re){var Ae;return null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(Re)}[O.L](){return this}pipe(...Re){return(0,se.U)(Re)(this)}toPromise(Re){return new(Re=le(Re))((Ae,Qe)=>{let _e;this.subscribe(be=>_e=be,be=>Qe(be),()=>Ae(_e))})}}return K.create=Be=>new K(Be),K})();function le(K){var Be;return null!==(Be=null!=K?K:re.v.Promise)&&void 0!==Be?Be:Promise}},7579:(Ze,ye,N)=>{N.d(ye,{x:()=>ue});var c=N(9751),J=N(727);const se=(0,N(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=N(8737),de=N(2806);let ue=(()=>{class le extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new oe(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Be,observers:Re}=this;return K||Be?J.Lc:(this.currentObservers=null,Re.push(j),new J.w0(()=>{this.currentObservers=null,(0,re.P)(Re,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Be,isStopped:Re}=this;K?j.error(Be):Re&&j.complete()}asObservable(){const j=new c.y;return j.source=this,j}}return le.create=($,j)=>new oe($,j),le})();class oe extends ue{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,$)}error($){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==K?K:J.Lc}}},930:(Ze,ye,N)=>{N.d(ye,{Hp:()=>Qe,Lv:()=>K});var c=N(576),J=N(727),O=N(2416),se=N(7849),re=N(5032);const de=le("C",void 0,void 0);function le(xe,Ee,Ce){return{kind:xe,value:Ee,error:Ce}}var $=N(3410),j=N(2806);class K extends J.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,J.Nn)(Ee)&&Ee.add(this)):this.destination=tt}static create(Ee,Ce,Ve){return new Qe(Ee,Ce,Ve)}next(Ee){this.isStopped?We(function oe(xe){return le("N",xe,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?We(function ue(xe){return le("E",void 0,xe)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?We(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Re(xe,Ee){return Be.call(xe,Ee)}class Ae{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Ee)}catch(Ve){_e(Ve)}}error(Ee){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Ee)}catch(Ve){_e(Ve)}else _e(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ce){_e(Ce)}}}class Qe extends K{constructor(Ee,Ce,Ve){let Ue;if(super(),(0,c.m)(Ee)||!Ee)Ue={next:null!=Ee?Ee:void 0,error:null!=Ce?Ce:void 0,complete:null!=Ve?Ve:void 0};else{let B;this&&O.v.useDeprecatedNextContext?(B=Object.create(Ee),B.unsubscribe=()=>this.unsubscribe(),Ue={next:Ee.next&&Re(Ee.next,B),error:Ee.error&&Re(Ee.error,B),complete:Ee.complete&&Re(Ee.complete,B)}):Ue=Ee}this.destination=new Ae(Ue)}}function _e(xe){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(xe):(0,se.h)(xe)}function We(xe,Ee){const{onStoppedNotification:Ce}=O.v;Ce&&$.z.setTimeout(()=>Ce(xe,Ee))}const tt={closed:!0,next:re.Z,error:function be(xe){throw xe},complete:re.Z}},727:(Ze,ye,N)=>{N.d(ye,{Lc:()=>de,w0:()=>re,Nn:()=>ue});var c=N(576);const O=(0,N(3888).d)(le=>function(j){le(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Be)=>`${Be+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=N(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Re of j)Re.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,c.m)(K))try{K()}catch(Re){$=Re instanceof O?Re.errors:[Re]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Re of Be)try{oe(Re)}catch(Ae){$=null!=$?$:[],Ae instanceof O?$=[...$,...Ae.errors]:$.push(Ae)}}if($)throw new O($)}}add($){var j;if($&&$!==this)if(this.closed)oe($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,se.P)(j,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const le=new re;return le.closed=!0,le})();const de=re.EMPTY;function ue(le){return le instanceof re||le&&"closed"in le&&(0,c.m)(le.remove)&&(0,c.m)(le.add)&&(0,c.m)(le.unsubscribe)}function oe(le){(0,c.m)(le)?le():le.unsubscribe()}},2416:(Ze,ye,N)=>{N.d(ye,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ze,ye,N)=>{N.d(ye,{E:()=>J});const J=new(N(9751).y)(re=>re.complete())},8996:(Ze,ye,N)=>{N.d(ye,{D:()=>Ee});var c=N(8421),J=N(5363),O=N(9468),de=N(9751),oe=N(2202),le=N(576),$=N(9672);function K(Ce,Ve){if(!Ce)throw new Error("Iterable cannot be null");return new de.y(Ue=>{(0,$.f)(Ue,Ve,()=>{const B=Ce[Symbol.asyncIterator]();(0,$.f)(Ue,Ve,()=>{B.next().then(we=>{we.done?Ue.complete():Ue.next(we.value)})},0,!0)})})}var Be=N(3670),Re=N(8239),Ae=N(1144),Qe=N(6495),_e=N(2206),be=N(4532),We=N(3260);function Ee(Ce,Ve){return Ve?function xe(Ce,Ve){if(null!=Ce){if((0,Be.c)(Ce))return function se(Ce,Ve){return(0,c.Xf)(Ce).pipe((0,O.R)(Ve),(0,J.Q)(Ve))}(Ce,Ve);if((0,Ae.z)(Ce))return function ue(Ce,Ve){return new de.y(Ue=>{let B=0;return Ve.schedule(function(){B===Ce.length?Ue.complete():(Ue.next(Ce[B++]),Ue.closed||this.schedule())})})}(Ce,Ve);if((0,Re.t)(Ce))return function re(Ce,Ve){return(0,c.Xf)(Ce).pipe((0,O.R)(Ve),(0,J.Q)(Ve))}(Ce,Ve);if((0,_e.D)(Ce))return K(Ce,Ve);if((0,Qe.T)(Ce))return function j(Ce,Ve){return new de.y(Ue=>{let B;return(0,$.f)(Ue,Ve,()=>{B=Ce[oe.h](),(0,$.f)(Ue,Ve,()=>{let we,W;try{({value:we,done:W}=B.next())}catch(ie){return void Ue.error(ie)}W?Ue.complete():Ue.next(we)},0,!0)}),()=>(0,le.m)(null==B?void 0:B.return)&&B.return()})}(Ce,Ve);if((0,We.L)(Ce))return function tt(Ce,Ve){return K((0,We.Q)(Ce),Ve)}(Ce,Ve)}throw(0,be.z)(Ce)}(Ce,Ve):(0,c.Xf)(Ce)}},8421:(Ze,ye,N)=>{N.d(ye,{Xf:()=>Be});var c=N(655),J=N(1144),O=N(8239),se=N(9751),re=N(3670),de=N(2206),ue=N(4532),oe=N(6495),le=N(3260),$=N(576),j=N(7849),K=N(8822);function Be(xe){if(xe instanceof se.y)return xe;if(null!=xe){if((0,re.c)(xe))return function Re(xe){return new se.y(Ee=>{const Ce=xe[K.L]();if((0,$.m)(Ce.subscribe))return Ce.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,J.z)(xe))return function Ae(xe){return new se.y(Ee=>{for(let Ce=0;Ce<xe.length&&!Ee.closed;Ce++)Ee.next(xe[Ce]);Ee.complete()})}(xe);if((0,O.t)(xe))return function Qe(xe){return new se.y(Ee=>{xe.then(Ce=>{Ee.closed||(Ee.next(Ce),Ee.complete())},Ce=>Ee.error(Ce)).then(null,j.h)})}(xe);if((0,de.D)(xe))return be(xe);if((0,oe.T)(xe))return function _e(xe){return new se.y(Ee=>{for(const Ce of xe)if(Ee.next(Ce),Ee.closed)return;Ee.complete()})}(xe);if((0,le.L)(xe))return function We(xe){return be((0,le.Q)(xe))}(xe)}throw(0,ue.z)(xe)}function be(xe){return new se.y(Ee=>{(function tt(xe,Ee){var Ce,Ve,Ue,B;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,c.KL)(xe);!(Ve=yield Ce.next()).done;)if(Ee.next(Ve.value),Ee.closed)return}catch(we){Ue={error:we}}finally{try{Ve&&!Ve.done&&(B=Ce.return)&&(yield B.call(Ce))}finally{if(Ue)throw Ue.error}}Ee.complete()})})(xe,Ee).catch(Ce=>Ee.error(Ce))})}},6451:(Ze,ye,N)=>{N.d(ye,{T:()=>de});var c=N(8189),J=N(8421),O=N(515),se=N(3269),re=N(8996);function de(...ue){const oe=(0,se.yG)(ue),le=(0,se._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,J.Xf)($[0]):(0,c.J)(le)((0,re.D)($,oe)):O.E}},5403:(Ze,ye,N)=>{N.d(ye,{x:()=>J});var c=N(930);function J(se,re,de,ue,oe){return new O(se,re,de,ue,oe)}class O extends c.Lv{constructor(re,de,ue,oe,le,$){super(re),this.onFinalize=le,this.shouldUnsubscribe=$,this._next=de?function(j){try{de(j)}catch(K){re.error(K)}}:super._next,this._error=oe?function(j){try{oe(j)}catch(K){re.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Ze,ye,N)=>{N.d(ye,{U:()=>O});var c=N(4482),J=N(5403);function O(se,re){return(0,c.e)((de,ue)=>{let oe=0;de.subscribe((0,J.x)(ue,le=>{ue.next(se.call(re,le,oe++))}))})}},8189:(Ze,ye,N)=>{N.d(ye,{J:()=>O});var c=N(5577),J=N(4671);function O(se=1/0){return(0,c.z)(J.y,se)}},5577:(Ze,ye,N)=>{N.d(ye,{z:()=>oe});var c=N(4004),J=N(8421),O=N(4482),se=N(9672),re=N(5403),ue=N(576);function oe(le,$,j=1/0){return(0,ue.m)($)?oe((K,Be)=>(0,c.U)((Re,Ae)=>$(K,Re,Be,Ae))((0,J.Xf)(le(K,Be))),j):("number"==typeof $&&(j=$),(0,O.e)((K,Be)=>function de(le,$,j,K,Be,Re,Ae,Qe){const _e=[];let be=0,We=0,tt=!1;const xe=()=>{tt&&!_e.length&&!be&&$.complete()},Ee=Ve=>be<K?Ce(Ve):_e.push(Ve),Ce=Ve=>{Re&&$.next(Ve),be++;let Ue=!1;(0,J.Xf)(j(Ve,We++)).subscribe((0,re.x)($,B=>{null==Be||Be(B),Re?Ee(B):$.next(B)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(be--;_e.length&&be<K;){const B=_e.shift();Ae?(0,se.f)($,Ae,()=>Ce(B)):Ce(B)}xe()}catch(B){$.error(B)}}))};return le.subscribe((0,re.x)($,Ee,()=>{tt=!0,xe()})),()=>{null==Qe||Qe()}}(K,Be,le,j)))}},5363:(Ze,ye,N)=>{N.d(ye,{Q:()=>se});var c=N(9672),J=N(4482),O=N(5403);function se(re,de=0){return(0,J.e)((ue,oe)=>{ue.subscribe((0,O.x)(oe,le=>(0,c.f)(oe,re,()=>oe.next(le),de),()=>(0,c.f)(oe,re,()=>oe.complete(),de),le=>(0,c.f)(oe,re,()=>oe.error(le),de)))})}},3099:(Ze,ye,N)=>{N.d(ye,{B:()=>de});var c=N(8996),J=N(5698),O=N(7579),se=N(930),re=N(4482);function de(oe={}){const{connector:le=(()=>new O.x),resetOnError:$=!0,resetOnComplete:j=!0,resetOnRefCountZero:K=!0}=oe;return Be=>{let Re=null,Ae=null,Qe=null,_e=0,be=!1,We=!1;const tt=()=>{null==Ae||Ae.unsubscribe(),Ae=null},xe=()=>{tt(),Re=Qe=null,be=We=!1},Ee=()=>{const Ce=Re;xe(),null==Ce||Ce.unsubscribe()};return(0,re.e)((Ce,Ve)=>{_e++,!We&&!be&&tt();const Ue=Qe=null!=Qe?Qe:le();Ve.add(()=>{_e--,0===_e&&!We&&!be&&(Ae=ue(Ee,K))}),Ue.subscribe(Ve),Re||(Re=new se.Hp({next:B=>Ue.next(B),error:B=>{We=!0,tt(),Ae=ue(xe,$,B),Ue.error(B)},complete:()=>{be=!0,tt(),Ae=ue(xe,j),Ue.complete()}}),(0,c.D)(Ce).subscribe(Re))})(Be)}}function ue(oe,le,...$){return!0===le?(oe(),null):!1===le?null:le(...$).pipe((0,J.q)(1)).subscribe(()=>oe())}},9468:(Ze,ye,N)=>{N.d(ye,{R:()=>J});var c=N(4482);function J(O,se=0){return(0,c.e)((re,de)=>{de.add(O.schedule(()=>re.subscribe(de),se))})}},5698:(Ze,ye,N)=>{N.d(ye,{q:()=>se});var c=N(515),J=N(4482),O=N(5403);function se(re){return re<=0?()=>c.E:(0,J.e)((de,ue)=>{let oe=0;de.subscribe((0,O.x)(ue,le=>{++oe<=re&&(ue.next(le),re<=oe&&ue.complete())}))})}},8505:(Ze,ye,N)=>{N.d(ye,{b:()=>re});var c=N(576),J=N(4482),O=N(5403),se=N(4671);function re(de,ue,oe){const le=(0,c.m)(de)||ue||oe?{next:de,error:ue,complete:oe}:de;return le?(0,J.e)(($,j)=>{var K;null===(K=le.subscribe)||void 0===K||K.call(le);let Be=!0;$.subscribe((0,O.x)(j,Re=>{var Ae;null===(Ae=le.next)||void 0===Ae||Ae.call(le,Re),j.next(Re)},()=>{var Re;Be=!1,null===(Re=le.complete)||void 0===Re||Re.call(le),j.complete()},Re=>{var Ae;Be=!1,null===(Ae=le.error)||void 0===Ae||Ae.call(le,Re),j.error(Re)},()=>{var Re,Ae;Be&&(null===(Re=le.unsubscribe)||void 0===Re||Re.call(le)),null===(Ae=le.finalize)||void 0===Ae||Ae.call(le)}))}):se.y}},4408:(Ze,ye,N)=>{N.d(ye,{o:()=>re});var c=N(727);class J extends c.w0{constructor(ue,oe){super()}schedule(ue,oe=0){return this}}const O={setInterval(de,ue,...oe){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(de,ue,...oe):setInterval(de,ue,...oe)},clearInterval(de){const{delegate:ue}=O;return((null==ue?void 0:ue.clearInterval)||clearInterval)(de)},delegate:void 0};var se=N(8737);class re extends J{constructor(ue,oe){super(ue,oe),this.scheduler=ue,this.work=oe,this.pending=!1}schedule(ue,oe=0){if(this.closed)return this;this.state=ue;const le=this.id,$=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId($,le,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId($,this.id,oe),this}requestAsyncId(ue,oe,le=0){return O.setInterval(ue.flush.bind(ue,this),le)}recycleAsyncId(ue,oe,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return oe;O.clearInterval(oe)}execute(ue,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ue,oe);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,oe){let $,le=!1;try{this.work(ue)}catch(j){le=!0,$=j||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:oe}=this,{actions:le}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(le,this),null!=ue&&(this.id=this.recycleAsyncId(oe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ze,ye,N)=>{N.d(ye,{v:()=>O});var c=N(6063);class J{constructor(re,de=J.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,de)}}J.now=c.l.now;class O extends J{constructor(re,de=J.now){super(re,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,ue){for(;re=de.shift();)re.unsubscribe();throw ue}}}},4986:(Ze,ye,N)=>{N.d(ye,{P:()=>se,z:()=>O});var c=N(4408);const O=new(N(7565).v)(c.o),se=O},6063:(Ze,ye,N)=>{N.d(ye,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Ze,ye,N)=>{N.d(ye,{z:()=>c});const c={setTimeout(J,O,...se){const{delegate:re}=c;return(null==re?void 0:re.setTimeout)?re.setTimeout(J,O,...se):setTimeout(J,O,...se)},clearTimeout(J){const{delegate:O}=c;return((null==O?void 0:O.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(Ze,ye,N)=>{N.d(ye,{h:()=>J});const J=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ze,ye,N)=>{N.d(ye,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ze,ye,N)=>{N.d(ye,{_6:()=>de,jO:()=>se,yG:()=>re});var c=N(576),J=N(3532);function O(ue){return ue[ue.length-1]}function se(ue){return(0,c.m)(O(ue))?ue.pop():void 0}function re(ue){return(0,J.K)(O(ue))?ue.pop():void 0}function de(ue,oe){return"number"==typeof O(ue)?ue.pop():oe}},8737:(Ze,ye,N)=>{function c(J,O){if(J){const se=J.indexOf(O);0<=se&&J.splice(se,1)}}N.d(ye,{P:()=>c})},3888:(Ze,ye,N)=>{function c(J){const se=J(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}N.d(ye,{d:()=>c})},2806:(Ze,ye,N)=>{N.d(ye,{O:()=>se,x:()=>O});var c=N(2416);let J=null;function O(re){if(c.v.useDeprecatedSynchronousErrorHandling){const de=!J;if(de&&(J={errorThrown:!1,error:null}),re(),de){const{errorThrown:ue,error:oe}=J;if(J=null,ue)throw oe}}else re()}function se(re){c.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},9672:(Ze,ye,N)=>{function c(J,O,se,re=0,de=!1){const ue=O.schedule(function(){se(),de?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(ue),!de)return ue}N.d(ye,{f:()=>c})},4671:(Ze,ye,N)=>{function c(J){return J}N.d(ye,{y:()=>c})},1144:(Ze,ye,N)=>{N.d(ye,{z:()=>c});const c=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Ze,ye,N)=>{N.d(ye,{D:()=>J});var c=N(576);function J(O){return Symbol.asyncIterator&&(0,c.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(Ze,ye,N)=>{function c(J){return"function"==typeof J}N.d(ye,{m:()=>c})},3670:(Ze,ye,N)=>{N.d(ye,{c:()=>O});var c=N(8822),J=N(576);function O(se){return(0,J.m)(se[c.L])}},6495:(Ze,ye,N)=>{N.d(ye,{T:()=>O});var c=N(2202),J=N(576);function O(se){return(0,J.m)(null==se?void 0:se[c.h])}},8239:(Ze,ye,N)=>{N.d(ye,{t:()=>J});var c=N(576);function J(O){return(0,c.m)(null==O?void 0:O.then)}},3260:(Ze,ye,N)=>{N.d(ye,{L:()=>se,Q:()=>O});var c=N(655),J=N(576);function O(re){return(0,c.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:oe,done:le}=yield(0,c.qq)(ue.read());if(le)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(oe)}}finally{ue.releaseLock()}})}function se(re){return(0,J.m)(null==re?void 0:re.getReader)}},3532:(Ze,ye,N)=>{N.d(ye,{K:()=>J});var c=N(576);function J(O){return O&&(0,c.m)(O.schedule)}},4482:(Ze,ye,N)=>{N.d(ye,{A:()=>J,e:()=>O});var c=N(576);function J(se){return(0,c.m)(null==se?void 0:se.lift)}function O(se){return re=>{if(J(re))return re.lift(function(de){try{return se(de,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ze,ye,N)=>{function c(){}N.d(ye,{Z:()=>c})},9635:(Ze,ye,N)=>{N.d(ye,{U:()=>O,z:()=>J});var c=N(4671);function J(...se){return O(se)}function O(se){return 0===se.length?c.y:1===se.length?se[0]:function(de){return se.reduce((ue,oe)=>oe(ue),de)}}},7849:(Ze,ye,N)=>{N.d(ye,{h:()=>O});var c=N(2416),J=N(3410);function O(se){J.z.setTimeout(()=>{const{onUnhandledError:re}=c.v;if(!re)throw se;re(se)})}},4532:(Ze,ye,N)=>{function c(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(ye,{z:()=>c})},655:(Ze,ye,N)=>{function se(W,ie){var te={};for(var me in W)Object.prototype.hasOwnProperty.call(W,me)&&ie.indexOf(me)<0&&(te[me]=W[me]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(me=Object.getOwnPropertySymbols(W);ae<me.length;ae++)ie.indexOf(me[ae])<0&&Object.prototype.propertyIsEnumerable.call(W,me[ae])&&(te[me[ae]]=W[me[ae]])}return te}function oe(W,ie,te,me){return new(te||(te=Promise))(function(Pe,ut){function Bt(Yt){try{Ge(me.next(Yt))}catch(yn){ut(yn)}}function Lt(Yt){try{Ge(me.throw(Yt))}catch(yn){ut(yn)}}function Ge(Yt){Yt.done?Pe(Yt.value):function ae(Pe){return Pe instanceof te?Pe:new te(function(ut){ut(Pe)})}(Yt.value).then(Bt,Lt)}Ge((me=me.apply(W,ie||[])).next())})}function _e(W){return this instanceof _e?(this.v=W,this):new _e(W)}function be(W,ie,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,me=te.apply(W,ie||[]),Pe=[];return ae={},ut("next"),ut("throw"),ut("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ut(Xt){me[Xt]&&(ae[Xt]=function(Zt){return new Promise(function(Cr,Ht){Pe.push([Xt,Zt,Cr,Ht])>1||Bt(Xt,Zt)})})}function Bt(Xt,Zt){try{!function Lt(Xt){Xt.value instanceof _e?Promise.resolve(Xt.value.v).then(Ge,Yt):yn(Pe[0][2],Xt)}(me[Xt](Zt))}catch(Cr){yn(Pe[0][3],Cr)}}function Ge(Xt){Bt("next",Xt)}function Yt(Xt){Bt("throw",Xt)}function yn(Xt,Zt){Xt(Zt),Pe.shift(),Pe.length&&Bt(Pe[0][0],Pe[0][1])}}function tt(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,ie=W[Symbol.asyncIterator];return ie?ie.call(W):(W=function K(W){var ie="function"==typeof Symbol&&Symbol.iterator,te=ie&&W[ie],me=0;if(te)return te.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&me>=W.length&&(W=void 0),{value:W&&W[me++],done:!W}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),te={},me("next"),me("throw"),me("return"),te[Symbol.asyncIterator]=function(){return this},te);function me(Pe){te[Pe]=W[Pe]&&function(ut){return new Promise(function(Bt,Lt){!function ae(Pe,ut,Bt,Lt){Promise.resolve(Lt).then(function(Ge){Pe({value:Ge,done:Bt})},ut)}(Bt,Lt,(ut=W[Pe](ut)).done,ut.value)})}}}N.d(ye,{FC:()=>be,KL:()=>tt,_T:()=>se,mG:()=>oe,qq:()=>_e})},5e3:(Ze,ye,N)=>{N.d(ye,{$8M:()=>Co,$Z:()=>cm,AFp:()=>wh,ALo:()=>Av,AaK:()=>oe,AsE:()=>qf,BQk:()=>Wu,CHM:()=>Zo,CRH:()=>Sb,CZH:()=>al,CqO:()=>mc,DdM:()=>ub,EJc:()=>PD,EpF:()=>hm,F$t:()=>Vf,F4k:()=>fm,FYo:()=>Ac,FiY:()=>mr,G48:()=>rC,GfV:()=>Pm,Gpc:()=>j,Hsn:()=>Z_,JOm:()=>k,LFG:()=>rt,LSH:()=>Va,Lbi:()=>ND,MAs:()=>Uw,NdJ:()=>Lf,O4$:()=>od,OlP:()=>fn,Oqu:()=>_c,PXZ:()=>ll,Q6J:()=>Kd,QGY:()=>q_,Qsj:()=>Xs,R0b:()=>Es,RDi:()=>bl,Rgc:()=>eu,SBq:()=>Tc,Sil:()=>Ep,Suo:()=>qm,TTD:()=>Fi,TgZ:()=>Pf,VKq:()=>Vm,VLi:()=>Qb,W1O:()=>Mb,WLB:()=>lb,X6Q:()=>jD,XFs:()=>yt,Xpm:()=>pt,Y36:()=>Nf,YKP:()=>Iv,YNc:()=>P_,Yjl:()=>va,Yz7:()=>Zt,ZZ4:()=>sy,_Bn:()=>eb,_UZ:()=>G_,_Vd:()=>np,_c5:()=>u0,_uU:()=>ym,aQg:()=>Ih,c2e:()=>Zv,cJS:()=>Ht,cg1:()=>jn,dDg:()=>Yv,deG:()=>Lh,dqk:()=>Ut,eFA:()=>Ym,ekj:()=>X_,g9A:()=>Gv,h0i:()=>eo,hGG:()=>mC,hij:()=>Gf,iGM:()=>Ab,ifc:()=>jt,ip1:()=>ol,kL8:()=>Cm,kcU:()=>Qp,lG2:()=>ou,lcZ:()=>mb,n5z:()=>cn,n_E:()=>il,oAB:()=>Dr,oxw:()=>Uf,q4F:()=>Fm,qLn:()=>Ld,qOj:()=>Qg,qZA:()=>Ff,sBO:()=>Xm,sIi:()=>If,s_b:()=>Hm,soG:()=>tu,tBr:()=>Ei,tb:()=>qv,tp0:()=>qs,uIk:()=>Af,vHH:()=>Ae,vpe:()=>fa,wAp:()=>bt,xp6:()=>Xy,ynx:()=>gc,z2F:()=>e0,zSh:()=>qg,zs3:()=>la});var c=N(7579),J=N(727),O=N(9751),se=N(6451),re=N(3099);function de(i){for(let o in i)if(i[o]===de)return o;throw Error("Could not find renamed property on target object.")}function ue(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function oe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(oe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function le(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const $=de({__forward_ref__:de});function j(i){return i.__forward_ref__=j,i.toString=function(){return oe(this())},i}function K(i){return Be(i)?i():i}function Be(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===j}class Ae extends Error{constructor(o,a){super(function Qe(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function _e(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():_e(i)}function Ee(i,o){const a=o?` in ${o}`:"";throw new Ae(-201,`No provider for ${be(i)} found${a}`)}function Lt(i,o){null==i&&function Ge(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ht(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pt(i){return rs(i,Mi)||rs(i,Qr)}function rs(i,o){return i.hasOwnProperty(o)?i[o]:null}function Ir(i){return i&&(i.hasOwnProperty(As)||i.hasOwnProperty(pi))?i[As]:null}const Mi=de({\u0275prov:de}),As=de({\u0275inj:de}),Qr=de({ngInjectableDef:de}),pi=de({ngInjectorDef:de});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let Jr;function _n(i){const o=Jr;return Jr=i,o}function io(i,o,a){const l=Pt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&yt.Optional?null:void 0!==o?o:void Ee(oe(i),"Injector")}function Gn(i){return{toString:i}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),jt=(()=>{return(i=jt||(jt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",jt;var i})();const ot="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,lr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ut=ot||"undefined"!=typeof global&&global||Et||lr,dr={},U=[],q=de({\u0275cmp:de}),Z=de({\u0275dir:de}),Ie=de({\u0275pipe:de}),H=de({\u0275mod:de}),X=de({\u0275fac:de}),ke=de({__NG_ELEMENT_ID__:de});let Ke=0;function pt(i){return Gn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||U,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||jt.Emulated,id:"c",styles:i.styles||U,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.directives,p=i.features,_=i.pipes;return l.id+=Ke++,l.inputs=_a(i.inputs,a),l.outputs=_a(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(rn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(It):null,l})}function rn(i){return Pn(i)||function Tr(i){return i[Z]||null}(i)}function It(i){return function is(i){return i[Ie]||null}(i)}const On={};function Dr(i){return Gn(()=>{const o={type:i.type,bootstrap:i.bootstrap||U,declarations:i.declarations||U,imports:i.imports||U,exports:i.exports||U,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(On[i.id]=i.type),o})}function _a(i,o){if(null==i)return dr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=l,o&&(o[h]=p)}return a}const ou=pt;function va(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Pn(i){return i[q]||null}function Fn(i,o){const a=i[H]||null;if(!a&&!0===o)throw new Error(`Type ${oe(i)} does not have '\u0275mod' property.`);return a}function jr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ni(i){return Array.isArray(i)&&!0===i[1]}function lu(i){return 0!=(8&i.flags)}function Hc(i){return 2==(2&i.flags)}function Oi(i){return 1==(1&i.flags)}function Pi(i){return null!==i.template}function _l(i){return 0!=(512&i[2])}function Xn(i,o){return i.hasOwnProperty(X)?i[X]:null}class uo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Fi(){return Bo}function Bo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Oh),Jc}function Jc(){const i=lo(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===dr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Oh(i,o,a,l){const h=lo(i)||function jo(i,o){return i[Ia]=o}(i,{previous:dr,current:null}),p=h.current||(h.current={}),_=h.previous,E=this.declaredInputs[a],b=_[E];p[E]=new uo(b&&b.currentValue,o,_===dr),i[l]=o}Fi.ngInherit=!0;const Ia="__ngSimpleChanges__";function lo(i){return i[Ia]||null}let Ho;function bl(i){Ho=i}function tn(i){return!!i.listen}const Da={createRenderer:(i,o)=>function Li(){return void 0!==Ho?Ho:"undefined"!=typeof document?document:void 0}()};function zt(i){for(;Array.isArray(i);)i=i[0];return i}function Ns(i,o){return zt(o[i])}function er(i,o){return zt(o[i.index])}function ln(i,o){return i.data[o]}function Ui(i,o){return i[o]}function tr(i,o){const a=o[i];return jr(a)?a:a[0]}function ho(i){return 4==(4&i[2])}function os(i){return 128==(128&i[2])}function yi(i,o){return null==o?null:i[o]}function Vi(i){i[18]=0}function Go(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const _t={lFrame:zo(null),bindingsEnabled:!0};function fu(){return _t.bindingsEnabled}function Te(){return _t.lFrame.lView}function Ft(){return _t.lFrame.tView}function Zo(i){return _t.lFrame.contextLView=i,i[8]}function un(){let i=pu();for(;null!==i&&64===i.type;)i=i.parent;return i}function pu(){return _t.lFrame.currentTNode}function ni(i,o){const a=_t.lFrame;a.currentTNode=i,a.isParent=o}function Al(){return _t.lFrame.isParent}function Sl(){_t.lFrame.isParent=!1}function fr(){const i=_t.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Ps(){return _t.lFrame.bindingIndex++}function _i(i){const o=_t.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function yu(i,o){const a=_t.lFrame;a.bindingIndex=a.bindingRootIndex=i,xa(o)}function xa(i){_t.lFrame.currentDirectiveIndex=i}function vu(){return _t.lFrame.currentQueryIndex}function nd(i){_t.lFrame.currentQueryIndex=i}function rd(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function wu(i,o,a){if(a&yt.SkipSelf){let h=o,p=i;for(;!(h=h.parent,null!==h||a&yt.Host||(h=rd(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,i=p}const l=_t.lFrame=id();return l.currentTNode=o,l.lView=i,!0}function po(i){const o=id(),a=i[1];_t.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function id(){const i=_t.lFrame,o=null===i?null:i.child;return null===o?zo(i):o}function zo(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function sd(){const i=_t.lFrame;return _t.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Eu=sd;function $r(){const i=sd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qn(){return _t.lFrame.selectedIndex}function go(i){_t.lFrame.selectedIndex=i}function Tn(){const i=_t.lFrame;return ln(i.tView,i.selectedIndex)}function od(){_t.lFrame.currentNamespace="svg"}function Qp(){!function ad(){_t.lFrame.currentNamespace=null}()}function Ma(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:x}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),S&&((i.viewHooks||(i.viewHooks=[])).push(a,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,S)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function us(i,o,a){ud(i,o,3,a)}function mo(i,o,a,l){(3&i[2])===a&&ud(i,o,a,l)}function Un(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function ud(i,o,a,l){const p=null!=l?l:-1,_=o.length-1;let E=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=l&&E>=l)break}else o[b]<0&&(i[18]+=65536),(E<p||-1==p)&&(Xp(i,a,o,b),i[18]=(4294901760&i[18])+b+2),b++}function Xp(i,o,a,l){const h=a[l]<0,p=a[l+1],E=i[h?-a[l]:a[l]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Wo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function xr(i,o,a){const l=tn(i);let h=0;for(;h<a.length;){const p=a[h];if("number"==typeof p){if(0!==p)break;h++;const _=a[h++],E=a[h++],b=a[h++];l?i.setAttribute(o,E,b,_):o.setAttributeNS(_,E,b)}else{const _=p,E=a[++h];wn(_)?l&&i.setProperty(o,_,E):l?i.setAttribute(o,_,E):o.setAttribute(_,E),h++}}return h}function ii(i){return 3===i||4===i||6===i}function wn(i){return 64===i.charCodeAt(0)}function ka(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||ld(i,a,h,null,-1===a||2===a?o[++l]:null)}}return i}function ld(i,o,a,l,h){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==h&&(i[p+1]=h));if(l===i[p+1])return void(i[p+2]=h)}p++,null!==l&&p++,null!==h&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==h&&i.splice(p++,0,h)}function Ko(i){return-1!==i}function Fs(i){return 32767&i}function Ls(i,o){let a=function En(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Bi=!0;function gt(i){const o=Bi;return Bi=i,o}let Ol=0;function Us(i,o){const a=_o(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,Yo(l.data,i),Yo(o,null),Yo(l.blueprint,null));const h=nr(i,o),p=i.injectorIndex;if(Ko(h)){const _=Fs(h),E=Ls(h,o),b=E[1].data;for(let S=0;S<8;S++)o[p+S]=E[_+S]|b[_+S]}return o[p+8]=h,p}function Yo(i,o){i.push(0,0,0,0,0,0,0,0,o)}function _o(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function nr(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(l=2===_?p.declTNode:1===_?h[6]:null,null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function vo(i,o,a){!function Vn(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ke)&&(l=a[ke]),null==l&&(l=a[ke]=Ol++);const h=255&l;o.data[i+(h>>5)]|=1<<h}(i,o,a)}function Qo(i,o,a){if(a&yt.Optional)return i;Ee(o,"NodeInjector")}function Vs(i,o,a,l){if(a&yt.Optional&&void 0===l&&(l=null),0==(a&(yt.Self|yt.Host))){const h=i[9],p=_n(void 0);try{return h?h.get(o,l,a&yt.Optional):io(o,l,a&yt.Optional)}finally{_n(p)}}return Qo(l,o,a)}function Jo(i,o,a,l=yt.Default,h){if(null!==i){const p=function bo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(ke)?i[ke]:void 0;return"number"==typeof o?o>=0?255&o:Eo:o}(a);if("function"==typeof p){if(!wu(o,i,l))return l&yt.Host?Qo(h,a,l):Vs(o,a,l,h);try{const _=p(l);if(null!=_||l&yt.Optional)return _;Ee(a)}finally{Eu()}}else if("number"==typeof p){let _=null,E=_o(i,o),b=-1,S=l&yt.Host?o[16][6]:null;for((-1===E||l&yt.SkipSelf)&&(b=-1===E?nr(i,o):o[E+8],-1!==b&&Fl(l,!1)?(_=o[1],E=Fs(b),o=Ls(b,o)):E=-1);-1!==E;){const x=o[1];if(Bn(p,E,x.data)){const P=Pl(E,o,a,_,l,S);if(P!==Bs)return P}b=o[E+8],-1!==b&&Fl(l,o[1].data[E+8]===S)&&Bn(p,E,o)?(_=x,E=Fs(b),o=Ls(b,o)):E=-1}}}return Vs(o,a,l,h)}const Bs={};function Eo(){return new js(un(),Te())}function Pl(i,o,a,l,h,p){const _=o[1],E=_.data[i+8],x=Na(E,_,a,null==l?Hc(E)&&Bi:l!=_&&0!=(3&E.type),h&yt.Host&&p===E);return null!==x?cs(o,_,x,E):Bs}function Na(i,o,a,l,h){const p=i.providerIndexes,_=o.data,E=1048575&p,b=i.directiveStart,x=p>>20,V=h?E+x:i.directiveEnd;for(let Q=l?E:E+x;Q<V;Q++){const ve=_[Q];if(Q<b&&a===ve||Q>=b&&ve.type===a)return Q}if(h){const Q=_[b];if(Q&&Pi(Q)&&Q.type===a)return b}return null}function cs(i,o,a,l){let h=i[a];const p=o.data;if(function bu(i){return i instanceof Wo}(h)){const _=h;_.resolving&&function We(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(p[a]));const E=gt(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?_n(_.injectImpl):null;wu(i,l,yt.Default);try{h=i[a]=_.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Sy(i,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(l){const _=Bo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==b&&_n(b),gt(E),_.resolving=!1,Eu()}}return h}function Bn(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Fl(i,o){return!(i&yt.Self||i&yt.Host&&o)}class js{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Jo(this._tNode,this._lView,o,l,a)}}function cn(i){return Gn(()=>{const o=i.prototype.constructor,a=o[X]||si(o),l=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==l;){const p=h[X]||si(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function si(i){return Be(i)?()=>{const o=si(K(i));return o&&o()}:Xn(i)}function Co(i){return function wo(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const p=a[h];if(ii(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(un(),i)}const ji="__parameters__";function vi(i,o,a){return Gn(()=>{const l=function bn(i){return function(...a){if(i){const l=i(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...p){if(this instanceof h)return l.apply(this,p),this;const _=new h(...p);return E.annotation=_,E;function E(b,S,x){const P=b.hasOwnProperty(ji)?b[ji]:Object.defineProperty(b,ji,{value:[]})[ji];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(_),b}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class fn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Lh=new fn("AnalyzeForEntryComponents");function pr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),pr(l,o)):o!==i&&o.push(l)}return o}function Mr(i,o){i.forEach(a=>Array.isArray(a)?Mr(a,o):o(a))}function Pa(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function ea(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function hs(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}function gr(i,o,a){let l=ra(i,o);return l>=0?i[1|l]=a:(l=~l,function ta(i,o,a,l){let h=i.length;if(h==o)i.push(a,l);else if(1===h)i.push(l,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Fa(i,o){const a=ra(i,o);if(a>=0)return i[1|a]}function ra(i,o){return function ps(i,o,a){let l=0,h=i.length>>a;for(;h!==l;){const p=l+(h-l>>1),_=i[p<<a];if(o===_)return p<<a;_>o?h=p:l=p+1}return~(h<<a)}(i,o,1)}const Gs={},ia="__NG_DI_FLAG__",La="ngTempTokenPath",D=/\n/gm,F="__source",Y=de({provide:String,useValue:de});let ne;function ge(i){const o=ne;return ne=i,o}function ze(i,o=yt.Default){if(void 0===ne)throw new Ae(203,"");return null===ne?io(i,void 0,o):ne.get(i,o&yt.Optional?null:void 0,o)}function rt(i,o=yt.Default){return(function hn(){return Jr}()||ze)(K(i),o)}const $t=rt;function At(i){const o=[];for(let a=0;a<i.length;a++){const l=K(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ae(900,"");let h,p=yt.Default;for(let _=0;_<l.length;_++){const E=l[_],b=zn(E);"number"==typeof b?-1===b?h=E.token:p|=b:h=E}o.push(rt(h,p))}else o.push(rt(l))}return o}function Sn(i,o){return i[ia]=o,i.prototype[ia]=o,i}function zn(i){return i[ia]}const Ei=Sn(vi("Inject",i=>({token:i})),-1),mr=Sn(vi("Optional"),8),qs=Sn(vi("SkipSelf"),4);class Dd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function bi(i){return i instanceof Dd?i.changingThisBreaksApplicationSecurity:i}const Ny=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ua=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var xn=(()=>((xn=xn||{})[xn.NONE=0]="NONE",xn[xn.HTML=1]="HTML",xn[xn.STYLE=2]="STYLE",xn[xn.SCRIPT=3]="SCRIPT",xn[xn.URL=4]="URL",xn[xn.RESOURCE_URL=5]="RESOURCE_URL",xn))();function Va(i){const o=function Ou(){const i=Te();return i&&i[12]}();return o?o.sanitize(xn.URL,i)||"":function Ao(i,o){const a=function ql(i){return i instanceof Dd&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?bi(i):function Zl(i){return(i=String(i)).match(Ny)||i.match(Ua)?i:"unsafe:"+i}(_e(i))}const Od="__ngContext__";function ir(i,o){i[Od]=o}function Qh(i){const o=function Pu(i){return i[Od]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function Fd(i){return i.ngOriginalError}function Gy(i,...o){i.error(...o)}class Ld{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Hy(i){return i&&i.ngErrorLogger||Gy}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Fd(o);for(;a&&Fd(a);)a=Fd(a);return a||null}}const nf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ut))();function y(i){return i instanceof Function?i():i}var k=(()=>((k=k||{})[k.Important=1]="Important",k[k.DashCase=2]="DashCase",k))();function he(i,o){return undefined(i,o)}function ft(i){const o=i[3];return Ni(o)?o[3]:o}function ui(i){return rf(i[13])}function Fu(i){return rf(i[4])}function rf(i){for(;null!==i&&!Ni(i);)i=i[4];return i}function $a(i,o,a,l,h){if(null!=l){let p,_=!1;Ni(l)?p=l:jr(l)&&(_=!0,l=l[0]);const E=zt(l);0===i&&null!==a?null==h?H0(o,a,E):Vu(o,a,E,h||null,!0):1===i&&null!==a?Vu(o,a,E,h||null,!0):2===i?function K0(i,o,a){const l=Sg(i,o);l&&function Ag(i,o,a,l){tn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=p&&function nS(i,o,a,l,h){const p=a[7];p!==zt(a)&&$a(o,i,l,p,h);for(let E=10;E<a.length;E++){const b=a[E];Rg(b[1],b,i,o,l,p)}}(o,i,p,a,h)}}function Mn(i,o,a){if(tn(i))return i.createElement(o,a);{const l=null!==a?function El(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function B0(i,o){const a=i[9],l=a.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Go(h,-1)),a.splice(l,1)}function Dg(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const h=l[17];null!==h&&h!==i&&B0(h,l),o>0&&(i[a-1][4]=l[4]);const p=ea(i,10+o);!function sf(i,o){Rg(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function j0(i,o){if(!(256&o[2])){const a=o[11];tn(a)&&a.destroyNode&&Rg(i,o,a,3,null,null),function Ha(i){let o=i[13];if(!o)return Tg(i[1],i);for(;o;){let a=null;if(jr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)jr(o)&&Tg(o[1],o),o=o[3];null===o&&(o=i),jr(o)&&Tg(o[1],o),a=o&&o[4]}o=a}}(o)}}function Tg(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function zy(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof Wo)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=h[p[_]],b=p[_+1];try{b.call(E)}finally{}}else try{p.call(h)}finally{}}}}(i,o),function $0(i,o){const a=i.cleanup,l=o[7];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(o):zt(o[_]),b=l[h=a[p+2]],S=a[p+3];"boolean"==typeof S?E.removeEventListener(a[p],b,S):S>=0?l[h=S]():l[h=-S].unsubscribe(),p+=2}else{const _=l[h=a[p+1]];a[p].call(_)}if(null!==l){for(let p=h+1;p<l.length;p++)l[p]();o[7]=null}}(i,o),1===o[1].type&&tn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Ni(o[3])){a!==o[3]&&B0(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function XC(i,o,a){return function Uu(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=i.data[l.directiveStart].encapsulation;if(h===jt.None||h===jt.Emulated)return null}return er(l,a)}(i,o.parent,a)}function Vu(i,o,a,l,h){tn(i)?i.insertBefore(o,a,l,h):o.insertBefore(a,l,h)}function H0(i,o,a){tn(i)?i.appendChild(o,a):o.appendChild(a)}function G0(i,o,a,l,h){null!==l?Vu(i,o,a,l,h):H0(i,o,a)}function Sg(i,o){return tn(i)?i.parentNode(o):o.parentNode}function q0(i,o,a){return Z0(i,o,a)}let Z0=function Wy(i,o,a){return 40&i.type?er(i,a):null};function Vd(i,o,a,l){const h=XC(i,l,o),p=o[11],E=q0(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let b=0;b<a.length;b++)G0(p,h,a[b],E,!1);else G0(p,h,a,E,!1)}function xg(i,o){if(null!==o){const a=o.type;if(3&a)return er(o,i);if(4&a)return Mg(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return xg(i,l);{const h=i[o.index];return Ni(h)?Mg(-1,h):zt(h)}}if(32&a)return he(o,i)()||zt(i[o.index]);{const l=W0(i,o);return null!==l?Array.isArray(l)?l[0]:xg(ft(i[16]),l):xg(i,o.next)}}return null}function W0(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Mg(i,o){const a=10+i+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return xg(l,h)}return o[7]}function Y0(i,o,a,l,h,p,_){for(;null!=a;){const E=l[a.index],b=a.type;if(_&&0===o&&(E&&ir(zt(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)Y0(i,o,a.child,l,h,p,!1),$a(o,i,h,E,p);else if(32&b){const S=he(a,l);let x;for(;x=S();)$a(o,i,h,x,p);$a(o,i,h,E,p)}else 16&b?tI(i,o,l,a,h,p):$a(o,i,h,E,p);a=_?a.projectionNext:a.next}}function Rg(i,o,a,l,h,p){Y0(a,l,i.firstChild,o,h,p,!1)}function tI(i,o,a,l,h,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)$a(o,i,h,b[S],p);else Y0(i,o,b,_[3],h,p,!0)}function Q0(i,o,a){tn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function pe(i,o,a){tn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function lf(i,o,a){let l=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const p=o.length;if(h+p===l||i.charCodeAt(h+p)<=32)return h}a=h+1}}const J0="ng-template";function rI(i,o,a){let l=0;for(;l<i.length;){let h=i[l++];if(a&&"class"===h){if(h=i[l],-1!==lf(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<i.length&&"string"==typeof(h=i[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Yy(i){return 4===i.type&&i.value!==J0}function iI(i,o,a){return o===(4!==i.type||a?i.value:J0)}function sI(i,o,a){let l=4;const h=i.attrs||[],p=function aI(i){for(let o=0;o<i.length;o++)if(ii(i[o]))return o;return i.length}(h);let _=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!iI(i,b,a)||""===b&&1===o.length){if(xo(l))return!1;_=!0}}else{const S=8&l?b:o[++E];if(8&l&&null!==i.attrs){if(!rI(i.attrs,S,a)){if(xo(l))return!1;_=!0}continue}const P=oI(8&l?"class":b,h,Yy(i),a);if(-1===P){if(xo(l))return!1;_=!0;continue}if(""!==S){let V;V=P>p?"":h[P+1].toLowerCase();const Q=8&l?V:null;if(Q&&-1!==lf(Q,S,0)||2&l&&S!==V){if(xo(l))return!1;_=!0}}}}else{if(!_&&!xo(l)&&!xo(b))return!1;if(_&&xo(b))continue;_=!1,l=b|1&l}}return xo(l)||_}function xo(i){return 0==(1&i)}function oI(i,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let p=!1;for(;h<o.length;){const _=o[h];if(_===i)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function uI(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function X0(i,o,a=!1){for(let l=0;l<o.length;l++)if(sI(i,o[l],a))return!0;return!1}function lI(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let h=0;h<i.length;h++)if(i[h]!==l[h])continue e;return!0}}return!1}function Qy(i,o){return i?":not("+o.trim()+")":o}function ew(i){let o=i[0],a=1,l=2,h="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];h+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?h+="."+_:4&l&&(h+=" "+_);else""!==h&&!xo(_)&&(o+=Qy(p,h),h=""),l=_,p=p||!xo(l);a++}return""!==h&&(o+=Qy(p,h)),o}const dt={};function Xy(i){cf(Ft(),Te(),qn()+i,!1)}function cf(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&us(o,p,a)}else{const p=i.preOrderHooks;null!==p&&mo(o,p,0,a)}go(a)}function e_(i,o){return i<<17|o<<2}function Mo(i){return i>>17&32767}function nw(i){return 2|i}function Ga(i){return(131068&i)>>2}function t_(i,o){return-131069&i|o<<2}function rw(i){return 1|i}function fw(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];nd(h),_.contentQueries(2,o[p],p)}}}function nc(i,o,a,l,h,p,_,E,b,S){const x=o.blueprint.slice();return x[0]=h,x[2]=140|l,Vi(x),x[3]=x[15]=i,x[8]=a,x[10]=_||i&&i[10],x[11]=E||i&&i[11],x[12]=b||i&&i[12]||null,x[9]=S||i&&i[9]||null,x[6]=p,x[16]=2==o.type?i[16]:x,x}function rc(i,o,a,l,h){let p=i.data[o];if(null===p)p=function pf(i,o,a,l,h){const p=pu(),_=Al(),b=i.data[o]=function h_(i,o,a,l,h,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,l,h);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,o,a,l,h),function Ml(){return _t.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=h;const _=function fo(){const i=_t.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ni(p,!0),p}function ic(i,o,a,l){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function Za(i,o,a){po(o);try{const l=i.viewQuery;null!==l&&__(1,l,a);const h=i.template;null!==h&&c_(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&fw(i,o),i.staticViewQueries&&__(2,i.viewQuery,a);const p=i.components;null!==p&&function pw(i,o){for(let a=0;a<o.length;a++)Iw(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,$r()}}function Bd(i,o,a,l){const h=o[2];if(256!=(256&h)){po(o);try{Vi(o),function gu(i){return _t.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&c_(i,o,a,2,l);const _=3==(3&h);if(_){const S=i.preOrderCheckHooks;null!==S&&us(o,S,null)}else{const S=i.preOrderHooks;null!==S&&mo(o,S,0,null),Un(o,0)}if(function m_(i){for(let o=ui(i);null!==o;o=Fu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],p=h[3];0==(1024&h[2])&&Go(p,1),h[2]|=1024}}}(o),function mS(i){for(let o=ui(i);null!==o;o=Fu(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];os(l)&&Bd(h,l,h.template,l[8])}}(o),null!==i.contentQueries&&fw(i,o),_){const S=i.contentCheckHooks;null!==S&&us(o,S)}else{const S=i.contentHooks;null!==S&&mo(o,S,1),Un(o,1)}!function yI(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)go(~h);else{const p=h,_=a[++l],E=a[++l];yu(_,p),E(2,o[p])}}}finally{go(-1)}}(i,o);const E=i.components;null!==E&&function _I(i,o){for(let a=0;a<o.length;a++)yS(i,o[a])}(o,E);const b=i.viewQuery;if(null!==b&&__(2,b,l),_){const S=i.viewCheckHooks;null!==S&&us(o,S)}else{const S=i.viewHooks;null!==S&&mo(o,S,2),Un(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Go(o[3],-1))}finally{$r()}}}function l_(i,o,a,l){const h=o[10],_=ho(o);try{!_&&h.begin&&h.begin(),_&&Za(i,o,l),Bd(i,o,a,l)}finally{!_&&h.end&&h.end()}}function c_(i,o,a,l,h){const p=qn(),_=2&l;try{go(-1),_&&o.length>20&&cf(i,o,20,!1),a(l,h)}finally{go(p)}}function gw(i,o,a){if(lu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function gf(i,o,a){!fu()||(function II(i,o,a,l){const h=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Us(a,o),ir(l,o);const _=a.initialInputs;for(let E=h;E<p;E++){const b=i.data[E],S=Pi(b);S&&bw(o,a,b);const x=cs(o,i,E,a);ir(x,o),null!==_&&Cw(0,E-h,x,b,0,_),S&&(tr(a.index,o)[8]=x)}}(i,o,a,er(a,o)),128==(128&a.flags)&&function Bg(i,o,a){const l=a.directiveStart,h=a.directiveEnd,_=a.index,E=function Rl(){return _t.lFrame.currentDirectiveIndex}();try{go(_);for(let b=l;b<h;b++){const S=i.data[b],x=o[b];xa(b),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&p_(S,x)}}finally{go(-1),xa(E)}}(i,o,a))}function Fg(i,o,a=er){const l=o.localNames;if(null!==l){let h=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(o,i):i[_];i[h++]=E}}}function d_(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=jd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function jd(i,o,a,l,h,p,_,E,b,S){const x=20+l,P=x+h,V=function vI(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:dt);return a}(x,P),Q="function"==typeof S?S():S;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:o,data:V.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function Lg(i,o,a,l){const h=MI(o);null===a?h.push(l):(h.push(a),i.firstCreatePass&&Tw(i).push(l,h.length-1))}function Ug(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const h=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function f_(i,o,a,l){let h=!1;if(fu()){const p=function ww(i,o,a){const l=i.directiveRegistry;let h=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];X0(a,_.selectors,!1)&&(h||(h=[]),vo(Us(a,o),i,_.type),Pi(_)?(jg(i,a),h.unshift(_)):h.push(_))}return h}(i,o,a),_=null===l?null:{"":-1};if(null!==p){h=!0,Ew(a,i.data.length,p.length);for(let x=0;x<p.length;x++){const P=p[x];P.providersResolver&&P.providersResolver(P)}let E=!1,b=!1,S=ic(i,o,p.length,null);for(let x=0;x<p.length;x++){const P=p[x];a.mergedAttrs=ka(a.mergedAttrs,P.hostAttrs),g_(i,a,o,S,P),TI(S,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),S++}!function yw(i,o){const l=o.directiveEnd,h=i.data,p=o.attrs,_=[];let E=null,b=null;for(let S=o.directiveStart;S<l;S++){const x=h[S],P=x.inputs,V=null===p||Yy(o)?null:pS(P,p);_.push(V),E=Ug(P,S,E),b=Ug(x.outputs,S,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=b}(i,a)}_&&function DI(i,o,a){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new Ae(-301,!1);l.push(o[h],p)}}}(a,l,_)}return a.mergedAttrs=ka(a.mergedAttrs,a.attrs),h}function vw(i,o,a,l,h,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~o.index;(function CI(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,h,_)}}function p_(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function jg(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function TI(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Pi(o)&&(a[""]=i)}}function Ew(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function g_(i,o,a,l,h){i.data[l]=h;const p=h.factory||(h.factory=Xn(h.type)),_=new Wo(p,Pi(h),null);i.blueprint[l]=_,a[l]=_,vw(i,o,0,l,ic(i,a,h.hostVars,dt),h)}function bw(i,o,a){const l=er(o,i),h=d_(a),p=i[10],_=yf(i,nc(i,h,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));i[o.index]=_}function Ro(i,o,a,l,h,p){const _=er(i,o);!function $g(i,o,a,l,h,p,_){if(null==p)tn(i)?i.removeAttribute(o,h,a):o.removeAttribute(h);else{const E=null==_?_e(p):_(p,l||"",h);tn(i)?i.setAttribute(o,h,E,a):a?o.setAttributeNS(a,h,E):o.setAttribute(h,E)}}(o[11],_,p,i.value,a,l,h)}function Cw(i,o,a,l,h,p){const _=p[o];if(null!==_){const E=l.setInput;for(let b=0;b<_.length;){const S=_[b++],x=_[b++],P=_[b++];null!==E?l.setInput(a,P,S,x):a[x]=P}}}function pS(i,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function AI(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function yS(i,o){const a=tr(o,i);if(os(a)){const l=a[1];80&a[2]?Bd(l,a,l.template,a[8]):a[5]>0&&y_(a)}}function y_(i){for(let l=ui(i);null!==l;l=Fu(l))for(let h=10;h<l.length;h++){const p=l[h];if(1024&p[2]){const _=p[1];Bd(_,p,_.template,p[8])}else p[5]>0&&y_(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=tr(a[l],i);os(h)&&h[5]>0&&y_(h)}}function Iw(i,o){const a=tr(o,i),l=a[1];(function SI(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Za(l,a,a[8])}function yf(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function _f(i){for(;i;){i[2]|=64;const o=ft(i);if(_l(i)&&!o)return i;i=o}return null}function xI(i){!function Dw(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Qh(a),h=l[1];l_(h,l,h.template,a)}}(i[8])}function __(i,o,a){nd(0),o(i,a)}const wS=(()=>Promise.resolve(null))();function MI(i){return i[7]||(i[7]=[])}function Tw(i){return i.cleanup||(i.cleanup=[])}function kI(i,o){const a=i[9],l=a?a.get(Ld,null):null;l&&l.handleError(o)}function NI(i,o,a,l,h){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=o[_],S=i.data[_];null!==S.setInput?S.setInput(b,h,l,E):b[E]=h}}function $u(i,o,a){const l=Ns(o,i);!function Ud(i,o,a){tn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function v_(i,o,a){let l=a?i.styles:null,h=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?h=le(h,E):2==p&&(l=le(l,E+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=h:i.classesWithoutHost=h}const Gg=new fn("INJECTOR",-1);class w_{get(o,a=Gs){if(a===Gs){const l=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw l.name="NullInjectorError",l}return a}}const qg=new fn("Set Injector scope."),$d={},Aw={};let Zg;function sc(){return void 0===Zg&&(Zg=new w_),Zg}function Sw(i,o=null,a=null,l){const h=zg(i,o,a,l);return h._resolveInjectorDefTypes(),h}function zg(i,o=null,a=null,l){return new FI(i,a,o||sc(),l)}class FI{constructor(o,a,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Mr(a,E=>this.processProvider(E,o,a)),Mr([o],E=>this.processInjectorType(E,[],p)),this.records.set(Gg,Ki(void 0,this));const _=this.records.get(qg);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Gs,l=yt.Default){this.assertNotDestroyed();const h=ge(this),p=_n(void 0);try{if(!(l&yt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function I_(i){return"function"==typeof i||"object"==typeof i&&i instanceof fn}(o)&&Pt(o);E=b&&this.injectableDefInScope(b)?Ki(E_(o),$d):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&yt.Self?sc():this.parent).get(o,a=l&yt.Optional&&a===Gs?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[La]=_[La]||[]).unshift(oe(o)),h)throw _;return function gs(i,o,a,l){const h=i[La];throw o[F]&&h.unshift(o[F]),i.message=function Gi(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let h=oe(o);if(Array.isArray(o))h=o.map(oe).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):oe(E)))}h=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,h,a,l),i.ngTokenPath=h,i[La]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{_n(p),ge(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,h)=>o.push(oe(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processInjectorType(o,a,l){if(!(o=K(o)))return!1;let h=Ir(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,E=-1!==l.indexOf(_);if(void 0!==p&&(h=Ir(p)),null==h)return!1;if(null!=h.imports&&!E){let x;l.push(_);try{Mr(h.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:V,providers:Q}=x[P];Mr(Q,ve=>this.processProvider(ve,V,Q||U))}}this.injectorDefTypes.add(_);const b=Xn(_)||(()=>new _);this.records.set(_,Ki(b,$d));const S=h.providers;if(null!=S&&!E){const x=o;Mr(S,P=>this.processProvider(P,x,S))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let h=za(o=K(o))?o:K(o&&o.provide);const p=function xw(i,o,a){return Je(i)?Ki(void 0,i.useValue):Ki(Mw(i),$d)}(o);if(za(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=Ki(void 0,$d,!0),_.factory=()=>At(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,a){return a.value===$d&&(a.value=Aw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function LI(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function E_(i){const o=Pt(i),a=null!==o?o.factory:Xn(i);if(null!==a)return a;if(i instanceof fn)throw new Ae(204,!1);if(i instanceof Function)return function ES(i){const o=i.length;if(o>0)throw hs(o,"?"),new Ae(204,!1);const a=function Yr(i){const o=i&&(i[Mi]||i[Qr]);if(o){const a=function ur(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ae(204,!1)}function Mw(i,o,a){let l;if(za(i)){const h=K(i);return Xn(h)||E_(h)}if(Je(i))l=()=>K(i.useValue);else if(function kt(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...At(i.deps||[]));else if(function b_(i){return!(!i||!i.useExisting)}(i))l=()=>rt(K(i.useExisting));else{const h=K(i&&(i.useClass||i.provide));if(!function Ef(i){return!!i.deps}(i))return Xn(h)||E_(h);l=()=>new h(...At(i.deps))}return l}function Ki(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Je(i){return null!==i&&"object"==typeof i&&Y in i}function za(i){return"function"==typeof i}let la=(()=>{class i{static create(a,l){var h;if(Array.isArray(a))return Sw({name:""},l,a,"");{const p=null!==(h=a.name)&&void 0!==h?h:"";return Sw({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Gs,i.NULL=new w_,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>rt(Gg)}),i.__NG_ELEMENT_ID__=-1,i})();function Hd(i,o){Ma(Qh(i)[1],un())}function Qg(i){let o=function Yg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let h;if(Pi(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ae(903,"");h=o.\u0275dir}if(h){if(a){l.push(h);const _=i;_.inputs=Jg(i.inputs),_.declaredInputs=Jg(i.declaredInputs),_.outputs=Jg(i.outputs);const E=h.hostBindings;E&&k_(i,E);const b=h.viewQuery,S=h.contentQueries;if(b&&Xg(i,b),S&&R_(i,S),ue(i.inputs,h.inputs),ue(i.declaredInputs,h.declaredInputs),ue(i.outputs,h.outputs),Pi(h)&&h.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===Qg&&(a=!1)}}o=Object.getPrototypeOf(o)}!function GI(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const h=i[l];h.hostVars=o+=h.hostVars,h.hostAttrs=ka(h.hostAttrs,a=ka(a,h.hostAttrs))}}(l)}function Jg(i){return i===dr?{}:i===U?[]:i}function Xg(i,o){const a=i.viewQuery;i.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function R_(i,o){const a=i.contentQueries;i.contentQueries=a?(l,h,p)=>{o(l,h,p),a(l,h,p)}:o}function k_(i,o){const a=i.hostBindings;i.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let Gd=null;function oc(){if(!Gd){const i=Ut.Symbol;if(i&&i.iterator)Gd=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Gd=l)}}}return Gd}function If(i){return!!O_(i)&&(Array.isArray(i)||!(i instanceof Map)&&oc()in i)}function O_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Qi(i,o,a){return i[o]=a}function ci(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function ca(i,o,a,l){const h=ci(i,o,a);return ci(i,o+1,l)||h}function Af(i,o,a,l){const h=Te();return ci(h,Ps(),o)&&(Ft(),Ro(Tn(),h,i,o,a,l)),Af}function uc(i,o,a,l,h,p){const E=ca(i,function ri(){return _t.lFrame.bindingIndex}(),a,h);return _i(2),E?o+_e(a)+l+_e(h)+p:dt}function P_(i,o,a,l,h,p,_,E){const b=Te(),S=Ft(),x=i+20,P=S.firstCreatePass?function WI(i,o,a,l,h,p,_,E,b){const S=o.consts,x=rc(o,i,4,_||null,yi(S,E));f_(o,a,x,yi(S,b)),Ma(o,x);const P=x.tViews=jd(2,x,l,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,x),P.queries=o.queries.embeddedTView(x)),x}(x,S,b,o,a,l,h,p,_):S.data[x];ni(P,!1);const V=b[11].createComment("");Vd(S,b,V,P),ir(V,b),yf(b,b[x]=AI(V,b,V,P)),Oi(P)&&gf(S,b,P),null!=_&&Fg(b,P,E)}function Uw(i){return Ui(function td(){return _t.lFrame.contextLView}(),20+i)}function Nf(i,o=yt.Default){const a=Te();return null===a?rt(i,o):Jo(un(),a,K(i),o)}function cm(){throw new Error("invalid")}function Kd(i,o,a){const l=Te();return ci(l,Ps(),o)&&function Wi(i,o,a,l,h,p,_,E){const b=er(o,a);let x,S=o.inputs;!E&&null!=S&&(x=S[l])?(NI(i,a,x,l,h),Hc(o)&&function Vg(i,o){const a=tr(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function wI(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=_?_(h,o.value||"",l):h,tn(p)?p.setProperty(b,l,h):wn(l)||(b.setProperty?b.setProperty(l,h):b[l]=h))}(Ft(),Tn(),l,i,o,l[11],a,!1),Kd}function Of(i,o,a,l,h){const _=h?"class":"style";NI(i,a,o.inputs[_],_,l)}function Pf(i,o,a,l){const h=Te(),p=Ft(),_=20+i,E=h[11],b=h[_]=Mn(E,o,function Jp(){return _t.lFrame.currentNamespace}()),S=p.firstCreatePass?function Yw(i,o,a,l,h,p,_){const E=o.consts,S=rc(o,i,2,h,yi(E,p));return f_(o,a,S,yi(E,_)),null!==S.attrs&&v_(S,S.attrs,!1),null!==S.mergedAttrs&&v_(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(_,p,h,0,o,a,l):p.data[_];ni(S,!0);const x=S.mergedAttrs;null!==x&&xr(E,b,x);const P=S.classes;null!==P&&pe(E,b,P);const V=S.styles;return null!==V&&Q0(E,b,V),64!=(64&S.flags)&&Vd(p,h,b,S),0===function Sa(){return _t.lFrame.elementDepthCount}()&&ir(b,h),function Dl(){_t.lFrame.elementDepthCount++}(),Oi(S)&&(gf(p,h,S),gw(p,S,h)),null!==l&&Fg(h,S),Pf}function Ff(){let i=un();Al()?Sl():(i=i.parent,ni(i,!1));const o=i;!function hu(){_t.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(Ma(a,i),lu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function tg(i){return 0!=(16&i.flags)}(o)&&Of(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Wt(i){return 0!=(32&i.flags)}(o)&&Of(a,o,Te(),o.stylesWithoutHost,!1),Ff}function G_(i,o,a,l){return Pf(i,o,a,l),Ff(),G_}function gc(i,o,a){const l=Te(),h=Ft(),p=i+20,_=h.firstCreatePass?function Qw(i,o,a,l,h){const p=o.consts,_=yi(p,l),E=rc(o,i,8,"ng-container",_);return null!==_&&v_(E,_,!0),f_(o,a,E,yi(p,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,h,l,o,a):h.data[p];ni(_,!0);const E=l[p]=l[11].createComment("");return Vd(h,l,E,_),ir(E,l),Oi(_)&&(gf(h,l,_),gw(h,_,l)),null!=a&&Fg(l,_),gc}function Wu(){let i=un();const o=Ft();return Al()?Sl():(i=i.parent,ni(i,!1)),o.firstCreatePass&&(Ma(o,i),lu(i)&&o.queries.elementEnd(i)),Wu}function hm(){return Te()}function q_(i){return!!i&&"function"==typeof i.then}function fm(i){return!!i&&"function"==typeof i.subscribe}const mc=fm;function Lf(i,o,a,l){const h=Te(),p=Ft(),_=un();return function Xw(i,o,a,l,h,p,_,E){const b=Oi(l),x=i.firstCreatePass&&Tw(i),P=o[8],V=MI(o);let Q=!0;if(3&l.type||E){const je=er(l,o),et=E?E(je):je,De=V.length,mt=E?Vt=>E(zt(Vt[l.index])):l.index;if(tn(a)){let Vt=null;if(!E&&b&&(Vt=function Jw(i,o,a,l){const h=i.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===a&&h[p+1]===l){const E=o[7],b=h[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(i,o,h,l.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=p,Vt.__ngLastListenerFn__=p,Q=!1;else{p=ko(l,o,P,p,!1);const nn=a.listen(et,h,p);V.push(p,nn),x&&x.push(h,mt,De,De+1)}}else p=ko(l,o,P,p,!0),et.addEventListener(h,p,_),V.push(p),x&&x.push(h,mt,De,_)}else p=ko(l,o,P,p,!1);const ve=l.outputs;let Oe;if(Q&&null!==ve&&(Oe=ve[h])){const je=Oe.length;if(je)for(let et=0;et<je;et+=2){const Ti=o[Oe[et]][Oe[et+1]].subscribe(p),ma=V.length;V.push(p,Ti),x&&x.push(h,l.index,ma,-(ma+1))}}}(p,h,h[11],_,i,o,!!a,l),Lf}function Qu(i,o,a,l){try{return!1!==a(l)}catch(h){return kI(i,h),!1}}function ko(i,o,a,l,h){return function p(_){if(_===Function)return l;const E=2&i.flags?tr(i.index,o):o;0==(32&o[2])&&_f(E);let b=Qu(o,0,l,_),S=p.__ngNextListenerFn__;for(;S;)b=Qu(o,0,S,_)&&b,S=S.__ngNextListenerFn__;return h&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function Uf(i=1){return function Fh(i){return(_t.lFrame.contextLView=function kl(i,o){for(;i>0;)o=o[15],i--;return o}(i,_t.lFrame.contextLView))[8]}(i)}function pm(i,o){let a=null;const l=function kg(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(i);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===l?X0(i,p,!0):lI(l,p))return h}else a=h}return a}function Vf(i){const o=Te()[16][6];if(!o.projection){const l=o.projection=hs(i?i.length:1,null),h=l.slice();let p=o.child;for(;null!==p;){const _=i?pm(p,i):0;null!==_&&(h[_]?h[_].projectionNext=p:l[_]=p,h[_]=p),p=p.next}}}function Z_(i,o=0,a){const l=Te(),h=Ft(),p=rc(h,20+i,16,null,a||null);null===p.projection&&(p.projection=o),Sl(),64!=(64&p.flags)&&function tS(i,o,a){tI(o[11],0,o,a,XC(i,a,o),q0(a.parent||o[6],a,o))}(h,l,p)}function Wa(i,o,a,l,h){const p=i[a+1],_=null===o;let E=l?Mo(p):Ga(p),b=!1;for(;0!==E&&(!1===b||_);){const x=i[E+1];sE(i[E],o)&&(b=!0,i[E+1]=l?rw(x):nw(x)),E=l?Mo(x):Ga(x)}b&&(i[a+1]=l?nw(p):rw(p))}function sE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ra(i,o)>=0}function X_(i,o){return function Ws(i,o,a,l){const h=Te(),p=Ft(),_=_i(2);p.firstUpdatePass&&function dE(i,o,a,l){const h=i.data;if(null===h[a+1]){const p=h[qn()],_=function eh(i,o){return o>=i.expandoStartIndex}(i,a);(function mE(i,o){return 0!=(i.flags&(o?16:32))})(p,l)&&null===o&&!_&&(o=!1),o=function or(i,o,a,l){const h=function _u(i){const o=_t.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=$f(a=ev(null,i,o,a,l),o.attrs,l),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==h)if(a=ev(h,i,o,a,l),null===p){let b=function hE(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ga(l))return i[Mo(l)]}(i,o,l);void 0!==b&&Array.isArray(b)&&(b=ev(null,i,o,b[1],l),b=$f(b,o.attrs,l),function iD(i,o,a,l){i[Mo(a?o.classBindings:o.styleBindings)]=l}(i,o,l,b))}else p=function sD(i,o,a){let l;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)l=$f(l,i[p].hostAttrs,a);return $f(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,l),function nD(i,o,a,l,h,p){let _=p?o.classBindings:o.styleBindings,E=Mo(_),b=Ga(_);i[l]=a;let x,S=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||ra(P,x)>0)&&(S=!0)}else x=a;if(h)if(0!==b){const V=Mo(i[E+1]);i[l+1]=e_(V,E),0!==V&&(i[V+1]=t_(i[V+1],l)),i[E+1]=function iS(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=e_(E,0),0!==E&&(i[E+1]=t_(i[E+1],l)),E=l;else i[l+1]=e_(b,0),0===E?E=l:i[b+1]=t_(i[b+1],l),b=l;S&&(i[l+1]=nw(i[l+1])),Wa(i,x,l,!0),Wa(i,x,l,!1),function Bf(i,o,a,l,h){const p=h?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&ra(p,o)>=0&&(a[l+1]=rw(a[l+1]))}(o,x,i,l,p),_=e_(E,b),p?o.classBindings=_:o.styleBindings=_}(h,p,o,a,_,l)}}(p,i,_,l),o!==dt&&ci(h,_,o)&&function Hf(i,o,a,l,h,p,_,E){if(!(3&o.type))return;const b=i.data,S=b[E+1];Ks(function cI(i){return 1==(1&i)}(S)?nv(b,o,a,h,Ga(S),_):void 0)||(Ks(p)||function Ng(i){return 2==(2&i)}(S)&&(p=nv(b,null,a,h,E,_)),function nI(i,o,a,l,h){const p=tn(i);if(o)h?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:k.DashCase;if(null==h)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),_|=k.Important),p?i.setStyle(a,l,h,_):a.style.setProperty(l,h,E?"important":"")}}}(l,_,Ns(qn(),a),h,p))}(p,p.data[qn()],h,h[11],i,h[_+1]=function gE(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=oe(bi(i)))),i}(o,a),l,_)}(i,o,null,!0),X_}function ev(i,o,a,l,h){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],l=$f(l,p.hostAttrs,h),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function $f(i,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),gr(i,_,!!a||o[++p]))}return void 0===i?null:i}function nv(i,o,a,l,h,p){const _=null===o;let E;for(;h>0;){const b=i[h],S=Array.isArray(b),x=S?b[1]:b,P=null===x;let V=a[h+1];V===dt&&(V=P?U:void 0);let Q=P?Fa(V,l):x===l?V:void 0;if(S&&!Ks(Q)&&(Q=Fa(b,l)),Ks(Q)&&(E=Q,_))return E;const ve=i[h+1];h=_?Mo(ve):Ga(ve)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=Fa(b,l))}return E}function Ks(i){return void 0!==i}function ym(i,o=""){const a=Te(),l=Ft(),h=i+20,p=l.firstCreatePass?rc(l,h,1,o,null):l.data[h],_=a[h]=function tc(i,o){return tn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);Vd(l,a,_,p),ni(p,!1)}function _c(i){return Gf("",i,""),_c}function Gf(i,o,a){const l=Te(),h=function qu(i,o,a,l){return ci(i,Ps(),a)?o+_e(a)+l:dt}(l,i,o,a);return h!==dt&&$u(l,qn(),h),Gf}function qf(i,o,a,l,h){const p=Te(),_=uc(p,i,o,a,l,h);return _!==dt&&$u(p,qn(),_),qf}const Ys=void 0;var lv=["en",[["a","p"],["AM","PM"],Ys],[["AM","PM"],Ys,Ys],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ys,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ys,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ys,"{1} 'at' {0}",Ys],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ju(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let rh={};function jn(i){const o=function qe(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=it(o);if(a)return a;const l=o.split("-")[0];if(a=it(l),a)return a;if("en"===l)return lv;throw new Error(`Missing locale data for the locale "${i}".`)}function Cm(i){return jn(i)[bt.PluralCase]}function it(i){return i in rh||(rh[i]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[i]),rh[i]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const Kn="en-US";let FE=Kn;function Er(i,o,a,l,h){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)Er(i[p],o,a,l,h);else{const p=Ft(),_=Te();let E=za(i)?i:K(i.provide),b=Mw(i);const S=un(),x=1048575&S.providerIndexes,P=S.directiveStart,V=S.providerIndexes>>20;if(za(i)||!i.multi){const Q=new Wo(b,h,Nf),ve=yv(E,o,h?x:x+V,P);-1===ve?(vo(Us(S,_),p,E),mv(p,i,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(Q),_.push(Q)):(a[ve]=Q,_[ve]=Q)}else{const Q=yv(E,o,x+V,P),ve=yv(E,o,x,x+V),Oe=Q>=0&&a[Q],je=ve>=0&&a[ve];if(h&&!je||!h&&!Oe){vo(Us(S,_),p,E);const et=function mD(i,o,a,l,h){const p=new Wo(i,a,Nf);return p.multi=[],p.index=o,p.componentProviders=0,JE(p,h,l&&!a),p}(h?gD:XE,a.length,h,l,b);!h&&je&&(a[ve].providerFactory=et),mv(p,i,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(et),_.push(et)}else mv(p,i,Q>-1?Q:ve,JE(a[h?ve:Q],b,!h&&l));!h&&l&&je&&a[ve].componentProviders++}}}function mv(i,o,a,l){const h=za(o),p=function C_(i){return!!i.useClass}(o);if(h||p){const b=(p?K(o.useClass):o).prototype.ngOnDestroy;if(b){const S=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const x=S.indexOf(a);-1===x?S.push(a,[l,b]):S[x+1].push(l,b)}else S.push(a,b)}}}function JE(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function yv(i,o,a,l){for(let h=a;h<l;h++)if(o[h]===i)return h;return-1}function XE(i,o,a,l){return _v(this.multi,[])}function gD(i,o,a,l){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=cs(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),_v(h,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],_v(h,p);return p}function _v(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function eb(i,o=[]){return a=>{a.providersResolver=(l,h)=>function QE(i,o,a){const l=Ft();if(l.firstCreatePass){const h=Pi(i);Er(a,l.data,l.blueprint,h,!0),Er(o,l.data,l.blueprint,h,!1)}}(l,h?h(i):i,o)}}class Dc{}class Ja{resolveComponentFactory(o){throw function yD(i){const o=Error(`No component factory found for ${oe(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let np=(()=>{class i{}return i.NULL=new Ja,i})();function dh(){return hh(un(),Te())}function hh(i,o){return new Tc(er(i,o))}let Tc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=dh,i})();function wv(i){return i instanceof Tc?i.nativeElement:i}class Ac{}let Xs=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function rp(){const i=Te(),a=tr(un().index,i);return function nb(i){return i[11]}(jr(a)?a:i)}(),i})(),rb=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class Pm{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Fm=new Pm("13.3.10"),Lm={};function ip(i,o,a,l,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(zt(p)),Ni(p))for(let E=10;E<p.length;E++){const b=p[E],S=b[1].firstChild;null!==S&&ip(b[1],b,S,l)}const _=a.type;if(8&_)ip(i,o,a.child,l);else if(32&_){const E=he(a,o);let b;for(;b=E();)l.push(b)}else if(16&_){const E=W0(o,a);if(Array.isArray(E))l.push(...E);else{const b=ft(o[16]);ip(b[1],b,E,l,!0)}}a=h?a.projectionNext:a.next}return l}class sp{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return ip(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ni(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Dg(o,l),ea(a,l))}this._attachedToViewContainer=!1}j0(this._lView[1],this._lView)}onDestroy(o){Lg(this._lView[1],this._lView,null,o)}markForCheck(){_f(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function vf(i,o,a){const l=o[10];l.begin&&l.begin();try{Bd(i,o,i.template,a)}catch(h){throw kI(o,h),h}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uf(i,o){Rg(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ae(902,"");this._appRef=o}}class ib extends sp{constructor(o){super(o),this._view=o}detectChanges(){xI(this._view)}checkNoChanges(){}get context(){return null}}class Ev extends np{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Pn(o);return new Cv(a,this.ngModule)}}function bv(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Cv extends Dc{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Jy(i){return i.map(ew).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return bv(this.componentDef.inputs)}get outputs(){return bv(this.componentDef.outputs)}create(o,a,l,h){const p=(h=h||this.ngModule)?function vD(i,o){return{get:(a,l,h)=>{const p=i.get(a,Lm,h);return p!==Lm||l===Lm?p:o.get(a,l,h)}}}(o,h.injector):o,_=p.get(Ac,Da),E=p.get(rb,null),b=_.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",x=l?function mf(i,o,a){if(tn(i))return i.selectRootElement(o,a===jt.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Mn(_.createRenderer(null,this.componentDef),S,function Um(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),P=this.componentDef.onPush?576:528,V=function Pw(i,o){return{components:[],scheduler:i||nf,clean:wS,playerHandler:o||null,flags:0}}(),Q=jd(0,null,null,1,0,null,null,null,null,null),ve=nc(null,Q,V,P,null,null,_,b,E,p);let Oe,je;po(ve);try{const et=function Kg(i,o,a,l,h,p){const _=a[1];a[20]=i;const b=rc(_,20,2,"#host",null),S=b.mergedAttrs=o.hostAttrs;null!==S&&(v_(b,S,!0),null!==i&&(xr(h,i,S),null!==b.classes&&pe(h,i,b.classes),null!==b.styles&&Q0(h,i,b.styles)));const x=l.createRenderer(i,o),P=nc(a,d_(o),null,o.onPush?64:16,a[20],b,l,x,p||null,null);return _.firstCreatePass&&(vo(Us(b,a),_,o.type),jg(_,b),Ew(b,a.length,1)),yf(a,P),a[20]=P}(x,this.componentDef,ve,_,b);if(x)if(l)xr(b,x,["ng-version",Fm.full]);else{const{attrs:De,classes:mt}=function Rn(i){const o=[],a=[];let l=1,h=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===h?""!==p&&o.push(p,i[++l]):8===h&&a.push(p);else{if(!xo(h))break;h=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);De&&xr(b,x,De),mt&&mt.length>0&&pe(b,x,mt.join(" "))}if(je=ln(Q,20),void 0!==a){const De=je.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Vt=a[mt];De.push(null!=Vt?Array.from(Vt):null)}}Oe=function Ow(i,o,a,l,h){const p=a[1],_=function bI(i,o,a){const l=un();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),g_(i,l,o,ic(i,o,1,null),a));const h=cs(o,i,l.directiveStart,l);ir(h,o);const p=er(l,o);return p&&ir(p,o),h}(p,a,o);if(l.components.push(_),i[8]=_,h&&h.forEach(b=>b(_,o)),o.contentQueries){const b=un();o.contentQueries(1,_,b.directiveStart)}const E=un();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(go(E.index),vw(a[1],E,0,E.directiveStart,E.directiveEnd,o),p_(o,_)),_}(et,this.componentDef,ve,V,[Hd]),Za(Q,ve,null)}finally{$r()}return new Sc(this.componentType,Oe,hh(je,ve),ve,je)}}class Sc extends class nl{}{constructor(o,a,l,h,p){super(),this.location=l,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new ib(h),this.componentType=o}get injector(){return new js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class eo{}class Iv{}const No=new Map;class up extends eo{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ev(this);const l=Fn(o);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=zg(o,a,[{provide:eo,useValue:this},{provide:np,useValue:this.componentFactoryResolver}],oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=la.THROW_IF_NOT_FOUND,l=yt.Default){return o===la||o===eo||o===Gg?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class fh extends Iv{constructor(o){super(),this.moduleType=o,null!==Fn(o)&&function ap(i){const o=new Set;!function a(l){const h=Fn(l,!0),p=h.id;null!==p&&(function Dv(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${oe(o)} vs ${oe(o.name)}`)}(p,No.get(p),l),No.set(p,l));const _=y(h.imports);for(const E of _)o.has(E)||(o.add(E),a(E))}(i)}(o)}create(o){return new up(this.moduleType,o)}}function ub(i,o,a){const l=fr()+i,h=Te();return h[l]===dt?Qi(h,l,a?o.call(a):o()):function Tf(i,o){return i[o]}(h,l)}function Vm(i,o,a,l){return Bm(Te(),fr(),i,o,a,l)}function lb(i,o,a,l,h){return function gb(i,o,a,l,h,p,_){const E=o+a;return ca(i,E,h,p)?Qi(i,E+2,_?l.call(_,h,p):l(h,p)):Xa(i,E+2)}(Te(),fr(),i,o,a,l,h)}function Xa(i,o){const a=i[o];return a===dt?void 0:a}function Bm(i,o,a,l,h,p){const _=o+a;return ci(i,_,h)?Qi(i,_+1,p?l.call(p,h):l(h)):Xa(i,_+1)}function Av(i,o){const a=Ft();let l;const h=i+20;a.firstCreatePass?(l=function rl(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const p=l.factory||(l.factory=Xn(l.type)),_=_n(Nf);try{const E=gt(!1),b=p();return gt(E),function KI(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Te(),h,b),b}finally{_n(_)}}function mb(i,o,a){const l=i+20,h=Te(),p=Ui(h,l);return function dp(i,o){return i[1].data[o].pure}(h,l)?Bm(h,fr(),o,p.transform,a,p):p.transform(a)}function Qt(i){return o=>{setTimeout(i,void 0,o)}}const fa=class bD extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var h,p,_;let E=o,b=a||(()=>null),S=l;if(o&&"object"==typeof o){const P=o;E=null===(h=P.next)||void 0===h?void 0:h.bind(P),b=null===(p=P.error)||void 0===p?void 0:p.bind(P),S=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=Qt(b),E&&(E=Qt(E)),S&&(S=Qt(S)));const x=super.subscribe({next:E,error:b,complete:S});return o instanceof J.w0&&o.add(x),x}};function jm(){return this._results[oc()]()}class il{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=oc(),l=il.prototype;l[a]||(l[a]=jm)}get changes(){return this._changes||(this._changes=new fa)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=pr(o);(this._changesDetected=!function Uh(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],p=o[l];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let eu=(()=>{class i{}return i.__NG_ELEMENT_ID__=_b,i})();const $m=eu,yb=class extends $m{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=nc(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Za(a,l,o),new sp(l)}};function _b(){return hp(un(),Te())}function hp(i,o){return 4&i.type?new yb(o,i,hh(i,o)):null}let Hm=(()=>{class i{}return i.__NG_ELEMENT_ID__=vb,i})();function vb(){return ph(un(),Te())}const wb=Hm,Eb=class extends wb{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return hh(this._hostTNode,this._hostLView)}get injector(){return new js(this._hostTNode,this._hostLView)}get parentInjector(){const o=nr(this._hostTNode,this._hostLView);if(Ko(o)){const a=Ls(o,this._hostLView),l=Fs(o);return new js(a[1].data[l+8],a)}return new js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=bb(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const h=o.createEmbeddedView(a||{});return this.insert(h,l),h}createComponent(o,a,l,h,p){const _=o&&!function Du(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const P=a||{};E=P.index,l=P.injector,h=P.projectableNodes,p=P.ngModuleRef}const b=_?o:new Cv(Pn(o)),S=l||this.parentInjector;if(!p&&null==b.ngModule){const V=(_?S:this.parentInjector).get(eo,null);V&&(p=V)}const x=b.create(S,h,void 0,p);return this.insert(x.hostView,E),x}insert(o,a){const l=o._lView,h=l[1];if(function Aa(i){return Ni(i[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const P=l[3],V=new Eb(P,P[6],P[3]);V.detach(V.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function Lu(i,o,a,l){const h=10+l,p=a.length;l>0&&(a[h-1][4]=o),l<p-10?(o[4]=a[h],Pa(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function V0(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=128}(h,l,_,p);const E=Mg(p,_),b=l[11],S=Sg(b,_[7]);return null!==S&&function af(i,o,a,l,h,p){l[0]=h,l[6]=o,Rg(i,l,a,1,h,p)}(h,_[6],b,l,S,E),o.attachToViewContainerRef(),Pa(xv(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=bb(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Dg(this._lContainer,a);l&&(ea(xv(this._lContainer),a),j0(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Dg(this._lContainer,a);return l&&null!=ea(xv(this._lContainer),a)?new sp(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function bb(i){return i[8]}function xv(i){return i[8]||(i[8]=[])}function ph(i,o){let a;const l=o[i.index];if(Ni(l))a=l;else{let h;if(8&i.type)h=zt(l);else{const p=o[11];h=p.createComment("");const _=er(i,o);Vu(p,Sg(p,_),h,function eI(i,o){return tn(i)?i.nextSibling(o):o.nextSibling}(p,_),!1)}o[i.index]=a=AI(l,o,h,i),yf(o,a)}return new Eb(a,i,o)}class fp{constructor(o){this.queryList=o,this.matches=null}clone(){return new fp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new Gm(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Ov(o,a).matches&&this.queries[a].setDirty()}}class gh{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class no{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,h);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new no(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class pp{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new pp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const p=l[h];this.matchTNodeWithReadOption(o,a,Ib(a,p)),this.matchTNodeWithReadOption(o,a,Na(a,o,p,!1,!1))}else l===eu?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Na(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Tc||h===Hm||h===eu&&4&a.type)this.addMatch(a.index,-2);else{const p=Na(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Ib(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Db(i,o,a,l){return-1===a?function gp(i,o){return 11&i.type?hh(i,o):4&i.type?hp(i,o):null}(o,i):-2===a?function Tb(i,o,a){return a===Tc?hh(o,i):a===eu?hp(o,i):a===Hm?ph(o,i):void 0}(i,o,l):cs(i,i[1],a,o)}function Mv(i,o,a,l){const h=o[19].queries[l];if(null===h.matches){const p=i.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const S=_[b];E.push(S<0?null:Db(o,p[S],_[b+1],a.metadata.read))}h.matches=E}return h.matches}function Rv(i,o,a,l){const h=i.queries.getByIndex(a),p=h.matches;if(null!==p){const _=Mv(i,o,h,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)l.push(_[E/2]);else{const S=p[E+1],x=o[-b];for(let P=10;P<x.length;P++){const V=x[P];V[17]===V[3]&&Rv(V[1],V,S,l)}if(null!==x[9]){const P=x[9];for(let V=0;V<P.length;V++){const Q=P[V];Rv(Q[1],Q,S,l)}}}}}return l}function Ab(i){const o=Te(),a=Ft(),l=vu();nd(l+1);const h=Ov(a,l);if(i.dirty&&ho(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const p=h.crossesNgTemplate?Rv(a,o,l,[]):Mv(a,o,h,l);i.reset(p,wv),i.notifyOnChanges()}return!0}return!1}function qm(i,o,a,l){const h=Ft();if(h.firstCreatePass){const p=un();(function Nv(i,o,a){null===i.queries&&(i.queries=new no),i.queries.track(new pp(o,a))})(h,new gh(o,a,l),p.index),function ID(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function kv(i,o,a){const l=new il(4==(4&a));Lg(i,o,l,l.destroy),null===o[19]&&(o[19]=new Gm),o[19].queries.push(new fp(l))}(h,Te(),a)}function Sb(){return function xb(i,o){return i[19].queries[o].queryList}(Te(),vu())}function Ov(i,o){return i.queries.getByIndex(o)}function Mb(i,o){return hp(i,o)}function kc(...i){}const ol=new fn("Application Initializer");let al=(()=>{class i{constructor(a){this.appInits=a,this.resolve=kc,this.reject=kc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(q_(p))a.push(p);else if(mc(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(rt(ol,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wh=new fn("AppId",{providedIn:"root",factory:function Hv(){return`${vp()}${vp()}${vp()}`}});function vp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Gv=new fn("Platform Initializer"),ND=new fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qv=new fn("appBootstrapListener");let Zv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const tu=new fn("LocaleId",{providedIn:"root",factory:()=>$t(tu,yt.Optional|yt.SkipSelf)||function wp(){return"undefined"!=typeof $localize&&$localize.locale||Kn}()}),PD=new fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class LD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Ep=(()=>{class i{compileModuleSync(a){return new fh(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(Fn(a).declarations).reduce((_,E)=>{const b=Pn(E);return b&&_.push(new Cv(b)),_},[]);return new LD(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Kb=(()=>Promise.resolve(0))();function zv(i){"undefined"==typeof Zone?Kb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Es{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fa(!1),this.onMicrotaskEmpty=new fa(!1),this.onStable=new fa(!1),this.onError=new fa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function UD(){let i=Ut.requestAnimationFrame,o=Ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function bp(i){const o=()=>{!function Yb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ut,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,bh(i),i.isCheckStableRunning=!0,Wv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),bh(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,p,_,E)=>{try{return Cp(i),a.invokeTask(h,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),Kv(i)}},onInvoke:(a,l,h,p,_,E,b)=>{try{return Cp(i),a.invoke(h,p,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),Kv(i)}},onHasTask:(a,l,h,p)=>{a.hasTask(h,p),l===h&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,bh(i),Wv(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,h,p)=>(a.handleError(h,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Es.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Es.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,Wm,kc,kc);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Wm={};function Wv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function bh(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Cp(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Kv(i){i._nesting--,Wv(i)}class es{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fa,this.onMicrotaskEmpty=new fa,this.onStable=new fa,this.onError=new fa}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}let Yv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Es.assertNotInAngularZone(),zv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(rt(Es))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),Km=(()=>{class i{constructor(){this._applications=new Map,ga.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return ga.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Qv{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Qb(i){ga=i}let ga=new Qv,ro=null;const Jv=new fn("AllowMultipleToken"),ul=new fn("PlatformOnDestroy");class ll{constructor(o,a){this.name=o,this.token=a}}function Ym(i,o,a=[]){const l=`Platform: ${o}`,h=new fn(l);return(p=[])=>{let _=Xv();if(!_||_.injector.get(Jv,!1)){const E=[...a,...p,{provide:h,useValue:!0}];i?i(E):function Oc(i){if(ro&&!ro.get(Jv,!1))throw new Ae(400,"");ro=i;const o=i.get(eC),a=i.get(Gv,null);a&&a.forEach(l=>l())}(function BD(i=[],o){return la.create({name:o,providers:[{provide:qg,useValue:"platform"},{provide:ul,useValue:()=>ro=null},...i]})}(E,l))}return function Xb(i){const o=Xv();if(!o)throw new Ae(401,"");return o}()}}function Xv(){var i;return null!==(i=null==ro?void 0:ro.get(eC))&&void 0!==i?i:null}let eC=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Qm(i,o){let a;return a="noop"===i?new es:("zone.js"===i?void 0:i)||new Es({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:Es,useValue:E}];return E.run(()=>{const S=la.create({providers:b,parent:this.injector,name:a.moduleType.name}),x=a.create(S),P=x.injector.get(Ld,null);if(!P)throw new Ae(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:Q=>{P.handleError(Q)}});x.onDestroy(()=>{Jm(this._modules,x),V.unsubscribe()})}),function tC(i,o,a){try{const l=a();return q_(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const V=x.injector.get(al);return V.runInitializers(),V.donePromise.then(()=>(function LE(i){Lt(i,"Expected localeId to be defined"),"string"==typeof i&&(FE=i.toLowerCase().replace(/_/g,"-"))}(x.injector.get(tu,Kn)||Kn),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const h=nC({},l);return function VD(i,o,a){const l=new fh(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const l=a.injector.get(e0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Ae(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(ul,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(rt(la))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function nC(i,o){return Array.isArray(o)?o.reduce(nC,i):Object.assign(Object.assign({},i),o)}let e0=(()=>{class i{constructor(a,l,h,p){this._zone=a,this._injector=l,this._exceptionHandler=h,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new O.y(b=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Es.assertNotInAngularZone(),zv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Es.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{S.unsubscribe(),x.unsubscribe()}});this.isStable=(0,se.T)(_,E.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ae(405,"");let h;h=a instanceof Dc?a:this._injector.get(np).resolveComponentFactory(a),this.componentTypes.push(h.componentType);const p=function Jb(i){return i.isBoundToModule}(h)?void 0:this._injector.get(eo),E=h.create(la.NULL,[],l||h.selector,p),b=E.location.nativeElement,S=E.injector.get(Yv,null),x=S&&E.injector.get(Km);return S&&x&&x.registerApplication(b,S),E.onDestroy(()=>{this.detachView(E.hostView),Jm(this.components,E),x&&x.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ae(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Jm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(qv,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(rt(Es),rt(la),rt(Ld),rt(al))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Jm(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let t0=!0,n0=!1;function jD(){return n0=!0,t0}function rC(){if(n0)throw new Error("Cannot enable prod mode after platform setup.");t0=!1}let Xm=(()=>{class i{}return i.__NG_ELEMENT_ID__=r0,i})();function r0(i){return function $D(i,o,a){if(Hc(i)&&!a){const l=tr(i.index,o);return new sp(l,l)}return 47&i.type?new sp(o[16],o):null}(un(),Te(),16==(16&i))}class cC{constructor(){}supports(o){return If(o)}create(o){return new a0(o)}}const zD=(i,o)=>o;class a0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||zD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<hC(l,h,p)?a:l,E=hC(_,h,p),b=_.currentIndex;if(_===l)h--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)h++;else{p||(p=[]);const S=E-h,x=b-h;if(S!=x){for(let V=0;V<S;V++){const Q=V<p.length?p[V]:p[V]=0,ve=Q+V;x<=ve&&ve<S&&(p[V]=Q+1)}p[_.previousIndex]=x-S}}E!==b&&o(_,E,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!If(o))throw new Ae(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else h=0,function Df(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[oc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new Pr(a,l),p,h),o}_verifyReinsertion(o,a,l,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new dC),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Pr{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class dC{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new WD,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hC(i,o,a){const l=i.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class fC{constructor(){}supports(o){return o instanceof Map||O_(o)}create(){return new KD}}class KD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||O_(o)))throw new Ae(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const l=new YD(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class YD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iy(){return new sy([new cC])}let sy=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||iy()),deps:[[i,new qs,new mr]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new Ae(901,"")}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:iy}),i})();function oy(){return new Ih([new fC])}let Ih=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||oy()),deps:[[i,new qs,new mr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ae(901,"")}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:oy}),i})();const u0=Ym(null,"core",[]);let mC=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(rt(e0))},i.\u0275mod=Dr({type:i}),i.\u0275inj=Ht({}),i})()},3942:(Ze,ye,N)=>{N.d(ye,{Z:()=>Ae});var c=N(2090),J=N(4859),O=N(9681),se=N(1877);class re{constructor(_e,be){this._delegate=_e,this.firebase=be,(0,O._addComponent)(_e,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(_e,be=O._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const tt=this._delegate.container.getProvider(_e);return!tt.isInitialized()&&"EXPLICIT"===(null===(We=tt.getComponent())||void 0===We?void 0:We.instantiationMode)&&tt.initialize(),tt.getImmediate({identifier:be})}_removeServiceInstance(_e,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(be)}_addComponent(_e){(0,O._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,O._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function le(){const Qe=function oe(Qe){const _e={},be={__esModule:!0,initializeApp:function xe(Ue,B={}){const we=O.initializeApp(Ue,B);if((0,c.r3)(_e,we.name))return _e[we.name];const W=new Qe(we,be);return _e[we.name]=W,W},app:tt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Ue){const B=Ue.name,we=B.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const W=(ie=tt())=>{if("function"!=typeof ie[we])throw ue.create("invalid-app-argument",{appName:B});return ie[we]()};void 0!==Ue.serviceProps&&(0,c.ZB)(W,Ue.serviceProps),be[we]=W,Qe.prototype[we]=function(...ie){return this._getService.bind(this,B).apply(this,Ue.multipleInstances?ie:[])}}return"PUBLIC"===Ue.type?be[we]:null},removeApp:function We(Ue){delete _e[Ue]},useAsService:function Ve(Ue,B){return"serverAuth"===B?null:B},modularAPIs:O}};function tt(Ue){if(!(0,c.r3)(_e,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ue});return _e[Ue]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ee(){return Object.keys(_e).map(Ue=>_e[Ue])}}),tt.App=Qe,be}(re);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function _e(be){(0,c.ZB)(Qe,be)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Qe}(),j=new se.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=$;!function Re(Qe){(0,O.registerVersion)("@firebase/app-compat","0.1.26",Qe)}()},9681:(Ze,ye,N)=>{N.r(ye),N.d(ye,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Mi,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>Zt,_apps:()=>Yt,_clearComponents:()=>rs,_components:()=>yn,_getProvider:()=>Ht,_registerComponent:()=>Cr,_removeServiceInstance:()=>Pt,deleteApp:()=>yt,getApp:()=>Qr,getApps:()=>pi,initializeApp:()=>As,onLog:()=>_n,registerVersion:()=>hn,setLogLevel:()=>io});var c=N(5861),J=N(4859),O=N(1877),se=N(2090),re=N(8766);class de{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function ue(H){const X=H.getComponent();return"VERSION"===(null==X?void 0:X.type)}(ke)){const Ke=ke.getImmediate();return`${Ke.library}/${Ke.version}`}return null}).filter(ke=>ke).join(" ")}}const oe="@firebase/app",$=new O.Yd("@firebase/app"),Lt="[DEFAULT]",Ge={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yt=new Map,yn=new Map;function Xt(H,X){try{H.container.addComponent(X)}catch(ke){$.debug(`Component ${X.name} failed to register with FirebaseApp ${H.name}`,ke)}}function Zt(H,X){H.container.addOrOverwriteComponent(X)}function Cr(H){const X=H.name;if(yn.has(X))return $.debug(`There were multiple attempts to register component ${X}.`),!1;yn.set(X,H);for(const ke of Yt.values())Xt(ke,H);return!0}function Ht(H,X){const ke=H.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),H.container.getProvider(X)}function Pt(H,X,ke=Lt){Ht(H,X).clearInstance(ke)}function rs(){yn.clear()}const ur=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ir{constructor(X,ke,Ke){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=Ke,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}const Mi="9.8.2";function As(H,X={}){"object"!=typeof X&&(X={name:X});const ke=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},X),Ke=ke.name;if("string"!=typeof Ke||!Ke)throw ur.create("bad-app-name",{appName:String(Ke)});const pt=Yt.get(Ke);if(pt){if((0,se.vZ)(H,pt.options)&&(0,se.vZ)(ke,pt.config))return pt;throw ur.create("duplicate-app",{appName:Ke})}const Dt=new J.H0(Ke);for(const It of yn.values())Dt.addComponent(It);const rn=new Ir(H,ke,Dt);return Yt.set(Ke,rn),rn}function Qr(H=Lt){const X=Yt.get(H);if(!X)throw ur.create("no-app",{appName:H});return X}function pi(){return Array.from(Yt.values())}function yt(H){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,c.Z)(function*(H){const X=H.name;Yt.has(X)&&(Yt.delete(X),yield Promise.all(H.container.getProviders().map(ke=>ke.delete())),H.isDeleted=!0)})).apply(this,arguments)}function hn(H,X,ke){var Ke;let pt=null!==(Ke=Ge[H])&&void 0!==Ke?Ke:H;ke&&(pt+=`-${ke}`);const Dt=pt.match(/\s|\//),rn=X.match(/\s|\//);if(Dt||rn){const It=[`Unable to register library "${pt}" with version "${X}":`];return Dt&&It.push(`library name "${pt}" contains illegal characters (whitespace or "/")`),Dt&&rn&&It.push("and"),rn&&It.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void $.warn(It.join(" "))}Cr(new J.wA(`${pt}-version`,()=>({library:pt,version:X}),"VERSION"))}function _n(H,X){if(null!==H&&"function"!=typeof H)throw ur.create("invalid-log-argument");(0,O.Am)(H,X)}function io(H){(0,O.Ub)(H)}const In="firebase-heartbeat-store";let gi=null;function Lo(){return gi||(gi=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(H,X)=>{0===X&&H.createObjectStore(In)}}).catch(H=>{throw ur.create("storage-open",{originalErrorMessage:H.message})})),gi}function ot(){return(ot=(0,c.Z)(function*(H){try{return(yield Lo()).transaction(In).objectStore(In).get(ei(H))}catch(X){throw ur.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function Et(H,X){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(H,X){try{const Ke=(yield Lo()).transaction(In,"readwrite");return yield Ke.objectStore(In).put(X,ei(H)),Ke.done}catch(ke){throw ur.create("storage-set",{originalErrorMessage:ke.message})}})).apply(this,arguments)}function ei(H){return`${H.name}!${H.options.appId}`}class cr{constructor(X){this.container=X,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new q(ke),this._heartbeatsCachePromise=this._storage.read().then(Ke=>(this._heartbeatsCache=Ke,Ke))}triggerHeartbeat(){var X=this;return(0,c.Z)(function*(){const Ke=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pt=dr();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==pt&&!X._heartbeatsCache.heartbeats.some(Dt=>Dt.date===pt))return X._heartbeatsCache.heartbeats.push({date:pt,agent:Ke}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Dt=>{const rn=new Date(Dt.date).valueOf();return Date.now()-rn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,c.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const ke=dr(),{heartbeatsToSend:Ke,unsentEntries:pt}=function U(H,X=1024){const ke=[];let Ke=H.slice();for(const pt of H){const Dt=ke.find(rn=>rn.agent===pt.agent);if(Dt){if(Dt.dates.push(pt.date),Z(ke)>X){Dt.dates.pop();break}}else if(ke.push({agent:pt.agent,dates:[pt.date]}),Z(ke)>X){ke.pop();break}Ke=Ke.slice(1)}return{heartbeatsToSend:ke,unsentEntries:Ke}}(X._heartbeatsCache.heartbeats),Dt=(0,se.L)(JSON.stringify({version:2,heartbeats:Ke}));return X._heartbeatsCache.lastSentHeartbeatDate=ke,pt.length>0?(X._heartbeatsCache.heartbeats=pt,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Dt})()}}function dr(){return(new Date).toISOString().substring(0,10)}class q{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,c.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function jt(H){return ot.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var ke=this;return(0,c.Z)(function*(){var Ke;if(yield ke._canUseIndexedDBPromise){const Dt=yield ke.read();return Et(ke.app,{lastSentHeartbeatDate:null!==(Ke=X.lastSentHeartbeatDate)&&void 0!==Ke?Ke:Dt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var ke=this;return(0,c.Z)(function*(){var Ke;if(yield ke._canUseIndexedDBPromise){const Dt=yield ke.read();return Et(ke.app,{lastSentHeartbeatDate:null!==(Ke=X.lastSentHeartbeatDate)&&void 0!==Ke?Ke:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...X.heartbeats]})}})()}}function Z(H){return(0,se.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Ie(H){Cr(new J.wA("platform-logger",X=>new de(X),"PRIVATE")),Cr(new J.wA("heartbeat",X=>new cr(X),"PRIVATE")),hn(oe,"0.7.25",H),hn(oe,"0.7.25","esm2017"),hn("fire-js","")}("")},4859:(Ze,ye,N)=>{N.d(ye,{H0:()=>oe,wA:()=>O});var c=N(5861),J=N(2090);class O{constructor($,j,K){this.name=$,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const se="[DEFAULT]";class re{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const K=new J.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:j});Be&&K.resolve(Be)}catch(Be){}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const K=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Be=null!==(j=null==$?void 0:$.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Re){if(Be)return null;throw Re}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(le){return"EAGER"===le.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:se})}catch(j){}for(const[j,K]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(j);try{const Re=this.getOrInitializeService({instanceIdentifier:Be});K.resolve(Re)}catch(Re){}}}}clearInstance($=se){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,c.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=se){return this.instances.has($)}getOptions($=se){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,K=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[Re,Ae]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Re)&&Ae.resolve(Be);return Be}onInit($,j){var K;const Be=this.normalizeInstanceIdentifier(j),Re=null!==(K=this.onInitCallbacks.get(Be))&&void 0!==K?K:new Set;Re.add($),this.onInitCallbacks.set(Be,Re);const Ae=this.instances.get(Be);return Ae&&$(Ae,Be),()=>{Re.delete($)}}invokeOnInitCallbacks($,j){const K=this.onInitCallbacks.get(j);if(K)for(const Be of K)try{Be($,j)}catch(Re){}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let K=this.instances.get($);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(le=$,le===se?void 0:le),options:j}),this.instances.set($,K),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(K,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,K)}catch(Be){}var le;return K||null}normalizeInstanceIdentifier($=se){return this.component?this.component.multipleInstances?$:se:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new re($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(Ze,ye,N)=>{N.d(ye,{Am:()=>le,Ub:()=>oe,Yd:()=>ue,in:()=>J});const c=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},se=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},de=($,j,...K)=>{if(j<$.logLevel)return;const Be=(new Date).toISOString(),Re=re[j];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Re](`[${Be}]  ${$.name}:`,...K)};class ue{constructor(j){this.name=j,this._logLevel=se,this._logHandler=de,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in J))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...j),this._logHandler(this,J.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...j),this._logHandler(this,J.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,J.INFO,...j),this._logHandler(this,J.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,J.WARN,...j),this._logHandler(this,J.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...j),this._logHandler(this,J.ERROR,...j)}}function oe($){c.forEach(j=>{j.setLogLevel($)})}function le($,j){for(const K of c){let Be=null;j&&j.level&&(Be=O[j.level]),K.userLogHandler=null===$?null:(Re,Ae,...Qe)=>{const _e=Qe.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(We){return null}}).filter(be=>be).join(" ");Ae>=(null!=Be?Be:Re.logLevel)&&$({level:J[Ae].toLowerCase(),message:_e,args:Qe,type:Re.name})}}}},8766:(Ze,ye,N)=>{N.d(ye,{Lj:()=>xe,X3:()=>tt});var c=N(5861);let O,se;const ue=new WeakMap,oe=new WeakMap,le=new WeakMap,$=new WeakMap,j=new WeakMap;let Re={get(B,we,W){if(B instanceof IDBTransaction){if("done"===we)return oe.get(B);if("objectStoreNames"===we)return B.objectStoreNames||le.get(B);if("store"===we)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return be(B[we])},set:(B,we,W)=>(B[we]=W,!0),has:(B,we)=>B instanceof IDBTransaction&&("done"===we||"store"===we)||we in B};function _e(B){return"function"==typeof B?function Qe(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...we){return B.apply(We(this),we),be(ue.get(this))}:function(...we){return be(B.apply(We(this),we))}:function(we,...W){const ie=B.call(We(this),we,...W);return le.set(ie,we.sort?we.sort():[we]),be(ie)}}(B):(B instanceof IDBTransaction&&function Be(B){if(oe.has(B))return;const we=new Promise((W,ie)=>{const te=()=>{B.removeEventListener("complete",me),B.removeEventListener("error",ae),B.removeEventListener("abort",ae)},me=()=>{W(),te()},ae=()=>{ie(B.error||new DOMException("AbortError","AbortError")),te()};B.addEventListener("complete",me),B.addEventListener("error",ae),B.addEventListener("abort",ae)});oe.set(B,we)}(B),((B,we)=>we.some(W=>B instanceof W))(B,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Re):B)}function be(B){if(B instanceof IDBRequest)return function K(B){const we=new Promise((W,ie)=>{const te=()=>{B.removeEventListener("success",me),B.removeEventListener("error",ae)},me=()=>{W(be(B.result)),te()},ae=()=>{ie(B.error),te()};B.addEventListener("success",me),B.addEventListener("error",ae)});return we.then(W=>{W instanceof IDBCursor&&ue.set(W,B)}).catch(()=>{}),j.set(we,B),we}(B);if($.has(B))return $.get(B);const we=_e(B);return we!==B&&($.set(B,we),j.set(we,B)),we}const We=B=>j.get(B);function tt(B,we,{blocked:W,upgrade:ie,blocking:te,terminated:me}={}){const ae=indexedDB.open(B,we),Pe=be(ae);return ie&&ae.addEventListener("upgradeneeded",ut=>{ie(be(ae.result),ut.oldVersion,ut.newVersion,be(ae.transaction))}),W&&ae.addEventListener("blocked",()=>W()),Pe.then(ut=>{me&&ut.addEventListener("close",()=>me()),te&&ut.addEventListener("versionchange",()=>te())}).catch(()=>{}),Pe}function xe(B,{blocked:we}={}){const W=indexedDB.deleteDatabase(B);return we&&W.addEventListener("blocked",()=>we()),be(W).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ve=new Map;function Ue(B,we){if(!(B instanceof IDBDatabase)||we in B||"string"!=typeof we)return;if(Ve.get(we))return Ve.get(we);const W=we.replace(/FromIndex$/,""),ie=we!==W,te=Ce.includes(W);if(!(W in(ie?IDBIndex:IDBObjectStore).prototype)||!te&&!Ee.includes(W))return;const me=function(){var ae=(0,c.Z)(function*(Pe,...ut){const Bt=this.transaction(Pe,te?"readwrite":"readonly");let Lt=Bt.store;return ie&&(Lt=Lt.index(ut.shift())),(yield Promise.all([Lt[W](...ut),te&&Bt.done]))[0]});return function(ut){return ae.apply(this,arguments)}}();return Ve.set(we,me),me}!function Ae(B){Re=B(Re)}(B=>sR(iR({},B),{get:(we,W,ie)=>Ue(we,W)||B.get(we,W,ie),has:(we,W)=>!!Ue(we,W)||B.has(we,W)}))},5861:(Ze,ye,N)=>{function c(O,se,re,de,ue,oe,le){try{var $=O[oe](le),j=$.value}catch(K){return void re(K)}$.done?se(j):Promise.resolve(j).then(de,ue)}function J(O){return function(){var se=this,re=arguments;return new Promise(function(de,ue){var oe=O.apply(se,re);function le(j){c(oe,de,ue,le,$,"next",j)}function $(j){c(oe,de,ue,le,$,"throw",j)}le(void 0)})}}N.d(ye,{Z:()=>J})}},Ze=>{Ze(Ze.s=2943)}]);