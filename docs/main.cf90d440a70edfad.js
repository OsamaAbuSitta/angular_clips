"use strict";var mN=Object.defineProperty,yN=Object.defineProperties,_N=Object.getOwnPropertyDescriptors,fx=Object.getOwnPropertySymbols,vN=Object.prototype.hasOwnProperty,wN=Object.prototype.propertyIsEnumerable,px=(Ke,_e,N)=>_e in Ke?mN(Ke,_e,{enumerable:!0,configurable:!0,writable:!0,value:N}):Ke[_e]=N,gx=(Ke,_e)=>{for(var N in _e||(_e={}))vN.call(_e,N)&&px(Ke,N,_e[N]);if(fx)for(var N of fx(_e))wN.call(_e,N)&&px(Ke,N,_e[N]);return Ke},mx=(Ke,_e)=>yN(Ke,_N(_e));(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(Ke,_e,N)=>{N.d(_e,{Dh:()=>ie,GT:()=>ge,cc:()=>Se,hO:()=>He,on:()=>$,pX:()=>ne,xv:()=>ce});var h=N(5e3),Q=N(127),O=N(5813);Ke=N.hmd(Ke);const ae=["ngOnDestroy"],ne=(be,Ge,Ze,De={})=>new Proxy(be,{get:(Ee,Ie)=>Ze.runOutsideAngular(()=>{var Be;if(be[Ie])return(null===(Be=null==De?void 0:De.spy)||void 0===Be?void 0:Be.get)&&De.spy.get(Ie,be[Ie]),be[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const Ue=Ge.toPromise().then(j=>{const we=j&&j[Ie];return"function"==typeof we?we.bind(j):we&&we.then?we.then(W=>Ze.run(()=>W)):Ze.run(()=>we)});return new Proxy(()=>{},{get:(j,we)=>Ue[we],apply:(j,we,W)=>Ue.then(re=>{var X;const me=re&&re(...W);return(null===(X=null==De?void 0:De.spy)||void 0===X?void 0:X.apply)&&De.spy.apply(Ie,W,me),me})})})}),ge=(be,Ge)=>{Ge.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(De=>{Object.defineProperty(be.prototype,De,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,De))})})};class le{constructor(Ge){return Ge}}const ie=new h.OlP("angularfire2.app.options"),ce=new h.OlP("angularfire2.app.name");function $(be,Ge,Ze){const Ee="object"==typeof Ze&&Ze||{};Ee.name=Ee.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Be=Q.Z.apps.filter(Ue=>Ue&&Ue.name===Ee.name)[0]||Ge.runOutsideAngular(()=>Q.Z.initializeApp(be,Ee));try{JSON.stringify(be)!==JSON.stringify(Be.options)&&B("error",`${Be.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new le(Be)}const B=(be,...Ge)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)},ee={provide:le,useFactory:$,deps:[ie,h.R0b,[new h.FiY,ce]]};let He=(()=>{class be{constructor(Ze){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",h.q4F.full,Ze.toString())}static initializeApp(Ze,De){return{ngModule:be,providers:[{provide:ie,useValue:Ze},{provide:ce,useValue:De}]}}}return be.\u0275fac=function(Ze){return new(Ze||be)(h.LFG(h.Lbi))},be.\u0275mod=h.oAB({type:be}),be.\u0275inj=h.cJS({providers:[ee]}),be})();function Se(be,Ge,Ze,De,Ee){const[,Ie,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===be)||[];if(Ie)return function ke(be,Ge){try{return be.toString()===Ge.toString()}catch(Ze){return be===Ge}}(Ee,Be)||(fe("error",`${Ge} was already initialized on the ${Ze} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:Ee,was:Be})),Ie;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([be,Ue,Ee]),Ue}}const Ve=!!Ke.hot,fe=(be,...Ge)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ke,_e,N)=>{N.d(_e,{q4:()=>ba,iC:()=>Oh,HU:()=>Jc,vb:()=>Pp,JM:()=>Go});var h=N(5e3),Q=N(5867),O=N(5861),ae=N(9681),ne=N(2090),ge=N(4859),le=N(1877),ie=N(8766);const ce="@firebase/installations",$="0.5.9",ee=`w:${$}`,He="FIS_v2",Ge=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(b){return b instanceof ne.ZR&&b.code.includes("request-failed")}function De({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ee(b){return{token:b.token,requestStatus:2,expiresIn:re(b.expiresIn),creationTime:Date.now()}}function Ie(b,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(b,D){const F=(yield D.json()).error;return Ge.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function j(b,{refreshToken:D}){const x=Ue(b);return x.append("Authorization",function X(b){return`${He} ${b}`}(D)),x}function we(b){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function re(b){return Number(b.replace("s","000"))}function me(b,D){return se.apply(this,arguments)}function se(){return(se=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const F=De(b),K=Ue(b),te=D.getImmediate({optional:!0});if(te){const lt=yield te.getHeartbeatsHeader();lt&&K.append("x-firebase-client",lt)}const Ye={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:He,appId:b.appId,sdkVersion:ee})},nt=yield we(()=>fetch(F,Ye));if(nt.ok){const lt=yield nt.json();return{fid:lt.fid||x,registrationStatus:2,refreshToken:lt.refreshToken,authToken:Ee(lt.authToken)}}throw yield Ie("Create Installation",nt)})).apply(this,arguments)}function Ne(b){return new Promise(D=>{setTimeout(D,b)})}const jt=/^[cdef][\w-]{21}$/;function We(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function Kt(b){return function ut(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return jt.test(x)?x:""}catch(b){return""}}function yn(b){return`${b.appName}!${b.appId}`}const Jt=new Map;function zt(b,D){const x=yn(b);Pt(x,D),function Wi(b,D){const x=function sr(){return!Kr&&"BroadcastChannel"in self&&(Kr=new BroadcastChannel("[Firebase] FID Change"),Kr.onmessage=b=>{Pt(b.data.key,b.data.fid)}),Kr}();x&&x.postMessage({key:b,fid:D}),function wr(){0===Jt.size&&Kr&&(Kr.close(),Kr=null)}()}(x,D)}function Pt(b,D){const x=Jt.get(b);if(x)for(const F of x)F(D)}let Kr=null;const Yr="firebase-installations-store";let ci=null;function pt(){return ci||(ci=(0,ie.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Yr)}})),ci}function Qr(b,D){return hn.apply(this,arguments)}function hn(){return(hn=(0,O.Z)(function*(b,D){const x=yn(b),K=(yield pt()).transaction(Yr,"readwrite"),te=K.objectStore(Yr),pe=yield te.get(x);return yield te.put(D,x),yield K.done,(!pe||pe.fid!==D.fid)&&zt(b,D.fid),D})).apply(this,arguments)}function _n(b){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,O.Z)(function*(b){const D=yn(b),F=(yield pt()).transaction(Yr,"readwrite");yield F.objectStore(Yr).delete(D),yield F.done})).apply(this,arguments)}function Jr(b,D){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(b,D){const x=yn(b),K=(yield pt()).transaction(Yr,"readwrite"),te=K.objectStore(Yr),pe=yield te.get(x),Ye=D(pe);return void 0===Ye?yield te.delete(x):yield te.put(Ye,x),yield K.done,Ye&&(!pe||pe.fid!==Ye.fid)&&zt(b,Ye.fid),Ye})).apply(this,arguments)}function bn(b){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(b){let D;const x=yield Jr(b.appConfig,F=>{const K=Co(F),te=$t(b,K);return D=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function Co(b){return Gs(b||{fid:We(),registrationStatus:0})}function $t(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ge.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(b,D){return mt.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:or(b)}:{installationEntry:D}}function mt(){return(mt=(0,O.Z)(function*(b,D){try{const x=yield me(b,D);return Qr(b.appConfig,x)}catch(x){throw Ze(x)&&409===x.customData.serverCode?yield _n(b.appConfig):yield Qr(b.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function or(b){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,O.Z)(function*(b){let D=yield Vt(b.appConfig);for(;1===D.registrationStatus;)yield Ne(100),D=yield Vt(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield bn(b);return F||x}return D})).apply(this,arguments)}function Vt(b){return Jr(b,D=>{if(!D)throw Ge.create("installation-not-found");return Gs(D)})}function Gs(b){return function ar(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function ur(b,D){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const F=G(b,x),K=j(b,x),te=D.getImmediate({optional:!0});if(te){const lt=yield te.getHeartbeatsHeader();lt&&K.append("x-firebase-client",lt)}const Ye={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:ee,appId:b.appId}})},nt=yield we(()=>fetch(F,Ye));if(nt.ok)return Ee(yield nt.json());throw yield Ie("Generate Auth Token",nt)})).apply(this,arguments)}function G(b,{fid:D}){return`${De(b)}/${D}/authTokens:generate`}function q(b){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(b,D=!1){let x;const F=yield Jr(b.appConfig,te=>{if(!_t(te))throw Ge.create("not-registered");const pe=te.authToken;if(!D&&sn(pe))return te;if(1===pe.requestStatus)return x=H(b,D),te;{if(!navigator.onLine)throw Ge.create("app-offline");const Ye=Rn(te);return x=Qe(b,Ye),Ye}});return x?yield x:F.authToken})).apply(this,arguments)}function H(b,D){return J.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(b,D){let x=yield Me(b.appConfig);for(;1===x.authToken.requestStatus;)yield Ne(100),x=yield Me(b.appConfig);const F=x.authToken;return 0===F.requestStatus?q(b,D):F})).apply(this,arguments)}function Me(b){return Jr(b,D=>{if(!_t(D))throw Ge.create("not-registered");return function Er(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Qe(b,D){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*(b,D){try{const x=yield ur(b,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield Qr(b.appConfig,F),x}catch(x){if(!Ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Qr(b.appConfig,F)}else yield _n(b.appConfig);throw x}})).apply(this,arguments)}function _t(b){return void 0!==b&&2===b.registrationStatus}function sn(b){return 2===b.requestStatus&&!function yt(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Rn(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function aa(){return(aa=(0,O.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:F}=yield bn(D);return F?F.catch(console.error):q(D).catch(console.error),x.fid})).apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(b,D=!1){const x=b;return yield Nn(x),(yield q(x,D)).token})).apply(this,arguments)}function Nn(b){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(b){const{registrationPromise:D}=yield bn(b);D&&(yield D)})).apply(this,arguments)}function Do(b){return Ge.create("missing-app-config-values",{valueName:b})}const Br="installations",at=b=>{const D=b.getProvider("app").getImmediate(),x=function Kn(b){if(!b||!b.options)throw Do("App Configuration");if(!b.name)throw Do("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw Do(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Yt=b=>{const D=b.getProvider("app").getImmediate(),x=(0,ae._getProvider)(D,Br).getImmediate();return{getId:()=>function Za(b){return aa.apply(this,arguments)}(x),getToken:K=>function Ka(b){return ua.apply(this,arguments)}(x,K)}};(function jr(){(0,ae._registerComponent)(new ge.wA(Br,at,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("installations-internal",Yt,"PRIVATE"))})(),(0,ae.registerVersion)(ce,$),(0,ae.registerVersion)(ce,$,"esm2017");const Si="@firebase/remote-config",vn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cp{constructor(D,x,F,K){this.client=D,this.storage=x,this.storageCache=F,this.logger=K}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,K=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var x=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return K;D.eTag=K&&K.eTag;const te=yield x.client.fetch(D),pe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&pe.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(pe),te})()}}function Tc(b=navigator){return b.languages&&b.languages[0]||b.language}class lr{constructor(D,x,F,K,te,pe){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=K,this.apiKey=te,this.appId=pe}fetch(D){var x=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},nt={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:x.appId,language_code:Tc()},lt={method:"POST",headers:Ye,body:JSON.stringify(nt)},Ht=fetch(pe,lt),It=new Promise((pr,as)=>{D.signal.addEventListener(()=>{const Ls=new Error("The operation was aborted.");Ls.name="AbortError",as(Ls)})});let Sn;try{yield Promise.race([Ht,It]),Sn=yield Ht}catch(pr){let as="fetch-client-network";throw"AbortError"===pr.name&&(as="fetch-timeout"),vn.create(as,{originalErrorMessage:pr.message})}let zn=Sn.status;const os=Sn.headers.get("ETag")||void 0;let Bi,vi;if(200===Sn.status){let pr;try{pr=yield Sn.json()}catch(as){throw vn.create("fetch-client-parse",{originalErrorMessage:as.message})}Bi=pr.entries,vi=pr.state}if("INSTANCE_STATE_UNSPECIFIED"===vi?zn=500:"NO_CHANGE"===vi?zn=304:("NO_TEMPLATE"===vi||"EMPTY_CONFIG"===vi)&&(Bi={}),304!==zn&&200!==zn)throw vn.create("fetch-status",{httpStatus:zn});return{status:zn,eTag:os,config:Bi}})()}}class Dp{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var K=this;return(0,O.Z)(function*(){yield function bs(b,D){return new Promise((x,F)=>{const K=Math.max(D-Date.now(),0),te=setTimeout(x,K);b.addEventListener(()=>{clearTimeout(te),F(vn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const te=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),te}catch(te){if(!function Ac(b){if(!(b instanceof ne.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const pe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(pe),K.attemptFetch(D,pe)}})()}}class Mc{constructor(D,x,F,K,te){this.app=D,this._client=x,this._storageCache=F,this._storage=K,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rl(b,D){const x=b.target.error||void 0;return vn.create(D,{originalErrorMessage:x&&x.message})}const Cs="app_namespace_store";class Sp{constructor(D,x,F,K=function Ap(){return new Promise((b,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{D(rl(F,"storage-open"))},x.onsuccess=F=>{b(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Cs,{keyPath:"compositeKey"})}}catch(x){D(vn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,te)=>{const Ye=F.transaction([Cs],"readonly").objectStore(Cs),nt=x.createCompositeKey(D);try{const lt=Ye.get(nt);lt.onerror=Ht=>{te(rl(Ht,"storage-get"))},lt.onsuccess=Ht=>{const It=Ht.target.result;K(It?It.value:void 0)}}catch(lt){te(vn.create("storage-get",{originalErrorMessage:lt&&lt.message}))}})})()}set(D,x){var F=this;return(0,O.Z)(function*(){const K=yield F.openDbPromise;return new Promise((te,pe)=>{const nt=K.transaction([Cs],"readwrite").objectStore(Cs),lt=F.createCompositeKey(D);try{const Ht=nt.put({compositeKey:lt,value:x});Ht.onerror=It=>{pe(rl(It,"storage-set"))},Ht.onsuccess=()=>{te()}}catch(Ht){pe(vn.create("storage-set",{originalErrorMessage:Ht&&Ht.message}))}})})()}delete(D){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,te)=>{const Ye=F.transaction([Cs],"readwrite").objectStore(Cs),nt=x.createCompositeKey(D);try{const lt=Ye.delete(nt);lt.onerror=Ht=>{te(rl(Ht,"storage-delete"))},lt.onsuccess=()=>{K()}}catch(lt){te(vn.create("storage-delete",{originalErrorMessage:lt&&lt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class kc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),te=yield x;te&&(D.lastFetchStatus=te);const pe=yield F;pe&&(D.lastSuccessfulFetchTimestampMillis=pe);const Ye=yield K;Ye&&(D.activeConfig=Ye)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Xa(){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(b){return!1}})).apply(this,arguments)}!function To(){(0,ae._registerComponent)(new ge.wA("remote-config",function b(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw vn.create("registration-window");if(!(0,ne.hl)())throw vn.create("indexed-db-unavailable");const{projectId:te,apiKey:pe,appId:Ye}=F.options;if(!te)throw vn.create("registration-project-id");if(!pe)throw vn.create("registration-api-key");if(!Ye)throw vn.create("registration-app-id");const nt=new Sp(Ye,F.name,x=x||"firebase"),lt=new kc(nt),Ht=new le.Yd(Si);Ht.logLevel=le.in.ERROR;const It=new lr(K,ae.SDK_VERSION,x,te,pe,Ye),Sn=new Dp(It,nt),zn=new Cp(Sn,nt,lt,Ht),os=new Mc(F,zn,lt,nt,Ht);return function Xt(b){const D=(0,ne.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(os),os},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Si,"0.3.8"),(0,ae.registerVersion)(Si,"0.3.8","esm2017")}();const Nc="/firebase-messaging-sw.js",cr="/firebase-cloud-messaging-push-scope",Ws="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ao="google.c.a.c_id",Oc="google.c.a.c_l",Mh="google.c.a.ts",eu="google.c.a.e";var So=(()=>{return(b=So||(So={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",So;var b})();function br(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Pc(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),K=new Uint8Array(F.length);for(let te=0;te<F.length;++te)K[te]=F.charCodeAt(te);return K}const Cr="fcm_token_details_db",ti="fcm_token_object_Store";function il(b){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Cr))return null;let D=null;return(yield(0,ie.X3)(Cr,5,{upgrade:(F=(0,O.Z)(function*(K,te,pe,Ye){var nt;if(te<2||!K.objectStoreNames.contains(ti))return;const lt=Ye.objectStore(ti),Ht=yield lt.index("fcmSenderId").get(b);if(yield lt.clear(),Ht)if(2===te){const It=Ht;if(!It.auth||!It.p256dh||!It.endpoint)return;D={token:It.fcmToken,createTime:null!==(nt=It.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:br(It.vapidKey)}}}else if(3===te){const It=Ht;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:br(It.auth),p256dh:br(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:br(It.vapidKey)}}}else if(4===te){const It=Ht;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:br(It.auth),p256dh:br(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:br(It.vapidKey)}}}}),function(te,pe,Ye,nt){return F.apply(this,arguments)})})).close(),yield(0,ie.Lj)(Cr),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),sl(D)?D:null;var F}),Fc.apply(this,arguments)}function sl(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Oi="firebase-messaging-store";let xh=null;function en(){return xh||(xh=(0,ie.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Oi)}})),xh}function fa(b){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(b){const D=Yn(b),F=yield(yield en()).transaction(Oi).objectStore(Oi).get(D);if(F)return F;{const K=yield il(b.appConfig.senderId);if(K)return yield Wt(b,K),K}})).apply(this,arguments)}function Wt(b,D){return pa.apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(b,D){const x=Yn(b),K=(yield en()).transaction(Oi,"readwrite");return yield K.objectStore(Oi).put(D,x),yield K.done,D})).apply(this,arguments)}function tu(b){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(b){const D=Yn(b),F=(yield en()).transaction(Oi,"readwrite");yield F.objectStore(Oi).delete(D),yield F.done})).apply(this,arguments)}function Yn({appConfig:b}){return b.appId}const ln=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Pi(b,D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(b,D){const x=yield ko(b),F=Ts(D),K={method:"POST",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Fi(b.appConfig),K)).json()}catch(pe){throw ln.create("token-subscribe-failed",{errorInfo:pe})}if(te.error)throw ln.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw ln.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Ys(b,D){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*(b,D){const x=yield ko(b),F=Ts(D.subscriptionOptions),K={method:"PATCH",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Fi(b.appConfig)}/${D.token}`,K)).json()}catch(pe){throw ln.create("token-update-failed",{errorInfo:pe})}if(te.error)throw ln.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw ln.create("token-update-no-token");return te.token})).apply(this,arguments)}function ga(b,D){return fi.apply(this,arguments)}function fi(){return(fi=(0,O.Z)(function*(b,D){const F={method:"DELETE",headers:yield ko(b)};try{const te=yield(yield fetch(`${Fi(b.appConfig)}/${D}`,F)).json();if(te.error)throw ln.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(K){throw ln.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Fi({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function ko(b){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ts({p256dh:b,auth:D,endpoint:x,vapidKey:F}){const K={web:{endpoint:x,auth:D,p256dh:b}};return F!==Ws&&(K.web.applicationPubKey=F),K}const ul=6048e5;function ma(b){return ll.apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(b){const D=yield No(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:br(D.getKey("auth")),p256dh:br(D.getKey("p256dh"))},F=yield fa(b.firebaseDependencies);if(F){if(iu(F.subscriptionOptions,x))return Date.now()>=F.createTime+ul?cl(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield ga(b.firebaseDependencies,F.token)}catch(K){console.warn(K)}return Ae(b.firebaseDependencies,x)}return Ae(b.firebaseDependencies,x)})).apply(this,arguments)}function nu(b){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(b){const D=yield fa(b.firebaseDependencies);D&&(yield ga(b.firebaseDependencies,D.token),yield tu(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function cl(b,D){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(b,D){try{const x=yield Ys(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Wt(b.firebaseDependencies,F),x}catch(x){throw yield nu(b),x}})).apply(this,arguments)}function Ae(b,D){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(b,D){const F={token:yield Pi(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Wt(b,F),F.token})).apply(this,arguments)}function No(b,D){return un.apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Pc(D)})})).apply(this,arguments)}function iu(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function Qs(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function ni(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const F=D.notification.body;F&&(b.notification.body=F);const K=D.notification.image;K&&(b.notification.image=K)}(D,b),function dl(b,D){!D.data||(b.data=D.data)}(D,b),function hl(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const x=D.fcmOptions.link;x&&(b.fcmOptions.link=x);const F=D.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(D,b),D}function fl(b){return"object"==typeof b&&!!b&&Ao in b}function Lc(b,D){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function Qi(b){return ln.create("missing-app-config-values",{valueName:b})}Lc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Lc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class dr{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Mp(b){if(!b||!b.options)throw Qi("App Configuration Object");if(!b.name)throw Qi("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of D)if(!x[F])throw Qi(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ri(b){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Nc,{scope:cr}),b.swRegistration.update().catch(()=>{})}catch(D){throw ln.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function As(b,D){return pi.apply(this,arguments)}function pi(){return(pi=(0,O.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield ri(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function pl(b,D){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Ws)})).apply(this,arguments)}function gl(){return(gl=(0,O.Z)(function*(b,D){if(!navigator)throw ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ln.create("permission-blocked");return yield pl(b,null==D?void 0:D.vapidKey),yield As(b,null==D?void 0:D.serviceWorkerRegistration),ma(b)})).apply(this,arguments)}function ya(b,D,x){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(b,D,x){const F=lu(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Ao],message_name:x[Oc],message_time:x[Mh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function lu(b){switch(b){case So.NOTIFICATION_CLICKED:return"notification_open";case So.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Uc(){return(Uc=(0,O.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===So.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Qs(x)):b.onMessageHandler.next(Qs(x)));const F=x.data;fl(F)&&"1"===F[eu]&&(yield ya(b,x.messageType,F))})).apply(this,arguments)}const cu="@firebase/messaging",Bc=b=>{const D=new dr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Vc(b,D){return Uc.apply(this,arguments)}(D,x)),D},Oo=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function au(b,D){return gl.apply(this,arguments)}(D,F)}};function du(){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function jc(){(0,ae._registerComponent)(new ge.wA("messaging",Bc,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("messaging-internal",Oo,"PRIVATE")),(0,ae.registerVersion)(cu,"0.9.13"),(0,ae.registerVersion)(cu,"0.9.13","esm2017")}();const Hc="analytics",kp="firebase_id",Ji="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",eo="https://www.googletagmanager.com/gtag/js",Pn=new le.Yd("@firebase/analytics");function Gc(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function Rp(b,D){const x=document.createElement("script");x.src=`${eo}?l=${b}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Po(b,D,x,F,K,te){return hu.apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(b,D,x,F,K,te){const pe=F[K];try{if(pe)yield D[pe];else{const nt=(yield Gc(x)).find(lt=>lt.measurementId===K);nt&&(yield D[nt.appId])}}catch(Ye){Pn.error(Ye)}b("config",K,te)})).apply(this,arguments)}function Np(b,D,x,F,K){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,O.Z)(function*(b,D,x,F,K){try{let te=[];if(K&&K.send_to){let pe=K.send_to;Array.isArray(pe)||(pe=[pe]);const Ye=yield Gc(x);for(const nt of pe){const lt=Ye.find(It=>It.measurementId===nt),Ht=lt&&D[lt.appId];if(!Ht){te=[];break}te.push(Ht)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),b("event",F,K||{})}catch(te){Pn.error(te)}})).apply(this,arguments)}function rn(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(eo))return D;return null}const st=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wa=new class Tn{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function qc(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Fo(b){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(b){var D;const{appId:x,apiKey:F}=b,K={method:"GET",headers:qc(F)},te=Ji.replace("{app-id}",x),pe=yield fetch(te,K);if(200!==pe.status&&304!==pe.status){let Ye="";try{const nt=yield pe.json();(null===(D=nt.error)||void 0===D?void 0:D.message)&&(Ye=nt.error.message)}catch(nt){}throw st.create("config-fetch-failed",{httpStatus:pe.status,responseMessage:Ye})}return pe.json()})).apply(this,arguments)}function wn(b){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(b,D=wa,x){const{appId:F,apiKey:K,measurementId:te}=b.options;if(!F)throw st.create("no-app-id");if(!K){if(te)return{measurementId:te,appId:F};throw st.create("no-api-key")}const pe=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new yl;return setTimeout((0,O.Z)(function*(){Ye.abort()}),void 0!==x?x:6e4),Li({appId:F,apiKey:K,measurementId:te},pe,Ye,D)})).apply(this,arguments)}function Li(b,D,x){return vt.apply(this,arguments)}function vt(){return(vt=(0,O.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},F,K=wa){const{appId:te,measurementId:pe}=b;try{yield zc(F,D)}catch(Ye){if(pe)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pe} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:te,measurementId:pe};throw Ye}try{const Ye=yield Fo(b);return K.deleteThrottleMetadata(te),Ye}catch(Ye){if(!Wc(Ye)){if(K.deleteThrottleMetadata(te),pe)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pe} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:te,measurementId:pe};throw Ye}const nt=503===Number(Ye.customData.httpStatus)?(0,ne.$s)(x,K.intervalMillis,30):(0,ne.$s)(x,K.intervalMillis),lt={throttleEndTimeMillis:Date.now()+nt,backoffCount:x+1};return K.setThrottleMetadata(te,lt),Pn.debug(`Calling attemptFetch again in ${nt} millis`),Li(b,lt,F,K)}})).apply(this,arguments)}function zc(b,D){return new Promise((x,F)=>{const K=Math.max(D-Date.now(),0),te=setTimeout(x,K);b.addEventListener(()=>{clearTimeout(te),F(st.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Wc(b){if(!(b instanceof ne.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class yl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function _l(){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(){if(!(0,ne.hl)())return Pn.warn(st.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(b){return Pn.warn(st.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Lo(){return(Lo=(0,O.Z)(function*(b,D,x,F,K,te,pe){var Ye;const nt=wn(b);nt.then(zn=>{x[zn.measurementId]=zn.appId,b.options.measurementId&&zn.measurementId!==b.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zn=>Pn.error(zn)),D.push(nt);const lt=_l().then(zn=>{if(zn)return F.getId()}),[Ht,It]=yield Promise.all([nt,lt]);rn()||Rp(te,Ht.measurementId),K("js",new Date);const Sn=null!==(Ye=null==pe?void 0:pe.config)&&void 0!==Ye?Ye:{};return Sn.origin="firebase",Sn.update=!0,null!=It&&(Sn[kp]=It),K("config",Ht.measurementId,Sn),Ht.measurementId})).apply(this,arguments)}class no{constructor(D){this.app=D}_delete(){return delete Jn[this.app.options.appId],Promise.resolve()}}let Jn={},ro=[];const io={};let Uo,Rs,Vo="dataLayer",so=!1;function es(b,D,x){!function Ea(){const b=[];if((0,ne.ru)()&&b.push("This is a browser extension environment."),(0,ne.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,K)=>`(${K+1}) ${F}`).join(" "),x=st.create("invalid-analytics-context",{errorInfo:D});Pn.warn(x.message)}}();const F=b.options.appId;if(!F)throw st.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw st.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jn[F])throw st.create("already-exists",{id:F});if(!so){!function to(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(Vo);const{wrappedGtag:te,gtagCore:pe}=function Op(b,D,x,F,K){let te=function(...pe){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(te=window[K]),window[K]=function fu(b,D,x,F){function te(){return(te=(0,O.Z)(function*(pe,Ye,nt){try{"event"===pe?yield Np(b,D,x,Ye,nt):"config"===pe?yield Po(b,D,x,F,Ye,nt):b("set",Ye)}catch(lt){Pn.error(lt)}})).apply(this,arguments)}return function K(pe,Ye,nt){return te.apply(this,arguments)}}(te,b,D,x),{gtagCore:te,wrappedGtag:window[K]}}(Jn,ro,io,Vo,"gtag");Rs=te,Uo=pe,so=!0}return Jn[F]=function xs(b,D,x,F,K,te,pe){return Lo.apply(this,arguments)}(b,ro,io,D,Uo,Vo,x),new no(b)}function qn(){return(qn=(0,O.Z)(function*(b,D,x,F,K){if(K&&K.global)b("event",x,F);else{const te=yield D;b("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function yi(){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(b){return!1}})).apply(this,arguments)}const Gr="@firebase/analytics";!function Os(){(0,ae._registerComponent)(new ge.wA(Hc,(D,{options:x})=>es(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new ge.wA("analytics-internal",function b(D){try{const x=D.getProvider(Hc).getImmediate();return{logEvent:(F,K,te)=>function Bo(b,D,x,F){b=(0,ne.m9)(b),function oo(b,D,x,F,K){return qn.apply(this,arguments)}(Rs,Jn[b.app.options.appId],D,x,F).catch(K=>Pn.error(K))}(x,F,K,te)}}catch(x){throw st.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(Gr,"0.7.9"),(0,ae.registerVersion)(Gr,"0.7.9","esm2017")}();var Kc=N(4408),Il=N(7565);const Ia=new class An extends Il.v{}(class ns extends Kc.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var Yc=N(4986),Nh=N(8505),Tr=N(9468),Ar=N(5363);const ba=new h.GfV("7.3.0"),jo="__angularfire_symbol__analyticsIsSupportedValue",rs="__angularfire_symbol__analyticsIsSupported",Ps="__angularfire_symbol__remoteConfigIsSupportedValue",is="__angularfire_symbol__remoteConfigIsSupported",$o="__angularfire_symbol__messagingIsSupportedValue",St="__angularfire_symbol__messagingIsSupported";function Go(b,D,x){if(D){if(1===D.length)return D[0];const te=D.filter(pe=>pe.app===x);if(1===te.length)return te[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[rs]||(globalThis[rs]=yi().then(b=>globalThis[jo]=b).catch(()=>globalThis[jo]=!1)),globalThis[St]||(globalThis[St]=du().then(b=>globalThis[$o]=b).catch(()=>globalThis[$o]=!1)),globalThis[is]||(globalThis[is]=Xa().then(b=>globalThis[Ps]=b).catch(()=>globalThis[Ps]=!1));const Pp=(b,D)=>{const x=D?[D]:(0,Q.C6)(),F=[];return x.forEach(K=>{K.container.getProvider(b).instances.forEach(pe=>{F.includes(pe)||F.push(pe)})}),F};function ss(){}class _i{constructor(D,x=Ia){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const K=this.zone;return this.delegate.schedule(function(pe){K.runGuarded(()=>{D.apply(this,[pe])})},x,F)}}class mu{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ss,{},ss,ss)),x.pipe((0,Nh.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jc=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new _i(Zone.current)),this.insideAngular=x.run(()=>new _i(Zone.current,Yc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ui(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Oh(b){return Ui(),function Fs(b){return function(x){return(x=x.lift(new mu(b.ngZone))).pipe((0,Tr.R)(b.outsideAngular),(0,Ar.Q)(b.insideAngular))}}(Ui())(b)}},2090:(Ke,_e,N)=>{N.d(_e,{$s:()=>Vt,BH:()=>He,G6:()=>Ue,L:()=>ie,LL:()=>se,Mn:()=>Ie,Sg:()=>Se,UG:()=>fe,US:()=>ge,ZB:()=>B,ZR:()=>me,b$:()=>Ze,d:()=>De,eu:()=>we,hl:()=>j,jU:()=>be,m9:()=>ur,ne:()=>ci,pd:()=>vs,r3:()=>vr,ru:()=>Ge,tV:()=>ce,uI:()=>Ve,vZ:()=>Kr,w1:()=>Ee,xO:()=>wr,xb:()=>Pt,z$:()=>ke,zI:()=>W,zd:()=>Ai});const ae=function(L){const G=[];let q=0;for(let Ce=0;Ce<L.length;Ce++){let H=L.charCodeAt(Ce);H<128?G[q++]=H:H<2048?(G[q++]=H>>6|192,G[q++]=63&H|128):55296==(64512&H)&&Ce+1<L.length&&56320==(64512&L.charCodeAt(Ce+1))?(H=65536+((1023&H)<<10)+(1023&L.charCodeAt(++Ce)),G[q++]=H>>18|240,G[q++]=H>>12&63|128,G[q++]=H>>6&63|128,G[q++]=63&H|128):(G[q++]=H>>12|224,G[q++]=H>>6&63|128,G[q++]=63&H|128)}return G},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,G){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let H=0;H<L.length;H+=3){const J=L[H],Me=H+1<L.length,Qe=Me?L[H+1]:0,ft=H+2<L.length,_t=ft?L[H+2]:0;let Rn=(15&Qe)<<2|_t>>6,Er=63&_t;ft||(Er=64,Me||(Rn=64)),Ce.push(q[J>>2],q[(3&J)<<4|Qe>>4],q[Rn],q[Er])}return Ce.join("")},encodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(L):this.encodeByteArray(ae(L),G)},decodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(L):function(L){const G=[];let q=0,Ce=0;for(;q<L.length;){const H=L[q++];if(H<128)G[Ce++]=String.fromCharCode(H);else if(H>191&&H<224){const J=L[q++];G[Ce++]=String.fromCharCode((31&H)<<6|63&J)}else if(H>239&&H<365){const ft=((7&H)<<18|(63&L[q++])<<12|(63&L[q++])<<6|63&L[q++])-65536;G[Ce++]=String.fromCharCode(55296+(ft>>10)),G[Ce++]=String.fromCharCode(56320+(1023&ft))}else{const J=L[q++],Me=L[q++];G[Ce++]=String.fromCharCode((15&H)<<12|(63&J)<<6|63&Me)}}return G.join("")}(this.decodeStringToByteArray(L,G))},decodeStringToByteArray(L,G){this.init_();const q=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let H=0;H<L.length;){const J=q[L.charAt(H++)],Qe=H<L.length?q[L.charAt(H)]:0;++H;const _t=H<L.length?q[L.charAt(H)]:64;++H;const yt=H<L.length?q[L.charAt(H)]:64;if(++H,null==J||null==Qe||null==_t||null==yt)throw Error();Ce.push(J<<2|Qe>>4),64!==_t&&(Ce.push(Qe<<4&240|_t>>2),64!==yt&&Ce.push(_t<<6&192|yt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},ie=function(L){return function(L){const G=ae(L);return ge.encodeByteArray(G,!0)}(L).replace(/\./g,"")},ce=function(L){try{return ge.decodeString(L,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(L,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return G}for(const q in G)!G.hasOwnProperty(q)||!ee(q)||(L[q]=B(L[q],G[q]));return L}function ee(L){return"__proto__"!==L}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,q)=>{this.resolve=G,this.reject=q})}wrapCallback(G){return(q,Ce)=>{q?this.reject(q):this.resolve(Ce),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(q):G(q,Ce))}}}function Se(L,G){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=G||"demo-project",H=L.iat||0,J=L.sub||L.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:H,exp:H+3600,auth_time:H,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ie(JSON.stringify({alg:"none",type:"JWT"})),ie(JSON.stringify(Me)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function be(){return"object"==typeof self&&self.self===self}function Ge(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return ke().indexOf("Electron/")>=0}function Ee(){const L=ke();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ie(){return ke().indexOf("MSAppHost/")>=0}function Ue(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function we(){return new Promise((L,G)=>{try{let q=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(Ce);H.onsuccess=()=>{H.result.close(),q||self.indexedDB.deleteDatabase(Ce),L(!0)},H.onupgradeneeded=()=>{q=!1},H.onerror=()=>{var J;G((null===(J=H.error)||void 0===J?void 0:J.message)||"")}}catch(q){G(q)}})}function W(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(G,q,Ce){super(q),this.code=G,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(G,q,Ce){this.service=G,this.serviceName=q,this.errors=Ce}create(G,...q){const Ce=q[0]||{},H=`${this.service}/${G}`,J=this.errors[G],Me=J?function Ne(L,G){return L.replace(ut,(q,Ce)=>{const H=G[Ce];return null!=H?String(H):`<${Ce}?>`})}(J,Ce):"Error";return new me(H,`${this.serviceName}: ${Me} (${H}).`,Ce)}}const ut=/\{\$([^}]+)}/g;function vr(L,G){return Object.prototype.hasOwnProperty.call(L,G)}function Pt(L){for(const G in L)if(Object.prototype.hasOwnProperty.call(L,G))return!1;return!0}function Kr(L,G){if(L===G)return!0;const q=Object.keys(L),Ce=Object.keys(G);for(const H of q){if(!Ce.includes(H))return!1;const J=L[H],Me=G[H];if(sr(J)&&sr(Me)){if(!Kr(J,Me))return!1}else if(J!==Me)return!1}for(const H of Ce)if(!q.includes(H))return!1;return!0}function sr(L){return null!==L&&"object"==typeof L}function wr(L){const G=[];for(const[q,Ce]of Object.entries(L))Array.isArray(Ce)?Ce.forEach(H=>{G.push(encodeURIComponent(q)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(q)+"="+encodeURIComponent(Ce));return G.length?"&"+G.join("&"):""}function Ai(L){const G={};return L.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[H,J]=Ce.split("=");G[decodeURIComponent(H)]=decodeURIComponent(J)}}),G}function vs(L){const G=L.indexOf("?");if(!G)return"";const q=L.indexOf("#",G);return L.substring(G,q>0?q:void 0)}function ci(L,G){const q=new pt(L,G);return q.subscribe.bind(q)}class pt{constructor(G,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{G(this)}).catch(Ce=>{this.error(Ce)})}next(G){this.forEachObserver(q=>{q.next(G)})}error(G){this.forEachObserver(q=>{q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,q,Ce){let H;if(void 0===G&&void 0===q&&void 0===Ce)throw new Error("Missing Observer.");H=function hn(L,G){if("object"!=typeof L||null===L)return!1;for(const q of G)if(q in L&&"function"==typeof L[q])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:q,complete:Ce},void 0===H.next&&(H.next=_n),void 0===H.error&&(H.error=_n),void 0===H.complete&&(H.complete=_n);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Me){}}),this.observers.push(H),J}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,G)}sendOne(G,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{q(this.observers[G])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _n(){}function Vt(L,G=1e3,q=2){const Ce=G*Math.pow(q,L),H=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+H)}function ur(L){return L&&L._delegate?L._delegate:L}},678:(Ke,_e,N)=>{var h=N(5e3);let Q=null;function O(){return Q}const le=new h.OlP("DocumentToken");let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ce(){return(0,h.LFG)(B)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let B=(()=>{class n extends ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ee()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ee()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function He(){return new B((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(n){const e=(0,h.LFG)(le).location;return new Ze((0,h.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new h.OlP("appBaseHref");let Ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie),h.LFG(Ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie),h.LFG(Ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(Ue(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Se,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ie(){return new Ee((0,h.LFG)(fe),(0,h.LFG)(ie))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let ei=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Es{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $n=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Es(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),zs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{zs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function zs(n,e){n.context.$implicit=e.item}let fn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Qa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Qa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Xt{constructor(){this.$implicit=null,this.ngIf=null}}function Qa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class bs{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ac{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Dp=new Ac,Ki=new bs;let Sc=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return Dp;if((0,h.F4k)(t))return Ki;throw function lr(n,e){return new h.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})(),eu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Mo(n){return"server"===n}let sl=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new xo((0,h.LFG)(le),window)}),n})();class xo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Oi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ol(this.window.history)||ol(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ol(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ks extends class fa extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){Q||(Q=n)}(new Ks)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function pa(){return Wt=Wt||document.querySelector("base"),Wt?Wt.getAttribute("href"):null}();return null==t?null:function Ds(n){tu=tu||document.createElement("a"),tu.setAttribute("href",n);const e=tu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ca(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let tu,Wt=null;const Yn=new h.OlP("TRANSITION_ID"),ln=[{provide:h.ip1,useFactory:function al(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Yn,le,h.zs3],multi:!0}];class Pi{static init(){(0,h.VLi)(new Pi)}addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Qn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ys=new h.OlP("EventManagerPlugins");let Yi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ys),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ga{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let fi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fi=(()=>{class n extends fi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ko),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ko))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ko(n){O().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ts=/%COMP%/g;function Ro(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ro(n,o,t):(o=o.replace(Ts,n),t.push(o))}return t}function Ae(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let No=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new un(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ni(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new dl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ro(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Yi),h.LFG(Fi),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class un{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=gt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=gt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ae(r)):this.eventManager.addEventListener(e,t,Ae(r))}}class ni extends un{constructor(e,t,r,o){super(e),this.component=r;const u=Ro(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function ru(n){return"_ngcontent-%COMP%".replace(Ts,n)}(o+"-"+r.id),this.hostAttr=function cl(n){return"_nghost-%COMP%".replace(Ts,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class dl extends un{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ro(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let hl=(()=>{class n extends ga{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const fl=["alt","control","meta","shift"],Mp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ri=(()=>{class n extends ga{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(fl.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function su(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Qi.hasOwnProperty(e)&&(e=Qi[e]))}return Mp[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),fl.forEach(u=>{u!=o&&dr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const au=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function As(){Ks.makeCurrent(),Pi.init()},multi:!0},{provide:le,useFactory:function pl(){return(0,h.RDi)(document),document},deps:[]}]),gl=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function pi(){return new h.qLn},deps:[]},{provide:Ys,useClass:hl,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:Ys,useClass:ri,multi:!0,deps:[le]},{provide:No,useClass:No,deps:[Yi,Fi,h.AFp]},{provide:h.FYo,useExisting:No},{provide:fi,useExisting:Fi},{provide:Fi,useClass:Fi,deps:[le]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Yi,useClass:Yi,deps:[Ys,h.R0b]},{provide:class en{},useClass:Qn,deps:[]}];let ya=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Yn,useExisting:h.AFp},ln]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:gl,imports:[eu,h.hGG]}),n})();"undefined"!=typeof window&&window;var rn=N(8996),va=N(3269);function st(...n){const e=(0,va.yG)(n);return(0,rn.D)(n,e)}var Dr=N(7579);class gi extends Dr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Tn=N(8306);const{isArray:wa}=Array,{getPrototypeOf:qc,prototype:Fo,keys:Ss}=Object;function wn(n){if(1===n.length){const e=n[0];if(wa(e))return{args:e,keys:null};if(function Ms(n){return n&&"object"==typeof n&&qc(n)===Fo}(e)){const t=Ss(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Li=N(4671),vt=N(4004);const{isArray:zc}=Array;function yl(n){return(0,vt.U)(e=>function Wc(n,e){return zc(e)?n(...e):n(e)}(n,e))}function _l(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Gn=N(5403),xs=N(9672);function Jn(n,e,t){n?(0,xs.f)(t,n,e):e()}var ro=N(576);function io(n,e){const t=(0,ro.m)(n)?n:()=>n,r=o=>o.error(t());return new Tn.y(e?o=>e.schedule(r,0,o):r)}const ks=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Uo=N(8189);function so(...n){return function Rs(){return(0,Uo.J)(1)}()((0,rn.D)(n,(0,va.yG)(n)))}var vl=N(8421);function Ea(n){return new Tn.y(e=>{(0,vl.Xf)(n()).subscribe(e)})}var es=N(515),oo=N(727),qn=N(4482);function wl(){return(0,qn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ns extends Tn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new oo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=oo.w0.EMPTY)}return e}refCount(){return wl()(this)}}function Fn(n,e){return(0,qn.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Gn.x)(r,E=>{null==o||o.unsubscribe();let C=0;const S=u++;(0,vl.Xf)(n(E,S)).subscribe(o=(0,Gn.x)(r,k=>r.next(e?e(E,k,S,C++):k),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var mi=N(5698);function ao(...n){const e=(0,va.yG)(n);return(0,qn.e)((t,r)=>{(e?so(n,t,e):so(n,t)).subscribe(r)})}function ts(n,e,t,r,o){return(u,d)=>{let m=t,E=e,C=0;u.subscribe((0,Gn.x)(d,S=>{const k=C++;E=m?n(E,S,k):(m=!0,S),r&&d.next(E)},o&&(()=>{m&&d.next(E),d.complete()})))}}function Vi(n,e){return(0,qn.e)(ts(n,e,arguments.length>=2,!0))}function Xn(n,e){return(0,qn.e)((t,r)=>{let o=0;t.subscribe((0,Gn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function ii(n){return(0,qn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Gn.x)(t,void 0,void 0,d=>{u=(0,vl.Xf)(n(d,ii(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var En=N(5577);function yi(n,e){return(0,ro.m)(e)?(0,En.z)(n,e,1):(0,En.z)(n,1)}function pu(n){return n<=0?()=>es.E:(0,qn.e)((e,t)=>{let r=[];e.subscribe((0,Gn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function El(n=pn){return(0,qn.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function pn(){return new ks}function Rh(n){return(0,qn.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Bo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((o,u)=>n(o,u,r)):Li.y,(0,mi.q)(1),t?Rh(e):El(()=>new ks))}var Gr=N(8505);class Os{constructor(e,t){this.id=e,this.url=t}}class Kc extends Os{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ns extends Os{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Il extends Os{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class An extends Os{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ia extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gu extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yc extends Os{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nh extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ba{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rs{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class is{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $o{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const St="primary";class Qc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ho(n){return new Qc(n)}const hr="ngNavigationCancelingError";function Ca(n){const e=Error("NavigationCancelingError: "+n);return e[hr]=!0,e}function Pp(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function _i(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!mu(n[o],e[o]))return!1;return!0}function mu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Jc(n){return Array.prototype.concat.apply([],n)}function Ui(n){return n.length>0?n[n.length-1]:null}function an(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function fr(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,rn.D)(Promise.resolve(n)):st(n)}const Oh={exact:function b(n,e,t){if(!lt(n.segments,e.segments)||!K(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!b(n.children[r],e.children[r],t))return!1;return!0},subset:x},Fs={exact:function Da(n,e){return _i(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mu(n[t],e[t]))},ignored:()=>!0};function qo(n,e,t){return Oh[t.paths](n.root,e.root,t.matrixParams)&&Fs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function x(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!lt(o,t)||e.hasChildren()||!K(o,t,r))}if(n.segments.length===t.length){if(!lt(n.segments,t)||!K(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!x(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(lt(n.segments,o)&&K(n.segments,o,r)&&n.children[St])&&F(n.children[St],e,u,r)}}function K(n,e,t){return e.every((r,o)=>Fs[t](n[o].parameters,r.parameters))}class te{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ho(this.queryParams)),this._queryParamMap}toString(){return zn.serialize(this)}}class pe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,an(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return os(this)}}class Ye{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ho(this.parameters)),this._parameterMap}toString(){return Dl(this)}}function lt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class It{}class Sn{parse(e){const t=new Fp(e);return new te(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Bi(e.root,!0)}`,r=function Ph(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${pr(t)}=${pr(o)}`).join("&"):`${pr(t)}=${pr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function as(n){return encodeURI(n)}(e.fragment)}`:""}`}}const zn=new Sn;function os(n){return n.segments.map(e=>Dl(e)).join("/")}function Bi(n,e){if(!n.hasChildren())return os(n);if(e){const t=n.children[St]?Bi(n.children[St],!1):"",r=[];return an(n.children,(o,u)=>{u!==St&&r.push(`${u}:${Bi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ht(n,e){let t=[];return an(n.children,(r,o)=>{o===St&&(t=t.concat(e(r,o)))}),an(n.children,(r,o)=>{o!==St&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===St?[Bi(n.children[St],!1)]:[`${o}:${Bi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${os(n)}/${t[0]}`:`${os(n)}/(${t.join("//")})`}}function vi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pr(n){return vi(n).replace(/%3B/gi,";")}function Ls(n){return vi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cl(n){return decodeURIComponent(n)}function ed(n){return Cl(n.replace(/\+/g,"%20"))}function Dl(n){return`${Ls(n.path)}${function td(n){return Object.keys(n).map(e=>`;${Ls(e)}=${Ls(n[e])}`).join("")}(n.parameters)}`}const Fh=/^[^\/()?;=#]+/;function nd(n){const e=n.match(Fh);return e?e[0]:""}const yu=/^[^=?&#]+/,Lh=/^[^&#]+/;class Fp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[St]=new pe(e,t)),r}parseSegment(){const e=nd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ye(Cl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=nd(this.remaining);o&&(r=o,this.capture(r))}e[Cl(t)]=Cl(r)}parseQueryParam(e){const t=function Tl(n){const e=n.match(yu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Xv(n){const e=n.match(Lh);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=ed(t),u=ed(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nd(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=St);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[St]:new pe([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Vh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Lp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Lp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=_u(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return _u(e,this._root).map(t=>t.value)}}function Lp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Lp(n,t);if(r)return r}return null}function _u(n,e){if(n===e.value)return[e];for(const t of e.children){const r=_u(n,t);if(r.length)return r.unshift(e),r}return[]}class uo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Al extends Vh{constructor(e,t){super(e),this.snapshot=t,sd(this,e)}toString(){return this.snapshot.toString()}}function rd(n,e){const t=function wu(n,e){const d=new lo([],{},{},"",{},St,e,null,n.root,-1,{});return new id("",new uo(d,[]))}(n,e),r=new gi([new Ye("",{})]),o=new gi({}),u=new gi({}),d=new gi({}),m=new gi(""),E=new Eu(r,o,d,m,u,St,e,t.root);return E.snapshot=t.root,new Al(new uo(E,[]),t)}class Eu{constructor(e,t,r,o,u,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>Ho(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>Ho(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function e0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lo{constructor(e,t,r,o,u,d,m,E,C,S,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=S,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ho(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ho(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class id extends Vh{constructor(e,t){super(t),this.url=e,sd(this,t)}toString(){return Uh(this._root)}}function sd(n,e){e.value._routerState=n,e.children.forEach(t=>sd(n,t))}function Uh(n){const e=n.children.length>0?` { ${n.children.map(Uh).join(", ")} } `:"";return`${n.value}${e}`}function od(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_i(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_i(e.params,t.params)||n.params.next(t.params),function ss(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_i(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_i(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ad(n,e){const t=_i(n.params,e.params)&&function nt(n,e){return lt(n,e)&&n.every((t,r)=>_i(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ad(n.parent,e.parent))}function Sl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function ry(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Sl(n,r,o);return Sl(n,r)})}(n,e,t);return new uo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Sl(n,m)),d}}const r=function iy(n){return new Eu(new gi(n.url),new gi(n.params),new gi(n.queryParams),new gi(n.fragment),new gi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Sl(n,u));return new uo(r,o)}}function wi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function co(n){return"object"==typeof n&&null!=n&&n.outlets}function Ml(n,e,t,r,o){let u={};if(r&&an(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new te(t,u,o);const d=oy(n,e,t);return new te(d,u,o)}function oy(n,e,t){const r={};return an(n.children,(o,u)=>{r[u]=o===e?t:oy(o,e,t)}),new pe(n.segments,r)}class Bp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wi(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(co);if(o&&o!==Ui(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ud{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $p(n,e,t){if(n||(n=new pe([],{})),0===n.segments.length&&n.hasChildren())return ld(n,e,t);const r=function ay(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(co(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!jh(E,C,d))return u;r+=2}else{if(!jh(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new pe(n.segments.slice(0,r.pathIndex),{});return u.children[St]=new pe(n.segments.slice(r.pathIndex),n.children),ld(u,0,o)}return r.match&&0===o.length?new pe(n.segments,{}):r.match&&!n.hasChildren()?uy(n,e,t):r.match?ld(n,0,o):uy(n,e,t)}function ld(n,e,t){if(0===t.length)return new pe(n.segments,{});{const r=function jp(n){return co(n[0])?n[0].outlets:{[St]:n}}(t),o={};return an(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=$p(n.children[d],e,u))}),an(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new pe(n.segments,o)}}function uy(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(co(u)){const E=Ta(u.outlets);return new pe(r,E)}if(0===o&&wi(t[0])){r.push(new Ye(n.segments[e].path,xl(t[0]))),o++;continue}const d=co(u)?u.outlets[St]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&wi(m)?(r.push(new Ye(d,xl(m))),o+=2):(r.push(new Ye(d,{})),o++)}return new pe(r,{})}function Ta(n){const e={};return an(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=uy(new pe([],{}),0,t))}),e}function xl(n){const e={};return an(n,(t,r)=>e[r]=`${t}`),e}function jh(n,e,t){return n==t.path&&_i(e,t.parameters)}class kl{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),od(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=vu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),an(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=vu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=vu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=vu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new is(u.value.snapshot))}),e.children.length&&this.forwardEvent(new rs(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(od(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),od(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function cd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class dd{constructor(e,t){this.routes=e,this.module=t}}function ho(n){return"function"==typeof n}function Iu(n){return n instanceof te}const hd=Symbol("INITIAL_VALUE");function fd(){return Fn(n=>function Lo(...n){const e=(0,va.yG)(n),t=(0,va.jO)(n),{args:r,keys:o}=wn(n);if(0===r.length)return(0,rn.D)([],e);const u=new Tn.y(function no(n,e,t=Li.y){return r=>{Jn(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let E=0;E<o;E++)Jn(e,()=>{const C=(0,rn.D)(n[E],e);let S=!1;C.subscribe((0,Gn.x)(r,k=>{u[E]=k,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>_l(o,d):Li.y));return t?u.pipe(yl(t)):u}(n.map(e=>e.pipe((0,mi.q)(1),ao(hd)))).pipe(Vi((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==hd?o:(u===hd&&(r=!0),r||!1!==u&&d!==t.length-1&&!Iu(u)?o:u),e)},hd),Xn(e=>e!==hd),(0,vt.U)(e=>Iu(e)?e:!0===e),(0,mi.q)(1)))}class Gp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bu,this.attachRef=null}}class bu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Gp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let pd=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||St,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new ly(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(bu),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ly{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Eu?this.route:e===bu?this.childContexts:this.parent.get(e,t)}}let qp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[pd],encapsulation:2}),n})();function Nl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Cu(r,cy(e,r))}}function Cu(n,e){n.children&&Nl(n.children,e)}function cy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ol(n){const e=n.children&&n.children.map(Ol),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=qp),t}function qr(n){return n.outlet||St}function Mn(n,e){const t=n.filter(r=>qr(r)===e);return t.push(...n.filter(r=>qr(r)!==e)),t}const zp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},zp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Pp)(t,n,e);if(!u)return Object.assign({},zp);const d={};an(u.posParams,(E,C)=>{d[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Aa(n,e,t,r,o="corrected"){if(t.length>0&&function hy(n,e,t){return t.some(r=>zo(n,e,r)&&qr(r)!==St)}(n,t,r)){const d=new pe(e,function dy(n,e,t,r){const o={};o[St]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&qr(u)!==St){const d=new pe([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[qr(u)]=d}return o}(n,e,r,new pe(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function fy(n,e,t){return t.some(r=>zo(n,e,r))}(n,t,r)){const d=new pe(n.segments,function Wp(n,e,t,r,o,u){const d={};for(const m of r)if(zo(n,t,m)&&!o[qr(m)]){const E=new pe([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[qr(m)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new pe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function zo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Zp(n,e,t,r){return!!(qr(n)===r||r!==St&&zo(e,t,n))&&("**"===n.path||gd(e,n,t).matched)}function Kp(n,e,t){return 0===e.length&&!n.children[t]}class Gh{constructor(e){this.segmentGroup=e||null}}class Du{constructor(e){this.urlTree=e}}function Wn(n){return io(new Gh(n))}function md(n){return io(new Du(n))}class Tu{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Aa(this.urlTree.root,[],[],this.config).segmentGroup,t=new pe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,St).pipe((0,vt.U)(u=>this.createUrlTree(Pl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ii(u=>{if(u instanceof Du)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Gh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,St).pipe((0,vt.U)(o=>this.createUrlTree(Pl(o),e.queryParams,e.fragment))).pipe(ii(o=>{throw o instanceof Gh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new pe([],{[St]:e}):e;return new te(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(u=>new pe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,rn.D)(o).pipe(yi(u=>{const d=r.children[u],m=Mn(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,vt.U)(E=>({segment:E,outlet:u})))}),Vi((u,d)=>(u[d.outlet]=d.segment,u),{}),function ny(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((o,u)=>n(o,u,r)):Li.y,pu(1),t?Rh(e):El(()=>new ks))}())}expandSegment(e,t,r,o,u,d){return(0,rn.D)(r).pipe(yi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(ii(C=>{if(C instanceof Gh)return st(null);throw C}))),Bo(m=>!!m),ii((m,E)=>{if(m instanceof ks||"EmptyError"===m.name)return Kp(t,o,u)?st(new pe([],{})):Wn(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Zp(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Wn(t):Wn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?md(u):this.lineralizeSegments(r,u).pipe((0,En.z)(d=>{const m=new pe(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:S}=gd(t,o,u);if(!m)return Wn(t);const k=this.applyRedirectCommands(E,o.redirectTo,S);return o.redirectTo.startsWith("/")?md(k):this.lineralizeSegments(o,k).pipe((0,En.z)(V=>this.expandSegment(e,t,r,V.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?st(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,vt.U)(k=>(r._loadedConfig=k,new pe(o,{})))):st(new pe(o,{}));const{matched:d,consumedSegments:m,remainingSegments:E}=gd(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,En.z)(S=>{const k=S.module,V=S.routes,{segmentGroup:Z,slicedSegments:oe}=Aa(t,m,E,V),Oe=new pe(Z.segments,Z.children);if(0===oe.length&&Oe.hasChildren())return this.expandChildren(k,V,Oe).pipe((0,vt.U)(Ot=>new pe(m,Ot)));if(0===V.length&&0===oe.length)return st(new pe(m,{}));const Le=qr(r)===u;return this.expandSegment(k,Oe,V,oe,Le?St:u,!0).pipe((0,vt.U)(kt=>new pe(m.concat(kt.segments),kt.children)))})):Wn(t)}getChildConfig(e,t,r){return t.children?st(new dd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?st(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,En.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,vt.U)(u=>(t._loadedConfig=u,u))):function yd(n){return io(Ca(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):st(new dd([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?st(o.map(d=>{const m=e.get(d);let E;if(function r0(n){return n&&ho(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!ho(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return fr(E)})).pipe(fd(),(0,Gr.b)(d=>{if(!Iu(d))return;const m=Ca(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,vt.U)(d=>!0===d)):st(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return st(r);if(o.numberOfChildren>1||!o.children[St])return io(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[St]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new te(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return an(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return an(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new pe(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Pl(n){const e={};for(const r of Object.keys(n.children)){const u=Pl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function zh(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new pe(n.segments.concat(e.segments),e.children)}return n}(new pe(n.segments,e))}class zr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Wo{constructor(e,t){this.component=e,this.route=t}}function Wh(n,e,t){const r=n._root;return Fl(r,e?e._root:null,t,[r.value])}function Sa(n,e,t){const r=function Zh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Fl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=vu(e);return n.children.forEach(d=>{(function _d(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function my(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!lt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lt(n.url,e.url)||!_i(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ad(n,e)||!_i(n.queryParams,e.queryParams);default:return!ad(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new zr(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Fl(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Wo(m.outlet.component,d))}else d&&$i(e,m,o),o.canActivateChecks.push(new zr(r)),Fl(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),an(u,(d,m)=>$i(d,t.getContext(m),o)),o}function $i(n,e,t){const r=vu(n),o=n.value;an(r,(u,d)=>{$i(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Wo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class vy{}function us(n){return new Tn.y(e=>e.error(n))}class Qp{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Aa(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,St);if(null===t)return null;const r=new lo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new uo(r,t),u=new id(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Vp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Mn(e,u),E=this.processSegmentGroup(m,d,u);if(null===E)return null;r.push(...E)}const o=Xp(r);return function Jp(n){n.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Kp(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Zp(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const Z=r.length>0?Ui(r).parameters:{};u=new lo(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),qr(e),e.component,e,eg(t),Ma(t)+r.length,f(e))}else{const Z=gd(t,e,r);if(!Z.matched)return null;d=Z.consumedSegments,m=Z.remainingSegments,u=new lo(d,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),qr(e),e.component,e,eg(t),Ma(t)+d.length,f(e))}const E=function wy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:S}=Aa(t,d,m,E.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);if(0===S.length&&C.hasChildren()){const Z=this.processChildren(E,C);return null===Z?null:[new uo(u,Z)]}if(0===E.length&&0===S.length)return[new uo(u,[])];const k=qr(e)===o,V=this.processSegment(E,C,S,k?St:o);return null===V?null:[new uo(u,V)]}}function Qh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Xp(n){const e=[],t=new Set;for(const r of n){if(!Qh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Xp(r.children);e.push(new uo(r.value,o))}return e.filter(r=>!t.has(r))}function eg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ma(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function z(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Fe(n){return Fn(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,vt.U)(()=>e)):st(e)})}class ct extends class ht{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const In=new h.OlP("ROUTES");class oi{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,vt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new dd(Jc(d.injector.get(In,void 0,h.XFs.Self|h.XFs.Optional)).map(Ol),d)}),ii(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ns(o,()=>new Dr.x).pipe(wl()),t._loader$}loadModuleFactory(e){return fr(e()).pipe((0,En.z)(t=>t instanceof h.YKP?st(t):(0,rn.D)(this.compiler.compileModuleAsync(t))))}}class Jh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function tg(n){throw n}function xa(n,e,t){return e.parse("/")}function Vl(n,e){return st(null)}const Ed={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ng={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sr=(()=>{class n{constructor(t,r,o,u,d,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Dr.x,this.errorHandler=tg,this.malformedUriErrorHandler=xa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Vl,afterPreactivation:Vl},this.urlHandlingStrategy=new Jh,this.routeReuseStrategy=new ct,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const k=d.get(h.R0b);this.isNgZoneEnabled=k instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function bl(){return new te(new pe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new oi(d,m,V=>this.triggerEvent(new Ar(V)),V=>this.triggerEvent(new ba(V))),this.routerState=rd(this.currentUrlTree,this.rootComponentType),this.transitions=new gi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Xn(o=>0!==o.id),(0,vt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fn(o=>{let u=!1,d=!1;return st(o).pipe((0,Gr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Fn(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ef(m.source)&&(this.browserUrlTree=m.extractedUrl),st(m).pipe(Fn(k=>{const V=this.transitions.getValue();return r.next(new Kc(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),V!==this.transitions.getValue()?es.E:Promise.resolve(k)}),function py(n,e,t,r){return Fn(o=>function er(n,e,t,r,o){return new Tu(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,vt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Gr.b)(k=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function g(n,e,t,r,o){return(0,En.z)(u=>function Ll(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Qp(n,e,t,r,o,u).recognize();return null===d?us(new vy):st(d)}catch(d){return us(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,vt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Gr.b)(k=>{if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(Z,k)}this.browserUrlTree=k.urlAfterRedirects}const V=new Ia(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);r.next(V)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:Z,source:oe,restoredState:Oe,extras:Le}=m,At=new Kc(V,this.serializeUrl(Z),oe,Oe);r.next(At);const kt=rd(Z,this.rootComponentType).snapshot;return st(Object.assign(Object.assign({},m),{targetSnapshot:kt,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},Le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),es.E}),Fe(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:Z}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!Z})}),(0,Gr.b)(m=>{const E=new gu(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,vt.U)(m=>Object.assign(Object.assign({},m),{guards:Wh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function vd(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?st(Object.assign(Object.assign({},t),{guardsResult:!0})):function yy(n,e,t,r){return(0,rn.D)(n).pipe((0,En.z)(o=>function Yh(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(m=>{const E=Sa(m,e,o);let C;if(function Hh(n){return n&&ho(n.canDeactivate)}(E))C=fr(E.canDeactivate(n,e,t,r));else{if(!ho(E))throw new Error("Invalid CanDeactivate guard");C=fr(E(n,e,t,r))}return C.pipe(Bo())})).pipe(fd()):st(!0)}(o.component,o.route,t,e,r)),Bo(o=>!0!==o,!0))}(d,r,o,n).pipe((0,En.z)(m=>m&&function Hp(n){return"boolean"==typeof n}(m)?function _y(n,e,t,r){return(0,rn.D)(e).pipe(yi(o=>so(function Yp(n,e){return null!==n&&e&&e(new jo(n)),st(!0)}(o.route.parent,r),function wd(n,e){return null!==n&&e&&e(new Ps(n)),st(!0)}(o.route,r),function Kh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function gy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Ea(()=>st(d.guards.map(E=>{const C=Sa(E,d.node,t);let S;if(function $h(n){return n&&ho(n.canActivateChild)}(C))S=fr(C.canActivateChild(r,n));else{if(!ho(C))throw new Error("Invalid CanActivateChild guard");S=fr(C(r,n))}return S.pipe(Bo())})).pipe(fd())));return st(u).pipe(fd())}(n,o.path,t),function si(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const o=r.map(u=>Ea(()=>{const d=Sa(u,e,t);let m;if(function Rl(n){return n&&ho(n.canActivate)}(d))m=fr(d.canActivate(e,n));else{if(!ho(d))throw new Error("Invalid CanActivate guard");m=fr(d(e,n))}return m.pipe(Bo())}));return st(o).pipe(fd())}(n,o.route,t))),Bo(o=>!0!==o,!0))}(r,u,n,e):st(m)),(0,vt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Gr.b)(m=>{if(Iu(m.guardsResult)){const C=Ca(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new Yc(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),Xn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Fe(m=>{if(m.guards.canActivateChecks.length)return st(m).pipe((0,Gr.b)(E=>{const C=new Nh(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),Fn(E=>{let C=!1;return st(E).pipe(function v(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return st(t);let u=0;return(0,rn.D)(o).pipe(yi(d=>function T(n,e,t,r){return function R(n,e,t,r){const o=z(n);if(0===o.length)return st({});const u={};return(0,rn.D)(o).pipe((0,En.z)(d=>function de(n,e,t,r){const o=Sa(n,e,r);return fr(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Gr.b)(m=>{u[d]=m}))),pu(1),(0,En.z)(()=>z(u).length===o.length?st(u):es.E))}(n._resolve,n,e,r).pipe((0,vt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Vp(n,t).resolve),null)))}(d.route,r,n,e)),(0,Gr.b)(()=>u++),pu(1),(0,En.z)(d=>u===o.length?st(t):es.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Gr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Gr.b)(E=>{const C=new Tr(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),Fe(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:Z}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!Z})}),(0,vt.U)(m=>{const E=function Up(n,e,t){const r=Sl(n,e._root,t?t._root:void 0);return new Al(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,Gr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new kl(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Gr.b)({next(){u=!0},complete(){u=!0}}),function Zc(n){return(0,qn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ii(m=>{if(d=!0,function Go(n){return n&&n[hr]}(m)){const E=Iu(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new Il(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),k={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ef(o.source)};this.scheduleNavigation(S,"imperative",null,k,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new An(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return es.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Nl(t),this.config=t.map(Ol),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,S=E?this.currentUrlTree.fragment:d;let k=null;switch(m){case"merge":k=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=u||null}return null!==k&&(k=this.removeEmptyProps(k)),function sy(n,e,t,r,o){if(0===t.length)return Ml(e.root,e.root,e.root,r,o);const u=function t0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Bp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return an(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Bp(t,e,r)}(t);if(u.toRoot())return Ml(e.root,e.root,new pe([],{}),r,o);const d=function n0(n,e,t){if(n.isAbsolute)return new ud(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new ud(u,u===e.root,0)}const r=wi(n.commands[0])?0:1;return function Bh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new ud(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?ld(d.segmentGroup,d.index,u.commands):$p(d.segmentGroup,d.index,u.commands);return Ml(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,k,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Iu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Xh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Ed):!1===r?Object.assign({},ng):r,Iu(t))return qo(this.currentUrlTree,t,o);const u=this.parseUrl(t);return qo(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ns(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,E;if(this.disposed)return Promise.resolve(!1);let C,S,k;d?(C=d.resolve,S=d.reject,k=d.promise):k=new Promise((oe,Oe)=>{C=oe,S=Oe});const V=++this.navigationId;let Z;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Z=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Z=0,this.setTransition({id:V,targetPageId:Z,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:S,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(oe=>Promise.reject(oe))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Il(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ef(n){return"imperative"!==n}class rg{}class ig{preload(e,t){return st(null)}}let u0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new oi(o,r,E=>t.triggerEvent(new Ar(E)),E=>t.triggerEvent(new ba(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xn(t=>t instanceof ns),yi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,rn.D)(o).pipe((0,Uo.J)(),(0,vt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?st(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,En.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sr),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(rg))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ey=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Kc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ns&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $o&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new $o(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Mu=new h.OlP("ROUTER_CONFIGURATION"),xu=new h.OlP("ROUTER_FORROOT_GUARD"),l0=[Ee,{provide:It,useClass:Sn},{provide:Sr,useFactory:function f0(n,e,t,r,o,u,d={},m,E){const C=new Sr(null,n,e,t,r,o,Jc(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function by(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(S=>{var k,V;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),C},deps:[It,bu,Ee,h.zs3,h.Sil,In,Mu,[class Au{},new h.FiY],[class Je{},new h.FiY]]},bu,{provide:Eu,useFactory:function p0(n){return n.routerState.root},deps:[Sr]},u0,ig,class a0{preload(e,t){return t().pipe(ii(()=>st(null)))}},{provide:Mu,useValue:{enableTracing:!1}}];function c0(){return new h.PXZ("Router",Sr)}let d0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[l0,Iy(t),{provide:xu,useFactory:h0,deps:[[Sr,new h.FiY,new h.tp0]]},{provide:Mu,useValue:r||{}},{provide:fe,useFactory:ob,deps:[ie,[new h.tBr(Ge),new h.FiY],Mu]},{provide:Ey,useFactory:sg,deps:[Sr,sl,Mu]},{provide:rg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ig},{provide:h.PXZ,multi:!0,useFactory:c0},[Id,{provide:h.ip1,multi:!0,useFactory:og,deps:[Id]},{provide:ag,useFactory:g0,deps:[Id]},{provide:h.tb,multi:!0,useExisting:ag}]]}}static forChild(t){return{ngModule:n,providers:[Iy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xu,8),h.LFG(Sr,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function sg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ey(n,e,t)}function ob(n,e,t={}){return t.useHash?new De(n,e):new Ze(n,e)}function h0(n){return"guarded"}function Iy(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:In,multi:!0,useValue:n}]}let Id=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Dr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Sr),d=this.injector.get(Mu);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?st(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Mu),o=this.injector.get(u0),u=this.injector.get(Ey),d=this.injector.get(Sr),m=this.injector.get(h.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function og(n){return n.appInitializer.bind(n)}function g0(n){return n.bootstrapListener.bind(n)}const ag=new h.OlP("Router Initializer"),nf=[];let ab=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[d0.forRoot(nf)],d0]}),n})();var ve=N(5861),Cy=N(4986),ub=N(5032);function Ty(n,e){return e?t=>so(e.pipe((0,mi.q)(1),function _0(){return(0,qn.e)((n,e)=>{n.subscribe((0,Gn.x)(e,ub.Z))})}()),t.pipe(Ty(n))):(0,En.z)((t,r)=>n(t,r).pipe((0,mi.q)(1),function Dy(n){return(0,vt.U)(()=>n)}(t)))}var nA=N(3532);var cb=N(6451),ug=N(5363),fo=N(6063);class db extends Dr.x{constructor(e=1/0,t=1/0,r=fo.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)m=E;m&&r.splice(0,m+1)}}}var E0=N(3099);function I0(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,E0.B)({connector:()=>new db(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function b0(n,e){return(0,ro.m)(e)?Fn(()=>n,e):Fn(()=>n)}var Ay=N(9468),Mr=N(5813),Vs=N(2011);N(5867);var bd=N(9681),Bl=N(4859),Nt=N(2090),Zo=N(1877);const dg=new Map,My={activated:!1,tokenObservers:[]},iA={initialized:!1,enabled:!1};function xr(n){return dg.get(n)||My}function go(n,e){dg.set(n,e)}function hg(){return iA}class R0{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Nt.BH,yield function _b(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Nt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Hi=new Nt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vb(n){if(!xr(n).activated)throw Hi.create("use-before-activation",{appName:n.name})}function O0(n,e){return P0.apply(this,arguments)}function P0(){return(P0=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const k=yield o.getHeartbeatsHeader();k&&(r["X-Firebase-Client"]=k)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(k){throw Hi.create("fetch-network-error",{originalErrorMessage:k.message})}if(200!==d.status)throw Hi.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(k){throw Hi.create("fetch-parse-error",{originalErrorMessage:k.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+C,issuedAtTimeMillis:S}})).apply(this,arguments)}function Ru(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Cd="firebase-app-check-store";let rf=null;function pg(){return rf||(rf=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Hi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Cd,{keyPath:"compositeKey"})}}catch(t){e(Hi.create("storage-open",{originalErrorMessage:t.message}))}}),rf)}function Py(){return(Py=(0,ve.Z)(function*(n,e){const r=(yield pg()).transaction(Cd,"readwrite"),u=r.objectStore(Cd).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var C;m(Hi.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const ka=new Zo.Yd("@firebase/app-check");function jl(n,e){return(0,Nt.hl)()?function Nu(n,e){return function gg(n,e){return Py.apply(this,arguments)}(function L0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ka.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function V0(){return hg().enabled}function Vy(){return mg.apply(this,arguments)}function mg(){return(mg=(0,ve.Z)(function*(){const n=hg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const By={error:"UNKNOWN_ERROR"};function U0(n){return Nt.US.encodeString(JSON.stringify(n),!1)}function $l(n){return jy.apply(this,arguments)}function jy(){return(jy=(0,ve.Z)(function*(n,e=!1){const t=n.app;vb(t);const r=xr(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&af(E)&&(o=E)}if(!e&&o&&af(o))return{token:o.token};let m,d=!1;if(V0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=O0(Ru(t,yield Vy()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const E=yield r.exchangeTokenPromise;return yield jl(t,E),go(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?ka.warn(E.message):ka.error(E),u=E}return o?(m={token:o.token},go(t,Object.assign(Object.assign({},r),{token:o})),yield jl(t,o)):m=bb(u),d&&$0(t,m),m})).apply(this,arguments)}function B0(n,e){const t=xr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),go(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function $y(n){const{app:e}=n,t=xr(e);let r=t.tokenRefresher;r||(r=function j0(n){const{app:e}=n;return new R0((0,ve.Z)(function*(){let r;if(r=xr(e).token?yield $l(n,!0):yield $l(n),r.error)throw r.error}),()=>!0,()=>{const t=xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),go(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function $0(n,e){const t=xr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function af(n){return n.expireTimeMillis-Date.now()>0}function bb(n){return{token:U0(By),error:n}}class Cb{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xr(this.app);for(const t of e)B0(this.app,t.next);return Promise.resolve()}}const Y0="app-check-internal";!function xb(){(0,bd._registerComponent)(new Bl.wA("app-check",n=>function ls(n,e){return new Cb(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Y0).initialize()})),(0,bd._registerComponent)(new Bl.wA(Y0,n=>function Db(n){return{getToken:e=>$l(n,e),addTokenListener:e=>function yg(n,e,t,r){const{app:o}=n,u=xr(o),d={next:t,error:r,type:e};if(go(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&af(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),$y(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>$y(n))}(n,"INTERNAL",e),removeTokenListener:e=>B0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,bd.registerVersion)("@firebase/app-check","0.5.8")}();class Ky{constructor(){return(0,Mr.vb)("app-check")}}"undefined"!=typeof window&&window;var lf=N(127);const Yo=new h.OlP("angularfire2.auth.use-emulator"),cf=new h.OlP("angularfire2.auth.settings"),nw=new h.OlP("angularfire2.auth.tenant-id"),rw=new h.OlP("angularfire2.auth.langugage-code"),Pb=new h.OlP("angularfire2.auth.use-device-language"),_g=new h.OlP("angularfire.auth.persistence"),Jy=(n,e,t,r,o,u,d,m)=>(0,Vs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[C,S]of Object.entries(d))E.settings[C]=S;return m&&E.setPersistence(m),E},[t,r,o,u,d,m]);let Hl=(()=>{class n{constructor(t,r,o,u,d,m,E,C,S,k,V,Z){const oe=new Dr.x,Oe=st(void 0).pipe((0,ug.Q)(d.outsideAngular),Fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8775)))),(0,vt.U)(()=>(0,Vs.on)(t,u,r)),(0,vt.U)(Le=>Jy(Le,u,m,C,S,k,E,V)),I0({bufferSize:1,refCount:!1}));if(Mo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{Oe.pipe(Bo()).subscribe();const At=Oe.pipe(Fn(Ct=>Ct.getRedirectResult().then(Rt=>Rt,()=>null)),Mr.iC,I0({bufferSize:1,refCount:!1})),kt=Oe.pipe(Fn(Ct=>new Tn.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>Ct.onAuthStateChanged(ot=>Rt.next(ot),ot=>Rt.error(ot),()=>Rt.complete()))})))),Ot=Oe.pipe(Fn(Ct=>new Tn.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>Ct.onIdTokenChanged(ot=>Rt.next(ot),ot=>Rt.error(ot),()=>Rt.complete()))}))));this.authState=At.pipe(b0(kt),(0,Ay.R)(d.outsideAngular),(0,ug.Q)(d.insideAngular)),this.user=At.pipe(b0(Ot),(0,Ay.R)(d.outsideAngular),(0,ug.Q)(d.insideAngular)),this.idToken=this.user.pipe(Fn(Ct=>Ct?(0,rn.D)(Ct.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Fn(Ct=>Ct?(0,rn.D)(Ct.getIdTokenResult()):st(null))),this.credential=(0,cb.T)(At,oe,this.authState.pipe(Xn(Ct=>!Ct))).pipe((0,vt.U)(Ct=>(null==Ct?void 0:Ct.user)?Ct:null),(0,Ay.R)(d.outsideAngular),(0,ug.Q)(d.insideAngular))}return(0,Vs.pX)(this,Oe,u,{spy:{apply:(Le,At,kt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&kt.then(Ot=>oe.next(Ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vs.Dh),h.LFG(Vs.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Mr.HU),h.LFG(Yo,8),h.LFG(cf,8),h.LFG(nw,8),h.LFG(rw,8),h.LFG(Pb,8),h.LFG(_g,8),h.LFG(Ky,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),df=(()=>{class n{constructor(){lf.Z.registerVersion("angularfire",Mr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Hl]}),n})();function Xy(){return(0,qn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function iw(n,e){return n===e}N(8775);var et,sw=N(3942),Lb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mo={},t_=t_||{},Tt=Lb||self;function Ra(){}function vg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function hf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Pu="closure_uid_"+(1e9*Math.random()>>>0),Ub=0;function Bb(n,e,t){return n.call.apply(n.bind,arguments)}function jb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Wr(n,e,t){return(Wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bb:jb).apply(null,arguments)}function cs(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function gr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Na(){this.s=this.s,this.o=this.o}var aw={};Na.prototype.s=!1,Na.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Vb(n){return Object.prototype.hasOwnProperty.call(n,Pu)&&n[Pu]||(n[Pu]=++Ub)}(this);delete aw[n]}},Na.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const n_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},uw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function lw(n){return Array.prototype.concat.apply([],arguments)}function r_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ff(n){return/^[\s\xa0]*$/.test(n)}var Ei,Hb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ai(n,e){return-1!=n.indexOf(e)}function i_(n,e){return n<e?-1:n>e?1:0}e:{var Gb=Tt.navigator;if(Gb){var qb=Gb.userAgent;if(qb){Ei=qb;break e}}Ei=""}function pf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function cw(n){const e={};for(const t in n)e[t]=n[t];return e}var s_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function o_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<s_.length;u++)t=s_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function dw(n){return dw[" "](n),n}dw[" "]=Ra;var mf,n,mA=ai(Ei,"Opera"),gf=ai(Ei,"Trident")||ai(Ei,"MSIE"),a_=ai(Ei,"Edge"),wg=a_||gf,u_=ai(Ei,"Gecko")&&!(ai(Ei.toLowerCase(),"webkit")&&!ai(Ei,"Edge"))&&!(ai(Ei,"Trident")||ai(Ei,"MSIE"))&&!ai(Ei,"Edge"),zb=ai(Ei.toLowerCase(),"webkit")&&!ai(Ei,"Edge");function Wb(){var n=Tt.document;return n?n.documentMode:void 0}e:{var yf="",l_=(n=Ei,u_?/rv:([^\);]+)(\)|;)/.exec(n):a_?/Edge\/([\d\.]+)/.exec(n):gf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):zb?/WebKit\/(\S+)/.exec(n):mA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(l_&&(yf=l_?l_[1]:""),gf){var _f=Wb();if(null!=_f&&_f>parseFloat(yf)){mf=String(_f);break e}}mf=yf}var Zb={};var Yb=Tt.document&&gf&&(Wb()||parseInt(mf,10))||void 0,Qb=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",Ra,e),Tt.removeEventListener("test",Ra,e)}catch(t){}return n}();function mr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Qo(n,e){if(mr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(u_){e:{try{dw(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Jb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qo.Z.h.call(this)}}mr.prototype.h=function(){this.defaultPrevented=!0},gr(Qo,mr);var Jb={2:"touch",3:"pen",4:"mouse"};Qo.prototype.h=function(){Qo.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Oa="closure_listenable_"+(1e6*Math.random()|0),Xb=0;function eC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Xb,this.ca=this.fa=!1}function Sd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ds(n){this.src=n,this.g={},this.h=0}function Gl(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=n_(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Sd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kr(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}ds.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=kr(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new eC(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Pa="closure_lm_"+(1e6*Math.random()|0),Md={};function hs(n,e,t,r,o){if(r&&r.once)return ql(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)hs(n,e[u],t,r,o);return null}return t=Uu(t),n&&n[Oa]?n.N(e,t,hf(r)?!!r.capture:!!r,o):Eg(n,e,t,!1,r,o)}function Eg(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=hf(o)?!!o.capture:!!o,m=Lu(n);if(m||(n[Pa]=m=new ds(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function xd(){var e=kd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Qb||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Wl(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ql(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ql(n,e[u],t,r,o);return null}return t=Uu(t),n&&n[Oa]?n.O(e,t,hf(r)?!!r.capture:!!r,o):Eg(n,e,t,!0,r,o)}function zl(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)zl(n,e[u],t,r,o);else r=hf(r)?!!r.capture:!!r,t=Uu(t),n&&n[Oa]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kr(u=n.g[e],t,r,o))&&(Sd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Lu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kr(e,t,r,o)),(t=-1<n?e[n]:null)&&Fu(t))}function Fu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Oa])Gl(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Wl(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Lu(e))?(Gl(t,n),0==t.h&&(t.src=null,e[Pa]=null)):Sd(n)}}}function Wl(n){return n in Md?Md[n]:Md[n]="on"+n}function kd(n,e){if(n.ca)n=!0;else{e=new Qo(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Fu(n),n=t.call(r,e)}return n}function Lu(n){return(n=n[Pa])instanceof ds?n:null}var Vu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uu(n){return"function"==typeof n?n:(n[Vu]||(n[Vu]=function(e){return n.handleEvent(e)}),n[Vu])}function yr(){Na.call(this),this.i=new ds(this),this.P=this,this.I=null}function Rr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new mr(e,n);else if(e instanceof mr)e.target=e.target||n;else{var o=e;o_(e=new mr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=vf(d,r,!0,e)&&o}if(o=vf(d=e.g=n,r,!0,e)&&o,o=vf(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=vf(d=e.g=t[u],r,!1,e)&&o}function vf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&Gl(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}gr(yr,Na),yr.prototype[Oa]=!0,yr.prototype.removeEventListener=function(n,e,t,r){zl(this,n,e,t,r)},yr.prototype.M=function(){if(yr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Sd(t[r]);delete n.g[e],n.h--}}this.I=null},yr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ig=Tt.JSON.stringify;function fw(){var n=f_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bg,d_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gw,n=>n.reset());class gw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function mw(n){Tt.setTimeout(()=>{throw n},0)}function h_(n,e){bg||function tC(){var n=Tt.Promise.resolve(void 0);bg=function(){n.then(nC)}}(),Cg||(bg(),Cg=!0),f_.add(n,e)}var Cg=!1,f_=new class pw{constructor(){this.h=this.g=null}add(e,t){const r=d_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nC(){for(var n;n=fw();){try{n.h.call(n.g)}catch(t){mw(t)}var e=d_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cg=!1}function Dg(n,e){yr.call(this),this.h=n||1,this.g=e||Tt,this.j=Wr(this.kb,this),this.l=Date.now()}function Tg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function p_(n,e,t){if("function"==typeof n)t&&(n=Wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function g_(n){n.g=p_(()=>{n.g=null,n.i&&(n.i=!1,g_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}gr(Dg,yr),(et=Dg.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rr(this,"tick"),this.da&&(Tg(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){Dg.Z.M.call(this),Tg(this),delete this.g};class rC extends Na{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:g_(this)}M(){super.M(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wf(n){Na.call(this),this.h=n,this.g={}}gr(wf,Na);var iC=[];function yw(n,e,t,r){Array.isArray(t)||(t&&(iC[0]=t.toString()),t=iC);for(var o=0;o<t.length;o++){var u=hs(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ag(n){pf(n.g,function(e,t){this.g.hasOwnProperty(t)&&Fu(e)},n),n.g={}}function Rd(){this.g=!0}function Ef(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function oC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Ig(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}wf.prototype.M=function(){wf.Z.M.call(this),Ag(this)},wf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rd.prototype.Aa=function(){this.g=!1},Rd.prototype.info=function(){};var Bu={},aC=null;function Sg(){return aC=aC||new yr}function Zl(n){mr.call(this,Bu.Ma,n)}function If(n){const e=Sg();Rr(e,new Zl(e,n))}function m_(n,e){mr.call(this,Bu.STAT_EVENT,n),this.stat=e}function Ii(n){const e=Sg();Rr(e,new m_(e,n))}function y_(n,e){mr.call(this,Bu.Na,n),this.size=e}function ju(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}Bu.Ma="serverreachability",gr(Zl,mr),Bu.STAT_EVENT="statevent",gr(m_,mr),Bu.Na="timingevent",gr(y_,mr);var Mg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},__={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function v_(){}function vw(){}v_.prototype.h=null;var E_,bf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function w_(){mr.call(this,"d")}function xg(){mr.call(this,"c")}function Cf(){}function Nd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new wf(this),this.P=vA,this.W=new Dg(n=wg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new kg}function kg(){this.i=null,this.g="",this.h=!1}gr(w_,mr),gr(xg,mr),gr(Cf,v_),Cf.prototype.g=function(){return new XMLHttpRequest},Cf.prototype.i=function(){return{}},E_=new Cf;var vA=45e3,Df={},Rg={};function ww(n,e,t){n.K=1,n.v=Vg(Jo(e)),n.s=t,n.U=!0,Od(n,null)}function Od(n,e){n.F=Date.now(),Tf(n),n.A=Jo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),xw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new kg,n.g=Ww(n.l,t?e:null,!n.s),0<n.O&&(n.L=new rC(Wr(n.Ia,n,n.g),n.O)),yw(n.V,n.g,"readystatechange",n.gb),e=n.H?cw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),If(1),function sC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var S=C[0];C=C[1];var k=S.split("_");d=2<=k.length&&"type"==k[1]?d+(S+"=")+C+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function I_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ng(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=b_(n,t),o==Rg){4==e&&(n.o=4,Ii(14),r=!1),Ef(n.j,n.m,null,"[Incomplete Response]");break}if(o==Df){n.o=4,Ii(15),Ef(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ef(n.j,n.m,o,null),C_(n,o)}I_(n)&&o!=Rg&&o!=Df&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),zg(e),e.L=!0,Ii(11))):(Ef(n.j,n.m,t,"[Invalid Chunked Response]"),Pd(n),Yl(n))}function b_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Rg:(t=Number(e.substring(t,r)),isNaN(t)?Df:(r+=1)+t>e.length?Rg:(e=e.substr(r,t),n.C=r+t,e))}function Tf(n){n.Y=Date.now()+n.P,Af(n,n.P)}function Af(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ju(Wr(n.eb,n),e)}function Kl(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function Yl(n){0==n.l.G||n.I||Hw(n.l,n)}function Pd(n){Kl(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Tg(n.W),Ag(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function C_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||M_(t.i,n)))if(t.I=n.N,!n.J&&M_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=ju(Wr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Wg(t),Pf(t)}qg(t),Ii(18)}if(1>=S_(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else tc(t,11)}else if((n.J||t.g==n)&&Wg(t),!ff(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const S=C[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const k=C[4];null!=k&&(t.za=k,t.h.info("SVER="+t.za));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const oe=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.i;!u.g&&(ai(oe,"spdy")||ai(oe,"quic")||ai(oe,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Ug(u,u.h),u.h=null))}if(r.D){const Oe=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.sa=Oe,gn(r.F,r.D,Oe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=zw(r,r.H?r.la:null,r.W),d.J){x_(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(Kl(m),Tf(m)),r.g=d}else O_(r);0<t.l.length&&Bd(t)}else"stop"!=C[0]&&"close"!=C[0]||tc(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?tc(t,7):Hg(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}If(4)}catch(C){}}function Fd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(vg(n)||"string"==typeof n)uw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(vg(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Og(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(vg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ql(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ql)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Pg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Fa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Fa(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Fa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=Nd.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==ea(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const S=ea(this.g);var e=this.g.Da();const k=this.g.ba();if(!(3>S)&&(3!=S||wg||this.g&&(this.h.h||this.g.ga()||Vw(this.g)))){this.I||4!=S||7==e||If(8==e||0>=k?3:2),Kl(this);var t=this.g.ba();this.N=t;t:if(I_(this)){var r=Vw(this.g);n="";var o=r.length,u=4==ea(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Pd(this),Yl(this);var d="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function yA(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ff(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Ii(12),Pd(this),Yl(this);break e}Ef(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,C_(this,t)}this.U?(Ng(this,S,d),wg&&this.i&&3==S&&(yw(this.V,this.W,"tick",this.fb),this.W.start())):(Ef(this.j,this.m,d,null),C_(this,d)),4==S&&Pd(this),this.i&&!this.I&&(4==S?Hw(this.l,this):(this.i=!1,Tf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Pd(this),Yl(this)}}}catch(S){}},et.fb=function(){if(this.g){var n=ea(this.g),e=this.g.ga();this.C<e.length&&(Kl(this),Ng(this,n,e),this.i&&4!=n&&Tf(this))}},et.cancel=function(){this.I=!0,Pd(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function _A(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(If(3),Ii(17)),Pd(this),this.o=2,Yl(this)):Af(this,this.Y-n)},(et=Ql.prototype).R=function(){Pg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Pg(this),this.g.concat()},et.get=function(n,e){return Fa(this.h,n)?this.h[n]:e},et.set=function(n,e){Fa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var D_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function La(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof La){this.g=void 0!==e?e:n.g,Fg(this,n.j),this.s=n.s,Sf(this,n.i),Mf(this,n.m),this.l=n.l,e=n.h;var t=new Vd;t.i=e.i,e.g&&(t.g=new Ql(e.g),t.h=e.h),Lg(this,t),this.o=n.o}else n&&(t=String(n).match(D_))?(this.g=!!e,Fg(this,t[1]||"",!0),this.s=Ld(t[2]||""),Sf(this,t[3]||"",!0),Mf(this,t[4]),this.l=Ld(t[5]||"",!0),Lg(this,t[6]||"",!0),this.o=Ld(t[7]||"")):(this.g=!!e,this.h=new Vd(null,this.g))}function Jo(n){return new La(n)}function Fg(n,e,t){n.j=t?Ld(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Sf(n,e,t){n.i=t?Ld(e,!0):e}function Mf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Lg(n,e,t){e instanceof Vd?(n.h=e,function lC(n,e){e&&!n.j&&(Va(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(uC(this,r),xw(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Jl(e,Aw)),n.h=new Vd(e,n.g))}function gn(n,e,t){n.h.set(e,t)}function Vg(n){return gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ld(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Cw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Cw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}La.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jl(e,T_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jl(e,T_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jl(t,"/"==t.charAt(0)?Tw:Dw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jl(t,Sw)),n.join("")};var T_=/[#\/\?@]/g,Dw=/[#\?:]/g,Tw=/[#\?]/g,Aw=/[#\?@]/g,Sw=/#/g;function Vd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Va(n){n.g||(n.g=new Ql,n.h=0,n.i&&function Ew(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function uC(n,e){Va(n),e=Xl(n,e),Fa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Fa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Pg(n)))}function Mw(n,e){return Va(n),e=Xl(n,e),Fa(n.g.h,e)}function xw(n,e,t){uC(n,e),0<t.length&&(n.i=null,n.g.set(Xl(n,e),r_(t)),n.h+=t.length)}function Xl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function A_(n){this.l=n||cC,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ea&&Tt.g.Ea()&&Tt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Vd.prototype).add=function(n,e){Va(this),this.i=null,n=Xl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Va(this),this.g.forEach(function(t,r){uw(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Va(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){Va(this);var e=[];if("string"==typeof n)Mw(this,n)&&(e=lw(e,this.g.get(Xl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=lw(e,n[t])}return e},et.set=function(n,e){return Va(this),this.i=null,Mw(this,n=Xl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var cC=10;function kw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function S_(n){return n.h?1:n.g?n.g.size:0}function M_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ug(n,e){n.g?n.g.add(e):n.h=e}function x_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ec(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return r_(n.i)}function k_(){}function dC(){this.g=new k_}function Rw(n,e,t){const r=t||"";try{Fd(n,function(o,u){let d=o;hf(o)&&(d=Ig(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function xf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Bg(n){this.l=n.$b||null,this.j=n.ib||!1}function kf(n,e){yr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Rf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}A_.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},k_.prototype.stringify=function(n){return Tt.JSON.stringify(n,void 0)},k_.prototype.parse=function(n){return Tt.JSON.parse(n,void 0)},gr(Bg,v_),Bg.prototype.g=function(){return new kf(this.l,this.j)},Bg.prototype.i=function(n){return function(){return n}}({}),gr(kf,yr);var Rf=0;function _o(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Nf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Of(n)}function Of(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=kf.prototype).open=function(n,e){if(this.readyState!=Rf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Of(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nf(this)),this.readyState=Rf},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Of(this)),this.g&&(this.readyState=3,Of(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Tt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_o(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Nf(this):Of(this),3==this.readyState&&_o(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Nf(this))},et.Ta=function(n){this.g&&(this.response=n,Nf(this))},et.ha=function(){this.g&&Nf(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(kf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Xo=Tt.JSON.parse;function tn(n){yr.call(this),this.headers=new Ql,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Us,this.K=this.L=!1}gr(tn,yr);var Us="",Nw=/^https?$/i,Ow=["POST","PUT"];function pC(n){return"content-type"==n.toLowerCase()}function Pw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Fw(n),$u(n)}function Fw(n){n.D||(n.D=!0,Rr(n,"complete"),Rr(n,"error"))}function jg(n){if(n.h&&void 0!==t_&&(!n.C[1]||4!=ea(n)||2!=n.ba()))if(n.v&&4==ea(n))p_(n.Fa,0,n);else if(Rr(n,"readystatechange"),4==ea(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(D_)[1]||null;if(!o&&Tt.self&&Tt.self.location){var u=Tt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Nw.test(o?o.toLowerCase():"")}t=r}if(t)Rr(n,"complete"),Rr(n,"success");else{n.m=6;try{var d=2<ea(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",Fw(n)}}finally{$u(n)}}}function $u(n,e){if(n.g){Lw(n);const t=n.g,r=n.C[0]?Ra:null;n.g=null,n.C=null,e||Rr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Lw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function ea(n){return n.g?n.g.readyState:0}function Vw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Us:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function $g(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Uw(n){let e="";return pf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):gn(n,e,t))}function Hu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Bw(n){this.za=0,this.l=[],this.h=new Rd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hu("baseRetryDelayMs",5e3,n),this.$a=Hu("retryDelaySeedMs",1e4,n),this.Ya=Hu("forwardChannelMaxRetries",2,n),this.ra=Hu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new A_(n&&n.concurrentRequestLimit),this.Ca=new dC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Hg(n){if(Gg(n),3==n.G){var e=n.V++,t=Jo(n.F);gn(t,"SID",n.J),gn(t,"RID",e),gn(t,"TYPE","terminate"),jd(n,t),(e=new Nd(n,n.h,e,void 0)).K=2,e.v=Vg(Jo(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(t=Tt.navigator.sendBeacon(e.v.toString(),"")),!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ww(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Tf(e)}qw(n)}function Pf(n){n.g&&(zg(n),n.g.cancel(),n.g=null)}function Gg(n){Pf(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),Wg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function Ud(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Bd(n)}function Bd(n){kw(n.i)||n.m||(n.m=!0,h_(n.Ha,n),n.C=0)}function R_(n,e){var t;t=e?e.m:n.V++;const r=Jo(n.F);gn(r,"SID",n.J),gn(r,"RID",t),gn(r,"AID",n.U),jd(n,r),n.o&&n.s&&$g(r,n.o,n.s),t=new Nd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=N_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ug(n.i,t),ww(t,r,e)}function jd(n,e){n.j&&Fd({},function(t,r){gn(e,r,t)})}function N_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Wr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const S=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{Rw(S,d,"req"+C+"_")}catch(k){r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function O_(n){n.g||n.u||(n.Y=1,h_(n.Ga,n),n.A=0)}function qg(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ju(Wr(n.Ga,n),Gw(n,n.A)),n.A++,0))}function zg(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function $w(n){n.g=new Nd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Jo(n.oa);gn(e,"RID","rpc"),gn(e,"SID",n.J),gn(e,"CI",n.N?"0":"1"),gn(e,"AID",n.U),jd(n,e),gn(e,"TYPE","xmlhttp"),n.o&&n.s&&$g(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Vg(Jo(e)),t.s=null,t.U=!0,Od(t,n)}function Wg(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function Hw(n,e){var t=null;if(n.g==e){Wg(n),zg(n),n.g=null;var r=2}else{if(!M_(n.i,e))return;t=e.D,x_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Rr(r=Sg(),new y_(r,t,e,o)),Bd(n)}else O_(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function jw(n,e){return!(S_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ju(Wr(n.Ha,n,e),Gw(n,n.C)),n.C++,0)))}(n,e)||2==r&&qg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:tc(n,5);break;case 4:tc(n,10);break;case 3:tc(n,6);break;default:tc(n,2)}}function Gw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function tc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Wr(n.jb,n);t||(t=new La("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||Fg(t,"https"),Vg(t)),function hC(n,e){const t=new Rd;if(Tt.Image){const r=new Image;r.onload=cs(xf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cs(xf,t,r,"TestLoadImage: error",!1,e),r.onabort=cs(xf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cs(xf,t,r,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.G=0,n.j&&n.j.va(e),qw(n),Gg(n)}function qw(n){n.G=0,n.I=-1,n.j&&((0!=ec(n.i).length||0!=n.l.length)&&(n.i.i.length=0,r_(n.l),n.l.length=0),n.j.ua())}function zw(n,e,t){let r=function Iw(n){return n instanceof La?Jo(n):new La(n,void 0)}(t);if(""!=r.i)e&&Sf(r,e+"."+r.i),Mf(r,r.m);else{const o=Tt.location;r=function bw(n,e,t,r){var o=new La(null,void 0);return n&&Fg(o,n),e&&Sf(o,e),t&&Mf(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&pf(n.aa,function(o,u){gn(r,u,o)}),t=n.sa,(e=n.D)&&t&&gn(r,e,t),gn(r,"VER",n.ma),jd(n,r),r}function Ww(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tn(t&&n.Ba&&!n.qa?new Bg({ib:!0}):n.qa)).L=n.H,e}function Zw(){}function Zg(){if(gf&&!(10<=Number(Yb)))throw Error("Environmental error: no available transport.")}function fs(n,e){yr.call(this),this.g=new Bw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ff(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ff(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $d(this)}function Kw(n){w_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Yw(){xg.call(this),this.status=1}function $d(n){this.g=n}(et=tn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():E_.g(),this.C=function _w(n){return n.h||(n.h=n.i())}(this.u?this.u:E_),this.g.onreadystatechange=Wr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Pw(this,u)}n=t||"";const o=new Ql(this.headers);r&&Fd(r,function(u,d){o.set(d,u)}),r=function $b(n){e:{var e=pC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Tt.FormData&&n instanceof Tt.FormData,!(0<=n_(Ow,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Lw(this),0<this.B&&((this.K=function fC(n){return gf&&function Kb(){return function yo(n){var e=Zb;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Hb(String(mf)).split("."),t=Hb("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=i_(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||i_(0==o[2].length,0==u[2].length)||i_(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wr(this.pa,this)):this.A=p_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Pw(this,u)}},et.pa=function(){void 0!==t_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rr(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Rr(this,"complete"),Rr(this,"abort"),$u(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$u(this,!0)),tn.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?jg(this):this.cb())},et.cb=function(){jg(this)},et.ba=function(){try{return 2<ea(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Xo(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=Bw.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Nd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=cw(u),o_(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=N_(this,o,e),gn(t=Jo(this.F),"RID",n),gn(t,"CVER",22),this.D&&gn(t,"X-HTTP-Session-Id",this.D),jd(this,t),this.o&&u&&$g(t,this.o,u),Ug(this.i,o),this.Ra&&gn(t,"TYPE","init"),this.ja?(gn(t,"$req",e),gn(t,"SID","null"),o.$=!0,ww(o,t,null)):ww(o,t,e),this.G=2}}else 3==this.G&&(n?R_(this,n):0==this.l.length||kw(this.i)||R_(this))},et.Ga=function(){if(this.u=null,$w(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ju(Wr(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ii(10),Pf(this),$w(this))},et.ab=function(){null!=this.v&&(this.v=null,Pf(this),qg(this),Ii(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ii(2)):(this.h.info("Failed to ping google.com"),Ii(1))},(et=Zw.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},Zg.prototype.g=function(n,e){return new fs(n,e)},gr(fs,yr),fs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),h_(Wr(n.hb,n,e))),Ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=zw(n,null,n.W),Bd(n)},fs.prototype.close=function(){Hg(this.g)},fs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ud(this.g,e)}else this.v?((e={}).__data__=Ig(n),Ud(this.g,e)):Ud(this.g,n)},fs.prototype.M=function(){this.g.j=null,delete this.j,Hg(this.g),delete this.g,fs.Z.M.call(this)},gr(Kw,w_),gr(Yw,xg),gr($d,Zw),$d.prototype.xa=function(){Rr(this.g,"a")},$d.prototype.wa=function(n){Rr(this.g,new Kw(n))},$d.prototype.va=function(n){Rr(this.g,new Yw(n))},$d.prototype.ua=function(){Rr(this.g,"b")},Zg.prototype.createWebChannel=Zg.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,Mg.NO_ERROR=0,Mg.TIMEOUT=8,Mg.HTTP_ERROR=6,__.COMPLETE="complete",vw.EventType=bf,bf.OPEN="a",bf.CLOSE="b",bf.ERROR="c",bf.MESSAGE="d",yr.prototype.listen=yr.prototype.N,tn.prototype.listenOnce=tn.prototype.O,tn.prototype.getLastError=tn.prototype.La,tn.prototype.getLastErrorCode=tn.prototype.Da,tn.prototype.getStatus=tn.prototype.ba,tn.prototype.getResponseJson=tn.prototype.Qa,tn.prototype.getResponseText=tn.prototype.ga,tn.prototype.send=tn.prototype.ea;var gC=mo.createWebChannelTransport=function(){return new Zg},mC=mo.getStatEventTarget=function(){return Sg()},P_=mo.ErrorCode=Mg,yC=mo.EventType=__,Qw=mo.Event=Bu,F_=mo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Jw=mo.FetchXmlHttpFactory=Bg,Ff=mo.WebChannel=vw,Xw=mo.XhrIo=tn;const L_="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let nc="9.8.0";const Ua=new Zo.Yd("@firebase/firestore");function Kg(){return Ua.logLevel}function Re(n,...e){if(Ua.logLevel<=Zo.in.DEBUG){const t=e.map(Gu);Ua.debug(`Firestore (${nc}): ${n}`,...t)}}function tr(n,...e){if(Ua.logLevel<=Zo.in.ERROR){const t=e.map(Gu);Ua.error(`Firestore (${nc}): ${n}`,...t)}}function Lf(n,...e){if(Ua.logLevel<=Zo.in.WARN){const t=e.map(Gu);Ua.warn(`Firestore (${nc}): ${n}`,...t)}}function Gu(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function bt(n,e){n||rt()}function ze(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Nt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xe{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _C{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class vC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yg{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Xe;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Xe,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ve.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Xe)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new tE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Nr(e)}}class wC{constructor(e,t,r){this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Qg{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new wC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ln{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new Vf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Gi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function EC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Gi.A=-1;class nE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=EC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function rc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function V_(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new Vn(0,0))}static max(){return new wt(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function rE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ic(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Hd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Uf{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Uf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends Uf{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const IC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Uf{construct(e,t,r){return new Un(e,t,r)}static isValidIdentifier(e){return IC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Un(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new xe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(t)}static emptyPath(){return new Un([])}}class sc{constructor(e){this.fields=e,e.sort(Un.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class nr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new nr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new nr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const bC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(bt(!!n),"string"==typeof n){let e=0;const t=bC.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cn(n.seconds),nanos:cn(n.nanos)}}function cn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function oc(n){return"string"==typeof n?nr.fromBase64String(n):nr.fromUint8Array(n)}function U_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sE(n){const e=n.mapValue.fields.__previous_value__;return U_(e)?sE(e):e}function Gd(n){const e=Bs(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class oE{constructor(e,t,r,o,u,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class ta{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ta("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ta&&e.projectId===this.projectId&&e.database===this.database}}function Bf(n){return null==n}function qd(n){return 0===n&&1/n==-1/0}function aE(n){return"number"==typeof n&&Number.isInteger(n)&&!qd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(qt.fromString(e))}static fromName(e){return new $e(qt.fromString(e).popFirst(5))}static empty(){return new $e(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new qt(e.slice()))}}const ac={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},B_={nullValue:"NULL_VALUE"};function zd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?U_(n)?4:dE(n)?9007199254740991:10:rt()}function Ba(n,e){if(n===e)return!0;const t=zd(n);if(t!==zd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gd(n).isEqual(Gd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Bs(r.timestampValue),d=Bs(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,oc(n.bytesValue).isEqual(oc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return cn(r.geoPointValue.latitude)===cn(o.geoPointValue.latitude)&&cn(r.geoPointValue.longitude)===cn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return cn(r.integerValue)===cn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=cn(r.doubleValue),d=cn(o.doubleValue);return u===d?qd(u)===qd(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return rc(n.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(rE(u)!==rE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Ba(u[m],d[m])))return!1;return!0}(n,e);default:return rt()}var o}function Wd(n,e){return void 0!==(n.values||[]).find(t=>Ba(t,e))}function vo(n,e){if(n===e)return 0;const t=zd(n),r=zd(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=cn(o.integerValue||o.doubleValue),m=cn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return uE(n.timestampValue,e.timestampValue);case 4:return uE(Gd(n),Gd(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=oc(o),m=oc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let E=0;E<d.length&&E<m.length;E++){const C=xt(d[E],m[E]);if(0!==C)return C}return xt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=xt(cn(o.latitude),cn(u.latitude));return 0!==d?d:xt(cn(o.longitude),cn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let E=0;E<d.length&&E<m.length;++E){const C=vo(d[E],m[E]);if(C)return C}return xt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ac.mapValue&&u===ac.mapValue)return 0;if(o===ac.mapValue)return 1;if(u===ac.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let S=0;S<m.length&&S<C.length;++S){const k=xt(m[S],C[S]);if(0!==k)return k;const V=vo(d[m[S]],E[C[S]]);if(0!==V)return V}return xt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw rt()}}function uE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=Bs(n),r=Bs(e),o=xt(t.seconds,r.seconds);return 0!==o?o:xt(t.nanos,r.nanos)}function Zd(n){return Jg(n)}function Jg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Bs(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?oc(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Jg(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Jg(r.fields[m])}`;return u+"}"}(n.mapValue):rt();var e}function wo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function j_(n){return!!n&&"integerValue"in n}function jf(n){return!!n&&"arrayValue"in n}function lE(n){return!!n&&"nullValue"in n}function cE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xg(n){return!!n&&"mapValue"in n}function Kd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ic(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function CC(n){return"nullValue"in n?B_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wo(ta.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function Yd(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wo(ta.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ac:rt()}function hE(n,e){const t=vo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $_(n,e){const t=vo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kd(t)}setAll(e){let t=Un.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Kd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Xg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Xg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ic(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ui(Kd(this.value))}}function H_(n){const e=[];return ic(n.fields,(t,r)=>{const o=new Un([t]);if(Xg(r)){const u=H_(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new sc(e)}class mn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new mn(e,0,wt.min(),wt.min(),ui.empty(),0)}static newFoundDocument(e,t,r){return new mn(e,1,t,wt.min(),r,0)}static newNoDocument(e,t){return new mn(e,2,t,wt.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,wt.min(),ui.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $f{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function G_(n){return n.fields.find(e=>2===e.kind)}function ja(n){return n.fields.filter(e=>2!==e.kind)}$f.UNKNOWN_ID=-1;class em{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qd(0,Eo.min())}}function q_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=wt.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new Eo(o,$e.empty(),e)}function DC(n){return new Eo(n.readTime,n.key,-1)}class Eo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Eo(wt.min(),$e.empty(),-1)}static max(){return new Eo(wt.max(),$e.empty(),-1)}}function fE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}class xn{constructor(e,t){this.comparator=e,this.root=t||Or.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tm(this.root,e,this.comparator,!1)}getReverseIterator(){return new tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tm(this.root,e,this.comparator,!0)}}class tm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Or.RED,this.left=null!=o?o:Or.EMPTY,this.right=null!=u?u:Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Or(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Or.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1,Or.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Or(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jd(n){return n.hasNext()?n.getNext():void 0}class TC{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function gE(n,e=null,t=[],r=[],o=null,u=null,d=null){return new TC(n,e,t,r,o,u,d)}function uc(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Zd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Bf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zd(r)).join(",")),e.P=t}return e.P}function Hf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!RC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ba(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vE(n.startAt,e.startAt)&&vE(n.endAt,e.endAt)}function Gf(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function qf(n,e){return n.filters.filter(t=>t instanceof Pr&&t.field.isEqual(e))}function mE(n,e,t){let r=B_,o=!0;for(const u of qf(n,e)){let d=B_,m=!0;switch(u.op){case"<":case"<=":d=CC(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=B_}hE({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];hE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function yE(n,e,t){let r=ac,o=!0;for(const u of qf(n,e)){let d=ac,m=!0;switch(u.op){case">=":case">":d=Yd(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=ac}$_({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];$_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Pr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new SC(e,t,r):"array-contains"===t?new z_(e,r):"in"===t?new _E(e,r):"not-in"===t?new W_(e,r):"array-contains-any"===t?new kC(e,r):new Pr(e,t,r)}static V(e,t,r){return"in"===t?new MC(e,r):new xC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(vo(t,this.value)):null!==t&&zd(this.value)===zd(t)&&this.v(vo(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class SC extends Pr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class MC extends Pr{constructor(e,t){super(e,"in",t),this.keys=nm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xC extends Pr{constructor(e,t){super(e,"not-in",t),this.keys=nm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class z_ extends Pr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&Wd(t.arrayValue,this.value)}}class _E extends Pr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wd(this.value.arrayValue,t)}}class W_ extends Pr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wd(this.value.arrayValue,t)}}class kC extends Pr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wd(this.value.arrayValue,r))}}class qu{constructor(e,t){this.position=e,this.inclusive=t}}class zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function RC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Z_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):vo(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function vE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ba(n.position[t],e.position[t]))return!1;return!0}class na{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function wE(n,e,t,r,o,u,d,m){return new na(n,e,t,r,o,u,d,m)}function lc(n){return new na(n)}function K_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Xd(n){for(const e of n.filters)if(e.S())return e.field;return null}function Y_(n){return null!==n.collectionGroup}function Io(n){const e=ze(n);if(null===e.D){e.D=[];const t=Xd(e),r=K_(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new zu(t)),e.D.push(new zu(Un.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new zu(Un.keyField(),u))}}}return e.D}function li(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=gE(e.path,e.collectionGroup,Io(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Io(e))t.push(new zu(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new qu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new qu(e.startAt.position,e.startAt.inclusive):null;e.C=gE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function EE(n,e,t){return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rm(n,e){return Hf(li(n),li(e))&&n.limitType===e.limitType}function Q_(n){return`${uc(li(n))}|lt:${n.limitType}`}function J_(n){return`Query(target=${function AC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Zd(r.value)}`;var r}).join(", ")}]`),Bf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Zd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Zd(t)).join(",")),`Target(${e})`}(li(n))}; limitType=${n.limitType})`}function X_(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Z_(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Io(t),r)||t.endAt&&!function(o,u,d){const m=Z_(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Io(t),r)));var t,r}function IE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bE(n){return(e,t)=>{let r=!1;for(const o of Io(n)){const u=CE(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function CE(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),E=d.data.field(o);return null!==m&&null!==E?vo(m,E):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function ev(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qd(e)?"-0":e}}function im(n){return{integerValue:""+n}}function zf(n,e){return aE(e)?im(e):ev(n,e)}class Wu{constructor(){this._=void 0}}function NC(n,e,t){return n instanceof eh?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof cc?sm(n,e):n instanceof dc?OC(n,e):function(r,o){const u=tv(r,o),d=TE(u)+TE(r.k);return j_(u)&&j_(r.k)?im(d):ev(r.M,d)}(n,e)}function DE(n,e,t){return n instanceof cc?sm(n,e):n instanceof dc?OC(n,e):t}function tv(n,e){return n instanceof th?j_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class eh extends Wu{}class cc extends Wu{constructor(e){super(),this.elements=e}}function sm(n,e){const t=hc(e);for(const r of n.elements)t.some(o=>Ba(o,r))||t.push(r);return{arrayValue:{values:t}}}class dc extends Wu{constructor(e){super(),this.elements=e}}function OC(n,e){let t=hc(e);for(const r of n.elements)t=t.filter(o=>!Ba(o,r));return{arrayValue:{values:t}}}class th extends Wu{constructor(e,t){super(),this.M=e,this.k=t}}function TE(n){return cn(n.integerValue||n.doubleValue)}function hc(n){return jf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nh{constructor(e,t){this.field=e,this.transform=t}}class IA{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function om(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class nv{}function AE(n,e,t){n instanceof ih?function(r,o,u){const d=r.value.clone(),m=RE(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Zu?function(r,o,u){if(!om(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=RE(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(kE(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function SE(n,e,t){var o;n instanceof ih?function(r,o,u){if(!om(r.precondition,o))return;const d=r.value.clone(),m=NE(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(xE(o),d).setHasLocalMutations()}(n,e,t):n instanceof Zu?function(r,o,u){if(!om(r.precondition,o))return;const d=NE(r.fieldTransforms,u,o),m=o.data;m.setAll(kE(r)),m.setAll(d),o.convertToFoundDocument(xE(o),m).setHasLocalMutations()}(n,e,t):om(n.precondition,o=e)&&o.convertToNoDocument(wt.min())}function ME(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=tv(r.transform,o||null);null!=u&&(null==t&&(t=ui.empty()),t.set(r.field,u))}return t||null}function am(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rc(t,r,(o,u)=>function rh(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof cc&&r instanceof cc||t instanceof dc&&r instanceof dc?rc(t.elements,r.elements,Ba):t instanceof th&&r instanceof th?Ba(t.k,r.k):t instanceof eh&&r instanceof eh);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function xE(n){return n.isFoundDocument()?n.version:wt.min()}class ih extends nv{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Zu extends nv{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function kE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function RE(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,DE(d,m,t[o]))}return r}function NE(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,NC(u,d,e))}return r}class Wf extends nv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class rv extends nv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class PC{constructor(e){this.count=e}}var rr,Bt;function iv(n){switch(n){default:return rt();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function sv(n){if(void 0===n)return tr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case rr.OK:return ue.OK;case rr.CANCELLED:return ue.CANCELLED;case rr.UNKNOWN:return ue.UNKNOWN;case rr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case rr.INTERNAL:return ue.INTERNAL;case rr.UNAVAILABLE:return ue.UNAVAILABLE;case rr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case rr.NOT_FOUND:return ue.NOT_FOUND;case rr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case rr.ABORTED:return ue.ABORTED;case rr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case rr.DATA_LOSS:return ue.DATA_LOSS;default:return rt()}}(Bt=rr||(rr={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ic(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Hd(this.inner)}size(){return this.innerSize}}const OE=new xn($e.comparator);function ps(){return OE}const PE=new xn($e.comparator);function ov(...n){let e=PE;for(const t of n)e=e.insert(t.key,t);return e}function sh(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const FC=new xn($e.comparator),LC=new dn($e.comparator);function nn(...n){let e=LC;for(const t of n)e=e.add(t);return e}const VC=new dn(xt);function Ku(){return VC}class Zf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,fc.createSynthesizedTargetChangeForCurrentChange(e,t)),new Zf(wt.min(),r,Ku(),ps(),nn())}}class fc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new fc(nr.EMPTY_BYTE_STRING,t,nn(),nn(),nn())}}class gs{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class FE{constructor(e,t){this.targetId=e,this.$=t}}class Kf{constructor(e,t,r=nr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class oh{constructor(){this.B=0,this.L=VE(),this.U=nr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=nn(),t=nn(),r=nn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new fc(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=VE()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class UC{constructor(e){this.nt=e,this.st=new Map,this.it=ps(),this.rt=LE(),this.ot=new dn(xt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Gf(u))if(0===r){const d=new $e(u.path);this.ct(t,d,mn.newNoDocument(d,wt.min()))}else bt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&Gf(m.target)){const E=new $e(m.target.path);null!==this.it.get(E)||this.It(d,E)||this.ct(d,E,mn.newNoDocument(E,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=nn();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Zf(e,t,this.ot,this.it,r);return this.it=ps(),this.rt=LE(),this.ot=new dn(xt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new oh,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new dn(xt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new oh),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function LE(){return new xn($e.comparator)}function VE(){return new xn($e.comparator)}const um={asc:"ASCENDING",desc:"DESCENDING"},lm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BC{constructor(e,t){this.databaseId=e,this.N=t}}function Yf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function av(n,e){return n.N?e.toBase64():e.toUint8Array()}function UE(n,e){return Yf(n,e.toTimestamp())}function ir(n){return bt(!!n),wt.fromTimestamp(function(e){const t=Bs(e);return new Vn(t.seconds,t.nanos)}(n))}function cm(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function BE(n){const e=qt.fromString(n);return bt(ZE(e)),e}function Qf(n,e){return cm(n.databaseId,e.path)}function Ha(n,e){const t=BE(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(hm(t))}function Jf(n,e){return cm(n.databaseId,e)}function dm(n){const e=BE(n);return 4===e.length?qt.emptyPath():hm(e)}function ah(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hm(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function fm(n,e,t){return{name:Qf(n,e),fields:t.value.mapValue.fields}}function jE(n,e,t){const r=Ha(n,e.name),o=ir(e.updateTime),u=new ui({mapValue:{fields:e.fields}}),d=mn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Xf(n,e){let t;if(e instanceof ih)t={update:fm(n,e.key,e.value)};else if(e instanceof Wf)t={delete:Qf(n,e.key)};else if(e instanceof Zu)t={update:fm(n,e.key,e.data),updateMask:lh(e.fieldMask)};else{if(!(e instanceof rv))return rt();t={verify:Qf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof eh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof cc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof dc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof th)return{fieldPath:u.field.canonicalString(),increment:d.k};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:UE(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function pm(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Zn.updateTime(ir(o.updateTime)):void 0!==o.exists?Zn.exists(o.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(bt("REQUEST_TIME"===d.setToServerValue),m=new eh):"appendMissingElements"in d?m=new cc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new dc(d.removeAllFromArray.values||[]):"increment"in d?m=new th(u,d.increment):rt();const E=Un.fromServerFormat(d.fieldPath);return new nh(E,m)}(n,o)):[];var o;if(e.update){const o=Ha(n,e.update.name),u=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new sc((e.updateMask.fieldPaths||[]).map(C=>Un.fromServerFormat(C)));return new Zu(o,u,d,t,r)}return new ih(o,u,t,r)}if(e.delete){const o=Ha(n,e.delete);return new Wf(o,t)}if(e.verify){const o=Ha(n,e.verify);return new rv(o,t)}return rt()}function lv(n,e){return{documents:[Jf(n,e.path)]}}function $E(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Jf(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Jf(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(S=>function(k){if("=="===k.op){if(cE(k.value))return{unaryFilter:{field:uh(k.field),op:"IS_NAN"}};if(lE(k.value))return{unaryFilter:{field:uh(k.field),op:"IS_NULL"}}}else if("!="===k.op){if(cE(k.value))return{unaryFilter:{field:uh(k.field),op:"IS_NOT_NAN"}};if(lE(k.value))return{unaryFilter:{field:uh(k.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uh(k.field),op:zE(k.op),value:k.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:uh((S=C).field),direction:qE(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||Bf(C)?C:{value:C});var C,m,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function cv(n){let e=dm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=GE(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new zu(pc((k=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let m=null;t.limit&&(m=function(S){let k;return k="object"==typeof S?S.value:S,Bf(k)?null:k}(t.limit));let E=null;var S;t.startAt&&(E=new qu((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new qu(S.values||[],!S.before)}(t.endAt)),wE(e,o,d,u,m,"F",E,C)}function GE(n){return n?void 0!==n.unaryFilter?[bi(n)]:void 0!==n.fieldFilter?[WE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>GE(e)).reduce((e,t)=>e.concat(t)):rt():[]}function qE(n){return um[n]}function zE(n){return lm[n]}function uh(n){return{fieldPath:n.canonicalString()}}function pc(n){return Un.fromServerFormat(n.fieldPath)}function WE(n){return Pr.create(pc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function bi(n){switch(n.unaryFilter.op){case"IS_NAN":const e=pc(n.unaryFilter.field);return Pr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=pc(n.unaryFilter.field);return Pr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pc(n.unaryFilter.field);return Pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pc(n.unaryFilter.field);return Pr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function lh(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ch(e)),e=bA(n.get(t),e);return ch(e)}function bA(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ch(n){return n+"\x01\x01"}function ra(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&rt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:rt()}u=d+2}return new qt(r)}const gm=["userId","batchId"];function mm(n,e){return[n,Ci(e)]}function dv(n,e,t){return[n,Ci(e),t]}const HC={},GC=["prefixPath","collectionGroup","readTime","documentId"],hv=["prefixPath","collectionGroup","documentId"],KE=["collectionGroup","readTime","prefixPath","documentId"],YE=["canonicalId","targetId"],ym=["targetId","path"],fv=["path","targetId"],CA=["collectionId","parent"],QE=["indexId","uid"],qC=["uid","sequenceNumber"],JE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_m=["indexId","uid","orderedDocumentKey"],XE=["userId","collectionPath","documentId"],zC=["userId","collectionPath","largestBatchId"],pv=["userId","collectionGroup","largestBatchId"],vm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DA=[...vm,"documentOverlays"],eI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WC=[...eI,"indexConfiguration","indexState","indexEntries"],gv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(o=>o?he.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class ep{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Xe,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new tp(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=wm(r.target.error);this.At.reject(new tp(e,o))}}static open(e,t,r,o){try{return new ep(t,e.transaction(o,r))}catch(u){throw new tp(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KC(t)}}class js{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===js.Vt((0,Nt.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),Qu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Nt.hl)())return!1;if(js.St())return!0;const e=(0,Nt.z$)(),t=js.Vt(e),r=0<t&&t<10,o=js.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new tp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new tp(e,m))},u.onupgradeneeded=d=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=ep.open(u.db,e,d?"readonly":"readwrite",r),C=o(E).next(S=>(E.bt(),S)).catch(S=>(E.abort(S),he.reject(S))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ZC{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Qu(this.Ft.delete())}}class tp extends xe{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yu(n){return"IndexedDbTransactionError"===n.name}class KC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qu(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),Qu(this.store.add(e))}get(e){return Qu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),Qu(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),Qu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new he((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new he((r,o)=>{t.onerror=u=>{const d=wm(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new he((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new ZC(m),C=t(m.primaryKey,m.value,E);if(C instanceof he){const S=C.catch(k=>(E.done(),he.reject(k)));r.push(S)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qu(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=wm(r.target.error);t(o)}})}let yv=!1;function wm(n){const e=js.Vt((0,Nt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yv||(yv=!0,setTimeout(()=>{throw r},0)),r}}return n}class _v extends mv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Fr(n,e){const t=ze(n);return js.xt(t.Ht,e)}class vv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&AE(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&SE(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&SE(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(wt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,(t,r)=>am(t,r))&&rc(this.baseMutations,e.baseMutations,(t,r)=>am(t,r))}}class tI{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=FC;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new tI(e,t,r,o)}}class Em{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gc{constructor(e,t,r,o,u=wt.min(),d=wt.min(),m=nr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new gc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class YC{constructor(e){this.Jt=e}}function QC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Qf(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Yf(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:dh(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:dh(e.version)}}var o,u;return r}function wv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hh(n){const e=new Vn(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function np(n,e){const t=(e.baseMutations||[]).map(u=>pm(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>pm(n.Jt,u)),o=Vn.fromMillis(e.localWriteTimeMs);return new vv(e.batchId,o,t,r)}function Ju(n){const e=hh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hh(n.lastLimboFreeSnapshotVersion):wt.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=li(lc(dm(o.documents[0])))):r=li(cv(n.query)),new gc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,nr.fromBase64String(n.resumeToken))}function JC(n,e){const t=dh(e.snapshotVersion),r=dh(e.lastLimboFreeSnapshotVersion);let o;o=Gf(e.target)?lv(n.Jt,e.target):$E(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Im(n){const e=cv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?EE(e,e.limit,"L"):e}function rp(n,e){return new Em(e.largestBatchId,pm(n.Jt,e.overlayMutation))}function Ev(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}class nI{getBundleMetadata(e,t){return XC(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:hh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return XC(e).put({bundleId:(r=t).id,createTime:dh(ir(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bm(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Im(o.bundledQuery),readTime:hh(o.readTime)};var o})}saveNamedQuery(e,t){return bm(e).put({name:(r=t).name,readTime:dh(ir(r.readTime)),bundledQuery:r.bundledQuery});var r}}function XC(n){return Fr(n,"bundles")}function bm(n){return Fr(n,"namedQueries")}class Cm{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Cm(e,t.uid||"")}getOverlay(e,t){return ip(e).get(Ev(this.userId,t)).next(r=>r?rp(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new Em(t,d);o.push(this.Xt(e,m))}),he.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ci(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(ip(e).Qt("collectionPathOverlayIndex",m))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const o=sh(),u=Ci(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return ip(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const E of m){const C=rp(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=sh();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ip(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,S)=>{const k=rp(this.M,C);u.size()<o||k.largestBatchId===d?(u.set(k.getKey(),k),d=k.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return ip(e).put(function(r,o,u){const[d,m,E]=Ev(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Xf(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function ip(n){return Fr(n,"documentOverlays")}class Xu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(cn(e.integerValue));else if("doubleValue"in e){const r=cn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),qd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(oc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?dE(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):rt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function AA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function rI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=AA(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Xu.fe=new Xu;class eD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=rI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=rI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Iv{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class tD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Dm{constructor(){this.De=new eD,this.Ce=new Iv(this.De),this.xe=new tD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class fh{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fh(this.indexId,this.documentKey,this.arrayValue,r)}}function ph(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=iI(n.arrayValue,e.arrayValue),0!==t?t:(t=iI(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function iI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=G_(e);if(void 0!==t&&!this.Be(t))return!1;const r=ja(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class rD{constructor(){this.qe=new sI}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Eo.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class sI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new dn(qt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new dn(qt.comparator)).toArray()}}const Tm=new Uint8Array(0);class bv{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new sI,this.Ge=new $a(r=>uc(r),(r,o)=>Hf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Ci(o)};return oI(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[V_(t),""],!1,!0);return oI(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ra(d.parent))}return r})}addFieldIndex(e,t){const r=Am(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Am(e),o=gh(e),u=Di(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Di(e);let o=!0;const u=new Map;return he.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=nn();const m=[];return he.forEach(u,(E,C)=>{var S;Re("IndexedDbIndexManager",`Using index ${S=E,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Ot=>`${Ot.fieldPath}:${Ot.kind}`).join(",")}`} to execute ${uc(t)}`);const k=function(Ot,Ct){const Rt=G_(Ct);if(void 0===Rt)return null;for(const ot of qf(Ot,Rt.fieldPath))switch(ot.op){case"array-contains-any":return ot.value.arrayValue.values||[];case"array-contains":return[ot.value]}return null}(C,E),V=function(Ot,Ct){const Rt=new Map;for(const ot of ja(Ct))for(const Et of qf(Ot,ot.fieldPath))switch(Et.op){case"==":case"in":Rt.set(ot.fieldPath.canonicalString(),Et.value);break;case"not-in":case"!=":return Rt.set(ot.fieldPath.canonicalString(),Et.value),Array.from(Rt.values())}return null}(C,E),Z=function(Ot,Ct){const Rt=[];let ot=!0;for(const Et of ja(Ct)){const oa=0===Et.kind?mE(Ot,Et.fieldPath,Ot.startAt):yE(Ot,Et.fieldPath,Ot.startAt);Rt.push(oa.value),ot&&(ot=oa.inclusive)}return new qu(Rt,ot)}(C,E),oe=function(Ot,Ct){const Rt=[];let ot=!0;for(const Et of ja(Ct)){const oa=0===Et.kind?yE(Ot,Et.fieldPath,Ot.endAt):mE(Ot,Et.fieldPath,Ot.endAt);Rt.push(oa.value),ot&&(ot=oa.inclusive)}return new qu(Rt,ot)}(C,E),Oe=this.We(E,C,Z),Le=this.We(E,C,oe),At=this.ze(E,C,V),kt=this.He(E.indexId,k,Oe,Z.inclusive,Le,oe.inclusive,At);return he.forEach(kt,Ot=>r.Gt(Ot,t.limit).next(Ct=>{Ct.forEach(Rt=>{const ot=$e.fromSegments(Rt.documentKey);d.has(ot)||(d=d.add(ot),m.push(ot))})}))}).next(()=>m)}return he.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),C=E/(null!=t?t.length:1),S=[];for(let k=0;k<E;++k){const V=t?this.Je(t[k/C]):Tm,Z=this.Ye(e,V,r[k%C],o),oe=this.Xe(e,V,u[k%C],d),Oe=m.map(Le=>this.Ye(e,V,Le,!0));S.push(...this.createRange(Z,oe,Oe))}return S}Ye(e,t,r,o){const u=new fh(e,$e.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new fh(e,$e.empty(),t,r);return o?u.ke():u}je(e,t){const r=new nD(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return he.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new dn(Un.comparator),E=!1;for(const C of d.filters){const S=C;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?E=!0:m=m.add(S.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Dm;for(const o of ja(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Xu.fe.Zt(u,d)}return r.Se()}Je(e){const t=new Dm;return Xu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Dm;return Xu.fe.Zt(wo(this.databaseId,t),r.Ne(function(o){const u=ja(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Dm);let u=0;for(const d of ja(e)){const m=r[u++];for(const E of o)if(this.en(t,d.fieldPath)&&jf(m))o=this.nn(o,d,m);else{const C=E.Ne(d.kind);Xu.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const E=new Dm;E.seed(m.Se()),Xu.fe.Zt(d,E.Ne(t.kind)),u.push(E)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Pr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Am(e),o=gh(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return he.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{d.push(function(C,S){const k=S?new Qd(S.sequenceNumber,new Eo(hh(S.readTime),new $e(ra(S.documentKey)),S.largestBatchId)):Qd.empty(),V=C.fields.map(([Z,oe])=>new em(Un.fromServerFormat(Z),oe));return new $f(C.indexId,C.collectionGroup,V,k)}(m,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Am(e),u=gh(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>he.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:dh((V=r).readTime),documentKey:Ci(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?he.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),he.forEach(m,E=>this.on(e,o,E).next(C=>{const S=this.un(u,E);return C.isEqual(S)?he.resolve():this.an(e,u,E,C,S)}))))})}cn(e,t,r,o){return Di(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Di(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Di(e);let u=new dn(ph);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new fh(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new dn(ph);const o=this.Ze(t,e);if(null==o)return r;const u=G_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(jf(d))for(const m of d.arrayValue.values||[])r=r.add(new fh(t.indexId,e.key,this.Je(m),o))}else r=r.add(new fh(t.indexId,e.key,Tm,o));return r}an(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,E,C,S,k){const V=m.getIterator(),Z=E.getIterator();let oe=Jd(V),Oe=Jd(Z);for(;oe||Oe;){let Le=!1,At=!1;if(oe&&Oe){const kt=C(oe,Oe);kt<0?At=!0:kt>0&&(Le=!0)}else null!=oe?At=!0:Le=!0;Le?(S(Oe),Oe=Jd(Z)):At?(k(oe),oe=Jd(V)):(oe=Jd(V),Oe=Jd(Z))}}(o,u,ph,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),he.waitFor(d)}rn(e){let t=1;return gh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>ph(d,m)).filter((d,m,E)=>!m||0!==ph(d,E[m-1]));const o=[];o.push(e);for(const d of r){const m=ph(d,e),E=ph(d,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(d),o.push(d.ke());else if(E>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Tm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Tm,[]]));return u}getMinOffset(e,t){let r;return he.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||fE(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Eo.min()})).next(()=>r)}}function oI(n){return Fr(n,"collectionParents")}function Di(n){return Fr(n,"indexEntries")}function Am(n){return Fr(n,"indexConfiguration")}function gh(n){return Fr(n,"indexState")}const aI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qi(e,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sm(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:d},(S,k,V)=>(m++,V.delete()));u.push(E.next(()=>{bt(1===m)}));const C=[];for(const S of t.mutations){const k=dv(e,S.key.path,t.batchId);u.push(o.delete(k)),C.push(S.key)}return he.waitFor(u).next(()=>C)}function sp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}qi.DEFAULT_COLLECTION_PERCENTILE=10,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qi.DEFAULT=new qi(41943040,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qi.DISABLED=new qi(-1,0,0);class Mm{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Mm(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ga(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=mh(e),d=Ga(e);return d.add({}).next(m=>{bt("number"==typeof m);const E=new vv(m,t,r,o),C=function(V,Z,oe){const Oe=oe.baseMutations.map(At=>Xf(V.Jt,At)),Le=oe.mutations.map(At=>Xf(V.Jt,At));return{userId:Z,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Oe,mutations:Le}}(this.M,this.userId,E),S=[];let k=new dn((V,Z)=>xt(V.canonicalString(),Z.canonicalString()));for(const V of o){const Z=dv(this.userId,V.key.path,m);k=k.add(V.key.path.popLast()),S.push(d.put(C)),S.push(u.put(Z,HC))}return k.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.ln[m]=E.keys()}),he.waitFor(S).next(()=>E)})}lookupMutationBatch(e,t){return Ga(e).get(t).next(r=>r?(bt(r.userId===this.userId),np(this.M,r)):null)}fn(e,t){return this.ln[t]?he.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ga(e).Wt({index:"userMutationsIndex",range:o},(d,m,E)=>{m.userId===this.userId&&(bt(m.batchId>=r),u=np(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ga(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ga(e).qt("userMutationsIndex",t).next(r=>r.map(o=>np(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=mm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return mh(e).Wt({range:o},(d,m,E)=>{const[C,S,k]=d,V=ra(S);if(C===this.userId&&t.path.isEqual(V))return Ga(e).get(k).next(Z=>{if(!Z)throw rt();bt(Z.userId===this.userId),u.push(np(this.M,Z))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(xt);const o=[];return t.forEach(u=>{const d=mm(this.userId,u.path),m=IDBKeyRange.lowerBound(d),E=mh(e).Wt({range:m},(C,S,k)=>{const[V,Z,oe]=C,Oe=ra(Z);V===this.userId&&u.path.isEqual(Oe)?r=r.add(oe):k.done()});o.push(E)}),he.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=mm(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new dn(xt);return mh(e).Wt({range:d},(E,C,S)=>{const[k,V,Z]=E,oe=ra(V);k===this.userId&&r.isPrefixOf(oe)?oe.length===o&&(m=m.add(Z)):S.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ga(e).get(u).next(d=>{if(null===d)throw rt();bt(d.userId===this.userId),r.push(np(this.M,d))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Sm(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return mh(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const E=ra(u[1]);o.push(E)}else m.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return uI(e,this.userId,t)}wn(e){return lI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function uI(n,e,t){const r=mm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return mh(n).Wt({range:u,jt:!0},(m,E,C)=>{const[S,k,V]=m;S===e&&k===o&&(d=!0),C.done()}).next(()=>d)}function Ga(n){return Fr(n,"mutations")}function mh(n){return Fr(n,"documentMutations")}function lI(n){return Fr(n,"mutationQueues")}class mc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new mc(0)}static yn(){return new mc(-1)}}class Cv{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new mc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>wt.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$s(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return $s(e).Wt((d,m)=>{const E=Ju(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>he.waitFor(u)).next(()=>o)}forEachTarget(e,t){return $s(e).Wt((r,o)=>{const u=Ju(o);t(u)})}pn(e){return Dv(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}In(e,t){return Dv(e).put("targetGlobalKey",t)}Tn(e,t){return $s(e).put(JC(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return $s(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,E)=>{const C=Ju(m);Hf(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=qa(e);return t.forEach(d=>{const m=Ci(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),he.waitFor(o)}removeMatchingKeys(e,t,r){const o=qa(e);return he.forEach(t,u=>{const d=Ci(u.path);return he.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=qa(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=qa(e);let u=nn();return o.Wt({range:r,jt:!0},(d,m,E)=>{const C=ra(d[1]),S=new $e(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ci(t.path),o=IDBKeyRange.bound([r],[V_(r)],!1,!0);let u=0;return qa(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],E,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return $s(e).get(t).next(r=>r?Ju(r):null)}}function $s(n){return Fr(n,"targets")}function Dv(n){return Fr(n,"targetGlobal")}function qa(n){return Fr(n,"targetDocuments")}function yc(n){return cI.apply(this,arguments)}function cI(){return cI=(0,ve.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==gv)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),cI.apply(this,arguments)}function dI([n,e],[t,r]){const o=xt(n,t);return 0===o?xt(e,r):o}class iD{constructor(e){this.An=e,this.buffer=new dn(dI),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sD{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Yu(o)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield yc(o)}yield t.Sn(e)}))}}class hI{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Gi.A);const r=new iD(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(aI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aI):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,E,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),o=this.params.maximumSequenceNumbersToCollect):o=k,d=Date.now(),this.nthSequenceNumber(e,o))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(C=Date.now(),Kg()<=Zo.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${k} documents in `+(C-E)+`ms\nTotal Duration: ${C-S}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:k})))}}class oD{constructor(e,t){this.db=e,this.garbageCollector=new hI(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return xm(e,r)}removeReference(e,t,r){return xm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xm(e,t)}On(e,t){return function(r,o){let u=!1;return lI(r).zt(d=>uI(r,d,o).next(m=>(m&&(u=!0),he.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const E=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,wt.min()),qa(e).delete([0,Ci(d.path)])))});o.push(E)}}).next(()=>he.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xm(e,t)}Mn(e,t){const r=qa(e);let o,u=Gi.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:E,sequenceNumber:C})=>{0===d?(u!==Gi.A&&t(new $e(ra(o)),u),u=C,o=E):u=Gi.A}).next(()=>{u!==Gi.A&&t(new $e(ra(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xm(n,e){return qa(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:r}));var r}class aD{constructor(){this.changes=new $a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Tv{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _c(e).put(r)}removeEntry(e,t,r){return _c(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],wv(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=mn.newInvalidDocument(t);return _c(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yh(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:mn.newInvalidDocument(t)};return _c(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yh(t))},(o,u)=>{r={document:this.$n(t,u),size:sp(u)}}).next(()=>r)}getEntries(e,t){let r=ps();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=ps(),o=new xn($e.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,sp(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return he.resolve();let o=new dn(Rm);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(yh(o.first()),yh(o.last())),d=o.getIterator();let m=d.getNext();return _c(e).Wt({index:"documentKeyIndex",range:u},(E,C,S)=>{const k=$e.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Rm(m,k)<0;)r(m,null),m=d.getNext();m&&m.isEqual(k)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?S.Ut(yh(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),wv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _c(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=ps();for(const E of d){const C=this.$n($e.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=ps();const d=km(t,r),m=km(t,Eo.max());return _c(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(E,C,S)=>{const k=this.$n($e.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(k.key,k),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new fI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return pI(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Fn(e,t){return pI(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function TA(n,e){let t;if(e.document)t=jE(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=hh(e.noDocument.readTime);t=mn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=$e.fromSegments(e.unknownDocument.path),o=hh(e.unknownDocument.version);t=mn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Vn(r[0],r[1]);return wt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return mn.newInvalidDocument(e)}}class fI extends aD{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new $a(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new dn((u,d)=>xt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const E=QC(this.Kn.M,d);o=o.add(u.path.popLast()),r+=sp(E)-m.size,t.push(this.Kn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=QC(this.Kn.M,d.convertToNoDocument(wt.min()));t.push(this.Kn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function pI(n){return Fr(n,"remoteDocumentGlobal")}function _c(n){return Fr(n,"remoteDocumentsV14")}function yh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function km(n,e){const t=e.documentKey.path.toArray();return[n,wv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Rm(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=xt(t[u],r[u]),o)return o;return o=xt(t.length,r.length),o||(o=xt(t[t.length-2],r[r.length-2]),o||xt(t[t.length-1],r[r.length-1]))}class gI{constructor(e){this.M=e}kt(e,t,r,o){const u=new ep("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gm,{unique:!0}),m.createObjectStore("documentMutations"),mI(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=he.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),mI(e)),d=d.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gm,{unique:!0});const S=E.store("mutations"),k=C.map(V=>S.put(V));return he.waitFor(k)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:XE});E.createIndex("collectionPathOverlayIndex",zC,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",pv,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:GC});E.createIndex("documentKeyIndex",hv),E.createIndex("collectionGroupIndex",KE)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:QE}).createIndex("sequenceNumberIndex",qC,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:JE}).createIndex("documentKeyIndex",_m,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=sp(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>he.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>he.forEach(m,E=>{bt(E.userId===u.userId);const C=np(this.M,E);return Sm(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const E=new qt(d),C=[0,Ci(E)];u.push(t.get(C).next(S=>S?he.resolve():t.put({targetId:0,path:Ci(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:CA});const r=t.store("collectionParents"),o=new sI,u=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:Ci(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const E=new qt(d);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,E],C)=>{const S=ra(m);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Ju(o),d=JC(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),E=(C=d,C.document?new $e(qt.fromString(C.document.name).popFirst(5)):C.noDocument?$e.fromSegments(C.noDocument.path):C.unknownDocument?$e.fromSegments(C.unknownDocument.path):rt()).path.toArray();var C;const S={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(S))}).next(()=>he.waitFor(o))}}function mI(n){n.createObjectStore("targetDocuments",{keyPath:ym}).createIndex("documentTargetsIndex",fv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YE,{unique:!0}),n.createObjectStore("targetGlobal")}const Nm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Om{constructor(e,t,r,o,u,d,m,E,C,S,k=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=S,this.ts=k,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!Om.vt())throw new xe(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oD(this,o),this.hs=t+"main",this.M=new YC(E),this.ls=new js(this.hs,this.ts,new gI(this.M)),this.fs=new Cv(this.referenceDelegate,this.M),this.ds=new Tv(this.M),this._s=new nI,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ue.FAILED_PRECONDITION,Nm);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Gi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Yu(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return op(e).get("owner").next(t=>he.resolve(this.Ps(t)))}Vs(e){return Pm(e).delete(this.clientId)}vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Fr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(E=>-1===d.indexOf(E));return he.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?he.resolve(!0):op(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(ue.FAILED_PRECONDITION,Nm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pm(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new _v(t,Gi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Pm(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Mm.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new bv(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Cm.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?WC:13===d?eI:12===d?DA:11===d?vm:void rt();var d;let m;return this.ls.runTransaction(e,o,u,E=>(m=new _v(E,this.es?this.es.next():Gi.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(ue.FAILED_PRECONDITION,gv);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}$s(e){return op(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ue.FAILED_PRECONDITION,Nm)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return op(e).put("owner",t)}static vt(){return js.vt()}Rs(e){const t=op(e);return t.get("owner").next(r=>this.Ps(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Nt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function op(n){return Fr(n,"owner")}function Pm(n){return Fr(n,"clientMetadata")}function yI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class SA{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Y_(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let o=ov();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=ov();return this.indexManager.getCollectionParents(e,o).next(d=>he.forEach(d,m=>{const E=(C=t,S=m.child(o),new na(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.zs(e,E,r).next(C=>{C.forEach((S,k)=>{u=u.insert(S,k)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const E=m.key;let C=o.get(E);null==C&&(C=mn.newInvalidDocument(E),o=o.insert(E,C)),SE(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,d)=>{X_(t,d)||(o=o.remove(u))}),o))}}class Fm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=nn(),o=nn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Fm(e,t.fromCache,r,o)}}class _I{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return he.resolve(null)}ei(e,t,r,o){return function EA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(wt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(Kg()<=Zo.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),J_(t)),this.ri(e,d,t,q_(o,-1)))})}si(e,t){let r=new dn(bE(e));return t.forEach((o,u)=>{X_(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return Kg()<=Zo.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",J_(t)),this.Zs.Qs(e,t,Eo.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class uD{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new xn(xt),this.ai=new $a(u=>uc(u),Hf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new SA(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function vI(n,e,t,r){return new uD(n,e,t,r)}function lD(n,e){return wI.apply(this,arguments)}function wI(){return wI=(0,ve.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let E=nn();for(const C of o){d.push(C.batchId);for(const S of C.mutations)E=E.add(S.key)}for(const C of u){m.push(C.batchId);for(const S of C.mutations)E=E.add(S.key)}return t.fi.Ks(r,E).next(C=>({di:C,removedBatchIds:d,addedBatchIds:m}))})})}),wI.apply(this,arguments)}function MA(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,E,C){const S=E.batch,k=S.keys();let V=he.resolve();return k.forEach(Z=>{V=V.next(()=>C.getEntry(m,Z)).next(oe=>{const Oe=E.docVersions.get(Z);bt(null!==Oe),oe.version.compareTo(Oe)<0&&(S.applyToRemoteDocument(oe,E),oe.isValidDocument()&&(oe.setReadTime(E.commitVersion),C.addEntry(oe)))})}),V.next(()=>d.Bs.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function cD(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function xA(n,e){const t=ze(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,S)=>{const k=o.get(S);if(!k)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,S)));let V=k.withSequenceNumber(u.currentSequenceNumber);var Z,oe,Oe;e.targetMismatches.has(S)?V=V.withResumeToken(nr.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),o=o.insert(S,V),oe=V,Oe=C,(0===(Z=k).resumeToken.approximateByteSize()||oe.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,V))});let E=ps();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(EI(u,d,e.documentUpdates).next(C=>{E=C})),!r.isEqual(wt.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return he.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,E)).next(()=>E)}).then(u=>(t.ui=o,u))}function EI(n,e,t){let r=nn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ps();return t.forEach((d,m)=>{const E=o.get(d);m.isNoDocument()&&m.version.isEqual(wt.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Re("LocalStore","Ignoring outdated watch update for ",d,". Current version:",E.version," Watch version:",m.version)}),u})}function Lm(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function _h(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,he.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new gc(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function vh(n,e,t){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,ve.Z)(function*(n,e,t){const r=ze(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Yu(d))throw d;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),Vm.apply(this,arguments)}function ia(n,e,t){const r=ze(n);let o=wt.min(),u=nn();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,C){const S=ze(m),k=S.ai.get(C);return void 0!==k?he.resolve(S.ui.get(k)):S.fs.getTargetData(E,C)}(r,d,li(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(E=>{u=E})}).next(()=>r.oi.Qs(d,e,t?o:wt.min(),t?u:nn())).next(m=>(Bm(r,IE(e),m),{documents:m,_i:u})))}function Av(n,e){const t=ze(n),r=ze(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function Um(n,e){const t=ze(n),r=t.ci.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,q_(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Bm(t,e,o),o))}function Bm(n,e,t){let r=wt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function ap(){return ap=(0,ve.Z)(function*(n,e,t,r){const o=ze(n);let u=nn(),d=ps();for(const C of t){const S=e.wi(C.metadata.name);C.document&&(u=u.add(S));const k=e.mi(C);k.setReadTime(e.gi(C.metadata.readTime)),d=d.insert(S,k)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),E=yield _h(o,(C=r,li(lc(qt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>EI(C,m,d).next(S=>(m.apply(C),S)).next(S=>o.fs.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.fs.addMatchingKeys(C,u,E.targetId)).next(()=>o.fi.Gs(C,S)).next(()=>S)))}),ap.apply(this,arguments)}function Sv(n,e){return wh.apply(this,arguments)}function wh(){return wh=(0,ve.Z)(function*(n,e,t=nn()){const r=yield _h(n,li(Im(e.bundledQuery))),o=ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=ir(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(nr.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),wh.apply(this,arguments)}class kA{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return he.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:ir(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Im(r.bundledQuery),readTime:ir(r.readTime)}),he.resolve();var r}}class RA{constructor(){this.overlays=new xn($e.comparator),this.Ii=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const o=sh(),u=t.length+1,d=new $e(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return he.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new xn((C,S)=>C-S);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=sh(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const m=sh(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,S)=>m.set(C,S)),!(m.size()>=o)););return he.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Em(t,r));let u=this.Ii.get(t);void 0===u&&(u=nn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class II{constructor(){this.Ti=new dn(Zr.Ei),this.Ai=new dn(Zr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Zr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Zr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new qt([])),r=new Zr(t,e),o=new Zr(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new qt([])),r=new Zr(t,e),o=new Zr(t,e+1);let u=nn();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Zr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Zr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||xt(e.Ci,t.Ci)}static Ri(e,t){return xt(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class bI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new dn(Zr.Ei)}checkEmpty(e){return he.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new vv(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new Zr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return he.resolve(d)}lookupMutationBatch(e,t){return he.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return he.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return he.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zr(t,0),o=new Zr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(xt);return t.forEach(o=>{const u=new Zr(o,0),d=new Zr(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),he.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const d=new Zr(new $e(u),0);let m=new dn(xt);return this.Ni.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.Ci)),!0)},d),he.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return he.forEach(t.mutations,o=>{const u=new Zr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Zr(t,0),o=this.Ni.firstAfterOrEqual(r);return he.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return he.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class hD{constructor(e){this.$i=e,this.docs=new xn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let r=ps();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():mn.newInvalidDocument(o))}),he.resolve(r)}getAllFromCollection(e,t,r){let o=ps();const u=new $e(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:E}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||fE(DC(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,o){rt()}Bi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fD(this)}getSize(e){return he.resolve(this.size)}}class fD extends aD{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class pD{constructor(e){this.persistence=e,this.Li=new $a(t=>uc(t),Hf),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new II,this.targetCount=0,this.Ki=mc.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),he.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new mc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tn(t),he.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),he.waitFor(u).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.qi.containsKey(t))}}class gD{constructor(e,t){this.Gi={},this.overlays={},this.es=new Gi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new pD(this),this.indexManager=new rD,this.ds=new hD(r=>this.referenceDelegate.Qi(r)),this.M=new YC(t),this._s=new kA(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new bI(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new CI(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return he.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class CI extends mv{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Hi=new II,this.Ji=null}static Yi(e){return new jm(e)}get Xi(){if(this.Ji)return this.Ji;throw rt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Xi,r=>{const o=$e.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,wt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return he.or([()=>he.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Mv(n,e){return`firestore_clients_${n}_${e}`}function DI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xv(n,e){return`firestore_targets_${n}_${e}`}class up{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new up(e,t,o.state,u):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new vc(e,r.state,o):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Ku();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=aE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new kv(e,u):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $m{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $m(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lp{constructor(){this.activeTargetIds=Ku()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rv{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new xn(xt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=Mv(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new lp),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(Mv(e.persistenceKey,o));if(u){const d=kv.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xv(this.persistenceKey,e));if(r){const o=vc.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xv(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=Gi.A;if(null!=u)try{const m=JSON.parse(u);bt("number"==typeof m),d=m}catch(m){tr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Gi.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new up(this.currentUser,e,t,r),u=DI(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=DI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=xv(this.persistenceKey,e),u=new vc(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return kv.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return up.tr(new Nr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return vc.tr(o,t)}pr(e){return $m.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Ku();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class TI{constructor(){this.Ur=new lp,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new lp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NA{Kr(e){}shutdown(){}}class mD{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class _D{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class OA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Re("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(E=>(Re("RestConnection","Received: ",E),E),E=>{throw Lf("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${yD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new Xw;m.listenOnce(yC.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case P_.NO_ERROR:const C=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(C)),u(C);break;case P_.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),d(new xe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case P_.HTTP_ERROR:const S=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const k=m.getResponseJson().error;if(k&&k.status&&k.message){const V=function(Z){const oe=Z.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(oe)>=0?oe:ue.UNKNOWN}(k.status);d(new xe(V,k.message))}else d(new xe(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ue.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=gC(),d=mC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Jw({})),this.lo(m.initMessageHeaders,t,r),(0,Nt.uI)()||(0,Nt.b$)()||(0,Nt.d)()||(0,Nt.w1)()||(0,Nt.Mn)()||(0,Nt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Re("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let S=!1,k=!1;const V=new _D({Jr:oe=>{k?Re("Connection","Not sending because WebChannel is closed:",oe):(S||(Re("Connection","Opening WebChannel transport."),C.open(),S=!0),Re("Connection","WebChannel sending:",oe),C.send(oe))},Yr:()=>C.close()}),Z=(oe,Oe,Le)=>{oe.listen(Oe,At=>{try{Le(At)}catch(kt){setTimeout(()=>{throw kt},0)}})};return Z(C,Ff.EventType.OPEN,()=>{k||Re("Connection","WebChannel transport opened.")}),Z(C,Ff.EventType.CLOSE,()=>{k||(k=!0,Re("Connection","WebChannel transport closed"),V.ro())}),Z(C,Ff.EventType.ERROR,oe=>{k||(k=!0,Lf("Connection","WebChannel transport errored:",oe),V.ro(new xe(ue.UNAVAILABLE,"The operation could not be completed")))}),Z(C,Ff.EventType.MESSAGE,oe=>{var Oe;if(!k){const Le=oe.data[0];bt(!!Le);const At=Le,kt=At.error||(null===(Oe=At[0])||void 0===Oe?void 0:Oe.error);if(kt){Re("Connection","WebChannel received error:",kt);const Ot=kt.status;let Ct=function(ot){const Et=rr[ot];if(void 0!==Et)return sv(Et)}(Ot),Rt=kt.message;void 0===Ct&&(Ct=ue.INTERNAL,Rt="Unknown error status: "+Ot+" with message "+kt.message),k=!0,V.ro(new xe(Ct,Rt)),C.close()}else Re("Connection","WebChannel received:",Le),V.oo(Le)}}),Z(d,Qw.STAT_EVENT,oe=>{oe.stat===F_.PROXY?Re("Connection","Detected buffering proxy"):oe.stat===F_.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.io()},0),V}}function vD(){return"undefined"!=typeof window?window:null}function Nv(){return"undefined"!=typeof document?document:null}function Hm(n){return new BC(n,!0)}class AI{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class SI{constructor(e,t,r,o,u,d,m,E){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new AI(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ve.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ve.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new xe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ve.Z)(function*(){e.state=0,e.start()}))}jo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PA extends SI{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function $C(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:rt(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(bt(void 0===C||"string"==typeof C),nr.fromBase64String(C||"")):(bt(void 0===C||C instanceof Uint8Array),nr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const C=void 0===E.code?ue.UNKNOWN:sv(E.code);return new xe(C,E.message||"")}(d);t=new Kf(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ha(n,r.document.name),u=ir(r.document.updateTime),d=new ui({mapValue:{fields:r.document.fields}}),m=mn.newFoundDocument(o,u,d);t=new gs(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ha(n,r.document),u=r.readTime?ir(r.readTime):wt.min(),d=mn.newNoDocument(o,u);t=new gs([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Ha(n,r.document);t=new gs([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new PC(r.count||0);t=new FE(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return wt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?ir(u.readTime):wt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=ah(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=Gf(m)?{documents:lv(o,m)}:{query:$E(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=av(o,u.resumeToken):u.snapshotVersion.compareTo(wt.min())>0&&(d.readTime=Yf(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function HE(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=ah(this.M),t.removeTarget=e,this.Lo(t)}}class FA extends SI{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function uv(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let u=ir(r.updateTime?r.updateTime:o);return u.isEqual(wt.min())&&(u=ir(o)),new IA(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.tu(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=ah(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Xf(this.M,r))};this.Lo(t)}}class LA extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ue.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ue.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class VA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(tr(t),this.uu=!1):Re("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class i{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,ve.Z)(function*(){var E;P(d)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ve.Z)(function*(C){const S=ze(C);S.wu.add(4),yield l(S),S.yu.set("Unknown"),S.wu.delete(4),yield s(S)}),function(C){return E.apply(this,arguments)})(d))}))}),this.yu=new VA(r,o)}}function s(n){return a.apply(this,arguments)}function a(){return a=(0,ve.Z)(function*(n){if(P(n))for(const e of n.mu)yield e(!0)}),a.apply(this,arguments)}function l(n){return c.apply(this,arguments)}function c(){return c=(0,ve.Z)(function*(n){for(const e of n.mu)yield e(!1)}),c.apply(this,arguments)}function p(n,e){const t=ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),M(t)?A(t):zm(t).Mo()&&w(t,e))}function _(n,e){const t=ze(n),r=zm(t);t._u.delete(e),r.Mo()&&I(t,e),0===t._u.size&&(r.Mo()?r.$o():P(t)&&t.yu.set("Unknown"))}function w(n,e){n.pu.Z(e.targetId),zm(n).Ho(e)}function I(n,e){n.pu.Z(e),zm(n).Jo(e)}function A(n){n.pu=new UC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),zm(n).start(),n.yu.au()}function M(n){return P(n)&&!zm(n).ko()&&n._u.size>0}function P(n){return 0===ze(n).wu.size}function U(n){n.pu=void 0}function Y(n){return ye.apply(this,arguments)}function ye(){return ye=(0,ve.Z)(function*(n){n._u.forEach((e,t)=>{w(n,e)})}),ye.apply(this,arguments)}function Pe(n,e){return je.apply(this,arguments)}function je(){return je=(0,ve.Z)(function*(n,e){U(n),M(n)?(n.yu.lu(e),A(n)):n.yu.set("Unknown")}),je.apply(this,arguments)}function tt(n,e,t){return Te.apply(this,arguments)}function Te(){return Te=(0,ve.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Kf&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dt(n,r)}else if(e instanceof gs?n.pu.ut(e):e instanceof FE?n.pu._t(e):n.pu.ht(e),!t.isEqual(wt.min()))try{const r=yield cD(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(E);C&&o._u.set(E,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const E=o._u.get(m);if(!E)return;o._u.set(m,E.withResumeToken(nr.EMPTY_BYTE_STRING,E.snapshotVersion)),I(o,m);const C=new gc(E.target,m,1,E.sequenceNumber);w(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield dt(n,r)}var r}),Te.apply(this,arguments)}function dt(n,e,t){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,ve.Z)(function*(n,e,t){if(!Yu(e))throw e;n.wu.add(1),yield l(n),n.yu.set("Offline"),t||(t=()=>cD(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield s(n)}))}),Ut.apply(this,arguments)}function Qt(n,e){return e().catch(t=>dt(n,t,e))}function Lr(n){return za.apply(this,arguments)}function za(){return za=(0,ve.Z)(function*(n){const e=ze(n),t=Eh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Ov(e);)try{const o=yield Lm(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,Pv(e,o)}catch(o){yield dt(e,o)}Gm(e)&&qm(e)}),za.apply(this,arguments)}function Ov(n){return P(n)&&n.du.length<10}function Pv(n,e){n.du.push(e);const t=Eh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function Gm(n){return P(n)&&!Eh(n).ko()&&n.du.length>0}function qm(n){Eh(n).start()}function Fv(n){return cp.apply(this,arguments)}function cp(){return cp=(0,ve.Z)(function*(n){Eh(n).nu()}),cp.apply(this,arguments)}function Lv(n){return dp.apply(this,arguments)}function dp(){return dp=(0,ve.Z)(function*(n){const e=Eh(n);for(const t of n.du)e.Zo(t.mutations)}),dp.apply(this,arguments)}function Vv(n,e,t){return wD.apply(this,arguments)}function wD(){return wD=(0,ve.Z)(function*(n,e,t){const r=n.du.shift(),o=tI.from(r,e,t);yield Qt(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Lr(n)}),wD.apply(this,arguments)}function bx(n,e){return ED.apply(this,arguments)}function ED(){return ED=(0,ve.Z)(function*(n,e){var t;e&&Eh(n).Xo&&(yield(t=(0,ve.Z)(function*(r,o){if(iv(u=o.code)&&u!==ue.ABORTED){const d=r.du.shift();Eh(r).Fo(),yield Qt(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Lr(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Gm(n)&&qm(n)}),ED.apply(this,arguments)}function UA(n,e){return ID.apply(this,arguments)}function ID(){return ID=(0,ve.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=P(t);t.wu.add(3),yield l(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield s(t)}),ID.apply(this,arguments)}function bD(n,e){return CD.apply(this,arguments)}function CD(){return CD=(0,ve.Z)(function*(n,e){const t=ze(n);e?(t.wu.delete(2),yield s(t)):e||(t.wu.add(2),yield l(t),t.yu.set("Unknown"))}),CD.apply(this,arguments)}function zm(n){return n.Iu||(n.Iu=function(e,t,r){const o=ze(e);return o.iu(),new PA(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Y.bind(null,n),eo:Pe.bind(null,n),zo:tt.bind(null,n)}),n.mu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Iu.Fo(),M(n)?A(n):n.yu.set("Unknown")):(yield n.Iu.stop(),U(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Eh(n){return n.Tu||(n.Tu=function(e,t,r){const o=ze(e);return o.iu(),new FA(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Fv.bind(null,n),eo:bx.bind(null,n),eu:Lv.bind(null,n),tu:Vv.bind(null,n)}),n.mu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Tu.Fo(),yield Lr(n)):(yield n.Tu.stop(),n.du.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class DD{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new DD(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(n,e){if(tr("AsyncQueue",`${e}: ${n}`),Yu(n))return new xe(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Zm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=ov(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new Zm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class BA{constructor(){this.Eu=new xn($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):rt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Km{constructor(e,t,r,o,u,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Km(e,t,Zm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Cx{constructor(){this.Ru=void 0,this.listeners=[]}}class Dx{constructor(){this.queries=new $a(e=>Q_(e),rm),this.onlineState="Unknown",this.bu=new Set}}function TD(n,e){return AD.apply(this,arguments)}function AD(){return AD=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Cx),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=Wm(d,`Initialization of query '${J_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&xD(t)}),AD.apply(this,arguments)}function SD(n,e){return MD.apply(this,arguments)}function MD(){return MD=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),MD.apply(this,arguments)}function Tx(n,e){const t=ze(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&xD(t)}function Ax(n,e,t){const r=ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function xD(n){n.bu.forEach(e=>{e.next()})}class kD{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Km(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Km.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Sx{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class jA{constructor(e){this.M=e}wi(e){return Ha(this.M,e)}mi(e){return e.metadata.exists?jE(this.M,e.document,!1):mn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return ir(e)}}class Mx{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$A(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new jA(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||nn()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function dD(n,e,t,r){return ap.apply(this,arguments)}(e.localStore,new jA(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield Sv(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function $A(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class HA{constructor(e){this.key=e}}class GA{constructor(e){this.key=e}}class qA{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=nn(),this.mutatedKeys=nn(),this.Gu=bE(e),this.Qu=new Zm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new BA,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,k)=>{const V=o.get(S),Z=X_(this.query,k)?k:null,oe=!!V&&this.mutatedKeys.has(V.key),Oe=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Le=!1;V&&Z?V.data.isEqual(Z.data)?oe!==Oe&&(r.track({type:3,doc:Z}),Le=!0):this.Hu(V,Z)||(r.track({type:2,doc:Z}),Le=!0,(E&&this.Gu(Z,E)>0||C&&this.Gu(Z,C)<0)&&(m=!0)):!V&&Z?(r.track({type:0,doc:Z}),Le=!0):V&&!Z&&(r.track({type:1,doc:V}),Le=!0,(E||C)&&(m=!0)),Le&&(Z?(d=d.add(Z),u=Oe?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,S)=>function(k,V){const Z=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return Z(k)-Z(V)}(C.type,S.type)||this.Gu(C.doc,S.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,E=m!==this.qu;return this.qu=m,0!==u.length||E?{snapshot:new Km(this.query,e.Qu,o,u,e.mutatedKeys,0===m,E,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new BA,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=nn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new GA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new HA(r))}),t}ta(e){this.Uu=e._i,this.Ku=nn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Km.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class xx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kx{constructor(e){this.key=e,this.na=!1}}class Rx{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new $a(m=>Q_(m),rm),this.ra=new Map,this.oa=new Set,this.ua=new xn($e.comparator),this.aa=new Map,this.ca=new II,this.ha={},this.la=new Map,this.fa=mc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Nx(n,e){return RD.apply(this,arguments)}function RD(){return RD=(0,ve.Z)(function*(n,e){const t=tT(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield _h(t.localStore,li(e));t.isPrimaryClient&&p(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield ND(t,e,r,"current"===m)}return o}),RD.apply(this,arguments)}function ND(n,e,t,r){return OD.apply(this,arguments)}function OD(){return OD=(0,ve.Z)(function*(n,e,t,r){n._a=(S,k,V)=>{return(Z=(0,ve.Z)(function*(oe,Oe,Le,At){let kt=Oe.view.Wu(Le);kt.ii&&(kt=yield ia(oe.localStore,Oe.query,!1).then(({documents:Rt})=>Oe.view.Wu(Rt,kt)));const Ot=At&&At.targetChanges.get(Oe.targetId),Ct=Oe.view.applyChanges(kt,oe.isPrimaryClient,Ot);return GD(oe,Oe.targetId,Ct.Xu),Ct.snapshot}),function(oe,Oe,Le,At){return Z.apply(this,arguments)})(n,S,k,V);var Z};const o=yield ia(n.localStore,e,!0),u=new qA(e,o._i),d=u.Wu(o.documents),m=fc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,m);GD(n,t,E.Xu);const C=new xx(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),E.snapshot}),OD.apply(this,arguments)}function Ox(n,e){return PD.apply(this,arguments)}function PD(){return PD=(0,ve.Z)(function*(n,e){const t=ze(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!rm(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield vh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_(t.remoteStore,r.targetId),Ym(t,r.targetId)}).catch(yc))):(Ym(t,r.targetId),yield vh(t.localStore,r.targetId,!0))}),PD.apply(this,arguments)}function FD(){return FD=(0,ve.Z)(function*(n,e,t){const r=nT(n);try{const o=yield function(u,d){const m=ze(u),E=Vn.now(),C=d.reduce((k,V)=>k.add(V.key),nn());let S;return m.persistence.runTransaction("Locally write mutations","readwrite",k=>m.fi.Ks(k,C).next(V=>{S=V;const Z=[];for(const oe of d){const Oe=ME(oe,S.get(oe.key));null!=Oe&&Z.push(new Zu(oe.key,Oe,H_(Oe.value.mapValue),Zn.exists(!0)))}return m.Bs.addMutationBatch(k,E,Z,d)})).then(k=>(k.applyToLocalDocumentSet(S),{batchId:k.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let E=u.ha[u.currentUser.toKey()];E||(E=new xn(xt)),E=E.insert(d,m),u.ha[u.currentUser.toKey()]=E}(r,o.batchId,t),yield wc(r,o.changes),yield Lr(r.remoteStore)}catch(o){const u=Wm(o,"Failed to persist write");t.reject(u)}}),FD.apply(this,arguments)}function zA(n,e){return LD.apply(this,arguments)}function LD(){return LD=(0,ve.Z)(function*(n,e){const t=ze(n);try{const r=yield xA(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?bt(d.na):o.removedDocuments.size>0&&(bt(d.na),d.na=!1))}),yield wc(t,r,e)}catch(r){yield yc(r)}}),LD.apply(this,arguments)}function WA(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=ze(u);m.onlineState=d;let E=!1;m.queries.forEach((C,S)=>{for(const k of S.listeners)k.Pu(d)&&(E=!0)}),E&&xD(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fx(n,e,t){return VD.apply(this,arguments)}function VD(){return VD=(0,ve.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new xn($e.comparator);d=d.insert(u,mn.newNoDocument(u,wt.min()));const m=nn().add(u),E=new Zf(wt.min(),new Map,new dn(xt),d,m);yield zA(r,E),r.ua=r.ua.remove(u),r.aa.delete(e),qD(r)}else yield vh(r.localStore,e,!1).then(()=>Ym(r,e,t)).catch(yc)}),VD.apply(this,arguments)}function Lx(n,e){return UD.apply(this,arguments)}function UD(){return UD=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const o=yield MA(t.localStore,e);HD(t,r,null),$D(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wc(t,o)}catch(o){yield yc(o)}}),UD.apply(this,arguments)}function Vx(n,e,t){return BD.apply(this,arguments)}function BD(){return BD=(0,ve.Z)(function*(n,e,t){const r=ze(n);try{const o=yield function(u,d){const m=ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.Bs.lookupMutationBatch(E,d).next(S=>(bt(null!==S),C=S.keys(),m.Bs.removeMutationBatch(E,S))).next(()=>m.Bs.performConsistencyCheck(E)).next(()=>m.fi.Ks(E,C))})}(r.localStore,e);HD(r,e,t),$D(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wc(r,o)}catch(o){yield yc(o)}}),BD.apply(this,arguments)}function jD(){return jD=(0,ve.Z)(function*(n,e){const t=ze(n);P(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Wm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),jD.apply(this,arguments)}function $D(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function HD(n,e,t){const r=ze(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Ym(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||ZA(n,r)})}function ZA(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(_(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),qD(n))}function GD(n,e,t){for(const r of t)r instanceof HA?(n.ca.addReference(r.key,e),Bx(n,r)):r instanceof GA?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||ZA(n,r.key)):rt()}function Bx(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.oa.add(r),qD(n))}function qD(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(qt.fromString(e)),r=n.fa.next();n.aa.set(r,new kx(t)),n.ua=n.ua.insert(t,r),p(n.remoteStore,new gc(li(lc(t.path)),r,2,Gi.A))}}function wc(n,e,t){return zD.apply(this,arguments)}function zD(){return zD=(0,ve.Z)(function*(n,e,t){const r=ze(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,E)=>{d.push(r._a(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const S=Fm.Ys(E.targetId,C);u.push(S)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,ve.Z)(function*(E,C){const S=ze(E);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>he.forEach(C,V=>he.forEach(V.Hs,Z=>S.persistence.referenceDelegate.addReference(k,V.targetId,Z)).next(()=>he.forEach(V.Js,Z=>S.persistence.referenceDelegate.removeReference(k,V.targetId,Z)))))}catch(k){if(!Yu(k))throw k;Re("LocalStore","Failed to update sequence numbers: "+k)}for(const k of C){const V=k.targetId;if(!k.fromCache){const Z=S.ui.get(V),Oe=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);S.ui=S.ui.insert(V,Oe)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),zD.apply(this,arguments)}function jx(n,e){return WD.apply(this,arguments)}function WD(){return WD=(0,ve.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield lD(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new xe(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wc(t,r.di)}var o}),WD.apply(this,arguments)}function $x(n,e){const t=ze(n),r=t.aa.get(e);if(r&&r.na)return nn().add(r.key);{let o=nn();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function Hx(n,e){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,ve.Z)(function*(n,e){const t=ze(n),r=yield ia(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&GD(t,e.targetId,o.Xu),o}),ZD.apply(this,arguments)}function Gx(n,e){return KD.apply(this,arguments)}function KD(){return KD=(0,ve.Z)(function*(n,e){const t=ze(n);return Um(t.localStore,e).then(r=>wc(t,r))}),KD.apply(this,arguments)}function qx(n,e,t,r){return YD.apply(this,arguments)}function YD(){return YD=(0,ve.Z)(function*(n,e,t,r){const o=ze(n),u=yield function(d,m){const E=ze(d),C=ze(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.fn(S,m).next(k=>k?E.fi.Ks(S,k):he.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Lr(o.remoteStore):"acknowledged"===t||"rejected"===t?(HD(o,e,r||null),$D(o,e),m=e,ze(ze(o.localStore).Bs)._n(m)):rt(),yield wc(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),YD.apply(this,arguments)}function QD(){return QD=(0,ve.Z)(function*(n,e){const t=ze(n);if(tT(t),nT(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield KA(t,r.toArray());t.da=!0,yield bD(t.remoteStore,!0);for(const u of o)p(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Ym(t,d),vh(t.localStore,d,!0))),_(t.remoteStore,d)}),yield o,yield KA(t,r),function(u){const d=ze(u);d.aa.forEach((m,E)=>{_(d.remoteStore,E)}),d.ca.Si(),d.aa=new Map,d.ua=new xn($e.comparator)}(t),t.da=!1,yield bD(t.remoteStore,!1)}}),QD.apply(this,arguments)}function KA(n,e,t){return JD.apply(this,arguments)}function JD(){return JD=(0,ve.Z)(function*(n,e,t){const r=ze(n),o=[],u=[];for(const d of e){let m;const E=r.ra.get(d);if(E&&0!==E.length){m=yield _h(r.localStore,li(E[0]));for(const C of E){const S=r.ia.get(C),k=yield Hx(r,S);k.snapshot&&u.push(k.snapshot)}}else{const C=yield Av(r.localStore,d);m=yield _h(r.localStore,C),yield ND(r,YA(C),d,!1)}o.push(m)}return r.sa.zo(u),o}),JD.apply(this,arguments)}function YA(n){return wE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Wx(n){const e=ze(n);return ze(ze(e.localStore).persistence).Fs()}function Zx(n,e,t,r){return XD.apply(this,arguments)}function XD(){return XD=(0,ve.Z)(function*(n,e,t,r){const o=ze(n);if(o.da)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Um(o.localStore,IE(u[0])),m=Zf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield wc(o,d,m);break}case"rejected":yield vh(o.localStore,e,!0),Ym(o,e,r);break;default:rt()}}),XD.apply(this,arguments)}function Kx(n,e,t){return eT.apply(this,arguments)}function eT(){return eT=(0,ve.Z)(function*(n,e,t){const r=tT(n);if(r.da){for(const o of e){if(r.ra.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield Av(r.localStore,o),d=yield _h(r.localStore,u);yield ND(r,YA(u),d.targetId,!1),p(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield vh(r.localStore,o,!1).then(()=>{_(r.remoteStore,o),Ym(r,o)}).catch(yc))}}),eT.apply(this,arguments)}function tT(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$x.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fx.bind(null,e),e.sa.zo=Tx.bind(null,e.eventManager),e.sa.wa=Ax.bind(null,e.eventManager),e}function nT(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vx.bind(null,e),e}class QA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=Hm(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return vI(this.persistence,new _I,e.initialUser,this.M)}ya(e){return new gD(jm.Yi,this.M)}ga(e){return new TI}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class JA extends QA{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield nT(r.Ta.syncEngine),yield Lr(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return vI(this.persistence,new _I,e.initialUser,this.M)}pa(e){return new sD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=yI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?qi.withCacheSize(this.cacheSizeBytes):qi.DEFAULT;return new Om(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vD(),Nv(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new TI}}class Qx extends JA{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof Rv&&(r.sharedClientState.syncEngine={$r:qx.bind(null,o),Br:Zx.bind(null,o),Lr:Kx.bind(null,o),Fs:Wx.bind(null,o),Fr:Gx.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ve.Z)(function*(d){yield function zx(n,e){return QD.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=vD();if(!Rv.vt(t))throw new xe(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rT{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>WA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=jx.bind(null,r.syncEngine),yield bD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Dx}createDatastore(e){const t=Hm(e.databaseInfo.databaseId),r=new OA(e.databaseInfo);return new LA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>WA(this.syncEngine,m,0),d=mD.vt()?new mD:new NA,new i(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,E,C){const S=new Rx(r,o,u,d,m,E);return C&&(S.da=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=ze(t);Re("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield l(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function XA(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Jx{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Xe,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new Sx(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ve.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Xx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,d){const m=ze(u),E=ah(m.M)+"/documents",C={documents:d.map(Z=>Qf(m.M,Z))},S=yield m._o("BatchGetDocuments",E,C),k=new Map;S.forEach(Z=>{const oe=function jC(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=Ha(t,r.found.name),u=ir(r.found.updateTime),d=new ui({mapValue:{fields:r.found.fields}});return mn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=Ha(t,r.missing),u=ir(r.readTime);return mn.newNoDocument(o,u)}(n,e):rt()}(m.M,Z);k.set(oe.key.toString(),oe)});const V=[];return d.forEach(Z=>{const oe=k.get(Z.toString());bt(!!oe),V.push(oe)}),V}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new rv(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const d=ze(o),m=ah(d.M)+"/documents",E={writes:u.map(C=>Xf(d.M,C))};yield d.co("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new xe(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class e1{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new AI(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ve.Z)(function*(){const t=new Xx(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Bf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!iv(t)}return!1}}class t1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Nr.UNAUTHENTICATED,this.clientId=nE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Re("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Wm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function eS(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield lD(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iT.apply(this,arguments)}function tS(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oT(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>UA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>UA(e.remoteStore,u)),n.onlineComponents=e}),sT.apply(this,arguments)}function oT(n){return aT.apply(this,arguments)}function aT(){return aT=(0,ve.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield eS(n,new QA)),n.offlineComponents}),aT.apply(this,arguments)}function xI(n){return uT.apply(this,arguments)}function uT(){return uT=(0,ve.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield tS(n,new rT)),n.onlineComponents}),uT.apply(this,arguments)}function nS(n){return oT(n).then(e=>e.persistence)}function lT(n){return oT(n).then(e=>e.localStore)}function rS(n){return xI(n).then(e=>e.remoteStore)}function cT(n){return xI(n).then(e=>e.syncEngine)}function Qm(n){return dT.apply(this,arguments)}function dT(){return dT=(0,ve.Z)(function*(n){const e=yield xI(n),t=e.eventManager;return t.onListen=Nx.bind(null,e.syncEngine),t.onUnlisten=Ox.bind(null,e.syncEngine),t}),dT.apply(this,arguments)}function iS(n,e,t={}){const r=new Xe;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,d,m,E){const C=new MI({next:k=>{u.enqueueAndForget(()=>SD(o,S));const V=k.docs.has(d);!V&&k.fromCache?E.reject(new xe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&k.fromCache&&m&&"server"===m.source?E.reject(new xe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(k)},error:k=>E.reject(k)}),S=new kD(lc(d.path),C,{includeMetadataChanges:!0,ku:!0});return TD(o,S)}(yield Qm(n),n.asyncQueue,e,t,r)})),r.promise}function sS(n,e,t={}){const r=new Xe;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,d,m,E){const C=new MI({next:k=>{u.enqueueAndForget(()=>SD(o,S)),k.fromCache&&"server"===m.source?E.reject(new xe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(k)},error:k=>E.reject(k)}),S=new kD(d,C,{includeMetadataChanges:!0,ku:!0});return TD(o,S)}(yield Qm(n),n.asyncQueue,e,t,r)})),r.promise}const oS=new Map;function hT(n,e,t){if(!t)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aS(n,e,t,r){if(!0===e&&!0===r)throw new xe(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uS(n){if(!$e.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lS(n){if($e.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function Zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kI(n);throw new xe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cS(n,e){if(e<=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class dS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,aS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dS({}),this._settingsFrozen=!1,e instanceof ta?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _C;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Qg(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=oS.get(e);t&&(Re("ComponentProvider","Removing Datastore"),oS.delete(e),t.terminate())}(this),Promise.resolve()}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new el(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class el extends zi{constructor(e,t,r){super(e,t,lc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new $e(e))}withConverter(e){return new el(this.firestore,e,this._path)}}function hS(n,e,...t){if(n=(0,Nt.m9)(n),hT("collection","path",e),n instanceof Uv){const r=qt.fromString(e,...t);return lS(r),new el(n,null,r)}{if(!(n instanceof kn||n instanceof el))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return lS(r),new el(n.firestore,null,r)}}function RI(n,e,...t){if(n=(0,Nt.m9)(n),1===arguments.length&&(e=nE.R()),hT("doc","path",e),n instanceof Uv){const r=qt.fromString(e,...t);return uS(r),new kn(n,null,new $e(r))}{if(!(n instanceof kn||n instanceof el))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return uS(r),new kn(n.firestore,n instanceof el?n.converter:null,new $e(r))}}function fS(n,e){return n=(0,Nt.m9)(n),e=(0,Nt.m9)(e),(n instanceof kn||n instanceof el)&&(e instanceof kn||e instanceof el)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function pS(n,e){return n=(0,Nt.m9)(n),e=(0,Nt.m9)(e),n instanceof zi&&e instanceof zi&&n.firestore===e.firestore&&rm(n._query,e._query)&&n.converter===e.converter}class h1{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new AI(this,"async_queue_retry"),this.Qa=()=>{const t=Nv();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Nv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Nv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Xe;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ve.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Yu(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,tr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=DD.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&rt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function fT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class f1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends Uv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new h1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||gS(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||gS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function gS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new t1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function mS(n,e,t){const r=new Xe;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield eS(n,t),yield tS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function yS(n){if(n._initialized||n._terminated)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ec{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tl(nr.fromBase64String(e))}catch(t){throw new xe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tl(nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hp{constructor(e){this._methodName=e}}class NI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const b1=/^__.*__$/;class C1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Zu(e,this.data,this.fieldMask,t,this.fieldTransforms):new ih(e,this.data,t,this.fieldTransforms)}}class _S{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class OI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new OI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return LI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(vS(this.ec)&&b1.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class D1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Hm(e)}lc(e,t,r,o=!1){return new OI({ec:e,methodName:t,hc:r,path:Un.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function fp(n){const e=n._freezeSettings(),t=Hm(n._databaseId);return new D1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PI(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);yT("Data must be an object, but it was:",d,r);const m=IS(r,d);let E,C;if(u.merge)E=new sc(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const k of u.mergeFields){const V=_T(e,k,t);if(!d.contains(V))throw new xe(ue.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);CS(S,V)||S.push(V)}E=new sc(S),C=d.fieldTransforms.filter(k=>E.covers(k.field))}else E=null,C=d.fieldTransforms;return new C1(new ui(m),E,C)}class Bv extends hp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bv}}function wS(n,e,t){return new OI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class pT extends hp{_toFieldTransform(e){return new nh(e.path,new eh)}isEqual(e){return e instanceof pT}}class T1 extends hp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=wS(this,e,!0),r=this.fc.map(u=>pp(u,t)),o=new cc(r);return new nh(e.path,o)}isEqual(e){return this===e}}class A1 extends hp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=wS(this,e,!0),r=this.fc.map(u=>pp(u,t)),o=new dc(r);return new nh(e.path,o)}isEqual(e){return this===e}}class S1 extends hp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new th(e.M,zf(e.M,this.dc));return new nh(e.path,t)}isEqual(e){return this===e}}function gT(n,e,t,r){const o=n.lc(1,e,t);yT("Data must be an object, but it was:",o,r);const u=[],d=ui.empty();ic(r,(E,C)=>{const S=FI(e,E,t);C=(0,Nt.m9)(C);const k=o.oc(S);if(C instanceof Bv)u.push(S);else{const V=pp(C,k);null!=V&&(u.push(S),d.set(S,V))}});const m=new sc(u);return new _S(d,m,o.fieldTransforms)}function mT(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[_T(e,r,t)],E=[o];if(u.length%2!=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(_T(e,u[V])),E.push(u[V+1]);const C=[],S=ui.empty();for(let V=m.length-1;V>=0;--V)if(!CS(C,m[V])){const Z=m[V];let oe=E[V];oe=(0,Nt.m9)(oe);const Oe=d.oc(Z);if(oe instanceof Bv)C.push(Z);else{const Le=pp(oe,Oe);null!=Le&&(C.push(Z),S.set(Z,Le))}}const k=new sc(C);return new _S(S,k,d.fieldTransforms)}function ES(n,e,t,r=!1){return pp(t,n.lc(r?4:3,e))}function pp(n,e){if(bS(n=(0,Nt.m9)(n)))return yT("Unsupported field value:",e,n),IS(n,e);if(n instanceof hp)return function(t,r){if(!vS(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=pp(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Nt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zf(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Vn.fromDate(t);return{timestampValue:Yf(r.M,o)}}if(t instanceof Vn){const o=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Yf(r.M,o)}}if(t instanceof NI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tl)return{bytesValue:av(r.M,t._byteString)};if(t instanceof kn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${kI(t)}`)}(n,e)}function IS(n,e){const t={};return Hd(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ic(n,(r,o)=>{const u=pp(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function bS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof NI||n instanceof tl||n instanceof kn||n instanceof hp)}function yT(n,e,t){if(!bS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=kI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function _T(n,e,t){if((e=(0,Nt.m9)(e))instanceof Ec)return e._internalPath;if("string"==typeof e)return FI(n,e);throw LI("Field path arguments must be of type string or ",n,!1,void 0,t)}const M1=new RegExp("[~\\*/\\[\\]]");function FI(n,e,t){if(e.search(M1)>=0)throw LI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ec(...e.split("."))._internalPath}catch(r){throw LI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function LI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new xe(ue.INVALID_ARGUMENT,m+n+E)}function CS(n,e){return n.some(t=>t.isEqual(e))}class jv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new x1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class x1 extends jv{data(){return super.data()}}function VI(n,e){return"string"==typeof e?FI(n,e):e instanceof Ec?e._internalPath:e._delegate._internalPath}class gp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ic extends jv{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $v(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(VI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $v extends Ic{data(e={}){return super.data(e)}}class Ih{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new gp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $v(this._firestore,this._userDataWriter,r.key,r,new gp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new $v(r._firestore,r._userDataWriter,d.doc.key,d.doc,new gp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new $v(r._firestore,r._userDataWriter,d.doc.key,d.doc,new gp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:k1(d.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function k1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function DS(n,e){return n instanceof Ic&&e instanceof Ic?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ih&&e instanceof Ih&&n._firestore===e._firestore&&pS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function TS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hv{}function bh(n,...e){for(const t of e)n=t._apply(n);return n}class R1 extends Hv{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=fp(e.firestore),r=function(o,u,d,m,E,C,S){let k;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){RS(S,C);const Z=[];for(const oe of S)Z.push(kS(m,o,oe));k={arrayValue:{values:Z}}}else k=kS(m,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||RS(S,C),k=ES(d,"where",S,"in"===C||"not-in"===C);const V=Pr.create(E,C,k);return function(Z,oe){if(oe.S()){const Le=Xd(Z);if(null!==Le&&!Le.isEqual(oe.field))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${oe.field.toString()}'`);const At=K_(Z);null!==At&&NS(0,oe.field,At)}const Oe=function(Le,At){for(const kt of Le.filters)if(At.indexOf(kt.op)>=0)return kt.op;return null}(Z,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(oe.op));if(null!==Oe)throw new xe(ue.INVALID_ARGUMENT,Oe===oe.op?`Invalid query. You cannot use more than one '${oe.op.toString()}' filter.`:`Invalid query. You cannot use '${oe.op.toString()}' filters with '${Oe.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new zi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new na(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class O1 extends Hv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new zu(o,u);return function(m,E){if(null===K_(m)){const C=Xd(m);null!==C&&NS(0,C,E.field)}}(r,d),d}(e._query,this._c,this.gc);return new zi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new na(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class AS extends Hv{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new zi(e.firestore,e.converter,EE(e._query,this.yc,this.Ic))}}class SS extends Hv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=xS(e,this.type,this.Tc,this.Ec);return new zi(e.firestore,e.converter,(o=t,new na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class MS extends Hv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=xS(e,this.type,this.Tc,this.Ec);return new zi(e.firestore,e.converter,(o=t,new na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function xS(n,e,t,r){if(t[0]=(0,Nt.m9)(t[0]),t[0]instanceof jv)return function(o,u,d,m,E){if(!m)throw new xe(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const S of Io(o))if(S.field.isKeyField())C.push(wo(u,m.key));else{const k=m.data.field(S.field);if(U_(k))throw new xe(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const V=S.field.canonicalString();throw new xe(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(k)}return new qu(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=fp(n.firestore);return function(u,d,m,E,C,S){const k=u.explicitOrderBy;if(C.length>k.length)throw new xe(ue.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let Z=0;Z<C.length;Z++){const oe=C[Z];if(k[Z].field.isKeyField()){if("string"!=typeof oe)throw new xe(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof oe}`);if(!Y_(u)&&-1!==oe.indexOf("/"))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${oe}' contains a slash.`);const Oe=u.path.child(qt.fromString(oe));if(!$e.isDocumentKey(Oe))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Le=new $e(Oe);V.push(wo(d,Le))}else{const Oe=ES(m,E,oe);V.push(Oe)}}return new qu(V,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function kS(n,e,t){if("string"==typeof(t=(0,Nt.m9)(t))){if(""===t)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y_(e)&&-1!==t.indexOf("/"))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!$e.isDocumentKey(r))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wo(n,new $e(r))}if(t instanceof kn)return wo(n,t._key);throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kI(t)}.`)}function RS(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NS(n,e,t){if(!t.isEqual(e))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const $1={maxAttempts:5};class vT{convertValue(e,t="none"){switch(zd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return ic(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new NI(cn(e.latitude),cn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gd(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);bt(ZE(r));const o=new ta(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||tr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function UI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class H1 extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new tl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}class OS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fp(e)}set(e,t,r){this._verifyNotCommitted();const o=Ch(e,this._firestore),u=UI(o.converter,t,r),d=PI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Zn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Ch(e,this._firestore);let d;return d="string"==typeof(t=(0,Nt.m9)(t))||t instanceof Ec?mT(this._dataReader,"WriteBatch.update",u._key,t,r,o):gT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ch(e,this._firestore);return this._mutations=this._mutations.concat(new Wf(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ch(n,e){if((n=(0,Nt.m9)(n)).firestore!==e)throw new xe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class mp extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new tl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function PS(n,e,t){n=Zt(n,kn);const r=Zt(n.firestore,Bn),o=UI(n.converter,e,t);return Jm(r,[PI(fp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Zn.none())])}function FS(n,e,t,...r){n=Zt(n,kn);const o=Zt(n.firestore,Bn),u=fp(o);let d;return d="string"==typeof(e=(0,Nt.m9)(e))||e instanceof Ec?mT(u,"updateDoc",n._key,e,t,r):gT(u,"updateDoc",n._key,e),Jm(o,[d.toMutation(n._key,Zn.exists(!0))])}function LS(n,...e){var t,r,o;n=(0,Nt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||fT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(fT(e[d])){const k=e[d];e[d]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[d+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[d+2]=null===(o=k.complete)||void 0===o?void 0:o.bind(k)}let E,C,S;if(n instanceof kn)C=Zt(n.firestore,Bn),S=lc(n._key.path),E={next:k=>{e[d]&&e[d](wT(C,n,k))},error:e[d+1],complete:e[d+2]};else{const k=Zt(n,zi);C=Zt(k.firestore,Bn),S=k._query;const V=new mp(C);E={next:Z=>{e[d]&&e[d](new Ih(C,V,k,Z))},error:e[d+1],complete:e[d+2]},TS(n._query)}return function(k,V,Z,oe){const Oe=new MI(oe),Le=new kD(V,Oe,Z);return k.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return TD(yield Qm(k),Le)})),()=>{Oe.Aa(),k.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return SD(yield Qm(k),Le)}))}}(Vr(C),S,m,E)}function Jm(n,e){return function(t,r){const o=new Xe;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Px(n,e,t){return FD.apply(this,arguments)}(yield cT(t),r,o)})),o.promise}(Vr(n),e)}function wT(n,e,t){const r=t.docs.get(e._key),o=new mp(n);return new Ic(n,o,e._key,r,new gp(t.hasPendingWrites,t.fromCache),e.converter)}class X1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fp(e)}get(e){const t=Ch(e,this._firestore),r=new H1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const u=o[0];if(u.isFoundDocument())return new jv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new jv(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=Ch(e,this._firestore),u=UI(o.converter,t,r),d=PI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Ch(e,this._firestore);let d;return d="string"==typeof(t=(0,Nt.m9)(t))||t instanceof Ec?mT(this._dataReader,"Transaction.update",u._key,t,r,o):gT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Ch(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ch(e,this._firestore),r=new mp(this._firestore);return super.get(e).then(o=>new Ic(this._firestore,r,t._key,o._document,new gp(!1,!1),t.converter))}}function ET(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function US(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function BS(){if(!function iE(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){nc=bd.SDK_VERSION,(0,bd._registerComponent)(new Bl.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Bn(o,new Yg(t.getProvider("auth-internal")),new Ln(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,bd.registerVersion)(L_,"3.4.9",n),(0,bd.registerVersion)(L_,"3.4.9","esm2017")}();class Gv{constructor(e){this._delegate=e}static fromBase64String(e){return BS(),new Gv(tl.fromBase64String(e))}static fromUint8Array(e){return US(),new Gv(tl.fromUint8Array(e))}toBase64(){return BS(),this._delegate.toBase64()}toUint8Array(){return US(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IT(n){return function uk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class lk{enableIndexedDbPersistence(e,t){return function g1(n,e){yS(n=Zt(n,Bn));const t=Vr(n),r=n._freezeSettings(),o=new rT;return mS(t,o,new JA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function m1(n){yS(n=Zt(n,Bn));const e=Vr(n),t=n._freezeSettings(),r=new rT;return mS(e,r,new Qx(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function y1(n){if(n._initialized&&!n._terminated)throw new xe(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xe;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!js.vt())return Promise.resolve();const o=r+"main";yield js.delete(o)}),function(r){return t.apply(this,arguments)})(yI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ta||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function c1(n,e,t,r={}){var o;const u=(n=Zt(n,Uv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Lf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Nr.MOCK_USER;else{d=(0,Nt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new xe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Nr(E)}n._authCredentials=new vC(new tE(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function v1(n){return function n1(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield nS(n),t=yield rS(n);return e.setNetworkEnabled(!0),function(r){const o=ze(r);return o.wu.delete(0),s(o)}(t)}))}(Vr(n=Zt(n,Bn)))}(this._delegate)}disableNetwork(){return function w1(n){return function r1(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield nS(n),t=yield rS(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=ze(o);u.wu.add(0),yield l(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Vr(n=Zt(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,aS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _1(n){return function(e){const t=new Xe;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Ux(n,e){return jD.apply(this,arguments)}(yield cT(e),t)})),t.promise}(Vr(n=Zt(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function J1(n,e){return function o1(n,e){const t=new MI(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Qm(n),o=t,ze(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Qm(n),o=t,void ze(r).bu.delete(o);var r,o}))}}(Vr(n=Zt(n,Bn)),fT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xm(this,hS(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,RI(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function d1(n,e){if(n=Zt(n,Uv),hT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(n,null,(t=e,new na(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ek(n,e,t){n=Zt(n,Bn);const r=Object.assign(Object.assign({},$1),t);return function(o){if(o.maxAttempts<1)throw new xe(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function a1(n,e,t){const r=new Xe;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const o=yield(u=n,xI(u).then(d=>d.datastore));var u;new e1(n.asyncQueue,o,t,e,r).run()})),r.promise}(Vr(n),o=>e(new X1(n,o)),r)}(this._delegate,t=>e(new $S(this,t)))}batch(){return Vr(this._delegate),new HS(new OS(this._delegate,e=>Jm(this._delegate,e)))}loadBundle(e){return function E1(n,e){const t=Vr(n=Zt(n,Bn)),r=new f1;return function u1(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return XA(E,C);if(E instanceof ArrayBuffer)return XA(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Jx(E,d);var E}(t,Hm(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function Yx(n,e,t){const r=ze(n);var o;(o=(0,ve.Z)(function*(u,d,m){try{const E=yield d.getMetadata();if(yield function(V,Z){const oe=ze(V),Oe=ir(Z.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Le=>oe._s.getBundleMetadata(Le,Z.id)).then(Le=>!!Le&&Le.createTime.compareTo(Oe)>=0)}(u.localStore,E))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=E).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress($A(E));const C=new Mx(E,u.localStore,d.M);let S=yield d.ma();for(;S;){const V=yield C.Fu(S);V&&m._updateProgress(V),S=yield d.ma()}const k=yield C.complete();return yield wc(u,k.Lu,void 0),yield function(V,Z){const oe=ze(V);return oe.persistence.runTransaction("Save bundle","readwrite",Oe=>oe._s.saveBundleMetadata(Oe,Z))}(u.localStore,E),m._completeWith(k.progress),Promise.resolve(k.Bu)}catch(E){return Lf("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var V}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield cT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function I1(n,e){return function l1(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield lT(n),e)}))}(Vr(n=Zt(n,Bn)),e).then(t=>t?new zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class BI extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gv(new tl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class $S{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}get(e){const t=_p(e);return this._delegate.get(t).then(r=>new qv(this._firestore,new Ic(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=_p(e);return r?(ET("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=_p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=_p(e);return this._delegate.delete(t),this}}class HS{constructor(e){this._delegate=e}set(e,t,r){const o=_p(e);return r?(ET("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=_p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=_p(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $v(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new yp(e,new BI(e),t),o.set(t,u)),u}}yp.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new kn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new sa(t,new kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xm(this.firestore,hS(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Nt.m9)(e))instanceof kn&&fS(this._delegate,e)}set(e,t){t=ET("DocumentReference.set",t);try{return t?PS(this._delegate,e,t):PS(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?FS(this._delegate,e):FS(this._delegate,e,t,...r)}catch(o){throw ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function Y1(n){return Jm(Zt(n.firestore,Bn),[new Wf(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=GS(e),r=qS(e,o=>new qv(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return LS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function q1(n){n=Zt(n,kn);const e=Zt(n.firestore,Bn),t=Vr(e),r=new mp(e);return function i1(n,e){const t=new Xe;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,d){try{const m=yield function(E,C){const S=ze(E);return S.persistence.runTransaction("read document","readonly",k=>S.fi.Ls(k,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Wm(m,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield lT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ic(e,r,n._key,o,new gp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function z1(n){n=Zt(n,kn);const e=Zt(n.firestore,Bn);return iS(Vr(e),n._key,{source:"server"}).then(t=>wT(e,n,t))}(this._delegate):function G1(n){n=Zt(n,kn);const e=Zt(n.firestore,Bn);return iS(Vr(e),n._key).then(t=>wT(e,n,t))}(this._delegate),t.then(r=>new qv(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function GS(n){for(const e of n)if("object"==typeof e&&!IT(e))return e;return{}}function qS(n,e){var t,r;let o;return o=IT(n[0])?n[0]:IT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class qv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return DS(this._delegate,e._delegate)}}class zv extends qv{data(e){const t=this._delegate.data(e);return function wA(n,e){n||rt()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}where(e,t,r){try{return new ys(this.firestore,bh(this._delegate,function N1(n,e,t){const r=e,o=VI("where",n);return new R1(o,r,t)}(e,t,r)))}catch(o){throw ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,bh(this._delegate,function P1(n,e="asc"){const t=e,r=VI("orderBy",n);return new O1(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,bh(this._delegate,function F1(n){return cS("limit",n),new AS("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,bh(this._delegate,function L1(n){return cS("limitToLast",n),new AS("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,bh(this._delegate,function V1(...n){return new SS("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,bh(this._delegate,function U1(...n){return new SS("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,bh(this._delegate,function B1(...n){return new MS("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,bh(this._delegate,function j1(...n){return new MS("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return pS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Z1(n){n=Zt(n,zi);const e=Zt(n.firestore,Bn),t=Vr(e),r=new mp(e);return function s1(n,e){const t=new Xe;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,d){try{const m=yield ia(o,u,!0),E=new qA(u,m._i),C=E.Wu(m.documents),S=E.applyChanges(C,!1);d.resolve(S.snapshot)}catch(m){const E=Wm(m,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield lT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ih(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function K1(n){n=Zt(n,zi);const e=Zt(n.firestore,Bn),t=Vr(e),r=new mp(e);return sS(t,n._query,{source:"server"}).then(o=>new Ih(e,r,n,o))}(this._delegate):function W1(n){n=Zt(n,zi);const e=Zt(n.firestore,Bn),t=Vr(e),r=new mp(e);return TS(n._query),sS(t,n._query).then(o=>new Ih(e,r,n,o))}(this._delegate),t.then(r=>new bT(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=GS(e),r=qS(e,o=>new bT(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return LS(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}class dk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new dk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new zv(this._firestore,r))})}isEqual(e){return DS(this._delegate,e._delegate)}}class Xm extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?RI(this._delegate):RI(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function Q1(n,e){const t=Zt(n.firestore,Bn),r=RI(n),o=UI(n.converter,e);return Jm(t,[PI(fp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return fS(this._delegate,e._delegate)}withConverter(e){return new Xm(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}function _p(n){return Zt(n,kn)}class CT{constructor(...e){this._delegate=new Ec(...e)}static documentId(){return new CT(Un.keyField().canonicalString())}isEqual(e){return(e=(0,Nt.m9)(e))instanceof Ec&&this._delegate._internalPath.isEqual(e._internalPath)}}class vp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function nk(){return new pT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new vp(e)}static delete(){const e=function tk(){return new Bv("deleteField")}();return e._methodName="FieldValue.delete",new vp(e)}static arrayUnion(...e){const t=function rk(...n){return new T1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new vp(t)}static arrayRemove(...e){const t=function ik(...n){return new A1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new vp(t)}static increment(e){const t=function sk(n){return new S1("increment",n)}(e);return t._methodName="FieldValue.increment",new vp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const hk={Firestore:jS,GeoPoint:NI,Timestamp:Vn,Blob:Gv,Transaction:$S,WriteBatch:HS,DocumentReference:sa,DocumentSnapshot:qv,Query:ys,QueryDocumentSnapshot:zv,QuerySnapshot:bT,CollectionReference:Xm,FieldPath:CT,FieldValue:vp,setLogLevel:function ck(n){!function eE(n){Ua.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function zS(n,e){return function gk(n,e=Cy.z){return new Tn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function DT(n,e){return zS(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function jI(n,e){return DT(n,e).pipe(ao(void 0),Xy(),(0,vt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(S=>S.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function WS(n,e,t){return jI(n,t).pipe(Vi((r,o)=>function yk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function _k(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function e_(n,e=Li.y){return n=null!=n?n:iw,(0,qn.e)((t,r)=>{let o,u=!0;t.subscribe((0,Gn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,vt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function TT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function ZS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function pk(n){(function fk(n,e){n.INTERNAL.registerComponent(new Bl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},hk)))})(n,(e,t)=>new jS(e,t,new lk)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(sw.Z);class KS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ao(void 0),Xy(),Xn(([r,o])=>o.length>0||!r),(0,vt.U)(([r,o])=>o),Mr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ZS(e);return WS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return DT(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Mr.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Mr.iC)}add(e){return this.ref.add(e)}doc(e){return new YS(this.ref.doc(e),this.afs)}}class YS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=XS(r,t);return new KS(o,u,this.afs)}snapshotChanges(){return function mk(n,e){return zS(n,e).pipe(ao(void 0),Xy(),(0,vt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(Mr.iC)}}class vk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jI(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xn(t=>t.length>0),Mr.iC):jI(this.query,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ZS(e);return WS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return DT(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Mr.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Mr.iC)}}const QS=new h.OlP("angularfire2.enableFirestorePersistence"),JS=new h.OlP("angularfire2.firestore.persistenceSettings"),wk=new h.OlP("angularfire2.firestore.settings"),Ek=new h.OlP("angularfire2.firestore.use-emulator");function XS(n,e=(t=>t)){return{query:e(n),ref:n}}let eM=(()=>{class n{constructor(t,r,o,u,d,m,E,C,S,k,V,Z,oe,Oe,Le,At,kt){this.schedulers=E;const Ot=(0,Vs.on)(t,m,r),Ct=S;k&&Jy(Ot,m,V,oe,Oe,Le,Z,At),[this.firestore,this.persistenceEnabled$]=(0,Vs.cc)(`${Ot.name}.firestore`,"AngularFirestore",Ot.name,()=>{const Rt=m.runOutsideAngular(()=>Ot.firestore());if(u&&Rt.settings(u),Ct&&Rt.useEmulator(...Ct),o&&!Mo(d)){const ot=()=>{try{return(0,rn.D)(Rt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Et){return"undefined"!=typeof console&&console.warn(Et),st(!1)}};return[Rt,m.runOutsideAngular(ot)]}return[Rt,st(!1)]},[u,Ct,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=XS(o,r),m=this.schedulers.ngZone.run(()=>u);return new KS(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new vk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new YS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vs.Dh),h.LFG(Vs.xv,8),h.LFG(QS,8),h.LFG(wk,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Mr.HU),h.LFG(JS,8),h.LFG(Ek,8),h.LFG(Hl,8),h.LFG(Yo,8),h.LFG(cf,8),h.LFG(nw,8),h.LFG(rw,8),h.LFG(Pb,8),h.LFG(_g,8),h.LFG(Ky,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ik=(()=>{class n{constructor(){lf.Z.registerVersion("angularfire",Mr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:QS,useValue:!0},{provide:JS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[eM]}),n})(),$I=(()=>{class n{constructor(t,r){this.auth=t,this.db=r,this.userCollection=this.db.collection("users"),this.isAuthenticated$=t.user.pipe((0,vt.U)(o=>!!o)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function w0(n,e=Cy.z){const t=function lb(n=0,e,t=Cy.P){let r=-1;return null!=e&&((0,nA.K)(e)?t=e:r=e),new Tn.y(o=>{let u=function v0(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let d=0;return t.schedule(function(){o.closed||(o.next(d++),0<=r?this.schedule(void 0,r):o.complete())},u)})}(n,e);return Ty(()=>t)}(1e3))}createUser(t,r){return(0,rn.D)(this.auth.createUserWithEmailAndPassword(t.email,r)).pipe(ii(d=>{throw console.log(d),d}),(0,mi.q)(1),yi(d=>{if(null==d)throw Error("User credentials conn't be null !!\u{1f480}");return(0,rn.D)(this.userCollection.doc(d.user.uid).set(t)).pipe((0,En.z)(()=>(0,rn.D)(d.user.updateProfile({displayName:t.name}))))})).pipe((0,vt.U)(d=>t),(0,mi.q)(1))}login(t,r){var o=this;return(0,ve.Z)(function*(){yield o.auth.signInWithEmailAndPassword(t,r)})()}logout(){var t=this;return(0,ve.Z)(function*(){yield t.auth.signOut()})()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hl),h.LFG(eM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HI=(()=>{class n{constructor(){this.modalsBag=[]}register(t){if(this.modalsBag.some(r=>r.Id==t))throw Error(`Dublicate modal key !! \u{1f480}\u{1f480} ... the key ${t} already exists \u{1f914}`);this.modalsBag.push({Id:t,visible:!1})}unRegister(t){this.modalsBag=this.modalsBag.filter(r=>r.Id!=t)}isModalOpen(t){var r,o;return null!==(o=null===(r=this.modalsBag.find(u=>u.Id==t))||void 0===r?void 0:r.visible)&&void 0!==o&&o}toggleModal(t){var r;let o=this.modalsBag.find(u=>u.Id==t);o&&(o.visible=null!==(r=!(null==o?void 0:o.visible))&&void 0!==r&&r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"a",14),h.NdJ("click",function(o){return h.CHM(t),h.oxw().openModal(o)}),h._uU(2,"Login / Register"),h.qZA()()}}function Ck(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"a",15),h._uU(2,"Manage"),h.qZA()(),h.TgZ(3,"li")(4,"a",15),h._uU(5,"Upload"),h.qZA()(),h.TgZ(6,"li")(7,"a",14),h.NdJ("click",function(o){return h.CHM(t),h.oxw().logout(o)}),h._uU(8,"Logout"),h.qZA()()}}let Dk=(()=>{class n{constructor(t,r){this.modalService=t,this.authService=r}ngOnInit(){}openModal(t){t.preventDefault(),this.modalService.toggleModal("auth-modal")}logout(t){var r=this;return(0,ve.Z)(function*(){t.preventDefault(),yield r.authService.logout()})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(HI),h.Y36($I))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["href","index.html",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["href","about.html",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["href","#",1,"px-2"]],template:function(t,r){if(1&t&&(h.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),h._uU(3,"Clipz"),h.qZA(),h.TgZ(4,"div",3)(5,"ul",4),h.YNc(6,bk,3,0,"li",5),h.ALo(7,"async"),h.YNc(8,Ck,9,0,"ng-template",null,6,h.W1O),h.TgZ(10,"li")(11,"a",7),h._uU(12,"About"),h.qZA()()(),h.TgZ(13,"ul",8)(14,"li")(15,"a",9),h._UZ(16,"img",10),h.TgZ(17,"span",11),h._uU(18,"English"),h.qZA()()(),h.TgZ(19,"li",12)(20,"a",9),h._UZ(21,"img",13),h.TgZ(22,"span",11),h._uU(23,"French"),h.qZA()()()()()()()),2&t){const o=h.MAs(9);h.xp6(6),h.Q6J("ngIf",!h.lcZ(7,2,r.authService.isAuthenticatedWithDelay$))("ngIfElse",o)}},directives:[fn],pipes:[Sc],styles:[""]}),n})();const Tk=[[["","heading",""]],"*"],Ak=function(n){return{hidden:n}},Sk=["[heading]","*"];let Mk=(()=>{class n{constructor(t,r){this.modalService=t,this.element=r,this._modalId=""}set modalId(t){this.modalService.register(t),this._modalId=t}get modalId(){return this._modalId}closeModal(){this.modalService.toggleModal(this.modalId)}isModalOpen(){return this.modalService.isModalOpen(this.modalId)}ngOnInit(){document.body.appendChild(this.element.nativeElement)}ngOnDestroy(){this.modalService.unRegister(this.modalId),document.body.removeChild(this.element.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(HI),h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId"},ngContentSelectors:Sk,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(h.F$t(Tk),h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h.NdJ("click",function(){return r.closeModal()}),h._UZ(3,"div",3),h.qZA(),h.TgZ(4,"span",4),h._uU(5,"\u200b"),h.qZA(),h.TgZ(6,"div",5)(7,"div",6)(8,"div",7),h.Hsn(9),h.TgZ(10,"div",8),h.NdJ("click",function(){return r.closeModal()}),h._uU(11," \u2715 "),h.qZA()(),h.Hsn(12,1),h.qZA()()()()),2&t&&h.Q6J("ngClass",h.VKq(1,Ak,!r.isModalOpen()))},directives:[ei],styles:[""]}),n})();function xk(n,e){1&n&&h.Hsn(0,0,["*ngIf","isActive"])}const kk=["*"];let tM=(()=>{class n{constructor(){this.title="",this.isActive=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tab"]],inputs:{title:"title",isActive:"isActive"},ngContentSelectors:kk,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(h.F$t(),h.YNc(0,xk,1,0,"ng-content",0)),2&t&&h.Q6J("ngIf",r.isActive)},directives:[fn],styles:[""]}),n})();const Rk=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function Nk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",2)(1,"a",3),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw().selectTab(u)}),h._uU(2),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.Q6J("ngClass",h.WLB(2,Rk,!t.isActive,t.isActive)),h.xp6(1),h.Oqu(t.title)}}const Ok=["*"];let Pk=(()=>{class n{constructor(){this.tabs=new h.n_E}ngAfterContentInit(){const t=this.tabs.filter(r=>r.isActive);(null==t?void 0:t.length)||this.selectTab(this.tabs.first),(null==t?void 0:t.length)>1&&this.selectTab(t[0])}selectTab(t){return this.tabs.forEach(r=>{r.isActive=!1}),t.isActive=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,o){if(1&t&&h.Suo(o,tM,4),2&t){let u;h.iGM(u=h.CRH())&&(r.tabs=u)}},ngContentSelectors:Ok,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"ul",0),h.YNc(1,Nk,3,5,"li",1),h.qZA(),h.Hsn(2)),2&t&&(h.xp6(1),h.Q6J("ngForOf",r.tabs))},directives:[$n,ei],styles:[""]}),n})(),Fk=(()=>{class n{}return n.emailPattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,n})();const Lk=["*"];let nM=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:Lk,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0),h.Hsn(1),h.qZA()),2&t&&h.Q6J("ngClass",r.bgColor)},directives:[ei],styles:[""]}),n})(),rM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),wp=(()=>{class n extends rM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Wa=new h.OlP("NgValueAccessor"),Bk={provide:Wa,useExisting:(0,h.Gpc)(()=>Wv),multi:!0},$k=new h.OlP("CompositionEventMode");let Wv=(()=>{class n extends rM{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jk(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36($k,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([Bk]),h.qOj]}),n})();function Dh(n){return null==n||0===n.length}function sM(n){return null!=n&&"number"==typeof n.length}const Ti=new h.OlP("NgValidators"),Th=new h.OlP("NgAsyncValidators"),Hk=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bo{static min(e){return function oM(n){return e=>{if(Dh(e.value)||Dh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function aM(n){return e=>{if(Dh(e.value)||Dh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return uM(e)}static requiredTrue(e){return function lM(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function cM(n){return Dh(n.value)||Hk.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function dM(n){return e=>Dh(e.value)||!sM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function hM(n){return e=>sM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return fM(e)}static nullValidator(e){return null}static compose(e){return vM(e)}static composeAsync(e){return wM(e)}}function uM(n){return Dh(n.value)?{required:!0}:null}function fM(n){if(!n)return GI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Dh(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function GI(n){return null}function pM(n){return null!=n}function gM(n){const e=(0,h.QGY)(n)?(0,rn.D)(n):n;return(0,h.CqO)(e),e}function mM(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function yM(n,e){return e.map(t=>t(n))}function _M(n){return n.map(e=>function Gk(n){return!n.validate}(e)?e:t=>e.validate(t))}function vM(n){if(!n)return null;const e=n.filter(pM);return 0==e.length?null:function(t){return mM(yM(t,e))}}function AT(n){return null!=n?vM(_M(n)):null}function wM(n){if(!n)return null;const e=n.filter(pM);return 0==e.length?null:function(t){return function Vk(...n){const e=(0,va.jO)(n),{args:t,keys:r}=wn(n),o=new Tn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let E=d,C=d;for(let S=0;S<d;S++){let k=!1;(0,vl.Xf)(t[S]).subscribe((0,Gn.x)(u,V=>{k||(k=!0,C--),m[S]=V},()=>E--,void 0,()=>{(!E||!k)&&(C||u.next(r?_l(r,m):m),u.complete())}))}});return e?o.pipe(yl(e)):o}(yM(t,e).map(gM)).pipe((0,vt.U)(mM))}}function ST(n){return null!=n?wM(_M(n)):null}function EM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IM(n){return n._rawValidators}function bM(n){return n._rawAsyncValidators}function MT(n){return n?Array.isArray(n)?n:[n]:[]}function qI(n,e){return Array.isArray(n)?n.includes(e):n===e}function CM(n,e){const t=MT(e);return MT(n).forEach(o=>{qI(t,o)||t.push(o)}),t}function DM(n,e){return MT(e).filter(t=>!qI(n,t))}class TM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ST(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ah extends TM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _s extends TM{get formDirective(){return null}get path(){return null}}class AM{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let xT=(()=>{class n extends AM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ah,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),kT=(()=>{class n extends AM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_s,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function Zv(n,e){OT(n,e),e.valueAccessor.writeValue(n.value),function Jk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&MM(n,e)})}(n,e),function eR(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Xk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&MM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Qk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ZI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),YI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function KI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function OT(n,e){const t=IM(n);null!==e.validator?n.setValidators(EM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=bM(n);null!==e.asyncValidator?n.setAsyncValidators(EM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();KI(e._rawValidators,o),KI(e._rawAsyncValidators,o)}function YI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=IM(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=bM(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return KI(e._rawValidators,r),KI(e._rawAsyncValidators,r),t}function MM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xM(n,e){OT(n,e)}function PT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function RM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function FT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Wv?t=u:function rR(n){return Object.getPrototypeOf(n.constructor)===wp}(u)?r=u:o=u}),o||r||t||null}function LT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Kv="VALID",QI="INVALID",ey="PENDING",Yv="DISABLED";function UT(n){return(JI(n)?n.validators:n)||null}function NM(n){return Array.isArray(n)?AT(n):n||null}function BT(n,e){return(JI(e)?e.asyncValidators:n)||null}function OM(n){return Array.isArray(n)?ST(n):n||null}function JI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const PM=n=>n instanceof bc,jT=n=>n instanceof XI;function FM(n){return PM(n)?n.value:n.getRawValue()}function LM(n,e){const t=jT(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function VM(n,e){jT(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new h.vHH(1002,"")})}class $T{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=NM(this._rawValidators),this._composedAsyncValidatorFn=OM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Kv}get invalid(){return this.status===QI}get pending(){return this.status==ey}get disabled(){return this.status===Yv}get enabled(){return this.status!==Yv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=NM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=OM(e)}addValidators(e){this.setValidators(CM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(CM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(DM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(DM(e,this._rawAsyncValidators))}hasValidator(e){return qI(this._rawValidators,e)}hasAsyncValidator(e){return qI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ey,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yv,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kv,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kv||this.status===ey)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yv:Kv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ey,this._hasOwnPendingAsyncValidator=!0;const t=gM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function iR(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=jT(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof oR)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Yv:this.errors?QI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ey)?ey:this._anyControlsHaveStatus(QI)?QI:Kv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){JI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class bc extends $T{constructor(e=null,t,r){super(UT(t),BT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),JI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class XI extends $T{constructor(e,t,r){super(UT(t),BT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){VM(this,e),Object.keys(e).forEach(r=>{LM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=FM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class oR extends $T{constructor(e,t,r){super(UT(t),BT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){VM(this,e),e.forEach((r,o)=>{LM(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>FM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const aR={provide:_s,useExisting:(0,h.Gpc)(()=>eb)},Qv=(()=>Promise.resolve(null))();let eb=(()=>{class n extends _s{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new XI({},AT(t),ST(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Qv.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Zv(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Qv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Qv.then(()=>{const r=this._findContainer(t.path),o=new XI({});xM(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Qv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Qv.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,RM(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,10),h.Y36(Th,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([aR]),h.qOj]}),n})();const lR={provide:Ah,useExisting:(0,h.Gpc)(()=>HT)},jM=(()=>Promise.resolve(null))();let HT=(()=>{class n extends Ah{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new bc,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=FT(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),PT(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){jM.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;jM.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function WI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_s,9),h.Y36(Ti,10),h.Y36(Th,10),h.Y36(Wa,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([lR]),h.qOj,h.TTD]}),n})(),GT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),HM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const qT=new h.OlP("NgModelWithFormControlWarning"),pR={provide:Ah,useExisting:(0,h.Gpc)(()=>zT)};let zT=(()=>{class n extends Ah{constructor(t,r,o,u){super(),this._ngModelWarningConfig=u,this.update=new h.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=FT(0,o)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&ZI(r,this,!1),Zv(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}PT(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ZI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,10),h.Y36(Th,10),h.Y36(Wa,10),h.Y36(qT,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[h._Bn([pR]),h.qOj,h.TTD]}),n})();const gR={provide:_s,useExisting:(0,h.Gpc)(()=>tb)};let tb=(()=>{class n extends _s{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(YI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Zv(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ZI(t.control||null,t,!1),LT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,RM(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ZI(r||null,t),PM(o)&&(Zv(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);xM(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function tR(n,e){return YI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){OT(this.form,this),this._oldForm&&YI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,10),h.Y36(Th,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([gR]),h.qOj,h.TTD]}),n})(),Ep=(()=>{class n{constructor(){this._validator=GI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):GI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const SR={provide:Ti,useExisting:(0,h.Gpc)(()=>nb),multi:!0};let nb=(()=>{class n extends Ep{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function DR(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>uM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([SR]),h.qOj]}),n})();const NR={provide:Ti,useExisting:(0,h.Gpc)(()=>QT),multi:!0};let QT=(()=>{class n extends Ep{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>fM(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[h._Bn([NR]),h.qOj]}),n})(),ix=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[HM]]}),n})(),OR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ix]}),n})(),sx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ix]}),n})();function PR(n,e){if(1&n&&(h.TgZ(0,"app-alert",11),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(1),h.Oqu(t.alertMessage)}}function FR(n,e){1&n&&(h.TgZ(0,"p",12),h._uU(1," Field is required !! "),h.qZA())}function LR(n,e){1&n&&(h.TgZ(0,"p",12),h._uU(1," You must enter a valid email !! "),h.qZA())}function VR(n,e){1&n&&(h.TgZ(0,"p",12),h._uU(1," Field is required !! "),h.qZA())}let UR=(()=>{class n{constructor(t,r){this.auth=t,this.modalService=r,this.constatns=Fk,this.showAlert=!1,this.alertColor="",this.alertMessage="",this.credentials={email:"",password:""}}ngOnInit(){}login(){var t=this;return(0,ve.Z)(function*(){var r;try{t.showAlert=!0,t.alertColor="orange",t.alertMessage="Please wait ... \u{1f607}";const{email:o,password:u}=t.credentials;yield t.auth.login(o,u),t.showAlert=!1,t.modalService.toggleModal("auth-modal")}catch(o){t.showAlert=!0,t.alertColor="red",t.alertMessage=null!==(r=o.message)&&void 0!==r?r:"somthing went wrong !! \u{1f616}\u{1f613}",console.error(o)}})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($I),h.Y36(HI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:18,vars:8,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","pattern","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(h.YNc(0,PR,2,2,"app-alert",0),h.TgZ(1,"form",1,2),h.NdJ("ngSubmit",function(){return r.login()}),h.TgZ(3,"div",3)(4,"label",4),h._uU(5,"Email"),h.qZA(),h.TgZ(6,"input",5,6),h.NdJ("ngModelChange",function(u){return r.credentials.email=u}),h.qZA(),h.YNc(8,FR,2,0,"p",7),h.YNc(9,LR,2,0,"p",7),h.qZA(),h.TgZ(10,"div",3)(11,"label",4),h._uU(12,"Password"),h.qZA(),h.TgZ(13,"input",8,9),h.NdJ("ngModelChange",function(u){return r.credentials.password=u}),h.qZA(),h.YNc(15,VR,2,0,"p",7),h.qZA(),h.TgZ(16,"button",10),h._uU(17," Submit "),h.qZA()()),2&t){const o=h.MAs(2),u=h.MAs(7),d=h.MAs(14);h.Q6J("ngIf",r.showAlert),h.xp6(6),h.Q6J("ngModel",r.credentials.email)("pattern",r.constatns.emailPattern),h.xp6(2),h.Q6J("ngIf",u.dirty&&(null==u.errors?null:u.errors.required)),h.xp6(1),h.Q6J("ngIf",u.dirty&&(null==u.errors?null:u.errors.required)),h.xp6(4),h.Q6J("ngModel",r.credentials.password),h.xp6(2),h.Q6J("ngIf",d.dirty&&(null==d.errors?null:d.errors.required)),h.xp6(1),h.Q6J("disabled",o.invalid)}},directives:[fn,nM,GT,kT,eb,Wv,nb,xT,HT,QT],styles:[""]}),n})();class BR{static match(e,t,r=""){return o=>{const u=o.get(e),d=o.get(t);return u&&d?(u.value!==d.value&&d.setErrors({noMatch:r}),null):(console.error("Form control can not be found in the form group !!"),{controlNotFound:!1})}}}let ox=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(o=>o.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hl))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var jR=N(655);const rb=new h.OlP("ngx-mask config"),ax=new h.OlP("new ngx-mask config"),ux=new h.OlP("initial ngx-mask config"),$R={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new h.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},HR=["Hh:m0:s0","Hh:m0","m0:s0"],GR=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let lx=(()=>{class n{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,o,u,d)=>{var m,E;let C=[],S="";if(Array.isArray(u)){const Oe=new RegExp(u.map(Le=>"[\\^$.|?*+()".indexOf(Le)>=0?`\\${Le}`:Le).join("|"));C=r.split(Oe),S=null!==(E=null===(m=r.match(Oe))||void 0===m?void 0:m[0])&&void 0!==E?E:""}else C=r.split(u),S=u;const k=C.length>1?`${S}${C[1]}`:"";let V=C[0];const Z=this.separatorLimit.replace(/\s/g,"");Z&&+Z&&(V="-"===V[0]?`-${V.slice(1,V.length).slice(0,Z.length)}`:V.slice(0,Z.length));const oe=/(\d+)(\d{3})/;for(;o&&oe.test(V);)V=V.replace(oe,"$1"+o+"$2");return void 0===d?V+k:0===d?V:V+k.substr(0,d+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const o=r.split(".");return o.length>1?Number(o[o.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var o,u,d;for(let m=(null===(o=this.suffix)||void 0===o?void 0:o.length)-1;m>=0;m--){const E=this.suffix.substr(m,null===(u=this.suffix)||void 0===u?void 0:u.length);if(r.includes(E)&&(m-1<0||!r.includes(this.suffix.substr(m-1,null===(d=this.suffix)||void 0===d?void 0:d.length))))return r.replace(E,"")}return r},this.checkInputPrecision=(r,o,u)=>{if(o<1/0){if(Array.isArray(u)){const E=u.find(C=>C!==this.thousandSeparator);u=E||u[0]}const d=new RegExp(this._charToRegExpExpression(u)+`\\d{${o}}.*$`),m=r.match(d);m&&m[0].length-1>o&&(r=r.substring(0,r.length-(m[0].length-1-o))),0===o&&this._compareOrIncludes(r[r.length-1],u,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[o,u]=r;return this.customPattern=u,this.applyMask(t,o)}applyMask(t,r,o=0,u=!1,d=!1,m=(()=>{})){var E,C;if(!r||"string"!=typeof t)return"";let S=0,k="",V=!1,Z=!1,oe=1,Oe=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const Le=t.toString().split("");"IP"===r&&(this.ipError=Le.filter(ot=>"."===ot).length<3&&Le.length<7,r="099.099.099.099");const At=[];for(let ot=0;ot<t.length;ot++)(null===(E=t[ot])||void 0===E?void 0:E.match("\\d"))&&At.push(t[ot]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==At.length&&14!==At.length,r=At.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const ot=this.getPrecision(r);t=this.checkInputPrecision(t,ot,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),k=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!d?t.slice(1,t.length):t,d&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const ot=this._charToRegExpExpression(this.thousandSeparator);let Et='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(ot,"");if(Array.isArray(this.decimalMarker))for(const bp of this.decimalMarker)Et=Et.replace(this._charToRegExpExpression(bp),"");else Et=Et.replace(this._charToRegExpExpression(this.decimalMarker),"");const oa=new RegExp("["+Et+"]");(t.match(oa)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const XT=this.getPrecision(r),eA=(t=this.checkInputPrecision(t,XT,this.decimalMarker)).replace(new RegExp(ot,"g"),"");k=this._formatWithSeparators(eA,this.thousandSeparator,this.decimalMarker,XT);const tA=k.indexOf(",")-t.indexOf(","),Ip=k.length-t.length;if(Ip>0&&","!==k[o]){Z=!0;let bp=0;do{this._shift.add(o+bp),bp++}while(bp<Ip)}else 0!==tA&&o>0&&!(k.indexOf(",")>=o&&o>3)||!(k.indexOf(".")>=o&&o>3)&&Ip<=0?(this._shift.clear(),Z=!0,oe=Ip,this._shift.add(o+=Ip)):this._shift.clear()}else for(let ot=0,Et=Le[0];ot<Le.length&&S!==r.length;ot++,Et=Le[ot])if(this._checkSymbolMask(Et,r[S])&&"?"===r[S+1])k+=Et,S+=2;else if("*"===r[S+1]&&V&&this._checkSymbolMask(Et,r[S+2]))k+=Et,S+=3,V=!1;else if(this._checkSymbolMask(Et,r[S])&&"*"===r[S+1])k+=Et,V=!0;else if("?"===r[S+1]&&this._checkSymbolMask(Et,r[S+2]))k+=Et,S+=3;else if(this._checkSymbolMask(Et,r[S])){if("H"===r[S]&&Number(Et)>2){S+=1,this._shiftStep(r,S,Le.length),ot--,this.leadZeroDateTime&&(k+="0");continue}if("h"===r[S]&&"2"===k&&Number(Et)>3){S+=1,ot--;continue}if("m"===r[S]&&Number(Et)>5){S+=1,this._shiftStep(r,S,Le.length),ot--,this.leadZeroDateTime&&(k+="0");continue}if("s"===r[S]&&Number(Et)>5){S+=1,this._shiftStep(r,S,Le.length),ot--,this.leadZeroDateTime&&(k+="0");continue}const oa=31;if("d"===r[S]&&(Number(Et)>3&&this.leadZeroDateTime||Number(t.slice(S,S+2))>oa||"/"===t[S+1])){S+=1,this._shiftStep(r,S,Le.length),ot--,this.leadZeroDateTime&&(k+="0");continue}if("M"===r[S]){const eA=0===S&&(Number(Et)>2||Number(t.slice(S,S+2))>12||"/"===t[S+1]),tA=t.slice(S-3,S-1).includes("/")&&("/"===t[S-2]&&Number(t.slice(S-1,S+1))>12&&"/"!==t[S]||"/"===t[S]||"/"===t[S-3]&&Number(t.slice(S-2,S))>12&&"/"!==t[S-1]||"/"===t[S-1]),Ip=Number(t.slice(S-3,S-1))<=oa&&!t.slice(S-3,S-1).includes("/")&&"/"===t[S-1]&&(Number(t.slice(S,S+2))>12||"/"===t[S+1]),bp=Number(t.slice(S-3,S-1))>oa&&!t.slice(S-3,S-1).includes("/")&&!t.slice(S-2,S).includes("/")&&Number(t.slice(S-2,S))>12,gN=Number(t.slice(S-3,S-1))<=oa&&!t.slice(S-3,S-1).includes("/")&&"/"!==t[S-1]&&Number(t.slice(S-1,S+1))>12;if(Number(Et)>1&&this.leadZeroDateTime||eA||tA||Ip||bp||gN){S+=1,this._shiftStep(r,S,Le.length),ot--,this.leadZeroDateTime&&(k+="0");continue}}k+=Et,S++}else" "===Et&&" "===r[S]?(k+=Et,S++):-1!==this.maskSpecialCharacters.indexOf(r[S])?(k+=r[S],S++,this._shiftStep(r,S,Le.length),ot--):this.maskSpecialCharacters.indexOf(Et)>-1&&this.maskAvailablePatterns[r[S]]&&(null===(C=this.maskAvailablePatterns[r[S]])||void 0===C?void 0:C.optional)?(!!Le[S]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&(k+=Le[S]),S++,ot--):"*"===this.maskExpression[S+1]&&this._findSpecialChar(this.maskExpression[S+2])&&this._findSpecialChar(Et)===this.maskExpression[S+2]&&V||"?"===this.maskExpression[S+1]&&this._findSpecialChar(this.maskExpression[S+2])&&this._findSpecialChar(Et)===this.maskExpression[S+2]&&V?(S+=3,k+=Et):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(Et)<0&&Et!==this.placeHolderCharacter&&(Oe=!0);k.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(k+=r[r.length-1]);let kt=o+1;for(;this._shift.has(kt);)oe++,kt++;let Ot=u&&!r.startsWith("separator")?S:this._shift.has(o)?oe:0;Oe&&Ot--,m(Ot,Z),oe<0&&this._shift.clear();let Ct=!1;d&&(Ct=Le.every(ot=>this.maskSpecialCharacters.includes(ot)));let Rt=`${this.prefix}${Ct?"":k}${this.suffix}`;return 0===k.length&&(Rt=`${this.prefix}${k}`),Rt}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,o)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===o&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,o){const u=/[*?]/g.test(t.slice(0,r))?o:r;this._shift.add(u+this.prefix.length||0)}_compareOrIncludes(t,r,o){return Array.isArray(r)?r.filter(u=>u!==o).includes(t):t===r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),cx=(()=>{class n extends lx{constructor(t,r,o,u){super(r),this.document=t,this._config=r,this._elementRef=o,this._renderer=u,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=d=>{}}applyMask(t,r,o=0,u=!1,d=!1,m=(()=>{})){if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const E=t&&"number"==typeof this.selStart?t[this.selStart]:"";let C="";if(this.hiddenInput&&!this.writingValue){let Z=this.actualValue.split("");""!==t&&Z.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>Z.length?Z.splice(this.selStart,0,E):t.length<Z.length&&(Z.length-t.length==1?Z.splice(this.selStart-1,1):Z.splice(this.selStart,this.selEnd-this.selStart))):Z=[],this.showMaskTyped&&(t=this.removeMask(t)),C=this.actualValue.length&&Z.length<=t.length?this.shiftTypedSymbols(Z.join("")):t}C=Boolean(C)&&C.length?C:t;const S=super.applyMask(C,r,o,u,d,m);if(this.actualValue=this.getActualValue(S),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(Z=>!this._compareOrIncludes(Z,this.decimalMarker,this.thousandSeparator))),this.formControlResult(S),!this.showMaskTyped)return this.hiddenInput&&S&&S.length?this.hideInput(S,this.maskExpression):S;const k=S.length,V=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Z=this._numberSkipedSymbols(S);return S+V.slice(k+Z)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?S+V:S+V.slice(k)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let o=r.exec(t),u=0;for(;null!=o;)u+=1,o=r.exec(t);return u}applyValueChanges(t,r,o,u=(()=>{})){const d=this._elementRef.nativeElement;d.value=this.applyMask(d.value,this.maskExpression,t,r,o,u),d!==this._getActiveElement()&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((o,u)=>{var d,m;return this.maskAvailablePatterns&&this.maskAvailablePatterns[r[u]]&&(null===(d=this.maskAvailablePatterns[r[u]])||void 0===d?void 0:d.symbol)?null===(m=this.maskAvailablePatterns[r[u]])||void 0===m?void 0:m.symbol:o}).join("")}getActualValue(t){const r=t.split("").filter((o,u)=>this._checkSymbolMask(o,this.maskExpression[u])||this.maskSpecialCharacters.includes(this.maskExpression[u])&&o===this.maskExpression[u]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((u,d)=>{if(this.maskSpecialCharacters.includes(t[d+1])&&t[d+1]!==this.maskExpression[d+1])return r=u,t[d+1];if(r.length){const m=r;return r="",m}return u})||[]).join("")}numberToString(t){return t||0===t?Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(t)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(o=>this._findSpecialChar(o)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var r;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const o=[];for(let u=0;u<t.length;u++)(null===(r=t[u])||void 0===r?void 0:r.match("\\d"))&&o.push(t[u]);return o.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>3&&o.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>6&&o.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var r;const o=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,u=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return o;const d=[];for(let m=0;m<t.length;m++)(null===(r=t[m])||void 0===r?void 0:r.match("\\d"))&&d.push(t[m]);return d.length<=3?o.slice(d.length,o.length):d.length>3&&d.length<=6?o.slice(d.length+1,o.length):d.length>6&&d.length<=9?o.slice(d.length+2,o.length):d.length>9&&d.length<11?o.slice(d.length+3,o.length):11===d.length?"":12===d.length?u.slice(17===t.length?16:15,u.length):d.length>12&&d.length<=14?u.slice(d.length+4,u.length):""}_getActiveElement(t=this.document){var r;const o=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==o?void 0:o.activeElement)?this._getActiveElement(o):t.activeElement}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let o=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(o=o.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,o):Number(o):o}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(rb),h.LFG(h.SBq),h.LFG(h.Qsj))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),qR=(()=>{class n{constructor(t,r,o){this.document=t,this._maskService=r,this._config=o,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new h.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=u=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:o,patterns:u,prefix:d,suffix:m,thousandSeparator:E,decimalMarker:C,dropSpecialCharacters:S,hiddenInput:k,showMaskTyped:V,placeHolderCharacter:Z,shownMaskExpression:oe,showTemplate:Oe,clearIfNotMatch:Le,validation:At,separatorLimit:kt,allowNegativeNumbers:Ot,leadZeroDateTime:Ct,triggerOnMaskChange:Rt}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((ot,Et)=>ot.length-Et.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),o){if(!o.currentValue||!Array.isArray(o.currentValue))return;this._maskService.maskSpecialCharacters=o.currentValue||[]}u&&u.currentValue&&(this._maskService.maskAvailablePatterns=u.currentValue),d&&(this._maskService.prefix=d.currentValue),m&&(this._maskService.suffix=m.currentValue),E&&(this._maskService.thousandSeparator=E.currentValue),C&&(this._maskService.decimalMarker=C.currentValue),S&&(this._maskService.dropSpecialCharacters=S.currentValue),k&&(this._maskService.hiddenInput=k.currentValue),V&&(this._maskService.showMaskTyped=V.currentValue),Z&&(this._maskService.placeHolderCharacter=Z.currentValue),oe&&(this._maskService.shownMaskExpression=oe.currentValue),Oe&&(this._maskService.showTemplate=Oe.currentValue),Le&&(this._maskService.clearIfNotMatch=Le.currentValue),At&&(this._maskService.validation=At.currentValue),kt&&(this._maskService.separatorLimit=kt.currentValue),Ot&&(this._maskService.allowNegativeNumbers=Ot.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(ot=>"-"!==ot))),Ct&&(this._maskService.leadZeroDateTime=Ct.currentValue),Rt&&(this._maskService.triggerOnMaskChange=Rt.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||GR.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(HR.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const o in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[o].optional&&(this._maskValue.indexOf(o)!==this._maskValue.lastIndexOf(o)?r+=this._maskValue.split("").filter(d=>d===o).join("").length:-1!==this._maskValue.indexOf(o)&&r++,-1!==this._maskValue.indexOf(o)&&t.toString().length>=this._maskValue.indexOf(o)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const o=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<o)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){(""===t||null==t)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const o=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let u=0,d=!1;if(this._maskService.applyValueChanges(o,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(E,C)=>{this._justPasted=!1,u=E,d=C}),this._getActiveElement()!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let m=this._position?this._inputValue.length+o+u:o+("Backspace"!==this._code||d?u:0);m>this._getActualInputLength()&&(m=this._getActualInputLength()),m<0&&(m=0),r.setSelectionRange(m,m),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const d=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==d&&(r.value=d),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const o=t.target;if(this._inputValue=o.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===o.value.length&&(o.selectionStart=o.selectionEnd),8===t.keyCode&&0!==o.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&o.selectionStart<=this.prefix.length)o.setSelectionRange(this.prefix.length,o.selectionEnd);else if(this._inputValue.length!==o.selectionStart&&1!==o.selectionStart)for(;this.specialCharacters.includes(this._inputValue[o.selectionStart-1].toString())&&(this.prefix.length>=1&&o.selectionStart>this.prefix.length||0===this.prefix.length);)o.setSelectionRange(o.selectionStart-1,o.selectionEnd);this.checkSelectionOnDeletion(o),this._maskService.prefix.length&&o.selectionStart<=this._maskService.prefix.length&&o.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const u=o.selectionStart;8===t.keyCode&&!o.readOnly&&0===u&&o.selectionEnd===o.value.length&&0!==o.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<o.selectionStart?o.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(o.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=o.selectionStart,this._maskService.selEnd=o.selectionEnd}writeValue(t){return(0,jR.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),("number"==typeof t||this._maskValue.startsWith("separator"))&&(t=this._maskService.numberToString(t),Array.isArray(this.decimalMarker)||(t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t),this._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){var r;const o=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==o?void 0:o.activeElement)?this._getActiveElement(o):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,o,u)=>{if(this._start="{"===o?u:this._start,"}"!==o)return this._maskService._findSpecialChar(o)?r+o:r;this._end=u;const d=Number(t.slice(this._start+1,this._end));return r+new Array(d+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(o=>":"!==o).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,o;const u=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(o=this._maskService.removeMask(t))||void 0===o?void 0:o.length);if(this._inputValue&&u)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,u;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(le),h.Y36(cx),h.Y36(rb))},n.\u0275dir=h.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&h.NdJ("paste",function(){return r.onPaste()})("ngModelChange",function(u){return r.onModelChange(u)})("input",function(u){return r.onInput(u)})("blur",function(){return r.onBlur()})("click",function(u){return r.onClick(u)})("keydown",function(u){return r.onKeyDown(u)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[h._Bn([{provide:Wa,useExisting:(0,h.Gpc)(()=>n),multi:!0},{provide:Ti,useExisting:(0,h.Gpc)(()=>n),multi:!0},cx]),h.TTD]}),n})();function zR(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}let WR=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:ax,useValue:t},{provide:ux,useValue:$R},{provide:rb,useFactory:zR,deps:[ux,ax]},lx]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const dx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ZR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Field is required !! "),h.qZA())}function KR(n,e){if(1&n&&(h.TgZ(0,"p",3),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.AsE(" The value you inputted is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," characters long. It must be at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," !! ")}}function YR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," You must enter a valid email !! "),h.qZA())}function QR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Value too low !! "),h.qZA())}function JR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Value too high !! "),h.qZA())}function XR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Password must be at least 8 characters, contain at least 1 uppercase letter, 1 lowercase letter, and 1 number, Can contain special characters !! "),h.qZA())}function eN(n,e){if(1&n&&(h.TgZ(0,"p",3),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.hij(" ",null==t.control.errors?null:t.control.errors.noMatch," ")}}function tN(n,e){if(1&n&&(h.ynx(0),h.YNc(1,ZR,2,0,"p",2),h.YNc(2,KR,2,2,"p",2),h.YNc(3,YR,2,0,"p",2),h.YNc(4,QR,2,0,"p",2),h.YNc(5,JR,2,0,"p",2),h.YNc(6,XR,2,0,"p",2),h.YNc(7,eN,2,1,"p",2),h.Hsn(8),h.BQk()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch)}}dx.KeyboardEvent||(dx.KeyboardEvent=function(n,e){});const nN=[[["","validators",""]]],rN=["[validators]"];let iN=(()=>{class n{constructor(){this.control=new bc,this.placeholder="",this.type="text",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",placeholder:"placeholder",type:"type",format:"format"},ngContentSelectors:rN,decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"type","placeholder","formControl","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(h.F$t(nN),h._UZ(0,"input",0),h.YNc(1,tN,9,7,"ng-container",1)),2&t&&(h.Q6J("type",r.type)("placeholder",r.placeholder)("formControl",r.control)("mask",r.format)("dropSpecialCharacters",!1),h.xp6(1),h.Q6J("ngIf",r.control.dirty||r.control.touched))},directives:[Wv,qR,xT,zT,fn],styles:[""]}),n})();function sN(n,e){if(1&n&&(h.TgZ(0,"app-alert",13),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(1),h.Oqu(t.alertMessage)}}function oN(n,e){1&n&&(h.TgZ(0,"p",14),h._uU(1," The email is taken, Please use another email. "),h.qZA())}const aN=function(n,e){return{"opacity-50":n,"hover:bg-indigo-500":e}};let uN=(()=>{class n{constructor(t,r){this.authService=t,this.emailTaken=r,this.showAlert=!1,this.alertMessage="",this.alertColor="orange",this.inSubmission=!1,this.name=new bc("",[bo.required,bo.minLength(3)]),this.email=new bc("",[bo.required,bo.email],[this.emailTaken.validate]),this.age=new bc("",[bo.required,bo.min(18),bo.max(120)]),this.password=new bc("",[bo.required,bo.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/)]),this.confirm_password=new bc("",[bo.required]),this.phoneNumber=new bc("",[bo.required,bo.minLength(15),bo.maxLength(15)]),this.registerForm=new XI({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[BR.match("password","confirm_password","Confirm password doesn't match the entered password \u{1f914}\u{1f914}")])}ngOnInit(){}register(){this.inSubmission=!0,this.showAlert=!0,this.alertMessage="Please wait you account is being created. \u{1f607}";const t=this.registerForm.value.password,r={name:this.registerForm.value.name,email:this.registerForm.value.email,age:+this.registerForm.value.age,phoneNumber:this.registerForm.value.phoneNumber};try{this.authService.createUser(r,t).subscribe({next:o=>{this.alertMessage="Success! Your account has been created. \u{1f44c}\u{1f44c}",this.alertColor="green"},error:o=>{console.error(o),this.alertMessage=o.message,this.alertColor="red",this.inSubmission=!1},complete:()=>{this.inSubmission=!1}})}catch(o){return console.error(o),this.alertMessage=o.message,void(this.alertColor="red")}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($I),h.Y36(ox))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],features:[h._Bn([ox])],decls:30,vars:14,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","text","placeholder","Enter Name",3,"control"],["placeholder","Enter Email",3,"control"],["validators",""],["class","text-red-400",4,"ngIf"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Enter Confirm Password",3,"control"],["type","text","placeholder","Enter phone number","format","(000)0-00000000",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition",3,"ngClass","disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){1&t&&(h.YNc(0,sN,2,2,"app-alert",0),h.TgZ(1,"form",1),h.NdJ("ngSubmit",function(){return r.register()}),h.TgZ(2,"div",2)(3,"label",3),h._uU(4,"Name"),h.qZA(),h._UZ(5,"app-input",4),h.qZA(),h.TgZ(6,"div",2)(7,"label",3),h._uU(8,"Email"),h.qZA(),h.TgZ(9,"app-input",5),h.ynx(10,6),h.YNc(11,oN,2,0,"p",7),h.BQk(),h.qZA()(),h.TgZ(12,"div",2)(13,"label",3),h._uU(14,"Age"),h.qZA(),h._UZ(15,"app-input",8),h.qZA(),h.TgZ(16,"div",2)(17,"label",3),h._uU(18,"Password"),h.qZA(),h._UZ(19,"app-input",9),h.qZA(),h.TgZ(20,"div",2)(21,"label",3),h._uU(22,"Confirm Password"),h.qZA(),h._UZ(23,"app-input",10),h.qZA(),h.TgZ(24,"div",2)(25,"label",3),h._uU(26,"Phone Number"),h.qZA(),h._UZ(27,"app-input",11),h.qZA(),h.TgZ(28,"button",12),h._uU(29," Submit "),h.qZA()()),2&t&&(h.Q6J("ngIf",r.showAlert),h.xp6(1),h.Q6J("formGroup",r.registerForm),h.xp6(4),h.Q6J("control",r.name),h.xp6(4),h.Q6J("control",r.email),h.xp6(2),h.Q6J("ngIf",null==r.email.errors?null:r.email.errors.emailTaken),h.xp6(4),h.Q6J("control",r.age),h.xp6(4),h.Q6J("control",r.password),h.xp6(4),h.Q6J("control",r.confirm_password),h.xp6(4),h.Q6J("control",r.phoneNumber),h.xp6(1),h.Q6J("ngClass",h.WLB(11,aN,r.registerForm.invalid,r.registerForm.valid))("disabled",r.registerForm.invalid||r.inSubmission))},directives:[fn,nM,GT,kT,tb,iN,ei],styles:[""]}),n})(),lN=(()=>{class n{constructor(t){this.modalService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(HI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalId","auth-modal"],["heading","",1,"text-2xl","font-bold"],["title","Login"],["title","Register"]],template:function(t,r){1&t&&(h.TgZ(0,"app-modal",0)(1,"p",1),h._uU(2,"Your Account"),h.qZA(),h.TgZ(3,"app-tabs-container")(4,"app-tab",2),h._UZ(5,"app-login"),h.qZA(),h.TgZ(6,"app-tab",3),h._UZ(7,"app-register"),h.qZA()()())},directives:[Mk,Pk,tM,UR,uN],styles:[""]}),n})();function cN(n,e){1&n&&h._UZ(0,"app-auth-modal")}let dN=(()=>{class n{constructor(t){this.authService=t,this.title="clips"}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($I))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:107,vars:3,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[4,"ngIf"]],template:function(t,r){1&t&&(h._UZ(0,"app-nav"),h.TgZ(1,"section",0)(2,"video",1),h._UZ(3,"source",2),h.qZA(),h._UZ(4,"div",3),h.TgZ(5,"div",4),h._UZ(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5)(10,"div",5),h.qZA(),h.TgZ(11,"div",6)(12,"div",7)(13,"h1",8),h._uU(14,"Clip it and ship it!"),h.qZA(),h.TgZ(15,"p"),h._uU(16," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),h.qZA()()()(),h.TgZ(17,"section",9)(18,"h1",10),h._uU(19,"Latest"),h.qZA(),h.TgZ(20,"div",11)(21,"a",12),h._UZ(22,"img",13),h.TgZ(23,"div",14)(24,"div",15)(25,"div",16),h.O4$(),h.TgZ(26,"svg",17),h._UZ(27,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(28,"div",19)(29,"h2",20),h._uU(30," Game Highlighting Clip "),h.qZA(),h.TgZ(31,"p",21),h._uU(32," Luis Ramirez \xb7 "),h.TgZ(33,"span",22),h._uU(34,"March 31, 2020"),h.qZA()()()(),h.TgZ(35,"a",12),h._UZ(36,"img",23),h.TgZ(37,"div",14)(38,"div",15)(39,"div",16),h.O4$(),h.TgZ(40,"svg",17),h._UZ(41,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(42,"div",19)(43,"h2",20),h._uU(44," Game Highlighting Clip "),h.qZA(),h.TgZ(45,"p",21),h._uU(46," Luis Ramirez \xb7 "),h.TgZ(47,"span",22),h._uU(48,"March 31, 2020"),h.qZA()()()(),h.TgZ(49,"a",12),h._UZ(50,"img",24),h.TgZ(51,"div",14)(52,"div",15)(53,"div",16),h.O4$(),h.TgZ(54,"svg",17),h._UZ(55,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(56,"div",19)(57,"h2",20),h._uU(58," Game Highlighting Clip "),h.qZA(),h.TgZ(59,"p",21),h._uU(60," Luis Ramirez \xb7 "),h.TgZ(61,"span",22),h._uU(62,"March 31, 2020"),h.qZA()()()(),h.TgZ(63,"a",12),h._UZ(64,"img",23),h.TgZ(65,"div",14)(66,"div",15)(67,"div",16),h.O4$(),h.TgZ(68,"svg",17),h._UZ(69,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(70,"div",19)(71,"h2",20),h._uU(72," Game Highlighting Clip "),h.qZA(),h.TgZ(73,"p",21),h._uU(74," Luis Ramirez \xb7 "),h.TgZ(75,"span",22),h._uU(76,"March 31, 2020"),h.qZA()()()(),h.TgZ(77,"a",12),h._UZ(78,"img",24),h.TgZ(79,"div",14)(80,"div",15)(81,"div",16),h.O4$(),h.TgZ(82,"svg",17),h._UZ(83,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(84,"div",19)(85,"h2",20),h._uU(86," Game Highlighting Clip "),h.qZA(),h.TgZ(87,"p",21),h._uU(88," Luis Ramirez \xb7 "),h.TgZ(89,"span",22),h._uU(90,"March 31, 2020"),h.qZA()()()(),h.TgZ(91,"a",12),h._UZ(92,"img",13),h.TgZ(93,"div",14)(94,"div",15)(95,"div",16),h.O4$(),h.TgZ(96,"svg",17),h._UZ(97,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(98,"div",19)(99,"h2",20),h._uU(100," Game Highlighting Clip "),h.qZA(),h.TgZ(101,"p",21),h._uU(102," Luis Ramirez \xb7 "),h.TgZ(103,"span",22),h._uU(104,"March 31, 2020"),h.qZA()()()()()(),h.YNc(105,cN,1,0,"app-auth-modal",25),h.ALo(106,"async")),2&t&&(h.xp6(105),h.Q6J("ngIf",!h.lcZ(106,1,r.authService.isAuthenticatedWithDelay$)))},directives:[Dk,fn,lN],pipes:[Sc],styles:[""]}),n})(),hN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[eu,sx,WR.forRoot()]]}),n})(),fN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[eu,hN,sx,OR]]}),n})();const JT_firebaseConfig={apiKey:"AIzaSyCM2m0Tp1mHtZ366u5F5zI1f5rdnDRnNak",authDomain:"clibs-8ef23.firebaseapp.com",projectId:"clibs-8ef23",storageBucket:"clibs-8ef23.appspot.com",messagingSenderId:"687873988109",appId:"1:687873988109:web:e620587fa5d4c544c82744"};let pN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[dN]}),n.\u0275inj=h.cJS({providers:[],imports:[[ya,ab,fN,Vs.hO.initializeApp(JT_firebaseConfig),df,Ik]]}),n})();(0,h.G48)(),lf.Z.initializeApp(JT_firebaseConfig);let hx=!1;lf.Z.auth().onAuthStateChanged(()=>{hx||au().bootstrapModule(pN).catch(n=>console.error(n)),hx=!0})},5867:(Ke,_e,N)=>{N.d(_e,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=N(9681);(0,h.registerVersion)("firebase","9.8.2","app")},127:(Ke,_e,N)=>{N.d(_e,{Z:()=>h.Z});var h=N(3942);h.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Ke,_e,N)=>{N.r(_e);var h=N(5861),Q=N(3942),O=N(2090),ae=N(9681),ne=N(655),ge=N(1877),le=N(4859);const ke=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new ge.Yd("@firebase/auth");function Ze(y,...f){Ge.logLevel<=ge.in.ERROR&&Ge.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function De(y,...f){throw Ue(y,...f)}function Ee(y,...f){return Ue(y,...f)}function Ie(y,f,g){const v=Object.assign(Object.assign({},Ve()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function Be(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&De(y,"argument-error"),Ie(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return fe.create(y,...f)}function j(y,f,...g){if(!y)throw Ue(f,...g)}function we(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ze(f),new Error(f)}function W(y,f){y||we(f)}const re=new Map;function X(y){W(y instanceof Function,"Expected a class definition");let f=re.get(y);return f?(W(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,re.set(y,f),f)}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===jt()||"https:"===jt()}function jt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Kt{constructor(f,g){this.shortDelay=f,this.longDelay=g,W(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yn(y,f){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Jt{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vr=new Kt(3e4,6e4);function Gt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Pt(y,f,g,v){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(y,f,g,v,T={}){return Kr(y,T,(0,h.Z)(function*(){let R={},z={};v&&("GET"===f?z=v:R={body:JSON.stringify(v)});const de=(0,O.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Jt.fetch()(vs(y,y.config.apiHost,g,de),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Kr(y,f,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},zt),f);try{const T=new Yr(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw ci(y,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const de=R.ok?z.errorMessage:z.error.message,[Fe,Je]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw ci(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Fe)throw ci(y,"email-already-in-use",z);if("USER_DISABLED"===Fe)throw ci(y,"user-disabled",z);const ht=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw Ie(y,ht,Je);De(y,ht)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function wr(y,f,g,v){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(y,f,g,v,T={}){const R=yield Pt(y,f,g,v,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function vs(y,f,g,v){const T=`${f}${g}?${v}`;return y.config.emulator?yn(y.config,T):`${y.config.apiScheme}://${T}`}class Yr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(Ee(this.auth,"network-request-failed")),vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ci(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=Ee(y,f,v);return T.customData._tokenResponse=g,T}function Qr(){return(Qr=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function hn(y,f){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Hs(y,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function jn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Co(){return(Co=(0,h.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),T=it(v);j(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,z=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:jn($t(T.auth_time)),issuedAtTime:jn($t(T.iat)),expirationTime:jn($t(T.exp)),signInProvider:z||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function it(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(g);return T?JSON.parse(T):(Ze("Failed to decode base64 JWT payload"),null)}catch(T){return Ze("Caught error parsing JWT payload as JSON",T),null}}function or(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Vt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Vt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Gs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class ar{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=jn(this.lastLoginAt),this.creationTime=jn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ur(y){return L.apply(this,arguments)}function L(){return(L=(0,h.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),T=yield or(y,Hs(g,{idToken:v}));j(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const z=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?H(R.providerUserInfo):[],de=Ce(y.providerData,z),ht=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==de?void 0:de.length)),ct={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:de,metadata:new ar(R.createdAt,R.lastLoginAt),isAnonymous:ht};Object.assign(y,ct)})).apply(this,arguments)}function q(){return(q=(0,h.Z)(function*(y){const f=(0,O.m9)(y);yield ur(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ce(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function H(y){return y.map(f=>{var{providerId:g}=f,v=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Me(){return(Me=(0,h.Z)(function*(y,f){const g=yield Kr(y,{},(0,h.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,z=vs(y,T,"/v1/token",`key=${R}`),de=yield y._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",Jt.fetch()(z,{method:"POST",headers:de,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(void 0!==f.idToken,"internal-error"),j(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function mt(y){const f=it(y);return j(f,"internal-error"),j(void 0!==f.exp,"internal-error"),j(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,h.Z)(function*(){return j(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:z}=yield function J(y,f){return Me.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(T,R,Number(z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:T,expirationTime:R}=g,z=new Qe;return v&&(j("string"==typeof v,"internal-error",{appName:f}),z.refreshToken=v),T&&(j("string"==typeof T,"internal-error",{appName:f}),z.accessToken=T),R&&(j("number"==typeof R,"internal-error",{appName:f}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return we("not implemented")}}function ft(y,f){j("string"==typeof y||void 0===y,"internal-error",{appName:f})}class _t{constructor(f){var{uid:g,auth:v,stsTokenManager:T}=f,R=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ar(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const v=yield or(g,g.stsTokenManager.getToken(g.auth,f));return j(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function di(y){return Co.apply(this,arguments)}(this,f)}reload(){return function G(y){return q.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new _t(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield ur(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield or(f,function pt(y,f){return Qr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,T,R,z,de,Fe,Je,ht;const ct=null!==(v=g.displayName)&&void 0!==v?v:void 0,In=null!==(T=g.email)&&void 0!==T?T:void 0,oi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Au=null!==(z=g.photoURL)&&void 0!==z?z:void 0,Jh=null!==(de=g.tenantId)&&void 0!==de?de:void 0,tg=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,xa=null!==(Je=g.createdAt)&&void 0!==Je?Je:void 0,Vl=null!==(ht=g.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:Ed,emailVerified:ng,isAnonymous:Sr,providerData:Xh,stsTokenManager:ef}=g;j(Ed&&ef,f,"internal-error");const tf=Qe.fromJSON(this.name,ef);j("string"==typeof Ed,f,"internal-error"),ft(ct,f.name),ft(In,f.name),j("boolean"==typeof ng,f,"internal-error"),j("boolean"==typeof Sr,f,"internal-error"),ft(oi,f.name),ft(Au,f.name),ft(Jh,f.name),ft(tg,f.name),ft(xa,f.name),ft(Vl,f.name);const Ul=new _t({uid:Ed,auth:f,email:In,emailVerified:ng,displayName:ct,isAnonymous:Sr,photoURL:Au,phoneNumber:oi,tenantId:Jh,stsTokenManager:tf,createdAt:xa,lastLoginAt:Vl});return Xh&&Array.isArray(Xh)&&(Ul.providerData=Xh.map(Su=>Object.assign({},Su))),tg&&(Ul._redirectEventId=tg),Ul}static _fromIdTokenResponse(f,g,v=!1){return(0,h.Z)(function*(){const T=new Qe;T.updateFromServerResponse(g);const R=new _t({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield ur(R),R})()}}const yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,h.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,h.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,h.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function Rn(y,f,g){return`firebase:${y}:${f}:${g}`}class Er{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=Rn(this.userKey,T.apiKey,R),this.fullPersistenceKey=Rn("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?_t._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,h.Z)(function*(){if(!g.length)return new Er(X(yt),f,v);const T=(yield Promise.all(g.map(function(){var Je=(0,h.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let R=T[0]||X(yt);const z=Rn(v,f.config.apiKey,f.name);let de=null;for(const Je of g)try{const ht=yield Je._get(z);if(ht){const ct=_t._fromJSON(f,ht);Je!==R&&(de=ct),R=Je;break}}catch(ht){}const Fe=T.filter(Je=>Je._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],de&&(yield R._set(z,de.toJSON())),yield Promise.all(g.map(function(){var Je=(0,h.Z)(function*(ht){if(ht!==R)try{yield ht._remove(z)}catch(ct){}});return function(ht){return Je.apply(this,arguments)}}())),new Er(R,f,v)):new Er(R,f,v)})()}}function Za(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Nn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(aa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Zi(f))return"Blackberry";if(On(f))return"Webos";if(Ka(f))return"Safari";if((f.includes("chrome/")||ua(f))&&!f.includes("edge/"))return"Chrome";if(Ir(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function aa(y=(0,O.z$)()){return/firefox\//i.test(y)}function Ka(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ua(y=(0,O.z$)()){return/crios\//i.test(y)}function Nn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Ir(y=(0,O.z$)()){return/android/i.test(y)}function Zi(y=(0,O.z$)()){return/blackberry/i.test(y)}function On(y=(0,O.z$)()){return/webos/i.test(y)}function Ur(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ws(y=(0,O.z$)()){return Ur(y)||Ir(y)||On(y)||Zi(y)||/windows phone/i.test(y)||Nn(y)}function Do(y,f=[]){let g;switch(y){case"Browser":g=Za((0,O.z$)());break;case"Worker":g=`${Za((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${v}`}class Br{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=R=>new Promise((z,de)=>{try{z(f(R))}catch(Fe){de(Fe)}});v.onAbort=g,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const v=[];try{for(const T of g.queue)yield T(f),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const R of v)try{R()}catch(z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class qe{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yt(this),this.idTokenSubscription=new Yt(this),this.beforeStateQueue=new Br(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=X(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield Er.create(v,f),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var v;const T=yield g.assertedPersistence.getCurrentUser();let R=T,z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const de=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=null==R?void 0:R._redirectEventId,Je=yield g.tryRedirectSignIn(f);(!de||de===Fe)&&(null==Je?void 0:Je.user)&&(R=Je.user,z=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(R)}catch(de){R=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(de))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield ur(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function We(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&j(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,h.Z)(function*(){if(!v._deleted)return f&&j(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,h.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(X(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,h.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&X(f)||g._popupRedirectResolver;j(v,g,"argument-error"),g.redirectPersistenceManager=yield Er.create(g,[X(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,v,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Do(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function at(y){return(0,O.m9)(y)}class Yt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Mi(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class hi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return we("not implemented")}_getIdTokenResponse(f){return we("not implemented")}_linkToIdToken(f,g){return we("not implemented")}_getReauthenticationResolver(f){return we("not implemented")}}function vn(y,f){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:resetPassword",Gt(y,f))})).apply(this,arguments)}function ca(y,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ya(y,f){return Es.apply(this,arguments)}function Es(){return(Es=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",Gt(y,f))})).apply(this,arguments)}function zs(){return(zs=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithPassword",Gt(y,f))})).apply(this,arguments)}function Is(y,f){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendOobCode",Gt(y,f))})).apply(this,arguments)}function Xt(y,f){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function da(y,f){return $r.apply(this,arguments)}function $r(){return($r=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function xi(y,f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function Dc(y,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithEmailLink",Gt(y,f))})).apply(this,arguments)}function Tc(){return(Tc=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithEmailLink",Gt(y,f))})).apply(this,arguments)}class lr extends hi{constructor(f,g,v,T=null){super("password",v),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new lr(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new lr(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function $n(y,f){return zs.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ri(y,f){return nl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:De(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,h.Z)(function*(){switch(v.signInMethod){case"password":return ca(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Cp(y,f){return Tc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:De(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function bs(y,f){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithIdp",Gt(y,f))})).apply(this,arguments)}class Ki extends hi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Ki(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):De("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=g,R=(0,ne._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const z=new Ki(v,T);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(f){return bs(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,bs(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,bs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function Sc(y,f){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendVerificationCode",Gt(y,f))})).apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,f))})).apply(this,arguments)}function xc(){return(xc=(0,h.Z)(function*(y,f){const g=yield wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,f));if(g.temporaryProof)throw ci(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ap={USER_NOT_FOUND:"user-not-found"};function kc(){return(kc=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ap)})).apply(this,arguments)}class To extends hi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new To({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new To({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function rl(y,f){return Cs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Tp(y,f){return xc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Sp(y,f){return kc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}=f;return v||g||T||R?new To({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class Xa{constructor(f){var g,v,T,R,z,de;const Fe=(0,O.zd)((0,O.pd)(f)),Je=null!==(g=Fe.apiKey)&&void 0!==g?g:null,ht=null!==(v=Fe.oobCode)&&void 0!==v?v:null,ct=function Sh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);j(Je&&ht&&ct,"argument-error"),this.apiKey=Je,this.operation=ct,this.code=ht,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Fe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(de=Fe.tenantId)&&void 0!==de?de:null}static parseLink(f){const g=function ha(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new Xa(g)}catch(v){return null}}}let Nc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return lr._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=Xa.parseLink(v);return j(T,"argument-error"),lr._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class cr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ws extends cr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ni extends Ws{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return j("providerId"in g&&"signInMethod"in g,"argument-error"),Ki._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ni.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ni.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:z,providerId:de}=f;if(!v&&!T&&!g&&!R||!de)return null;try{return new Ni(de)._credential({idToken:g,accessToken:v,nonce:z,pendingToken:R})}catch(Fe){return null}}}let Ao=(()=>{class y extends Ws{constructor(){super("facebook.com")}static credential(g){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Oc=(()=>{class y extends Ws{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Mh=(()=>{class y extends Ws{constructor(){super("github.com")}static credential(g){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Zs extends hi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return bs(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,bs(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,bs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:R}=g;return v&&T&&R&&v===T?new Zs(v,R):null}static _create(f,g){return new Zs(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class br extends cr{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return br.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return br.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Zs.fromJSON(f);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Zs._create(v,g)}catch(T){return null}}}let Pc=(()=>{class y extends Ws{constructor(){super("twitter.com")}static credential(g,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Cr(y,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signUp",Gt(y,f))})).apply(this,arguments)}class ti{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,T=!1){return(0,h.Z)(function*(){const R=yield _t._fromIdTokenResponse(f,v,T),z=il(v);return new ti({user:R,providerId:z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=il(v);return new ti({user:f,providerId:T,_tokenResponse:v,operationType:g})})()}}function il(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function sl(){return(sl=(0,h.Z)(function*(y){var f;const g=at(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ti({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Cr(g,{returnSecureToken:!0}),T=yield ti._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class xo extends O.ZR{constructor(f,g,v,T){var R;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,xo.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,T){return new xo(f,g,v,T)}}function ol(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?xo._fromErrorAndOperation(y,R,f,v):R})}function Oi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function en(){return(en=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y);yield Wt(!0,g,f);const{providerUserInfo:v}=yield hn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Oi(v||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function fa(y,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(y,f,g=!1){const v=yield or(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ti._forOperation(y,"link",v)})).apply(this,arguments)}function Wt(y,f,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(y,f,g){yield ur(f);const T=!1===y?"provider-already-linked":"no-such-provider";j(Oi(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function tu(y,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,h.Z)(function*(y,f,g=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield or(y,ol(v,T,f,y),g);j(R.idToken,v,"internal-error");const z=it(R.idToken);j(z,v,"internal-error");const{sub:de}=z;return j(y.uid===de,v,"user-mismatch"),ti._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function Yn(y,f){return al.apply(this,arguments)}function al(){return(al=(0,h.Z)(function*(y,f,g=!1){const v="signIn",T=yield ol(y,v,f),R=yield ti._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function ln(y,f){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,h.Z)(function*(y,f){return Yn(at(y),f)})).apply(this,arguments)}function Qn(y,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y);return yield Wt(!1,g,f.providerId),fa(g,f)})).apply(this,arguments)}function Yi(y,f){return ga.apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(y,f){return tu((0,O.m9)(y),f)})).apply(this,arguments)}function fi(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithCustomToken",Gt(y,f))})).apply(this,arguments)}function gt(){return(gt=(0,h.Z)(function*(y,f){const g=at(y),v=yield fi(g,{token:f,returnSecureToken:!0}),T=yield ti._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ts{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?ul._fromServerResponse(f,g):De(f,"internal-error")}}class ul extends Ts{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new ul(g)}}function ma(y,f,g){var v;j((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),j(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function nu(){return(nu=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&ma(v,T,g),yield da(v,T)})).apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(y,f,g){yield vn((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ae(){return(Ae=(0,h.Z)(function*(y,f){yield Ya((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ft(y,f){return No.apply(this,arguments)}function No(){return(No=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield vn(g,{oobCode:f}),T=v.requestType;switch(j(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(v.mfaInfo,g,"internal-error");default:j(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=Ts._fromServerResponse(at(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function iu(){return(iu=(0,h.Z)(function*(y,f){const{data:g}=yield Ft((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(y,f,g){const v=at(y),T=yield Cr(v,{returnSecureToken:!0,email:f,password:g}),R=yield ti._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};j(g.handleCodeInApp,v,"argument-error"),g&&ma(v,T,g),yield xi(v,T)})).apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=Nc.credentialWithLink(f,g||Ne());return j(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),ln(v,T)})).apply(this,arguments)}function dr(y,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:createAuthUri",Gt(y,f))})).apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(y,f){const v={identifier:f,continueUri:ut()?Ne():"http://localhost"},{signinMethods:T}=yield dr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ma(g.auth,T,f);const{email:R}=yield Xt(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function au(){return(au=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ma(v.auth,R,g);const{email:z}=yield Dc(v.auth,R);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function gl(y,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function lu(){return(lu=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},z=yield or(v,gl(v.auth,R));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const de=v.providerData.find(({providerId:Fe})=>"password"===Fe);de&&(de.displayName=v.displayName,de.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function cu(y,f,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(y,f,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const z=yield or(y,ca(v,R));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Oo{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class jc extends Oo{constructor(f,g,v,T){super(f,g,v),this.username=T}}class du extends Oo{constructor(f,g){super(f,"facebook.com",g)}}class Hr extends jc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class kh extends Oo{constructor(f,g){super(f,"google.com",g)}}class ml extends jc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function Hn(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Bc(y){var f,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const z=null===(g=null===(f=it(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Oo(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new du(R,T);case"github.com":return new Hr(R,T);case"google.com":return new kh(R,T);case"twitter.com":return new ml(R,T,y.screenName||null);case"custom":case"anonymous":return new Oo(R,null);default:return new Oo(R,v,T)}}(g)}class Ji{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Ji("enroll",f)}static _fromMfaPendingCredential(f){return new Ji("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ji._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return Ji._fromIdtoken(f.multiFactorSession.idToken)}return null}}class eo{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=at(f),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(de=>Ts._fromServerResponse(v,de));j(T.mfaPendingCredential,v,"internal-error");const z=Ji._fromMfaPendingCredential(T.mfaPendingCredential);return new eo(z,R,function(){var de=(0,h.Z)(function*(Fe){const Je=yield Fe._process(v,z);delete T.mfaInfo,delete T.mfaPendingCredential;const ht=Object.assign(Object.assign({},T),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(g.operationType){case"signIn":const ct=yield ti._fromIdTokenResponse(v,g.operationType,ht);return yield v._updateCurrentUser(ct.user),ct;case"reauthenticate":return j(g.user,v,"internal-error"),ti._forOperation(g.user,g.operationType,ht);default:De(v,"internal-error")}});return function(Fe){return de.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function Gc(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:start",Gt(y,f))}class Po{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>Ts._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Po(f)}getSession(){var f=this;return(0,h.Z)(function*(){return Ji._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,h.Z)(function*(){const T=f,R=yield v.getSession(),z=yield or(v.user,T._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),R=yield or(g.user,function to(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(y,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const hu=new WeakMap,Xi="__sak";class fu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Xi,"1"),this.storage.removeItem(Xi),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dr=(()=>{class y extends fu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Op(){const y=(0,O.z$)();return Ka(y)||Ur(y)}()&&function Kn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ws(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&g(v,R,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((de,Fe,Je)=>{this.notifyListeners(de,Je)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(T);if(g.newValue!==de)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const R=()=>{const de=this.storage.getItem(T);!v&&this.localCache[T]===de||this.notifyListeners(T,de)},z=this.storage.getItem(T);!function la(){return(0,O.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,R=this;return(0,h.Z)(function*(){yield T().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,h.Z)(function*(){const R=yield v().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,T=this;return(0,h.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),Tn=(()=>{class y extends fu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let qc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,h.Z)(function*(){const T=g,{eventId:R,eventType:z,data:de}=T.data,Fe=v.handlersMap[z];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const Je=Array.from(Fe).map(function(){var ct=(0,h.Z)(function*(In){return In(T.origin,de)});return function(In){return ct.apply(this,arguments)}}()),ht=yield function wa(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Je);T.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:ht})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Fo(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Ss{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var T=this;return(0,h.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,de;return new Promise((Fe,Je)=>{const ht=Fo("",20);R.port1.start();const ct=setTimeout(()=>{Je(new Error("unsupported_event"))},v);de={messageChannel:R,onMessage(In){const oi=In;if(oi.data.eventId===ht)switch(oi.data.status){case"ack":clearTimeout(ct),z=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Fe(oi.data.response);break;default:clearTimeout(ct),clearTimeout(z),Je(new Error("invalid_response"))}}},T.handlers.add(de),R.port1.addEventListener("message",de.onMessage),T.target.postMessage({eventType:f,eventId:ht,data:g},[R.port2])}).finally(()=>{de&&T.removeMessageHandler(de)})})()}}function wn(){return window}function Li(){return void 0!==wn().WorkerGlobalScope&&"function"==typeof wn().importScripts}function zc(){return(zc=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const _l="firebaseLocalStorageDb",xs="firebaseLocalStorage",Lo="fbase_key";class no{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Jn(y,f){return y.transaction([xs],f?"readwrite":"readonly").objectStore(xs)}function io(){const y=indexedDB.open(_l,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(xs,{keyPath:Lo})}catch(T){g(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const v=y.result;v.objectStoreNames.contains(xs)?f(v):(v.close(),yield function ro(){const y=indexedDB.deleteDatabase(_l);return new no(y).toPromise()}(),f(yield io()))}))})}function Vo(y,f,g){return ks.apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(y,f,g){const v=Jn(y,!0).put({[Lo]:f,value:g});return new no(v).toPromise()})).apply(this,arguments)}function Rs(){return(Rs=(0,h.Z)(function*(y,f){const g=Jn(y,!1).get(f),v=yield new no(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function so(y,f){const g=Jn(y,!0).delete(f);return new no(g).toPromise()}const oo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield io()),g.db})()}_withRetries(g){var v=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Li()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=qc._getInstance(function yl(){return Li()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,h.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,h.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function vt(){return zc.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ss(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,h.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Wc(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield io();return yield Vo(g,Xi,"1"),yield so(g,Xi),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,h.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(R=>Vo(R,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,h.Z)(function*(){const T=yield v._withRetries(R=>function Uo(y,f){return Rs.apply(this,arguments)}(R,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,h.Z)(function*(){return v._withPendingWrite((0,h.Z)(function*(){return yield v._withRetries(T=>so(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const v=yield g._withRetries(z=>{const de=Jn(z,!1).getAll();return new no(de).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:z,value:de}of v)R.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(de)&&(g.notifyListeners(z,de),T.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!R.has(z)&&(g.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function qn(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:start",Gt(y,f))}function Fn(){return(Fn=(0,h.Z)(function*(y){return(yield Pt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ao(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const R=Ee("internal-error");R.customData=T,g(R)},v.type="text/javascript",v.charset="UTF-8",function mi(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function ts(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ii=1e12;class En{constructor(f){this.auth=f,this.counter=ii,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new yi(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||ii;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ii))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var v;return null===(v=g._widgets.get(f||ii))||void 0===v||v.execute(),""})()}}class yi{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;j(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pu(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const El=ts("rcb"),pn=new Kt(3e4,6e4);class ny{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wn().grecaptcha}load(f,g=""){return j(function Bo(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(wn().grecaptcha):new Promise((v,T)=>{const R=wn().setTimeout(()=>{T(Ee(f,"network-request-failed"))},pn.get());wn()[El]=()=>{wn().clearTimeout(R),delete wn()[El];const de=wn().grecaptcha;if(!de)return void T(Ee(f,"internal-error"));const Fe=de.render;de.render=(Je,ht)=>{const ct=Fe(Je,ht);return this.counter++,ct},this.hostLanguage=g,v(de)},ao(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:El,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!wn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gr{load(f){return(0,h.Z)(function*(){return new En(f)})()}clearedOneInstance(){}}const Zc="recaptcha",Os={theme:"light",type:"image"};class Kc{constructor(f,g=Object.assign({},Os),v){this.parameters=g,this.type=Zc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(v),this.isInvisible="invisible"===this.parameters.size,j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;j(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gr:new ny,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const z=de=>{!de||(f.tokenChangeListeners.delete(z),R(de))};f.tokenChangeListeners.add(z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=wn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){j(ut()&&!Li(),f.auth,"internal-error"),yield function ns(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ns(y){return Fn.apply(this,arguments)}(f.auth);j(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Il{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=To._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Ia(){return(Ia=(0,h.Z)(function*(y,f,g){const v=at(y),T=yield Ar(v,f,(0,O.m9)(g));return new Il(T,R=>ln(v,R))})).apply(this,arguments)}function Yc(){return(Yc=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield Wt(!1,v,"phone");const T=yield Ar(v.auth,f,(0,O.m9)(g));return new Il(T,R=>Qn(v,R))})).apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=yield Ar(v.auth,f,(0,O.m9)(g));return new Il(T,R=>Yi(v,R))})).apply(this,arguments)}function Ar(y,f,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(y,f,g){var v;const T=yield g.verify();try{let R;if(j("string"==typeof T,y,"argument-error"),j(g.type===Zc,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const z=R.session;if("phoneNumber"in R)return j("enroll"===z.type,y,"internal-error"),(yield Gc(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{j("signin"===z.type,y,"internal-error");const de=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return j(de,y,"missing-multi-factor-info"),(yield qn(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Sc(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return z}}finally{g._reset()}})).apply(this,arguments)}function rs(){return(rs=(0,h.Z)(function*(y,f){yield fa((0,O.m9)(y),f)})).apply(this,arguments)}let Ps=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=at(g)}verifyPhoneNumber(g,v){return Ar(this.auth,g,(0,O.m9)(v))}static credential(g,v){return To._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?To._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function is(y,f){return f?X(f):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class $o extends hi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return bs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return bs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return bs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function St(y){return Yn(y.auth,new $o(y),y.bypassAuthState)}function Qc(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),tu(g,new $o(y),y.bypassAuthState)}function Ho(y){return hr.apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),fa(g,new $o(y),y.bypassAuthState)})).apply(this,arguments)}class Ca{constructor(f,g,v,T,R=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:z,error:de,type:Fe}=f;if(de)return void g.reject(de);const Je={auth:g.auth,requestUri:v,sessionId:T,tenantId:z||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Je))}catch(ht){g.reject(ht)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return St;case"linkViaPopup":case"linkViaRedirect":return Ho;case"reauthViaPopup":case"reauthViaRedirect":return Qc;default:De(this.auth,"internal-error")}}resolve(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Go=new Kt(2e3,1e4);function ss(){return(ss=(0,h.Z)(function*(y,f,g){const v=at(y);Be(y,f,cr);const T=is(v,g);return new Xc(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Be(v.auth,f,cr);const T=is(v.auth,g);return new Xc(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Be(v.auth,f,cr);const T=is(v.auth,g);return new Xc(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let Xc=(()=>{class y extends Ca{constructor(g,v,T,R,z){super(g,v,R,z),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const v=yield g.execute();return j(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,h.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const v=Fo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Go.get())};g()}}return y.currentPopupAction=null,y})();const fr=new Map;class bl extends Ca{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let v=fr.get(g.auth._key());if(!v){try{const R=(yield function Oh(y,f){return Fs.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}fr.set(g.auth._key(),v)}return g.bypassAuthState||fr.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Fs(){return(Fs=(0,h.Z)(function*(y,f){const g=F(f),v=x(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function qo(y,f){return Da.apply(this,arguments)}function Da(){return(Da=(0,h.Z)(function*(y,f){return x(y)._set(F(f),"true")})).apply(this,arguments)}function D(y,f){fr.set(y._key(),f)}function x(y){return X(y._redirectPersistence)}function F(y){return Rn("pendingRedirect",y.config.apiKey,y.name)}function pe(){return(pe=(0,h.Z)(function*(y,f,g){const v=at(y);Be(y,f,cr);const T=is(v,g);return yield qo(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function lt(){return(lt=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Be(v.auth,f,cr);const T=is(v.auth,g);yield qo(T,v.auth);const R=yield pr(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Be(v.auth,f,cr);const T=is(v.auth,g);yield Wt(!1,v,f.providerId),yield qo(T,v.auth);const R=yield pr(v);return T._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function os(){return(os=(0,h.Z)(function*(y,f){return yield at(y)._initializationPromise,Bi(y,f,!1)})).apply(this,arguments)}function Bi(y,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(y,f,g=!1){const v=at(y),T=is(v,f),z=yield new bl(v,T,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,f)),z})).apply(this,arguments)}function pr(y){return as.apply(this,arguments)}function as(){return(as=(0,h.Z)(function*(y){const f=Fo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Cl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function td(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dl(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!Dl(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(Ee(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ed(f))}saveEventToCache(f){this.cachedEventUids.add(ed(f)),this.lastProcessedEventTime=Date.now()}}function ed(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Dl({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ph(y){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,h.Z)(function*(y,f={}){return Pt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const nd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yu=/^https?/;function Lh(){return(Lh=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ph(y);for(const g of f)try{if(Xv(g))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Xv(y){const f=Ne(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===v}if(!yu.test(g))return!1;if(nd.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Fp=new Kt(3e4,6e4);function Vh(){const y=wn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let _u=null;function uo(y){return _u=_u||function Lp(y){return new Promise((f,g)=>{var v,T,R;function z(){Vh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Vh(),g(Ee(y,"network-request-failed"))},timeout:Fp.get()})}if(null===(T=null===(v=wn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=wn().gapi)||void 0===R?void 0:R.load)){const de=ts("iframefcb");return wn()[de]=()=>{gapi.load?z():g(Ee(y,"network-request-failed"))},ao(`https://apis.google.com/js/api.js?onload=${de}`).catch(Fe=>g(Fe))}z()}}).catch(f=>{throw _u=null,f})}(y),_u}const vu=new Kt(5e3,15e3),wu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vp(y){const f=y.config;j(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?yn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},T=Eu.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function lo(){return lo=(0,h.Z)(function*(y){const f=yield uo(y),g=wn().gapi;return j(g,y,"internal-error"),f.open({where:document.body,url:Vp(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wu,dontclear:!0},v=>new Promise(function(){var T=(0,h.Z)(function*(R,z){yield v.restyle({setHideOnLeave:!1});const de=Ee(y,"network-request-failed"),Fe=wn().setTimeout(()=>{z(de)},vu.get());function Je(){wn().clearTimeout(Fe),R(v)}v.ping(Je).then(Je,()=>{z(de)})});return function(R,z){return T.apply(this,arguments)}}()))}),lo.apply(this,arguments)}const id={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Up{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function wi(y,f,g,v,T,R){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:ae.SDK_VERSION,eventId:T};if(f instanceof cr){f.setDefaultLanguage(y.languageCode),z.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Je]of Object.entries(R||{}))z[Fe]=Je}if(f instanceof Ws){const Fe=f.getScopes().filter(Je=>""!==Je);Fe.length>0&&(z.scopes=Fe.join(","))}y.tenantId&&(z.tid=y.tenantId);const de=z;for(const Fe of Object.keys(de))void 0===de[Fe]&&delete de[Fe];return`${function co({config:y}){return y.emulator?yn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(de).slice(1)}`}const Ml="webStorageSupport";class ud extends class t0{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ud(f)}_finalizeEnroll(f,g,v){return function Rp(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function wl(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:finalize",Gt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let n0=(()=>{class y{constructor(){}static assertion(g){return ud._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Bh="@firebase/auth";class $p{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var T;f((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ta(){return window}function ji(){return(ji=(0,h.Z)(function*(y,f,g){var v;const{BuildInfo:T}=Ta();W(f.sessionId,"AuthEvent did not contain a session ID");const R=yield r0(f.sessionId),z={};return Ur()?z.ibi=T.packageName:Ir()?z.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=R,wi(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(y){const{BuildInfo:f}=Ta(),g={};Ur()?g.iosBundleId=f.packageName:Ir()?g.androidPackageName=f.packageName:De(y,"operation-not-supported-in-this-environment"),yield Ph(y,g)})).apply(this,arguments)}function Hp(){return(Hp=(0,h.Z)(function*(y,f,g){const{cordova:v}=Ta();let T=()=>{};try{yield new Promise((R,z)=>{let de=null;function Fe(){var ct;R();const In=null===(ct=v.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof In&&In(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Je(){de||(de=window.setTimeout(()=>{z(Ee(y,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}f.addPassiveListener(Fe),document.addEventListener("resume",Je,!1),Ir()&&document.addEventListener("visibilitychange",ht,!1),T=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",ht,!1),de&&window.clearTimeout(de)}})}finally{T()}})).apply(this,arguments)}function r0(y){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,h.Z)(function*(y){const f=$h(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $h(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function ay(y){(0,ae._registerComponent)(new le.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:R,authDomain:z}=v.options;return((de,Fe)=>{j(R&&!R.includes(":"),"invalid-api-key",{appName:de.name}),j(!(null==z?void 0:z.includes(":")),"argument-error",{appName:de.name});const Je={apiKey:R,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Do(y)},ht=new qe(de,Fe,Je);return function se(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(X);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(ht,g),ht})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new le.wA("auth-internal",f=>{const g=at(f.getProvider("auth").getImmediate());return new $p(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Bh,"0.20.2",function ld(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(Bh,"0.20.2","esm2017")}("Browser");class hd extends Cl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function bu(y){return pd.apply(this,arguments)}function pd(){return(pd=(0,h.Z)(function*(y){const f=yield Nl()._get(Cu(y));return f&&(yield Nl()._remove(Cu(y))),f})).apply(this,arguments)}function qp(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function Nl(){return X(Dr)}function Cu(y){return Rn("authEvent",y.config.apiKey,y.name)}function qr(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Aa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function zo(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Kp(y=(0,O.z$)()){return!("file:"!==zo()&&"ionic:"!==zo()&&"capacitor:"!==zo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function qh(){try{const y=self.localStorage,f=Fo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function md(y=(0,O.z$)()){return function Du(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Wn(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return yd()&&(0,O.hl)()}return!1}function yd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function er(){return(function Zp(){return"http:"===zo()||"https:"===zo()}()||(0,O.ru)()||Kp())&&!function Gh(){return(0,O.b$)()||(0,O.UG)()}()&&qh()&&!yd()}function Tu(){return Kp()&&"undefined"!=typeof document}function Pl(){return(Pl=(0,h.Z)(function*(){return!!Tu()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const zr={LOCAL:"local",NONE:"none",SESSION:"session"},Wo=j,Wh="persistence";function Sa(y){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,h.Z)(function*(y){yield y._initializationPromise;const f=_d(),g=Rn(Wh,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function _d(){var y;try{return(null===(y=function py(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const my=j;class $i{constructor(){this.browserResolver=X(class oy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tn,this._completeRedirectFn=Bi,this._overrideRedirectResult=D}_openPopup(f,g,v,T){var R=this;return(0,h.Z)(function*(){var z;W(null===(z=R.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const de=wi(f,g,v,Ne(),T);return function Sl(y,f,g,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let de="";const Fe=Object.assign(Object.assign({},id),{width:v.toString(),height:T.toString(),top:R,left:z}),Je=(0,O.z$)().toLowerCase();g&&(de=ua(Je)?"_blank":g),aa(Je)&&(f=f||"http://localhost",Fe.scrollbars="yes");const ht=Object.entries(Fe).reduce((In,[oi,Au])=>`${In}${oi}=${Au},`,"");if(function qs(y=(0,O.z$)()){var f;return Ur(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Je)&&"_self"!==de)return function ry(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",de),new Up(null);const ct=window.open(f||"",de,ht);j(ct,y,"popup-blocked");try{ct.focus()}catch(In){}return new Up(ct)}(f,de,Fo())})()}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(f),function Ms(y){wn().location.href=y}(wi(f,g,v,Ne(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(W(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const v=yield function e0(y){return lo.apply(this,arguments)}(f),T=new Cl(f);return v.register("authEvent",R=>(j(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ml,{type:Ml},T=>{var R;const z=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Ml];void 0!==z&&g(!!z),De(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Tl(y){return Lh.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ws()||Ka()||Ur()}}),this.cordovaResolver=X(class zp{constructor(){this._redirectPersistence=Tn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bi,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,h.Z)(function*(){const v=f._key();let T=g.eventManagers.get(v);return T||(T=new hd(f),g.eventManagers.set(v,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){De(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){!function Iu(y){var f,g,v,T,R,z,de,Fe,Je,ht;const ct=Ta();j("function"==typeof(null===(f=null==ct?void 0:ct.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(void 0!==(null===(g=null==ct?void 0:ct.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(R=null===(T=null===(v=null==ct?void 0:ct.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Fe=null===(de=null===(z=null==ct?void 0:ct.cordova)||void 0===z?void 0:z.plugins)||void 0===de?void 0:de.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(ht=null===(Je=null==ct?void 0:ct.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===ht?void 0:ht.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield R._initialize(f);yield z.initialized(),z.resetRedirect(),function b(){fr.clear()}(),yield R._originValidation(f);const de=function fd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:qp(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(f,v,T);yield function Gp(y,f){return Nl()._set(Cu(y),f)}(f,de);const Fe=yield function jh(y,f,g){return ji.apply(this,arguments)}(f,de,g),Je=yield function dd(y){const{cordova:f}=Ta();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function Cc(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Fe);return function ho(y,f,g){return Hp.apply(this,arguments)}(f,z,Je)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function kl(y){return cd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=Ta(),z=setTimeout((0,h.Z)(function*(){yield bu(f),g.onEvent(Aa())}),500),de=function(){var ht=(0,h.Z)(function*(ct){clearTimeout(z);const In=yield bu(f);let oi=null;In&&(null==ct?void 0:ct.url)&&(oi=function ly(y,f){var g,v;const T=function Ol(y){const f=qr(y),g=f.link?decodeURIComponent(f.link):void 0,v=qr(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return qr(T).link||T||v||g||y}(f);if(T.includes("/__/auth/callback")){const R=qr(T),z=R.firebaseError?function cy(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,de=null===(v=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Fe=de?Ee(de):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(In,ct.url)),g.onEvent(oi||Aa())});return function(In){return ht.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,de);const Fe=T,Je=`${R.packageName.toLowerCase()}://`;Ta().handleOpenURL=function(){var ht=(0,h.Z)(function*(ct){if(ct.toLowerCase().startsWith(Je)&&de({url:ct}),"function"==typeof Fe)try{Fe(ct)}catch(In){console.error(In)}});return function(ct){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Tn,this._completeRedirectFn=Bi,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,v,T)})()}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,v,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Tu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return my(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function zh(){return Pl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function vd(y){return y.unwrap()}function _y(y){return Yp(y)}function Yp(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ps.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=Oc;break;case"facebook.com":v=Ao;break;case"github.com":v=Mh;break;case"twitter.com":v=Pc;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:de,nonce:Fe}=f;return R||z||T||de?de?g.startsWith("saml.")?Zs._create(g,de):Ki._fromParams({providerId:g,signInMethod:g,pendingToken:de,idToken:T,accessToken:R}):new Ni(g).credential({idToken:T,accessToken:R,rawNonce:Fe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function si(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function wd(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new vy(y,function Pn(y,f){var g;const v=(0,O.m9)(y),T=f;return j(f.customData.operationType,v,"argument-error"),j(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),eo._fromError(v,T)}(y,f));else if(v){const T=Yp(f),R=f;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:_y(g),additionalUserInfo:Hn(g),user:us.getOrCreate(T)}})}function Kh(y,f){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>si(y,g.confirm(v))}})).apply(this,arguments)}class vy{constructor(f,g){this.resolver=g,this.auth=function yy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return si(vd(this.auth),this.resolver.resolveSignIn(f))}}class us{constructor(f){this._delegate=f,this.multiFactor=function Np(y){const f=(0,O.m9)(y);return hu.has(f)||hu.set(f,Po._fromUser(f)),hu.get(f)}(f)}static getOrCreate(f){return us.USER_MAP.has(f)||us.USER_MAP.set(f,new us(f)),us.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return si(g.auth,Qn(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,h.Z)(function*(){return Kh(v.auth,function gu(y,f,g){return Yc.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return si(g.auth,function Jc(y,f,g){return Ui.apply(this,arguments)}(g._delegate,f,$i))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Sa(at(g.auth)),function Ht(y,f,g){return function It(y,f,g){return Sn.apply(this,arguments)}(y,f,g)}(g._delegate,f,$i)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return si(g.auth,Yi(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Kh(this.auth,function Nh(y,f,g){return Tr.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return si(this.auth,function _i(y,f,g){return mu.apply(this,arguments)}(this._delegate,f,$i))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Sa(at(g.auth)),function Ye(y,f,g){return function nt(y,f,g){return lt.apply(this,arguments)}(y,f,g)}(g._delegate,f,$i)})()}sendEmailVerification(f){return function pi(y,f){return pl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function xh(y,f){return en.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Vc(y,f){return cu((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Uc(y,f){return cu((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function jo(y,f){return rs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function uu(y,f){return lu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function ou(y,f,g){return au.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}us.USER_MAP=new WeakMap;const Ll=j;let Qp=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Ll(T,"invalid-api-key",{appName:g.name}),Ll(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?$i:void 0;this._delegate=v.initialize({options:{persistence:wy(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function jr(y,f,g){const v=at(y);j(v._canInitEmulator,v,"emulator-config-failed"),j(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=Si(f),{host:z,port:de}=function Cn(y){const f=Si(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:Mi(v.substr(R.length+1))}}{const[R,z]=v.split(":");return{host:R,port:Mi(z)}}}(f);v.config.emulator={url:`${R}//${z}${null===de?"":`:${de}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:de,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function on(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function Ro(y,f){return Ae.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ft(this._delegate,g)}confirmPasswordReset(g,v){return function ru(y,f,g){return cl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,h.Z)(function*(){return si(T._delegate,function Qs(y,f,g){return ni.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function su(y,f){return As.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Lc(y,f){const g=Xa.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){Ll(er(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function zn(y,f){return os.apply(this,arguments)}(g._delegate,$i);return v?si(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Wp(y,f){at(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:R,error:z,complete:de}=Jp(g,v,T);return this._delegate.onAuthStateChanged(R,z,de)}onIdTokenChanged(g,v,T){const{next:R,error:z,complete:de}=Jp(g,v,T);return this._delegate.onIdTokenChanged(R,z,de)}sendSignInLinkToEmail(g,v){return function hl(y,f,g){return fl.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function ll(y,f,g){return nu.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,h.Z)(function*(){let T;switch(function gy(y,f){Wo(Object.values(zr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Wo(f!==zr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Wo(f===zr.NONE,y,"unsupported-persistence-type"):yd()?Wo(f===zr.NONE||f===zr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Wo(f===zr.NONE||qh(),y,"unsupported-persistence-type")}(v._delegate,g),g){case zr.SESSION:T=Tn;break;case zr.LOCAL:T=(yield X(oo)._isAvailable())?oo:Dr;break;case zr.NONE:T=yt;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return si(this._delegate,function Fc(y){return sl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return si(this._delegate,ln(this._delegate,g))}signInWithCustomToken(g){return si(this._delegate,function ko(y,f){return gt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return si(this._delegate,function dl(y,f,g){return ln((0,O.m9)(y),Nc.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return si(this._delegate,function Mp(y,f,g){return Qi.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Kh(this._delegate,function An(y,f,g){return Ia.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,h.Z)(function*(){return Ll(er(),v._delegate,"operation-not-supported-in-this-environment"),si(v._delegate,function Pp(y,f,g){return ss.apply(this,arguments)}(v._delegate,g,$i))})()}signInWithRedirect(g){var v=this;return(0,h.Z)(function*(){return Ll(er(),v._delegate,"operation-not-supported-in-this-environment"),yield Sa(v._delegate),function K(y,f,g){return function te(y,f,g){return pe.apply(this,arguments)}(y,f,g)}(v._delegate,g,$i)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function un(y,f){return iu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=zr,y})();function Jp(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const T=v;return{next:z=>T(z&&us.getOrCreate(z)),error:f,complete:g}}function wy(y,f){const g=function Fl(y,f){const g=_d();if(!g)return[];const v=Rn(Wh,y,f);switch(g.getItem(v)){case zr.NONE:return[yt];case zr.LOCAL:return[oo,Tn];case zr.SESSION:return[Tn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(oo)&&g.push(oo),"undefined"!=typeof window)for(const v of[Dr,Tn])g.includes(v)||g.push(v);return g.includes(yt)||g.push(yt),g}class Qh{constructor(){this.providerId="phone",this._delegate=new Ps(vd(Q.Z.auth()))}static credential(f,g){return Ps.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Qh.PHONE_SIGN_IN_METHOD=Ps.PHONE_SIGN_IN_METHOD,Qh.PROVIDER_ID=Ps.PROVIDER_ID;const Xp=j;class s0{constructor(f,g,v=Q.Z.app()){var T;Xp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Kc(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ma(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new Qp(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Nc,FacebookAuthProvider:Ao,GithubAuthProvider:Mh,GoogleAuthProvider:Oc,OAuthProvider:Ni,SAMLAuthProvider:br,PhoneAuthProvider:Qh,PhoneMultiFactorGenerator:n0,RecaptchaVerifier:s0,TwitterAuthProvider:Pc,Auth:Qp,AuthCredential:hi,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(Q.Z)},8306:(Ke,_e,N)=>{N.d(_e,{y:()=>$});var h=N(930),Q=N(727),O=N(8822),ae=N(4671);var le=N(2416),ie=N(576),ce=N(2806);let $=(()=>{class Se{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const fe=new Se;return fe.source=this,fe.operator=Ve,fe}subscribe(Ve,fe,be){const Ge=function He(Se){return Se&&Se instanceof h.Lv||function ee(Se){return Se&&(0,ie.m)(Se.next)&&(0,ie.m)(Se.error)&&(0,ie.m)(Se.complete)}(Se)&&(0,Q.Nn)(Se)}(Ve)?Ve:new h.Hp(Ve,fe,be);return(0,ce.x)(()=>{const{operator:Ze,source:De}=this;Ge.add(Ze?Ze.call(Ge,De):De?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(fe){Ve.error(fe)}}forEach(Ve,fe){return new(fe=B(fe))((be,Ge)=>{const Ze=new h.Hp({next:De=>{try{Ve(De)}catch(Ee){Ge(Ee),Ze.unsubscribe()}},error:Ge,complete:be});this.subscribe(Ze)})}_subscribe(Ve){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Ve)}[O.L](){return this}pipe(...Ve){return function ge(Se){return 0===Se.length?ae.y:1===Se.length?Se[0]:function(Ve){return Se.reduce((fe,be)=>be(fe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=B(Ve))((fe,be)=>{let Ge;this.subscribe(Ze=>Ge=Ze,Ze=>be(Ze),()=>fe(Ge))})}}return Se.create=ke=>new Se(ke),Se})();function B(Se){var ke;return null!==(ke=null!=Se?Se:le.v.Promise)&&void 0!==ke?ke:Promise}},7579:(Ke,_e,N)=>{N.d(_e,{x:()=>le});var h=N(8306),Q=N(727);const ae=(0,N(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=N(8737),ge=N(2806);let le=(()=>{class ce extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const ee=new ie(this,this);return ee.operator=B,ee}_throwIfClosed(){if(this.closed)throw new ae}next(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(B)}})}error(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:ee}=this;for(;ee.length;)ee.shift().error(B)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:ee,isStopped:He,observers:Se}=this;return ee||He?Q.Lc:(this.currentObservers=null,Se.push(B),new Q.w0(()=>{this.currentObservers=null,(0,ne.P)(Se,B)}))}_checkFinalizedStatuses(B){const{hasError:ee,thrownError:He,isStopped:Se}=this;ee?B.error(He):Se&&B.complete()}asObservable(){const B=new h.y;return B.source=this,B}}return ce.create=($,B)=>new ie($,B),ce})();class ie extends le{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,ee;null===(ee=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===ee||ee.call(B,$)}error($){var B,ee;null===(ee=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===ee||ee.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,ee;return null!==(ee=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==ee?ee:Q.Lc}}},930:(Ke,_e,N)=>{N.d(_e,{Hp:()=>Ve,Lv:()=>ee});var h=N(576),Q=N(727),O=N(2416),ae=N(7849),ne=N(5032);const ge=ce("C",void 0,void 0);function ce(De,Ee,Ie){return{kind:De,value:Ee,error:Ie}}var $=N(3410),B=N(2806);class ee extends Q.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,Q.Nn)(Ee)&&Ee.add(this)):this.destination=Ze}static create(Ee,Ie,Be){return new Ve(Ee,Ie,Be)}next(Ee){this.isStopped?Ge(function ie(De){return ce("N",De,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ge(function le(De){return ce("E",void 0,De)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ge(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Se(De,Ee){return He.call(De,Ee)}class ke{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch(Be){fe(Be)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch(Be){fe(Be)}else fe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){fe(Ie)}}}class Ve extends ee{constructor(Ee,Ie,Be){let Ue;if(super(),(0,h.m)(Ee)||!Ee)Ue={next:null!=Ee?Ee:void 0,error:null!=Ie?Ie:void 0,complete:null!=Be?Be:void 0};else{let j;this&&O.v.useDeprecatedNextContext?(j=Object.create(Ee),j.unsubscribe=()=>this.unsubscribe(),Ue={next:Ee.next&&Se(Ee.next,j),error:Ee.error&&Se(Ee.error,j),complete:Ee.complete&&Se(Ee.complete,j)}):Ue=Ee}this.destination=new ke(Ue)}}function fe(De){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(De):(0,ae.h)(De)}function Ge(De,Ee){const{onStoppedNotification:Ie}=O.v;Ie&&$.z.setTimeout(()=>Ie(De,Ee))}const Ze={closed:!0,next:ne.Z,error:function be(De){throw De},complete:ne.Z}},727:(Ke,_e,N)=>{N.d(_e,{Lc:()=>ge,w0:()=>ne,Nn:()=>le});var h=N(576);const O=(0,N(3888).d)(ce=>function(B){ce(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((ee,He)=>`${He+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ae=N(8737);class ne{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Se of B)Se.remove(this);else B.remove(this);const{initialTeardown:ee}=this;if((0,h.m)(ee))try{ee()}catch(Se){$=Se instanceof O?Se.errors:[Se]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Se of He)try{ie(Se)}catch(ke){$=null!=$?$:[],ke instanceof O?$=[...$,...ke.errors]:$.push(ke)}}if($)throw new O($)}}add($){var B;if($&&$!==this)if(this.closed)ie($);else{if($ instanceof ne){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ae.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ae.P)(B,$),$ instanceof ne&&$._removeParent(this)}}ne.EMPTY=(()=>{const ce=new ne;return ce.closed=!0,ce})();const ge=ne.EMPTY;function le(ce){return ce instanceof ne||ce&&"closed"in ce&&(0,h.m)(ce.remove)&&(0,h.m)(ce.add)&&(0,h.m)(ce.unsubscribe)}function ie(ce){(0,h.m)(ce)?ce():ce.unsubscribe()}},2416:(Ke,_e,N)=>{N.d(_e,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ke,_e,N)=>{N.d(_e,{E:()=>Q});const Q=new(N(8306).y)(ne=>ne.complete())},8996:(Ke,_e,N)=>{N.d(_e,{D:()=>Ee});var h=N(8421),Q=N(5363),O=N(9468),ge=N(8306),ie=N(2202),ce=N(576),$=N(9672);function ee(Ie,Be){if(!Ie)throw new Error("Iterable cannot be null");return new ge.y(Ue=>{(0,$.f)(Ue,Be,()=>{const j=Ie[Symbol.asyncIterator]();(0,$.f)(Ue,Be,()=>{j.next().then(we=>{we.done?Ue.complete():Ue.next(we.value)})},0,!0)})})}var He=N(3670),Se=N(8239),ke=N(1144),Ve=N(6495),fe=N(2206),be=N(4532),Ge=N(3260);function Ee(Ie,Be){return Be?function De(Ie,Be){if(null!=Ie){if((0,He.c)(Ie))return function ae(Ie,Be){return(0,h.Xf)(Ie).pipe((0,O.R)(Be),(0,Q.Q)(Be))}(Ie,Be);if((0,ke.z)(Ie))return function le(Ie,Be){return new ge.y(Ue=>{let j=0;return Be.schedule(function(){j===Ie.length?Ue.complete():(Ue.next(Ie[j++]),Ue.closed||this.schedule())})})}(Ie,Be);if((0,Se.t)(Ie))return function ne(Ie,Be){return(0,h.Xf)(Ie).pipe((0,O.R)(Be),(0,Q.Q)(Be))}(Ie,Be);if((0,fe.D)(Ie))return ee(Ie,Be);if((0,Ve.T)(Ie))return function B(Ie,Be){return new ge.y(Ue=>{let j;return(0,$.f)(Ue,Be,()=>{j=Ie[ie.h](),(0,$.f)(Ue,Be,()=>{let we,W;try{({value:we,done:W}=j.next())}catch(re){return void Ue.error(re)}W?Ue.complete():Ue.next(we)},0,!0)}),()=>(0,ce.m)(null==j?void 0:j.return)&&j.return()})}(Ie,Be);if((0,Ge.L)(Ie))return function Ze(Ie,Be){return ee((0,Ge.Q)(Ie),Be)}(Ie,Be)}throw(0,be.z)(Ie)}(Ie,Be):(0,h.Xf)(Ie)}},8421:(Ke,_e,N)=>{N.d(_e,{Xf:()=>He});var h=N(655),Q=N(1144),O=N(8239),ae=N(8306),ne=N(3670),ge=N(2206),le=N(4532),ie=N(6495),ce=N(3260),$=N(576),B=N(7849),ee=N(8822);function He(De){if(De instanceof ae.y)return De;if(null!=De){if((0,ne.c)(De))return function Se(De){return new ae.y(Ee=>{const Ie=De[ee.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Q.z)(De))return function ke(De){return new ae.y(Ee=>{for(let Ie=0;Ie<De.length&&!Ee.closed;Ie++)Ee.next(De[Ie]);Ee.complete()})}(De);if((0,O.t)(De))return function Ve(De){return new ae.y(Ee=>{De.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,B.h)})}(De);if((0,ge.D)(De))return be(De);if((0,ie.T)(De))return function fe(De){return new ae.y(Ee=>{for(const Ie of De)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(De);if((0,ce.L)(De))return function Ge(De){return be((0,ce.Q)(De))}(De)}throw(0,le.z)(De)}function be(De){return new ae.y(Ee=>{(function Ze(De,Ee){var Ie,Be,Ue,j;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,h.KL)(De);!(Be=yield Ie.next()).done;)if(Ee.next(Be.value),Ee.closed)return}catch(we){Ue={error:we}}finally{try{Be&&!Be.done&&(j=Ie.return)&&(yield j.call(Ie))}finally{if(Ue)throw Ue.error}}Ee.complete()})})(De,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(Ke,_e,N)=>{N.d(_e,{T:()=>ge});var h=N(8189),Q=N(8421),O=N(515),ae=N(3269),ne=N(8996);function ge(...le){const ie=(0,ae.yG)(le),ce=(0,ae._6)(le,1/0),$=le;return $.length?1===$.length?(0,Q.Xf)($[0]):(0,h.J)(ce)((0,ne.D)($,ie)):O.E}},5403:(Ke,_e,N)=>{N.d(_e,{x:()=>Q});var h=N(930);function Q(ae,ne,ge,le,ie){return new O(ae,ne,ge,le,ie)}class O extends h.Lv{constructor(ne,ge,le,ie,ce,$){super(ne),this.onFinalize=ce,this.shouldUnsubscribe=$,this._next=ge?function(B){try{ge(B)}catch(ee){ne.error(ee)}}:super._next,this._error=ie?function(B){try{ie(B)}catch(ee){ne.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(B){ne.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(Ke,_e,N)=>{N.d(_e,{U:()=>O});var h=N(4482),Q=N(5403);function O(ae,ne){return(0,h.e)((ge,le)=>{let ie=0;ge.subscribe((0,Q.x)(le,ce=>{le.next(ae.call(ne,ce,ie++))}))})}},8189:(Ke,_e,N)=>{N.d(_e,{J:()=>O});var h=N(5577),Q=N(4671);function O(ae=1/0){return(0,h.z)(Q.y,ae)}},5577:(Ke,_e,N)=>{N.d(_e,{z:()=>ie});var h=N(4004),Q=N(8421),O=N(4482),ae=N(9672),ne=N(5403),le=N(576);function ie(ce,$,B=1/0){return(0,le.m)($)?ie((ee,He)=>(0,h.U)((Se,ke)=>$(ee,Se,He,ke))((0,Q.Xf)(ce(ee,He))),B):("number"==typeof $&&(B=$),(0,O.e)((ee,He)=>function ge(ce,$,B,ee,He,Se,ke,Ve){const fe=[];let be=0,Ge=0,Ze=!1;const De=()=>{Ze&&!fe.length&&!be&&$.complete()},Ee=Be=>be<ee?Ie(Be):fe.push(Be),Ie=Be=>{Se&&$.next(Be),be++;let Ue=!1;(0,Q.Xf)(B(Be,Ge++)).subscribe((0,ne.x)($,j=>{null==He||He(j),Se?Ee(j):$.next(j)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(be--;fe.length&&be<ee;){const j=fe.shift();ke?(0,ae.f)($,ke,()=>Ie(j)):Ie(j)}De()}catch(j){$.error(j)}}))};return ce.subscribe((0,ne.x)($,Ee,()=>{Ze=!0,De()})),()=>{null==Ve||Ve()}}(ee,He,ce,B)))}},5363:(Ke,_e,N)=>{N.d(_e,{Q:()=>ae});var h=N(9672),Q=N(4482),O=N(5403);function ae(ne,ge=0){return(0,Q.e)((le,ie)=>{le.subscribe((0,O.x)(ie,ce=>(0,h.f)(ie,ne,()=>ie.next(ce),ge),()=>(0,h.f)(ie,ne,()=>ie.complete(),ge),ce=>(0,h.f)(ie,ne,()=>ie.error(ce),ge)))})}},3099:(Ke,_e,N)=>{N.d(_e,{B:()=>ge});var h=N(8996),Q=N(5698),O=N(7579),ae=N(930),ne=N(4482);function ge(ie={}){const{connector:ce=(()=>new O.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:ee=!0}=ie;return He=>{let Se=null,ke=null,Ve=null,fe=0,be=!1,Ge=!1;const Ze=()=>{null==ke||ke.unsubscribe(),ke=null},De=()=>{Ze(),Se=Ve=null,be=Ge=!1},Ee=()=>{const Ie=Se;De(),null==Ie||Ie.unsubscribe()};return(0,ne.e)((Ie,Be)=>{fe++,!Ge&&!be&&Ze();const Ue=Ve=null!=Ve?Ve:ce();Be.add(()=>{fe--,0===fe&&!Ge&&!be&&(ke=le(Ee,ee))}),Ue.subscribe(Be),Se||(Se=new ae.Hp({next:j=>Ue.next(j),error:j=>{Ge=!0,Ze(),ke=le(De,$,j),Ue.error(j)},complete:()=>{be=!0,Ze(),ke=le(De,B),Ue.complete()}}),(0,h.D)(Ie).subscribe(Se))})(He)}}function le(ie,ce,...$){return!0===ce?(ie(),null):!1===ce?null:ce(...$).pipe((0,Q.q)(1)).subscribe(()=>ie())}},9468:(Ke,_e,N)=>{N.d(_e,{R:()=>Q});var h=N(4482);function Q(O,ae=0){return(0,h.e)((ne,ge)=>{ge.add(O.schedule(()=>ne.subscribe(ge),ae))})}},5698:(Ke,_e,N)=>{N.d(_e,{q:()=>ae});var h=N(515),Q=N(4482),O=N(5403);function ae(ne){return ne<=0?()=>h.E:(0,Q.e)((ge,le)=>{let ie=0;ge.subscribe((0,O.x)(le,ce=>{++ie<=ne&&(le.next(ce),ne<=ie&&le.complete())}))})}},8505:(Ke,_e,N)=>{N.d(_e,{b:()=>ne});var h=N(576),Q=N(4482),O=N(5403),ae=N(4671);function ne(ge,le,ie){const ce=(0,h.m)(ge)||le||ie?{next:ge,error:le,complete:ie}:ge;return ce?(0,Q.e)(($,B)=>{var ee;null===(ee=ce.subscribe)||void 0===ee||ee.call(ce);let He=!0;$.subscribe((0,O.x)(B,Se=>{var ke;null===(ke=ce.next)||void 0===ke||ke.call(ce,Se),B.next(Se)},()=>{var Se;He=!1,null===(Se=ce.complete)||void 0===Se||Se.call(ce),B.complete()},Se=>{var ke;He=!1,null===(ke=ce.error)||void 0===ke||ke.call(ce,Se),B.error(Se)},()=>{var Se,ke;He&&(null===(Se=ce.unsubscribe)||void 0===Se||Se.call(ce)),null===(ke=ce.finalize)||void 0===ke||ke.call(ce)}))}):ae.y}},4408:(Ke,_e,N)=>{N.d(_e,{o:()=>ne});var h=N(727);class Q extends h.w0{constructor(le,ie){super()}schedule(le,ie=0){return this}}const O={setInterval(ge,le,...ie){const{delegate:ce}=O;return(null==ce?void 0:ce.setInterval)?ce.setInterval(ge,le,...ie):setInterval(ge,le,...ie)},clearInterval(ge){const{delegate:le}=O;return((null==le?void 0:le.clearInterval)||clearInterval)(ge)},delegate:void 0};var ae=N(8737);class ne extends Q{constructor(le,ie){super(le,ie),this.scheduler=le,this.work=ie,this.pending=!1}schedule(le,ie=0){if(this.closed)return this;this.state=le;const ce=this.id,$=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId($,ce,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId($,this.id,ie),this}requestAsyncId(le,ie,ce=0){return O.setInterval(le.flush.bind(le,this),ce)}recycleAsyncId(le,ie,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ie;O.clearInterval(ie)}execute(le,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(le,ie);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ie){let $,ce=!1;try{this.work(le)}catch(B){ce=!0,$=B||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:le,scheduler:ie}=this,{actions:ce}=ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ce,this),null!=le&&(this.id=this.recycleAsyncId(ie,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ke,_e,N)=>{N.d(_e,{v:()=>O});var h=N(6063);class Q{constructor(ne,ge=Q.now){this.schedulerActionCtor=ne,this.now=ge}schedule(ne,ge=0,le){return new this.schedulerActionCtor(this,ne).schedule(le,ge)}}Q.now=h.l.now;class O extends Q{constructor(ne,ge=Q.now){super(ne,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:ge}=this;if(this._active)return void ge.push(ne);let le;this._active=!0;do{if(le=ne.execute(ne.state,ne.delay))break}while(ne=ge.shift());if(this._active=!1,le){for(;ne=ge.shift();)ne.unsubscribe();throw le}}}},4986:(Ke,_e,N)=>{N.d(_e,{P:()=>ae,z:()=>O});var h=N(4408);const O=new(N(7565).v)(h.o),ae=O},6063:(Ke,_e,N)=>{N.d(_e,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Ke,_e,N)=>{N.d(_e,{z:()=>h});const h={setTimeout(Q,O,...ae){const{delegate:ne}=h;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(Q,O,...ae):setTimeout(Q,O,...ae)},clearTimeout(Q){const{delegate:O}=h;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(Ke,_e,N)=>{N.d(_e,{h:()=>Q});const Q=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ke,_e,N)=>{N.d(_e,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ke,_e,N)=>{N.d(_e,{_6:()=>ge,jO:()=>ae,yG:()=>ne});var h=N(576),Q=N(3532);function O(le){return le[le.length-1]}function ae(le){return(0,h.m)(O(le))?le.pop():void 0}function ne(le){return(0,Q.K)(O(le))?le.pop():void 0}function ge(le,ie){return"number"==typeof O(le)?le.pop():ie}},8737:(Ke,_e,N)=>{function h(Q,O){if(Q){const ae=Q.indexOf(O);0<=ae&&Q.splice(ae,1)}}N.d(_e,{P:()=>h})},3888:(Ke,_e,N)=>{function h(Q){const ae=Q(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}N.d(_e,{d:()=>h})},2806:(Ke,_e,N)=>{N.d(_e,{O:()=>ae,x:()=>O});var h=N(2416);let Q=null;function O(ne){if(h.v.useDeprecatedSynchronousErrorHandling){const ge=!Q;if(ge&&(Q={errorThrown:!1,error:null}),ne(),ge){const{errorThrown:le,error:ie}=Q;if(Q=null,le)throw ie}}else ne()}function ae(ne){h.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ne)}},9672:(Ke,_e,N)=>{function h(Q,O,ae,ne=0,ge=!1){const le=O.schedule(function(){ae(),ge?Q.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Q.add(le),!ge)return le}N.d(_e,{f:()=>h})},4671:(Ke,_e,N)=>{function h(Q){return Q}N.d(_e,{y:()=>h})},1144:(Ke,_e,N)=>{N.d(_e,{z:()=>h});const h=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(Ke,_e,N)=>{N.d(_e,{D:()=>Q});var h=N(576);function Q(O){return Symbol.asyncIterator&&(0,h.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(Ke,_e,N)=>{function h(Q){return"function"==typeof Q}N.d(_e,{m:()=>h})},3670:(Ke,_e,N)=>{N.d(_e,{c:()=>O});var h=N(8822),Q=N(576);function O(ae){return(0,Q.m)(ae[h.L])}},6495:(Ke,_e,N)=>{N.d(_e,{T:()=>O});var h=N(2202),Q=N(576);function O(ae){return(0,Q.m)(null==ae?void 0:ae[h.h])}},8239:(Ke,_e,N)=>{N.d(_e,{t:()=>Q});var h=N(576);function Q(O){return(0,h.m)(null==O?void 0:O.then)}},3260:(Ke,_e,N)=>{N.d(_e,{L:()=>ae,Q:()=>O});var h=N(655),Q=N(576);function O(ne){return(0,h.FC)(this,arguments,function*(){const le=ne.getReader();try{for(;;){const{value:ie,done:ce}=yield(0,h.qq)(le.read());if(ce)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ie)}}finally{le.releaseLock()}})}function ae(ne){return(0,Q.m)(null==ne?void 0:ne.getReader)}},3532:(Ke,_e,N)=>{N.d(_e,{K:()=>Q});var h=N(576);function Q(O){return O&&(0,h.m)(O.schedule)}},4482:(Ke,_e,N)=>{N.d(_e,{A:()=>Q,e:()=>O});var h=N(576);function Q(ae){return(0,h.m)(null==ae?void 0:ae.lift)}function O(ae){return ne=>{if(Q(ne))return ne.lift(function(ge){try{return ae(ge,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ke,_e,N)=>{function h(){}N.d(_e,{Z:()=>h})},7849:(Ke,_e,N)=>{N.d(_e,{h:()=>O});var h=N(2416),Q=N(3410);function O(ae){Q.z.setTimeout(()=>{const{onUnhandledError:ne}=h.v;if(!ne)throw ae;ne(ae)})}},4532:(Ke,_e,N)=>{function h(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(_e,{z:()=>h})},655:(Ke,_e,N)=>{function ae(W,re){var X={};for(var me in W)Object.prototype.hasOwnProperty.call(W,me)&&re.indexOf(me)<0&&(X[me]=W[me]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(me=Object.getOwnPropertySymbols(W);se<me.length;se++)re.indexOf(me[se])<0&&Object.prototype.propertyIsEnumerable.call(W,me[se])&&(X[me[se]]=W[me[se]])}return X}function ie(W,re,X,me){return new(X||(X=Promise))(function(Ne,ut){function jt(Kt){try{We(me.next(Kt))}catch(yn){ut(yn)}}function Lt(Kt){try{We(me.throw(Kt))}catch(yn){ut(yn)}}function We(Kt){Kt.done?Ne(Kt.value):function se(Ne){return Ne instanceof X?Ne:new X(function(ut){ut(Ne)})}(Kt.value).then(jt,Lt)}We((me=me.apply(W,re||[])).next())})}function fe(W){return this instanceof fe?(this.v=W,this):new fe(W)}function be(W,re,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,me=X.apply(W,re||[]),Ne=[];return se={},ut("next"),ut("throw"),ut("return"),se[Symbol.asyncIterator]=function(){return this},se;function ut(Jt){me[Jt]&&(se[Jt]=function(zt){return new Promise(function(vr,Gt){Ne.push([Jt,zt,vr,Gt])>1||jt(Jt,zt)})})}function jt(Jt,zt){try{!function Lt(Jt){Jt.value instanceof fe?Promise.resolve(Jt.value.v).then(We,Kt):yn(Ne[0][2],Jt)}(me[Jt](zt))}catch(vr){yn(Ne[0][3],vr)}}function We(Jt){jt("next",Jt)}function Kt(Jt){jt("throw",Jt)}function yn(Jt,zt){Jt(zt),Ne.shift(),Ne.length&&jt(Ne[0][0],Ne[0][1])}}function Ze(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,re=W[Symbol.asyncIterator];return re?re.call(W):(W=function ee(W){var re="function"==typeof Symbol&&Symbol.iterator,X=re&&W[re],me=0;if(X)return X.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&me>=W.length&&(W=void 0),{value:W&&W[me++],done:!W}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),X={},me("next"),me("throw"),me("return"),X[Symbol.asyncIterator]=function(){return this},X);function me(Ne){X[Ne]=W[Ne]&&function(ut){return new Promise(function(jt,Lt){!function se(Ne,ut,jt,Lt){Promise.resolve(Lt).then(function(We){Ne({value:We,done:jt})},ut)}(jt,Lt,(ut=W[Ne](ut)).done,ut.value)})}}}N.d(_e,{FC:()=>be,KL:()=>Ze,_T:()=>ae,mG:()=>ie,qq:()=>fe})},5e3:(Ke,_e,N)=>{N.d(_e,{$8M:()=>ao,$Z:()=>I_,AFp:()=>Ev,ALo:()=>PE,AaK:()=>ie,AsE:()=>Bd,BQk:()=>Fd,CHM:()=>No,CRH:()=>HE,CZH:()=>rp,CqO:()=>Ew,EJc:()=>tD,EpF:()=>Pg,F$t:()=>Iw,F4k:()=>D_,FYo:()=>Q_,FiY:()=>pr,G48:()=>Pm,GfV:()=>CE,Gpc:()=>B,Hsn:()=>bw,JOm:()=>R,LFG:()=>nt,LSH:()=>Aa,Lbi:()=>ip,MAs:()=>Cg,NdJ:()=>La,O4$:()=>$c,OlP:()=>pn,Oqu:()=>Gg,PXZ:()=>iD,Q6J:()=>Ng,QGY:()=>Fa,Qsj:()=>J_,R0b:()=>Di,RDi:()=>ol,Rgc:()=>oh,SBq:()=>li,Sil:()=>nD,Suo:()=>cv,TTD:()=>Ni,TgZ:()=>Af,VKq:()=>ih,VLi:()=>mc,W1O:()=>WE,WLB:()=>Zu,X6Q:()=>op,XFs:()=>pt,Xpm:()=>ft,Y36:()=>Od,YKP:()=>nh,YNc:()=>bg,Yjl:()=>ua,Yz7:()=>zt,ZZ4:()=>vc,_Bn:()=>Z_,_UZ:()=>Yl,_Vd:()=>Xd,_c5:()=>yD,_uU:()=>Pf,aQg:()=>lp,c2e:()=>rI,cJS:()=>Gt,cg1:()=>bt,dDg:()=>Ga,deG:()=>Rh,dqk:()=>Vt,eFA:()=>hI,ekj:()=>Rf,g9A:()=>Cm,h0i:()=>hc,hGG:()=>_D,hij:()=>Ud,iGM:()=>lv,ifc:()=>$t,ip1:()=>Im,kL8:()=>ze,kcU:()=>xp,lG2:()=>Ka,lcZ:()=>sh,n5z:()=>Fn,n_E:()=>Kf,oAB:()=>Er,oxw:()=>gn,q4F:()=>ev,qLn:()=>wd,qOj:()=>yf,qZA:()=>Kl,sBO:()=>_I,sIi:()=>Oa,s_b:()=>lm,soG:()=>Iv,tBr:()=>vi,tb:()=>Xu,tp0:()=>Ls,uIk:()=>Eg,vHH:()=>ke,vpe:()=>gs,wAp:()=>Xe,xp6:()=>D0,ynx:()=>Og,z2F:()=>km,zSh:()=>Hl,zs3:()=>cs});var h=N(7579),Q=N(727),O=N(8306),ae=N(6451),ne=N(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ie(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ie).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ge({__forward_ref__:ge});function B(i){return i.__forward_ref__=B,i.toString=function(){return ie(this())},i}function ee(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}class ke extends Error{constructor(s,a){super(function Ve(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function Ee(i,s){const a=s?` in ${s}`:"";throw new ke(-201,`No provider for ${be(i)} found${a}`)}function Lt(i,s){null==i&&function We(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Gt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pt(i){return Wi(i,Ai)||Wi(i,Yr)}function Wi(i,s){return i.hasOwnProperty(s)?i[s]:null}function wr(i){return i&&(i.hasOwnProperty(vs)||i.hasOwnProperty(ci))?i[vs]:null}const Ai=ge({\u0275prov:ge}),vs=ge({\u0275inj:ge}),Yr=ge({ngInjectableDef:ge}),ci=ge({ngInjectorDef:ge});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Qr;function _n(i){const s=Qr;return Qr=i,s}function Hs(i,s,a){const l=Pt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&pt.Optional?null:void 0!==s?s:void Ee(ie(i),"Injector")}function jn(i){return{toString:i}.toString()}var bn=(()=>((bn=bn||{})[bn.OnPush=0]="OnPush",bn[bn.Default=1]="Default",bn))(),$t=(()=>{return(i=$t||($t={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",$t;var i})();const it="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=it||"undefined"!=typeof global&&global||mt||or,ur={},L=[],G=ge({\u0275cmp:ge}),q=ge({\u0275dir:ge}),Ce=ge({\u0275pipe:ge}),H=ge({\u0275mod:ge}),J=ge({\u0275fac:ge}),Me=ge({__NG_ELEMENT_ID__:ge});let Qe=0;function ft(i){return jn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||$t.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Qe++,l.inputs=aa(i.inputs,a),l.outputs=aa(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(sn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(yt):null,l})}function sn(i){return Nn(i)||function Ir(i){return i[q]||null}(i)}function yt(i){return function Zi(i){return i[Ce]||null}(i)}const Rn={};function Er(i){return jn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Rn[i.id]=i.type),s})}function aa(i,s){if(null==i)return ur;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const Ka=ft;function ua(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Nn(i){return i[G]||null}function On(i,s){const a=i[H]||null;if(!a&&!0===s)throw new Error(`Type ${ie(i)} does not have '\u0275mod' property.`);return a}function $r(i){return Array.isArray(i)&&"object"==typeof i[1]}function xi(i){return Array.isArray(i)&&!0===i[1]}function Ja(i){return 0!=(8&i.flags)}function Dc(i){return 2==(2&i.flags)}function ki(i){return 1==(1&i.flags)}function Ri(i){return null!==i.template}function nl(i){return 0!=(512&i[2])}function cr(i,s){return i.hasOwnProperty(J)?i[J]:null}class Ws{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ni(){return Ao}function Ao(i){return i.type.prototype.ngOnChanges&&(i.setInput=Mh),Oc}function Oc(){const i=Zs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ur)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Mh(i,s,a,l){const c=Zs(i)||function So(i,s){return i[eu]=s}(i,{previous:ur,current:null}),p=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],I=_[w];p[w]=new Ws(I&&I.currentValue,s,_===ur),i[l]=s}Ni.ngInherit=!0;const eu="__ngSimpleChanges__";function Zs(i){return i[eu]||null}let xo;function ol(i){xo=i}function en(i){return!!i.listen}const fa={createRenderer:(i,s)=>function Oi(){return void 0!==xo?xo:"undefined"!=typeof document?document:void 0}()};function Wt(i){for(;Array.isArray(i);)i=i[0];return i}function Ds(i,s){return Wt(s[i])}function Yn(i,s){return Wt(s[i.index])}function ln(i,s){return i.data[s]}function Pi(i,s){return i[s]}function Qn(i,s){const a=s[i];return $r(a)?a:a[0]}function Ys(i){return 4==(4&i[2])}function Yi(i){return 128==(128&i[2])}function fi(i,s){return null==s?null:i[s]}function Fi(i){i[18]=0}function ko(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const gt={lFrame:Oo(null),bindingsEnabled:!0};function ru(){return gt.bindingsEnabled}function Ae(){return gt.lFrame.lView}function Ft(){return gt.lFrame.tView}function No(i){return gt.lFrame.contextLView=i,i[8]}function un(){let i=iu();for(;null!==i&&64===i.type;)i=i.parent;return i}function iu(){return gt.lFrame.currentTNode}function ni(i,s){const a=gt.lFrame;a.currentTNode=i,a.isParent=s}function dl(){return gt.lFrame.isParent}function hl(){gt.lFrame.isParent=!1}function dr(){const i=gt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function As(){return gt.lFrame.bindingIndex++}function pi(i){const s=gt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function au(i,s){const a=gt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ya(s)}function ya(i){gt.lFrame.currentDirectiveIndex=i}function lu(){return gt.lFrame.currentQueryIndex}function Vc(i){gt.lFrame.currentQueryIndex=i}function Uc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function cu(i,s,a){if(a&pt.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&pt.Host||(c=Uc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=gt.lFrame=Bc();return l.currentTNode=s,l.lView=i,!0}function Js(i){const s=Bc(),a=i[1];gt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Bc(){const i=gt.lFrame,s=null===i?null:i.child;return null===s?Oo(i):s}function Oo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function jc(){const i=gt.lFrame;return gt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const du=jc;function Hr(){const i=jc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Hn(){return gt.lFrame.selectedIndex}function Xs(i){gt.lFrame.selectedIndex=i}function Dn(){const i=gt.lFrame;return ln(i.tView,i.selectedIndex)}function $c(){gt.lFrame.currentNamespace="svg"}function xp(){!function Hc(){gt.lFrame.currentNamespace=null}()}function _a(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ji(i,s,a){Gc(i,s,3,a)}function eo(i,s,a,l){(3&i[2])===a&&Gc(i,s,a,l)}function Pn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Gc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=l&&w>=l)break}else s[I]<0&&(i[18]+=65536),(w<p||-1==p)&&(Rp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Rp(i,s,a,l){const c=a[l]<0,p=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Po{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Dr(i,s,a){const l=en(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],w=a[c++],I=a[c++];l?i.setAttribute(s,w,I,_):s.setAttributeNS(_,w,I)}else{const _=p,w=a[++c];Tn(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function gi(i){return 3===i||4===i||6===i}function Tn(i){return 64===i.charCodeAt(0)}function wa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||qc(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function qc(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function Fo(i){return-1!==i}function Ss(i){return 32767&i}function Ms(i,s){let a=function wn(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Li=!0;function vt(i){const s=Li;return Li=i,s}let _l=0;function xs(i,s){const a=no(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Lo(l.data,i),Lo(s,null),Lo(l.blueprint,null));const c=Jn(i,s),p=i.injectorIndex;if(Fo(c)){const _=Ss(c),w=Ms(c,s),I=w[1].data;for(let A=0;A<8;A++)s[p+A]=w[_+A]|I[_+A]}return s[p+8]=c,p}function Lo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function no(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Jn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ro(i,s,a){!function Gn(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Me)&&(l=a[Me]),null==l&&(l=a[Me]=_l++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Vo(i,s,a){if(a&pt.Optional)return i;Ee(s,"NodeInjector")}function ks(i,s,a,l){if(a&pt.Optional&&void 0===l&&(l=null),0==(a&(pt.Self|pt.Host))){const c=i[9],p=_n(void 0);try{return c?c.get(s,l,a&pt.Optional):Hs(s,l,a&pt.Optional)}finally{_n(p)}}return Vo(l,s,a)}function Uo(i,s,a,l=pt.Default,c){if(null!==i){const p=function oo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Me)?i[Me]:void 0;return"number"==typeof s?s>=0?255&s:so:s}(a);if("function"==typeof p){if(!cu(s,i,l))return l&pt.Host?Vo(c,a,l):ks(s,a,l,c);try{const _=p(l);if(null!=_||l&pt.Optional)return _;Ee(a)}finally{du()}}else if("number"==typeof p){let _=null,w=no(i,s),I=-1,A=l&pt.Host?s[16][6]:null;for((-1===w||l&pt.SkipSelf)&&(I=-1===w?Jn(i,s):s[w+8],-1!==I&&wl(l,!1)?(_=s[1],w=Ss(I),s=Ms(I,s)):w=-1);-1!==w;){const M=s[1];if(qn(p,w,M.data)){const P=vl(w,s,a,_,l,A);if(P!==Rs)return P}I=s[w+8],-1!==I&&wl(l,s[1].data[w+8]===A)&&qn(p,w,s)?(_=M,w=Ss(I),s=Ms(I,s)):w=-1}}}return ks(s,a,l,c)}const Rs={};function so(){return new Ns(un(),Ae())}function vl(i,s,a,l,c,p){const _=s[1],w=_.data[i+8],M=Ea(w,_,a,null==l?Dc(w)&&Li:l!=_&&0!=(3&w.type),c&pt.Host&&p===w);return null!==M?es(s,_,M,w):Rs}function Ea(i,s,a,l,c){const p=i.providerIndexes,_=s.data,w=1048575&p,I=i.directiveStart,M=p>>20,U=c?w+M:i.directiveEnd;for(let Y=l?w:w+M;Y<U;Y++){const ye=_[Y];if(Y<I&&a===ye||Y>=I&&ye.type===a)return Y}if(c){const Y=_[I];if(Y&&Ri(Y)&&Y.type===a)return I}return null}function es(i,s,a,l){let c=i[a];const p=s.data;if(function hu(i){return i instanceof Po}(c)){const _=c;_.resolving&&function Ge(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ke(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(p[a]));const w=vt(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?_n(_.injectImpl):null;cu(i,l,pt.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function ty(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=Ao(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&_n(I),vt(w),_.resolving=!1,du()}}return c}function qn(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function wl(i,s){return!(i&pt.Self||i&pt.Host&&s)}class Ns{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Uo(this._tNode,this._lView,s,l,a)}}function Fn(i){return jn(()=>{const s=i.prototype.constructor,a=s[J]||mi(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[J]||mi(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function mi(i){return He(i)?()=>{const s=mi(ee(i));return s&&s()}:cr(i)}function ao(i){return function io(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(gi(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(un(),i)}const Vi="__parameters__";function yi(i,s,a){return jn(()=>{const l=function En(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return w.annotation=_,w;function w(I,A,M){const P=I.hasOwnProperty(Vi)?I[Vi]:Object.defineProperty(I,Vi,{value:[]})[Vi];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rh=new pn("AnalyzeForEntryComponents");function Tr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Tr(l,s)):s!==i&&s.push(l)}return s}function Ar(i,s){i.forEach(a=>Array.isArray(a)?Ar(a,s):s(a))}function ba(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function jo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function rs(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}function hr(i,s,a){let l=Go(i,s);return l>=0?i[1|l]=a:(l=~l,function $o(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Ca(i,s){const a=Go(i,s);if(a>=0)return i[1|a]}function Go(i,s){return function ss(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const Fs={},qo="__NG_DI_FLAG__",Da="ngTempTokenPath",D=/\n/gm,F="__source",K=ge({provide:String,useValue:ge});let te;function pe(i){const s=te;return te=i,s}function Ye(i,s=pt.Default){if(void 0===te)throw new ke(203,"");return null===te?Hs(i,void 0,s):te.get(i,s&pt.Optional?null:void 0,s)}function nt(i,s=pt.Default){return(function hn(){return Qr}()||Ye)(ee(i),s)}const Ht=nt;function It(i){const s=[];for(let a=0;a<i.length;a++){const l=ee(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let c,p=pt.Default;for(let _=0;_<l.length;_++){const w=l[_],I=zn(w);"number"==typeof I?-1===I?c=w.token:p|=I:c=w}s.push(nt(c,p))}else s.push(nt(l))}return s}function Sn(i,s){return i[qo]=s,i.prototype[qo]=s,i}function zn(i){return i[qo]}const vi=Sn(yi("Inject",i=>({token:i})),-1),pr=Sn(yi("Optional"),8),Ls=Sn(yi("SkipSelf"),4);class ad{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wi(i){return i instanceof ad?i.changingThisBreaksApplicationSecurity:i}const ay=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ta=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Mn=(()=>((Mn=Mn||{})[Mn.NONE=0]="NONE",Mn[Mn.HTML=1]="HTML",Mn[Mn.STYLE=2]="STYLE",Mn[Mn.SCRIPT=3]="SCRIPT",Mn[Mn.URL=4]="URL",Mn[Mn.RESOURCE_URL=5]="RESOURCE_URL",Mn))();function Aa(i){const s=function Du(){const i=Ae();return i&&i[12]}();return s?s.sanitize(Mn.URL,i)||"":function co(i,s){const a=function Ml(i){return i instanceof ad&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?wi(i):function xl(i){return(i=String(i)).match(ay)||i.match(Ta)?i:"unsafe:"+i}(fe(i))}const yd="__ngContext__";function er(i,s){i[yd]=s}function zh(i){const s=function Tu(i){return i[yd]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function vd(i){return i.ngOriginalError}function _y(i,...s){i.error(...s)}class wd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function yy(i){return i&&i.ngErrorLogger||_y}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&vd(s);for(;a&&vd(a);)a=vd(a);return a||null}}const Qh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function y(i){return i instanceof Function?i():i}var R=(()=>((R=R||{})[R.Important=1]="Important",R[R.DashCase=2]="DashCase",R))();function de(i,s){return undefined(i,s)}function ht(i){const s=i[3];return xi(s)?s[3]:s}function oi(i){return Jh(i[13])}function Au(i){return Jh(i[4])}function Jh(i){for(;null!==i&&!xi(i);)i=i[4];return i}function xa(i,s,a,l,c){if(null!=l){let p,_=!1;xi(l)?p=l:$r(l)&&(_=!0,l=l[0]);const w=Wt(l);0===i&&null!==a?null==c?l0(s,a,w):xu(s,a,w,c||null,!0):1===i&&null!==a?xu(s,a,w,c||null,!0):2===i?function m0(i,s,a){const l=sg(i,s);l&&function d0(i,s,a,l){en(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=p&&function Cy(i,s,a,l,c){const p=a[7];p!==Wt(a)&&xa(s,i,l,p,c);for(let w=10;w<a.length;w++){const I=a[w];nf(I[1],I,i,s,l,p)}}(s,i,p,a,c)}}function Sr(i,s,a){if(en(i))return i.createElement(s,a);{const l=null!==a?function sl(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function o0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,ko(c,-1)),a.splice(l,1)}function rg(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&o0(c,l),s>0&&(i[a-1][4]=l[4]);const p=jo(i,10+s);!function Xh(i,s){nf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function a0(i,s){if(!(256&s[2])){const a=s[11];en(a)&&a.destroyNode&&nf(i,s,a,3,null,null),function Ul(i){let s=i[13];if(!s)return ig(i[1],i);for(;s;){let a=null;if($r(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)$r(s)&&ig(s[1],s),s=s[3];null===s&&(s=i),$r(s)&&ig(s[1],s),a=s&&s[4]}s=a}}(s)}}function ig(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Ey(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Po)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=c[p[_]],I=p[_+1];try{I.call(w)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function u0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(s):Wt(s[_]),I=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?w.removeEventListener(a[p],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&en(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&xi(s[3])){a!==s[3]&&o0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function sb(i,s,a){return function Mu(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===$t.None||c===$t.Emulated)return null}return Yn(l,a)}(i,s.parent,a)}function xu(i,s,a,l,c){en(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function l0(i,s,a){en(i)?i.appendChild(s,a):s.appendChild(a)}function c0(i,s,a,l,c){null!==l?xu(i,s,a,l,c):l0(i,s,a)}function sg(i,s){return en(i)?i.parentNode(s):s.parentNode}function h0(i,s,a){return f0(i,s,a)}let f0=function Iy(i,s,a){return 40&i.type?Yn(i,a):null};function Id(i,s,a,l){const c=sb(i,l,s),p=s[11],w=h0(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)c0(p,c,a[I],w,!1);else c0(p,c,a,w,!1)}function og(i,s){if(null!==s){const a=s.type;if(3&a)return Yn(s,i);if(4&a)return ag(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return og(i,l);{const c=i[s.index];return xi(c)?ag(-1,c):Wt(c)}}if(32&a)return de(s,i)()||Wt(i[s.index]);{const l=g0(i,s);return null!==l?Array.isArray(l)?l[0]:og(ht(i[16]),l):og(i,s.next)}}return null}function g0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ag(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return og(l,c)}return s[7]}function y0(i,s,a,l,c,p,_){for(;null!=a;){const w=l[a.index],I=a.type;if(_&&0===s&&(w&&er(Wt(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)y0(i,s,a.child,l,c,p,!1),xa(s,i,c,w,p);else if(32&I){const A=de(a,l);let M;for(;M=A();)xa(s,i,c,M,p);xa(s,i,c,w,p)}else 16&I?ve(i,s,l,a,c,p):xa(s,i,c,w,p);a=_?a.projectionNext:a.next}}function nf(i,s,a,l,c,p){y0(a,l,i.firstChild,s,c,p,!1)}function ve(i,s,a,l,c,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)xa(s,i,c,I[A],p);else y0(i,s,I,_[3],c,p,!0)}function _0(i,s,a){en(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Dy(i,s,a){en(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Ty(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const v0="ng-template";function lb(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==Ty(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function w0(i){return 4===i.type&&i.value!==v0}function cb(i,s,a){return s===(4!==i.type||a?i.value:v0)}function ug(i,s,a){let l=4;const c=i.attrs||[],p=function b0(i){for(let s=0;s<i.length;s++)if(gi(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!cb(i,I,a)||""===I&&1===s.length){if(fo(l))return!1;_=!0}}else{const A=8&l?I:s[++w];if(8&l&&null!==i.attrs){if(!lb(i.attrs,A,a)){if(fo(l))return!1;_=!0}continue}const P=db(8&l?"class":I,c,w0(i),a);if(-1===P){if(fo(l))return!1;_=!0;continue}if(""!==A){let U;U=P>p?"":c[P+1].toLowerCase();const Y=8&l?U:null;if(Y&&-1!==Ty(Y,A,0)||2&l&&A!==U){if(fo(l))return!1;_=!0}}}}else{if(!_&&!fo(l)&&!fo(I))return!1;if(_&&fo(I))continue;_=!1,l=I|1&l}}return fo(l)||_}function fo(i){return 0==(1&i)}function db(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function Ay(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function E0(i,s,a=!1){for(let l=0;l<s.length;l++)if(ug(i,s[l],a))return!0;return!1}function Mr(i,s){e:for(let a=0;a<s.length;a++){const l=s[a];if(i.length===l.length){for(let c=0;c<i.length;c++)if(i[c]!==l[c])continue e;return!0}}return!1}function Vs(i,s){return i?":not("+s.trim()+")":s}function C0(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!fo(_)&&(s+=Vs(p,c),c=""),l=_,p=p||!fo(l);a++}return""!==c&&(s+=Vs(p,c)),s}const Mt={};function D0(i){cg(Ft(),Ae(),Hn()+i,!1)}function cg(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ji(s,p,a)}else{const p=i.preOrderHooks;null!==p&&eo(s,p,0,a)}Xs(a)}function Sy(i,s){return i<<17|s<<2}function po(i){return i>>17&32767}function A0(i){return 2|i}function ku(i){return(131068&i)>>2}function S0(i,s){return-131069&i|s<<2}function M0(i){return 1|i}function Fy(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Vc(c),_.contentQueries(2,s[p],p)}}}function ka(i,s,a,l,c,p,_,w,I,A){const M=s.blueprint.slice();return M[0]=c,M[2]=140|l,Fi(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=w||i&&i[11],M[12]=I||i&&i[12]||null,M[9]=A||i&&i[9]||null,M[6]=p,M[16]=2==s.type?i[16]:M,M}function Dd(i,s,a,l,c){let p=i.data[s];if(null===p)p=function sf(i,s,a,l,c){const p=iu(),_=dl(),I=i.data[s]=function $0(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,l,c),function pl(){return gt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function Qs(){const i=gt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ni(p,!0),p}function jl(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function of(i,s,a){Js(s);try{const l=i.viewQuery;null!==l&&Qy(1,l,a);const c=i.template;null!==c&&Vy(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Fy(i,s),i.staticViewQueries&&Qy(2,i.viewQuery,a);const p=i.components;null!==p&&function L0(i,s){for(let a=0;a<s.length;a++)Ky(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Hr()}}function Ou(i,s,a,l){const c=s[2];if(256!=(256&c)){Js(s);try{Fi(s),function su(i){return gt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Vy(i,s,a,2,l);const _=3==(3&c);if(_){const A=i.preOrderCheckHooks;null!==A&&Ji(s,A,null)}else{const A=i.preOrderHooks;null!==A&&eo(s,A,0,null),Pn(s,0)}if(function xb(i){for(let s=oi(i);null!==s;s=Au(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&ko(p,1),c[2]|=1024}}}(s),function Y0(i){for(let s=oi(i);null!==s;s=Au(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Yi(l)&&Ou(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&Fy(i,s),_){const A=i.contentCheckHooks;null!==A&&Ji(s,A)}else{const A=i.contentHooks;null!==A&&eo(s,A,1),Pn(s,1)}!function Py(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Xs(~c);else{const p=c,_=a[++l],w=a[++l];au(_,p),w(2,s[p])}}}finally{Xs(-1)}}(i,s);const w=i.components;null!==w&&function Ly(i,s){for(let a=0;a<s.length;a++)Q0(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&Qy(2,I,l),_){const A=i.viewCheckHooks;null!==A&&Ji(s,A)}else{const A=i.viewHooks;null!==A&&eo(s,A,2),Pn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,ko(s[3],-1))}finally{Hr()}}}function V0(i,s,a,l){const c=s[10],_=Ys(s);try{!_&&c.begin&&c.begin(),_&&of(i,s,l),Ou(i,s,a,l)}finally{!_&&c.end&&c.end()}}function Vy(i,s,a,l,c){const p=Hn(),_=2&l;try{Xs(-1),_&&s.length>20&&cg(i,s,20,!1),a(l,c)}finally{Xs(p)}}function mg(i,s,a){if(Ja(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function Uy(i,s,a){!ru()||(function Gy(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||xs(a,s),er(l,s);const _=a.initialInputs;for(let w=c;w<p;w++){const I=i.data[w],A=Ri(I);A&&hA(s,a,I);const M=es(s,i,w,a);er(M,s),null!==_&&fA(0,w-c,M,I,0,_),A&&(Qn(a.index,s)[8]=M)}}(i,s,a,Yn(a,s)),128==(128&a.flags)&&function Sb(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function gl(){return gt.lFrame.currentDirectiveIndex}();try{Xs(_);for(let I=l;I<c;I++){const A=i.data[I],M=s[I];ya(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&q0(A,M)}}finally{Xs(-1),ya(w)}}(i,s,a))}function By(i,s,a=Yn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function U0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=$l(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function $l(i,s,a,l,c,p,_,w,I,A){const M=20+l,P=M+c,U=function jy(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Mt);return a}(M,P),Y="function"==typeof A?A():A;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function j0(i,s,a,l){const c=Rb(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&Nb(i).push(l,c.length-1))}function af(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Td(i,s,a,l){let c=!1;if(ru()){const p=function Mb(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];E0(a,_.selectors,!1)&&(c||(c=[]),ro(xs(a,s),i,_.type),Ri(_)?(qy(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,zy(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const P=p[M];P.providersResolver&&P.providersResolver(P)}let w=!1,I=!1,A=jl(i,s,p.length,null);for(let M=0;M<p.length;M++){const P=p[M];a.mergedAttrs=wa(a.mergedAttrs,P.hostAttrs),Wy(i,a,s,A,P),W0(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function bb(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let w=null,I=null;for(let A=s.directiveStart;A<l;A++){const M=c[A],P=M.inputs,U=null===p||w0(s)?null:Zy(P,p);_.push(U),w=af(P,A,w),I=af(M.outputs,A,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=I}(i,a)}_&&function z0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new ke(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=wa(a.mergedAttrs,a.attrs),c}function Hy(i,s,a,l,c,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function G0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,c,_)}}function q0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function qy(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function W0(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ri(s)&&(a[""]=i)}}function zy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Wy(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=cr(c.type)),_=new Po(p,Ri(c),null);i.blueprint[l]=_,a[l]=_,Hy(i,s,0,l,jl(i,a,c.hostVars,Mt),c)}function hA(i,s,a){const l=Yn(s,i),c=U0(a),p=i[10],_=Ad(i,ka(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function Ko(i,s,a,l,c,p){const _=Yn(i,s);!function Z0(i,s,a,l,c,p,_){if(null==p)en(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?fe(p):_(p,l||"",c);en(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,p,i.value,a,l,c)}function fA(i,s,a,l,c,p){const _=p[s];if(null!==_){const w=l.setInput;for(let I=0;I<_.length;){const A=_[I++],M=_[I++],P=_[I++];null!==w?l.setInput(a,P,A,M):a[M]=P}}}function Zy(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function K0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Q0(i,s){const a=Qn(s,i);if(Yi(a)){const l=a[1];80&a[2]?Ou(l,a,l.template,a[8]):a[5]>0&&uf(a)}}function uf(i){for(let l=oi(i);null!==l;l=Au(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Ou(_,p,_.template,p[8])}else p[5]>0&&uf(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Qn(a[l],i);Yi(c)&&c[5]>0&&uf(c)}}function Ky(i,s){const a=Qn(s,i),l=a[1];(function pA(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),of(l,a,a[8])}function Ad(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function J0(i){for(;i;){i[2]|=64;const s=ht(i);if(nl(i)&&!s)return i;i=s}return null}function ew(i){!function X0(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=zh(a),c=l[1];V0(c,l,c.template,a)}}(i[8])}function Qy(i,s,a){Vc(0),s(i,a)}const gA=(()=>Promise.resolve(null))();function Rb(i){return i[7]||(i[7]=[])}function Nb(i){return i.cleanup||(i.cleanup=[])}function lf(i,s){const a=i[9],l=a?a.get(wd,null):null;l&&l.handleError(s)}function tw(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,w):I[w]=c}}function Yo(i,s,a){const l=Ds(s,i);!function Ed(i,s,a){en(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function cf(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?p=w:1==p?c=ce(c,w):2==p&&(l=ce(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const _g=new pn("INJECTOR",-1);class Jy{get(s,a=Fs){if(a===Fs){const l=new Error(`NullInjectorError: No provider for ${ie(s)}!`);throw l.name="NullInjectorError",l}return a}}const Hl=new pn("Set Injector scope."),df={},Xy={};let e_;function iw(){return void 0===e_&&(e_=new Jy),e_}function Fb(i,s=null,a=null,l){const c=sw(i,s,a,l);return c._resolveInjectorDefTypes(),c}function sw(i,s=null,a=null,l){return new Lb(i,a,s||iw(),l)}class Lb{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Ar(a,w=>this.processProvider(w,s,a)),Ar([s],w=>this.processInjectorType(w,[],p)),this.records.set(_g,Ra(void 0,this));const _=this.records.get(Hl);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ie(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Fs,l=pt.Default){this.assertNotDestroyed();const c=pe(this),p=_n(void 0);try{if(!(l&pt.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function Wr(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&Pt(s);w=I&&this.injectableDefInScope(I)?Ra(mo(s),df):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&pt.Self?iw():this.parent).get(s,a=l&pt.Optional&&a===Fs?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Da]=_[Da]||[]).unshift(ie(s)),c)throw _;return function os(i,s,a,l){const c=i[Da];throw s[F]&&c.unshift(s[F]),i.message=function Bi(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ie(s);if(Array.isArray(s))c=s.map(ie).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):ie(w)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Da]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{_n(p),pe(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ie(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(s,a,l){if(!(s=ee(s)))return!1;let c=wr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,w=-1!==l.indexOf(_);if(void 0!==p&&(c=wr(p)),null==c)return!1;if(null!=c.imports&&!w){let M;l.push(_);try{Ar(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===M&&(M=[]),M.push(P))})}finally{}if(void 0!==M)for(let P=0;P<M.length;P++){const{ngModule:U,providers:Y}=M[P];Ar(Y,ye=>this.processProvider(ye,U,Y||L))}}this.injectorDefTypes.add(_);const I=cr(_)||(()=>new _);this.records.set(_,Ra(I,df));const A=c.providers;if(null!=A&&!w){const M=s;Ar(A,P=>this.processProvider(P,M,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=Pu(s=ee(s))?s:ee(s&&s.provide);const p=function t_(i,s,a){return vg(i)?Ra(void 0,i.useValue):Ra(Tt(i),df)}(s);if(Pu(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Ra(void 0,df,!0),_.factory=()=>It(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===df&&(a.value=Xy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function jb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ee(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function mo(i){const s=Pt(i),a=null!==s?s.factory:cr(i);if(null!==a)return a;if(i instanceof pn)throw new ke(204,!1);if(i instanceof Function)return function et(i){const s=i.length;if(s>0)throw rs(s,"?"),new ke(204,!1);const a=function Kr(i){const s=i&&(i[Ai]||i[Yr]);if(s){const a=function sr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ke(204,!1)}function Tt(i,s,a){let l;if(Pu(i)){const c=ee(i);return cr(c)||mo(c)}if(vg(i))l=()=>ee(i.useValue);else if(function Vb(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...It(i.deps||[]));else if(function hf(i){return!(!i||!i.useExisting)}(i))l=()=>nt(ee(i.useExisting));else{const c=ee(i&&(i.useClass||i.provide));if(!function Bb(i){return!!i.deps}(i))return cr(c)||mo(c);l=()=>new c(...It(i.deps))}return l}function Ra(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function vg(i){return null!==i&&"object"==typeof i&&K in i}function Pu(i){return"function"==typeof i}let cs=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Fb({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return Fb({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Fs,i.NULL=new Jy,i.\u0275prov=zt({token:i,providedIn:"any",factory:()=>nt(_g)}),i.__NG_ELEMENT_ID__=-1,i})();function zb(i,s){_a(zh(i)[1],un())}function yf(i){let s=function mf(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Ri(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ke(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=_f(i.inputs),_.declaredInputs=_f(i.declaredInputs),_.outputs=_f(i.outputs);const w=c.hostBindings;w&&c_(i,w);const I=c.viewQuery,A=c.contentQueries;if(I&&Zb(i,I),A&&Kb(i,A),le(i.inputs,c.inputs),le(i.declaredInputs,c.declaredInputs),le(i.outputs,c.outputs),Ri(c)&&c.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===yf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function l_(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=wa(c.hostAttrs,a=wa(a,c.hostAttrs))}}(l)}function _f(i){return i===ur?{}:i===L?[]:i}function Zb(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Kb(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function c_(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let mr=null;function Qo(){if(!mr){const i=Vt.Symbol;if(i&&i.iterator)mr=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(mr=l)}}}return mr}function Oa(i){return!!Sd(i)&&(Array.isArray(i)||!(i instanceof Map)&&Qo()in i)}function Sd(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ds(i,s,a){return i[s]=a}function kr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Pa(i,s,a,l){const c=kr(i,s,a);return kr(i,s+1,l)||c}function Eg(i,s,a,l){const c=Ae();return kr(c,As(),s)&&(Ft(),Ko(Dn(),c,i,s,a,l)),Eg}function zl(i,s,a,l,c,p){const w=Pa(i,function ri(){return gt.lFrame.bindingIndex}(),a,c);return pi(2),w?s+fe(a)+l+fe(c)+p:Mt}function bg(i,s,a,l,c,p,_,w){const I=Ae(),A=Ft(),M=i+20,P=A.firstCreatePass?function h_(i,s,a,l,c,p,_,w,I){const A=s.consts,M=Dd(s,i,4,_||null,fi(A,w));Td(s,a,M,fi(A,I)),_a(s,M);const P=M.tViews=$l(2,M,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,A,I,s,a,l,c,p,_):A.data[M];ni(P,!1);const U=I[11].createComment("");Id(A,I,U,P),er(U,I),Ad(I,I[M]=K0(U,I,U,P)),ki(P)&&Uy(A,I,P),null!=_&&By(I,P,w)}function Cg(i){return Pi(function Lc(){return gt.lFrame.contextLView}(),20+i)}function Od(i,s=pt.Default){const a=Ae();return null===a?nt(i,s):Uo(un(),a,ee(i),s)}function I_(){throw new Error("invalid")}function Ng(i,s,a){const l=Ae();return kr(l,As(),s)&&function ls(i,s,a,l,c,p,_,w){const I=Yn(s,a);let M,A=s.inputs;!w&&null!=A&&(M=A[l])?(tw(i,a,M,l,c),Dc(s)&&function Db(i,s){const a=Qn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Cb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,en(p)?p.setProperty(I,l,c):Tn(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(Ft(),Dn(),l,i,s,l[11],a,!1),Ng}function b_(i,s,a,l,c){const _=c?"class":"style";tw(i,a,s.inputs[_],_,l)}function Af(i,s,a,l){const c=Ae(),p=Ft(),_=20+i,w=c[11],I=c[_]=Sr(w,s,function kp(){return gt.lFrame.currentNamespace}()),A=p.firstCreatePass?function Tf(i,s,a,l,c,p,_){const w=s.consts,A=Dd(s,i,2,c,fi(w,p));return Td(s,a,A,fi(w,_)),null!==A.attrs&&cf(A,A.attrs,!1),null!==A.mergedAttrs&&cf(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];ni(A,!0);const M=A.mergedAttrs;null!==M&&Dr(w,I,M);const P=A.classes;null!==P&&Dy(w,I,P);const U=A.styles;return null!==U&&_0(w,I,U),64!=(64&A.flags)&&Id(p,c,I,A),0===function ma(){return gt.lFrame.elementDepthCount}()&&er(I,c),function ll(){gt.lFrame.elementDepthCount++}(),ki(A)&&(Uy(p,c,A),mg(p,A,c)),null!==l&&By(c,A),Af}function Kl(){let i=un();dl()?hl():(i=i.parent,ni(i,!1));const s=i;!function nu(){gt.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(_a(a,i),Ja(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Op(i){return 0!=(16&i.flags)}(s)&&b_(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function rn(i){return 0!=(32&i.flags)}(s)&&b_(a,s,Ae(),s.stylesWithoutHost,!1),Kl}function Yl(i,s,a,l){return Af(i,s,a,l),Kl(),Yl}function Og(i,s,a){const l=Ae(),c=Ft(),p=i+20,_=c.firstCreatePass?function C_(i,s,a,l,c){const p=s.consts,_=fi(p,l),w=Dd(s,i,8,"ng-container",_);return null!==_&&cf(w,_,!0),Td(s,a,w,fi(p,c)),null!==s.queries&&s.queries.elementStart(s,w),w}(p,c,l,s,a):c.data[p];ni(_,!0);const w=l[p]=l[11].createComment("");return Id(c,l,w,_),er(w,l),ki(_)&&(Uy(c,l,_),mg(c,_,l)),null!=a&&By(l,_),Og}function Fd(){let i=un();const s=Ft();return dl()?hl():(i=i.parent,ni(i,!1)),s.firstCreatePass&&(_a(s,i),Ja(i)&&s.queries.elementEnd(i)),Fd}function Pg(){return Ae()}function Fa(i){return!!i&&"function"==typeof i.then}function D_(i){return!!i&&"function"==typeof i.subscribe}const Ew=D_;function La(i,s,a,l){const c=Ae(),p=Ft(),_=un();return function Sf(i,s,a,l,c,p,_,w){const I=ki(l),M=i.firstCreatePass&&Nb(i),P=s[8],U=Rb(s);let Y=!0;if(3&l.type||w){const je=Yn(l,s),tt=w?w(je):je,Te=U.length,dt=w?Ut=>w(Wt(Ut[l.index])):l.index;if(en(a)){let Ut=null;if(!w&&I&&(Ut=function Fg(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const w=s[7],I=c[p+2];return w.length>I?w[I]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=p,Ut.__ngLastListenerFn__=p,Y=!1;else{p=Lg(l,s,P,p,!1);const Qt=a.listen(tt,c,p);U.push(p,Qt),M&&M.push(c,dt,Te,Te+1)}}else p=Lg(l,s,P,p,!0),tt.addEventListener(c,p,_),U.push(p),M&&M.push(c,dt,Te,_)}else p=Lg(l,s,P,p,!1);const ye=l.outputs;let Pe;if(Y&&null!==ye&&(Pe=ye[c])){const je=Pe.length;if(je)for(let tt=0;tt<je;tt+=2){const Lr=s[Pe[tt]][Pe[tt+1]].subscribe(p),za=U.length;U.push(p,Lr),M&&M.push(c,l.index,za,-(za+1))}}}(p,c,c[11],_,i,s,!!a,l),La}function Mf(i,s,a,l){try{return!1!==a(l)}catch(c){return lf(i,c),!1}}function Lg(i,s,a,l,c){return function p(_){if(_===Function)return l;const w=2&i.flags?Qn(i.index,s):s;0==(32&s[2])&&J0(w);let I=Mf(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)I=Mf(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function gn(i=1){return function kh(i){return(gt.lFrame.contextLView=function ml(i,s){for(;i>0;)s=s[15],i--;return s}(i,gt.lFrame.contextLView))[8]}(i)}function Vg(i,s){let a=null;const l=function I0(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let c=0;c<s.length;c++){const p=s[c];if("*"!==p){if(null===l?E0(i,p,!0):Mr(l,p))return c}else a=c}return a}function Iw(i){const s=Ae()[16][6];if(!s.projection){const l=s.projection=rs(i?i.length:1,null),c=l.slice();let p=s.child;for(;null!==p;){const _=i?Vg(p,i):0;null!==_&&(c[_]?c[_].projectionNext=p:l[_]=p,c[_]=p),p=p.next}}}function bw(i,s=0,a){const l=Ae(),c=Ft(),p=Dd(c,20+i,16,null,a||null);null===p.projection&&(p.projection=s),hl(),64!=(64&p.flags)&&function ab(i,s,a){ve(s[11],0,s,a,sb(i,a,s),h0(a.parent||s[6],a,s))}(c,l,p)}function Xl(i,s,a,l,c){const p=i[a+1],_=null===s;let w=l?po(p):ku(p),I=!1;for(;0!==w&&(!1===I||_);){const M=i[w+1];lC(i[w],s)&&(I=!0,i[w+1]=l?M0(M):A0(M)),w=l?po(M):ku(M)}I&&(i[a+1]=l?A0(p):M0(p))}function lC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Go(i,s)>=0}function Rf(i,s){return function tn(i,s,a,l){const c=Ae(),p=Ft(),_=pi(2);p.firstUpdatePass&&function Ow(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Hn()],_=function Nw(i,s){return s>=i.expandoStartIndex}(i,a);(function Hg(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function fC(i,s,a,l){const c=function uu(i){const s=gt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=$u(a=jg(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=jg(c,i,s,a,l),null===p){let I=function pC(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ku(l))return i[po(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=jg(null,i,s,I[1],l),I=$u(I,s.attrs,l),function Pw(i,s,a,l){i[po(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else p=function Fw(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=$u(l,i[p].hostAttrs,a);return $u(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function Mw(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,w=po(_),I=ku(_);i[l]=a;let M,A=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||Go(P,M)>0)&&(A=!0)}else M=a;if(c)if(0!==I){const U=po(i[w+1]);i[l+1]=Sy(U,w),0!==U&&(i[U+1]=S0(i[U+1],l)),i[w+1]=function rA(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Sy(w,0),0!==w&&(i[w+1]=S0(i[w+1],l)),w=l;else i[l+1]=Sy(I,0),0===w?w=l:i[I+1]=S0(i[I+1],l),I=l;A&&(i[l+1]=A0(i[l+1])),Xl(i,M,l,!0),Xl(i,M,l,!1),function xw(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Go(p,s)>=0&&(a[l+1]=M0(a[l+1]))}(s,M,i,l,p),_=Sy(w,I),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==Mt&&kr(c,_,s)&&function Uw(i,s,a,l,c,p,_,w){if(!(3&s.type))return;const I=i.data,A=I[w+1];Hu(function pb(i){return 1==(1&i)}(A)?$g(I,s,a,c,ku(A),_):void 0)||(Hu(p)||function T0(i){return 2==(2&i)}(A)&&(p=$g(I,null,a,c,w,_)),function ub(i,s,a,l,c){const p=en(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:R.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=R.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,Ds(Hn(),a),c,p))}(p,p.data[Hn()],c,c[11],i,c[_+1]=function Bw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ie(wi(i)))),i}(s,a),l,_)}(i,s,null,!0),Rf}function jg(i,s,a,l,c){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=s[w],l=$u(l,p.hostAttrs,c),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function $u(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),hr(i,_,!!a||s[++p]))}return void 0===i?null:i}function $g(i,s,a,l,c,p){const _=null===s;let w;for(;c>0;){const I=i[c],A=Array.isArray(I),M=A?I[1]:I,P=null===M;let U=a[c+1];U===Mt&&(U=P?L:void 0);let Y=P?Ca(U,l):M===l?U:void 0;if(A&&!Hu(Y)&&(Y=Ca(I,l)),Hu(Y)&&(w=Y,_))return w;const ye=i[c+1];c=_?po(ye):ku(ye)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(w=Ca(I,l))}return w}function Hu(i){return void 0!==i}function Pf(i,s=""){const a=Ae(),l=Ft(),c=i+20,p=l.firstCreatePass?Dd(l,c,1,s,null):l.data[c],_=a[c]=function Vl(i,s){return en(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Id(l,a,_,p),ni(p,!1)}function Gg(i){return Ud("",i,""),Gg}function Ud(i,s,a){const l=Ae(),c=function ql(i,s,a,l){return kr(i,As(),a)?s+fe(a)+l:Mt}(l,i,s,a);return c!==Mt&&Yo(l,Hn(),c),Ud}function Bd(i,s,a,l,c){const p=Ae(),_=zl(p,i,s,a,l,c);return _!==Mt&&Yo(p,Hn(),_),Bd}const Re=void 0;var Lf=["en",[["a","p"],["AM","PM"],Re],[["AM","PM"],Re,Re],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Re,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Re,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Re,"{1} 'at' {0}",Re],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tr(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Gu={};function bt(i){const s=function tE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ue(s);if(a)return a;const l=s.split("-")[0];if(a=ue(l),a)return a;if("en"===l)return Lf;throw new Error(`Missing locale data for the locale "${i}".`)}function ze(i){return bt(i)[Xe.PluralCase]}function ue(i){return i in Gu||(Gu[i]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[i]),Gu[i]}var Xe=(()=>((Xe=Xe||{})[Xe.LocaleId=0]="LocaleId",Xe[Xe.DayPeriodsFormat=1]="DayPeriodsFormat",Xe[Xe.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xe[Xe.DaysFormat=3]="DaysFormat",Xe[Xe.DaysStandalone=4]="DaysStandalone",Xe[Xe.MonthsFormat=5]="MonthsFormat",Xe[Xe.MonthsStandalone=6]="MonthsStandalone",Xe[Xe.Eras=7]="Eras",Xe[Xe.FirstDayOfWeek=8]="FirstDayOfWeek",Xe[Xe.WeekendRange=9]="WeekendRange",Xe[Xe.DateFormat=10]="DateFormat",Xe[Xe.TimeFormat=11]="TimeFormat",Xe[Xe.DateTimeFormat=12]="DateTimeFormat",Xe[Xe.NumberSymbols=13]="NumberSymbols",Xe[Xe.NumberFormats=14]="NumberFormats",Xe[Xe.CurrencyCode=15]="CurrencyCode",Xe[Xe.CurrencySymbol=16]="CurrencySymbol",Xe[Xe.CurrencyName=17]="CurrencyName",Xe[Xe.Currencies=18]="Currencies",Xe[Xe.Directionality=19]="Directionality",Xe[Xe.PluralCase=20]="PluralCase",Xe[Xe.ExtraData=21]="ExtraData",Xe))();const Yg="en-US";let Gi=Yg;function nm(i,s,a,l,c){if(i=ee(i),Array.isArray(i))for(let p=0;p<i.length;p++)nm(i[p],s,a,l,c);else{const p=Ft(),_=Ae();let w=Pu(i)?i:ee(i.provide),I=Tt(i);const A=un(),M=1048575&A.providerIndexes,P=A.directiveStart,U=A.providerIndexes>>20;if(Pu(i)||!i.multi){const Y=new Po(I,c,Od),ye=W_(w,s,c?M:M+U,P);-1===ye?(ro(xs(A,_),p,w),z_(p,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Y),_.push(Y)):(a[ye]=Y,_[ye]=Y)}else{const Y=W_(w,s,M+U,P),ye=W_(w,s,M,M+U),Pe=Y>=0&&a[Y],je=ye>=0&&a[ye];if(c&&!je||!c&&!Pe){ro(xs(A,_),p,w);const tt=function RC(i,s,a,l,c){const p=new Po(i,a,Od);return p.multi=[],p.index=s,p.componentProviders=0,_E(p,c,l&&!a),p}(c?qu:kC,a.length,c,l,I);!c&&je&&(a[ye].providerFactory=tt),z_(p,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(tt),_.push(tt)}else z_(p,i,Y>-1?Y:ye,_E(a[c?ye:Y],I,!c&&l));!c&&l&&je&&a[ye].componentProviders++}}}function z_(i,s,a,l){const c=Pu(s),p=function Ub(i){return!!i.useClass}(s);if(c||p){const I=(p?ee(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const M=A.indexOf(a);-1===M?A.push(a,[l,I]):A[M+1].push(l,I)}else A.push(a,I)}}}function _E(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function W_(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function kC(i,s,a,l){return zu(this.multi,[])}function qu(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=es(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),zu(c,p);for(let I=_;I<w.length;I++)p.push(w[I])}else p=[],zu(c,p);return p}function zu(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Z_(i,s=[]){return a=>{a.providersResolver=(l,c)=>function xC(i,s,a){const l=Ft();if(l.firstCreatePass){const c=Ri(i);nm(a,l.data,l.blueprint,c,!0),nm(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class na{}class K_{resolveComponentFactory(s){throw function wE(i){const s=Error(`No component factory found for ${ie(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Xd=(()=>{class i{}return i.NULL=new K_,i})();function Y_(){return Io(un(),Ae())}function Io(i,s){return new li(Yn(i,s))}let li=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Y_,i})();function EE(i){return i instanceof li?i.nativeElement:i}class Q_{}let J_=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function IE(){const i=Ae(),a=Qn(un().index,i);return function X_(i){return i[11]}($r(a)?a:i)}(),i})(),bE=(()=>{class i{}return i.\u0275prov=zt({token:i,providedIn:"root",factory:()=>null}),i})();class CE{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const ev=new CE("13.3.10"),im={};function zf(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(Wt(p)),xi(p))for(let w=10;w<p.length;w++){const I=p[w],A=I[1].firstChild;null!==A&&zf(I[1],I,A,l)}const _=a.type;if(8&_)zf(i,s,a.child,l);else if(32&_){const w=de(a,s);let I;for(;I=w();)l.push(I)}else if(16&_){const w=g0(s,a);if(Array.isArray(w))l.push(...w);else{const I=ht(s[16]);zf(I[1],I,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class Wu{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return zf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(xi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(rg(s,l),jo(a,l))}this._attachedToViewContainer=!1}a0(this._lView[1],this._lView)}onDestroy(s){j0(this._lView[1],this._lView,null,s)}markForCheck(){J0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Yy(i,s,a){const l=s[10];l.begin&&l.begin();try{Ou(i,s,i.template,a)}catch(c){throw lf(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tf(i,s){nf(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=s}}class NC extends Wu{constructor(s){super(s),this._view=s}detectChanges(){ew(this._view)}checkNoChanges(){}get context(){return null}}class DE extends Xd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Nn(s);return new sm(a,this.ngModule)}}function tv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class sm extends na{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function lg(i){return i.map(C0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return tv(this.componentDef.inputs)}get outputs(){return tv(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function cc(i,s){return{get:(a,l,c)=>{const p=i.get(a,im,c);return p!==im||l===im?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(Q_,fa),w=p.get(bE,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=l?function $y(i,s,a){if(en(i))return i.selectRootElement(s,a===$t.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Sr(_.createRenderer(null,this.componentDef),A,function eh(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,U=function u_(i,s){return{components:[],scheduler:i||Qh,clean:gA,playerHandler:s||null,flags:0}}(),Y=$l(0,null,null,1,0,null,null,null,null,null),ye=ka(null,Y,U,P,null,null,_,I,w,p);let Pe,je;Js(ye);try{const tt=function a_(i,s,a,l,c,p){const _=a[1];a[20]=i;const I=Dd(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(cf(I,A,!0),null!==i&&(Dr(c,i,A),null!==I.classes&&Dy(c,i,I.classes),null!==I.styles&&_0(c,i,I.styles)));const M=l.createRenderer(i,s),P=ka(a,U0(s),null,s.onPush?64:16,a[20],I,l,M,p||null,null);return _.firstCreatePass&&(ro(xs(I,a),_,s.type),qy(_,I),zy(I,a.length,1)),Ad(a,P),a[20]=P}(M,this.componentDef,ye,_,I);if(M)if(l)Dr(I,M,["ng-version",ev.full]);else{const{attrs:Te,classes:dt}=function hb(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!fo(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Te&&Dr(I,M,Te),dt&&dt.length>0&&Dy(I,M,dt.join(" "))}if(je=ln(Y,20),void 0!==a){const Te=je.projection=[];for(let dt=0;dt<this.ngContentSelectors.length;dt++){const Ut=a[dt];Te.push(null!=Ut?Array.from(Ut):null)}}Pe=function wg(i,s,a,l,c){const p=a[1],_=function Ab(i,s,a){const l=un();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Wy(i,l,s,jl(i,s,1,null),a));const c=es(s,i,l.directiveStart,l);er(c,s);const p=Yn(l,s);return p&&er(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=un();s.contentQueries(1,_,I.directiveStart)}const w=un();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Xs(w.index),Hy(a[1],w,0,w.directiveStart,w.directiveEnd,s),q0(s,_)),_}(tt,this.componentDef,ye,U,[zb]),of(Y,ye,null)}finally{Hr()}return new th(this.componentType,Pe,Io(je,ye),ye,je)}}class th extends class vE{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new NC(c),this.componentType=s}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class hc{}class nh{}const rh=new Map;class ME extends hc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new DE(this);const l=On(s);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=sw(s,a,[{provide:hc,useValue:this},{provide:Xd,useValue:this.componentFactoryResolver}],ie(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=cs.THROW_IF_NOT_FOUND,l=pt.Default){return s===cs||s===hc||s===_g?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class am extends nh{constructor(s){super(),this.moduleType=s,null!==On(s)&&function om(i){const s=new Set;!function a(l){const c=On(l,!0),p=c.id;null!==p&&(function Zn(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ie(s)} vs ${ie(s.name)}`)}(p,rh.get(p),l),rh.set(p,l));const _=y(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new ME(this.moduleType,s)}}function ih(i,s,a,l){return iv(Ae(),dr(),i,s,a,l)}function Zu(i,s,a,l,c){return function sv(i,s,a,l,c,p,_){const w=s+a;return Pa(i,w,c,p)?ds(i,w+2,_?l.call(_,c,p):l(c,p)):Bt(i,w+2)}(Ae(),dr(),i,s,a,l,c)}function Bt(i,s){const a=i[s];return a===Mt?void 0:a}function iv(i,s,a,l,c,p){const _=s+a;return kr(i,_,c)?ds(i,_+1,p?l.call(p,c):l(c)):Bt(i,_+1)}function PE(i,s){const a=Ft();let l;const c=i+20;a.firstCreatePass?(l=function ov(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const p=l.factory||(l.factory=cr(l.type)),_=_n(Od);try{const w=vt(!1),I=p();return vt(w),function tC(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Ae(),c,I),I}finally{_n(_)}}function sh(i,s,a){const l=i+20,c=Ae(),p=Pi(c,l);return function Ku(i,s){return i[1].data[s].pure}(c,l)?iv(c,dr(),s,p.transform,a,p):p.transform(a)}function fc(i){return s=>{setTimeout(i,void 0,s)}}const gs=class Zf extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let w=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const P=s;w=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(p=P.error)||void 0===p?void 0:p.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=fc(I),w&&(w=fc(w)),A&&(A=fc(A)));const M=super.subscribe({next:w,error:I,complete:A});return s instanceof Q.w0&&s.add(M),M}};function FE(){return this._results[Qo()]()}class Kf{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Qo(),l=Kf.prototype;l[a]||(l[a]=FE)}get changes(){return this._changes||(this._changes=new gs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Tr(s);(this._changesDetected=!function Nh(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let oh=(()=>{class i{}return i.__NG_ELEMENT_ID__=VE,i})();const UC=oh,LE=class extends UC{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=ka(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),of(a,l,s),new Wu(l)}};function VE(){return um(un(),Ae())}function um(i,s){return 4&i.type?new LE(s,i,Io(i,s)):null}let lm=(()=>{class i{}return i.__NG_ELEMENT_ID__=BC,i})();function BC(){return cm(un(),Ae())}const Yf=lm,av=class extends Yf{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Io(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const s=Jn(this._hostTNode,this._hostLView);if(Fo(s)){const a=Ms(s,this._hostLView),l=Ss(s);return new Ns(a[1].data[l+8],a)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=UE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function gu(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const P=a||{};w=P.index,l=P.injector,c=P.projectableNodes,p=P.ngModuleRef}const I=_?s:new sm(Nn(s)),A=l||this.parentInjector;if(!p&&null==I.ngModule){const U=(_?A:this.parentInjector).get(hc,null);U&&(p=U)}const M=I.create(A,c,void 0,p);return this.insert(M.hostView,w),M}insert(s,a){const l=s._lView,c=l[1];if(function ga(i){return xi(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=l[3],U=new av(P,P[6],P[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function Su(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],ba(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function ib(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,p);const w=ag(p,_),I=l[11],A=sg(I,_[7]);return null!==A&&function ef(i,s,a,l,c,p){l[0]=c,l[6]=s,nf(i,l,a,1,c,p)}(c,_[6],I,l,A,w),s.attachToViewContainerRef(),ba(ir(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=UE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=rg(this._lContainer,a);l&&(jo(ir(this._lContainer),a),a0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=rg(this._lContainer,a);return l&&null!=jo(ir(this._lContainer),a)?new Wu(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function UE(i){return i[8]}function ir(i){return i[8]||(i[8]=[])}function cm(i,s){let a;const l=s[i.index];if(xi(l))a=l;else{let c;if(8&i.type)c=Wt(l);else{const p=s[11];c=p.createComment("");const _=Yn(i,s);xu(p,sg(p,_),c,function ob(i,s){return en(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=K0(l,s,c,i),Ad(s,a)}return new av(a,i,s)}class Jf{constructor(s){this.queryList=s,this.matches=null}clone(){return new Jf(this.queryList)}setDirty(){this.queryList.setDirty()}}class dm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new dm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==pc(s,a).matches&&this.queries[a].setDirty()}}class ah{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class hm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new hm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class fm{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new fm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,jE(a,p)),this.matchTNodeWithReadOption(s,a,Ea(a,s,p,!1,!1))}else l===oh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ea(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===li||c===lm||c===oh&&4&a.type)this.addMatch(a.index,-2);else{const p=Ea(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function jE(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function $C(i,s,a,l){return-1===a?function jC(i,s){return 11&i.type?Io(i,s):4&i.type?um(i,s):null}(s,i):-2===a?function Xf(i,s,a){return a===li?Io(s,i):a===oh?um(s,i):a===lm?cm(s,i):void 0}(i,s,l):es(i,i[1],a,s)}function pm(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,w=[];for(let I=0;I<_.length;I+=2){const A=_[I];w.push(A<0?null:$C(s,p[A],_[I+1],a.metadata.read))}c.matches=w}return c.matches}function uv(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=pm(i,s,c,a);for(let w=0;w<p.length;w+=2){const I=p[w];if(I>0)l.push(_[w/2]);else{const A=p[w+1],M=s[-I];for(let P=10;P<M.length;P++){const U=M[P];U[17]===U[3]&&uv(U[1],U,A,l)}if(null!==M[9]){const P=M[9];for(let U=0;U<P.length;U++){const Y=P[U];uv(Y[1],Y,A,l)}}}}}return l}function lv(i){const s=Ae(),a=Ft(),l=lu();Vc(l+1);const c=pc(a,l);if(i.dirty&&Ys(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?uv(a,s,l,[]):pm(a,s,c,l);i.reset(p,EE),i.notifyOnChanges()}return!0}return!1}function cv(i,s,a,l){const c=Ft();if(c.firstCreatePass){const p=un();(function zE(i,s,a){null===i.queries&&(i.queries=new hm),i.queries.track(new fm(s,a))})(c,new ah(s,a,l),p.index),function uh(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function qE(i,s,a){const l=new Kf(4==(4&a));j0(i,s,l,l.destroy),null===s[19]&&(s[19]=new dm),s[19].queries.push(new Jf(l))}(c,Ae(),a)}function HE(){return function GE(i,s){return i[19].queries[s].queryList}(Ae(),lu())}function pc(i,s){return i.queries.getByIndex(s)}function WE(i,s){return um(i,s)}function Ju(...i){}const Im=new pn("Application Initializer");let rp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ju,this.reject=Ju,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(Fa(p))a.push(p);else if(Ew(p)){const _=new Promise((w,I)=>{p.subscribe({complete:w,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(nt(Im,8))},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ev=new pn("AppId",{providedIn:"root",factory:function nI(){return`${bm()}${bm()}${bm()}`}});function bm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cm=new pn("Platform Initializer"),ip=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Xu=new pn("appBootstrapListener");let rI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Iv=new pn("LocaleId",{providedIn:"root",factory:()=>Ht(Iv,pt.Optional|pt.SkipSelf)||function eD(){return"undefined"!=typeof $localize&&$localize.locale||Yg}()}),tD=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class iI{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let nD=(()=>{class i{compileModuleSync(a){return new am(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(On(a).declarations).reduce((_,w)=>{const I=Nn(w);return I&&_.push(new sm(I)),_},[]);return new iI(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Tm=(()=>Promise.resolve(0))();function bv(i){"undefined"==typeof Zone?Tm.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Di{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gs(!1),this.onMicrotaskEmpty=new gs(!1),this.onStable=new gs(!1),this.onError=new gs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function oI(){let i=Vt.requestAnimationFrame,s=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function qi(i){const s=()=>{!function aI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Sm(i),i.isCheckStableRunning=!0,gh(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Sm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,w)=>{try{return sp(i),a.invokeTask(c,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Mm(i)}},onInvoke:(a,l,c,p,_,w,I)=>{try{return sp(i),a.invoke(c,p,_,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Mm(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Sm(i),gh(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Di.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Di.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,Am,Ju,Ju);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Am={};function gh(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Sm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function sp(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Mm(i){i._nesting--,gh(i)}class uI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gs,this.onMicrotaskEmpty=new gs,this.onStable=new gs,this.onError=new gs}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Ga=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Di.assertNotInAngularZone(),bv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(nt(Di))},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})(),mh=(()=>{class i{constructor(){this._applications=new Map,Cv.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Cv.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class lI{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function mc(i){Cv=i}let Cv=new lI,$s=null;const Dv=new pn("AllowMultipleToken"),qa=new pn("PlatformOnDestroy");class iD{constructor(s,a){this.name=s,this.token=a}}function hI(i,s,a=[]){const l=`Platform: ${s}`,c=new pn(l);return(p=[])=>{let _=Tv();if(!_||_.injector.get(Dv,!1)){const w=[...a,...p,{provide:c,useValue:!0}];i?i(w):function sD(i){if($s&&!$s.get(Dv,!1))throw new ke(400,"");$s=i;const s=i.get(fI),a=i.get(Cm,null);a&&a.forEach(l=>l())}(function xm(i=[],s){return cs.create({name:s,providers:[{provide:Hl,useValue:"platform"},{provide:qa,useValue:()=>$s=null},...i]})}(w,l))}return function oD(i){const s=Tv();if(!s)throw new ke(401,"");return s}()}}function Tv(){var i;return null!==(i=null==$s?void 0:$s.get(fI))&&void 0!==i?i:null}let fI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function pI(i,s){let a;return a="noop"===i?new uI:("zone.js"===i?void 0:i)||new Di({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Di,useValue:w}];return w.run(()=>{const A=cs.create({providers:I,parent:this.injector,name:a.moduleType.name}),M=a.create(A),P=M.injector.get(wd,null);if(!P)throw new ke(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Y=>{P.handleError(Y)}});M.onDestroy(()=>{Rm(this._modules,M),U.unsubscribe()})}),function _c(i,s,a){try{const l=a();return Fa(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const U=M.injector.get(rp);return U.runInitializers(),U.donePromise.then(()=>(function EC(i){Lt(i,"Expected localeId to be defined"),"string"==typeof i&&(Gi=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Iv,Yg)||Yg),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const c=yh({},l);return function yc(i,s,a){const l=new am(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(km);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(qa,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(nt(cs))},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function yh(i,s){return Array.isArray(s)?s.reduce(yh,i):Object.assign(Object.assign({},i),s)}let km=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new O.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Di.assertNotInAngularZone(),bv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Di.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ae.T)(_,w.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let c;c=a instanceof na?a:this._injector.get(Xd).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function dI(i){return i.isBoundToModule}(c)?void 0:this._injector.get(hc),w=c.create(cs.NULL,[],l||c.selector,p),I=w.location.nativeElement,A=w.injector.get(Ga,null),M=A&&w.injector.get(mh);return A&&M&&M.registerApplication(I,A),w.onDestroy(()=>{this.detachView(w.hostView),Rm(this.components,w),M&&M.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Rm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Xu,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(nt(Di),nt(cs),nt(wd),nt(rp))},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Rm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Nm=!0,Om=!1;function op(){return Om=!0,Nm}function Pm(){if(Om)throw new Error("Cannot enable prod mode after platform setup.");Nm=!1}let _I=(()=>{class i{}return i.__NG_ELEMENT_ID__=uD,i})();function uD(i){return function vI(i,s,a){if(Dc(i)&&!a){const l=Qn(i.index,s);return new Wu(l,l)}return 47&i.type?new Wu(s[16],s):null}(un(),Ae(),16==(16&i))}class bI{constructor(){}supports(s){return Oa(s)}create(s){return new fD(s)}}const hD=(i,s)=>s;class fD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||hD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<jm(l,c,p)?a:l,w=jm(_,c,p),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=w-c,M=I-c;if(A!=M){for(let U=0;U<A;U++){const Y=U<p.length?p[U]:p[U]=0,ye=Y+U;M<=ye&&ye<A&&(p[U]=Y+1)}p[_.previousIndex]=M-A}}w!==I&&s(_,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Oa(s))throw new ke(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else c=0,function eC(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Qo()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new pD(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new CI),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class pD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class CI{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new gD,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jm(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Mv{constructor(){}supports(s){return s instanceof Map||Sd(s)}create(){return new DI}}class DI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Sd(s)))throw new ke(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new xv(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class xv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function up(){return new vc([new bI])}let vc=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||up()),deps:[[i,new Ls,new pr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new ke(901,"")}}return i.\u0275prov=zt({token:i,providedIn:"root",factory:up}),i})();function $m(){return new lp([new Mv])}let lp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||$m()),deps:[[i,new Ls,new pr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new ke(901,"")}}return i.\u0275prov=zt({token:i,providedIn:"root",factory:$m}),i})();const yD=hI(null,"core",[]);let _D=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(nt(km))},i.\u0275mod=Er({type:i}),i.\u0275inj=Gt({}),i})()},3942:(Ke,_e,N)=>{N.d(_e,{Z:()=>ke});var h=N(2090),Q=N(4859),O=N(9681),ae=N(1877);class ne{constructor(fe,be){this._delegate=fe,this.firebase=be,(0,O._addComponent)(fe,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,be=O._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(fe);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Ge=Ze.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:be})}_removeServiceInstance(fe,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(be)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ce(){const Ve=function ie(Ve){const fe={},be={__esModule:!0,initializeApp:function De(Ue,j={}){const we=O.initializeApp(Ue,j);if((0,h.r3)(fe,we.name))return fe[we.name];const W=new Ve(we,be);return fe[we.name]=W,W},app:Ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Ue){const j=Ue.name,we=j.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const W=(re=Ze())=>{if("function"!=typeof re[we])throw le.create("invalid-app-argument",{appName:j});return re[we]()};void 0!==Ue.serviceProps&&(0,h.ZB)(W,Ue.serviceProps),be[we]=W,Ve.prototype[we]=function(...re){return this._getService.bind(this,j).apply(this,Ue.multipleInstances?re:[])}}return"PUBLIC"===Ue.type?be[we]:null},removeApp:function Ge(Ue){delete fe[Ue]},useAsService:function Be(Ue,j){return"serverAuth"===j?null:j},modularAPIs:O}};function Ze(Ue){if(!(0,h.r3)(fe,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Ue});return fe[Ue]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ee(){return Object.keys(fe).map(Ue=>fe[Ue])}}),Ze.App=Ve,be}(ne);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function fe(be){(0,h.ZB)(Ve,be)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ve}(),B=new ae.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=$;!function Se(Ve){(0,O.registerVersion)("@firebase/app-compat","0.1.26",Ve)}()},9681:(Ke,_e,N)=>{N.r(_e),N.d(_e,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Ai,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>zt,_apps:()=>Kt,_clearComponents:()=>Wi,_components:()=>yn,_getProvider:()=>Gt,_registerComponent:()=>vr,_removeServiceInstance:()=>Pt,deleteApp:()=>pt,getApp:()=>Yr,getApps:()=>ci,initializeApp:()=>vs,onLog:()=>_n,registerVersion:()=>hn,setLogLevel:()=>Hs});var h=N(5861),Q=N(4859),O=N(1877),ae=N(2090),ne=N(8766);class ge{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function le(H){const J=H.getComponent();return"VERSION"===(null==J?void 0:J.type)}(Me)){const Qe=Me.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(Me=>Me).join(" ")}}const ie="@firebase/app",$=new O.Yd("@firebase/app"),Lt="[DEFAULT]",We={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Kt=new Map,yn=new Map;function Jt(H,J){try{H.container.addComponent(J)}catch(Me){$.debug(`Component ${J.name} failed to register with FirebaseApp ${H.name}`,Me)}}function zt(H,J){H.container.addOrOverwriteComponent(J)}function vr(H){const J=H.name;if(yn.has(J))return $.debug(`There were multiple attempts to register component ${J}.`),!1;yn.set(J,H);for(const Me of Kt.values())Jt(Me,H);return!0}function Gt(H,J){const Me=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),H.container.getProvider(J)}function Pt(H,J,Me=Lt){Gt(H,J).clearInstance(Me)}function Wi(){yn.clear()}const sr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class wr{constructor(J,Me,Qe){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const Ai="9.8.2";function vs(H,J={}){"object"!=typeof J&&(J={name:J});const Me=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},J),Qe=Me.name;if("string"!=typeof Qe||!Qe)throw sr.create("bad-app-name",{appName:String(Qe)});const ft=Kt.get(Qe);if(ft){if((0,ae.vZ)(H,ft.options)&&(0,ae.vZ)(Me,ft.config))return ft;throw sr.create("duplicate-app",{appName:Qe})}const _t=new Q.H0(Qe);for(const yt of yn.values())_t.addComponent(yt);const sn=new wr(H,Me,_t);return Kt.set(Qe,sn),sn}function Yr(H=Lt){const J=Kt.get(H);if(!J)throw sr.create("no-app",{appName:H});return J}function ci(){return Array.from(Kt.values())}function pt(H){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(H){const J=H.name;Kt.has(J)&&(Kt.delete(J),yield Promise.all(H.container.getProviders().map(Me=>Me.delete())),H.isDeleted=!0)})).apply(this,arguments)}function hn(H,J,Me){var Qe;let ft=null!==(Qe=We[H])&&void 0!==Qe?Qe:H;Me&&(ft+=`-${Me}`);const _t=ft.match(/\s|\//),sn=J.match(/\s|\//);if(_t||sn){const yt=[`Unable to register library "${ft}" with version "${J}":`];return _t&&yt.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),_t&&sn&&yt.push("and"),sn&&yt.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void $.warn(yt.join(" "))}vr(new Q.wA(`${ft}-version`,()=>({library:ft,version:J}),"VERSION"))}function _n(H,J){if(null!==H&&"function"!=typeof H)throw sr.create("invalid-log-argument");(0,O.Am)(H,J)}function Hs(H){(0,O.Ub)(H)}const bn="firebase-heartbeat-store";let di=null;function Co(){return di||(di=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:(H,J)=>{0===J&&H.createObjectStore(bn)}}).catch(H=>{throw sr.create("storage-open",{originalErrorMessage:H.message})})),di}function it(){return(it=(0,h.Z)(function*(H){try{return(yield Co()).transaction(bn).objectStore(bn).get(Xr(H))}catch(J){throw sr.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function mt(H,J){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(H,J){try{const Qe=(yield Co()).transaction(bn,"readwrite");return yield Qe.objectStore(bn).put(J,Xr(H)),Qe.done}catch(Me){throw sr.create("storage-set",{originalErrorMessage:Me.message})}})).apply(this,arguments)}function Xr(H){return`${H.name}!${H.options.appId}`}class ar{constructor(J){this.container=J,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new G(Me),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var J=this;return(0,h.Z)(function*(){const Qe=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=ur();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ft&&!J._heartbeatsCache.heartbeats.some(_t=>_t.date===ft))return J._heartbeatsCache.heartbeats.push({date:ft,agent:Qe}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(_t=>{const sn=new Date(_t.date).valueOf();return Date.now()-sn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,h.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Me=ur(),{heartbeatsToSend:Qe,unsentEntries:ft}=function L(H,J=1024){const Me=[];let Qe=H.slice();for(const ft of H){const _t=Me.find(sn=>sn.agent===ft.agent);if(_t){if(_t.dates.push(ft.date),q(Me)>J){_t.dates.pop();break}}else if(Me.push({agent:ft.agent,dates:[ft.date]}),q(Me)>J){Me.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Qe}}(J._heartbeatsCache.heartbeats),_t=(0,ae.L)(JSON.stringify({version:2,heartbeats:Qe}));return J._heartbeatsCache.lastSentHeartbeatDate=Me,ft.length>0?(J._heartbeatsCache.heartbeats=ft,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),_t})()}}function ur(){return(new Date).toISOString().substring(0,10)}class G{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,h.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function $t(H){return it.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Me=this;return(0,h.Z)(function*(){var Qe;if(yield Me._canUseIndexedDBPromise){const _t=yield Me.read();return mt(Me.app,{lastSentHeartbeatDate:null!==(Qe=J.lastSentHeartbeatDate)&&void 0!==Qe?Qe:_t.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Me=this;return(0,h.Z)(function*(){var Qe;if(yield Me._canUseIndexedDBPromise){const _t=yield Me.read();return mt(Me.app,{lastSentHeartbeatDate:null!==(Qe=J.lastSentHeartbeatDate)&&void 0!==Qe?Qe:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...J.heartbeats]})}})()}}function q(H){return(0,ae.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Ce(H){vr(new Q.wA("platform-logger",J=>new ge(J),"PRIVATE")),vr(new Q.wA("heartbeat",J=>new ar(J),"PRIVATE")),hn(ie,"0.7.25",H),hn(ie,"0.7.25","esm2017"),hn("fire-js","")}("")},4859:(Ke,_e,N)=>{N.d(_e,{H0:()=>ie,wA:()=>O});var h=N(5861),Q=N(2090);class O{constructor($,B,ee){this.name=$,this.instanceFactory=B,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class ne{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const ee=new Q.BH;if(this.instancesDeferred.set(B,ee),this.isInitialized(B)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:B});He&&ee.resolve(He)}catch(He){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const ee=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),He=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Se){if(He)return null;throw Se}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function le(ce){return"EAGER"===ce.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(B){}for(const[B,ee]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(B);try{const Se=this.getOrInitializeService({instanceIdentifier:He});ee.resolve(Se)}catch(Se){}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...B.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,ee=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ee,options:B});for(const[Se,ke]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Se)&&ke.resolve(He);return He}onInit($,B){var ee;const He=this.normalizeInstanceIdentifier(B),Se=null!==(ee=this.onInitCallbacks.get(He))&&void 0!==ee?ee:new Set;Se.add($),this.onInitCallbacks.set(He,Se);const ke=this.instances.get(He);return ke&&$(ke,He),()=>{Se.delete($)}}invokeOnInitCallbacks($,B){const ee=this.onInitCallbacks.get(B);if(ee)for(const He of ee)try{He($,B)}catch(Se){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let ee=this.instances.get($);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=$,ce===ae?void 0:ce),options:B}),this.instances.set($,ee),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(ee,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ee)}catch(He){}var ce;return ee||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new ne($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(Ke,_e,N)=>{N.d(_e,{Am:()=>ce,Ub:()=>ie,Yd:()=>le,in:()=>Q});const h=[];var Q=(()=>{return($=Q||(Q={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Q;var $})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ae=Q.INFO,ne={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ge=($,B,...ee)=>{if(B<$.logLevel)return;const He=(new Date).toISOString(),Se=ne[B];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Se](`[${He}]  ${$.name}:`,...ee)};class le{constructor(B){this.name=B,this._logLevel=ae,this._logHandler=ge,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Q))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...B),this._logHandler(this,Q.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...B),this._logHandler(this,Q.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...B),this._logHandler(this,Q.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...B),this._logHandler(this,Q.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...B),this._logHandler(this,Q.ERROR,...B)}}function ie($){h.forEach(B=>{B.setLogLevel($)})}function ce($,B){for(const ee of h){let He=null;B&&B.level&&(He=O[B.level]),ee.userLogHandler=null===$?null:(Se,ke,...Ve)=>{const fe=Ve.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(Ge){return null}}).filter(be=>be).join(" ");ke>=(null!=He?He:Se.logLevel)&&$({level:Q[ke].toLowerCase(),message:fe,args:Ve,type:Se.name})}}}},8766:(Ke,_e,N)=>{N.d(_e,{Lj:()=>De,X3:()=>Ze});var h=N(5861);let O,ae;const le=new WeakMap,ie=new WeakMap,ce=new WeakMap,$=new WeakMap,B=new WeakMap;let Se={get(j,we,W){if(j instanceof IDBTransaction){if("done"===we)return ie.get(j);if("objectStoreNames"===we)return j.objectStoreNames||ce.get(j);if("store"===we)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return be(j[we])},set:(j,we,W)=>(j[we]=W,!0),has:(j,we)=>j instanceof IDBTransaction&&("done"===we||"store"===we)||we in j};function fe(j){return"function"==typeof j?function Ve(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...we){return j.apply(Ge(this),we),be(le.get(this))}:function(...we){return be(j.apply(Ge(this),we))}:function(we,...W){const re=j.call(Ge(this),we,...W);return ce.set(re,we.sort?we.sort():[we]),be(re)}}(j):(j instanceof IDBTransaction&&function He(j){if(ie.has(j))return;const we=new Promise((W,re)=>{const X=()=>{j.removeEventListener("complete",me),j.removeEventListener("error",se),j.removeEventListener("abort",se)},me=()=>{W(),X()},se=()=>{re(j.error||new DOMException("AbortError","AbortError")),X()};j.addEventListener("complete",me),j.addEventListener("error",se),j.addEventListener("abort",se)});ie.set(j,we)}(j),((j,we)=>we.some(W=>j instanceof W))(j,function ne(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Se):j)}function be(j){if(j instanceof IDBRequest)return function ee(j){const we=new Promise((W,re)=>{const X=()=>{j.removeEventListener("success",me),j.removeEventListener("error",se)},me=()=>{W(be(j.result)),X()},se=()=>{re(j.error),X()};j.addEventListener("success",me),j.addEventListener("error",se)});return we.then(W=>{W instanceof IDBCursor&&le.set(W,j)}).catch(()=>{}),B.set(we,j),we}(j);if($.has(j))return $.get(j);const we=fe(j);return we!==j&&($.set(j,we),B.set(we,j)),we}const Ge=j=>B.get(j);function Ze(j,we,{blocked:W,upgrade:re,blocking:X,terminated:me}={}){const se=indexedDB.open(j,we),Ne=be(se);return re&&se.addEventListener("upgradeneeded",ut=>{re(be(se.result),ut.oldVersion,ut.newVersion,be(se.transaction))}),W&&se.addEventListener("blocked",()=>W()),Ne.then(ut=>{me&&ut.addEventListener("close",()=>me()),X&&ut.addEventListener("versionchange",()=>X())}).catch(()=>{}),Ne}function De(j,{blocked:we}={}){const W=indexedDB.deleteDatabase(j);return we&&W.addEventListener("blocked",()=>we()),be(W).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function Ue(j,we){if(!(j instanceof IDBDatabase)||we in j||"string"!=typeof we)return;if(Be.get(we))return Be.get(we);const W=we.replace(/FromIndex$/,""),re=we!==W,X=Ie.includes(W);if(!(W in(re?IDBIndex:IDBObjectStore).prototype)||!X&&!Ee.includes(W))return;const me=function(){var se=(0,h.Z)(function*(Ne,...ut){const jt=this.transaction(Ne,X?"readwrite":"readonly");let Lt=jt.store;return re&&(Lt=Lt.index(ut.shift())),(yield Promise.all([Lt[W](...ut),X&&jt.done]))[0]});return function(ut){return se.apply(this,arguments)}}();return Be.set(we,me),me}!function ke(j){Se=j(Se)}(j=>mx(gx({},j),{get:(we,W,re)=>Ue(we,W)||j.get(we,W,re),has:(we,W)=>!!Ue(we,W)||j.has(we,W)}))},5861:(Ke,_e,N)=>{function h(O,ae,ne,ge,le,ie,ce){try{var $=O[ie](ce),B=$.value}catch(ee){return void ne(ee)}$.done?ae(B):Promise.resolve(B).then(ge,le)}function Q(O){return function(){var ae=this,ne=arguments;return new Promise(function(ge,le){var ie=O.apply(ae,ne);function ce(B){h(ie,ge,le,ce,$,"next",B)}function $(B){h(ie,ge,le,ce,$,"throw",B)}ce(void 0)})}}N.d(_e,{Z:()=>Q})}},Ke=>{Ke(Ke.s=678)}]);