"use strict";var nN=Object.defineProperty,rN=Object.defineProperties,iN=Object.getOwnPropertyDescriptors,lx=Object.getOwnPropertySymbols,sN=Object.prototype.hasOwnProperty,oN=Object.prototype.propertyIsEnumerable,cx=(Je,Ee,N)=>Ee in Je?nN(Je,Ee,{enumerable:!0,configurable:!0,writable:!0,value:N}):Je[Ee]=N,dx=(Je,Ee)=>{for(var N in Ee||(Ee={}))sN.call(Ee,N)&&cx(Je,N,Ee[N]);if(lx)for(var N of lx(Ee))oN.call(Ee,N)&&cx(Je,N,Ee[N]);return Je},hx=(Je,Ee)=>rN(Je,iN(Ee));(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(Je,Ee,N)=>{N.d(Ee,{Dh:()=>ie,GT:()=>ge,cc:()=>Se,hO:()=>He,on:()=>$,pX:()=>ne,xv:()=>ce});var h=N(5e3),J=N(127),O=N(5813);Je=N.hmd(Je);const ue=["ngOnDestroy"],ne=(be,Ge,Ze,De={})=>new Proxy(be,{get:(we,Ie)=>Ze.runOutsideAngular(()=>{var Be;if(be[Ie])return(null===(Be=null==De?void 0:De.spy)||void 0===Be?void 0:Be.get)&&De.spy.get(Ie,be[Ie]),be[Ie];if(ue.indexOf(Ie)>-1)return()=>{};const Ue=Ge.toPromise().then(j=>{const _e=j&&j[Ie];return"function"==typeof _e?_e.bind(j):_e&&_e.then?_e.then(W=>Ze.run(()=>W)):Ze.run(()=>_e)});return new Proxy(()=>{},{get:(j,_e)=>Ue[_e],apply:(j,_e,W)=>Ue.then(re=>{var X;const me=re&&re(...W);return(null===(X=null==De?void 0:De.spy)||void 0===X?void 0:X.apply)&&De.spy.apply(Ie,W,me),me})})})}),ge=(be,Ge)=>{Ge.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(De=>{Object.defineProperty(be.prototype,De,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,De))})})};class le{constructor(Ge){return Ge}}const ie=new h.OlP("angularfire2.app.options"),ce=new h.OlP("angularfire2.app.name");function $(be,Ge,Ze){const we="object"==typeof Ze&&Ze||{};we.name=we.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Be=J.Z.apps.filter(Ue=>Ue&&Ue.name===we.name)[0]||Ge.runOutsideAngular(()=>J.Z.initializeApp(be,we));try{JSON.stringify(be)!==JSON.stringify(Be.options)&&B("error",`${Be.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new le(Be)}const B=(be,...Ge)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)},ee={provide:le,useFactory:$,deps:[ie,h.R0b,[new h.FiY,ce]]};let He=(()=>{class be{constructor(Ze){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",h.q4F.full,Ze.toString())}static initializeApp(Ze,De){return{ngModule:be,providers:[{provide:ie,useValue:Ze},{provide:ce,useValue:De}]}}}return be.\u0275fac=function(Ze){return new(Ze||be)(h.LFG(h.Lbi))},be.\u0275mod=h.oAB({type:be}),be.\u0275inj=h.cJS({providers:[ee]}),be})();function Se(be,Ge,Ze,De,we){const[,Ie,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===be)||[];if(Ie)return function ke(be,Ge){try{return be.toString()===Ge.toString()}catch(Ze){return be===Ge}}(we,Be)||(fe("error",`${Ge} was already initialized on the ${Ze} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:we,was:Be})),Ie;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([be,Ue,we]),Ue}}const Ve=!!Je.hot,fe=(be,...Ge)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,Ee,N)=>{N.d(Ee,{q4:()=>Ia,iC:()=>Ph,HU:()=>Kc,vb:()=>$p,JM:()=>qo});var h=N(5e3),J=N(5867),O=N(5861),ue=N(9681),ne=N(2090),ge=N(4859),le=N(1877),ie=N(8766);const ce="@firebase/installations",$="0.5.9",ee=`w:${$}`,He="FIS_v2",Ge=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(b){return b instanceof ne.ZR&&b.code.includes("request-failed")}function De({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function we(b){return{token:b.token,requestStatus:2,expiresIn:re(b.expiresIn),creationTime:Date.now()}}function Ie(b,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(b,D){const F=(yield D.json()).error;return Ge.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function j(b,{refreshToken:D}){const x=Ue(b);return x.append("Authorization",function X(b){return`${He} ${b}`}(D)),x}function _e(b){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function re(b){return Number(b.replace("s","000"))}function me(b,D){return se.apply(this,arguments)}function se(){return(se=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const F=De(b),K=Ue(b),te=D.getImmediate({optional:!0});if(te){const ut=yield te.getHeartbeatsHeader();ut&&K.append("x-firebase-client",ut)}const Ke={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:He,appId:b.appId,sdkVersion:ee})},tt=yield _e(()=>fetch(F,Ke));if(tt.ok){const ut=yield tt.json();return{fid:ut.fid||x,registrationStatus:2,refreshToken:ut.refreshToken,authToken:we(ut.authToken)}}throw yield Ie("Create Installation",tt)})).apply(this,arguments)}function Re(b){return new Promise(D=>{setTimeout(D,b)})}const jt=/^[cdef][\w-]{21}$/;function We(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function Yt(b){return function at(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return jt.test(x)?x:""}catch(b){return""}}function mn(b){return`${b.appName}!${b.appId}`}const en=new Map;function Wt(b,D){const x=mn(b);Pt(x,D),function Wi(b,D){const x=function ar(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=b=>{Pt(b.data.key,b.data.fid)}),Zr}();x&&x.postMessage({key:b,fid:D}),function wr(){0===en.size&&Zr&&(Zr.close(),Zr=null)}()}(x,D)}function Pt(b,D){const x=en.get(b);if(x)for(const F of x)F(D)}let Zr=null;const Kr="firebase-installations-store";let di=null;function ft(){return di||(di=(0,ie.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Kr)}})),di}function Yr(b,D){return hn.apply(this,arguments)}function hn(){return(hn=(0,O.Z)(function*(b,D){const x=mn(b),K=(yield ft()).transaction(Kr,"readwrite"),te=K.objectStore(Kr),pe=yield te.get(x);return yield te.put(D,x),yield K.done,(!pe||pe.fid!==D.fid)&&Wt(b,D.fid),D})).apply(this,arguments)}function yn(b){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(b){const D=mn(b),F=(yield ft()).transaction(Kr,"readwrite");yield F.objectStore(Kr).delete(D),yield F.done})).apply(this,arguments)}function Qr(b,D){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(b,D){const x=mn(b),K=(yield ft()).transaction(Kr,"readwrite"),te=K.objectStore(Kr),pe=yield te.get(x),Ke=D(pe);return void 0===Ke?yield te.delete(x):yield te.put(Ke,x),yield K.done,Ke&&(!pe||pe.fid!==Ke.fid)&&Wt(b,Ke.fid),Ke})).apply(this,arguments)}function En(b){return hi.apply(this,arguments)}function hi(){return(hi=(0,O.Z)(function*(b){let D;const x=yield Qr(b.appConfig,F=>{const K=Co(F),te=$t(b,K);return D=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function Co(b){return Ws(b||{fid:We(),registrationStatus:0})}function $t(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ge.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(b,D){return gt.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:ur(b)}:{installationEntry:D}}function gt(){return(gt=(0,O.Z)(function*(b,D){try{const x=yield me(b,D);return Yr(b.appConfig,x)}catch(x){throw Ze(x)&&409===x.customData.serverCode?yield yn(b.appConfig):yield Yr(b.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function ur(b){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,O.Z)(function*(b){let D=yield Ut(b.appConfig);for(;1===D.registrationStatus;)yield Re(100),D=yield Ut(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield En(b);return F||x}return D})).apply(this,arguments)}function Ut(b){return Qr(b,D=>{if(!D)throw Ge.create("installation-not-found");return Ws(D)})}function Ws(b){return function lr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function cr(b,D){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const F=G(b,x),K=j(b,x),te=D.getImmediate({optional:!0});if(te){const ut=yield te.getHeartbeatsHeader();ut&&K.append("x-firebase-client",ut)}const Ke={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:ee,appId:b.appId}})},tt=yield _e(()=>fetch(F,Ke));if(tt.ok)return we(yield tt.json());throw yield Ie("Generate Auth Token",tt)})).apply(this,arguments)}function G(b,{fid:D}){return`${De(b)}/${D}/authTokens:generate`}function q(b){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(b,D=!1){let x;const F=yield Qr(b.appConfig,te=>{if(!_t(te))throw Ge.create("not-registered");const pe=te.authToken;if(!D&&sn(pe))return te;if(1===pe.requestStatus)return x=H(b,D),te;{if(!navigator.onLine)throw Ge.create("app-offline");const Ke=xn(te);return x=Ye(b,Ke),Ke}});return x?yield x:F.authToken})).apply(this,arguments)}function H(b,D){return Q.apply(this,arguments)}function Q(){return(Q=(0,O.Z)(function*(b,D){let x=yield Me(b.appConfig);for(;1===x.authToken.requestStatus;)yield Re(100),x=yield Me(b.appConfig);const F=x.authToken;return 0===F.requestStatus?q(b,D):F})).apply(this,arguments)}function Me(b){return Qr(b,D=>{if(!_t(D))throw Ge.create("not-registered");return function Er(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ye(b,D){return dt.apply(this,arguments)}function dt(){return(dt=(0,O.Z)(function*(b,D){try{const x=yield cr(b,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield Yr(b.appConfig,F),x}catch(x){if(!Ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Yr(b.appConfig,F)}else yield yn(b.appConfig);throw x}})).apply(this,arguments)}function _t(b){return void 0!==b&&2===b.registrationStatus}function sn(b){return 2===b.requestStatus&&!function yt(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function xn(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function oa(){return(oa=(0,O.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:F}=yield En(D);return F?F.catch(console.error):q(D).catch(console.error),x.fid})).apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(b,D=!1){const x=b;return yield kn(x),(yield q(x,D)).token})).apply(this,arguments)}function kn(b){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(b){const{registrationPromise:D}=yield En(b);D&&(yield D)})).apply(this,arguments)}function Do(b){return Ge.create("missing-app-config-values",{valueName:b})}const Fr="installations",ot=b=>{const D=b.getProvider("app").getImmediate(),x=function Kn(b){if(!b||!b.options)throw Do("App Configuration");if(!b.name)throw Do("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw Do(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,ue._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Jt=b=>{const D=b.getProvider("app").getImmediate(),x=(0,ue._getProvider)(D,Fr).getImmediate();return{getId:()=>function Ga(b){return oa.apply(this,arguments)}(x),getToken:K=>function qa(b){return aa.apply(this,arguments)}(x,K)}};(function Lr(){(0,ue._registerComponent)(new ge.wA(Fr,ot,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",Jt,"PRIVATE"))})(),(0,ue.registerVersion)(ce,$),(0,ue.registerVersion)(ce,$,"esm2017");const Di="@firebase/remote-config",_n=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kp{constructor(D,x,F,K){this.client=D,this.storage=x,this.storageCache=F,this.logger=K}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,K=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var x=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return K;D.eTag=K&&K.eTag;const te=yield x.client.fetch(D),pe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&pe.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(pe),te})()}}function bc(b=navigator){return b.languages&&b.languages[0]||b.language}class dr{constructor(D,x,F,K,te,pe){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=K,this.apiKey=te,this.appId=pe}fetch(D){var x=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},tt={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:x.appId,language_code:bc()},ut={method:"POST",headers:Ke,body:JSON.stringify(tt)},Ht=fetch(pe,ut),Et=new Promise((mr,us)=>{D.signal.addEventListener(()=>{const Ls=new Error("The operation was aborted.");Ls.name="AbortError",us(Ls)})});let Tn;try{yield Promise.race([Ht,Et]),Tn=yield Ht}catch(mr){let us="fetch-client-network";throw"AbortError"===mr.name&&(us="fetch-timeout"),_n.create(us,{originalErrorMessage:mr.message})}let Hn=Tn.status;const as=Tn.headers.get("ETag")||void 0;let Li,vi;if(200===Tn.status){let mr;try{mr=yield Tn.json()}catch(us){throw _n.create("fetch-client-parse",{originalErrorMessage:us.message})}Li=mr.entries,vi=mr.state}if("INSTANCE_STATE_UNSPECIFIED"===vi?Hn=500:"NO_CHANGE"===vi?Hn=304:("NO_TEMPLATE"===vi||"EMPTY_CONFIG"===vi)&&(Li={}),304!==Hn&&200!==Hn)throw _n.create("fetch-status",{httpStatus:Hn});return{status:Hn,eTag:as,config:Li}})()}}class Rp{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var K=this;return(0,O.Z)(function*(){yield function bs(b,D){return new Promise((x,F)=>{const K=Math.max(D-Date.now(),0),te=setTimeout(x,K);b.addEventListener(()=>{clearTimeout(te),F(_n.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const te=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),te}catch(te){if(!function Cc(b){if(!(b instanceof ne.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const pe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(pe),K.attemptFetch(D,pe)}})()}}class Tc{constructor(D,x,F,K,te){this.app=D,this._client=x,this._storageCache=F,this._storage=K,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ol(b,D){const x=b.target.error||void 0;return _n.create(D,{originalErrorMessage:x&&x.message})}const Cs="app_namespace_store";class Pp{constructor(D,x,F,K=function Op(){return new Promise((b,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{D(ol(F,"storage-open"))},x.onsuccess=F=>{b(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Cs,{keyPath:"compositeKey"})}}catch(x){D(_n.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,te)=>{const Ke=F.transaction([Cs],"readonly").objectStore(Cs),tt=x.createCompositeKey(D);try{const ut=Ke.get(tt);ut.onerror=Ht=>{te(ol(Ht,"storage-get"))},ut.onsuccess=Ht=>{const Et=Ht.target.result;K(Et?Et.value:void 0)}}catch(ut){te(_n.create("storage-get",{originalErrorMessage:ut&&ut.message}))}})})()}set(D,x){var F=this;return(0,O.Z)(function*(){const K=yield F.openDbPromise;return new Promise((te,pe)=>{const tt=K.transaction([Cs],"readwrite").objectStore(Cs),ut=F.createCompositeKey(D);try{const Ht=tt.put({compositeKey:ut,value:x});Ht.onerror=Et=>{pe(ol(Et,"storage-set"))},Ht.onsuccess=()=>{te()}}catch(Ht){pe(_n.create("storage-set",{originalErrorMessage:Ht&&Ht.message}))}})})()}delete(D){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,te)=>{const Ke=F.transaction([Cs],"readwrite").objectStore(Cs),tt=x.createCompositeKey(D);try{const ut=Ke.delete(tt);ut.onerror=Ht=>{te(ol(Ht,"storage-delete"))},ut.onsuccess=()=>{K()}}catch(ut){te(_n.create("storage-delete",{originalErrorMessage:ut&&ut.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Sc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),te=yield x;te&&(D.lastFetchStatus=te);const pe=yield F;pe&&(D.lastSuccessfulFetchTimestampMillis=pe);const Ke=yield K;Ke&&(D.activeConfig=Ke)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ka(){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(b){return!1}})).apply(this,arguments)}!function To(){(0,ue._registerComponent)(new ge.wA("remote-config",function b(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw _n.create("registration-window");if(!(0,ne.hl)())throw _n.create("indexed-db-unavailable");const{projectId:te,apiKey:pe,appId:Ke}=F.options;if(!te)throw _n.create("registration-project-id");if(!pe)throw _n.create("registration-api-key");if(!Ke)throw _n.create("registration-app-id");const tt=new Pp(Ke,F.name,x=x||"firebase"),ut=new Sc(tt),Ht=new le.Yd(Di);Ht.logLevel=le.in.ERROR;const Et=new dr(K,ue.SDK_VERSION,x,te,pe,Ke),Tn=new Rp(Et,tt),Hn=new kp(Tn,tt,ut,Ht),as=new Tc(F,Hn,ut,tt,Ht);return function tn(b){const D=(0,ne.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(as),as},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Di,"0.3.8"),(0,ue.registerVersion)(Di,"0.3.8","esm2017")}();const xc="/firebase-messaging-sw.js",hr="/firebase-cloud-messaging-push-scope",Ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ao="google.c.a.c_id",kc="google.c.a.c_l",xh="google.c.a.ts",Ya="google.c.a.e";var So=(()=>{return(b=So||(So={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",So;var b})();function br(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rc(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),K=new Uint8Array(F.length);for(let te=0;te<F.length;++te)K[te]=F.charCodeAt(te);return K}const Cr="fcm_token_details_db",ei="fcm_token_object_Store";function al(b){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Cr))return null;let D=null;return(yield(0,ie.X3)(Cr,5,{upgrade:(F=(0,O.Z)(function*(K,te,pe,Ke){var tt;if(te<2||!K.objectStoreNames.contains(ei))return;const ut=Ke.objectStore(ei),Ht=yield ut.index("fcmSenderId").get(b);if(yield ut.clear(),Ht)if(2===te){const Et=Ht;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;D={token:Et.fcmToken,createTime:null!==(tt=Et.createTime)&&void 0!==tt?tt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:br(Et.vapidKey)}}}else if(3===te){const Et=Ht;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:br(Et.auth),p256dh:br(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:br(Et.vapidKey)}}}else if(4===te){const Et=Ht;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:br(Et.auth),p256dh:br(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:br(Et.vapidKey)}}}}),function(te,pe,Ke,tt){return F.apply(this,arguments)})})).close(),yield(0,ie.Lj)(Cr),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),ul(D)?D:null;var F}),Nc.apply(this,arguments)}function ul(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ki="firebase-messaging-store";let kh=null;function nn(){return kh||(kh=(0,ie.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(ki)}})),kh}function ha(b){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(b){const D=Yn(b),F=yield(yield nn()).transaction(ki).objectStore(ki).get(D);if(F)return F;{const K=yield al(b.appConfig.senderId);if(K)return yield Zt(b,K),K}})).apply(this,arguments)}function Zt(b,D){return fa.apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(b,D){const x=Yn(b),K=(yield nn()).transaction(ki,"readwrite");return yield K.objectStore(ki).put(D,x),yield K.done,D})).apply(this,arguments)}function Qa(b){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(b){const D=Yn(b),F=(yield nn()).transaction(ki,"readwrite");yield F.objectStore(ki).delete(D),yield F.done})).apply(this,arguments)}function Yn({appConfig:b}){return b.appId}const cn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ri(b,D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(b,D){const x=yield ko(b),F=Ts(D),K={method:"POST",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Ni(b.appConfig),K)).json()}catch(pe){throw cn.create("token-subscribe-failed",{errorInfo:pe})}if(te.error)throw cn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw cn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Xs(b,D){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*(b,D){const x=yield ko(b),F=Ts(D.subscriptionOptions),K={method:"PATCH",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Ni(b.appConfig)}/${D.token}`,K)).json()}catch(pe){throw cn.create("token-update-failed",{errorInfo:pe})}if(te.error)throw cn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw cn.create("token-update-no-token");return te.token})).apply(this,arguments)}function pa(b,D){return pi.apply(this,arguments)}function pi(){return(pi=(0,O.Z)(function*(b,D){const F={method:"DELETE",headers:yield ko(b)};try{const te=yield(yield fetch(`${Ni(b.appConfig)}/${D}`,F)).json();if(te.error)throw cn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(K){throw cn.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Ni({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function ko(b){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ts({p256dh:b,auth:D,endpoint:x,vapidKey:F}){const K={web:{endpoint:x,auth:D,p256dh:b}};return F!==Ys&&(K.web.applicationPubKey=F),K}const dl=6048e5;function ga(b){return hl.apply(this,arguments)}function hl(){return(hl=(0,O.Z)(function*(b){const D=yield No(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:br(D.getKey("auth")),p256dh:br(D.getKey("p256dh"))},F=yield ha(b.firebaseDependencies);if(F){if(eu(F.subscriptionOptions,x))return Date.now()>=F.createTime+dl?fl(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield pa(b.firebaseDependencies,F.token)}catch(K){console.warn(K)}return Ae(b.firebaseDependencies,x)}return Ae(b.firebaseDependencies,x)})).apply(this,arguments)}function Ja(b){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,O.Z)(function*(b){const D=yield ha(b.firebaseDependencies);D&&(yield pa(b.firebaseDependencies,D.token),yield Qa(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function fl(b,D){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(b,D){try{const x=yield Xs(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Zt(b.firebaseDependencies,F),x}catch(x){throw yield Ja(b),x}})).apply(this,arguments)}function Ae(b,D){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(b,D){const F={token:yield Ri(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Zt(b,F),F.token})).apply(this,arguments)}function No(b,D){return un.apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rc(D)})})).apply(this,arguments)}function eu(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function eo(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function ti(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const F=D.notification.body;F&&(b.notification.body=F);const K=D.notification.image;K&&(b.notification.image=K)}(D,b),function pl(b,D){!D.data||(b.data=D.data)}(D,b),function gl(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const x=D.fcmOptions.link;x&&(b.fcmOptions.link=x);const F=D.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(D,b),D}function ml(b){return"object"==typeof b&&!!b&&Ao in b}function Oc(b,D){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function Qi(b){return cn.create("missing-app-config-values",{valueName:b})}Oc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Oc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fr{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Fp(b){if(!b||!b.options)throw Qi("App Configuration Object");if(!b.name)throw Qi("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of D)if(!x[F])throw Qi(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ni(b){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(xc,{scope:hr}),b.swRegistration.update().catch(()=>{})}catch(D){throw cn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function As(b,D){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield ni(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw cn.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function yl(b,D){return nu.apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Ys)})).apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(b,D){if(!navigator)throw cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw cn.create("permission-blocked");return yield yl(b,null==D?void 0:D.vapidKey),yield As(b,null==D?void 0:D.serviceWorkerRegistration),ga(b)})).apply(this,arguments)}function ma(b,D,x){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(b,D,x){const F=su(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Ao],message_name:x[kc],message_time:x[xh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function su(b){switch(b){case So.NOTIFICATION_CLICKED:return"notification_open";case So.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fc(){return(Fc=(0,O.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===So.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(eo(x)):b.onMessageHandler.next(eo(x)));const F=x.data;ml(F)&&"1"===F[Ya]&&(yield ma(b,x.messageType,F))})).apply(this,arguments)}const ou="@firebase/messaging",Lc=b=>{const D=new fr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Pc(b,D){return Fc.apply(this,arguments)}(D,x)),D},Oo=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function ru(b,D){return _l.apply(this,arguments)}(D,F)}};function au(){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vc(){(0,ue._registerComponent)(new ge.wA("messaging",Lc,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",Oo,"PRIVATE")),(0,ue.registerVersion)(ou,"0.9.13"),(0,ue.registerVersion)(ou,"0.9.13","esm2017")}();const Bc="analytics",Vp="firebase_id",Ji="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ro="https://www.googletagmanager.com/gtag/js",Nn=new le.Yd("@firebase/analytics");function jc(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function Up(b,D){const x=document.createElement("script");x.src=`${ro}?l=${b}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Po(b,D,x,F,K,te){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(b,D,x,F,K,te){const pe=F[K];try{if(pe)yield D[pe];else{const tt=(yield jc(x)).find(ut=>ut.measurementId===K);tt&&(yield D[tt.appId])}}catch(Ke){Nn.error(Ke)}b("config",K,te)})).apply(this,arguments)}function Bp(b,D,x,F,K){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,O.Z)(function*(b,D,x,F,K){try{let te=[];if(K&&K.send_to){let pe=K.send_to;Array.isArray(pe)||(pe=[pe]);const Ke=yield jc(x);for(const tt of pe){const ut=Ke.find(Et=>Et.measurementId===tt),Ht=ut&&D[ut.appId];if(!Ht){te=[];break}te.push(Ht)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),b("event",F,K||{})}catch(te){Nn.error(te)}})).apply(this,arguments)}function rn(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(ro))return D;return null}const it=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),va=new class On{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function $c(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Fo(b){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(b){var D;const{appId:x,apiKey:F}=b,K={method:"GET",headers:$c(F)},te=Ji.replace("{app-id}",x),pe=yield fetch(te,K);if(200!==pe.status&&304!==pe.status){let Ke="";try{const tt=yield pe.json();(null===(D=tt.error)||void 0===D?void 0:D.message)&&(Ke=tt.error.message)}catch(tt){}throw it.create("config-fetch-failed",{httpStatus:pe.status,responseMessage:Ke})}return pe.json()})).apply(this,arguments)}function vn(b){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(b,D=va,x){const{appId:F,apiKey:K,measurementId:te}=b.options;if(!F)throw it.create("no-app-id");if(!K){if(te)return{measurementId:te,appId:F};throw it.create("no-api-key")}const pe=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new wl;return setTimeout((0,O.Z)(function*(){Ke.abort()}),void 0!==x?x:6e4),Oi({appId:F,apiKey:K,measurementId:te},pe,Ke,D)})).apply(this,arguments)}function Oi(b,D,x){return wt.apply(this,arguments)}function wt(){return(wt=(0,O.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},F,K=va){const{appId:te,measurementId:pe}=b;try{yield Hc(F,D)}catch(Ke){if(pe)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pe} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:te,measurementId:pe};throw Ke}try{const Ke=yield Fo(b);return K.deleteThrottleMetadata(te),Ke}catch(Ke){if(!Gc(Ke)){if(K.deleteThrottleMetadata(te),pe)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pe} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:te,measurementId:pe};throw Ke}const tt=503===Number(Ke.customData.httpStatus)?(0,ne.$s)(x,K.intervalMillis,30):(0,ne.$s)(x,K.intervalMillis),ut={throttleEndTimeMillis:Date.now()+tt,backoffCount:x+1};return K.setThrottleMetadata(te,ut),Nn.debug(`Calling attemptFetch again in ${tt} millis`),Oi(b,ut,F,K)}})).apply(this,arguments)}function Hc(b,D){return new Promise((x,F)=>{const K=Math.max(D-Date.now(),0),te=setTimeout(x,K);b.addEventListener(()=>{clearTimeout(te),F(it.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Gc(b){if(!(b instanceof ne.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class wl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function El(){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(){if(!(0,ne.hl)())return Nn.warn(it.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(b){return Nn.warn(it.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Lo(){return(Lo=(0,O.Z)(function*(b,D,x,F,K,te,pe){var Ke;const tt=vn(b);tt.then(Hn=>{x[Hn.measurementId]=Hn.appId,b.options.measurementId&&Hn.measurementId!==b.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hn=>Nn.error(Hn)),D.push(tt);const ut=El().then(Hn=>{if(Hn)return F.getId()}),[Ht,Et]=yield Promise.all([tt,ut]);rn()||Up(te,Ht.measurementId),K("js",new Date);const Tn=null!==(Ke=null==pe?void 0:pe.config)&&void 0!==Ke?Ke:{};return Tn.origin="firebase",Tn.update=!0,null!=Et&&(Tn[Vp]=Et),K("config",Ht.measurementId,Tn),Ht.measurementId})).apply(this,arguments)}class so{constructor(D){this.app=D}_delete(){return delete Xn[this.app.options.appId],Promise.resolve()}}let Xn={},oo=[];const ao={};let Uo,Rs,Vo="dataLayer",Bo=!1;function es(b,D,x){!function wa(){const b=[];if((0,ne.ru)()&&b.push("This is a browser extension environment."),(0,ne.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,K)=>`(${K+1}) ${F}`).join(" "),x=it.create("invalid-analytics-context",{errorInfo:D});Nn.warn(x.message)}}();const F=b.options.appId;if(!F)throw it.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw it.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xn[F])throw it.create("already-exists",{id:F});if(!Bo){!function io(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(Vo);const{wrappedGtag:te,gtagCore:pe}=function jp(b,D,x,F,K){let te=function(...pe){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(te=window[K]),window[K]=function lu(b,D,x,F){function te(){return(te=(0,O.Z)(function*(pe,Ke,tt){try{"event"===pe?yield Bp(b,D,x,Ke,tt):"config"===pe?yield Po(b,D,x,F,Ke,tt):b("set",Ke)}catch(ut){Nn.error(ut)}})).apply(this,arguments)}return function K(pe,Ke,tt){return te.apply(this,arguments)}}(te,b,D,x),{gtagCore:te,wrappedGtag:window[K]}}(Xn,oo,ao,Vo,"gtag");Rs=te,Uo=pe,Bo=!0}return Xn[F]=function xs(b,D,x,F,K,te,pe){return Lo.apply(this,arguments)}(b,oo,ao,D,Uo,Vo,x),new so(b)}function er(){return(er=(0,O.Z)(function*(b,D,x,F,K){if(K&&K.global)b("event",x,F);else{const te=yield D;b("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function yi(){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(b){return!1}})).apply(this,arguments)}const Br="@firebase/analytics";!function Os(){(0,ue._registerComponent)(new ge.wA(Bc,(D,{options:x})=>es(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function b(D){try{const x=D.getProvider(Bc).getImmediate();return{logEvent:(F,K,te)=>function jo(b,D,x,F){b=(0,ne.m9)(b),function uo(b,D,x,F,K){return er.apply(this,arguments)}(Rs,Xn[b.app.options.appId],D,x,F).catch(K=>Nn.error(K))}(x,F,K,te)}}catch(x){throw it.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ue.registerVersion)(Br,"0.7.9"),(0,ue.registerVersion)(Br,"0.7.9","esm2017")}();var zc=N(4408),Dl=N(7565);const Ea=new class Dn extends Dl.v{}(class rs extends zc.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var Wc=N(4986),Oh=N(8505),Tr=N(9468),Ar=N(5363);const Ia=new h.GfV("7.3.0"),$o="__angularfire_symbol__analyticsIsSupportedValue",is="__angularfire_symbol__analyticsIsSupported",Ps="__angularfire_symbol__remoteConfigIsSupportedValue",ss="__angularfire_symbol__remoteConfigIsSupported",Ho="__angularfire_symbol__messagingIsSupportedValue",St="__angularfire_symbol__messagingIsSupported";function qo(b,D,x){if(D){if(1===D.length)return D[0];const te=D.filter(pe=>pe.app===x);if(1===te.length)return te[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[is]||(globalThis[is]=yi().then(b=>globalThis[$o]=b).catch(()=>globalThis[$o]=!1)),globalThis[St]||(globalThis[St]=au().then(b=>globalThis[Ho]=b).catch(()=>globalThis[Ho]=!1)),globalThis[ss]||(globalThis[ss]=Ka().then(b=>globalThis[Ps]=b).catch(()=>globalThis[Ps]=!1));const $p=(b,D)=>{const x=D?[D]:(0,J.C6)(),F=[];return x.forEach(K=>{K.container.getProvider(b).instances.forEach(pe=>{F.includes(pe)||F.push(pe)})}),F};function os(){}class _i{constructor(D,x=Ea){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const K=this.zone;return this.delegate.schedule(function(pe){K.runGuarded(()=>{D.apply(this,[pe])})},x,F)}}class hu{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",os,{},os,os)),x.pipe((0,Oh.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Kc=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new _i(Zone.current)),this.insideAngular=x.run(()=>new _i(Zone.current,Wc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Fi(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Ph(b){return Fi(),function Fs(b){return function(x){return(x=x.lift(new hu(b.ngZone))).pipe((0,Tr.R)(b.outsideAngular),(0,Ar.Q)(b.insideAngular))}}(Fi())(b)}},2090:(Je,Ee,N)=>{N.d(Ee,{$s:()=>Ut,BH:()=>He,G6:()=>Ue,L:()=>ie,LL:()=>se,Mn:()=>Ie,Sg:()=>Se,UG:()=>fe,US:()=>ge,ZB:()=>B,ZR:()=>me,b$:()=>Ze,d:()=>De,eu:()=>_e,hl:()=>j,jU:()=>be,m9:()=>cr,ne:()=>di,pd:()=>vs,r3:()=>vr,ru:()=>Ge,tV:()=>ce,uI:()=>Ve,vZ:()=>Zr,w1:()=>we,xO:()=>wr,xb:()=>Pt,z$:()=>ke,zI:()=>W,zd:()=>Ci});const ue=function(L){const G=[];let q=0;for(let Ce=0;Ce<L.length;Ce++){let H=L.charCodeAt(Ce);H<128?G[q++]=H:H<2048?(G[q++]=H>>6|192,G[q++]=63&H|128):55296==(64512&H)&&Ce+1<L.length&&56320==(64512&L.charCodeAt(Ce+1))?(H=65536+((1023&H)<<10)+(1023&L.charCodeAt(++Ce)),G[q++]=H>>18|240,G[q++]=H>>12&63|128,G[q++]=H>>6&63|128,G[q++]=63&H|128):(G[q++]=H>>12|224,G[q++]=H>>6&63|128,G[q++]=63&H|128)}return G},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,G){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let H=0;H<L.length;H+=3){const Q=L[H],Me=H+1<L.length,Ye=Me?L[H+1]:0,dt=H+2<L.length,_t=dt?L[H+2]:0;let xn=(15&Ye)<<2|_t>>6,Er=63&_t;dt||(Er=64,Me||(xn=64)),Ce.push(q[Q>>2],q[(3&Q)<<4|Ye>>4],q[xn],q[Er])}return Ce.join("")},encodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(L):this.encodeByteArray(ue(L),G)},decodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(L):function(L){const G=[];let q=0,Ce=0;for(;q<L.length;){const H=L[q++];if(H<128)G[Ce++]=String.fromCharCode(H);else if(H>191&&H<224){const Q=L[q++];G[Ce++]=String.fromCharCode((31&H)<<6|63&Q)}else if(H>239&&H<365){const dt=((7&H)<<18|(63&L[q++])<<12|(63&L[q++])<<6|63&L[q++])-65536;G[Ce++]=String.fromCharCode(55296+(dt>>10)),G[Ce++]=String.fromCharCode(56320+(1023&dt))}else{const Q=L[q++],Me=L[q++];G[Ce++]=String.fromCharCode((15&H)<<12|(63&Q)<<6|63&Me)}}return G.join("")}(this.decodeStringToByteArray(L,G))},decodeStringToByteArray(L,G){this.init_();const q=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let H=0;H<L.length;){const Q=q[L.charAt(H++)],Ye=H<L.length?q[L.charAt(H)]:0;++H;const _t=H<L.length?q[L.charAt(H)]:64;++H;const yt=H<L.length?q[L.charAt(H)]:64;if(++H,null==Q||null==Ye||null==_t||null==yt)throw Error();Ce.push(Q<<2|Ye>>4),64!==_t&&(Ce.push(Ye<<4&240|_t>>2),64!==yt&&Ce.push(_t<<6&192|yt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},ie=function(L){return function(L){const G=ue(L);return ge.encodeByteArray(G,!0)}(L).replace(/\./g,"")},ce=function(L){try{return ge.decodeString(L,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(L,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return G}for(const q in G)!G.hasOwnProperty(q)||!ee(q)||(L[q]=B(L[q],G[q]));return L}function ee(L){return"__proto__"!==L}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,q)=>{this.resolve=G,this.reject=q})}wrapCallback(G){return(q,Ce)=>{q?this.reject(q):this.resolve(Ce),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(q):G(q,Ce))}}}function Se(L,G){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=G||"demo-project",H=L.iat||0,Q=L.sub||L.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:H,exp:H+3600,auth_time:H,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ie(JSON.stringify({alg:"none",type:"JWT"})),ie(JSON.stringify(Me)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function be(){return"object"==typeof self&&self.self===self}function Ge(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return ke().indexOf("Electron/")>=0}function we(){const L=ke();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ie(){return ke().indexOf("MSAppHost/")>=0}function Ue(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function _e(){return new Promise((L,G)=>{try{let q=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(Ce);H.onsuccess=()=>{H.result.close(),q||self.indexedDB.deleteDatabase(Ce),L(!0)},H.onupgradeneeded=()=>{q=!1},H.onerror=()=>{var Q;G((null===(Q=H.error)||void 0===Q?void 0:Q.message)||"")}}catch(q){G(q)}})}function W(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(G,q,Ce){super(q),this.code=G,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(G,q,Ce){this.service=G,this.serviceName=q,this.errors=Ce}create(G,...q){const Ce=q[0]||{},H=`${this.service}/${G}`,Q=this.errors[G],Me=Q?function Re(L,G){return L.replace(at,(q,Ce)=>{const H=G[Ce];return null!=H?String(H):`<${Ce}?>`})}(Q,Ce):"Error";return new me(H,`${this.serviceName}: ${Me} (${H}).`,Ce)}}const at=/\{\$([^}]+)}/g;function vr(L,G){return Object.prototype.hasOwnProperty.call(L,G)}function Pt(L){for(const G in L)if(Object.prototype.hasOwnProperty.call(L,G))return!1;return!0}function Zr(L,G){if(L===G)return!0;const q=Object.keys(L),Ce=Object.keys(G);for(const H of q){if(!Ce.includes(H))return!1;const Q=L[H],Me=G[H];if(ar(Q)&&ar(Me)){if(!Zr(Q,Me))return!1}else if(Q!==Me)return!1}for(const H of Ce)if(!q.includes(H))return!1;return!0}function ar(L){return null!==L&&"object"==typeof L}function wr(L){const G=[];for(const[q,Ce]of Object.entries(L))Array.isArray(Ce)?Ce.forEach(H=>{G.push(encodeURIComponent(q)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(q)+"="+encodeURIComponent(Ce));return G.length?"&"+G.join("&"):""}function Ci(L){const G={};return L.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[H,Q]=Ce.split("=");G[decodeURIComponent(H)]=decodeURIComponent(Q)}}),G}function vs(L){const G=L.indexOf("?");if(!G)return"";const q=L.indexOf("#",G);return L.substring(G,q>0?q:void 0)}function di(L,G){const q=new ft(L,G);return q.subscribe.bind(q)}class ft{constructor(G,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{G(this)}).catch(Ce=>{this.error(Ce)})}next(G){this.forEachObserver(q=>{q.next(G)})}error(G){this.forEachObserver(q=>{q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,q,Ce){let H;if(void 0===G&&void 0===q&&void 0===Ce)throw new Error("Missing Observer.");H=function hn(L,G){if("object"!=typeof L||null===L)return!1;for(const q of G)if(q in L&&"function"==typeof L[q])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:q,complete:Ce},void 0===H.next&&(H.next=yn),void 0===H.error&&(H.error=yn),void 0===H.complete&&(H.complete=yn);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Me){}}),this.observers.push(H),Q}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,G)}sendOne(G,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{q(this.observers[G])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}function Ut(L,G=1e3,q=2){const Ce=G*Math.pow(q,L),H=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+H)}function cr(L){return L&&L._delegate?L._delegate:L}},3138:(Je,Ee,N)=>{var h=N(5e3);let J=null;function O(){return J}const le=new h.OlP("DocumentToken");let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ce(){return(0,h.LFG)(B)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let B=(()=>{class n extends ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ee()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ee()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function He(){return new B((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(n){const e=(0,h.LFG)(le).location;return new Ze((0,h.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new h.OlP("appBaseHref");let Ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie),h.LFG(Ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie),h.LFG(Ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(Ue(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Se,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ie(){return new we((0,h.LFG)(fe),(0,h.LFG)(ie))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let Xr=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Es{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Es(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Ks(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ks(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ks(n,e){n.context.$implicit=e.item}let fn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Wa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Wa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class tn{constructor(){this.$implicit=null,this.ngIf=null}}function Wa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class bs{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Cc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Rp=new Cc,Ki=new bs;let Dc=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return Rp;if((0,h.F4k)(t))return Ki;throw function dr(n,e){return new h.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})(),Ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Mo(n){return"server"===n}let ul=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new xo((0,h.LFG)(le),window)}),n})();class xo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ki(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ll(this.window.history)||ll(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ll(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Js extends class ha extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){J||(J=n)}(new Js)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fa(){return Zt=Zt||document.querySelector("base"),Zt?Zt.getAttribute("href"):null}();return null==t?null:function Ds(n){Qa=Qa||document.createElement("a"),Qa.setAttribute("href",n);const e=Qa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function la(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Qa,Zt=null;const Yn=new h.OlP("TRANSITION_ID"),cn=[{provide:h.ip1,useFactory:function cl(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Yn,le,h.zs3],multi:!0}];class Ri{static init(){(0,h.VLi)(new Ri)}addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Qn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Xs=new h.OlP("EventManagerPlugins");let Yi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class pa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let pi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ni=(()=>{class n extends pi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ko),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ko))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ko(n){O().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ts=/%COMP%/g;function Ro(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ro(n,o,t):(o=o.replace(Ts,n),t.push(o))}return t}function Ae(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let No=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new un(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ti(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new pl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ro(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Yi),h.LFG(Ni),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class un{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=pt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=pt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ae(r)):this.eventManager.addEventListener(e,t,Ae(r))}}class ti extends un{constructor(e,t,r,o){super(e),this.component=r;const u=Ro(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Xa(n){return"_ngcontent-%COMP%".replace(Ts,n)}(o+"-"+r.id),this.hostAttr=function fl(n){return"_nghost-%COMP%".replace(Ts,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class pl extends un{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ro(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gl=(()=>{class n extends pa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ml=["alt","control","meta","shift"],Fp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ni=(()=>{class n extends pa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(ml.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function tu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Qi.hasOwnProperty(e)&&(e=Qi[e]))}return Fp[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ml.forEach(u=>{u!=o&&fr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ru=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function As(){Js.makeCurrent(),Ri.init()},multi:!0},{provide:le,useFactory:function yl(){return(0,h.RDi)(document),document},deps:[]}]),_l=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function gi(){return new h.qLn},deps:[]},{provide:Xs,useClass:gl,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:Xs,useClass:ni,multi:!0,deps:[le]},{provide:No,useClass:No,deps:[Yi,Ni,h.AFp]},{provide:h.FYo,useExisting:No},{provide:pi,useExisting:Ni},{provide:Ni,useClass:Ni,deps:[le]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Yi,useClass:Yi,deps:[Xs,h.R0b]},{provide:class nn{},useClass:Qn,deps:[]}];let ma=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Yn,useExisting:h.AFp},cn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:_l,imports:[Ya,h.hGG]}),n})();"undefined"!=typeof window&&window;var rn=N(8996),_a=N(7669);function it(...n){const e=(0,_a.yG)(n);return(0,rn.D)(n,e)}var Dr=N(7579);class mi extends Dr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var On=N(8306);const{isArray:va}=Array,{getPrototypeOf:$c,prototype:Fo,keys:Ss}=Object;function vn(n){if(1===n.length){const e=n[0];if(va(e))return{args:e,keys:null};if(function Ms(n){return n&&"object"==typeof n&&$c(n)===Fo}(e)){const t=Ss(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Oi=N(4671),wt=N(4004);const{isArray:Hc}=Array;function wl(n){return(0,wt.U)(e=>function Gc(n,e){return Hc(e)?n(...e):n(e)}(n,e))}function El(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Jn=N(5403),xs=N(9672);function Xn(n,e,t){n?(0,xs.f)(t,n,e):e()}var oo=N(576);function ao(n,e){const t=(0,oo.m)(n)?n:()=>n,r=o=>o.error(t());return new On.y(e?o=>e.schedule(r,0,o):r)}const ks=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Uo=N(8189);function Bo(...n){return function Rs(){return(0,Uo.J)(1)}()((0,rn.D)(n,(0,_a.yG)(n)))}var Il=N(8421);function wa(n){return new On.y(e=>{(0,Il.Xf)(n()).subscribe(e)})}var es=N(515),uo=N(727),er=N(4482);function bl(){return(0,er.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Jn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ns extends On.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,er.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new uo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Jn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=uo.w0.EMPTY)}return e}refCount(){return bl()(this)}}function Pn(n,e){return(0,er.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Jn.x)(r,E=>{null==o||o.unsubscribe();let C=0;const A=u++;(0,Il.Xf)(n(E,A)).subscribe(o=(0,Jn.x)(r,k=>r.next(e?e(E,k,A,C++):k),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var ts=N(5698);function lo(...n){const e=(0,_a.yG)(n);return(0,er.e)((t,r)=>{(e?Bo(n,t,e):Bo(n,t)).subscribe(r)})}function ns(n,e,t,r,o){return(u,d)=>{let m=t,E=e,C=0;u.subscribe((0,Jn.x)(d,A=>{const k=C++;E=m?n(E,A,k):(m=!0,A),r&&d.next(E)},o&&(()=>{m&&d.next(E),d.complete()})))}}function Pi(n,e){return(0,er.e)(ns(n,e,arguments.length>=2,!0))}function tr(n,e){return(0,er.e)((t,r)=>{let o=0;t.subscribe((0,Jn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function ri(n){return(0,er.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Jn.x)(t,void 0,void 0,d=>{u=(0,Il.Xf)(n(d,ri(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Cn=N(5577);function yi(n,e){return(0,oo.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function cu(n){return n<=0?()=>es.E:(0,er.e)((e,t)=>{let r=[];e.subscribe((0,Jn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Cl(n=pn){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,Jn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function pn(){return new ks}function Nh(n){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,Jn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function jo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?tr((o,u)=>n(o,u,r)):Oi.y,(0,ts.q)(1),t?Nh(e):Cl(()=>new ks))}var Br=N(8505);class Os{constructor(e,t){this.id=e,this.url=t}}class zc extends Os{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rs extends Os{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Dl extends Os{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dn extends Os{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ea extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class du extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wc extends Os{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oh extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ia{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $o{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class is{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ss{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ho{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const St="primary";class Zc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Go(n){return new Zc(n)}const pr="ngNavigationCancelingError";function ba(n){const e=Error("NavigationCancelingError: "+n);return e[pr]=!0,e}function $p(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function _i(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!hu(n[o],e[o]))return!1;return!0}function hu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Kc(n){return Array.prototype.concat.apply([],n)}function Fi(n){return n.length>0?n[n.length-1]:null}function an(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function gr(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,rn.D)(Promise.resolve(n)):it(n)}const Ph={exact:function b(n,e,t){if(!ut(n.segments,e.segments)||!K(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!b(n.children[r],e.children[r],t))return!1;return!0},subset:x},Fs={exact:function Ca(n,e){return _i(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hu(n[t],e[t]))},ignored:()=>!0};function zo(n,e,t){return Ph[t.paths](n.root,e.root,t.matrixParams)&&Fs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function x(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ut(o,t)||e.hasChildren()||!K(o,t,r))}if(n.segments.length===t.length){if(!ut(n.segments,t)||!K(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!x(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ut(n.segments,o)&&K(n.segments,o,r)&&n.children[St])&&F(n.children[St],e,u,r)}}function K(n,e,t){return e.every((r,o)=>Fs[t](n[o].parameters,r.parameters))}class te{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Go(this.queryParams)),this._queryParamMap}toString(){return Hn.serialize(this)}}class pe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,an(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return as(this)}}class Ke{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Go(this.parameters)),this._parameterMap}toString(){return Sl(this)}}function ut(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Et{}class Tn{parse(e){const t=new Hp(e);return new te(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Li(e.root,!0)}`,r=function Fh(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${mr(t)}=${mr(o)}`).join("&"):`${mr(t)}=${mr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function us(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Hn=new Tn;function as(n){return n.segments.map(e=>Sl(e)).join("/")}function Li(n,e){if(!n.hasChildren())return as(n);if(e){const t=n.children[St]?Li(n.children[St],!1):"",r=[];return an(n.children,(o,u)=>{u!==St&&r.push(`${u}:${Li(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ht(n,e){let t=[];return an(n.children,(r,o)=>{o===St&&(t=t.concat(e(r,o)))}),an(n.children,(r,o)=>{o!==St&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===St?[Li(n.children[St],!1)]:[`${o}:${Li(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${as(n)}/${t[0]}`:`${as(n)}/(${t.join("//")})`}}function vi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mr(n){return vi(n).replace(/%3B/gi,";")}function Ls(n){return vi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Al(n){return decodeURIComponent(n)}function Qc(n){return Al(n.replace(/\+/g,"%20"))}function Sl(n){return`${Ls(n.path)}${function Jc(n){return Object.keys(n).map(e=>`;${Ls(e)}=${Ls(n[e])}`).join("")}(n.parameters)}`}const Lh=/^[^\/()?;=#]+/;function Xc(n){const e=n.match(Lh);return e?e[0]:""}const fu=/^[^=?&#]+/,Vh=/^[^&#]+/;class Hp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[St]=new pe(e,t)),r}parseSegment(){const e=Xc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ke(Al(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Xc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Xc(this.remaining);o&&(r=o,this.capture(r))}e[Al(t)]=Al(r)}parseQueryParam(e){const t=function Ml(n){const e=n.match(fu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function f0(n){const e=n.match(Vh);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Qc(t),u=Qc(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Xc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=St);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[St]:new pe([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Uh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Gp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return pu(e,this._root).map(t=>t.value)}}function Gp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Gp(n,t);if(r)return r}return null}function pu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pu(n,t);if(r.length)return r.unshift(e),r}return[]}class co{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xl extends Uh{constructor(e,t){super(e),this.snapshot=t,nd(this,e)}toString(){return this.snapshot.toString()}}function ed(n,e){const t=function mu(n,e){const d=new ho([],{},{},"",{},St,e,null,n.root,-1,{});return new td("",new co(d,[]))}(n,e),r=new mi([new Ke("",{})]),o=new mi({}),u=new mi({}),d=new mi({}),m=new mi(""),E=new yu(r,o,d,m,u,St,e,t.root);return E.snapshot=t.root,new xl(new co(E,[]),t)}class yu{constructor(e,t,r,o,u,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>Go(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>Go(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function p0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ho{constructor(e,t,r,o,u,d,m,E,C,A,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=A,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Go(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Go(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class td extends Uh{constructor(e,t){super(t),this.url=e,nd(this,t)}toString(){return Bh(this._root)}}function nd(n,e){e.value._routerState=n,e.children.forEach(t=>nd(n,t))}function Bh(n){const e=n.children.length>0?` { ${n.children.map(Bh).join(", ")} } `:"";return`${n.value}${e}`}function rd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_i(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_i(e.params,t.params)||n.params.next(t.params),function os(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_i(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_i(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function id(n,e){const t=_i(n.params,e.params)&&function tt(n,e){return ut(n,e)&&n.every((t,r)=>_i(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||id(n.parent,e.parent))}function kl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function dy(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return kl(n,r,o);return kl(n,r)})}(n,e,t);return new co(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>kl(n,m)),d}}const r=function hy(n){return new yu(new mi(n.url),new mi(n.params),new mi(n.queryParams),new mi(n.fragment),new mi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>kl(n,u));return new co(r,o)}}function wi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fo(n){return"object"==typeof n&&null!=n&&n.outlets}function Rl(n,e,t,r,o){let u={};if(r&&an(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new te(t,u,o);const d=py(n,e,t);return new te(d,u,o)}function py(n,e,t){const r={};return an(n.children,(o,u)=>{r[u]=o===e?t:py(o,e,t)}),new pe(n.segments,r)}class Wp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wi(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(fo);if(o&&o!==Fi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Kp(n,e,t){if(n||(n=new pe([],{})),0===n.segments.length&&n.hasChildren())return od(n,e,t);const r=function gy(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(fo(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!$h(E,C,d))return u;r+=2}else{if(!$h(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new pe(n.segments.slice(0,r.pathIndex),{});return u.children[St]=new pe(n.segments.slice(r.pathIndex),n.children),od(u,0,o)}return r.match&&0===o.length?new pe(n.segments,{}):r.match&&!n.hasChildren()?my(n,e,t):r.match?od(n,0,o):my(n,e,t)}function od(n,e,t){if(0===t.length)return new pe(n.segments,{});{const r=function Zp(n){return fo(n[0])?n[0].outlets:{[St]:n}}(t),o={};return an(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Kp(n.children[d],e,u))}),an(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new pe(n.segments,o)}}function my(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(fo(u)){const E=Da(u.outlets);return new pe(r,E)}if(0===o&&wi(t[0])){r.push(new Ke(n.segments[e].path,Nl(t[0]))),o++;continue}const d=fo(u)?u.outlets[St]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&wi(m)?(r.push(new Ke(d,Nl(m))),o+=2):(r.push(new Ke(d,{})),o++)}return new pe(r,{})}function Da(n){const e={};return an(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=my(new pe([],{}),0,t))}),e}function Nl(n){const e={};return an(n,(t,r)=>e[r]=`${t}`),e}function $h(n,e,t){return n==t.path&&_i(e,t.parameters)}class Ol{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=gu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),an(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=gu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=gu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=gu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new ss(u.value.snapshot))}),e.children.length&&this.forwardEvent(new is(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(rd(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),rd(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function ad(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class ud{constructor(e,t){this.routes=e,this.module=t}}function po(n){return"function"==typeof n}function _u(n){return n instanceof te}const ld=Symbol("INITIAL_VALUE");function cd(){return Pn(n=>function Lo(...n){const e=(0,_a.yG)(n),t=(0,_a.jO)(n),{args:r,keys:o}=vn(n);if(0===r.length)return(0,rn.D)([],e);const u=new On.y(function so(n,e,t=Oi.y){return r=>{Xn(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let E=0;E<o;E++)Xn(e,()=>{const C=(0,rn.D)(n[E],e);let A=!1;C.subscribe((0,Jn.x)(r,k=>{u[E]=k,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>El(o,d):Oi.y));return t?u.pipe(wl(t)):u}(n.map(e=>e.pipe((0,ts.q)(1),lo(ld)))).pipe(Pi((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==ld?o:(u===ld&&(r=!0),r||!1!==u&&d!==t.length-1&&!_u(u)?o:u),e)},ld),tr(e=>e!==ld),(0,wt.U)(e=>_u(e)?e:!0===e),(0,ts.q)(1)))}class Qp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new vu,this.attachRef=null}}class vu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Qp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let dd=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||St,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new yy(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vu),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class yy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===yu?this.route:e===vu?this.childContexts:this.parent.get(e,t)}}let Jp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[dd],encapsulation:2}),n})();function Fl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];wu(r,_y(e,r))}}function wu(n,e){n.children&&Fl(n.children,e)}function _y(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ll(n){const e=n.children&&n.children.map(Ll),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=Jp),t}function jr(n){return n.outlet||St}function An(n,e){const t=n.filter(r=>jr(r)===e);return t.push(...n.filter(r=>jr(r)!==e)),t}const Xp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Xp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||$p)(t,n,e);if(!u)return Object.assign({},Xp);const d={};an(u.posParams,(E,C)=>{d[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ta(n,e,t,r,o="corrected"){if(t.length>0&&function wy(n,e,t){return t.some(r=>Wo(n,e,r)&&jr(r)!==St)}(n,t,r)){const d=new pe(e,function vy(n,e,t,r){const o={};o[St]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&jr(u)!==St){const d=new pe([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[jr(u)]=d}return o}(n,e,r,new pe(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Ey(n,e,t){return t.some(r=>Wo(n,e,r))}(n,t,r)){const d=new pe(n.segments,function eg(n,e,t,r,o,u){const d={};for(const m of r)if(Wo(n,t,m)&&!o[jr(m)]){const E=new pe([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[jr(m)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new pe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Wo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function tg(n,e,t,r){return!!(jr(n)===r||r!==St&&Wo(e,t,n))&&("**"===n.path||hd(e,n,t).matched)}function ng(n,e,t){return 0===e.length&&!n.children[t]}class qh{constructor(e){this.segmentGroup=e||null}}class Eu{constructor(e){this.urlTree=e}}function Gn(n){return ao(new qh(n))}function fd(n){return ao(new Eu(n))}class Iu{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Ta(this.urlTree.root,[],[],this.config).segmentGroup,t=new pe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,St).pipe((0,wt.U)(u=>this.createUrlTree(Vl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ri(u=>{if(u instanceof Eu)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof qh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,St).pipe((0,wt.U)(o=>this.createUrlTree(Vl(o),e.queryParams,e.fragment))).pipe(ri(o=>{throw o instanceof qh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new pe([],{[St]:e}):e;return new te(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(u=>new pe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,rn.D)(o).pipe(yi(u=>{const d=r.children[u],m=An(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,wt.U)(E=>({segment:E,outlet:u})))}),Pi((u,d)=>(u[d.outlet]=d.segment,u),{}),function cy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?tr((o,u)=>n(o,u,r)):Oi.y,cu(1),t?Nh(e):Cl(()=>new ks))}())}expandSegment(e,t,r,o,u,d){return(0,rn.D)(r).pipe(yi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(ri(C=>{if(C instanceof qh)return it(null);throw C}))),jo(m=>!!m),ri((m,E)=>{if(m instanceof ks||"EmptyError"===m.name)return ng(t,o,u)?it(new pe([],{})):Gn(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return tg(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Gn(t):Gn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?fd(u):this.lineralizeSegments(r,u).pipe((0,Cn.z)(d=>{const m=new pe(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:A}=hd(t,o,u);if(!m)return Gn(t);const k=this.applyRedirectCommands(E,o.redirectTo,A);return o.redirectTo.startsWith("/")?fd(k):this.lineralizeSegments(o,k).pipe((0,Cn.z)(V=>this.expandSegment(e,t,r,V.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?it(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,wt.U)(k=>(r._loadedConfig=k,new pe(o,{})))):it(new pe(o,{}));const{matched:d,consumedSegments:m,remainingSegments:E}=hd(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Cn.z)(A=>{const k=A.module,V=A.routes,{segmentGroup:Z,slicedSegments:ae}=Ta(t,m,E,V),Ne=new pe(Z.segments,Z.children);if(0===ae.length&&Ne.hasChildren())return this.expandChildren(k,V,Ne).pipe((0,wt.U)(Ot=>new pe(m,Ot)));if(0===V.length&&0===ae.length)return it(new pe(m,{}));const Le=jr(r)===u;return this.expandSegment(k,Ne,V,ae,Le?St:u,!0).pipe((0,wt.U)(Rt=>new pe(m.concat(Rt.segments),Rt.children)))})):Gn(t)}getChildConfig(e,t,r){return t.children?it(new ud(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?it(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,wt.U)(u=>(t._loadedConfig=u,u))):function pd(n){return ao(ba(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):it(new ud([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?it(o.map(d=>{const m=e.get(d);let E;if(function y0(n){return n&&po(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!po(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return gr(E)})).pipe(cd(),(0,Br.b)(d=>{if(!_u(d))return;const m=ba(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,wt.U)(d=>!0===d)):it(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return it(r);if(o.numberOfChildren>1||!o.children[St])return ao(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[St]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new te(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return an(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return an(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new pe(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Vl(n){const e={};for(const r of Object.keys(n.children)){const u=Vl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Wh(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new pe(n.segments.concat(e.segments),e.children)}return n}(new pe(n.segments,e))}class $r{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zo{constructor(e,t){this.component=e,this.route=t}}function Zh(n,e,t){const r=n._root;return Ul(r,e?e._root:null,t,[r.value])}function Aa(n,e,t){const r=function Kh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ul(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=gu(e);return n.children.forEach(d=>{(function gd(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function Cy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ut(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ut(n.url,e.url)||!_i(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!id(n,e)||!_i(n.queryParams,e.queryParams);default:return!id(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new $r(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Ul(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Zo(m.outlet.component,d))}else d&&Ui(e,m,o),o.canActivateChecks.push(new $r(r)),Ul(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),an(u,(d,m)=>Ui(d,t.getContext(m),o)),o}function Ui(n,e,t){const r=gu(n),o=n.value;an(r,(u,d)=>{Ui(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Zo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Ay{}function ls(n){return new On.y(e=>e.error(n))}class ig{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Ta(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,St);if(null===t)return null;const r=new ho([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new co(r,t),u=new td(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=qp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=An(e,u),E=this.processSegmentGroup(m,d,u);if(null===E)return null;r.push(...E)}const o=og(r);return function sg(n){n.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return ng(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!tg(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const Z=r.length>0?Fi(r).parameters:{};u=new ho(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),jr(e),e.component,e,ag(t),Sa(t)+r.length,f(e))}else{const Z=hd(t,e,r);if(!Z.matched)return null;d=Z.consumedSegments,m=Z.remainingSegments,u=new ho(d,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),jr(e),e.component,e,ag(t),Sa(t)+d.length,f(e))}const E=function Sy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:A}=Ta(t,d,m,E.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);if(0===A.length&&C.hasChildren()){const Z=this.processChildren(E,C);return null===Z?null:[new co(u,Z)]}if(0===E.length&&0===A.length)return[new co(u,[])];const k=jr(e)===o,V=this.processSegment(E,C,A,k?St:o);return null===V?null:[new co(u,V)]}}function Jh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function og(n){const e=[],t=new Set;for(const r of n){if(!Jh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=og(r.children);e.push(new co(r.value,o))}return e.filter(r=>!t.has(r))}function ag(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Sa(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function z(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Fe(n){return Pn(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,wt.U)(()=>e)):it(e)})}class lt extends class ct{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const wn=new h.OlP("ROUTES");class si{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new ud(Kc(d.injector.get(wn,void 0,h.XFs.Self|h.XFs.Optional)).map(Ll),d)}),ri(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ns(o,()=>new Dr.x).pipe(bl()),t._loader$}loadModuleFactory(e){return gr(e()).pipe((0,Cn.z)(t=>t instanceof h.YKP?it(t):(0,rn.D)(this.compiler.compileModuleAsync(t))))}}class Xh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ug(n){throw n}function Ma(n,e,t){return e.parse("/")}function jl(n,e){return it(null)}const _d={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sr=(()=>{class n{constructor(t,r,o,u,d,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Dr.x,this.errorHandler=ug,this.malformedUriErrorHandler=Ma,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:jl,afterPreactivation:jl},this.urlHandlingStrategy=new Xh,this.routeReuseStrategy=new lt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const k=d.get(h.R0b);this.isNgZoneEnabled=k instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function Tl(){return new te(new pe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new si(d,m,V=>this.triggerEvent(new Ar(V)),V=>this.triggerEvent(new Ia(V))),this.routerState=ed(this.currentUrlTree,this.rootComponentType),this.transitions=new mi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(tr(o=>0!==o.id),(0,wt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Pn(o=>{let u=!1,d=!1;return it(o).pipe((0,Br.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pn(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return tf(m.source)&&(this.browserUrlTree=m.extractedUrl),it(m).pipe(Pn(k=>{const V=this.transitions.getValue();return r.next(new zc(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),V!==this.transitions.getValue()?es.E:Promise.resolve(k)}),function Iy(n,e,t,r){return Pn(o=>function nr(n,e,t,r,o){return new Iu(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,wt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Br.b)(k=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function g(n,e,t,r,o){return(0,Cn.z)(u=>function Bl(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new ig(n,e,t,r,o,u).recognize();return null===d?ls(new Ay):it(d)}catch(d){return ls(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,wt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Br.b)(k=>{if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(Z,k)}this.browserUrlTree=k.urlAfterRedirects}const V=new Ea(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);r.next(V)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:Z,source:ae,restoredState:Ne,extras:Le}=m,At=new zc(V,this.serializeUrl(Z),ae,Ne);r.next(At);const Rt=ed(Z,this.rootComponentType).snapshot;return it(Object.assign(Object.assign({},m),{targetSnapshot:Rt,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},Le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),es.E}),Fe(m=>{const{targetSnapshot:E,id:C,extractedUrl:A,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:Z}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:A,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!Z})}),(0,Br.b)(m=>{const E=new du(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,wt.U)(m=>Object.assign(Object.assign({},m),{guards:Zh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function md(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?it(Object.assign(Object.assign({},t),{guardsResult:!0})):function Dy(n,e,t,r){return(0,rn.D)(n).pipe((0,Cn.z)(o=>function Qh(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?it(u.map(m=>{const E=Aa(m,e,o);let C;if(function Gh(n){return n&&po(n.canDeactivate)}(E))C=gr(E.canDeactivate(n,e,t,r));else{if(!po(E))throw new Error("Invalid CanDeactivate guard");C=gr(E(n,e,t,r))}return C.pipe(jo())})).pipe(cd()):it(!0)}(o.component,o.route,t,e,r)),jo(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Cn.z)(m=>m&&function Yp(n){return"boolean"==typeof n}(m)?function Ty(n,e,t,r){return(0,rn.D)(e).pipe(yi(o=>Bo(function rg(n,e){return null!==n&&e&&e(new $o(n)),it(!0)}(o.route.parent,r),function yd(n,e){return null!==n&&e&&e(new Ps(n)),it(!0)}(o.route,r),function Yh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function by(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>wa(()=>it(d.guards.map(E=>{const C=Aa(E,d.node,t);let A;if(function Hh(n){return n&&po(n.canActivateChild)}(C))A=gr(C.canActivateChild(r,n));else{if(!po(C))throw new Error("Invalid CanActivateChild guard");A=gr(C(r,n))}return A.pipe(jo())})).pipe(cd())));return it(u).pipe(cd())}(n,o.path,t),function ii(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const o=r.map(u=>wa(()=>{const d=Aa(u,e,t);let m;if(function Pl(n){return n&&po(n.canActivate)}(d))m=gr(d.canActivate(e,n));else{if(!po(d))throw new Error("Invalid CanActivate guard");m=gr(d(e,n))}return m.pipe(jo())}));return it(o).pipe(cd())}(n,o.route,t))),jo(o=>!0!==o,!0))}(r,u,n,e):it(m)),(0,wt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Br.b)(m=>{if(_u(m.guardsResult)){const C=ba(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new Wc(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),tr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Fe(m=>{if(m.guards.canActivateChecks.length)return it(m).pipe((0,Br.b)(E=>{const C=new Oh(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),Pn(E=>{let C=!1;return it(E).pipe(function v(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return it(t);let u=0;return(0,rn.D)(o).pipe(yi(d=>function T(n,e,t,r){return function R(n,e,t,r){const o=z(n);if(0===o.length)return it({});const u={};return(0,rn.D)(o).pipe((0,Cn.z)(d=>function de(n,e,t,r){const o=Aa(n,e,r);return gr(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Br.b)(m=>{u[d]=m}))),cu(1),(0,Cn.z)(()=>z(u).length===o.length?it(u):es.E))}(n._resolve,n,e,r).pipe((0,wt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),qp(n,t).resolve),null)))}(d.route,r,n,e)),(0,Br.b)(()=>u++),cu(1),(0,Cn.z)(d=>u===o.length?it(t):es.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Br.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Br.b)(E=>{const C=new Tr(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),Fe(m=>{const{targetSnapshot:E,id:C,extractedUrl:A,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:Z}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:A,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!Z})}),(0,wt.U)(m=>{const E=function zp(n,e,t){const r=kl(n,e._root,t?t._root:void 0);return new xl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,Br.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new Ol(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Br.b)({next(){u=!0},complete(){u=!0}}),function qc(n){return(0,er.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ri(m=>{if(d=!0,function qo(n){return n&&n[pr]}(m)){const E=_u(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new Dl(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),k={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tf(o.source)};this.scheduleNavigation(A,"imperative",null,k,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new Dn(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return es.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fl(t),this.config=t.map(Ll),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,A=E?this.currentUrlTree.fragment:d;let k=null;switch(m){case"merge":k=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=u||null}return null!==k&&(k=this.removeEmptyProps(k)),function fy(n,e,t,r,o){if(0===t.length)return Rl(e.root,e.root,e.root,r,o);const u=function g0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Wp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return an(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Wp(t,e,r)}(t);if(u.toRoot())return Rl(e.root,e.root,new pe([],{}),r,o);const d=function m0(n,e,t){if(n.isAbsolute)return new sd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new sd(u,u===e.root,0)}const r=wi(n.commands[0])?0:1;return function jh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new sd(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?od(d.segmentGroup,d.index,u.commands):Kp(d.segmentGroup,d.index,u.commands);return Rl(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,k,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=_u(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ef(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},_d):!1===r?Object.assign({},lg):r,_u(t))return zo(this.currentUrlTree,t,o);const u=this.parseUrl(t);return zo(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new rs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,E;if(this.disposed)return Promise.resolve(!1);let C,A,k;d?(C=d.resolve,A=d.reject,k=d.promise):k=new Promise((ae,Ne)=>{C=ae,A=Ne});const V=++this.navigationId;let Z;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Z=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Z=0,this.setTransition({id:V,targetPageId:Z,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:A,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(ae=>Promise.reject(ae))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Dl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function tf(n){return"imperative"!==n}class cg{}class dg{preload(e,t){return it(null)}}let E0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new si(o,r,E=>t.triggerEvent(new Ar(E)),E=>t.triggerEvent(new Ia(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(tr(t=>t instanceof rs),yi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,rn.D)(o).pipe((0,Uo.J)(),(0,wt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?it(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sr),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(cg))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),My=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof rs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ho&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ho(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Du=new h.OlP("ROUTER_CONFIGURATION"),Tu=new h.OlP("ROUTER_FORROOT_GUARD"),I0=[we,{provide:Et,useClass:Tn},{provide:Sr,useFactory:function T0(n,e,t,r,o,u,d={},m,E){const C=new Sr(null,n,e,t,r,o,Kc(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function ky(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(A=>{var k,V;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(V=console.groupEnd)||void 0===V||V.call(console)}),C},deps:[Et,vu,we,h.zs3,h.Sil,wn,Du,[class bu{},new h.FiY],[class Qe{},new h.FiY]]},vu,{provide:yu,useFactory:function A0(n){return n.routerState.root},deps:[Sr]},E0,dg,class w0{preload(e,t){return t().pipe(ri(()=>it(null)))}},{provide:Du,useValue:{enableTracing:!1}}];function b0(){return new h.PXZ("Router",Sr)}let C0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[I0,xy(t),{provide:Tu,useFactory:D0,deps:[[Sr,new h.FiY,new h.tp0]]},{provide:Du,useValue:r||{}},{provide:fe,useFactory:nb,deps:[ie,[new h.tBr(Ge),new h.FiY],Du]},{provide:My,useFactory:hg,deps:[Sr,ul,Du]},{provide:cg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:dg},{provide:h.PXZ,multi:!0,useFactory:b0},[vd,{provide:h.ip1,multi:!0,useFactory:fg,deps:[vd]},{provide:pg,useFactory:S0,deps:[vd]},{provide:h.tb,multi:!0,useExisting:pg}]]}}static forChild(t){return{ngModule:n,providers:[xy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Tu,8),h.LFG(Sr,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function hg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new My(n,e,t)}function nb(n,e,t={}){return t.useHash?new De(n,e):new Ze(n,e)}function D0(n){return"guarded"}function xy(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:wn,multi:!0,useValue:n}]}let vd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Dr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Sr),d=this.injector.get(Du);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?it(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Du),o=this.injector.get(E0),u=this.injector.get(My),d=this.injector.get(Sr),m=this.injector.get(h.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function fg(n){return n.appInitializer.bind(n)}function S0(n){return n.bootstrapListener.bind(n)}const pg=new h.OlP("Router Initializer"),rf=[];let rb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[C0.forRoot(rf)],C0]}),n})();var ve=N(5861),ib=N(6451),gg=N(5363),k0=N(6063);class Ry extends Dr.x{constructor(e=1/0,t=1/0,r=k0.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)m=E;m&&r.splice(0,m+1)}}}var R0=N(3099);function sb(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,R0.B)({connector:()=>new Ry(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Ny(n,e){return(0,oo.m)(e)?Pn(()=>n,e):Pn(()=>n)}var Oy=N(9468),yr=N(5813),go=N(2011);N(5867);var Au=N(9681),mg=N(4859),Lt=N(2090),oi=N(1877);const yg=new Map,P0={activated:!1,tokenObservers:[]},Ly={initialized:!1,enabled:!1};function Hr(n){return yg.get(n)||P0}function Vs(n,e){yg.set(n,e)}function Vy(){return Ly}class fb{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Lt.BH,yield function pb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Lt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ei=new Lt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function mb(n){if(!Hr(n).activated)throw Ei.create("use-before-activation",{appName:n.name})}function wg(n,e){return jy.apply(this,arguments)}function jy(){return(jy=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const k=yield o.getHeartbeatsHeader();k&&(r["X-Firebase-Client"]=k)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(k){throw Ei.create("fetch-network-error",{originalErrorMessage:k.message})}if(200!==d.status)throw Ei.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(k){throw Ei.create("fetch-parse-error",{originalErrorMessage:k.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+C,issuedAtTimeMillis:A}})).apply(this,arguments)}function eA(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Eg="firebase-app-check-store";let Hy=null;function vb(){return Hy||(Hy=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ei.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Eg,{keyPath:"compositeKey"})}}catch(t){e(Ei.create("storage-open",{originalErrorMessage:t.message}))}}),Hy)}function Ig(){return(Ig=(0,ve.Z)(function*(n,e){const r=(yield vb()).transaction(Eg,"readwrite"),u=r.objectStore(Eg).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var C;m(Ei.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const af=new oi.Yd("@firebase/app-check");function V0(n,e){return(0,Lt.hl)()?function iA(n,e){return function L0(n,e){return Ig.apply(this,arguments)}(function Dg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{af.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Wy(){return Vy().enabled}function U0(){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,ve.Z)(function*(){const n=Vy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ed={error:"UNKNOWN_ERROR"};function Ky(n){return Lt.US.encodeString(JSON.stringify(n),!1)}function xa(n){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,ve.Z)(function*(n,e=!1){const t=n.app;mb(t);const r=Hr(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&Id(E)&&(o=E)}if(!e&&o&&Id(o))return{token:o.token};let m,d=!1;if(Wy()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wg(eA(t,yield U0()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const E=yield r.exchangeTokenPromise;return yield V0(t,E),Vs(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?af.warn(E.message):af.error(E),u=E}return o?(m={token:o.token},Vs(t,Object.assign(Object.assign({},r),{token:o})),yield V0(t,o)):m=j0(u),d&&Ag(t,m),m})).apply(this,arguments)}function Yy(n,e){const t=Hr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Vs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Qy(n){const{app:e}=n,t=Hr(e);let r=t.tokenRefresher;r||(r=function B0(n){const{app:e}=n;return new fb((0,ve.Z)(function*(){let r;if(r=Hr(e).token?yield xa(n,!0):yield xa(n),r.error)throw r.error}),()=>!0,()=>{const t=Hr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Vs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ag(n,e){const t=Hr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Id(n){return n.expireTimeMillis-Date.now()>0}function j0(n){return{token:Ky(Ed),error:n}}class Sg{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hr(this.app);for(const t of e)Yy(this.app,t.next);return Promise.resolve()}}const e_="app-check-internal";!function Y0(){(0,Au._registerComponent)(new mg.wA("app-check",n=>function wb(n,e){return new Sg(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(e_).initialize()})),(0,Au._registerComponent)(new mg.wA(e_,n=>function $0(n){return{getToken:e=>xa(n,e),addTokenListener:e=>function xu(n,e,t,r){const{app:o}=n,u=Hr(o),d={next:t,error:r,type:e};if(Vs(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Id(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),Qy(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Qy(n))}(n,"INTERNAL",e),removeTokenListener:e=>Yy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Au.registerVersion)("@firebase/app-check","0.5.8")}();class lf{constructor(){return(0,yr.vb)("app-check")}}"undefined"!=typeof window&&window;var cf=N(127);const xb=new h.OlP("angularfire2.auth.use-emulator"),Rg=new h.OlP("angularfire2.auth.settings"),kb=new h.OlP("angularfire2.auth.tenant-id"),rw=new h.OlP("angularfire2.auth.langugage-code"),r_=new h.OlP("angularfire2.auth.use-device-language"),i_=new h.OlP("angularfire.auth.persistence"),s_=(n,e,t,r,o,u,d,m)=>(0,go.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[C,A]of Object.entries(d))E.settings[C]=A;return m&&E.setPersistence(m),E},[t,r,o,u,d,m]);let df=(()=>{class n{constructor(t,r,o,u,d,m,E,C,A,k,V,Z){const ae=new Dr.x,Ne=it(void 0).pipe((0,gg.Q)(d.outsideAngular),Pn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8775)))),(0,wt.U)(()=>(0,go.on)(t,u,r)),(0,wt.U)(Le=>s_(Le,u,m,C,A,k,E,V)),sb({bufferSize:1,refCount:!1}));if(Mo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Ne.pipe(jo()).subscribe();const At=Ne.pipe(Pn(Dt=>Dt.getRedirectResult().then(Nt=>Nt,()=>null)),yr.iC,sb({bufferSize:1,refCount:!1})),Rt=Ne.pipe(Pn(Dt=>new On.y(Nt=>({unsubscribe:u.runOutsideAngular(()=>Dt.onAuthStateChanged(st=>Nt.next(st),st=>Nt.error(st),()=>Nt.complete()))})))),Ot=Ne.pipe(Pn(Dt=>new On.y(Nt=>({unsubscribe:u.runOutsideAngular(()=>Dt.onIdTokenChanged(st=>Nt.next(st),st=>Nt.error(st),()=>Nt.complete()))}))));this.authState=At.pipe(Ny(Rt),(0,Oy.R)(d.outsideAngular),(0,gg.Q)(d.insideAngular)),this.user=At.pipe(Ny(Ot),(0,Oy.R)(d.outsideAngular),(0,gg.Q)(d.insideAngular)),this.idToken=this.user.pipe(Pn(Dt=>Dt?(0,rn.D)(Dt.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(Pn(Dt=>Dt?(0,rn.D)(Dt.getIdTokenResult()):it(null))),this.credential=(0,ib.T)(At,ae,this.authState.pipe(tr(Dt=>!Dt))).pipe((0,wt.U)(Dt=>(null==Dt?void 0:Dt.user)?Dt:null),(0,Oy.R)(d.outsideAngular),(0,gg.Q)(d.insideAngular))}return(0,go.pX)(this,Ne,u,{spy:{apply:(Le,At,Rt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&Rt.then(Ot=>ae.next(Ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(go.Dh),h.LFG(go.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(yr.HU),h.LFG(xb,8),h.LFG(Rg,8),h.LFG(kb,8),h.LFG(rw,8),h.LFG(r_,8),h.LFG(i_,8),h.LFG(lf,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iw=(()=>{class n{constructor(){cf.Z.registerVersion("angularfire",yr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[df]}),n})();var ka=N(4986);function bd(){return(0,er.e)((n,e)=>{let t,r=!1;n.subscribe((0,Jn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Nb(n,e){return n===e}N(8775);var Xe,o_=N(3942),sw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mo={},a_=a_||{},Ct=sw||self;function hf(){}function Ng(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Cd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ff="closure_uid_"+(1e9*Math.random()>>>0),Pb=0;function Fb(n,e,t){return n.call.apply(n.bind,arguments)}function ow(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Fn(n,e,t){return(Fn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fb:ow).apply(null,arguments)}function pf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Gr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function ku(){this.s=this.s,this.o=this.o}var Lb={};ku.prototype.s=!1,ku.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Ob(n){return Object.prototype.hasOwnProperty.call(n,ff)&&n[ff]||(n[ff]=++Pb)}(this);delete Lb[n]}},ku.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const aw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},uw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function yo(n){return Array.prototype.concat.apply([],arguments)}function gf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function mf(n){return/^[\s\xa0]*$/.test(n)}var Ii,u_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ai(n,e){return-1!=n.indexOf(e)}function Og(n,e){return n<e?-1:n>e?1:0}e:{var lw=Ct.navigator;if(lw){var cw=lw.userAgent;if(cw){Ii=cw;break e}}Ii=""}function l_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function c_(n){const e={};for(const t in n)e[t]=n[t];return e}var Ub="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function d_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Ub.length;u++)t=Ub[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function h_(n){return h_[" "](n),n}h_[" "]=hf;var $i,n,mA=ai(Ii,"Opera"),yf=ai(Ii,"Trident")||ai(Ii,"MSIE"),Pg=ai(Ii,"Edge"),f_=Pg||yf,p_=ai(Ii,"Gecko")&&!(ai(Ii.toLowerCase(),"webkit")&&!ai(Ii,"Edge"))&&!(ai(Ii,"Trident")||ai(Ii,"MSIE"))&&!ai(Ii,"Edge"),dw=ai(Ii.toLowerCase(),"webkit")&&!ai(Ii,"Edge");function jb(){var n=Ct.document;return n?n.documentMode:void 0}e:{var hw="",fw=(n=Ii,p_?/rv:([^\);]+)(\)|;)/.exec(n):Pg?/Edge\/([\d\.]+)/.exec(n):yf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):dw?/WebKit\/(\S+)/.exec(n):mA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(fw&&(hw=fw?fw[1]:""),yf){var Fg=jb();if(null!=Fg&&Fg>parseFloat(hw)){$i=String(Fg);break e}}$i=hw}var pw={};var mw=Ct.document&&yf&&(jb()||parseInt($i,10))||void 0,m_=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",hf,e),Ct.removeEventListener("test",hf,e)}catch(t){}return n}();function ui(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Gl(n,e){if(ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(p_){e:{try{h_(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Hb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Gl.Z.h.call(this)}}ui.prototype.h=function(){this.defaultPrevented=!0},Gr(Gl,ui);var Hb={2:"touch",3:"pen",4:"mouse"};Gl.prototype.h=function(){Gl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _f="closure_listenable_"+(1e6*Math.random()|0),Gb=0;function qb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Gb,this.ca=this.fa=!1}function Lg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Vg(n){this.src=n,this.g={},this.h=0}function Td(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=aw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Lg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ru(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Vg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Ru(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new qb(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var y_="closure_lm_"+(1e6*Math.random()|0),ql={};function yw(n,e,t,r,o){if(r&&r.once)return _o(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)yw(n,e[u],t,r,o);return null}return t=Ou(t),n&&n[_f]?n.N(e,t,Cd(r)?!!r.capture:!!r,o):_w(n,e,t,!1,r,o)}function _w(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Cd(o)?!!o.capture:!!o,m=Hi(n);if(m||(n[y_]=m=new Vg(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function __(){var e=Ug;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)m_||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Nu(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function _o(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)_o(n,e[u],t,r,o);return null}return t=Ou(t),n&&n[_f]?n.O(e,t,Cd(r)?!!r.capture:!!r,o):_w(n,e,t,!0,r,o)}function Ad(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ad(n,e[u],t,r,o);else r=Cd(r)?!!r.capture:!!r,t=Ou(t),n&&n[_f]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ru(u=n.g[e],t,r,o))&&(Lg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Hi(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ru(e,t,r,o)),(t=-1<n?e[n]:null)&&Mr(t))}function Mr(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[_f])Td(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Nu(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hi(e))?(Td(t,n),0==t.h&&(t.src=null,e[y_]=null)):Lg(n)}}}function Nu(n){return n in ql?ql[n]:ql[n]="on"+n}function Ug(n,e){if(n.ca)n=!0;else{e=new Gl(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Mr(n),n=t.call(r,e)}return n}function Hi(n){return(n=n[y_])instanceof Vg?n:null}var vf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ou(n){return"function"==typeof n?n:(n[vf]||(n[vf]=function(e){return n.handleEvent(e)}),n[vf])}function Sn(){ku.call(this),this.i=new Vg(this),this.P=this,this.I=null}function Ln(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ui(e,n);else if(e instanceof ui)e.target=e.target||n;else{var o=e;d_(e=new ui(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Ra(d,r,!0,e)&&o}if(o=Ra(d=e.g=n,r,!0,e)&&o,o=Ra(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Ra(d=e.g=t[u],r,!1,e)&&o}function Ra(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&Td(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}Gr(Sn,ku),Sn.prototype[_f]=!0,Sn.prototype.removeEventListener=function(n,e,t,r){Ad(this,n,e,t,r)},Sn.prototype.M=function(){if(Sn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lg(t[r]);delete n.g[e],n.h--}}this.I=null},Sn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Sn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Pu=Ct.JSON.stringify;function Sd(){var n=v_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jg,zl=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xd,n=>n.reset());class xd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vw(n){Ct.setTimeout(()=>{throw n},0)}function Bg(n,e){jg||function ww(){var n=Ct.Promise.resolve(void 0);jg=function(){n.then(Ew)}}(),$g||(jg(),$g=!0),v_.add(n,e)}var $g=!1,v_=new class Md{constructor(){this.h=this.g=null}add(e,t){const r=zl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ew(){for(var n;n=Sd();){try{n.h.call(n.g)}catch(t){vw(t)}var e=zl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}$g=!1}function wf(n,e){Sn.call(this),this.h=n||1,this.g=e||Ct,this.j=Fn(this.kb,this),this.l=Date.now()}function Hg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function w_(n,e,t){if("function"==typeof n)t&&(n=Fn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function E_(n){n.g=w_(()=>{n.g=null,n.i&&(n.i=!1,E_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Gr(wf,Sn),(Xe=wf.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ln(this,"tick"),this.da&&(Hg(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){wf.Z.M.call(this),Hg(this),delete this.g};class zb extends ku{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:E_(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kd(n){ku.call(this),this.h=n,this.g={}}Gr(kd,ku);var I_=[];function Iw(n,e,t,r){Array.isArray(t)||(t&&(I_[0]=t.toString()),t=I_);for(var o=0;o<t.length;o++){var u=yw(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function bw(n){l_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Mr(e)},n),n.g={}}function Ef(){this.g=!0}function Rd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function yA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Pu(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}kd.prototype.M=function(){kd.Z.M.call(this),bw(this)},kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ef.prototype.Aa=function(){this.g=!1},Ef.prototype.info=function(){};var Wl={},Gg=null;function Nd(){return Gg=Gg||new Sn}function Dw(n){ui.call(this,Wl.Ma,n)}function qg(n){const e=Nd();Ln(e,new Dw(e,n))}function Kb(n,e){ui.call(this,Wl.STAT_EVENT,n),this.stat=e}function Gi(n){const e=Nd();Ln(e,new Kb(e,n))}function Tw(n,e){ui.call(this,Wl.Na,n),this.size=e}function Od(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}Wl.Ma="serverreachability",Gr(Dw,ui),Wl.STAT_EVENT="statevent",Gr(Kb,ui),Wl.Na="timingevent",Gr(Tw,ui);var b_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Aw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Fu(){}function C_(){}Fu.prototype.h=null;var D_,If={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function zg(){ui.call(this,"d")}function Pd(){ui.call(this,"c")}function bf(){}function Cf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new kd(this),this.P=Yb,this.W=new wf(n=f_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Mw}function Mw(){this.i=null,this.g="",this.h=!1}Gr(zg,ui),Gr(Pd,ui),Gr(bf,Fu),bf.prototype.g=function(){return new XMLHttpRequest},bf.prototype.i=function(){return{}},D_=new bf;var Yb=45e3,T_={},Wg={};function Zg(n,e,t){n.K=1,n.v=Sf(Bs(e)),n.s=t,n.U=!0,xw(n,null)}function xw(n,e){n.F=Date.now(),Kg(n),n.A=Bs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),O_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Mw,n.g=Z_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new zb(Fn(n.Ia,n,n.g),n.O)),Iw(n.V,n.g,"readystatechange",n.gb),e=n.H?c_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),qg(1),function Wb(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var A=C[0];C=C[1];var k=A.split("_");d=2<=k.length&&"type"==k[1]?d+(A+"=")+C+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function A_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function S_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=M_(n,t),o==Wg){4==e&&(n.o=4,Gi(14),r=!1),Rd(n.j,n.m,null,"[Incomplete Response]");break}if(o==T_){n.o=4,Gi(15),Rd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Rd(n.j,n.m,o,null),Xg(n,o)}A_(n)&&o!=Wg&&o!=T_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Lf(e),e.L=!0,Gi(11))):(Rd(n.j,n.m,t,"[Invalid Chunked Response]"),vo(n),Jg(n))}function M_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Wg:(t=Number(e.substring(t,r)),isNaN(t)?T_:(r+=1)+t>e.length?Wg:(e=e.substr(r,t),n.C=r+t,e))}function Kg(n){n.Y=Date.now()+n.P,Yg(n,n.P)}function Yg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Od(Fn(n.eb,n),e)}function Qg(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function Jg(n){0==n.l.G||n.I||G_(n.l,n)}function vo(n){Qg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Hg(n.W),bw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Xg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||F_(t.i,n)))if(t.I=n.N,!n.J&&F_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Od(Fn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Vf(t),am(t)}Ff(t),Gi(18)}if(1>=Uw(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Vu(t,11)}else if((n.J||t.g==n)&&Vf(t),!mf(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const A=C[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const k=C[4];null!=k&&(t.za=k,t.h.info("SVER="+t.za));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const ae=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var u=r.i;!u.g&&(ai(ae,"spdy")||ai(ae,"quic")||ai(ae,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(rm(u,u.h),u.h=null))}if(r.D){const Ne=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.sa=Ne,gn(r.F,r.D,Ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=W_(r,r.H?r.la:null,r.W),d.J){Bw(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(Qg(m),Kg(m)),r.g=d}else H_(r);0<t.l.length&&Nf(t)}else"stop"!=C[0]&&"close"!=C[0]||Vu(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Vu(t,7):Ql(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}qg(4)}catch(C){}}function Df(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ng(n)||"string"==typeof n)uw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ng(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function x_(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ng(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Fd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Fd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ld(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Yo(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Yo(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Yo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=Cf.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==Xo(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const A=Xo(this.g);var e=this.g.Da();const k=this.g.ba();if(!(3>A)&&(3!=A||f_||this.g&&(this.h.h||this.g.ga()||qw(this.g)))){this.I||4!=A||7==e||qg(8==e||0>=k?3:2),Qg(this);var t=this.g.ba();this.N=t;t:if(A_(this)){var r=qw(this.g);n="";var o=r.length,u=4==Xo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vo(this),Jg(this);var d="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Cw(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mf(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Gi(12),vo(this),Jg(this);break e}Rd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xg(this,t)}this.U?(S_(this,A,d),f_&&this.i&&3==A&&(Iw(this.V,this.W,"tick",this.fb),this.W.start())):(Rd(this.j,this.m,d,null),Xg(this,d)),4==A&&vo(this),this.i&&!this.I&&(4==A?G_(this.l,this):(this.i=!1,Kg(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Gi(12)):(this.o=0,Gi(13)),vo(this),Jg(this)}}}catch(A){}},Xe.fb=function(){if(this.g){var n=Xo(this.g),e=this.g.ga();this.C<e.length&&(Qg(this),S_(this,n,e),this.i&&4!=n&&Kg(this))}},Xe.cancel=function(){this.I=!0,vo(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Zb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(qg(3),Gi(17)),vo(this),this.o=2,Jg(this)):Yg(this,this.Y-n)},(Xe=Fd.prototype).R=function(){Ld(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return Ld(this),this.g.concat()},Xe.get=function(n,e){return Yo(this.h,n)?this.h[n]:e},Xe.set=function(n,e){Yo(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var em=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Zl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Zl){this.g=void 0!==e?e:n.g,Kl(this,n.j),this.s=n.s,Tf(this,n.i),Af(this,n.m),this.l=n.l,e=n.h;var t=new Ud;t.i=e.i,e.g&&(t.g=new Fd(e.g),t.h=e.h),tm(this,t),this.o=n.o}else n&&(t=String(n).match(em))?(this.g=!!e,Kl(this,t[1]||"",!0),this.s=Mf(t[2]||""),Tf(this,t[3]||"",!0),Af(this,t[4]),this.l=Mf(t[5]||"",!0),tm(this,t[6]||"",!0),this.o=Mf(t[7]||"")):(this.g=!!e,this.h=new Ud(null,this.g))}function Bs(n){return new Zl(n)}function Kl(n,e,t){n.j=t?Mf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Tf(n,e,t){n.i=t?Mf(e,!0):e}function Af(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function tm(n,e,t){e instanceof Ud?(n.h=e,function Fw(n,e){e&&!n.j&&(Qo(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(R_(this,r),O_(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Vd(e,Ow)),n.h=new Ud(e,n.g))}function gn(n,e,t){n.h.set(e,t)}function Sf(n){return gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Mf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Rw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Rw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Zl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vd(e,nm,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vd(e,nm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vd(t,"/"==t.charAt(0)?Qb:Nw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vd(t,Pw)),n.join("")};var nm=/[#\/\?@]/g,Nw=/[#\?:]/g,Qb=/[#\?]/g,Ow=/[#\?@]/g,Pw=/#/g;function Ud(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qo(n){n.g||(n.g=new Fd,n.h=0,n.i&&function _A(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function R_(n,e){Qo(n),e=Yl(n,e),Yo(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Yo((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ld(n)))}function N_(n,e){return Qo(n),e=Yl(n,e),Yo(n.g.h,e)}function O_(n,e,t){R_(n,e),0<t.length&&(n.i=null,n.g.set(Yl(n,e),gf(t)),n.h+=t.length)}function Yl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function P_(n){this.l=n||Vw,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=Ud.prototype).add=function(n,e){Qo(this),this.i=null,n=Yl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Qo(this),this.g.forEach(function(t,r){uw(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){Qo(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Xe.R=function(n){Qo(this);var e=[];if("string"==typeof n)N_(this,n)&&(e=yo(e,this.g.get(Yl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=yo(e,n[t])}return e},Xe.set=function(n,e){return Qo(this),this.i=null,N_(this,n=Yl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Vw=10;function Jb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Uw(n){return n.h?1:n.g?n.g.size:0}function F_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function rm(n,e){n.g?n.g.add(e):n.h=e}function Bw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function rr(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return gf(n.i)}function im(){}function Xb(){this.g=new im}function eC(n,e,t){const r=t||"";try{Df(n,function(o,u){let d=o;Cd(o)&&(d=Pu(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function sm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Bd(n){this.l=n.$b||null,this.j=n.ib||!1}function xf(n,e){Sn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Lu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}P_.prototype.cancel=function(){if(this.i=rr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},im.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},im.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},Gr(Bd,Fu),Bd.prototype.g=function(){return new xf(this.l,this.j)},Bd.prototype.i=function(n){return function(){return n}}({}),Gr(xf,Sn);var Lu=0;function $w(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function kf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jd(n)}function jd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=xf.prototype).open=function(n,e){if(this.readyState!=Lu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jd(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kf(this)),this.readyState=Lu},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jd(this)),this.g&&(this.readyState=3,jd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$w(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kf(this):jd(this),3==this.readyState&&$w(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,kf(this))},Xe.Ta=function(n){this.g&&(this.response=n,kf(this))},Xe.ha=function(){this.g&&kf(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tC=Ct.JSON.parse;function qn(n){Sn.call(this),this.headers=new Fd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nC,this.K=this.L=!1}Gr(qn,Sn);var nC="",Hw=/^https?$/i,L_=["POST","PUT"];function rC(n){return"content-type"==n.toLowerCase()}function Gw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wo(n),qi(n)}function wo(n){n.D||(n.D=!0,Ln(n,"complete"),Ln(n,"error"))}function js(n){if(n.h&&void 0!==a_&&(!n.C[1]||4!=Xo(n)||2!=n.ba()))if(n.v&&4==Xo(n))w_(n.Fa,0,n);else if(Ln(n,"readystatechange"),4==Xo(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(em)[1]||null;if(!o&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;o=u.substr(0,u.length-1)}r=!Hw.test(o?o.toLowerCase():"")}t=r}if(t)Ln(n,"complete"),Ln(n,"success");else{n.m=6;try{var d=2<Xo(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",wo(n)}}finally{qi(n)}}}function qi(n,e){if(n.g){V_(n);const t=n.g,r=n.C[0]?hf:null;n.g=null,n.C=null,e||Ln(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function V_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function Xo(n){return n.g?n.g.readyState:0}function qw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function U_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function iC(n){let e="";return l_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):gn(n,e,t))}function Rf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function om(n){this.za=0,this.l=[],this.h=new Ef,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rf("baseRetryDelayMs",5e3,n),this.$a=Rf("retryDelaySeedMs",1e4,n),this.Ya=Rf("forwardChannelMaxRetries",2,n),this.ra=Rf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new P_(n&&n.concurrentRequestLimit),this.Ca=new Xb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Ql(n){if(B_(n),3==n.G){var e=n.V++,t=Bs(n.F);gn(t,"SID",n.J),gn(t,"RID",e),gn(t,"TYPE","terminate"),Pf(n,t),(e=new Cf(n,n.h,e,void 0)).K=2,e.v=Sf(Bs(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=Z_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Kg(e)}z_(n)}function am(n){n.g&&(Lf(n),n.g.cancel(),n.g=null)}function B_(n){am(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),Vf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function j_(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Nf(n)}function Nf(n){Jb(n.i)||n.m||(n.m=!0,Bg(n.Ha,n),n.C=0)}function Of(n,e){var t;t=e?e.m:n.V++;const r=Bs(n.F);gn(r,"SID",n.J),gn(r,"RID",t),gn(r,"AID",n.U),Pf(n,r),n.o&&n.s&&U_(r,n.o,n.s),t=new Cf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=$_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),rm(n.i,t),Zg(t,r,e)}function Pf(n,e){n.j&&Df({},function(t,r){gn(e,r,t)})}function $_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Fn(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const A=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{eC(A,d,"req"+C+"_")}catch(k){r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function H_(n){n.g||n.u||(n.Y=1,Bg(n.Ga,n),n.A=0)}function Ff(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Od(Fn(n.Ga,n),q_(n,n.A)),n.A++,0))}function Lf(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function um(n){n.g=new Cf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Bs(n.oa);gn(e,"RID","rpc"),gn(e,"SID",n.J),gn(e,"CI",n.N?"0":"1"),gn(e,"AID",n.U),Pf(n,e),gn(e,"TYPE","xmlhttp"),n.o&&n.s&&U_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Sf(Bs(e)),t.s=null,t.U=!0,xw(t,n)}function Vf(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function G_(n,e){var t=null;if(n.g==e){Vf(n),Lf(n),n.g=null;var r=2}else{if(!F_(n.i,e))return;t=e.D,Bw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Ln(r=Nd(),new Tw(r,t,e,o)),Nf(n)}else H_(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function zw(n,e){return!(Uw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Od(Fn(n.Ha,n,e),q_(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ff(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Vu(n,5);break;case 4:Vu(n,10);break;case 3:Vu(n,6);break;default:Vu(n,2)}}function q_(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Vu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Fn(n.jb,n);t||(t=new Zl("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||Kl(t,"https"),Sf(t)),function jw(n,e){const t=new Ef;if(Ct.Image){const r=new Image;r.onload=pf(sm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=pf(sm,t,r,"TestLoadImage: error",!1,e),r.onabort=pf(sm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=pf(sm,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Gi(2);n.G=0,n.j&&n.j.va(e),z_(n),B_(n)}function z_(n){n.G=0,n.I=-1,n.j&&((0!=rr(n.i).length||0!=n.l.length)&&(n.i.i.length=0,gf(n.l),n.l.length=0),n.j.ua())}function W_(n,e,t){let r=function k_(n){return n instanceof Zl?Bs(n):new Zl(n,void 0)}(t);if(""!=r.i)e&&Tf(r,e+"."+r.i),Af(r,r.m);else{const o=Ct.location;r=function kw(n,e,t,r){var o=new Zl(null,void 0);return n&&Kl(o,n),e&&Tf(o,e),t&&Af(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&l_(n.aa,function(o,u){gn(r,u,o)}),t=n.sa,(e=n.D)&&t&&gn(r,e,t),gn(r,"VER",n.ma),Pf(n,r),r}function Z_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qn(t&&n.Ba&&!n.qa?new Bd({ib:!0}):n.qa)).L=n.H,e}function Ww(){}function lm(){if(yf&&!(10<=Number(mw)))throw Error("Environmental error: no available transport.")}function cs(n,e){Sn.call(this),this.g=new om(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!mf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $d(this)}function Zw(n){zg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Kw(){Pd.call(this),this.status=1}function $d(n){this.g=n}(Xe=qn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():D_.g(),this.C=function Sw(n){return n.h||(n.h=n.i())}(this.u?this.u:D_),this.g.onreadystatechange=Fn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Gw(this,u)}n=t||"";const o=new Fd(this.headers);r&&Df(r,function(u,d){o.set(d,u)}),r=function Vb(n){e:{var e=rC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=aw(L_,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{V_(this),0<this.B&&((this.K=function Jo(n){return yf&&function gw(){return function Bb(n){var e=pw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=u_(String($i)).split("."),t=u_("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Og(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Og(0==o[2].length,0==u[2].length)||Og(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fn(this.pa,this)):this.A=w_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Gw(this,u)}},Xe.pa=function(){void 0!==a_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ln(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ln(this,"complete"),Ln(this,"abort"),qi(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qi(this,!0)),qn.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?js(this):this.cb())},Xe.cb=function(){js(this)},Xe.ba=function(){try{return 2<Xo(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tC(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=om.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Cf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=c_(u),d_(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$_(this,o,e),gn(t=Bs(this.F),"RID",n),gn(t,"CVER",22),this.D&&gn(t,"X-HTTP-Session-Id",this.D),Pf(this,t),this.o&&u&&U_(t,this.o,u),rm(this.i,o),this.Ra&&gn(t,"TYPE","init"),this.ja?(gn(t,"$req",e),gn(t,"SID","null"),o.$=!0,Zg(o,t,null)):Zg(o,t,e),this.G=2}}else 3==this.G&&(n?Of(this,n):0==this.l.length||Jb(this.i)||Of(this))},Xe.Ga=function(){if(this.u=null,um(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Od(Fn(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Gi(10),am(this),um(this))},Xe.ab=function(){null!=this.v&&(this.v=null,am(this),Ff(this),Gi(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Gi(2)):(this.h.info("Failed to ping google.com"),Gi(1))},(Xe=Ww.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},lm.prototype.g=function(n,e){return new cs(n,e)},Gr(cs,Sn),cs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Bg(Fn(n.hb,n,e))),Gi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=W_(n,null,n.W),Nf(n)},cs.prototype.close=function(){Ql(this.g)},cs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,j_(this.g,e)}else this.v?((e={}).__data__=Pu(n),j_(this.g,e)):j_(this.g,n)},cs.prototype.M=function(){this.g.j=null,delete this.j,Ql(this.g),delete this.g,cs.Z.M.call(this)},Gr(Zw,zg),Gr(Kw,Pd),Gr($d,Ww),$d.prototype.xa=function(){Ln(this.g,"a")},$d.prototype.wa=function(n){Ln(this.g,new Zw(n))},$d.prototype.va=function(n){Ln(this.g,new Kw(n))},$d.prototype.ua=function(){Ln(this.g,"b")},lm.prototype.createWebChannel=lm.prototype.g,cs.prototype.send=cs.prototype.u,cs.prototype.open=cs.prototype.m,cs.prototype.close=cs.prototype.close,b_.NO_ERROR=0,b_.TIMEOUT=8,b_.HTTP_ERROR=6,Aw.COMPLETE="complete",C_.EventType=If,If.OPEN="a",If.CLOSE="b",If.ERROR="c",If.MESSAGE="d",Sn.prototype.listen=Sn.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.La,qn.prototype.getLastErrorCode=qn.prototype.Da,qn.prototype.getStatus=qn.prototype.ba,qn.prototype.getResponseJson=qn.prototype.Qa,qn.prototype.getResponseText=qn.prototype.ga,qn.prototype.send=qn.prototype.ea;var sC=mo.createWebChannelTransport=function(){return new lm},oC=mo.getStatEventTarget=function(){return Nd()},K_=mo.ErrorCode=b_,aC=mo.EventType=Aw,uC=mo.Event=Wl,Yw=mo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lC=mo.FetchXmlHttpFactory=Bd,cm=mo.WebChannel=C_,cC=mo.XhrIo=qn;const Qw="@firebase/firestore";class qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");let Hd="9.8.0";const Na=new oi.Yd("@firebase/firestore");function dm(){return Na.logLevel}function Oe(n,...e){if(Na.logLevel<=oi.in.DEBUG){const t=e.map(hm);Na.debug(`Firestore (${Hd}): ${n}`,...t)}}function zn(n,...e){if(Na.logLevel<=oi.in.ERROR){const t=e.map(hm);Na.error(`Firestore (${Hd}): ${n}`,...t)}}function Gd(n,...e){if(Na.logLevel<=oi.in.WARN){const t=e.map(hm);Na.warn(`Firestore (${Hd}): ${n}`,...t)}}function hm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: `+n;throw zn(e),new Error(e)}function bt(n,e){n||nt()}function ze(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Lt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Jl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qr.UNAUTHENTICATED))}shutdown(){}}class Y_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wA{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new xr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ve.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new xr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new Jl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new qr(e)}}class eE{constructor(e,t,r){this.type="FirstParty",this.user=qr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class tE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new eE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mt{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new dC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function hC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ds.A=-1;class Uf{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=hC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function Oa(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Bf(n){return n+"\0"}class kt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new kt(0,0))}static max(){return new It(new kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Q_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class qd{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends qd{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const rE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends qd{construct(e,t,r){return new ir(e,t,r)}static isValidIdentifier(e){return rE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ir(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new xe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(t)}static emptyPath(){return new ir([])}}class zd{constructor(e){this.fields=e,e.sort(ir.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const jf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uu(n){if(bt(!!n),"string"==typeof n){let e=0;const t=jf.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vn(n.seconds),nanos:Vn(n.nanos)}}function Vn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ec(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function Wd(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function J_(n){const e=n.mapValue.fields.__previous_value__;return Wd(e)?J_(e):e}function Zd(n){const e=Uu(n.mapValue.fields.__local_write_time__.timestampValue);return new kt(e.seconds,e.nanos)}class iE{constructor(e,t,r,o,u,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Pa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}function Fa(n){return null==n}function La(n){return 0===n&&1/n==-1/0}function sE(n){return"number"==typeof n&&Number.isInteger(n)&&!La(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(qt.fromString(e))}static fromName(e){return new $e(qt.fromString(e).popFirst(5))}static empty(){return new $e(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new qt(e.slice()))}}const Bu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$f={nullValue:"NULL_VALUE"};function ju(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wd(n)?4:ev(n)?9007199254740991:10:nt()}function Eo(n,e){if(n===e)return!0;const t=ju(n);if(t!==ju(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zd(n).isEqual(Zd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Uu(r.timestampValue),d=Uu(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ec(n.bytesValue).isEqual(ec(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Vn(r.geoPointValue.latitude)===Vn(o.geoPointValue.latitude)&&Vn(r.geoPointValue.longitude)===Vn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vn(r.integerValue)===Vn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Vn(r.doubleValue),d=Vn(o.doubleValue);return u===d?La(u)===La(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Oa(n.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Q_(u)!==Q_(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Eo(u[m],d[m])))return!1;return!0}(n,e);default:return nt()}var o}function Hf(n,e){return void 0!==(n.values||[]).find(t=>Eo(t,e))}function Va(n,e){if(n===e)return 0;const t=ju(n),r=ju(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Vn(o.integerValue||o.doubleValue),m=Vn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return oE(n.timestampValue,e.timestampValue);case 4:return oE(Zd(n),Zd(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=ec(o),m=ec(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let E=0;E<d.length&&E<m.length;E++){const C=xt(d[E],m[E]);if(0!==C)return C}return xt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=xt(Vn(o.latitude),Vn(u.latitude));return 0!==d?d:xt(Vn(o.longitude),Vn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let E=0;E<d.length&&E<m.length;++E){const C=Va(d[E],m[E]);if(C)return C}return xt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Bu.mapValue&&u===Bu.mapValue)return 0;if(o===Bu.mapValue)return 1;if(u===Bu.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const k=xt(m[A],C[A]);if(0!==k)return k;const V=Va(d[m[A]],E[C[A]]);if(0!==V)return V}return xt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw nt()}}function oE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=Uu(n),r=Uu(e),o=xt(t.seconds,r.seconds);return 0!==o?o:xt(t.nanos,r.nanos)}function Kd(n){return aE(n)}function aE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Uu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ec(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=aE(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${aE(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function Yd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uE(n){return!!n&&"integerValue"in n}function fm(n){return!!n&&"arrayValue"in n}function X_(n){return!!n&&"nullValue"in n}function Gf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pm(n){return!!n&&"mapValue"in n}function qf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ev(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function zf(n){return"nullValue"in n?$f:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yd(Pa.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function pC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yd(Pa.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Bu:nt()}function lE(n,e){const t=Va(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cE(n,e){const t=Va(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qf(t)}setAll(e){let t=ir.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=qf(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());pm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];pm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Xl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new li(qf(this.value))}}function dE(n){const e=[];return Xl(n.fields,(t,r)=>{const o=new ir([t]);if(pm(r)){const u=dE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new zd(e)}class dn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,It.min(),It.min(),li.empty(),0)}static newFoundDocument(e,t,r){return new dn(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new dn(e,2,t,It.min(),li.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,It.min(),li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function tv(n){return n.fields.find(e=>2===e.kind)}function $s(n){return n.fields.filter(e=>2!==e.kind)}gm.UNKNOWN_ID=-1;class mm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qd(0,Io.min())}}function hE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=It.fromTimestamp(1e9===r?new kt(t+1,0):new kt(t,r));return new Io(o,$e.empty(),e)}function fE(n){return new Io(n.readTime,n.key,-1)}class Io{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Io(It.min(),$e.empty(),-1)}static max(){return new Io(It.max(),$e.empty(),-1)}}function nv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}class Wn{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jd(this.root,e,this.comparator,!0)}}class Jd{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:zr.RED,this.left=null!=o?o:zr.EMPTY,this.right=null!=u?u:zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new zr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return zr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1,zr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rv(this.data.getIterator())}getIteratorFrom(e){return new rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xd(n){return n.hasNext()?n.getNext():void 0}class gC{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function pE(n,e=null,t=[],r=[],o=null,u=null,d=null){return new gC(n,e,t,r,o,u,d)}function Ua(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Kd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Fa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kd(r)).join(",")),e.P=t}return e.P}function eh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!IC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Eo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wm(n.startAt,e.startAt)&&wm(n.endAt,e.endAt)}function ym(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _m(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function gE(n,e,t){let r=$f,o=!0;for(const u of _m(n,e)){let d=$f,m=!0;switch(u.op){case"<":case"<=":d=zf(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=$f}lE({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];lE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function mE(n,e,t){let r=Bu,o=!0;for(const u of _m(n,e)){let d=Bu,m=!0;switch(u.op){case">=":case">":d=pC(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Bu}cE({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];cE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new yC(e,t,r):"array-contains"===t?new yE(e,r):"in"===t?new wC(e,r):"not-in"===t?new EC(e,r):"array-contains-any"===t?new _E(e,r):new Wr(e,t,r)}static V(e,t,r){return"in"===t?new _C(e,r):new vC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Va(t,this.value)):null!==t&&ju(this.value)===ju(t)&&this.v(Va(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class yC extends Wr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class _C extends Wr{constructor(e,t){super(e,"in",t),this.keys=iv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vC extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=iv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class yE extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fm(t)&&Hf(t.arrayValue,this.value)}}class wC extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hf(this.value.arrayValue,t)}}class EC extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hf(this.value.arrayValue,t)}}class _E extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hf(this.value.arrayValue,r))}}class $u{constructor(e,t){this.position=e,this.inclusive=t}}class th{constructor(e,t="asc"){this.field=e,this.dir=t}}function IC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function vm(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):Va(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function wm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Eo(n.position[t],e.position[t]))return!1;return!0}class ea{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function Em(n,e,t,r,o,u,d,m){return new ea(n,e,t,r,o,u,d,m)}function nh(n){return new ea(n)}function Wf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sv(n){for(const e of n.filters)if(e.S())return e.field;return null}function Im(n){return null!==n.collectionGroup}function rh(n){const e=ze(n);if(null===e.D){e.D=[];const t=sv(e),r=Wf(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new th(t)),e.D.push(new th(ir.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new th(ir.keyField(),u))}}}return e.D}function hs(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=pE(e.path,e.collectionGroup,rh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of rh(e))t.push(new th(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new $u(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new $u(e.startAt.position,e.startAt.inclusive):null;e.C=pE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function vE(n,e,t){return new ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ih(n,e){return eh(hs(n),hs(e))&&n.limitType===e.limitType}function CC(n){return`${Ua(hs(n))}|lt:${n.limitType}`}function ov(n){return`Query(target=${function mC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Kd(r.value)}`;var r}).join(", ")}]`),Fa(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Kd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Kd(t)).join(",")),`Target(${e})`}(hs(n))}; limitType=${n.limitType})`}function sh(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=vm(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,rh(t),r)||t.endAt&&!function(o,u,d){const m=vm(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,rh(t),r)));var t,r}function wE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tc(n){return(e,t)=>{let r=!1;for(const o of rh(n)){const u=Zf(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Zf(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),E=d.data.field(o);return null!==m&&null!==E?Va(m,E):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function EE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:La(e)?"-0":e}}function DC(n){return{integerValue:""+n}}function av(n,e){return sE(e)?DC(e):EE(n,e)}class bm{constructor(){this._=void 0}}function TC(n,e,t){return n instanceof nc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Hu?Cm(n,e):n instanceof ta?oh(n,e):function(r,o){const u=IE(r,o),d=uv(u)+uv(r.k);return uE(u)&&uE(r.k)?DC(d):EE(r.M,d)}(n,e)}function AC(n,e,t){return n instanceof Hu?Cm(n,e):n instanceof ta?oh(n,e):t}function IE(n,e){return n instanceof ah?uE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class nc extends bm{}class Hu extends bm{constructor(e){super(),this.elements=e}}function Cm(n,e){const t=lv(e);for(const r of n.elements)t.some(o=>Eo(o,r))||t.push(r);return{arrayValue:{values:t}}}class ta extends bm{constructor(e){super(),this.elements=e}}function oh(n,e){let t=lv(e);for(const r of n.elements)t=t.filter(o=>!Eo(o,r));return{arrayValue:{values:t}}}class ah extends bm{constructor(e,t){super(),this.M=e,this.k=t}}function uv(n){return Vn(n.integerValue||n.doubleValue)}function lv(n){return fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Kf{constructor(e,t){this.field=e,this.transform=t}}class cv{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Dm{}function MC(n,e,t){n instanceof uh?function(r,o,u){const d=r.value.clone(),m=hv(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ic?function(r,o,u){if(!dv(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=hv(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(kC(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Gu(n,e,t){var o;n instanceof uh?function(r,o,u){if(!dv(r.precondition,o))return;const d=r.value.clone(),m=RC(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(xC(o),d).setHasLocalMutations()}(n,e,t):n instanceof ic?function(r,o,u){if(!dv(r.precondition,o))return;const d=RC(r.fieldTransforms,u,o),m=o.data;m.setAll(kC(r)),m.setAll(d),o.convertToFoundDocument(xC(o),m).setHasLocalMutations()}(n,e,t):dv(n.precondition,o=e)&&o.convertToNoDocument(It.min())}function bE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=IE(r.transform,o||null);null!=u&&(null==t&&(t=li.empty()),t.set(r.field,u))}return t||null}function rc(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Oa(t,r,(o,u)=>function SC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Hu&&r instanceof Hu||t instanceof ta&&r instanceof ta?Oa(t.elements,r.elements,Eo):t instanceof ah&&r instanceof ah?Eo(t.k,r.k):t instanceof nc&&r instanceof nc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function xC(n){return n.isFoundDocument()?n.version:It.min()}class uh extends Dm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class ic extends Dm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function kC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hv(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,AC(d,m,t[o]))}return r}function RC(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,TC(u,d,e))}return r}class lh extends Dm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Yf extends Dm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class NC{constructor(e){this.count=e}}var Zn,zt;function CE(n){switch(n){default:return nt();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function DE(n){if(void 0===n)return zn("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Zn.OK:return oe.OK;case Zn.CANCELLED:return oe.CANCELLED;case Zn.UNKNOWN:return oe.UNKNOWN;case Zn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Zn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Zn.INTERNAL:return oe.INTERNAL;case Zn.UNAVAILABLE:return oe.UNAVAILABLE;case Zn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Zn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Zn.NOT_FOUND:return oe.NOT_FOUND;case Zn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Zn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Zn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Zn.ABORTED:return oe.ABORTED;case Zn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Zn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Zn.DATA_LOSS:return oe.DATA_LOSS;default:return nt()}}(zt=Zn||(Zn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class qu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return nE(this.inner)}size(){return this.innerSize}}const OC=new Wn($e.comparator);function Hs(){return OC}const PC=new Wn($e.comparator);function fv(...n){let e=PC;for(const t of n)e=e.insert(t.key,t);return e}function Ba(){return new qu(n=>n.toString(),(n,e)=>n.isEqual(e))}const TE=new Wn($e.comparator),AE=new ln($e.comparator);function Xt(...n){let e=AE;for(const t of n)e=e.add(t);return e}const SE=new ln(xt);function Qf(){return SE}class ch{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Jf.createSynthesizedTargetChangeForCurrentChange(e,t)),new ch(It.min(),r,Qf(),Hs(),Xt())}}class Jf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Jf(_r.EMPTY_BYTE_STRING,t,Xt(),Xt(),Xt())}}class Xf{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class ME{constructor(e,t){this.targetId=e,this.$=t}}class xE{constructor(e,t,r=_r.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class kE{constructor(){this.B=0,this.L=RE(),this.U=_r.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Xt(),t=Xt(),r=Xt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new Jf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=RE()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class FC{constructor(e){this.nt=e,this.st=new Map,this.it=Hs(),this.rt=dh(),this.ot=new ln(xt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(ym(u))if(0===r){const d=new $e(u.path);this.ct(t,d,dn.newNoDocument(d,It.min()))}else bt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&ym(m.target)){const E=new $e(m.target.path);null!==this.it.get(E)||this.It(d,E)||this.ct(d,E,dn.newNoDocument(E,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Xt();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new ch(e,t,this.ot,this.it,r);return this.it=Hs(),this.rt=dh(),this.ot=new ln(xt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new kE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ln(xt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new kE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function dh(){return new Wn($e.comparator)}function RE(){return new Wn($e.comparator)}const pv={asc:"ASCENDING",desc:"DESCENDING"},na={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class LC{constructor(e,t){this.databaseId=e,this.N=t}}function zu(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hh(n,e){return n.N?e.toBase64():e.toUint8Array()}function VC(n,e){return zu(n,e.toTimestamp())}function kr(n){return bt(!!n),It.fromTimestamp(function(e){const t=Uu(e);return new kt(t.seconds,t.nanos)}(n))}function gv(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ep(n){const e=qt.fromString(n);return bt(BE(e)),e}function Wu(n,e){return gv(n.databaseId,e.path)}function ra(n,e){const t=ep(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Tm(t))}function mv(n,e){return gv(n.databaseId,e)}function yv(n){const e=ep(n);return 4===e.length?qt.emptyPath():Tm(e)}function fh(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tm(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function _v(n,e,t){return{name:Wu(n,e),fields:t.value.mapValue.fields}}function NE(n,e,t){const r=ra(n,e.name),o=kr(e.updateTime),u=new li({mapValue:{fields:e.fields}}),d=dn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function sc(n,e){let t;if(e instanceof uh)t={update:_v(n,e.key,e.value)};else if(e instanceof lh)t={delete:Wu(n,e.key)};else if(e instanceof ic)t={update:_v(n,e.key,e.data),updateMask:UE(e.fieldMask)};else{if(!(e instanceof Yf))return nt();t={verify:Wu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof nc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Hu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ta)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ah)return{fieldPath:u.field.canonicalString(),increment:d.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:VC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function tp(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?sr.updateTime(kr(o.updateTime)):void 0!==o.exists?sr.exists(o.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(bt("REQUEST_TIME"===d.setToServerValue),m=new nc):"appendMissingElements"in d?m=new Hu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ta(d.removeAllFromArray.values||[]):"increment"in d?m=new ah(u,d.increment):nt();const E=ir.fromServerFormat(d.fieldPath);return new Kf(E,m)}(n,o)):[];var o;if(e.update){const o=ra(n,e.update.name),u=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new zd((e.updateMask.fieldPaths||[]).map(C=>ir.fromServerFormat(C)));return new ic(o,u,d,t,r)}return new uh(o,u,t,r)}if(e.delete){const o=ra(n,e.delete);return new lh(o,t)}if(e.verify){const o=ra(n,e.verify);return new Yf(o,t)}return nt()}function Am(n,e){return{documents:[mv(n,e.path)]}}function Sm(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=mv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=mv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(A=>function(k){if("=="===k.op){if(Gf(k.value))return{unaryFilter:{field:Zu(k.field),op:"IS_NAN"}};if(X_(k.value))return{unaryFilter:{field:Zu(k.field),op:"IS_NULL"}}}else if("!="===k.op){if(Gf(k.value))return{unaryFilter:{field:Zu(k.field),op:"IS_NOT_NAN"}};if(X_(k.value))return{unaryFilter:{field:Zu(k.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zu(k.field),op:LE(k.op),value:k.value}}}(A));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:Zu((A=C).field),direction:jC(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||Fa(C)?C:{value:C});var C,m,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function PE(n){let e=yv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=FE(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new th(oc((k=A).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let m=null;t.limit&&(m=function(A){let k;return k="object"==typeof A?A.value:A,Fa(k)?null:k}(t.limit));let E=null;var A;t.startAt&&(E=new $u((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new $u(A.values||[],!A.before)}(t.endAt)),Em(e,o,d,u,m,"F",E,C)}function FE(n){return n?void 0!==n.unaryFilter?[VE(n)]:void 0!==n.fieldFilter?[$C(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>FE(e)).reduce((e,t)=>e.concat(t)):nt():[]}function jC(n){return pv[n]}function LE(n){return na[n]}function Zu(n){return{fieldPath:n.canonicalString()}}function oc(n){return ir.fromServerFormat(n.fieldPath)}function $C(n){return Wr.create(oc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function VE(n){switch(n.unaryFilter.op){case"IS_NAN":const e=oc(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=oc(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=oc(n.unaryFilter.field);return Wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oc(n.unaryFilter.field);return Wr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function UE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$E(e)),e=jE(n.get(t),e);return $E(e)}function jE(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function $E(n){return n+"\x01\x01"}function bo(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&nt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:nt()}u=d+2}return new qt(r)}const vv=["userId","batchId"];function Rr(n,e){return[n,ci(e)]}function ac(n,e,t){return[n,ci(e),t]}const HC={},GC=["prefixPath","collectionGroup","readTime","documentId"],bA=["prefixPath","collectionGroup","documentId"],np=["collectionGroup","readTime","prefixPath","documentId"],qC=["canonicalId","targetId"],wv=["targetId","path"],zC=["path","targetId"],HE=["collectionId","parent"],WC=["indexId","uid"],ZC=["uid","sequenceNumber"],Ev=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GE=["indexId","uid","orderedDocumentKey"],qE=["userId","collectionPath","documentId"],Mm=["userId","collectionPath","largestBatchId"],Iv=["userId","collectionGroup","largestBatchId"],KC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zE=[...KC,"documentOverlays"],WE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZE=[...WE,"indexConfiguration","indexState","indexEntries"],rp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(o=>o?he.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class ph{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new xr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new ip(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=xm(r.target.error);this.At.reject(new ip(e,o))}}static open(e,t,r,o){try{return new ph(t,e.transaction(o,r))}catch(u){throw new ip(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KE(t)}}class fs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===fs.Vt((0,Lt.z$)())&&zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Ku(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Lt.hl)())return!1;if(fs.St())return!0;const e=(0,Lt.z$)(),t=fs.Vt(e),r=0<t&&t<10,o=fs.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new ip(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ip(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=ph.open(u.db,e,d?"readonly":"readwrite",r),C=o(E).next(A=>(E.bt(),A)).catch(A=>(E.abort(A),he.reject(A))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class CA{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ku(this.Ft.delete())}}class ip extends xe{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function uc(n){return"IndexedDbTransactionError"===n.name}class KE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ku(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Ku(this.store.add(e))}get(e){return Ku(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Ku(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Ku(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new he((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new he((r,o)=>{t.onerror=u=>{const d=xm(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new he((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new CA(m),C=t(m.primaryKey,m.value,E);if(C instanceof he){const A=C.catch(k=>(E.done(),he.reject(k)));r.push(A)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ku(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=xm(r.target.error);t(o)}})}let YE=!1;function xm(n){const e=fs.Vt((0,Lt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YE||(YE=!0,setTimeout(()=>{throw r},0)),r}}return n}class Cv extends bv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Nr(n,e){const t=ze(n);return fs.xt(t.Ht,e)}class Dv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&MC(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Gu(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Gu(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(t,r)=>rc(t,r))&&Oa(this.baseMutations,e.baseMutations,(t,r)=>rc(t,r))}}class km{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=TE;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new km(e,t,r,o)}}class Tv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ja{constructor(e,t,r,o,u=It.min(),d=It.min(),m=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Av{constructor(e){this.Jt=e}}function Sv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Wu(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:zu(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lc(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:lc(e.version)}}var o,u;return r}function Rm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gh(n){const e=new kt(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function cc(n,e){const t=(e.baseMutations||[]).map(u=>tp(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>tp(n.Jt,u)),o=kt.fromMillis(e.localWriteTimeMs);return new Dv(e.batchId,o,t,r)}function Nm(n){const e=gh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gh(n.lastLimboFreeSnapshotVersion):It.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=hs(nh(yv(o.documents[0])))):r=hs(PE(n.query)),new ja(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function YC(n,e){const t=lc(e.snapshotVersion),r=lc(e.lastLimboFreeSnapshotVersion);let o;o=ym(e.target)?Am(n.Jt,e.target):Sm(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ua(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function JE(n){const e=PE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?vE(e,e.limit,"L"):e}function XE(n,e){return new Tv(e.largestBatchId,tp(n.Jt,e.overlayMutation))}function QC(n,e){const t=e.path.lastSegment();return[n,ci(e.path.popLast()),t]}class DA{getBundleMetadata(e,t){return JC(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:gh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return JC(e).put({bundleId:(r=t).id,createTime:lc(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return XC(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:JE(o.bundledQuery),readTime:gh(o.readTime)};var o})}saveNamedQuery(e,t){return XC(e).put({name:(r=t).name,readTime:lc(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function JC(n){return Nr(n,"bundles")}function XC(n){return Nr(n,"namedQueries")}class mh{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new mh(e,t.uid||"")}getOverlay(e,t){return Om(e).get(QC(this.userId,t)).next(r=>r?XE(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new Tv(t,d);o.push(this.Xt(e,m))}),he.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(ci(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Om(e).Qt("collectionPathOverlayIndex",m))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ba(),u=ci(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Om(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const E of m){const C=XE(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ba();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Om(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,A)=>{const k=XE(this.M,C);u.size()<o||k.largestBatchId===d?(u.set(k.getKey(),k),d=k.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return Om(e).put(function(r,o,u){const[d,m,E]=QC(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:sc(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Om(n){return Nr(n,"documentOverlays")}class Yu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Vn(e.integerValue));else if("doubleValue"in e){const r=Vn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),La(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ec(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?ev(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Mv(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Mv(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Yu.fe=new Yu;class eI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=xv(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=xv(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class TA{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class kv{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class yh{constructor(){this.De=new eI,this.Ce=new TA(this.De),this.xe=new kv(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class dc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new dc(this.indexId,this.documentKey,this.arrayValue,r)}}function Qu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=eD(n.arrayValue,e.arrayValue),0!==t?t:(t=eD(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function eD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class tD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=tv(e);if(void 0!==t&&!this.Be(t))return!1;const r=$s(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class nD{constructor(){this.qe=new sp}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Io.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class sp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new ln(qt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new ln(qt.comparator)).toArray()}}const Pm=new Uint8Array(0);class AA{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new sp,this.Ge=new qu(r=>Ua(r),(r,o)=>eh(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:ci(o)};return rD(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Bf(t),""],!1,!0);return rD(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(bo(d.parent))}return r})}addFieldIndex(e,t){const r=Lm(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Lm(e),o=Vm(e),u=Fm(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Fm(e);let o=!0;const u=new Map;return he.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Xt();const m=[];return he.forEach(u,(E,C)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=E,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Ot=>`${Ot.fieldPath}:${Ot.kind}`).join(",")}`} to execute ${Ua(t)}`);const k=function(Ot,Dt){const Nt=tv(Dt);if(void 0===Nt)return null;for(const st of _m(Ot,Nt.fieldPath))switch(st.op){case"array-contains-any":return st.value.arrayValue.values||[];case"array-contains":return[st.value]}return null}(C,E),V=function(Ot,Dt){const Nt=new Map;for(const st of $s(Dt))for(const vt of _m(Ot,st.fieldPath))switch(vt.op){case"==":case"in":Nt.set(st.fieldPath.canonicalString(),vt.value);break;case"not-in":case"!=":return Nt.set(st.fieldPath.canonicalString(),vt.value),Array.from(Nt.values())}return null}(C,E),Z=function(Ot,Dt){const Nt=[];let st=!0;for(const vt of $s(Dt)){const sa=0===vt.kind?gE(Ot,vt.fieldPath,Ot.startAt):mE(Ot,vt.fieldPath,Ot.startAt);Nt.push(sa.value),st&&(st=sa.inclusive)}return new $u(Nt,st)}(C,E),ae=function(Ot,Dt){const Nt=[];let st=!0;for(const vt of $s(Dt)){const sa=0===vt.kind?mE(Ot,vt.fieldPath,Ot.endAt):gE(Ot,vt.fieldPath,Ot.endAt);Nt.push(sa.value),st&&(st=sa.inclusive)}return new $u(Nt,st)}(C,E),Ne=this.We(E,C,Z),Le=this.We(E,C,ae),At=this.ze(E,C,V),Rt=this.He(E.indexId,k,Ne,Z.inclusive,Le,ae.inclusive,At);return he.forEach(Rt,Ot=>r.Gt(Ot,t.limit).next(Dt=>{Dt.forEach(Nt=>{const st=$e.fromSegments(Nt.documentKey);d.has(st)||(d=d.add(st),m.push(st))})}))}).next(()=>m)}return he.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),C=E/(null!=t?t.length:1),A=[];for(let k=0;k<E;++k){const V=t?this.Je(t[k/C]):Pm,Z=this.Ye(e,V,r[k%C],o),ae=this.Xe(e,V,u[k%C],d),Ne=m.map(Le=>this.Ye(e,V,Le,!0));A.push(...this.createRange(Z,ae,Ne))}return A}Ye(e,t,r,o){const u=new dc(e,$e.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new dc(e,$e.empty(),t,r);return o?u.ke():u}je(e,t){const r=new tD(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return he.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new ln(ir.comparator),E=!1;for(const C of d.filters){const A=C;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?E=!0:m=m.add(A.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new yh;for(const o of $s(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Yu.fe.Zt(u,d)}return r.Se()}Je(e){const t=new yh;return Yu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new yh;return Yu.fe.Zt(Yd(this.databaseId,t),r.Ne(function(o){const u=$s(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new yh);let u=0;for(const d of $s(e)){const m=r[u++];for(const E of o)if(this.en(t,d.fieldPath)&&fm(m))o=this.nn(o,d,m);else{const C=E.Ne(d.kind);Yu.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const E=new yh;E.seed(m.Se()),Yu.fe.Zt(d,E.Ne(t.kind)),u.push(E)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Lm(e),o=Vm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return he.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{d.push(function(C,A){const k=A?new Qd(A.sequenceNumber,new Io(gh(A.readTime),new $e(bo(A.documentKey)),A.largestBatchId)):Qd.empty(),V=C.fields.map(([Z,ae])=>new mm(ir.fromServerFormat(Z),ae));return new gm(C.indexId,C.collectionGroup,V,k)}(m,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Lm(e),u=Vm(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>he.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:lc((V=r).readTime),documentKey:ci(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?he.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),he.forEach(m,E=>this.on(e,o,E).next(C=>{const A=this.un(u,E);return C.isEqual(A)?he.resolve():this.an(e,u,E,C,A)}))))})}cn(e,t,r,o){return Fm(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Fm(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Fm(e);let u=new ln(Qu);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new dc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new ln(Qu);const o=this.Ze(t,e);if(null==o)return r;const u=tv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(fm(d))for(const m of d.arrayValue.values||[])r=r.add(new dc(t.indexId,e.key,this.Je(m),o))}else r=r.add(new dc(t.indexId,e.key,Pm,o));return r}an(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,E,C,A,k){const V=m.getIterator(),Z=E.getIterator();let ae=Xd(V),Ne=Xd(Z);for(;ae||Ne;){let Le=!1,At=!1;if(ae&&Ne){const Rt=C(ae,Ne);Rt<0?At=!0:Rt>0&&(Le=!0)}else null!=ae?At=!0:Le=!0;Le?(A(Ne),Ne=Xd(Z)):At?(k(ae),ae=Xd(V)):(ae=Xd(V),Ne=Xd(Z))}}(o,u,Qu,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),he.waitFor(d)}rn(e){let t=1;return Vm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Qu(d,m)).filter((d,m,E)=>!m||0!==Qu(d,E[m-1]));const o=[];o.push(e);for(const d of r){const m=Qu(d,e),E=Qu(d,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(d),o.push(d.ke());else if(E>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Pm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Pm,[]]));return u}getMinOffset(e,t){let r;return he.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||nv(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Io.min()})).next(()=>r)}}function rD(n){return Nr(n,"collectionParents")}function Fm(n){return Nr(n,"indexEntries")}function Lm(n){return Nr(n,"indexConfiguration")}function Vm(n){return Nr(n,"indexState")}const tI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nI(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:d},(A,k,V)=>(m++,V.delete()));u.push(E.next(()=>{bt(1===m)}));const C=[];for(const A of t.mutations){const k=ac(e,A.key.path,t.batchId);u.push(o.delete(k)),C.push(A.key)}return he.waitFor(u).next(()=>C)}function _h(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class Rv{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Rv(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Xu(e),d=Ju(e);return d.add({}).next(m=>{bt("number"==typeof m);const E=new Dv(m,t,r,o),C=function(V,Z,ae){const Ne=ae.baseMutations.map(At=>sc(V.Jt,At)),Le=ae.mutations.map(At=>sc(V.Jt,At));return{userId:Z,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Ne,mutations:Le}}(this.M,this.userId,E),A=[];let k=new ln((V,Z)=>xt(V.canonicalString(),Z.canonicalString()));for(const V of o){const Z=ac(this.userId,V.key.path,m);k=k.add(V.key.path.popLast()),A.push(d.put(C)),A.push(u.put(Z,HC))}return k.forEach(V=>{A.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.ln[m]=E.keys()}),he.waitFor(A).next(()=>E)})}lookupMutationBatch(e,t){return Ju(e).get(t).next(r=>r?(bt(r.userId===this.userId),cc(this.M,r)):null)}fn(e,t){return this.ln[t]?he.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ju(e).Wt({index:"userMutationsIndex",range:o},(d,m,E)=>{m.userId===this.userId&&(bt(m.batchId>=r),u=cc(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ju(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).qt("userMutationsIndex",t).next(r=>r.map(o=>cc(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Rr(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Xu(e).Wt({range:o},(d,m,E)=>{const[C,A,k]=d,V=bo(A);if(C===this.userId&&t.path.isEqual(V))return Ju(e).get(k).next(Z=>{if(!Z)throw nt();bt(Z.userId===this.userId),u.push(cc(this.M,Z))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(xt);const o=[];return t.forEach(u=>{const d=Rr(this.userId,u.path),m=IDBKeyRange.lowerBound(d),E=Xu(e).Wt({range:m},(C,A,k)=>{const[V,Z,ae]=C,Ne=bo(Z);V===this.userId&&u.path.isEqual(Ne)?r=r.add(ae):k.done()});o.push(E)}),he.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Rr(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new ln(xt);return Xu(e).Wt({range:d},(E,C,A)=>{const[k,V,Z]=E,ae=bo(V);k===this.userId&&r.isPrefixOf(ae)?ae.length===o&&(m=m.add(Z)):A.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ju(e).get(u).next(d=>{if(null===d)throw nt();bt(d.userId===this.userId),r.push(cc(this.M,d))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return nI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Xu(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const E=bo(u[1]);o.push(E)}else m.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return Gs(e,this.userId,t)}wn(e){return rI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Gs(n,e,t){const r=Rr(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Xu(n).Wt({range:u,jt:!0},(m,E,C)=>{const[A,k,V]=m;A===e&&k===o&&(d=!0),C.done()}).next(()=>d)}function Ju(n){return Nr(n,"mutations")}function Xu(n){return Nr(n,"documentMutations")}function rI(n){return Nr(n,"mutationQueues")}class hc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new hc(0)}static yn(){return new hc(-1)}}class Nv{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new hc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>It.fromTimestamp(new kt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fc(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return fc(e).Wt((d,m)=>{const E=Nm(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>he.waitFor(u)).next(()=>o)}forEachTarget(e,t){return fc(e).Wt((r,o)=>{const u=Nm(o);t(u)})}pn(e){return Ov(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}In(e,t){return Ov(e).put("targetGlobalKey",t)}Tn(e,t){return fc(e).put(YC(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ua(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return fc(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,E)=>{const C=Nm(m);eh(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=el(e);return t.forEach(d=>{const m=ci(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),he.waitFor(o)}removeMatchingKeys(e,t,r){const o=el(e);return he.forEach(t,u=>{const d=ci(u.path);return he.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=el(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=el(e);let u=Xt();return o.Wt({range:r,jt:!0},(d,m,E)=>{const C=bo(d[1]),A=new $e(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=ci(t.path),o=IDBKeyRange.bound([r],[Bf(r)],!1,!0);let u=0;return el(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],E,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return fc(e).get(t).next(r=>r?Nm(r):null)}}function fc(n){return Nr(n,"targets")}function Ov(n){return Nr(n,"targetGlobal")}function el(n){return Nr(n,"targetDocuments")}function tl(n){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,ve.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==rp)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Pv.apply(this,arguments)}function iI([n,e],[t,r]){const o=xt(n,t);return 0===o?xt(e,r):o}class iD{constructor(e){this.An=e,this.buffer=new ln(iI),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fv{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){uc(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield tl(o)}yield t.Sn(e)}))}}class pc{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(ds.A);const r=new iD(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(tI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tI):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,E,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),o=this.params.maximumSequenceNumbersToCollect):o=k,d=Date.now(),this.nthSequenceNumber(e,o))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(C=Date.now(),dm()<=oi.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${k} documents in `+(C-E)+`ms\nTotal Duration: ${C-A}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:k})))}}class sI{constructor(e,t){this.db=e,this.garbageCollector=new pc(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return op(e,r)}removeReference(e,t,r){return op(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return op(e,t)}On(e,t){return function(r,o){let u=!1;return rI(r).zt(d=>Gs(r,d,o).next(m=>(m&&(u=!0),he.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const E=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,It.min()),el(e).delete([0,ci(d.path)])))});o.push(E)}}).next(()=>he.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return op(e,t)}Mn(e,t){const r=el(e);let o,u=ds.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:E,sequenceNumber:C})=>{0===d?(u!==ds.A&&t(new $e(bo(o)),u),u=C,o=E):u=ds.A}).next(()=>{u!==ds.A&&t(new $e(bo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function op(n,e){return el(n).put((r=n.currentSequenceNumber,{targetId:0,path:ci(e.path),sequenceNumber:r}));var r}class oI{constructor(){this.changes=new qu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class SA{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return gc(e).put(r)}removeEntry(e,t,r){return gc(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Rm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return gc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vh(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return gc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vh(t))},(o,u)=>{r={document:this.$n(t,u),size:_h(u)}}).next(()=>r)}getEntries(e,t){let r=Hs();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Hs(),o=new Wn($e.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,_h(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return he.resolve();let o=new ln(lI);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(vh(o.first()),vh(o.last())),d=o.getIterator();let m=d.getNext();return gc(e).Wt({index:"documentKeyIndex",range:u},(E,C,A)=>{const k=$e.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&lI(m,k)<0;)r(m,null),m=d.getNext();m&&m.isEqual(k)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?A.Ut(vh(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Rm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gc(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Hs();for(const E of d){const C=this.$n($e.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Hs();const d=uI(t,r),m=uI(t,Io.max());return gc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(E,C,A)=>{const k=this.$n($e.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(k.key,k),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new sD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aI(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Fn(e,t){return aI(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function QE(n,e){let t;if(e.document)t=NE(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=gh(e.noDocument.readTime);t=dn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=$e.fromSegments(e.unknownDocument.path),o=gh(e.unknownDocument.version);t=dn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new kt(r[0],r[1]);return It.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return dn.newInvalidDocument(e)}}class sD extends oI{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new qu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new ln((u,d)=>xt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const E=Sv(this.Kn.M,d);o=o.add(u.path.popLast()),r+=_h(E)-m.size,t.push(this.Kn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=Sv(this.Kn.M,d.convertToNoDocument(It.min()));t.push(this.Kn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function aI(n){return Nr(n,"remoteDocumentGlobal")}function gc(n){return Nr(n,"remoteDocumentsV14")}function vh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uI(n,e){const t=e.documentKey.path.toArray();return[n,Rm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lI(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=xt(t[u],r[u]),o)return o;return o=xt(t.length,r.length),o||(o=xt(t[t.length-2],r[r.length-2]),o||xt(t[t.length-1],r[r.length-1]))}class MA{constructor(e){this.M=e}kt(e,t,r,o){const u=new ph("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vv,{unique:!0}),m.createObjectStore("documentMutations"),Um(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=he.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Um(e)),d=d.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vv,{unique:!0});const A=E.store("mutations"),k=C.map(V=>A.put(V));return he.waitFor(k)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:qE});E.createIndex("collectionPathOverlayIndex",Mm,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",Iv,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:GC});E.createIndex("documentKeyIndex",bA),E.createIndex("collectionGroupIndex",np)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:WC}).createIndex("sequenceNumberIndex",ZC,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Ev}).createIndex("documentKeyIndex",GE,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=_h(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>he.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>he.forEach(m,E=>{bt(E.userId===u.userId);const C=cc(this.M,E);return nI(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const E=new qt(d),C=[0,ci(E)];u.push(t.get(C).next(A=>A?he.resolve():t.put({targetId:0,path:ci(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:HE});const r=t.store("collectionParents"),o=new sp,u=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:ci(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const E=new qt(d);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,E],C)=>{const A=bo(m);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Nm(o),d=YC(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),E=(C=d,C.document?new $e(qt.fromString(C.document.name).popFirst(5)):C.noDocument?$e.fromSegments(C.noDocument.path):C.unknownDocument?$e.fromSegments(C.unknownDocument.path):nt()).path.toArray();var C;const A={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(A))}).next(()=>he.waitFor(o))}}function Um(n){n.createObjectStore("targetDocuments",{keyPath:wv}).createIndex("documentTargetsIndex",zC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qC,{unique:!0}),n.createObjectStore("targetGlobal")}const Bm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lv{constructor(e,t,r,o,u,d,m,E,C,A,k=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=A,this.ts=k,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!Lv.vt())throw new xe(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sI(this,o),this.hs=t+"main",this.M=new Av(E),this.ls=new fs(this.hs,this.ts,new MA(this.M)),this.fs=new Nv(this.referenceDelegate,this.M),this.ds=new SA(this.M),this._s=new DA,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(oe.FAILED_PRECONDITION,Bm);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ds(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>up(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(uc(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return ap(e).get("owner").next(t=>he.resolve(this.Ps(t)))}Vs(e){return up(e).delete(this.clientId)}vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Nr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(E=>-1===d.indexOf(E));return he.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?he.resolve(!0):ap(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(oe.FAILED_PRECONDITION,Bm);return!1}}return!(!this.networkEnabled||!this.inForeground)||up(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Cv(t,ds.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>up(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Rv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new AA(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return mh.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?ZE:13===d?WE:12===d?zE:11===d?KC:void nt();var d;let m;return this.ls.runTransaction(e,o,u,E=>(m=new Cv(E,this.es?this.es.next():ds.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(oe.FAILED_PRECONDITION,rp);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}$s(e){return ap(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(oe.FAILED_PRECONDITION,Bm)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ap(e).put("owner",t)}static vt(){return fs.vt()}Rs(e){const t=ap(e);return t.get("owner").next(r=>this.Ps(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(zn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Lt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){zn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ap(n){return Nr(n,"owner")}function up(n){return Nr(n,"clientMetadata")}function lp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Vv{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Im(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let o=fv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=fv();return this.indexManager.getCollectionParents(e,o).next(d=>he.forEach(d,m=>{const E=(C=t,A=m.child(o),new ea(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.zs(e,E,r).next(C=>{C.forEach((A,k)=>{u=u.insert(A,k)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const E=m.key;let C=o.get(E);null==C&&(C=dn.newInvalidDocument(E),o=o.insert(E,C)),Gu(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,d)=>{sh(t,d)||(o=o.remove(u))}),o))}}class jm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Xt(),o=Xt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jm(e,t.fromCache,r,o)}}class cI{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return he.resolve(null)}ei(e,t,r,o){return function bC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(It.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(dm()<=oi.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ov(t)),this.ri(e,d,t,hE(o,-1)))})}si(e,t){let r=new ln(tc(e));return t.forEach((o,u)=>{sh(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return dm()<=oi.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",ov(t)),this.Zs.Qs(e,t,Io.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class dI{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Wn(xt),this.ai=new qu(u=>Ua(u),eh),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Vv(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Uv(n,e,t,r){return new dI(n,e,t,r)}function hI(n,e){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,ve.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let E=Xt();for(const C of o){d.push(C.batchId);for(const A of C.mutations)E=E.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)E=E.add(A.key)}return t.fi.Ks(r,E).next(C=>({di:C,removedBatchIds:d,addedBatchIds:m}))})})}),Bv.apply(this,arguments)}function xA(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,E,C){const A=E.batch,k=A.keys();let V=he.resolve();return k.forEach(Z=>{V=V.next(()=>C.getEntry(m,Z)).next(ae=>{const Ne=E.docVersions.get(Z);bt(null!==Ne),ae.version.compareTo(Ne)<0&&(A.applyToRemoteDocument(ae,E),ae.isValidDocument()&&(ae.setReadTime(E.commitVersion),C.addEntry(ae)))})}),V.next(()=>d.Bs.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function oD(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function fI(n,e){const t=ze(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,A)=>{const k=o.get(A);if(!k)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,A)));let V=k.withSequenceNumber(u.currentSequenceNumber);var Z,ae,Ne;e.targetMismatches.has(A)?V=V.withResumeToken(_r.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),o=o.insert(A,V),ae=V,Ne=C,(0===(Z=k).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Ne.addedDocuments.size+Ne.modifiedDocuments.size+Ne.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,V))});let E=Hs();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(pI(u,d,e.documentUpdates).next(C=>{E=C})),!r.isEqual(It.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return he.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,E)).next(()=>E)}).then(u=>(t.ui=o,u))}function pI(n,e,t){let r=Xt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Hs();return t.forEach((d,m)=>{const E=o.get(d);m.isNoDocument()&&m.version.isEqual(It.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Oe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",E.version," Watch version:",m.version)}),u})}function aD(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function wh(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,he.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new ja(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function cp(n,e,t){return gI.apply(this,arguments)}function gI(){return gI=(0,ve.Z)(function*(n,e,t){const r=ze(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!uc(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),gI.apply(this,arguments)}function jv(n,e,t){const r=ze(n);let o=It.min(),u=Xt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,C){const A=ze(m),k=A.ai.get(C);return void 0!==k?he.resolve(A.ui.get(k)):A.fs.getTargetData(E,C)}(r,d,hs(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(E=>{u=E})}).next(()=>r.oi.Qs(d,e,t?o:It.min(),t?u:Xt())).next(m=>(mI(r,wE(e),m),{documents:m,_i:u})))}function uD(n,e){const t=ze(n),r=ze(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function lD(n,e){const t=ze(n),r=t.ci.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,hE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(mI(t,e,o),o))}function mI(n,e,t){let r=It.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function $v(){return $v=(0,ve.Z)(function*(n,e,t,r){const o=ze(n);let u=Xt(),d=Hs();for(const C of t){const A=e.wi(C.metadata.name);C.document&&(u=u.add(A));const k=e.mi(C);k.setReadTime(e.gi(C.metadata.readTime)),d=d.insert(A,k)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),E=yield wh(o,(C=r,hs(nh(qt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>pI(C,m,d).next(A=>(m.apply(C),A)).next(A=>o.fs.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.fs.addMatchingKeys(C,u,E.targetId)).next(()=>o.fi.Gs(C,A)).next(()=>A)))}),$v.apply(this,arguments)}function cD(n,e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,ve.Z)(function*(n,e,t=Xt()){const r=yield wh(n,hs(JE(e.bundledQuery))),o=ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=kr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(_r.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),Hm.apply(this,arguments)}class mc{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return he.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:JE(r.bundledQuery),readTime:kr(r.readTime)}),he.resolve();var r}}class yI{constructor(){this.overlays=new Wn($e.comparator),this.Ii=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const o=Ba(),u=t.length+1,d=new $e(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return he.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Wn((C,A)=>C-A);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=Ba(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=Ba(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=o)););return he.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Tv(t,r));let u=this.Ii.get(t);void 0===u&&(u=Xt(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class dp{constructor(){this.Ti=new ln(or.Ei),this.Ai=new ln(or.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new or(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new or(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new qt([])),r=new or(t,e),o=new or(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new qt([])),r=new or(t,e),o=new or(t,e+1);let u=Xt();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new or(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class or{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||xt(e.Ci,t.Ci)}static Ri(e,t){return xt(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class dD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new ln(or.Ei)}checkEmpty(e){return he.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new Dv(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new or(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return he.resolve(d)}lookupMutationBatch(e,t){return he.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return he.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return he.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new or(t,0),o=new or(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(xt);return t.forEach(o=>{const u=new or(o,0),d=new or(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),he.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const d=new or(new $e(u),0);let m=new ln(xt);return this.Ni.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.Ci)),!0)},d),he.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return he.forEach(t.mutations,o=>{const u=new or(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new or(t,0),o=this.Ni.firstAfterOrEqual(r);return he.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return he.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Hv{constructor(e){this.$i=e,this.docs=new Wn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Hs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():dn.newInvalidDocument(o))}),he.resolve(r)}getAllFromCollection(e,t,r){let o=Hs();const u=new $e(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:E}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||nv(fE(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}Bi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Gv(this)}getSize(e){return he.resolve(this.size)}}class Gv extends oI{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Gm{constructor(e){this.persistence=e,this.Li=new qu(t=>Ua(t),eh),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ui=0,this.qi=new dp,this.targetCount=0,this.Ki=hc.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),he.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new hc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tn(t),he.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),he.waitFor(u).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.qi.containsKey(t))}}class kA{constructor(e,t){this.Gi={},this.overlays={},this.es=new ds(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Gm(this),this.indexManager=new nD,this.ds=new Hv(r=>this.referenceDelegate.Qi(r)),this.M=new Av(t),this._s=new mc(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new dD(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new RA(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return he.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class RA extends bv{constructor(e){super(),this.currentSequenceNumber=e}}class _I{constructor(e){this.persistence=e,this.Hi=new dp,this.Ji=null}static Yi(e){return new _I(e)}get Xi(){if(this.Ji)return this.Ji;throw nt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Xi,r=>{const o=$e.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,It.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return he.or([()=>he.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function hD(n,e){return`firestore_clients_${n}_${e}`}function qv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zv(n,e){return`firestore_targets_${n}_${e}`}class qm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new qm(e,t,o.state,u):(zn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new hp(e,r.state,o):(zn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Qf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=sE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new zm(e,u):(zn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Wm{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Wm(t.clientId,t.onlineState):(zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zm{constructor(){this.activeTargetIds=Qf()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Km{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Wn(xt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=hD(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Zm),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(hD(e.persistenceKey,o));if(u){const d=zm.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(zv(this.persistenceKey,e));if(r){const o=hp.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zv(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=ds.A;if(null!=u)try{const m=JSON.parse(u);bt("number"==typeof m),d=m}catch(m){zn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==ds.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new qm(this.currentUser,e,t,r),u=qv(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=qv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=zv(this.persistenceKey,e),u=new hp(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return zm.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return qm.tr(new qr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return hp.tr(o,t)}pr(e){return Wm.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Qf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class vI{constructor(){this.Ur=new Zm,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Zm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fD{Kr(e){}shutdown(){}}class Wv{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Zv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class NA{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class wI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(E=>(Oe("RestConnection","Received: ",E),E),E=>{throw Gd("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${Zv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new cC;m.listenOnce(aC.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case K_.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case K_.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new xe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case K_.HTTP_ERROR:const A=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const k=m.getResponseJson().error;if(k&&k.status&&k.message){const V=function(Z){const ae=Z.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ae)>=0?ae:oe.UNKNOWN}(k.status);d(new xe(V,k.message))}else d(new xe(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(oe.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=sC(),d=oC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new lC({})),this.lo(m.initMessageHeaders,t,r),(0,Lt.uI)()||(0,Lt.b$)()||(0,Lt.d)()||(0,Lt.w1)()||(0,Lt.Mn)()||(0,Lt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Oe("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let A=!1,k=!1;const V=new NA({Jr:ae=>{k?Oe("Connection","Not sending because WebChannel is closed:",ae):(A||(Oe("Connection","Opening WebChannel transport."),C.open(),A=!0),Oe("Connection","WebChannel sending:",ae),C.send(ae))},Yr:()=>C.close()}),Z=(ae,Ne,Le)=>{ae.listen(Ne,At=>{try{Le(At)}catch(Rt){setTimeout(()=>{throw Rt},0)}})};return Z(C,cm.EventType.OPEN,()=>{k||Oe("Connection","WebChannel transport opened.")}),Z(C,cm.EventType.CLOSE,()=>{k||(k=!0,Oe("Connection","WebChannel transport closed"),V.ro())}),Z(C,cm.EventType.ERROR,ae=>{k||(k=!0,Gd("Connection","WebChannel transport errored:",ae),V.ro(new xe(oe.UNAVAILABLE,"The operation could not be completed")))}),Z(C,cm.EventType.MESSAGE,ae=>{var Ne;if(!k){const Le=ae.data[0];bt(!!Le);const At=Le,Rt=At.error||(null===(Ne=At[0])||void 0===Ne?void 0:Ne.error);if(Rt){Oe("Connection","WebChannel received error:",Rt);const Ot=Rt.status;let Dt=function(st){const vt=Zn[st];if(void 0!==vt)return DE(vt)}(Ot),Nt=Rt.message;void 0===Dt&&(Dt=oe.INTERNAL,Nt="Unknown error status: "+Ot+" with message "+Rt.message),k=!0,V.ro(new xe(Dt,Nt)),C.close()}else Oe("Connection","WebChannel received:",Le),V.oo(Le)}}),Z(d,uC.STAT_EVENT,ae=>{ae.stat===Yw.PROXY?Oe("Connection","Detected buffering proxy"):ae.stat===Yw.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.io()},0),V}}function Ym(){return"undefined"!=typeof window?window:null}function Qm(){return"undefined"!=typeof document?document:null}function fp(n){return new LC(n,!0)}class EI{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class pD{constructor(e,t,r,o,u,d,m,E){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new EI(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ve.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ve.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(zn(t.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new xe(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ve.Z)(function*(){e.state=0,e.start()}))}jo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gD extends pD{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function IA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:nt(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(bt(void 0===C||"string"==typeof C),_r.fromBase64String(C||"")):(bt(void 0===C||C instanceof Uint8Array),_r.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const C=void 0===E.code?oe.UNKNOWN:DE(E.code);return new xe(C,E.message||"")}(d);t=new xE(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ra(n,r.document.name),u=kr(r.document.updateTime),d=new li({mapValue:{fields:r.document.fields}}),m=dn.newFoundDocument(o,u,d);t=new Xf(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ra(n,r.document),u=r.readTime?kr(r.readTime):It.min(),d=dn.newNoDocument(o,u);t=new Xf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ra(n,r.document);t=new Xf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new NC(r.count||0);t=new ME(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return It.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?kr(u.readTime):It.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=fh(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=ym(m)?{documents:Am(o,m)}:{query:Sm(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=hh(o,u.resumeToken):u.snapshotVersion.compareTo(It.min())>0&&(d.readTime=zu(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function BC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=fh(this.M),t.removeTarget=e,this.Lo(t)}}class mD extends pD{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function OE(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let u=kr(r.updateTime?r.updateTime:o);return u.isEqual(It.min())&&(u=kr(o)),new cv(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.tu(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=fh(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sc(this.M,r))};this.Lo(t)}}class OA extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new xe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(oe.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(oe.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class PA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(zn(t),this.uu=!1):Oe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class FA{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,ve.Z)(function*(){var E;l(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ve.Z)(function*(C){const A=ze(C);A.wu.add(4),yield Eh(A),A.yu.set("Unknown"),A.wu.delete(4),yield Jm(A)}),function(C){return E.apply(this,arguments)})(d))}))}),this.yu=new PA(r,o)}}function Jm(n){return II.apply(this,arguments)}function II(){return II=(0,ve.Z)(function*(n){if(l(n))for(const e of n.mu)yield e(!0)}),II.apply(this,arguments)}function Eh(n){return bI.apply(this,arguments)}function bI(){return bI=(0,ve.Z)(function*(n){for(const e of n.mu)yield e(!1)}),bI.apply(this,arguments)}function Kv(n,e){const t=ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),a(t)?s(t):nl(t).Mo()&&CI(t,e))}function Xm(n,e){const t=ze(n),r=nl(t);t._u.delete(e),r.Mo()&&i(t,e),0===t._u.size&&(r.Mo()?r.$o():l(t)&&t.yu.set("Unknown"))}function CI(n,e){n.pu.Z(e.targetId),nl(n).Ho(e)}function i(n,e){n.pu.Z(e),nl(n).Jo(e)}function s(n){n.pu=new FC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),nl(n).start(),n.yu.au()}function a(n){return l(n)&&!nl(n).ko()&&n._u.size>0}function l(n){return 0===ze(n).wu.size}function c(n){n.pu=void 0}function p(n){return _.apply(this,arguments)}function _(){return _=(0,ve.Z)(function*(n){n._u.forEach((e,t)=>{CI(n,e)})}),_.apply(this,arguments)}function w(n,e){return I.apply(this,arguments)}function I(){return I=(0,ve.Z)(function*(n,e){c(n),a(n)?(n.yu.lu(e),s(n)):n.yu.set("Unknown")}),I.apply(this,arguments)}function S(n,e,t){return M.apply(this,arguments)}function M(){return M=(0,ve.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof xE&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield P(n,r)}else if(e instanceof Xf?n.pu.ut(e):e instanceof ME?n.pu._t(e):n.pu.ht(e),!t.isEqual(It.min()))try{const r=yield oD(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(E);C&&o._u.set(E,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const E=o._u.get(m);if(!E)return;o._u.set(m,E.withResumeToken(_r.EMPTY_BYTE_STRING,E.snapshotVersion)),i(o,m);const C=new ja(E.target,m,1,E.sequenceNumber);CI(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield P(n,r)}var r}),M.apply(this,arguments)}function P(n,e,t){return U.apply(this,arguments)}function U(){return U=(0,ve.Z)(function*(n,e,t){if(!uc(e))throw e;n.wu.add(1),yield Eh(n),n.yu.set("Offline"),t||(t=()=>oD(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Jm(n)}))}),U.apply(this,arguments)}function Y(n,e){return e().catch(t=>P(n,t,e))}function ye(n){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,ve.Z)(function*(n){const e=ze(n),t=Ih(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;je(e);)try{const o=yield aD(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,et(e,o)}catch(o){yield P(e,o)}Te(e)&&ht(e)}),Pe.apply(this,arguments)}function je(n){return l(n)&&n.du.length<10}function et(n,e){n.du.push(e);const t=Ih(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function Te(n){return l(n)&&!Ih(n).ko()&&n.du.length>0}function ht(n){Ih(n).start()}function Bt(n){return Qt.apply(this,arguments)}function Qt(){return Qt=(0,ve.Z)(function*(n){Ih(n).nu()}),Qt.apply(this,arguments)}function gs(n){return $a.apply(this,arguments)}function $a(){return $a=(0,ve.Z)(function*(n){const e=Ih(n);for(const t of n.du)e.Zo(t.mutations)}),$a.apply(this,arguments)}function Yv(n,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,ve.Z)(function*(n,e,t){const r=n.du.shift(),o=km.from(r,e,t);yield Y(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield ye(n)}),pp.apply(this,arguments)}function Qv(n,e){return gp.apply(this,arguments)}function gp(){return gp=(0,ve.Z)(function*(n,e){var t;e&&Ih(n).Xo&&(yield(t=(0,ve.Z)(function*(r,o){if(CE(u=o.code)&&u!==oe.ABORTED){const d=r.du.shift();Ih(r).Fo(),yield Y(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield ye(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Te(n)&&ht(n)}),gp.apply(this,arguments)}function ey(n,e){return mp.apply(this,arguments)}function mp(){return mp=(0,ve.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=l(t);t.wu.add(3),yield Eh(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Jm(t)}),mp.apply(this,arguments)}function yp(n,e){return _p.apply(this,arguments)}function _p(){return _p=(0,ve.Z)(function*(n,e){const t=ze(n);e?(t.wu.delete(2),yield Jm(t)):e||(t.wu.add(2),yield Eh(t),t.yu.set("Unknown"))}),_p.apply(this,arguments)}function nl(n){return n.Iu||(n.Iu=function(e,t,r){const o=ze(e);return o.iu(),new gD(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:p.bind(null,n),eo:w.bind(null,n),zo:S.bind(null,n)}),n.mu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Iu.Fo(),a(n)?s(n):n.yu.set("Unknown")):(yield n.Iu.stop(),c(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Ih(n){return n.Tu||(n.Tu=function(e,t,r){const o=ze(e);return o.iu(),new mD(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Bt.bind(null,n),eo:Qv.bind(null,n),eu:gs.bind(null,n),tu:Yv.bind(null,n)}),n.mu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Tu.Fo(),yield ye(n)):(yield n.Tu.stop(),n.du.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class yD{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new yD(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ty(n,e){if(zn("AsyncQueue",`${e}: ${n}`),uc(n))return new xe(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class ny{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=fv(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new ny(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ny)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ny;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class LA{constructor(){this.Eu=new Wn($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):nt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ry{constructor(e,t,r,o,u,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new ry(e,t,ny.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class gx{constructor(){this.Ru=void 0,this.listeners=[]}}class mx{constructor(){this.queries=new qu(e=>CC(e),ih),this.onlineState="Unknown",this.bu=new Set}}function _D(n,e){return vD.apply(this,arguments)}function vD(){return vD=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new gx),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=ty(d,`Initialization of query '${ov(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&ID(t)}),vD.apply(this,arguments)}function wD(n,e){return ED.apply(this,arguments)}function ED(){return ED=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),ED.apply(this,arguments)}function yx(n,e){const t=ze(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&ID(t)}function _x(n,e,t){const r=ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function ID(n){n.bu.forEach(e=>{e.next()})}class bD{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new ry(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=ry.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class vx{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class VA{constructor(e){this.M=e}wi(e){return ra(this.M,e)}mi(e){return e.metadata.exists?NE(this.M,e.document,!1):dn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return kr(e)}}class wx{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new VA(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Xt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function $m(n,e,t,r){return $v.apply(this,arguments)}(e.localStore,new VA(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield cD(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function UA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class BA{constructor(e){this.key=e}}class jA{constructor(e){this.key=e}}class $A{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Xt(),this.mutatedKeys=Xt(),this.Gu=tc(e),this.Qu=new ny(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new LA,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,k)=>{const V=o.get(A),Z=sh(this.query,k)?k:null,ae=!!V&&this.mutatedKeys.has(V.key),Ne=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Le=!1;V&&Z?V.data.isEqual(Z.data)?ae!==Ne&&(r.track({type:3,doc:Z}),Le=!0):this.Hu(V,Z)||(r.track({type:2,doc:Z}),Le=!0,(E&&this.Gu(Z,E)>0||C&&this.Gu(Z,C)<0)&&(m=!0)):!V&&Z?(r.track({type:0,doc:Z}),Le=!0):V&&!Z&&(r.track({type:1,doc:V}),Le=!0,(E||C)&&(m=!0)),Le&&(Z?(d=d.add(Z),u=Ne?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,A)=>function(k,V){const Z=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return Z(k)-Z(V)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,E=m!==this.qu;return this.qu=m,0!==u.length||E?{snapshot:new ry(this.query,e.Qu,o,u,e.mutatedKeys,0===m,E,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new LA,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Xt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new jA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new BA(r))}),t}ta(e){this.Uu=e._i,this.Ku=Xt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return ry.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Ex{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ix{constructor(e){this.key=e,this.na=!1}}class bx{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new qu(m=>CC(m),ih),this.ra=new Map,this.oa=new Set,this.ua=new Wn($e.comparator),this.aa=new Map,this.ca=new dp,this.ha={},this.la=new Map,this.fa=hc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Cx(n,e){return CD.apply(this,arguments)}function CD(){return CD=(0,ve.Z)(function*(n,e){const t=WD(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield wh(t.localStore,hs(e));t.isPrimaryClient&&Kv(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield DD(t,e,r,"current"===m)}return o}),CD.apply(this,arguments)}function DD(n,e,t,r){return TD.apply(this,arguments)}function TD(){return TD=(0,ve.Z)(function*(n,e,t,r){n._a=(A,k,V)=>{return(Z=(0,ve.Z)(function*(ae,Ne,Le,At){let Rt=Ne.view.Wu(Le);Rt.ii&&(Rt=yield jv(ae.localStore,Ne.query,!1).then(({documents:Nt})=>Ne.view.Wu(Nt,Rt)));const Ot=At&&At.targetChanges.get(Ne.targetId),Dt=Ne.view.applyChanges(Rt,ae.isPrimaryClient,Ot);return FD(ae,Ne.targetId,Dt.Xu),Dt.snapshot}),function(ae,Ne,Le,At){return Z.apply(this,arguments)})(n,A,k,V);var Z};const o=yield jv(n.localStore,e,!0),u=new $A(e,o._i),d=u.Wu(o.documents),m=Jf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,m);FD(n,t,E.Xu);const C=new Ex(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),E.snapshot}),TD.apply(this,arguments)}function Dx(n,e){return AD.apply(this,arguments)}function AD(){return AD=(0,ve.Z)(function*(n,e){const t=ze(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!ih(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Xm(t.remoteStore,r.targetId),iy(t,r.targetId)}).catch(tl))):(iy(t,r.targetId),yield cp(t.localStore,r.targetId,!0))}),AD.apply(this,arguments)}function SD(){return SD=(0,ve.Z)(function*(n,e,t){const r=ZD(n);try{const o=yield function(u,d){const m=ze(u),E=kt.now(),C=d.reduce((k,V)=>k.add(V.key),Xt());let A;return m.persistence.runTransaction("Locally write mutations","readwrite",k=>m.fi.Ks(k,C).next(V=>{A=V;const Z=[];for(const ae of d){const Ne=bE(ae,A.get(ae.key));null!=Ne&&Z.push(new ic(ae.key,Ne,dE(Ne.value.mapValue),sr.exists(!0)))}return m.Bs.addMutationBatch(k,E,Z,d)})).then(k=>(k.applyToLocalDocumentSet(A),{batchId:k.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let E=u.ha[u.currentUser.toKey()];E||(E=new Wn(xt)),E=E.insert(d,m),u.ha[u.currentUser.toKey()]=E}(r,o.batchId,t),yield yc(r,o.changes),yield ye(r.remoteStore)}catch(o){const u=ty(o,"Failed to persist write");t.reject(u)}}),SD.apply(this,arguments)}function HA(n,e){return MD.apply(this,arguments)}function MD(){return MD=(0,ve.Z)(function*(n,e){const t=ze(n);try{const r=yield fI(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?bt(d.na):o.removedDocuments.size>0&&(bt(d.na),d.na=!1))}),yield yc(t,r,e)}catch(r){yield tl(r)}}),MD.apply(this,arguments)}function GA(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=ze(u);m.onlineState=d;let E=!1;m.queries.forEach((C,A)=>{for(const k of A.listeners)k.Pu(d)&&(E=!0)}),E&&ID(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ax(n,e,t){return xD.apply(this,arguments)}function xD(){return xD=(0,ve.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new Wn($e.comparator);d=d.insert(u,dn.newNoDocument(u,It.min()));const m=Xt().add(u),E=new ch(It.min(),new Map,new ln(xt),d,m);yield HA(r,E),r.ua=r.ua.remove(u),r.aa.delete(e),LD(r)}else yield cp(r.localStore,e,!1).then(()=>iy(r,e,t)).catch(tl)}),xD.apply(this,arguments)}function Sx(n,e){return kD.apply(this,arguments)}function kD(){return kD=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const o=yield xA(t.localStore,e);PD(t,r,null),OD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yc(t,o)}catch(o){yield tl(o)}}),kD.apply(this,arguments)}function Mx(n,e,t){return RD.apply(this,arguments)}function RD(){return RD=(0,ve.Z)(function*(n,e,t){const r=ze(n);try{const o=yield function(u,d){const m=ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.Bs.lookupMutationBatch(E,d).next(A=>(bt(null!==A),C=A.keys(),m.Bs.removeMutationBatch(E,A))).next(()=>m.Bs.performConsistencyCheck(E)).next(()=>m.fi.Ks(E,C))})}(r.localStore,e);PD(r,e,t),OD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yc(r,o)}catch(o){yield tl(o)}}),RD.apply(this,arguments)}function ND(){return ND=(0,ve.Z)(function*(n,e){const t=ze(n);l(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=ty(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),ND.apply(this,arguments)}function OD(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function PD(n,e,t){const r=ze(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function iy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||qA(n,r)})}function qA(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Xm(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),LD(n))}function FD(n,e,t){for(const r of t)r instanceof BA?(n.ca.addReference(r.key,e),kx(n,r)):r instanceof jA?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||qA(n,r.key)):nt()}function kx(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oa.add(r),LD(n))}function LD(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(qt.fromString(e)),r=n.fa.next();n.aa.set(r,new Ix(t)),n.ua=n.ua.insert(t,r),Kv(n.remoteStore,new ja(hs(nh(t.path)),r,2,ds.A))}}function yc(n,e,t){return VD.apply(this,arguments)}function VD(){return VD=(0,ve.Z)(function*(n,e,t){const r=ze(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,E)=>{d.push(r._a(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const A=jm.Ys(E.targetId,C);u.push(A)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,ve.Z)(function*(E,C){const A=ze(E);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>he.forEach(C,V=>he.forEach(V.Hs,Z=>A.persistence.referenceDelegate.addReference(k,V.targetId,Z)).next(()=>he.forEach(V.Js,Z=>A.persistence.referenceDelegate.removeReference(k,V.targetId,Z)))))}catch(k){if(!uc(k))throw k;Oe("LocalStore","Failed to update sequence numbers: "+k)}for(const k of C){const V=k.targetId;if(!k.fromCache){const Z=A.ui.get(V),Ne=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);A.ui=A.ui.insert(V,Ne)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),VD.apply(this,arguments)}function Rx(n,e){return UD.apply(this,arguments)}function UD(){return UD=(0,ve.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield hI(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new xe(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yc(t,r.di)}var o}),UD.apply(this,arguments)}function Nx(n,e){const t=ze(n),r=t.aa.get(e);if(r&&r.na)return Xt().add(r.key);{let o=Xt();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function Ox(n,e){return BD.apply(this,arguments)}function BD(){return BD=(0,ve.Z)(function*(n,e){const t=ze(n),r=yield jv(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&FD(t,e.targetId,o.Xu),o}),BD.apply(this,arguments)}function Px(n,e){return jD.apply(this,arguments)}function jD(){return jD=(0,ve.Z)(function*(n,e){const t=ze(n);return lD(t.localStore,e).then(r=>yc(t,r))}),jD.apply(this,arguments)}function Fx(n,e,t,r){return $D.apply(this,arguments)}function $D(){return $D=(0,ve.Z)(function*(n,e,t,r){const o=ze(n),u=yield function(d,m){const E=ze(d),C=ze(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.fn(A,m).next(k=>k?E.fi.Ks(A,k):he.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield ye(o.remoteStore):"acknowledged"===t||"rejected"===t?(PD(o,e,r||null),OD(o,e),m=e,ze(ze(o.localStore).Bs)._n(m)):nt(),yield yc(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),$D.apply(this,arguments)}function HD(){return HD=(0,ve.Z)(function*(n,e){const t=ze(n);if(WD(t),ZD(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield zA(t,r.toArray());t.da=!0,yield yp(t.remoteStore,!0);for(const u of o)Kv(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(iy(t,d),cp(t.localStore,d,!0))),Xm(t.remoteStore,d)}),yield o,yield zA(t,r),function(u){const d=ze(u);d.aa.forEach((m,E)=>{Xm(d.remoteStore,E)}),d.ca.Si(),d.aa=new Map,d.ua=new Wn($e.comparator)}(t),t.da=!1,yield yp(t.remoteStore,!1)}}),HD.apply(this,arguments)}function zA(n,e,t){return GD.apply(this,arguments)}function GD(){return GD=(0,ve.Z)(function*(n,e,t){const r=ze(n),o=[],u=[];for(const d of e){let m;const E=r.ra.get(d);if(E&&0!==E.length){m=yield wh(r.localStore,hs(E[0]));for(const C of E){const A=r.ia.get(C),k=yield Ox(r,A);k.snapshot&&u.push(k.snapshot)}}else{const C=yield uD(r.localStore,d);m=yield wh(r.localStore,C),yield DD(r,WA(C),d,!1)}o.push(m)}return r.sa.zo(u),o}),GD.apply(this,arguments)}function WA(n){return Em(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Vx(n){const e=ze(n);return ze(ze(e.localStore).persistence).Fs()}function Ux(n,e,t,r){return qD.apply(this,arguments)}function qD(){return qD=(0,ve.Z)(function*(n,e,t,r){const o=ze(n);if(o.da)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield lD(o.localStore,wE(u[0])),m=ch.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield yc(o,d,m);break}case"rejected":yield cp(o.localStore,e,!0),iy(o,e,r);break;default:nt()}}),qD.apply(this,arguments)}function Bx(n,e,t){return zD.apply(this,arguments)}function zD(){return zD=(0,ve.Z)(function*(n,e,t){const r=WD(n);if(r.da){for(const o of e){if(r.ra.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield uD(r.localStore,o),d=yield wh(r.localStore,u);yield DD(r,WA(u),d.targetId,!1),Kv(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield cp(r.localStore,o,!1).then(()=>{Xm(r.remoteStore,o),iy(r,o)}).catch(tl))}}),zD.apply(this,arguments)}function WD(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ax.bind(null,e),e.sa.zo=yx.bind(null,e.eventManager),e.sa.wa=_x.bind(null,e.eventManager),e}function ZD(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mx.bind(null,e),e}class ZA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=fp(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Uv(this.persistence,new cI,e.initialUser,this.M)}ya(e){return new kA(_I.Yi,this.M)}ga(e){return new vI}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KA extends ZA{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield ZD(r.Ta.syncEngine),yield ye(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Uv(this.persistence,new cI,e.initialUser,this.M)}pa(e){return new Fv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=lp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new Lv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ym(),Qm(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new vI}}class $x extends KA{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof Km&&(r.sharedClientState.syncEngine={$r:Fx.bind(null,o),Br:Ux.bind(null,o),Lr:Bx.bind(null,o),Fs:Vx.bind(null,o),Fr:Px.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ve.Z)(function*(d){yield function Lx(n,e){return HD.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=Ym();if(!Km.vt(t))throw new xe(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Km(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class KD{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>GA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=Rx.bind(null,r.syncEngine),yield yp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mx}createDatastore(e){const t=fp(e.databaseInfo.databaseId),r=new wI(e.databaseInfo);return new OA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>GA(this.syncEngine,m,0),d=Wv.vt()?new Wv:new fD,new FA(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,E,C){const A=new bx(r,o,u,d,m,E);return C&&(A.da=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=ze(t);Oe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Eh(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YA(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class DI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Hx{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new xr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new vx(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ve.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Gx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,d){const m=ze(u),E=fh(m.M)+"/documents",C={documents:d.map(Z=>Wu(m.M,Z))},A=yield m._o("BatchGetDocuments",E,C),k=new Map;A.forEach(Z=>{const ae=function UC(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=ra(t,r.found.name),u=kr(r.found.updateTime),d=new li({mapValue:{fields:r.found.fields}});return dn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=ra(t,r.missing),u=kr(r.readTime);return dn.newNoDocument(o,u)}(n,e):nt()}(m.M,Z);k.set(ae.key.toString(),ae)});const V=[];return d.forEach(Z=>{const ae=k.get(Z.toString());bt(!!ae),V.push(ae)}),V}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new lh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new Yf(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const d=ze(o),m=fh(d.M)+"/documents",E={writes:u.map(C=>sc(d.M,C))};yield d.co("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new xe(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qx{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new EI(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ve.Z)(function*(){const t=new Gx(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Fa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!CE(t)}return!1}}class zx{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=qr.UNAUTHENTICATED,this.clientId=Uf.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=ty(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function QA(n,e){return YD.apply(this,arguments)}function YD(){return YD=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield hI(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),YD.apply(this,arguments)}function JA(n,e){return QD.apply(this,arguments)}function QD(){return QD=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JD(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>ey(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>ey(e.remoteStore,u)),n.onlineComponents=e}),QD.apply(this,arguments)}function JD(n){return XD.apply(this,arguments)}function XD(){return XD=(0,ve.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield QA(n,new ZA)),n.offlineComponents}),XD.apply(this,arguments)}function TI(n){return eT.apply(this,arguments)}function eT(){return eT=(0,ve.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield JA(n,new KD)),n.onlineComponents}),eT.apply(this,arguments)}function XA(n){return JD(n).then(e=>e.persistence)}function tT(n){return JD(n).then(e=>e.localStore)}function eS(n){return TI(n).then(e=>e.remoteStore)}function nT(n){return TI(n).then(e=>e.syncEngine)}function sy(n){return rT.apply(this,arguments)}function rT(){return rT=(0,ve.Z)(function*(n){const e=yield TI(n),t=e.eventManager;return t.onListen=Cx.bind(null,e.syncEngine),t.onUnlisten=Dx.bind(null,e.syncEngine),t}),rT.apply(this,arguments)}function tS(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,d,m,E){const C=new DI({next:k=>{u.enqueueAndForget(()=>wD(o,A));const V=k.docs.has(d);!V&&k.fromCache?E.reject(new xe(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&k.fromCache&&m&&"server"===m.source?E.reject(new xe(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(k)},error:k=>E.reject(k)}),A=new bD(nh(d.path),C,{includeMetadataChanges:!0,ku:!0});return _D(o,A)}(yield sy(n),n.asyncQueue,e,t,r)})),r.promise}function nS(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,d,m,E){const C=new DI({next:k=>{u.enqueueAndForget(()=>wD(o,A)),k.fromCache&&"server"===m.source?E.reject(new xe(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(k)},error:k=>E.reject(k)}),A=new bD(d,C,{includeMetadataChanges:!0,ku:!0});return _D(o,A)}(yield sy(n),n.asyncQueue,e,t,r)})),r.promise}const rS=new Map;function iT(n,e,t){if(!t)throw new xe(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iS(n,e,t,r){if(!0===e&&!0===r)throw new xe(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function sS(n){if(!$e.isDocumentKey(n))throw new xe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oS(n){if($e.isDocumentKey(n))throw new xe(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=AI(n);throw new xe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function aS(n,e){if(e<=0)throw new xe(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class uS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,iS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uS({}),this._settingsFrozen=!1,e instanceof Pa?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vA;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new tE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rS.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),rS.delete(e),t.terminate())}(this),Promise.resolve()}}class Mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class rl extends zi{constructor(e,t,r){super(e,t,nh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new $e(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function lS(n,e,...t){if(n=(0,Lt.m9)(n),iT("collection","path",e),n instanceof Jv){const r=qt.fromString(e,...t);return oS(r),new rl(n,null,r)}{if(!(n instanceof Mn||n instanceof rl))throw new xe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return oS(r),new rl(n.firestore,null,r)}}function SI(n,e,...t){if(n=(0,Lt.m9)(n),1===arguments.length&&(e=Uf.R()),iT("doc","path",e),n instanceof Jv){const r=qt.fromString(e,...t);return sS(r),new Mn(n,null,new $e(r))}{if(!(n instanceof Mn||n instanceof rl))throw new xe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return sS(r),new Mn(n.firestore,n instanceof rl?n.converter:null,new $e(r))}}function cS(n,e){return n=(0,Lt.m9)(n),e=(0,Lt.m9)(e),(n instanceof Mn||n instanceof rl)&&(e instanceof Mn||e instanceof rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dS(n,e){return n=(0,Lt.m9)(n),e=(0,Lt.m9)(e),n instanceof zi&&e instanceof zi&&n.firestore===e.firestore&&ih(n._query,e._query)&&n.converter===e.converter}class r1{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new EI(this,"async_queue_retry"),this.Qa=()=>{const t=Qm();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Qm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Qm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new xr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ve.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!uc(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,zn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=yD.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&nt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function sT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class i1{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Un extends Jv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new r1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||hS(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||hS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function hS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new iE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new zx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function fS(n,e,t){const r=new xr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield QA(n,t),yield JA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===oe.FAILED_PRECONDITION||u.code===oe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function pS(n){if(n._initialized||n._terminated)throw new xe(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _c{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(_r.fromBase64String(e))}catch(t){throw new xe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vp{constructor(e){this._methodName=e}}class MI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const p1=/^__.*__$/;class g1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ic(e,this.data,this.fieldMask,t,this.fieldTransforms):new uh(e,this.data,t,this.fieldTransforms)}}class gS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ic(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class xI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new xI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return NI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(mS(this.ec)&&p1.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class m1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||fp(e)}lc(e,t,r,o=!1){return new xI({ec:e,methodName:t,hc:r,path:ir.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function wp(n){const e=n._freezeSettings(),t=fp(n._databaseId);return new m1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kI(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);lT("Data must be an object, but it was:",d,r);const m=vS(r,d);let E,C;if(u.merge)E=new zd(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const k of u.mergeFields){const V=cT(e,k,t);if(!d.contains(V))throw new xe(oe.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);ES(A,V)||A.push(V)}E=new zd(A),C=d.fieldTransforms.filter(k=>E.covers(k.field))}else E=null,C=d.fieldTransforms;return new g1(new li(m),E,C)}class Xv extends vp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xv}}function yS(n,e,t){return new xI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class oT extends vp{_toFieldTransform(e){return new Kf(e.path,new nc)}isEqual(e){return e instanceof oT}}class y1 extends vp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=yS(this,e,!0),r=this.fc.map(u=>Ep(u,t)),o=new Hu(r);return new Kf(e.path,o)}isEqual(e){return this===e}}class _1 extends vp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=yS(this,e,!0),r=this.fc.map(u=>Ep(u,t)),o=new ta(r);return new Kf(e.path,o)}isEqual(e){return this===e}}class v1 extends vp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new ah(e.M,av(e.M,this.dc));return new Kf(e.path,t)}isEqual(e){return this===e}}function aT(n,e,t,r){const o=n.lc(1,e,t);lT("Data must be an object, but it was:",o,r);const u=[],d=li.empty();Xl(r,(E,C)=>{const A=RI(e,E,t);C=(0,Lt.m9)(C);const k=o.oc(A);if(C instanceof Xv)u.push(A);else{const V=Ep(C,k);null!=V&&(u.push(A),d.set(A,V))}});const m=new zd(u);return new gS(d,m,o.fieldTransforms)}function uT(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[cT(e,r,t)],E=[o];if(u.length%2!=0)throw new xe(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(cT(e,u[V])),E.push(u[V+1]);const C=[],A=li.empty();for(let V=m.length-1;V>=0;--V)if(!ES(C,m[V])){const Z=m[V];let ae=E[V];ae=(0,Lt.m9)(ae);const Ne=d.oc(Z);if(ae instanceof Xv)C.push(Z);else{const Le=Ep(ae,Ne);null!=Le&&(C.push(Z),A.set(Z,Le))}}const k=new zd(C);return new gS(A,k,d.fieldTransforms)}function _S(n,e,t,r=!1){return Ep(t,n.lc(r?4:3,e))}function Ep(n,e){if(wS(n=(0,Lt.m9)(n)))return lT("Unsupported field value:",e,n),vS(n,e);if(n instanceof vp)return function(t,r){if(!mS(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Ep(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Lt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return av(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=kt.fromDate(t);return{timestampValue:zu(r.M,o)}}if(t instanceof kt){const o=new kt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zu(r.M,o)}}if(t instanceof MI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof il)return{bytesValue:hh(r.M,t._byteString)};if(t instanceof Mn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${AI(t)}`)}(n,e)}function vS(n,e){const t={};return nE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xl(n,(r,o)=>{const u=Ep(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function wS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof kt||n instanceof MI||n instanceof il||n instanceof Mn||n instanceof vp)}function lT(n,e,t){if(!wS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=AI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function cT(n,e,t){if((e=(0,Lt.m9)(e))instanceof _c)return e._internalPath;if("string"==typeof e)return RI(n,e);throw NI("Field path arguments must be of type string or ",n,!1,void 0,t)}const w1=new RegExp("[~\\*/\\[\\]]");function RI(n,e,t){if(e.search(w1)>=0)throw NI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _c(...e.split("."))._internalPath}catch(r){throw NI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function NI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new xe(oe.INVALID_ARGUMENT,m+n+E)}function ES(n,e){return n.some(t=>t.isEqual(e))}class e0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new E1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class E1 extends e0{data(){return super.data()}}function OI(n,e){return"string"==typeof e?RI(n,e):e instanceof _c?e._internalPath:e._delegate._internalPath}class Ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vc extends e0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new t0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(OI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class t0 extends vc{data(e={}){return super.data(e)}}class bh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ip(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new t0(this._firestore,this._userDataWriter,r.key,r,new Ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new t0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ip(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new t0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ip(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:I1(d.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function I1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function IS(n,e){return n instanceof vc&&e instanceof vc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bh&&e instanceof bh&&n._firestore===e._firestore&&dS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function bS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}function Ch(n,...e){for(const t of e)n=t._apply(n);return n}class b1 extends n0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=wp(e.firestore),r=function(o,u,d,m,E,C,A){let k;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){MS(A,C);const Z=[];for(const ae of A)Z.push(SS(m,o,ae));k={arrayValue:{values:Z}}}else k=SS(m,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||MS(A,C),k=_S(d,"where",A,"in"===C||"not-in"===C);const V=Wr.create(E,C,k);return function(Z,ae){if(ae.S()){const Le=sv(Z);if(null!==Le&&!Le.isEqual(ae.field))throw new xe(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${ae.field.toString()}'`);const At=Wf(Z);null!==At&&xS(0,ae.field,At)}const Ne=function(Le,At){for(const Rt of Le.filters)if(At.indexOf(Rt.op)>=0)return Rt.op;return null}(Z,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ae.op));if(null!==Ne)throw new xe(oe.INVALID_ARGUMENT,Ne===ae.op?`Invalid query. You cannot use more than one '${ae.op.toString()}' filter.`:`Invalid query. You cannot use '${ae.op.toString()}' filters with '${Ne.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new zi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new ea(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class D1 extends n0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new th(o,u);return function(m,E){if(null===Wf(m)){const C=sv(m);null!==C&&xS(0,C,E.field)}}(r,d),d}(e._query,this._c,this.gc);return new zi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ea(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class CS extends n0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new zi(e.firestore,e.converter,vE(e._query,this.yc,this.Ic))}}class DS extends n0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=AS(e,this.type,this.Tc,this.Ec);return new zi(e.firestore,e.converter,(o=t,new ea((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class TS extends n0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=AS(e,this.type,this.Tc,this.Ec);return new zi(e.firestore,e.converter,(o=t,new ea((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function AS(n,e,t,r){if(t[0]=(0,Lt.m9)(t[0]),t[0]instanceof e0)return function(o,u,d,m,E){if(!m)throw new xe(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const A of rh(o))if(A.field.isKeyField())C.push(Yd(u,m.key));else{const k=m.data.field(A.field);if(Wd(k))throw new xe(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const V=A.field.canonicalString();throw new xe(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(k)}return new $u(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=wp(n.firestore);return function(u,d,m,E,C,A){const k=u.explicitOrderBy;if(C.length>k.length)throw new xe(oe.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let Z=0;Z<C.length;Z++){const ae=C[Z];if(k[Z].field.isKeyField()){if("string"!=typeof ae)throw new xe(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ae}`);if(!Im(u)&&-1!==ae.indexOf("/"))throw new xe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ae}' contains a slash.`);const Ne=u.path.child(qt.fromString(ae));if(!$e.isDocumentKey(Ne))throw new xe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Le=new $e(Ne);V.push(Yd(d,Le))}else{const Ne=_S(m,E,ae);V.push(Ne)}}return new $u(V,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function SS(n,e,t){if("string"==typeof(t=(0,Lt.m9)(t))){if(""===t)throw new xe(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Im(e)&&-1!==t.indexOf("/"))throw new xe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!$e.isDocumentKey(r))throw new xe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yd(n,new $e(r))}if(t instanceof Mn)return Yd(n,t._key);throw new xe(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AI(t)}.`)}function MS(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(oe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xS(n,e,t){if(!t.isEqual(e))throw new xe(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const N1={maxAttempts:5};class dT{convertValue(e,t="none"){switch(ju(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Xl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new MI(Vn(e.latitude),Vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=J_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zd(e));default:return null}}convertTimestamp(e){const t=Uu(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);bt(BE(r));const o=new Pa(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||zn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function PI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class O1 extends dT{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}class kS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wp(e)}set(e,t,r){this._verifyNotCommitted();const o=Dh(e,this._firestore),u=PI(o.converter,t,r),d=kI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,sr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Dh(e,this._firestore);let d;return d="string"==typeof(t=(0,Lt.m9)(t))||t instanceof _c?uT(this._dataReader,"WriteBatch.update",u._key,t,r,o):aT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dh(e,this._firestore);return this._mutations=this._mutations.concat(new lh(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dh(n,e){if((n=(0,Lt.m9)(n)).firestore!==e)throw new xe(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bp extends dT{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}function RS(n,e,t){n=Kt(n,Mn);const r=Kt(n.firestore,Un),o=PI(n.converter,e,t);return oy(r,[kI(wp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,sr.none())])}function NS(n,e,t,...r){n=Kt(n,Mn);const o=Kt(n.firestore,Un),u=wp(o);let d;return d="string"==typeof(e=(0,Lt.m9)(e))||e instanceof _c?uT(u,"updateDoc",n._key,e,t,r):aT(u,"updateDoc",n._key,e),oy(o,[d.toMutation(n._key,sr.exists(!0))])}function OS(n,...e){var t,r,o;n=(0,Lt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||sT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(sT(e[d])){const k=e[d];e[d]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[d+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[d+2]=null===(o=k.complete)||void 0===o?void 0:o.bind(k)}let E,C,A;if(n instanceof Mn)C=Kt(n.firestore,Un),A=nh(n._key.path),E={next:k=>{e[d]&&e[d](hT(C,n,k))},error:e[d+1],complete:e[d+2]};else{const k=Kt(n,zi);C=Kt(k.firestore,Un),A=k._query;const V=new bp(C);E={next:Z=>{e[d]&&e[d](new bh(C,V,k,Z))},error:e[d+1],complete:e[d+2]},bS(n._query)}return function(k,V,Z,ae){const Ne=new DI(ae),Le=new bD(V,Ne,Z);return k.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return _D(yield sy(k),Le)})),()=>{Ne.Aa(),k.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return wD(yield sy(k),Le)}))}}(Or(C),A,m,E)}function oy(n,e){return function(t,r){const o=new xr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Tx(n,e,t){return SD.apply(this,arguments)}(yield nT(t),r,o)})),o.promise}(Or(n),e)}function hT(n,e,t){const r=t.docs.get(e._key),o=new bp(n);return new vc(n,o,e._key,r,new Ip(t.hasPendingWrites,t.fromCache),e.converter)}class G1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wp(e)}get(e){const t=Dh(e,this._firestore),r=new O1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new e0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new e0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=Dh(e,this._firestore),u=PI(o.converter,t,r),d=kI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Dh(e,this._firestore);let d;return d="string"==typeof(t=(0,Lt.m9)(t))||t instanceof _c?uT(this._dataReader,"Transaction.update",u._key,t,r,o):aT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Dh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dh(e,this._firestore),r=new bp(this._firestore);return super.get(e).then(o=>new vc(this._firestore,r,t._key,o._document,new Ip(!1,!1),t.converter))}}function fT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function FS(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function LS(){if(!function fC(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hd=Au.SDK_VERSION,(0,Au._registerComponent)(new mg.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Un(o,new wA(t.getProvider("auth-internal")),new mt(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Au.registerVersion)(Qw,"3.4.9",n),(0,Au.registerVersion)(Qw,"3.4.9","esm2017")}();class r0{constructor(e){this._delegate=e}static fromBase64String(e){return LS(),new r0(il.fromBase64String(e))}static fromUint8Array(e){return FS(),new r0(il.fromUint8Array(e))}toBase64(){return LS(),this._delegate.toBase64()}toUint8Array(){return FS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pT(n){return function X1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ek{enableIndexedDbPersistence(e,t){return function o1(n,e){pS(n=Kt(n,Un));const t=Or(n),r=n._freezeSettings(),o=new KD;return fS(t,o,new KA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function a1(n){pS(n=Kt(n,Un));const e=Or(n),t=n._freezeSettings(),r=new KD;return fS(e,r,new $x(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function u1(n){if(n._initialized&&!n._terminated)throw new xe(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!fs.vt())return Promise.resolve();const o=r+"main";yield fs.delete(o)}),function(r){return t.apply(this,arguments)})(lp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class VS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Gd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function t1(n,e,t,r={}){var o;const u=(n=Kt(n,Jv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Gd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=qr.MOCK_USER;else{d=(0,Lt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new xe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new qr(E)}n._authCredentials=new Y_(new Jl(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function c1(n){return function Wx(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield XA(n),t=yield eS(n);return e.setNetworkEnabled(!0),function(r){const o=ze(r);return o.wu.delete(0),Jm(o)}(t)}))}(Or(n=Kt(n,Un)))}(this._delegate)}disableNetwork(){return function d1(n){return function Zx(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield XA(n),t=yield eS(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=ze(o);u.wu.add(0),yield Eh(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Or(n=Kt(n,Un)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function l1(n){return function(e){const t=new xr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function xx(n,e){return ND.apply(this,arguments)}(yield nT(e),t)})),t.promise}(Or(n=Kt(n,Un)))}(this._delegate)}onSnapshotsInSync(e){return function H1(n,e){return function Qx(n,e){const t=new DI(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield sy(n),o=t,ze(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield sy(n),o=t,void ze(r).bu.delete(o);var r,o}))}}(Or(n=Kt(n,Un)),sT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ay(this,lS(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new ia(this,SI(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function n1(n,e){if(n=Kt(n,Jv),iT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(n,null,(t=e,new ea(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function q1(n,e,t){n=Kt(n,Un);const r=Object.assign(Object.assign({},N1),t);return function(o){if(o.maxAttempts<1)throw new xe(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function Jx(n,e,t){const r=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const o=yield(u=n,TI(u).then(d=>d.datastore));var u;new qx(n.asyncQueue,o,t,e,r).run()})),r.promise}(Or(n),o=>e(new G1(n,o)),r)}(this._delegate,t=>e(new US(this,t)))}batch(){return Or(this._delegate),new BS(new kS(this._delegate,e=>oy(this._delegate,e)))}loadBundle(e){return function h1(n,e){const t=Or(n=Kt(n,Un)),r=new i1;return function Xx(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return YA(E,C);if(E instanceof ArrayBuffer)return YA(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Hx(E,d);var E}(t,fp(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function jx(n,e,t){const r=ze(n);var o;(o=(0,ve.Z)(function*(u,d,m){try{const E=yield d.getMetadata();if(yield function(V,Z){const ae=ze(V),Ne=kr(Z.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Le=>ae._s.getBundleMetadata(Le,Z.id)).then(Le=>!!Le&&Le.createTime.compareTo(Ne)>=0)}(u.localStore,E))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=E).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(UA(E));const C=new wx(E,u.localStore,d.M);let A=yield d.ma();for(;A;){const V=yield C.Fu(A);V&&m._updateProgress(V),A=yield d.ma()}const k=yield C.complete();return yield yc(u,k.Lu,void 0),yield function(V,Z){const ae=ze(V);return ae.persistence.runTransaction("Save bundle","readwrite",Ne=>ae._s.saveBundleMetadata(Ne,Z))}(u.localStore,E),m._completeWith(k.progress),Promise.resolve(k.Bu)}catch(E){return Gd("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var V}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield nT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function f1(n,e){return function e1(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield tT(n),e)}))}(Or(n=Kt(n,Un)),e).then(t=>t?new zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class FI extends dT{constructor(e){super(),this.firestore=e}convertBytes(e){return new r0(new il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ia.forKey(t,this.firestore,null)}}class US{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}get(e){const t=Dp(e);return this._delegate.get(t).then(r=>new s0(this._firestore,new vc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Dp(e);return r?(fT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Dp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Dp(e);return this._delegate.delete(t),this}}class BS{constructor(e){this._delegate=e}set(e,t,r){const o=Dp(e);return r?(fT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Dp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Dp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new t0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new o0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Cp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Cp(e,new FI(e),t),o.set(t,u)),u}}Cp.INSTANCES=new WeakMap;class ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ia(t,new Mn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new ia(t,new Mn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ay(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ay(this.firestore,lS(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Lt.m9)(e))instanceof Mn&&cS(this._delegate,e)}set(e,t){t=fT("DocumentReference.set",t);try{return t?RS(this._delegate,e,t):RS(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?NS(this._delegate,e):NS(this._delegate,e,t,...r)}catch(o){throw ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function j1(n){return oy(Kt(n.firestore,Un),[new lh(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=jS(e),r=$S(e,o=>new s0(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return OS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function F1(n){n=Kt(n,Mn);const e=Kt(n.firestore,Un),t=Or(e),r=new bp(e);return function Kx(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,d){try{const m=yield function(E,C){const A=ze(E);return A.persistence.runTransaction("read document","readonly",k=>A.fi.Ls(k,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=ty(m,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield tT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new vc(e,r,n._key,o,new Ip(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function L1(n){n=Kt(n,Mn);const e=Kt(n.firestore,Un);return tS(Or(e),n._key,{source:"server"}).then(t=>hT(e,n,t))}(this._delegate):function P1(n){n=Kt(n,Mn);const e=Kt(n.firestore,Un);return tS(Or(e),n._key).then(t=>hT(e,n,t))}(this._delegate),t.then(r=>new s0(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ia(this.firestore,this._delegate.withConverter(e?Cp.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function jS(n){for(const e of n)if("object"==typeof e&&!pT(e))return e;return{}}function $S(n,e){var t,r;let o;return o=pT(n[0])?n[0]:pT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class s0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IS(this._delegate,e._delegate)}}class o0 extends s0{data(e){const t=this._delegate.data(e);return function Xw(n,e){n||nt()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}where(e,t,r){try{return new ys(this.firestore,Ch(this._delegate,function C1(n,e,t){const r=e,o=OI("where",n);return new b1(o,r,t)}(e,t,r)))}catch(o){throw ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,Ch(this._delegate,function T1(n,e="asc"){const t=e,r=OI("orderBy",n);return new D1(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,Ch(this._delegate,function A1(n){return aS("limit",n),new CS("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,Ch(this._delegate,function S1(n){return aS("limitToLast",n),new CS("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,Ch(this._delegate,function M1(...n){return new DS("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,Ch(this._delegate,function x1(...n){return new DS("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,Ch(this._delegate,function k1(...n){return new TS("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,Ch(this._delegate,function R1(...n){return new TS("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return dS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function U1(n){n=Kt(n,zi);const e=Kt(n.firestore,Un),t=Or(e),r=new bp(e);return function Yx(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,d){try{const m=yield jv(o,u,!0),E=new $A(u,m._i),C=E.Wu(m.documents),A=E.applyChanges(C,!1);d.resolve(A.snapshot)}catch(m){const E=ty(m,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield tT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new bh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function B1(n){n=Kt(n,zi);const e=Kt(n.firestore,Un),t=Or(e),r=new bp(e);return nS(t,n._query,{source:"server"}).then(o=>new bh(e,r,n,o))}(this._delegate):function V1(n){n=Kt(n,zi);const e=Kt(n.firestore,Un),t=Or(e),r=new bp(e);return bS(n._query),nS(t,n._query).then(o=>new bh(e,r,n,o))}(this._delegate),t.then(r=>new gT(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=jS(e),r=$S(e,o=>new gT(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return OS(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?Cp.getInstance(this.firestore,e):null))}}class nk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new o0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new o0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new o0(this._firestore,r))})}isEqual(e){return IS(this._delegate,e._delegate)}}class ay extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ia(this.firestore,e):null}doc(e){try{return new ia(this.firestore,void 0===e?SI(this._delegate):SI(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function $1(n,e){const t=Kt(n.firestore,Un),r=SI(n),o=PI(n.converter,e);return oy(t,[kI(wp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ia(this.firestore,t))}isEqual(e){return cS(this._delegate,e._delegate)}withConverter(e){return new ay(this.firestore,this._delegate.withConverter(e?Cp.getInstance(this.firestore,e):null))}}function Dp(n){return Kt(n,Mn)}class mT{constructor(...e){this._delegate=new _c(...e)}static documentId(){return new mT(ir.keyField().canonicalString())}isEqual(e){return(e=(0,Lt.m9)(e))instanceof _c&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function W1(){return new oT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tp(e)}static delete(){const e=function z1(){return new Xv("deleteField")}();return e._methodName="FieldValue.delete",new Tp(e)}static arrayUnion(...e){const t=function Z1(...n){return new y1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tp(t)}static arrayRemove(...e){const t=function K1(...n){return new _1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tp(t)}static increment(e){const t=function Y1(n){return new v1("increment",n)}(e);return t._methodName="FieldValue.increment",new Tp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rk={Firestore:VS,GeoPoint:MI,Timestamp:kt,Blob:r0,Transaction:US,WriteBatch:BS,DocumentReference:ia,DocumentSnapshot:s0,Query:ys,QueryDocumentSnapshot:o0,QuerySnapshot:gT,CollectionReference:ay,FieldPath:mT,FieldValue:Tp,setLogLevel:function tk(n){!function Jw(n){Na.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function HS(n,e){return function ok(n,e=ka.z){return new On.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function yT(n,e){return HS(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function LI(n,e){return yT(n,e).pipe(lo(void 0),bd(),(0,wt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(A=>A.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function GS(n,e,t){return LI(n,t).pipe(Pi((r,o)=>function uk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _T(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _T(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _T(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Rb(n,e=Oi.y){return n=null!=n?n:Nb,(0,er.e)((t,r)=>{let o,u=!0;t.subscribe((0,Jn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,wt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function _T(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function qS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function sk(n){(function ik(n,e){n.INTERNAL.registerComponent(new mg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},rk)))})(n,(e,t)=>new VS(e,t,new ek)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(o_.Z);class zS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=LI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(lo(void 0),bd(),tr(([r,o])=>o.length>0||!r),(0,wt.U)(([r,o])=>o),yr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qS(e);return GS(this.query,t,this.afs.schedulers.outsideAngular).pipe(yr.iC)}valueChanges(e={}){return yT(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yr.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(yr.iC)}add(e){return this.ref.add(e)}doc(e){return new WS(this.ref.doc(e),this.afs)}}class WS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=YS(r,t);return new zS(o,u,this.afs)}snapshotChanges(){return function ak(n,e){return HS(n,e).pipe(lo(void 0),bd(),(0,wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(yr.iC)}}class ck{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?LI(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),tr(t=>t.length>0),yr.iC):LI(this.query,this.afs.schedulers.outsideAngular).pipe(yr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qS(e);return GS(this.query,t,this.afs.schedulers.outsideAngular).pipe(yr.iC)}valueChanges(e={}){return yT(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),yr.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(yr.iC)}}const ZS=new h.OlP("angularfire2.enableFirestorePersistence"),KS=new h.OlP("angularfire2.firestore.persistenceSettings"),dk=new h.OlP("angularfire2.firestore.settings"),hk=new h.OlP("angularfire2.firestore.use-emulator");function YS(n,e=(t=>t)){return{query:e(n),ref:n}}let QS=(()=>{class n{constructor(t,r,o,u,d,m,E,C,A,k,V,Z,ae,Ne,Le,At,Rt){this.schedulers=E;const Ot=(0,go.on)(t,m,r),Dt=A;k&&s_(Ot,m,V,ae,Ne,Le,Z,At),[this.firestore,this.persistenceEnabled$]=(0,go.cc)(`${Ot.name}.firestore`,"AngularFirestore",Ot.name,()=>{const Nt=m.runOutsideAngular(()=>Ot.firestore());if(u&&Nt.settings(u),Dt&&Nt.useEmulator(...Dt),o&&!Mo(d)){const st=()=>{try{return(0,rn.D)(Nt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(vt){return"undefined"!=typeof console&&console.warn(vt),it(!1)}};return[Nt,m.runOutsideAngular(st)]}return[Nt,it(!1)]},[u,Dt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=YS(o,r),m=this.schedulers.ngZone.run(()=>u);return new zS(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new ck(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new WS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(go.Dh),h.LFG(go.xv,8),h.LFG(ZS,8),h.LFG(dk,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(yr.HU),h.LFG(KS,8),h.LFG(hk,8),h.LFG(df,8),h.LFG(xb,8),h.LFG(Rg,8),h.LFG(kb,8),h.LFG(rw,8),h.LFG(r_,8),h.LFG(i_,8),h.LFG(lf,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fk=(()=>{class n{constructor(){cf.Z.registerVersion("angularfire",yr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ZS,useValue:!0},{provide:KS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[QS]}),n})(),VI=(()=>{class n{constructor(t,r){this.auth=t,this.db=r,this.userCollection=this.db.collection("users"),this.isAuthenticated$=t.user.pipe((0,wt.U)(o=>!!o))}createUser(t,r){return(0,rn.D)(this.auth.createUserWithEmailAndPassword(t.email,r)).pipe(ri(d=>{throw console.log(d),d}),(0,ts.q)(1),yi(d=>{if(null==d)throw Error("User credentials conn't be null !!\u{1f480}");return(0,rn.D)(this.userCollection.doc(d.user.uid).set(t)).pipe((0,Cn.z)(()=>(0,rn.D)(d.user.updateProfile({displayName:t.name}))))})).pipe((0,wt.U)(d=>t),(0,ts.q)(1))}login(t,r){var o=this;return(0,ve.Z)(function*(){yield o.auth.signInWithEmailAndPassword(t,r)})()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(df),h.LFG(QS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UI=(()=>{class n{constructor(){this.modalsBag=[]}register(t){if(this.modalsBag.some(r=>r.Id==t))throw Error(`Dublicate modal key !! \u{1f480}\u{1f480} ... the key ${t} already exists \u{1f914}`);this.modalsBag.push({Id:t,visible:!1})}unRegister(t){this.modalsBag=this.modalsBag.filter(r=>r.Id!=t)}isModalOpen(t){var r,o;return null!==(o=null===(r=this.modalsBag.find(u=>u.Id==t))||void 0===r?void 0:r.visible)&&void 0!==o&&o}toggleModal(t){var r;let o=this.modalsBag.find(u=>u.Id==t);o&&(o.visible=null!==(r=!(null==o?void 0:o.visible))&&void 0!==r&&r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"a",14),h.NdJ("click",function(o){return h.CHM(t),h.oxw().openModal(o)}),h._uU(2,"Login / Register"),h.qZA()()}}function gk(n,e){1&n&&(h.TgZ(0,"li")(1,"a",15),h._uU(2,"Manage"),h.qZA()(),h.TgZ(3,"li")(4,"a",15),h._uU(5,"Upload"),h.qZA()())}let mk=(()=>{class n{constructor(t,r){this.modalService=t,this.authService=r}ngOnInit(){}openModal(t){t.preventDefault(),this.modalService.toggleModal("auth-modal")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(UI),h.Y36(VI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["href","index.html",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["href","about.html",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["href","#",1,"px-2"]],template:function(t,r){if(1&t&&(h.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),h._uU(3,"Clipz"),h.qZA(),h.TgZ(4,"div",3)(5,"ul",4),h.YNc(6,pk,3,0,"li",5),h.ALo(7,"async"),h.YNc(8,gk,6,0,"ng-template",null,6,h.W1O),h.TgZ(10,"li")(11,"a",7),h._uU(12,"About"),h.qZA()()(),h.TgZ(13,"ul",8)(14,"li")(15,"a",9),h._UZ(16,"img",10),h.TgZ(17,"span",11),h._uU(18,"English"),h.qZA()()(),h.TgZ(19,"li",12)(20,"a",9),h._UZ(21,"img",13),h.TgZ(22,"span",11),h._uU(23,"French"),h.qZA()()()()()()()),2&t){const o=h.MAs(9);h.xp6(6),h.Q6J("ngIf",!h.lcZ(7,2,r.authService.isAuthenticated$))("ngIfElse",o)}},directives:[fn],pipes:[Dc],styles:[""]}),n})();const yk=[[["","heading",""]],"*"],_k=function(n){return{hidden:n}},vk=["[heading]","*"];let wk=(()=>{class n{constructor(t,r){this.modalService=t,this.element=r,this._modalId=""}set modalId(t){this.modalService.register(t),this._modalId=t}get modalId(){return this._modalId}closeModal(){this.modalService.toggleModal(this.modalId)}isModalOpen(){return this.modalService.isModalOpen(this.modalId)}ngOnInit(){document.body.appendChild(this.element.nativeElement)}ngOnDestroy(){this.modalService.unRegister(this.modalId),document.body.removeChild(this.element.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(UI),h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId"},ngContentSelectors:vk,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(h.F$t(yk),h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h.NdJ("click",function(){return r.closeModal()}),h._UZ(3,"div",3),h.qZA(),h.TgZ(4,"span",4),h._uU(5,"\u200b"),h.qZA(),h.TgZ(6,"div",5)(7,"div",6)(8,"div",7),h.Hsn(9),h.TgZ(10,"div",8),h.NdJ("click",function(){return r.closeModal()}),h._uU(11," \u2715 "),h.qZA()(),h.Hsn(12,1),h.qZA()()()()),2&t&&h.Q6J("ngClass",h.VKq(1,_k,!r.isModalOpen()))},directives:[Xr],styles:[""]}),n})();function Ek(n,e){1&n&&h.Hsn(0,0,["*ngIf","isActive"])}const Ik=["*"];let JS=(()=>{class n{constructor(){this.title="",this.isActive=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tab"]],inputs:{title:"title",isActive:"isActive"},ngContentSelectors:Ik,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(h.F$t(),h.YNc(0,Ek,1,0,"ng-content",0)),2&t&&h.Q6J("ngIf",r.isActive)},directives:[fn],styles:[""]}),n})();const bk=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function Ck(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",2)(1,"a",3),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw().selectTab(u)}),h._uU(2),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.Q6J("ngClass",h.WLB(2,bk,!t.isActive,t.isActive)),h.xp6(1),h.Oqu(t.title)}}const Dk=["*"];let Tk=(()=>{class n{constructor(){this.tabs=new h.n_E}ngAfterContentInit(){const t=this.tabs.filter(r=>r.isActive);(null==t?void 0:t.length)||this.selectTab(this.tabs.first),(null==t?void 0:t.length)>1&&this.selectTab(t[0])}selectTab(t){return this.tabs.forEach(r=>{r.isActive=!1}),t.isActive=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,o){if(1&t&&h.Suo(o,JS,4),2&t){let u;h.iGM(u=h.CRH())&&(r.tabs=u)}},ngContentSelectors:Dk,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"ul",0),h.YNc(1,Ck,3,5,"li",1),h.qZA(),h.Hsn(2)),2&t&&(h.xp6(1),h.Q6J("ngForOf",r.tabs))},directives:[jn,Xr],styles:[""]}),n})(),Ak=(()=>{class n{}return n.emailPattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,n})();const Sk=["*"];let XS=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:Sk,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0),h.Hsn(1),h.qZA()),2&t&&h.Q6J("ngClass",r.bgColor)},directives:[Xr],styles:[""]}),n})(),eM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Ap=(()=>{class n extends eM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Ha=new h.OlP("NgValueAccessor"),kk={provide:Ha,useExisting:(0,h.Gpc)(()=>a0),multi:!0},Nk=new h.OlP("CompositionEventMode");let a0=(()=>{class n extends eM{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Rk(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Nk,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([kk]),h.qOj]}),n})();function Th(n){return null==n||0===n.length}function nM(n){return null!=n&&"number"==typeof n.length}const bi=new h.OlP("NgValidators"),Ah=new h.OlP("NgAsyncValidators"),Ok=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qs{static min(e){return function rM(n){return e=>{if(Th(e.value)||Th(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function iM(n){return e=>{if(Th(e.value)||Th(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return sM(e)}static requiredTrue(e){return function oM(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function aM(n){return Th(n.value)||Ok.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function uM(n){return e=>Th(e.value)||!nM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function lM(n){return e=>nM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return cM(e)}static nullValidator(e){return null}static compose(e){return mM(e)}static composeAsync(e){return yM(e)}}function sM(n){return Th(n.value)?{required:!0}:null}function cM(n){if(!n)return BI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Th(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function BI(n){return null}function dM(n){return null!=n}function hM(n){const e=(0,h.QGY)(n)?(0,rn.D)(n):n;return(0,h.CqO)(e),e}function fM(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function pM(n,e){return e.map(t=>t(n))}function gM(n){return n.map(e=>function Pk(n){return!n.validate}(e)?e:t=>e.validate(t))}function mM(n){if(!n)return null;const e=n.filter(dM);return 0==e.length?null:function(t){return fM(pM(t,e))}}function vT(n){return null!=n?mM(gM(n)):null}function yM(n){if(!n)return null;const e=n.filter(dM);return 0==e.length?null:function(t){return function Mk(...n){const e=(0,_a.jO)(n),{args:t,keys:r}=vn(n),o=new On.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let E=d,C=d;for(let A=0;A<d;A++){let k=!1;(0,Il.Xf)(t[A]).subscribe((0,Jn.x)(u,V=>{k||(k=!0,C--),m[A]=V},()=>E--,void 0,()=>{(!E||!k)&&(C||u.next(r?El(r,m):m),u.complete())}))}});return e?o.pipe(wl(e)):o}(pM(t,e).map(hM)).pipe((0,wt.U)(fM))}}function wT(n){return null!=n?yM(gM(n)):null}function _M(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vM(n){return n._rawValidators}function wM(n){return n._rawAsyncValidators}function ET(n){return n?Array.isArray(n)?n:[n]:[]}function jI(n,e){return Array.isArray(n)?n.includes(e):n===e}function EM(n,e){const t=ET(e);return ET(n).forEach(o=>{jI(t,o)||t.push(o)}),t}function IM(n,e){return ET(e).filter(t=>!jI(n,t))}class bM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Sh extends bM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _s extends bM{get formDirective(){return null}get path(){return null}}class CM{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let IT=(()=>{class n extends CM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Sh,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),bT=(()=>{class n extends CM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_s,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function u0(n,e){TT(n,e),e.valueAccessor.writeValue(n.value),function Hk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&TM(n,e)})}(n,e),function qk(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Gk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&TM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function $k(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function GI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),zI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function qI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function TT(n,e){const t=vM(n);null!==e.validator?n.setValidators(_M(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=wM(n);null!==e.asyncValidator?n.setAsyncValidators(_M(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();qI(e._rawValidators,o),qI(e._rawAsyncValidators,o)}function zI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=vM(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=wM(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return qI(e._rawValidators,r),qI(e._rawAsyncValidators,r),t}function TM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function AM(n,e){TT(n,e)}function AT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function MM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ST(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===a0?t=u:function Zk(n){return Object.getPrototypeOf(n.constructor)===Ap}(u)?r=u:o=u}),o||r||t||null}function MT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const l0="VALID",WI="INVALID",uy="PENDING",c0="DISABLED";function kT(n){return(ZI(n)?n.validators:n)||null}function xM(n){return Array.isArray(n)?vT(n):n||null}function RT(n,e){return(ZI(e)?e.asyncValidators:n)||null}function kM(n){return Array.isArray(n)?wT(n):n||null}function ZI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const RM=n=>n instanceof wc,NT=n=>n instanceof KI;function NM(n){return RM(n)?n.value:n.getRawValue()}function OM(n,e){const t=NT(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function PM(n,e){NT(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new h.vHH(1002,"")})}class OT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=xM(this._rawValidators),this._composedAsyncValidatorFn=kM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===l0}get invalid(){return this.status===WI}get pending(){return this.status==uy}get disabled(){return this.status===c0}get enabled(){return this.status!==c0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=xM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=kM(e)}addValidators(e){this.setValidators(EM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(EM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IM(e,this._rawAsyncValidators))}hasValidator(e){return jI(this._rawValidators,e)}hasAsyncValidator(e){return jI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=uy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=c0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=l0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===l0||this.status===uy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?c0:l0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=uy,this._hasOwnPendingAsyncValidator=!0;const t=hM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Kk(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=NT(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof Qk)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?c0:this.errors?WI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uy)?uy:this._anyControlsHaveStatus(WI)?WI:l0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ZI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wc extends OT{constructor(e=null,t,r){super(kT(t),RT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ZI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){MT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){MT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class KI extends OT{constructor(e,t,r){super(kT(t),RT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){PM(this,e),Object.keys(e).forEach(r=>{OM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=NM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Qk extends OT{constructor(e,t,r){super(kT(t),RT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){PM(this,e),e.forEach((r,o)=>{OM(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>NM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Jk={provide:_s,useExisting:(0,h.Gpc)(()=>YI)},d0=(()=>Promise.resolve(null))();let YI=(()=>{class n extends _s{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new KI({},vT(t),wT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){d0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),u0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){d0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){d0.then(()=>{const r=this._findContainer(t.path),o=new KI({});AM(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){d0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){d0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,MM(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(bi,10),h.Y36(Ah,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Jk]),h.qOj]}),n})();const eR={provide:Sh,useExisting:(0,h.Gpc)(()=>PT)},VM=(()=>Promise.resolve(null))();let PT=(()=>{class n extends Sh{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new wc,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=ST(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),AT(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){u0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){VM.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;VM.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function HI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_s,9),h.Y36(bi,10),h.Y36(Ah,10),h.Y36(Ha,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([eR]),h.qOj,h.TTD]}),n})(),FT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),BM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const LT=new h.OlP("NgModelWithFormControlWarning"),sR={provide:Sh,useExisting:(0,h.Gpc)(()=>VT)};let VT=(()=>{class n extends Sh{constructor(t,r,o,u){super(),this._ngModelWarningConfig=u,this.update=new h.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=ST(0,o)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&GI(r,this,!1),u0(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}AT(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&GI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(bi,10),h.Y36(Ah,10),h.Y36(Ha,10),h.Y36(LT,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[h._Bn([sR]),h.qOj,h.TTD]}),n})();const oR={provide:_s,useExisting:(0,h.Gpc)(()=>QI)};let QI=(()=>{class n extends _s{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return u0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){GI(t.control||null,t,!1),MT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,MM(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(GI(r||null,t),RM(o)&&(u0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);AM(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function zk(n,e){return zI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){TT(this.form,this),this._oldForm&&zI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(bi,10),h.Y36(Ah,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([oR]),h.qOj,h.TTD]}),n})(),Sp=(()=>{class n{constructor(){this._validator=BI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):BI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const vR={provide:bi,useExisting:(0,h.Gpc)(()=>JI),multi:!0};let JI=(()=>{class n extends Sp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function mR(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>sM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([vR]),h.qOj]}),n})();const CR={provide:bi,useExisting:(0,h.Gpc)(()=>HT),multi:!0};let HT=(()=>{class n extends Sp{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>cM(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[h._Bn([CR]),h.qOj]}),n})(),tx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[BM]]}),n})(),DR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[tx]}),n})(),nx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:LT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[tx]}),n})();function TR(n,e){if(1&n&&(h.TgZ(0,"app-alert",11),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(1),h.Oqu(t.alertMessage)}}function AR(n,e){1&n&&(h.TgZ(0,"p",12),h._uU(1," Field is required !! "),h.qZA())}function SR(n,e){1&n&&(h.TgZ(0,"p",12),h._uU(1," You must enter a valid email !! "),h.qZA())}function MR(n,e){1&n&&(h.TgZ(0,"p",12),h._uU(1," Field is required !! "),h.qZA())}let xR=(()=>{class n{constructor(t,r){this.auth=t,this.modalService=r,this.constatns=Ak,this.showAlert=!1,this.alertColor="",this.alertMessage="",this.credentials={email:"",password:""}}ngOnInit(){}login(){var t=this;return(0,ve.Z)(function*(){var r;try{t.showAlert=!0,t.alertColor="orange",t.alertMessage="Please wait ... \u{1f607}";const{email:o,password:u}=t.credentials;yield t.auth.login(o,u),t.showAlert=!1,t.modalService.toggleModal("auth-modal")}catch(o){t.showAlert=!0,t.alertColor="red",t.alertMessage=null!==(r=o.message)&&void 0!==r?r:"somthing went wrong !! \u{1f616}\u{1f613}",console.error(o)}})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VI),h.Y36(UI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:18,vars:8,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","pattern","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(h.YNc(0,TR,2,2,"app-alert",0),h.TgZ(1,"form",1,2),h.NdJ("ngSubmit",function(){return r.login()}),h.TgZ(3,"div",3)(4,"label",4),h._uU(5,"Email"),h.qZA(),h.TgZ(6,"input",5,6),h.NdJ("ngModelChange",function(u){return r.credentials.email=u}),h.qZA(),h.YNc(8,AR,2,0,"p",7),h.YNc(9,SR,2,0,"p",7),h.qZA(),h.TgZ(10,"div",3)(11,"label",4),h._uU(12,"Password"),h.qZA(),h.TgZ(13,"input",8,9),h.NdJ("ngModelChange",function(u){return r.credentials.password=u}),h.qZA(),h.YNc(15,MR,2,0,"p",7),h.qZA(),h.TgZ(16,"button",10),h._uU(17," Submit "),h.qZA()()),2&t){const o=h.MAs(2),u=h.MAs(7),d=h.MAs(14);h.Q6J("ngIf",r.showAlert),h.xp6(6),h.Q6J("ngModel",r.credentials.email)("pattern",r.constatns.emailPattern),h.xp6(2),h.Q6J("ngIf",u.dirty&&(null==u.errors?null:u.errors.required)),h.xp6(1),h.Q6J("ngIf",u.dirty&&(null==u.errors?null:u.errors.required)),h.xp6(4),h.Q6J("ngModel",r.credentials.password),h.xp6(2),h.Q6J("ngIf",d.dirty&&(null==d.errors?null:d.errors.required)),h.xp6(1),h.Q6J("disabled",o.invalid)}},directives:[fn,XS,FT,bT,YI,a0,JI,IT,PT,HT],styles:[""]}),n})();var kR=N(655);const XI=new h.OlP("ngx-mask config"),rx=new h.OlP("new ngx-mask config"),ix=new h.OlP("initial ngx-mask config"),RR={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new h.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},NR=["Hh:m0:s0","Hh:m0","m0:s0"],OR=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let sx=(()=>{class n{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,o,u,d)=>{var m,E;let C=[],A="";if(Array.isArray(u)){const Ne=new RegExp(u.map(Le=>"[\\^$.|?*+()".indexOf(Le)>=0?`\\${Le}`:Le).join("|"));C=r.split(Ne),A=null!==(E=null===(m=r.match(Ne))||void 0===m?void 0:m[0])&&void 0!==E?E:""}else C=r.split(u),A=u;const k=C.length>1?`${A}${C[1]}`:"";let V=C[0];const Z=this.separatorLimit.replace(/\s/g,"");Z&&+Z&&(V="-"===V[0]?`-${V.slice(1,V.length).slice(0,Z.length)}`:V.slice(0,Z.length));const ae=/(\d+)(\d{3})/;for(;o&&ae.test(V);)V=V.replace(ae,"$1"+o+"$2");return void 0===d?V+k:0===d?V:V+k.substr(0,d+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const o=r.split(".");return o.length>1?Number(o[o.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var o,u,d;for(let m=(null===(o=this.suffix)||void 0===o?void 0:o.length)-1;m>=0;m--){const E=this.suffix.substr(m,null===(u=this.suffix)||void 0===u?void 0:u.length);if(r.includes(E)&&(m-1<0||!r.includes(this.suffix.substr(m-1,null===(d=this.suffix)||void 0===d?void 0:d.length))))return r.replace(E,"")}return r},this.checkInputPrecision=(r,o,u)=>{if(o<1/0){if(Array.isArray(u)){const E=u.find(C=>C!==this.thousandSeparator);u=E||u[0]}const d=new RegExp(this._charToRegExpExpression(u)+`\\d{${o}}.*$`),m=r.match(d);m&&m[0].length-1>o&&(r=r.substring(0,r.length-(m[0].length-1-o))),0===o&&this._compareOrIncludes(r[r.length-1],u,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[o,u]=r;return this.customPattern=u,this.applyMask(t,o)}applyMask(t,r,o=0,u=!1,d=!1,m=(()=>{})){var E,C;if(!r||"string"!=typeof t)return"";let A=0,k="",V=!1,Z=!1,ae=1,Ne=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const Le=t.toString().split("");"IP"===r&&(this.ipError=Le.filter(st=>"."===st).length<3&&Le.length<7,r="099.099.099.099");const At=[];for(let st=0;st<t.length;st++)(null===(E=t[st])||void 0===E?void 0:E.match("\\d"))&&At.push(t[st]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==At.length&&14!==At.length,r=At.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const st=this.getPrecision(r);t=this.checkInputPrecision(t,st,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),k=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!d?t.slice(1,t.length):t,d&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const st=this._charToRegExpExpression(this.thousandSeparator);let vt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(st,"");if(Array.isArray(this.decimalMarker))for(const xp of this.decimalMarker)vt=vt.replace(this._charToRegExpExpression(xp),"");else vt=vt.replace(this._charToRegExpExpression(this.decimalMarker),"");const sa=new RegExp("["+vt+"]");(t.match(sa)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const qT=this.getPrecision(r),zT=(t=this.checkInputPrecision(t,qT,this.decimalMarker)).replace(new RegExp(st,"g"),"");k=this._formatWithSeparators(zT,this.thousandSeparator,this.decimalMarker,qT);const WT=k.indexOf(",")-t.indexOf(","),Mp=k.length-t.length;if(Mp>0&&","!==k[o]){Z=!0;let xp=0;do{this._shift.add(o+xp),xp++}while(xp<Mp)}else 0!==WT&&o>0&&!(k.indexOf(",")>=o&&o>3)||!(k.indexOf(".")>=o&&o>3)&&Mp<=0?(this._shift.clear(),Z=!0,ae=Mp,this._shift.add(o+=Mp)):this._shift.clear()}else for(let st=0,vt=Le[0];st<Le.length&&A!==r.length;st++,vt=Le[st])if(this._checkSymbolMask(vt,r[A])&&"?"===r[A+1])k+=vt,A+=2;else if("*"===r[A+1]&&V&&this._checkSymbolMask(vt,r[A+2]))k+=vt,A+=3,V=!1;else if(this._checkSymbolMask(vt,r[A])&&"*"===r[A+1])k+=vt,V=!0;else if("?"===r[A+1]&&this._checkSymbolMask(vt,r[A+2]))k+=vt,A+=3;else if(this._checkSymbolMask(vt,r[A])){if("H"===r[A]&&Number(vt)>2){A+=1,this._shiftStep(r,A,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}if("h"===r[A]&&"2"===k&&Number(vt)>3){A+=1,st--;continue}if("m"===r[A]&&Number(vt)>5){A+=1,this._shiftStep(r,A,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}if("s"===r[A]&&Number(vt)>5){A+=1,this._shiftStep(r,A,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}const sa=31;if("d"===r[A]&&(Number(vt)>3&&this.leadZeroDateTime||Number(t.slice(A,A+2))>sa||"/"===t[A+1])){A+=1,this._shiftStep(r,A,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}if("M"===r[A]){const zT=0===A&&(Number(vt)>2||Number(t.slice(A,A+2))>12||"/"===t[A+1]),WT=t.slice(A-3,A-1).includes("/")&&("/"===t[A-2]&&Number(t.slice(A-1,A+1))>12&&"/"!==t[A]||"/"===t[A]||"/"===t[A-3]&&Number(t.slice(A-2,A))>12&&"/"!==t[A-1]||"/"===t[A-1]),Mp=Number(t.slice(A-3,A-1))<=sa&&!t.slice(A-3,A-1).includes("/")&&"/"===t[A-1]&&(Number(t.slice(A,A+2))>12||"/"===t[A+1]),xp=Number(t.slice(A-3,A-1))>sa&&!t.slice(A-3,A-1).includes("/")&&!t.slice(A-2,A).includes("/")&&Number(t.slice(A-2,A))>12,tN=Number(t.slice(A-3,A-1))<=sa&&!t.slice(A-3,A-1).includes("/")&&"/"!==t[A-1]&&Number(t.slice(A-1,A+1))>12;if(Number(vt)>1&&this.leadZeroDateTime||zT||WT||Mp||xp||tN){A+=1,this._shiftStep(r,A,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}}k+=vt,A++}else" "===vt&&" "===r[A]?(k+=vt,A++):-1!==this.maskSpecialCharacters.indexOf(r[A])?(k+=r[A],A++,this._shiftStep(r,A,Le.length),st--):this.maskSpecialCharacters.indexOf(vt)>-1&&this.maskAvailablePatterns[r[A]]&&(null===(C=this.maskAvailablePatterns[r[A]])||void 0===C?void 0:C.optional)?(!!Le[A]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&(k+=Le[A]),A++,st--):"*"===this.maskExpression[A+1]&&this._findSpecialChar(this.maskExpression[A+2])&&this._findSpecialChar(vt)===this.maskExpression[A+2]&&V||"?"===this.maskExpression[A+1]&&this._findSpecialChar(this.maskExpression[A+2])&&this._findSpecialChar(vt)===this.maskExpression[A+2]&&V?(A+=3,k+=vt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(vt)<0&&vt!==this.placeHolderCharacter&&(Ne=!0);k.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(k+=r[r.length-1]);let Rt=o+1;for(;this._shift.has(Rt);)ae++,Rt++;let Ot=u&&!r.startsWith("separator")?A:this._shift.has(o)?ae:0;Ne&&Ot--,m(Ot,Z),ae<0&&this._shift.clear();let Dt=!1;d&&(Dt=Le.every(st=>this.maskSpecialCharacters.includes(st)));let Nt=`${this.prefix}${Dt?"":k}${this.suffix}`;return 0===k.length&&(Nt=`${this.prefix}${k}`),Nt}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,o)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===o&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,o){const u=/[*?]/g.test(t.slice(0,r))?o:r;this._shift.add(u+this.prefix.length||0)}_compareOrIncludes(t,r,o){return Array.isArray(r)?r.filter(u=>u!==o).includes(t):t===r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(XI))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ox=(()=>{class n extends sx{constructor(t,r,o,u){super(r),this.document=t,this._config=r,this._elementRef=o,this._renderer=u,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=d=>{}}applyMask(t,r,o=0,u=!1,d=!1,m=(()=>{})){if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const E=t&&"number"==typeof this.selStart?t[this.selStart]:"";let C="";if(this.hiddenInput&&!this.writingValue){let Z=this.actualValue.split("");""!==t&&Z.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>Z.length?Z.splice(this.selStart,0,E):t.length<Z.length&&(Z.length-t.length==1?Z.splice(this.selStart-1,1):Z.splice(this.selStart,this.selEnd-this.selStart))):Z=[],this.showMaskTyped&&(t=this.removeMask(t)),C=this.actualValue.length&&Z.length<=t.length?this.shiftTypedSymbols(Z.join("")):t}C=Boolean(C)&&C.length?C:t;const A=super.applyMask(C,r,o,u,d,m);if(this.actualValue=this.getActualValue(A),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(Z=>!this._compareOrIncludes(Z,this.decimalMarker,this.thousandSeparator))),this.formControlResult(A),!this.showMaskTyped)return this.hiddenInput&&A&&A.length?this.hideInput(A,this.maskExpression):A;const k=A.length,V=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Z=this._numberSkipedSymbols(A);return A+V.slice(k+Z)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?A+V:A+V.slice(k)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let o=r.exec(t),u=0;for(;null!=o;)u+=1,o=r.exec(t);return u}applyValueChanges(t,r,o,u=(()=>{})){const d=this._elementRef.nativeElement;d.value=this.applyMask(d.value,this.maskExpression,t,r,o,u),d!==this._getActiveElement()&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((o,u)=>{var d,m;return this.maskAvailablePatterns&&this.maskAvailablePatterns[r[u]]&&(null===(d=this.maskAvailablePatterns[r[u]])||void 0===d?void 0:d.symbol)?null===(m=this.maskAvailablePatterns[r[u]])||void 0===m?void 0:m.symbol:o}).join("")}getActualValue(t){const r=t.split("").filter((o,u)=>this._checkSymbolMask(o,this.maskExpression[u])||this.maskSpecialCharacters.includes(this.maskExpression[u])&&o===this.maskExpression[u]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((u,d)=>{if(this.maskSpecialCharacters.includes(t[d+1])&&t[d+1]!==this.maskExpression[d+1])return r=u,t[d+1];if(r.length){const m=r;return r="",m}return u})||[]).join("")}numberToString(t){return t||0===t?Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(t)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(o=>this._findSpecialChar(o)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var r;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const o=[];for(let u=0;u<t.length;u++)(null===(r=t[u])||void 0===r?void 0:r.match("\\d"))&&o.push(t[u]);return o.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>3&&o.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>6&&o.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var r;const o=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,u=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return o;const d=[];for(let m=0;m<t.length;m++)(null===(r=t[m])||void 0===r?void 0:r.match("\\d"))&&d.push(t[m]);return d.length<=3?o.slice(d.length,o.length):d.length>3&&d.length<=6?o.slice(d.length+1,o.length):d.length>6&&d.length<=9?o.slice(d.length+2,o.length):d.length>9&&d.length<11?o.slice(d.length+3,o.length):11===d.length?"":12===d.length?u.slice(17===t.length?16:15,u.length):d.length>12&&d.length<=14?u.slice(d.length+4,u.length):""}_getActiveElement(t=this.document){var r;const o=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==o?void 0:o.activeElement)?this._getActiveElement(o):t.activeElement}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let o=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(o=o.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,o):Number(o):o}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(XI),h.LFG(h.SBq),h.LFG(h.Qsj))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),PR=(()=>{class n{constructor(t,r,o){this.document=t,this._maskService=r,this._config=o,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new h.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=u=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:o,patterns:u,prefix:d,suffix:m,thousandSeparator:E,decimalMarker:C,dropSpecialCharacters:A,hiddenInput:k,showMaskTyped:V,placeHolderCharacter:Z,shownMaskExpression:ae,showTemplate:Ne,clearIfNotMatch:Le,validation:At,separatorLimit:Rt,allowNegativeNumbers:Ot,leadZeroDateTime:Dt,triggerOnMaskChange:Nt}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((st,vt)=>st.length-vt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),o){if(!o.currentValue||!Array.isArray(o.currentValue))return;this._maskService.maskSpecialCharacters=o.currentValue||[]}u&&u.currentValue&&(this._maskService.maskAvailablePatterns=u.currentValue),d&&(this._maskService.prefix=d.currentValue),m&&(this._maskService.suffix=m.currentValue),E&&(this._maskService.thousandSeparator=E.currentValue),C&&(this._maskService.decimalMarker=C.currentValue),A&&(this._maskService.dropSpecialCharacters=A.currentValue),k&&(this._maskService.hiddenInput=k.currentValue),V&&(this._maskService.showMaskTyped=V.currentValue),Z&&(this._maskService.placeHolderCharacter=Z.currentValue),ae&&(this._maskService.shownMaskExpression=ae.currentValue),Ne&&(this._maskService.showTemplate=Ne.currentValue),Le&&(this._maskService.clearIfNotMatch=Le.currentValue),At&&(this._maskService.validation=At.currentValue),Rt&&(this._maskService.separatorLimit=Rt.currentValue),Ot&&(this._maskService.allowNegativeNumbers=Ot.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(st=>"-"!==st))),Dt&&(this._maskService.leadZeroDateTime=Dt.currentValue),Nt&&(this._maskService.triggerOnMaskChange=Nt.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||OR.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(NR.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const o in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[o].optional&&(this._maskValue.indexOf(o)!==this._maskValue.lastIndexOf(o)?r+=this._maskValue.split("").filter(d=>d===o).join("").length:-1!==this._maskValue.indexOf(o)&&r++,-1!==this._maskValue.indexOf(o)&&t.toString().length>=this._maskValue.indexOf(o)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const o=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<o)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){(""===t||null==t)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const o=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let u=0,d=!1;if(this._maskService.applyValueChanges(o,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(E,C)=>{this._justPasted=!1,u=E,d=C}),this._getActiveElement()!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let m=this._position?this._inputValue.length+o+u:o+("Backspace"!==this._code||d?u:0);m>this._getActualInputLength()&&(m=this._getActualInputLength()),m<0&&(m=0),r.setSelectionRange(m,m),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const d=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==d&&(r.value=d),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const o=t.target;if(this._inputValue=o.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===o.value.length&&(o.selectionStart=o.selectionEnd),8===t.keyCode&&0!==o.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&o.selectionStart<=this.prefix.length)o.setSelectionRange(this.prefix.length,o.selectionEnd);else if(this._inputValue.length!==o.selectionStart&&1!==o.selectionStart)for(;this.specialCharacters.includes(this._inputValue[o.selectionStart-1].toString())&&(this.prefix.length>=1&&o.selectionStart>this.prefix.length||0===this.prefix.length);)o.setSelectionRange(o.selectionStart-1,o.selectionEnd);this.checkSelectionOnDeletion(o),this._maskService.prefix.length&&o.selectionStart<=this._maskService.prefix.length&&o.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const u=o.selectionStart;8===t.keyCode&&!o.readOnly&&0===u&&o.selectionEnd===o.value.length&&0!==o.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<o.selectionStart?o.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(o.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=o.selectionStart,this._maskService.selEnd=o.selectionEnd}writeValue(t){return(0,kR.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),("number"==typeof t||this._maskValue.startsWith("separator"))&&(t=this._maskService.numberToString(t),Array.isArray(this.decimalMarker)||(t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t),this._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){var r;const o=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==o?void 0:o.activeElement)?this._getActiveElement(o):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,o,u)=>{if(this._start="{"===o?u:this._start,"}"!==o)return this._maskService._findSpecialChar(o)?r+o:r;this._end=u;const d=Number(t.slice(this._start+1,this._end));return r+new Array(d+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(o=>":"!==o).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,o;const u=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(o=this._maskService.removeMask(t))||void 0===o?void 0:o.length);if(this._inputValue&&u)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,u;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(le),h.Y36(ox),h.Y36(XI))},n.\u0275dir=h.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&h.NdJ("paste",function(){return r.onPaste()})("ngModelChange",function(u){return r.onModelChange(u)})("input",function(u){return r.onInput(u)})("blur",function(){return r.onBlur()})("click",function(u){return r.onClick(u)})("keydown",function(u){return r.onKeyDown(u)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[h._Bn([{provide:Ha,useExisting:(0,h.Gpc)(()=>n),multi:!0},{provide:bi,useExisting:(0,h.Gpc)(()=>n),multi:!0},ox]),h.TTD]}),n})();function FR(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}let LR=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:rx,useValue:t},{provide:ix,useValue:RR},{provide:XI,useFactory:FR,deps:[ix,rx]},sx]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const ax="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function VR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Field is required !! "),h.qZA())}function UR(n,e){if(1&n&&(h.TgZ(0,"p",3),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.AsE(" The value you inputted is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," characters long. It must be at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," !! ")}}function BR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," You must enter a valid email !! "),h.qZA())}function jR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Value too low !! "),h.qZA())}function $R(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Value too high !! "),h.qZA())}function HR(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Password must be at least 8 characters, contain at least 1 uppercase letter, 1 lowercase letter, and 1 number, Can contain special characters !! "),h.qZA())}function GR(n,e){if(1&n&&(h.ynx(0),h.YNc(1,VR,2,0,"p",2),h.YNc(2,UR,2,2,"p",2),h.YNc(3,BR,2,0,"p",2),h.YNc(4,jR,2,0,"p",2),h.YNc(5,$R,2,0,"p",2),h.YNc(6,HR,2,0,"p",2),h.BQk()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern)}}ax.KeyboardEvent||(ax.KeyboardEvent=function(n,e){});let qR=(()=>{class n{constructor(){this.control=new wc,this.placeholder="",this.type="text",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",placeholder:"placeholder",type:"type",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"type","placeholder","formControl","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(h._UZ(0,"input",0),h.YNc(1,GR,7,6,"ng-container",1)),2&t&&(h.Q6J("type",r.type)("placeholder",r.placeholder)("formControl",r.control)("mask",r.format)("dropSpecialCharacters",!1),h.xp6(1),h.Q6J("ngIf",r.control.dirty))},directives:[a0,PR,IT,VT,fn],styles:[""]}),n})();function zR(n,e){if(1&n&&(h.TgZ(0,"app-alert",11),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(1),h.Oqu(t.alertMessage)}}const WR=function(n,e){return{"opacity-50":n,"hover:bg-indigo-500":e}};let ZR=(()=>{class n{constructor(t){this.authService=t,this.showAlert=!1,this.alertMessage="",this.alertColor="orange",this.inSubmission=!1,this.name=new wc("",[qs.required,qs.minLength(3)]),this.email=new wc("",[qs.required,qs.email]),this.age=new wc("",[qs.required,qs.min(18),qs.max(120)]),this.password=new wc("",[qs.required,qs.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/)]),this.confirm_password=new wc("",[qs.required,qs.pattern(/fds/)]),this.phoneNumber=new wc("",[qs.required,qs.minLength(15),qs.maxLength(15)]),this.registerForm=new KI({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber})}ngOnInit(){}register(){this.inSubmission=!0,this.showAlert=!0,this.alertMessage="Please wait you account is being created. \u{1f607}";const t=this.registerForm.value.password,r={name:this.registerForm.value.name,email:this.registerForm.value.email,age:+this.registerForm.value.age,phoneNumber:this.registerForm.value.phoneNumber};try{this.authService.createUser(r,t).subscribe({next:o=>{this.alertMessage="Success! Your account has been created. \u{1f44c}\u{1f44c}",this.alertColor="green"},error:o=>{console.error(o),this.alertMessage=o.message,this.alertColor="red",this.inSubmission=!1},complete:()=>{this.inSubmission=!1}})}catch(o){return console.error(o),this.alertMessage=o.message,void(this.alertColor="red")}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:13,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","text","placeholder","Enter Name",3,"control"],["placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Enter Confirm Password",3,"control"],["type","text","placeholder","Enter phone number","format","(000)0-00000000",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition",3,"ngClass","disabled"],[3,"color"]],template:function(t,r){1&t&&(h.YNc(0,zR,2,2,"app-alert",0),h.TgZ(1,"form",1),h.NdJ("ngSubmit",function(){return r.register()}),h.TgZ(2,"div",2)(3,"label",3),h._uU(4,"Name"),h.qZA(),h._UZ(5,"app-input",4),h.qZA(),h.TgZ(6,"div",2)(7,"label",3),h._uU(8,"Email"),h.qZA(),h._UZ(9,"app-input",5),h.qZA(),h.TgZ(10,"div",2)(11,"label",3),h._uU(12,"Age"),h.qZA(),h._UZ(13,"app-input",6),h.qZA(),h.TgZ(14,"div",2)(15,"label",3),h._uU(16,"Password"),h.qZA(),h._UZ(17,"app-input",7),h.qZA(),h.TgZ(18,"div",2)(19,"label",3),h._uU(20,"Confirm Password"),h.qZA(),h._UZ(21,"app-input",8),h.qZA(),h.TgZ(22,"div",2)(23,"label",3),h._uU(24,"Phone Number"),h.qZA(),h._UZ(25,"app-input",9),h.qZA(),h.TgZ(26,"button",10),h._uU(27," Submit "),h.qZA()()),2&t&&(h.Q6J("ngIf",r.showAlert),h.xp6(1),h.Q6J("formGroup",r.registerForm),h.xp6(4),h.Q6J("control",r.name),h.xp6(4),h.Q6J("control",r.email),h.xp6(4),h.Q6J("control",r.age),h.xp6(4),h.Q6J("control",r.password),h.xp6(4),h.Q6J("control",r.confirm_password),h.xp6(4),h.Q6J("control",r.phoneNumber),h.xp6(1),h.Q6J("ngClass",h.WLB(10,WR,r.registerForm.invalid,r.registerForm.valid))("disabled",r.registerForm.invalid||r.inSubmission))},directives:[fn,XS,FT,bT,QI,qR,Xr],styles:[""]}),n})(),KR=(()=>{class n{constructor(t){this.modalService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(UI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalId","auth-modal"],["heading","",1,"text-2xl","font-bold"],["title","Login"],["title","Register"]],template:function(t,r){1&t&&(h.TgZ(0,"app-modal",0)(1,"p",1),h._uU(2,"Your Account"),h.qZA(),h.TgZ(3,"app-tabs-container")(4,"app-tab",2),h._UZ(5,"app-login"),h.qZA(),h.TgZ(6,"app-tab",3),h._UZ(7,"app-register"),h.qZA()()())},directives:[wk,Tk,JS,xR,ZR],styles:[""]}),n})();function YR(n,e){1&n&&h._UZ(0,"app-auth-modal")}let QR=(()=>{class n{constructor(t){this.authService=t,this.title="clips"}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:107,vars:3,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[4,"ngIf"]],template:function(t,r){1&t&&(h._UZ(0,"app-nav"),h.TgZ(1,"section",0)(2,"video",1),h._UZ(3,"source",2),h.qZA(),h._UZ(4,"div",3),h.TgZ(5,"div",4),h._UZ(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5)(10,"div",5),h.qZA(),h.TgZ(11,"div",6)(12,"div",7)(13,"h1",8),h._uU(14,"Clip it and ship it!"),h.qZA(),h.TgZ(15,"p"),h._uU(16," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),h.qZA()()()(),h.TgZ(17,"section",9)(18,"h1",10),h._uU(19,"Latest"),h.qZA(),h.TgZ(20,"div",11)(21,"a",12),h._UZ(22,"img",13),h.TgZ(23,"div",14)(24,"div",15)(25,"div",16),h.O4$(),h.TgZ(26,"svg",17),h._UZ(27,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(28,"div",19)(29,"h2",20),h._uU(30," Game Highlighting Clip "),h.qZA(),h.TgZ(31,"p",21),h._uU(32," Luis Ramirez \xb7 "),h.TgZ(33,"span",22),h._uU(34,"March 31, 2020"),h.qZA()()()(),h.TgZ(35,"a",12),h._UZ(36,"img",23),h.TgZ(37,"div",14)(38,"div",15)(39,"div",16),h.O4$(),h.TgZ(40,"svg",17),h._UZ(41,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(42,"div",19)(43,"h2",20),h._uU(44," Game Highlighting Clip "),h.qZA(),h.TgZ(45,"p",21),h._uU(46," Luis Ramirez \xb7 "),h.TgZ(47,"span",22),h._uU(48,"March 31, 2020"),h.qZA()()()(),h.TgZ(49,"a",12),h._UZ(50,"img",24),h.TgZ(51,"div",14)(52,"div",15)(53,"div",16),h.O4$(),h.TgZ(54,"svg",17),h._UZ(55,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(56,"div",19)(57,"h2",20),h._uU(58," Game Highlighting Clip "),h.qZA(),h.TgZ(59,"p",21),h._uU(60," Luis Ramirez \xb7 "),h.TgZ(61,"span",22),h._uU(62,"March 31, 2020"),h.qZA()()()(),h.TgZ(63,"a",12),h._UZ(64,"img",23),h.TgZ(65,"div",14)(66,"div",15)(67,"div",16),h.O4$(),h.TgZ(68,"svg",17),h._UZ(69,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(70,"div",19)(71,"h2",20),h._uU(72," Game Highlighting Clip "),h.qZA(),h.TgZ(73,"p",21),h._uU(74," Luis Ramirez \xb7 "),h.TgZ(75,"span",22),h._uU(76,"March 31, 2020"),h.qZA()()()(),h.TgZ(77,"a",12),h._UZ(78,"img",24),h.TgZ(79,"div",14)(80,"div",15)(81,"div",16),h.O4$(),h.TgZ(82,"svg",17),h._UZ(83,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(84,"div",19)(85,"h2",20),h._uU(86," Game Highlighting Clip "),h.qZA(),h.TgZ(87,"p",21),h._uU(88," Luis Ramirez \xb7 "),h.TgZ(89,"span",22),h._uU(90,"March 31, 2020"),h.qZA()()()(),h.TgZ(91,"a",12),h._UZ(92,"img",13),h.TgZ(93,"div",14)(94,"div",15)(95,"div",16),h.O4$(),h.TgZ(96,"svg",17),h._UZ(97,"path",18),h.qZA()()()(),h.kcU(),h.TgZ(98,"div",19)(99,"h2",20),h._uU(100," Game Highlighting Clip "),h.qZA(),h.TgZ(101,"p",21),h._uU(102," Luis Ramirez \xb7 "),h.TgZ(103,"span",22),h._uU(104,"March 31, 2020"),h.qZA()()()()()(),h.YNc(105,YR,1,0,"app-auth-modal",25),h.ALo(106,"async")),2&t&&(h.xp6(105),h.Q6J("ngIf",h.lcZ(106,1,r.authService.isAuthenticated$)))},directives:[mk,fn,KR],pipes:[Dc],styles:[""]}),n})(),JR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Ya,nx,LR.forRoot()]]}),n})(),XR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ya,JR,nx,DR]]}),n})();const GT_firebaseConfig={apiKey:"AIzaSyCM2m0Tp1mHtZ366u5F5zI1f5rdnDRnNak",authDomain:"clibs-8ef23.firebaseapp.com",projectId:"clibs-8ef23",storageBucket:"clibs-8ef23.appspot.com",messagingSenderId:"687873988109",appId:"1:687873988109:web:e620587fa5d4c544c82744"};let eN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[QR]}),n.\u0275inj=h.cJS({providers:[],imports:[[ma,rb,XR,go.hO.initializeApp(GT_firebaseConfig),iw,fk]]}),n})();(0,h.G48)(),cf.Z.initializeApp(GT_firebaseConfig);let ux=!1;cf.Z.auth().onAuthStateChanged(()=>{ux||ru().bootstrapModule(eN).catch(n=>console.error(n)),ux=!0})},5867:(Je,Ee,N)=>{N.d(Ee,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=N(9681);(0,h.registerVersion)("firebase","9.8.2","app")},127:(Je,Ee,N)=>{N.d(Ee,{Z:()=>h.Z});var h=N(3942);h.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Je,Ee,N)=>{N.r(Ee);var h=N(5861),J=N(3942),O=N(2090),ue=N(9681),ne=N(655),ge=N(1877),le=N(4859);const ke=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new ge.Yd("@firebase/auth");function Ze(y,...f){Ge.logLevel<=ge.in.ERROR&&Ge.error(`Auth (${ue.SDK_VERSION}): ${y}`,...f)}function De(y,...f){throw Ue(y,...f)}function we(y,...f){return Ue(y,...f)}function Ie(y,f,g){const v=Object.assign(Object.assign({},Ve()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function Be(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&De(y,"argument-error"),Ie(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return fe.create(y,...f)}function j(y,f,...g){if(!y)throw Ue(f,...g)}function _e(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ze(f),new Error(f)}function W(y,f){y||_e(f)}const re=new Map;function X(y){W(y instanceof Function,"Expected a class definition");let f=re.get(y);return f?(W(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,re.set(y,f),f)}function Re(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===jt()||"https:"===jt()}function jt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Yt{constructor(f,g){this.shortDelay=f,this.longDelay=g,W(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Vt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,f){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class en{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vr=new Yt(3e4,6e4);function Gt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Pt(y,f,g,v){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(y,f,g,v,T={}){return Zr(y,T,(0,h.Z)(function*(){let R={},z={};v&&("GET"===f?z=v:R={body:JSON.stringify(v)});const de=(0,O.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),en.fetch()(vs(y,y.config.apiHost,g,de),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Zr(y,f,g){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Wt),f);try{const T=new Kr(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw di(y,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const de=R.ok?z.errorMessage:z.error.message,[Fe,Qe]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw di(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Fe)throw di(y,"email-already-in-use",z);if("USER_DISABLED"===Fe)throw di(y,"user-disabled",z);const ct=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ie(y,ct,Qe);De(y,ct)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function wr(y,f,g,v){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,h.Z)(function*(y,f,g,v,T={}){const R=yield Pt(y,f,g,v,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function vs(y,f,g,v){const T=`${f}${g}?${v}`;return y.config.emulator?mn(y.config,T):`${y.config.apiScheme}://${T}`}class Kr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(we(this.auth,"network-request-failed")),vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function di(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=we(y,f,v);return T.customData._tokenResponse=g,T}function Yr(){return(Yr=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function hn(y,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function zs(y,f){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Bn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Co(){return(Co=(0,h.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),T=rt(v);j(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,z=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:Bn($t(T.auth_time)),issuedAtTime:Bn($t(T.iat)),expirationTime:Bn($t(T.exp)),signInProvider:z||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function rt(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(g);return T?JSON.parse(T):(Ze("Failed to decode base64 JWT payload"),null)}catch(T){return Ze("Caught error parsing JWT payload as JSON",T),null}}function ur(y,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Ut(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ut({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ws{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class lr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bn(this.lastLoginAt),this.creationTime=Bn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(y){return L.apply(this,arguments)}function L(){return(L=(0,h.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),T=yield ur(y,zs(g,{idToken:v}));j(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const z=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?H(R.providerUserInfo):[],de=Ce(y.providerData,z),ct=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==de?void 0:de.length)),lt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:de,metadata:new lr(R.createdAt,R.lastLoginAt),isAnonymous:ct};Object.assign(y,lt)})).apply(this,arguments)}function q(){return(q=(0,h.Z)(function*(y){const f=(0,O.m9)(y);yield cr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ce(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function H(y){return y.map(f=>{var{providerId:g}=f,v=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Me(){return(Me=(0,h.Z)(function*(y,f){const g=yield Zr(y,{},(0,h.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,z=vs(y,T,"/v1/token",`key=${R}`),de=yield y._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",en.fetch()(z,{method:"POST",headers:de,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(void 0!==f.idToken,"internal-error"),j(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function gt(y){const f=rt(y);return j(f,"internal-error"),j(void 0!==f.exp,"internal-error"),j(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,h.Z)(function*(){return j(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:z}=yield function Q(y,f){return Me.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(T,R,Number(z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:T,expirationTime:R}=g,z=new Ye;return v&&(j("string"==typeof v,"internal-error",{appName:f}),z.refreshToken=v),T&&(j("string"==typeof T,"internal-error",{appName:f}),z.accessToken=T),R&&(j("number"==typeof R,"internal-error",{appName:f}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return _e("not implemented")}}function dt(y,f){j("string"==typeof y||void 0===y,"internal-error",{appName:f})}class _t{constructor(f){var{uid:g,auth:v,stsTokenManager:T}=f,R=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ws(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new lr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const v=yield ur(g,g.stsTokenManager.getToken(g.auth,f));return j(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function hi(y){return Co.apply(this,arguments)}(this,f)}reload(){return function G(y){return q.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new _t(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield cr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield ur(f,function ft(y,f){return Yr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,T,R,z,de,Fe,Qe,ct;const lt=null!==(v=g.displayName)&&void 0!==v?v:void 0,wn=null!==(T=g.email)&&void 0!==T?T:void 0,si=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,bu=null!==(z=g.photoURL)&&void 0!==z?z:void 0,Xh=null!==(de=g.tenantId)&&void 0!==de?de:void 0,ug=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,Ma=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,jl=null!==(ct=g.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:_d,emailVerified:lg,isAnonymous:Sr,providerData:ef,stsTokenManager:tf}=g;j(_d&&tf,f,"internal-error");const nf=Ye.fromJSON(this.name,tf);j("string"==typeof _d,f,"internal-error"),dt(lt,f.name),dt(wn,f.name),j("boolean"==typeof lg,f,"internal-error"),j("boolean"==typeof Sr,f,"internal-error"),dt(si,f.name),dt(bu,f.name),dt(Xh,f.name),dt(ug,f.name),dt(Ma,f.name),dt(jl,f.name);const $l=new _t({uid:_d,auth:f,email:wn,emailVerified:lg,displayName:lt,isAnonymous:Sr,photoURL:bu,phoneNumber:si,tenantId:Xh,stsTokenManager:nf,createdAt:Ma,lastLoginAt:jl});return ef&&Array.isArray(ef)&&($l.providerData=ef.map(Cu=>Object.assign({},Cu))),ug&&($l._redirectEventId=ug),$l}static _fromIdTokenResponse(f,g,v=!1){return(0,h.Z)(function*(){const T=new Ye;T.updateFromServerResponse(g);const R=new _t({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield cr(R),R})()}}const yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,h.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,h.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,h.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function xn(y,f,g){return`firebase:${y}:${f}:${g}`}class Er{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=xn(this.userKey,T.apiKey,R),this.fullPersistenceKey=xn("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?_t._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,h.Z)(function*(){if(!g.length)return new Er(X(yt),f,v);const T=(yield Promise.all(g.map(function(){var Qe=(0,h.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=T[0]||X(yt);const z=xn(v,f.config.apiKey,f.name);let de=null;for(const Qe of g)try{const ct=yield Qe._get(z);if(ct){const lt=_t._fromJSON(f,ct);Qe!==R&&(de=lt),R=Qe;break}}catch(ct){}const Fe=T.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],de&&(yield R._set(z,de.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,h.Z)(function*(ct){if(ct!==R)try{yield ct._remove(z)}catch(lt){}});return function(ct){return Qe.apply(this,arguments)}}())),new Er(R,f,v)):new Er(R,f,v)})()}}function Ga(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(kn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(oa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Zi(f))return"Blackberry";if(Rn(f))return"Webos";if(qa(f))return"Safari";if((f.includes("chrome/")||aa(f))&&!f.includes("edge/"))return"Chrome";if(Ir(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function oa(y=(0,O.z$)()){return/firefox\//i.test(y)}function qa(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function aa(y=(0,O.z$)()){return/crios\//i.test(y)}function kn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Ir(y=(0,O.z$)()){return/android/i.test(y)}function Zi(y=(0,O.z$)()){return/blackberry/i.test(y)}function Rn(y=(0,O.z$)()){return/webos/i.test(y)}function Pr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ws(y=(0,O.z$)()){return Pr(y)||Ir(y)||Rn(y)||Zi(y)||/windows phone/i.test(y)||kn(y)}function Do(y,f=[]){let g;switch(y){case"Browser":g=Ga((0,O.z$)());break;case"Worker":g=`${Ga((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ue.SDK_VERSION}/${v}`}class Fr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=R=>new Promise((z,de)=>{try{z(f(R))}catch(Fe){de(Fe)}});v.onAbort=g,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const v=[];try{for(const T of g.queue)yield T(f),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const R of v)try{R()}catch(z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class qe{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jt(this),this.idTokenSubscription=new Jt(this),this.beforeStateQueue=new Fr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=X(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield Er.create(v,f),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var v;const T=yield g.assertedPersistence.getCurrentUser();let R=T,z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const de=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=null==R?void 0:R._redirectEventId,Qe=yield g.tryRedirectSignIn(f);(!de||de===Fe)&&(null==Qe?void 0:Qe.user)&&(R=Qe.user,z=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(R)}catch(de){R=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(de))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield cr(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function We(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&j(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,h.Z)(function*(){if(!v._deleted)return f&&j(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,h.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(X(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,h.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&X(f)||g._popupRedirectResolver;j(v,g,"argument-error"),g.redirectPersistenceManager=yield Er.create(g,[X(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,v,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Do(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function ot(y){return(0,O.m9)(y)}class Jt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Di(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ti(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class fi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return _e("not implemented")}_getIdTokenResponse(f){return _e("not implemented")}_linkToIdToken(f,g){return _e("not implemented")}_getReauthenticationResolver(f){return _e("not implemented")}}function _n(y,f){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:resetPassword",Gt(y,f))})).apply(this,arguments)}function la(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function za(y,f){return Es.apply(this,arguments)}function Es(){return(Es=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",Gt(y,f))})).apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithPassword",Gt(y,f))})).apply(this,arguments)}function Is(y,f){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendOobCode",Gt(y,f))})).apply(this,arguments)}function tn(y,f){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function ca(y,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function Ai(y,f){return Za.apply(this,arguments)}function Za(){return(Za=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function Ic(y,f){return Si.apply(this,arguments)}function Si(){return(Si=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function sl(){return(sl=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithEmailLink",Gt(y,f))})).apply(this,arguments)}function bc(){return(bc=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithEmailLink",Gt(y,f))})).apply(this,arguments)}class dr extends fi{constructor(f,g,v,T=null){super("password",v),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new dr(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new dr(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function jn(y,f){return Ks.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Mi(y,f){return sl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:De(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,h.Z)(function*(){switch(v.signInMethod){case"password":return la(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function kp(y,f){return bc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:De(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function bs(y,f){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithIdp",Gt(y,f))})).apply(this,arguments)}class Ki extends fi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Ki(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):De("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=g,R=(0,ne._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const z=new Ki(v,T);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(f){return bs(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,bs(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,bs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function Dc(y,f){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendVerificationCode",Gt(y,f))})).apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,f))})).apply(this,arguments)}function Ac(){return(Ac=(0,h.Z)(function*(y,f){const g=yield wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,f));if(g.temporaryProof)throw di(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Op={USER_NOT_FOUND:"user-not-found"};function Sc(){return(Sc=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Op)})).apply(this,arguments)}class To extends fi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new To({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new To({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function ol(y,f){return Cs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Np(y,f){return Ac.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Pp(y,f){return Sc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}=f;return v||g||T||R?new To({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class Ka{constructor(f){var g,v,T,R,z,de;const Fe=(0,O.zd)((0,O.pd)(f)),Qe=null!==(g=Fe.apiKey)&&void 0!==g?g:null,ct=null!==(v=Fe.oobCode)&&void 0!==v?v:null,lt=function Mh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);j(Qe&&ct&&lt,"argument-error"),this.apiKey=Qe,this.operation=lt,this.code=ct,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Fe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(de=Fe.tenantId)&&void 0!==de?de:null}static parseLink(f){const g=function da(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new Ka(g)}catch(v){return null}}}let xc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return dr._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=Ka.parseLink(v);return j(T,"argument-error"),dr._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class hr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ys extends hr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class xi extends Ys{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return j("providerId"in g&&"signInMethod"in g,"argument-error"),Ki._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return xi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return xi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:z,providerId:de}=f;if(!v&&!T&&!g&&!R||!de)return null;try{return new xi(de)._credential({idToken:g,accessToken:v,nonce:z,pendingToken:R})}catch(Fe){return null}}}let Ao=(()=>{class y extends Ys{constructor(){super("facebook.com")}static credential(g){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),kc=(()=>{class y extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),xh=(()=>{class y extends Ys{constructor(){super("github.com")}static credential(g){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Qs extends fi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return bs(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,bs(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,bs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:R}=g;return v&&T&&R&&v===T?new Qs(v,R):null}static _create(f,g){return new Qs(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class br extends hr{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return br.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return br.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Qs.fromJSON(f);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Qs._create(v,g)}catch(T){return null}}}let Rc=(()=>{class y extends Ys{constructor(){super("twitter.com")}static credential(g,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Cr(y,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signUp",Gt(y,f))})).apply(this,arguments)}class ei{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,T=!1){return(0,h.Z)(function*(){const R=yield _t._fromIdTokenResponse(f,v,T),z=al(v);return new ei({user:R,providerId:z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=al(v);return new ei({user:f,providerId:T,_tokenResponse:v,operationType:g})})()}}function al(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ul(){return(ul=(0,h.Z)(function*(y){var f;const g=ot(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ei({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Cr(g,{returnSecureToken:!0}),T=yield ei._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class xo extends O.ZR{constructor(f,g,v,T){var R;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,xo.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,T){return new xo(f,g,v,T)}}function ll(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?xo._fromErrorAndOperation(y,R,f,v):R})}function ki(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function nn(){return(nn=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y);yield Zt(!0,g,f);const{providerUserInfo:v}=yield hn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=ki(v||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ha(y,f){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(y,f,g=!1){const v=yield ur(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ei._forOperation(y,"link",v)})).apply(this,arguments)}function Zt(y,f,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(y,f,g){yield cr(f);const T=!1===y?"provider-already-linked":"no-such-provider";j(ki(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function Qa(y,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,h.Z)(function*(y,f,g=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield ur(y,ll(v,T,f,y),g);j(R.idToken,v,"internal-error");const z=rt(R.idToken);j(z,v,"internal-error");const{sub:de}=z;return j(y.uid===de,v,"user-mismatch"),ei._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function Yn(y,f){return cl.apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(y,f,g=!1){const v="signIn",T=yield ll(y,v,f),R=yield ei._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function cn(y,f){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,h.Z)(function*(y,f){return Yn(ot(y),f)})).apply(this,arguments)}function Qn(y,f){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y);return yield Zt(!1,g,f.providerId),ha(g,f)})).apply(this,arguments)}function Yi(y,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(y,f){return Qa((0,O.m9)(y),f)})).apply(this,arguments)}function pi(y,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,h.Z)(function*(y,f){return wr(y,"POST","/v1/accounts:signInWithCustomToken",Gt(y,f))})).apply(this,arguments)}function pt(){return(pt=(0,h.Z)(function*(y,f){const g=ot(y),v=yield pi(g,{token:f,returnSecureToken:!0}),T=yield ei._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ts{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?dl._fromServerResponse(f,g):De(f,"internal-error")}}class dl extends Ts{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new dl(g)}}function ga(y,f,g){var v;j((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),j(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Ja(){return(Ja=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&ga(v,T,g),yield ca(v,T)})).apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(y,f,g){yield _n((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ae(){return(Ae=(0,h.Z)(function*(y,f){yield za((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ft(y,f){return No.apply(this,arguments)}function No(){return(No=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield _n(g,{oobCode:f}),T=v.requestType;switch(j(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(v.mfaInfo,g,"internal-error");default:j(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=Ts._fromServerResponse(ot(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function eu(){return(eu=(0,h.Z)(function*(y,f){const{data:g}=yield Ft((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(y,f,g){const v=ot(y),T=yield Cr(v,{returnSecureToken:!0,email:f,password:g}),R=yield ei._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function ml(){return(ml=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};j(g.handleCodeInApp,v,"argument-error"),g&&ga(v,T,g),yield Ai(v,T)})).apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=xc.credentialWithLink(f,g||Re());return j(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),cn(v,T)})).apply(this,arguments)}function fr(y,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:createAuthUri",Gt(y,f))})).apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(y,f){const v={identifier:f,continueUri:at()?Re():"http://localhost"},{signinMethods:T}=yield fr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function yl(){return(yl=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ga(g.auth,T,f);const{email:R}=yield tn(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function ru(){return(ru=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ga(v.auth,R,g);const{email:z}=yield Ic(v.auth,R);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function _l(y,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function su(){return(su=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},z=yield ur(v,_l(v.auth,R));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const de=v.providerData.find(({providerId:Fe})=>"password"===Fe);de&&(de.displayName=v.displayName,de.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function ou(y,f,g){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(y,f,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const z=yield ur(y,la(v,R));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Oo{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class Vc extends Oo{constructor(f,g,v,T){super(f,g,v),this.username=T}}class au extends Oo{constructor(f,g){super(f,"facebook.com",g)}}class Ur extends Vc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Rh extends Oo{constructor(f,g){super(f,"google.com",g)}}class vl extends Vc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function $n(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Lc(y){var f,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const z=null===(g=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Oo(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new au(R,T);case"github.com":return new Ur(R,T);case"google.com":return new Rh(R,T);case"twitter.com":return new vl(R,T,y.screenName||null);case"custom":case"anonymous":return new Oo(R,null);default:return new Oo(R,v,T)}}(g)}class Ji{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Ji("enroll",f)}static _fromMfaPendingCredential(f){return new Ji("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ji._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return Ji._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ro{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=ot(f),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(de=>Ts._fromServerResponse(v,de));j(T.mfaPendingCredential,v,"internal-error");const z=Ji._fromMfaPendingCredential(T.mfaPendingCredential);return new ro(z,R,function(){var de=(0,h.Z)(function*(Fe){const Qe=yield Fe._process(v,z);delete T.mfaInfo,delete T.mfaPendingCredential;const ct=Object.assign(Object.assign({},T),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const lt=yield ei._fromIdTokenResponse(v,g.operationType,ct);return yield v._updateCurrentUser(lt.user),lt;case"reauthenticate":return j(g.user,v,"internal-error"),ei._forOperation(g.user,g.operationType,ct);default:De(v,"internal-error")}});return function(Fe){return de.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function jc(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:start",Gt(y,f))}class Po{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>Ts._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Po(f)}getSession(){var f=this;return(0,h.Z)(function*(){return Ji._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,h.Z)(function*(){const T=f,R=yield v.getSession(),z=yield ur(v.user,T._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),R=yield ur(g.user,function io(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(y,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const uu=new WeakMap,Xi="__sak";class lu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Xi,"1"),this.storage.removeItem(Xi),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dr=(()=>{class y extends lu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jp(){const y=(0,O.z$)();return qa(y)||Pr(y)}()&&function Kn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ws(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&g(v,R,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((de,Fe,Qe)=>{this.notifyListeners(de,Qe)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(T);if(g.newValue!==de)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const R=()=>{const de=this.storage.getItem(T);!v&&this.localCache[T]===de||this.notifyListeners(T,de)},z=this.storage.getItem(T);!function ua(){return(0,O.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,R=this;return(0,h.Z)(function*(){yield T().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,h.Z)(function*(){const R=yield v().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,T=this;return(0,h.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),On=(()=>{class y extends lu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let $c=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,h.Z)(function*(){const T=g,{eventId:R,eventType:z,data:de}=T.data,Fe=v.handlersMap[z];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const Qe=Array.from(Fe).map(function(){var lt=(0,h.Z)(function*(wn){return wn(T.origin,de)});return function(wn){return lt.apply(this,arguments)}}()),ct=yield function va(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Qe);T.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:ct})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Fo(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Ss{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var T=this;return(0,h.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,de;return new Promise((Fe,Qe)=>{const ct=Fo("",20);R.port1.start();const lt=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);de={messageChannel:R,onMessage(wn){const si=wn;if(si.data.eventId===ct)switch(si.data.status){case"ack":clearTimeout(lt),z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Fe(si.data.response);break;default:clearTimeout(lt),clearTimeout(z),Qe(new Error("invalid_response"))}}},T.handlers.add(de),R.port1.addEventListener("message",de.onMessage),T.target.postMessage({eventType:f,eventId:ct,data:g},[R.port2])}).finally(()=>{de&&T.removeMessageHandler(de)})})()}}function vn(){return window}function Oi(){return void 0!==vn().WorkerGlobalScope&&"function"==typeof vn().importScripts}function Hc(){return(Hc=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const El="firebaseLocalStorageDb",xs="firebaseLocalStorage",Lo="fbase_key";class so{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Xn(y,f){return y.transaction([xs],f?"readwrite":"readonly").objectStore(xs)}function ao(){const y=indexedDB.open(El,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(xs,{keyPath:Lo})}catch(T){g(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const v=y.result;v.objectStoreNames.contains(xs)?f(v):(v.close(),yield function oo(){const y=indexedDB.deleteDatabase(El);return new so(y).toPromise()}(),f(yield ao()))}))})}function Vo(y,f,g){return ks.apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(y,f,g){const v=Xn(y,!0).put({[Lo]:f,value:g});return new so(v).toPromise()})).apply(this,arguments)}function Rs(){return(Rs=(0,h.Z)(function*(y,f){const g=Xn(y,!1).get(f),v=yield new so(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Bo(y,f){const g=Xn(y,!0).delete(f);return new so(g).toPromise()}const uo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield ao()),g.db})()}_withRetries(g){var v=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Oi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=$c._getInstance(function wl(){return Oi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,h.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,h.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function wt(){return Hc.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ss(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,h.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Gc(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ao();return yield Vo(g,Xi,"1"),yield Bo(g,Xi),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,h.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(R=>Vo(R,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,h.Z)(function*(){const T=yield v._withRetries(R=>function Uo(y,f){return Rs.apply(this,arguments)}(R,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,h.Z)(function*(){return v._withPendingWrite((0,h.Z)(function*(){return yield v._withRetries(T=>Bo(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const v=yield g._withRetries(z=>{const de=Xn(z,!1).getAll();return new so(de).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:z,value:de}of v)R.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(de)&&(g.notifyListeners(z,de),T.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!R.has(z)&&(g.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function er(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:start",Gt(y,f))}function Pn(){return(Pn=(0,h.Z)(function*(y){return(yield Pt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lo(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const R=we("internal-error");R.customData=T,g(R)},v.type="text/javascript",v.charset="UTF-8",function ts(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function ns(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ri=1e12;class Cn{constructor(f){this.auth=f,this.counter=ri,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new yi(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||ri;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ri))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var v;return null===(v=g._widgets.get(f||ri))||void 0===v||v.execute(),""})()}}class yi{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;j(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function cu(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cl=ns("rcb"),pn=new Yt(3e4,6e4);class cy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vn().grecaptcha}load(f,g=""){return j(function jo(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(vn().grecaptcha):new Promise((v,T)=>{const R=vn().setTimeout(()=>{T(we(f,"network-request-failed"))},pn.get());vn()[Cl]=()=>{vn().clearTimeout(R),delete vn()[Cl];const de=vn().grecaptcha;if(!de)return void T(we(f,"internal-error"));const Fe=de.render;de.render=(Qe,ct)=>{const lt=Fe(Qe,ct);return this.counter++,lt},this.hostLanguage=g,v(de)},lo(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Cl,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!vn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Br{load(f){return(0,h.Z)(function*(){return new Cn(f)})()}clearedOneInstance(){}}const qc="recaptcha",Os={theme:"light",type:"image"};class zc{constructor(f,g=Object.assign({},Os),v){this.parameters=g,this.type=qc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ot(v),this.isInvisible="invisible"===this.parameters.size,j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;j(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Br:new cy,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const z=de=>{!de||(f.tokenChangeListeners.delete(z),R(de))};f.tokenChangeListeners.add(z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=vn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){j(at()&&!Oi(),f.auth,"internal-error"),yield function rs(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ns(y){return Pn.apply(this,arguments)}(f.auth);j(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Dl{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=To._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Ea(){return(Ea=(0,h.Z)(function*(y,f,g){const v=ot(y),T=yield Ar(v,f,(0,O.m9)(g));return new Dl(T,R=>cn(v,R))})).apply(this,arguments)}function Wc(){return(Wc=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield Zt(!1,v,"phone");const T=yield Ar(v.auth,f,(0,O.m9)(g));return new Dl(T,R=>Qn(v,R))})).apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=yield Ar(v.auth,f,(0,O.m9)(g));return new Dl(T,R=>Yi(v,R))})).apply(this,arguments)}function Ar(y,f,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(y,f,g){var v;const T=yield g.verify();try{let R;if(j("string"==typeof T,y,"argument-error"),j(g.type===qc,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const z=R.session;if("phoneNumber"in R)return j("enroll"===z.type,y,"internal-error"),(yield jc(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{j("signin"===z.type,y,"internal-error");const de=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return j(de,y,"missing-multi-factor-info"),(yield er(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Dc(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return z}}finally{g._reset()}})).apply(this,arguments)}function is(){return(is=(0,h.Z)(function*(y,f){yield ha((0,O.m9)(y),f)})).apply(this,arguments)}let Ps=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=ot(g)}verifyPhoneNumber(g,v){return Ar(this.auth,g,(0,O.m9)(v))}static credential(g,v){return To._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?To._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ss(y,f){return f?X(f):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ho extends fi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return bs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return bs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return bs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function St(y){return Yn(y.auth,new Ho(y),y.bypassAuthState)}function Zc(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),Qa(g,new Ho(y),y.bypassAuthState)}function Go(y){return pr.apply(this,arguments)}function pr(){return(pr=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),ha(g,new Ho(y),y.bypassAuthState)})).apply(this,arguments)}class ba{constructor(f,g,v,T,R=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:z,error:de,type:Fe}=f;if(de)return void g.reject(de);const Qe={auth:g.auth,requestUri:v,sessionId:T,tenantId:z||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Qe))}catch(ct){g.reject(ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return St;case"linkViaPopup":case"linkViaRedirect":return Go;case"reauthViaPopup":case"reauthViaRedirect":return Zc;default:De(this.auth,"internal-error")}}resolve(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qo=new Yt(2e3,1e4);function os(){return(os=(0,h.Z)(function*(y,f,g){const v=ot(y);Be(y,f,hr);const T=ss(v,g);return new Yc(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Be(v.auth,f,hr);const T=ss(v.auth,g);return new Yc(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Be(v.auth,f,hr);const T=ss(v.auth,g);return new Yc(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let Yc=(()=>{class y extends ba{constructor(g,v,T,R,z){super(g,v,R,z),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const v=yield g.execute();return j(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,h.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const v=Fo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(we(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,qo.get())};g()}}return y.currentPopupAction=null,y})();const gr=new Map;class Tl extends ba{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let v=gr.get(g.auth._key());if(!v){try{const R=(yield function Ph(y,f){return Fs.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}gr.set(g.auth._key(),v)}return g.bypassAuthState||gr.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Fs(){return(Fs=(0,h.Z)(function*(y,f){const g=F(f),v=x(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function zo(y,f){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,h.Z)(function*(y,f){return x(y)._set(F(f),"true")})).apply(this,arguments)}function D(y,f){gr.set(y._key(),f)}function x(y){return X(y._redirectPersistence)}function F(y){return xn("pendingRedirect",y.config.apiKey,y.name)}function pe(){return(pe=(0,h.Z)(function*(y,f,g){const v=ot(y);Be(y,f,hr);const T=ss(v,g);return yield zo(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Be(v.auth,f,hr);const T=ss(v.auth,g);yield zo(T,v.auth);const R=yield mr(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Be(v.auth,f,hr);const T=ss(v.auth,g);yield Zt(!1,v,f.providerId),yield zo(T,v.auth);const R=yield mr(v);return T._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function as(){return(as=(0,h.Z)(function*(y,f){return yield ot(y)._initializationPromise,Li(y,f,!1)})).apply(this,arguments)}function Li(y,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(y,f,g=!1){const v=ot(y),T=ss(v,f),z=yield new Tl(v,T,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,f)),z})).apply(this,arguments)}function mr(y){return us.apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(y){const f=Fo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Al{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Jc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sl(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!Sl(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(we(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qc(f))}saveEventToCache(f){this.cachedEventUids.add(Qc(f)),this.lastProcessedEventTime=Date.now()}}function Qc(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Sl({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Fh(y){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,h.Z)(function*(y,f={}){return Pt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Xc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fu=/^https?/;function Vh(){return(Vh=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Fh(y);for(const g of f)try{if(f0(g))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function f0(y){const f=Re(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===v}if(!fu.test(g))return!1;if(Xc.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Hp=new Yt(3e4,6e4);function Uh(){const y=vn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let pu=null;function co(y){return pu=pu||function Gp(y){return new Promise((f,g)=>{var v,T,R;function z(){Uh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Uh(),g(we(y,"network-request-failed"))},timeout:Hp.get()})}if(null===(T=null===(v=vn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=vn().gapi)||void 0===R?void 0:R.load)){const de=ns("iframefcb");return vn()[de]=()=>{gapi.load?z():g(we(y,"network-request-failed"))},lo(`https://apis.google.com/js/api.js?onload=${de}`).catch(Fe=>g(Fe))}z()}}).catch(f=>{throw pu=null,f})}(y),pu}const gu=new Yt(5e3,15e3),mu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qp(y){const f=y.config;j(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?mn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:ue.SDK_VERSION},T=yu.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function ho(){return ho=(0,h.Z)(function*(y){const f=yield co(y),g=vn().gapi;return j(g,y,"internal-error"),f.open({where:document.body,url:qp(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mu,dontclear:!0},v=>new Promise(function(){var T=(0,h.Z)(function*(R,z){yield v.restyle({setHideOnLeave:!1});const de=we(y,"network-request-failed"),Fe=vn().setTimeout(()=>{z(de)},gu.get());function Qe(){vn().clearTimeout(Fe),R(v)}v.ping(Qe).then(Qe,()=>{z(de)})});return function(R,z){return T.apply(this,arguments)}}()))}),ho.apply(this,arguments)}const td={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function wi(y,f,g,v,T,R){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:ue.SDK_VERSION,eventId:T};if(f instanceof hr){f.setDefaultLanguage(y.languageCode),z.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Qe]of Object.entries(R||{}))z[Fe]=Qe}if(f instanceof Ys){const Fe=f.getScopes().filter(Qe=>""!==Qe);Fe.length>0&&(z.scopes=Fe.join(","))}y.tenantId&&(z.tid=y.tenantId);const de=z;for(const Fe of Object.keys(de))void 0===de[Fe]&&delete de[Fe];return`${function fo({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(de).slice(1)}`}const Rl="webStorageSupport";class sd extends class g0{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new sd(f)}_finalizeEnroll(f,g,v){return function Up(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function bl(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:finalize",Gt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let m0=(()=>{class y{constructor(){}static assertion(g){return sd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var jh="@firebase/auth";class Kp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var T;f((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Da(){return window}function Vi(){return(Vi=(0,h.Z)(function*(y,f,g){var v;const{BuildInfo:T}=Da();W(f.sessionId,"AuthEvent did not contain a session ID");const R=yield y0(f.sessionId),z={};return Pr()?z.ibi=T.packageName:Ir()?z.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=R,wi(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function ad(){return(ad=(0,h.Z)(function*(y){const{BuildInfo:f}=Da(),g={};Pr()?g.iosBundleId=f.packageName:Ir()?g.androidPackageName=f.packageName:De(y,"operation-not-supported-in-this-environment"),yield Fh(y,g)})).apply(this,arguments)}function Yp(){return(Yp=(0,h.Z)(function*(y,f,g){const{cordova:v}=Da();let T=()=>{};try{yield new Promise((R,z)=>{let de=null;function Fe(){var lt;R();const wn=null===(lt=v.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof wn&&wn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Qe(){de||(de=window.setTimeout(()=>{z(we(y,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}f.addPassiveListener(Fe),document.addEventListener("resume",Qe,!1),Ir()&&document.addEventListener("visibilitychange",ct,!1),T=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",ct,!1),de&&window.clearTimeout(de)}})}finally{T()}})).apply(this,arguments)}function y0(y){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,h.Z)(function*(y){const f=Hh(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Hh(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function gy(y){(0,ue._registerComponent)(new le.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:R,authDomain:z}=v.options;return((de,Fe)=>{j(R&&!R.includes(":"),"invalid-api-key",{appName:de.name}),j(!(null==z?void 0:z.includes(":")),"argument-error",{appName:de.name});const Qe={apiKey:R,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Do(y)},ct=new qe(de,Fe,Qe);return function se(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(X);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(ct,g),ct})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new le.wA("auth-internal",f=>{const g=ot(f.getProvider("auth").getImmediate());return new Kp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(jh,"0.20.2",function od(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(jh,"0.20.2","esm2017")}("Browser");class ld extends Al{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function vu(y){return dd.apply(this,arguments)}function dd(){return(dd=(0,h.Z)(function*(y){const f=yield Fl()._get(wu(y));return f&&(yield Fl()._remove(wu(y))),f})).apply(this,arguments)}function Jp(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function Fl(){return X(Dr)}function wu(y){return xn("authEvent",y.config.apiKey,y.name)}function jr(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Ta(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function Wo(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function ng(y=(0,O.z$)()){return!("file:"!==Wo()&&"ionic:"!==Wo()&&"capacitor:"!==Wo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function zh(){try{const y=self.localStorage,f=Fo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function fd(y=(0,O.z$)()){return function Eu(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Gn(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return pd()&&(0,O.hl)()}return!1}function pd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function nr(){return(function tg(){return"http:"===Wo()||"https:"===Wo()}()||(0,O.ru)()||ng())&&!function qh(){return(0,O.b$)()||(0,O.UG)()}()&&zh()&&!pd()}function Iu(){return ng()&&"undefined"!=typeof document}function Vl(){return(Vl=(0,h.Z)(function*(){return!!Iu()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const $r={LOCAL:"local",NONE:"none",SESSION:"session"},Zo=j,Zh="persistence";function Aa(y){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,h.Z)(function*(y){yield y._initializationPromise;const f=gd(),g=xn(Zh,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function gd(){var y;try{return(null===(y=function Iy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Cy=j;class Ui{constructor(){this.browserResolver=X(class py{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=On,this._completeRedirectFn=Li,this._overrideRedirectResult=D}_openPopup(f,g,v,T){var R=this;return(0,h.Z)(function*(){var z;W(null===(z=R.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const de=wi(f,g,v,Re(),T);return function kl(y,f,g,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let de="";const Fe=Object.assign(Object.assign({},td),{width:v.toString(),height:T.toString(),top:R,left:z}),Qe=(0,O.z$)().toLowerCase();g&&(de=aa(Qe)?"_blank":g),oa(Qe)&&(f=f||"http://localhost",Fe.scrollbars="yes");const ct=Object.entries(Fe).reduce((wn,[si,bu])=>`${wn}${si}=${bu},`,"");if(function Zs(y=(0,O.z$)()){var f;return Pr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Qe)&&"_self"!==de)return function dy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",de),new zp(null);const lt=window.open(f||"",de,ct);j(lt,y,"popup-blocked");try{lt.focus()}catch(wn){}return new zp(lt)}(f,de,Fo())})()}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(f),function Ms(y){vn().location.href=y}(wi(f,g,v,Re(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(W(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const v=yield function p0(y){return ho.apply(this,arguments)}(f),T=new Al(f);return v.register("authEvent",R=>(j(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Rl,{type:Rl},T=>{var R;const z=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Rl];void 0!==z&&g(!!z),De(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ml(y){return Vh.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ws()||qa()||Pr()}}),this.cordovaResolver=X(class Xp{constructor(){this._redirectPersistence=On,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Li,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,h.Z)(function*(){const v=f._key();let T=g.eventManagers.get(v);return T||(T=new ld(f),g.eventManagers.set(v,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){De(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){!function _u(y){var f,g,v,T,R,z,de,Fe,Qe,ct;const lt=Da();j("function"==typeof(null===(f=null==lt?void 0:lt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(void 0!==(null===(g=null==lt?void 0:lt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(R=null===(T=null===(v=null==lt?void 0:lt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Fe=null===(de=null===(z=null==lt?void 0:lt.cordova)||void 0===z?void 0:z.plugins)||void 0===de?void 0:de.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(ct=null===(Qe=null==lt?void 0:lt.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===ct?void 0:ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield R._initialize(f);yield z.initialized(),z.resetRedirect(),function b(){gr.clear()}(),yield R._originValidation(f);const de=function cd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Jp(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(f,v,T);yield function Qp(y,f){return Fl()._set(wu(y),f)}(f,de);const Fe=yield function $h(y,f,g){return Vi.apply(this,arguments)}(f,de,g),Qe=yield function ud(y){const{cordova:f}=Da();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function Ec(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Fe);return function po(y,f,g){return Yp.apply(this,arguments)}(f,z,Qe)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ol(y){return ad.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=Da(),z=setTimeout((0,h.Z)(function*(){yield vu(f),g.onEvent(Ta())}),500),de=function(){var ct=(0,h.Z)(function*(lt){clearTimeout(z);const wn=yield vu(f);let si=null;wn&&(null==lt?void 0:lt.url)&&(si=function yy(y,f){var g,v;const T=function Ll(y){const f=jr(y),g=f.link?decodeURIComponent(f.link):void 0,v=jr(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return jr(T).link||T||v||g||y}(f);if(T.includes("/__/auth/callback")){const R=jr(T),z=R.firebaseError?function _y(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,de=null===(v=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Fe=de?we(de):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(wn,lt.url)),g.onEvent(si||Ta())});return function(wn){return ct.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,de);const Fe=T,Qe=`${R.packageName.toLowerCase()}://`;Da().handleOpenURL=function(){var ct=(0,h.Z)(function*(lt){if(lt.toLowerCase().startsWith(Qe)&&de({url:lt}),"function"==typeof Fe)try{Fe(lt)}catch(wn){console.error(wn)}});return function(lt){return ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=On,this._completeRedirectFn=Li,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,v,T)})()}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,v,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Iu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Wh(){return Vl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function md(y){return y.unwrap()}function Ty(y){return rg(y)}function rg(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ps.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=kc;break;case"facebook.com":v=Ao;break;case"github.com":v=xh;break;case"twitter.com":v=Rc;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:de,nonce:Fe}=f;return R||z||T||de?de?g.startsWith("saml.")?Qs._create(g,de):Ki._fromParams({providerId:g,signInMethod:g,pendingToken:de,idToken:T,accessToken:R}):new xi(g).credential({idToken:T,accessToken:R,rawNonce:Fe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ii(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function yd(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Ay(y,function Nn(y,f){var g;const v=(0,O.m9)(y),T=f;return j(f.customData.operationType,v,"argument-error"),j(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),ro._fromError(v,T)}(y,f));else if(v){const T=rg(f),R=f;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Ty(g),additionalUserInfo:$n(g),user:ls.getOrCreate(T)}})}function Yh(y,f){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>ii(y,g.confirm(v))}})).apply(this,arguments)}class Ay{constructor(f,g){this.resolver=g,this.auth=function Dy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ii(md(this.auth),this.resolver.resolveSignIn(f))}}class ls{constructor(f){this._delegate=f,this.multiFactor=function Bp(y){const f=(0,O.m9)(y);return uu.has(f)||uu.set(f,Po._fromUser(f)),uu.get(f)}(f)}static getOrCreate(f){return ls.USER_MAP.has(f)||ls.USER_MAP.set(f,new ls(f)),ls.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return ii(g.auth,Qn(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,h.Z)(function*(){return Yh(v.auth,function du(y,f,g){return Wc.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return ii(g.auth,function Kc(y,f,g){return Fi.apply(this,arguments)}(g._delegate,f,Ui))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Aa(ot(g.auth)),function Ht(y,f,g){return function Et(y,f,g){return Tn.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ui)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return ii(g.auth,Yi(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Yh(this.auth,function Oh(y,f,g){return Tr.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ii(this.auth,function _i(y,f,g){return hu.apply(this,arguments)}(this._delegate,f,Ui))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Aa(ot(g.auth)),function Ke(y,f,g){return function tt(y,f,g){return ut.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ui)})()}sendEmailVerification(f){return function gi(y,f){return yl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function kh(y,f){return nn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Pc(y,f){return ou((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Fc(y,f){return ou((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function $o(y,f){return is.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function iu(y,f){return su.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function nu(y,f,g){return ru.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ls.USER_MAP=new WeakMap;const Bl=j;let ig=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Bl(T,"invalid-api-key",{appName:g.name}),Bl(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?Ui:void 0;this._delegate=v.initialize({options:{persistence:Sy(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ls.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Lr(y,f,g){const v=ot(y);j(v._canInitEmulator,v,"emulator-config-failed"),j(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=Di(f),{host:z,port:de}=function In(y){const f=Di(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:Ti(v.substr(R.length+1))}}{const[R,z]=v.split(":");return{host:R,port:Ti(z)}}}(f);v.config.emulator={url:`${R}//${z}${null===de?"":`:${de}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:de,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function on(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function Ro(y,f){return Ae.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ft(this._delegate,g)}confirmPasswordReset(g,v){return function Xa(y,f,g){return fl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,h.Z)(function*(){return ii(T._delegate,function eo(y,f,g){return ti.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function tu(y,f){return As.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Oc(y,f){const g=Ka.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){Bl(nr(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Hn(y,f){return as.apply(this,arguments)}(g._delegate,Ui);return v?ii(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function eg(y,f){ot(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:R,error:z,complete:de}=sg(g,v,T);return this._delegate.onAuthStateChanged(R,z,de)}onIdTokenChanged(g,v,T){const{next:R,error:z,complete:de}=sg(g,v,T);return this._delegate.onIdTokenChanged(R,z,de)}sendSignInLinkToEmail(g,v){return function gl(y,f,g){return ml.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function hl(y,f,g){return Ja.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,h.Z)(function*(){let T;switch(function by(y,f){Zo(Object.values($r).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Zo(f!==$r.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Zo(f===$r.NONE,y,"unsupported-persistence-type"):pd()?Zo(f===$r.NONE||f===$r.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Zo(f===$r.NONE||zh(),y,"unsupported-persistence-type")}(v._delegate,g),g){case $r.SESSION:T=On;break;case $r.LOCAL:T=(yield X(uo)._isAvailable())?uo:Dr;break;case $r.NONE:T=yt;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ii(this._delegate,function Nc(y){return ul.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ii(this._delegate,cn(this._delegate,g))}signInWithCustomToken(g){return ii(this._delegate,function ko(y,f){return pt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return ii(this._delegate,function pl(y,f,g){return cn((0,O.m9)(y),xc.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return ii(this._delegate,function Fp(y,f,g){return Qi.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Yh(this._delegate,function Dn(y,f,g){return Ea.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,h.Z)(function*(){return Bl(nr(),v._delegate,"operation-not-supported-in-this-environment"),ii(v._delegate,function $p(y,f,g){return os.apply(this,arguments)}(v._delegate,g,Ui))})()}signInWithRedirect(g){var v=this;return(0,h.Z)(function*(){return Bl(nr(),v._delegate,"operation-not-supported-in-this-environment"),yield Aa(v._delegate),function K(y,f,g){return function te(y,f,g){return pe.apply(this,arguments)}(y,f,g)}(v._delegate,g,Ui)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function un(y,f){return eu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=$r,y})();function sg(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const T=v;return{next:z=>T(z&&ls.getOrCreate(z)),error:f,complete:g}}function Sy(y,f){const g=function Ul(y,f){const g=gd();if(!g)return[];const v=xn(Zh,y,f);switch(g.getItem(v)){case $r.NONE:return[yt];case $r.LOCAL:return[uo,On];case $r.SESSION:return[On];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(uo)&&g.push(uo),"undefined"!=typeof window)for(const v of[Dr,On])g.includes(v)||g.push(v);return g.includes(yt)||g.push(yt),g}class Jh{constructor(){this.providerId="phone",this._delegate=new Ps(md(J.Z.auth()))}static credential(f,g){return Ps.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Jh.PHONE_SIGN_IN_METHOD=Ps.PHONE_SIGN_IN_METHOD,Jh.PROVIDER_ID=Ps.PROVIDER_ID;const og=j;class _0{constructor(f,g,v=J.Z.app()){var T;og(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new zc(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Sa(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new ig(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xc,FacebookAuthProvider:Ao,GithubAuthProvider:xh,GoogleAuthProvider:kc,OAuthProvider:xi,SAMLAuthProvider:br,PhoneAuthProvider:Jh,PhoneMultiFactorGenerator:m0,RecaptchaVerifier:_0,TwitterAuthProvider:Rc,Auth:ig,AuthCredential:fi,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(J.Z)},8306:(Je,Ee,N)=>{N.d(Ee,{y:()=>$});var h=N(2961),J=N(727),O=N(8822),ue=N(4671);var le=N(2416),ie=N(576),ce=N(2806);let $=(()=>{class Se{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const fe=new Se;return fe.source=this,fe.operator=Ve,fe}subscribe(Ve,fe,be){const Ge=function He(Se){return Se&&Se instanceof h.Lv||function ee(Se){return Se&&(0,ie.m)(Se.next)&&(0,ie.m)(Se.error)&&(0,ie.m)(Se.complete)}(Se)&&(0,J.Nn)(Se)}(Ve)?Ve:new h.Hp(Ve,fe,be);return(0,ce.x)(()=>{const{operator:Ze,source:De}=this;Ge.add(Ze?Ze.call(Ge,De):De?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(fe){Ve.error(fe)}}forEach(Ve,fe){return new(fe=B(fe))((be,Ge)=>{const Ze=new h.Hp({next:De=>{try{Ve(De)}catch(we){Ge(we),Ze.unsubscribe()}},error:Ge,complete:be});this.subscribe(Ze)})}_subscribe(Ve){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Ve)}[O.L](){return this}pipe(...Ve){return function ge(Se){return 0===Se.length?ue.y:1===Se.length?Se[0]:function(Ve){return Se.reduce((fe,be)=>be(fe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=B(Ve))((fe,be)=>{let Ge;this.subscribe(Ze=>Ge=Ze,Ze=>be(Ze),()=>fe(Ge))})}}return Se.create=ke=>new Se(ke),Se})();function B(Se){var ke;return null!==(ke=null!=Se?Se:le.v.Promise)&&void 0!==ke?ke:Promise}},7579:(Je,Ee,N)=>{N.d(Ee,{x:()=>le});var h=N(8306),J=N(727);const ue=(0,N(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=N(8737),ge=N(2806);let le=(()=>{class ce extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const ee=new ie(this,this);return ee.operator=B,ee}_throwIfClosed(){if(this.closed)throw new ue}next(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(B)}})}error(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:ee}=this;for(;ee.length;)ee.shift().error(B)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:ee,isStopped:He,observers:Se}=this;return ee||He?J.Lc:(this.currentObservers=null,Se.push(B),new J.w0(()=>{this.currentObservers=null,(0,ne.P)(Se,B)}))}_checkFinalizedStatuses(B){const{hasError:ee,thrownError:He,isStopped:Se}=this;ee?B.error(He):Se&&B.complete()}asObservable(){const B=new h.y;return B.source=this,B}}return ce.create=($,B)=>new ie($,B),ce})();class ie extends le{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,ee;null===(ee=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===ee||ee.call(B,$)}error($){var B,ee;null===(ee=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===ee||ee.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,ee;return null!==(ee=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==ee?ee:J.Lc}}},2961:(Je,Ee,N)=>{N.d(Ee,{Hp:()=>Ve,Lv:()=>ee});var h=N(576),J=N(727),O=N(2416),ue=N(7849);function ne(){}const ge=ce("C",void 0,void 0);function ce(De,we,Ie){return{kind:De,value:we,error:Ie}}var $=N(3410),B=N(2806);class ee extends J.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,J.Nn)(we)&&we.add(this)):this.destination=Ze}static create(we,Ie,Be){return new Ve(we,Ie,Be)}next(we){this.isStopped?Ge(function ie(De){return ce("N",De,void 0)}(we),this):this._next(we)}error(we){this.isStopped?Ge(function le(De){return ce("E",void 0,De)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?Ge(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Se(De,we){return He.call(De,we)}class ke{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(we)}catch(Be){fe(Be)}}error(we){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(we)}catch(Be){fe(Be)}else fe(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ie){fe(Ie)}}}class Ve extends ee{constructor(we,Ie,Be){let Ue;if(super(),(0,h.m)(we)||!we)Ue={next:null!=we?we:void 0,error:null!=Ie?Ie:void 0,complete:null!=Be?Be:void 0};else{let j;this&&O.v.useDeprecatedNextContext?(j=Object.create(we),j.unsubscribe=()=>this.unsubscribe(),Ue={next:we.next&&Se(we.next,j),error:we.error&&Se(we.error,j),complete:we.complete&&Se(we.complete,j)}):Ue=we}this.destination=new ke(Ue)}}function fe(De){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(De):(0,ue.h)(De)}function Ge(De,we){const{onStoppedNotification:Ie}=O.v;Ie&&$.z.setTimeout(()=>Ie(De,we))}const Ze={closed:!0,next:ne,error:function be(De){throw De},complete:ne}},727:(Je,Ee,N)=>{N.d(Ee,{Lc:()=>ge,w0:()=>ne,Nn:()=>le});var h=N(576);const O=(0,N(3888).d)(ce=>function(B){ce(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((ee,He)=>`${He+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ue=N(8737);class ne{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Se of B)Se.remove(this);else B.remove(this);const{initialTeardown:ee}=this;if((0,h.m)(ee))try{ee()}catch(Se){$=Se instanceof O?Se.errors:[Se]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Se of He)try{ie(Se)}catch(ke){$=null!=$?$:[],ke instanceof O?$=[...$,...ke.errors]:$.push(ke)}}if($)throw new O($)}}add($){var B;if($&&$!==this)if(this.closed)ie($);else{if($ instanceof ne){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ue.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ue.P)(B,$),$ instanceof ne&&$._removeParent(this)}}ne.EMPTY=(()=>{const ce=new ne;return ce.closed=!0,ce})();const ge=ne.EMPTY;function le(ce){return ce instanceof ne||ce&&"closed"in ce&&(0,h.m)(ce.remove)&&(0,h.m)(ce.add)&&(0,h.m)(ce.unsubscribe)}function ie(ce){(0,h.m)(ce)?ce():ce.unsubscribe()}},2416:(Je,Ee,N)=>{N.d(Ee,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,Ee,N)=>{N.d(Ee,{E:()=>J});const J=new(N(8306).y)(ne=>ne.complete())},8996:(Je,Ee,N)=>{N.d(Ee,{D:()=>we});var h=N(8421),J=N(5363),O=N(9468),ge=N(8306),ie=N(2202),ce=N(576),$=N(9672);function ee(Ie,Be){if(!Ie)throw new Error("Iterable cannot be null");return new ge.y(Ue=>{(0,$.f)(Ue,Be,()=>{const j=Ie[Symbol.asyncIterator]();(0,$.f)(Ue,Be,()=>{j.next().then(_e=>{_e.done?Ue.complete():Ue.next(_e.value)})},0,!0)})})}var He=N(3670),Se=N(8239),ke=N(1144),Ve=N(6495),fe=N(2206),be=N(4532),Ge=N(3260);function we(Ie,Be){return Be?function De(Ie,Be){if(null!=Ie){if((0,He.c)(Ie))return function ue(Ie,Be){return(0,h.Xf)(Ie).pipe((0,O.R)(Be),(0,J.Q)(Be))}(Ie,Be);if((0,ke.z)(Ie))return function le(Ie,Be){return new ge.y(Ue=>{let j=0;return Be.schedule(function(){j===Ie.length?Ue.complete():(Ue.next(Ie[j++]),Ue.closed||this.schedule())})})}(Ie,Be);if((0,Se.t)(Ie))return function ne(Ie,Be){return(0,h.Xf)(Ie).pipe((0,O.R)(Be),(0,J.Q)(Be))}(Ie,Be);if((0,fe.D)(Ie))return ee(Ie,Be);if((0,Ve.T)(Ie))return function B(Ie,Be){return new ge.y(Ue=>{let j;return(0,$.f)(Ue,Be,()=>{j=Ie[ie.h](),(0,$.f)(Ue,Be,()=>{let _e,W;try{({value:_e,done:W}=j.next())}catch(re){return void Ue.error(re)}W?Ue.complete():Ue.next(_e)},0,!0)}),()=>(0,ce.m)(null==j?void 0:j.return)&&j.return()})}(Ie,Be);if((0,Ge.L)(Ie))return function Ze(Ie,Be){return ee((0,Ge.Q)(Ie),Be)}(Ie,Be)}throw(0,be.z)(Ie)}(Ie,Be):(0,h.Xf)(Ie)}},8421:(Je,Ee,N)=>{N.d(Ee,{Xf:()=>He});var h=N(655),J=N(1144),O=N(8239),ue=N(8306),ne=N(3670),ge=N(2206),le=N(4532),ie=N(6495),ce=N(3260),$=N(576),B=N(7849),ee=N(8822);function He(De){if(De instanceof ue.y)return De;if(null!=De){if((0,ne.c)(De))return function Se(De){return new ue.y(we=>{const Ie=De[ee.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,J.z)(De))return function ke(De){return new ue.y(we=>{for(let Ie=0;Ie<De.length&&!we.closed;Ie++)we.next(De[Ie]);we.complete()})}(De);if((0,O.t)(De))return function Ve(De){return new ue.y(we=>{De.then(Ie=>{we.closed||(we.next(Ie),we.complete())},Ie=>we.error(Ie)).then(null,B.h)})}(De);if((0,ge.D)(De))return be(De);if((0,ie.T)(De))return function fe(De){return new ue.y(we=>{for(const Ie of De)if(we.next(Ie),we.closed)return;we.complete()})}(De);if((0,ce.L)(De))return function Ge(De){return be((0,ce.Q)(De))}(De)}throw(0,le.z)(De)}function be(De){return new ue.y(we=>{(function Ze(De,we){var Ie,Be,Ue,j;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,h.KL)(De);!(Be=yield Ie.next()).done;)if(we.next(Be.value),we.closed)return}catch(_e){Ue={error:_e}}finally{try{Be&&!Be.done&&(j=Ie.return)&&(yield j.call(Ie))}finally{if(Ue)throw Ue.error}}we.complete()})})(De,we).catch(Ie=>we.error(Ie))})}},6451:(Je,Ee,N)=>{N.d(Ee,{T:()=>ge});var h=N(8189),J=N(8421),O=N(515),ue=N(7669),ne=N(8996);function ge(...le){const ie=(0,ue.yG)(le),ce=(0,ue._6)(le,1/0),$=le;return $.length?1===$.length?(0,J.Xf)($[0]):(0,h.J)(ce)((0,ne.D)($,ie)):O.E}},5403:(Je,Ee,N)=>{N.d(Ee,{x:()=>J});var h=N(2961);function J(ue,ne,ge,le,ie){return new O(ue,ne,ge,le,ie)}class O extends h.Lv{constructor(ne,ge,le,ie,ce,$){super(ne),this.onFinalize=ce,this.shouldUnsubscribe=$,this._next=ge?function(B){try{ge(B)}catch(ee){ne.error(ee)}}:super._next,this._error=ie?function(B){try{ie(B)}catch(ee){ne.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(B){ne.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(Je,Ee,N)=>{N.d(Ee,{U:()=>O});var h=N(4482),J=N(5403);function O(ue,ne){return(0,h.e)((ge,le)=>{let ie=0;ge.subscribe((0,J.x)(le,ce=>{le.next(ue.call(ne,ce,ie++))}))})}},8189:(Je,Ee,N)=>{N.d(Ee,{J:()=>O});var h=N(5577),J=N(4671);function O(ue=1/0){return(0,h.z)(J.y,ue)}},5577:(Je,Ee,N)=>{N.d(Ee,{z:()=>ie});var h=N(4004),J=N(8421),O=N(4482),ue=N(9672),ne=N(5403),le=N(576);function ie(ce,$,B=1/0){return(0,le.m)($)?ie((ee,He)=>(0,h.U)((Se,ke)=>$(ee,Se,He,ke))((0,J.Xf)(ce(ee,He))),B):("number"==typeof $&&(B=$),(0,O.e)((ee,He)=>function ge(ce,$,B,ee,He,Se,ke,Ve){const fe=[];let be=0,Ge=0,Ze=!1;const De=()=>{Ze&&!fe.length&&!be&&$.complete()},we=Be=>be<ee?Ie(Be):fe.push(Be),Ie=Be=>{Se&&$.next(Be),be++;let Ue=!1;(0,J.Xf)(B(Be,Ge++)).subscribe((0,ne.x)($,j=>{null==He||He(j),Se?we(j):$.next(j)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(be--;fe.length&&be<ee;){const j=fe.shift();ke?(0,ue.f)($,ke,()=>Ie(j)):Ie(j)}De()}catch(j){$.error(j)}}))};return ce.subscribe((0,ne.x)($,we,()=>{Ze=!0,De()})),()=>{null==Ve||Ve()}}(ee,He,ce,B)))}},5363:(Je,Ee,N)=>{N.d(Ee,{Q:()=>ue});var h=N(9672),J=N(4482),O=N(5403);function ue(ne,ge=0){return(0,J.e)((le,ie)=>{le.subscribe((0,O.x)(ie,ce=>(0,h.f)(ie,ne,()=>ie.next(ce),ge),()=>(0,h.f)(ie,ne,()=>ie.complete(),ge),ce=>(0,h.f)(ie,ne,()=>ie.error(ce),ge)))})}},3099:(Je,Ee,N)=>{N.d(Ee,{B:()=>ge});var h=N(8996),J=N(5698),O=N(7579),ue=N(2961),ne=N(4482);function ge(ie={}){const{connector:ce=(()=>new O.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:ee=!0}=ie;return He=>{let Se=null,ke=null,Ve=null,fe=0,be=!1,Ge=!1;const Ze=()=>{null==ke||ke.unsubscribe(),ke=null},De=()=>{Ze(),Se=Ve=null,be=Ge=!1},we=()=>{const Ie=Se;De(),null==Ie||Ie.unsubscribe()};return(0,ne.e)((Ie,Be)=>{fe++,!Ge&&!be&&Ze();const Ue=Ve=null!=Ve?Ve:ce();Be.add(()=>{fe--,0===fe&&!Ge&&!be&&(ke=le(we,ee))}),Ue.subscribe(Be),Se||(Se=new ue.Hp({next:j=>Ue.next(j),error:j=>{Ge=!0,Ze(),ke=le(De,$,j),Ue.error(j)},complete:()=>{be=!0,Ze(),ke=le(De,B),Ue.complete()}}),(0,h.D)(Ie).subscribe(Se))})(He)}}function le(ie,ce,...$){return!0===ce?(ie(),null):!1===ce?null:ce(...$).pipe((0,J.q)(1)).subscribe(()=>ie())}},9468:(Je,Ee,N)=>{N.d(Ee,{R:()=>J});var h=N(4482);function J(O,ue=0){return(0,h.e)((ne,ge)=>{ge.add(O.schedule(()=>ne.subscribe(ge),ue))})}},5698:(Je,Ee,N)=>{N.d(Ee,{q:()=>ue});var h=N(515),J=N(4482),O=N(5403);function ue(ne){return ne<=0?()=>h.E:(0,J.e)((ge,le)=>{let ie=0;ge.subscribe((0,O.x)(le,ce=>{++ie<=ne&&(le.next(ce),ne<=ie&&le.complete())}))})}},8505:(Je,Ee,N)=>{N.d(Ee,{b:()=>ne});var h=N(576),J=N(4482),O=N(5403),ue=N(4671);function ne(ge,le,ie){const ce=(0,h.m)(ge)||le||ie?{next:ge,error:le,complete:ie}:ge;return ce?(0,J.e)(($,B)=>{var ee;null===(ee=ce.subscribe)||void 0===ee||ee.call(ce);let He=!0;$.subscribe((0,O.x)(B,Se=>{var ke;null===(ke=ce.next)||void 0===ke||ke.call(ce,Se),B.next(Se)},()=>{var Se;He=!1,null===(Se=ce.complete)||void 0===Se||Se.call(ce),B.complete()},Se=>{var ke;He=!1,null===(ke=ce.error)||void 0===ke||ke.call(ce,Se),B.error(Se)},()=>{var Se,ke;He&&(null===(Se=ce.unsubscribe)||void 0===Se||Se.call(ce)),null===(ke=ce.finalize)||void 0===ke||ke.call(ce)}))}):ue.y}},4408:(Je,Ee,N)=>{N.d(Ee,{o:()=>ne});var h=N(727);class J extends h.w0{constructor(le,ie){super()}schedule(le,ie=0){return this}}const O={setInterval(ge,le,...ie){const{delegate:ce}=O;return(null==ce?void 0:ce.setInterval)?ce.setInterval(ge,le,...ie):setInterval(ge,le,...ie)},clearInterval(ge){const{delegate:le}=O;return((null==le?void 0:le.clearInterval)||clearInterval)(ge)},delegate:void 0};var ue=N(8737);class ne extends J{constructor(le,ie){super(le,ie),this.scheduler=le,this.work=ie,this.pending=!1}schedule(le,ie=0){if(this.closed)return this;this.state=le;const ce=this.id,$=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId($,ce,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId($,this.id,ie),this}requestAsyncId(le,ie,ce=0){return O.setInterval(le.flush.bind(le,this),ce)}recycleAsyncId(le,ie,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ie;O.clearInterval(ie)}execute(le,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(le,ie);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ie){let $,ce=!1;try{this.work(le)}catch(B){ce=!0,$=B||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:le,scheduler:ie}=this,{actions:ce}=ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ce,this),null!=le&&(this.id=this.recycleAsyncId(ie,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,Ee,N)=>{N.d(Ee,{v:()=>O});var h=N(6063);class J{constructor(ne,ge=J.now){this.schedulerActionCtor=ne,this.now=ge}schedule(ne,ge=0,le){return new this.schedulerActionCtor(this,ne).schedule(le,ge)}}J.now=h.l.now;class O extends J{constructor(ne,ge=J.now){super(ne,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:ge}=this;if(this._active)return void ge.push(ne);let le;this._active=!0;do{if(le=ne.execute(ne.state,ne.delay))break}while(ne=ge.shift());if(this._active=!1,le){for(;ne=ge.shift();)ne.unsubscribe();throw le}}}},4986:(Je,Ee,N)=>{N.d(Ee,{z:()=>O});var h=N(4408);const O=new(N(7565).v)(h.o)},6063:(Je,Ee,N)=>{N.d(Ee,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Je,Ee,N)=>{N.d(Ee,{z:()=>h});const h={setTimeout(J,O,...ue){const{delegate:ne}=h;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(J,O,...ue):setTimeout(J,O,...ue)},clearTimeout(J){const{delegate:O}=h;return((null==O?void 0:O.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(Je,Ee,N)=>{N.d(Ee,{h:()=>J});const J=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,Ee,N)=>{N.d(Ee,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,Ee,N)=>{N.d(Ee,{_6:()=>ge,jO:()=>ue,yG:()=>ne});var h=N(576);function O(le){return le[le.length-1]}function ue(le){return(0,h.m)(O(le))?le.pop():void 0}function ne(le){return function J(le){return le&&(0,h.m)(le.schedule)}(O(le))?le.pop():void 0}function ge(le,ie){return"number"==typeof O(le)?le.pop():ie}},8737:(Je,Ee,N)=>{function h(J,O){if(J){const ue=J.indexOf(O);0<=ue&&J.splice(ue,1)}}N.d(Ee,{P:()=>h})},3888:(Je,Ee,N)=>{function h(J){const ue=J(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}N.d(Ee,{d:()=>h})},2806:(Je,Ee,N)=>{N.d(Ee,{O:()=>ue,x:()=>O});var h=N(2416);let J=null;function O(ne){if(h.v.useDeprecatedSynchronousErrorHandling){const ge=!J;if(ge&&(J={errorThrown:!1,error:null}),ne(),ge){const{errorThrown:le,error:ie}=J;if(J=null,le)throw ie}}else ne()}function ue(ne){h.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ne)}},9672:(Je,Ee,N)=>{function h(J,O,ue,ne=0,ge=!1){const le=O.schedule(function(){ue(),ge?J.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(J.add(le),!ge)return le}N.d(Ee,{f:()=>h})},4671:(Je,Ee,N)=>{function h(J){return J}N.d(Ee,{y:()=>h})},1144:(Je,Ee,N)=>{N.d(Ee,{z:()=>h});const h=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Je,Ee,N)=>{N.d(Ee,{D:()=>J});var h=N(576);function J(O){return Symbol.asyncIterator&&(0,h.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(Je,Ee,N)=>{function h(J){return"function"==typeof J}N.d(Ee,{m:()=>h})},3670:(Je,Ee,N)=>{N.d(Ee,{c:()=>O});var h=N(8822),J=N(576);function O(ue){return(0,J.m)(ue[h.L])}},6495:(Je,Ee,N)=>{N.d(Ee,{T:()=>O});var h=N(2202),J=N(576);function O(ue){return(0,J.m)(null==ue?void 0:ue[h.h])}},8239:(Je,Ee,N)=>{N.d(Ee,{t:()=>J});var h=N(576);function J(O){return(0,h.m)(null==O?void 0:O.then)}},3260:(Je,Ee,N)=>{N.d(Ee,{L:()=>ue,Q:()=>O});var h=N(655),J=N(576);function O(ne){return(0,h.FC)(this,arguments,function*(){const le=ne.getReader();try{for(;;){const{value:ie,done:ce}=yield(0,h.qq)(le.read());if(ce)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ie)}}finally{le.releaseLock()}})}function ue(ne){return(0,J.m)(null==ne?void 0:ne.getReader)}},4482:(Je,Ee,N)=>{N.d(Ee,{A:()=>J,e:()=>O});var h=N(576);function J(ue){return(0,h.m)(null==ue?void 0:ue.lift)}function O(ue){return ne=>{if(J(ne))return ne.lift(function(ge){try{return ue(ge,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,Ee,N)=>{N.d(Ee,{h:()=>O});var h=N(2416),J=N(3410);function O(ue){J.z.setTimeout(()=>{const{onUnhandledError:ne}=h.v;if(!ne)throw ue;ne(ue)})}},4532:(Je,Ee,N)=>{function h(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Ee,{z:()=>h})},655:(Je,Ee,N)=>{function ue(W,re){var X={};for(var me in W)Object.prototype.hasOwnProperty.call(W,me)&&re.indexOf(me)<0&&(X[me]=W[me]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(me=Object.getOwnPropertySymbols(W);se<me.length;se++)re.indexOf(me[se])<0&&Object.prototype.propertyIsEnumerable.call(W,me[se])&&(X[me[se]]=W[me[se]])}return X}function ie(W,re,X,me){return new(X||(X=Promise))(function(Re,at){function jt(Yt){try{We(me.next(Yt))}catch(mn){at(mn)}}function Vt(Yt){try{We(me.throw(Yt))}catch(mn){at(mn)}}function We(Yt){Yt.done?Re(Yt.value):function se(Re){return Re instanceof X?Re:new X(function(at){at(Re)})}(Yt.value).then(jt,Vt)}We((me=me.apply(W,re||[])).next())})}function fe(W){return this instanceof fe?(this.v=W,this):new fe(W)}function be(W,re,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,me=X.apply(W,re||[]),Re=[];return se={},at("next"),at("throw"),at("return"),se[Symbol.asyncIterator]=function(){return this},se;function at(en){me[en]&&(se[en]=function(Wt){return new Promise(function(vr,Gt){Re.push([en,Wt,vr,Gt])>1||jt(en,Wt)})})}function jt(en,Wt){try{!function Vt(en){en.value instanceof fe?Promise.resolve(en.value.v).then(We,Yt):mn(Re[0][2],en)}(me[en](Wt))}catch(vr){mn(Re[0][3],vr)}}function We(en){jt("next",en)}function Yt(en){jt("throw",en)}function mn(en,Wt){en(Wt),Re.shift(),Re.length&&jt(Re[0][0],Re[0][1])}}function Ze(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,re=W[Symbol.asyncIterator];return re?re.call(W):(W=function ee(W){var re="function"==typeof Symbol&&Symbol.iterator,X=re&&W[re],me=0;if(X)return X.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&me>=W.length&&(W=void 0),{value:W&&W[me++],done:!W}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),X={},me("next"),me("throw"),me("return"),X[Symbol.asyncIterator]=function(){return this},X);function me(Re){X[Re]=W[Re]&&function(at){return new Promise(function(jt,Vt){!function se(Re,at,jt,Vt){Promise.resolve(Vt).then(function(We){Re({value:We,done:jt})},at)}(jt,Vt,(at=W[Re](at)).done,at.value)})}}}N.d(Ee,{FC:()=>be,KL:()=>Ze,_T:()=>ue,mG:()=>ie,qq:()=>fe})},5e3:(Je,Ee,N)=>{N.d(Ee,{$8M:()=>lo,$Z:()=>Xg,AFp:()=>xv,ALo:()=>ch,AaK:()=>ie,AsE:()=>um,BQk:()=>Kl,CHM:()=>No,CRH:()=>UE,CZH:()=>Mv,CqO:()=>Sf,EJc:()=>Pm,EpF:()=>Af,F$t:()=>Ow,F4k:()=>gn,FYo:()=>av,FiY:()=>mr,G48:()=>Bv,GfV:()=>nc,Gpc:()=>B,Hsn:()=>Pw,JOm:()=>R,LFG:()=>tt,LSH:()=>Ta,Lbi:()=>dc,MAs:()=>kd,NdJ:()=>k_,O4$:()=>Uc,OlP:()=>pn,Oqu:()=>Ff,PXZ:()=>aI,Q6J:()=>x_,QGY:()=>tm,Qsj:()=>bm,R0b:()=>Gs,RDi:()=>ll,Rgc:()=>hh,SBq:()=>Zf,Sil:()=>Vm,Suo:()=>VE,TTD:()=>xi,TgZ:()=>Ld,VKq:()=>Zn,VLi:()=>iD,W1O:()=>vv,WLB:()=>zt,X6Q:()=>hI,XFs:()=>ft,Xpm:()=>dt,Y36:()=>vo,YKP:()=>bE,YNc:()=>E_,Yjl:()=>aa,Yz7:()=>Wt,ZZ4:()=>Zv,_Bn:()=>Im,_UZ:()=>em,_Vd:()=>sh,_c5:()=>gD,_uU:()=>H_,aQg:()=>Ym,c2e:()=>tD,cJS:()=>Gt,cg1:()=>Y_,dDg:()=>tl,deG:()=>Nh,dqk:()=>Ut,eFA:()=>vh,ekj:()=>L_,g9A:()=>yh,h0i:()=>Gu,hGG:()=>mD,iGM:()=>oc,ifc:()=>$t,ip1:()=>Yu,kL8:()=>eE,kcU:()=>Lp,lG2:()=>qa,lcZ:()=>Xf,n5z:()=>Pn,n_E:()=>zu,oAB:()=>Er,oxw:()=>Nw,q4F:()=>Hu,qLn:()=>yd,qOj:()=>m_,qZA:()=>Yo,sBO:()=>pI,sIi:()=>ql,s_b:()=>Wu,soG:()=>sp,tBr:()=>vi,tb:()=>Qu,tp0:()=>Ls,uIk:()=>vf,vHH:()=>ke,vpe:()=>na,wAp:()=>mt,xp6:()=>cb,ynx:()=>Bs,z2F:()=>lp,zSh:()=>mo,zs3:()=>yo});var h=N(7579),J=N(727),O=N(8306),ue=N(6451),ne=N(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ie(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ie).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ge({__forward_ref__:ge});function B(i){return i.__forward_ref__=B,i.toString=function(){return ie(this())},i}function ee(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}class ke extends Error{constructor(s,a){super(function Ve(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function we(i,s){const a=s?` in ${s}`:"";throw new ke(-201,`No provider for ${be(i)} found${a}`)}function Vt(i,s){null==i&&function We(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Wt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Gt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pt(i){return Wi(i,Ci)||Wi(i,Kr)}function Wi(i,s){return i.hasOwnProperty(s)?i[s]:null}function wr(i){return i&&(i.hasOwnProperty(vs)||i.hasOwnProperty(di))?i[vs]:null}const Ci=ge({\u0275prov:ge}),vs=ge({\u0275inj:ge}),Kr=ge({ngInjectableDef:ge}),di=ge({ngInjectorDef:ge});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Yr;function yn(i){const s=Yr;return Yr=i,s}function zs(i,s,a){const l=Pt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==s?s:void we(ie(i),"Injector")}function Bn(i){return{toString:i}.toString()}var En=(()=>((En=En||{})[En.OnPush=0]="OnPush",En[En.Default=1]="Default",En))(),$t=(()=>{return(i=$t||($t={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",$t;var i})();const rt="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,ur="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ut=rt||"undefined"!=typeof global&&global||gt||ur,cr={},L=[],G=ge({\u0275cmp:ge}),q=ge({\u0275dir:ge}),Ce=ge({\u0275pipe:ge}),H=ge({\u0275mod:ge}),Q=ge({\u0275fac:ge}),Me=ge({__NG_ELEMENT_ID__:ge});let Ye=0;function dt(i){return Bn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||$t.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Ye++,l.inputs=oa(i.inputs,a),l.outputs=oa(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(sn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(yt):null,l})}function sn(i){return kn(i)||function Ir(i){return i[q]||null}(i)}function yt(i){return function Zi(i){return i[Ce]||null}(i)}const xn={};function Er(i){return Bn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(xn[i.id]=i.type),s})}function oa(i,s){if(null==i)return cr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const qa=dt;function aa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function kn(i){return i[G]||null}function Rn(i,s){const a=i[H]||null;if(!a&&!0===s)throw new Error(`Type ${ie(i)} does not have '\u0275mod' property.`);return a}function Vr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ai(i){return Array.isArray(i)&&!0===i[1]}function Za(i){return 0!=(8&i.flags)}function Ic(i){return 2==(2&i.flags)}function Si(i){return 1==(1&i.flags)}function Mi(i){return null!==i.template}function sl(i){return 0!=(512&i[2])}function hr(i,s){return i.hasOwnProperty(Q)?i[Q]:null}class Ys{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function xi(){return Ao}function Ao(i){return i.type.prototype.ngOnChanges&&(i.setInput=xh),kc}function kc(){const i=Qs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===cr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function xh(i,s,a,l){const c=Qs(i)||function So(i,s){return i[Ya]=s}(i,{previous:cr,current:null}),p=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],I=_[w];p[w]=new Ys(I&&I.currentValue,s,_===cr),i[l]=s}xi.ngInherit=!0;const Ya="__ngSimpleChanges__";function Qs(i){return i[Ya]||null}let xo;function ll(i){xo=i}function nn(i){return!!i.listen}const ha={createRenderer:(i,s)=>function ki(){return void 0!==xo?xo:"undefined"!=typeof document?document:void 0}()};function Zt(i){for(;Array.isArray(i);)i=i[0];return i}function Ds(i,s){return Zt(s[i])}function Yn(i,s){return Zt(s[i.index])}function cn(i,s){return i.data[s]}function Ri(i,s){return i[s]}function Qn(i,s){const a=s[i];return Vr(a)?a:a[0]}function Xs(i){return 4==(4&i[2])}function Yi(i){return 128==(128&i[2])}function pi(i,s){return null==s?null:i[s]}function Ni(i){i[18]=0}function ko(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const pt={lFrame:Oo(null),bindingsEnabled:!0};function Xa(){return pt.bindingsEnabled}function Ae(){return pt.lFrame.lView}function Ft(){return pt.lFrame.tView}function No(i){return pt.lFrame.contextLView=i,i[8]}function un(){let i=eu();for(;null!==i&&64===i.type;)i=i.parent;return i}function eu(){return pt.lFrame.currentTNode}function ti(i,s){const a=pt.lFrame;a.currentTNode=i,a.isParent=s}function pl(){return pt.lFrame.isParent}function gl(){pt.lFrame.isParent=!1}function fr(){const i=pt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function As(){return pt.lFrame.bindingIndex++}function gi(i){const s=pt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function ru(i,s){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ma(s)}function ma(i){pt.lFrame.currentDirectiveIndex=i}function su(){return pt.lFrame.currentQueryIndex}function Pc(i){pt.lFrame.currentQueryIndex=i}function Fc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ou(i,s,a){if(a&ft.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ft.Host||(c=Fc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=pt.lFrame=Lc();return l.currentTNode=s,l.lView=i,!0}function to(i){const s=Lc(),a=i[1];pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Lc(){const i=pt.lFrame,s=null===i?null:i.child;return null===s?Oo(i):s}function Oo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Vc(){const i=pt.lFrame;return pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const au=Vc;function Ur(){const i=Vc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function $n(){return pt.lFrame.selectedIndex}function no(i){pt.lFrame.selectedIndex=i}function bn(){const i=pt.lFrame;return cn(i.tView,i.selectedIndex)}function Uc(){pt.lFrame.currentNamespace="svg"}function Lp(){!function Bc(){pt.lFrame.currentNamespace=null}()}function ya(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),S&&((i.viewHooks||(i.viewHooks=[])).push(a,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,S)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ji(i,s,a){jc(i,s,3,a)}function ro(i,s,a,l){(3&i[2])===a&&jc(i,s,a,l)}function Nn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function jc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=l&&w>=l)break}else s[I]<0&&(i[18]+=65536),(w<p||-1==p)&&(Up(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Up(i,s,a,l){const c=a[l]<0,p=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Po{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Dr(i,s,a){const l=nn(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],w=a[c++],I=a[c++];l?i.setAttribute(s,w,I,_):s.setAttributeNS(_,w,I)}else{const _=p,w=a[++c];On(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function mi(i){return 3===i||4===i||6===i}function On(i){return 64===i.charCodeAt(0)}function va(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||$c(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function $c(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function Fo(i){return-1!==i}function Ss(i){return 32767&i}function Ms(i,s){let a=function vn(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Oi=!0;function wt(i){const s=Oi;return Oi=i,s}let El=0;function xs(i,s){const a=so(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Lo(l.data,i),Lo(s,null),Lo(l.blueprint,null));const c=Xn(i,s),p=i.injectorIndex;if(Fo(c)){const _=Ss(c),w=Ms(c,s),I=w[1].data;for(let S=0;S<8;S++)s[p+S]=w[_+S]|I[_+S]}return s[p+8]=c,p}function Lo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function so(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Xn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function oo(i,s,a){!function Jn(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Me)&&(l=a[Me]),null==l&&(l=a[Me]=El++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Vo(i,s,a){if(a&ft.Optional)return i;we(s,"NodeInjector")}function ks(i,s,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const c=i[9],p=yn(void 0);try{return c?c.get(s,l,a&ft.Optional):zs(s,l,a&ft.Optional)}finally{yn(p)}}return Vo(l,s,a)}function Uo(i,s,a,l=ft.Default,c){if(null!==i){const p=function uo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Me)?i[Me]:void 0;return"number"==typeof s?s>=0?255&s:Bo:s}(a);if("function"==typeof p){if(!ou(s,i,l))return l&ft.Host?Vo(c,a,l):ks(s,a,l,c);try{const _=p(l);if(null!=_||l&ft.Optional)return _;we(a)}finally{au()}}else if("number"==typeof p){let _=null,w=so(i,s),I=-1,S=l&ft.Host?s[16][6]:null;for((-1===w||l&ft.SkipSelf)&&(I=-1===w?Xn(i,s):s[w+8],-1!==I&&bl(l,!1)?(_=s[1],w=Ss(I),s=Ms(I,s)):w=-1);-1!==w;){const M=s[1];if(er(p,w,M.data)){const P=Il(w,s,a,_,l,S);if(P!==Rs)return P}I=s[w+8],-1!==I&&bl(l,s[1].data[w+8]===S)&&er(p,w,s)?(_=M,w=Ss(I),s=Ms(I,s)):w=-1}}}return ks(s,a,l,c)}const Rs={};function Bo(){return new Ns(un(),Ae())}function Il(i,s,a,l,c,p){const _=s[1],w=_.data[i+8],M=wa(w,_,a,null==l?Ic(w)&&Oi:l!=_&&0!=(3&w.type),c&ft.Host&&p===w);return null!==M?es(s,_,M,w):Rs}function wa(i,s,a,l,c){const p=i.providerIndexes,_=s.data,w=1048575&p,I=i.directiveStart,M=p>>20,U=c?w+M:i.directiveEnd;for(let Y=l?w:w+M;Y<U;Y++){const ye=_[Y];if(Y<I&&a===ye||Y>=I&&ye.type===a)return Y}if(c){const Y=_[I];if(Y&&Mi(Y)&&Y.type===a)return I}return null}function es(i,s,a,l){let c=i[a];const p=s.data;if(function uu(i){return i instanceof Po}(c)){const _=c;_.resolving&&function Ge(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ke(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(p[a]));const w=wt(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?yn(_.injectImpl):null;ou(i,l,ft.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function ly(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=Ao(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&yn(I),wt(w),_.resolving=!1,au()}}return c}function er(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function bl(i,s){return!(i&ft.Self||i&ft.Host&&s)}class Ns{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Uo(this._tNode,this._lView,s,l,a)}}function Pn(i){return Bn(()=>{const s=i.prototype.constructor,a=s[Q]||ts(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Q]||ts(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function ts(i){return He(i)?()=>{const s=ts(ee(i));return s&&s()}:hr(i)}function lo(i){return function ao(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(mi(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(un(),i)}const Pi="__parameters__";function yi(i,s,a){return Bn(()=>{const l=function Cn(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return w.annotation=_,w;function w(I,S,M){const P=I.hasOwnProperty(Pi)?I[Pi]:Object.defineProperty(I,Pi,{value:[]})[Pi];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Wt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nh=new pn("AnalyzeForEntryComponents");function Tr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Tr(l,s)):s!==i&&s.push(l)}return s}function Ar(i,s){i.forEach(a=>Array.isArray(a)?Ar(a,s):s(a))}function Ia(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function $o(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function is(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}function pr(i,s,a){let l=qo(i,s);return l>=0?i[1|l]=a:(l=~l,function Ho(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function ba(i,s){const a=qo(i,s);if(a>=0)return i[1|a]}function qo(i,s){return function os(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const Fs={},zo="__NG_DI_FLAG__",Ca="ngTempTokenPath",D=/\n/gm,F="__source",K=ge({provide:String,useValue:ge});let te;function pe(i){const s=te;return te=i,s}function Ke(i,s=ft.Default){if(void 0===te)throw new ke(203,"");return null===te?zs(i,void 0,s):te.get(i,s&ft.Optional?null:void 0,s)}function tt(i,s=ft.Default){return(function hn(){return Yr}()||Ke)(ee(i),s)}const Ht=tt;function Et(i){const s=[];for(let a=0;a<i.length;a++){const l=ee(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let c,p=ft.Default;for(let _=0;_<l.length;_++){const w=l[_],I=Hn(w);"number"==typeof I?-1===I?c=w.token:p|=I:c=w}s.push(tt(c,p))}else s.push(tt(l))}return s}function Tn(i,s){return i[zo]=s,i.prototype[zo]=s,i}function Hn(i){return i[zo]}const vi=Tn(yi("Inject",i=>({token:i})),-1),mr=Tn(yi("Optional"),8),Ls=Tn(yi("SkipSelf"),4);class id{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wi(i){return i instanceof id?i.changingThisBreaksApplicationSecurity:i}const gy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Da=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var An=(()=>((An=An||{})[An.NONE=0]="NONE",An[An.HTML=1]="HTML",An[An.STYLE=2]="STYLE",An[An.SCRIPT=3]="SCRIPT",An[An.URL=4]="URL",An[An.RESOURCE_URL=5]="RESOURCE_URL",An))();function Ta(i){const s=function Eu(){const i=Ae();return i&&i[12]}();return s?s.sanitize(An.URL,i)||"":function fo(i,s){const a=function Rl(i){return i instanceof id&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?wi(i):function Nl(i){return(i=String(i)).match(gy)||i.match(Da)?i:"unsafe:"+i}(fe(i))}const pd="__ngContext__";function nr(i,s){i[pd]=s}function Wh(i){const s=function Iu(i){return i[pd]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function md(i){return i.ngOriginalError}function Ty(i,...s){i.error(...s)}class yd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Dy(i){return i&&i.ngErrorLogger||Ty}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&md(s);for(;a&&md(a);)a=md(a);return a||null}}const Jh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ut))();function y(i){return i instanceof Function?i():i}var R=(()=>((R=R||{})[R.Important=1]="Important",R[R.DashCase=2]="DashCase",R))();function de(i,s){return undefined(i,s)}function ct(i){const s=i[3];return Ai(s)?s[3]:s}function si(i){return Xh(i[13])}function bu(i){return Xh(i[4])}function Xh(i){for(;null!==i&&!Ai(i);)i=i[4];return i}function Ma(i,s,a,l,c){if(null!=l){let p,_=!1;Ai(l)?p=l:Vr(l)&&(_=!0,l=l[0]);const w=Zt(l);0===i&&null!==a?null==c?I0(s,a,w):Tu(s,a,w,c||null,!0):1===i&&null!==a?Tu(s,a,w,c||null,!0):2===i?function M0(i,s,a){const l=hg(i,s);l&&function C0(i,s,a,l){nn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=p&&function ib(i,s,a,l,c){const p=a[7];p!==Zt(a)&&Ma(s,i,l,p,c);for(let w=10;w<a.length;w++){const I=a[w];rf(I[1],I,i,s,l,p)}}(s,i,p,a,c)}}function Sr(i,s,a){if(nn(i))return i.createElement(s,a);{const l=null!==a?function ul(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function v0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,ko(c,-1)),a.splice(l,1)}function cg(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&v0(c,l),s>0&&(i[a-1][4]=l[4]);const p=$o(i,10+s);!function ef(i,s){rf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function w0(i,s){if(!(256&s[2])){const a=s[11];nn(a)&&a.destroyNode&&rf(i,s,a,3,null,null),function $l(i){let s=i[13];if(!s)return dg(i[1],i);for(;s;){let a=null;if(Vr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Vr(s)&&dg(s[1],s),s=s[3];null===s&&(s=i),Vr(s)&&dg(s[1],s),a=s&&s[4]}s=a}}(s)}}function dg(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function My(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Po)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=c[p[_]],I=p[_+1];try{I.call(w)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function E0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(s):Zt(s[_]),I=l[c=a[p+2]],S=a[p+3];"boolean"==typeof S?w.removeEventListener(a[p],I,S):S>=0?l[c=S]():l[c=-S].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&nn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Ai(s[3])){a!==s[3]&&v0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function tb(i,s,a){return function Du(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===$t.None||c===$t.Emulated)return null}return Yn(l,a)}(i,s.parent,a)}function Tu(i,s,a,l,c){nn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function I0(i,s,a){nn(i)?i.appendChild(s,a):s.appendChild(a)}function b0(i,s,a,l,c){null!==l?Tu(i,s,a,l,c):I0(i,s,a)}function hg(i,s){return nn(i)?i.parentNode(s):s.parentNode}function D0(i,s,a){return T0(i,s,a)}let T0=function xy(i,s,a){return 40&i.type?Yn(i,a):null};function vd(i,s,a,l){const c=tb(i,l,s),p=s[11],w=D0(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)b0(p,c,a[I],w,!1);else b0(p,c,a,w,!1)}function fg(i,s){if(null!==s){const a=s.type;if(3&a)return Yn(s,i);if(4&a)return pg(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return fg(i,l);{const c=i[s.index];return Ai(c)?pg(-1,c):Zt(c)}}if(32&a)return de(s,i)()||Zt(i[s.index]);{const l=S0(i,s);return null!==l?Array.isArray(l)?l[0]:fg(ct(i[16]),l):fg(i,s.next)}}return null}function S0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function pg(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return fg(l,c)}return s[7]}function x0(i,s,a,l,c,p,_){for(;null!=a;){const w=l[a.index],I=a.type;if(_&&0===s&&(w&&nr(Zt(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)x0(i,s,a.child,l,c,p,!1),Ma(s,i,c,w,p);else if(32&I){const S=de(a,l);let M;for(;M=S();)Ma(s,i,c,M,p);Ma(s,i,c,w,p)}else 16&I?ve(i,s,l,a,c,p):Ma(s,i,c,w,p);a=_?a.projectionNext:a.next}}function rf(i,s,a,l,c,p){x0(a,l,i.firstChild,s,c,p,!1)}function ve(i,s,a,l,c,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)Ma(s,i,c,I[S],p);else x0(i,s,I,_[3],c,p,!0)}function k0(i,s,a){nn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Ry(i,s,a){nn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function R0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const Ny="ng-template";function Oy(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==R0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function yr(i){return 4===i.type&&i.value!==Ny}function go(i,s,a){return s===(4!==i.type||a?i.value:Ny)}function N0(i,s,a){let l=4;const c=i.attrs||[],p=function Py(i){for(let s=0;s<i.length;s++)if(mi(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!go(i,I,a)||""===I&&1===s.length){if(Bi(l))return!1;_=!0}}else{const S=8&l?I:s[++w];if(8&l&&null!==i.attrs){if(!Oy(i.attrs,S,a)){if(Bi(l))return!1;_=!0}continue}const P=ob(8&l?"class":I,c,yr(i),a);if(-1===P){if(Bi(l))return!1;_=!0;continue}if(""!==S){let U;U=P>p?"":c[P+1].toLowerCase();const Y=8&l?U:null;if(Y&&-1!==R0(Y,S,0)||2&l&&S!==U){if(Bi(l))return!1;_=!0}}}}else{if(!_&&!Bi(l)&&!Bi(I))return!1;if(_&&Bi(I))continue;_=!1,l=I|1&l}}return Bi(l)||_}function Bi(i){return 0==(1&i)}function ob(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function ZT(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function ab(i,s,a=!1){for(let l=0;l<s.length;l++)if(N0(i,s[l],a))return!0;return!1}function KT(i,s){e:for(let a=0;a<s.length;a++){const l=s[a];if(i.length===l.length){for(let c=0;c<i.length;c++)if(i[c]!==l[c])continue e;return!0}}return!1}function O0(i,s){return i?":not("+s.trim()+")":s}function lb(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!Bi(_)&&(s+=O0(p,c),c=""),l=_,p=p||!Bi(l);a++}return""!==c&&(s+=O0(p,c)),s}const Mt={};function cb(i){db(Ft(),Ae(),$n()+i,!1)}function db(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ji(s,p,a)}else{const p=i.preOrderHooks;null!==p&&ro(s,p,0,a)}no(a)}function Fy(i,s){return i<<17|s<<2}function Ko(i){return i>>17&32767}function Lt(i){return 2|i}function oi(i){return(131068&i)>>2}function yg(i,s){return-131069&i|s<<2}function Ly(i){return 1|i}function Wy(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Pc(c),_.contentQueries(2,s[p],p)}}}function uf(i,s,a,l,c,p,_,w,I,S){const M=s.blueprint.slice();return M[0]=c,M[2]=140|l,Ni(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=w||i&&i[11],M[12]=I||i&&i[12]||null,M[9]=S||i&&i[9]||null,M[6]=p,M[16]=2==s.type?i[16]:M,M}function Ed(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Ky(i,s,a,l,c){const p=eu(),_=pl(),I=i.data[s]=function Eb(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,l,c),function yl(){return pt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function eo(){const i=pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ti(p,!0),p}function xa(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Hl(i,s,a){to(s);try{const l=i.viewQuery;null!==l&&Rg(1,l,a);const c=i.template;null!==c&&Qy(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Wy(i,s),i.staticViewQueries&&Rg(2,i.viewQuery,a);const p=i.components;null!==p&&function Zy(i,s){for(let a=0;a<s.length;a++)fA(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Ur()}}function xu(i,s,a,l){const c=s[2];if(256!=(256&c)){to(s);try{Ni(s),function tu(i){return pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Qy(i,s,a,2,l);const _=3==(3&c);if(_){const S=i.preOrderCheckHooks;null!==S&&Ji(s,S,null)}else{const S=i.preOrderHooks;null!==S&&ro(s,S,0,null),Nn(s,0)}if(function Ab(i){for(let s=si(i);null!==s;s=bu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&ko(p,1),c[2]|=1024}}}(s),function hA(i){for(let s=si(i);null!==s;s=bu(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Yi(l)&&xu(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&Wy(i,s),_){const S=i.contentCheckHooks;null!==S&&Ji(s,S)}else{const S=i.contentHooks;null!==S&&ro(s,S,1),Nn(s,1)}!function zy(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)no(~c);else{const p=c,_=a[++l],w=a[++l];ru(_,p),w(2,s[p])}}}finally{no(-1)}}(i,s);const w=i.components;null!==w&&function U0(i,s){for(let a=0;a<s.length;a++)Sb(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&Rg(2,I,l),_){const S=i.viewCheckHooks;null!==S&&Ji(s,S)}else{const S=i.viewHooks;null!==S&&ro(s,S,2),Nn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,ko(s[3],-1))}finally{Ur()}}}function Yy(i,s,a,l){const c=s[10],_=Xs(s);try{!_&&c.begin&&c.begin(),_&&Hl(i,s,l),xu(i,s,a,l)}finally{!_&&c.end&&c.end()}}function Qy(i,s,a,l,c){const p=$n(),_=2&l;try{no(-1),_&&s.length>20&&db(i,s,20,!1),a(l,c)}finally{no(p)}}function B0(i,s,a){if(Za(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function Ag(i,s,a){!Xa()||(function uA(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||xs(a,s),nr(l,s);const _=a.initialInputs;for(let w=c;w<p;w++){const I=i.data[w],S=Mi(I);S&&Q0(s,a,I);const M=es(s,i,w,a);nr(M,s),null!==_&&dA(0,w-c,M,I,0,_),S&&(Qn(a.index,s)[8]=M)}}(i,s,a,Yn(a,s)),128==(128&a.flags)&&function Cb(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function _l(){return pt.lFrame.currentDirectiveIndex}();try{no(_);for(let I=l;I<c;I++){const S=i.data[I],M=s[I];ma(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Db(S,M)}}finally{no(-1),ma(w)}}(i,s,a))}function Id(i,s,a=Yn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function j0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Sg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Sg(i,s,a,l,c,p,_,w,I,S){const M=20+l,P=M+c,U=function wb(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Mt);return a}(M,P),Y="function"==typeof S?S():S;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function G0(i,s,a,l){const c=r_(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&i_(i).push(l,c.length-1))}function q0(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function xg(i,s,a,l){let c=!1;if(Xa()){const p=function lA(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];ab(a,_.selectors,!1)&&(c||(c=[]),oo(xs(a,s),i,_.type),Mi(_)?(kg(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,e_(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const P=p[M];P.providersResolver&&P.providersResolver(P)}let w=!1,I=!1,S=xa(i,s,p.length,null);for(let M=0;M<p.length;M++){const P=p[M];a.mergedAttrs=va(a.mergedAttrs,P.hostAttrs),Y0(i,a,s,S,P),Tb(S,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),S++}!function Ib(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let w=null,I=null;for(let S=s.directiveStart;S<l;S++){const M=c[S],P=M.inputs,U=null===p||yr(s)?null:t_(P,p);_.push(U),w=q0(P,S,w),I=q0(M.outputs,S,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=I}(i,a)}_&&function cA(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new ke(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=va(a.mergedAttrs,a.attrs),c}function Xy(i,s,a,l,c,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function K0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,c,_)}}function Db(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function kg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Tb(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Mi(s)&&(a[""]=i)}}function e_(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Y0(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=hr(c.type)),_=new Po(p,Mi(c),null);i.blueprint[l]=_,a[l]=_,Xy(i,s,0,l,xa(i,a,c.hostVars,Mt),c)}function Q0(i,s,a){const l=Yn(s,i),c=j0(a),p=i[10],_=n_(i,uf(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function Us(i,s,a,l,c,p){const _=Yn(i,s);!function lf(i,s,a,l,c,p,_){if(null==p)nn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?fe(p):_(p,l||"",c);nn(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,p,i.value,a,l,c)}function dA(i,s,a,l,c,p){const _=p[s];if(null!==_){const w=l.setInput;for(let I=0;I<_.length;){const S=_[I++],M=_[I++],P=_[I++];null!==w?l.setInput(a,P,S,M):a[M]=P}}}function t_(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function J0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Sb(i,s){const a=Qn(s,i);if(Yi(a)){const l=a[1];80&a[2]?xu(l,a,l.template,a[8]):a[5]>0&&X0(a)}}function X0(i){for(let l=si(i);null!==l;l=bu(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];xu(_,p,_.template,p[8])}else p[5]>0&&X0(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Qn(a[l],i);Yi(c)&&c[5]>0&&X0(c)}}function fA(i,s){const a=Qn(s,i),l=a[1];(function Mb(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Hl(l,a,a[8])}function n_(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function ew(i){for(;i;){i[2]|=64;const s=ct(i);if(sl(i)&&!s)return i;i=s}return null}function cf(i){!function tw(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Wh(a),c=l[1];Yy(c,l,c.template,a)}}(i[8])}function Rg(i,s,a){Pc(0),s(i,a)}const rw=(()=>Promise.resolve(null))();function r_(i){return i[7]||(i[7]=[])}function i_(i){return i.cleanup||(i.cleanup=[])}function df(i,s){const a=i[9],l=a?a.get(yd,null):null;l&&l.handleError(s)}function iw(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],I=s[_],S=i.data[_];null!==S.setInput?S.setInput(I,c,l,w):I[w]=c}}function ka(i,s,a){const l=Ds(s,i);!function _d(i,s,a){nn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function bd(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?p=w:1==p?c=ce(c,w):2==p&&(l=ce(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const o_=new pn("INJECTOR",-1);class sw{get(s,a=Fs){if(a===Fs){const l=new Error(`NullInjectorError: No provider for ${ie(s)}!`);throw l.name="NullInjectorError",l}return a}}const mo=new pn("Set Injector scope."),Xe={},a_={};let Ct;function hf(){return void 0===Ct&&(Ct=new sw),Ct}function Ng(i,s=null,a=null,l){const c=Cd(i,s,a,l);return c._resolveInjectorDefTypes(),c}function Cd(i,s=null,a=null,l){return new Ob(i,a,s||hf(),l)}class Ob{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Ar(a,w=>this.processProvider(w,s,a)),Ar([s],w=>this.processInjectorType(w,[],p)),this.records.set(o_,Fn(void 0,this));const _=this.records.get(mo);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ie(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Fs,l=ft.Default){this.assertNotDestroyed();const c=pe(this),p=yn(void 0);try{if(!(l&ft.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function Vb(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&Pt(s);w=I&&this.injectableDefInScope(I)?Fn(ff(s),Xe):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&ft.Self?hf():this.parent).get(s,a=l&ft.Optional&&a===Fs?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Ca]=_[Ca]||[]).unshift(ie(s)),c)throw _;return function as(i,s,a,l){const c=i[Ca];throw s[F]&&c.unshift(s[F]),i.message=function Li(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ie(s);if(Array.isArray(s))c=s.map(ie).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):ie(w)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Ca]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{yn(p),pe(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ie(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(s,a,l){if(!(s=ee(s)))return!1;let c=wr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,w=-1!==l.indexOf(_);if(void 0!==p&&(c=wr(p)),null==c)return!1;if(null!=c.imports&&!w){let M;l.push(_);try{Ar(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===M&&(M=[]),M.push(P))})}finally{}if(void 0!==M)for(let P=0;P<M.length;P++){const{ngModule:U,providers:Y}=M[P];Ar(Y,ye=>this.processProvider(ye,U,Y||L))}}this.injectorDefTypes.add(_);const I=hr(_)||(()=>new _);this.records.set(_,Fn(I,Xe));const S=c.providers;if(null!=S&&!w){const M=s;Ar(S,P=>this.processProvider(P,M,S))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=Dd(s=ee(s))?s:ee(s&&s.provide);const p=function Fb(i,s,a){return pf(i)?Fn(void 0,i.useValue):Fn(ow(i),Xe)}(s);if(Dd(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Fn(void 0,Xe,!0),_.factory=()=>Et(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===Xe&&(a.value=a_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function uw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ee(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function ff(i){const s=Pt(i),a=null!==s?s.factory:hr(i);if(null!==a)return a;if(i instanceof pn)throw new ke(204,!1);if(i instanceof Function)return function Pb(i){const s=i.length;if(s>0)throw is(s,"?"),new ke(204,!1);const a=function Zr(i){const s=i&&(i[Ci]||i[Kr]);if(s){const a=function ar(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ke(204,!1)}function ow(i,s,a){let l;if(Dd(i)){const c=ee(i);return hr(c)||ff(c)}if(pf(i))l=()=>ee(i.useValue);else if(function ku(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Et(i.deps||[]));else if(function Gr(i){return!(!i||!i.useExisting)}(i))l=()=>tt(ee(i.useExisting));else{const c=ee(i&&(i.useClass||i.provide));if(!function aw(i){return!!i.deps}(i))return hr(c)||ff(c);l=()=>new c(...Et(i.deps))}return l}function Fn(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function pf(i){return null!==i&&"object"==typeof i&&K in i}function Dd(i){return"function"==typeof i}let yo=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Ng({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return Ng({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Fs,i.NULL=new sw,i.\u0275prov=Wt({token:i,providedIn:"any",factory:()=>tt(o_)}),i.__NG_ELEMENT_ID__=-1,i})();function g_(i,s){ya(Wh(i)[1],un())}function m_(i){let s=function mw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Mi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ke(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Gl(i.inputs),_.declaredInputs=Gl(i.declaredInputs),_.outputs=Gl(i.outputs);const w=c.hostBindings;w&&Gb(i,w);const I=c.viewQuery,S=c.contentQueries;if(I&&Hb(i,I),S&&_f(i,S),le(i.inputs,c.inputs),le(i.declaredInputs,c.declaredInputs),le(i.outputs,c.outputs),Mi(c)&&c.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===m_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function ui(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=va(c.hostAttrs,a=va(a,c.hostAttrs))}}(l)}function Gl(i){return i===cr?{}:i===L?[]:i}function Hb(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function _f(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function Gb(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Td=null;function Ru(){if(!Td){const i=Ut.Symbol;if(i&&i.iterator)Td=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Td=l)}}}return Td}function ql(i){return!!__(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ru()in i)}function __(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function _o(i,s,a){return i[s]=a}function Mr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Nu(i,s,a,l){const c=Mr(i,s,a);return Mr(i,s+1,l)||c}function vf(i,s,a,l){const c=Ae();return Mr(c,As(),s)&&(Ft(),Us(bn(),c,i,s,a,l)),vf}function Ln(i,s,a,l,c,p){const w=Nu(i,function ni(){return pt.lFrame.bindingIndex}(),a,c);return gi(2),w?s+fe(a)+l+fe(c)+p:Mt}function E_(i,s,a,l,c,p,_,w){const I=Ae(),S=Ft(),M=i+20,P=S.firstCreatePass?function w_(i,s,a,l,c,p,_,w,I){const S=s.consts,M=Ed(s,i,4,_||null,pi(S,w));xg(s,a,M,pi(S,I)),ya(s,M);const P=M.tViews=Sg(2,M,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,S,I,s,a,l,c,p,_):S.data[M];ti(P,!1);const U=I[11].createComment("");vd(S,I,U,P),nr(U,I),n_(I,I[M]=J0(U,I,U,P)),Si(P)&&Ag(S,I,P),null!=_&&Id(I,P,w)}function kd(i){return Ri(function Oc(){return pt.lFrame.contextLView}(),20+i)}function vo(i,s=ft.Default){const a=Ae();return null===a?tt(i,s):Uo(un(),a,ee(i),s)}function Xg(){throw new Error("invalid")}function x_(i,s,a){const l=Ae();return Mr(l,As(),s)&&function ji(i,s,a,l,c,p,_,w){const I=Yn(s,a);let M,S=s.inputs;!w&&null!=S&&(M=S[l])?(iw(i,a,M,l,c),Ic(s)&&function z0(i,s){const a=Qn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Mg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,nn(p)?p.setProperty(I,l,c):On(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(Ft(),bn(),l,i,s,l[11],a,!1),x_}function Df(i,s,a,l,c){const _=c?"class":"style";iw(i,a,s.inputs[_],_,l)}function Ld(i,s,a,l){const c=Ae(),p=Ft(),_=20+i,w=c[11],I=c[_]=Sr(w,s,function Vp(){return pt.lFrame.currentNamespace}()),S=p.firstCreatePass?function Fd(i,s,a,l,c,p,_){const w=s.consts,S=Ed(s,i,2,c,pi(w,p));return xg(s,a,S,pi(w,_)),null!==S.attrs&&bd(S,S.attrs,!1),null!==S.mergedAttrs&&bd(S,S.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,S),S}(_,p,c,0,s,a,l):p.data[_];ti(S,!0);const M=S.mergedAttrs;null!==M&&Dr(w,I,M);const P=S.classes;null!==P&&Ry(w,I,P);const U=S.styles;return null!==U&&k0(w,I,U),64!=(64&S.flags)&&vd(p,c,I,S),0===function ga(){return pt.lFrame.elementDepthCount}()&&nr(I,c),function hl(){pt.lFrame.elementDepthCount++}(),Si(S)&&(Ag(p,c,S),B0(p,S,c)),null!==l&&Id(c,S),Ld}function Yo(){let i=un();pl()?gl():(i=i.parent,ti(i,!1));const s=i;!function Ja(){pt.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(ya(a,i),Za(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function jp(i){return 0!=(16&i.flags)}(s)&&Df(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function rn(i){return 0!=(32&i.flags)}(s)&&Df(a,s,Ae(),s.stylesWithoutHost,!1),Yo}function em(i,s,a,l){return Ld(i,s,a,l),Yo(),em}function Bs(i,s,a){const l=Ae(),c=Ft(),p=i+20,_=c.firstCreatePass?function Zl(i,s,a,l,c){const p=s.consts,_=pi(p,l),w=Ed(s,i,8,"ng-container",_);return null!==_&&bd(w,_,!0),xg(s,a,w,pi(p,c)),null!==s.queries&&s.queries.elementStart(s,w),w}(p,c,l,s,a):c.data[p];ti(_,!0);const w=l[p]=l[11].createComment("");return vd(c,l,w,_),nr(w,l),Si(_)&&(Ag(c,l,_),B0(c,_,l)),null!=a&&Id(l,_),Bs}function Kl(){let i=un();const s=Ft();return pl()?gl():(i=i.parent,ti(i,!1)),s.firstCreatePass&&(ya(s,i),Za(i)&&s.queries.elementEnd(i)),Kl}function Af(){return Ae()}function tm(i){return!!i&&"function"==typeof i.then}function gn(i){return!!i&&"function"==typeof i.subscribe}const Sf=gn;function k_(i,s,a,l){const c=Ae(),p=Ft(),_=un();return function Vd(i,s,a,l,c,p,_,w){const I=Si(l),M=i.firstCreatePass&&i_(i),P=s[8],U=r_(s);let Y=!0;if(3&l.type||w){const je=Yn(l,s),et=w?w(je):je,Te=U.length,ht=w?Bt=>w(Zt(Bt[l.index])):l.index;if(nn(a)){let Bt=null;if(!w&&I&&(Bt=function Mf(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const w=s[7],I=c[p+2];return w.length>I?w[I]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=p,Bt.__ngLastListenerFn__=p,Y=!1;else{p=nm(l,s,P,p,!1);const Qt=a.listen(et,c,p);U.push(p,Qt),M&&M.push(c,ht,Te,Te+1)}}else p=nm(l,s,P,p,!0),et.addEventListener(c,p,_),U.push(p),M&&M.push(c,ht,Te,_)}else p=nm(l,s,P,p,!1);const ye=l.outputs;let Pe;if(Y&&null!==ye&&(Pe=ye[c])){const je=Pe.length;if(je)for(let et=0;et<je;et+=2){const gs=s[Pe[et]][Pe[et+1]].subscribe(p),$a=U.length;U.push(p,gs),M&&M.push(c,l.index,$a,-($a+1))}}}(p,c,c[11],_,i,s,!!a,l),k_}function Rw(i,s,a,l){try{return!1!==a(l)}catch(c){return df(i,c),!1}}function nm(i,s,a,l,c){return function p(_){if(_===Function)return l;const w=2&i.flags?Qn(i.index,s):s;0==(32&s[2])&&ew(w);let I=Rw(s,0,l,_),S=p.__ngNextListenerFn__;for(;S;)I=Rw(s,0,S,_)&&I,S=S.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Nw(i=1){return function Rh(i){return(pt.lFrame.contextLView=function vl(i,s){for(;i>0;)s=s[15],i--;return s}(i,pt.lFrame.contextLView))[8]}(i)}function Qb(i,s){let a=null;const l=function ub(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let c=0;c<s.length;c++){const p=s[c];if("*"!==p){if(null===l?ab(i,p,!0):KT(l,p))return c}else a=c}return a}function Ow(i){const s=Ae()[16][6];if(!s.projection){const l=s.projection=is(i?i.length:1,null),c=l.slice();let p=s.child;for(;null!==p;){const _=i?Qb(p,i):0;null!==_&&(c[_]?c[_].projectionNext=p:l[_]=p,c[_]=p),p=p.next}}}function Pw(i,s=0,a){const l=Ae(),c=Ft(),p=Ed(c,20+i,16,null,a||null);null===p.projection&&(p.projection=s),gl(),64!=(64&p.flags)&&function rb(i,s,a){ve(s[11],0,s,a,tb(i,a,s),D0(a.parent||s[6],a,s))}(c,l,p)}function rm(i,s,a,l,c){const p=i[a+1],_=null===s;let w=l?Ko(p):oi(p),I=!1;for(;0!==w&&(!1===I||_);){const M=i[w+1];Bw(i[w],s)&&(I=!0,i[w+1]=l?Ly(M):Lt(M)),w=l?Ko(M):oi(M)}I&&(i[a+1]=l?Lt(p):Ly(p))}function Bw(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&qo(i,s)>=0}function L_(i,s){return function js(i,s,a,l){const c=Ae(),p=Ft(),_=gi(2);p.firstUpdatePass&&function Xo(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[$n()],_=function V_(i,s){return s>=i.expandoStartIndex}(i,a);(function $_(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function qw(i,s,a,l){const c=function iu(i){const s=pt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Ql(a=om(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=om(c,i,s,a,l),null===p){let I=function iC(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==oi(l))return i[Ko(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=om(null,i,s,I[1],l),I=Ql(I,s.attrs,l),function U_(i,s,a,l){i[Ko(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else p=function Rf(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=Ql(l,i[p].hostAttrs,a);return Ql(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function Uw(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,w=Ko(_),I=oi(_);i[l]=a;let M,S=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||qo(P,M)>0)&&(S=!0)}else M=a;if(c)if(0!==I){const U=Ko(i[w+1]);i[l+1]=Fy(U,w),0!==U&&(i[U+1]=yg(i[U+1],l)),i[w+1]=function mg(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Fy(w,0),0!==w&&(i[w+1]=yg(i[w+1],l)),w=l;else i[l+1]=Fy(I,0),0===w?w=l:i[I+1]=yg(i[I+1],l),I=l;S&&(i[l+1]=Lt(i[l+1])),rm(i,M,l,!0),rm(i,M,l,!1),function F_(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&qo(p,s)>=0&&(a[l+1]=Ly(a[l+1]))}(s,M,i,l,p),_=Fy(w,I),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==Mt&&Mr(c,_,s)&&function Nf(i,s,a,l,c,p,_,w){if(!(3&s.type))return;const I=i.data,S=I[w+1];Of(function P0(i){return 1==(1&i)}(S)?zw(I,s,a,c,oi(S),_):void 0)||(Of(p)||function Au(i){return 2==(2&i)}(S)&&(p=zw(I,null,a,c,w,_)),function gg(i,s,a,l,c){const p=nn(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:R.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=R.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,Ds($n(),a),c,p))}(p,p.data[$n()],c,c[11],i,c[_+1]=function Pf(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ie(wi(i)))),i}(s,a),l,_)}(i,s,null,!0),L_}function om(i,s,a,l,c){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=s[w],l=Ql(l,p.hostAttrs,c),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Ql(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),pr(i,_,!!a||s[++p]))}return void 0===i?null:i}function zw(i,s,a,l,c,p){const _=null===s;let w;for(;c>0;){const I=i[c],S=Array.isArray(I),M=S?I[1]:I,P=null===M;let U=a[c+1];U===Mt&&(U=P?L:void 0);let Y=P?ba(U,l):M===l?U:void 0;if(S&&!Of(Y)&&(Y=ba(I,l)),Of(Y)&&(w=Y,_))return w;const ye=i[c+1];c=_?Ko(ye):oi(ye)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(w=ba(I,l))}return w}function Of(i){return void 0!==i}function H_(i,s=""){const a=Ae(),l=Ft(),c=i+20,p=l.firstCreatePass?Ed(l,c,1,s,null):l.data[c],_=a[c]=function jl(i,s){return nn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);vd(l,a,_,p),ti(p,!1)}function Ff(i){return Lf("",i,""),Ff}function Lf(i,s,a){const l=Ae(),c=function Sn(i,s,a,l){return Mr(i,As(),a)?s+fe(a)+l:Mt}(l,i,s,a);return c!==Mt&&ka(l,$n(),c),Lf}function um(i,s,a,l,c){const p=Ae(),_=Ln(p,i,s,a,l,c);return _!==Mt&&ka(p,$n(),_),um}const oe=void 0;var xr=["en",[["a","p"],["AM","PM"],oe],[["AM","PM"],oe,oe],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oe,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oe,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oe,"{1} 'at' {0}",oe],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xe(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Jl={};function Y_(i){const s=function EA(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=tE(s);if(a)return a;const l=s.split("-")[0];if(a=tE(l),a)return a;if("en"===l)return xr;throw new Error(`Missing locale data for the locale "${i}".`)}function eE(i){return Y_(i)[mt.PluralCase]}function tE(i){return i in Jl||(Jl[i]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[i]),Jl[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Uf="en-US";let Q_=Uf;function vm(i,s,a,l,c){if(i=ee(i),Array.isArray(i))for(let p=0;p<i.length;p++)vm(i[p],s,a,l,c);else{const p=Ft(),_=Ae();let w=Dd(i)?i:ee(i.provide),I=ow(i);const S=un(),M=1048575&S.providerIndexes,P=S.directiveStart,U=S.providerIndexes>>20;if(Dd(i)||!i.multi){const Y=new Po(I,c,vo),ye=Em(w,s,c?M:M+U,P);-1===ye?(oo(xs(S,_),p,w),wm(p,i,s.length),s.push(w),S.directiveStart++,S.directiveEnd++,c&&(S.providerIndexes+=1048576),a.push(Y),_.push(Y)):(a[ye]=Y,_[ye]=Y)}else{const Y=Em(w,s,M+U,P),ye=Em(w,s,M,M+U),Pe=Y>=0&&a[Y],je=ye>=0&&a[ye];if(c&&!je||!c&&!Pe){oo(xs(S,_),p,w);const et=function sv(i,s,a,l,c){const p=new Po(i,a,vo);return p.multi=[],p.index=s,p.componentProviders=0,ea(p,c,l&&!a),p}(c?bC:nh,a.length,c,l,I);!c&&je&&(a[ye].providerFactory=et),wm(p,i,s.length,0),s.push(w),S.directiveStart++,S.directiveEnd++,c&&(S.providerIndexes+=1048576),a.push(et),_.push(et)}else wm(p,i,Y>-1?Y:ye,ea(a[c?ye:Y],I,!c&&l));!c&&l&&je&&a[ye].componentProviders++}}}function wm(i,s,a,l){const c=Dd(s),p=function Lb(i){return!!i.useClass}(s);if(c||p){const I=(p?ee(s.useClass):s).prototype.ngOnDestroy;if(I){const S=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const M=S.indexOf(a);-1===M?S.push(a,[l,I]):S[M+1].push(l,I)}else S.push(a,I)}}}function ea(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Em(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function nh(i,s,a,l){return Wf(this.multi,[])}function bC(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=es(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),Wf(c,p);for(let I=_;I<w.length;I++)p.push(w[I])}else p=[],Wf(c,p);return p}function Wf(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Im(i,s=[]){return a=>{a.providersResolver=(l,c)=>function IC(i,s,a){const l=Ft();if(l.firstCreatePass){const c=Mi(i);vm(a,l.data,l.blueprint,c,!0),vm(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class hs{}class ov{resolveComponentFactory(s){throw function vE(i){const s=Error(`No component factory found for ${ie(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let sh=(()=>{class i{}return i.NULL=new ov,i})();function wE(){return tc(un(),Ae())}function tc(i,s){return new Zf(Yn(i,s))}let Zf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=wE,i})();function EE(i){return i instanceof Zf?i.nativeElement:i}class av{}let bm=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function AC(){const i=Ae(),a=Qn(un().index,i);return function TC(i){return i[11]}(Vr(a)?a:i)}(),i})(),IE=(()=>{class i{}return i.\u0275prov=Wt({token:i,providedIn:"root",factory:()=>null}),i})();class nc{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Hu=new nc("13.3.10"),Cm={};function ta(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(Zt(p)),Ai(p))for(let w=10;w<p.length;w++){const I=p[w],S=I[1].firstChild;null!==S&&ta(I[1],I,S,l)}const _=a.type;if(8&_)ta(i,s,a.child,l);else if(32&_){const w=de(a,s);let I;for(;I=w();)l.push(I)}else if(16&_){const w=S0(s,a);if(Array.isArray(w))l.push(...w);else{const I=ct(s[16]);ta(I[1],I,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class oh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ta(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ai(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(cg(s,l),$o(a,l))}this._attachedToViewContainer=!1}w0(this._lView[1],this._lView)}onDestroy(s){G0(this._lView[1],this._lView,null,s)}markForCheck(){ew(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function nw(i,s,a){const l=s[10];l.begin&&l.begin();try{xu(i,s,i.template,a)}catch(c){throw df(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nf(i,s){rf(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=s}}class ah extends oh{constructor(s){super(s),this._view=s}detectChanges(){cf(this._view)}checkNoChanges(){}get context(){return null}}class uv extends sh{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=kn(s);return new cv(a,this.ngModule)}}function lv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class cv extends hs{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function YT(i){return i.map(lb).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return lv(this.componentDef.inputs)}get outputs(){return lv(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function SC(i,s){return{get:(a,l,c)=>{const p=i.get(a,Cm,c);return p!==Cm||l===Cm?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(av,ha),w=p.get(IE,null),I=_.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",M=l?function H0(i,s,a){if(nn(i))return i.selectRootElement(s,a===$t.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Sr(_.createRenderer(null,this.componentDef),S,function Kf(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(S)),P=this.componentDef.onPush?576:528,U=function gw(i,s){return{components:[],scheduler:i||Jh,clean:rw,playerHandler:s||null,flags:0}}(),Y=Sg(0,null,null,1,0,null,null,null,null,null),ye=uf(null,Y,U,P,null,null,_,I,w,p);let Pe,je;to(ye);try{const et=function Fg(i,s,a,l,c,p){const _=a[1];a[20]=i;const I=Ed(_,20,2,"#host",null),S=I.mergedAttrs=s.hostAttrs;null!==S&&(bd(I,S,!0),null!==i&&(Dr(c,i,S),null!==I.classes&&Ry(c,i,I.classes),null!==I.styles&&k0(c,i,I.styles)));const M=l.createRenderer(i,s),P=uf(a,j0(s),null,s.onPush?64:16,a[20],I,l,M,p||null,null);return _.firstCreatePass&&(oo(xs(I,a),_,s.type),kg(_,I),e_(I,a.length,1)),n_(a,P),a[20]=P}(M,this.componentDef,ye,_,I);if(M)if(l)Dr(I,M,["ng-version",Hu.full]);else{const{attrs:Te,classes:ht}=function QT(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!Bi(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Te&&Dr(I,M,Te),ht&&ht.length>0&&Ry(I,M,ht.join(" "))}if(je=cn(Y,20),void 0!==a){const Te=je.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const Bt=a[ht];Te.push(null!=Bt?Array.from(Bt):null)}}Pe=function pw(i,s,a,l,c){const p=a[1],_=function Z0(i,s,a){const l=un();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Y0(i,l,s,xa(i,s,1,null),a));const c=es(s,i,l.directiveStart,l);nr(c,s);const p=Yn(l,s);return p&&nr(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=un();s.contentQueries(1,_,I.directiveStart)}const w=un();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(no(w.index),Xy(a[1],w,0,w.directiveStart,w.directiveEnd,s),Db(s,_)),_}(et,this.componentDef,ye,U,[g_]),Hl(Y,ye,null)}finally{Ur()}return new Dm(this.componentType,Pe,tc(je,ye),ye,je)}}class Dm extends class rh{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new ah(c),this.componentType=s}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Gu{}class bE{}const rc=new Map;class lh extends Gu{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uv(this);const l=Rn(s);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=Cd(s,a,[{provide:Gu,useValue:this},{provide:sh,useValue:this.componentFactoryResolver}],ie(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=yo.THROW_IF_NOT_FOUND,l=ft.Default){return s===yo||s===Gu||s===o_?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Yf extends bE{constructor(s){super(),this.moduleType=s,null!==Rn(s)&&function ic(i){const s=new Set;!function a(l){const c=Rn(l,!0),p=c.id;null!==p&&(function uh(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ie(s)} vs ${ie(s.name)}`)}(p,rc.get(p),l),rc.set(p,l));const _=y(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new lh(this.moduleType,s)}}function Zn(i,s,a,l){return TE(Ae(),fr(),i,s,a,l)}function zt(i,s,a,l,c){return function AE(i,s,a,l,c,p,_){const w=s+a;return Nu(i,w,c,p)?_o(i,w+2,_?l.call(_,c,p):l(c,p)):Ba(i,w+2)}(Ae(),fr(),i,s,a,l,c)}function Ba(i,s){const a=i[s];return a===Mt?void 0:a}function TE(i,s,a,l,c,p){const _=s+a;return Mr(i,_,c)?_o(i,_+1,p?l.call(p,c):l(c)):Ba(i,_+1)}function ch(i,s){const a=Ft();let l;const c=i+20;a.firstCreatePass?(l=function Jf(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const p=l.factory||(l.factory=hr(l.type)),_=yn(vo);try{const w=wt(!1),I=p();return wt(w),function zb(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Ae(),c,I),I}finally{yn(_)}}function Xf(i,s,a){const l=i+20,c=Ae(),p=Ri(c,l);return function dh(i,s){return i[1].data[s].pure}(c,l)?TE(c,fr(),s,p.transform,a,p):p.transform(a)}function pv(i){return s=>{setTimeout(i,void 0,s)}}const na=class RE extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let w=s,I=a||(()=>null),S=l;if(s&&"object"==typeof s){const P=s;w=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(p=P.error)||void 0===p?void 0:p.bind(P),S=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=pv(I),w&&(w=pv(w)),S&&(S=pv(S)));const M=super.subscribe({next:w,error:I,complete:S});return s instanceof J.w0&&s.add(M),M}};function LC(){return this._results[Ru()]()}class zu{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ru(),l=zu.prototype;l[a]||(l[a]=LC)}get changes(){return this._changes||(this._changes=new na)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Tr(s);(this._changesDetected=!function Oh(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let hh=(()=>{class i{}return i.__NG_ELEMENT_ID__=gv,i})();const VC=hh,kr=class extends VC{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=uf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Hl(a,l,s),new oh(l)}};function gv(){return ep(un(),Ae())}function ep(i,s){return 4&i.type?new kr(s,i,tc(i,s)):null}let Wu=(()=>{class i{}return i.__NG_ELEMENT_ID__=ra,i})();function ra(){return _v(un(),Ae())}const mv=Wu,yv=class extends mv{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return tc(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const s=Xn(this._hostTNode,this._hostLView);if(Fo(s)){const a=Ms(s,this._hostLView),l=Ss(s);return new Ns(a[1].data[l+8],a)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=fh(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function du(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const P=a||{};w=P.index,l=P.injector,c=P.projectableNodes,p=P.ngModuleRef}const I=_?s:new cv(kn(s)),S=l||this.parentInjector;if(!p&&null==I.ngModule){const U=(_?S:this.parentInjector).get(Gu,null);U&&(p=U)}const M=I.create(S,c,void 0,p);return this.insert(M.hostView,w),M}insert(s,a){const l=s._lView,c=l[1];if(function pa(i){return Ai(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=l[3],U=new yv(P,P[6],P[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function Cu(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],Ia(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function eb(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,p);const w=pg(p,_),I=l[11],S=hg(I,_[7]);return null!==S&&function tf(i,s,a,l,c,p){l[0]=c,l[6]=s,rf(i,l,a,1,c,p)}(c,_[6],I,l,S,w),s.attachToViewContainerRef(),Ia(Tm(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=fh(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=cg(this._lContainer,a);l&&($o(Tm(this._lContainer),a),w0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=cg(this._lContainer,a);return l&&null!=$o(Tm(this._lContainer),a)?new oh(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function fh(i){return i[8]}function Tm(i){return i[8]||(i[8]=[])}function _v(i,s){let a;const l=s[i.index];if(Ai(l))a=l;else{let c;if(8&i.type)c=Zt(l);else{const p=s[11];c=p.createComment("");const _=Yn(i,s);Tu(p,hg(p,_),c,function nb(i,s){return nn(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=J0(l,s,c,i),n_(s,a)}return new yv(a,i,s)}class sc{constructor(s){this.queryList=s,this.matches=null}clone(){return new sc(this.queryList)}setDirty(){this.queryList.setDirty()}}class tp{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new tp(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==bo(s,a).matches&&this.queries[a].setDirty()}}class OE{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Am{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Am(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Sm{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Sm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,PE(a,p)),this.matchTNodeWithReadOption(s,a,wa(a,s,p,!1,!1))}else l===hh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,wa(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Zf||c===Wu||c===hh&&4&a.type)this.addMatch(a.index,-2);else{const p=wa(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function PE(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function FE(i,s,a,l){return-1===a?function BC(i,s){return 11&i.type?tc(i,s):4&i.type?ep(i,s):null}(s,i):-2===a?function jC(i,s,a){return a===Zf?tc(s,i):a===hh?ep(s,i):a===Wu?_v(s,i):void 0}(i,s,l):es(i,i[1],a,s)}function LE(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,w=[];for(let I=0;I<_.length;I+=2){const S=_[I];w.push(S<0?null:FE(s,p[S],_[I+1],a.metadata.read))}c.matches=w}return c.matches}function Zu(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=LE(i,s,c,a);for(let w=0;w<p.length;w+=2){const I=p[w];if(I>0)l.push(_[w/2]);else{const S=p[w+1],M=s[-I];for(let P=10;P<M.length;P++){const U=M[P];U[17]===U[3]&&Zu(U[1],U,S,l)}if(null!==M[9]){const P=M[9];for(let U=0;U<P.length;U++){const Y=P[U];Zu(Y[1],Y,S,l)}}}}}return l}function oc(i){const s=Ae(),a=Ft(),l=su();Pc(l+1);const c=bo(a,l);if(i.dirty&&Xs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?Zu(a,s,l,[]):LE(a,s,c,l);i.reset(p,EE),i.notifyOnChanges()}return!0}return!1}function VE(i,s,a,l){const c=Ft();if(c.firstCreatePass){const p=un();(function jE(i,s,a){null===i.queries&&(i.queries=new Am),i.queries.track(new Sm(s,a))})(c,new OE(s,a,l),p.index),function $E(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function ci(i,s,a){const l=new zu(4==(4&a));G0(i,s,l,l.destroy),null===s[19]&&(s[19]=new tp),s[19].queries.push(new sc(l))}(c,Ae(),a)}function UE(){return function BE(i,s){return i[19].queries[s].queryList}(Ae(),su())}function bo(i,s){return i.queries.getByIndex(s)}function vv(i,s){return ep(i,s)}function mh(...i){}const Yu=new pn("Application Initializer");let Mv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=mh,this.reject=mh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(tm(p))a.push(p);else if(Sf(p)){const _=new Promise((w,I)=>{p.subscribe({complete:w,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(tt(Yu,8))},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const xv=new pn("AppId",{providedIn:"root",factory:function eI(){return`${kv()}${kv()}${kv()}`}});function kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yh=new pn("Platform Initializer"),dc=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Qu=new pn("appBootstrapListener");let tD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const sp=new pn("LocaleId",{providedIn:"root",factory:()=>Ht(sp,ft.Optional|ft.SkipSelf)||function nD(){return"undefined"!=typeof $localize&&$localize.locale||Uf}()}),Pm=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Lm{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Vm=(()=>{class i{compileModuleSync(a){return new Yf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(Rn(a).declarations).reduce((_,w)=>{const I=kn(w);return I&&_.push(new cv(I)),_},[]);return new Lm(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const nI=(()=>Promise.resolve(0))();function _h(i){"undefined"==typeof Zone?nI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Gs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new na(!1),this.onMicrotaskEmpty=new na(!1),this.onStable=new na(!1),this.onError=new na(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Rv(){let i=Ut.requestAnimationFrame,s=Ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function hc(i){const s=()=>{!function rI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ut,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Nv(i),i.isCheckStableRunning=!0,Xu(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Nv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,w)=>{try{return fc(i),a.invokeTask(c,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Ov(i)}},onInvoke:(a,l,c,p,_,w,I)=>{try{return fc(i),a.invoke(c,p,_,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Ov(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Nv(i),Xu(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Gs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,Ju,mh,mh);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Ju={};function Xu(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Nv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function fc(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Ov(i){i._nesting--,Xu(i)}class el{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new na,this.onMicrotaskEmpty=new na,this.onStable=new na,this.onError=new na}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let tl=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gs.assertNotInAngularZone(),_h(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_h(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(tt(Gs))},i.\u0275prov=Wt({token:i,factory:i.\u0275fac}),i})(),Pv=(()=>{class i{constructor(){this._applications=new Map,Fv.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Fv.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class iI{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function iD(i){Fv=i}let Fv=new iI,pc=null;const sI=new pn("AllowMultipleToken"),op=new pn("PlatformOnDestroy");class aI{constructor(s,a){this.name=s,this.token=a}}function vh(i,s,a=[]){const l=`Platform: ${s}`,c=new pn(l);return(p=[])=>{let _=Um();if(!_||_.injector.get(sI,!1)){const w=[...a,...p,{provide:c,useValue:!0}];i?i(w):function gc(i){if(pc&&!pc.get(sI,!1))throw new ke(400,"");pc=i;const s=i.get(Bm),a=i.get(yh,null);a&&a.forEach(l=>l())}(function lI(i=[],s){return yo.create({name:s,providers:[{provide:mo,useValue:"platform"},{provide:op,useValue:()=>pc=null},...i]})}(w,l))}return function uI(i){const s=Um();if(!s)throw new ke(401,"");return s}()}}function Um(){var i;return null!==(i=null==pc?void 0:pc.get(Bm))&&void 0!==i?i:null}let Bm=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function Lv(i,s){let a;return a="noop"===i?new el:("zone.js"===i?void 0:i)||new Gs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Gs,useValue:w}];return w.run(()=>{const S=yo.create({providers:I,parent:this.injector,name:a.moduleType.name}),M=a.create(S),P=M.injector.get(yd,null);if(!P)throw new ke(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Y=>{P.handleError(Y)}});M.onDestroy(()=>{Vv(this._modules,M),U.unsubscribe()})}),function ap(i,s,a){try{const l=a();return tm(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const U=M.injector.get(Mv);return U.runInitializers(),U.donePromise.then(()=>(function Xl(i){Vt(i,"Expected localeId to be defined"),"string"==typeof i&&(Q_=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(sp,Uf)||Uf),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const c=up({},l);return function oI(i,s,a){const l=new Yf(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(lp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(op,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(tt(yo))},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function up(i,s){return Array.isArray(s)?s.reduce(up,i):Object.assign(Object.assign({},i),s)}let lp=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new O.y(I=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Gs.assertNotInAngularZone(),_h(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Gs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{S.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ue.T)(_,w.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let c;c=a instanceof hs?a:this._injector.get(sh).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function sD(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Gu),w=c.create(yo.NULL,[],l||c.selector,p),I=w.location.nativeElement,S=w.injector.get(tl,null),M=S&&w.injector.get(Pv);return S&&M&&M.registerApplication(I,S),w.onDestroy(()=>{this.detachView(w.hostView),Vv(this.components,w),M&&M.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Vv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Qu,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(tt(Gs),tt(yo),tt(yd),tt(Mv))},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Vv(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let dI=!0,Uv=!1;function hI(){return Uv=!0,dI}function Bv(){if(Uv)throw new Error("Cannot enable prod mode after platform setup.");dI=!1}let pI=(()=>{class i{}return i.__NG_ELEMENT_ID__=aD,i})();function aD(i){return function wh(i,s,a){if(Ic(i)&&!a){const l=Qn(i.index,s);return new oh(l,l)}return 47&i.type?new oh(s[16],s):null}(un(),Ae(),16==(16&i))}class qv{constructor(){}supports(s){return ql(s)}create(s){return new qm(s)}}const zv=(i,s)=>s;class qm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||zv}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Zm(l,c,p)?a:l,w=Zm(_,c,p),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const S=w-c,M=I-c;if(S!=M){for(let U=0;U<S;U++){const Y=U<p.length?p[U]:p[U]=0,ye=Y+U;M<=ye&&ye<S&&(p[U]=Y+1)}p[_.previousIndex]=M-S}}w!==I&&s(_,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ql(s))throw new ke(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else c=0,function _w(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Ru()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new hp(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Wm),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class hp{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zm{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Wm{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new zm,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zm(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Km{constructor(){}supports(s){return s instanceof Map||__(s)}create(){return new vI}}class vI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||__(s)))throw new ke(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new fD(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class fD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wv(){return new Zv([new qv])}let Zv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Wv()),deps:[[i,new Ls,new mr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new ke(901,"")}}return i.\u0275prov=Wt({token:i,providedIn:"root",factory:Wv}),i})();function wI(){return new Ym([new Km])}let Ym=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||wI()),deps:[[i,new Ls,new mr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new ke(901,"")}}return i.\u0275prov=Wt({token:i,providedIn:"root",factory:wI}),i})();const gD=vh(null,"core",[]);let mD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(tt(lp))},i.\u0275mod=Er({type:i}),i.\u0275inj=Gt({}),i})()},3942:(Je,Ee,N)=>{N.d(Ee,{Z:()=>ke});var h=N(2090),J=N(4859),O=N(9681),ue=N(1877);class ne{constructor(fe,be){this._delegate=fe,this.firebase=be,(0,O._addComponent)(fe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,be=O._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(fe);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Ge=Ze.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:be})}_removeServiceInstance(fe,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(be)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ce(){const Ve=function ie(Ve){const fe={},be={__esModule:!0,initializeApp:function De(Ue,j={}){const _e=O.initializeApp(Ue,j);if((0,h.r3)(fe,_e.name))return fe[_e.name];const W=new Ve(_e,be);return fe[_e.name]=W,W},app:Ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Ue){const j=Ue.name,_e=j.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const W=(re=Ze())=>{if("function"!=typeof re[_e])throw le.create("invalid-app-argument",{appName:j});return re[_e]()};void 0!==Ue.serviceProps&&(0,h.ZB)(W,Ue.serviceProps),be[_e]=W,Ve.prototype[_e]=function(...re){return this._getService.bind(this,j).apply(this,Ue.multipleInstances?re:[])}}return"PUBLIC"===Ue.type?be[_e]:null},removeApp:function Ge(Ue){delete fe[Ue]},useAsService:function Be(Ue,j){return"serverAuth"===j?null:j},modularAPIs:O}};function Ze(Ue){if(!(0,h.r3)(fe,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Ue});return fe[Ue]}return be.default=be,Object.defineProperty(be,"apps",{get:function we(){return Object.keys(fe).map(Ue=>fe[Ue])}}),Ze.App=Ve,be}(ne);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function fe(be){(0,h.ZB)(Ve,be)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ve}(),B=new ue.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=$;!function Se(Ve){(0,O.registerVersion)("@firebase/app-compat","0.1.26",Ve)}()},9681:(Je,Ee,N)=>{N.r(Ee),N.d(Ee,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Ci,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>en,_addOrOverwriteComponent:()=>Wt,_apps:()=>Yt,_clearComponents:()=>Wi,_components:()=>mn,_getProvider:()=>Gt,_registerComponent:()=>vr,_removeServiceInstance:()=>Pt,deleteApp:()=>ft,getApp:()=>Kr,getApps:()=>di,initializeApp:()=>vs,onLog:()=>yn,registerVersion:()=>hn,setLogLevel:()=>zs});var h=N(5861),J=N(4859),O=N(1877),ue=N(2090),ne=N(8766);class ge{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function le(H){const Q=H.getComponent();return"VERSION"===(null==Q?void 0:Q.type)}(Me)){const Ye=Me.getImmediate();return`${Ye.library}/${Ye.version}`}return null}).filter(Me=>Me).join(" ")}}const ie="@firebase/app",$=new O.Yd("@firebase/app"),Vt="[DEFAULT]",We={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yt=new Map,mn=new Map;function en(H,Q){try{H.container.addComponent(Q)}catch(Me){$.debug(`Component ${Q.name} failed to register with FirebaseApp ${H.name}`,Me)}}function Wt(H,Q){H.container.addOrOverwriteComponent(Q)}function vr(H){const Q=H.name;if(mn.has(Q))return $.debug(`There were multiple attempts to register component ${Q}.`),!1;mn.set(Q,H);for(const Me of Yt.values())en(Me,H);return!0}function Gt(H,Q){const Me=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),H.container.getProvider(Q)}function Pt(H,Q,Me=Vt){Gt(H,Q).clearInstance(Me)}function Wi(){mn.clear()}const ar=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class wr{constructor(Q,Me,Ye){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Ye,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}const Ci="9.8.2";function vs(H,Q={}){"object"!=typeof Q&&(Q={name:Q});const Me=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},Q),Ye=Me.name;if("string"!=typeof Ye||!Ye)throw ar.create("bad-app-name",{appName:String(Ye)});const dt=Yt.get(Ye);if(dt){if((0,ue.vZ)(H,dt.options)&&(0,ue.vZ)(Me,dt.config))return dt;throw ar.create("duplicate-app",{appName:Ye})}const _t=new J.H0(Ye);for(const yt of mn.values())_t.addComponent(yt);const sn=new wr(H,Me,_t);return Yt.set(Ye,sn),sn}function Kr(H=Vt){const Q=Yt.get(H);if(!Q)throw ar.create("no-app",{appName:H});return Q}function di(){return Array.from(Yt.values())}function ft(H){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(H){const Q=H.name;Yt.has(Q)&&(Yt.delete(Q),yield Promise.all(H.container.getProviders().map(Me=>Me.delete())),H.isDeleted=!0)})).apply(this,arguments)}function hn(H,Q,Me){var Ye;let dt=null!==(Ye=We[H])&&void 0!==Ye?Ye:H;Me&&(dt+=`-${Me}`);const _t=dt.match(/\s|\//),sn=Q.match(/\s|\//);if(_t||sn){const yt=[`Unable to register library "${dt}" with version "${Q}":`];return _t&&yt.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),_t&&sn&&yt.push("and"),sn&&yt.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void $.warn(yt.join(" "))}vr(new J.wA(`${dt}-version`,()=>({library:dt,version:Q}),"VERSION"))}function yn(H,Q){if(null!==H&&"function"!=typeof H)throw ar.create("invalid-log-argument");(0,O.Am)(H,Q)}function zs(H){(0,O.Ub)(H)}const En="firebase-heartbeat-store";let hi=null;function Co(){return hi||(hi=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:(H,Q)=>{0===Q&&H.createObjectStore(En)}}).catch(H=>{throw ar.create("storage-open",{originalErrorMessage:H.message})})),hi}function rt(){return(rt=(0,h.Z)(function*(H){try{return(yield Co()).transaction(En).objectStore(En).get(Jr(H))}catch(Q){throw ar.create("storage-get",{originalErrorMessage:Q.message})}})).apply(this,arguments)}function gt(H,Q){return ur.apply(this,arguments)}function ur(){return(ur=(0,h.Z)(function*(H,Q){try{const Ye=(yield Co()).transaction(En,"readwrite");return yield Ye.objectStore(En).put(Q,Jr(H)),Ye.done}catch(Me){throw ar.create("storage-set",{originalErrorMessage:Me.message})}})).apply(this,arguments)}function Jr(H){return`${H.name}!${H.options.appId}`}class lr{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new G(Me),this._heartbeatsCachePromise=this._storage.read().then(Ye=>(this._heartbeatsCache=Ye,Ye))}triggerHeartbeat(){var Q=this;return(0,h.Z)(function*(){const Ye=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=cr();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==dt&&!Q._heartbeatsCache.heartbeats.some(_t=>_t.date===dt))return Q._heartbeatsCache.heartbeats.push({date:dt,agent:Ye}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(_t=>{const sn=new Date(_t.date).valueOf();return Date.now()-sn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,h.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Me=cr(),{heartbeatsToSend:Ye,unsentEntries:dt}=function L(H,Q=1024){const Me=[];let Ye=H.slice();for(const dt of H){const _t=Me.find(sn=>sn.agent===dt.agent);if(_t){if(_t.dates.push(dt.date),q(Me)>Q){_t.dates.pop();break}}else if(Me.push({agent:dt.agent,dates:[dt.date]}),q(Me)>Q){Me.pop();break}Ye=Ye.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Ye}}(Q._heartbeatsCache.heartbeats),_t=(0,ue.L)(JSON.stringify({version:2,heartbeats:Ye}));return Q._heartbeatsCache.lastSentHeartbeatDate=Me,dt.length>0?(Q._heartbeatsCache.heartbeats=dt,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),_t})()}}function cr(){return(new Date).toISOString().substring(0,10)}class G{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,h.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function $t(H){return rt.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Me=this;return(0,h.Z)(function*(){var Ye;if(yield Me._canUseIndexedDBPromise){const _t=yield Me.read();return gt(Me.app,{lastSentHeartbeatDate:null!==(Ye=Q.lastSentHeartbeatDate)&&void 0!==Ye?Ye:_t.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Me=this;return(0,h.Z)(function*(){var Ye;if(yield Me._canUseIndexedDBPromise){const _t=yield Me.read();return gt(Me.app,{lastSentHeartbeatDate:null!==(Ye=Q.lastSentHeartbeatDate)&&void 0!==Ye?Ye:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...Q.heartbeats]})}})()}}function q(H){return(0,ue.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Ce(H){vr(new J.wA("platform-logger",Q=>new ge(Q),"PRIVATE")),vr(new J.wA("heartbeat",Q=>new lr(Q),"PRIVATE")),hn(ie,"0.7.25",H),hn(ie,"0.7.25","esm2017"),hn("fire-js","")}("")},4859:(Je,Ee,N)=>{N.d(Ee,{H0:()=>ie,wA:()=>O});var h=N(5861),J=N(2090);class O{constructor($,B,ee){this.name=$,this.instanceFactory=B,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class ne{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const ee=new J.BH;if(this.instancesDeferred.set(B,ee),this.isInitialized(B)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:B});He&&ee.resolve(He)}catch(He){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const ee=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),He=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Se){if(He)return null;throw Se}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function le(ce){return"EAGER"===ce.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(B){}for(const[B,ee]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(B);try{const Se=this.getOrInitializeService({instanceIdentifier:He});ee.resolve(Se)}catch(Se){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...B.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,ee=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ee,options:B});for(const[Se,ke]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Se)&&ke.resolve(He);return He}onInit($,B){var ee;const He=this.normalizeInstanceIdentifier(B),Se=null!==(ee=this.onInitCallbacks.get(He))&&void 0!==ee?ee:new Set;Se.add($),this.onInitCallbacks.set(He,Se);const ke=this.instances.get(He);return ke&&$(ke,He),()=>{Se.delete($)}}invokeOnInitCallbacks($,B){const ee=this.onInitCallbacks.get(B);if(ee)for(const He of ee)try{He($,B)}catch(Se){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let ee=this.instances.get($);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=$,ce===ue?void 0:ce),options:B}),this.instances.set($,ee),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(ee,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ee)}catch(He){}var ce;return ee||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new ne($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,Ee,N)=>{N.d(Ee,{Am:()=>ce,Ub:()=>ie,Yd:()=>le,in:()=>J});const h=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ue=J.INFO,ne={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ge=($,B,...ee)=>{if(B<$.logLevel)return;const He=(new Date).toISOString(),Se=ne[B];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Se](`[${He}]  ${$.name}:`,...ee)};class le{constructor(B){this.name=B,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function ie($){h.forEach(B=>{B.setLogLevel($)})}function ce($,B){for(const ee of h){let He=null;B&&B.level&&(He=O[B.level]),ee.userLogHandler=null===$?null:(Se,ke,...Ve)=>{const fe=Ve.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(Ge){return null}}).filter(be=>be).join(" ");ke>=(null!=He?He:Se.logLevel)&&$({level:J[ke].toLowerCase(),message:fe,args:Ve,type:Se.name})}}}},8766:(Je,Ee,N)=>{N.d(Ee,{Lj:()=>De,X3:()=>Ze});var h=N(5861);let O,ue;const le=new WeakMap,ie=new WeakMap,ce=new WeakMap,$=new WeakMap,B=new WeakMap;let Se={get(j,_e,W){if(j instanceof IDBTransaction){if("done"===_e)return ie.get(j);if("objectStoreNames"===_e)return j.objectStoreNames||ce.get(j);if("store"===_e)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return be(j[_e])},set:(j,_e,W)=>(j[_e]=W,!0),has:(j,_e)=>j instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in j};function fe(j){return"function"==typeof j?function Ve(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(..._e){return j.apply(Ge(this),_e),be(le.get(this))}:function(..._e){return be(j.apply(Ge(this),_e))}:function(_e,...W){const re=j.call(Ge(this),_e,...W);return ce.set(re,_e.sort?_e.sort():[_e]),be(re)}}(j):(j instanceof IDBTransaction&&function He(j){if(ie.has(j))return;const _e=new Promise((W,re)=>{const X=()=>{j.removeEventListener("complete",me),j.removeEventListener("error",se),j.removeEventListener("abort",se)},me=()=>{W(),X()},se=()=>{re(j.error||new DOMException("AbortError","AbortError")),X()};j.addEventListener("complete",me),j.addEventListener("error",se),j.addEventListener("abort",se)});ie.set(j,_e)}(j),((j,_e)=>_e.some(W=>j instanceof W))(j,function ne(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Se):j)}function be(j){if(j instanceof IDBRequest)return function ee(j){const _e=new Promise((W,re)=>{const X=()=>{j.removeEventListener("success",me),j.removeEventListener("error",se)},me=()=>{W(be(j.result)),X()},se=()=>{re(j.error),X()};j.addEventListener("success",me),j.addEventListener("error",se)});return _e.then(W=>{W instanceof IDBCursor&&le.set(W,j)}).catch(()=>{}),B.set(_e,j),_e}(j);if($.has(j))return $.get(j);const _e=fe(j);return _e!==j&&($.set(j,_e),B.set(_e,j)),_e}const Ge=j=>B.get(j);function Ze(j,_e,{blocked:W,upgrade:re,blocking:X,terminated:me}={}){const se=indexedDB.open(j,_e),Re=be(se);return re&&se.addEventListener("upgradeneeded",at=>{re(be(se.result),at.oldVersion,at.newVersion,be(se.transaction))}),W&&se.addEventListener("blocked",()=>W()),Re.then(at=>{me&&at.addEventListener("close",()=>me()),X&&at.addEventListener("versionchange",()=>X())}).catch(()=>{}),Re}function De(j,{blocked:_e}={}){const W=indexedDB.deleteDatabase(j);return _e&&W.addEventListener("blocked",()=>_e()),be(W).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function Ue(j,_e){if(!(j instanceof IDBDatabase)||_e in j||"string"!=typeof _e)return;if(Be.get(_e))return Be.get(_e);const W=_e.replace(/FromIndex$/,""),re=_e!==W,X=Ie.includes(W);if(!(W in(re?IDBIndex:IDBObjectStore).prototype)||!X&&!we.includes(W))return;const me=function(){var se=(0,h.Z)(function*(Re,...at){const jt=this.transaction(Re,X?"readwrite":"readonly");let Vt=jt.store;return re&&(Vt=Vt.index(at.shift())),(yield Promise.all([Vt[W](...at),X&&jt.done]))[0]});return function(at){return se.apply(this,arguments)}}();return Be.set(_e,me),me}!function ke(j){Se=j(Se)}(j=>hx(dx({},j),{get:(_e,W,re)=>Ue(_e,W)||j.get(_e,W,re),has:(_e,W)=>!!Ue(_e,W)||j.has(_e,W)}))},5861:(Je,Ee,N)=>{function h(O,ue,ne,ge,le,ie,ce){try{var $=O[ie](ce),B=$.value}catch(ee){return void ne(ee)}$.done?ue(B):Promise.resolve(B).then(ge,le)}function J(O){return function(){var ue=this,ne=arguments;return new Promise(function(ge,le){var ie=O.apply(ue,ne);function ce(B){h(ie,ge,le,ce,$,"next",B)}function $(B){h(ie,ge,le,ce,$,"throw",B)}ce(void 0)})}}N.d(Ee,{Z:()=>J})}},Je=>{Je(Je.s=3138)}]);