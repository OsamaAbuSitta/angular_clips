"use strict";var ON=Object.defineProperty,PN=Object.defineProperties,FN=Object.getOwnPropertyDescriptors,IM=Object.getOwnPropertySymbols,LN=Object.prototype.hasOwnProperty,VN=Object.prototype.propertyIsEnumerable,CM=(qe,me,N)=>me in qe?ON(qe,me,{enumerable:!0,configurable:!0,writable:!0,value:N}):qe[me]=N,DM=(qe,me)=>{for(var N in me||(me={}))LN.call(me,N)&&CM(qe,N,me[N]);if(IM)for(var N of IM(me))VN.call(me,N)&&CM(qe,N,me[N]);return qe},TM=(qe,me)=>PN(qe,FN(me));(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(qe,me,N)=>{N.d(me,{Dh:()=>se,GT:()=>de,cc:()=>xe,hO:()=>Be,on:()=>$,pX:()=>ne,xv:()=>le});var c=N(5e3),J=N(127),O=N(5813);qe=N.hmd(qe);const ie=["ngOnDestroy"],ne=(be,We,et,Se={})=>new Proxy(be,{get:(Ee,Ie)=>et.runOutsideAngular(()=>{var Ue;if(be[Ie])return(null===(Ue=null==Se?void 0:Se.spy)||void 0===Ue?void 0:Ue.get)&&Se.spy.get(Ie,be[Ie]),be[Ie];if(ie.indexOf(Ie)>-1)return()=>{};const Ve=We.toPromise().then(B=>{const we=B&&B[Ie];return"function"==typeof we?we.bind(B):we&&we.then?we.then(z=>et.run(()=>z)):et.run(()=>we)});return new Proxy(()=>{},{get:(B,we)=>Ve[we],apply:(B,we,z)=>Ve.then(re=>{var ee;const ge=re&&re(...z);return(null===(ee=null==Se?void 0:Se.spy)||void 0===ee?void 0:ee.apply)&&Se.spy.apply(Ie,z,ge),ge})})})}),de=(be,We)=>{We.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Se=>{Object.defineProperty(be.prototype,Se,Object.getOwnPropertyDescriptor(et.prototype||et,Se))})})};class ue{constructor(We){return We}}const se=new c.OlP("angularfire2.app.options"),le=new c.OlP("angularfire2.app.name");function $(be,We,et){const Ee="object"==typeof et&&et||{};Ee.name=Ee.name||"string"==typeof et&&et||"[DEFAULT]";const Ue=J.Z.apps.filter(Ve=>Ve&&Ve.name===Ee.name)[0]||We.runOutsideAngular(()=>J.Z.initializeApp(be,Ee));try{JSON.stringify(be)!==JSON.stringify(Ue.options)&&j("error",`${Ue.name} Firebase App already initialized with different options${qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ve){}return new ue(Ue)}const j=(be,...We)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[be](...We)},K={provide:ue,useFactory:$,deps:[se,c.R0b,[new c.FiY,le]]};let Be=(()=>{class be{constructor(et){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",c.q4F.full,et.toString())}static initializeApp(et,Se){return{ngModule:be,providers:[{provide:se,useValue:et},{provide:le,useValue:Se}]}}}return be.\u0275fac=function(et){return new(et||be)(c.LFG(c.Lbi))},be.\u0275mod=c.oAB({type:be}),be.\u0275inj=c.cJS({providers:[K]}),be})();function xe(be,We,et,Se,Ee){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===be)||[];if(Ie)return function Ae(be,We){try{return be.toString()===We.toString()}catch(et){return be===We}}(Ee,Ue)||(ye("error",`${We} was already initialized on the ${et} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Ee,was:Ue})),Ie;{const Ve=Se();return globalThis.\u0275AngularfireInstanceCache.push([be,Ve,Ee]),Ve}}const Qe=!!qe.hot,ye=(be,...We)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[be](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(qe,me,N)=>{N.d(me,{q4:()=>Sa,iC:()=>Th,HU:()=>rd,vb:()=>Up,JM:()=>Ko});var c=N(5e3),J=N(5867),O=N(5861),ie=N(9681),ne=N(2090),de=N(4859),ue=N(1877),se=N(8766);const le="@firebase/installations",$="0.5.9",K=`w:${$}`,Be="FIS_v2",We=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Se({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ee(I){return{token:I.token,requestStatus:2,expiresIn:re(I.expiresIn),creationTime:Date.now()}}function Ie(I,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(I,D){const F=(yield D.json()).error;return We.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ve({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function B(I,{refreshToken:D}){const M=Ve(I);return M.append("Authorization",function ee(I){return`${Be} ${I}`}(D)),M}function we(I){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function re(I){return Number(I.replace("s","000"))}function ge(I,D){return oe.apply(this,arguments)}function oe(){return(oe=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:M}){const F=Se(I),Y=Ve(I),te=D.getImmediate({optional:!0});if(te){const ut=yield te.getHeartbeatsHeader();ut&&Y.append("x-firebase-client",ut)}const ze={method:"POST",headers:Y,body:JSON.stringify({fid:M,authVersion:Be,appId:I.appId,sdkVersion:K})},tt=yield we(()=>fetch(F,ze));if(tt.ok){const ut=yield tt.json();return{fid:ut.fid||M,registrationStatus:2,refreshToken:ut.refreshToken,authToken:Ee(ut.authToken)}}throw yield Ie("Create Installation",tt)})).apply(this,arguments)}function Ne(I){return new Promise(D=>{setTimeout(D,I)})}const Bt=/^[cdef][\w-]{21}$/;function Ge(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function Kt(I){return function at(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Bt.test(M)?M:""}catch(I){return""}}function mn(I){return`${I.appName}!${I.appId}`}const Jt=new Map;function qt(I,D){const M=mn(I);Ot(M,D),function Ji(I,D){const M=function ir(){return!Wr&&"BroadcastChannel"in self&&(Wr=new BroadcastChannel("[Firebase] FID Change"),Wr.onmessage=I=>{Ot(I.data.key,I.data.fid)}),Wr}();M&&M.postMessage({key:I,fid:D}),function Er(){0===Jt.size&&Wr&&(Wr.close(),Wr=null)}()}(M,D)}function Ot(I,D){const M=Jt.get(I);if(M)for(const F of M)F(D)}let Wr=null;const Kr="firebase-installations-store";let di=null;function ft(){return di||(di=(0,se.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Kr)}})),di}function Yr(I,D){return cn.apply(this,arguments)}function cn(){return(cn=(0,O.Z)(function*(I,D){const M=mn(I),Y=(yield ft()).transaction(Kr,"readwrite"),te=Y.objectStore(Kr),pe=yield te.get(M);return yield te.put(D,M),yield Y.done,(!pe||pe.fid!==D.fid)&&qt(I,D.fid),D})).apply(this,arguments)}function yn(I){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(I){const D=mn(I),F=(yield ft()).transaction(Kr,"readwrite");yield F.objectStore(Kr).delete(D),yield F.done})).apply(this,arguments)}function Qr(I,D){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(I,D){const M=mn(I),Y=(yield ft()).transaction(Kr,"readwrite"),te=Y.objectStore(Kr),pe=yield te.get(M),ze=D(pe);return void 0===ze?yield te.delete(M):yield te.put(ze,M),yield Y.done,ze&&(!pe||pe.fid!==ze.fid)&&qt(I,ze.fid),ze})).apply(this,arguments)}function bn(I){return hi.apply(this,arguments)}function hi(){return(hi=(0,O.Z)(function*(I){let D;const M=yield Qr(I.appConfig,F=>{const Y=xo(F),te=jt(I,Y);return D=te.registrationPromise,te.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function xo(I){return Qs(I||{fid:Ge(),registrationStatus:0})}function jt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(We.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(I,D){return yt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:sr(I)}:{installationEntry:D}}function yt(){return(yt=(0,O.Z)(function*(I,D){try{const M=yield ge(I,D);return Yr(I.appConfig,M)}catch(M){throw et(M)&&409===M.customData.serverCode?yield yn(I.appConfig):yield Yr(I.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function sr(I){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,O.Z)(function*(I){let D=yield Lt(I.appConfig);for(;1===D.registrationStatus;)yield Ne(100),D=yield Lt(I.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield bn(I);return F||M}return D})).apply(this,arguments)}function Lt(I){return Qr(I,D=>{if(!D)throw We.create("installation-not-found");return Qs(D)})}function Qs(I){return function or(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function ar(I,D){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},M){const F=G(I,M),Y=B(I,M),te=D.getImmediate({optional:!0});if(te){const ut=yield te.getHeartbeatsHeader();ut&&Y.append("x-firebase-client",ut)}const ze={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:I.appId}})},tt=yield we(()=>fetch(F,ze));if(tt.ok)return Ee(yield tt.json());throw yield Ie("Generate Auth Token",tt)})).apply(this,arguments)}function G(I,{fid:D}){return`${Se(I)}/${D}/authTokens:generate`}function Z(I){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(I,D=!1){let M;const F=yield Qr(I.appConfig,te=>{if(!wt(te))throw We.create("not-registered");const pe=te.authToken;if(!D&&rn(pe))return te;if(1===pe.requestStatus)return M=H(I,D),te;{if(!navigator.onLine)throw We.create("app-offline");const ze=Rn(te);return M=Ke(I,ze),ze}});return M?yield M:F.authToken})).apply(this,arguments)}function H(I,D){return X.apply(this,arguments)}function X(){return(X=(0,O.Z)(function*(I,D){let M=yield Me(I.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield Me(I.appConfig);const F=M.authToken;return 0===F.requestStatus?Z(I,D):F})).apply(this,arguments)}function Me(I){return Qr(I,D=>{if(!wt(D))throw We.create("not-registered");return function br(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ke(I,D){return dt.apply(this,arguments)}function dt(){return(dt=(0,O.Z)(function*(I,D){try{const M=yield ar(I,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield Yr(I.appConfig,F),M}catch(M){if(!et(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Yr(I.appConfig,F)}else yield yn(I.appConfig);throw M}})).apply(this,arguments)}function wt(I){return void 0!==I&&2===I.registrationStatus}function rn(I){return 2===I.requestStatus&&!function vt(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Rn(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function da(){return(da=(0,O.Z)(function*(I){const D=I,{installationEntry:M,registrationPromise:F}=yield bn(D);return F?F.catch(console.error):Z(D).catch(console.error),M.fid})).apply(this,arguments)}function ha(){return(ha=(0,O.Z)(function*(I,D=!1){const M=I;return yield Nn(M),(yield Z(M,D)).token})).apply(this,arguments)}function Nn(I){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(I){const{registrationPromise:D}=yield bn(I);D&&(yield D)})).apply(this,arguments)}function Mo(I){return We.create("missing-app-config-values",{valueName:I})}const Lr="installations",ot=I=>{const D=I.getProvider("app").getImmediate(),M=function Qn(I){if(!I||!I.options)throw Mo("App Configuration");if(!I.name)throw Mo("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!I.options[M])throw Mo(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,ie._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Qt=I=>{const D=I.getProvider("app").getImmediate(),M=(0,ie._getProvider)(D,Lr).getImmediate();return{getId:()=>function Qa(I){return da.apply(this,arguments)}(M),getToken:Y=>function Ja(I){return ha.apply(this,arguments)}(M,Y)}};(function Vr(){(0,ie._registerComponent)(new de.wA(Lr,ot,"PUBLIC")),(0,ie._registerComponent)(new de.wA("installations-internal",Qt,"PRIVATE"))})(),(0,ie.registerVersion)(le,$),(0,ie.registerVersion)(le,$,"esm2017");const Ai="@firebase/remote-config",_n=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Sp{constructor(D,M,F,Y){this.client=D,this.storage=M,this.storageCache=F,this.logger=Y}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Y=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Y;D.eTag=Y&&Y.eTag;const te=yield M.client.fetch(D),pe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&pe.push(M.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(pe),te})()}}function kc(I=navigator){return I.languages&&I.languages[0]||I.language}class ur{constructor(D,M,F,Y,te,pe){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=Y,this.apiKey=te,this.appId=pe}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},tt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:Y,app_id:M.appId,language_code:kc()},ut={method:"POST",headers:ze,body:JSON.stringify(tt)},$t=fetch(pe,ut),It=new Promise((fr,ds)=>{D.signal.addEventListener(()=>{const Ls=new Error("The operation was aborted.");Ls.name="AbortError",ds(Ls)})});let Sn;try{yield Promise.race([$t,It]),Sn=yield $t}catch(fr){let ds="fetch-client-network";throw"AbortError"===fr.name&&(ds="fetch-timeout"),_n.create(ds,{originalErrorMessage:fr.message})}let qn=Sn.status;const cs=Sn.headers.get("ETag")||void 0;let Bi,vi;if(200===Sn.status){let fr;try{fr=yield Sn.json()}catch(ds){throw _n.create("fetch-client-parse",{originalErrorMessage:ds.message})}Bi=fr.entries,vi=fr.state}if("INSTANCE_STATE_UNSPECIFIED"===vi?qn=500:"NO_CHANGE"===vi?qn=304:("NO_TEMPLATE"===vi||"EMPTY_CONFIG"===vi)&&(Bi={}),304!==qn&&200!==qn)throw _n.create("fetch-status",{httpStatus:qn});return{status:qn,eTag:cs,config:Bi}})()}}class xp{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var Y=this;return(0,O.Z)(function*(){yield function Is(I,D){return new Promise((M,F)=>{const Y=Math.max(D-Date.now(),0),te=setTimeout(M,Y);I.addEventListener(()=>{clearTimeout(te),F(_n.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const te=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),te}catch(te){if(!function Rc(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const pe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(pe),Y.attemptFetch(D,pe)}})()}}class Oc{constructor(D,M,F,Y,te){this.app=D,this._client=M,this._storageCache=F,this._storage=Y,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function al(I,D){const M=I.target.error||void 0;return _n.create(D,{originalErrorMessage:M&&M.message})}const Cs="app_namespace_store";class Rp{constructor(D,M,F,Y=function kp(){return new Promise((I,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{D(al(F,"storage-open"))},M.onsuccess=F=>{I(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Cs,{keyPath:"compositeKey"})}}catch(M){D(_n.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,te)=>{const ze=F.transaction([Cs],"readonly").objectStore(Cs),tt=M.createCompositeKey(D);try{const ut=ze.get(tt);ut.onerror=$t=>{te(al($t,"storage-get"))},ut.onsuccess=$t=>{const It=$t.target.result;Y(It?It.value:void 0)}}catch(ut){te(_n.create("storage-get",{originalErrorMessage:ut&&ut.message}))}})})()}set(D,M){var F=this;return(0,O.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((te,pe)=>{const tt=Y.transaction([Cs],"readwrite").objectStore(Cs),ut=F.createCompositeKey(D);try{const $t=tt.put({compositeKey:ut,value:M});$t.onerror=It=>{pe(al(It,"storage-set"))},$t.onsuccess=()=>{te()}}catch($t){pe(_n.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,te)=>{const ze=F.transaction([Cs],"readwrite").objectStore(Cs),tt=M.createCompositeKey(D);try{const ut=ze.delete(tt);ut.onerror=$t=>{te(al($t,"storage-delete"))},ut.onsuccess=()=>{Y()}}catch(ut){te(_n.create("storage-delete",{originalErrorMessage:ut&&ut.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Fc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),te=yield M;te&&(D.lastFetchStatus=te);const pe=yield F;pe&&(D.lastSuccessfulFetchTimestampMillis=pe);const ze=yield Y;ze&&(D.activeConfig=ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function nu(){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}!function ko(){(0,ie._registerComponent)(new de.wA("remote-config",function I(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw _n.create("registration-window");if(!(0,ne.hl)())throw _n.create("indexed-db-unavailable");const{projectId:te,apiKey:pe,appId:ze}=F.options;if(!te)throw _n.create("registration-project-id");if(!pe)throw _n.create("registration-api-key");if(!ze)throw _n.create("registration-app-id");const tt=new Rp(ze,F.name,M=M||"firebase"),ut=new Fc(tt),$t=new ue.Yd(Ai);$t.logLevel=ue.in.ERROR;const It=new ur(Y,ie.SDK_VERSION,M,te,pe,ze),Sn=new xp(It,tt),qn=new Sp(Sn,tt,ut,$t),cs=new Oc(F,qn,ut,tt,$t);return function Xt(I){const D=(0,ne.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(cs),cs},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ai,"0.3.8"),(0,ie.registerVersion)(Ai,"0.3.8","esm2017")}();const Vc="/firebase-messaging-sw.js",lr="/firebase-cloud-messaging-push-scope",eo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ro="google.c.a.c_id",Uc="google.c.a.c_l",Eh="google.c.a.ts",ya="google.c.a.e";var No=(()=>{return(I=No||(No={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",No;var I})();function Cr(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bc(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Y=new Uint8Array(F.length);for(let te=0;te<F.length;++te)Y[te]=F.charCodeAt(te);return Y}const Dr="fcm_token_details_db",ei="fcm_token_object_Store";function ul(I){return jc.apply(this,arguments)}function jc(){return jc=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Dr))return null;let D=null;return(yield(0,se.X3)(Dr,5,{upgrade:(F=(0,O.Z)(function*(Y,te,pe,ze){var tt;if(te<2||!Y.objectStoreNames.contains(ei))return;const ut=ze.objectStore(ei),$t=yield ut.index("fcmSenderId").get(I);if(yield ut.clear(),$t)if(2===te){const It=$t;if(!It.auth||!It.p256dh||!It.endpoint)return;D={token:It.fcmToken,createTime:null!==(tt=It.createTime)&&void 0!==tt?tt:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:Cr(It.vapidKey)}}}else if(3===te){const It=$t;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Cr(It.auth),p256dh:Cr(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Cr(It.vapidKey)}}}else if(4===te){const It=$t;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Cr(It.auth),p256dh:Cr(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Cr(It.vapidKey)}}}}),function(te,pe,ze,tt){return F.apply(this,arguments)})})).close(),yield(0,se.Lj)(Dr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),ll(D)?D:null;var F}),jc.apply(this,arguments)}function ll(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ni="firebase-messaging-store";let bh=null;function en(){return bh||(bh=(0,se.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Ni)}})),bh}function _a(I){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(I){const D=Jn(I),F=yield(yield en()).transaction(Ni).objectStore(Ni).get(D);if(F)return F;{const Y=yield ul(I.appConfig.senderId);if(Y)return yield zt(I,Y),Y}})).apply(this,arguments)}function zt(I,D){return va.apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(I,D){const M=Jn(I),Y=(yield en()).transaction(Ni,"readwrite");return yield Y.objectStore(Ni).put(D,M),yield Y.done,D})).apply(this,arguments)}function ru(I){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(I){const D=Jn(I),F=(yield en()).transaction(Ni,"readwrite");yield F.objectStore(Ni).delete(D),yield F.done})).apply(this,arguments)}function Jn({appConfig:I}){return I.appId}const un=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Oi(I,D){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,O.Z)(function*(I,D){const M=yield Fo(I),F=Ts(D),Y={method:"POST",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Pi(I.appConfig),Y)).json()}catch(pe){throw un.create("token-subscribe-failed",{errorInfo:pe})}if(te.error)throw un.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw un.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function ro(I,D){return ts.apply(this,arguments)}function ts(){return(ts=(0,O.Z)(function*(I,D){const M=yield Fo(I),F=Ts(D.subscriptionOptions),Y={method:"PATCH",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Pi(I.appConfig)}/${D.token}`,Y)).json()}catch(pe){throw un.create("token-update-failed",{errorInfo:pe})}if(te.error)throw un.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw un.create("token-update-no-token");return te.token})).apply(this,arguments)}function wa(I,D){return pi.apply(this,arguments)}function pi(){return(pi=(0,O.Z)(function*(I,D){const F={method:"DELETE",headers:yield Fo(I)};try{const te=yield(yield fetch(`${Pi(I.appConfig)}/${D}`,F)).json();if(te.error)throw un.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(Y){throw un.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Pi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Fo(I){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*({appConfig:I,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ts({p256dh:I,auth:D,endpoint:M,vapidKey:F}){const Y={web:{endpoint:M,auth:D,p256dh:I}};return F!==eo&&(Y.web.applicationPubKey=F),Y}const hl=6048e5;function Ea(I){return fl.apply(this,arguments)}function fl(){return(fl=(0,O.Z)(function*(I){const D=yield Vo(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Cr(D.getKey("auth")),p256dh:Cr(D.getKey("p256dh"))},F=yield _a(I.firebaseDependencies);if(F){if(ou(F.subscriptionOptions,M))return Date.now()>=F.createTime+hl?pl(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield wa(I.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return Te(I.firebaseDependencies,M)}return Te(I.firebaseDependencies,M)})).apply(this,arguments)}function iu(I){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(I){const D=yield _a(I.firebaseDependencies);D&&(yield wa(I.firebaseDependencies,D.token),yield ru(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function pl(I,D){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,O.Z)(function*(I,D){try{const M=yield ro(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield zt(I.firebaseDependencies,F),M}catch(M){throw yield iu(I),M}})).apply(this,arguments)}function Te(I,D){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(I,D){const F={token:yield Oi(I,D),createTime:Date.now(),subscriptionOptions:D};return yield zt(I,F),F.token})).apply(this,arguments)}function Vo(I,D){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bc(D)})})).apply(this,arguments)}function ou(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function io(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function ti(I,D){if(!D.notification)return;I.notification={};const M=D.notification.title;M&&(I.notification.title=M);const F=D.notification.body;F&&(I.notification.body=F);const Y=D.notification.image;Y&&(I.notification.image=Y)}(D,I),function gl(I,D){!D.data||(I.data=D.data)}(D,I),function ml(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const M=D.fcmOptions.link;M&&(I.fcmOptions.link=M);const F=D.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(D,I),D}function yl(I){return"object"==typeof I&&!!I&&Ro in I}function $c(I,D){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function ns(I){return un.create("missing-app-config-values",{valueName:I})}$c("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$c("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cr{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Np(I){if(!I||!I.options)throw ns("App Configuration Object");if(!I.name)throw ns("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of D)if(!M[F])throw ns(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ni(I){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Vc,{scope:lr}),I.swRegistration.update().catch(()=>{})}catch(D){throw un.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function As(I,D){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield ni(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw un.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function _l(I,D){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=eo)})).apply(this,arguments)}function vl(){return(vl=(0,O.Z)(function*(I,D){if(!navigator)throw un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw un.create("permission-blocked");return yield _l(I,null==D?void 0:D.vapidKey),yield As(I,null==D?void 0:D.serviceWorkerRegistration),Ea(I)})).apply(this,arguments)}function ba(I,D,M){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(I,D,M){const F=du(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ro],message_name:M[Uc],message_time:M[Eh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function du(I){switch(I){case No.NOTIFICATION_CLICKED:return"notification_open";case No.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gc(){return(Gc=(0,O.Z)(function*(I,D){const M=D.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===No.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(io(M)):I.onMessageHandler.next(io(M)));const F=M.data;yl(F)&&"1"===F[ya]&&(yield ba(I,M.messageType,F))})).apply(this,arguments)}const hu="@firebase/messaging",Zc=I=>{const D=new cr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Hc(I,D){return Gc.apply(this,arguments)}(D,M)),D},Uo=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function lu(I,D){return vl.apply(this,arguments)}(D,F)}};function fu(){return Br.apply(this,arguments)}function Br(){return(Br=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qc(){(0,ie._registerComponent)(new de.wA("messaging",Zc,"PUBLIC")),(0,ie._registerComponent)(new de.wA("messaging-internal",Uo,"PRIVATE")),(0,ie.registerVersion)(hu,"0.9.13"),(0,ie.registerVersion)(hu,"0.9.13","esm2017")}();const Wc="analytics",Pp="firebase_id",rs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ao="https://www.googletagmanager.com/gtag/js",Pn=new ue.Yd("@firebase/analytics");function Kc(I){return Promise.all(I.map(D=>D.catch(M=>M)))}function Fp(I,D){const M=document.createElement("script");M.src=`${ao}?l=${I}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Bo(I,D,M,F,Y,te){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(I,D,M,F,Y,te){const pe=F[Y];try{if(pe)yield D[pe];else{const tt=(yield Kc(M)).find(ut=>ut.measurementId===Y);tt&&(yield D[tt.appId])}}catch(ze){Pn.error(ze)}I("config",Y,te)})).apply(this,arguments)}function Lp(I,D,M,F,Y){return is.apply(this,arguments)}function is(){return(is=(0,O.Z)(function*(I,D,M,F,Y){try{let te=[];if(Y&&Y.send_to){let pe=Y.send_to;Array.isArray(pe)||(pe=[pe]);const ze=yield Kc(M);for(const tt of pe){const ut=ze.find(It=>It.measurementId===tt),$t=ut&&D[ut.appId];if(!$t){te=[];break}te.push($t)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),I("event",F,Y||{})}catch(te){Pn.error(te)}})).apply(this,arguments)}function nn(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(ao))return D;return null}const it=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Da=new class Dn{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Yc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function jo(I){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(I){var D;const{appId:M,apiKey:F}=I,Y={method:"GET",headers:Yc(F)},te=rs.replace("{app-id}",M),pe=yield fetch(te,Y);if(200!==pe.status&&304!==pe.status){let ze="";try{const tt=yield pe.json();(null===(D=tt.error)||void 0===D?void 0:D.message)&&(ze=tt.error.message)}catch(tt){}throw it.create("config-fetch-failed",{httpStatus:pe.status,responseMessage:ze})}return pe.json()})).apply(this,arguments)}function vn(I){return xs.apply(this,arguments)}function xs(){return(xs=(0,O.Z)(function*(I,D=Da,M){const{appId:F,apiKey:Y,measurementId:te}=I.options;if(!F)throw it.create("no-app-id");if(!Y){if(te)return{measurementId:te,appId:F};throw it.create("no-api-key")}const pe=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new El;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==M?M:6e4),Fi({appId:F,apiKey:Y,measurementId:te},pe,ze,D)})).apply(this,arguments)}function Fi(I,D,M){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:M},F,Y=Da){const{appId:te,measurementId:pe}=I;try{yield Qc(F,D)}catch(ze){if(pe)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pe} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:te,measurementId:pe};throw ze}try{const ze=yield jo(I);return Y.deleteThrottleMetadata(te),ze}catch(ze){if(!Jc(ze)){if(Y.deleteThrottleMetadata(te),pe)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pe} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:te,measurementId:pe};throw ze}const tt=503===Number(ze.customData.httpStatus)?(0,ne.$s)(M,Y.intervalMillis,30):(0,ne.$s)(M,Y.intervalMillis),ut={throttleEndTimeMillis:Date.now()+tt,backoffCount:M+1};return Y.setThrottleMetadata(te,ut),Pn.debug(`Calling attemptFetch again in ${tt} millis`),Fi(I,ut,F,Y)}})).apply(this,arguments)}function Qc(I,D){return new Promise((M,F)=>{const Y=Math.max(D-Date.now(),0),te=setTimeout(M,Y);I.addEventListener(()=>{clearTimeout(te),F(it.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Jc(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class El{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function bl(){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(){if(!(0,ne.hl)())return Pn.warn(it.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return Pn.warn(it.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function $o(){return($o=(0,O.Z)(function*(I,D,M,F,Y,te,pe){var ze;const tt=vn(I);tt.then(qn=>{M[qn.measurementId]=qn.appId,I.options.measurementId&&qn.measurementId!==I.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${qn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(qn=>Pn.error(qn)),D.push(tt);const ut=bl().then(qn=>{if(qn)return F.getId()}),[$t,It]=yield Promise.all([tt,ut]);nn()||Fp(te,$t.measurementId),Y("js",new Date);const Sn=null!==(ze=null==pe?void 0:pe.config)&&void 0!==ze?ze:{};return Sn.origin="firebase",Sn.update=!0,null!=It&&(Sn[Pp]=It),Y("config",$t.measurementId,Sn),$t.measurementId})).apply(this,arguments)}class lo{constructor(D){this.app=D}_delete(){return delete er[this.app.options.appId],Promise.resolve()}}let er={},co=[];const ho={};let Go,Rs,Ho="dataLayer",fo=!1;function ss(I,D,M){!function Ta(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),M=it.create("invalid-analytics-context",{errorInfo:D});Pn.warn(M.message)}}();const F=I.options.appId;if(!F)throw it.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw it.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=er[F])throw it.create("already-exists",{id:F});if(!fo){!function uo(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Ho);const{wrappedGtag:te,gtagCore:pe}=function Vp(I,D,M,F,Y){let te=function(...pe){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(te=window[Y]),window[Y]=function gu(I,D,M,F){function te(){return(te=(0,O.Z)(function*(pe,ze,tt){try{"event"===pe?yield Lp(I,D,M,ze,tt):"config"===pe?yield Bo(I,D,M,F,ze,tt):I("set",ze)}catch(ut){Pn.error(ut)}})).apply(this,arguments)}return function Y(pe,ze,tt){return te.apply(this,arguments)}}(te,I,D,M),{gtagCore:te,wrappedGtag:window[Y]}}(er,co,ho,Ho,"gtag");Rs=te,Go=pe,fo=!0}return er[F]=function Ms(I,D,M,F,Y,te,pe){return $o.apply(this,arguments)}(I,co,ho,D,Go,Ho,M),new lo(I)}function Gn(){return(Gn=(0,O.Z)(function*(I,D,M,F,Y){if(Y&&Y.global)I("event",M,F);else{const te=yield D;I("event",M,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function yi(){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}const jr="@firebase/analytics";!function Os(){(0,ie._registerComponent)(new de.wA(Wc,(D,{options:M})=>ss(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ie._registerComponent)(new de.wA("analytics-internal",function I(D){try{const M=D.getProvider(Wc).getImmediate();return{logEvent:(F,Y,te)=>function Zo(I,D,M,F){I=(0,ne.m9)(I),function po(I,D,M,F,Y){return Gn.apply(this,arguments)}(Rs,er[I.app.options.appId],D,M,F).catch(Y=>Pn.error(Y))}(M,F,Y,te)}}catch(M){throw it.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ie.registerVersion)(jr,"0.7.9"),(0,ie.registerVersion)(jr,"0.7.9","esm2017")}();var ed=N(4408),Tl=N(7565);const Aa=new class An extends Tl.v{}(class Vi extends ed.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var td=N(4986),Dh=N(8505),Ar=N(9468),Sr=N(5363);const Sa=new c.GfV("7.3.0"),qo="__angularfire_symbol__analyticsIsSupportedValue",as="__angularfire_symbol__analyticsIsSupported",Ps="__angularfire_symbol__remoteConfigIsSupportedValue",us="__angularfire_symbol__remoteConfigIsSupported",zo="__angularfire_symbol__messagingIsSupportedValue",xt="__angularfire_symbol__messagingIsSupported";function Ko(I,D,M){if(D){if(1===D.length)return D[0];const te=D.filter(pe=>pe.app===M);if(1===te.length)return te[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[as]||(globalThis[as]=yi().then(I=>globalThis[qo]=I).catch(()=>globalThis[qo]=!1)),globalThis[xt]||(globalThis[xt]=fu().then(I=>globalThis[zo]=I).catch(()=>globalThis[zo]=!1)),globalThis[us]||(globalThis[us]=nu().then(I=>globalThis[Ps]=I).catch(()=>globalThis[Ps]=!1));const Up=(I,D)=>{const M=D?[D]:(0,J.C6)(),F=[];return M.forEach(Y=>{Y.container.getProvider(I).instances.forEach(pe=>{F.includes(pe)||F.push(pe)})}),F};function ls(){}class _i{constructor(D,M=Aa){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const Y=this.zone;return this.delegate.schedule(function(pe){Y.runGuarded(()=>{D.apply(this,[pe])})},M,F)}}class _u{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ls,{},ls,ls)),M.pipe((0,Dh.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let rd=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new _i(Zone.current)),this.insideAngular=M.run(()=>new _i(Zone.current,td.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(c.LFG(c.R0b))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ui(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Th(I){return Ui(),function Fs(I){return function(M){return(M=M.lift(new _u(I.ngZone))).pipe((0,Ar.R)(I.outsideAngular),(0,Sr.Q)(I.insideAngular))}}(Ui())(I)}},2090:(qe,me,N)=>{N.d(me,{$s:()=>Lt,BH:()=>Be,G6:()=>Ve,L:()=>se,LL:()=>oe,Mn:()=>Ie,Sg:()=>xe,UG:()=>ye,US:()=>de,ZB:()=>j,ZR:()=>ge,b$:()=>et,d:()=>Se,eu:()=>we,hl:()=>B,jU:()=>be,m9:()=>ar,ne:()=>di,pd:()=>vs,r3:()=>wr,ru:()=>We,tV:()=>le,uI:()=>Qe,vZ:()=>Wr,w1:()=>Ee,xO:()=>Er,xb:()=>Ot,z$:()=>Ae,zI:()=>z,zd:()=>Ti});const ie=function(L){const G=[];let Z=0;for(let Ce=0;Ce<L.length;Ce++){let H=L.charCodeAt(Ce);H<128?G[Z++]=H:H<2048?(G[Z++]=H>>6|192,G[Z++]=63&H|128):55296==(64512&H)&&Ce+1<L.length&&56320==(64512&L.charCodeAt(Ce+1))?(H=65536+((1023&H)<<10)+(1023&L.charCodeAt(++Ce)),G[Z++]=H>>18|240,G[Z++]=H>>12&63|128,G[Z++]=H>>6&63|128,G[Z++]=63&H|128):(G[Z++]=H>>12|224,G[Z++]=H>>6&63|128,G[Z++]=63&H|128)}return G},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,G){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let H=0;H<L.length;H+=3){const X=L[H],Me=H+1<L.length,Ke=Me?L[H+1]:0,dt=H+2<L.length,wt=dt?L[H+2]:0;let Rn=(15&Ke)<<2|wt>>6,br=63&wt;dt||(br=64,Me||(Rn=64)),Ce.push(Z[X>>2],Z[(3&X)<<4|Ke>>4],Z[Rn],Z[br])}return Ce.join("")},encodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(L):this.encodeByteArray(ie(L),G)},decodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(L):function(L){const G=[];let Z=0,Ce=0;for(;Z<L.length;){const H=L[Z++];if(H<128)G[Ce++]=String.fromCharCode(H);else if(H>191&&H<224){const X=L[Z++];G[Ce++]=String.fromCharCode((31&H)<<6|63&X)}else if(H>239&&H<365){const dt=((7&H)<<18|(63&L[Z++])<<12|(63&L[Z++])<<6|63&L[Z++])-65536;G[Ce++]=String.fromCharCode(55296+(dt>>10)),G[Ce++]=String.fromCharCode(56320+(1023&dt))}else{const X=L[Z++],Me=L[Z++];G[Ce++]=String.fromCharCode((15&H)<<12|(63&X)<<6|63&Me)}}return G.join("")}(this.decodeStringToByteArray(L,G))},decodeStringToByteArray(L,G){this.init_();const Z=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let H=0;H<L.length;){const X=Z[L.charAt(H++)],Ke=H<L.length?Z[L.charAt(H)]:0;++H;const wt=H<L.length?Z[L.charAt(H)]:64;++H;const vt=H<L.length?Z[L.charAt(H)]:64;if(++H,null==X||null==Ke||null==wt||null==vt)throw Error();Ce.push(X<<2|Ke>>4),64!==wt&&(Ce.push(Ke<<4&240|wt>>2),64!==vt&&Ce.push(wt<<6&192|vt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},se=function(L){return function(L){const G=ie(L);return de.encodeByteArray(G,!0)}(L).replace(/\./g,"")},le=function(L){try{return de.decodeString(L,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function j(L,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return G}for(const Z in G)!G.hasOwnProperty(Z)||!K(Z)||(L[Z]=j(L[Z],G[Z]));return L}function K(L){return"__proto__"!==L}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,Z)=>{this.resolve=G,this.reject=Z})}wrapCallback(G){return(Z,Ce)=>{Z?this.reject(Z):this.resolve(Ce),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(Z):G(Z,Ce))}}}function xe(L,G){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=G||"demo-project",H=L.iat||0,X=L.sub||L.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:H,exp:H+3600,auth_time:H,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},L);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(Me)),""].join(".")}function Ae(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function be(){return"object"==typeof self&&self.self===self}function We(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return Ae().indexOf("Electron/")>=0}function Ee(){const L=Ae();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ie(){return Ae().indexOf("MSAppHost/")>=0}function Ve(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function we(){return new Promise((L,G)=>{try{let Z=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(Ce);H.onsuccess=()=>{H.result.close(),Z||self.indexedDB.deleteDatabase(Ce),L(!0)},H.onupgradeneeded=()=>{Z=!1},H.onerror=()=>{var X;G((null===(X=H.error)||void 0===X?void 0:X.message)||"")}}catch(Z){G(Z)}})}function z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ge extends Error{constructor(G,Z,Ce){super(Z),this.code=G,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(G,Z,Ce){this.service=G,this.serviceName=Z,this.errors=Ce}create(G,...Z){const Ce=Z[0]||{},H=`${this.service}/${G}`,X=this.errors[G],Me=X?function Ne(L,G){return L.replace(at,(Z,Ce)=>{const H=G[Ce];return null!=H?String(H):`<${Ce}?>`})}(X,Ce):"Error";return new ge(H,`${this.serviceName}: ${Me} (${H}).`,Ce)}}const at=/\{\$([^}]+)}/g;function wr(L,G){return Object.prototype.hasOwnProperty.call(L,G)}function Ot(L){for(const G in L)if(Object.prototype.hasOwnProperty.call(L,G))return!1;return!0}function Wr(L,G){if(L===G)return!0;const Z=Object.keys(L),Ce=Object.keys(G);for(const H of Z){if(!Ce.includes(H))return!1;const X=L[H],Me=G[H];if(ir(X)&&ir(Me)){if(!Wr(X,Me))return!1}else if(X!==Me)return!1}for(const H of Ce)if(!Z.includes(H))return!1;return!0}function ir(L){return null!==L&&"object"==typeof L}function Er(L){const G=[];for(const[Z,Ce]of Object.entries(L))Array.isArray(Ce)?Ce.forEach(H=>{G.push(encodeURIComponent(Z)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(Z)+"="+encodeURIComponent(Ce));return G.length?"&"+G.join("&"):""}function Ti(L){const G={};return L.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[H,X]=Ce.split("=");G[decodeURIComponent(H)]=decodeURIComponent(X)}}),G}function vs(L){const G=L.indexOf("?");if(!G)return"";const Z=L.indexOf("#",G);return L.substring(G,Z>0?Z:void 0)}function di(L,G){const Z=new ft(L,G);return Z.subscribe.bind(Z)}class ft{constructor(G,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{G(this)}).catch(Ce=>{this.error(Ce)})}next(G){this.forEachObserver(Z=>{Z.next(G)})}error(G){this.forEachObserver(Z=>{Z.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,Z,Ce){let H;if(void 0===G&&void 0===Z&&void 0===Ce)throw new Error("Missing Observer.");H=function cn(L,G){if("object"!=typeof L||null===L)return!1;for(const Z of G)if(Z in L&&"function"==typeof L[Z])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:Z,complete:Ce},void 0===H.next&&(H.next=yn),void 0===H.error&&(H.error=yn),void 0===H.complete&&(H.complete=yn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Me){}}),this.observers.push(H),X}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,G)}sendOne(G,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{Z(this.observers[G])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}function Lt(L,G=1e3,Z=2){const Ce=G*Math.pow(Z,L),H=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+H)}function ar(L){return L&&L._delegate?L._delegate:L}},8171:(qe,me,N)=>{var c=N(5e3);let J=null;function O(){return J}const ue=new c.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function le(){return(0,c.LFG)(j)}()},providedIn:"platform"}),n})();const $=new c.OlP("Location Initialized");let j=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Be(){return new j((0,c.LFG)(ue))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function be(n){const e=(0,c.LFG)(ue).location;return new et((0,c.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new c.OlP("appBaseHref");let et=(()=>{class n extends ye{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+Qe(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+Qe(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se),c.LFG(We,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+Qe(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+Qe(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se),c.LFG(We,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ae(Ve(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=xe,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(c.LFG(ye),c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ie(){return new Ee((0,c.LFG)(ye),(0,c.LFG)(se))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}let Xr=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Es{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Es(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),Xs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Xs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Xs(n,e){n.context.$implicit=e.item}let dn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){eu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){eu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Xt{constructor(){this.$implicit=null,this.ngIf=null}}function eu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class Is{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Rc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const xp=new Rc,es=new Is;let Nc=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return xp;if((0,c.F4k)(t))return es;throw function ur(n,e){return new c.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1}),n})(),ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Oo(n){return"server"===n}let ll=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Po((0,c.LFG)(ue),window)}),n})();class Po{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ni(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=cl(this.window.history)||cl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function cl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class no extends class _a extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){J||(J=n)}(new no)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function va(){return zt=zt||document.querySelector("base"),zt?zt.getAttribute("href"):null}();return null==t?null:function Ds(n){ru=ru||document.createElement("a"),ru.setAttribute("href",n);const e=ru.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function pa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ru,zt=null;const Jn=new c.OlP("TRANSITION_ID"),un=[{provide:c.ip1,useFactory:function dl(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Jn,ue,c.zs3],multi:!0}];class Oi{static init(){(0,c.VLi)(new Oi)}addToWindow(e){c.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const o=c.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const m=function(E){h=h||E,u--,0==u&&r(h)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Xn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ro=new c.OlP("EventManagerPlugins");let ts=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ro),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class wa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let pi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Pi=(()=>{class n extends pi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Fo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fo))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Fo(n){O().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ts=/%COMP%/g;function Lo(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Lo(n,o,t):(o=o.replace(Ts,n),t.push(o))}return t}function Te(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vo=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new an(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ti(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case c.ifc.ShadowDom:return new gl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Lo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ts),c.LFG(Pi),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class an{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=pt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=pt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,o&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Te(r)):this.eventManager.addEventListener(e,t,Te(r))}}class ti extends an{constructor(e,t,r,o){super(e),this.component=r;const u=Lo(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function su(n){return"_ngcontent-%COMP%".replace(Ts,n)}(o+"-"+r.id),this.hostAttr=function pl(n){return"_nghost-%COMP%".replace(Ts,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class gl extends an{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Lo(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ml=(()=>{class n extends wa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const yl=["alt","control","meta","shift"],Np={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ns={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},cr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ni=(()=>{class n extends wa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(yl.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),h+=E+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function au(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ns.hasOwnProperty(e)&&(e=ns[e]))}return Np[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),yl.forEach(u=>{u!=o&&cr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const lu=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function As(){no.makeCurrent(),Oi.init()},multi:!0},{provide:ue,useFactory:function _l(){return(0,c.RDi)(document),document},deps:[]}]),vl=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function gi(){return new c.qLn},deps:[]},{provide:ro,useClass:ml,multi:!0,deps:[ue,c.R0b,c.Lbi]},{provide:ro,useClass:ni,multi:!0,deps:[ue]},{provide:Vo,useClass:Vo,deps:[ts,Pi,c.AFp]},{provide:c.FYo,useExisting:Vo},{provide:pi,useExisting:Pi},{provide:Pi,useClass:Pi,deps:[ue]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:ts,useClass:ts,deps:[ro,c.R0b]},{provide:class en{},useClass:Xn,deps:[]}];let ba=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Jn,useExisting:c.AFp},un]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:vl,imports:[ya,c.hGG]}),n})();"undefined"!=typeof window&&window;var nn=N(8996),Ca=N(3269);function it(...n){const e=(0,Ca.yG)(n);return(0,nn.D)(n,e)}var Tr=N(7579);class mi extends Tr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Dn=N(9751);const{isArray:Da}=Array,{getPrototypeOf:Yc,prototype:jo,keys:Ss}=Object;function vn(n){if(1===n.length){const e=n[0];if(Da(e))return{args:e,keys:null};if(function xs(n){return n&&"object"==typeof n&&Yc(n)===jo}(e)){const t=Ss(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Fi=N(4671),gt=N(4004);const{isArray:Qc}=Array;function El(n){return(0,gt.U)(e=>function Jc(n,e){return Qc(e)?n(...e):n(e)}(n,e))}function bl(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Hn=N(5403),Ms=N(9672);function er(n,e,t){n?(0,Ms.f)(t,n,e):e()}var co=N(576);function ho(n,e){const t=(0,co.m)(n)?n:()=>n,r=o=>o.error(t());return new Dn.y(e?o=>e.schedule(r,0,o):r)}const ks=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Go=N(8189);function fo(...n){return function Rs(){return(0,Go.J)(1)}()((0,nn.D)(n,(0,Ca.yG)(n)))}var Il=N(8421);function Ta(n){return new Dn.y(e=>{(0,Il.Xf)(n()).subscribe(e)})}var ss=N(515),po=N(727),Gn=N(4482);function Cl(){return(0,Gn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ns extends Dn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Gn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new po.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=po.w0.EMPTY)}return e}refCount(){return Cl()(this)}}function Tn(n,e){return(0,Gn.e)((t,r)=>{let o=null,u=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,Hn.x)(r,E=>{null==o||o.unsubscribe();let C=0;const S=u++;(0,Il.Xf)(n(E,S)).subscribe(o=(0,Hn.x)(r,k=>r.next(e?e(E,k,S,C++):k),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var ri=N(5698);function go(...n){const e=(0,Ca.yG)(n);return(0,Gn.e)((t,r)=>{(e?fo(n,t,e):fo(n,t)).subscribe(r)})}function os(n,e,t,r,o){return(u,h)=>{let m=t,E=e,C=0;u.subscribe((0,Hn.x)(h,S=>{const k=C++;E=m?n(E,S,k):(m=!0,S),r&&h.next(E)},o&&(()=>{m&&h.next(E),h.complete()})))}}function Li(n,e){return(0,Gn.e)(os(n,e,arguments.length>=2,!0))}function Zn(n,e){return(0,Gn.e)((t,r)=>{let o=0;t.subscribe((0,Hn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function ii(n){return(0,Gn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Hn.x)(t,void 0,void 0,h=>{u=(0,Il.Xf)(n(h,ii(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var wn=N(5577);function yi(n,e){return(0,co.m)(e)?(0,wn.z)(n,e,1):(0,wn.z)(n,1)}function mu(n){return n<=0?()=>ss.E:(0,Gn.e)((e,t)=>{let r=[];e.subscribe((0,Hn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Dl(n=hn){return(0,Gn.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function hn(){return new ks}function Ch(n){return(0,Gn.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Zo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zn((o,u)=>n(o,u,r)):Fi.y,(0,ri.q)(1),t?Ch(e):Dl(()=>new ks))}var jr=N(8505);class Os{constructor(e,t){this.id=e,this.url=t}}class ed extends Os{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vi extends Os{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tl extends Os{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class An extends Os{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Aa extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yu extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class td extends Os{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Dh extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Sa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class as{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class us{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zo{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class nd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wo(n){return new nd(n)}const dr="ngNavigationCancelingError";function xa(n){const e=Error("NavigationCancelingError: "+n);return e[dr]=!0,e}function Up(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function _i(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!_u(n[o],e[o]))return!1;return!0}function _u(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function rd(n){return Array.prototype.concat.apply([],n)}function Ui(n){return n.length>0?n[n.length-1]:null}function on(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hr(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,nn.D)(Promise.resolve(n)):it(n)}const Th={exact:function I(n,e,t){if(!ut(n.segments,e.segments)||!Y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:M},Fs={exact:function Ma(n,e){return _i(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_u(n[t],e[t]))},ignored:()=>!0};function Yo(n,e,t){return Th[t.paths](n.root,e.root,t.matrixParams)&&Fs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ut(o,t)||e.hasChildren()||!Y(o,t,r))}if(n.segments.length===t.length){if(!ut(n.segments,t)||!Y(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!M(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ut(n.segments,o)&&Y(n.segments,o,r)&&n.children[xt])&&F(n.children[xt],e,u,r)}}function Y(n,e,t){return e.every((r,o)=>Fs[t](n[o].parameters,r.parameters))}class te{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wo(this.queryParams)),this._queryParamMap}toString(){return qn.serialize(this)}}class pe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,on(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cs(this)}}class ze{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wo(this.parameters)),this._parameterMap}toString(){return xl(this)}}function ut(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class It{}class Sn{parse(e){const t=new Bp(e);return new te(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Bi(e.root,!0)}`,r=function Ah(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${fr(t)}=${fr(o)}`).join("&"):`${fr(t)}=${fr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ds(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qn=new Sn;function cs(n){return n.segments.map(e=>xl(e)).join("/")}function Bi(n,e){if(!n.hasChildren())return cs(n);if(e){const t=n.children[xt]?Bi(n.children[xt],!1):"",r=[];return on(n.children,(o,u)=>{u!==xt&&r.push(`${u}:${Bi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $t(n,e){let t=[];return on(n.children,(r,o)=>{o===xt&&(t=t.concat(e(r,o)))}),on(n.children,(r,o)=>{o!==xt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===xt?[Bi(n.children[xt],!1)]:[`${o}:${Bi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${cs(n)}/${t[0]}`:`${cs(n)}/(${t.join("//")})`}}function vi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fr(n){return vi(n).replace(/%3B/gi,";")}function Ls(n){return vi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sl(n){return decodeURIComponent(n)}function sd(n){return Sl(n.replace(/\+/g,"%20"))}function xl(n){return`${Ls(n.path)}${function od(n){return Object.keys(n).map(e=>`;${Ls(e)}=${Ls(n[e])}`).join("")}(n.parameters)}`}const Sh=/^[^\/()?;=#]+/;function ad(n){const e=n.match(Sh);return e?e[0]:""}const vu=/^[^=?&#]+/,xh=/^[^&#]+/;class Bp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new pe(e,t)),r}parseSegment(){const e=ad(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ze(Sl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ad(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ad(this.remaining);o&&(r=o,this.capture(r))}e[Sl(t)]=Sl(r)}parseQueryParam(e){const t=function Ml(n){const e=n.match(vu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function s0(n){const e=n.match(xh);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=sd(t),u=sd(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ad(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=xt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[xt]:new pe([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Mh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return wu(e,this._root).map(t=>t.value)}}function jp(n,e){if(n===e.value)return e;for(const t of e.children){const r=jp(n,t);if(r)return r}return null}function wu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wu(n,t);if(r.length)return r.unshift(e),r}return[]}class mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Eu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class kl extends Mh{constructor(e,t){super(e),this.snapshot=t,cd(this,e)}toString(){return this.snapshot.toString()}}function ud(n,e){const t=function bu(n,e){const h=new _o([],{},{},"",{},xt,e,null,n.root,-1,{});return new ld("",new mo(h,[]))}(n,e),r=new mi([new ze("",{})]),o=new mi({}),u=new mi({}),h=new mi({}),m=new mi(""),E=new yo(r,o,h,m,u,xt,e,t.root);return E.snapshot=t.root,new kl(new mo(E,[]),t)}class yo{constructor(e,t,r,o,u,h,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Wo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Wo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $p(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function o0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _o{constructor(e,t,r,o,u,h,m,E,C,S,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=S,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ld extends Mh{constructor(e,t){super(t),this.url=e,cd(this,t)}toString(){return kh(this._root)}}function cd(n,e){e.value._routerState=n,e.children.forEach(t=>cd(n,t))}function kh(n){const e=n.children.length>0?` { ${n.children.map(kh).join(", ")} } `:"";return`${n.value}${e}`}function dd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_i(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_i(e.params,t.params)||n.params.next(t.params),function ls(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_i(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_i(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function hd(n,e){const t=_i(n.params,e.params)&&function tt(n,e){return ut(n,e)&&n.every((t,r)=>_i(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hd(n.parent,e.parent))}function Rl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function oy(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Rl(n,r,o);return Rl(n,r)})}(n,e,t);return new mo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>Rl(n,m)),h}}const r=function ay(n){return new yo(new mi(n.url),new mi(n.params),new mi(n.queryParams),new mi(n.fragment),new mi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Rl(n,u));return new mo(r,o)}}function wi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vo(n){return"object"==typeof n&&null!=n&&n.outlets}function Nl(n,e,t,r,o){let u={};if(r&&on(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new te(t,u,o);const h=ly(n,e,t);return new te(h,u,o)}function ly(n,e,t){const r={};return on(n.children,(o,u)=>{r[u]=o===e?t:ly(o,e,t)}),new pe(n.segments,r)}class Gp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wi(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(vo);if(o&&o!==Ui(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qp(n,e,t){if(n||(n=new pe([],{})),0===n.segments.length&&n.hasChildren())return pd(n,e,t);const r=function cy(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],m=t[r];if(vo(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!Nh(E,C,h))return u;r+=2}else{if(!Nh(E,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new pe(n.segments.slice(0,r.pathIndex),{});return u.children[xt]=new pe(n.segments.slice(r.pathIndex),n.children),pd(u,0,o)}return r.match&&0===o.length?new pe(n.segments,{}):r.match&&!n.hasChildren()?dy(n,e,t):r.match?pd(n,0,o):dy(n,e,t)}function pd(n,e,t){if(0===t.length)return new pe(n.segments,{});{const r=function Zp(n){return vo(n[0])?n[0].outlets:{[xt]:n}}(t),o={};return on(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=qp(n.children[h],e,u))}),on(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new pe(n.segments,o)}}function dy(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(vo(u)){const E=ka(u.outlets);return new pe(r,E)}if(0===o&&wi(t[0])){r.push(new ze(n.segments[e].path,Ol(t[0]))),o++;continue}const h=vo(u)?u.outlets[xt]:`${u}`,m=o<t.length-1?t[o+1]:null;h&&m&&wi(m)?(r.push(new ze(h,Ol(m))),o+=2):(r.push(new ze(h,{})),o++)}return new pe(r,{})}function ka(n){const e={};return on(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=dy(new pe([],{}),0,t))}),e}function Ol(n){const e={};return on(n,(t,r)=>e[r]=`${t}`),e}function Nh(n,e,t){return n==t.path&&_i(e,t.parameters)}class Pl{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Eu(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),on(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Eu(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Eu(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Eu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new us(u.value.snapshot))}),e.children.length&&this.forwardEvent(new as(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(dd(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),dd(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function gd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=E,h.outlet&&h.outlet.activateWith(o,E),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class md{constructor(e,t){this.routes=e,this.module=t}}function wo(n){return"function"==typeof n}function Iu(n){return n instanceof te}const yd=Symbol("INITIAL_VALUE");function _d(){return Tn(n=>function $o(...n){const e=(0,Ca.yG)(n),t=(0,Ca.jO)(n),{args:r,keys:o}=vn(n);if(0===r.length)return(0,nn.D)([],e);const u=new Dn.y(function lo(n,e,t=Fi.y){return r=>{er(e,()=>{const{length:o}=n,u=new Array(o);let h=o,m=o;for(let E=0;E<o;E++)er(e,()=>{const C=(0,nn.D)(n[E],e);let S=!1;C.subscribe((0,Hn.x)(r,k=>{u[E]=k,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>bl(o,h):Fi.y));return t?u.pipe(El(t)):u}(n.map(e=>e.pipe((0,ri.q)(1),go(yd)))).pipe(Li((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==yd?o:(u===yd&&(r=!0),r||!1!==u&&h!==t.length-1&&!Iu(u)?o:u),e)},yd),Zn(e=>e!==yd),(0,gt.U)(e=>Iu(e)?e:!0===e),(0,ri.q)(1)))}class Wp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Cu,this.attachRef=null}}class Cu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Wp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ll=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new hy(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cu),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class hy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===yo?this.route:e===Cu?this.childContexts:this.parent.get(e,t)}}let Kp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Ll],encapsulation:2}),n})();function Vl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Du(r,fy(e,r))}}function Du(n,e){n.children&&Vl(n.children,e)}function fy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ul(n){const e=n.children&&n.children.map(Ul),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=Kp),t}function $r(n){return n.outlet||xt}function xn(n,e){const t=n.filter(r=>$r(r)===e);return t.push(...n.filter(r=>$r(r)!==e)),t}const Yp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Yp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Up)(t,n,e);if(!u)return Object.assign({},Yp);const h={};on(u.posParams,(E,C)=>{h[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ra(n,e,t,r,o="corrected"){if(t.length>0&&function gy(n,e,t){return t.some(r=>Qo(n,e,r)&&$r(r)!==xt)}(n,t,r)){const h=new pe(e,function py(n,e,t,r){const o={};o[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&$r(u)!==xt){const h=new pe([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[$r(u)]=h}return o}(n,e,r,new pe(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function my(n,e,t){return t.some(r=>Qo(n,e,r))}(n,t,r)){const h=new pe(n.segments,function Qp(n,e,t,r,o,u){const h={};for(const m of r)if(Qo(n,t,m)&&!o[$r(m)]){const E=new pe([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[$r(m)]=E}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new pe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Qo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Jp(n,e,t,r){return!!($r(n)===r||r!==xt&&Qo(e,t,n))&&("**"===n.path||vd(e,n,t).matched)}function Xp(n,e,t){return 0===e.length&&!n.children[t]}class Fh{constructor(e){this.segmentGroup=e||null}}class Tu{constructor(e){this.urlTree=e}}function zn(n){return ho(new Fh(n))}function wd(n){return ho(new Tu(n))}class Au{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Ra(this.urlTree.root,[],[],this.config).segmentGroup,t=new pe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,gt.U)(u=>this.createUrlTree(Bl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ii(u=>{if(u instanceof Tu)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Fh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,gt.U)(o=>this.createUrlTree(Bl(o),e.queryParams,e.fragment))).pipe(ii(o=>{throw o instanceof Fh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new pe([],{[xt]:e}):e;return new te(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(u=>new pe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,nn.D)(o).pipe(yi(u=>{const h=r.children[u],m=xn(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,gt.U)(E=>({segment:E,outlet:u})))}),Li((u,h)=>(u[h.outlet]=h.segment,u),{}),function sy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zn((o,u)=>n(o,u,r)):Fi.y,mu(1),t?Ch(e):Dl(()=>new ks))}())}expandSegment(e,t,r,o,u,h){return(0,nn.D)(r).pipe(yi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,h).pipe(ii(C=>{if(C instanceof Fh)return it(null);throw C}))),Zo(m=>!!m),ii((m,E)=>{if(m instanceof ks||"EmptyError"===m.name)return Xp(t,o,u)?it(new pe([],{})):zn(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,h,m){return Jp(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):zn(t):zn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wd(u):this.lineralizeSegments(r,u).pipe((0,wn.z)(h=>{const m=new pe(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:S}=vd(t,o,u);if(!m)return zn(t);const k=this.applyRedirectCommands(E,o.redirectTo,S);return o.redirectTo.startsWith("/")?wd(k):this.lineralizeSegments(o,k).pipe((0,wn.z)(V=>this.expandSegment(e,t,r,V.concat(C),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?it(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,gt.U)(k=>(r._loadedConfig=k,new pe(o,{})))):it(new pe(o,{}));const{matched:h,consumedSegments:m,remainingSegments:E}=vd(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,wn.z)(S=>{const k=S.module,V=S.routes,{segmentGroup:W,slicedSegments:ae}=Ra(t,m,E,V),Oe=new pe(W.segments,W.children);if(0===ae.length&&Oe.hasChildren())return this.expandChildren(k,V,Oe).pipe((0,gt.U)(Nt=>new pe(m,Nt)));if(0===V.length&&0===ae.length)return it(new pe(m,{}));const Le=$r(r)===u;return this.expandSegment(k,Oe,V,ae,Le?xt:u,!0).pipe((0,gt.U)(kt=>new pe(m.concat(kt.segments),kt.children)))})):zn(t)}getChildConfig(e,t,r){return t.children?it(new md(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?it(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,wn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,gt.U)(u=>(t._loadedConfig=u,u))):function Ed(n){return ho(xa(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):it(new md([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?it(o.map(h=>{const m=e.get(h);let E;if(function l0(n){return n&&wo(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!wo(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return hr(E)})).pipe(_d(),(0,jr.b)(h=>{if(!Iu(h))return;const m=xa(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,gt.U)(h=>!0===h)):it(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return it(r);if(o.numberOfChildren>1||!o.children[xt])return ho(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new te(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return on(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return on(t.children,(m,E)=>{h[E]=this.createSegmentGroup(e,m,r,o)}),new pe(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Bl(n){const e={};for(const r of Object.keys(n.children)){const u=Bl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Vh(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new pe(n.segments.concat(e.segments),e.children)}return n}(new pe(n.segments,e))}class Hr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Jo{constructor(e,t){this.component=e,this.route=t}}function Uh(n,e,t){const r=n._root;return jl(r,e?e._root:null,t,[r.value])}function Na(n,e,t){const r=function Bh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function jl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Eu(e);return n.children.forEach(h=>{(function bd(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const E=function vy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ut(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ut(n.url,e.url)||!_i(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hd(n,e)||!_i(n.queryParams,e.queryParams);default:return!hd(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Hr(r)):(u.data=h.data,u._resolvedData=h._resolvedData),jl(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Jo(m.outlet.component,h))}else h&&$i(e,m,o),o.canActivateChecks.push(new Hr(r)),jl(n,null,u.component?m?m.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),on(u,(h,m)=>$i(h,t.getContext(m),o)),o}function $i(n,e,t){const r=Eu(n),o=n.value;on(r,(u,h)=>{$i(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Jo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class by{}function hs(n){return new Dn.y(e=>e.error(n))}class tg{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Ra(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new _o([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new mo(r,t),u=new ld(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=$p(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=xn(e,u),E=this.processSegmentGroup(m,h,u);if(null===E)return null;r.push(...E)}const o=rg(r);return function ng(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return Xp(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Jp(e,t,r,o))return null;let u,h=[],m=[];if("**"===e.path){const W=r.length>0?Ui(r).parameters:{};u=new _o(r,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),$r(e),e.component,e,ig(t),Oa(t)+r.length,f(e))}else{const W=vd(t,e,r);if(!W.matched)return null;h=W.consumedSegments,m=W.remainingSegments,u=new _o(h,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),$r(e),e.component,e,ig(t),Oa(t)+h.length,f(e))}const E=function Iy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:S}=Ra(t,h,m,E.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===S.length&&C.hasChildren()){const W=this.processChildren(E,C);return null===W?null:[new mo(u,W)]}if(0===E.length&&0===S.length)return[new mo(u,[])];const k=$r(e)===o,V=this.processSegment(E,C,S,k?xt:o);return null===V?null:[new mo(u,V)]}}function Hh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rg(n){const e=[],t=new Set;for(const r of n){if(!Hh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=rg(r.children);e.push(new mo(r.value,o))}return e.filter(r=>!t.has(r))}function ig(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Oa(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function q(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Fe(n){return Tn(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,gt.U)(()=>e)):it(e)})}class lt extends class ct{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const En=new c.OlP("ROUTES");class oi{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,gt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new md(rd(h.injector.get(En,void 0,c.XFs.Self|c.XFs.Optional)).map(Ul),h)}),ii(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ns(o,()=>new Tr.x).pipe(Cl()),t._loader$}loadModuleFactory(e){return hr(e()).pipe((0,wn.z)(t=>t instanceof c.YKP?it(t):(0,nn.D)(this.compiler.compileModuleAsync(t))))}}class Gh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sg(n){throw n}function Pa(n,e,t){return e.parse("/")}function Hl(n,e){return it(null)}const Dd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},og={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fn=(()=>{class n{constructor(t,r,o,u,h,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tr.x,this.errorHandler=sg,this.malformedUriErrorHandler=Pa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hl,afterPreactivation:Hl},this.urlHandlingStrategy=new Gh,this.routeReuseStrategy=new lt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(c.h0i),this.console=h.get(c.c2e);const k=h.get(c.R0b);this.isNgZoneEnabled=k instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function Al(){return new te(new pe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new oi(h,m,V=>this.triggerEvent(new Sr(V)),V=>this.triggerEvent(new Sa(V))),this.routerState=ud(this.currentUrlTree,this.rootComponentType),this.transitions=new mi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Zn(o=>0!==o.id),(0,gt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Tn(o=>{let u=!1,h=!1;return it(o).pipe((0,jr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Tn(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return qh(m.source)&&(this.browserUrlTree=m.extractedUrl),it(m).pipe(Tn(k=>{const V=this.transitions.getValue();return r.next(new ed(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),V!==this.transitions.getValue()?ss.E:Promise.resolve(k)}),function yy(n,e,t,r){return Tn(o=>function tr(n,e,t,r,o){return new Au(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,gt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jr.b)(k=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function g(n,e,t,r,o){return(0,wn.z)(u=>function $l(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new tg(n,e,t,r,o,u).recognize();return null===h?hs(new by):it(h)}catch(h){return hs(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,gt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jr.b)(k=>{if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(W,k)}this.browserUrlTree=k.urlAfterRedirects}const V=new Aa(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);r.next(V)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:W,source:ae,restoredState:Oe,extras:Le}=m,St=new ed(V,this.serializeUrl(W),ae,Oe);r.next(St);const kt=ud(W,this.rootComponentType).snapshot;return it(Object.assign(Object.assign({},m),{targetSnapshot:kt,urlAfterRedirects:W,extras:Object.assign(Object.assign({},Le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ss.E}),Fe(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:W}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!W})}),(0,jr.b)(m=>{const E=new yu(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,gt.U)(m=>Object.assign(Object.assign({},m),{guards:Uh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Id(n,e){return(0,wn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?it(Object.assign(Object.assign({},t),{guardsResult:!0})):function wy(n,e,t,r){return(0,nn.D)(n).pipe((0,wn.z)(o=>function $h(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?it(u.map(m=>{const E=Na(m,e,o);let C;if(function Ph(n){return n&&wo(n.canDeactivate)}(E))C=hr(E.canDeactivate(n,e,t,r));else{if(!wo(E))throw new Error("Invalid CanDeactivate guard");C=hr(E(n,e,t,r))}return C.pipe(Zo())})).pipe(_d()):it(!0)}(o.component,o.route,t,e,r)),Zo(o=>!0!==o,!0))}(h,r,o,n).pipe((0,wn.z)(m=>m&&function zp(n){return"boolean"==typeof n}(m)?function Ey(n,e,t,r){return(0,nn.D)(e).pipe(yi(o=>fo(function eg(n,e){return null!==n&&e&&e(new qo(n)),it(!0)}(o.route.parent,r),function Cd(n,e){return null!==n&&e&&e(new Ps(n)),it(!0)}(o.route,r),function jh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function _y(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Ta(()=>it(h.guards.map(E=>{const C=Na(E,h.node,t);let S;if(function Oh(n){return n&&wo(n.canActivateChild)}(C))S=hr(C.canActivateChild(r,n));else{if(!wo(C))throw new Error("Invalid CanActivateChild guard");S=hr(C(r,n))}return S.pipe(Zo())})).pipe(_d())));return it(u).pipe(_d())}(n,o.path,t),function si(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const o=r.map(u=>Ta(()=>{const h=Na(u,e,t);let m;if(function Fl(n){return n&&wo(n.canActivate)}(h))m=hr(h.canActivate(e,n));else{if(!wo(h))throw new Error("Invalid CanActivate guard");m=hr(h(e,n))}return m.pipe(Zo())}));return it(o).pipe(_d())}(n,o.route,t))),Zo(o=>!0!==o,!0))}(r,u,n,e):it(m)),(0,gt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,jr.b)(m=>{if(Iu(m.guardsResult)){const C=xa(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new td(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),Zn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Fe(m=>{if(m.guards.canActivateChecks.length)return it(m).pipe((0,jr.b)(E=>{const C=new Dh(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),Tn(E=>{let C=!1;return it(E).pipe(function v(n,e){return(0,wn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return it(t);let u=0;return(0,nn.D)(o).pipe(yi(h=>function T(n,e,t,r){return function R(n,e,t,r){const o=q(n);if(0===o.length)return it({});const u={};return(0,nn.D)(o).pipe((0,wn.z)(h=>function he(n,e,t,r){const o=Na(n,e,r);return hr(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,jr.b)(m=>{u[h]=m}))),mu(1),(0,wn.z)(()=>q(u).length===o.length?it(u):ss.E))}(n._resolve,n,e,r).pipe((0,gt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),$p(n,t).resolve),null)))}(h.route,r,n,e)),(0,jr.b)(()=>u++),mu(1),(0,wn.z)(h=>u===o.length?it(t):ss.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,jr.b)(E=>{const C=new Ar(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),Fe(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:W}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!W})}),(0,gt.U)(m=>{const E=function Hp(n,e,t){const r=Rl(n,e._root,t?t._root:void 0);return new kl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,jr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new Pl(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,jr.b)({next(){u=!0},complete(){u=!0}}),function Xc(n){return(0,Gn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ii(m=>{if(h=!0,function Ko(n){return n&&n[dr]}(m)){const E=Iu(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new Tl(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),k={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qh(o.source)};this.scheduleNavigation(S,"imperative",null,k,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new An(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return ss.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const E=Object.assign({},h);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Vl(t),this.config=t.map(Ul),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,S=E?this.currentUrlTree.fragment:h;let k=null;switch(m){case"merge":k=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=u||null}return null!==k&&(k=this.removeEmptyProps(k)),function uy(n,e,t,r,o){if(0===t.length)return Nl(e.root,e.root,e.root,r,o);const u=function a0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Gp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return on(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Gp(t,e,r)}(t);if(u.toRoot())return Nl(e.root,e.root,new pe([],{}),r,o);const h=function u0(n,e,t){if(n.isAbsolute)return new fd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new fd(u,u===e.root,0)}const r=wi(n.commands[0])?0:1;return function Rh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new fd(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?pd(h.segmentGroup,h.index,u.commands):qp(h.segmentGroup,h.index,u.commands);return Nl(e.root,h.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,k,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Iu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Zh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Dd):!1===r?Object.assign({},og):r,Iu(t))return Yo(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Yo(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Vi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var m,E;if(this.disposed)return Promise.resolve(!1);let C,S,k;h?(C=h.resolve,S=h.reject,k=h.promise):k=new Promise((ae,Oe)=>{C=ae,S=Oe});const V=++this.navigationId;let W;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),W=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):W=0,this.setTransition({id:V,targetPageId:W,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:S,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(ae=>Promise.reject(ae))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Tl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function qh(n){return"imperative"!==n}let zh=(()=>{class n{constructor(t,r,o,u,h){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=h,this.commands=null,this.onChanges=new Tr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:xu(this.skipLocationChange),replaceUrl:xu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:xu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fn),c.Y36(yo),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),Fa=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Tr.x,this.subscription=t.events.subscribe(u=>{u instanceof Vi&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,h){if(0!==t||r||o||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:xu(this.skipLocationChange),replaceUrl:xu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:xu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fn),c.Y36(yo),c.Y36(ye))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function xu(n){return""===n||!!n}let d0=(()=>{class n{constructor(t,r,o,u,h,m){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=h,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(E=>{E instanceof Vi&&this.update()})}ngAfterContentInit(){it(this.links.changes,this.linksWithHrefs.changes,it(null)).pipe((0,Go.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,nn.D)(r).pipe((0,Go.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function h0(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fn),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(zh,8),c.Y36(Fa,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(c.Suo(o,zh,5),c.Suo(o,Fa,5)),2&t){let u;c.iGM(u=c.CRH())&&(r.links=u),c.iGM(u=c.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[c.TTD]}),n})();class ag{}class ug{preload(e,t){return it(null)}}let p0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new oi(o,r,E=>t.triggerEvent(new Sr(E)),E=>t.triggerEvent(new Sa(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zn(t=>t instanceof Vi),yi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,nn.D)(o).pipe((0,Go.J)(),(0,gt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?it(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,wn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Fn),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(ag))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Cy=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ed?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zo&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new zo(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Mu=new c.OlP("ROUTER_CONFIGURATION"),ku=new c.OlP("ROUTER_FORROOT_GUARD"),g0=[Ee,{provide:It,useClass:Sn},{provide:Fn,useFactory:function _0(n,e,t,r,o,u,h={},m,E){const C=new Fn(null,n,e,t,r,o,rd(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function Ty(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,C),h.enableTracing&&C.events.subscribe(S=>{var k,V;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),C},deps:[It,Cu,Ee,c.zs3,c.Sil,En,Mu,[class Su{},new c.FiY],[class Ye{},new c.FiY]]},Cu,{provide:yo,useFactory:function v0(n){return n.routerState.root},deps:[Fn]},p0,ug,class f0{preload(e,t){return t().pipe(ii(()=>it(null)))}},{provide:Mu,useValue:{enableTracing:!1}}];function m0(){return new c.PXZ("Router",Fn)}let lg=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[g0,Dy(t),{provide:ku,useFactory:y0,deps:[[Fn,new c.FiY,new c.tp0]]},{provide:Mu,useValue:r||{}},{provide:ye,useFactory:wI,deps:[se,[new c.tBr(We),new c.FiY],Mu]},{provide:Cy,useFactory:cg,deps:[Fn,ll,Mu]},{provide:ag,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ug},{provide:c.PXZ,multi:!0,useFactory:m0},[Td,{provide:c.ip1,multi:!0,useFactory:dg,deps:[Td]},{provide:hg,useFactory:w0,deps:[Td]},{provide:c.tb,multi:!0,useExisting:hg}]]}}static forChild(t){return{ngModule:n,providers:[Dy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ku,8),c.LFG(Fn,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function cg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Cy(n,e,t)}function wI(n,e,t={}){return t.useHash?new Se(n,e):new et(n,e)}function y0(n){return"guarded"}function Dy(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:En,multi:!0,useValue:n}]}let Td=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Fn),h=this.injector.get(Mu);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?it(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Mu),o=this.injector.get(p0),u=this.injector.get(Cy),h=this.injector.get(Fn),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function dg(n){return n.appInitializer.bind(n)}function w0(n){return n.bootstrapListener.bind(n)}const hg=new c.OlP("Router Initializer"),bI=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:104,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"video",1),c._UZ(2,"source",2),c.qZA(),c._UZ(3,"div",3),c.TgZ(4,"div",4),c._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),c.qZA(),c.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),c._uU(13,"Clip it and ship it!"),c.qZA(),c.TgZ(14,"p"),c._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),c.qZA()()()(),c.TgZ(16,"section",9)(17,"h1",10),c._uU(18,"Latest"),c.qZA(),c.TgZ(19,"div",11)(20,"a",12),c._UZ(21,"img",13),c.TgZ(22,"div",14)(23,"div",15)(24,"div",16),c.O4$(),c.TgZ(25,"svg",17),c._UZ(26,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(27,"div",19)(28,"h2",20),c._uU(29," Game Highlighting Clip "),c.qZA(),c.TgZ(30,"p",21),c._uU(31," Luis Ramirez \xb7 "),c.TgZ(32,"span",22),c._uU(33,"March 31, 2020"),c.qZA()()()(),c.TgZ(34,"a",12),c._UZ(35,"img",23),c.TgZ(36,"div",14)(37,"div",15)(38,"div",16),c.O4$(),c.TgZ(39,"svg",17),c._UZ(40,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(41,"div",19)(42,"h2",20),c._uU(43," Game Highlighting Clip "),c.qZA(),c.TgZ(44,"p",21),c._uU(45," Luis Ramirez \xb7 "),c.TgZ(46,"span",22),c._uU(47,"March 31, 2020"),c.qZA()()()(),c.TgZ(48,"a",12),c._UZ(49,"img",24),c.TgZ(50,"div",14)(51,"div",15)(52,"div",16),c.O4$(),c.TgZ(53,"svg",17),c._UZ(54,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(55,"div",19)(56,"h2",20),c._uU(57," Game Highlighting Clip "),c.qZA(),c.TgZ(58,"p",21),c._uU(59," Luis Ramirez \xb7 "),c.TgZ(60,"span",22),c._uU(61,"March 31, 2020"),c.qZA()()()(),c.TgZ(62,"a",12),c._UZ(63,"img",23),c.TgZ(64,"div",14)(65,"div",15)(66,"div",16),c.O4$(),c.TgZ(67,"svg",17),c._UZ(68,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(69,"div",19)(70,"h2",20),c._uU(71," Game Highlighting Clip "),c.qZA(),c.TgZ(72,"p",21),c._uU(73," Luis Ramirez \xb7 "),c.TgZ(74,"span",22),c._uU(75,"March 31, 2020"),c.qZA()()()(),c.TgZ(76,"a",12),c._UZ(77,"img",24),c.TgZ(78,"div",14)(79,"div",15)(80,"div",16),c.O4$(),c.TgZ(81,"svg",17),c._UZ(82,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(83,"div",19)(84,"h2",20),c._uU(85," Game Highlighting Clip "),c.qZA(),c.TgZ(86,"p",21),c._uU(87," Luis Ramirez \xb7 "),c.TgZ(88,"span",22),c._uU(89,"March 31, 2020"),c.qZA()()()(),c.TgZ(90,"a",12),c._UZ(91,"img",13),c.TgZ(92,"div",14)(93,"div",15)(94,"div",16),c.O4$(),c.TgZ(95,"svg",17),c._UZ(96,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(97,"div",19)(98,"h2",20),c._uU(99," Game Highlighting Clip "),c.qZA(),c.TgZ(100,"p",21),c._uU(101," Luis Ramirez \xb7 "),c.TgZ(102,"span",22),c._uU(103,"March 31, 2020"),c.qZA()()()()()())},styles:[""]}),n})()},{path:"about",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,template:function(t,r){1&t&&(c.TgZ(0,"p"),c._uU(1,"about works!"),c.qZA())},styles:[""]}),n})()},{path:"clip/:id",component:(()=>{class n{constructor(t){this.route=t,this.id=""}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(yo))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-clip"]],decls:57,vars:1,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative"],["controls","","data-setup","{}",1,"video-js","vjs-theme-forest","mx-auto"],["src","assets/video/hero.webm","type","video/webm"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c._uU(5," Uploaded By Luis on "),c.TgZ(6,"span"),c._uU(7,"March 25, 2022"),c.qZA()(),c.TgZ(8,"div",4)(9,"video",5),c._UZ(10,"source",6),c.qZA()()()(),c.TgZ(11,"div",7)(12,"h2",8),c._uU(13,"More Clips"),c.qZA(),c.TgZ(14,"div",9)(15,"a",10),c._UZ(16,"img",11),c.TgZ(17,"div",4)(18,"div",12)(19,"div",13),c.O4$(),c.TgZ(20,"svg",14),c._UZ(21,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(22,"div",16)(23,"h2",17),c._uU(24," Game Highlighting Clip "),c.qZA(),c.TgZ(25,"p",18),c._uU(26," Luis Ramirez \xb7 "),c.TgZ(27,"span",19),c._uU(28,"March 31, 2020"),c.qZA()()()(),c.TgZ(29,"a",10),c._UZ(30,"img",20),c.TgZ(31,"div",4)(32,"div",12)(33,"div",13),c.O4$(),c.TgZ(34,"svg",14),c._UZ(35,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(36,"div",16)(37,"h2",17),c._uU(38," Game Highlighting Clip "),c.qZA(),c.TgZ(39,"p",18),c._uU(40," Luis Ramirez \xb7 "),c.TgZ(41,"span",19),c._uU(42,"March 31, 2020"),c.qZA()()()(),c.TgZ(43,"a",10),c._UZ(44,"img",21),c.TgZ(45,"div",4)(46,"div",12)(47,"div",13),c.O4$(),c.TgZ(48,"svg",14),c._UZ(49,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(50,"div",16)(51,"h2",17),c._uU(52," Game Highlighting Clip "),c.qZA(),c.TgZ(53,"p",18),c._uU(54," Luis Ramirez \xb7 "),c.TgZ(55,"span",19),c._uU(56,"March 31, 2020"),c.qZA()()()()()()),2&t&&(c.xp6(3),c.Oqu(r.id))},styles:[""]}),n})()},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-not-found"]],decls:15,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1),c._uU(2,"404"),c.qZA(),c._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),c.qZA())},styles:[""]}),n})()}];let I0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[lg.forRoot(bI)],lg]}),n})();var _e=N(5861),pg=N(4986),cA=N(5032);function Ay(n,e){return e?t=>fo(e.pipe((0,ri.q)(1),function C0(){return(0,Gn.e)((n,e)=>{n.subscribe((0,Hn.x)(e,cA.Z))})}()),t.pipe(Ay(n))):(0,wn.z)((t,r)=>n(t,r).pipe((0,ri.q)(1),function II(n){return(0,gt.U)(()=>n)}(t)))}var CI=N(3532);var D0=N(6451),gg=N(5363),AI=N(6063);class SI extends Tr.x{constructor(e=1/0,t=1/0,r=AI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)m=E;m&&r.splice(0,m+1)}}}var xI=N(3099);function Sy(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,xI.B)({connector:()=>new SI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function T0(n,e){return(0,co.m)(e)?Tn(()=>n,e):Tn(()=>n)}var xy=N(9468),xr=N(5813),mt=N(2011);N(5867);var Va=N(9681),Ad=N(4859),Ut=N(2090),Ru=N(1877);const k0=new Map,RI={activated:!1,tokenObservers:[]},NI={initialized:!1,enabled:!1};function pr(n){return k0.get(n)||RI}function Xo(n,e){k0.set(n,e)}function yg(){return NI}class fA{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Ut.BH,yield function pA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ut.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Hi=new Ut.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function PI(n){if(!pr(n).activated)throw Hi.create("use-before-activation",{appName:n.name})}function ea(n,e){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const k=yield o.getHeartbeatsHeader();k&&(r["X-Firebase-Client"]=k)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(k){throw Hi.create("fetch-network-error",{originalErrorMessage:k.message})}if(200!==h.status)throw Hi.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(k){throw Hi.create("fetch-parse-error",{originalErrorMessage:k.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+C,issuedAtTimeMillis:S}})).apply(this,arguments)}function Ly(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Yh="firebase-app-check-store";let Qh=null;function V0(){return Qh||(Qh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Hi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Yh,{keyPath:"compositeKey"})}}catch(t){e(Hi.create("storage-open",{originalErrorMessage:t.message}))}}),Qh)}function Gl(){return(Gl=(0,_e.Z)(function*(n,e){const r=(yield V0()).transaction(Yh,"readwrite"),u=r.objectStore(Yh).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=E=>{h()},r.onerror=E=>{var C;m(Hi.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Ba=new Ru.Yd("@firebase/app-check");function jy(n,e){return(0,Ut.hl)()?function LI(n,e){return function B0(n,e){return Gl.apply(this,arguments)}(function ql(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ba.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function vg(){return yg().enabled}function $y(){return xd.apply(this,arguments)}function xd(){return(xd=(0,_e.Z)(function*(){const n=yg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const $0={error:"UNKNOWN_ERROR"};function yA(n){return Ut.US.encodeString(JSON.stringify(n),!1)}function ef(n){return wg.apply(this,arguments)}function wg(){return(wg=(0,_e.Z)(function*(n,e=!1){const t=n.app;PI(t);const r=pr(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&bg(E)&&(o=E)}if(!e&&o&&bg(o))return{token:o.token};let m,h=!1;if(vg()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ea(Ly(t,yield $y()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),h=!0);const E=yield r.exchangeTokenPromise;return yield jy(t,E),Xo(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),h=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Ba.warn(E.message):Ba.error(E),u=E}return o?(m={token:o.token},Xo(t,Object.assign(Object.assign({},r),{token:o})),yield jy(t,o)):m=jI(u),h&&Gi(t,m),m})).apply(this,arguments)}function Eg(n,e){const t=pr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Xo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function H0(n){const{app:e}=n,t=pr(e);let r=t.tokenRefresher;r||(r=function BI(n){const{app:e}=n;return new fA((0,_e.Z)(function*(){let r;if(r=pr(e).token?yield ef(n,!0):yield ef(n),r.error)throw r.error}),()=>!0,()=>{const t=pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Xo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Gi(n,e){const t=pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function bg(n){return n.expireTimeMillis-Date.now()>0}function jI(n){return{token:yA($0),error:n}}class _A{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=pr(this.app);for(const t of e)Eg(this.app,t.next);return Promise.resolve()}}const Y0="app-check-internal";!function WI(){(0,Va._registerComponent)(new Ad.wA("app-check",n=>function vA(n,e){return new _A(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Y0).initialize()})),(0,Va._registerComponent)(new Ad.wA(Y0,n=>function G0(n){return{getToken:e=>ef(n,e),addTokenListener:e=>function Hy(n,e,t,r){const{app:o}=n,u=pr(o),h={next:t,error:r,type:e};if(Xo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&bg(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),H0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>H0(n))}(n,"INTERNAL",e),removeTokenListener:e=>Eg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Va.registerVersion)("@firebase/app-check","0.5.8")}();class Ky{constructor(){return(0,xr.vb)("app-check")}}"undefined"!=typeof window&&window;var Tg=N(127);const tC=new c.OlP("angularfire2.auth.use-emulator"),Ag=new c.OlP("angularfire2.auth.settings"),Jy=new c.OlP("angularfire2.auth.tenant-id"),Sg=new c.OlP("angularfire2.auth.langugage-code"),Md=new c.OlP("angularfire2.auth.use-device-language"),X0=new c.OlP("angularfire.auth.persistence"),xg=(n,e,t,r,o,u,h,m)=>(0,mt.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),h)for(const[C,S]of Object.entries(h))E.settings[C]=S;return m&&E.setPersistence(m),E},[t,r,o,u,h,m]);let zl=(()=>{class n{constructor(t,r,o,u,h,m,E,C,S,k,V,W){const ae=new Tr.x,Oe=it(void 0).pipe((0,gg.Q)(h.outsideAngular),Tn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8775)))),(0,gt.U)(()=>(0,mt.on)(t,u,r)),(0,gt.U)(Le=>xg(Le,u,m,C,S,k,E,V)),Sy({bufferSize:1,refCount:!1}));if(Oo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Oe.pipe(Zo()).subscribe();const St=Oe.pipe(Tn(Ct=>Ct.getRedirectResult().then(Rt=>Rt,()=>null)),xr.iC,Sy({bufferSize:1,refCount:!1})),kt=Oe.pipe(Tn(Ct=>new Dn.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>Ct.onAuthStateChanged(st=>Rt.next(st),st=>Rt.error(st),()=>Rt.complete()))})))),Nt=Oe.pipe(Tn(Ct=>new Dn.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>Ct.onIdTokenChanged(st=>Rt.next(st),st=>Rt.error(st),()=>Rt.complete()))}))));this.authState=St.pipe(T0(kt),(0,xy.R)(h.outsideAngular),(0,gg.Q)(h.insideAngular)),this.user=St.pipe(T0(Nt),(0,xy.R)(h.outsideAngular),(0,gg.Q)(h.insideAngular)),this.idToken=this.user.pipe(Tn(Ct=>Ct?(0,nn.D)(Ct.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(Tn(Ct=>Ct?(0,nn.D)(Ct.getIdTokenResult()):it(null))),this.credential=(0,D0.T)(St,ae,this.authState.pipe(Zn(Ct=>!Ct))).pipe((0,gt.U)(Ct=>(null==Ct?void 0:Ct.user)?Ct:null),(0,xy.R)(h.outsideAngular),(0,gg.Q)(h.insideAngular))}return(0,mt.pX)(this,Oe,u,{spy:{apply:(Le,St,kt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&kt.then(Nt=>ae.next(Nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(mt.Dh),c.LFG(mt.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(xr.HU),c.LFG(tC,8),c.LFG(Ag,8),c.LFG(Jy,8),c.LFG(Sg,8),c.LFG(Md,8),c.LFG(X0,8),c.LFG(Ky,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ew=(()=>{class n{constructor(){Tg.Z.registerVersion("angularfire",xr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[zl]}),n})();function Mg(){return(0,Gn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Hn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Xy(n,e){return n===e}N(8775);var Je,rC=N(3942),tw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Zi={},e_=e_||{},At=tw||self;function ja(){}function t_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function sf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var n_="closure_uid_"+(1e9*Math.random()>>>0),ta=0;function r_(n,e,t){return n.call.apply(n.bind,arguments)}function nw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Mr(n,e,t){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r_:nw).apply(null,arguments)}function af(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function kr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function Ou(){this.s=this.s,this.o=this.o}var oC={};Ou.prototype.s=!1,Ou.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function iC(n){return Object.prototype.hasOwnProperty.call(n,n_)&&n[n_]||(n[n_]=++ta)}(this);delete oC[n]}},Ou.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},i_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function s_(n){return Array.prototype.concat.apply([],arguments)}function o_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function kg(n){return/^[\s\xa0]*$/.test(n)}var Ei,aC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qi(n,e){return-1!=n.indexOf(e)}function uf(n,e){return n<e?-1:n>e?1:0}e:{var a_=At.navigator;if(a_){var u_=a_.userAgent;if(u_){Ei=u_;break e}}Ei=""}function iw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vs(n){const e={};for(const t in n)e[t]=n[t];return e}var uC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lC(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<uC.length;u++)t=uC[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Rg(n){return Rg[" "](n),n}Rg[" "]=ja;var Fg,n,ow=qi(Ei,"Opera"),kd=qi(Ei,"Trident")||qi(Ei,"MSIE"),cC=qi(Ei,"Edge"),Ng=cC||kd,Og=qi(Ei,"Gecko")&&!(qi(Ei.toLowerCase(),"webkit")&&!qi(Ei,"Edge"))&&!(qi(Ei,"Trident")||qi(Ei,"MSIE"))&&!qi(Ei,"Edge"),dC=qi(Ei.toLowerCase(),"webkit")&&!qi(Ei,"Edge");function Pg(){var n=At.document;return n?n.documentMode:void 0}e:{var l_="",c_=(n=Ei,Og?/rv:([^\);]+)(\)|;)/.exec(n):cC?/Edge\/([\d\.]+)/.exec(n):kd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):dC?/WebKit\/(\S+)/.exec(n):ow?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(c_&&(l_=c_?c_[1]:""),kd){var d_=Pg();if(null!=d_&&d_>parseFloat(l_)){Fg=String(d_);break e}}Fg=l_}var hC={};var pC=At.document&&kd&&(Pg()||parseInt(Fg,10))||void 0,lf=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",ja,e),At.removeEventListener("test",ja,e)}catch(t){}return n}();function ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function cf(n,e){if(ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Og){e:{try{Rg(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:h_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&cf.Z.h.call(this)}}ai.prototype.h=function(){this.defaultPrevented=!0},kr(cf,ai);var h_={2:"touch",3:"pen",4:"mouse"};cf.prototype.h=function(){cf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zi="closure_listenable_"+(1e6*Math.random()|0),df=0;function ui(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++df,this.ca=this.fa=!1}function na(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Kl(n){this.src=n,this.g={},this.h=0}function Wi(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=rw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(na(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hf(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Kl.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=hf(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new ui(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Pu="closure_lm_"+(1e6*Math.random()|0),Fu={};function Yl(n,e,t,r,o){if(r&&r.once)return Jl(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Yl(n,e[u],t,r,o);return null}return t=Ug(t),n&&n[zi]?n.N(e,t,sf(r)?!!r.capture:!!r,o):Ql(n,e,t,!1,r,o)}function Ql(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=sf(o)?!!o.capture:!!o,m=Lg(n);if(m||(n[Pu]=m=new Kl(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function Nd(){var e=aw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)lf||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(ec(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Jl(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Jl(n,e[u],t,r,o);return null}return t=Ug(t),n&&n[zi]?n.O(e,t,sf(r)?!!r.capture:!!r,o):Ql(n,e,t,!0,r,o)}function Xl(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Xl(n,e[u],t,r,o);else r=sf(r)?!!r.capture:!!r,t=Ug(t),n&&n[zi]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hf(u=n.g[e],t,r,o))&&(na(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Lg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hf(e,t,r,o)),(t=-1<n?e[n]:null)&&Lu(t))}function Lu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[zi])Wi(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ec(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Lg(e))?(Wi(t,n),0==t.h&&(t.src=null,e[Pu]=null)):na(n)}}}function ec(n){return n in Fu?Fu[n]:Fu[n]="on"+n}function aw(n,e){if(n.ca)n=!0;else{e=new cf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Lu(n),n=t.call(r,e)}return n}function Lg(n){return(n=n[Pu])instanceof Kl?n:null}var Vg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ug(n){return"function"==typeof n?n:(n[Vg]||(n[Vg]=function(e){return n.handleEvent(e)}),n[Vg])}function gr(){Ou.call(this),this.i=new Kl(this),this.P=this,this.I=null}function Rr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ai(e,n);else if(e instanceof ai)e.target=e.target||n;else{var o=e;lC(e=new ai(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=ff(h,r,!0,e)&&o}if(o=ff(h=e.g=n,r,!0,e)&&o,o=ff(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=ff(h=e.g=t[u],r,!1,e)&&o}function ff(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,E=h.ia||h.src;h.fa&&Wi(n.i,h),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}kr(gr,Ou),gr.prototype[zi]=!0,gr.prototype.removeEventListener=function(n,e,t,r){Xl(this,n,e,t,r)},gr.prototype.M=function(){if(gr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)na(t[r]);delete n.g[e],n.h--}}this.I=null},gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Bg=At.JSON.stringify;function uw(){var n=cw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var p_,f_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mC,n=>n.reset());class mC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lw(n){At.setTimeout(()=>{throw n},0)}function jg(n,e){p_||function yC(){var n=At.Promise.resolve(void 0);p_=function(){n.then(dw)}}(),$g||(p_(),$g=!0),cw.add(n,e)}var $g=!1,cw=new class gC{constructor(){this.h=this.g=null}add(e,t){const r=f_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function dw(){for(var n;n=uw();){try{n.h.call(n.g)}catch(t){lw(t)}var e=f_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}$g=!1}function Hg(n,e){gr.call(this),this.h=n||1,this.g=e||At,this.j=Mr(this.kb,this),this.l=Date.now()}function g_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function hw(n,e,t){if("function"==typeof n)t&&(n=Mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function fw(n){n.g=hw(()=>{n.g=null,n.i&&(n.i=!1,fw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}kr(Hg,gr),(Je=Hg.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rr(this,"tick"),this.da&&(g_(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){Hg.Z.M.call(this),g_(this),delete this.g};class m_ extends Ou{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fw(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tc(n){Ou.call(this),this.h=n,this.g={}}kr(tc,Ou);var pw=[];function _C(n,e,t,r){Array.isArray(t)||(t&&(pw[0]=t.toString()),t=pw);for(var o=0;o<t.length;o++){var u=Yl(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function vC(n){iw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lu(e)},n),n.g={}}function y_(){this.g=!0}function pf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Od(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return Bg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}tc.prototype.M=function(){tc.Z.M.call(this),vC(this)},tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},y_.prototype.Aa=function(){this.g=!1},y_.prototype.info=function(){};var nc={},__=null;function Gg(){return __=__||new gr}function v_(n){ai.call(this,nc.Ma,n)}function Vu(n){const e=Gg();Rr(e,new v_(e,n))}function mw(n,e){ai.call(this,nc.STAT_EVENT,n),this.stat=e}function li(n){const e=Gg();Rr(e,new mw(e,n))}function yw(n,e){ai.call(this,nc.Na,n),this.size=e}function gf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}nc.Ma="serverreachability",kr(v_,ai),nc.STAT_EVENT="statevent",kr(mw,ai),nc.Na="timingevent",kr(yw,ai);var Zg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_w={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function w_(){}function vw(){}w_.prototype.h=null;var ww,Pd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qg(){ai.call(this,"d")}function mf(){ai.call(this,"c")}function Fd(){}function yf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new tc(this),this.P=_f,this.W=new Hg(n=Ng?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bC}function bC(){this.i=null,this.g="",this.h=!1}kr(qg,ai),kr(mf,ai),kr(Fd,w_),Fd.prototype.g=function(){return new XMLHttpRequest},Fd.prototype.i=function(){return{}},ww=new Fd;var _f=45e3,zg={},Ld={};function vf(n,e,t){n.K=1,n.v=Vd(Co(e)),n.s=t,n.U=!0,Ew(n,null)}function Ew(n,e){n.F=Date.now(),Wg(n),n.A=Co(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),T_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new bC,n.g=Yw(n.l,t?e:null,!n.s),0<n.O&&(n.L=new m_(Mr(n.Ia,n,n.g),n.O)),_C(n.V,n.g,"readystatechange",n.gb),e=n.H?Vs(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Vu(1),function wC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var S=C[0];C=C[1];var k=S.split("_");h=2<=k.length&&"type"==k[1]?h+(S+"=")+C+"&":h+(S+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function wf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ef(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=b_(n,t),o==Ld){4==e&&(n.o=4,li(14),r=!1),pf(n.j,n.m,null,"[Incomplete Response]");break}if(o==zg){n.o=4,li(15),pf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}pf(n.j,n.m,o,null),Kg(n,o)}wf(n)&&o!=Ld&&o!=zg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,li(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),V_(e),e.L=!0,li(11))):(pf(n.j,n.m,t,"[Invalid Chunked Response]"),Bu(n),Uu(n))}function b_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ld:(t=Number(e.substring(t,r)),isNaN(t)?zg:(r+=1)+t>e.length?Ld:(e=e.substr(r,t),n.C=r+t,e))}function Wg(n){n.Y=Date.now()+n.P,bw(n,n.P)}function bw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=gf(Mr(n.eb,n),e)}function rc(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function Uu(n){0==n.l.G||n.I||qw(n.l,n)}function Bu(n){rc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,g_(n.W),vC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Kg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||S_(t.i,n)))if(t.I=n.N,!n.J&&S_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=gf(Mr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;nm(t),kf(t)}L_(t),li(18)}if(1>=sc(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else ac(t,11)}else if((n.J||t.g==n)&&nm(t),!kg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const S=C[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const k=C[4];null!=k&&(t.za=k,t.h.info("SVER="+t.za));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const ae=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var u=r.i;!u.g&&(qi(ae,"spdy")||qi(ae,"quic")||qi(ae,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(x_(u,u.h),u.h=null))}if(r.D){const Oe=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.sa=Oe,fn(r.F,r.D,Oe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Kw(r,r.H?r.la:null,r.W),h.J){M_(r.i,h);var m=h,E=r.K;E&&m.setTimeout(E),m.B&&(rc(m),Wg(m)),r.g=h}else Gw(r);0<t.l.length&&Rf(t)}else"stop"!=C[0]&&"close"!=C[0]||ac(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ac(t,7):Mf(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Vu(4)}catch(C){}}function Yg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(t_(n)||"string"==typeof n)i_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(t_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function I_(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(t_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function ic(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ic)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function bf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ju(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ju(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ju(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=yf.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==js(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const S=js(this.g);var e=this.g.Da();const k=this.g.ba();if(!(3>S)&&(3!=S||Ng||this.g&&(this.h.h||this.g.ga()||Bw(this.g)))){this.I||4!=S||7==e||Vu(8==e||0>=k?3:2),rc(this);var t=this.g.ba();this.N=t;t:if(wf(this)){var r=Bw(this.g);n="";var o=r.length,u=4==js(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Bu(this),Uu(this);var h="";break t}this.h.i=new At.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function gw(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,li(12),Bu(this),Uu(this);break e}pf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kg(this,t)}this.U?(Ef(this,S,h),Ng&&this.i&&3==S&&(_C(this.V,this.W,"tick",this.fb),this.W.start())):(pf(this.j,this.m,h,null),Kg(this,h)),4==S&&Bu(this),this.i&&!this.I&&(4==S?qw(this.l,this):(this.i=!1,Wg(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,li(12)):(this.o=0,li(13)),Bu(this),Uu(this)}}}catch(S){}},Je.fb=function(){if(this.g){var n=js(this.g),e=this.g.ga();this.C<e.length&&(rc(this),Ef(this,n,e),this.i&&4!=n&&Wg(this))}},Je.cancel=function(){this.I=!0,Bu(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function EC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Vu(3),li(17)),Bu(this),this.o=2,Uu(this)):bw(this,this.Y-n)},(Je=ic.prototype).R=function(){bf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return bf(this),this.g.concat()},Je.get=function(n,e){return ju(this.h,n)?this.h[n]:e},Je.set=function(n,e){ju(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Iw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $u(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $u){this.g=void 0!==e?e:n.g,If(this,n.j),this.s=n.s,Qg(this,n.i),Cf(this,n.m),this.l=n.l,e=n.h;var t=new Df;t.i=e.i,e.g&&(t.g=new ic(e.g),t.h=e.h),C_(this,t),this.o=n.o}else n&&(t=String(n).match(Iw))?(this.g=!!e,If(this,t[1]||"",!0),this.s=Ud(t[2]||""),Qg(this,t[3]||"",!0),Cf(this,t[4]),this.l=Ud(t[5]||"",!0),C_(this,t[6]||"",!0),this.o=Ud(t[7]||"")):(this.g=!!e,this.h=new Df(null,this.g))}function Co(n){return new $u(n)}function If(n,e,t){n.j=t?Ud(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Qg(n,e,t){n.i=t?Ud(e,!0):e}function Cf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function C_(n,e,t){e instanceof Df?(n.h=e,function CC(n,e){e&&!n.j&&($a(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Mw(this,r),T_(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Bd(e,MA)),n.h=new Df(e,n.g))}function fn(n,e,t){n.h.set(e,t)}function Vd(n){return fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ud(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Aw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Aw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$u.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Bd(e,D_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Bd(e,D_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Bd(t,"/"==t.charAt(0)?xw:Sw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Bd(t,IC)),n.join("")};var D_=/[#\/\?@]/g,Sw=/[#\?:]/g,xw=/[#\?]/g,MA=/[#\?@]/g,IC=/#/g;function Df(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $a(n){n.g||(n.g=new ic,n.h=0,n.i&&function Cw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Mw(n,e){$a(n),e=jd(n,e),ju(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ju((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&bf(n)))}function nr(n,e){return $a(n),e=jd(n,e),ju(n.g.h,e)}function T_(n,e,t){Mw(n,e),0<t.length&&(n.i=null,n.g.set(jd(n,e),o_(t)),n.h+=t.length)}function jd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Rw(n){this.l=n||Nw,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=Df.prototype).add=function(n,e){$a(this),this.i=null,n=jd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){$a(this),this.g.forEach(function(t,r){i_(t,function(o){n.call(e,o,r,this)},this)},this)},Je.T=function(){$a(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Je.R=function(n){$a(this);var e=[];if("string"==typeof n)nr(this,n)&&(e=s_(e,this.g.get(jd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=s_(e,n[t])}return e},Je.set=function(n,e){return $a(this),this.i=null,nr(this,n=jd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var Nw=10;function A_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sc(n){return n.h?1:n.g?n.g.size:0}function S_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function x_(n,e){n.g?n.g.add(e):n.h=e}function M_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ow(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return o_(n.i)}function Jg(){}function kA(){this.g=new Jg}function Pw(n,e,t){const r=t||"";try{Yg(n,function(o,u){let h=o;sf(o)&&(h=Bg(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function fs(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Tf(n){this.l=n.$b||null,this.j=n.ib||!1}function Xg(n,e){gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Us,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rw.prototype.cancel=function(){if(this.i=Ow(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Jg.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},Jg.prototype.parse=function(n){return At.JSON.parse(n,void 0)},kr(Tf,w_),Tf.prototype.g=function(){return new Xg(this.l,this.j)},Tf.prototype.i=function(n){return function(){return n}}({}),kr(Xg,gr);var Us=0;function Bs(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function bi(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$d(n)}function $d(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=Xg.prototype).open=function(n,e){if(this.readyState!=Us)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$d(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bi(this)),this.readyState=Us},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$d(this)),this.g&&(this.readyState=3,$d(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bs(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?bi(this):$d(this),3==this.readyState&&Bs(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,bi(this))},Je.Ta=function(n){this.g&&(this.response=n,bi(this))},Je.ha=function(){this.g&&bi(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Xg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Fw=At.JSON.parse;function rr(n){gr.call(this),this.headers=new ic,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Lw,this.K=this.L=!1}kr(rr,gr);var Lw="",DC=/^https?$/i,TC=["POST","PUT"];function Af(n){return"content-type"==n.toLowerCase()}function Vw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,N_(n),Sf(n)}function N_(n){n.D||(n.D=!0,Rr(n,"complete"),Rr(n,"error"))}function Uw(n){if(n.h&&void 0!==e_&&(!n.C[1]||4!=js(n)||2!=n.ba()))if(n.v&&4==js(n))hw(n.Fa,0,n);else if(Rr(n,"readystatechange"),4==js(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Iw)[1]||null;if(!o&&At.self&&At.self.location){var u=At.self.location.protocol;o=u.substr(0,u.length-1)}r=!DC.test(o?o.toLowerCase():"")}t=r}if(t)Rr(n,"complete"),Rr(n,"success");else{n.m=6;try{var h=2<js(n)?n.g.statusText:""}catch(E){h=""}n.j=h+" ["+n.ba()+"]",N_(n)}}finally{Sf(n)}}}function Sf(n,e){if(n.g){O_(n);const t=n.g,r=n.C[0]?ja:null;n.g=null,n.C=null,e||Rr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function O_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function js(n){return n.g?n.g.readyState:0}function Bw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Lw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function em(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function jw(n){let e="";return iw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fn(n,e,t))}function oc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xf(n){this.za=0,this.l=[],this.h=new y_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=oc("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=oc("baseRetryDelayMs",5e3,n),this.$a=oc("retryDelaySeedMs",1e4,n),this.Ya=oc("forwardChannelMaxRetries",2,n),this.ra=oc("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Rw(n&&n.concurrentRequestLimit),this.Ca=new kA,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Mf(n){if(P_(n),3==n.G){var e=n.V++,t=Co(n.F);fn(t,"SID",n.J),fn(t,"RID",e),fn(t,"TYPE","terminate"),Hd(n,t),(e=new yf(n,n.h,e,void 0)).K=2,e.v=Vd(Co(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=Yw(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Wg(e)}Ww(n)}function kf(n){n.g&&(V_(n),n.g.cancel(),n.g=null)}function P_(n){kf(n),n.u&&(At.clearTimeout(n.u),n.u=null),nm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function tm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Rf(n)}function Rf(n){A_(n.i)||n.m||(n.m=!0,jg(n.Ha,n),n.C=0)}function F_(n,e){var t;t=e?e.m:n.V++;const r=Co(n.F);fn(r,"SID",n.J),fn(r,"RID",t),fn(r,"AID",n.U),Hd(n,r),n.o&&n.s&&em(r,n.o,n.s),t=new yf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Hw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),x_(n.i,t),vf(t,r,e)}function Hd(n,e){n.j&&Yg({},function(t,r){fn(e,r,t)})}function Hw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Mr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const S=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{Pw(S,h,"req"+C+"_")}catch(k){r&&r(S)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Gw(n){n.g||n.u||(n.Y=1,jg(n.Ga,n),n.A=0)}function L_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=gf(Mr(n.Ga,n),zw(n,n.A)),n.A++,0))}function V_(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function Zw(n){n.g=new yf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Co(n.oa);fn(e,"RID","rpc"),fn(e,"SID",n.J),fn(e,"CI",n.N?"0":"1"),fn(e,"AID",n.U),Hd(n,e),fn(e,"TYPE","xmlhttp"),n.o&&n.s&&em(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Vd(Co(e)),t.s=null,t.U=!0,Ew(t,n)}function nm(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function qw(n,e){var t=null;if(n.g==e){nm(n),V_(n),n.g=null;var r=2}else{if(!S_(n.i,e))return;t=e.D,M_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Rr(r=Gg(),new yw(r,t,e,o)),Rf(n)}else Gw(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function $w(n,e){return!(sc(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=gf(Mr(n.Ha,n,e),zw(n,n.C)),n.C++,0)))}(n,e)||2==r&&L_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ac(n,5);break;case 4:ac(n,10);break;case 3:ac(n,6);break;default:ac(n,2)}}function zw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ac(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Mr(n.jb,n);t||(t=new $u("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||If(t,"https"),Vd(t)),function k_(n,e){const t=new y_;if(At.Image){const r=new Image;r.onload=af(fs,t,r,"TestLoadImage: loaded",!0,e),r.onerror=af(fs,t,r,"TestLoadImage: error",!1,e),r.onabort=af(fs,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=af(fs,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else li(2);n.G=0,n.j&&n.j.va(e),Ww(n),P_(n)}function Ww(n){n.G=0,n.I=-1,n.j&&((0!=Ow(n.i).length||0!=n.l.length)&&(n.i.i.length=0,o_(n.l),n.l.length=0),n.j.ua())}function Kw(n,e,t){let r=function Dw(n){return n instanceof $u?Co(n):new $u(n,void 0)}(t);if(""!=r.i)e&&Qg(r,e+"."+r.i),Cf(r,r.m);else{const o=At.location;r=function Tw(n,e,t,r){var o=new $u(null,void 0);return n&&If(o,n),e&&Qg(o,e),t&&Cf(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&iw(n.aa,function(o,u){fn(r,u,o)}),t=n.sa,(e=n.D)&&t&&fn(r,e,t),fn(r,"VER",n.ma),Hd(n,r),r}function Yw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rr(t&&n.Ba&&!n.qa?new Tf({ib:!0}):n.qa)).L=n.H,e}function Qw(){}function rm(){if(kd&&!(10<=Number(pC)))throw Error("Environmental error: no available transport.")}function ps(n,e){gr.call(this),this.g=new xf(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!kg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gd(this)}function Jw(n){qg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Xw(){mf.call(this),this.status=1}function Gd(n){this.g=n}(Je=rr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ww.g(),this.C=function E_(n){return n.h||(n.h=n.i())}(this.u?this.u:ww),this.g.onreadystatechange=Mr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Vw(this,u)}n=t||"";const o=new ic(this.headers);r&&Yg(r,function(u,h){o.set(h,u)}),r=function xA(n){e:{var e=Af;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=At.FormData&&n instanceof At.FormData,!(0<=rw(TC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{O_(this),0<this.B&&((this.K=function R_(n){return kd&&function fC(){return function sw(n){var e=hC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=aC(String(Fg)).split("."),t=aC("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=uf(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||uf(0==o[2].length,0==u[2].length)||uf(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.pa,this)):this.A=hw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Vw(this,u)}},Je.pa=function(){void 0!==e_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rr(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Rr(this,"complete"),Rr(this,"abort"),Sf(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sf(this,!0)),rr.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?Uw(this):this.cb())},Je.cb=function(){Uw(this)},Je.ba=function(){try{return 2<js(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Fw(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=xf.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new yf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Vs(u),lC(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Hw(this,o,e),fn(t=Co(this.F),"RID",n),fn(t,"CVER",22),this.D&&fn(t,"X-HTTP-Session-Id",this.D),Hd(this,t),this.o&&u&&em(t,this.o,u),x_(this.i,o),this.Ra&&fn(t,"TYPE","init"),this.ja?(fn(t,"$req",e),fn(t,"SID","null"),o.$=!0,vf(o,t,null)):vf(o,t,e),this.G=2}}else 3==this.G&&(n?F_(this,n):0==this.l.length||A_(this.i)||F_(this))},Je.Ga=function(){if(this.u=null,Zw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=gf(Mr(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,li(10),kf(this),Zw(this))},Je.ab=function(){null!=this.v&&(this.v=null,kf(this),L_(this),li(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),li(2)):(this.h.info("Failed to ping google.com"),li(1))},(Je=Qw.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},rm.prototype.g=function(n,e){return new ps(n,e)},kr(ps,gr),ps.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),jg(Mr(n.hb,n,e))),li(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Kw(n,null,n.W),Rf(n)},ps.prototype.close=function(){Mf(this.g)},ps.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,tm(this.g,e)}else this.v?((e={}).__data__=Bg(n),tm(this.g,e)):tm(this.g,n)},ps.prototype.M=function(){this.g.j=null,delete this.j,Mf(this.g),delete this.g,ps.Z.M.call(this)},kr(Jw,qg),kr(Xw,mf),kr(Gd,Qw),Gd.prototype.xa=function(){Rr(this.g,"a")},Gd.prototype.wa=function(n){Rr(this.g,new Jw(n))},Gd.prototype.va=function(n){Rr(this.g,new Xw(n))},Gd.prototype.ua=function(){Rr(this.g,"b")},rm.prototype.createWebChannel=rm.prototype.g,ps.prototype.send=ps.prototype.u,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,Zg.NO_ERROR=0,Zg.TIMEOUT=8,Zg.HTTP_ERROR=6,_w.COMPLETE="complete",vw.EventType=Pd,Pd.OPEN="a",Pd.CLOSE="b",Pd.ERROR="c",Pd.MESSAGE="d",gr.prototype.listen=gr.prototype.N,rr.prototype.listenOnce=rr.prototype.O,rr.prototype.getLastError=rr.prototype.La,rr.prototype.getLastErrorCode=rr.prototype.Da,rr.prototype.getStatus=rr.prototype.ba,rr.prototype.getResponseJson=rr.prototype.Qa,rr.prototype.getResponseText=rr.prototype.ga,rr.prototype.send=rr.prototype.ea;var eE=Zi.createWebChannelTransport=function(){return new rm},tE=Zi.getStatEventTarget=function(){return Gg()},im=Zi.ErrorCode=Zg,nE=Zi.EventType=_w,rE=Zi.Event=nc,U_=Zi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iE=Zi.FetchXmlHttpFactory=Tf,Nf=Zi.WebChannel=vw,sE=Zi.XhrIo=rr;const B_="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let $s="9.8.0";const Hu=new Ru.Yd("@firebase/firestore");function j_(){return Hu.logLevel}function Pe(n,...e){if(Hu.logLevel<=Ru.in.DEBUG){const t=e.map(om);Hu.debug(`Firestore (${$s}): ${n}`,...t)}}function Ln(n,...e){if(Hu.logLevel<=Ru.in.ERROR){const t=e.map(om);Hu.error(`Firestore (${$s}): ${n}`,...t)}}function sm(n,...e){if(Hu.logLevel<=Ru.in.WARN){const t=e.map(om);Hu.warn(`Firestore (${$s}): ${n}`,...t)}}function om(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: `+n;throw Ln(e),new Error(e)}function Tt(n,e){n||nt()}function Ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Ut.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class oE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class am{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class um{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Vn{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let h=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Wn,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=h;e.enqueueRetryable((0,_e.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Wn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new oE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Nr(e)}}class RA{constructor(e,t,r){this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class aE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new RA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new uE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ki{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function lE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ki.A=-1;class $_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=lE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function qd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function cE(n){return n+"\0"}class pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pn.fromMillis(Date.now())}static fromDate(e){return pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new pn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new pn(0,0))}static max(){return new Et(new pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function dE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Of(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class zd{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gt extends zd{construct(e,t,r){return new Gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Gt(t)}static emptyPath(){return new Gt([])}}const hE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mr extends zd{construct(e,t,r){return new mr(e,t,r)}static isValidIdentifier(e){return hE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new ke(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new ke(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new ke(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new ke(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mr(t)}static emptyPath(){return new mr([])}}class ra{constructor(e){this.fields=e,e.sort(mr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const xC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gu(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=xC.exec(n);if(Tt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mn(n.seconds),nanos:Mn(n.nanos)}}function Mn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zu(n){return"string"==typeof n?yr.fromBase64String(n):yr.fromUint8Array(n)}function lm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fE(n){const e=n.mapValue.fields.__previous_value__;return lm(e)?fE(e):e}function Wd(n){const e=Gu(n.mapValue.fields.__local_write_time__.timestampValue);return new pn(e.seconds,e.nanos)}class MC{constructor(e,t,r,o,u,h,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Ha{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ha("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ha&&e.projectId===this.projectId&&e.database===this.database}}function cm(n){return null==n}function dm(n){return 0===n&&1/n==-1/0}function kC(n){return"number"==typeof n&&Number.isInteger(n)&&!dm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Gt.fromString(e))}static fromName(e){return new $e(Gt.fromString(e).popFirst(5))}static empty(){return new $e(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Gt(e.slice()))}}const Ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lc={nullValue:"NULL_VALUE"};function cc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lm(n)?4:Z_(n)?9007199254740991:10:nt()}function ia(n,e){if(n===e)return!0;const t=cc(n);if(t!==cc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wd(n).isEqual(Wd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Gu(r.timestampValue),h=Gu(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Zu(n.bytesValue).isEqual(Zu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Mn(r.geoPointValue.latitude)===Mn(o.geoPointValue.latitude)&&Mn(r.geoPointValue.longitude)===Mn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Mn(r.integerValue)===Mn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Mn(r.doubleValue),h=Mn(o.doubleValue);return u===h?dm(u)===dm(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return qd(n.arrayValue.values||[],e.arrayValue.values||[],ia);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(dE(u)!==dE(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!ia(u[m],h[m])))return!1;return!0}(n,e);default:return nt()}var o}function Kd(n,e){return void 0!==(n.values||[]).find(t=>ia(t,e))}function Hs(n,e){if(n===e)return 0;const t=cc(n),r=cc(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=Mn(o.integerValue||o.doubleValue),m=Mn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return pE(n.timestampValue,e.timestampValue);case 4:return pE(Wd(n),Wd(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Zu(o),m=Zu(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let E=0;E<h.length&&E<m.length;E++){const C=Mt(h[E],m[E]);if(0!==C)return C}return Mt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Mt(Mn(o.latitude),Mn(u.latitude));return 0!==h?h:Mt(Mn(o.longitude),Mn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],m=u.values||[];for(let E=0;E<h.length&&E<m.length;++E){const C=Hs(h[E],m[E]);if(C)return C}return Mt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Ga.mapValue&&u===Ga.mapValue)return 0;if(o===Ga.mapValue)return 1;if(u===Ga.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let S=0;S<m.length&&S<C.length;++S){const k=Mt(m[S],C[S]);if(0!==k)return k;const V=Hs(h[m[S]],E[C[S]]);if(0!==V)return V}return Mt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw nt()}}function pE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Gu(n),r=Gu(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function Yd(n){return H_(n)}function H_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Gu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zu(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=H_(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of o)h?h=!1:u+=",",u+=`${m}:${H_(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function G_(n){return!!n&&"integerValue"in n}function Qd(n){return!!n&&"arrayValue"in n}function gE(n){return!!n&&"nullValue"in n}function mE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Za(n){return!!n&&"mapValue"in n}function Ff(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ff(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ff(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Z_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function RC(n){return"nullValue"in n?lc:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dc(Ha.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function yE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dc(Ha.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ga:nt()}function _E(n,e){const t=Hs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function q_(n,e){const t=Hs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Za(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ff(t)}setAll(e){let t=mr.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Ff(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Za(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ia(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Za(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){uc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ci(Ff(this.value))}}function hm(n){const e=[];return uc(n.fields,(t,r)=>{const o=new mr([t]);if(Za(r)){const u=hm(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new ra(e)}class gn{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new gn(e,0,Et.min(),Et.min(),ci.empty(),0)}static newFoundDocument(e,t,r){return new gn(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new gn(e,2,t,Et.min(),ci.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,Et.min(),ci.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function fm(n){return n.fields.find(e=>2===e.kind)}function hc(n){return n.fields.filter(e=>2!==e.kind)}Lf.UNKNOWN_ID=-1;class pm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vf(0,Gs.min())}}function gm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new pn(t+1,0):new pn(t,r));return new Gs(o,$e.empty(),e)}function NC(n){return new Gs(n.readTime,n.key,-1)}class Gs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Gs(Et.min(),$e.empty(),-1)}static max(){return new Gs(Et.max(),$e.empty(),-1)}}function vE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}class Kn{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mm(this.root,e,this.comparator,!0)}}class mm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Gr.RED,this.left=null!=o?o:Gr.EMPTY,this.right=null!=u?u:Gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Gr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Gr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1,Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Gr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wE(this.data.getIterator())}getIteratorFrom(e){return new wE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class wE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jd(n){return n.hasNext()?n.getNext():void 0}class OC{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function z_(n,e=null,t=[],r=[],o=null,u=null,h=null){return new OC(n,e,t,r,o,u,h)}function qu(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Yd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),cm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yd(r)).join(",")),e.P=t}return e.P}function Uf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!VC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ia(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UC(n.startAt,e.startAt)&&UC(n.endAt,e.endAt)}function Bf(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ym(n,e){return n.filters.filter(t=>t instanceof _r&&t.field.isEqual(e))}function EE(n,e,t){let r=lc,o=!0;for(const u of ym(n,e)){let h=lc,m=!0;switch(u.op){case"<":case"<=":h=RC(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=lc}_E({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];_E({value:r,inclusive:o},{value:h,inclusive:t.inclusive})<0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}function bE(n,e,t){let r=Ga,o=!0;for(const u of ym(n,e)){let h=Ga,m=!0;switch(u.op){case">=":case">":h=yE(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=Ga}q_({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];q_({value:r,inclusive:o},{value:h,inclusive:t.inclusive})>0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}class _r extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new W_(e,t,r):"array-contains"===t?new FC(e,r):"in"===t?new Y_(e,r):"not-in"===t?new LC(e,r):"array-contains-any"===t?new DE(e,r):new _r(e,t,r)}static V(e,t,r){return"in"===t?new IE(e,r):new K_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Hs(t,this.value)):null!==t&&cc(this.value)===cc(t)&&this.v(Hs(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class W_ extends _r{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class IE extends _r{constructor(e,t){super(e,"in",t),this.keys=CE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class K_ extends _r{constructor(e,t){super(e,"not-in",t),this.keys=CE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class FC extends _r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qd(t)&&Kd(t.arrayValue,this.value)}}class Y_ extends _r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kd(this.value.arrayValue,t)}}class LC extends _r{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Kd(this.value.arrayValue,t)}}class DE extends _r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Kd(this.value.arrayValue,r))}}class zu{constructor(e,t){this.position=e,this.inclusive=t}}class fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function VC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Q_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(h.referenceValue),t.key):Hs(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function UC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ia(n.position[t],e.position[t]))return!1;return!0}class qa{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function jf(n,e,t,r,o,u,h,m){return new qa(n,e,t,r,o,u,h,m)}function Xd(n){return new qa(n)}function pc(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function J_(n){for(const e of n.filters)if(e.S())return e.field;return null}function TE(n){return null!==n.collectionGroup}function gc(n){const e=Ze(n);if(null===e.D){e.D=[];const t=J_(e),r=pc(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new fc(t)),e.D.push(new fc(mr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new fc(mr.keyField(),u))}}}return e.D}function Zs(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=z_(e.path,e.collectionGroup,gc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of gc(e))t.push(new fc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new zu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new zu(e.startAt.position,e.startAt.inclusive):null;e.C=z_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function AE(n,e,t){return new qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $f(n,e){return Uf(Zs(n),Zs(e))&&n.limitType===e.limitType}function SE(n){return`${qu(Zs(n))}|lt:${n.limitType}`}function _m(n){return`Query(target=${function PC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Yd(r.value)}`;var r}).join(", ")}]`),cm(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Yd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Yd(t)).join(",")),`Target(${e})`}(Zs(n))}; limitType=${n.limitType})`}function vm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const m=Q_(o,u,h);return o.inclusive?m<=0:m<0}(t.startAt,gc(t),r)||t.endAt&&!function(o,u,h){const m=Q_(o,u,h);return o.inclusive?m>=0:m>0}(t.endAt,gc(t),r)));var t,r}function wm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Hf(n){return(e,t)=>{let r=!1;for(const o of gc(n)){const u=Gf(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Gf(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),E=h.data.field(o);return null!==m&&null!==E?Hs(m,E):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function xE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dm(e)?"-0":e}}function X_(n){return{integerValue:""+n}}function ev(n,e){return kC(e)?X_(e):xE(n,e)}class Em{constructor(){this._=void 0}}function BC(n,e,t){return n instanceof Zf?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof mc?kE(n,e):n instanceof qs?nv(n,e):function(r,o){const u=ME(r,o),h=jC(u)+jC(r.k);return G_(u)&&G_(r.k)?X_(h):xE(r.M,h)}(n,e)}function tv(n,e,t){return n instanceof mc?kE(n,e):n instanceof qs?nv(n,e):t}function ME(n,e){return n instanceof Do?G_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Zf extends Em{}class mc extends Em{constructor(e){super(),this.elements=e}}function kE(n,e){const t=rv(e);for(const r of n.elements)t.some(o=>ia(o,r))||t.push(r);return{arrayValue:{values:t}}}class qs extends Em{constructor(e){super(),this.elements=e}}function nv(n,e){let t=rv(e);for(const r of n.elements)t=t.filter(o=>!ia(o,r));return{arrayValue:{values:t}}}class Do extends Em{constructor(e,t){super(),this.M=e,this.k=t}}function jC(n){return Mn(n.integerValue||n.doubleValue)}function rv(n){return Qd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qf{constructor(e,t){this.field=e,this.transform=t}}class RE{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class th{}function NE(n,e,t){n instanceof Wf?function(r,o,u){const h=r.value.clone(),m=VE(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof yc?function(r,o,u){if(!zf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=VE(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(LE(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bm(n,e,t){var o;n instanceof Wf?function(r,o,u){if(!zf(r.precondition,o))return;const h=r.value.clone(),m=UE(r.fieldTransforms,u,o);h.setAll(m),o.convertToFoundDocument(FE(o),h).setHasLocalMutations()}(n,e,t):n instanceof yc?function(r,o,u){if(!zf(r.precondition,o))return;const h=UE(r.fieldTransforms,u,o),m=o.data;m.setAll(LE(r)),m.setAll(h),o.convertToFoundDocument(FE(o),m).setHasLocalMutations()}(n,e,t):zf(n.precondition,o=e)&&o.convertToNoDocument(Et.min())}function OE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=ME(r.transform,o||null);null!=u&&(null==t&&(t=ci.empty()),t.set(r.field,u))}return t||null}function PE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&qd(t,r,(o,u)=>function NA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof mc&&r instanceof mc||t instanceof qs&&r instanceof qs?qd(t.elements,r.elements,ia):t instanceof Do&&r instanceof Do?ia(t.k,r.k):t instanceof Zf&&r instanceof Zf);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function FE(n){return n.isFoundDocument()?n.version:Et.min()}class Wf extends th{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class yc extends th{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function LE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function VE(n,e,t){const r=new Map;Tt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,tv(h,m,t[o]))}return r}function UE(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,BC(u,h,e))}return r}class za extends th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Im extends th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class BE{constructor(e){this.count=e}}var Yn,Zt;function iv(n){switch(n){default:return nt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function sv(n){if(void 0===n)return Ln("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Yn.OK:return ce.OK;case Yn.CANCELLED:return ce.CANCELLED;case Yn.UNKNOWN:return ce.UNKNOWN;case Yn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Yn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Yn.INTERNAL:return ce.INTERNAL;case Yn.UNAVAILABLE:return ce.UNAVAILABLE;case Yn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Yn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Yn.NOT_FOUND:return ce.NOT_FOUND;case Yn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Yn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Yn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Yn.ABORTED:return ce.ABORTED;case Yn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Yn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Yn.DATA_LOSS:return ce.DATA_LOSS;default:return nt()}}(Zt=Yn||(Yn={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class Wu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){uc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Of(this.inner)}size(){return this.innerSize}}const jE=new Kn($e.comparator);function zs(){return jE}const $C=new Kn($e.comparator);function ov(...n){let e=$C;for(const t of n)e=e.insert(t.key,t);return e}function Kf(){return new Wu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Yf=new Kn($e.comparator),HC=new ln($e.comparator);function Yt(...n){let e=HC;for(const t of n)e=e.add(t);return e}const sa=new ln(Mt);function Cm(){return sa}class Ku{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Wa.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ku(Et.min(),r,Cm(),zs(),Yt())}}class Wa{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Wa(yr.EMPTY_BYTE_STRING,t,Yt(),Yt(),Yt())}}class Dm{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class $E{constructor(e,t){this.targetId=e,this.$=t}}class HE{constructor(e,t,r=yr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Qf{constructor(){this.B=0,this.L=ZE(),this.U=yr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Yt(),t=Yt(),r=Yt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new Wa(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=ZE()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Tm{constructor(e){this.nt=e,this.st=new Map,this.it=zs(),this.rt=GE(),this.ot=new ln(Mt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Bf(u))if(0===r){const h=new $e(u.path);this.ct(t,h,gn.newNoDocument(h,Et.min()))}else Tt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&Bf(m.target)){const E=new $e(m.target.path);null!==this.it.get(E)||this.It(h,E)||this.ct(h,E,gn.newNoDocument(E,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=Yt();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new Ku(e,t,this.ot,this.it,r);return this.it=zs(),this.rt=GE(),this.ot=new ln(Mt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Qf,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ln(Mt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Qf),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function GE(){return new Kn($e.comparator)}function ZE(){return new Kn($e.comparator)}const qE={asc:"ASCENDING",desc:"DESCENDING"},zE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class av{constructor(e,t){this.databaseId=e,this.N=t}}function nh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WE(n,e){return n.N?e.toBase64():e.toUint8Array()}function GC(n,e){return nh(n,e.toTimestamp())}function Zr(n){return Tt(!!n),Et.fromTimestamp(function(e){const t=Gu(e);return new pn(t.seconds,t.nanos)}(n))}function Jf(n,e){return(t=n,new Gt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Am(n){const e=Gt.fromString(n);return Tt(nb(e)),e}function rh(n,e){return Jf(n.databaseId,e.path)}function Ws(n,e){const t=Am(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(YE(t))}function Xf(n,e){return Jf(n.databaseId,e)}function KE(n){const e=Am(n);return 4===e.length?Gt.emptyPath():YE(e)}function ep(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YE(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function QE(n,e,t){return{name:rh(n,e),fields:t.value.mapValue.fields}}function uv(n,e,t){const r=Ws(n,e.name),o=Zr(e.updateTime),u=new ci({mapValue:{fields:e.fields}}),h=gn.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function tp(n,e){let t;if(e instanceof Wf)t={update:QE(n,e.key,e.value)};else if(e instanceof za)t={delete:rh(n,e.key)};else if(e instanceof yc)t={update:QE(n,e.key,e.data),updateMask:np(e.fieldMask)};else{if(!(e instanceof Im))return nt();t={verify:rh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Zf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof mc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qs)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Do)return{fieldPath:u.field.canonicalString(),increment:h.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:GC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function Sm(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?vr.updateTime(Zr(o.updateTime)):void 0!==o.exists?vr.exists(o.exists):vr.none():vr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let m=null;"setToServerValue"in h?(Tt("REQUEST_TIME"===h.setToServerValue),m=new Zf):"appendMissingElements"in h?m=new mc(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new qs(h.removeAllFromArray.values||[]):"increment"in h?m=new Do(u,h.increment):nt();const E=mr.fromServerFormat(h.fieldPath);return new qf(E,m)}(n,o)):[];var o;if(e.update){const o=Ws(n,e.update.name),u=new ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new ra((e.updateMask.fieldPaths||[]).map(C=>mr.fromServerFormat(C)));return new yc(o,u,h,t,r)}return new Wf(o,u,t,r)}if(e.delete){const o=Ws(n,e.delete);return new za(o,t)}if(e.verify){const o=Ws(n,e.verify);return new Im(o,t)}return nt()}function eb(n,e){return{documents:[Xf(n,e.path)]}}function cv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Xf(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Xf(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(S=>function(k){if("=="===k.op){if(mE(k.value))return{unaryFilter:{field:To(k.field),op:"IS_NAN"}};if(gE(k.value))return{unaryFilter:{field:To(k.field),op:"IS_NULL"}}}else if("!="===k.op){if(mE(k.value))return{unaryFilter:{field:To(k.field),op:"IS_NOT_NAN"}};if(gE(k.value))return{unaryFilter:{field:To(k.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(k.field),op:Ii(k.op),value:k.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:To((S=C).field),direction:tb(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(C=e.limit,n.N||cm(C)?C:{value:C});var C,m,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function dv(n){let e=KE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Tt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=hv(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(S=>{return new fc(ih((k=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let m=null;t.limit&&(m=function(S){let k;return k="object"==typeof S?S.value:S,cm(k)?null:k}(t.limit));let E=null;var S;t.startAt&&(E=new zu((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new zu(S.values||[],!S.before)}(t.endAt)),jf(e,o,h,u,m,"F",E,C)}function hv(n){return n?void 0!==n.unaryFilter?[OA(n)]:void 0!==n.fieldFilter?[qC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>hv(e)).reduce((e,t)=>e.concat(t)):nt():[]}function tb(n){return qE[n]}function Ii(n){return zE[n]}function To(n){return{fieldPath:n.canonicalString()}}function ih(n){return mr.fromServerFormat(n.fieldPath)}function qC(n){return _r.create(ih(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function OA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ih(n.unaryFilter.field);return _r.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ih(n.unaryFilter.field);return _r.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ih(n.unaryFilter.field);return _r.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ih(n.unaryFilter.field);return _r.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function np(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function qr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fv(e)),e=zC(n.get(t),e);return fv(e)}function zC(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function fv(n){return n+"\x01\x01"}function oa(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Gt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&nt(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:nt()}u=h+2}return new Gt(r)}const rb=["userId","batchId"];function sh(n,e){return[n,qr(e)]}function pv(n,e,t){return[n,qr(e),t]}const ib={},xm=["prefixPath","collectionGroup","readTime","documentId"],gv=["prefixPath","collectionGroup","documentId"],PA=["collectionGroup","readTime","prefixPath","documentId"],sb=["canonicalId","targetId"],WC=["targetId","path"],ob=["path","targetId"],Mm=["collectionId","parent"],ab=["indexId","uid"],KC=["uid","sequenceNumber"],mv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yv=["indexId","uid","orderedDocumentKey"],FA=["userId","collectionPath","documentId"],YC=["userId","collectionPath","largestBatchId"],QC=["userId","collectionGroup","largestBatchId"],_v=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ub=[..._v,"documentOverlays"],lb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cb=[...lb,"indexConfiguration","indexState","indexEntries"],vv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class db{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},E=>r(E))}),h=!0,u===o&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(o=>o?fe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class rp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Wn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new oh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=gb(r.target.error);this.At.reject(new oh(e,o))}}static open(e,t,r,o){try{return new rp(t,e.transaction(o,r))}catch(u){throw new oh(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fb(t)}}class Ao{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ao.Vt((0,Ut.z$)())&&Ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),_c(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ut.hl)())return!1;if(Ao.St())return!0;const e=(0,Ut.z$)(),t=Ao.Vt(e),r=0<t&&t<10,o=Ao.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new oh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new ke(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new ke(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new oh(e,m))},u.onupgradeneeded=h=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,_e.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=rp.open(u.db,e,h?"readonly":"readwrite",r),C=o(E).next(S=>(E.bt(),S)).catch(S=>(E.abort(S),fe.reject(S))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return _c(this.Ft.delete())}}class oh extends ke{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yu(n){return"IndexedDbTransactionError"===n.name}class fb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_c(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),_c(this.store.add(e))}get(e){return _c(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),_c(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),_c(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(h,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new fe((u,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new fe((r,o)=>{t.onerror=u=>{const h=gb(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const E=new hb(m),C=t(m.primaryKey,m.value,E);if(C instanceof fe){const S=C.catch(k=>(E.done(),fe.reject(k)));r.push(S)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _c(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=gb(r.target.error);t(o)}})}let pb=!1;function gb(n){const e=Ao.Vt((0,Ut.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pb||(pb=!0,setTimeout(()=>{throw r},0)),r}}return n}class wv extends db{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function zr(n,e){const t=Ze(n);return Ao.xt(t.Ht,e)}class mb{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&NE(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&bm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&bm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&qd(this.mutations,e.mutations,(t,r)=>PE(t,r))&&qd(this.baseMutations,e.baseMutations,(t,r)=>PE(t,r))}}class yb{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Tt(e.mutations.length===r.length);let o=Yf;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new yb(e,t,r,o)}}class _b{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vc{constructor(e,t,r,o,u=Et.min(),h=Et.min(),m=yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new vc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new vc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class JC{constructor(e){this.Jt=e}}function XC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rh(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:nh(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ah(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:ah(e.version)}}var o,u;return r}function wc(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ah(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qu(n){const e=new pn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Ju(n,e){const t=(e.baseMutations||[]).map(u=>Sm(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Sm(n.Jt,u)),o=pn.fromMillis(e.localWriteTimeMs);return new mb(e.batchId,o,t,r)}function uh(n){const e=Qu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qu(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(Tt(1===(o=n.query).documents.length),r=Zs(Xd(KE(o.documents[0])))):r=Zs(dv(n.query)),new vc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,yr.fromBase64String(n.resumeToken))}function Ev(n,e){const t=ah(e.snapshotVersion),r=ah(e.lastLimboFreeSnapshotVersion);let o;o=Bf(e.target)?eb(n.Jt,e.target):cv(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function vb(n){const e=dv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?AE(e,e.limit,"L"):e}function ip(n,e){return new _b(e.largestBatchId,Sm(n.Jt,e.overlayMutation))}function bv(n,e){const t=e.path.lastSegment();return[n,qr(e.path.popLast()),t]}class eD{getBundleMetadata(e,t){return Iv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Qu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Iv(e).put({bundleId:(r=t).id,createTime:ah(Zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:vb(o.bundledQuery),readTime:Qu(o.readTime)};var o})}saveNamedQuery(e,t){return tD(e).put({name:(r=t).name,readTime:ah(Zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Iv(n){return zr(n,"bundles")}function tD(n){return zr(n,"namedQueries")}class Cv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Cv(e,t.uid||"")}getOverlay(e,t){return sp(e).get(bv(this.userId,t)).next(r=>r?ip(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const m=new _b(t,h);o.push(this.Xt(e,m))}),fe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(qr(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(sp(e).Qt("collectionPathOverlayIndex",m))}),fe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Kf(),u=qr(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return sp(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const E of m){const C=ip(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Kf();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sp(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,S)=>{const k=ip(this.M,C);u.size()<o||k.largestBatchId===h?(u.set(k.getKey(),k),h=k.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return sp(e).put(function(r,o,u){const[h,m,E]=bv(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:tp(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function sp(n){return zr(n,"documentOverlays")}class Ka{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Mn(e.integerValue));else if("doubleValue"in e){const r=Mn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),dm(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Zu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Z_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function nD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function rD(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=nD(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ka.fe=new Ka;class VA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=rD(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=rD(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class UA{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class iD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class op{constructor(){this.De=new VA,this.Ce=new UA(this.De),this.xe=new iD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ec{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ec(this.indexId,this.documentKey,this.arrayValue,r)}}function lh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=wb(n.arrayValue,e.arrayValue),0!==t?t:(t=wb(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function wb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Dv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=fm(e);if(void 0!==t&&!this.Be(t))return!1;const r=hc(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class sD{constructor(){this.qe=new gs}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Gs.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class gs{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new ln(Gt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new ln(Gt.comparator)).toArray()}}const km=new Uint8Array(0);class Tv{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new gs,this.Ge=new Wu(r=>qu(r),(r,o)=>Uf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:qr(o)};return Eb(e).put(u)}return fe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[cE(t),""],!1,!0);return Eb(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(oa(h.parent))}return r})}addFieldIndex(e,t){const r=ch(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=ch(e),o=up(e),u=ap(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ap(e);let o=!0;const u=new Map;return fe.forEach(this.Qe(t),h=>this.je(e,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=Yt();const m=[];return fe.forEach(u,(E,C)=>{var S;Pe("IndexedDbIndexManager",`Using index ${S=E,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Nt=>`${Nt.fieldPath}:${Nt.kind}`).join(",")}`} to execute ${qu(t)}`);const k=function(Nt,Ct){const Rt=fm(Ct);if(void 0===Rt)return null;for(const st of ym(Nt,Rt.fieldPath))switch(st.op){case"array-contains-any":return st.value.arrayValue.values||[];case"array-contains":return[st.value]}return null}(C,E),V=function(Nt,Ct){const Rt=new Map;for(const st of hc(Ct))for(const bt of ym(Nt,st.fieldPath))switch(bt.op){case"==":case"in":Rt.set(st.fieldPath.canonicalString(),bt.value);break;case"not-in":case"!=":return Rt.set(st.fieldPath.canonicalString(),bt.value),Array.from(Rt.values())}return null}(C,E),W=function(Nt,Ct){const Rt=[];let st=!0;for(const bt of hc(Ct)){const ca=0===bt.kind?EE(Nt,bt.fieldPath,Nt.startAt):bE(Nt,bt.fieldPath,Nt.startAt);Rt.push(ca.value),st&&(st=ca.inclusive)}return new zu(Rt,st)}(C,E),ae=function(Nt,Ct){const Rt=[];let st=!0;for(const bt of hc(Ct)){const ca=0===bt.kind?bE(Nt,bt.fieldPath,Nt.endAt):EE(Nt,bt.fieldPath,Nt.endAt);Rt.push(ca.value),st&&(st=ca.inclusive)}return new zu(Rt,st)}(C,E),Oe=this.We(E,C,W),Le=this.We(E,C,ae),St=this.ze(E,C,V),kt=this.He(E.indexId,k,Oe,W.inclusive,Le,ae.inclusive,St);return fe.forEach(kt,Nt=>r.Gt(Nt,t.limit).next(Ct=>{Ct.forEach(Rt=>{const st=$e.fromSegments(Rt.documentKey);h.has(st)||(h=h.add(st),m.push(st))})}))}).next(()=>m)}return fe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,h,m){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),C=E/(null!=t?t.length:1),S=[];for(let k=0;k<E;++k){const V=t?this.Je(t[k/C]):km,W=this.Ye(e,V,r[k%C],o),ae=this.Xe(e,V,u[k%C],h),Oe=m.map(Le=>this.Ye(e,V,Le,!0));S.push(...this.createRange(W,ae,Oe))}return S}Ye(e,t,r,o){const u=new Ec(e,$e.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Ec(e,$e.empty(),t,r);return o?u.ke():u}je(e,t){const r=new Dv(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let h=null;for(const m of u)r.$e(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h})}getIndexType(e,t){let r=2;return fe.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(h){let m=new ln(mr.comparator),E=!1;for(const C of h.filters){const S=C;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?E=!0:m=m.add(S.field))}for(const C of h.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new op;for(const o of hc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);Ka.fe.Zt(u,h)}return r.Se()}Je(e){const t=new op;return Ka.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new op;return Ka.fe.Zt(dc(this.databaseId,t),r.Ne(function(o){const u=hc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new op);let u=0;for(const h of hc(e)){const m=r[u++];for(const E of o)if(this.en(t,h.fieldPath)&&Qd(m))o=this.nn(o,h,m);else{const C=E.Ne(h.kind);Ka.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const E=new op;E.seed(m.Se()),Ka.fe.Zt(h,E.Ne(t.kind)),u.push(E)}return u}en(e,t){return!!e.filters.find(r=>r instanceof _r&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ch(e),o=up(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return fe.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{h.push(function(C,S){const k=S?new Vf(S.sequenceNumber,new Gs(Qu(S.readTime),new $e(oa(S.documentKey)),S.largestBatchId)):Vf.empty(),V=C.fields.map(([W,ae])=>new pm(mr.fromServerFormat(W),ae));return new Lf(C.indexId,C.collectionGroup,V,k)}(m,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=ch(e),u=up(e);return this.rn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>fe.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:ah((V=r).readTime),documentKey:qr(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?fe.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),fe.forEach(m,E=>this.on(e,o,E).next(C=>{const S=this.un(u,E);return C.isEqual(S)?fe.resolve():this.an(e,u,E,C,S)}))))})}cn(e,t,r,o){return ap(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return ap(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=ap(e);let u=new ln(lh);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(h,m)=>{u=u.add(new Ec(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new ln(lh);const o=this.Ze(t,e);if(null==o)return r;const u=fm(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Qd(h))for(const m of h.arrayValue.values||[])r=r.add(new Ec(t.indexId,e.key,this.Je(m),o))}else r=r.add(new Ec(t.indexId,e.key,km,o));return r}an(e,t,r,o,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(m,E,C,S,k){const V=m.getIterator(),W=E.getIterator();let ae=Jd(V),Oe=Jd(W);for(;ae||Oe;){let Le=!1,St=!1;if(ae&&Oe){const kt=C(ae,Oe);kt<0?St=!0:kt>0&&(Le=!0)}else null!=ae?St=!0:Le=!0;Le?(S(Oe),Oe=Jd(W)):St?(k(ae),ae=Jd(V)):(ae=Jd(V),Oe=Jd(W))}}(o,u,lh,m=>{h.push(this.cn(e,t,r,m))},m=>{h.push(this.hn(e,t,r,m))}),fe.waitFor(h)}rn(e){let t=1;return up(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>lh(h,m)).filter((h,m,E)=>!m||0!==lh(h,E[m-1]));const o=[];o.push(e);for(const h of r){const m=lh(h,e),E=lh(h,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(h),o.push(h.ke());else if(E>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,km,[]],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,km,[]]));return u}getMinOffset(e,t){let r;return fe.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||vE(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Gs.min()})).next(()=>r)}}function Eb(n){return zr(n,"collectionParents")}function ap(n){return zr(n,"indexEntries")}function ch(n){return zr(n,"indexConfiguration")}function up(n){return zr(n,"indexState")}const Av={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Yi(e,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sv(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:h},(S,k,V)=>(m++,V.delete()));u.push(E.next(()=>{Tt(1===m)}));const C=[];for(const S of t.mutations){const k=pv(e,S.key.path,t.batchId);u.push(o.delete(k)),C.push(S.key)}return fe.waitFor(u).next(()=>C)}function Rm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Yi.DEFAULT_COLLECTION_PERCENTILE=10,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yi.DEFAULT=new Yi(41943040,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yi.DISABLED=new Yi(-1,0,0);class xv{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new xv(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Ks(e),h=aa(e);return h.add({}).next(m=>{Tt("number"==typeof m);const E=new mb(m,t,r,o),C=function(V,W,ae){const Oe=ae.baseMutations.map(St=>tp(V.Jt,St)),Le=ae.mutations.map(St=>tp(V.Jt,St));return{userId:W,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Oe,mutations:Le}}(this.M,this.userId,E),S=[];let k=new ln((V,W)=>Mt(V.canonicalString(),W.canonicalString()));for(const V of o){const W=pv(this.userId,V.key.path,m);k=k.add(V.key.path.popLast()),S.push(h.put(C)),S.push(u.put(W,ib))}return k.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.ln[m]=E.keys()}),fe.waitFor(S).next(()=>E)})}lookupMutationBatch(e,t){return aa(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Ju(this.M,r)):null)}fn(e,t){return this.ln[t]?fe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return aa(e).Wt({index:"userMutationsIndex",range:o},(h,m,E)=>{m.userId===this.userId&&(Tt(m.batchId>=r),u=Ju(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return aa(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Ju(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sh(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Ks(e).Wt({range:o},(h,m,E)=>{const[C,S,k]=h,V=oa(S);if(C===this.userId&&t.path.isEqual(V))return aa(e).get(k).next(W=>{if(!W)throw nt();Tt(W.userId===this.userId),u.push(Ju(this.M,W))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Mt);const o=[];return t.forEach(u=>{const h=sh(this.userId,u.path),m=IDBKeyRange.lowerBound(h),E=Ks(e).Wt({range:m},(C,S,k)=>{const[V,W,ae]=C,Oe=oa(W);V===this.userId&&u.path.isEqual(Oe)?r=r.add(ae):k.done()});o.push(E)}),fe.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=sh(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new ln(Mt);return Ks(e).Wt({range:h},(E,C,S)=>{const[k,V,W]=E,ae=oa(V);k===this.userId&&r.isPrefixOf(ae)?ae.length===o&&(m=m.add(W)):S.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(aa(e).get(u).next(h=>{if(null===h)throw nt();Tt(h.userId===this.userId),r.push(Ju(this.M,h))}))}),fe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Sv(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),fe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Ks(e).Wt({range:r},(u,h,m)=>{if(u[0]===this.userId){const E=oa(u[1]);o.push(E)}else m.done()}).next(()=>{Tt(0===o.length)})})}containsKey(e,t){return bb(e,this.userId,t)}wn(e){return Mv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bb(n,e,t){const r=sh(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Ks(n).Wt({range:u,jt:!0},(m,E,C)=>{const[S,k,V]=m;S===e&&k===o&&(h=!0),C.done()}).next(()=>h)}function aa(n){return zr(n,"mutations")}function Ks(n){return zr(n,"documentMutations")}function Mv(n){return zr(n,"mutationQueues")}class Xu{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Xu(0)}static yn(){return new Xu(-1)}}class oD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Xu(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Et.fromTimestamp(new pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lp(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return lp(e).Wt((h,m)=>{const E=uh(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>fe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return lp(e).Wt((r,o)=>{const u=uh(o);t(u)})}pn(e){return Ib(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}In(e,t){return Ib(e).put("targetGlobalKey",t)}Tn(e,t){return lp(e).put(Ev(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return lp(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,E)=>{const C=uh(m);Uf(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=el(e);return t.forEach(h=>{const m=qr(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),fe.waitFor(o)}removeMatchingKeys(e,t,r){const o=el(e);return fe.forEach(t,u=>{const h=qr(u.path);return fe.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=el(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=el(e);let u=Yt();return o.Wt({range:r,jt:!0},(h,m,E)=>{const C=oa(h[1]),S=new $e(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=qr(t.path),o=IDBKeyRange.bound([r],[cE(r)],!1,!0);let u=0;return el(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],E,C)=>{0!==h&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return lp(e).get(t).next(r=>r?uh(r):null)}}function lp(n){return zr(n,"targets")}function Ib(n){return zr(n,"targetGlobal")}function el(n){return zr(n,"targetDocuments")}function bc(n){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,_e.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==vv)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Nm.apply(this,arguments)}function Cb([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class aD{constructor(e){this.An=e,this.buffer=new ln(Cb),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Cb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Yu(o)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield bc(o)}yield t.Sn(e)}))}}class kv{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(Ki.A);const r=new aD(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Av)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Av):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,h,m,E,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),o=this.params.maximumSequenceNumbersToCollect):o=k,h=Date.now(),this.nthSequenceNumber(e,o))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(C=Date.now(),j_()<=Ru.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-S}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${k} documents in `+(C-E)+`ms\nTotal Duration: ${C-S}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:k})))}}class Db{constructor(e,t){this.db=e,this.garbageCollector=new kv(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Om(e,r)}removeReference(e,t,r){return Om(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Om(e,t)}On(e,t){return function(r,o){let u=!1;return Mv(r).zt(h=>bb(r,h,o).next(m=>(m&&(u=!0),fe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(h,m)=>{if(m<=t){const E=this.On(e,h).next(C=>{if(!C)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,Et.min()),el(e).delete([0,qr(h.path)])))});o.push(E)}}).next(()=>fe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Om(e,t)}Mn(e,t){const r=el(e);let o,u=Ki.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:E,sequenceNumber:C})=>{0===h?(u!==Ki.A&&t(new $e(oa(o)),u),u=C,o=E):u=Ki.A}).next(()=>{u!==Ki.A&&t(new $e(oa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Om(n,e){return el(n).put((r=n.currentSequenceNumber,{targetId:0,path:qr(e.path),sequenceNumber:r}));var r}class Tb{constructor(){this.changes=new Wu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ab{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return tl(e).put(r)}removeEntry(e,t,r){return tl(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],wc(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=gn.newInvalidDocument(t);return tl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(cp(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:gn.newInvalidDocument(t)};return tl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(cp(t))},(o,u)=>{r={document:this.$n(t,u),size:Rm(u)}}).next(()=>r)}getEntries(e,t){let r=zs();return this.Ln(e,t,(o,u)=>{const h=this.$n(o,u);r=r.insert(o,h)}).next(()=>r)}Un(e,t){let r=zs(),o=new Kn($e.comparator);return this.Ln(e,t,(u,h)=>{const m=this.$n(u,h);r=r.insert(u,m),o=o.insert(u,Rm(h))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return fe.resolve();let o=new ln(Ov);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(cp(o.first()),cp(o.last())),h=o.getIterator();let m=h.getNext();return tl(e).Wt({index:"documentKeyIndex",range:u},(E,C,S)=>{const k=$e.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Ov(m,k)<0;)r(m,null),m=h.getNext();m&&m.isEqual(k)&&(r(m,C),m=h.hasNext()?h.getNext():null),m?S.Ut(cp(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),wc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tl(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let m=zs();for(const E of h){const C=this.$n($e.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=zs();const h=Nv(t,r),m=Nv(t,Gs.max());return tl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(E,C,S)=>{const k=this.$n($e.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(k.key,k),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new Rv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Pm(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Fn(e,t){return Pm(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function LA(n,e){let t;if(e.document)t=uv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=Qu(e.noDocument.readTime);t=gn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=$e.fromSegments(e.unknownDocument.path),o=Qu(e.unknownDocument.version);t=gn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new pn(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return gn.newInvalidDocument(e)}}class Rv extends Tb{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Wu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new ln((u,h)=>Mt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const E=XC(this.Kn.M,h);o=o.add(u.path.popLast()),r+=Rm(E)-m.size,t.push(this.Kn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=XC(this.Kn.M,h.convertToNoDocument(Et.min()));t.push(this.Kn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function Pm(n){return zr(n,"remoteDocumentGlobal")}function tl(n){return zr(n,"remoteDocumentsV14")}function cp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nv(n,e){const t=e.documentKey.path.toArray();return[n,wc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ov(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class uD{constructor(e){this.M=e}kt(e,t,r,o){const u=new rp("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rb,{unique:!0}),m.createObjectStore("documentMutations"),Sb(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=fe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Sb(e)),h=h.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rb,{unique:!0});const S=E.store("mutations"),k=C.map(V=>S.put(V));return fe.waitFor(k)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Qn(u))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(h=h.next(()=>this.Wn(u))),r<8&&o>=8&&(h=h.next(()=>this.zn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.Hn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:FA});E.createIndex("collectionPathOverlayIndex",YC,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",QC,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:xm});E.createIndex("documentKeyIndex",gv),E.createIndex("collectionGroupIndex",PA)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:ab}).createIndex("sequenceNumberIndex",KC,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:mv}).createIndex("documentKeyIndex",yv,{unique:!1})}(e)})),h}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Rm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>fe.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>fe.forEach(m,E=>{Tt(E.userId===u.userId);const C=Ju(this.M,E);return Sv(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,m)=>{const E=new Gt(h),C=[0,qr(E)];u.push(t.get(C).next(S=>S?fe.resolve():t.put({targetId:0,path:qr(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>fe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Mm});const r=t.store("collectionParents"),o=new gs,u=h=>{if(o.add(h)){const m=h.lastSegment(),E=h.popLast();return r.put({collectionId:m,parent:qr(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const E=new Gt(h);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,E],C)=>{const S=oa(m);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=uh(o),h=Ev(this.M,u);return t.put(h)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const m=t.store("remoteDocumentsV14"),E=(C=h,C.document?new $e(Gt.fromString(C.document.name).popFirst(5)):C.noDocument?$e.fromSegments(C.noDocument.path):C.unknownDocument?$e.fromSegments(C.unknownDocument.path):nt()).path.toArray();var C;const S={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(S))}).next(()=>fe.waitFor(o))}}function Sb(n){n.createObjectStore("targetDocuments",{keyPath:WC}).createIndex("documentTargetsIndex",ob,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sb,{unique:!0}),n.createObjectStore("targetGlobal")}const xb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mb{constructor(e,t,r,o,u,h,m,E,C,S,k=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=h,this.document=m,this.Xn=C,this.Zn=S,this.ts=k,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!Mb.vt())throw new ke(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Db(this,o),this.hs=t+"main",this.M=new JC(E),this.ls=new Ao(this.hs,this.ts,new uD(this.M)),this.fs=new oD(this.referenceDelegate,this.M),this.ds=new Ab(this.M),this._s=new eD,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&Ln("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(ce.FAILED_PRECONDITION,xb);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ki(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Yu(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return dh(e).get("owner").next(t=>fe.resolve(this.Ps(t)))}Vs(e){return Fm(e).delete(this.clientId)}vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=zr(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ds(u,18e5),m=u.filter(E=>-1===h.indexOf(E));return fe.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?fe.resolve(!0):dh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new ke(ce.FAILED_PRECONDITION,xb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fm(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new wv(t,Ki.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Fm(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return xv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Tv(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Cv.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.ts)?cb:13===h?lb:12===h?ub:11===h?_v:void nt();var h;let m;return this.ls.runTransaction(e,o,u,E=>(m=new wv(E,this.es?this.es.next():Ki.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw Ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new ke(ce.FAILED_PRECONDITION,vv);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}$s(e){return dh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(ce.FAILED_PRECONDITION,xb)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dh(e).put("owner",t)}static vt(){return Ao.vt()}Rs(e){const t=dh(e);return t.get("owner").next(r=>this.Ps(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ln(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ut.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ln("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Ln("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function dh(n){return zr(n,"owner")}function Fm(n){return zr(n,"clientMetadata")}function Pv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class lD{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):TE(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let o=ov();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=ov();return this.indexManager.getCollectionParents(e,o).next(h=>fe.forEach(h,m=>{const E=(C=t,S=m.child(o),new qa(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.zs(e,E,r).next(C=>{C.forEach((S,k)=>{u=u.insert(S,k)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const E=m.key;let C=o.get(E);null==C&&(C=gn.newInvalidDocument(E),o=o.insert(E,C)),bm(m,C,h.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,h)=>{vm(t,h)||(o=o.remove(u))}),o))}}class kb{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Yt(),o=Yt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new kb(e,t.fromCache,r,o)}}class cD{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return fe.resolve(null)}ei(e,t,r,o){return function eh(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(Et.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const h=this.si(t,u);return this.ii(t,h,r,o)?this.ni(e,t):(j_()<=Ru.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_m(t)),this.ri(e,h,t,gm(o,-1)))})}si(e,t){let r=new ln(Hf(e));return t.forEach((o,u)=>{vm(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return j_()<=Ru.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",_m(t)),this.Zs.Qs(e,t,Gs.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}class jA{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Kn(Mt),this.ai=new Wu(u=>qu(u),Uf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new lD(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function dD(n,e,t,r){return new jA(n,e,t,r)}function hD(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,_e.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let E=Yt();for(const C of o){h.push(C.batchId);for(const S of C.mutations)E=E.add(S.key)}for(const C of u){m.push(C.batchId);for(const S of C.mutations)E=E.add(S.key)}return t.fi.Ks(r,E).next(C=>({di:C,removedBatchIds:h,addedBatchIds:m}))})})}),Fv.apply(this,arguments)}function Lm(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(h,m,E,C){const S=E.batch,k=S.keys();let V=fe.resolve();return k.forEach(W=>{V=V.next(()=>C.getEntry(m,W)).next(ae=>{const Oe=E.docVersions.get(W);Tt(null!==Oe),ae.version.compareTo(Oe)<0&&(S.applyToRemoteDocument(ae,E),ae.isValidDocument()&&(ae.setReadTime(E.commitVersion),C.addEntry(ae)))})}),V.next(()=>h.Bs.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function Rb(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function fD(n,e){const t=Ze(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,S)=>{const k=o.get(S);if(!k)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,S)));let V=k.withSequenceNumber(u.currentSequenceNumber);var W,ae,Oe;e.targetMismatches.has(S)?V=V.withResumeToken(yr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),o=o.insert(S,V),ae=V,Oe=C,(0===(W=k).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,V))});let E=zs();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(Lv(u,h,e.documentUpdates).next(C=>{E=C})),!r.isEqual(Et.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return fe.waitFor(m).next(()=>h.apply(u)).next(()=>t.fi.Gs(u,E)).next(()=>E)}).then(u=>(t.ui=o,u))}function Lv(n,e,t){let r=Yt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=zs();return t.forEach((h,m)=>{const E=o.get(h);m.isNoDocument()&&m.version.isEqual(Et.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",m.version)}),u})}function Ic(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Cc(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,fe.resolve(o)):t.fs.allocateTargetId(r).next(h=>(o=new vc(e,h,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function nl(n,e,t){return dp.apply(this,arguments)}function dp(){return dp=(0,_e.Z)(function*(n,e,t){const r=Ze(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Yu(h))throw h;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),dp.apply(this,arguments)}function Vm(n,e,t){const r=Ze(n);let o=Et.min(),u=Yt();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,E,C){const S=Ze(m),k=S.ai.get(C);return void 0!==k?fe.resolve(S.ui.get(k)):S.fs.getTargetData(E,C)}(r,h,Zs(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(h,m.targetId).next(E=>{u=E})}).next(()=>r.oi.Qs(h,e,t?o:Et.min(),t?u:Yt())).next(m=>(hp(r,wm(e),m),{documents:m,_i:u})))}function Um(n,e){const t=Ze(n),r=Ze(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function Bm(n,e){const t=Ze(n),r=t.ci.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,gm(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(hp(t,e,o),o))}function hp(n,e,t){let r=Et.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function Nb(){return Nb=(0,_e.Z)(function*(n,e,t,r){const o=Ze(n);let u=Yt(),h=zs();for(const C of t){const S=e.wi(C.metadata.name);C.document&&(u=u.add(S));const k=e.mi(C);k.setReadTime(e.gi(C.metadata.readTime)),h=h.insert(S,k)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),E=yield Cc(o,(C=r,Zs(Xd(Gt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Lv(C,m,h).next(S=>(m.apply(C),S)).next(S=>o.fs.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.fs.addMatchingKeys(C,u,E.targetId)).next(()=>o.fi.Gs(C,S)).next(()=>S)))}),Nb.apply(this,arguments)}function HA(n,e){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,_e.Z)(function*(n,e,t=Yt()){const r=yield Cc(n,Zs(vb(e.bundledQuery))),o=Ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Zr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(yr.EMPTY_BYTE_STRING,h);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),Ob.apply(this,arguments)}class Pb{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return fe.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Zr(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:vb(r.bundledQuery),readTime:Zr(r.readTime)}),fe.resolve();var r}}class pD{constructor(){this.overlays=new Kn($e.comparator),this.Ii=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const o=Kf(),u=t.length+1,h=new $e(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Kn((C,S)=>C-S);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=Kf(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const m=Kf(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,S)=>m.set(C,S)),!(m.size()>=o)););return fe.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new _b(t,r));let u=this.Ii.get(t);void 0===u&&(u=Yt(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class Vv{constructor(){this.Ti=new ln(Or.Ei),this.Ai=new ln(Or.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Or(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Or(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new Gt([])),r=new Or(t,e),o=new Or(t,e+1),u=[];return this.Ai.forEachInRange([r,o],h=>{this.Pi(h),u.push(h.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new Gt([])),r=new Or(t,e),o=new Or(t,e+1);let u=Yt();return this.Ai.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Or(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Or{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||Mt(e.Ci,t.Ci)}static Ri(e,t){return Mt(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class gD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new ln(Or.Ei)}checkEmpty(e){return fe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const h=new mb(u,t,r,o);this.Bs.push(h);for(const m of o)this.Ni=this.Ni.add(new Or(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return fe.resolve(h)}lookupMutationBatch(e,t){return fe.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return fe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return fe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Or(t,0),o=new Or(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],h=>{const m=this.ki(h.Ci);u.push(m)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Mt);return t.forEach(o=>{const u=new Or(o,0),h=new Or(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,h],m=>{r=r.add(m.Ci)})}),fe.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const h=new Or(new $e(u),0);let m=new ln(Mt);return this.Ni.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.Ci)),!0)},h),fe.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Tt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return fe.forEach(t.mutations,o=>{const u=new Or(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Or(t,0),o=this.Ni.firstAfterOrEqual(r);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return fe.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Fb{constructor(e){this.$i=e,this.docs=new Kn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let r=zs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():gn.newInvalidDocument(o))}),fe.resolve(r)}getAllFromCollection(e,t,r){let o=zs();const u=new $e(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:E}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||vE(NC(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}Bi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Lb(this)}getSize(e){return fe.resolve(this.size)}}class Lb extends Tb{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Vb{constructor(e){this.persistence=e,this.Li=new Wu(t=>qu(t),Uf),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Vv,this.targetCount=0,this.Ki=Xu.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),fe.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Xu(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tn(t),fe.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),fe.waitFor(u).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.qi.containsKey(t))}}class mD{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ki(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Vb(this),this.indexManager=new sD,this.ds=new Fb(r=>this.referenceDelegate.Qi(r)),this.M=new JC(t),this._s=new Pb(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new gD(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new yD(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return fe.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class yD extends db{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Hi=new Vv,this.Ji=null}static Yi(e){return new jm(e)}get Xi(){if(this.Ji)return this.Ji;throw nt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Xi,r=>{const o=$e.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,Et.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return fe.or([()=>fe.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function $m(n,e){return`firestore_clients_${n}_${e}`}function _D(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Hm(n,e){return`firestore_targets_${n}_${e}`}class hh{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new ke(o.error.code,o.error.message))),h?new hh(e,t,o.state,u):(Ln("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new ke(r.error.code,r.error.message))),u?new fp(e,r.state,o):(Ln("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Cm();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=kC(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new Gm(e,u):(Ln("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ub{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ub(t.clientId,t.onlineState):(Ln("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bb{constructor(){this.activeTargetIds=Cm()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uv{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Kn(Mt),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=$m(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Bb),this.dr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem($m(e.persistenceKey,o));if(u){const h=Gm.tr(o,u);h&&(e.ar=e.ar.insert(h.clientId,h))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Hm(this.persistenceKey,e));if(r){const o=fp.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hm(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Ln("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let h=Ki.A;if(null!=u)try{const m=JSON.parse(u);Tt("number"==typeof m),h=m}catch(m){Ln("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==Ki.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new hh(this.currentUser,e,t,r),u=_D(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=_D(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=Hm(this.persistenceKey,e),u=new fp(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Gm.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return hh.tr(new Nr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return fp.tr(o,t)}pr(e){return Ub.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),h=[],m=[];return u.forEach(E=>{o.has(E)||h.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Lr(h,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Cm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class jb{constructor(){this.Ur=new Bb,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Bb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class GA{Kr(e){}shutdown(){}}class vD{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ZA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class qA{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class zA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const h=this.ho(e,t);Pe("RestConnection","Sending: ",h,r);const m={};return this.lo(m,o,u),this.fo(e,h,m,r).then(E=>(Pe("RestConnection","Received: ",E),E),E=>{throw sm("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$s,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${ZA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,h)=>{const m=new sE;m.listenOnce(nE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case im.NO_ERROR:const C=m.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case im.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),h(new ke(ce.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const S=m.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const k=m.getResponseJson().error;if(k&&k.status&&k.message){const V=function(W){const ae=W.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ae)>=0?ae:ce.UNKNOWN}(k.status);h(new ke(V,k.message))}else h(new ke(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ke(ce.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=eE(),h=tE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new iE({})),this.lo(m.initMessageHeaders,t,r),(0,Ut.uI)()||(0,Ut.b$)()||(0,Ut.d)()||(0,Ut.w1)()||(0,Ut.Mn)()||(0,Ut.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Pe("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let S=!1,k=!1;const V=new qA({Jr:ae=>{k?Pe("Connection","Not sending because WebChannel is closed:",ae):(S||(Pe("Connection","Opening WebChannel transport."),C.open(),S=!0),Pe("Connection","WebChannel sending:",ae),C.send(ae))},Yr:()=>C.close()}),W=(ae,Oe,Le)=>{ae.listen(Oe,St=>{try{Le(St)}catch(kt){setTimeout(()=>{throw kt},0)}})};return W(C,Nf.EventType.OPEN,()=>{k||Pe("Connection","WebChannel transport opened.")}),W(C,Nf.EventType.CLOSE,()=>{k||(k=!0,Pe("Connection","WebChannel transport closed"),V.ro())}),W(C,Nf.EventType.ERROR,ae=>{k||(k=!0,sm("Connection","WebChannel transport errored:",ae),V.ro(new ke(ce.UNAVAILABLE,"The operation could not be completed")))}),W(C,Nf.EventType.MESSAGE,ae=>{var Oe;if(!k){const Le=ae.data[0];Tt(!!Le);const St=Le,kt=St.error||(null===(Oe=St[0])||void 0===Oe?void 0:Oe.error);if(kt){Pe("Connection","WebChannel received error:",kt);const Nt=kt.status;let Ct=function(st){const bt=Yn[st];if(void 0!==bt)return sv(bt)}(Nt),Rt=kt.message;void 0===Ct&&(Ct=ce.INTERNAL,Rt="Unknown error status: "+Nt+" with message "+kt.message),k=!0,V.ro(new ke(Ct,Rt)),C.close()}else Pe("Connection","WebChannel received:",Le),V.oo(Le)}}),W(h,rE.STAT_EVENT,ae=>{ae.stat===U_.PROXY?Pe("Connection","Detected buffering proxy"):ae.stat===U_.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.io()},0),V}}function $b(){return"undefined"!=typeof window?window:null}function Bv(){return"undefined"!=typeof document?document:null}function Zm(n){return new av(n,!0)}class Hb{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class wD{constructor(e,t,r,o,u,h,m,E){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Hb(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_e.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ln(t.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new ke(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}jo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i extends wD{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function JE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:nt(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(Tt(void 0===C||"string"==typeof C),yr.fromBase64String(C||"")):(Tt(void 0===C||C instanceof Uint8Array),yr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(E){const C=void 0===E.code?ce.UNKNOWN:sv(E.code);return new ke(C,E.message||"")}(h);t=new HE(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ws(n,r.document.name),u=Zr(r.document.updateTime),h=new ci({mapValue:{fields:r.document.fields}}),m=gn.newFoundDocument(o,u,h);t=new Dm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ws(n,r.document),u=r.readTime?Zr(r.readTime):Et.min(),h=gn.newNoDocument(o,u);t=new Dm([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Ws(n,r.document);t=new Dm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new BE(r.count||0);t=new $E(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Et.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?Zr(u.readTime):Et.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=ep(this.M),t.addTarget=function(o,u){let h;const m=u.target;return h=Bf(m)?{documents:eb(o,m)}:{query:cv(o,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=WE(o,u.resumeToken):u.snapshotVersion.compareTo(Et.min())>0&&(h.readTime=nh(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function ZC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=ep(this.M),t.removeTarget=e,this.Lo(t)}}class s extends wD{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function XE(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,o){let u=Zr(r.updateTime?r.updateTime:o);return u.isEqual(Et.min())&&(u=Zr(o)),new RE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.tu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=ep(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tp(this.M,r))};this.Lo(t)}}class a extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new ke(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(ce.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(ce.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class l{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ln(t),this.uu=!1):Pe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class d{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,_e.Z)(function*(){var E;Re(h)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,_e.Z)(function*(C){const S=Ze(C);S.wu.add(4),yield w(S),S.yu.set("Unknown"),S.wu.delete(4),yield p(S)}),function(C){return E.apply(this,arguments)})(h))}))}),this.yu=new l(r,o)}}function p(n){return _.apply(this,arguments)}function _(){return _=(0,_e.Z)(function*(n){if(Re(n))for(const e of n.mu)yield e(!0)}),_.apply(this,arguments)}function w(n){return b.apply(this,arguments)}function b(){return b=(0,_e.Z)(function*(n){for(const e of n.mu)yield e(!1)}),b.apply(this,arguments)}function A(n,e){const t=Ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),ve(t)?Q(t):Km(t).Mo()&&P(t,e))}function x(n,e){const t=Ze(n),r=Km(t);t._u.delete(e),r.Mo()&&U(t,e),0===t._u.size&&(r.Mo()?r.$o():Re(t)&&t.yu.set("Unknown"))}function P(n,e){n.pu.Z(e.targetId),Km(n).Ho(e)}function U(n,e){n.pu.Z(e),Km(n).Jo(e)}function Q(n){n.pu=new Tm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Km(n).start(),n.yu.au()}function ve(n){return Re(n)&&!Km(n).ko()&&n._u.size>0}function Re(n){return 0===Ze(n).wu.size}function je(n){n.pu=void 0}function Xe(n){return De.apply(this,arguments)}function De(){return De=(0,_e.Z)(function*(n){n._u.forEach((e,t)=>{P(n,e)})}),De.apply(this,arguments)}function ht(n,e){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,_e.Z)(function*(n,e){je(n),ve(n)?(n.yu.lu(e),Q(n)):n.yu.set("Unknown")}),Vt.apply(this,arguments)}function tn(n,e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=(0,_e.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof HE&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,u){const h=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ua(n,r)}else if(e instanceof Dm?n.pu.ut(e):e instanceof $E?n.pu._t(e):n.pu.ht(e),!t.isEqual(Et.min()))try{const r=yield Rb(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.pu.yt(u);return h.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(E);C&&o._u.set(E,C.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const E=o._u.get(m);if(!E)return;o._u.set(m,E.withResumeToken(yr.EMPTY_BYTE_STRING,E.snapshotVersion)),U(o,m);const C=new vc(E.target,m,1,E.sequenceNumber);P(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield ua(n,r)}var r}),Ci.apply(this,arguments)}function ua(n,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,_e.Z)(function*(n,e,t){if(!Yu(e))throw e;n.wu.add(1),yield w(n),n.yu.set("Offline"),t||(t=()=>Rb(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield p(n)}))}),pp.apply(this,arguments)}function qm(n,e){return e().catch(t=>ua(n,t,e))}function rl(n){return gp.apply(this,arguments)}function gp(){return gp=(0,_e.Z)(function*(n){const e=Ze(n),t=fh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;jv(e);)try{const o=yield Ic(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,$v(e,o)}catch(o){yield ua(e,o)}zm(e)&&Wm(e)}),gp.apply(this,arguments)}function jv(n){return Re(n)&&n.du.length<10}function $v(n,e){n.du.push(e);const t=fh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function zm(n){return Re(n)&&!fh(n).ko()&&n.du.length>0}function Wm(n){fh(n).start()}function Hv(n){return ED.apply(this,arguments)}function ED(){return ED=(0,_e.Z)(function*(n){fh(n).nu()}),ED.apply(this,arguments)}function MM(n){return bD.apply(this,arguments)}function bD(){return bD=(0,_e.Z)(function*(n){const e=fh(n);for(const t of n.du)e.Zo(t.mutations)}),bD.apply(this,arguments)}function kM(n,e,t){return ID.apply(this,arguments)}function ID(){return ID=(0,_e.Z)(function*(n,e,t){const r=n.du.shift(),o=yb.from(r,e,t);yield qm(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield rl(n)}),ID.apply(this,arguments)}function RM(n,e){return CD.apply(this,arguments)}function CD(){return CD=(0,_e.Z)(function*(n,e){var t;e&&fh(n).Xo&&(yield(t=(0,_e.Z)(function*(r,o){if(iv(u=o.code)&&u!==ce.ABORTED){const h=r.du.shift();fh(r).Fo(),yield qm(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield rl(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),zm(n)&&Wm(n)}),CD.apply(this,arguments)}function WA(n,e){return DD.apply(this,arguments)}function DD(){return DD=(0,_e.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Re(t);t.wu.add(3),yield w(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield p(t)}),DD.apply(this,arguments)}function TD(n,e){return AD.apply(this,arguments)}function AD(){return AD=(0,_e.Z)(function*(n,e){const t=Ze(n);e?(t.wu.delete(2),yield p(t)):e||(t.wu.add(2),yield w(t),t.yu.set("Unknown"))}),AD.apply(this,arguments)}function Km(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ze(e);return o.iu(),new i(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Xe.bind(null,n),eo:ht.bind(null,n),zo:tn.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Fo(),ve(n)?Q(n):n.yu.set("Unknown")):(yield n.Iu.stop(),je(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function fh(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ze(e);return o.iu(),new s(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Hv.bind(null,n),eo:RM.bind(null,n),eu:MM.bind(null,n),tu:kM.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.Fo(),yield rl(n)):(yield n.Tu.stop(),n.du.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class SD{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new SD(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ym(n,e){if(Ln("AsyncQueue",`${e}: ${n}`),Yu(n))return new ke(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Qm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=ov(),this.sortedSet=new Kn(this.comparator)}static emptySet(e){return new Qm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class KA{constructor(){this.Eu=new Kn($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):nt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jm{constructor(e,t,r,o,u,h,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Jm(e,t,Qm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class NM{constructor(){this.Ru=void 0,this.listeners=[]}}class OM{constructor(){this.queries=new Wu(e=>SE(e),$f),this.onlineState="Unknown",this.bu=new Set}}function xD(n,e){return MD.apply(this,arguments)}function MD(){return MD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new NM),o)try{u.Ru=yield t.onListen(r)}catch(h){const m=Ym(h,`Initialization of query '${_m(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&ND(t)}),MD.apply(this,arguments)}function kD(n,e){return RD.apply(this,arguments)}function RD(){return RD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),RD.apply(this,arguments)}function PM(n,e){const t=Ze(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Vu(o)&&(r=!0);h.Ru=o}}r&&ND(t)}function FM(n,e,t){const r=Ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function ND(n){n.bu.forEach(e=>{e.next()})}class OD{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Jm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Jm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class LM{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class YA{constructor(e){this.M=e}wi(e){return Ws(this.M,e)}mi(e){return e.metadata.exists?uv(this.M,e.document,!1):gn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Zr(e)}}class VM{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Gt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new YA(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||Yt()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function $A(n,e,t,r){return Nb.apply(this,arguments)}(e.localStore,new YA(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield HA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function QA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JA{constructor(e){this.key=e}}class XA{constructor(e){this.key=e}}class eS{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=Hf(e),this.Qu=new Qm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new KA,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,k)=>{const V=o.get(S),W=vm(this.query,k)?k:null,ae=!!V&&this.mutatedKeys.has(V.key),Oe=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let Le=!1;V&&W?V.data.isEqual(W.data)?ae!==Oe&&(r.track({type:3,doc:W}),Le=!0):this.Hu(V,W)||(r.track({type:2,doc:W}),Le=!0,(E&&this.Gu(W,E)>0||C&&this.Gu(W,C)<0)&&(m=!0)):!V&&W?(r.track({type:0,doc:W}),Le=!0):V&&!W&&(r.track({type:1,doc:V}),Le=!0,(E||C)&&(m=!0)),Le&&(W?(h=h.add(W),u=Oe?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const S="F"===this.query.limitType?h.last():h.first();h=h.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:h,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,S)=>function(k,V){const W=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return W(k)-W(V)}(C.type,S.type)||this.Gu(C.doc,S.doc)),this.Ju(r);const h=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,E=m!==this.qu;return this.qu=m,0!==u.length||E?{snapshot:new Jm(this.query,e.Qu,o,u,e.mutatedKeys,0===m,E,!1),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new KA,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new XA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new JA(r))}),t}ta(e){this.Uu=e._i,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Jm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class UM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BM{constructor(e){this.key=e,this.na=!1}}class jM{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.sa={},this.ia=new Wu(m=>SE(m),$f),this.ra=new Map,this.oa=new Set,this.ua=new Kn($e.comparator),this.aa=new Map,this.ca=new Vv,this.ha={},this.la=new Map,this.fa=Xu.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function $M(n,e){return PD.apply(this,arguments)}function PD(){return PD=(0,_e.Z)(function*(n,e){const t=iT(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const h=yield Cc(t.localStore,Zs(e));t.isPrimaryClient&&A(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield FD(t,e,r,"current"===m)}return o}),PD.apply(this,arguments)}function FD(n,e,t,r){return LD.apply(this,arguments)}function LD(){return LD=(0,_e.Z)(function*(n,e,t,r){n._a=(S,k,V)=>{return(W=(0,_e.Z)(function*(ae,Oe,Le,St){let kt=Oe.view.Wu(Le);kt.ii&&(kt=yield Vm(ae.localStore,Oe.query,!1).then(({documents:Rt})=>Oe.view.Wu(Rt,kt)));const Nt=St&&St.targetChanges.get(Oe.targetId),Ct=Oe.view.applyChanges(kt,ae.isPrimaryClient,Nt);return zD(ae,Oe.targetId,Ct.Xu),Ct.snapshot}),function(ae,Oe,Le,St){return W.apply(this,arguments)})(n,S,k,V);var W};const o=yield Vm(n.localStore,e,!0),u=new eS(e,o._i),h=u.Wu(o.documents),m=Wa.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(h,n.isPrimaryClient,m);zD(n,t,E.Xu);const C=new UM(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),E.snapshot}),LD.apply(this,arguments)}function HM(n,e){return VD.apply(this,arguments)}function VD(){return VD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!$f(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield nl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),x(t.remoteStore,r.targetId),Xm(t,r.targetId)}).catch(bc))):(Xm(t,r.targetId),yield nl(t.localStore,r.targetId,!0))}),VD.apply(this,arguments)}function UD(){return UD=(0,_e.Z)(function*(n,e,t){const r=sT(n);try{const o=yield function(u,h){const m=Ze(u),E=pn.now(),C=h.reduce((k,V)=>k.add(V.key),Yt());let S;return m.persistence.runTransaction("Locally write mutations","readwrite",k=>m.fi.Ks(k,C).next(V=>{S=V;const W=[];for(const ae of h){const Oe=OE(ae,S.get(ae.key));null!=Oe&&W.push(new yc(ae.key,Oe,hm(Oe.value.mapValue),vr.exists(!0)))}return m.Bs.addMutationBatch(k,E,W,h)})).then(k=>(k.applyToLocalDocumentSet(S),{batchId:k.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,m){let E=u.ha[u.currentUser.toKey()];E||(E=new Kn(Mt)),E=E.insert(h,m),u.ha[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Dc(r,o.changes),yield rl(r.remoteStore)}catch(o){const u=Ym(o,"Failed to persist write");t.reject(u)}}),UD.apply(this,arguments)}function tS(n,e){return BD.apply(this,arguments)}function BD(){return BD=(0,_e.Z)(function*(n,e){const t=Ze(n);try{const r=yield fD(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.aa.get(u);h&&(Tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.na=!0:o.modifiedDocuments.size>0?Tt(h.na):o.removedDocuments.size>0&&(Tt(h.na),h.na=!1))}),yield Dc(t,r,e)}catch(r){yield bc(r)}}),BD.apply(this,arguments)}function nS(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,h)=>{const m=h.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,h){const m=Ze(u);m.onlineState=h;let E=!1;m.queries.forEach((C,S)=>{for(const k of S.listeners)k.Pu(h)&&(E=!0)}),E&&ND(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ZM(n,e,t){return jD.apply(this,arguments)}function jD(){return jD=(0,_e.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let h=new Kn($e.comparator);h=h.insert(u,gn.newNoDocument(u,Et.min()));const m=Yt().add(u),E=new Ku(Et.min(),new Map,new ln(Mt),h,m);yield tS(r,E),r.ua=r.ua.remove(u),r.aa.delete(e),WD(r)}else yield nl(r.localStore,e,!1).then(()=>Xm(r,e,t)).catch(bc)}),jD.apply(this,arguments)}function qM(n,e){return $D.apply(this,arguments)}function $D(){return $D=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const o=yield Lm(t.localStore,e);qD(t,r,null),ZD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Dc(t,o)}catch(o){yield bc(o)}}),$D.apply(this,arguments)}function zM(n,e,t){return HD.apply(this,arguments)}function HD(){return HD=(0,_e.Z)(function*(n,e,t){const r=Ze(n);try{const o=yield function(u,h){const m=Ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.Bs.lookupMutationBatch(E,h).next(S=>(Tt(null!==S),C=S.keys(),m.Bs.removeMutationBatch(E,S))).next(()=>m.Bs.performConsistencyCheck(E)).next(()=>m.fi.Ks(E,C))})}(r.localStore,e);qD(r,e,t),ZD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Dc(r,o)}catch(o){yield bc(o)}}),HD.apply(this,arguments)}function GD(){return GD=(0,_e.Z)(function*(n,e){const t=Ze(n);Re(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=Ze(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Ym(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),GD.apply(this,arguments)}function ZD(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function qD(n,e,t){const r=Ze(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Xm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||rS(n,r)})}function rS(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(x(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),WD(n))}function zD(n,e,t){for(const r of t)r instanceof JA?(n.ca.addReference(r.key,e),KM(n,r)):r instanceof XA?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||rS(n,r.key)):nt()}function KM(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.oa.add(r),WD(n))}function WD(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(Gt.fromString(e)),r=n.fa.next();n.aa.set(r,new BM(t)),n.ua=n.ua.insert(t,r),A(n.remoteStore,new vc(Zs(Xd(t.path)),r,2,Ki.A))}}function Dc(n,e,t){return KD.apply(this,arguments)}function KD(){return KD=(0,_e.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[],h=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,E)=>{h.push(r._a(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const S=kb.Ys(E.targetId,C);u.push(S)}}))}),yield Promise.all(h),r.sa.zo(o),yield(m=(0,_e.Z)(function*(E,C){const S=Ze(E);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>fe.forEach(C,V=>fe.forEach(V.Hs,W=>S.persistence.referenceDelegate.addReference(k,V.targetId,W)).next(()=>fe.forEach(V.Js,W=>S.persistence.referenceDelegate.removeReference(k,V.targetId,W)))))}catch(k){if(!Yu(k))throw k;Pe("LocalStore","Failed to update sequence numbers: "+k)}for(const k of C){const V=k.targetId;if(!k.fromCache){const W=S.ui.get(V),Oe=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);S.ui=S.ui.insert(V,Oe)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),KD.apply(this,arguments)}function YM(n,e){return YD.apply(this,arguments)}function YD(){return YD=(0,_e.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield hD(t.localStore,e);t.currentUser=e,(o=t).la.forEach(h=>{h.forEach(m=>{m.reject(new ke(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dc(t,r.di)}var o}),YD.apply(this,arguments)}function QM(n,e){const t=Ze(n),r=t.aa.get(e);if(r&&r.na)return Yt().add(r.key);{let o=Yt();const u=t.ra.get(e);if(!u)return o;for(const h of u){const m=t.ia.get(h);o=o.unionWith(m.view.ju)}return o}}function JM(n,e){return QD.apply(this,arguments)}function QD(){return QD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=yield Vm(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&zD(t,e.targetId,o.Xu),o}),QD.apply(this,arguments)}function XM(n,e){return JD.apply(this,arguments)}function JD(){return JD=(0,_e.Z)(function*(n,e){const t=Ze(n);return Bm(t.localStore,e).then(r=>Dc(t,r))}),JD.apply(this,arguments)}function e1(n,e,t,r){return XD.apply(this,arguments)}function XD(){return XD=(0,_e.Z)(function*(n,e,t,r){const o=Ze(n),u=yield function(h,m){const E=Ze(h),C=Ze(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.fn(S,m).next(k=>k?E.fi.Ks(S,k):fe.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield rl(o.remoteStore):"acknowledged"===t||"rejected"===t?(qD(o,e,r||null),ZD(o,e),m=e,Ze(Ze(o.localStore).Bs)._n(m)):nt(),yield Dc(o,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),XD.apply(this,arguments)}function eT(){return eT=(0,_e.Z)(function*(n,e){const t=Ze(n);if(iT(t),sT(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield iS(t,r.toArray());t.da=!0,yield TD(t.remoteStore,!0);for(const u of o)A(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Xm(t,h),nl(t.localStore,h,!0))),x(t.remoteStore,h)}),yield o,yield iS(t,r),function(u){const h=Ze(u);h.aa.forEach((m,E)=>{x(h.remoteStore,E)}),h.ca.Si(),h.aa=new Map,h.ua=new Kn($e.comparator)}(t),t.da=!1,yield TD(t.remoteStore,!1)}}),eT.apply(this,arguments)}function iS(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,_e.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[];for(const h of e){let m;const E=r.ra.get(h);if(E&&0!==E.length){m=yield Cc(r.localStore,Zs(E[0]));for(const C of E){const S=r.ia.get(C),k=yield JM(r,S);k.snapshot&&u.push(k.snapshot)}}else{const C=yield Um(r.localStore,h);m=yield Cc(r.localStore,C),yield FD(r,sS(C),h,!1)}o.push(m)}return r.sa.zo(u),o}),tT.apply(this,arguments)}function sS(n){return jf(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function n1(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Fs()}function r1(n,e,t,r){return nT.apply(this,arguments)}function nT(){return nT=(0,_e.Z)(function*(n,e,t,r){const o=Ze(n);if(o.da)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield Bm(o.localStore,wm(u[0])),m=Ku.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Dc(o,h,m);break}case"rejected":yield nl(o.localStore,e,!0),Xm(o,e,r);break;default:nt()}}),nT.apply(this,arguments)}function i1(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=(0,_e.Z)(function*(n,e,t){const r=iT(n);if(r.da){for(const o of e){if(r.ra.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const u=yield Um(r.localStore,o),h=yield Cc(r.localStore,u);yield FD(r,sS(u),h.targetId,!1),A(r.remoteStore,h)}for(const o of t)r.ra.has(o)&&(yield nl(r.localStore,o,!1).then(()=>{x(r.remoteStore,o),Xm(r,o)}).catch(bc))}}),rT.apply(this,arguments)}function iT(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZM.bind(null,e),e.sa.zo=PM.bind(null,e.eventManager),e.sa.wa=FM.bind(null,e.eventManager),e}function sT(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zM.bind(null,e),e}class oS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=Zm(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return dD(this.persistence,new cD,e.initialUser,this.M)}ya(e){return new mD(jm.Yi,this.M)}ga(e){return new jb}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aS extends oS{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield sT(r.Ta.syncEngine),yield rl(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return dD(this.persistence,new cD,e.initialUser,this.M)}pa(e){return new BA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Yi.withCacheSize(this.cacheSizeBytes):Yi.DEFAULT;return new Mb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$b(),Bv(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new jb}}class o1 extends aS{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof Uv&&(r.sharedClientState.syncEngine={$r:e1.bind(null,o),Br:r1.bind(null,o),Lr:i1.bind(null,o),Fs:n1.bind(null,o),Fr:XM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,_e.Z)(function*(h){yield function t1(n,e){return eT.apply(this,arguments)}(r.Ta.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}ga(e){const t=$b();if(!Uv.vt(t))throw new ke(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class oT{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>nS(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=YM.bind(null,r.syncEngine),yield TD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OM}createDatastore(e){const t=Zm(e.databaseInfo.databaseId),r=new zA(e.databaseInfo);return new a(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>nS(this.syncEngine,m,0),h=vD.vt()?new vD:new GA,new d(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,m,E,C){const S=new jM(r,o,u,h,m,E);return C&&(S.da=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ze(t);Pe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield w(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function uS(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Gb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class a1{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Wn,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new LM(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,_e.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class u1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(u,h){const m=Ze(u),E=ep(m.M)+"/documents",C={documents:h.map(W=>rh(m.M,W))},S=yield m._o("BatchGetDocuments",E,C),k=new Map;S.forEach(W=>{const ae=function lv(n,e){return"found"in e?function(t,r){Tt(!!r.found);const o=Ws(t,r.found.name),u=Zr(r.found.updateTime),h=new ci({mapValue:{fields:r.found.fields}});return gn.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const o=Ws(t,r.missing),u=Zr(r.readTime);return gn.newNoDocument(o,u)}(n,e):nt()}(m.M,W);k.set(ae.key.toString(),ae)});const V=[];return h.forEach(W=>{const ae=k.get(W.toString());Tt(!!ae),V.push(ae)}),V}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new za(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new Im(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(o,u){const h=Ze(o),m=ep(h.M)+"/documents",E={writes:u.map(C=>tp(h.M,C))};yield h.co("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vr.updateTime(t):vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new ke(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vr.updateTime(t)}return vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class l1{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new Hb(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,_e.Z)(function*(){const t=new u1(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!cm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!iv(t)}return!1}}class c1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Nr.UNAUTHENTICATED,this.clientId=$_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,_e.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Pe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Ym(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function lS(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(u){r.isEqual(u)||(yield hD(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),aT.apply(this,arguments)}function cS(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lT(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>WA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>WA(e.remoteStore,u)),n.onlineComponents=e}),uT.apply(this,arguments)}function lT(n){return cT.apply(this,arguments)}function cT(){return cT=(0,_e.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield lS(n,new oS)),n.offlineComponents}),cT.apply(this,arguments)}function Zb(n){return dT.apply(this,arguments)}function dT(){return dT=(0,_e.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield cS(n,new oT)),n.onlineComponents}),dT.apply(this,arguments)}function dS(n){return lT(n).then(e=>e.persistence)}function hT(n){return lT(n).then(e=>e.localStore)}function hS(n){return Zb(n).then(e=>e.remoteStore)}function fT(n){return Zb(n).then(e=>e.syncEngine)}function ey(n){return pT.apply(this,arguments)}function pT(){return pT=(0,_e.Z)(function*(n){const e=yield Zb(n),t=e.eventManager;return t.onListen=$M.bind(null,e.syncEngine),t.onUnlisten=HM.bind(null,e.syncEngine),t}),pT.apply(this,arguments)}function fS(n,e,t={}){const r=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,h,m,E){const C=new Gb({next:k=>{u.enqueueAndForget(()=>kD(o,S));const V=k.docs.has(h);!V&&k.fromCache?E.reject(new ke(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&k.fromCache&&m&&"server"===m.source?E.reject(new ke(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(k)},error:k=>E.reject(k)}),S=new OD(Xd(h.path),C,{includeMetadataChanges:!0,ku:!0});return xD(o,S)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}function pS(n,e,t={}){const r=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,h,m,E){const C=new Gb({next:k=>{u.enqueueAndForget(()=>kD(o,S)),k.fromCache&&"server"===m.source?E.reject(new ke(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(k)},error:k=>E.reject(k)}),S=new OD(h,C,{includeMetadataChanges:!0,ku:!0});return xD(o,S)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}const gS=new Map;function gT(n,e,t){if(!t)throw new ke(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mS(n,e,t,r){if(!0===e&&!0===r)throw new ke(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yS(n){if(!$e.isDocumentKey(n))throw new ke(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _S(n){if($e.isDocumentKey(n))throw new ke(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qb(n);throw new ke(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vS(n,e){if(e<=0)throw new ke(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class wS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wS({}),this._settingsFrozen=!1,e instanceof Ha?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new ke(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ha(o.options.projectId)}(e))}get app(){if(!this._app)throw new ke(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new am;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new aE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gS.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),gS.delete(e),t.terminate())}(this),Promise.resolve()}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class il extends Qi{constructor(e,t,r){super(e,t,Xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new $e(e))}withConverter(e){return new il(this.firestore,e,this._path)}}function ES(n,e,...t){if(n=(0,Ut.m9)(n),gT("collection","path",e),n instanceof Gv){const r=Gt.fromString(e,...t);return _S(r),new il(n,null,r)}{if(!(n instanceof kn||n instanceof il))throw new ke(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return _S(r),new il(n.firestore,null,r)}}function zb(n,e,...t){if(n=(0,Ut.m9)(n),1===arguments.length&&(e=$_.R()),gT("doc","path",e),n instanceof Gv){const r=Gt.fromString(e,...t);return yS(r),new kn(n,null,new $e(r))}{if(!(n instanceof kn||n instanceof il))throw new ke(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return yS(r),new kn(n.firestore,n instanceof il?n.converter:null,new $e(r))}}function bS(n,e){return n=(0,Ut.m9)(n),e=(0,Ut.m9)(e),(n instanceof kn||n instanceof il)&&(e instanceof kn||e instanceof il)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IS(n,e){return n=(0,Ut.m9)(n),e=(0,Ut.m9)(e),n instanceof Qi&&e instanceof Qi&&n.firestore===e.firestore&&$f(n._query,e._query)&&n.converter===e.converter}class E1{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Hb(this,"async_queue_retry"),this.Qa=()=>{const t=Bv();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Bv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Bv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Wn;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,_e.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Yu(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Ln("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=SD.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&nt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function mT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class b1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Un extends Gv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new E1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||CS(this),this._firestoreClient.terminate()}}function Pr(n){return n._firestoreClient||CS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new MC(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new c1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function DS(n,e,t){const r=new Wn;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield lS(n,t),yield cS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function TS(n){if(n._initialized||n._terminated)throw new ke(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sl(yr.fromBase64String(e))}catch(t){throw new ke(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sl(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mp{constructor(e){this._methodName=e}}class Wb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const R1=/^__.*__$/;class N1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new yc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wf(e,this.data,t,this.fieldTransforms)}}class AS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class Kb{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Kb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Jb(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(SS(this.ec)&&R1.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class O1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Zm(e)}lc(e,t,r,o=!1){return new Kb({ec:e,methodName:t,hc:r,path:mr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function yp(n){const e=n._freezeSettings(),t=Zm(n._databaseId);return new O1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yb(n,e,t,r,o,u={}){const h=n.lc(u.merge||u.mergeFields?2:0,e,t,o);wT("Data must be an object, but it was:",h,r);const m=kS(r,h);let E,C;if(u.merge)E=new ra(h.fieldMask),C=h.fieldTransforms;else if(u.mergeFields){const S=[];for(const k of u.mergeFields){const V=ET(e,k,t);if(!h.contains(V))throw new ke(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);NS(S,V)||S.push(V)}E=new ra(S),C=h.fieldTransforms.filter(k=>E.covers(k.field))}else E=null,C=h.fieldTransforms;return new N1(new ci(m),E,C)}class Zv extends mp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zv}}function xS(n,e,t){return new Kb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class yT extends mp{_toFieldTransform(e){return new qf(e.path,new Zf)}isEqual(e){return e instanceof yT}}class P1 extends mp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=xS(this,e,!0),r=this.fc.map(u=>_p(u,t)),o=new mc(r);return new qf(e.path,o)}isEqual(e){return this===e}}class F1 extends mp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=xS(this,e,!0),r=this.fc.map(u=>_p(u,t)),o=new qs(r);return new qf(e.path,o)}isEqual(e){return this===e}}class L1 extends mp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Do(e.M,ev(e.M,this.dc));return new qf(e.path,t)}isEqual(e){return this===e}}function _T(n,e,t,r){const o=n.lc(1,e,t);wT("Data must be an object, but it was:",o,r);const u=[],h=ci.empty();uc(r,(E,C)=>{const S=Qb(e,E,t);C=(0,Ut.m9)(C);const k=o.oc(S);if(C instanceof Zv)u.push(S);else{const V=_p(C,k);null!=V&&(u.push(S),h.set(S,V))}});const m=new ra(u);return new AS(h,m,o.fieldTransforms)}function vT(n,e,t,r,o,u){const h=n.lc(1,e,t),m=[ET(e,r,t)],E=[o];if(u.length%2!=0)throw new ke(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(ET(e,u[V])),E.push(u[V+1]);const C=[],S=ci.empty();for(let V=m.length-1;V>=0;--V)if(!NS(C,m[V])){const W=m[V];let ae=E[V];ae=(0,Ut.m9)(ae);const Oe=h.oc(W);if(ae instanceof Zv)C.push(W);else{const Le=_p(ae,Oe);null!=Le&&(C.push(W),S.set(W,Le))}}const k=new ra(C);return new AS(S,k,h.fieldTransforms)}function MS(n,e,t,r=!1){return _p(t,n.lc(r?4:3,e))}function _p(n,e){if(RS(n=(0,Ut.m9)(n)))return wT("Unsupported field value:",e,n),kS(n,e);if(n instanceof mp)return function(t,r){if(!SS(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let m=_p(h,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ut.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ev(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=pn.fromDate(t);return{timestampValue:nh(r.M,o)}}if(t instanceof pn){const o=new pn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:nh(r.M,o)}}if(t instanceof Wb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof sl)return{bytesValue:WE(r.M,t._byteString)};if(t instanceof kn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jf(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${qb(t)}`)}(n,e)}function kS(n,e){const t={};return Of(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uc(n,(r,o)=>{const u=_p(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function RS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof pn||n instanceof Wb||n instanceof sl||n instanceof kn||n instanceof mp)}function wT(n,e,t){if(!RS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=qb(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function ET(n,e,t){if((e=(0,Ut.m9)(e))instanceof Tc)return e._internalPath;if("string"==typeof e)return Qb(n,e);throw Jb("Field path arguments must be of type string or ",n,!1,void 0,t)}const V1=new RegExp("[~\\*/\\[\\]]");function Qb(n,e,t){if(e.search(V1)>=0)throw Jb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tc(...e.split("."))._internalPath}catch(r){throw Jb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jb(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||h)&&(E+=" (found",u&&(E+=` in field ${r}`),h&&(E+=` in document ${o}`),E+=")"),new ke(ce.INVALID_ARGUMENT,m+n+E)}function NS(n,e){return n.some(t=>t.isEqual(e))}class qv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new U1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class U1 extends qv{data(){return super.data()}}function Xb(n,e){return"string"==typeof e?Qb(n,e):e instanceof Tc?e._internalPath:e._delegate._internalPath}class vp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ac extends qv{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Xb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class zv extends Ac{data(e={}){return super.data(e)}}class ph{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new vp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zv(this._firestore,this._userDataWriter,r.key,r,new vp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new zv(r._firestore,r._userDataWriter,h.doc.key,h.doc,new vp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new zv(r._firestore,r._userDataWriter,h.doc.key,h.doc,new vp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==h.type&&(E=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),C=u.indexOf(h.doc.key)),{type:B1(h.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function B1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function OS(n,e){return n instanceof Ac&&e instanceof Ac?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ph&&e instanceof ph&&n._firestore===e._firestore&&IS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function PS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wv{}function gh(n,...e){for(const t of e)n=t._apply(n);return n}class j1 extends Wv{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=yp(e.firestore),r=function(o,u,h,m,E,C,S){let k;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new ke(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){jS(S,C);const W=[];for(const ae of S)W.push(BS(m,o,ae));k={arrayValue:{values:W}}}else k=BS(m,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||jS(S,C),k=MS(h,"where",S,"in"===C||"not-in"===C);const V=_r.create(E,C,k);return function(W,ae){if(ae.S()){const Le=J_(W);if(null!==Le&&!Le.isEqual(ae.field))throw new ke(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${ae.field.toString()}'`);const St=pc(W);null!==St&&$S(0,ae.field,St)}const Oe=function(Le,St){for(const kt of Le.filters)if(St.indexOf(kt.op)>=0)return kt.op;return null}(W,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ae.op));if(null!==Oe)throw new ke(ce.INVALID_ARGUMENT,Oe===ae.op?`Invalid query. You cannot use more than one '${ae.op.toString()}' filter.`:`Invalid query. You cannot use '${ae.op.toString()}' filters with '${Oe.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Qi(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new qa(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class H1 extends Wv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new ke(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new fc(o,u);return function(m,E){if(null===pc(m)){const C=J_(m);null!==C&&$S(0,C,E.field)}}(r,h),h}(e._query,this._c,this.gc);return new Qi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new qa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class FS extends Wv{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Qi(e.firestore,e.converter,AE(e._query,this.yc,this.Ic))}}class LS extends Wv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=US(e,this.type,this.Tc,this.Ec);return new Qi(e.firestore,e.converter,(o=t,new qa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class VS extends Wv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=US(e,this.type,this.Tc,this.Ec);return new Qi(e.firestore,e.converter,(o=t,new qa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function US(n,e,t,r){if(t[0]=(0,Ut.m9)(t[0]),t[0]instanceof qv)return function(o,u,h,m,E){if(!m)throw new ke(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const S of gc(o))if(S.field.isKeyField())C.push(dc(u,m.key));else{const k=m.data.field(S.field);if(lm(k))throw new ke(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const V=S.field.canonicalString();throw new ke(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(k)}return new zu(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=yp(n.firestore);return function(u,h,m,E,C,S){const k=u.explicitOrderBy;if(C.length>k.length)throw new ke(ce.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let W=0;W<C.length;W++){const ae=C[W];if(k[W].field.isKeyField()){if("string"!=typeof ae)throw new ke(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ae}`);if(!TE(u)&&-1!==ae.indexOf("/"))throw new ke(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ae}' contains a slash.`);const Oe=u.path.child(Gt.fromString(ae));if(!$e.isDocumentKey(Oe))throw new ke(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Le=new $e(Oe);V.push(dc(h,Le))}else{const Oe=MS(m,E,ae);V.push(Oe)}}return new zu(V,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function BS(n,e,t){if("string"==typeof(t=(0,Ut.m9)(t))){if(""===t)throw new ke(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TE(e)&&-1!==t.indexOf("/"))throw new ke(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Gt.fromString(t));if(!$e.isDocumentKey(r))throw new ke(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dc(n,new $e(r))}if(t instanceof kn)return dc(n,t._key);throw new ke(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qb(t)}.`)}function jS(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function $S(n,e,t){if(!t.isEqual(e))throw new ke(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Q1={maxAttempts:5};class bT{convertValue(e,t="none"){switch(cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return uc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Wb(Mn(e.latitude),Mn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=fE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wd(e));default:return null}}convertTimestamp(e){const t=Gu(e);return new pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Gt.fromString(e);Tt(nb(r));const o=new Ha(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||Ln(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function eI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class J1 extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}class HS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yp(e)}set(e,t,r){this._verifyNotCommitted();const o=mh(e,this._firestore),u=eI(o.converter,t,r),h=Yb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,vr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=mh(e,this._firestore);let h;return h="string"==typeof(t=(0,Ut.m9)(t))||t instanceof Tc?vT(this._dataReader,"WriteBatch.update",u._key,t,r,o):_T(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mh(e,this._firestore);return this._mutations=this._mutations.concat(new za(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mh(n,e){if((n=(0,Ut.m9)(n)).firestore!==e)throw new ke(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wp extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function GS(n,e,t){n=Wt(n,kn);const r=Wt(n.firestore,Un),o=eI(n.converter,e,t);return ty(r,[Yb(yp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,vr.none())])}function ZS(n,e,t,...r){n=Wt(n,kn);const o=Wt(n.firestore,Un),u=yp(o);let h;return h="string"==typeof(e=(0,Ut.m9)(e))||e instanceof Tc?vT(u,"updateDoc",n._key,e,t,r):_T(u,"updateDoc",n._key,e),ty(o,[h.toMutation(n._key,vr.exists(!0))])}function qS(n,...e){var t,r,o;n=(0,Ut.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||mT(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(mT(e[h])){const k=e[h];e[h]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[h+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[h+2]=null===(o=k.complete)||void 0===o?void 0:o.bind(k)}let E,C,S;if(n instanceof kn)C=Wt(n.firestore,Un),S=Xd(n._key.path),E={next:k=>{e[h]&&e[h](IT(C,n,k))},error:e[h+1],complete:e[h+2]};else{const k=Wt(n,Qi);C=Wt(k.firestore,Un),S=k._query;const V=new wp(C);E={next:W=>{e[h]&&e[h](new ph(C,V,k,W))},error:e[h+1],complete:e[h+2]},PS(n._query)}return function(k,V,W,ae){const Oe=new Gb(ae),Le=new OD(V,Oe,W);return k.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return xD(yield ey(k),Le)})),()=>{Oe.Aa(),k.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return kD(yield ey(k),Le)}))}}(Pr(C),S,m,E)}function ty(n,e){return function(t,r){const o=new Wn;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function GM(n,e,t){return UD.apply(this,arguments)}(yield fT(t),r,o)})),o.promise}(Pr(n),e)}function IT(n,e,t){const r=t.docs.get(e._key),o=new wp(n);return new Ac(n,o,e._key,r,new vp(t.hasPendingWrites,t.fromCache),e.converter)}class uk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yp(e)}get(e){const t=mh(e,this._firestore),r=new J1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new qv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new qv(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=mh(e,this._firestore),u=eI(o.converter,t,r),h=Yb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=mh(e,this._firestore);let h;return h="string"==typeof(t=(0,Ut.m9)(t))||t instanceof Tc?vT(this._dataReader,"Transaction.update",u._key,t,r,o):_T(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=mh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mh(e,this._firestore),r=new wp(this._firestore);return super.get(e).then(o=>new Ac(this._firestore,r,t._key,o._document,new vp(!1,!1),t.converter))}}function CT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WS(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function KS(){if(!function Pf(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$s=Va.SDK_VERSION,(0,Va._registerComponent)(new Ad.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Un(o,new Vn(t.getProvider("auth-internal")),new AC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Va.registerVersion)(B_,"3.4.9",n),(0,Va.registerVersion)(B_,"3.4.9","esm2017")}();class Kv{constructor(e){this._delegate=e}static fromBase64String(e){return KS(),new Kv(sl.fromBase64String(e))}static fromUint8Array(e){return WS(),new Kv(sl.fromUint8Array(e))}toBase64(){return KS(),this._delegate.toBase64()}toUint8Array(){return WS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function DT(n){return function yk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class _k{enableIndexedDbPersistence(e,t){return function C1(n,e){TS(n=Wt(n,Un));const t=Pr(n),r=n._freezeSettings(),o=new oT;return DS(t,o,new aS(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function D1(n){TS(n=Wt(n,Un));const e=Pr(n),t=n._freezeSettings(),r=new oT;return DS(e,r,new o1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function T1(n){if(n._initialized&&!n._terminated)throw new ke(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Ao.vt())return Promise.resolve();const o=r+"main";yield Ao.delete(o)}),function(r){return t.apply(this,arguments)})(Pv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class YS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ha||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function v1(n,e,t,r={}){var o;const u=(n=Wt(n,Gv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&sm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Nr.MOCK_USER;else{h=(0,Ut.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ke(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Nr(E)}n._authCredentials=new um(new oE(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function S1(n){return function d1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield dS(n),t=yield hS(n);return e.setNetworkEnabled(!0),function(r){const o=Ze(r);return o.wu.delete(0),p(o)}(t)}))}(Pr(n=Wt(n,Un)))}(this._delegate)}disableNetwork(){return function x1(n){return function h1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield dS(n),t=yield hS(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const u=Ze(o);u.wu.add(0),yield w(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Pr(n=Wt(n,Un)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function A1(n){return function(e){const t=new Wn;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function WM(n,e){return GD.apply(this,arguments)}(yield fT(e),t)})),t.promise}(Pr(n=Wt(n,Un)))}(this._delegate)}onSnapshotsInSync(e){return function ak(n,e){return function g1(n,e){const t=new Gb(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield ey(n),o=t,Ze(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield ey(n),o=t,void Ze(r).bu.delete(o);var r,o}))}}(Pr(n=Wt(n,Un)),mT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ny(this,ES(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new la(this,zb(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function w1(n,e){if(n=Wt(n,Gv),gT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(n,null,(t=e,new qa(Gt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lk(n,e,t){n=Wt(n,Un);const r=Object.assign(Object.assign({},Q1),t);return function(o){if(o.maxAttempts<1)throw new ke(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function m1(n,e,t){const r=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const o=yield(u=n,Zb(u).then(h=>h.datastore));var u;new l1(n.asyncQueue,o,t,e,r).run()})),r.promise}(Pr(n),o=>e(new uk(n,o)),r)}(this._delegate,t=>e(new QS(this,t)))}batch(){return Pr(this._delegate),new JS(new HS(this._delegate,e=>ty(this._delegate,e)))}loadBundle(e){return function M1(n,e){const t=Pr(n=Wt(n,Un)),r=new b1;return function y1(n,e,t,r){const o=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return uS(E,C);if(E instanceof ArrayBuffer)return uS(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new a1(E,h);var E}(t,Zm(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function s1(n,e,t){const r=Ze(n);var o;(o=(0,_e.Z)(function*(u,h,m){try{const E=yield h.getMetadata();if(yield function(V,W){const ae=Ze(V),Oe=Zr(W.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Le=>ae._s.getBundleMetadata(Le,W.id)).then(Le=>!!Le&&Le.createTime.compareTo(Oe)>=0)}(u.localStore,E))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=E).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(QA(E));const C=new VM(E,u.localStore,h.M);let S=yield h.ma();for(;S;){const V=yield C.Fu(S);V&&m._updateProgress(V),S=yield h.ma()}const k=yield C.complete();return yield Dc(u,k.Lu,void 0),yield function(V,W){const ae=Ze(V);return ae.persistence.runTransaction("Save bundle","readwrite",Oe=>ae._s.saveBundleMetadata(Oe,W))}(u.localStore,E),m._completeWith(k.progress),Promise.resolve(k.Bu)}catch(E){return sm("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var V}),function(u,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield fT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function k1(n,e){return function _1(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=Ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield hT(n),e)}))}(Pr(n=Wt(n,Un)),e).then(t=>t?new Qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class tI extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kv(new sl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return la.forKey(t,this.firestore,null)}}class QS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}get(e){const t=bp(e);return this._delegate.get(t).then(r=>new Yv(this._firestore,new Ac(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=bp(e);return r?(CT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}}class JS{constructor(e){this._delegate=e}set(e,t,r){const o=bp(e);return r?(CT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new zv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Ep(e,new tI(e),t),o.set(t,u)),u}}Ep.INSTANCES=new WeakMap;class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new la(t,new kn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new la(t,new kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ny(this.firestore,ES(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ut.m9)(e))instanceof kn&&bS(this._delegate,e)}set(e,t){t=CT("DocumentReference.set",t);try{return t?GS(this._delegate,e,t):GS(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ZS(this._delegate,e):ZS(this._delegate,e,t,...r)}catch(o){throw ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function sk(n){return ty(Wt(n.firestore,Un),[new za(n._key,vr.none())])}(this._delegate)}onSnapshot(...e){const t=XS(e),r=ex(e,o=>new Yv(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return qS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ek(n){n=Wt(n,kn);const e=Wt(n.firestore,Un),t=Pr(e),r=new wp(e);return function f1(n,e){const t=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,h){try{const m=yield function(E,C){const S=Ze(E);return S.persistence.runTransaction("read document","readonly",k=>S.fi.Ls(k,C))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new ke(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Ym(m,`Failed to get document '${u} from cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield hT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ac(e,r,n._key,o,new vp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function tk(n){n=Wt(n,kn);const e=Wt(n.firestore,Un);return fS(Pr(e),n._key,{source:"server"}).then(t=>IT(e,n,t))}(this._delegate):function X1(n){n=Wt(n,kn);const e=Wt(n.firestore,Un);return fS(Pr(e),n._key).then(t=>IT(e,n,t))}(this._delegate),t.then(r=>new Yv(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function XS(n){for(const e of n)if("object"==typeof e&&!DT(e))return e;return{}}function ex(n,e){var t,r;let o;return o=DT(n[0])?n[0]:DT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Yv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new la(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return OS(this._delegate,e._delegate)}}class Qv extends Yv{data(e){const t=this._delegate.data(e);return function _t(n,e){n||nt()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}where(e,t,r){try{return new ys(this.firestore,gh(this._delegate,function $1(n,e,t){const r=e,o=Xb("where",n);return new j1(o,r,t)}(e,t,r)))}catch(o){throw ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,gh(this._delegate,function G1(n,e="asc"){const t=e,r=Xb("orderBy",n);return new H1(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,gh(this._delegate,function Z1(n){return vS("limit",n),new FS("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,gh(this._delegate,function q1(n){return vS("limitToLast",n),new FS("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,gh(this._delegate,function z1(...n){return new LS("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,gh(this._delegate,function W1(...n){return new LS("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,gh(this._delegate,function K1(...n){return new VS("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,gh(this._delegate,function Y1(...n){return new VS("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return IS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function rk(n){n=Wt(n,Qi);const e=Wt(n.firestore,Un),t=Pr(e),r=new wp(e);return function p1(n,e){const t=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,h){try{const m=yield Vm(o,u,!0),E=new eS(u,m._i),C=E.Wu(m.documents),S=E.applyChanges(C,!1);h.resolve(S.snapshot)}catch(m){const E=Ym(m,`Failed to execute query '${u} against cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield hT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new ph(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function ik(n){n=Wt(n,Qi);const e=Wt(n.firestore,Un),t=Pr(e),r=new wp(e);return pS(t,n._query,{source:"server"}).then(o=>new ph(e,r,n,o))}(this._delegate):function nk(n){n=Wt(n,Qi);const e=Wt(n.firestore,Un),t=Pr(e),r=new wp(e);return PS(n._query),pS(t,n._query).then(o=>new ph(e,r,n,o))}(this._delegate),t.then(r=>new TT(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XS(e),r=ex(e,o=>new TT(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return qS(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class wk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Qv(this._firestore,r))})}isEqual(e){return OS(this._delegate,e._delegate)}}class ny extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new la(this.firestore,e):null}doc(e){try{return new la(this.firestore,void 0===e?zb(this._delegate):zb(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function ok(n,e){const t=Wt(n.firestore,Un),r=zb(n),o=eI(n.converter,e);return ty(t,[Yb(yp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new la(this.firestore,t))}isEqual(e){return bS(this._delegate,e._delegate)}withConverter(e){return new ny(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function bp(n){return Wt(n,kn)}class AT{constructor(...e){this._delegate=new Tc(...e)}static documentId(){return new AT(mr.keyField().canonicalString())}isEqual(e){return(e=(0,Ut.m9)(e))instanceof Tc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ip{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dk(){return new yT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ip(e)}static delete(){const e=function ck(){return new Zv("deleteField")}();return e._methodName="FieldValue.delete",new Ip(e)}static arrayUnion(...e){const t=function hk(...n){return new P1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ip(t)}static arrayRemove(...e){const t=function fk(...n){return new F1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ip(t)}static increment(e){const t=function pk(n){return new L1("increment",n)}(e);return t._methodName="FieldValue.increment",new Ip(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ek={Firestore:YS,GeoPoint:Wb,Timestamp:pn,Blob:Kv,Transaction:QS,WriteBatch:JS,DocumentReference:la,DocumentSnapshot:Yv,Query:ys,QueryDocumentSnapshot:Qv,QuerySnapshot:TT,CollectionReference:ny,FieldPath:AT,FieldValue:Ip,setLogLevel:function vk(n){!function Zd(n){Hu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function tx(n,e){return function Ck(n,e=pg.z){return new Dn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ST(n,e){return tx(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function nI(n,e){return ST(n,e).pipe(go(void 0),Mg(),(0,gt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const E=o.find(S=>S.doc.ref.isEqual(h.ref)),C=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function nx(n,e,t){return nI(n,t).pipe(Li((r,o)=>function Tk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Ak(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function nC(n,e=Fi.y){return n=null!=n?n:Xy,(0,Gn.e)((t,r)=>{let o,u=!0;t.subscribe((0,Hn.x)(r,h=>{const m=e(h);(u||!n(o,m))&&(u=!1,o=m,r.next(h))}))})}(),(0,gt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function xT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function rx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Ik(n){(function bk(n,e){n.INTERNAL.registerComponent(new Ad.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},Ek)))})(n,(e,t)=>new YS(e,t,new _k)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(rC.Z);class ix{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=nI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(go(void 0),Mg(),Zn(([r,o])=>o.length>0||!r),(0,gt.U)(([r,o])=>o),xr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Li((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rx(e);return nx(this.query,t,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return ST(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),xr.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(xr.iC)}add(e){return this.ref.add(e)}doc(e){return new sx(this.ref.doc(e),this.afs)}}class sx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=ux(r,t);return new ix(o,u,this.afs)}snapshotChanges(){return function Dk(n,e){return tx(n,e).pipe(go(void 0),Mg(),(0,gt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(xr.iC)}}class Sk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?nI(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zn(t=>t.length>0),xr.iC):nI(this.query,this.afs.schedulers.outsideAngular).pipe(xr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Li((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rx(e);return nx(this.query,t,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return ST(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),xr.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(xr.iC)}}const ox=new c.OlP("angularfire2.enableFirestorePersistence"),ax=new c.OlP("angularfire2.firestore.persistenceSettings"),xk=new c.OlP("angularfire2.firestore.settings"),Mk=new c.OlP("angularfire2.firestore.use-emulator");function ux(n,e=(t=>t)){return{query:e(n),ref:n}}let lx=(()=>{class n{constructor(t,r,o,u,h,m,E,C,S,k,V,W,ae,Oe,Le,St,kt){this.schedulers=E;const Nt=(0,mt.on)(t,m,r),Ct=S;k&&xg(Nt,m,V,ae,Oe,Le,W,St),[this.firestore,this.persistenceEnabled$]=(0,mt.cc)(`${Nt.name}.firestore`,"AngularFirestore",Nt.name,()=>{const Rt=m.runOutsideAngular(()=>Nt.firestore());if(u&&Rt.settings(u),Ct&&Rt.useEmulator(...Ct),o&&!Oo(h)){const st=()=>{try{return(0,nn.D)(Rt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(bt){return"undefined"!=typeof console&&console.warn(bt),it(!1)}};return[Rt,m.runOutsideAngular(st)]}return[Rt,it(!1)]},[u,Ct,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=ux(o,r),m=this.schedulers.ngZone.run(()=>u);return new ix(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new Sk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new sx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(mt.Dh),c.LFG(mt.xv,8),c.LFG(ox,8),c.LFG(xk,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(xr.HU),c.LFG(ax,8),c.LFG(Mk,8),c.LFG(zl,8),c.LFG(tC,8),c.LFG(Ag,8),c.LFG(Jy,8),c.LFG(Sg,8),c.LFG(Md,8),c.LFG(X0,8),c.LFG(Ky,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kk=(()=>{class n{constructor(){Tg.Z.registerVersion("angularfire",xr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ox,useValue:!0},{provide:ax,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[lx]}),n})(),rI=(()=>{class n{constructor(t,r,o,u){this.auth=t,this.db=r,this.route=o,this.router=u,this.redirect=!1,this.userCollection=this.db.collection("users"),this.isAuthenticated$=t.user.pipe((0,gt.U)(h=>!!h)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function TI(n,e=pg.z){const t=function Eo(n=0,e,t=pg.P){let r=-1;return null!=e&&((0,CI.K)(e)?t=e:r=e),new Dn.y(o=>{let u=function DI(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let h=0;return t.schedule(function(){o.closed||(o.next(h++),0<=r?this.schedule(void 0,r):o.complete())},u)})}(n,e);return Ay(()=>t)}(1e3)),this.router.events.pipe(Zn(h=>h instanceof Vi),(0,gt.U)(h=>this.route.firstChild),Tn(h=>{var m;return null!==(m=null==h?void 0:h.data)&&void 0!==m?m:it({})})).subscribe(h=>{var m;this.redirect=null!==(m=h.authOnly)&&void 0!==m&&m})}createUser(t,r){return(0,nn.D)(this.auth.createUserWithEmailAndPassword(t.email,r)).pipe(ii(h=>{throw console.log(h),h}),(0,ri.q)(1),yi(h=>{if(null==h)throw Error("User credentials conn't be null !!\u{1f480}");return(0,nn.D)(this.userCollection.doc(h.user.uid).set(t)).pipe((0,wn.z)(()=>(0,nn.D)(h.user.updateProfile({displayName:t.name}))))})).pipe((0,gt.U)(h=>t),(0,ri.q)(1))}login(t,r){var o=this;return(0,_e.Z)(function*(){yield o.auth.signInWithEmailAndPassword(t,r)})()}logout(){var t=this;return(0,_e.Z)(function*(){yield t.auth.signOut(),t.redirect&&(yield t.router.navigateByUrl("/"))})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(zl),c.LFG(lx),c.LFG(yo),c.LFG(Fn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iI=(()=>{class n{constructor(){this.modalsBag=[]}register(t){if(this.modalsBag.some(r=>r.Id==t))throw Error(`Dublicate modal key !! \u{1f480}\u{1f480} ... the key ${t} already exists \u{1f914}`);this.modalsBag.push({Id:t,visible:!1})}unRegister(t){this.modalsBag=this.modalsBag.filter(r=>r.Id!=t)}isModalOpen(t){var r,o;return null!==(o=null===(r=this.modalsBag.find(u=>u.Id==t))||void 0===r?void 0:r.visible)&&void 0!==o&&o}toggleModal(t){var r;let o=this.modalsBag.find(u=>u.Id==t);o&&(o.visible=null!==(r=!(null==o?void 0:o.visible))&&void 0!==r&&r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",14),c.NdJ("click",function(o){return c.CHM(t),c.oxw().openModal(o)}),c._uU(2,"Login / Register"),c.qZA()()}}const MT=function(){return{exact:!0}},Nk=function(){return{sort:"1"}};function Ok(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",15),c._uU(2,"Manage"),c.qZA()(),c.TgZ(3,"li")(4,"a",16),c._uU(5,"Upload"),c.qZA()(),c.TgZ(6,"li")(7,"a",14),c.NdJ("click",function(o){return c.CHM(t),c.oxw().logout(o)}),c._uU(8,"Logout"),c.qZA()()}2&n&&(c.xp6(1),c.Q6J("routerLinkActiveOptions",c.DdM(3,MT))("queryParams",c.DdM(4,Nk)),c.xp6(3),c.Q6J("routerLinkActiveOptions",c.DdM(5,MT)))}let Pk=(()=>{class n{constructor(t,r,o){this.modalService=t,this.authService=r,this.router=o}ngOnInit(){}openModal(t){t.preventDefault(),this.modalService.toggleModal("auth-modal")}logout(t){var r=this;return(0,_e.Z)(function*(){t.preventDefault(),yield r.authService.logout()})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(iI),c.Y36(rI),c.Y36(Fn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:6,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"]],template:function(t,r){if(1&t&&(c.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),c._uU(3,"Clipz"),c.qZA(),c.TgZ(4,"div",3)(5,"ul",4),c.YNc(6,Rk,3,0,"li",5),c.ALo(7,"async"),c.YNc(8,Ok,9,6,"ng-template",null,6,c.W1O),c.TgZ(10,"li")(11,"a",7),c._uU(12,"About"),c.qZA()()(),c.TgZ(13,"ul",8)(14,"li")(15,"a",9),c._UZ(16,"img",10),c.TgZ(17,"span",11),c._uU(18,"English"),c.qZA()()(),c.TgZ(19,"li",12)(20,"a",9),c._UZ(21,"img",13),c.TgZ(22,"span",11),c._uU(23,"French"),c.qZA()()()()()()()),2&t){const o=c.MAs(9);c.xp6(6),c.Q6J("ngIf",!c.lcZ(7,3,r.authService.isAuthenticatedWithDelay$))("ngIfElse",o),c.xp6(5),c.Q6J("routerLinkActiveOptions",c.DdM(5,MT))}},directives:[Fa,dn,d0],pipes:[Nc],styles:[""]}),n})();const Fk=[[["","heading",""]],"*"],Lk=function(n){return{hidden:n}},Vk=["[heading]","*"];let Uk=(()=>{class n{constructor(t,r){this.modalService=t,this.element=r,this._modalId=""}set modalId(t){this.modalService.register(t),this._modalId=t}get modalId(){return this._modalId}closeModal(){this.modalService.toggleModal(this.modalId)}isModalOpen(){return this.modalService.isModalOpen(this.modalId)}ngOnInit(){document.body.appendChild(this.element.nativeElement)}ngOnDestroy(){this.modalService.unRegister(this.modalId),document.body.removeChild(this.element.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(iI),c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId"},ngContentSelectors:Vk,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(c.F$t(Fk),c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c.NdJ("click",function(){return r.closeModal()}),c._UZ(3,"div",3),c.qZA(),c.TgZ(4,"span",4),c._uU(5,"\u200b"),c.qZA(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7),c.Hsn(9),c.TgZ(10,"div",8),c.NdJ("click",function(){return r.closeModal()}),c._uU(11," \u2715 "),c.qZA()(),c.Hsn(12,1),c.qZA()()()()),2&t&&c.Q6J("ngClass",c.VKq(1,Lk,!r.isModalOpen()))},directives:[Xr],styles:[""]}),n})();function Bk(n,e){1&n&&c.Hsn(0,0,["*ngIf","isActive"])}const jk=["*"];let cx=(()=>{class n{constructor(){this.title="",this.isActive=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tab"]],inputs:{title:"title",isActive:"isActive"},ngContentSelectors:jk,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c.F$t(),c.YNc(0,Bk,1,0,"ng-content",0)),2&t&&c.Q6J("ngIf",r.isActive)},directives:[dn],styles:[""]}),n})();const $k=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function Hk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",2)(1,"a",3),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().selectTab(u)}),c._uU(2),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngClass",c.WLB(2,$k,!t.isActive,t.isActive)),c.xp6(1),c.Oqu(t.title)}}const Gk=["*"];let Zk=(()=>{class n{constructor(){this.tabs=new c.n_E}ngAfterContentInit(){const t=this.tabs.filter(r=>r.isActive);(null==t?void 0:t.length)||this.selectTab(this.tabs.first),(null==t?void 0:t.length)>1&&this.selectTab(t[0])}selectTab(t){return this.tabs.forEach(r=>{r.isActive=!1}),t.isActive=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,o){if(1&t&&c.Suo(o,cx,4),2&t){let u;c.iGM(u=c.CRH())&&(r.tabs=u)}},ngContentSelectors:Gk,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"ul",0),c.YNc(1,Hk,3,5,"li",1),c.qZA(),c.Hsn(2)),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.tabs))},directives:[jn,Xr],styles:[""]}),n})(),qk=(()=>{class n{}return n.emailPattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,n})();const zk=["*"];let dx=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:zk,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA()),2&t&&c.Q6J("ngClass",r.bgColor)},directives:[Xr],styles:[""]}),n})(),hx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Cp=(()=>{class n extends hx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Ya=new c.OlP("NgValueAccessor"),Yk={provide:Ya,useExisting:(0,c.Gpc)(()=>Jv),multi:!0},Jk=new c.OlP("CompositionEventMode");let Jv=(()=>{class n extends hx{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Qk(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Jk,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([Yk]),c.qOj]}),n})();function yh(n){return null==n||0===n.length}function px(n){return null!=n&&"number"==typeof n.length}const Di=new c.OlP("NgValidators"),_h=new c.OlP("NgAsyncValidators"),Xk=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class So{static min(e){return function gx(n){return e=>{if(yh(e.value)||yh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function mx(n){return e=>{if(yh(e.value)||yh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return yx(e)}static requiredTrue(e){return function _x(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function vx(n){return yh(n.value)||Xk.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function wx(n){return e=>yh(e.value)||!px(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Ex(n){return e=>px(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return bx(e)}static nullValidator(e){return null}static compose(e){return Sx(e)}static composeAsync(e){return xx(e)}}function yx(n){return yh(n.value)?{required:!0}:null}function bx(n){if(!n)return sI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(yh(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function sI(n){return null}function Ix(n){return null!=n}function Cx(n){const e=(0,c.QGY)(n)?(0,nn.D)(n):n;return(0,c.CqO)(e),e}function Dx(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Tx(n,e){return e.map(t=>t(n))}function Ax(n){return n.map(e=>function eR(n){return!n.validate}(e)?e:t=>e.validate(t))}function Sx(n){if(!n)return null;const e=n.filter(Ix);return 0==e.length?null:function(t){return Dx(Tx(t,e))}}function kT(n){return null!=n?Sx(Ax(n)):null}function xx(n){if(!n)return null;const e=n.filter(Ix);return 0==e.length?null:function(t){return function Wk(...n){const e=(0,Ca.jO)(n),{args:t,keys:r}=vn(n),o=new Dn.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let E=h,C=h;for(let S=0;S<h;S++){let k=!1;(0,Il.Xf)(t[S]).subscribe((0,Hn.x)(u,V=>{k||(k=!0,C--),m[S]=V},()=>E--,void 0,()=>{(!E||!k)&&(C||u.next(r?bl(r,m):m),u.complete())}))}});return e?o.pipe(El(e)):o}(Tx(t,e).map(Cx)).pipe((0,gt.U)(Dx))}}function RT(n){return null!=n?xx(Ax(n)):null}function Mx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kx(n){return n._rawValidators}function Rx(n){return n._rawAsyncValidators}function NT(n){return n?Array.isArray(n)?n:[n]:[]}function oI(n,e){return Array.isArray(n)?n.includes(e):n===e}function Nx(n,e){const t=NT(e);return NT(n).forEach(o=>{oI(t,o)||t.push(o)}),t}function Ox(n,e){return NT(e).filter(t=>!oI(n,t))}class Px{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=RT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vh extends Px{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _s extends Px{get formDirective(){return null}get path(){return null}}class Fx{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let OT=(()=>{class n extends Fx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vh,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),PT=(()=>{class n extends Fx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_s,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function Xv(n,e){VT(n,e),e.valueAccessor.writeValue(n.value),function uR(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Vx(n,e)})}(n,e),function cR(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function lR(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Vx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function aR(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function lI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function cI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function VT(n,e){const t=kx(n);null!==e.validator?n.setValidators(Mx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Rx(n);null!==e.asyncValidator?n.setAsyncValidators(Mx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();cI(e._rawValidators,o),cI(e._rawAsyncValidators,o)}function dI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=kx(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Rx(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return cI(e._rawValidators,r),cI(e._rawAsyncValidators,r),t}function Vx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ux(n,e){VT(n,e)}function UT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function jx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function BT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Jv?t=u:function fR(n){return Object.getPrototypeOf(n.constructor)===Cp}(u)?r=u:o=u}),o||r||t||null}function jT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const e0="VALID",hI="INVALID",ry="PENDING",t0="DISABLED";function HT(n){return(fI(n)?n.validators:n)||null}function $x(n){return Array.isArray(n)?kT(n):n||null}function GT(n,e){return(fI(e)?e.asyncValidators:n)||null}function Hx(n){return Array.isArray(n)?RT(n):n||null}function fI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Gx=n=>n instanceof Sc,ZT=n=>n instanceof pI;function Zx(n){return Gx(n)?n.value:n.getRawValue()}function qx(n,e){const t=ZT(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function zx(n,e){ZT(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new c.vHH(1002,"")})}class qT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$x(this._rawValidators),this._composedAsyncValidatorFn=Hx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===e0}get invalid(){return this.status===hI}get pending(){return this.status==ry}get disabled(){return this.status===t0}get enabled(){return this.status!==t0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$x(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Hx(e)}addValidators(e){this.setValidators(Nx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Nx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ox(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ox(e,this._rawAsyncValidators))}hasValidator(e){return oI(this._rawValidators,e)}hasAsyncValidator(e){return oI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ry,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=t0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=e0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===e0||this.status===ry)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?t0:e0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ry,this._hasOwnPendingAsyncValidator=!0;const t=Cx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function pR(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=ZT(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof mR)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?t0:this.errors?hI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ry)?ry:this._anyControlsHaveStatus(hI)?hI:e0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Sc extends qT{constructor(e=null,t,r){super(HT(t),GT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class pI extends qT{constructor(e,t,r){super(HT(t),GT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zx(this,e),Object.keys(e).forEach(r=>{qx(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Zx(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class mR extends qT{constructor(e,t,r){super(HT(t),GT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zx(this,e),e.forEach((r,o)=>{qx(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Zx(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const yR={provide:_s,useExisting:(0,c.Gpc)(()=>gI)},n0=(()=>Promise.resolve(null))();let gI=(()=>{class n extends _s{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new pI({},kT(t),RT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){n0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Xv(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){n0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){n0.then(()=>{const r=this._findContainer(t.path),o=new pI({});Ux(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){n0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){n0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,jx(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Di,10),c.Y36(_h,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([yR]),c.qOj]}),n})();const vR={provide:vh,useExisting:(0,c.Gpc)(()=>zT)},Yx=(()=>Promise.resolve(null))();let zT=(()=>{class n extends vh{constructor(t,r,o,u,h){super(),this._changeDetectorRef=h,this.control=new Sc,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=BT(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),UT(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Xv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Yx.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;Yx.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function uI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_s,9),c.Y36(Di,10),c.Y36(_h,10),c.Y36(Ya,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([vR]),c.qOj,c.TTD]}),n})(),WT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Jx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const KT=new c.OlP("NgModelWithFormControlWarning"),CR={provide:vh,useExisting:(0,c.Gpc)(()=>YT)};let YT=(()=>{class n extends vh{constructor(t,r,o,u){super(),this._ngModelWarningConfig=u,this.update=new c.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=BT(0,o)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&lI(r,this,!1),Xv(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}UT(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&lI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Di,10),c.Y36(_h,10),c.Y36(Ya,10),c.Y36(KT,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[c._Bn([CR]),c.qOj,c.TTD]}),n})();const DR={provide:_s,useExisting:(0,c.Gpc)(()=>mI)};let mI=(()=>{class n extends _s{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Xv(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){lI(t.control||null,t,!1),jT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,jx(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(lI(r||null,t),Gx(o)&&(Xv(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Ux(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function dR(n,e){return dI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){VT(this.form,this),this._oldForm&&dI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Di,10),c.Y36(_h,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([DR]),c.qOj,c.TTD]}),n})(),Dp=(()=>{class n{constructor(){this._validator=sI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):sI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const VR={provide:Di,useExisting:(0,c.Gpc)(()=>yI),multi:!0};let yI=(()=>{class n extends Dp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function PR(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>yx}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([VR]),c.qOj]}),n})();const HR={provide:Di,useExisting:(0,c.Gpc)(()=>tA),multi:!0};let tA=(()=>{class n extends Dp{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>bx(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[c._Bn([HR]),c.qOj]}),n})(),fM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jx]]}),n})(),GR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[fM]}),n})(),pM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[fM]}),n})();function ZR(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.Oqu(t.alertMessage)}}function qR(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Field is required !! "),c.qZA())}function zR(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," You must enter a valid email !! "),c.qZA())}function WR(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Field is required !! "),c.qZA())}let KR=(()=>{class n{constructor(t,r){this.auth=t,this.modalService=r,this.constatns=qk,this.showAlert=!1,this.alertColor="",this.alertMessage="",this.credentials={email:"",password:""}}ngOnInit(){}login(){var t=this;return(0,_e.Z)(function*(){var r;try{t.showAlert=!0,t.alertColor="orange",t.alertMessage="Please wait ... \u{1f607}";const{email:o,password:u}=t.credentials;yield t.auth.login(o,u),t.showAlert=!1,t.modalService.toggleModal("auth-modal")}catch(o){t.showAlert=!0,t.alertColor="red",t.alertMessage=null!==(r=o.message)&&void 0!==r?r:"somthing went wrong !! \u{1f616}\u{1f613}",console.error(o)}})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rI),c.Y36(iI))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:18,vars:8,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","pattern","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(c.YNc(0,ZR,2,2,"app-alert",0),c.TgZ(1,"form",1,2),c.NdJ("ngSubmit",function(){return r.login()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Email"),c.qZA(),c.TgZ(6,"input",5,6),c.NdJ("ngModelChange",function(u){return r.credentials.email=u}),c.qZA(),c.YNc(8,qR,2,0,"p",7),c.YNc(9,zR,2,0,"p",7),c.qZA(),c.TgZ(10,"div",3)(11,"label",4),c._uU(12,"Password"),c.qZA(),c.TgZ(13,"input",8,9),c.NdJ("ngModelChange",function(u){return r.credentials.password=u}),c.qZA(),c.YNc(15,WR,2,0,"p",7),c.qZA(),c.TgZ(16,"button",10),c._uU(17," Submit "),c.qZA()()),2&t){const o=c.MAs(2),u=c.MAs(7),h=c.MAs(14);c.Q6J("ngIf",r.showAlert),c.xp6(6),c.Q6J("ngModel",r.credentials.email)("pattern",r.constatns.emailPattern),c.xp6(2),c.Q6J("ngIf",u.dirty&&(null==u.errors?null:u.errors.required)),c.xp6(1),c.Q6J("ngIf",u.dirty&&(null==u.errors?null:u.errors.required)),c.xp6(4),c.Q6J("ngModel",r.credentials.password),c.xp6(2),c.Q6J("ngIf",h.dirty&&(null==h.errors?null:h.errors.required)),c.xp6(1),c.Q6J("disabled",o.invalid)}},directives:[dn,dx,WT,PT,gI,Jv,yI,OT,zT,tA],styles:[""]}),n})();class YR{static match(e,t,r=""){return o=>{const u=o.get(e),h=o.get(t);return u&&h?(u.value!==h.value&&h.setErrors({noMatch:r}),null):(console.error("Form control can not be found in the form group !!"),{controlNotFound:!1})}}}let gM=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(o=>o.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(zl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();var QR=N(655);const _I=new c.OlP("ngx-mask config"),mM=new c.OlP("new ngx-mask config"),yM=new c.OlP("initial ngx-mask config"),JR={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new c.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},XR=["Hh:m0:s0","Hh:m0","m0:s0"],eN=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let _M=(()=>{class n{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,o,u,h)=>{var m,E;let C=[],S="";if(Array.isArray(u)){const Oe=new RegExp(u.map(Le=>"[\\^$.|?*+()".indexOf(Le)>=0?`\\${Le}`:Le).join("|"));C=r.split(Oe),S=null!==(E=null===(m=r.match(Oe))||void 0===m?void 0:m[0])&&void 0!==E?E:""}else C=r.split(u),S=u;const k=C.length>1?`${S}${C[1]}`:"";let V=C[0];const W=this.separatorLimit.replace(/\s/g,"");W&&+W&&(V="-"===V[0]?`-${V.slice(1,V.length).slice(0,W.length)}`:V.slice(0,W.length));const ae=/(\d+)(\d{3})/;for(;o&&ae.test(V);)V=V.replace(ae,"$1"+o+"$2");return void 0===h?V+k:0===h?V:V+k.substr(0,h+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const o=r.split(".");return o.length>1?Number(o[o.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var o,u,h;for(let m=(null===(o=this.suffix)||void 0===o?void 0:o.length)-1;m>=0;m--){const E=this.suffix.substr(m,null===(u=this.suffix)||void 0===u?void 0:u.length);if(r.includes(E)&&(m-1<0||!r.includes(this.suffix.substr(m-1,null===(h=this.suffix)||void 0===h?void 0:h.length))))return r.replace(E,"")}return r},this.checkInputPrecision=(r,o,u)=>{if(o<1/0){if(Array.isArray(u)){const E=u.find(C=>C!==this.thousandSeparator);u=E||u[0]}const h=new RegExp(this._charToRegExpExpression(u)+`\\d{${o}}.*$`),m=r.match(h);m&&m[0].length-1>o&&(r=r.substring(0,r.length-(m[0].length-1-o))),0===o&&this._compareOrIncludes(r[r.length-1],u,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[o,u]=r;return this.customPattern=u,this.applyMask(t,o)}applyMask(t,r,o=0,u=!1,h=!1,m=(()=>{})){var E,C;if(!r||"string"!=typeof t)return"";let S=0,k="",V=!1,W=!1,ae=1,Oe=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const Le=t.toString().split("");"IP"===r&&(this.ipError=Le.filter(st=>"."===st).length<3&&Le.length<7,r="099.099.099.099");const St=[];for(let st=0;st<t.length;st++)(null===(E=t[st])||void 0===E?void 0:E.match("\\d"))&&St.push(t[st]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==St.length&&14!==St.length,r=St.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const st=this.getPrecision(r);t=this.checkInputPrecision(t,st,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),k=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!h?t.slice(1,t.length):t,h&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const st=this._charToRegExpExpression(this.thousandSeparator);let bt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(st,"");if(Array.isArray(this.decimalMarker))for(const Ap of this.decimalMarker)bt=bt.replace(this._charToRegExpExpression(Ap),"");else bt=bt.replace(this._charToRegExpExpression(this.decimalMarker),"");const ca=new RegExp("["+bt+"]");(t.match(ca)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const sA=this.getPrecision(r),oA=(t=this.checkInputPrecision(t,sA,this.decimalMarker)).replace(new RegExp(st,"g"),"");k=this._formatWithSeparators(oA,this.thousandSeparator,this.decimalMarker,sA);const aA=k.indexOf(",")-t.indexOf(","),Tp=k.length-t.length;if(Tp>0&&","!==k[o]){W=!0;let Ap=0;do{this._shift.add(o+Ap),Ap++}while(Ap<Tp)}else 0!==aA&&o>0&&!(k.indexOf(",")>=o&&o>3)||!(k.indexOf(".")>=o&&o>3)&&Tp<=0?(this._shift.clear(),W=!0,ae=Tp,this._shift.add(o+=Tp)):this._shift.clear()}else for(let st=0,bt=Le[0];st<Le.length&&S!==r.length;st++,bt=Le[st])if(this._checkSymbolMask(bt,r[S])&&"?"===r[S+1])k+=bt,S+=2;else if("*"===r[S+1]&&V&&this._checkSymbolMask(bt,r[S+2]))k+=bt,S+=3,V=!1;else if(this._checkSymbolMask(bt,r[S])&&"*"===r[S+1])k+=bt,V=!0;else if("?"===r[S+1]&&this._checkSymbolMask(bt,r[S+2]))k+=bt,S+=3;else if(this._checkSymbolMask(bt,r[S])){if("H"===r[S]&&Number(bt)>2){S+=1,this._shiftStep(r,S,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}if("h"===r[S]&&"2"===k&&Number(bt)>3){S+=1,st--;continue}if("m"===r[S]&&Number(bt)>5){S+=1,this._shiftStep(r,S,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}if("s"===r[S]&&Number(bt)>5){S+=1,this._shiftStep(r,S,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}const ca=31;if("d"===r[S]&&(Number(bt)>3&&this.leadZeroDateTime||Number(t.slice(S,S+2))>ca||"/"===t[S+1])){S+=1,this._shiftStep(r,S,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}if("M"===r[S]){const oA=0===S&&(Number(bt)>2||Number(t.slice(S,S+2))>12||"/"===t[S+1]),aA=t.slice(S-3,S-1).includes("/")&&("/"===t[S-2]&&Number(t.slice(S-1,S+1))>12&&"/"!==t[S]||"/"===t[S]||"/"===t[S-3]&&Number(t.slice(S-2,S))>12&&"/"!==t[S-1]||"/"===t[S-1]),Tp=Number(t.slice(S-3,S-1))<=ca&&!t.slice(S-3,S-1).includes("/")&&"/"===t[S-1]&&(Number(t.slice(S,S+2))>12||"/"===t[S+1]),Ap=Number(t.slice(S-3,S-1))>ca&&!t.slice(S-3,S-1).includes("/")&&!t.slice(S-2,S).includes("/")&&Number(t.slice(S-2,S))>12,NN=Number(t.slice(S-3,S-1))<=ca&&!t.slice(S-3,S-1).includes("/")&&"/"!==t[S-1]&&Number(t.slice(S-1,S+1))>12;if(Number(bt)>1&&this.leadZeroDateTime||oA||aA||Tp||Ap||NN){S+=1,this._shiftStep(r,S,Le.length),st--,this.leadZeroDateTime&&(k+="0");continue}}k+=bt,S++}else" "===bt&&" "===r[S]?(k+=bt,S++):-1!==this.maskSpecialCharacters.indexOf(r[S])?(k+=r[S],S++,this._shiftStep(r,S,Le.length),st--):this.maskSpecialCharacters.indexOf(bt)>-1&&this.maskAvailablePatterns[r[S]]&&(null===(C=this.maskAvailablePatterns[r[S]])||void 0===C?void 0:C.optional)?(!!Le[S]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&(k+=Le[S]),S++,st--):"*"===this.maskExpression[S+1]&&this._findSpecialChar(this.maskExpression[S+2])&&this._findSpecialChar(bt)===this.maskExpression[S+2]&&V||"?"===this.maskExpression[S+1]&&this._findSpecialChar(this.maskExpression[S+2])&&this._findSpecialChar(bt)===this.maskExpression[S+2]&&V?(S+=3,k+=bt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(bt)<0&&bt!==this.placeHolderCharacter&&(Oe=!0);k.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(k+=r[r.length-1]);let kt=o+1;for(;this._shift.has(kt);)ae++,kt++;let Nt=u&&!r.startsWith("separator")?S:this._shift.has(o)?ae:0;Oe&&Nt--,m(Nt,W),ae<0&&this._shift.clear();let Ct=!1;h&&(Ct=Le.every(st=>this.maskSpecialCharacters.includes(st)));let Rt=`${this.prefix}${Ct?"":k}${this.suffix}`;return 0===k.length&&(Rt=`${this.prefix}${k}`),Rt}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,o)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===o&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,o){const u=/[*?]/g.test(t.slice(0,r))?o:r;this._shift.add(u+this.prefix.length||0)}_compareOrIncludes(t,r,o){return Array.isArray(r)?r.filter(u=>u!==o).includes(t):t===r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_I))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),vM=(()=>{class n extends _M{constructor(t,r,o,u){super(r),this.document=t,this._config=r,this._elementRef=o,this._renderer=u,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=h=>{}}applyMask(t,r,o=0,u=!1,h=!1,m=(()=>{})){if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const E=t&&"number"==typeof this.selStart?t[this.selStart]:"";let C="";if(this.hiddenInput&&!this.writingValue){let W=this.actualValue.split("");""!==t&&W.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>W.length?W.splice(this.selStart,0,E):t.length<W.length&&(W.length-t.length==1?W.splice(this.selStart-1,1):W.splice(this.selStart,this.selEnd-this.selStart))):W=[],this.showMaskTyped&&(t=this.removeMask(t)),C=this.actualValue.length&&W.length<=t.length?this.shiftTypedSymbols(W.join("")):t}C=Boolean(C)&&C.length?C:t;const S=super.applyMask(C,r,o,u,h,m);if(this.actualValue=this.getActualValue(S),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(W=>!this._compareOrIncludes(W,this.decimalMarker,this.thousandSeparator))),this.formControlResult(S),!this.showMaskTyped)return this.hiddenInput&&S&&S.length?this.hideInput(S,this.maskExpression):S;const k=S.length,V=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const W=this._numberSkipedSymbols(S);return S+V.slice(k+W)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?S+V:S+V.slice(k)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let o=r.exec(t),u=0;for(;null!=o;)u+=1,o=r.exec(t);return u}applyValueChanges(t,r,o,u=(()=>{})){const h=this._elementRef.nativeElement;h.value=this.applyMask(h.value,this.maskExpression,t,r,o,u),h!==this._getActiveElement()&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((o,u)=>{var h,m;return this.maskAvailablePatterns&&this.maskAvailablePatterns[r[u]]&&(null===(h=this.maskAvailablePatterns[r[u]])||void 0===h?void 0:h.symbol)?null===(m=this.maskAvailablePatterns[r[u]])||void 0===m?void 0:m.symbol:o}).join("")}getActualValue(t){const r=t.split("").filter((o,u)=>this._checkSymbolMask(o,this.maskExpression[u])||this.maskSpecialCharacters.includes(this.maskExpression[u])&&o===this.maskExpression[u]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((u,h)=>{if(this.maskSpecialCharacters.includes(t[h+1])&&t[h+1]!==this.maskExpression[h+1])return r=u,t[h+1];if(r.length){const m=r;return r="",m}return u})||[]).join("")}numberToString(t){return t||0===t?Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(t)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(o=>this._findSpecialChar(o)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var r;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const o=[];for(let u=0;u<t.length;u++)(null===(r=t[u])||void 0===r?void 0:r.match("\\d"))&&o.push(t[u]);return o.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>3&&o.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>6&&o.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var r;const o=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,u=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return o;const h=[];for(let m=0;m<t.length;m++)(null===(r=t[m])||void 0===r?void 0:r.match("\\d"))&&h.push(t[m]);return h.length<=3?o.slice(h.length,o.length):h.length>3&&h.length<=6?o.slice(h.length+1,o.length):h.length>6&&h.length<=9?o.slice(h.length+2,o.length):h.length>9&&h.length<11?o.slice(h.length+3,o.length):11===h.length?"":12===h.length?u.slice(17===t.length?16:15,u.length):h.length>12&&h.length<=14?u.slice(h.length+4,u.length):""}_getActiveElement(t=this.document){var r;const o=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==o?void 0:o.activeElement)?this._getActiveElement(o):t.activeElement}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let o=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(o=o.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,o):Number(o):o}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue),c.LFG(_I),c.LFG(c.SBq),c.LFG(c.Qsj))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),tN=(()=>{class n{constructor(t,r,o){this.document=t,this._maskService=r,this._config=o,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new c.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=u=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:o,patterns:u,prefix:h,suffix:m,thousandSeparator:E,decimalMarker:C,dropSpecialCharacters:S,hiddenInput:k,showMaskTyped:V,placeHolderCharacter:W,shownMaskExpression:ae,showTemplate:Oe,clearIfNotMatch:Le,validation:St,separatorLimit:kt,allowNegativeNumbers:Nt,leadZeroDateTime:Ct,triggerOnMaskChange:Rt}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((st,bt)=>st.length-bt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),o){if(!o.currentValue||!Array.isArray(o.currentValue))return;this._maskService.maskSpecialCharacters=o.currentValue||[]}u&&u.currentValue&&(this._maskService.maskAvailablePatterns=u.currentValue),h&&(this._maskService.prefix=h.currentValue),m&&(this._maskService.suffix=m.currentValue),E&&(this._maskService.thousandSeparator=E.currentValue),C&&(this._maskService.decimalMarker=C.currentValue),S&&(this._maskService.dropSpecialCharacters=S.currentValue),k&&(this._maskService.hiddenInput=k.currentValue),V&&(this._maskService.showMaskTyped=V.currentValue),W&&(this._maskService.placeHolderCharacter=W.currentValue),ae&&(this._maskService.shownMaskExpression=ae.currentValue),Oe&&(this._maskService.showTemplate=Oe.currentValue),Le&&(this._maskService.clearIfNotMatch=Le.currentValue),St&&(this._maskService.validation=St.currentValue),kt&&(this._maskService.separatorLimit=kt.currentValue),Nt&&(this._maskService.allowNegativeNumbers=Nt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(st=>"-"!==st))),Ct&&(this._maskService.leadZeroDateTime=Ct.currentValue),Rt&&(this._maskService.triggerOnMaskChange=Rt.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||eN.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(XR.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const o in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[o].optional&&(this._maskValue.indexOf(o)!==this._maskValue.lastIndexOf(o)?r+=this._maskValue.split("").filter(h=>h===o).join("").length:-1!==this._maskValue.indexOf(o)&&r++,-1!==this._maskValue.indexOf(o)&&t.toString().length>=this._maskValue.indexOf(o)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const o=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<o)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){(""===t||null==t)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const o=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let u=0,h=!1;if(this._maskService.applyValueChanges(o,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(E,C)=>{this._justPasted=!1,u=E,h=C}),this._getActiveElement()!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let m=this._position?this._inputValue.length+o+u:o+("Backspace"!==this._code||h?u:0);m>this._getActualInputLength()&&(m=this._getActualInputLength()),m<0&&(m=0),r.setSelectionRange(m,m),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const h=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==h&&(r.value=h),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const o=t.target;if(this._inputValue=o.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===o.value.length&&(o.selectionStart=o.selectionEnd),8===t.keyCode&&0!==o.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&o.selectionStart<=this.prefix.length)o.setSelectionRange(this.prefix.length,o.selectionEnd);else if(this._inputValue.length!==o.selectionStart&&1!==o.selectionStart)for(;this.specialCharacters.includes(this._inputValue[o.selectionStart-1].toString())&&(this.prefix.length>=1&&o.selectionStart>this.prefix.length||0===this.prefix.length);)o.setSelectionRange(o.selectionStart-1,o.selectionEnd);this.checkSelectionOnDeletion(o),this._maskService.prefix.length&&o.selectionStart<=this._maskService.prefix.length&&o.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const u=o.selectionStart;8===t.keyCode&&!o.readOnly&&0===u&&o.selectionEnd===o.value.length&&0!==o.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<o.selectionStart?o.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(o.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=o.selectionStart,this._maskService.selEnd=o.selectionEnd}writeValue(t){return(0,QR.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),("number"==typeof t||this._maskValue.startsWith("separator"))&&(t=this._maskService.numberToString(t),Array.isArray(this.decimalMarker)||(t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t),this._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){var r;const o=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==o?void 0:o.activeElement)?this._getActiveElement(o):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,o,u)=>{if(this._start="{"===o?u:this._start,"}"!==o)return this._maskService._findSpecialChar(o)?r+o:r;this._end=u;const h=Number(t.slice(this._start+1,this._end));return r+new Array(h+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(o=>":"!==o).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,o;const u=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(o=this._maskService.removeMask(t))||void 0===o?void 0:o.length);if(this._inputValue&&u)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,u;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ue),c.Y36(vM),c.Y36(_I))},n.\u0275dir=c.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&c.NdJ("paste",function(){return r.onPaste()})("ngModelChange",function(u){return r.onModelChange(u)})("input",function(u){return r.onInput(u)})("blur",function(){return r.onBlur()})("click",function(u){return r.onClick(u)})("keydown",function(u){return r.onKeyDown(u)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[c._Bn([{provide:Ya,useExisting:(0,c.Gpc)(()=>n),multi:!0},{provide:Di,useExisting:(0,c.Gpc)(()=>n),multi:!0},vM]),c.TTD]}),n})();function nN(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}let rN=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:mM,useValue:t},{provide:yM,useValue:JR},{provide:_I,useFactory:nN,deps:[yM,mM]},_M]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const wM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function iN(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Field is required !! "),c.qZA())}function sN(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.AsE(" The value you inputted is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," characters long. It must be at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," !! ")}}function oN(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," You must enter a valid email !! "),c.qZA())}function aN(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Value too low !! "),c.qZA())}function uN(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Value too high !! "),c.qZA())}function lN(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Password must be at least 8 characters, contain at least 1 uppercase letter, 1 lowercase letter, and 1 number, Can contain special characters !! "),c.qZA())}function cN(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.hij(" ",null==t.control.errors?null:t.control.errors.noMatch," ")}}function dN(n,e){if(1&n&&(c.ynx(0),c.YNc(1,iN,2,0,"p",2),c.YNc(2,sN,2,2,"p",2),c.YNc(3,oN,2,0,"p",2),c.YNc(4,aN,2,0,"p",2),c.YNc(5,uN,2,0,"p",2),c.YNc(6,lN,2,0,"p",2),c.YNc(7,cN,2,1,"p",2),c.Hsn(8),c.BQk()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch)}}wM.KeyboardEvent||(wM.KeyboardEvent=function(n,e){});const hN=[[["","validators",""]]],fN=["[validators]"];let pN=(()=>{class n{constructor(){this.control=new Sc,this.placeholder="",this.type="text",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",placeholder:"placeholder",type:"type",format:"format"},ngContentSelectors:fN,decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"type","placeholder","formControl","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(c.F$t(hN),c._UZ(0,"input",0),c.YNc(1,dN,9,7,"ng-container",1)),2&t&&(c.Q6J("type",r.type)("placeholder",r.placeholder)("formControl",r.control)("mask",r.format)("dropSpecialCharacters",!1),c.xp6(1),c.Q6J("ngIf",r.control.dirty||r.control.touched))},directives:[Jv,tN,OT,YT,dn],styles:[""]}),n})();function gN(n,e){if(1&n&&(c.TgZ(0,"app-alert",13),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.Oqu(t.alertMessage)}}function mN(n,e){1&n&&(c.TgZ(0,"p",14),c._uU(1," The email is taken, Please use another email. "),c.qZA())}const yN=function(n,e){return{"opacity-50":n,"hover:bg-indigo-500":e}};let _N=(()=>{class n{constructor(t,r){this.authService=t,this.emailTaken=r,this.showAlert=!1,this.alertMessage="",this.alertColor="orange",this.inSubmission=!1,this.name=new Sc("",[So.required,So.minLength(3)]),this.email=new Sc("",[So.required,So.email],[this.emailTaken.validate]),this.age=new Sc("",[So.required,So.min(18),So.max(120)]),this.password=new Sc("",[So.required,So.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/)]),this.confirm_password=new Sc("",[So.required]),this.phoneNumber=new Sc("",[So.required,So.minLength(15),So.maxLength(15)]),this.registerForm=new pI({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[YR.match("password","confirm_password","Confirm password doesn't match the entered password \u{1f914}\u{1f914}")])}ngOnInit(){}register(){this.inSubmission=!0,this.showAlert=!0,this.alertMessage="Please wait you account is being created. \u{1f607}";const t=this.registerForm.value.password,r={name:this.registerForm.value.name,email:this.registerForm.value.email,age:+this.registerForm.value.age,phoneNumber:this.registerForm.value.phoneNumber};try{this.authService.createUser(r,t).subscribe({next:o=>{this.alertMessage="Success! Your account has been created. \u{1f44c}\u{1f44c}",this.alertColor="green"},error:o=>{console.error(o),this.alertMessage=o.message,this.alertColor="red",this.inSubmission=!1},complete:()=>{this.inSubmission=!1}})}catch(o){return console.error(o),this.alertMessage=o.message,void(this.alertColor="red")}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rI),c.Y36(gM))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],features:[c._Bn([gM])],decls:30,vars:14,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","text","placeholder","Enter Name",3,"control"],["placeholder","Enter Email",3,"control"],["validators",""],["class","text-red-400",4,"ngIf"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Enter Confirm Password",3,"control"],["type","text","placeholder","Enter phone number","format","(000)0-00000000",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition",3,"ngClass","disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){1&t&&(c.YNc(0,gN,2,2,"app-alert",0),c.TgZ(1,"form",1),c.NdJ("ngSubmit",function(){return r.register()}),c.TgZ(2,"div",2)(3,"label",3),c._uU(4,"Name"),c.qZA(),c._UZ(5,"app-input",4),c.qZA(),c.TgZ(6,"div",2)(7,"label",3),c._uU(8,"Email"),c.qZA(),c.TgZ(9,"app-input",5),c.ynx(10,6),c.YNc(11,mN,2,0,"p",7),c.BQk(),c.qZA()(),c.TgZ(12,"div",2)(13,"label",3),c._uU(14,"Age"),c.qZA(),c._UZ(15,"app-input",8),c.qZA(),c.TgZ(16,"div",2)(17,"label",3),c._uU(18,"Password"),c.qZA(),c._UZ(19,"app-input",9),c.qZA(),c.TgZ(20,"div",2)(21,"label",3),c._uU(22,"Confirm Password"),c.qZA(),c._UZ(23,"app-input",10),c.qZA(),c.TgZ(24,"div",2)(25,"label",3),c._uU(26,"Phone Number"),c.qZA(),c._UZ(27,"app-input",11),c.qZA(),c.TgZ(28,"button",12),c._uU(29," Submit "),c.qZA()()),2&t&&(c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.registerForm),c.xp6(4),c.Q6J("control",r.name),c.xp6(4),c.Q6J("control",r.email),c.xp6(2),c.Q6J("ngIf",null==r.email.errors?null:r.email.errors.emailTaken),c.xp6(4),c.Q6J("control",r.age),c.xp6(4),c.Q6J("control",r.password),c.xp6(4),c.Q6J("control",r.confirm_password),c.xp6(4),c.Q6J("control",r.phoneNumber),c.xp6(1),c.Q6J("ngClass",c.WLB(11,yN,r.registerForm.invalid,r.registerForm.valid))("disabled",r.registerForm.invalid||r.inSubmission))},directives:[dn,dx,WT,PT,mI,pN,Xr],styles:[""]}),n})(),vN=(()=>{class n{constructor(t){this.modalService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(iI))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalId","auth-modal"],["heading","",1,"text-2xl","font-bold"],["title","Login"],["title","Register"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Your Account"),c.qZA(),c.TgZ(3,"app-tabs-container")(4,"app-tab",2),c._UZ(5,"app-login"),c.qZA(),c.TgZ(6,"app-tab",3),c._UZ(7,"app-register"),c.qZA()()())},directives:[Uk,Zk,cx,KR,_N],styles:[""]}),n})();function wN(n,e){1&n&&c._UZ(0,"app-auth-modal")}let EN=(()=>{class n{constructor(t){this.authService=t,this.title="clips"}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rI))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav")(1,"router-outlet"),c.YNc(2,wN,1,0,"app-auth-modal",0),c.ALo(3,"async")),2&t&&(c.xp6(2),c.Q6J("ngIf",!c.lcZ(3,1,r.authService.isAuthenticatedWithDelay$)))},directives:[Pk,Ll,dn,vN],pipes:[Nc],styles:[""]}),n})(),bN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[],imports:[[ya,pM,rN.forRoot()]]}),n})(),IN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ya,bN,pM,GR]]}),n})();const nA_firebaseConfig={apiKey:"AIzaSyCM2m0Tp1mHtZ366u5F5zI1f5rdnDRnNak",authDomain:"clibs-8ef23.firebaseapp.com",projectId:"clibs-8ef23",storageBucket:"clibs-8ef23.appspot.com",messagingSenderId:"687873988109",appId:"1:687873988109:web:e620587fa5d4c544c82744"};let CN=(()=>{class n{constructor(t,r){this.router=t,this.activatedRoute=r,this.orderBy="1"}ngOnInit(){this.activatedRoute.queryParams.subscribe(t=>{this.orderBy="2"===t.sort?t.sort:"1"})}sort(t){const{value:r}=t.target;this.router.navigateByUrl(`/manage?sort=${r}`)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fn),c.Y36(yo))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-manage"]],decls:112,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],["href","#"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"p-6","text-2xl"],["href","#",1,"font-bold","mb-2"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400"],[1,"hidden"],[1,"text-2xl","font-bold"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"a",2),c._uU(3,"Upload Videos"),c.qZA(),c.TgZ(4,"select",3),c.NdJ("change",function(u){return r.sort(u)}),c.TgZ(5,"option",4),c._uU(6,"Recent Uploads"),c.qZA(),c.TgZ(7,"option",5),c._uU(8,"Oldest Uploads"),c.qZA()()()(),c.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"a",9),c._UZ(13,"img",10),c.qZA(),c.TgZ(14,"div",11)(15,"a",12),c._uU(16," Game Highlighting Clip "),c.qZA(),c.TgZ(17,"a",13),c._uU(18," Copy Link "),c.qZA()(),c.TgZ(19,"div",14)(20,"a",15)(21,"span",16),c._uU(22,"build"),c.qZA()(),c.TgZ(23,"a",17)(24,"span",16),c._uU(25,"delete"),c.qZA()()()(),c.TgZ(26,"div",8)(27,"a",9),c._UZ(28,"img",10),c.qZA(),c.TgZ(29,"div",11)(30,"a",12),c._uU(31," Game Highlighting Clip "),c.qZA(),c.TgZ(32,"a",13),c._uU(33," Copy Link "),c.qZA()(),c.TgZ(34,"div",14)(35,"a",15)(36,"span",16),c._uU(37,"build"),c.qZA()(),c.TgZ(38,"a",17)(39,"span",16),c._uU(40,"delete"),c.qZA()()()(),c.TgZ(41,"div",8)(42,"a",9),c._UZ(43,"img",10),c.qZA(),c.TgZ(44,"div",11)(45,"a",12),c._uU(46," Game Highlighting Clip "),c.qZA(),c.TgZ(47,"a",13),c._uU(48," Copy Link "),c.qZA()(),c.TgZ(49,"div",14)(50,"a",15)(51,"span",16),c._uU(52,"build"),c.qZA()(),c.TgZ(53,"a",17)(54,"span",16),c._uU(55,"delete"),c.qZA()()()(),c.TgZ(56,"div",8)(57,"a",9),c._UZ(58,"img",10),c.qZA(),c.TgZ(59,"div",11)(60,"a",12),c._uU(61," Game Highlighting Clip "),c.qZA(),c.TgZ(62,"a",13),c._uU(63," Copy Link "),c.qZA()(),c.TgZ(64,"div",14)(65,"a",15)(66,"span",16),c._uU(67,"build"),c.qZA()(),c.TgZ(68,"a",17)(69,"span",16),c._uU(70,"delete"),c.qZA()()()(),c.TgZ(71,"div",8)(72,"a",9),c._UZ(73,"img",10),c.qZA(),c.TgZ(74,"div",11)(75,"a",12),c._uU(76," Game Highlighting Clip "),c.qZA(),c.TgZ(77,"a",13),c._uU(78," Copy Link "),c.qZA()(),c.TgZ(79,"div",14)(80,"a",15)(81,"span",16),c._uU(82,"build"),c.qZA()(),c.TgZ(83,"a",17)(84,"span",16),c._uU(85,"delete"),c.qZA()()()(),c.TgZ(86,"div",8)(87,"a",9),c._UZ(88,"img",10),c.qZA(),c.TgZ(89,"div",11)(90,"a",12),c._uU(91," Game Highlighting Clip "),c.qZA(),c.TgZ(92,"a",13),c._uU(93," Copy Link "),c.qZA()(),c.TgZ(94,"div",14)(95,"a",15)(96,"span",16),c._uU(97,"build"),c.qZA()(),c.TgZ(98,"a",17)(99,"span",16),c._uU(100,"delete"),c.qZA()()()()()(),c.TgZ(101,"div",18)(102,"p",19),c._uU(103,"Edit Video"),c.qZA(),c.TgZ(104,"form")(105,"div",20)(106,"label",21),c._uU(107,"Title"),c.qZA(),c._UZ(108,"input",22),c.qZA(),c.TgZ(109,"div",23)(110,"button",24),c._uU(111," Update "),c.qZA()()()()),2&t&&(c.xp6(5),c.Q6J("selected","1"==r.orderBy),c.xp6(2),c.Q6J("selected","2"==r.orderBy))},directives:[Fa],styles:[""]}),n})(),DN=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload"]],decls:25,vars:0,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],[1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],[1,"border-8","cursor-pointer","border-green-400"],["src","assets/img/1.jpg"],[1,"border-8","cursor-pointer","border-transparent"],["src","assets/img/2.jpg"],["src","assets/img/3.jpg"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["type","text",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2),c._uU(3,"Upload Video"),c.qZA(),c.TgZ(4,"div",3)(5,"h5"),c._uU(6,"Drop your file here (mp4 only!)"),c.qZA()(),c.TgZ(7,"div")(8,"form")(9,"h2",4),c._uU(10,"Select a Thumbnail"),c.qZA(),c.TgZ(11,"div",5)(12,"div",6),c._UZ(13,"img",7),c.qZA(),c.TgZ(14,"div",8),c._UZ(15,"img",9),c.qZA(),c.TgZ(16,"div",8),c._UZ(17,"img",10),c.qZA()(),c.TgZ(18,"div",11)(19,"label",12),c._uU(20,"Title"),c.qZA(),c._UZ(21,"input",13),c.qZA(),c.TgZ(22,"div",14)(23,"button",15),c._uU(24," Publish "),c.qZA()()()()()())},styles:[""]}),n})();var TN=N(9635);const rA=(0,gt.U)(n=>!!n);let iA=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(o,u)=>{const h=o.data.authGuardPipe||(()=>rA);return this.auth.user.pipe((0,ri.q)(1),h(o,u),(0,gt.U)(m=>"boolean"==typeof m?m:Array.isArray(m)?this.router.createUrlTree(m):this.router.parseUrl(m)))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Fn),c.LFG(zl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const EM=()=>(0,TN.z)(rA,(0,gt.U)(e=>e||"/")),xN=[{path:"manage-clips",redirectTo:"manage"},{path:"manage",component:CN,canActivate:[iA],data:{authOnly:!0,authGuardPipe:EM}},{path:"upload",component:DN,canActivate:[iA],data:{authOnly:!0,authGuardPipe:EM}}];let MN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[lg.forChild(xN)],lg]}),n})(),kN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ya,MN]]}),n})(),RN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[EN]}),n.\u0275inj=c.cJS({providers:[],imports:[[ba,IN,mt.hO.initializeApp(nA_firebaseConfig),ew,kk,kN,I0]]}),n})();(0,c.G48)(),Tg.Z.initializeApp(nA_firebaseConfig);let bM=!1;Tg.Z.auth().onAuthStateChanged(()=>{bM||lu().bootstrapModule(RN).catch(n=>console.error(n)),bM=!0})},5867:(qe,me,N)=>{N.d(me,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=N(9681);(0,c.registerVersion)("firebase","9.8.2","app")},127:(qe,me,N)=>{N.d(me,{Z:()=>c.Z});var c=N(3942);c.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(qe,me,N)=>{N.r(me);var c=N(5861),J=N(3942),O=N(2090),ie=N(9681),ne=N(655),de=N(1877),ue=N(4859);const Ae=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qe=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new de.Yd("@firebase/auth");function et(y,...f){We.logLevel<=de.in.ERROR&&We.error(`Auth (${ie.SDK_VERSION}): ${y}`,...f)}function Se(y,...f){throw Ve(y,...f)}function Ee(y,...f){return Ve(y,...f)}function Ie(y,f,g){const v=Object.assign(Object.assign({},Qe()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function Ue(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Se(y,"argument-error"),Ie(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return ye.create(y,...f)}function B(y,f,...g){if(!y)throw Ve(f,...g)}function we(y){const f="INTERNAL ASSERTION FAILED: "+y;throw et(f),new Error(f)}function z(y,f){y||we(f)}const re=new Map;function ee(y){z(y instanceof Function,"Expected a class definition");let f=re.get(y);return f?(z(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,re.set(y,f),f)}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Kt{constructor(f,g){this.shortDelay=f,this.longDelay=g,z(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ft(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,f){z(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Jt{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wr=new Kt(3e4,6e4);function Ht(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ot(y,f,g,v){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,c.Z)(function*(y,f,g,v,T={}){return Wr(y,T,(0,c.Z)(function*(){let R={},q={};v&&("GET"===f?q=v:R={body:JSON.stringify(v)});const he=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Jt.fetch()(vs(y,y.config.apiHost,g,he),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Wr(y,f,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,c.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},qt),f);try{const T=new Kr(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw di(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const he=R.ok?q.errorMessage:q.error.message,[Fe,Ye]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw di(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Fe)throw di(y,"email-already-in-use",q);if("USER_DISABLED"===Fe)throw di(y,"user-disabled",q);const ct=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Ie(y,ct,Ye);Se(y,ct)}}catch(T){if(T instanceof O.ZR)throw T;Se(y,"network-request-failed")}})).apply(this,arguments)}function Er(y,f,g,v){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,c.Z)(function*(y,f,g,v,T={}){const R=yield Ot(y,f,g,v,T);return"mfaPendingCredential"in R&&Se(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function vs(y,f,g,v){const T=`${f}${g}?${v}`;return y.config.emulator?mn(y.config,T):`${y.config.apiScheme}://${T}`}class Kr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(Ee(this.auth,"network-request-failed")),wr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function di(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=Ee(y,f,v);return T.customData._tokenResponse=g,T}function Yr(){return(Yr=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function cn(y,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ys(y,f){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Bn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function xo(){return(xo=(0,c.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),T=rt(v);B(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:Bn(jt(T.auth_time)),issuedAtTime:Bn(jt(T.iat)),expirationTime:Bn(jt(T.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function jt(y){return 1e3*Number(y)}function rt(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return et("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(g);return T?JSON.parse(T):(et("Failed to decode base64 JWT payload"),null)}catch(T){return et("Caught error parsing JWT payload as JSON",T),null}}function sr(y,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,c.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Lt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Lt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Qs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class or{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bn(this.lastLoginAt),this.creationTime=Bn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ar(y){return L.apply(this,arguments)}function L(){return(L=(0,c.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),T=yield sr(y,Ys(g,{idToken:v}));B(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const q=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?H(R.providerUserInfo):[],he=Ce(y.providerData,q),ct=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==he?void 0:he.length)),lt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:he,metadata:new or(R.createdAt,R.lastLoginAt),isAnonymous:ct};Object.assign(y,lt)})).apply(this,arguments)}function Z(){return(Z=(0,c.Z)(function*(y){const f=(0,O.m9)(y);yield ar(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ce(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function H(y){return y.map(f=>{var{providerId:g}=f,v=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Me(){return(Me=(0,c.Z)(function*(y,f){const g=yield Wr(y,{},(0,c.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,q=vs(y,T,"/v1/token",`key=${R}`),he=yield y._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Jt.fetch()(q,{method:"POST",headers:he,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){B(f.idToken,"internal-error"),B(void 0!==f.idToken,"internal-error"),B(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function yt(y){const f=rt(y);return B(f,"internal-error"),B(void 0!==f.exp,"internal-error"),B(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,c.Z)(function*(){return B(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,c.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:q}=yield function X(y,f){return Me.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(T,R,Number(q))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:T,expirationTime:R}=g,q=new Ke;return v&&(B("string"==typeof v,"internal-error",{appName:f}),q.refreshToken=v),T&&(B("string"==typeof T,"internal-error",{appName:f}),q.accessToken=T),R&&(B("number"==typeof R,"internal-error",{appName:f}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ke,this.toJSON())}_performRefresh(){return we("not implemented")}}function dt(y,f){B("string"==typeof y||void 0===y,"internal-error",{appName:f})}class wt{constructor(f){var{uid:g,auth:v,stsTokenManager:T}=f,R=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new or(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const v=yield sr(g,g.stsTokenManager.getToken(g.auth,f));return B(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function hi(y){return xo.apply(this,arguments)}(this,f)}reload(){return function G(y){return Z.apply(this,arguments)}(this)}_assign(f){this!==f&&(B(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new wt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,c.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield ar(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield sr(f,function ft(y,f){return Yr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,T,R,q,he,Fe,Ye,ct;const lt=null!==(v=g.displayName)&&void 0!==v?v:void 0,En=null!==(T=g.email)&&void 0!==T?T:void 0,oi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Su=null!==(q=g.photoURL)&&void 0!==q?q:void 0,Gh=null!==(he=g.tenantId)&&void 0!==he?he:void 0,sg=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,Pa=null!==(Ye=g.createdAt)&&void 0!==Ye?Ye:void 0,Hl=null!==(ct=g.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:Dd,emailVerified:og,isAnonymous:Fn,providerData:Zh,stsTokenManager:qh}=g;B(Dd&&qh,f,"internal-error");const zh=Ke.fromJSON(this.name,qh);B("string"==typeof Dd,f,"internal-error"),dt(lt,f.name),dt(En,f.name),B("boolean"==typeof og,f,"internal-error"),B("boolean"==typeof Fn,f,"internal-error"),dt(oi,f.name),dt(Su,f.name),dt(Gh,f.name),dt(sg,f.name),dt(Pa,f.name),dt(Hl,f.name);const Fa=new wt({uid:Dd,auth:f,email:En,emailVerified:og,displayName:lt,isAnonymous:Fn,photoURL:Su,phoneNumber:oi,tenantId:Gh,stsTokenManager:zh,createdAt:Pa,lastLoginAt:Hl});return Zh&&Array.isArray(Zh)&&(Fa.providerData=Zh.map(xu=>Object.assign({},xu))),sg&&(Fa._redirectEventId=sg),Fa}static _fromIdTokenResponse(f,g,v=!1){return(0,c.Z)(function*(){const T=new Ke;T.updateFromServerResponse(g);const R=new wt({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield ar(R),R})()}}const vt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,c.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,c.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,c.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function Rn(y,f,g){return`firebase:${y}:${f}:${g}`}class br{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=Rn(this.userKey,T.apiKey,R),this.fullPersistenceKey=Rn("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?wt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,c.Z)(function*(){if(!g.length)return new br(ee(vt),f,v);const T=(yield Promise.all(g.map(function(){var Ye=(0,c.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let R=T[0]||ee(vt);const q=Rn(v,f.config.apiKey,f.name);let he=null;for(const Ye of g)try{const ct=yield Ye._get(q);if(ct){const lt=wt._fromJSON(f,ct);Ye!==R&&(he=lt),R=Ye;break}}catch(ct){}const Fe=T.filter(Ye=>Ye._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],he&&(yield R._set(q,he.toJSON())),yield Promise.all(g.map(function(){var Ye=(0,c.Z)(function*(ct){if(ct!==R)try{yield ct._remove(q)}catch(lt){}});return function(ct){return Ye.apply(this,arguments)}}())),new br(R,f,v)):new br(R,f,v)})()}}function Qa(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Nn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(da(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Xi(f))return"Blackberry";if(On(f))return"Webos";if(Ja(f))return"Safari";if((f.includes("chrome/")||ha(f))&&!f.includes("edge/"))return"Chrome";if(Ir(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function da(y=(0,O.z$)()){return/firefox\//i.test(y)}function Ja(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ha(y=(0,O.z$)()){return/crios\//i.test(y)}function Nn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Ir(y=(0,O.z$)()){return/android/i.test(y)}function Xi(y=(0,O.z$)()){return/blackberry/i.test(y)}function On(y=(0,O.z$)()){return/webos/i.test(y)}function Fr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ws(y=(0,O.z$)()){return Fr(y)||Ir(y)||On(y)||Xi(y)||/windows phone/i.test(y)||Nn(y)}function Mo(y,f=[]){let g;switch(y){case"Browser":g=Qa((0,O.z$)());break;case"Worker":g=`${Qa((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ie.SDK_VERSION}/${v}`}class Lr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=R=>new Promise((q,he)=>{try{q(f(R))}catch(Fe){he(Fe)}});v.onAbort=g,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,c.Z)(function*(){if(g.auth.currentUser===f)return;const v=[];try{for(const T of g.queue)yield T(f),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const R of v)try{R()}catch(q){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class He{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qt(this),this.idTokenSubscription=new Qt(this),this.beforeStateQueue=new Lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=ee(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield br.create(v,f),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var v;const T=yield g.assertedPersistence.getCurrentUser();let R=T,q=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const he=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=null==R?void 0:R._redirectEventId,Ye=yield g.tryRedirectSignIn(f);(!he||he===Fe)&&(null==Ye?void 0:Ye.user)&&(R=Ye.user,q=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(q)try{yield g.beforeStateQueue.runMiddleware(R)}catch(he){R=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(he))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){try{yield ar(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ge(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&B(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,c.Z)(function*(){if(!v._deleted)return f&&B(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,c.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(ee(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,c.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&ee(f)||g._popupRedirectResolver;B(v,g,"argument-error"),g.redirectPersistenceManager=yield br.create(g,[ee(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return B(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,v,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Mo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function ot(y){return(0,O.m9)(y)}class Qt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ai(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Si(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class fi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return we("not implemented")}_getIdTokenResponse(f){return we("not implemented")}_linkToIdToken(f,g){return we("not implemented")}_getReauthenticationResolver(f){return we("not implemented")}}function _n(y,f){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:resetPassword",Ht(y,f))})).apply(this,arguments)}function pa(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xa(y,f){return Es.apply(this,arguments)}function Es(){return(Es=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",Ht(y,f))})).apply(this,arguments)}function Xs(){return(Xs=(0,c.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithPassword",Ht(y,f))})).apply(this,arguments)}function bs(y,f){return dn.apply(this,arguments)}function dn(){return(dn=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendOobCode",Ht(y,f))})).apply(this,arguments)}function Xt(y,f){return eu.apply(this,arguments)}function eu(){return(eu=(0,c.Z)(function*(y,f){return bs(y,f)})).apply(this,arguments)}function ga(y,f){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,c.Z)(function*(y,f){return bs(y,f)})).apply(this,arguments)}function xi(y,f){return tu.apply(this,arguments)}function tu(){return(tu=(0,c.Z)(function*(y,f){return bs(y,f)})).apply(this,arguments)}function Mc(y,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,c.Z)(function*(y,f){return bs(y,f)})).apply(this,arguments)}function ol(){return(ol=(0,c.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,f))})).apply(this,arguments)}function kc(){return(kc=(0,c.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,f))})).apply(this,arguments)}class ur extends fi{constructor(f,g,v,T=null){super("password",v),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new ur(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new ur(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function jn(y,f){return Xs.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function ki(y,f){return ol.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Se(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,c.Z)(function*(){switch(v.signInMethod){case"password":return pa(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Sp(y,f){return kc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Se(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Is(y,f){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,c.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithIdp",Ht(y,f))})).apply(this,arguments)}class es extends fi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new es(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Se("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=g,R=(0,ne._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const q=new es(v,T);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(f){return Is(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Is(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Is(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function Nc(y,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendVerificationCode",Ht(y,f))})).apply(this,arguments)}function Cs(){return(Cs=(0,c.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,f))})).apply(this,arguments)}function Pc(){return(Pc=(0,c.Z)(function*(y,f){const g=yield Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,f));if(g.temporaryProof)throw di(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const kp={USER_NOT_FOUND:"user-not-found"};function Fc(){return(Fc=(0,c.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),kp)})).apply(this,arguments)}class ko extends fi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new ko({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new ko({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function al(y,f){return Cs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Mp(y,f){return Pc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Rp(y,f){return Fc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}=f;return v||g||T||R?new ko({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class nu{constructor(f){var g,v,T,R,q,he;const Fe=(0,O.zd)((0,O.pd)(f)),Ye=null!==(g=Fe.apiKey)&&void 0!==g?g:null,ct=null!==(v=Fe.oobCode)&&void 0!==v?v:null,lt=function wh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);B(Ye&&ct&&lt,"argument-error"),this.apiKey=Ye,this.operation=lt,this.code=ct,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Fe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(he=Fe.tenantId)&&void 0!==he?he:null}static parseLink(f){const g=function ma(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new nu(g)}catch(v){return null}}}let Vc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return ur._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=nu.parseLink(v);return B(T,"argument-error"),ur._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class lr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class eo extends lr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ri extends eo{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return B("providerId"in g&&"signInMethod"in g,"argument-error"),es._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return B(f.idToken||f.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ri.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ri.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:q,providerId:he}=f;if(!v&&!T&&!g&&!R||!he)return null;try{return new Ri(he)._credential({idToken:g,accessToken:v,nonce:q,pendingToken:R})}catch(Fe){return null}}}let Ro=(()=>{class y extends eo{constructor(){super("facebook.com")}static credential(g){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Uc=(()=>{class y extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Eh=(()=>{class y extends eo{constructor(){super("github.com")}static credential(g){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class to extends fi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Is(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Is(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Is(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:R}=g;return v&&T&&R&&v===T?new to(v,R):null}static _create(f,g){return new to(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cr extends lr{constructor(f){B(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Cr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Cr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=to.fromJSON(f);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return to._create(v,g)}catch(T){return null}}}let Bc=(()=>{class y extends eo{constructor(){super("twitter.com")}static credential(g,v){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Dr(y,f){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,c.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signUp",Ht(y,f))})).apply(this,arguments)}class ei{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,T=!1){return(0,c.Z)(function*(){const R=yield wt._fromIdTokenResponse(f,v,T),q=ul(v);return new ei({user:R,providerId:q,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=ul(v);return new ei({user:f,providerId:T,_tokenResponse:v,operationType:g})})()}}function ul(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ll(){return(ll=(0,c.Z)(function*(y){var f;const g=ot(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ei({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Dr(g,{returnSecureToken:!0}),T=yield ei._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Po extends O.ZR{constructor(f,g,v,T){var R;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Po.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,T){return new Po(f,g,v,T)}}function cl(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Po._fromErrorAndOperation(y,R,f,v):R})}function Ni(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function en(){return(en=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y);yield zt(!0,g,f);const{providerUserInfo:v}=yield cn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Ni(v||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function _a(y,f){return no.apply(this,arguments)}function no(){return(no=(0,c.Z)(function*(y,f,g=!1){const v=yield sr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ei._forOperation(y,"link",v)})).apply(this,arguments)}function zt(y,f,g){return va.apply(this,arguments)}function va(){return(va=(0,c.Z)(function*(y,f,g){yield ar(f);const T=!1===y?"provider-already-linked":"no-such-provider";B(Ni(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function ru(y,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,c.Z)(function*(y,f,g=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield sr(y,cl(v,T,f,y),g);B(R.idToken,v,"internal-error");const q=rt(R.idToken);B(q,v,"internal-error");const{sub:he}=q;return B(y.uid===he,v,"user-mismatch"),ei._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Se(v,"user-mismatch"),R}})).apply(this,arguments)}function Jn(y,f){return dl.apply(this,arguments)}function dl(){return(dl=(0,c.Z)(function*(y,f,g=!1){const v="signIn",T=yield cl(y,v,f),R=yield ei._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function un(y,f){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,c.Z)(function*(y,f){return Jn(ot(y),f)})).apply(this,arguments)}function Xn(y,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y);return yield zt(!1,g,f.providerId),_a(g,f)})).apply(this,arguments)}function ts(y,f){return wa.apply(this,arguments)}function wa(){return(wa=(0,c.Z)(function*(y,f){return ru((0,O.m9)(y),f)})).apply(this,arguments)}function pi(y,f){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,c.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithCustomToken",Ht(y,f))})).apply(this,arguments)}function pt(){return(pt=(0,c.Z)(function*(y,f){const g=ot(y),v=yield pi(g,{token:f,returnSecureToken:!0}),T=yield ei._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ts{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?hl._fromServerResponse(f,g):Se(f,"internal-error")}}class hl extends Ts{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new hl(g)}}function Ea(y,f,g){var v;B((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),B(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function iu(){return(iu=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&Ea(v,T,g),yield ga(v,T)})).apply(this,arguments)}function pl(){return(pl=(0,c.Z)(function*(y,f,g){yield _n((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Te(){return(Te=(0,c.Z)(function*(y,f){yield Xa((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Pt(y,f){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield _n(g,{oobCode:f}),T=v.requestType;switch(B(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(v.mfaInfo,g,"internal-error");default:B(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=Ts._fromServerResponse(ot(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function ou(){return(ou=(0,c.Z)(function*(y,f){const{data:g}=yield Pt((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function ti(){return(ti=(0,c.Z)(function*(y,f,g){const v=ot(y),T=yield Dr(v,{returnSecureToken:!0,email:f,password:g}),R=yield ei._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function yl(){return(yl=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};B(g.handleCodeInApp,v,"argument-error"),g&&Ea(v,T,g),yield xi(v,T)})).apply(this,arguments)}function ns(){return(ns=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=Vc.credentialWithLink(f,g||Ne());return B(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),un(v,T)})).apply(this,arguments)}function cr(y,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:createAuthUri",Ht(y,f))})).apply(this,arguments)}function As(){return(As=(0,c.Z)(function*(y,f){const v={identifier:f,continueUri:at()?Ne():"http://localhost"},{signinMethods:T}=yield cr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function _l(){return(_l=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ea(g.auth,T,f);const{email:R}=yield Xt(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function lu(){return(lu=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ea(v.auth,R,g);const{email:q}=yield Mc(v.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function vl(y,f){return ba.apply(this,arguments)}function ba(){return(ba=(0,c.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function du(){return(du=(0,c.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield sr(v,vl(v.auth,R));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const he=v.providerData.find(({providerId:Fe})=>"password"===Fe);he&&(he.displayName=v.displayName,he.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function hu(y,f,g){return so.apply(this,arguments)}function so(){return(so=(0,c.Z)(function*(y,f,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const q=yield sr(y,pa(v,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Uo{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class qc extends Uo{constructor(f,g,v,T){super(f,g,v),this.username=T}}class fu extends Uo{constructor(f,g){super(f,"facebook.com",g)}}class Br extends qc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Ih extends Uo{constructor(f,g){super(f,"google.com",g)}}class wl extends qc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function $n(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Zc(y){var f,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(g=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new Uo(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new fu(R,T);case"github.com":return new Br(R,T);case"google.com":return new Ih(R,T);case"twitter.com":return new wl(R,T,y.screenName||null);case"custom":case"anonymous":return new Uo(R,null);default:return new Uo(R,v,T)}}(g)}class rs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new rs("enroll",f)}static _fromMfaPendingCredential(f){return new rs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return rs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return rs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ao{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=ot(f),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(he=>Ts._fromServerResponse(v,he));B(T.mfaPendingCredential,v,"internal-error");const q=rs._fromMfaPendingCredential(T.mfaPendingCredential);return new ao(q,R,function(){var he=(0,c.Z)(function*(Fe){const Ye=yield Fe._process(v,q);delete T.mfaInfo,delete T.mfaPendingCredential;const ct=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(g.operationType){case"signIn":const lt=yield ei._fromIdTokenResponse(v,g.operationType,ct);return yield v._updateCurrentUser(lt.user),lt;case"reauthenticate":return B(g.user,v,"internal-error"),ei._forOperation(g.user,g.operationType,ct);default:Se(v,"internal-error")}});return function(Fe){return he.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function Kc(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:start",Ht(y,f))}class Bo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>Ts._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Bo(f)}getSession(){var f=this;return(0,c.Z)(function*(){return rs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,c.Z)(function*(){const T=f,R=yield v.getSession(),q=yield sr(v.user,T._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),R=yield sr(g.user,function uo(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(y,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const pu=new WeakMap,is="__sak";class gu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(is,"1"),this.storage.removeItem(is),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tr=(()=>{class y extends gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vp(){const y=(0,O.z$)();return Ja(y)||Fr(y)}()&&function Qn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ws(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&g(v,R,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((he,Fe,Ye)=>{this.notifyListeners(he,Ye)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(T);if(g.newValue!==he)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const R=()=>{const he=this.storage.getItem(T);!v&&this.localCache[T]===he||this.notifyListeners(T,he)},q=this.storage.getItem(T);!function fa(){return(0,O.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,R=this;return(0,c.Z)(function*(){yield T().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,c.Z)(function*(){const R=yield v().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,T=this;return(0,c.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),Dn=(()=>{class y extends gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Yc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,c.Z)(function*(){const T=g,{eventId:R,eventType:q,data:he}=T.data,Fe=v.handlersMap[q];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Ye=Array.from(Fe).map(function(){var lt=(0,c.Z)(function*(En){return En(T.origin,he)});return function(En){return lt.apply(this,arguments)}}()),ct=yield function Da(y){return Promise.all(y.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:ct})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function jo(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Ss{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var T=this;return(0,c.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,he;return new Promise((Fe,Ye)=>{const ct=jo("",20);R.port1.start();const lt=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);he={messageChannel:R,onMessage(En){const oi=En;if(oi.data.eventId===ct)switch(oi.data.status){case"ack":clearTimeout(lt),q=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Fe(oi.data.response);break;default:clearTimeout(lt),clearTimeout(q),Ye(new Error("invalid_response"))}}},T.handlers.add(he),R.port1.addEventListener("message",he.onMessage),T.target.postMessage({eventType:f,eventId:ct,data:g},[R.port2])}).finally(()=>{he&&T.removeMessageHandler(he)})})()}}function vn(){return window}function Fi(){return void 0!==vn().WorkerGlobalScope&&"function"==typeof vn().importScripts}function Qc(){return(Qc=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const bl="firebaseLocalStorageDb",Ms="firebaseLocalStorage",$o="fbase_key";class lo{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function er(y,f){return y.transaction([Ms],f?"readwrite":"readonly").objectStore(Ms)}function ho(){const y=indexedDB.open(bl,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Ms,{keyPath:$o})}catch(T){g(T)}}),y.addEventListener("success",(0,c.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Ms)?f(v):(v.close(),yield function co(){const y=indexedDB.deleteDatabase(bl);return new lo(y).toPromise()}(),f(yield ho()))}))})}function Ho(y,f,g){return ks.apply(this,arguments)}function ks(){return(ks=(0,c.Z)(function*(y,f,g){const v=er(y,!0).put({[$o]:f,value:g});return new lo(v).toPromise()})).apply(this,arguments)}function Rs(){return(Rs=(0,c.Z)(function*(y,f){const g=er(y,!1).get(f),v=yield new lo(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function fo(y,f){const g=er(y,!0).delete(f);return new lo(g).toPromise()}const po=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield ho()),g.db})()}_withRetries(g){var v=this;return(0,c.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return Fi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=Yc._getInstance(function El(){return Fi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,c.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,c.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function gt(){return Qc.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ss(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,c.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Jc(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ho();return yield Ho(g,is,"1"),yield fo(g,is),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,c.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,c.Z)(function*(){return T._withPendingWrite((0,c.Z)(function*(){return yield T._withRetries(R=>Ho(R,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,c.Z)(function*(){const T=yield v._withRetries(R=>function Go(y,f){return Rs.apply(this,arguments)}(R,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,c.Z)(function*(){return v._withPendingWrite((0,c.Z)(function*(){return yield v._withRetries(T=>fo(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const v=yield g._withRetries(q=>{const he=er(q,!1).getAll();return new lo(he).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:q,value:he}of v)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(he)&&(g.notifyListeners(q,he),T.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Gn(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:start",Ht(y,f))}function Tn(){return(Tn=(0,c.Z)(function*(y){return(yield Ot(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function go(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const R=Ee("internal-error");R.customData=T,g(R)},v.type="text/javascript",v.charset="UTF-8",function ri(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function os(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ii=1e12;class wn{constructor(f){this.auth=f,this.counter=ii,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new yi(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||ii;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ii))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var v;return null===(v=g._widgets.get(f||ii))||void 0===v||v.execute(),""})()}}class yi{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;B(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mu(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Dl=os("rcb"),hn=new Kt(3e4,6e4);class sy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vn().grecaptcha}load(f,g=""){return B(function Zo(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(vn().grecaptcha):new Promise((v,T)=>{const R=vn().setTimeout(()=>{T(Ee(f,"network-request-failed"))},hn.get());vn()[Dl]=()=>{vn().clearTimeout(R),delete vn()[Dl];const he=vn().grecaptcha;if(!he)return void T(Ee(f,"internal-error"));const Fe=he.render;he.render=(Ye,ct)=>{const lt=Fe(Ye,ct);return this.counter++,lt},this.hostLanguage=g,v(he)},go(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Dl,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!vn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jr{load(f){return(0,c.Z)(function*(){return new wn(f)})()}clearedOneInstance(){}}const Xc="recaptcha",Os={theme:"light",type:"image"};class ed{constructor(f,g=Object.assign({},Os),v){this.parameters=g,this.type=Xc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ot(v),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;B(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jr:new sy,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const q=he=>{!he||(f.tokenChangeListeners.delete(q),R(he))};f.tokenChangeListeners.add(q),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=vn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){B(at()&&!Fi(),f.auth,"internal-error"),yield function Vi(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ns(y){return Tn.apply(this,arguments)}(f.auth);B(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Tl{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=ko._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Aa(){return(Aa=(0,c.Z)(function*(y,f,g){const v=ot(y),T=yield Sr(v,f,(0,O.m9)(g));return new Tl(T,R=>un(v,R))})).apply(this,arguments)}function td(){return(td=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield zt(!1,v,"phone");const T=yield Sr(v.auth,f,(0,O.m9)(g));return new Tl(T,R=>Xn(v,R))})).apply(this,arguments)}function Ar(){return(Ar=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=yield Sr(v.auth,f,(0,O.m9)(g));return new Tl(T,R=>ts(v,R))})).apply(this,arguments)}function Sr(y,f,g){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,c.Z)(function*(y,f,g){var v;const T=yield g.verify();try{let R;if(B("string"==typeof T,y,"argument-error"),B(g.type===Xc,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const q=R.session;if("phoneNumber"in R)return B("enroll"===q.type,y,"internal-error"),(yield Kc(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{B("signin"===q.type,y,"internal-error");const he=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return B(he,y,"missing-multi-factor-info"),(yield Gn(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Nc(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return q}}finally{g._reset()}})).apply(this,arguments)}function as(){return(as=(0,c.Z)(function*(y,f){yield _a((0,O.m9)(y),f)})).apply(this,arguments)}let Ps=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=ot(g)}verifyPhoneNumber(g,v){return Sr(this.auth,g,(0,O.m9)(v))}static credential(g,v){return ko._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?ko._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function us(y,f){return f?ee(f):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class zo extends fi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Is(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Is(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Is(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function xt(y){return Jn(y.auth,new zo(y),y.bypassAuthState)}function nd(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),ru(g,new zo(y),y.bypassAuthState)}function Wo(y){return dr.apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),_a(g,new zo(y),y.bypassAuthState)})).apply(this,arguments)}class xa{constructor(f,g,v,T,R=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:q,error:he,type:Fe}=f;if(he)return void g.reject(he);const Ye={auth:g.auth,requestUri:v,sessionId:T,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Ye))}catch(ct){g.reject(ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return xt;case"linkViaPopup":case"linkViaRedirect":return Wo;case"reauthViaPopup":case"reauthViaRedirect":return nd;default:Se(this.auth,"internal-error")}}resolve(f){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ko=new Kt(2e3,1e4);function ls(){return(ls=(0,c.Z)(function*(y,f,g){const v=ot(y);Ue(y,f,lr);const T=us(v,g);return new id(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function _u(){return(_u=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ue(v.auth,f,lr);const T=us(v.auth,g);return new id(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function Ui(){return(Ui=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ue(v.auth,f,lr);const T=us(v.auth,g);return new id(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let id=(()=>{class y extends xa{constructor(g,v,T,R,q){super(g,v,R,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const v=yield g.execute();return B(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,c.Z)(function*(){z(1===g.filter.length,"Popup operations only handle one event");const v=jo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ko.get())};g()}}return y.currentPopupAction=null,y})();const hr=new Map;class Al extends xa{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let v=hr.get(g.auth._key());if(!v){try{const R=(yield function Th(y,f){return Fs.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}hr.set(g.auth._key(),v)}return g.bypassAuthState||hr.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Fs(){return(Fs=(0,c.Z)(function*(y,f){const g=F(f),v=M(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function Yo(y,f){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,c.Z)(function*(y,f){return M(y)._set(F(f),"true")})).apply(this,arguments)}function D(y,f){hr.set(y._key(),f)}function M(y){return ee(y._redirectPersistence)}function F(y){return Rn("pendingRedirect",y.config.apiKey,y.name)}function pe(){return(pe=(0,c.Z)(function*(y,f,g){const v=ot(y);Ue(y,f,lr);const T=us(v,g);return yield Yo(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function ut(){return(ut=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ue(v.auth,f,lr);const T=us(v.auth,g);yield Yo(T,v.auth);const R=yield fr(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Sn(){return(Sn=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ue(v.auth,f,lr);const T=us(v.auth,g);yield zt(!1,v,f.providerId),yield Yo(T,v.auth);const R=yield fr(v);return T._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function cs(){return(cs=(0,c.Z)(function*(y,f){return yield ot(y)._initializationPromise,Bi(y,f,!1)})).apply(this,arguments)}function Bi(y,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,c.Z)(function*(y,f,g=!1){const v=ot(y),T=us(v,f),q=yield new Al(v,T,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,f)),q})).apply(this,arguments)}function fr(y){return ds.apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(y){const f=jo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Sl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function od(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xl(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!xl(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(Ee(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sd(f))}saveEventToCache(f){this.cachedEventUids.add(sd(f)),this.lastProcessedEventTime=Date.now()}}function sd(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function xl({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ah(y){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,c.Z)(function*(y,f={}){return Ot(y,"GET","/v1/projects",f)})).apply(this,arguments)}const ad=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vu=/^https?/;function xh(){return(xh=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ah(y);for(const g of f)try{if(s0(g))return}catch(v){}Se(y,"unauthorized-domain")})).apply(this,arguments)}function s0(y){const f=Ne(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===v}if(!vu.test(g))return!1;if(ad.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Bp=new Kt(3e4,6e4);function Mh(){const y=vn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let wu=null;function mo(y){return wu=wu||function jp(y){return new Promise((f,g)=>{var v,T,R;function q(){Mh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Mh(),g(Ee(y,"network-request-failed"))},timeout:Bp.get()})}if(null===(T=null===(v=vn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=vn().gapi)||void 0===R?void 0:R.load)){const he=os("iframefcb");return vn()[he]=()=>{gapi.load?q():g(Ee(y,"network-request-failed"))},go(`https://apis.google.com/js/api.js?onload=${he}`).catch(Fe=>g(Fe))}q()}}).catch(f=>{throw wu=null,f})}(y),wu}const Eu=new Kt(5e3,15e3),bu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $p(y){const f=y.config;B(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?mn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:ie.SDK_VERSION},T=yo.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function _o(){return _o=(0,c.Z)(function*(y){const f=yield mo(y),g=vn().gapi;return B(g,y,"internal-error"),f.open({where:document.body,url:$p(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bu,dontclear:!0},v=>new Promise(function(){var T=(0,c.Z)(function*(R,q){yield v.restyle({setHideOnLeave:!1});const he=Ee(y,"network-request-failed"),Fe=vn().setTimeout(()=>{q(he)},Eu.get());function Ye(){vn().clearTimeout(Fe),R(v)}v.ping(Ye).then(Ye,()=>{q(he)})});return function(R,q){return T.apply(this,arguments)}}()))}),_o.apply(this,arguments)}const ld={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function wi(y,f,g,v,T,R){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:ie.SDK_VERSION,eventId:T};if(f instanceof lr){f.setDefaultLanguage(y.languageCode),q.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Ye]of Object.entries(R||{}))q[Fe]=Ye}if(f instanceof eo){const Fe=f.getScopes().filter(Ye=>""!==Ye);Fe.length>0&&(q.scopes=Fe.join(","))}y.tenantId&&(q.tid=y.tenantId);const he=q;for(const Fe of Object.keys(he))void 0===he[Fe]&&delete he[Fe];return`${function vo({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(he).slice(1)}`}const Nl="webStorageSupport";class fd extends class a0{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new fd(f)}_finalizeEnroll(f,g,v){return function Fp(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Cl(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:finalize",Ht(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let u0=(()=>{class y{constructor(){}static assertion(g){return fd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Rh="@firebase/auth";class qp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var T;f((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ka(){return window}function ji(){return(ji=(0,c.Z)(function*(y,f,g){var v;const{BuildInfo:T}=ka();z(f.sessionId,"AuthEvent did not contain a session ID");const R=yield l0(f.sessionId),q={};return Fr()?q.ibi=T.packageName:Ir()?q.apn=T.packageName:Se(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=R,wi(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function gd(){return(gd=(0,c.Z)(function*(y){const{BuildInfo:f}=ka(),g={};Fr()?g.iosBundleId=f.packageName:Ir()?g.androidPackageName=f.packageName:Se(y,"operation-not-supported-in-this-environment"),yield Ah(y,g)})).apply(this,arguments)}function zp(){return(zp=(0,c.Z)(function*(y,f,g){const{cordova:v}=ka();let T=()=>{};try{yield new Promise((R,q)=>{let he=null;function Fe(){var lt;R();const En=null===(lt=v.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof En&&En(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ye(){he||(he=window.setTimeout(()=>{q(Ee(y,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}f.addPassiveListener(Fe),document.addEventListener("resume",Ye,!1),Ir()&&document.addEventListener("visibilitychange",ct,!1),T=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ct,!1),he&&window.clearTimeout(he)}})}finally{T()}})).apply(this,arguments)}function l0(y){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,c.Z)(function*(y){const f=Oh(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Oh(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function cy(y){(0,ie._registerComponent)(new ue.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:R,authDomain:q}=v.options;return((he,Fe)=>{B(R&&!R.includes(":"),"invalid-api-key",{appName:he.name}),B(!(null==q?void 0:q.includes(":")),"argument-error",{appName:he.name});const Ye={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mo(y)},ct=new He(he,Fe,Ye);return function oe(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(ee);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(ct,g),ct})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ue.wA("auth-internal",f=>{const g=ot(f.getProvider("auth").getImmediate());return new qp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(Rh,"0.20.2",function pd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(Rh,"0.20.2","esm2017")}("Browser");class yd extends Sl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function Cu(y){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,c.Z)(function*(y){const f=yield Vl()._get(Du(y));return f&&(yield Vl()._remove(Du(y))),f})).apply(this,arguments)}function Kp(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function Vl(){return ee(Tr)}function Du(y){return Rn("authEvent",y.config.apiKey,y.name)}function $r(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Ra(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Qo(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Xp(y=(0,O.z$)()){return!("file:"!==Qo()&&"ionic:"!==Qo()&&"capacitor:"!==Qo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lh(){try{const y=self.localStorage,f=jo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function wd(y=(0,O.z$)()){return function Tu(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function zn(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Ed()&&(0,O.hl)()}return!1}function Ed(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function tr(){return(function Jp(){return"http:"===Qo()||"https:"===Qo()}()||(0,O.ru)()||Xp())&&!function Fh(){return(0,O.b$)()||(0,O.UG)()}()&&Lh()&&!Ed()}function Au(){return Xp()&&"undefined"!=typeof document}function Bl(){return(Bl=(0,c.Z)(function*(){return!!Au()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Hr={LOCAL:"local",NONE:"none",SESSION:"session"},Jo=B,Uh="persistence";function Na(y){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,c.Z)(function*(y){yield y._initializationPromise;const f=bd(),g=Rn(Uh,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function bd(){var y;try{return(null===(y=function yy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const vy=B;class $i{constructor(){this.browserResolver=ee(class ly{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dn,this._completeRedirectFn=Bi,this._overrideRedirectResult=D}_openPopup(f,g,v,T){var R=this;return(0,c.Z)(function*(){var q;z(null===(q=R.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const he=wi(f,g,v,Ne(),T);return function Rl(y,f,g,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let he="";const Fe=Object.assign(Object.assign({},ld),{width:v.toString(),height:T.toString(),top:R,left:q}),Ye=(0,O.z$)().toLowerCase();g&&(he=ha(Ye)?"_blank":g),da(Ye)&&(f=f||"http://localhost",Fe.scrollbars="yes");const ct=Object.entries(Fe).reduce((En,[oi,Su])=>`${En}${oi}=${Su},`,"");if(function Js(y=(0,O.z$)()){var f;return Fr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ye)&&"_self"!==he)return function oy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",he),new Hp(null);const lt=window.open(f||"",he,ct);B(lt,y,"popup-blocked");try{lt.focus()}catch(En){}return new Hp(lt)}(f,he,jo())})()}_openRedirect(f,g,v,T){var R=this;return(0,c.Z)(function*(){return yield R._originValidation(f),function xs(y){vn().location.href=y}(wi(f,g,v,Ne(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(z(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const v=yield function o0(y){return _o.apply(this,arguments)}(f),T=new Sl(f);return v.register("authEvent",R=>(B(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Nl,{type:Nl},T=>{var R;const q=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Nl];void 0!==q&&g(!!q),Se(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ml(y){return xh.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ws()||Ja()||Fr()}}),this.cordovaResolver=ee(class Yp{constructor(){this._redirectPersistence=Dn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bi,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,c.Z)(function*(){const v=f._key();let T=g.eventManagers.get(v);return T||(T=new yd(f),g.eventManagers.set(v,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){Se(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,T){var R=this;return(0,c.Z)(function*(){!function Iu(y){var f,g,v,T,R,q,he,Fe,Ye,ct;const lt=ka();B("function"==typeof(null===(f=null==lt?void 0:lt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(g=null==lt?void 0:lt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(R=null===(T=null===(v=null==lt?void 0:lt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(Fe=null===(he=null===(q=null==lt?void 0:lt.cordova)||void 0===q?void 0:q.plugins)||void 0===he?void 0:he.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(ct=null===(Ye=null==lt?void 0:lt.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ct?void 0:ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield R._initialize(f);yield q.initialized(),q.resetRedirect(),function I(){hr.clear()}(),yield R._originValidation(f);const he=function _d(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Kp(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(f,v,T);yield function Wp(y,f){return Vl()._set(Du(y),f)}(f,he);const Fe=yield function Nh(y,f,g){return ji.apply(this,arguments)}(f,he,g),Ye=yield function md(y){const{cordova:f}=ka();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function xc(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Fe);return function wo(y,f,g){return zp.apply(this,arguments)}(f,q,Ye)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Pl(y){return gd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=ka(),q=setTimeout((0,c.Z)(function*(){yield Cu(f),g.onEvent(Ra())}),500),he=function(){var ct=(0,c.Z)(function*(lt){clearTimeout(q);const En=yield Cu(f);let oi=null;En&&(null==lt?void 0:lt.url)&&(oi=function hy(y,f){var g,v;const T=function Ul(y){const f=$r(y),g=f.link?decodeURIComponent(f.link):void 0,v=$r(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return $r(T).link||T||v||g||y}(f);if(T.includes("/__/auth/callback")){const R=$r(T),q=R.firebaseError?function fy(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,he=null===(v=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Fe=he?Ee(he):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(En,lt.url)),g.onEvent(oi||Ra())});return function(En){return ct.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,he);const Fe=T,Ye=`${R.packageName.toLowerCase()}://`;ka().handleOpenURL=function(){var ct=(0,c.Z)(function*(lt){if(lt.toLowerCase().startsWith(Ye)&&he({url:lt}),"function"==typeof Fe)try{Fe(lt)}catch(En){console.error(En)}});return function(lt){return ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Dn,this._completeRedirectFn=Bi,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,T){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,v,T)})()}_openRedirect(f,g,v,T){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,v,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Au()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Vh(){return Bl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Id(y){return y.unwrap()}function Ey(y){return eg(y)}function eg(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ps.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=Uc;break;case"facebook.com":v=Ro;break;case"github.com":v=Eh;break;case"twitter.com":v=Bc;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:he,nonce:Fe}=f;return R||q||T||he?he?g.startsWith("saml.")?to._create(g,he):es._fromParams({providerId:g,signInMethod:g,pendingToken:he,idToken:T,accessToken:R}):new Ri(g).credential({idToken:T,accessToken:R,rawNonce:Fe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function si(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function Cd(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new by(y,function Pn(y,f){var g;const v=(0,O.m9)(y),T=f;return B(f.customData.operationType,v,"argument-error"),B(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),ao._fromError(v,T)}(y,f));else if(v){const T=eg(f),R=f;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Ey(g),additionalUserInfo:$n(g),user:hs.getOrCreate(T)}})}function jh(y,f){return $h.apply(this,arguments)}function $h(){return($h=(0,c.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>si(y,g.confirm(v))}})).apply(this,arguments)}class by{constructor(f,g){this.resolver=g,this.auth=function wy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return si(Id(this.auth),this.resolver.resolveSignIn(f))}}class hs{constructor(f){this._delegate=f,this.multiFactor=function Lp(y){const f=(0,O.m9)(y);return pu.has(f)||pu.set(f,Bo._fromUser(f)),pu.get(f)}(f)}static getOrCreate(f){return hs.USER_MAP.has(f)||hs.USER_MAP.set(f,new hs(f)),hs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return si(g.auth,Xn(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,c.Z)(function*(){return jh(v.auth,function yu(y,f,g){return td.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return si(g.auth,function rd(y,f,g){return Ui.apply(this,arguments)}(g._delegate,f,$i))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Na(ot(g.auth)),function $t(y,f,g){return function It(y,f,g){return Sn.apply(this,arguments)}(y,f,g)}(g._delegate,f,$i)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return si(g.auth,ts(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return jh(this.auth,function Dh(y,f,g){return Ar.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return si(this.auth,function _i(y,f,g){return _u.apply(this,arguments)}(this._delegate,f,$i))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Na(ot(g.auth)),function ze(y,f,g){return function tt(y,f,g){return ut.apply(this,arguments)}(y,f,g)}(g._delegate,f,$i)})()}sendEmailVerification(f){return function gi(y,f){return _l.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function bh(y,f){return en.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Hc(y,f){return hu((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Gc(y,f){return hu((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function qo(y,f){return as.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function cu(y,f){return du.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function uu(y,f,g){return lu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}hs.USER_MAP=new WeakMap;const $l=B;let tg=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;$l(T,"invalid-api-key",{appName:g.name}),$l(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?$i:void 0;this._delegate=v.initialize({options:{persistence:Iy(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Ae),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Vr(y,f,g){const v=ot(y);B(v._canInitEmulator,v,"emulator-config-failed"),B(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=Ai(f),{host:q,port:he}=function In(y){const f=Ai(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:Si(v.substr(R.length+1))}}{const[R,q]=v.split(":");return{host:R,port:Si(q)}}}(f);v.config.emulator={url:`${R}//${q}${null===he?"":`:${he}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:he,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function sn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function Lo(y,f){return Te.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Pt(this._delegate,g)}confirmPasswordReset(g,v){return function su(y,f,g){return pl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,c.Z)(function*(){return si(T._delegate,function io(y,f,g){return ti.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function au(y,f){return As.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function $c(y,f){const g=nu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){$l(tr(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function qn(y,f){return cs.apply(this,arguments)}(g._delegate,$i);return v?si(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Qp(y,f){ot(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:R,error:q,complete:he}=ng(g,v,T);return this._delegate.onAuthStateChanged(R,q,he)}onIdTokenChanged(g,v,T){const{next:R,error:q,complete:he}=ng(g,v,T);return this._delegate.onIdTokenChanged(R,q,he)}sendSignInLinkToEmail(g,v){return function ml(y,f,g){return yl.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function fl(y,f,g){return iu.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,c.Z)(function*(){let T;switch(function _y(y,f){Jo(Object.values(Hr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Jo(f!==Hr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Jo(f===Hr.NONE,y,"unsupported-persistence-type"):Ed()?Jo(f===Hr.NONE||f===Hr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Jo(f===Hr.NONE||Lh(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Hr.SESSION:T=Dn;break;case Hr.LOCAL:T=(yield ee(po)._isAvailable())?po:Tr;break;case Hr.NONE:T=vt;break;default:return Se("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return si(this._delegate,function jc(y){return ll.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return si(this._delegate,un(this._delegate,g))}signInWithCustomToken(g){return si(this._delegate,function Fo(y,f){return pt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return si(this._delegate,function gl(y,f,g){return un((0,O.m9)(y),Vc.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return si(this._delegate,function Np(y,f,g){return ns.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return jh(this._delegate,function An(y,f,g){return Aa.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,c.Z)(function*(){return $l(tr(),v._delegate,"operation-not-supported-in-this-environment"),si(v._delegate,function Up(y,f,g){return ls.apply(this,arguments)}(v._delegate,g,$i))})()}signInWithRedirect(g){var v=this;return(0,c.Z)(function*(){return $l(tr(),v._delegate,"operation-not-supported-in-this-environment"),yield Na(v._delegate),function Y(y,f,g){return function te(y,f,g){return pe.apply(this,arguments)}(y,f,g)}(v._delegate,g,$i)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function an(y,f){return ou.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Hr,y})();function ng(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const T=v;return{next:q=>T(q&&hs.getOrCreate(q)),error:f,complete:g}}function Iy(y,f){const g=function jl(y,f){const g=bd();if(!g)return[];const v=Rn(Uh,y,f);switch(g.getItem(v)){case Hr.NONE:return[vt];case Hr.LOCAL:return[po,Dn];case Hr.SESSION:return[Dn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(po)&&g.push(po),"undefined"!=typeof window)for(const v of[Tr,Dn])g.includes(v)||g.push(v);return g.includes(vt)||g.push(vt),g}class Hh{constructor(){this.providerId="phone",this._delegate=new Ps(Id(J.Z.auth()))}static credential(f,g){return Ps.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Hh.PHONE_SIGN_IN_METHOD=Ps.PHONE_SIGN_IN_METHOD,Hh.PROVIDER_ID=Ps.PROVIDER_ID;const rg=B;class c0{constructor(f,g,v=J.Z.app()){var T;rg(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new ed(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Oa(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new tg(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vc,FacebookAuthProvider:Ro,GithubAuthProvider:Eh,GoogleAuthProvider:Uc,OAuthProvider:Ri,SAMLAuthProvider:Cr,PhoneAuthProvider:Hh,PhoneMultiFactorGenerator:u0,RecaptchaVerifier:c0,TwitterAuthProvider:Bc,Auth:tg,AuthCredential:fi,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(J.Z)},9751:(qe,me,N)=>{N.d(me,{y:()=>se});var c=N(930),J=N(727),O=N(8822),ie=N(9635),ne=N(2416),de=N(576),ue=N(2806);let se=(()=>{class K{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const Ae=new K;return Ae.source=this,Ae.operator=xe,Ae}subscribe(xe,Ae,Qe){const ye=function j(K){return K&&K instanceof c.Lv||function $(K){return K&&(0,de.m)(K.next)&&(0,de.m)(K.error)&&(0,de.m)(K.complete)}(K)&&(0,J.Nn)(K)}(xe)?xe:new c.Hp(xe,Ae,Qe);return(0,ue.x)(()=>{const{operator:be,source:We}=this;ye.add(be?be.call(ye,We):We?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(xe){try{return this._subscribe(xe)}catch(Ae){xe.error(Ae)}}forEach(xe,Ae){return new(Ae=le(Ae))((Qe,ye)=>{const be=new c.Hp({next:We=>{try{xe(We)}catch(et){ye(et),be.unsubscribe()}},error:ye,complete:Qe});this.subscribe(be)})}_subscribe(xe){var Ae;return null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(xe)}[O.L](){return this}pipe(...xe){return(0,ie.U)(xe)(this)}toPromise(xe){return new(xe=le(xe))((Ae,Qe)=>{let ye;this.subscribe(be=>ye=be,be=>Qe(be),()=>Ae(ye))})}}return K.create=Be=>new K(Be),K})();function le(K){var Be;return null!==(Be=null!=K?K:ne.v.Promise)&&void 0!==Be?Be:Promise}},7579:(qe,me,N)=>{N.d(me,{x:()=>ue});var c=N(9751),J=N(727);const ie=(0,N(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=N(8737),de=N(2806);let ue=(()=>{class le extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new se(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new ie}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Be,observers:xe}=this;return K||Be?J.Lc:(this.currentObservers=null,xe.push(j),new J.w0(()=>{this.currentObservers=null,(0,ne.P)(xe,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Be,isStopped:xe}=this;K?j.error(Be):xe&&j.complete()}asObservable(){const j=new c.y;return j.source=this,j}}return le.create=($,j)=>new se($,j),le})();class se extends ue{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,$)}error($){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==K?K:J.Lc}}},930:(qe,me,N)=>{N.d(me,{Hp:()=>Qe,Lv:()=>K});var c=N(576),J=N(727),O=N(2416),ie=N(7849),ne=N(5032);const de=le("C",void 0,void 0);function le(Se,Ee,Ie){return{kind:Se,value:Ee,error:Ie}}var $=N(3410),j=N(2806);class K extends J.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,J.Nn)(Ee)&&Ee.add(this)):this.destination=et}static create(Ee,Ie,Ue){return new Qe(Ee,Ie,Ue)}next(Ee){this.isStopped?We(function se(Se){return le("N",Se,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?We(function ue(Se){return le("E",void 0,Se)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?We(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function xe(Se,Ee){return Be.call(Se,Ee)}class Ae{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch(Ue){ye(Ue)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch(Ue){ye(Ue)}else ye(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){ye(Ie)}}}class Qe extends K{constructor(Ee,Ie,Ue){let Ve;if(super(),(0,c.m)(Ee)||!Ee)Ve={next:null!=Ee?Ee:void 0,error:null!=Ie?Ie:void 0,complete:null!=Ue?Ue:void 0};else{let B;this&&O.v.useDeprecatedNextContext?(B=Object.create(Ee),B.unsubscribe=()=>this.unsubscribe(),Ve={next:Ee.next&&xe(Ee.next,B),error:Ee.error&&xe(Ee.error,B),complete:Ee.complete&&xe(Ee.complete,B)}):Ve=Ee}this.destination=new Ae(Ve)}}function ye(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Se):(0,ie.h)(Se)}function We(Se,Ee){const{onStoppedNotification:Ie}=O.v;Ie&&$.z.setTimeout(()=>Ie(Se,Ee))}const et={closed:!0,next:ne.Z,error:function be(Se){throw Se},complete:ne.Z}},727:(qe,me,N)=>{N.d(me,{Lc:()=>de,w0:()=>ne,Nn:()=>ue});var c=N(576);const O=(0,N(3888).d)(le=>function(j){le(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Be)=>`${Be+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ie=N(8737);class ne{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const xe of j)xe.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,c.m)(K))try{K()}catch(xe){$=xe instanceof O?xe.errors:[xe]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const xe of Be)try{se(xe)}catch(Ae){$=null!=$?$:[],Ae instanceof O?$=[...$,...Ae.errors]:$.push(Ae)}}if($)throw new O($)}}add($){var j;if($&&$!==this)if(this.closed)se($);else{if($ instanceof ne){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,ie.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,ie.P)(j,$),$ instanceof ne&&$._removeParent(this)}}ne.EMPTY=(()=>{const le=new ne;return le.closed=!0,le})();const de=ne.EMPTY;function ue(le){return le instanceof ne||le&&"closed"in le&&(0,c.m)(le.remove)&&(0,c.m)(le.add)&&(0,c.m)(le.unsubscribe)}function se(le){(0,c.m)(le)?le():le.unsubscribe()}},2416:(qe,me,N)=>{N.d(me,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(qe,me,N)=>{N.d(me,{E:()=>J});const J=new(N(9751).y)(ne=>ne.complete())},8996:(qe,me,N)=>{N.d(me,{D:()=>Ee});var c=N(8421),J=N(5363),O=N(9468),de=N(9751),se=N(2202),le=N(576),$=N(9672);function K(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new de.y(Ve=>{(0,$.f)(Ve,Ue,()=>{const B=Ie[Symbol.asyncIterator]();(0,$.f)(Ve,Ue,()=>{B.next().then(we=>{we.done?Ve.complete():Ve.next(we.value)})},0,!0)})})}var Be=N(3670),xe=N(8239),Ae=N(1144),Qe=N(6495),ye=N(2206),be=N(4532),We=N(3260);function Ee(Ie,Ue){return Ue?function Se(Ie,Ue){if(null!=Ie){if((0,Be.c)(Ie))return function ie(Ie,Ue){return(0,c.Xf)(Ie).pipe((0,O.R)(Ue),(0,J.Q)(Ue))}(Ie,Ue);if((0,Ae.z)(Ie))return function ue(Ie,Ue){return new de.y(Ve=>{let B=0;return Ue.schedule(function(){B===Ie.length?Ve.complete():(Ve.next(Ie[B++]),Ve.closed||this.schedule())})})}(Ie,Ue);if((0,xe.t)(Ie))return function ne(Ie,Ue){return(0,c.Xf)(Ie).pipe((0,O.R)(Ue),(0,J.Q)(Ue))}(Ie,Ue);if((0,ye.D)(Ie))return K(Ie,Ue);if((0,Qe.T)(Ie))return function j(Ie,Ue){return new de.y(Ve=>{let B;return(0,$.f)(Ve,Ue,()=>{B=Ie[se.h](),(0,$.f)(Ve,Ue,()=>{let we,z;try{({value:we,done:z}=B.next())}catch(re){return void Ve.error(re)}z?Ve.complete():Ve.next(we)},0,!0)}),()=>(0,le.m)(null==B?void 0:B.return)&&B.return()})}(Ie,Ue);if((0,We.L)(Ie))return function et(Ie,Ue){return K((0,We.Q)(Ie),Ue)}(Ie,Ue)}throw(0,be.z)(Ie)}(Ie,Ue):(0,c.Xf)(Ie)}},8421:(qe,me,N)=>{N.d(me,{Xf:()=>Be});var c=N(655),J=N(1144),O=N(8239),ie=N(9751),ne=N(3670),de=N(2206),ue=N(4532),se=N(6495),le=N(3260),$=N(576),j=N(7849),K=N(8822);function Be(Se){if(Se instanceof ie.y)return Se;if(null!=Se){if((0,ne.c)(Se))return function xe(Se){return new ie.y(Ee=>{const Ie=Se[K.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,J.z)(Se))return function Ae(Se){return new ie.y(Ee=>{for(let Ie=0;Ie<Se.length&&!Ee.closed;Ie++)Ee.next(Se[Ie]);Ee.complete()})}(Se);if((0,O.t)(Se))return function Qe(Se){return new ie.y(Ee=>{Se.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,j.h)})}(Se);if((0,de.D)(Se))return be(Se);if((0,se.T)(Se))return function ye(Se){return new ie.y(Ee=>{for(const Ie of Se)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(Se);if((0,le.L)(Se))return function We(Se){return be((0,le.Q)(Se))}(Se)}throw(0,ue.z)(Se)}function be(Se){return new ie.y(Ee=>{(function et(Se,Ee){var Ie,Ue,Ve,B;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,c.KL)(Se);!(Ue=yield Ie.next()).done;)if(Ee.next(Ue.value),Ee.closed)return}catch(we){Ve={error:we}}finally{try{Ue&&!Ue.done&&(B=Ie.return)&&(yield B.call(Ie))}finally{if(Ve)throw Ve.error}}Ee.complete()})})(Se,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(qe,me,N)=>{N.d(me,{T:()=>de});var c=N(8189),J=N(8421),O=N(515),ie=N(3269),ne=N(8996);function de(...ue){const se=(0,ie.yG)(ue),le=(0,ie._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,J.Xf)($[0]):(0,c.J)(le)((0,ne.D)($,se)):O.E}},5403:(qe,me,N)=>{N.d(me,{x:()=>J});var c=N(930);function J(ie,ne,de,ue,se){return new O(ie,ne,de,ue,se)}class O extends c.Lv{constructor(ne,de,ue,se,le,$){super(ne),this.onFinalize=le,this.shouldUnsubscribe=$,this._next=de?function(j){try{de(j)}catch(K){ne.error(K)}}:super._next,this._error=se?function(j){try{se(j)}catch(K){ne.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(qe,me,N)=>{N.d(me,{U:()=>O});var c=N(4482),J=N(5403);function O(ie,ne){return(0,c.e)((de,ue)=>{let se=0;de.subscribe((0,J.x)(ue,le=>{ue.next(ie.call(ne,le,se++))}))})}},8189:(qe,me,N)=>{N.d(me,{J:()=>O});var c=N(5577),J=N(4671);function O(ie=1/0){return(0,c.z)(J.y,ie)}},5577:(qe,me,N)=>{N.d(me,{z:()=>se});var c=N(4004),J=N(8421),O=N(4482),ie=N(9672),ne=N(5403),ue=N(576);function se(le,$,j=1/0){return(0,ue.m)($)?se((K,Be)=>(0,c.U)((xe,Ae)=>$(K,xe,Be,Ae))((0,J.Xf)(le(K,Be))),j):("number"==typeof $&&(j=$),(0,O.e)((K,Be)=>function de(le,$,j,K,Be,xe,Ae,Qe){const ye=[];let be=0,We=0,et=!1;const Se=()=>{et&&!ye.length&&!be&&$.complete()},Ee=Ue=>be<K?Ie(Ue):ye.push(Ue),Ie=Ue=>{xe&&$.next(Ue),be++;let Ve=!1;(0,J.Xf)(j(Ue,We++)).subscribe((0,ne.x)($,B=>{null==Be||Be(B),xe?Ee(B):$.next(B)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(be--;ye.length&&be<K;){const B=ye.shift();Ae?(0,ie.f)($,Ae,()=>Ie(B)):Ie(B)}Se()}catch(B){$.error(B)}}))};return le.subscribe((0,ne.x)($,Ee,()=>{et=!0,Se()})),()=>{null==Qe||Qe()}}(K,Be,le,j)))}},5363:(qe,me,N)=>{N.d(me,{Q:()=>ie});var c=N(9672),J=N(4482),O=N(5403);function ie(ne,de=0){return(0,J.e)((ue,se)=>{ue.subscribe((0,O.x)(se,le=>(0,c.f)(se,ne,()=>se.next(le),de),()=>(0,c.f)(se,ne,()=>se.complete(),de),le=>(0,c.f)(se,ne,()=>se.error(le),de)))})}},3099:(qe,me,N)=>{N.d(me,{B:()=>de});var c=N(8996),J=N(5698),O=N(7579),ie=N(930),ne=N(4482);function de(se={}){const{connector:le=(()=>new O.x),resetOnError:$=!0,resetOnComplete:j=!0,resetOnRefCountZero:K=!0}=se;return Be=>{let xe=null,Ae=null,Qe=null,ye=0,be=!1,We=!1;const et=()=>{null==Ae||Ae.unsubscribe(),Ae=null},Se=()=>{et(),xe=Qe=null,be=We=!1},Ee=()=>{const Ie=xe;Se(),null==Ie||Ie.unsubscribe()};return(0,ne.e)((Ie,Ue)=>{ye++,!We&&!be&&et();const Ve=Qe=null!=Qe?Qe:le();Ue.add(()=>{ye--,0===ye&&!We&&!be&&(Ae=ue(Ee,K))}),Ve.subscribe(Ue),xe||(xe=new ie.Hp({next:B=>Ve.next(B),error:B=>{We=!0,et(),Ae=ue(Se,$,B),Ve.error(B)},complete:()=>{be=!0,et(),Ae=ue(Se,j),Ve.complete()}}),(0,c.D)(Ie).subscribe(xe))})(Be)}}function ue(se,le,...$){return!0===le?(se(),null):!1===le?null:le(...$).pipe((0,J.q)(1)).subscribe(()=>se())}},9468:(qe,me,N)=>{N.d(me,{R:()=>J});var c=N(4482);function J(O,ie=0){return(0,c.e)((ne,de)=>{de.add(O.schedule(()=>ne.subscribe(de),ie))})}},5698:(qe,me,N)=>{N.d(me,{q:()=>ie});var c=N(515),J=N(4482),O=N(5403);function ie(ne){return ne<=0?()=>c.E:(0,J.e)((de,ue)=>{let se=0;de.subscribe((0,O.x)(ue,le=>{++se<=ne&&(ue.next(le),ne<=se&&ue.complete())}))})}},8505:(qe,me,N)=>{N.d(me,{b:()=>ne});var c=N(576),J=N(4482),O=N(5403),ie=N(4671);function ne(de,ue,se){const le=(0,c.m)(de)||ue||se?{next:de,error:ue,complete:se}:de;return le?(0,J.e)(($,j)=>{var K;null===(K=le.subscribe)||void 0===K||K.call(le);let Be=!0;$.subscribe((0,O.x)(j,xe=>{var Ae;null===(Ae=le.next)||void 0===Ae||Ae.call(le,xe),j.next(xe)},()=>{var xe;Be=!1,null===(xe=le.complete)||void 0===xe||xe.call(le),j.complete()},xe=>{var Ae;Be=!1,null===(Ae=le.error)||void 0===Ae||Ae.call(le,xe),j.error(xe)},()=>{var xe,Ae;Be&&(null===(xe=le.unsubscribe)||void 0===xe||xe.call(le)),null===(Ae=le.finalize)||void 0===Ae||Ae.call(le)}))}):ie.y}},4408:(qe,me,N)=>{N.d(me,{o:()=>ne});var c=N(727);class J extends c.w0{constructor(ue,se){super()}schedule(ue,se=0){return this}}const O={setInterval(de,ue,...se){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(de,ue,...se):setInterval(de,ue,...se)},clearInterval(de){const{delegate:ue}=O;return((null==ue?void 0:ue.clearInterval)||clearInterval)(de)},delegate:void 0};var ie=N(8737);class ne extends J{constructor(ue,se){super(ue,se),this.scheduler=ue,this.work=se,this.pending=!1}schedule(ue,se=0){if(this.closed)return this;this.state=ue;const le=this.id,$=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId($,le,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId($,this.id,se),this}requestAsyncId(ue,se,le=0){return O.setInterval(ue.flush.bind(ue,this),le)}recycleAsyncId(ue,se,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return se;O.clearInterval(se)}execute(ue,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ue,se);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,se){let $,le=!1;try{this.work(ue)}catch(j){le=!0,$=j||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:se}=this,{actions:le}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(le,this),null!=ue&&(this.id=this.recycleAsyncId(se,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(qe,me,N)=>{N.d(me,{v:()=>O});var c=N(6063);class J{constructor(ne,de=J.now){this.schedulerActionCtor=ne,this.now=de}schedule(ne,de=0,ue){return new this.schedulerActionCtor(this,ne).schedule(ue,de)}}J.now=c.l.now;class O extends J{constructor(ne,de=J.now){super(ne,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:de}=this;if(this._active)return void de.push(ne);let ue;this._active=!0;do{if(ue=ne.execute(ne.state,ne.delay))break}while(ne=de.shift());if(this._active=!1,ue){for(;ne=de.shift();)ne.unsubscribe();throw ue}}}},4986:(qe,me,N)=>{N.d(me,{P:()=>ie,z:()=>O});var c=N(4408);const O=new(N(7565).v)(c.o),ie=O},6063:(qe,me,N)=>{N.d(me,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(qe,me,N)=>{N.d(me,{z:()=>c});const c={setTimeout(J,O,...ie){const{delegate:ne}=c;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(J,O,...ie):setTimeout(J,O,...ie)},clearTimeout(J){const{delegate:O}=c;return((null==O?void 0:O.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(qe,me,N)=>{N.d(me,{h:()=>J});const J=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(qe,me,N)=>{N.d(me,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(qe,me,N)=>{N.d(me,{_6:()=>de,jO:()=>ie,yG:()=>ne});var c=N(576),J=N(3532);function O(ue){return ue[ue.length-1]}function ie(ue){return(0,c.m)(O(ue))?ue.pop():void 0}function ne(ue){return(0,J.K)(O(ue))?ue.pop():void 0}function de(ue,se){return"number"==typeof O(ue)?ue.pop():se}},8737:(qe,me,N)=>{function c(J,O){if(J){const ie=J.indexOf(O);0<=ie&&J.splice(ie,1)}}N.d(me,{P:()=>c})},3888:(qe,me,N)=>{function c(J){const ie=J(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}N.d(me,{d:()=>c})},2806:(qe,me,N)=>{N.d(me,{O:()=>ie,x:()=>O});var c=N(2416);let J=null;function O(ne){if(c.v.useDeprecatedSynchronousErrorHandling){const de=!J;if(de&&(J={errorThrown:!1,error:null}),ne(),de){const{errorThrown:ue,error:se}=J;if(J=null,ue)throw se}}else ne()}function ie(ne){c.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ne)}},9672:(qe,me,N)=>{function c(J,O,ie,ne=0,de=!1){const ue=O.schedule(function(){ie(),de?J.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(J.add(ue),!de)return ue}N.d(me,{f:()=>c})},4671:(qe,me,N)=>{function c(J){return J}N.d(me,{y:()=>c})},1144:(qe,me,N)=>{N.d(me,{z:()=>c});const c=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(qe,me,N)=>{N.d(me,{D:()=>J});var c=N(576);function J(O){return Symbol.asyncIterator&&(0,c.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(qe,me,N)=>{function c(J){return"function"==typeof J}N.d(me,{m:()=>c})},3670:(qe,me,N)=>{N.d(me,{c:()=>O});var c=N(8822),J=N(576);function O(ie){return(0,J.m)(ie[c.L])}},6495:(qe,me,N)=>{N.d(me,{T:()=>O});var c=N(2202),J=N(576);function O(ie){return(0,J.m)(null==ie?void 0:ie[c.h])}},8239:(qe,me,N)=>{N.d(me,{t:()=>J});var c=N(576);function J(O){return(0,c.m)(null==O?void 0:O.then)}},3260:(qe,me,N)=>{N.d(me,{L:()=>ie,Q:()=>O});var c=N(655),J=N(576);function O(ne){return(0,c.FC)(this,arguments,function*(){const ue=ne.getReader();try{for(;;){const{value:se,done:le}=yield(0,c.qq)(ue.read());if(le)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(se)}}finally{ue.releaseLock()}})}function ie(ne){return(0,J.m)(null==ne?void 0:ne.getReader)}},3532:(qe,me,N)=>{N.d(me,{K:()=>J});var c=N(576);function J(O){return O&&(0,c.m)(O.schedule)}},4482:(qe,me,N)=>{N.d(me,{A:()=>J,e:()=>O});var c=N(576);function J(ie){return(0,c.m)(null==ie?void 0:ie.lift)}function O(ie){return ne=>{if(J(ne))return ne.lift(function(de){try{return ie(de,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(qe,me,N)=>{function c(){}N.d(me,{Z:()=>c})},9635:(qe,me,N)=>{N.d(me,{U:()=>O,z:()=>J});var c=N(4671);function J(...ie){return O(ie)}function O(ie){return 0===ie.length?c.y:1===ie.length?ie[0]:function(de){return ie.reduce((ue,se)=>se(ue),de)}}},7849:(qe,me,N)=>{N.d(me,{h:()=>O});var c=N(2416),J=N(3410);function O(ie){J.z.setTimeout(()=>{const{onUnhandledError:ne}=c.v;if(!ne)throw ie;ne(ie)})}},4532:(qe,me,N)=>{function c(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(me,{z:()=>c})},655:(qe,me,N)=>{function ie(z,re){var ee={};for(var ge in z)Object.prototype.hasOwnProperty.call(z,ge)&&re.indexOf(ge)<0&&(ee[ge]=z[ge]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(ge=Object.getOwnPropertySymbols(z);oe<ge.length;oe++)re.indexOf(ge[oe])<0&&Object.prototype.propertyIsEnumerable.call(z,ge[oe])&&(ee[ge[oe]]=z[ge[oe]])}return ee}function se(z,re,ee,ge){return new(ee||(ee=Promise))(function(Ne,at){function Bt(Kt){try{Ge(ge.next(Kt))}catch(mn){at(mn)}}function Ft(Kt){try{Ge(ge.throw(Kt))}catch(mn){at(mn)}}function Ge(Kt){Kt.done?Ne(Kt.value):function oe(Ne){return Ne instanceof ee?Ne:new ee(function(at){at(Ne)})}(Kt.value).then(Bt,Ft)}Ge((ge=ge.apply(z,re||[])).next())})}function ye(z){return this instanceof ye?(this.v=z,this):new ye(z)}function be(z,re,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ge=ee.apply(z,re||[]),Ne=[];return oe={},at("next"),at("throw"),at("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function at(Jt){ge[Jt]&&(oe[Jt]=function(qt){return new Promise(function(wr,Ht){Ne.push([Jt,qt,wr,Ht])>1||Bt(Jt,qt)})})}function Bt(Jt,qt){try{!function Ft(Jt){Jt.value instanceof ye?Promise.resolve(Jt.value.v).then(Ge,Kt):mn(Ne[0][2],Jt)}(ge[Jt](qt))}catch(wr){mn(Ne[0][3],wr)}}function Ge(Jt){Bt("next",Jt)}function Kt(Jt){Bt("throw",Jt)}function mn(Jt,qt){Jt(qt),Ne.shift(),Ne.length&&Bt(Ne[0][0],Ne[0][1])}}function et(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,re=z[Symbol.asyncIterator];return re?re.call(z):(z=function K(z){var re="function"==typeof Symbol&&Symbol.iterator,ee=re&&z[re],ge=0;if(ee)return ee.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ge>=z.length&&(z=void 0),{value:z&&z[ge++],done:!z}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ee={},ge("next"),ge("throw"),ge("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ge(Ne){ee[Ne]=z[Ne]&&function(at){return new Promise(function(Bt,Ft){!function oe(Ne,at,Bt,Ft){Promise.resolve(Ft).then(function(Ge){Ne({value:Ge,done:Bt})},at)}(Bt,Ft,(at=z[Ne](at)).done,at.value)})}}}N.d(me,{FC:()=>be,KL:()=>et,_T:()=>ie,mG:()=>se,qq:()=>ye})},5e3:(qe,me,N)=>{N.d(me,{$8M:()=>go,$Z:()=>zg,AFp:()=>uh,ALo:()=>sv,AaK:()=>se,AsE:()=>Mf,BQk:()=>Uu,CHM:()=>Vo,CRH:()=>XE,CZH:()=>Ju,CqO:()=>ic,DdM:()=>NE,EJc:()=>nD,EpF:()=>Kg,F$t:()=>Cf,F4k:()=>Yg,FYo:()=>gc,FiY:()=>fr,G48:()=>Sb,GfV:()=>_m,Gpc:()=>j,Hsn:()=>C_,JOm:()=>R,LFG:()=>tt,LSH:()=>Ra,Lbi:()=>eD,MAs:()=>lw,NdJ:()=>bf,O4$:()=>zc,OlP:()=>hn,Oqu:()=>oc,PXZ:()=>el,Q6J:()=>Ld,QGY:()=>I_,Qsj:()=>Zs,R0b:()=>gs,RDi:()=>cl,Rgc:()=>Wa,SBq:()=>pc,Sil:()=>op,Suo:()=>Sm,TTD:()=>Ri,TgZ:()=>wf,VKq:()=>bm,VLi:()=>bb,W1O:()=>tb,WLB:()=>OE,X6Q:()=>uD,XFs:()=>ft,Xpm:()=>dt,Y36:()=>_f,YKP:()=>nv,YNc:()=>f_,Yjl:()=>ha,Yz7:()=>qt,ZZ4:()=>$m,_Bn:()=>DE,_UZ:()=>b_,_Vd:()=>jf,_c5:()=>Uv,_uU:()=>em,aQg:()=>hh,c2e:()=>Cv,cJS:()=>Ht,cg1:()=>Ln,dDg:()=>Sv,deG:()=>Ch,dqk:()=>Lt,eFA:()=>Nm,ekj:()=>k_,g9A:()=>bv,h0i:()=>qs,hGG:()=>jb,hij:()=>xf,iGM:()=>JE,ifc:()=>jt,ip1:()=>Qu,kL8:()=>om,kcU:()=>Op,lG2:()=>Ja,lcZ:()=>jE,n5z:()=>Tn,n_E:()=>Ku,oAB:()=>br,oxw:()=>If,q4F:()=>vm,qLn:()=>Cd,qOj:()=>Og,qZA:()=>Ef,sBO:()=>Fm,sIi:()=>lf,s_b:()=>Tm,soG:()=>Ka,tBr:()=>vi,tb:()=>Iv,tp0:()=>Ls,uIk:()=>hf,vHH:()=>Ae,vpe:()=>sa,wAp:()=>_t,xp6:()=>My,ynx:()=>rc,z2F:()=>Rv,zSh:()=>Sg,zs3:()=>ta});var c=N(7579),J=N(727),O=N(9751),ie=N(6451),ne=N(3099);function de(i){for(let s in i)if(i[s]===de)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function se(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(se).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=de({__forward_ref__:de});function j(i){return i.__forward_ref__=j,i.toString=function(){return se(this())},i}function K(i){return Be(i)?i():i}function Be(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===j}class Ae extends Error{constructor(s,a){super(function Qe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}function Ee(i,s){const a=s?` in ${s}`:"";throw new Ae(-201,`No provider for ${be(i)} found${a}`)}function Ft(i,s){null==i&&function Ge(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ht(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ot(i){return Ji(i,Ti)||Ji(i,Kr)}function Ji(i,s){return i.hasOwnProperty(s)?i[s]:null}function Er(i){return i&&(i.hasOwnProperty(vs)||i.hasOwnProperty(di))?i[vs]:null}const Ti=de({\u0275prov:de}),vs=de({\u0275inj:de}),Kr=de({ngInjectableDef:de}),di=de({ngInjectorDef:de});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Yr;function yn(i){const s=Yr;return Yr=i,s}function Ys(i,s,a){const l=Ot(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==s?s:void Ee(se(i),"Injector")}function Bn(i){return{toString:i}.toString()}var bn=(()=>((bn=bn||{})[bn.OnPush=0]="OnPush",bn[bn.Default=1]="Default",bn))(),jt=(()=>{return(i=jt||(jt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",jt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt=rt||"undefined"!=typeof global&&global||yt||sr,ar={},L=[],G=de({\u0275cmp:de}),Z=de({\u0275dir:de}),Ce=de({\u0275pipe:de}),H=de({\u0275mod:de}),X=de({\u0275fac:de}),Me=de({__NG_ELEMENT_ID__:de});let Ke=0;function dt(i){return Bn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||jt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,p=i.features,_=i.pipes;return l.id+=Ke++,l.inputs=da(i.inputs,a),l.outputs=da(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(rn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(vt):null,l})}function rn(i){return Nn(i)||function Ir(i){return i[Z]||null}(i)}function vt(i){return function Xi(i){return i[Ce]||null}(i)}const Rn={};function br(i){return Bn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Rn[i.id]=i.type),s})}function da(i,s){if(null==i)return ar;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,s&&(s[d]=p)}return a}const Ja=dt;function ha(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Nn(i){return i[G]||null}function On(i,s){const a=i[H]||null;if(!a&&!0===s)throw new Error(`Type ${se(i)} does not have '\u0275mod' property.`);return a}function Ur(i){return Array.isArray(i)&&"object"==typeof i[1]}function xi(i){return Array.isArray(i)&&!0===i[1]}function tu(i){return 0!=(8&i.flags)}function Mc(i){return 2==(2&i.flags)}function Mi(i){return 1==(1&i.flags)}function ki(i){return null!==i.template}function ol(i){return 0!=(512&i[2])}function lr(i,s){return i.hasOwnProperty(X)?i[X]:null}class eo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ri(){return Ro}function Ro(i){return i.type.prototype.ngOnChanges&&(i.setInput=Eh),Uc}function Uc(){const i=to(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ar)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Eh(i,s,a,l){const d=to(i)||function No(i,s){return i[ya]=s}(i,{previous:ar,current:null}),p=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],b=_[w];p[w]=new eo(b&&b.currentValue,s,_===ar),i[l]=s}Ri.ngInherit=!0;const ya="__ngSimpleChanges__";function to(i){return i[ya]||null}let Po;function cl(i){Po=i}function en(i){return!!i.listen}const _a={createRenderer:(i,s)=>function Ni(){return void 0!==Po?Po:"undefined"!=typeof document?document:void 0}()};function zt(i){for(;Array.isArray(i);)i=i[0];return i}function Ds(i,s){return zt(s[i])}function Jn(i,s){return zt(s[i.index])}function un(i,s){return i.data[s]}function Oi(i,s){return i[s]}function Xn(i,s){const a=s[i];return Ur(a)?a:a[0]}function ro(i){return 4==(4&i[2])}function ts(i){return 128==(128&i[2])}function pi(i,s){return null==s?null:i[s]}function Pi(i){i[18]=0}function Fo(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const pt={lFrame:Uo(null),bindingsEnabled:!0};function su(){return pt.bindingsEnabled}function Te(){return pt.lFrame.lView}function Pt(){return pt.lFrame.tView}function Vo(i){return pt.lFrame.contextLView=i,i[8]}function an(){let i=ou();for(;null!==i&&64===i.type;)i=i.parent;return i}function ou(){return pt.lFrame.currentTNode}function ti(i,s){const a=pt.lFrame;a.currentTNode=i,a.isParent=s}function gl(){return pt.lFrame.isParent}function ml(){pt.lFrame.isParent=!1}function cr(){const i=pt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function As(){return pt.lFrame.bindingIndex++}function gi(i){const s=pt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function lu(i,s){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ba(s)}function ba(i){pt.lFrame.currentDirectiveIndex=i}function du(){return pt.lFrame.currentQueryIndex}function Hc(i){pt.lFrame.currentQueryIndex=i}function Gc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function hu(i,s,a){if(a&ft.SkipSelf){let d=s,p=i;for(;!(d=d.parent,null!==d||a&ft.Host||(d=Gc(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;s=d,i=p}const l=pt.lFrame=Zc();return l.currentTNode=s,l.lView=i,!0}function so(i){const s=Zc(),a=i[1];pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Zc(){const i=pt.lFrame,s=null===i?null:i.child;return null===s?Uo(i):s}function Uo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function qc(){const i=pt.lFrame;return pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const fu=qc;function Br(){const i=qc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function $n(){return pt.lFrame.selectedIndex}function oo(i){pt.lFrame.selectedIndex=i}function Cn(){const i=pt.lFrame;return un(i.tView,i.selectedIndex)}function zc(){pt.lFrame.currentNamespace="svg"}function Op(){!function Wc(){pt.lFrame.currentNamespace=null}()}function Ia(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:x}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function rs(i,s,a){Kc(i,s,3,a)}function ao(i,s,a,l){(3&i[2])===a&&Kc(i,s,a,l)}function Pn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Kc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(w=s[b],null!=l&&w>=l)break}else s[b]<0&&(i[18]+=65536),(w<p||-1==p)&&(Fp(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Fp(i,s,a,l){const d=a[l]<0,p=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Bo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Tr(i,s,a){const l=en(i);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const _=a[d++],w=a[d++],b=a[d++];l?i.setAttribute(s,w,b,_):s.setAttributeNS(_,w,b)}else{const _=p,w=a[++d];Dn(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),d++}}return d}function mi(i){return 3===i||4===i||6===i}function Dn(i){return 64===i.charCodeAt(0)}function Da(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Yc(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Yc(i,s,a,l,d){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function jo(i){return-1!==i}function Ss(i){return 32767&i}function xs(i,s){let a=function vn(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Fi=!0;function gt(i){const s=Fi;return Fi=i,s}let bl=0;function Ms(i,s){const a=lo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,$o(l.data,i),$o(s,null),$o(l.blueprint,null));const d=er(i,s),p=i.injectorIndex;if(jo(d)){const _=Ss(d),w=xs(d,s),b=w[1].data;for(let A=0;A<8;A++)s[p+A]=w[_+A]|b[_+A]}return s[p+8]=d,p}function $o(i,s){i.push(0,0,0,0,0,0,0,0,s)}function lo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function er(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const p=d[1],_=p.type;if(l=2===_?p.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function co(i,s,a){!function Hn(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Me)&&(l=a[Me]),null==l&&(l=a[Me]=bl++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Ho(i,s,a){if(a&ft.Optional)return i;Ee(s,"NodeInjector")}function ks(i,s,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const d=i[9],p=yn(void 0);try{return d?d.get(s,l,a&ft.Optional):Ys(s,l,a&ft.Optional)}finally{yn(p)}}return Ho(l,s,a)}function Go(i,s,a,l=ft.Default,d){if(null!==i){const p=function po(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Me)?i[Me]:void 0;return"number"==typeof s?s>=0?255&s:fo:s}(a);if("function"==typeof p){if(!hu(s,i,l))return l&ft.Host?Ho(d,a,l):ks(s,a,l,d);try{const _=p(l);if(null!=_||l&ft.Optional)return _;Ee(a)}finally{fu()}}else if("number"==typeof p){let _=null,w=lo(i,s),b=-1,A=l&ft.Host?s[16][6]:null;for((-1===w||l&ft.SkipSelf)&&(b=-1===w?er(i,s):s[w+8],-1!==b&&Cl(l,!1)?(_=s[1],w=Ss(b),s=xs(b,s)):w=-1);-1!==w;){const x=s[1];if(Gn(p,w,x.data)){const P=Il(w,s,a,_,l,A);if(P!==Rs)return P}b=s[w+8],-1!==b&&Cl(l,s[1].data[w+8]===A)&&Gn(p,w,s)?(_=x,w=Ss(b),s=xs(b,s)):w=-1}}}return ks(s,a,l,d)}const Rs={};function fo(){return new Ns(an(),Te())}function Il(i,s,a,l,d,p){const _=s[1],w=_.data[i+8],x=Ta(w,_,a,null==l?Mc(w)&&Fi:l!=_&&0!=(3&w.type),d&ft.Host&&p===w);return null!==x?ss(s,_,x,w):Rs}function Ta(i,s,a,l,d){const p=i.providerIndexes,_=s.data,w=1048575&p,b=i.directiveStart,x=p>>20,U=d?w+x:i.directiveEnd;for(let Q=l?w:w+x;Q<U;Q++){const ve=_[Q];if(Q<b&&a===ve||Q>=b&&ve.type===a)return Q}if(d){const Q=_[b];if(Q&&ki(Q)&&Q.type===a)return b}return null}function ss(i,s,a,l){let d=i[a];const p=s.data;if(function pu(i){return i instanceof Bo}(d)){const _=d;_.resolving&&function We(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(p[a]));const w=gt(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?yn(_.injectImpl):null;hu(i,l,ft.Default);try{d=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function iy(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=s.type.prototype;if(l){const _=Ro(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==b&&yn(b),gt(w),_.resolving=!1,fu()}}return d}function Gn(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Cl(i,s){return!(i&ft.Self||i&ft.Host&&s)}class Ns{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Go(this._tNode,this._lView,s,l,a)}}function Tn(i){return Bn(()=>{const s=i.prototype.constructor,a=s[X]||ri(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[X]||ri(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function ri(i){return Be(i)?()=>{const s=ri(K(i));return s&&s()}:lr(i)}function go(i){return function ho(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(mi(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===s)return a[d+1];d+=2}}}return null}(an(),i)}const Li="__parameters__";function yi(i,s,a){return Bn(()=>{const l=function wn(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...p){if(this instanceof d)return l.apply(this,p),this;const _=new d(...p);return w.annotation=_,w;function w(b,A,x){const P=b.hasOwnProperty(Li)?b[Li]:Object.defineProperty(b,Li,{value:[]})[Li];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class hn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ch=new hn("AnalyzeForEntryComponents");function Ar(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Ar(l,s)):s!==i&&s.push(l)}return s}function Sr(i,s){i.forEach(a=>Array.isArray(a)?Sr(a,s):s(a))}function Sa(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function qo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function as(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}function dr(i,s,a){let l=Ko(i,s);return l>=0?i[1|l]=a:(l=~l,function zo(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function xa(i,s){const a=Ko(i,s);if(a>=0)return i[1|a]}function Ko(i,s){return function ls(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?d=p:l=p+1}return~(d<<a)}(i,s,1)}const Fs={},Yo="__NG_DI_FLAG__",Ma="ngTempTokenPath",D=/\n/gm,F="__source",Y=de({provide:String,useValue:de});let te;function pe(i){const s=te;return te=i,s}function ze(i,s=ft.Default){if(void 0===te)throw new Ae(203,"");return null===te?Ys(i,void 0,s):te.get(i,s&ft.Optional?null:void 0,s)}function tt(i,s=ft.Default){return(function cn(){return Yr}()||ze)(K(i),s)}const $t=tt;function It(i){const s=[];for(let a=0;a<i.length;a++){const l=K(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ae(900,"");let d,p=ft.Default;for(let _=0;_<l.length;_++){const w=l[_],b=qn(w);"number"==typeof b?-1===b?d=w.token:p|=b:d=w}s.push(tt(d,p))}else s.push(tt(l))}return s}function Sn(i,s){return i[Yo]=s,i.prototype[Yo]=s,i}function qn(i){return i[Yo]}const vi=Sn(yi("Inject",i=>({token:i})),-1),fr=Sn(yi("Optional"),8),Ls=Sn(yi("SkipSelf"),4);class hd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wi(i){return i instanceof hd?i.changingThisBreaksApplicationSecurity:i}const cy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ka=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var xn=(()=>((xn=xn||{})[xn.NONE=0]="NONE",xn[xn.HTML=1]="HTML",xn[xn.STYLE=2]="STYLE",xn[xn.SCRIPT=3]="SCRIPT",xn[xn.URL=4]="URL",xn[xn.RESOURCE_URL=5]="RESOURCE_URL",xn))();function Ra(i){const s=function Tu(){const i=Te();return i&&i[12]}();return s?s.sanitize(xn.URL,i)||"":function vo(i,s){const a=function Nl(i){return i instanceof hd&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?wi(i):function Ol(i){return(i=String(i)).match(cy)||i.match(ka)?i:"unsafe:"+i}(ye(i))}const Ed="__ngContext__";function tr(i,s){i[Ed]=s}function Vh(i){const s=function Au(i){return i[Ed]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Id(i){return i.ngOriginalError}function Ey(i,...s){i.error(...s)}class Cd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function wy(i){return i&&i.ngErrorLogger||Ey}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Id(s);for(;a&&Id(a);)a=Id(a);return a||null}}const Hh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Lt))();function y(i){return i instanceof Function?i():i}var R=(()=>((R=R||{})[R.Important=1]="Important",R[R.DashCase=2]="DashCase",R))();function he(i,s){return undefined(i,s)}function ct(i){const s=i[3];return xi(s)?s[3]:s}function oi(i){return Gh(i[13])}function Su(i){return Gh(i[4])}function Gh(i){for(;null!==i&&!xi(i);)i=i[4];return i}function Pa(i,s,a,l,d){if(null!=l){let p,_=!1;xi(l)?p=l:Ur(l)&&(_=!0,l=l[0]);const w=zt(l);0===i&&null!==a?null==d?g0(s,a,w):ku(s,a,w,d||null,!0):1===i&&null!==a?ku(s,a,w,d||null,!0):2===i?function E0(i,s,a){const l=cg(i,s);l&&function lg(i,s,a,l){en(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=p&&function lA(i,s,a,l,d){const p=a[7];p!==zt(a)&&Pa(s,i,l,p,d);for(let w=10;w<a.length;w++){const b=a[w];fg(b[1],b,i,s,l,p)}}(s,i,p,a,d)}}function Fn(i,s,a){if(en(i))return i.createElement(s,a);{const l=null!==a?function ll(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function h0(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Fo(d,-1)),a.splice(l,1)}function ag(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&h0(d,l),s>0&&(i[a-1][4]=l[4]);const p=qo(i,10+s);!function Zh(i,s){fg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function f0(i,s){if(!(256&s[2])){const a=s[11];en(a)&&a.destroyNode&&fg(i,s,a,3,null,null),function Fa(i){let s=i[13];if(!s)return ug(i[1],i);for(;s;){let a=null;if(Ur(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Ur(s)&&ug(s[1],s),s=s[3];null===s&&(s=i),Ur(s)&&ug(s[1],s),a=s&&s[4]}s=a}}(s)}}function ug(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Cy(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Bo)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=d[p[_]],b=p[_+1];try{b.call(w)}finally{}}else try{p.call(d)}finally{}}}}(i,s),function p0(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(s):zt(s[_]),b=l[d=a[p+2]],A=a[p+3];"boolean"==typeof A?w.removeEventListener(a[p],b,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),p+=2}else{const _=l[d=a[p+1]];a[p].call(_)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&en(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&xi(s[3])){a!==s[3]&&h0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function vI(i,s,a){return function Mu(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===jt.None||d===jt.Emulated)return null}return Jn(l,a)}(i,s.parent,a)}function ku(i,s,a,l,d){en(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function g0(i,s,a){en(i)?i.appendChild(s,a):s.appendChild(a)}function m0(i,s,a,l,d){null!==l?ku(i,s,a,l,d):g0(i,s,a)}function cg(i,s){return en(i)?i.parentNode(s):s.parentNode}function y0(i,s,a){return _0(i,s,a)}let _0=function Dy(i,s,a){return 40&i.type?Jn(i,a):null};function Td(i,s,a,l){const d=vI(i,l,s),p=s[11],w=y0(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)m0(p,d,a[b],w,!1);else m0(p,d,a,w,!1)}function dg(i,s){if(null!==s){const a=s.type;if(3&a)return Jn(s,i);if(4&a)return hg(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return dg(i,l);{const d=i[s.index];return xi(d)?hg(-1,d):zt(d)}}if(32&a)return he(s,i)()||zt(i[s.index]);{const l=w0(i,s);return null!==l?Array.isArray(l)?l[0]:dg(ct(i[16]),l):dg(i,s.next)}}return null}function w0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function hg(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return dg(l,d)}return s[7]}function b0(i,s,a,l,d,p,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===s&&(w&&tr(zt(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)b0(i,s,a.child,l,d,p,!1),Pa(s,i,d,w,p);else if(32&b){const A=he(a,l);let x;for(;x=A();)Pa(s,i,d,x,p);Pa(s,i,d,w,p)}else 16&b?EI(i,s,l,a,d,p):Pa(s,i,d,w,p);a=_?a.projectionNext:a.next}}function fg(i,s,a,l,d,p){b0(a,l,i.firstChild,s,d,p,!1)}function EI(i,s,a,l,d,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Pa(s,i,d,b[A],p);else b0(i,s,b,_[3],d,p,!0)}function I0(i,s,a){en(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function _e(i,s,a){en(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function pg(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=s.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const C0="ng-template";function II(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==pg(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Ay(i){return 4===i.type&&i.value!==C0}function CI(i,s,a){return s===(4!==i.type||a?i.value:C0)}function DI(i,s,a){let l=4;const d=i.attrs||[],p=function AI(i){for(let s=0;s<i.length;s++)if(mi(i[s]))return s;return i.length}(d);let _=!1;for(let w=0;w<s.length;w++){const b=s[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!CI(i,b,a)||""===b&&1===s.length){if(Eo(l))return!1;_=!0}}else{const A=8&l?b:s[++w];if(8&l&&null!==i.attrs){if(!II(i.attrs,A,a)){if(Eo(l))return!1;_=!0}continue}const P=TI(8&l?"class":b,d,Ay(i),a);if(-1===P){if(Eo(l))return!1;_=!0;continue}if(""!==A){let U;U=P>p?"":d[P+1].toLowerCase();const Q=8&l?U:null;if(Q&&-1!==pg(Q,A,0)||2&l&&A!==U){if(Eo(l))return!1;_=!0}}}}else{if(!_&&!Eo(l)&&!Eo(b))return!1;if(_&&Eo(b))continue;_=!1,l=b|1&l}}return Eo(l)||_}function Eo(i){return 0==(1&i)}function TI(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let p=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function SI(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function D0(i,s,a=!1){for(let l=0;l<s.length;l++)if(DI(i,s[l],a))return!0;return!1}function xI(i,s){e:for(let a=0;a<s.length;a++){const l=s[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function Sy(i,s){return i?":not("+s.trim()+")":s}function T0(i){let s=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Eo(_)&&(s+=Sy(p,d),d=""),l=_,p=p||!Eo(l);a++}return""!==d&&(s+=Sy(p,d)),s}const mt={};function My(i){Wh(Pt(),Te(),$n()+i,!1)}function Wh(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&rs(s,p,a)}else{const p=i.preOrderHooks;null!==p&&ao(s,p,0,a)}oo(a)}function ky(i,s){return i<<17|s<<2}function bo(i){return i>>17&32767}function S0(i){return 2|i}function La(i){return(131068&i)>>2}function Ry(i,s){return-131069&i|s<<2}function x0(i){return 1|i}function U0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Hc(d),_.contentQueries(2,s[p],p)}}}function Gl(i,s,a,l,d,p,_,w,b,A){const x=s.blueprint.slice();return x[0]=d,x[2]=140|l,Pi(x),x[3]=x[15]=i,x[8]=a,x[10]=_||i&&i[10],x[11]=w||i&&i[11],x[12]=b||i&&i[12]||null,x[9]=A||i&&i[9]||null,x[6]=p,x[16]=2==s.type?i[16]:x,x}function Zl(i,s,a,l,d){let p=i.data[s];if(null===p)p=function Jh(i,s,a,l,d){const p=ou(),_=gl(),b=i.data[s]=function Hy(i,s,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,s,a,l,d),function _l(){return pt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const _=function io(){const i=pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ti(p,!0),p}function ql(i,s,a,l){if(0===a)return-1;const d=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Ba(i,s,a){so(s);try{const l=i.viewQuery;null!==l&&Yy(1,l,a);const d=i.template;null!==d&&jy(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&U0(i,s),i.staticViewQueries&&Yy(2,i.viewQuery,a);const p=i.components;null!==p&&function B0(i,s){for(let a=0;a<s.length;a++)Y0(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Br()}}function Sd(i,s,a,l){const d=s[2];if(256!=(256&d)){so(s);try{Pi(s),function au(i){return pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&jy(i,s,a,2,l);const _=3==(3&d);if(_){const A=i.preOrderCheckHooks;null!==A&&rs(s,A,null)}else{const A=i.preOrderHooks;null!==A&&ao(s,A,0,null),Pn(s,0)}if(function zy(i){for(let s=oi(i);null!==s;s=Su(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Fo(p,1),d[2]|=1024}}}(s),function IA(i){for(let s=oi(i);null!==s;s=Su(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];ts(l)&&Sd(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&U0(i,s),_){const A=i.contentCheckHooks;null!==A&&rs(s,A)}else{const A=i.contentHooks;null!==A&&ao(s,A,1),Pn(s,1)}!function LI(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)oo(~d);else{const p=d,_=a[++l],w=a[++l];lu(_,p),w(2,s[p])}}}finally{oo(-1)}}(i,s);const w=i.components;null!==w&&function VI(i,s){for(let a=0;a<s.length;a++)CA(i,s[a])}(s,w);const b=i.viewQuery;if(null!==b&&Yy(2,b,l),_){const A=i.viewCheckHooks;null!==A&&rs(s,A)}else{const A=i.viewHooks;null!==A&&ao(s,A,2),Pn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Fo(s[3],-1))}finally{Br()}}}function By(i,s,a,l){const d=s[10],_=ro(s);try{!_&&d.begin&&d.begin(),_&&Ba(i,s,l),Sd(i,s,a,l)}finally{!_&&d.end&&d.end()}}function jy(i,s,a,l,d){const p=$n(),_=2&l;try{oo(-1),_&&s.length>20&&Wh(i,s,20,!1),a(l,d)}finally{oo(p)}}function j0(i,s,a){if(tu(s)){const d=s.directiveEnd;for(let p=s.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function Xh(i,s,a){!su()||(function GI(i,s,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Ms(a,s),tr(l,s);const _=a.initialInputs;for(let w=d;w<p;w++){const b=i.data[w],A=ki(b);A&&W0(s,a,b);const x=ss(s,i,w,a);tr(x,s),null!==_&&K0(0,w-d,x,b,0,_),A&&(Xn(a.index,s)[8]=x)}}(i,s,a,Jn(a,s)),128==(128&a.flags)&&function Ig(i,s,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,w=function vl(){return pt.lFrame.currentDirectiveIndex}();try{oo(_);for(let b=l;b<d;b++){const A=i.data[b],x=s[b];ba(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Zy(A,x)}}finally{oo(-1),ba(w)}}(i,s,a))}function vg(i,s,a=Jn){const l=s.localNames;if(null!==l){let d=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(s,i):i[_];i[d++]=w}}}function $y(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=xd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function xd(i,s,a,l,d,p,_,w,b,A){const x=20+l,P=x+d,U=function UI(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:mt);return a}(x,P),Q="function"==typeof A?A():A;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function wg(i,s,a,l){const d=YI(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&J0(i).push(l,d.length-1))}function Eg(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function Gy(i,s,a,l){let d=!1;if(su()){const p=function q0(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];D0(a,_.selectors,!1)&&(d||(d=[]),co(Ms(a,s),i,_.type),ki(_)?(Cg(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===l?null:{"":-1};if(null!==p){d=!0,z0(a,i.data.length,p.length);for(let x=0;x<p.length;x++){const P=p[x];P.providersResolver&&P.providersResolver(P)}let w=!1,b=!1,A=ql(i,s,p.length,null);for(let x=0;x<p.length;x++){const P=p[x];a.mergedAttrs=Da(a.mergedAttrs,P.hostAttrs),qy(i,a,s,A,P),qI(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function H0(i,s){const l=s.directiveEnd,d=i.data,p=s.attrs,_=[];let w=null,b=null;for(let A=s.directiveStart;A<l;A++){const x=d[A],P=x.inputs,U=null===p||Ay(s)?null:EA(P,p);_.push(U),w=Eg(P,A,w),b=Eg(x.outputs,A,b)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=b}(i,a)}_&&function ZI(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const p=a[s[d+1]];if(null==p)throw new Ae(-301,!1);l.push(s[d],p)}}}(a,l,_)}return a.mergedAttrs=Da(a.mergedAttrs,a.attrs),d}function Z0(i,s,a,l,d,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~s.index;(function HI(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,d,_)}}function Zy(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Cg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function qI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;ki(s)&&(a[""]=i)}}function z0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function qy(i,s,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=lr(d.type)),_=new Bo(p,ki(d),null);i.blueprint[l]=_,a[l]=_,Z0(i,s,0,l,ql(i,a,d.hostVars,mt),d)}function W0(i,s,a){const l=Jn(s,i),d=$y(a),p=i[10],_=tf(i,Gl(i,d,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function Io(i,s,a,l,d,p){const _=Jn(i,s);!function Dg(i,s,a,l,d,p,_){if(null==p)en(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==_?ye(p):_(p,l||"",d);en(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],_,p,i.value,a,l,d)}function K0(i,s,a,l,d,p){const _=p[s];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const A=_[b++],x=_[b++],P=_[b++];null!==w?l.setInput(a,P,A,x):a[x]=P}}}function EA(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function zI(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function CA(i,s){const a=Xn(s,i);if(ts(a)){const l=a[1];80&a[2]?Sd(l,a,l.template,a[8]):a[5]>0&&Wy(a)}}function Wy(i){for(let l=oi(i);null!==l;l=Su(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const _=p[1];Sd(_,p,_.template,p[8])}else p[5]>0&&Wy(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Xn(a[l],i);ts(d)&&d[5]>0&&Wy(d)}}function Y0(i,s){const a=Xn(s,i),l=a[1];(function WI(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Ba(l,a,a[8])}function tf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function nf(i){for(;i;){i[2]|=64;const s=ct(i);if(ol(i)&&!s)return i;i=s}return null}function KI(i){!function Q0(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Vh(a),d=l[1];By(d,l,d.template,a)}}(i[8])}function Yy(i,s,a){Hc(0),s(i,a)}const AA=(()=>Promise.resolve(null))();function YI(i){return i[7]||(i[7]=[])}function J0(i){return i.cleanup||(i.cleanup=[])}function JI(i,s){const a=i[9],l=a?a.get(Cd,null):null;l&&l.handleError(s)}function XI(i,s,a,l,d){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,d,l,w):b[w]=d}}function Nu(i,s,a){const l=Ds(s,i);!function Dd(i,s,a){en(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Qy(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?p=w:1==p?d=le(d,w):2==p&&(l=le(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Ag=new hn("INJECTOR",-1);class Jy{get(s,a=Fs){if(a===Fs){const l=new Error(`NullInjectorError: No provider for ${se(s)}!`);throw l.name="NullInjectorError",l}return a}}const Sg=new hn("Set Injector scope."),Md={},X0={};let xg;function zl(){return void 0===xg&&(xg=new Jy),xg}function ew(i,s=null,a=null,l){const d=Mg(i,s,a,l);return d._resolveInjectorDefTypes(),d}function Mg(i,s=null,a=null,l){return new nC(i,a,s||zl(),l)}class nC{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Sr(a,w=>this.processProvider(w,s,a)),Sr([s],w=>this.processInjectorType(w,[],p)),this.records.set(Ag,Zi(void 0,this));const _=this.records.get(Sg);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:se(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Fs,l=ft.Default){this.assertNotDestroyed();const d=pe(this),p=yn(void 0);try{if(!(l&ft.SkipSelf)){let w=this.records.get(s);if(void 0===w){const b=function n_(i){return"function"==typeof i||"object"==typeof i&&i instanceof hn}(s)&&Ot(s);w=b&&this.injectableDefInScope(b)?Zi(Xy(s),Md):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&ft.Self?zl():this.parent).get(s,a=l&ft.Optional&&a===Fs?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Ma]=_[Ma]||[]).unshift(se(s)),d)throw _;return function cs(i,s,a,l){const d=i[Ma];throw s[F]&&d.unshift(s[F]),i.message=function Bi(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=se(s);if(Array.isArray(s))d=s.map(se).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):se(w)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Ma]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{yn(p),pe(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(se(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processInjectorType(s,a,l){if(!(s=K(s)))return!1;let d=Er(s);const p=null==d&&s.ngModule||void 0,_=void 0===p?s:p,w=-1!==l.indexOf(_);if(void 0!==p&&(d=Er(p)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(_);try{Sr(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:U,providers:Q}=x[P];Sr(Q,ve=>this.processProvider(ve,U,Q||L))}}this.injectorDefTypes.add(_);const b=lr(_)||(()=>new _);this.records.set(_,Zi(b,Md));const A=d.providers;if(null!=A&&!w){const x=s;Sr(A,P=>this.processProvider(P,x,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let d=ja(s=K(s))?s:K(s&&s.provide);const p=function rC(i,s,a){return Je(i)?Zi(void 0,i.useValue):Zi(tw(i),Md)}(s);if(ja(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=Zi(void 0,Md,!0),_.factory=()=>It(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,p)}hydrate(s,a){return a.value===Md&&(a.value=X0,a.value=a.factory()),"object"==typeof a.value&&a.value&&function iC(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Xy(i){const s=Ot(i),a=null!==s?s.factory:lr(i);if(null!==a)return a;if(i instanceof hn)throw new Ae(204,!1);if(i instanceof Function)return function SA(i){const s=i.length;if(s>0)throw as(s,"?"),new Ae(204,!1);const a=function Wr(i){const s=i&&(i[Ti]||i[Kr]);if(s){const a=function ir(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ae(204,!1)}function tw(i,s,a){let l;if(ja(i)){const d=K(i);return lr(d)||Xy(d)}if(Je(i))l=()=>K(i.useValue);else if(function At(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...It(i.deps||[]));else if(function e_(i){return!(!i||!i.useExisting)}(i))l=()=>tt(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function sf(i){return!!i.deps}(i))return lr(d)||Xy(d);l=()=>new d(...It(i.deps))}return l}function Zi(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Je(i){return null!==i&&"object"==typeof i&&Y in i}function ja(i){return"function"==typeof i}let ta=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return ew({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return ew({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Fs,i.NULL=new Jy,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>tt(Ag)}),i.__NG_ELEMENT_ID__=-1,i})();function kd(i,s){Ia(Vh(i)[1],an())}function Og(i){let s=function Ng(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(ki(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ae(903,"");d=s.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=Pg(i.inputs),_.declaredInputs=Pg(i.declaredInputs),_.outputs=Pg(i.outputs);const w=d.hostBindings;w&&c_(i,w);const b=d.viewQuery,A=d.contentQueries;if(b&&Fg(i,b),A&&l_(i,A),ue(i.inputs,d.inputs),ue(i.declaredInputs,d.declaredInputs),ue(i.outputs,d.outputs),ki(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===Og&&(a=!1)}}s=Object.getPrototypeOf(s)}!function dC(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Da(d.hostAttrs,a=Da(a,d.hostAttrs))}}(l)}function Pg(i){return i===ar?{}:i===L?[]:i}function Fg(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function l_(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{s(l,d,p),a(l,d,p)}:s}function c_(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Rd=null;function Wl(){if(!Rd){const i=Lt.Symbol;if(i&&i.iterator)Rd=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Rd=l)}}}return Rd}function lf(i){return!!h_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Wl()in i)}function h_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function zi(i,s,a){return i[s]=a}function ui(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function na(i,s,a,l){const d=ui(i,s,a);return ui(i,s+1,l)||d}function hf(i,s,a,l){const d=Te();return ui(d,As(),s)&&(Pt(),Io(Cn(),d,i,s,a,l)),hf}function Yl(i,s,a,l,d,p){const w=na(i,function ni(){return pt.lFrame.bindingIndex}(),a,d);return gi(2),w?s+ye(a)+l+ye(d)+p:mt}function f_(i,s,a,l,d,p,_,w){const b=Te(),A=Pt(),x=i+20,P=A.firstCreatePass?function gC(i,s,a,l,d,p,_,w,b){const A=s.consts,x=Zl(s,i,4,_||null,pi(A,w));Gy(s,a,x,pi(A,b)),Ia(s,x);const P=x.tViews=xd(2,x,l,d,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,x),P.queries=s.queries.embeddedTView(x)),x}(x,A,b,s,a,l,d,p,_):A.data[x];ti(P,!1);const U=b[11].createComment("");Td(A,b,U,P),tr(U,b),tf(b,b[x]=zI(U,b,U,P)),Mi(P)&&Xh(A,b,P),null!=_&&vg(b,P,w)}function lw(i){return Oi(function $c(){return pt.lFrame.contextLView}(),20+i)}function _f(i,s=ft.Default){const a=Te();return null===a?tt(i,s):Go(an(),a,K(i),s)}function zg(){throw new Error("invalid")}function Ld(i,s,a){const l=Te();return ui(l,As(),s)&&function Gi(i,s,a,l,d,p,_,w){const b=Jn(s,a);let x,A=s.inputs;!w&&null!=A&&(x=A[l])?(XI(i,a,x,l,d),Mc(s)&&function bg(i,s){const a=Xn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function BI(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,s.value||"",l):d,en(p)?p.setProperty(b,l,d):Dn(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}(Pt(),Cn(),l,i,s,l[11],a,!1),Ld}function vf(i,s,a,l,d){const _=d?"class":"style";XI(i,a,s.inputs[_],_,l)}function wf(i,s,a,l){const d=Te(),p=Pt(),_=20+i,w=d[11],b=d[_]=Fn(w,s,function Pp(){return pt.lFrame.currentNamespace}()),A=p.firstCreatePass?function Ew(i,s,a,l,d,p,_){const w=s.consts,A=Zl(s,i,2,d,pi(w,p));return Gy(s,a,A,pi(w,_)),null!==A.attrs&&Qy(A,A.attrs,!1),null!==A.mergedAttrs&&Qy(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,d,0,s,a,l):p.data[_];ti(A,!0);const x=A.mergedAttrs;null!==x&&Tr(w,b,x);const P=A.classes;null!==P&&_e(w,b,P);const U=A.styles;return null!==U&&I0(w,b,U),64!=(64&A.flags)&&Td(p,d,b,A),0===function Ea(){return pt.lFrame.elementDepthCount}()&&tr(b,d),function fl(){pt.lFrame.elementDepthCount++}(),Mi(A)&&(Xh(p,d,A),j0(p,A,d)),null!==l&&vg(d,A),wf}function Ef(){let i=an();gl()?ml():(i=i.parent,ti(i,!1));const s=i;!function iu(){pt.lFrame.elementDepthCount--}();const a=Pt();return a.firstCreatePass&&(Ia(a,i),tu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Vp(i){return 0!=(16&i.flags)}(s)&&vf(a,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function nn(i){return 0!=(32&i.flags)}(s)&&vf(a,s,Te(),s.stylesWithoutHost,!1),Ef}function b_(i,s,a,l){return wf(i,s,a,l),Ef(),b_}function rc(i,s,a){const l=Te(),d=Pt(),p=i+20,_=d.firstCreatePass?function bw(i,s,a,l,d){const p=s.consts,_=pi(p,l),w=Zl(s,i,8,"ng-container",_);return null!==_&&Qy(w,_,!0),Gy(s,a,w,pi(p,d)),null!==s.queries&&s.queries.elementStart(s,w),w}(p,d,l,s,a):d.data[p];ti(_,!0);const w=l[p]=l[11].createComment("");return Td(d,l,w,_),tr(w,l),Mi(_)&&(Xh(d,l,_),j0(d,_,l)),null!=a&&vg(l,_),rc}function Uu(){let i=an();const s=Pt();return gl()?ml():(i=i.parent,ti(i,!1)),s.firstCreatePass&&(Ia(s,i),tu(i)&&s.queries.elementEnd(i)),Uu}function Kg(){return Te()}function I_(i){return!!i&&"function"==typeof i.then}function Yg(i){return!!i&&"function"==typeof i.subscribe}const ic=Yg;function bf(i,s,a,l){const d=Te(),p=Pt(),_=an();return function Cw(i,s,a,l,d,p,_,w){const b=Mi(l),x=i.firstCreatePass&&J0(i),P=s[8],U=YI(s);let Q=!0;if(3&l.type||w){const je=Jn(l,s),Xe=w?w(je):je,De=U.length,ht=w?Vt=>w(zt(Vt[l.index])):l.index;if(en(a)){let Vt=null;if(!w&&b&&(Vt=function Iw(i,s,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===l){const w=s[7],b=d[p+2];return w.length>b?w[b]:null}"string"==typeof _&&(p+=2)}return null}(i,s,d,l.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=p,Vt.__ngLastListenerFn__=p,Q=!1;else{p=Co(l,s,P,p,!1);const tn=a.listen(Xe,d,p);U.push(p,tn),x&&x.push(d,ht,De,De+1)}}else p=Co(l,s,P,p,!0),Xe.addEventListener(d,p,_),U.push(p),x&&x.push(d,ht,De,_)}else p=Co(l,s,P,p,!1);const ve=l.outputs;let Re;if(Q&&null!==ve&&(Re=ve[d])){const je=Re.length;if(je)for(let Xe=0;Xe<je;Xe+=2){const Ci=s[Re[Xe]][Re[Xe+1]].subscribe(p),ua=U.length;U.push(p,Ci),x&&x.push(d,l.index,ua,-(ua+1))}}}(p,d,d[11],_,i,s,!!a,l),bf}function $u(i,s,a,l){try{return!1!==a(l)}catch(d){return JI(i,d),!1}}function Co(i,s,a,l,d){return function p(_){if(_===Function)return l;const w=2&i.flags?Xn(i.index,s):s;0==(32&s[2])&&nf(w);let b=$u(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)b=$u(s,0,A,_)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function If(i=1){return function Ih(i){return(pt.lFrame.contextLView=function wl(i,s){for(;i>0;)s=s[15],i--;return s}(i,pt.lFrame.contextLView))[8]}(i)}function Qg(i,s){let a=null;const l=function gg(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let d=0;d<s.length;d++){const p=s[d];if("*"!==p){if(null===l?D0(i,p,!0):xI(l,p))return d}else a=d}return a}function Cf(i){const s=Te()[16][6];if(!s.projection){const l=s.projection=as(i?i.length:1,null),d=l.slice();let p=s.child;for(;null!==p;){const _=i?Qg(p,i):0;null!==_&&(d[_]?d[_].projectionNext=p:l[_]=p,d[_]=p),p=p.next}}}function C_(i,s=0,a){const l=Te(),d=Pt(),p=Zl(d,20+i,16,null,a||null);null===p.projection&&(p.projection=s),ml(),64!=(64&p.flags)&&function uA(i,s,a){EI(s[11],0,s,a,vI(i,a,s),y0(a.parent||s[6],a,s))}(d,l,p)}function $a(i,s,a,l,d){const p=i[a+1],_=null===s;let w=l?bo(p):La(p),b=!1;for(;0!==w&&(!1===b||_);){const x=i[w+1];Mw(i[w],s)&&(b=!0,i[w+1]=l?x0(x):S0(x)),w=l?bo(x):La(x)}b&&(i[a+1]=l?S0(p):x0(p))}function Mw(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ko(i,s)>=0}function k_(i,s){return function Bs(i,s,a,l){const d=Te(),p=Pt(),_=gi(2);p.firstUpdatePass&&function Fw(i,s,a,l){const d=i.data;if(null===d[a+1]){const p=d[$n()],_=function $d(i,s){return s>=i.expandoStartIndex}(i,a);(function jw(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function rr(i,s,a,l){const d=function cu(i){const s=pt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=Af(a=R_(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=R_(d,i,s,a,l),null===p){let b=function Lw(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==La(l))return i[bo(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=R_(null,i,s,b[1],l),b=Af(b,s.attrs,l),function DC(i,s,a,l){i[bo(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else p=function TC(i,s,a){let l;const d=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<d;p++)l=Af(l,i[p].hostAttrs,a);return Af(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(d,p,s,l),function IC(i,s,a,l,d,p){let _=p?s.classBindings:s.styleBindings,w=bo(_),b=La(_);i[l]=a;let x,A=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||Ko(P,x)>0)&&(A=!0)}else x=a;if(d)if(0!==b){const U=bo(i[w+1]);i[l+1]=ky(U,w),0!==U&&(i[U+1]=Ry(i[U+1],l)),i[w+1]=function dA(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=ky(w,0),0!==w&&(i[w+1]=Ry(i[w+1],l)),w=l;else i[l+1]=ky(b,0),0===w?w=l:i[b+1]=Ry(i[b+1],l),b=l;A&&(i[l+1]=S0(i[l+1])),$a(i,x,l,!0),$a(i,x,l,!1),function Df(i,s,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Ko(p,s)>=0&&(a[l+1]=x0(a[l+1]))}(s,x,i,l,p),_=ky(w,b),p?s.classBindings=_:s.styleBindings=_}(d,p,s,a,_,l)}}(p,i,_,l),s!==mt&&ui(d,_,s)&&function Sf(i,s,a,l,d,p,_,w){if(!(3&s.type))return;const b=i.data,A=b[w+1];js(function MI(i){return 1==(1&i)}(A)?O_(b,s,a,d,La(A),_):void 0)||(js(p)||function mg(i){return 2==(2&i)}(A)&&(p=O_(b,null,a,d,w,_)),function bI(i,s,a,l,d){const p=en(i);if(s)d?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:R.DashCase;if(null==d)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=R.Important),p?i.setStyle(a,l,d,_):a.style.setProperty(l,d,w?"important":"")}}}(l,_,Ds($n(),a),d,p))}(p,p.data[$n()],d,d[11],i,d[_+1]=function Bw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=se(wi(i)))),i}(s,a),l,_)}(i,s,null,!0),k_}function R_(i,s,a,l,d){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=s[w],l=Af(l,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Af(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),dr(i,_,!!a||s[++p]))}return void 0===i?null:i}function O_(i,s,a,l,d,p){const _=null===s;let w;for(;d>0;){const b=i[d],A=Array.isArray(b),x=A?b[1]:b,P=null===x;let U=a[d+1];U===mt&&(U=P?L:void 0);let Q=P?xa(U,l):x===l?U:void 0;if(A&&!js(Q)&&(Q=xa(b,l)),js(Q)&&(w=Q,_))return w;const ve=i[d+1];d=_?bo(ve):La(ve)}if(null!==s){let b=p?s.residualClasses:s.residualStyles;null!=b&&(w=xa(b,l))}return w}function js(i){return void 0!==i}function em(i,s=""){const a=Te(),l=Pt(),d=i+20,p=l.firstCreatePass?Zl(l,d,1,s,null):l.data[d],_=a[d]=function Hl(i,s){return en(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Td(l,a,_,p),ti(p,!1)}function oc(i){return xf("",i,""),oc}function xf(i,s,a){const l=Te(),d=function Fu(i,s,a,l){return ui(i,As(),a)?s+ye(a)+l:mt}(l,i,s,a);return d!==mt&&Nu(l,$n(),d),xf}function Mf(i,s,a,l,d){const p=Te(),_=Yl(p,i,s,a,l,d);return _!==mt&&Nu(p,$n(),_),Mf}const $s=void 0;var j_=["en",[["a","p"],["AM","PM"],$s],[["AM","PM"],$s,$s],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$s,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$s,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$s,"{1} 'at' {0}",$s],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hu(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Zd={};function Ln(i){const s=function Ze(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=nt(s);if(a)return a;const l=s.split("-")[0];if(a=nt(l),a)return a;if("en"===l)return j_;throw new Error(`Missing locale data for the locale "${i}".`)}function om(i){return Ln(i)[_t.PluralCase]}function nt(i){return i in Zd||(Zd[i]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[i]),Zd[i]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const Wn="en-US";let aE=Wn;function _r(i,s,a,l,d){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)_r(i[p],s,a,l,d);else{const p=Pt(),_=Te();let w=ja(i)?i:K(i.provide),b=tw(i);const A=an(),x=1048575&A.providerIndexes,P=A.directiveStart,U=A.providerIndexes>>20;if(ja(i)||!i.multi){const Q=new Bo(b,d,_f),ve=K_(w,s,d?x:x+U,P);-1===ve?(co(Ms(A,_),p,w),W_(p,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Q),_.push(Q)):(a[ve]=Q,_[ve]=Q)}else{const Q=K_(w,s,x+U,P),ve=K_(w,s,x,x+U),Re=Q>=0&&a[Q],je=ve>=0&&a[ve];if(d&&!je||!d&&!Re){co(Ms(A,_),p,w);const Xe=function LC(i,s,a,l,d){const p=new Bo(i,a,_f);return p.multi=[],p.index=s,p.componentProviders=0,IE(p,d,l&&!a),p}(d?FC:CE,a.length,d,l,b);!d&&je&&(a[ve].providerFactory=Xe),W_(p,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Xe),_.push(Xe)}else W_(p,i,Q>-1?Q:ve,IE(a[d?ve:Q],b,!d&&l));!d&&l&&je&&a[ve].componentProviders++}}}function W_(i,s,a,l){const d=ja(s),p=function t_(i){return!!i.useClass}(s);if(d||p){const b=(p?K(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,b]):A[x+1].push(l,b)}else A.push(a,b)}}}function IE(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function K_(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function CE(i,s,a,l){return Y_(this.multi,[])}function FC(i,s,a,l){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=ss(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),Y_(d,p);for(let b=_;b<w.length;b++)p.push(w[b])}else p=[],Y_(d,p);return p}function Y_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function DE(i,s=[]){return a=>{a.providersResolver=(l,d)=>function bE(i,s,a){const l=Pt();if(l.firstCreatePass){const d=ki(i);_r(a,l.data,l.blueprint,d,!0),_r(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class fc{}class qa{resolveComponentFactory(s){throw function VC(i){const s=Error(`No component factory found for ${se(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let jf=(()=>{class i{}return i.NULL=new qa,i})();function Xd(){return eh(an(),Te())}function eh(i,s){return new pc(Jn(i,s))}let pc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Xd,i})();function J_(i){return i instanceof pc?i.nativeElement:i}class gc{}let Zs=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function $f(){const i=Te(),a=Xn(an().index,i);return function AE(i){return i[11]}(Ur(a)?a:i)}(),i})(),SE=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class _m{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const vm=new _m("13.3.10"),wm={};function Hf(i,s,a,l,d=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(zt(p)),xi(p))for(let w=10;w<p.length;w++){const b=p[w],A=b[1].firstChild;null!==A&&Hf(b[1],b,A,l)}const _=a.type;if(8&_)Hf(i,s,a.child,l);else if(32&_){const w=he(a,s);let b;for(;b=w();)l.push(b)}else if(16&_){const w=w0(s,a);if(Array.isArray(w))l.push(...w);else{const b=ct(s[16]);Hf(b[1],b,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class Gf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Hf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(xi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(ag(s,l),qo(a,l))}this._attachedToViewContainer=!1}f0(this._lView[1],this._lView)}onDestroy(s){wg(this._lView[1],this._lView,null,s)}markForCheck(){nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function rf(i,s,a){const l=s[10];l.begin&&l.begin();try{Sd(i,s,i.template,a)}catch(d){throw JI(s,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zh(i,s){fg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ae(902,"");this._appRef=s}}class xE extends Gf{constructor(s){super(s),this._view=s}detectChanges(){KI(this._view)}checkNoChanges(){}get context(){return null}}class X_ extends jf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Nn(s);return new tv(a,this.ngModule)}}function ev(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class tv extends fc{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function xy(i){return i.map(T0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ev(this.componentDef.inputs)}get outputs(){return ev(this.componentDef.outputs)}create(s,a,l,d){const p=(d=d||this.ngModule)?function BC(i,s){return{get:(a,l,d)=>{const p=i.get(a,wm,d);return p!==wm||l===wm?p:s.get(a,l,d)}}}(s,d.injector):s,_=p.get(gc,_a),w=p.get(SE,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function ef(i,s,a){if(en(i))return i.selectRootElement(s,a===jt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Fn(_.createRenderer(null,this.componentDef),A,function Em(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,U=function ow(i,s){return{components:[],scheduler:i||Hh,clean:AA,playerHandler:s||null,flags:0}}(),Q=xd(0,null,null,1,0,null,null,null,null,null),ve=Gl(null,Q,U,P,null,null,_,b,w,p);let Re,je;so(ve);try{const Xe=function Rg(i,s,a,l,d,p){const _=a[1];a[20]=i;const b=Zl(_,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(Qy(b,A,!0),null!==i&&(Tr(d,i,A),null!==b.classes&&_e(d,i,b.classes),null!==b.styles&&I0(d,i,b.styles)));const x=l.createRenderer(i,s),P=Gl(a,$y(s),null,s.onPush?64:16,a[20],b,l,x,p||null,null);return _.firstCreatePass&&(co(Ms(b,a),_,s.type),Cg(_,b),z0(b,a.length,1)),tf(a,P),a[20]=P}(x,this.componentDef,ve,_,b);if(x)if(l)Tr(b,x,["ng-version",vm.full]);else{const{attrs:De,classes:ht}=function xr(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&s.push(p,i[++l]):8===d&&a.push(p);else{if(!Eo(d))break;d=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);De&&Tr(b,x,De),ht&&ht.length>0&&_e(b,x,ht.join(" "))}if(je=un(Q,20),void 0!==a){const De=je.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const Vt=a[ht];De.push(null!=Vt?Array.from(Vt):null)}}Re=function sw(i,s,a,l,d){const p=a[1],_=function $I(i,s,a){const l=an();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),qy(i,l,s,ql(i,s,1,null),a));const d=ss(s,i,l.directiveStart,l);tr(d,s);const p=Jn(l,s);return p&&tr(p,s),d}(p,a,s);if(l.components.push(_),i[8]=_,d&&d.forEach(b=>b(_,s)),s.contentQueries){const b=an();s.contentQueries(1,_,b.directiveStart)}const w=an();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(oo(w.index),Z0(a[1],w,0,w.directiveStart,w.directiveEnd,s),Zy(s,_)),_}(Xe,this.componentDef,ve,U,[kd]),Ba(Q,ve,null)}finally{Br()}return new mc(this.componentType,Re,eh(je,ve),ve,je)}}class mc extends class zu{}{constructor(s,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new xE(d),this.componentType=s}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class qs{}class nv{}const Do=new Map;class zf extends qs{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new X_(this);const l=On(s);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=Mg(s,a,[{provide:qs,useValue:this},{provide:jf,useValue:this.componentFactoryResolver}],se(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ta.THROW_IF_NOT_FOUND,l=ft.Default){return s===ta||s===qs||s===Ag?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class th extends nv{constructor(s){super(),this.moduleType=s,null!==On(s)&&function qf(i){const s=new Set;!function a(l){const d=On(l,!0),p=d.id;null!==p&&(function rv(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${se(s)} vs ${se(s.name)}`)}(p,Do.get(p),l),Do.set(p,l));const _=y(d.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new zf(this.moduleType,s)}}function NE(i,s,a){const l=cr()+i,d=Te();return d[l]===mt?zi(d,l,a?s.call(a):s()):function df(i,s){return i[s]}(d,l)}function bm(i,s,a,l){return Im(Te(),cr(),i,s,a,l)}function OE(i,s,a,l,d){return function BE(i,s,a,l,d,p,_){const w=s+a;return na(i,w,d,p)?zi(i,w+2,_?l.call(_,d,p):l(d,p)):za(i,w+2)}(Te(),cr(),i,s,a,l,d)}function za(i,s){const a=i[s];return a===mt?void 0:a}function Im(i,s,a,l,d,p){const _=s+a;return ui(i,_,d)?zi(i,_+1,p?l.call(p,d):l(d)):za(i,_+1)}function sv(i,s){const a=Pt();let l;const d=i+20;a.firstCreatePass?(l=function Wu(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=lr(l.type)),_=yn(_f);try{const w=gt(!1),b=p();return gt(w),function mC(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Te(),d,b),b}finally{yn(_)}}function jE(i,s,a){const l=i+20,d=Te(),p=Oi(d,l);return function Yf(i,s){return i[1].data[s].pure}(d,l)?Im(d,cr(),s,p.transform,a,p):p.transform(a)}function Yt(i){return s=>{setTimeout(i,void 0,s)}}const sa=class HC extends c.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,p,_;let w=s,b=a||(()=>null),A=l;if(s&&"object"==typeof s){const P=s;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),b=null===(p=P.error)||void 0===p?void 0:p.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=Yt(b),w&&(w=Yt(w)),A&&(A=Yt(A)));const x=super.subscribe({next:w,error:b,complete:A});return s instanceof J.w0&&s.add(x),x}};function Cm(){return this._results[Wl()]()}class Ku{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Wl(),l=Ku.prototype;l[a]||(l[a]=Cm)}get changes(){return this._changes||(this._changes=new sa)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Ar(s);(this._changesDetected=!function Dh(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=s[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Wa=(()=>{class i{}return i.__NG_ELEMENT_ID__=HE,i})();const Dm=Wa,$E=class extends Dm{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Gl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Ba(a,l,s),new Gf(l)}};function HE(){return Qf(an(),Te())}function Qf(i,s){return 4&i.type?new $E(s,i,eh(i,s)):null}let Tm=(()=>{class i{}return i.__NG_ELEMENT_ID__=GE,i})();function GE(){return nh(an(),Te())}const ZE=Tm,qE=class extends ZE{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return eh(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const s=er(this._hostTNode,this._hostLView);if(jo(s)){const a=xs(s,this._hostLView),l=Ss(s);return new Ns(a[1].data[l+8],a)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=zE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,p){const _=s&&!function yu(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const P=a||{};w=P.index,l=P.injector,d=P.projectableNodes,p=P.ngModuleRef}const b=_?s:new tv(Nn(s)),A=l||this.parentInjector;if(!p&&null==b.ngModule){const U=(_?A:this.parentInjector).get(qs,null);U&&(p=U)}const x=b.create(A,d,void 0,p);return this.insert(x.hostView,w),x}insert(s,a){const l=s._lView,d=l[1];if(function wa(i){return xi(i[3])}(l)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const P=l[3],U=new qE(P,P[6],P[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function xu(i,s,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=s),l<p-10?(s[4]=a[d],Sa(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function d0(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(d,l,_,p);const w=hg(p,_),b=l[11],A=cg(b,_[7]);return null!==A&&function qh(i,s,a,l,d,p){l[0]=d,l[6]=s,fg(i,l,a,1,d,p)}(d,_[6],b,l,A,w),s.attachToViewContainerRef(),Sa(av(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=zE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=ag(this._lContainer,a);l&&(qo(av(this._lContainer),a),f0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=ag(this._lContainer,a);return l&&null!=qo(av(this._lContainer),a)?new Gf(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function zE(i){return i[8]}function av(i){return i[8]||(i[8]=[])}function nh(i,s){let a;const l=s[i.index];if(xi(l))a=l;else{let d;if(8&i.type)d=zt(l);else{const p=s[11];d=p.createComment("");const _=Jn(i,s);ku(p,cg(p,_),d,function wI(i,s){return en(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=zI(l,s,d,i),tf(s,a)}return new qE(a,i,s)}class Jf{constructor(s){this.queryList=s,this.matches=null}clone(){return new Jf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Am{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Am(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==hv(s,a).matches&&this.queries[a].setDirty()}}class rh{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Ws{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Ws(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Xf{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Xf(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(s,a,KE(a,p)),this.matchTNodeWithReadOption(s,a,Ta(a,s,p,!1,!1))}else l===Wa?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ta(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===pc||d===Tm||d===Wa&&4&a.type)this.addMatch(a.index,-2);else{const p=Ta(a,s,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function KE(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function YE(i,s,a,l){return-1===a?function ep(i,s){return 11&i.type?eh(i,s):4&i.type?Qf(i,s):null}(s,i):-2===a?function QE(i,s,a){return a===pc?eh(s,i):a===Wa?Qf(s,i):a===Tm?nh(s,i):void 0}(i,s,l):ss(i,i[1],a,s)}function uv(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const p=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const A=_[b];w.push(A<0?null:YE(s,p[A],_[b+1],a.metadata.read))}d.matches=w}return d.matches}function lv(i,s,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=uv(i,s,d,a);for(let w=0;w<p.length;w+=2){const b=p[w];if(b>0)l.push(_[w/2]);else{const A=p[w+1],x=s[-b];for(let P=10;P<x.length;P++){const U=x[P];U[17]===U[3]&&lv(U[1],U,A,l)}if(null!==x[9]){const P=x[9];for(let U=0;U<P.length;U++){const Q=P[U];lv(Q[1],Q,A,l)}}}}}return l}function JE(i){const s=Te(),a=Pt(),l=du();Hc(l+1);const d=hv(a,l);if(i.dirty&&ro(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?lv(a,s,l,[]):uv(a,s,d,l);i.reset(p,J_),i.notifyOnChanges()}return!0}return!1}function Sm(i,s,a,l){const d=Pt();if(d.firstCreatePass){const p=an();(function dv(i,s,a){null===i.queries&&(i.queries=new Ws),i.queries.track(new Xf(s,a))})(d,new rh(s,a,l),p.index),function ZC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function cv(i,s,a){const l=new Ku(4==(4&a));wg(i,s,l,l.destroy),null===s[19]&&(s[19]=new Am),s[19].queries.push(new Jf(l))}(d,Te(),a)}function XE(){return function eb(i,s){return i[19].queries[s].queryList}(Te(),du())}function hv(i,s){return i.queries.getByIndex(s)}function tb(i,s){return Qf(i,s)}function wc(...i){}const Qu=new hn("Application Initializer");let Ju=(()=>{class i{constructor(a){this.appInits=a,this.resolve=wc,this.reject=wc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(I_(p))a.push(p);else if(ic(p)){const _=new Promise((w,b)=>{p.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(tt(Qu,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const uh=new hn("AppId",{providedIn:"root",factory:function Ev(){return`${ip()}${ip()}${ip()}`}});function ip(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bv=new hn("Platform Initializer"),eD=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Iv=new hn("appBootstrapListener");let Cv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ka=new hn("LocaleId",{providedIn:"root",factory:()=>$t(Ka,ft.Optional|ft.SkipSelf)||function sp(){return"undefined"!=typeof $localize&&$localize.locale||Wn}()}),nD=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class iD{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let op=(()=>{class i{compileModuleSync(a){return new th(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(On(a).declarations).reduce((_,w)=>{const b=Nn(w);return b&&_.push(new tv(b)),_},[]);return new iD(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wb=(()=>Promise.resolve(0))();function Dv(i){"undefined"==typeof Zone?wb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class gs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sa(!1),this.onMicrotaskEmpty=new sa(!1),this.onStable=new sa(!1),this.onError=new sa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function sD(){let i=Lt.requestAnimationFrame,s=Lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function ap(i){const s=()=>{!function Eb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Lt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ch(i),i.isCheckStableRunning=!0,Tv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ch(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,_,w)=>{try{return up(i),a.invokeTask(d,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Av(i)}},onInvoke:(a,l,d,p,_,w,b)=>{try{return up(i),a.invoke(d,p,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),Av(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,ch(i),Tv(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,s,km,wc,wc);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const km={};function Tv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ch(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function up(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Av(i){i._nesting--,Tv(i)}class Yi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sa,this.onMicrotaskEmpty=new sa,this.onStable=new sa,this.onError=new sa}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Sv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gs.assertNotInAngularZone(),Dv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(tt(gs))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),Rm=(()=>{class i{constructor(){this._applications=new Map,aa.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return aa.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class xv{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function bb(i){aa=i}let aa=new xv,Ks=null;const Mv=new hn("AllowMultipleToken"),Xu=new hn("PlatformOnDestroy");class el{constructor(s,a){this.name=s,this.token=a}}function Nm(i,s,a=[]){const l=`Platform: ${s}`,d=new hn(l);return(p=[])=>{let _=kv();if(!_||_.injector.get(Mv,!1)){const w=[...a,...p,{provide:d,useValue:!0}];i?i(w):function bc(i){if(Ks&&!Ks.get(Mv,!1))throw new Ae(400,"");Ks=i;const s=i.get(Db),a=i.get(bv,null);a&&a.forEach(l=>l())}(function aD(i=[],s){return ta.create({name:s,providers:[{provide:Sg,useValue:"platform"},{provide:Xu,useValue:()=>Ks=null},...i]})}(w,l))}return function Cb(i){const s=kv();if(!s)throw new Ae(401,"");return s}()}}function kv(){var i;return null!==(i=null==Ks?void 0:Ks.get(Db))&&void 0!==i?i:null}let Db=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function Om(i,s){let a;return a="noop"===i?new Yi:("zone.js"===i?void 0:i)||new gs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:gs,useValue:w}];return w.run(()=>{const A=ta.create({providers:b,parent:this.injector,name:a.moduleType.name}),x=a.create(A),P=x.injector.get(Cd,null);if(!P)throw new Ae(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Q=>{P.handleError(Q)}});x.onDestroy(()=>{Pm(this._modules,x),U.unsubscribe()})}),function Tb(i,s,a){try{const l=a();return I_(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const U=x.injector.get(Ju);return U.runInitializers(),U.donePromise.then(()=>(function uE(i){Ft(i,"Expected localeId to be defined"),"string"==typeof i&&(aE=i.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Ka,Wn)||Wn),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=Ab({},l);return function oD(i,s,a){const l=new th(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(Rv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ae(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Xu,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(tt(ta))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Ab(i,s){return Array.isArray(s)?s.reduce(Ab,i):Object.assign(Object.assign({},i),s)}let Rv=(()=>{class i{constructor(a,l,d,p){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),w=new O.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{gs.assertNotInAngularZone(),Dv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{gs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ie.T)(_,w.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ae(405,"");let d;d=a instanceof fc?a:this._injector.get(jf).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function Ib(i){return i.isBoundToModule}(d)?void 0:this._injector.get(qs),w=d.create(ta.NULL,[],l||d.selector,p),b=w.location.nativeElement,A=w.injector.get(Sv,null),x=A&&w.injector.get(Rm);return A&&x&&x.registerApplication(b,A),w.onDestroy(()=>{this.detachView(w.hostView),Pm(this.components,w),x&&x.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ae(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Pm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Iv,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(tt(gs),tt(ta),tt(Cd),tt(Ju))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Pm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Nv=!0,Ov=!1;function uD(){return Ov=!0,Nv}function Sb(){if(Ov)throw new Error("Cannot enable prod mode after platform setup.");Nv=!1}let Fm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Pv,i})();function Pv(i){return function lD(i,s,a){if(Mc(i)&&!a){const l=Xn(i.index,s);return new Gf(l,l)}return 47&i.type?new Gf(s[16],s):null}(an(),Te(),16==(16&i))}class Pb{constructor(){}supports(s){return lf(s)}create(s){return new Vv(s)}}const pD=(i,s)=>s;class Vv{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||pD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Lb(l,d,p)?a:l,w=Lb(_,d,p),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const A=w-d,x=b-d;if(A!=x){for(let U=0;U<A;U++){const Q=U<p.length?p[U]:p[U]=0,ve=Q+U;x<=ve&&ve<A&&(p[U]=Q+1)}p[_.previousIndex]=x-A}}w!==b&&s(_,w,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!lf(s))throw new Ae(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else d=0,function cf(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Wl()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,d)):s=this._addAfter(new Or(a,l),p,d),s}_verifyReinsertion(s,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,p=s._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Fb),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Or{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Fb{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new gD,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lb(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class Vb{constructor(){}supports(s){return s instanceof Map||h_(s)}create(){return new mD}}class mD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||h_(s)))throw new Ae(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const l=new yD(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class yD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jm(){return new $m([new Pb])}let $m=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||jm()),deps:[[i,new Ls,new fr]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ae(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:jm}),i})();function Hm(){return new hh([new Vb])}let hh=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Hm()),deps:[[i,new Ls,new fr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ae(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:Hm}),i})();const Uv=Nm(null,"core",[]);let jb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(tt(Rv))},i.\u0275mod=br({type:i}),i.\u0275inj=Ht({}),i})()},3942:(qe,me,N)=>{N.d(me,{Z:()=>Ae});var c=N(2090),J=N(4859),O=N(9681),ie=N(1877);class ne{constructor(ye,be){this._delegate=ye,this.firebase=be,(0,O._addComponent)(ye,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ye,be=O._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(ye);return!et.isInitialized()&&"EXPLICIT"===(null===(We=et.getComponent())||void 0===We?void 0:We.instantiationMode)&&et.initialize(),et.getImmediate({identifier:be})}_removeServiceInstance(ye,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(be)}_addComponent(ye){(0,O._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,O._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function le(){const Qe=function se(Qe){const ye={},be={__esModule:!0,initializeApp:function Se(Ve,B={}){const we=O.initializeApp(Ve,B);if((0,c.r3)(ye,we.name))return ye[we.name];const z=new Qe(we,be);return ye[we.name]=z,z},app:et,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Ve){const B=Ve.name,we=B.replace("-compat","");if(O._registerComponent(Ve)&&"PUBLIC"===Ve.type){const z=(re=et())=>{if("function"!=typeof re[we])throw ue.create("invalid-app-argument",{appName:B});return re[we]()};void 0!==Ve.serviceProps&&(0,c.ZB)(z,Ve.serviceProps),be[we]=z,Qe.prototype[we]=function(...re){return this._getService.bind(this,B).apply(this,Ve.multipleInstances?re:[])}}return"PUBLIC"===Ve.type?be[we]:null},removeApp:function We(Ve){delete ye[Ve]},useAsService:function Ue(Ve,B){return"serverAuth"===B?null:B},modularAPIs:O}};function et(Ve){if(!(0,c.r3)(ye,Ve=Ve||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ve});return ye[Ve]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ee(){return Object.keys(ye).map(Ve=>ye[Ve])}}),et.App=Qe,be}(ne);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function ye(be){(0,c.ZB)(Qe,be)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Qe}(),j=new ie.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=$;!function xe(Qe){(0,O.registerVersion)("@firebase/app-compat","0.1.26",Qe)}()},9681:(qe,me,N)=>{N.r(me),N.d(me,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Ti,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>qt,_apps:()=>Kt,_clearComponents:()=>Ji,_components:()=>mn,_getProvider:()=>Ht,_registerComponent:()=>wr,_removeServiceInstance:()=>Ot,deleteApp:()=>ft,getApp:()=>Kr,getApps:()=>di,initializeApp:()=>vs,onLog:()=>yn,registerVersion:()=>cn,setLogLevel:()=>Ys});var c=N(5861),J=N(4859),O=N(1877),ie=N(2090),ne=N(8766);class de{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function ue(H){const X=H.getComponent();return"VERSION"===(null==X?void 0:X.type)}(Me)){const Ke=Me.getImmediate();return`${Ke.library}/${Ke.version}`}return null}).filter(Me=>Me).join(" ")}}const se="@firebase/app",$=new O.Yd("@firebase/app"),Ft="[DEFAULT]",Ge={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Kt=new Map,mn=new Map;function Jt(H,X){try{H.container.addComponent(X)}catch(Me){$.debug(`Component ${X.name} failed to register with FirebaseApp ${H.name}`,Me)}}function qt(H,X){H.container.addOrOverwriteComponent(X)}function wr(H){const X=H.name;if(mn.has(X))return $.debug(`There were multiple attempts to register component ${X}.`),!1;mn.set(X,H);for(const Me of Kt.values())Jt(Me,H);return!0}function Ht(H,X){const Me=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),H.container.getProvider(X)}function Ot(H,X,Me=Ft){Ht(H,X).clearInstance(Me)}function Ji(){mn.clear()}const ir=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Er{constructor(X,Me,Ke){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Ke,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const Ti="9.8.2";function vs(H,X={}){"object"!=typeof X&&(X={name:X});const Me=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},X),Ke=Me.name;if("string"!=typeof Ke||!Ke)throw ir.create("bad-app-name",{appName:String(Ke)});const dt=Kt.get(Ke);if(dt){if((0,ie.vZ)(H,dt.options)&&(0,ie.vZ)(Me,dt.config))return dt;throw ir.create("duplicate-app",{appName:Ke})}const wt=new J.H0(Ke);for(const vt of mn.values())wt.addComponent(vt);const rn=new Er(H,Me,wt);return Kt.set(Ke,rn),rn}function Kr(H=Ft){const X=Kt.get(H);if(!X)throw ir.create("no-app",{appName:H});return X}function di(){return Array.from(Kt.values())}function ft(H){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,c.Z)(function*(H){const X=H.name;Kt.has(X)&&(Kt.delete(X),yield Promise.all(H.container.getProviders().map(Me=>Me.delete())),H.isDeleted=!0)})).apply(this,arguments)}function cn(H,X,Me){var Ke;let dt=null!==(Ke=Ge[H])&&void 0!==Ke?Ke:H;Me&&(dt+=`-${Me}`);const wt=dt.match(/\s|\//),rn=X.match(/\s|\//);if(wt||rn){const vt=[`Unable to register library "${dt}" with version "${X}":`];return wt&&vt.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),wt&&rn&&vt.push("and"),rn&&vt.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void $.warn(vt.join(" "))}wr(new J.wA(`${dt}-version`,()=>({library:dt,version:X}),"VERSION"))}function yn(H,X){if(null!==H&&"function"!=typeof H)throw ir.create("invalid-log-argument");(0,O.Am)(H,X)}function Ys(H){(0,O.Ub)(H)}const bn="firebase-heartbeat-store";let hi=null;function xo(){return hi||(hi=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:(H,X)=>{0===X&&H.createObjectStore(bn)}}).catch(H=>{throw ir.create("storage-open",{originalErrorMessage:H.message})})),hi}function rt(){return(rt=(0,c.Z)(function*(H){try{return(yield xo()).transaction(bn).objectStore(bn).get(Jr(H))}catch(X){throw ir.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function yt(H,X){return sr.apply(this,arguments)}function sr(){return(sr=(0,c.Z)(function*(H,X){try{const Ke=(yield xo()).transaction(bn,"readwrite");return yield Ke.objectStore(bn).put(X,Jr(H)),Ke.done}catch(Me){throw ir.create("storage-set",{originalErrorMessage:Me.message})}})).apply(this,arguments)}function Jr(H){return`${H.name}!${H.options.appId}`}class or{constructor(X){this.container=X,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new G(Me),this._heartbeatsCachePromise=this._storage.read().then(Ke=>(this._heartbeatsCache=Ke,Ke))}triggerHeartbeat(){var X=this;return(0,c.Z)(function*(){const Ke=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=ar();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==dt&&!X._heartbeatsCache.heartbeats.some(wt=>wt.date===dt))return X._heartbeatsCache.heartbeats.push({date:dt,agent:Ke}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(wt=>{const rn=new Date(wt.date).valueOf();return Date.now()-rn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,c.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Me=ar(),{heartbeatsToSend:Ke,unsentEntries:dt}=function L(H,X=1024){const Me=[];let Ke=H.slice();for(const dt of H){const wt=Me.find(rn=>rn.agent===dt.agent);if(wt){if(wt.dates.push(dt.date),Z(Me)>X){wt.dates.pop();break}}else if(Me.push({agent:dt.agent,dates:[dt.date]}),Z(Me)>X){Me.pop();break}Ke=Ke.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Ke}}(X._heartbeatsCache.heartbeats),wt=(0,ie.L)(JSON.stringify({version:2,heartbeats:Ke}));return X._heartbeatsCache.lastSentHeartbeatDate=Me,dt.length>0?(X._heartbeatsCache.heartbeats=dt,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),wt})()}}function ar(){return(new Date).toISOString().substring(0,10)}class G{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,c.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function jt(H){return rt.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Me=this;return(0,c.Z)(function*(){var Ke;if(yield Me._canUseIndexedDBPromise){const wt=yield Me.read();return yt(Me.app,{lastSentHeartbeatDate:null!==(Ke=X.lastSentHeartbeatDate)&&void 0!==Ke?Ke:wt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Me=this;return(0,c.Z)(function*(){var Ke;if(yield Me._canUseIndexedDBPromise){const wt=yield Me.read();return yt(Me.app,{lastSentHeartbeatDate:null!==(Ke=X.lastSentHeartbeatDate)&&void 0!==Ke?Ke:wt.lastSentHeartbeatDate,heartbeats:[...wt.heartbeats,...X.heartbeats]})}})()}}function Z(H){return(0,ie.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Ce(H){wr(new J.wA("platform-logger",X=>new de(X),"PRIVATE")),wr(new J.wA("heartbeat",X=>new or(X),"PRIVATE")),cn(se,"0.7.25",H),cn(se,"0.7.25","esm2017"),cn("fire-js","")}("")},4859:(qe,me,N)=>{N.d(me,{H0:()=>se,wA:()=>O});var c=N(5861),J=N(2090);class O{constructor($,j,K){this.name=$,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ie="[DEFAULT]";class ne{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const K=new J.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:j});Be&&K.resolve(Be)}catch(Be){}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const K=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Be=null!==(j=null==$?void 0:$.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(xe){if(Be)return null;throw xe}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(le){return"EAGER"===le.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(j){}for(const[j,K]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(j);try{const xe=this.getOrInitializeService({instanceIdentifier:Be});K.resolve(xe)}catch(xe){}}}}clearInstance($=ie){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,c.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ie){return this.instances.has($)}getOptions($=ie){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,K=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[xe,Ae]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(xe)&&Ae.resolve(Be);return Be}onInit($,j){var K;const Be=this.normalizeInstanceIdentifier(j),xe=null!==(K=this.onInitCallbacks.get(Be))&&void 0!==K?K:new Set;xe.add($),this.onInitCallbacks.set(Be,xe);const Ae=this.instances.get(Be);return Ae&&$(Ae,Be),()=>{xe.delete($)}}invokeOnInitCallbacks($,j){const K=this.onInitCallbacks.get(j);if(K)for(const Be of K)try{Be($,j)}catch(xe){}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let K=this.instances.get($);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(le=$,le===ie?void 0:le),options:j}),this.instances.set($,K),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(K,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,K)}catch(Be){}var le;return K||null}normalizeInstanceIdentifier($=ie){return this.component?this.component.multipleInstances?$:ie:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new ne($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(qe,me,N)=>{N.d(me,{Am:()=>le,Ub:()=>se,Yd:()=>ue,in:()=>J});const c=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ie=J.INFO,ne={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},de=($,j,...K)=>{if(j<$.logLevel)return;const Be=(new Date).toISOString(),xe=ne[j];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[xe](`[${Be}]  ${$.name}:`,...K)};class ue{constructor(j){this.name=j,this._logLevel=ie,this._logHandler=de,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in J))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...j),this._logHandler(this,J.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...j),this._logHandler(this,J.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,J.INFO,...j),this._logHandler(this,J.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,J.WARN,...j),this._logHandler(this,J.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...j),this._logHandler(this,J.ERROR,...j)}}function se($){c.forEach(j=>{j.setLogLevel($)})}function le($,j){for(const K of c){let Be=null;j&&j.level&&(Be=O[j.level]),K.userLogHandler=null===$?null:(xe,Ae,...Qe)=>{const ye=Qe.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(We){return null}}).filter(be=>be).join(" ");Ae>=(null!=Be?Be:xe.logLevel)&&$({level:J[Ae].toLowerCase(),message:ye,args:Qe,type:xe.name})}}}},8766:(qe,me,N)=>{N.d(me,{Lj:()=>Se,X3:()=>et});var c=N(5861);let O,ie;const ue=new WeakMap,se=new WeakMap,le=new WeakMap,$=new WeakMap,j=new WeakMap;let xe={get(B,we,z){if(B instanceof IDBTransaction){if("done"===we)return se.get(B);if("objectStoreNames"===we)return B.objectStoreNames||le.get(B);if("store"===we)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return be(B[we])},set:(B,we,z)=>(B[we]=z,!0),has:(B,we)=>B instanceof IDBTransaction&&("done"===we||"store"===we)||we in B};function ye(B){return"function"==typeof B?function Qe(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...we){return B.apply(We(this),we),be(ue.get(this))}:function(...we){return be(B.apply(We(this),we))}:function(we,...z){const re=B.call(We(this),we,...z);return le.set(re,we.sort?we.sort():[we]),be(re)}}(B):(B instanceof IDBTransaction&&function Be(B){if(se.has(B))return;const we=new Promise((z,re)=>{const ee=()=>{B.removeEventListener("complete",ge),B.removeEventListener("error",oe),B.removeEventListener("abort",oe)},ge=()=>{z(),ee()},oe=()=>{re(B.error||new DOMException("AbortError","AbortError")),ee()};B.addEventListener("complete",ge),B.addEventListener("error",oe),B.addEventListener("abort",oe)});se.set(B,we)}(B),((B,we)=>we.some(z=>B instanceof z))(B,function ne(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,xe):B)}function be(B){if(B instanceof IDBRequest)return function K(B){const we=new Promise((z,re)=>{const ee=()=>{B.removeEventListener("success",ge),B.removeEventListener("error",oe)},ge=()=>{z(be(B.result)),ee()},oe=()=>{re(B.error),ee()};B.addEventListener("success",ge),B.addEventListener("error",oe)});return we.then(z=>{z instanceof IDBCursor&&ue.set(z,B)}).catch(()=>{}),j.set(we,B),we}(B);if($.has(B))return $.get(B);const we=ye(B);return we!==B&&($.set(B,we),j.set(we,B)),we}const We=B=>j.get(B);function et(B,we,{blocked:z,upgrade:re,blocking:ee,terminated:ge}={}){const oe=indexedDB.open(B,we),Ne=be(oe);return re&&oe.addEventListener("upgradeneeded",at=>{re(be(oe.result),at.oldVersion,at.newVersion,be(oe.transaction))}),z&&oe.addEventListener("blocked",()=>z()),Ne.then(at=>{ge&&at.addEventListener("close",()=>ge()),ee&&at.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Ne}function Se(B,{blocked:we}={}){const z=indexedDB.deleteDatabase(B);return we&&z.addEventListener("blocked",()=>we()),be(z).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function Ve(B,we){if(!(B instanceof IDBDatabase)||we in B||"string"!=typeof we)return;if(Ue.get(we))return Ue.get(we);const z=we.replace(/FromIndex$/,""),re=we!==z,ee=Ie.includes(z);if(!(z in(re?IDBIndex:IDBObjectStore).prototype)||!ee&&!Ee.includes(z))return;const ge=function(){var oe=(0,c.Z)(function*(Ne,...at){const Bt=this.transaction(Ne,ee?"readwrite":"readonly");let Ft=Bt.store;return re&&(Ft=Ft.index(at.shift())),(yield Promise.all([Ft[z](...at),ee&&Bt.done]))[0]});return function(at){return oe.apply(this,arguments)}}();return Ue.set(we,ge),ge}!function Ae(B){xe=B(xe)}(B=>TM(DM({},B),{get:(we,z,re)=>Ve(we,z)||B.get(we,z,re),has:(we,z)=>!!Ve(we,z)||B.has(we,z)}))},5861:(qe,me,N)=>{function c(O,ie,ne,de,ue,se,le){try{var $=O[se](le),j=$.value}catch(K){return void ne(K)}$.done?ie(j):Promise.resolve(j).then(de,ue)}function J(O){return function(){var ie=this,ne=arguments;return new Promise(function(de,ue){var se=O.apply(ie,ne);function le(j){c(se,de,ue,le,$,"next",j)}function $(j){c(se,de,ue,le,$,"throw",j)}le(void 0)})}}N.d(me,{Z:()=>J})}},qe=>{qe(qe.s=8171)}]);