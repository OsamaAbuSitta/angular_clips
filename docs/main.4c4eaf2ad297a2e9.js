var pS=Object.defineProperty,gS=Object.defineProperties,mS=Object.getOwnPropertyDescriptors,wT=Object.getOwnPropertySymbols,vS=Object.prototype.hasOwnProperty,yS=Object.prototype.propertyIsEnumerable,CT=(Gt,rt,U)=>rt in Gt?pS(Gt,rt,{enumerable:!0,configurable:!0,writable:!0,value:U}):Gt[rt]=U,xT=(Gt,rt)=>{for(var U in rt||(rt={}))vS.call(rt,U)&&CT(Gt,U,rt[U]);if(wT)for(var U of wT(rt))yS.call(rt,U)&&CT(Gt,U,rt[U]);return Gt},IT=(Gt,rt)=>gS(Gt,mS(rt));(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{440:(Gt,rt,U)=>{"use strict";U.d(rt,{nm:()=>Wr});var E=U(5813);U(5e3),U(5867);var ne=U(5861),be=U(9681),Ke=U(4859),gt=U(2090),xt=U(1877);const X=new Map,he={activated:!1,tokenObservers:[]},J={initialized:!1,enabled:!1};function Ae(Ct){return X.get(Ct)||he}function Ee(Ct,mt){X.set(Ct,mt)}function je(){return J}class $t{constructor(mt,jt,nn,Dn,Sn){if(this.operation=mt,this.retryPolicy=jt,this.getWaitDuration=nn,this.lowerBound=Dn,this.upperBound=Sn,this.pending=null,this.nextErrorWaitInterval=Dn,Dn>Sn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(mt){var jt=this;return(0,ne.Z)(function*(){jt.stop();try{jt.pending=new gt.BH,yield function cn(Ct){return new Promise(mt=>{setTimeout(mt,Ct)})}(jt.getNextRun(mt)),jt.pending.resolve(),yield jt.pending.promise,jt.pending=new gt.BH,yield jt.operation(),jt.pending.resolve(),yield jt.pending.promise,jt.process(!0).catch(()=>{})}catch(nn){jt.retryPolicy(nn)?jt.process(!1).catch(()=>{}):jt.stop()}})()}getNextRun(mt){if(mt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const jt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),jt}}}const Nt=new gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ln(Ct){if(!Ae(Ct).activated)throw Nt.create("use-before-activation",{appName:Ct.name})}function Cr(Ct,mt){return kr.apply(this,arguments)}function kr(){return(kr=(0,ne.Z)(function*({url:Ct,body:mt},jt){const nn={"Content-Type":"application/json"},Dn=jt.getImmediate({optional:!0});if(Dn){const os=yield Dn.getHeartbeatsHeader();os&&(nn["X-Firebase-Client"]=os)}const Sn={method:"POST",body:JSON.stringify(mt),headers:nn};let zr,di;try{zr=yield fetch(Ct,Sn)}catch(os){throw Nt.create("fetch-network-error",{originalErrorMessage:os.message})}if(200!==zr.status)throw Nt.create("fetch-status-error",{httpStatus:zr.status});try{di=yield zr.json()}catch(os){throw Nt.create("fetch-parse-error",{originalErrorMessage:os.message})}const qr=di.ttl.match(/^([\d.]+)(s)$/);if(!qr||!qr[2]||isNaN(Number(qr[1])))throw Nt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${di.ttl}`});const yo=1e3*Number(qr[1]),ki=Date.now();return{token:di.token,expireTimeMillis:ki+yo,issuedAtTimeMillis:ki}})).apply(this,arguments)}function Mr(Ct,mt){const{projectId:jt,appId:nn,apiKey:Dn}=Ct.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${jt}/apps/${nn}:exchangeDebugToken?key=${Dn}`,body:{debug_token:mt}}}const Kn="firebase-app-check-store";let Cn=null;function Vi(){return Cn||(Cn=new Promise((Ct,mt)=>{try{const jt=indexedDB.open("firebase-app-check-database",1);jt.onsuccess=nn=>{Ct(nn.target.result)},jt.onerror=nn=>{var Dn;mt(Nt.create("storage-open",{originalErrorMessage:null===(Dn=nn.target.error)||void 0===Dn?void 0:Dn.message}))},jt.onupgradeneeded=nn=>{0===nn.oldVersion&&nn.target.result.createObjectStore(Kn,{keyPath:"compositeKey"})}}catch(jt){mt(Nt.create("storage-open",{originalErrorMessage:jt.message}))}}),Cn)}function Rr(){return(Rr=(0,ne.Z)(function*(Ct,mt){const nn=(yield Vi()).transaction(Kn,"readwrite"),Sn=nn.objectStore(Kn).put({compositeKey:Ct,value:mt});return new Promise((zr,di)=>{Sn.onsuccess=qr=>{zr()},nn.onerror=qr=>{var yo;di(Nt.create("storage-set",{originalErrorMessage:null===(yo=qr.target.error)||void 0===yo?void 0:yo.message}))}})})).apply(this,arguments)}const yi=new xt.Yd("@firebase/app-check");function Hr(Ct,mt){return(0,gt.hl)()?function xr(Ct,mt){return function Hi(Ct,mt){return Rr.apply(this,arguments)}(function ci(Ct){return`${Ct.options.appId}-${Ct.name}`}(Ct),mt)}(Ct,mt).catch(jt=>{yi.warn(`Failed to write token to IndexedDB. Error: ${jt}`)}):Promise.resolve()}function ut(){return je().enabled}function dt(){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,ne.Z)(function*(){const Ct=je();if(Ct.enabled&&Ct.token)return Ct.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Mt={error:"UNKNOWN_ERROR"};function sn(Ct){return gt.US.encodeString(JSON.stringify(Ct),!1)}function jn(Ct){return ge.apply(this,arguments)}function ge(){return(ge=(0,ne.Z)(function*(Ct,mt=!1){const jt=Ct.app;Ln(jt);const nn=Ae(jt);let Sn,Dn=nn.token;if(!Dn){const qr=yield nn.cachedTokenPromise;qr&&Qr(qr)&&(Dn=qr)}if(!mt&&Dn&&Qr(Dn))return{token:Dn.token};let di,zr=!1;if(ut()){nn.exchangeTokenPromise||(nn.exchangeTokenPromise=Cr(Mr(jt,yield dt()),Ct.heartbeatServiceProvider).then(yo=>(nn.exchangeTokenPromise=void 0,yo)),zr=!0);const qr=yield nn.exchangeTokenPromise;return yield Hr(jt,qr),Ee(jt,Object.assign(Object.assign({},nn),{token:qr})),{token:qr.token}}try{nn.exchangeTokenPromise||(nn.exchangeTokenPromise=nn.provider.getToken().then(qr=>(nn.exchangeTokenPromise=void 0,qr)),zr=!0),Dn=yield nn.exchangeTokenPromise}catch(qr){"appCheck/throttled"===qr.code?yi.warn(qr.message):yi.error(qr),Sn=qr}return Dn?(di={token:Dn.token},Ee(jt,Object.assign(Object.assign({},nn),{token:Dn})),yield Hr(jt,Dn)):di=Ot(Sn),zr&&Qn(jt,di),di})).apply(this,arguments)}function Ue(Ct,mt){const jt=Ae(Ct),nn=jt.tokenObservers.filter(Dn=>Dn.next!==mt);0===nn.length&&jt.tokenRefresher&&jt.tokenRefresher.isRunning()&&jt.tokenRefresher.stop(),Ee(Ct,Object.assign(Object.assign({},jt),{tokenObservers:nn}))}function At(Ct){const{app:mt}=Ct,jt=Ae(mt);let nn=jt.tokenRefresher;nn||(nn=function on(Ct){const{app:mt}=Ct;return new $t((0,ne.Z)(function*(){let nn;if(nn=Ae(mt).token?yield jn(Ct,!0):yield jn(Ct),nn.error)throw nn.error}),()=>!0,()=>{const jt=Ae(mt);if(jt.token){let nn=jt.token.issuedAtTimeMillis+.5*(jt.token.expireTimeMillis-jt.token.issuedAtTimeMillis)+3e5;return nn=Math.min(nn,jt.token.expireTimeMillis-3e5),Math.max(0,nn-Date.now())}return 0},3e4,96e4)}(Ct),Ee(mt,Object.assign(Object.assign({},jt),{tokenRefresher:nn}))),!nn.isRunning()&&jt.isTokenAutoRefreshEnabled&&nn.start()}function Qn(Ct,mt){const jt=Ae(Ct).tokenObservers;for(const nn of jt)try{"EXTERNAL"===nn.type&&null!=mt.error?nn.error(mt.error):nn.next(mt)}catch(Dn){}}function Qr(Ct){return Ct.expireTimeMillis-Date.now()>0}function Ot(Ct){return{token:sn(Mt),error:Ct}}class ht{constructor(mt,jt){this.app=mt,this.heartbeatServiceProvider=jt}_delete(){const{tokenObservers:mt}=Ae(this.app);for(const jt of mt)Ue(this.app,jt.next);return Promise.resolve()}}const Di="app-check-internal";!function Ai(){(0,be._registerComponent)(new Ke.wA("app-check",Ct=>function Be(Ct,mt){return new ht(Ct,mt)}(Ct.getProvider("app").getImmediate(),Ct.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ct,mt,jt)=>{Ct.getProvider(Di).initialize()})),(0,be._registerComponent)(new Ke.wA(Di,Ct=>function bt(Ct){return{getToken:mt=>jn(Ct,mt),addTokenListener:mt=>function xe(Ct,mt,jt,nn){const{app:Dn}=Ct,Sn=Ae(Dn),zr={next:jt,error:nn,type:mt};if(Ee(Dn,Object.assign(Object.assign({},Sn),{tokenObservers:[...Sn.tokenObservers,zr]})),Sn.token&&Qr(Sn.token)){const di=Sn.token;Promise.resolve().then(()=>{jt({token:di.token}),At(Ct)}).catch(()=>{})}Sn.cachedTokenPromise.then(()=>At(Ct))}(Ct,"INTERNAL",mt),removeTokenListener:mt=>Ue(Ct.app,mt)}}(Ct.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,be.registerVersion)("@firebase/app-check","0.5.8")}();class Wr{constructor(){return(0,E.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Gt,rt,U)=>{"use strict";U.d(rt,{zQ:()=>We,ww:()=>St,rT:()=>J,f7:()=>Ee,L6:()=>X,_Q:()=>he,lh:()=>Ae,Qv:()=>xt,nw:()=>je});var E=U(5e3),k=U(7579),oe=U(9646),Ne=U(9751),Pe=U(8996),ke=U(6451),Ge=U(6063);class Y extends k.x{constructor(wt=1/0,Dt=1/0,Et=Ge.l){super(),this._bufferSize=wt,this._windowTime=Dt,this._timestampProvider=Et,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Dt===1/0,this._bufferSize=Math.max(1,wt),this._windowTime=Math.max(1,Dt)}next(wt){const{isStopped:Dt,_buffer:Et,_infiniteTimeWindow:$t,_timestampProvider:cn,_windowTime:Yt}=this;Dt||(Et.push(wt),!$t&&Et.push(cn.now()+Yt)),this._trimBuffer(),super.next(wt)}_subscribe(wt){this._throwIfClosed(),this._trimBuffer();const Dt=this._innerSubscribe(wt),{_infiniteTimeWindow:Et,_buffer:$t}=this,cn=$t.slice();for(let Yt=0;Yt<cn.length&&!wt.closed;Yt+=Et?1:2)wt.next(cn[Yt]);return this._checkFinalizedStatuses(wt),Dt}_trimBuffer(){const{_bufferSize:wt,_timestampProvider:Dt,_buffer:Et,_infiniteTimeWindow:$t}=this,cn=($t?1:2)*wt;if(wt<1/0&&cn<Et.length&&Et.splice(0,Et.length-cn),!$t){const Yt=Dt.now();let Nt=0;for(let fn=1;fn<Et.length&&Et[fn]<=Yt;fn+=2)Nt=fn;Nt&&Et.splice(0,Nt+1)}}}var Xe=U(3099);function pe(ct,wt,Dt){let Et,$t=!1;return ct&&"object"==typeof ct?({bufferSize:Et=1/0,windowTime:wt=1/0,refCount:$t=!1,scheduler:Dt}=ct):Et=null!=ct?ct:1/0,(0,Xe.B)({connector:()=>new Y(Et,wt,Dt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$t})}var Me=U(3900),Oe=U(576);function et(ct,wt){return(0,Oe.m)(wt)?(0,Me.w)(()=>ct,wt):(0,Me.w)(()=>ct)}var Je=U(5363),ft=U(4004),it=U(590),He=U(9468),$e=U(9300),Tt=U(5813),ie=U(2011),ne=U(9808),be=U(440),Ke=U(127);const xt=new E.OlP("angularfire2.auth.use-emulator"),X=new E.OlP("angularfire2.auth.settings"),he=new E.OlP("angularfire2.auth.tenant-id"),J=new E.OlP("angularfire2.auth.langugage-code"),Ae=new E.OlP("angularfire2.auth.use-device-language"),Ee=new E.OlP("angularfire.auth.persistence"),je=(ct,wt,Dt,Et,$t,cn,Yt,Nt)=>(0,ie.cc)(`${ct.name}.auth`,"AngularFireAuth",ct.name,()=>{const fn=wt.runOutsideAngular(()=>ct.auth());if(Dt&&fn.useEmulator(...Dt),Et&&(fn.tenantId=Et),fn.languageCode=$t,cn&&fn.useDeviceLanguage(),Yt)for(const[Ln,Vn]of Object.entries(Yt))fn.settings[Ln]=Vn;return Nt&&fn.setPersistence(Nt),fn},[Dt,Et,$t,cn,Yt,Nt]);let We=(()=>{class ct{constructor(Dt,Et,$t,cn,Yt,Nt,fn,Ln,Vn,Ar,vr,Cr){const kr=new k.x,ur=(0,oe.of)(void 0).pipe((0,Je.Q)(Yt.outsideAngular),(0,Me.w)(()=>cn.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,8775)))),(0,ft.U)(()=>(0,ie.on)(Dt,cn,Et)),(0,ft.U)(Lr=>je(Lr,cn,Nt,Ln,Vn,Ar,fn,vr)),pe({bufferSize:1,refCount:!1}));if((0,ne.PM)($t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,oe.of)(null);else{ur.pipe((0,it.P)()).subscribe();const Mr=ur.pipe((0,Me.w)(Kn=>Kn.getRedirectResult().then(pr=>pr,()=>null)),Tt.iC,pe({bufferSize:1,refCount:!1})),Pr=ur.pipe((0,Me.w)(Kn=>new Ne.y(pr=>({unsubscribe:cn.runOutsideAngular(()=>Kn.onAuthStateChanged(Cn=>pr.next(Cn),Cn=>pr.error(Cn),()=>pr.complete()))})))),Mn=ur.pipe((0,Me.w)(Kn=>new Ne.y(pr=>({unsubscribe:cn.runOutsideAngular(()=>Kn.onIdTokenChanged(Cn=>pr.next(Cn),Cn=>pr.error(Cn),()=>pr.complete()))}))));this.authState=Mr.pipe(et(Pr),(0,He.R)(Yt.outsideAngular),(0,Je.Q)(Yt.insideAngular)),this.user=Mr.pipe(et(Mn),(0,He.R)(Yt.outsideAngular),(0,Je.Q)(Yt.insideAngular)),this.idToken=this.user.pipe((0,Me.w)(Kn=>Kn?(0,Pe.D)(Kn.getIdToken()):(0,oe.of)(null))),this.idTokenResult=this.user.pipe((0,Me.w)(Kn=>Kn?(0,Pe.D)(Kn.getIdTokenResult()):(0,oe.of)(null))),this.credential=(0,ke.T)(Mr,kr,this.authState.pipe((0,$e.h)(Kn=>!Kn))).pipe((0,ft.U)(Kn=>(null==Kn?void 0:Kn.user)?Kn:null),(0,He.R)(Yt.outsideAngular),(0,Je.Q)(Yt.insideAngular))}return(0,ie.pX)(this,ur,cn,{spy:{apply:(Lr,Mr,Pr)=>{(Lr.startsWith("signIn")||Lr.startsWith("createUser"))&&Pr.then(Mn=>kr.next(Mn))}}})}}return ct.\u0275fac=function(Dt){return new(Dt||ct)(E.LFG(ie.Dh),E.LFG(ie.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Tt.HU),E.LFG(xt,8),E.LFG(X,8),E.LFG(he,8),E.LFG(J,8),E.LFG(Ae,8),E.LFG(Ee,8),E.LFG(be.nm,8))},ct.\u0275prov=E.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"any"}),ct})(),St=(()=>{class ct{constructor(){Ke.Z.registerVersion("angularfire",Tt.q4.full,"auth-compat")}}return ct.\u0275fac=function(Dt){return new(Dt||ct)},ct.\u0275mod=E.oAB({type:ct}),ct.\u0275inj=E.cJS({providers:[We]}),ct})()},7566:(Gt,rt,U)=>{"use strict";U.d(rt,{ST:()=>bf,yb:()=>xp});var E=U(5e3),k=U(4986),oe=U(9751),Ne=U(8996),Pe=U(9646),ke=U(5813),Ge=U(4482),Y=U(5403);function Xe(){return(0,Ge.e)((l,e)=>{let n,d=!1;l.subscribe((0,Y.x)(e,p=>{const _=n;n=p,d&&e.next([_,p]),d=!0}))})}var pe=U(4671);function Oe(l,e){return l===e}var J,et=U(8675),Je=U(4004),ft=U(5026),it=U(9300),He=U(2011),$e=U(9808),ie=(U(8775),U(3942)),ne=U(5861),be=U(9681),Ke=U(4859),gt=U(1877),xt=U(2090),X="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},he={},Ae=Ae||{},Ee=X||self;function je(){}function We(l){var e=typeof l;return"array"==(e="object"!=e?e:l?Array.isArray(l)?"array":e:"null")||"object"==e&&"number"==typeof l.length}function St(l){var e=typeof l;return"object"==e&&null!=l||"function"==e}var wt="closure_uid_"+(1e9*Math.random()>>>0),Dt=0;function Et(l,e,n){return l.call.apply(l.bind,arguments)}function $t(l,e,n){if(!l)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,d),l.apply(e,p)}}return function(){return l.apply(e,arguments)}}function cn(l,e,n){return(cn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Et:$t).apply(null,arguments)}function Yt(l,e){var n=Array.prototype.slice.call(arguments,1);return function(){var d=n.slice();return d.push.apply(d,arguments),l.apply(this,d)}}function Nt(l,e){function n(){}n.prototype=e.prototype,l.Z=e.prototype,l.prototype=new n,l.prototype.constructor=l,l.Vb=function(d,p,_){for(var w=Array(arguments.length-2),j=2;j<arguments.length;j++)w[j-2]=arguments[j];return e.prototype[p].apply(d,w)}}function fn(){this.s=this.s,this.o=this.o}var Vn={};fn.prototype.s=!1,fn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var l=function ct(l){return Object.prototype.hasOwnProperty.call(l,wt)&&l[wt]||(l[wt]=++Dt)}(this);delete Vn[l]}},fn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ar=Array.prototype.indexOf?function(l,e){return Array.prototype.indexOf.call(l,e,void 0)}:function(l,e){if("string"==typeof l)return"string"!=typeof e||1!=e.length?-1:l.indexOf(e,0);for(let n=0;n<l.length;n++)if(n in l&&l[n]===e)return n;return-1},vr=Array.prototype.forEach?function(l,e,n){Array.prototype.forEach.call(l,e,n)}:function(l,e,n){const d=l.length,p="string"==typeof l?l.split(""):l;for(let _=0;_<d;_++)_ in p&&e.call(n,p[_],_,l)};function kr(l){return Array.prototype.concat.apply([],arguments)}function ur(l){const e=l.length;if(0<e){const n=Array(e);for(let d=0;d<e;d++)n[d]=l[d];return n}return[]}function Lr(l){return/^[\s\xa0]*$/.test(l)}var Kn,Mr=String.prototype.trim?function(l){return l.trim()}:function(l){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(l)[1]};function Pr(l,e){return-1!=l.indexOf(e)}function Mn(l,e){return l<e?-1:l>e?1:0}e:{var pr=Ee.navigator;if(pr){var Cn=pr.userAgent;if(Cn){Kn=Cn;break e}}Kn=""}function Vi(l,e,n){for(const d in l)e.call(n,l[d],d,l)}function hr(l){const e={};for(const n in l)e[n]=l[n];return e}var xr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ri(l,e){let n,d;for(let p=1;p<arguments.length;p++){for(n in d=arguments[p],d)l[n]=d[n];for(let _=0;_<xr.length;_++)n=xr[_],Object.prototype.hasOwnProperty.call(d,n)&&(l[n]=d[n])}}function Ni(l){return Ni[" "](l),l}Ni[" "]=je;var Hr,l,Rr=Pr(Kn,"Opera"),Nn=Pr(Kn,"Trident")||Pr(Kn,"MSIE"),Jn=Pr(Kn,"Edge"),ci=Jn||Nn,yi=Pr(Kn,"Gecko")&&!(Pr(Kn.toLowerCase(),"webkit")&&!Pr(Kn,"Edge"))&&!(Pr(Kn,"Trident")||Pr(Kn,"MSIE"))&&!Pr(Kn,"Edge"),cr=Pr(Kn.toLowerCase(),"webkit")&&!Pr(Kn,"Edge");function xn(){var l=Ee.document;return l?l.documentMode:void 0}e:{var _i="",Ye=(l=Kn,yi?/rv:([^\);]+)(\)|;)/.exec(l):Jn?/Edge\/([\d\.]+)/.exec(l):Nn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(l):cr?/WebKit\/(\S+)/.exec(l):Rr?/(?:Version)[ \/]?(\S+)/.exec(l):void 0);if(Ye&&(_i=Ye?Ye[1]:""),Nn){var ut=xn();if(null!=ut&&ut>parseFloat(_i)){Hr=String(ut);break e}}Hr=_i}var dt={};var sn=Ee.document&&Nn&&(xn()||parseInt(Hr,10))||void 0,jn=function(){if(!Ee.addEventListener||!Object.defineProperty)return!1;var l=!1,e=Object.defineProperty({},"passive",{get:function(){l=!0}});try{Ee.addEventListener("test",je,e),Ee.removeEventListener("test",je,e)}catch(n){}return l}();function ge(l,e){this.type=l,this.g=this.target=e,this.defaultPrevented=!1}function xe(l,e){if(ge.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var n=this.type=l.type,d=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=e,e=l.relatedTarget){if(yi){e:{try{Ni(e.nodeName);var p=!0;break e}catch(_){}p=!1}p||(e=null)}}else"mouseover"==n?e=l.fromElement:"mouseout"==n&&(e=l.toElement);this.relatedTarget=e,d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:Ue[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&xe.Z.h.call(this)}}ge.prototype.h=function(){this.defaultPrevented=!0},Nt(xe,ge);var Ue={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.Z.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var At="closure_listenable_"+(1e6*Math.random()|0),on=0;function Qn(l,e,n,d,p){this.listener=l,this.proxy=null,this.src=e,this.type=n,this.capture=!!d,this.ia=p,this.key=++on,this.ca=this.fa=!1}function Qr(l){l.ca=!0,l.listener=null,l.proxy=null,l.src=null,l.ia=null}function Ot(l){this.src=l,this.g={},this.h=0}function ht(l,e){var n=e.type;if(n in l.g){var _,d=l.g[n],p=Ar(d,e);(_=0<=p)&&Array.prototype.splice.call(d,p,1),_&&(Qr(e),0==l.g[n].length&&(delete l.g[n],l.h--))}}function Be(l,e,n,d){for(var p=0;p<l.length;++p){var _=l[p];if(!_.ca&&_.listener==e&&_.capture==!!n&&_.ia==d)return p}return-1}Ot.prototype.add=function(l,e,n,d,p){var _=l.toString();(l=this.g[_])||(l=this.g[_]=[],this.h++);var w=Be(l,e,d,p);return-1<w?(e=l[w],n||(e.fa=!1)):((e=new Qn(e,this.src,_,!!d,p)).fa=n,l.push(e)),e};var bt="closure_lm_"+(1e6*Math.random()|0),Kt={};function Hn(l,e,n,d,p){if(d&&d.once)return Xr(l,e,n,d,p);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Hn(l,e[_],n,d,p);return null}return n=An(n),l&&l[At]?l.N(e,n,St(d)?!!d.capture:!!d,p):Zn(l,e,n,!1,d,p)}function Zn(l,e,n,d,p,_){if(!e)throw Error("Invalid event type");var w=St(p)?!!p.capture:!!p,j=ls(l);if(j||(l[bt]=j=new Ot(l)),(n=j.add(e,n,d,w,_)).proxy)return n;if(d=function Ir(){var e=oi;return function l(n){return e.call(l.src,l.listener,n)}}(),n.proxy=d,d.src=l,d.listener=n,l.addEventListener)jn||(p=w),void 0===p&&(p=!1),l.addEventListener(e.toString(),d,p);else if(l.attachEvent)l.attachEvent(Jr(e.toString()),d);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(d)}return n}function Xr(l,e,n,d,p){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Xr(l,e[_],n,d,p);return null}return n=An(n),l&&l[At]?l.O(e,n,St(d)?!!d.capture:!!d,p):Zn(l,e,n,!0,d,p)}function wi(l,e,n,d,p){if(Array.isArray(e))for(var _=0;_<e.length;_++)wi(l,e[_],n,d,p);else d=St(d)?!!d.capture:!!d,n=An(n),l&&l[At]?(l=l.i,(e=String(e).toString())in l.g&&-1<(n=Be(_=l.g[e],n,d,p))&&(Qr(_[n]),Array.prototype.splice.call(_,n,1),0==_.length&&(delete l.g[e],l.h--))):l&&(l=ls(l))&&(e=l.g[e.toString()],l=-1,e&&(l=Be(e,n,d,p)),(n=-1<l?e[l]:null)&&mr(n))}function mr(l){if("number"!=typeof l&&l&&!l.ca){var e=l.src;if(e&&e[At])ht(e.i,l);else{var n=l.type,d=l.proxy;e.removeEventListener?e.removeEventListener(n,d,l.capture):e.detachEvent?e.detachEvent(Jr(n),d):e.addListener&&e.removeListener&&e.removeListener(d),(n=ls(e))?(ht(n,l),0==n.h&&(n.src=null,e[bt]=null)):Qr(l)}}}function Jr(l){return l in Kt?Kt[l]:Kt[l]="on"+l}function oi(l,e){if(l.ca)l=!0;else{e=new xe(e,this);var n=l.listener,d=l.ia||l.src;l.fa&&mr(l),l=n.call(d,e)}return l}function ls(l){return(l=l[bt])instanceof Ot?l:null}var cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function An(l){return"function"==typeof l?l:(l[cs]||(l[cs]=function(e){return l.handleEvent(e)}),l[cs])}function Rn(){fn.call(this),this.i=new Ot(this),this.P=this,this.I=null}function fr(l,e){var n,d=l.I;if(d)for(n=[];d;d=d.I)n.push(d);if(l=l.P,d=e.type||e,"string"==typeof e)e=new ge(e,l);else if(e instanceof ge)e.target=e.target||l;else{var p=e;ri(e=new ge(d,l),p)}if(p=!0,n)for(var _=n.length-1;0<=_;_--){var w=e.g=n[_];p=Gi(w,d,!0,e)&&p}if(p=Gi(w=e.g=l,d,!0,e)&&p,p=Gi(w,d,!1,e)&&p,n)for(_=0;_<n.length;_++)p=Gi(w=e.g=n[_],d,!1,e)&&p}function Gi(l,e,n,d){if(!(e=l.i.g[String(e)]))return!0;e=e.concat();for(var p=!0,_=0;_<e.length;++_){var w=e[_];if(w&&!w.ca&&w.capture==n){var j=w.listener,le=w.ia||w.src;w.fa&&ht(l.i,w),p=!1!==j.call(le,d)&&p}}return p&&!d.defaultPrevented}Nt(Rn,fn),Rn.prototype[At]=!0,Rn.prototype.removeEventListener=function(l,e,n,d){wi(this,l,e,n,d)},Rn.prototype.M=function(){if(Rn.Z.M.call(this),this.i){var e,l=this.i;for(e in l.g){for(var n=l.g[e],d=0;d<n.length;d++)Qr(n[d]);delete l.g[e],l.h--}}this.I=null},Rn.prototype.N=function(l,e,n,d){return this.i.add(String(l),e,!1,n,d)},Rn.prototype.O=function(l,e,n,d){return this.i.add(String(l),e,!0,n,d)};var ds=Ee.JSON.stringify;function $i(){var l=Di;let e=null;return l.g&&(e=l.g,l.g=l.g.next,l.g||(l.h=null),e.next=null),e}var hs,ai=new class{constructor(l,e){this.i=l,this.j=e,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}(()=>new vs,l=>l.reset());class vs{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ei(l){Ee.setTimeout(()=>{throw l},0)}function dr(l,e){hs||function ws(){var l=Ee.Promise.resolve(void 0);hs=function(){l.then(Ai)}}(),Io||(hs(),Io=!0),Di.add(l,e)}var Io=!1,Di=new class Ss{constructor(){this.h=this.g=null}add(e,n){const d=ai.get();d.set(e,n),this.h?this.h.next=d:this.g=d,this.h=d}};function Ai(){for(var l;l=$i();){try{l.h.call(l.g)}catch(n){ei(n)}var e=ai;e.j(l),100>e.h&&(e.h++,l.next=e.g,e.g=l)}Io=!1}function Ls(l,e){Rn.call(this),this.h=l||1,this.g=e||Ee,this.j=cn(this.kb,this),this.l=Date.now()}function Cs(l){l.da=!1,l.S&&(l.g.clearTimeout(l.S),l.S=null)}function Wr(l,e,n){if("function"==typeof l)n&&(l=cn(l,n));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=cn(l.handleEvent,l)}return 2147483647<Number(e)?-1:Ee.setTimeout(l,e||0)}function ii(l){l.g=Wr(()=>{l.g=null,l.i&&(l.i=!1,ii(l))},l.j);const e=l.h;l.h=null,l.m.apply(null,e)}Nt(Ls,Rn),(J=Ls.prototype).da=!1,J.S=null,J.kb=function(){if(this.da){var l=Date.now()-this.l;0<l&&l<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-l):(this.S&&(this.g.clearTimeout(this.S),this.S=null),fr(this,"tick"),this.da&&(Cs(this),this.start()))}},J.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},J.M=function(){Ls.Z.M.call(this),Cs(this),delete this.g};class Wo extends fn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ii(this)}M(){super.M(),this.g&&(Ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(l){fn.call(this),this.h=l,this.g={}}Nt(ys,fn);var Xi=[];function so(l,e,n,d){Array.isArray(n)||(n&&(Xi[0]=n.toString()),n=Xi);for(var p=0;p<n.length;p++){var _=Hn(e,n[p],d||l.handleEvent,!1,l.h||l);if(!_)break;l.g[_.key]=_}}function oo(l){Vi(l.g,function(e,n){this.g.hasOwnProperty(n)&&mr(e)},l),l.g={}}function ss(){this.g=!0}function Fs(l,e,n,d){l.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ia(l,e){if(!l.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(l=0;l<n.length;l++)if(Array.isArray(n[l])){var d=n[l];if(!(2>d.length)){var p=d[1];if(Array.isArray(p)&&!(1>p.length)){var _=p[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var w=1;w<p.length;w++)p[w]=""}}}return ds(n)}catch(j){return e}}(l,n)+(d?" "+d:"")})}ys.prototype.M=function(){ys.Z.M.call(this),oo(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ss.prototype.Aa=function(){this.g=!1},ss.prototype.info=function(){};var si={},ao=null;function ra(){return ao=ao||new Rn}function Ct(l){ge.call(this,si.Ma,l)}function mt(l){const e=ra();fr(e,new Ct(e,l))}function jt(l,e){ge.call(this,si.STAT_EVENT,l),this.stat=e}function nn(l){const e=ra();fr(e,new jt(e,l))}function Dn(l,e){ge.call(this,si.Na,l),this.size=e}function Sn(l,e){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return Ee.setTimeout(function(){l()},e)}si.Ma="serverreachability",Nt(Ct,ge),si.STAT_EVENT="statevent",Nt(jt,ge),si.Na="timingevent",Nt(Dn,ge);var zr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},di={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qr(){}function ki(){}qr.prototype.h=null;var jo,os={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ga(){ge.call(this,"d")}function Do(){ge.call(this,"c")}function Zs(){}function ia(l,e,n,d){this.l=l,this.j=e,this.m=n,this.X=d||1,this.V=new ys(this),this.P=Ao,this.W=new Ls(l=ci?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ci}function Ci(){this.i=null,this.g="",this.h=!1}Nt(ga,ge),Nt(Do,ge),Nt(Zs,qr),Zs.prototype.g=function(){return new XMLHttpRequest},Zs.prototype.i=function(){return{}},jo=new Zs;var Ao=45e3,Ys={},_o={};function ma(l,e,n){l.K=1,l.v=Xn(ve(e)),l.s=n,l.U=!0,Ga(l,null)}function Ga(l,e){l.F=Date.now(),Ji(l),l.A=ve(l.v);var n=l.A,d=l.X;Array.isArray(d)||(d=[String(d)]),Uo(n.h,"t",d),l.C=0,n=l.l.H,l.h=new Ci,l.g=Lu(l.l,n?e:null,!l.s),0<l.O&&(l.L=new Wo(cn(l.Ia,l,l.g),l.O)),so(l.V,l.g,"readystatechange",l.gb),e=l.H?hr(l.H):{},l.s?(l.u||(l.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.s,e)):(l.u="GET",l.g.ea(l.A,l.u,null,e)),mt(1),function Ks(l,e,n,d,p,_){l.info(function(){if(l.g)if(_)for(var w="",j=_.split("&"),le=0;le<j.length;le++){var me=j[le].split("=");if(1<me.length){var tt=me[0];me=me[1];var yt=tt.split("_");w=2<=yt.length&&"type"==yt[1]?w+(tt+"=")+me+"&":w+(tt+"=redacted&")}}else w=null;else w=_;return"XMLHTTP REQ ("+d+") [attempt "+p+"]: "+e+"\n"+n+"\n"+w})}(l.j,l.u,l.A,l.m,l.X,l.s)}function sa(l){return!!l.g&&"GET"==l.u&&2!=l.K&&l.l.Ba}function zo(l,e,n){let p,d=!0;for(;!l.I&&l.C<n.length;){if(p=bo(l,n),p==_o){4==e&&(l.o=4,nn(14),d=!1),Fs(l.j,l.m,null,"[Incomplete Response]");break}if(p==Ys){l.o=4,nn(15),Fs(l.j,l.m,n,"[Invalid Chunk]"),d=!1;break}Fs(l.j,l.m,p,null),Wa(l,p)}sa(l)&&p!=_o&&p!=Ys&&(l.h.g="",l.C=0),4!=e||0!=n.length||l.h.h||(l.o=1,nn(16),d=!1),l.i=l.i&&d,d?0<n.length&&!l.aa&&(l.aa=!0,(e=l.l).g==l&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),xs(e),e.L=!0,nn(11))):(Fs(l.j,l.m,n,"[Invalid Chunked Response]"),Li(l),ko(l))}function bo(l,e){var n=l.C,d=e.indexOf("\n",n);return-1==d?_o:(n=Number(e.substring(n,d)),isNaN(n)?Ys:(d+=1)+n>e.length?_o:(e=e.substr(d,n),l.C=d+n,e))}function Ji(l){l.Y=Date.now()+l.P,$a(l,l.P)}function $a(l,e){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Sn(cn(l.eb,l),e)}function Mi(l){l.B&&(Ee.clearTimeout(l.B),l.B=null)}function ko(l){0==l.l.G||l.I||Ta(l.l,l)}function Li(l){Mi(l);var e=l.L;e&&"function"==typeof e.na&&e.na(),l.L=null,Cs(l.W),oo(l.V),l.g&&(e=l.g,l.g=null,e.abort(),e.na())}function Wa(l,e){try{var n=l.l;if(0!=n.G&&(n.g==l||Bt(n.i,l)))if(n.I=l.N,!l.J&&Bt(n.i,l)&&3==n.G){try{var d=n.Ca.g.parse(e)}catch(me){d=null}if(Array.isArray(d)&&3==d.length){var p=d;if(0==p[0])e:if(n.u)n.ta=p[1],0<n.ta-n.U&&37500>p[2]&&n.N&&0==n.A&&!n.v&&(n.v=Sn(cn(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<l.F))break e;al(n),ps(n)}ba(n),nn(18)}if(1>=lt(n.i)&&n.ka){try{n.ka()}catch(me){}n.ka=void 0}}else Oo(n,11)}else if((l.J||n.g==l)&&al(n),!Lr(e))for(p=n.Ca.g.parse(e),e=0;e<p.length;e++){let me=p[e];if(n.U=me[0],me=me[1],2==n.G)if("c"==me[0]){n.J=me[1],n.la=me[2];const tt=me[3];null!=tt&&(n.ma=tt,n.h.info("VER="+n.ma));const yt=me[4];null!=yt&&(n.za=yt,n.h.info("SVER="+n.za));const Wt=me[5];null!=Wt&&"number"==typeof Wt&&0<Wt&&(n.K=d=1.5*Wt,n.h.info("backChannelRequestTimeoutMs_="+d)),d=n;const bn=l.g;if(bn){const Tn=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tn){var _=d.i;!_.g&&(Pr(Tn,"spdy")||Pr(Tn,"quic")||Pr(Tn,"h2"))&&(_.j=_.l,_.g=new Set,_.h&&(mn(_,_.h),_.h=null))}if(d.D){const rr=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;rr&&(d.sa=rr,qt(d.F,d.D,rr))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-l.F,n.h.info("Handshake RTT: "+n.O+"ms"));var w=l;if((d=n).oa=uo(d,d.H?d.la:null,d.W),w.J){Gn(d.i,w);var j=w,le=d.K;le&&j.setTimeout(le),j.B&&(Mi(j),Ji(j)),d.g=w}else Us(d);0<n.l.length&&To(n)}else"stop"!=me[0]&&"close"!=me[0]||Oo(n,7);else 3==n.G&&("stop"==me[0]||"close"==me[0]?"stop"==me[0]?Oo(n,7):nu(n):"noop"!=me[0]&&n.j&&n.j.wa(me),n.A=0)}mt(4)}catch(me){}}function ks(l,e){if(l.forEach&&"function"==typeof l.forEach)l.forEach(e,void 0);else if(We(l)||"string"==typeof l)vr(l,e,void 0);else{if(l.T&&"function"==typeof l.T)var n=l.T();else if(l.R&&"function"==typeof l.R)n=void 0;else if(We(l)||"string"==typeof l){n=[];for(var d=l.length,p=0;p<d;p++)n.push(p)}else for(p in n=[],d=0,l)n[d++]=p;d=function Da(l){if(l.R&&"function"==typeof l.R)return l.R();if("string"==typeof l)return l.split("");if(We(l)){for(var e=[],n=l.length,d=0;d<n;d++)e.push(l[d]);return e}for(d in e=[],n=0,l)e[n++]=l[d];return e}(l),p=d.length;for(var _=0;_<p;_++)e.call(void 0,d[_],n&&n[_],l)}}function Mo(l,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var d=0;d<n;d+=2)this.set(arguments[d],arguments[d+1])}else if(l)if(l instanceof Mo)for(n=l.T(),d=0;d<n.length;d++)this.set(n[d],l.get(n[d]));else for(d in l)this.set(d,l[d])}function qo(l){if(l.i!=l.g.length){for(var e=0,n=0;e<l.g.length;){var d=l.g[e];fs(l.h,d)&&(l.g[n++]=d),e++}l.g.length=n}if(l.i!=l.g.length){var p={};for(n=e=0;e<l.g.length;)fs(p,d=l.g[e])||(l.g[n++]=d,p[d]=1),e++;l.g.length=n}}function fs(l,e){return Object.prototype.hasOwnProperty.call(l,e)}(J=ia.prototype).setTimeout=function(l){this.P=l},J.gb=function(l){l=l.target;const e=this.L;e&&3==Xs(l)?e.l():this.Ia(l)},J.Ia=function(l){try{if(l==this.g)e:{const tt=Xs(this.g);var e=this.g.Da();const yt=this.g.ba();if(!(3>tt)&&(3!=tt||ci||this.g&&(this.h.h||this.g.ga()||za(this.g)))){this.I||4!=tt||7==e||mt(8==e||0>=yt?3:2),Mi(this);var n=this.g.ba();this.N=n;t:if(sa(this)){var d=za(this.g);l="";var p=d.length,_=4==Xs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Li(this),ko(this);var w="";break t}this.h.i=new Ee.TextDecoder}for(e=0;e<p;e++)this.h.h=!0,l+=this.h.i.decode(d[e],{stream:_&&e==p-1});d.splice(0,p),this.h.g+=l,this.C=0,w=this.h.g}else w=this.g.ga();if(this.i=200==n,function vo(l,e,n,d,p,_,w){l.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+p+"]: "+e+"\n"+n+"\n"+_+" "+w})}(this.j,this.u,this.A,this.m,this.X,tt,n),this.i){if(this.$&&!this.J){t:{if(this.g){var j,le=this.g;if((j=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lr(j)){var me=j;break t}}me=null}if(!(n=me)){this.i=!1,this.o=3,nn(12),Li(this),ko(this);break e}Fs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wa(this,n)}this.U?(zo(this,tt,w),ci&&this.i&&3==tt&&(so(this.V,this.W,"tick",this.fb),this.W.start())):(Fs(this.j,this.m,w,null),Wa(this,w)),4==tt&&Li(this),this.i&&!this.I&&(4==tt?Ta(this.l,this):(this.i=!1,Ji(this)))}else 400==n&&0<w.indexOf("Unknown SID")?(this.o=3,nn(12)):(this.o=0,nn(13)),Li(this),ko(this)}}}catch(tt){}},J.fb=function(){if(this.g){var l=Xs(this.g),e=this.g.ga();this.C<e.length&&(Mi(this),zo(this,l,e),this.i&&4!=l&&Ji(this))}},J.cancel=function(){this.I=!0,Li(this)},J.eb=function(){this.B=null;const l=Date.now();0<=l-this.Y?(function pa(l,e){l.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(mt(3),nn(17)),Li(this),this.o=2,ko(this)):$a(this,this.Y-l)},(J=Mo.prototype).R=function(){qo(this);for(var l=[],e=0;e<this.g.length;e++)l.push(this.h[this.g[e]]);return l},J.T=function(){return qo(this),this.g.concat()},J.get=function(l,e){return fs(this.h,l)?this.h[l]:e},J.set=function(l,e){fs(this.h,l)||(this.i++,this.g.push(l)),this.h[l]=e},J.forEach=function(l,e){for(var n=this.T(),d=0;d<n.length;d++){var p=n[d],_=this.get(p);l.call(e,_,p,this)}};var va=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Z(l,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,l instanceof Z){this.g=void 0!==e?e:l.g,z(this,l.j),this.s=l.s,Ce(this,l.i),ot(this,l.m),this.l=l.l,e=l.h;var n=new we;n.i=e.i,e.g&&(n.g=new Mo(e.g),n.h=e.h),Vt(this,n),this.o=l.o}else l&&(n=String(l).match(va))?(this.g=!!e,z(this,n[1]||"",!0),this.s=Sr(n[2]||""),Ce(this,n[3]||"",!0),ot(this,n[4]),this.l=Sr(n[5]||"",!0),Vt(this,n[6]||"",!0),this.o=Sr(n[7]||"")):(this.g=!!e,this.h=new we(null,this.g))}function ve(l){return new Z(l)}function z(l,e,n){l.j=n?Sr(e,!0):e,l.j&&(l.j=l.j.replace(/:$/,""))}function Ce(l,e,n){l.i=n?Sr(e,!0):e}function ot(l,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);l.m=e}else l.m=null}function Vt(l,e,n){e instanceof we?(l.h=e,function _u(l,e){e&&!l.j&&(Zt(l),l.i=null,l.g.forEach(function(n,d){var p=d.toLowerCase();d!=p&&(tr(this,d),Uo(this,p,n))},l)),l.j=e}(l.h,l.g)):(n||(e=jr(e,$)),l.h=new we(e,l.g))}function qt(l,e,n){l.h.set(e,n)}function Xn(l){return qt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Sr(l,e){return l?e?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function jr(l,e,n){return"string"==typeof l?(l=encodeURI(l).replace(e,bi),n&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function bi(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Z.prototype.toString=function(){var l=[],e=this.j;e&&l.push(jr(e,Ti,!0),":");var n=this.i;return(n||"file"==e)&&(l.push("//"),(e=this.s)&&l.push(jr(e,Ti,!0),"@"),l.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&l.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&l.push("/"),l.push(jr(n,"/"==n.charAt(0)?te:Fi,!0))),(n=this.h.toString())&&l.push("?",n),(n=this.o)&&l.push("#",jr(n,B)),l.join("")};var Ti=/[#\/\?@]/g,Fi=/[#\?:]/g,te=/[#\?]/g,$=/[#\?@]/g,B=/#/g;function we(l,e){this.h=this.g=null,this.i=l||null,this.j=!!e}function Zt(l){l.g||(l.g=new Mo,l.h=0,l.i&&function pi(l,e){if(l){l=l.split("&");for(var n=0;n<l.length;n++){var d=l[n].indexOf("="),p=null;if(0<=d){var _=l[n].substring(0,d);p=l[n].substring(d+1)}else _=l[n];e(_,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(l.i,function(e,n){l.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function tr(l,e){Zt(l),e=Qs(l,e),fs(l.g.h,e)&&(l.i=null,l.h-=l.g.get(e).length,fs((l=l.g).h,e)&&(delete l.h[e],l.i--,l.g.length>2*l.i&&qo(l)))}function Pi(l,e){return Zt(l),e=Qs(l,e),fs(l.g.h,e)}function Uo(l,e,n){tr(l,e),0<n.length&&(l.i=null,l.g.set(Qs(l,e),ur(n)),l.h+=n.length)}function Qs(l,e){return e=String(e),l.j&&(e=e.toLowerCase()),e}function G(l){this.l=l||Ie,l=Ee.PerformanceNavigationTiming?0<(l=Ee.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(Ee.g&&Ee.g.Ea&&Ee.g.Ea()&&Ee.g.Ea().Zb),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(J=we.prototype).add=function(l,e){Zt(this),this.i=null,l=Qs(this,l);var n=this.g.get(l);return n||this.g.set(l,n=[]),n.push(e),this.h+=1,this},J.forEach=function(l,e){Zt(this),this.g.forEach(function(n,d){vr(n,function(p){l.call(e,p,d,this)},this)},this)},J.T=function(){Zt(this);for(var l=this.g.R(),e=this.g.T(),n=[],d=0;d<e.length;d++)for(var p=l[d],_=0;_<p.length;_++)n.push(e[d]);return n},J.R=function(l){Zt(this);var e=[];if("string"==typeof l)Pi(this,l)&&(e=kr(e,this.g.get(Qs(this,l))));else{l=this.g.R();for(var n=0;n<l.length;n++)e=kr(e,l[n])}return e},J.set=function(l,e){return Zt(this),this.i=null,Pi(this,l=Qs(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[e]),this.h+=1,this},J.get=function(l,e){return l&&0<(l=this.R(l)).length?String(l[0]):e},J.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var l=[],e=this.g.T(),n=0;n<e.length;n++){var d=e[n],p=encodeURIComponent(String(d));d=this.R(d);for(var _=0;_<d.length;_++){var w=p;""!==d[_]&&(w+="="+encodeURIComponent(String(d[_]))),l.push(w)}}return this.i=l.join("&")};var Ie=10;function Qe(l){return!!l.h||!!l.g&&l.g.size>=l.j}function lt(l){return l.h?1:l.g?l.g.size:0}function Bt(l,e){return l.h?l.h==e:!!l.g&&l.g.has(e)}function mn(l,e){l.g?l.g.add(e):l.h=e}function Gn(l,e){l.h&&l.h==e?l.h=null:l.g&&l.g.has(e)&&l.g.delete(e)}function $n(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let e=l.i;for(const n of l.g.values())e=e.concat(n.D);return e}return ur(l.i)}function yr(){}function Zr(){this.g=new yr}function gi(l,e,n){const d=n||"";try{ks(l,function(p,_){let w=p;St(p)&&(w=ds(p)),e.push(d+_+"="+encodeURIComponent(w))})}catch(p){throw e.push(d+"type="+encodeURIComponent("_badmap")),p}}function Ii(l,e,n,d,p){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,p(d)}catch(_){}}function Yr(l){this.l=l.$b||null,this.j=l.ib||!1}function Wi(l,e){Rn.call(this),this.D=l,this.u=e,this.m=void 0,this.readyState=Oi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}G.prototype.cancel=function(){if(this.i=$n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}},yr.prototype.stringify=function(l){return Ee.JSON.stringify(l,void 0)},yr.prototype.parse=function(l){return Ee.JSON.parse(l,void 0)},Nt(Yr,qr),Yr.prototype.g=function(){return new Wi(this.l,this.j)},Yr.prototype.i=function(l){return function(){return l}}({}),Nt(Wi,Rn);var Oi=0;function _s(l){l.j.read().then(l.Sa.bind(l)).catch(l.ha.bind(l))}function as(l){l.readyState=4,l.l=null,l.j=null,l.A=null,ji(l)}function ji(l){l.onreadystatechange&&l.onreadystatechange.call(l)}(J=Wi.prototype).open=function(l,e){if(this.readyState!=Oi)throw this.abort(),Error("Error reopening a connection");this.C=l,this.B=e,this.readyState=1,ji(this)},J.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};l&&(e.body=l),(this.D||Ee).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},J.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,as(this)),this.readyState=Oi},J.Va=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ee.ReadableStream&&"body"in l){if(this.j=l.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_s(this)}else l.text().then(this.Ua.bind(this),this.ha.bind(this))},J.Sa=function(l){if(this.g){if(this.u&&l.value)this.response.push(l.value);else if(!this.u){var e=l.value?l.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!l.done}))&&(this.response=this.responseText+=e)}l.done?as(this):ji(this),3==this.readyState&&_s(this)}},J.Ua=function(l){this.g&&(this.response=this.responseText=l,as(this))},J.Ta=function(l){this.g&&(this.response=l,as(this))},J.ha=function(){this.g&&as(this)},J.setRequestHeader=function(l,e){this.v.append(l,e)},J.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},J.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],e=this.h.entries();for(var n=e.next();!n.done;)l.push((n=n.value)[0]+": "+n[1]),n=e.next();return l.join("\r\n")},Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}});var es=Ee.JSON.parse;function hi(l){Rn.call(this),this.headers=new Mo,this.u=l||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=us,this.K=this.L=!1}Nt(hi,Rn);var us="",tu=/^https?$/i,ya=["POST","PUT"];function Ql(l){return"content-type"==l.toLowerCase()}function wl(l,e){l.h=!1,l.g&&(l.l=!0,l.g.abort(),l.l=!1),l.j=e,l.m=5,sl(l),Cl(l)}function sl(l){l.D||(l.D=!0,fr(l,"complete"),fr(l,"error"))}function Bo(l){if(l.h&&void 0!==Ae&&(!l.C[1]||4!=Xs(l)||2!=l.ba()))if(l.v&&4==Xs(l))Wr(l.Fa,0,l);else if(fr(l,"readystatechange"),4==Xs(l)){l.h=!1;try{const j=l.ba();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var d;if(d=0===j){var p=String(l.H).match(va)[1]||null;if(!p&&Ee.self&&Ee.self.location){var _=Ee.self.location.protocol;p=_.substr(0,_.length-1)}d=!tu.test(p?p.toLowerCase():"")}n=d}if(n)fr(l,"complete"),fr(l,"success");else{l.m=6;try{var w=2<Xs(l)?l.g.statusText:""}catch(le){w=""}l.j=w+" ["+l.ba()+"]",sl(l)}}finally{Cl(l)}}}function Cl(l,e){if(l.g){Ui(l);const n=l.g,d=l.C[0]?je:null;l.g=null,l.C=null,e||fr(l,"ready");try{n.onreadystatechange=d}catch(p){}}}function Ui(l){l.g&&l.K&&(l.g.ontimeout=null),l.A&&(Ee.clearTimeout(l.A),l.A=null)}function Xs(l){return l.g?l.g.readyState:0}function za(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.J){case us:case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch(e){return null}}function js(l,e,n){e:{for(d in n){var d=!1;break e}d=!0}d||(n=function Aa(l){let e="";return Vi(l,function(n,d){e+=d,e+=":",e+=n,e+="\r\n"}),e}(n),"string"==typeof l?null!=n&&encodeURIComponent(String(n)):qt(l,e,n))}function bu(l,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[l]||e}function Po(l){this.za=0,this.l=[],this.h=new ss,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bu("failFast",!1,l),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bu("baseRetryDelayMs",5e3,l),this.$a=bu("retryDelaySeedMs",1e4,l),this.Ya=bu("forwardChannelMaxRetries",2,l),this.ra=bu("forwardChannelRequestTimeoutMs",2e4,l),this.qa=l&&l.xmlHttpFactory||void 0,this.Ba=l&&l.Yb||!1,this.K=void 0,this.H=l&&l.supportsCrossDomainXhr||!1,this.J="",this.i=new G(l&&l.concurrentRequestLimit),this.Ca=new Zr,this.ja=l&&l.fastHandshake||!1,this.Ra=l&&l.Wb||!1,l&&l.Aa&&this.h.Aa(),l&&l.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&l&&l.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!l||!1!==l.Xb}function nu(l){if(_a(l),3==l.G){var e=l.V++,n=ve(l.F);qt(n,"SID",l.J),qt(n,"RID",e),qt(n,"TYPE","terminate"),Ko(l,n),(e=new ia(l,l.h,e,void 0)).K=2,e.v=Xn(ve(n)),n=!1,Ee.navigator&&Ee.navigator.sendBeacon&&(n=Ee.navigator.sendBeacon(e.v.toString(),"")),!n&&Ee.Image&&((new Image).src=e.v,n=!0),n||(e.g=Lu(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ji(e)}Rd(l)}function ps(l){l.g&&(xs(l),l.g.cancel(),l.g=null)}function _a(l){ps(l),l.u&&(Ee.clearTimeout(l.u),l.u=null),al(l),l.i.cancel(),l.m&&("number"==typeof l.m&&Ee.clearTimeout(l.m),l.m=null)}function Tc(l,e){l.l.push(new class{constructor(l,e){this.h=l,this.g=e}}(l.Za++,e)),3==l.G&&To(l)}function To(l){Qe(l.i)||l.m||(l.m=!0,dr(l.Ha,l),l.C=0)}function ol(l,e){var n;n=e?e.m:l.V++;const d=ve(l.F);qt(d,"SID",l.J),qt(d,"RID",n),qt(d,"AID",l.U),Ko(l,d),l.o&&l.s&&js(d,l.o,l.s),n=new ia(l,l.h,n,l.C+1),null===l.o&&(n.H=l.s),e&&(l.l=e.D.concat(l.l)),e=ka(l,n,1e3),n.setTimeout(Math.round(.5*l.ra)+Math.round(.5*l.ra*Math.random())),mn(l.i,n),ma(n,d,e)}function Ko(l,e){l.j&&ks({},function(n,d){qt(e,d,n)})}function ka(l,e,n){n=Math.min(l.l.length,n);var d=l.j?cn(l.j.Oa,l.j,l):null;e:{var p=l.l;let _=-1;for(;;){const w=["count="+n];-1==_?0<n?(_=p[0].h,w.push("ofs="+_)):_=0:w.push("ofs="+_);let j=!0;for(let le=0;le<n;le++){let me=p[le].h;const tt=p[le].g;if(me-=_,0>me)_=Math.max(0,p[le].h-100),j=!1;else try{gi(tt,w,"req"+me+"_")}catch(yt){d&&d(tt)}}if(j){d=w.join("&");break e}}}return l=l.l.splice(0,n),e.D=l,d}function Us(l){l.g||l.u||(l.Y=1,dr(l.Ga,l),l.A=0)}function ba(l){return!(l.g||l.u||3<=l.A||(l.Y++,l.u=Sn(cn(l.Ga,l),bs(l,l.A)),l.A++,0))}function xs(l){null!=l.B&&(Ee.clearTimeout(l.B),l.B=null)}function qa(l){l.g=new ia(l,l.h,"rpc",l.Y),null===l.o&&(l.g.H=l.s),l.g.O=0;var e=ve(l.oa);qt(e,"RID","rpc"),qt(e,"SID",l.J),qt(e,"CI",l.N?"0":"1"),qt(e,"AID",l.U),Ko(l,e),qt(e,"TYPE","xmlhttp"),l.o&&l.s&&js(e,l.o,l.s),l.K&&l.g.setTimeout(l.K);var n=l.g;l=l.la,n.K=1,n.v=Xn(ve(e)),n.s=null,n.U=!0,Ga(n,l)}function al(l){null!=l.v&&(Ee.clearTimeout(l.v),l.v=null)}function Ta(l,e){var n=null;if(l.g==e){al(l),xs(l),l.g=null;var d=2}else{if(!Bt(l.i,e))return;n=e.D,Gn(l.i,e),d=1}if(l.I=e.N,0!=l.G)if(e.i)if(1==d){n=e.s?e.s.length:0,e=Date.now()-e.F;var p=l.C;fr(d=ra(),new Dn(d,n,e,p)),To(l)}else Us(l);else if(3==(p=e.o)||0==p&&0<l.I||!(1==d&&function Xl(l,e){return!(lt(l.i)>=l.i.j-(l.m?1:0)||(l.m?(l.l=e.D.concat(l.l),0):1==l.G||2==l.G||l.C>=(l.Xa?0:l.Ya)||(l.m=Sn(cn(l.Ha,l,e),bs(l,l.C)),l.C++,0)))}(l,e)||2==d&&ba(l)))switch(n&&0<n.length&&(e=l.i,e.i=e.i.concat(n)),p){case 1:Oo(l,5);break;case 4:Oo(l,10);break;case 3:Oo(l,6);break;default:Oo(l,2)}}function bs(l,e){let n=l.Pa+Math.floor(Math.random()*l.$a);return l.j||(n*=2),n*e}function Oo(l,e){if(l.h.info("Error code "+e),2==e){var n=null;l.j&&(n=null);var d=cn(l.jb,l);n||(n=new Z("//www.google.com/images/cleardot.gif"),Ee.location&&"http"==Ee.location.protocol||z(n,"https"),Xn(n)),function xi(l,e){const n=new ss;if(Ee.Image){const d=new Image;d.onload=Yt(Ii,n,d,"TestLoadImage: loaded",!0,e),d.onerror=Yt(Ii,n,d,"TestLoadImage: error",!1,e),d.onabort=Yt(Ii,n,d,"TestLoadImage: abort",!1,e),d.ontimeout=Yt(Ii,n,d,"TestLoadImage: timeout",!1,e),Ee.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=l}else e(!1)}(n.toString(),d)}else nn(2);l.G=0,l.j&&l.j.va(e),Rd(l),_a(l)}function Rd(l){l.G=0,l.I=-1,l.j&&((0!=$n(l.i).length||0!=l.l.length)&&(l.i.i.length=0,ur(l.l),l.l.length=0),l.j.ua())}function uo(l,e,n){let d=function br(l){return l instanceof Z?ve(l):new Z(l,void 0)}(n);if(""!=d.i)e&&Ce(d,e+"."+d.i),ot(d,d.m);else{const p=Ee.location;d=function ar(l,e,n,d){var p=new Z(null,void 0);return l&&z(p,l),e&&Ce(p,e),n&&ot(p,n),d&&(p.l=d),p}(p.protocol,e?e+"."+p.hostname:p.hostname,+p.port,n)}return l.aa&&Vi(l.aa,function(p,_){qt(d,_,p)}),n=l.sa,(e=l.D)&&n&&qt(d,e,n),qt(d,"VER",l.ma),Ko(l,d),d}function Lu(l,e,n){if(e&&!l.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hi(n&&l.Ba&&!l.qa?new Yr({ib:!0}):l.qa)).L=l.H,e}function Jc(){}function ru(){if(Nn&&!(10<=Number(sn)))throw Error("Environmental error: no available transport.")}function Eo(l,e){Rn.call(this),this.g=new Po(e),this.l=l,this.h=e&&e.messageUrlParams||null,l=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.s=l,l=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(l?l["X-WebChannel-Content-Type"]=e.messageContentType:l={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(l?l["X-WebChannel-Client-Profile"]=e.ya:l={"X-WebChannel-Client-Profile":e.ya}),this.g.P=l,(l=e&&e.httpHeadersOverwriteParam)&&!Lr(l)&&(this.g.o=l),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Lr(e)&&(this.g.D=e,null!==(l=this.h)&&e in l&&e in(l=this.h)&&delete l[e]),this.j=new ti(this)}function oa(l){ga.call(this);var e=l.__sm__;if(e){e:{for(const n in e){l=n;break e}l=void 0}(this.i=l)&&(l=this.i,e=null!==e&&l in e?e[l]:void 0),this.data=e}else this.data=l}function iu(){Do.call(this),this.status=1}function ti(l){this.g=l}(J=hi.prototype).ea=function(l,e,n,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+l);e=e?e.toUpperCase():"GET",this.H=l,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jo.g(),this.C=function yo(l){return l.h||(l.h=l.i())}(this.u?this.u:jo),this.g.onreadystatechange=cn(this.Fa,this);try{this.F=!0,this.g.open(e,String(l),!0),this.F=!1}catch(_){return void wl(this,_)}l=n||"";const p=new Mo(this.headers);d&&ks(d,function(_,w){p.set(w,_)}),d=function Cr(l){e:{var e=Ql;const n=l.length,d="string"==typeof l?l.split(""):l;for(let p=0;p<n;p++)if(p in d&&e.call(void 0,d[p],p,l)){e=p;break e}e=-1}return 0>e?null:"string"==typeof l?l.charAt(e):l[e]}(p.T()),n=Ee.FormData&&l instanceof Ee.FormData,!(0<=Ar(ya,e))||d||n||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),p.forEach(function(_,w){this.g.setRequestHeader(w,_)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ui(this),0<this.B&&((this.K=function Fr(l){return Nn&&function Jt(){return function Hi(l){var e=dt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=l(9)}(function(){let l=0;const e=Mr(String(Hr)).split("."),n=Mr("9").split("."),d=Math.max(e.length,n.length);for(let w=0;0==l&&w<d;w++){var p=e[w]||"",_=n[w]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==p[0].length&&0==_[0].length)break;l=Mn(0==p[1].length?0:parseInt(p[1],10),0==_[1].length?0:parseInt(_[1],10))||Mn(0==p[2].length,0==_[2].length)||Mn(p[2],_[2]),p=p[3],_=_[3]}while(0==l)}return 0<=l})}()&&"number"==typeof l.timeout&&void 0!==l.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cn(this.pa,this)):this.A=Wr(this.pa,this.B,this)),this.v=!0,this.g.send(l),this.v=!1}catch(_){wl(this,_)}},J.pa=function(){void 0!==Ae&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},J.abort=function(l){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=l||7,fr(this,"complete"),fr(this,"abort"),Cl(this))},J.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cl(this,!0)),hi.Z.M.call(this)},J.Fa=function(){this.s||(this.F||this.v||this.l?Bo(this):this.cb())},J.cb=function(){Bo(this)},J.ba=function(){try{return 2<Xs(this)?this.g.status:-1}catch(l){return-1}},J.ga=function(){try{return this.g?this.g.responseText:""}catch(l){return""}},J.Qa=function(l){if(this.g){var e=this.g.responseText;return l&&0==e.indexOf(l)&&(e=e.substring(l.length)),es(e)}},J.Da=function(){return this.m},J.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(J=Po.prototype).ma=8,J.G=1,J.hb=function(l){try{this.h.info("Origin Trials invoked: "+l)}catch(e){}},J.Ha=function(l){if(this.m)if(this.m=null,1==this.G){if(!l){this.V=Math.floor(1e5*Math.random()),l=this.V++;const p=new ia(this,this.h,l,void 0);let _=this.s;if(this.P&&(_?(_=hr(_),ri(_,this.P)):_=this.P),null===this.o&&(p.H=_),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){var d=this.l[n];if(void 0===(d="__data__"in d.g&&"string"==typeof(d=d.g.__data__)?d.length:void 0))break;if(4096<(e+=d)){e=n;break e}if(4096===e||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ka(this,p,e),qt(n=ve(this.F),"RID",l),qt(n,"CVER",22),this.D&&qt(n,"X-HTTP-Session-Id",this.D),Ko(this,n),this.o&&_&&js(n,this.o,_),mn(this.i,p),this.Ra&&qt(n,"TYPE","init"),this.ja?(qt(n,"$req",e),qt(n,"SID","null"),p.$=!0,ma(p,n,null)):ma(p,n,e),this.G=2}}else 3==this.G&&(l?ol(this,l):0==this.l.length||Qe(this.i)||ol(this))},J.Ga=function(){if(this.u=null,qa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var l=2*this.O;this.h.info("BP detection timer enabled: "+l),this.B=Sn(cn(this.bb,this),l)}},J.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,nn(10),ps(this),qa(this))},J.ab=function(){null!=this.v&&(this.v=null,ps(this),ba(this),nn(19))},J.jb=function(l){l?(this.h.info("Successfully pinged google.com"),nn(2)):(this.h.info("Failed to ping google.com"),nn(1))},(J=Jc.prototype).xa=function(){},J.wa=function(){},J.va=function(){},J.ua=function(){},J.Oa=function(){},ru.prototype.g=function(l,e){return new Eo(l,e)},Nt(Eo,Rn),Eo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var l=this.g,e=this.l,n=this.h||void 0;l.Wa&&(l.h.info("Origin Trials enabled."),dr(cn(l.hb,l,e))),nn(0),l.W=e,l.aa=n||{},l.N=l.X,l.F=uo(l,null,l.W),To(l)},Eo.prototype.close=function(){nu(this.g)},Eo.prototype.u=function(l){if("string"==typeof l){var e={};e.__data__=l,Tc(this.g,e)}else this.v?((e={}).__data__=ds(l),Tc(this.g,e)):Tc(this.g,l)},Eo.prototype.M=function(){this.g.j=null,delete this.j,nu(this.g),delete this.g,Eo.Z.M.call(this)},Nt(oa,ga),Nt(iu,Do),Nt(ti,Jc),ti.prototype.xa=function(){fr(this.g,"a")},ti.prototype.wa=function(l){fr(this.g,new oa(l))},ti.prototype.va=function(l){fr(this.g,new iu(l))},ti.prototype.ua=function(){fr(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,Eo.prototype.send=Eo.prototype.u,Eo.prototype.open=Eo.prototype.m,Eo.prototype.close=Eo.prototype.close,zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,di.COMPLETE="complete",ki.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",Rn.prototype.listen=Rn.prototype.N,hi.prototype.listenOnce=hi.prototype.O,hi.prototype.getLastError=hi.prototype.La,hi.prototype.getLastErrorCode=hi.prototype.Da,hi.prototype.getStatus=hi.prototype.ba,hi.prototype.getResponseJson=hi.prototype.Qa,hi.prototype.getResponseText=hi.prototype.ga,hi.prototype.send=hi.prototype.ea;var So=he.createWebChannelTransport=function(){return new ru},Fu=he.getStatEventTarget=function(){return ra()},Ka=he.ErrorCode=zr,Zo=he.EventType=di,Yo=he.Event=si,Ms=he.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},su=he.FetchXmlHttpFactory=Yr,lo=he.WebChannel=ki,ju=he.XhrIo=hi;const Uu="@firebase/firestore";class F{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}F.UNAUTHENTICATED=new F(null),F.GOOGLE_CREDENTIALS=new F("google-credentials-uid"),F.FIRST_PARTY=new F("first-party-uid"),F.MOCK_USER=new F("mock-user");let P="9.8.0";const A=new gt.Yd("@firebase/firestore");function K(){return A.logLevel}function de(l,...e){if(A.logLevel<=gt.in.DEBUG){const n=e.map(en);A.debug(`Firestore (${P}): ${l}`,...n)}}function ze(l,...e){if(A.logLevel<=gt.in.ERROR){const n=e.map(en);A.error(`Firestore (${P}): ${l}`,...n)}}function st(l,...e){if(A.logLevel<=gt.in.WARN){const n=e.map(en);A.warn(`Firestore (${P}): ${l}`,...n)}}function en(l){if("string"==typeof l)return l;try{return JSON.stringify(l)}catch(n){return l}}function Qt(l="Unexpected state"){const e=`FIRESTORE (${P}) INTERNAL ASSERTION FAILED: `+l;throw ze(e),new Error(e)}function Pn(l,e){l||Qt()}function pn(l,e){return l}const Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dn extends xt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class ou{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(F.UNAUTHENTICATED))}shutdown(){}}class Ea{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ul{constructor(e){this.t=e,this.currentUser=F.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var d=this;let p=this.i;const _=me=>this.i!==p?(p=this.i,n(me)):Promise.resolve();let w=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new gs,e.enqueueRetryable(()=>_(this.currentUser))};const j=()=>{const me=w;e.enqueueRetryable((0,ne.Z)(function*(){yield me.promise,yield _(d.currentUser)}))},le=me=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=me,this.auth.addAuthTokenListener(this.o),j()};this.t.onInit(me=>le(me)),setTimeout(()=>{if(!this.auth){const me=this.t.getImmediate({optional:!0});me?le(me):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new gs)}},0),j()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(d=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):d?(Pn("string"==typeof d.accessToken),new ou(d.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pn(null===e||"string"==typeof e),new F(e)}}class Nd{constructor(e,n,d){this.type="FirstParty",this.user=F.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const p=e.auth.getAuthHeaderValueForFirstParty([]);p&&this.headers.set("Authorization",p),d&&this.headers.set("X-Goog-Iam-Authorization-Token",d)}}class Bu{constructor(e,n,d){this.h=e,this.l=n,this.m=d}getToken(){return Promise.resolve(new Nd(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(F.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ec{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sc{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const d=_=>{null!=_.error&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const w=_.token!==this.p;return this.p=_.token,de("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?n(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>d(_))};const p=_=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.g.onInit(_=>p(_)),setTimeout(()=>{if(!this.appCheck){const _=this.g.getImmediate({optional:!0});_?p(_):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pn("string"==typeof n.token),this.p=n.token,new Ec(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Bs{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=d=>this.I(d),this.T=d=>n.writeSequenceNumber(d))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function co(l){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(l);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let d=0;d<l;d++)n[d]=Math.floor(256*Math.random());return n}Bs.A=-1;class Tu{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let d="";for(;d.length<20;){const p=co(40);for(let _=0;_<p.length;++_)d.length<20&&p[_]<n&&(d+=e.charAt(p[_]%e.length))}return d}}function Ur(l,e){return l<e?-1:l>e?1:0}function uu(l,e,n){return l.length===e.length&&l.every((d,p)=>n(d,e[p]))}function Eu(l){return l+"\0"}class Vs{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new dn(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dn(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new dn(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dn(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vs.fromMillis(Date.now())}static fromDate(e){return Vs.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),d=Math.floor(1e6*(e-1e3*n));return new Vs(n,d)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ur(this.nanoseconds,e.nanoseconds):Ur(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dr(e)}static min(){return new Dr(new Vs(0,0))}static max(){return new Dr(new Vs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ei(l){let e=0;for(const n in l)Object.prototype.hasOwnProperty.call(l,n)&&e++;return e}function Js(l,e){for(const n in l)Object.prototype.hasOwnProperty.call(l,n)&&e(n,l[n])}function wc(l){for(const e in l)if(Object.prototype.hasOwnProperty.call(l,e))return!1;return!0}class Il{constructor(e,n,d){void 0===n?n=0:n>e.length&&Qt(),void 0===d?d=e.length-n:d>e.length-n&&Qt(),this.segments=e,this.offset=n,this.len=d}get length(){return this.len}isEqual(e){return 0===Il.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Il?e.forEach(d=>{n.push(d)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,d=this.limit();n<d;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const d=Math.min(e.length,n.length);for(let p=0;p<d;p++){const _=e.get(p),w=n.get(p);if(_<w)return-1;if(_>w)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mi extends Il{construct(e,n,d){return new mi(e,n,d)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const d of e){if(d.indexOf("//")>=0)throw new dn(Rt.INVALID_ARGUMENT,`Invalid segment (${d}). Paths must not contain // in them.`);n.push(...d.split("/").filter(p=>p.length>0))}return new mi(n)}static emptyPath(){return new mi([])}}const Mh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ts extends Il{construct(e,n,d){return new ts(e,n,d)}static isValidIdentifier(e){return Mh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ts.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ts(["__name__"])}static fromServerFormat(e){const n=[];let d="",p=0;const _=()=>{if(0===d.length)throw new dn(Rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(d),d=""};let w=!1;for(;p<e.length;){const j=e[p];if("\\"===j){if(p+1===e.length)throw new dn(Rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const le=e[p+1];if("\\"!==le&&"."!==le&&"`"!==le)throw new dn(Rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);d+=le,p+=2}else"`"===j?(w=!w,p++):"."!==j||w?(d+=j,p++):(_(),p++)}if(_(),w)throw new dn(Rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ts(n)}static emptyPath(){return new ts([])}}class Yi{constructor(e){this.fields=e,e.sort(ts.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uu(this.fields,e.fields,(n,d)=>n.isEqual(d))}}class ho{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new ho(n)}static fromUint8Array(e){const n=function(d){let p="";for(let _=0;_<d.length;++_)p+=String.fromCharCode(d[_]);return p}(e);return new ho(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let d=0;d<e.length;d++)n[d]=e.charCodeAt(d);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ur(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ho.EMPTY_BYTE_STRING=new ho("");const fi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(l){if(Pn(!!l),"string"==typeof l){let e=0;const n=fi.exec(l);if(Pn(!!n),n[1]){let p=n[1];p=(p+"000000000").substr(0,9),e=Number(p)}const d=new Date(l);return{seconds:Math.floor(d.getTime()/1e3),nanos:e}}return{seconds:ns(l.seconds),nanos:ns(l.nanos)}}function ns(l){return"number"==typeof l?l:"string"==typeof l?Number(l):0}function Xo(l){return"string"==typeof l?ho.fromBase64String(l):ho.fromUint8Array(l)}function Ld(l){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==l?void 0:l.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ro(l){const e=l.mapValue.fields.__previous_value__;return Ld(e)?Ro(e):e}function fo(l){const e=Qo(l.mapValue.fields.__local_write_time__.timestampValue);return new Vs(e.seconds,e.nanos)}class Cc{constructor(e,n,d,p,_,w,j,le){this.databaseId=e,this.appId=n,this.persistenceKey=d,this.host=p,this.ssl=_,this.forceLongPolling=w,this.autoDetectLongPolling=j,this.useFetchStreams=le}}class aa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof aa&&e.projectId===this.projectId&&e.database===this.database}}function ua(l){return null==l}function No(l){return 0===l&&1/l==-1/0}function Su(l){return"number"==typeof l&&Number.isInteger(l)&&!No(l)&&l<=Number.MAX_SAFE_INTEGER&&l>=Number.MIN_SAFE_INTEGER}class Fn{constructor(e){this.path=e}static fromPath(e){return new Fn(mi.fromString(e))}static fromName(e){return new Fn(mi.fromString(e).popFirst(5))}static empty(){return new Fn(mi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return mi.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fn(new mi(e.slice()))}}const Vu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jl={nullValue:"NULL_VALUE"};function wu(l){return"nullValue"in l?0:"booleanValue"in l?1:"integerValue"in l||"doubleValue"in l?2:"timestampValue"in l?3:"stringValue"in l?5:"bytesValue"in l?6:"referenceValue"in l?7:"geoPointValue"in l?8:"arrayValue"in l?9:"mapValue"in l?Ld(l)?4:ea(l)?9007199254740991:10:Qt()}function Kr(l,e){if(l===e)return!0;const n=wu(l);if(n!==wu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return l.booleanValue===e.booleanValue;case 4:return fo(l).isEqual(fo(e));case 3:return function(d,p){if("string"==typeof d.timestampValue&&"string"==typeof p.timestampValue&&d.timestampValue.length===p.timestampValue.length)return d.timestampValue===p.timestampValue;const _=Qo(d.timestampValue),w=Qo(p.timestampValue);return _.seconds===w.seconds&&_.nanos===w.nanos}(l,e);case 5:return l.stringValue===e.stringValue;case 6:return p=e,Xo(l.bytesValue).isEqual(Xo(p.bytesValue));case 7:return l.referenceValue===e.referenceValue;case 8:return function(d,p){return ns(d.geoPointValue.latitude)===ns(p.geoPointValue.latitude)&&ns(d.geoPointValue.longitude)===ns(p.geoPointValue.longitude)}(l,e);case 2:return function(d,p){if("integerValue"in d&&"integerValue"in p)return ns(d.integerValue)===ns(p.integerValue);if("doubleValue"in d&&"doubleValue"in p){const _=ns(d.doubleValue),w=ns(p.doubleValue);return _===w?No(_)===No(w):isNaN(_)&&isNaN(w)}return!1}(l,e);case 9:return uu(l.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:return function(d,p){const _=d.mapValue.fields||{},w=p.mapValue.fields||{};if(Ei(_)!==Ei(w))return!1;for(const j in _)if(_.hasOwnProperty(j)&&(void 0===w[j]||!Kr(_[j],w[j])))return!1;return!0}(l,e);default:return Qt()}var p}function Dl(l,e){return void 0!==(l.values||[]).find(n=>Kr(n,e))}function ui(l,e){if(l===e)return 0;const n=wu(l),d=wu(e);if(n!==d)return Ur(n,d);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ur(l.booleanValue,e.booleanValue);case 2:return function(p,_){const w=ns(p.integerValue||p.doubleValue),j=ns(_.integerValue||_.doubleValue);return w<j?-1:w>j?1:w===j?0:isNaN(w)?isNaN(j)?0:-1:1}(l,e);case 3:return Ef(l.timestampValue,e.timestampValue);case 4:return Ef(fo(l),fo(e));case 5:return Ur(l.stringValue,e.stringValue);case 6:return function(p,_){const w=Xo(p),j=Xo(_);return w.compareTo(j)}(l.bytesValue,e.bytesValue);case 7:return function(p,_){const w=p.split("/"),j=_.split("/");for(let le=0;le<w.length&&le<j.length;le++){const me=Ur(w[le],j[le]);if(0!==me)return me}return Ur(w.length,j.length)}(l.referenceValue,e.referenceValue);case 8:return function(p,_){const w=Ur(ns(p.latitude),ns(_.latitude));return 0!==w?w:Ur(ns(p.longitude),ns(_.longitude))}(l.geoPointValue,e.geoPointValue);case 9:return function(p,_){const w=p.values||[],j=_.values||[];for(let le=0;le<w.length&&le<j.length;++le){const me=ui(w[le],j[le]);if(me)return me}return Ur(w.length,j.length)}(l.arrayValue,e.arrayValue);case 10:return function(p,_){if(p===Vu.mapValue&&_===Vu.mapValue)return 0;if(p===Vu.mapValue)return 1;if(_===Vu.mapValue)return-1;const w=p.fields||{},j=Object.keys(w),le=_.fields||{},me=Object.keys(le);j.sort(),me.sort();for(let tt=0;tt<j.length&&tt<me.length;++tt){const yt=Ur(j[tt],me[tt]);if(0!==yt)return yt;const Wt=ui(w[j[tt]],le[me[tt]]);if(0!==Wt)return Wt}return Ur(j.length,me.length)}(l.mapValue,e.mapValue);default:throw Qt()}}function Ef(l,e){if("string"==typeof l&&"string"==typeof e&&l.length===e.length)return Ur(l,e);const n=Qo(l),d=Qo(e),p=Ur(n.seconds,d.seconds);return 0!==p?p:Ur(n.nanos,d.nanos)}function Sa(l){return ed(l)}function ed(l){return"nullValue"in l?"null":"booleanValue"in l?""+l.booleanValue:"integerValue"in l?""+l.integerValue:"doubleValue"in l?""+l.doubleValue:"timestampValue"in l?function(d){const p=Qo(d);return`time(${p.seconds},${p.nanos})`}(l.timestampValue):"stringValue"in l?l.stringValue:"bytesValue"in l?Xo(l.bytesValue).toBase64():"referenceValue"in l?Fn.fromName(l.referenceValue).toString():"geoPointValue"in l?`geo(${(e=l.geoPointValue).latitude},${e.longitude})`:"arrayValue"in l?function(d){let p="[",_=!0;for(const w of d.values||[])_?_=!1:p+=",",p+=ed(w);return p+"]"}(l.arrayValue):"mapValue"in l?function(d){const p=Object.keys(d.fields||{}).sort();let _="{",w=!0;for(const j of p)w?w=!1:_+=",",_+=`${j}:${ed(d.fields[j])}`;return _+"}"}(l.mapValue):Qt();var e}function lu(l,e){return{referenceValue:`projects/${l.projectId}/databases/${l.database}/documents/${e.path.canonicalString()}`}}function _n(l){return!!l&&"integerValue"in l}function Pa(l){return!!l&&"arrayValue"in l}function xc(l){return!!l&&"nullValue"in l}function cu(l){return!!l&&"doubleValue"in l&&isNaN(Number(l.doubleValue))}function Jo(l){return!!l&&"mapValue"in l}function ll(l){if(l.geoPointValue)return{geoPointValue:Object.assign({},l.geoPointValue)};if(l.timestampValue&&"object"==typeof l.timestampValue)return{timestampValue:Object.assign({},l.timestampValue)};if(l.mapValue){const e={mapValue:{fields:{}}};return Js(l.mapValue.fields,(n,d)=>e.mapValue.fields[n]=ll(d)),e}if(l.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(l.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ll(l.arrayValue.values[n]);return e}return Object.assign({},l)}function ea(l){return"__max__"===(((l.mapValue||{}).fields||{}).__type__||{}).stringValue}function Za(l){return"nullValue"in l?Jl:"booleanValue"in l?{booleanValue:!1}:"integerValue"in l||"doubleValue"in l?{doubleValue:NaN}:"timestampValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in l?{stringValue:""}:"bytesValue"in l?{bytesValue:""}:"referenceValue"in l?lu(aa.empty(),Fn.empty()):"geoPointValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in l?{arrayValue:{}}:"mapValue"in l?{mapValue:{}}:Qt()}function Hu(l){return"nullValue"in l?{booleanValue:!1}:"booleanValue"in l?{doubleValue:NaN}:"integerValue"in l||"doubleValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in l?{stringValue:""}:"stringValue"in l?{bytesValue:""}:"bytesValue"in l?lu(aa.empty(),Fn.empty()):"referenceValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in l?{arrayValue:{}}:"arrayValue"in l?{mapValue:{}}:"mapValue"in l?Vu:Qt()}function la(l,e){const n=ui(l.value,e.value);return 0!==n?n:l.inclusive&&!e.inclusive?-1:!l.inclusive&&e.inclusive?1:0}function W(l,e){const n=ui(l.value,e.value);return 0!==n?n:l.inclusive&&!e.inclusive?1:!l.inclusive&&e.inclusive?-1:0}class Q{constructor(e){this.value=e}static empty(){return new Q({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let d=0;d<e.length-1;++d)if(n=(n.mapValue.fields||{})[e.get(d)],!Jo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(n)}setAll(e){let n=ts.emptyPath(),d={},p=[];e.forEach((w,j)=>{if(!n.isImmediateParentOf(j)){const le=this.getFieldsMap(n);this.applyChanges(le,d,p),d={},p=[],n=j.popLast()}w?d[j.lastSegment()]=ll(w):p.push(j.lastSegment())});const _=this.getFieldsMap(n);this.applyChanges(_,d,p)}delete(e){const n=this.field(e.popLast());Jo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let d=0;d<e.length;++d){let p=n.mapValue.fields[e.get(d)];Jo(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},n.mapValue.fields[e.get(d)]=p),n=p}return n.mapValue.fields}applyChanges(e,n,d){Js(n,(p,_)=>e[p]=_);for(const p of d)delete e[p]}clone(){return new Q(ll(this.value))}}function Se(l){const e=[];return Js(l.fields,(n,d)=>{const p=new ts([n]);if(Jo(d)){const _=Se(d.mapValue).fields;if(0===_.length)e.push(p);else for(const w of _)e.push(p.child(w))}else e.push(p)}),new Yi(e)}class qe{constructor(e,n,d,p,_,w){this.key=e,this.documentType=n,this.version=d,this.readTime=p,this.data=_,this.documentState=w}static newInvalidDocument(e){return new qe(e,0,Dr.min(),Dr.min(),Q.empty(),0)}static newFoundDocument(e,n,d){return new qe(e,1,n,Dr.min(),d,0)}static newNoDocument(e,n){return new qe(e,2,n,Dr.min(),Q.empty(),0)}static newUnknownDocument(e,n){return new qe(e,3,n,Dr.min(),Q.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Q.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Q.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qe(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lt{constructor(e,n,d,p){this.indexId=e,this.collectionGroup=n,this.fields=d,this.indexState=p}}function Ut(l){return l.fields.find(e=>2===e.kind)}function yn(l){return l.fields.filter(e=>2!==e.kind)}Lt.UNKNOWN_ID=-1;class sr{constructor(e,n){this.fieldPath=e,this.kind=n}}class or{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new or(0,Tr.min())}}function Nr(l,e){const n=l.toTimestamp().seconds,d=l.toTimestamp().nanoseconds+1,p=Dr.fromTimestamp(1e9===d?new Vs(n+1,0):new Vs(n,d));return new Tr(p,Fn.empty(),e)}function Si(l){return new Tr(l.readTime,l.key,-1)}class Tr{constructor(e,n,d){this.readTime=e,this.documentKey=n,this.largestBatchId=d}static min(){return new Tr(Dr.min(),Fn.empty(),-1)}static max(){return new Tr(Dr.max(),Fn.empty(),-1)}}function po(l,e){let n=l.readTime.compareTo(e.readTime);return 0!==n?n:(n=Fn.comparator(l.documentKey,e.documentKey),0!==n?n:Ur(l.largestBatchId,e.largestBatchId))}class li{constructor(e,n){this.comparator=e,this.root=n||Hs.EMPTY}insert(e,n){return new li(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hs.BLACK,null,null))}remove(e){return new li(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const d=this.comparator(e,n.key);if(0===d)return n.value;d<0?n=n.left:d>0&&(n=n.right)}return null}indexOf(e){let n=0,d=this.root;for(;!d.isEmpty();){const p=this.comparator(e,d.key);if(0===p)return n+d.left.size;p<0?d=d.left:(n+=d.left.size+1,d=d.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,d)=>(e(n,d),!1))}toString(){const e=[];return this.inorderTraversal((n,d)=>(e.push(`${n}:${d}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}}class Cu{constructor(e,n,d,p){this.isReverse=p,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=n?d(e.key,n):1,n&&p&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hs{constructor(e,n,d,p,_){this.key=e,this.value=n,this.color=null!=d?d:Hs.RED,this.left=null!=p?p:Hs.EMPTY,this.right=null!=_?_:Hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,d,p,_){return new Hs(null!=e?e:this.key,null!=n?n:this.value,null!=d?d:this.color,null!=p?p:this.left,null!=_?_:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,d){let p=this;const _=d(e,p.key);return p=_<0?p.copy(null,null,null,p.left.insert(e,n,d),null):0===_?p.copy(null,n,null,null,null):p.copy(null,null,null,null,p.right.insert(e,n,d)),p.fixUp()}removeMin(){if(this.left.isEmpty())return Hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let d,p=this;if(n(e,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(e,n),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===n(e,p.key)){if(p.right.isEmpty())return Hs.EMPTY;d=p.right.min(),p=p.copy(d.key,d.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(e,n))}return p.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const e=this.left.check();if(e!==this.right.check())throw Qt();return e+(this.isRed()?0:1)}}Hs.EMPTY=null,Hs.RED=!0,Hs.BLACK=!1,Hs.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(l,e,n,d,p){return this}insert(l,e,n){return new Hs(l,e)}remove(l,e){return this}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vi{constructor(e){this.comparator=e,this.data=new li(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,d)=>(e(n),!1))}forEachInRange(e,n){const d=this.data.getIteratorFrom(e[0]);for(;d.hasNext();){const p=d.getNext();if(this.comparator(p.key,e[1])>=0)return;n(p.key)}}forEachWhile(e,n){let d;for(d=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();d.hasNext();)if(!e(d.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Oa(this.data.getIterator())}getIteratorFrom(e){return new Oa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(d=>{n=n.add(d)}),n}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.data.getIterator(),d=e.data.getIterator();for(;n.hasNext();){const p=n.getNext().key,_=d.getNext().key;if(0!==this.comparator(p,_))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vi(this.comparator);return n.data=e,n}}class Oa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ca(l){return l.hasNext()?l.getNext():void 0}class cl{constructor(e,n=null,d=[],p=[],_=null,w=null,j=null){this.path=e,this.collectionGroup=n,this.orderBy=d,this.filters=p,this.limit=_,this.startAt=w,this.endAt=j,this.P=null}}function Fd(l,e=null,n=[],d=[],p=null,_=null,w=null){return new cl(l,e,n,d,p,_,w)}function dl(l){const e=pn(l);if(null===e.P){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(d=>{return(p=d).field.canonicalString()+p.op.toString()+Sa(p.value);var p}).join(","),n+="|ob:",n+=e.orderBy.map(d=>{return(p=d).field.canonicalString()+p.dir;var p}).join(","),ua(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(d=>Sa(d)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(d=>Sa(d)).join(",")),e.P=n}return e.P}function Gu(l,e){if(l.limit!==e.limit||l.orderBy.length!==e.orderBy.length)return!1;for(let p=0;p<l.orderBy.length;p++)if(!zi(l.orderBy[p],e.orderBy[p]))return!1;if(l.filters.length!==e.filters.length)return!1;for(let p=0;p<l.filters.length;p++)if((n=l.filters[p]).op!==(d=e.filters[p]).op||!n.field.isEqual(d.field)||!Kr(n.value,d.value))return!1;var n,d;return l.collectionGroup===e.collectionGroup&&!!l.path.isEqual(e.path)&&!!Rh(l.startAt,e.startAt)&&Rh(l.endAt,e.endAt)}function nd(l){return Fn.isDocumentKey(l.path)&&null===l.collectionGroup&&0===l.filters.length}function Ic(l,e){return l.filters.filter(n=>n instanceof go&&n.field.isEqual(e))}function Sf(l,e,n){let d=Jl,p=!0;for(const _ of Ic(l,e)){let w=Jl,j=!0;switch(_.op){case"<":case"<=":w=Za(_.value);break;case"==":case"in":case">=":w=_.value;break;case">":w=_.value,j=!1;break;case"!=":case"not-in":w=Jl}la({value:d,inclusive:p},{value:w,inclusive:j})<0&&(d=w,p=j)}if(null!==n)for(let _=0;_<l.orderBy.length;++_)if(l.orderBy[_].field.isEqual(e)){const w=n.position[_];la({value:d,inclusive:p},{value:w,inclusive:n.inclusive})<0&&(d=w,p=n.inclusive);break}return{value:d,inclusive:p}}function $u(l,e,n){let d=Vu,p=!0;for(const _ of Ic(l,e)){let w=Vu,j=!0;switch(_.op){case">=":case">":w=Hu(_.value),j=!1;break;case"==":case"in":case"<=":w=_.value;break;case"<":w=_.value,j=!1;break;case"!=":case"not-in":w=Vu}W({value:d,inclusive:p},{value:w,inclusive:j})>0&&(d=w,p=j)}if(null!==n)for(let _=0;_<l.orderBy.length;++_)if(l.orderBy[_].field.isEqual(e)){const w=n.position[_];W({value:d,inclusive:p},{value:w,inclusive:n.inclusive})>0&&(d=w,p=n.inclusive);break}return{value:d,inclusive:p}}class go extends class{}{constructor(e,n,d){super(),this.field=e,this.op=n,this.value=d}static create(e,n,d){return e.isKeyField()?"in"===n||"not-in"===n?this.V(e,n,d):new Ph(e,n,d):"array-contains"===n?new vv(e,d):"in"===n?new Al(e,d):"not-in"===n?new xu(e,d):"array-contains-any"===n?new rd(e,d):new go(e,n,d)}static V(e,n,d){return"in"===n?new Qg(e,d):new Mp(e,d)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.v(ui(n,this.value)):null!==n&&wu(this.value)===wu(n)&&this.v(ui(n,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ph extends go{constructor(e,n,d){super(e,n,d),this.key=Fn.fromName(d.referenceValue)}matches(e){const n=Fn.comparator(e.key,this.key);return this.v(n)}}class Qg extends go{constructor(e,n){super(e,"in",n),this.keys=Oh(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Mp extends go{constructor(e,n){super(e,"not-in",n),this.keys=Oh(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Oh(l,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(d=>Fn.fromName(d.referenceValue))}class vv extends go{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pa(n)&&Dl(n.arrayValue,this.value)}}class Al extends go{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Dl(this.value.arrayValue,n)}}class xu extends go{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Dl(this.value.arrayValue,n)}}class rd extends go{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(d=>Dl(this.value.arrayValue,d))}}class Ps{constructor(e,n){this.position=e,this.inclusive=n}}class ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function zi(l,e){return l.dir===e.dir&&l.field.isEqual(e.field)}function tc(l,e,n){let d=0;for(let p=0;p<l.position.length;p++){const _=e[p],w=l.position[p];if(d=_.field.isKeyField()?Fn.comparator(Fn.fromName(w.referenceValue),n.key):ui(w,n.data.field(_.field)),"desc"===_.dir&&(d*=-1),0!==d)break}return d}function Rh(l,e){if(null===l)return null===e;if(null===e||l.inclusive!==e.inclusive||l.position.length!==e.position.length)return!1;for(let n=0;n<l.position.length;n++)if(!Kr(l.position[n],e.position[n]))return!1;return!0}class Wu{constructor(e,n=null,d=[],p=[],_=null,w="F",j=null,le=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=d,this.filters=p,this.limit=_,this.limitType=w,this.startAt=j,this.endAt=le,this.D=null,this.C=null}}function Dc(l,e,n,d,p,_,w,j){return new Wu(l,e,n,d,p,_,w,j)}function nc(l){return new Wu(l)}function Nh(l){return l.explicitOrderBy.length>0?l.explicitOrderBy[0].field:null}function Lh(l){for(const e of l.filters)if(e.S())return e.field;return null}function hl(l){return null!==l.collectionGroup}function Ac(l){const e=pn(l);if(null===e.D){e.D=[];const n=Lh(e),d=Nh(e);if(null!==n&&null===d)n.isKeyField()||e.D.push(new ec(n)),e.D.push(new ec(ts.keyField(),"asc"));else{let p=!1;for(const _ of e.explicitOrderBy)e.D.push(_),_.field.isKeyField()&&(p=!0);if(!p){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ec(ts.keyField(),_))}}}return e.D}function Iu(l){const e=pn(l);if(!e.C)if("F"===e.limitType)e.C=Fd(e.path,e.collectionGroup,Ac(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const _ of Ac(e))n.push(new ec(_.field,"desc"===_.dir?"asc":"desc"));const d=e.endAt?new Ps(e.endAt.position,e.endAt.inclusive):null,p=e.startAt?new Ps(e.startAt.position,e.startAt.inclusive):null;e.C=Fd(e.path,e.collectionGroup,n,e.filters,e.limit,d,p)}return e.C}function wf(l,e,n){return new Wu(l.path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),e,n,l.startAt,l.endAt)}function kc(l,e){return Gu(Iu(l),Iu(e))&&l.limitType===e.limitType}function Op(l){return`${dl(Iu(l))}|lt:${l.limitType}`}function du(l){return`Query(target=${function td(l){let e=l.path.canonicalString();return null!==l.collectionGroup&&(e+=" collectionGroup="+l.collectionGroup),l.filters.length>0&&(e+=`, filters: [${l.filters.map(n=>{return`${(d=n).field.canonicalString()} ${d.op} ${Sa(d.value)}`;var d}).join(", ")}]`),ua(l.limit)||(e+=", limit: "+l.limit),l.orderBy.length>0&&(e+=`, orderBy: [${l.orderBy.map(n=>{return`${(d=n).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),l.startAt&&(e+=", startAt: ",e+=l.startAt.inclusive?"b:":"a:",e+=l.startAt.position.map(n=>Sa(n)).join(",")),l.endAt&&(e+=", endAt: ",e+=l.endAt.inclusive?"a:":"b:",e+=l.endAt.position.map(n=>Sa(n)).join(",")),`Target(${e})`}(Iu(l))}; limitType=${l.limitType})`}function rc(l,e){return e.isFoundDocument()&&function(n,d){const p=d.key.path;return null!==n.collectionGroup?d.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(p):Fn.isDocumentKey(n.path)?n.path.isEqual(p):n.path.isImmediateParentOf(p)}(l,e)&&function(n,d){for(const p of n.explicitOrderBy)if(!p.field.isKeyField()&&null===d.data.field(p.field))return!1;return!0}(l,e)&&function(n,d){for(const p of n.filters)if(!p.matches(d))return!1;return!0}(l,e)&&(d=e,!((n=l).startAt&&!function(p,_,w){const j=tc(p,_,w);return p.inclusive?j<=0:j<0}(n.startAt,Ac(n),d)||n.endAt&&!function(p,_,w){const j=tc(p,_,w);return p.inclusive?j>=0:j>0}(n.endAt,Ac(n),d)));var n,d}function zu(l){return l.collectionGroup||(l.path.length%2==1?l.path.lastSegment():l.path.get(l.path.length-2))}function Rp(l){return(e,n)=>{let d=!1;for(const p of Ac(l)){const _=jd(p,e,n);if(0!==_)return _;d=d||p.field.isKeyField()}return 0}}function jd(l,e,n){const d=l.field.isKeyField()?Fn.comparator(e.key,n.key):function(p,_,w){const j=_.data.field(p),le=w.data.field(p);return null!==j&&null!==le?ui(j,le):Qt()}(l.field,e,n);switch(l.dir){case"asc":return d;case"desc":return-1*d;default:return Qt()}}function Np(l,e){if(l.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:No(e)?"-0":e}}function Fh(l){return{integerValue:""+l}}function Cf(l,e){return Su(e)?Fh(e):Np(l,e)}class id{constructor(){this._=void 0}}function Ud(l,e,n){return l instanceof Mc?function(d,p){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return p&&(_.fields.__previous_value__=p),{mapValue:_}}(n,e):l instanceof Bd?fl(l,e):l instanceof fu?xf(l,e):function(d,p){const _=hu(d,p),w=wa(_)+wa(d.k);return _n(_)&&_n(d.k)?Fh(w):Np(d.M,w)}(l,e)}function Xg(l,e,n){return l instanceof Bd?fl(l,e):l instanceof fu?xf(l,e):n}function hu(l,e){return l instanceof da?_n(n=e)||(d=n)&&"doubleValue"in d?e:{integerValue:0}:null;var d,n}class Mc extends id{}class Bd extends id{constructor(e){super(),this.elements=e}}function fl(l,e){const n=sd(e);for(const d of l.elements)n.some(p=>Kr(p,d))||n.push(d);return{arrayValue:{values:n}}}class fu extends id{constructor(e){super(),this.elements=e}}function xf(l,e){let n=sd(e);for(const d of l.elements)n=n.filter(p=>!Kr(p,d));return{arrayValue:{values:n}}}class da extends id{constructor(e,n){super(),this.M=e,this.k=n}}function wa(l){return ns(l.integerValue||l.doubleValue)}function sd(l){return Pa(l)&&l.arrayValue.values?l.arrayValue.values.slice():[]}class od{constructor(e,n){this.field=e,this.transform=n}}class Df{constructor(e,n){this.version=e,this.transformResults=n}}class wo{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wo}static exists(e){return new wo(void 0,e)}static updateTime(e){return new wo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Af(l,e){return void 0!==l.updateTime?e.isFoundDocument()&&e.version.isEqual(l.updateTime):void 0===l.exists||l.exists===e.isFoundDocument()}class ic{}function sc(l,e,n){l instanceof oc?function(d,p,_){const w=d.value.clone(),j=Vd(d.fieldTransforms,p,_.transformResults);w.setAll(j),p.convertToFoundDocument(_.version,w).setHasCommittedMutations()}(l,e,n):l instanceof kl?function(d,p,_){if(!Af(d.precondition,p))return void p.convertToUnknownDocument(_.version);const w=Vd(d.fieldTransforms,p,_.transformResults),j=p.data;j.setAll(Pf(d)),j.setAll(w),p.convertToFoundDocument(_.version,j).setHasCommittedMutations()}(l,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function pl(l,e,n){var p;l instanceof oc?function(d,p,_){if(!Af(d.precondition,p))return;const w=d.value.clone(),j=Pc(d.fieldTransforms,_,p);w.setAll(j),p.convertToFoundDocument(Mf(p),w).setHasLocalMutations()}(l,e,n):l instanceof kl?function(d,p,_){if(!Af(d.precondition,p))return;const w=Pc(d.fieldTransforms,_,p),j=p.data;j.setAll(Pf(d)),j.setAll(w),p.convertToFoundDocument(Mf(p),j).setHasLocalMutations()}(l,e,n):Af(l.precondition,p=e)&&p.convertToNoDocument(Dr.min())}function Lp(l,e){let n=null;for(const d of l.fieldTransforms){const p=e.data.field(d.field),_=hu(d.transform,p||null);null!=_&&(null==n&&(n=Q.empty()),n.set(d.field,_))}return n||null}function kf(l,e){return l.type===e.type&&!!l.key.isEqual(e.key)&&!!l.precondition.isEqual(e.precondition)&&(d=e.fieldTransforms,!!(void 0===(n=l.fieldTransforms)&&void 0===d||n&&d&&uu(n,d,(p,_)=>function If(l,e){return l.field.isEqual(e.field)&&(d=e.transform,(n=l.transform)instanceof Bd&&d instanceof Bd||n instanceof fu&&d instanceof fu?uu(n.elements,d.elements,Kr):n instanceof da&&d instanceof da?Kr(n.k,d.k):n instanceof Mc&&d instanceof Mc);var n,d}(p,_))))&&(0===l.type?l.value.isEqual(e.value):1!==l.type||l.data.isEqual(e.data)&&l.fieldMask.isEqual(e.fieldMask));var n,d}function Mf(l){return l.isFoundDocument()?l.version:Dr.min()}class oc extends ic{constructor(e,n,d,p=[]){super(),this.key=e,this.value=n,this.precondition=d,this.fieldTransforms=p,this.type=0}}class kl extends ic{constructor(e,n,d,p,_=[]){super(),this.key=e,this.data=n,this.fieldMask=d,this.precondition=p,this.fieldTransforms=_,this.type=1}}function Pf(l){const e=new Map;return l.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const d=l.data.field(n);e.set(n,d)}}),e}function Vd(l,e,n){const d=new Map;Pn(l.length===n.length);for(let p=0;p<n.length;p++){const _=l[p],w=_.transform,j=e.data.field(_.field);d.set(_.field,Xg(w,j,n[p]))}return d}function Pc(l,e,n){const d=new Map;for(const p of l){const _=p.transform,w=n.data.field(p.field);d.set(p.field,Ud(_,w,e))}return d}class Du extends ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class jh extends ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}class Of{constructor(e){this.count=e}}var Os,wr;function Hd(l){switch(l){default:return Qt();case Rt.CANCELLED:case Rt.UNKNOWN:case Rt.DEADLINE_EXCEEDED:case Rt.RESOURCE_EXHAUSTED:case Rt.INTERNAL:case Rt.UNAVAILABLE:case Rt.UNAUTHENTICATED:return!1;case Rt.INVALID_ARGUMENT:case Rt.NOT_FOUND:case Rt.ALREADY_EXISTS:case Rt.PERMISSION_DENIED:case Rt.FAILED_PRECONDITION:case Rt.ABORTED:case Rt.OUT_OF_RANGE:case Rt.UNIMPLEMENTED:case Rt.DATA_LOSS:return!0}}function Rf(l){if(void 0===l)return ze("GRPC error has no .code"),Rt.UNKNOWN;switch(l){case Os.OK:return Rt.OK;case Os.CANCELLED:return Rt.CANCELLED;case Os.UNKNOWN:return Rt.UNKNOWN;case Os.DEADLINE_EXCEEDED:return Rt.DEADLINE_EXCEEDED;case Os.RESOURCE_EXHAUSTED:return Rt.RESOURCE_EXHAUSTED;case Os.INTERNAL:return Rt.INTERNAL;case Os.UNAVAILABLE:return Rt.UNAVAILABLE;case Os.UNAUTHENTICATED:return Rt.UNAUTHENTICATED;case Os.INVALID_ARGUMENT:return Rt.INVALID_ARGUMENT;case Os.NOT_FOUND:return Rt.NOT_FOUND;case Os.ALREADY_EXISTS:return Rt.ALREADY_EXISTS;case Os.PERMISSION_DENIED:return Rt.PERMISSION_DENIED;case Os.FAILED_PRECONDITION:return Rt.FAILED_PRECONDITION;case Os.ABORTED:return Rt.ABORTED;case Os.OUT_OF_RANGE:return Rt.OUT_OF_RANGE;case Os.UNIMPLEMENTED:return Rt.UNIMPLEMENTED;case Os.DATA_LOSS:return Rt.DATA_LOSS;default:return Qt()}}(wr=Os||(Os={}))[wr.OK=0]="OK",wr[wr.CANCELLED=1]="CANCELLED",wr[wr.UNKNOWN=2]="UNKNOWN",wr[wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wr[wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wr[wr.NOT_FOUND=5]="NOT_FOUND",wr[wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",wr[wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",wr[wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",wr[wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wr[wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wr[wr.ABORTED=10]="ABORTED",wr[wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",wr[wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",wr[wr.INTERNAL=13]="INTERNAL",wr[wr.UNAVAILABLE=14]="UNAVAILABLE",wr[wr.DATA_LOSS=15]="DATA_LOSS";class pu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),d=this.inner[n];if(void 0!==d)for(const[p,_]of d)if(this.equalsFn(p,e))return _}has(e){return void 0!==this.get(e)}set(e,n){const d=this.mapKeyFn(e),p=this.inner[d];if(void 0===p)return this.inner[d]=[[e,n]],void this.innerSize++;for(let _=0;_<p.length;_++)if(this.equalsFn(p[_][0],e))return void(p[_]=[e,n]);p.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),d=this.inner[n];if(void 0===d)return!1;for(let p=0;p<d.length;p++)if(this.equalsFn(d[p][0],e))return 1===d.length?delete this.inner[n]:d.splice(p,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(n,d)=>{for(const[p,_]of d)e(p,_)})}isEmpty(){return wc(this.inner)}size(){return this.innerSize}}const Nf=new li(Fn.comparator);function gu(){return Nf}const Fp=new li(Fn.comparator);function Lf(...l){let e=Fp;for(const n of l)e=e.insert(n.key,n);return e}function Ml(){return new pu(l=>l.toString(),(l,e)=>l.isEqual(e))}const Jg=new li(Fn.comparator),jp=new vi(Fn.comparator);function qi(...l){let e=jp;for(const n of l)e=e.add(n);return e}const ad=new vi(Ur);function ta(){return ad}class ac{constructor(e,n,d,p,_){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=d,this.documentUpdates=p,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,n){const d=new Map;return d.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,n)),new ac(Dr.min(),d,ta(),gu(),qi())}}class uc{constructor(e,n,d,p,_){this.resumeToken=e,this.current=n,this.addedDocuments=d,this.modifiedDocuments=p,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,n){return new uc(ho.EMPTY_BYTE_STRING,n,qi(),qi(),qi())}}class lc{constructor(e,n,d,p){this.O=e,this.removedTargetIds=n,this.key=d,this.F=p}}class Co{constructor(e,n){this.targetId=e,this.$=n}}class Pl{constructor(e,n,d=ho.EMPTY_BYTE_STRING,p=null){this.state=e,this.targetIds=n,this.resumeToken=d,this.cause=p}}class Uh{constructor(){this.B=0,this.L=Ca(),this.U=ho.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=qi(),n=qi(),d=qi();return this.L.forEach((p,_)=>{switch(_){case 0:e=e.add(p);break;case 2:n=n.add(p);break;case 1:d=d.add(p);break;default:Qt()}}),new uc(this.U,this.q,e,n,d)}J(){this.K=!1,this.L=Ca()}Y(e,n){this.K=!0,this.L=this.L.insert(e,n)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Oc{constructor(e){this.nt=e,this.st=new Map,this.it=gu(),this.rt=ud(),this.ot=new vi(Ur)}ut(e){for(const n of e.O)e.F&&e.F.isFoundDocument()?this.at(n,e.F):this.ct(n,e.key,e.F);for(const n of e.removedTargetIds)this.ct(n,e.key,e.F)}ht(e){this.forEachTarget(e,n=>{const d=this.lt(n);switch(e.state){case 0:this.ft(n)&&d.W(e.resumeToken);break;case 1:d.tt(),d.G||d.J(),d.W(e.resumeToken);break;case 2:d.tt(),d.G||this.removeTarget(n);break;case 3:this.ft(n)&&(d.et(),d.W(e.resumeToken));break;case 4:this.ft(n)&&(this.dt(n),d.W(e.resumeToken));break;default:Qt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.st.forEach((d,p)=>{this.ft(p)&&n(p)})}_t(e){const n=e.targetId,d=e.$.count,p=this.wt(n);if(p){const _=p.target;if(nd(_))if(0===d){const w=new Fn(_.path);this.ct(n,w,qe.newNoDocument(w,Dr.min()))}else Pn(1===d);else this.gt(n)!==d&&(this.dt(n),this.ot=this.ot.add(n))}}yt(e){const n=new Map;this.st.forEach((_,w)=>{const j=this.wt(w);if(j){if(_.current&&nd(j.target)){const le=new Fn(j.target.path);null!==this.it.get(le)||this.It(w,le)||this.ct(w,le,qe.newNoDocument(le,e))}_.j&&(n.set(w,_.H()),_.J())}});let d=qi();this.rt.forEach((_,w)=>{let j=!0;w.forEachWhile(le=>{const me=this.wt(le);return!me||2===me.purpose||(j=!1,!1)}),j&&(d=d.add(_))}),this.it.forEach((_,w)=>w.setReadTime(e));const p=new ac(e,n,this.ot,this.it,d);return this.it=gu(),this.rt=ud(),this.ot=new vi(Ur),p}at(e,n){if(!this.ft(e))return;const d=this.It(e,n.key)?2:0;this.lt(e).Y(n.key,d),this.it=this.it.insert(n.key,n),this.rt=this.rt.insert(n.key,this.Tt(n.key).add(e))}ct(e,n,d){if(!this.ft(e))return;const p=this.lt(e);this.It(e,n)?p.Y(n,1):p.X(n),this.rt=this.rt.insert(n,this.Tt(n).delete(e)),d&&(this.it=this.it.insert(n,d))}removeTarget(e){this.st.delete(e)}gt(e){const n=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let n=this.st.get(e);return n||(n=new Uh,this.st.set(e,n)),n}Tt(e){let n=this.rt.get(e);return n||(n=new vi(Ur),this.rt=this.rt.insert(e,n)),n}ft(e){const n=null!==this.wt(e);return n||de("WatchChangeAggregator","Detected inactive target",e),n}wt(e){const n=this.st.get(e);return n&&n.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Uh),this.nt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}It(e,n){return this.nt.getRemoteKeysForTarget(e).has(n)}}function ud(){return new li(Fn.comparator)}function Ca(){return new li(Fn.comparator)}const gl={asc:"ASCENDING",desc:"DESCENDING"},Bh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ff{constructor(e,n){this.databaseId=e,this.N=n}}function ml(l,e){return l.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ld(l,e){return l.N?e.toBase64():e.toUint8Array()}function jf(l,e){return ml(l,e.toTimestamp())}function eo(l){return Pn(!!l),Dr.fromTimestamp(function(e){const n=Qo(e);return new Vs(n.seconds,n.nanos)}(l))}function Vh(l,e){return(n=l,new mi(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function qu(l){const e=mi.fromString(l);return Pn(It(e)),e}function Ol(l,e){return Vh(l.databaseId,e.path)}function Ku(l,e){const n=qu(e);if(n.get(1)!==l.databaseId.projectId)throw new dn(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+l.databaseId.projectId);if(n.get(3)!==l.databaseId.database)throw new dn(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+l.databaseId.database);return new Fn(Ra(n))}function Gd(l,e){return Vh(l.databaseId,e)}function cd(l){const e=qu(l);return 4===e.length?mi.emptyPath():Ra(e)}function Rc(l){return new mi(["projects",l.databaseId.projectId,"databases",l.databaseId.database]).canonicalString()}function Ra(l){return Pn(l.length>4&&"documents"===l.get(4)),l.popFirst(5)}function Nc(l,e,n){return{name:Ol(l,e),fields:n.value.mapValue.fields}}function $d(l,e,n){const d=Ku(l,e.name),p=eo(e.updateTime),_=new Q({mapValue:{fields:e.fields}}),w=qe.newFoundDocument(d,p,_);return n&&w.setHasCommittedMutations(),n?w.setHasCommittedMutations():w}function vl(l,e){let n;if(e instanceof oc)n={update:Nc(l,e.key,e.value)};else if(e instanceof Du)n={delete:Ol(l,e.key)};else if(e instanceof kl)n={update:Nc(l,e.key,e.data),updateMask:De(e.fieldMask)};else{if(!(e instanceof jh))return Qt();n={verify:Ol(l,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(d=>function(p,_){const w=_.transform;if(w instanceof Mc)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Bd)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof fu)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof da)return{fieldPath:_.field.canonicalString(),increment:w.k};throw Qt()}(0,d))),e.precondition.isNone||(n.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:jf(l,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:Qt()),n;var p}function Wd(l,e){const n=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?wo.updateTime(eo(p.updateTime)):void 0!==p.exists?wo.exists(p.exists):wo.none():wo.none(),d=e.updateTransforms?e.updateTransforms.map(p=>function(_,w){let j=null;"setToServerValue"in w?(Pn("REQUEST_TIME"===w.setToServerValue),j=new Mc):"appendMissingElements"in w?j=new Bd(w.appendMissingElements.values||[]):"removeAllFromArray"in w?j=new fu(w.removeAllFromArray.values||[]):"increment"in w?j=new da(_,w.increment):Qt();const le=ts.fromServerFormat(w.fieldPath);return new od(le,j)}(l,p)):[];var p;if(e.update){const p=Ku(l,e.update.name),_=new Q({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new Yi((e.updateMask.fieldPaths||[]).map(me=>ts.fromServerFormat(me)));return new kl(p,_,w,n,d)}return new oc(p,_,n,d)}if(e.delete){const p=Ku(l,e.delete);return new Du(p,n)}if(e.verify){const p=Ku(l,e.verify);return new jh(p,n)}return Qt()}function Vf(l,e){return{documents:[Gd(l,e.path)]}}function zd(l,e){const n={structuredQuery:{}},d=e.path;null!==e.collectionGroup?(n.parent=Gd(l,d),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Gd(l,d.popLast()),n.structuredQuery.from=[{collectionId:d.lastSegment()}]);const p=function(le){if(0===le.length)return;const me=le.map(tt=>function(yt){if("=="===yt.op){if(cu(yt.value))return{unaryFilter:{field:y(yt.field),op:"IS_NAN"}};if(xc(yt.value))return{unaryFilter:{field:y(yt.field),op:"IS_NULL"}}}else if("!="===yt.op){if(cu(yt.value))return{unaryFilter:{field:y(yt.field),op:"IS_NOT_NAN"}};if(xc(yt.value))return{unaryFilter:{field:y(yt.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:y(yt.field),op:C(yt.op),value:yt.value}}}(tt));return 1===me.length?me[0]:{compositeFilter:{op:"AND",filters:me}}}(e.filters);p&&(n.structuredQuery.where=p);const _=function(le){if(0!==le.length)return le.map(me=>{return{field:y((tt=me).field),direction:cc(tt.dir)};var tt})}(e.orderBy);_&&(n.structuredQuery.orderBy=_);const w=(me=e.limit,l.N||ua(me)?me:{value:me});var me,j,le;return null!==w&&(n.structuredQuery.limit=w),e.startAt&&(n.structuredQuery.startAt={before:(j=e.startAt).inclusive,values:j.position}),e.endAt&&(n.structuredQuery.endAt={before:!(le=e.endAt).inclusive,values:le.position}),n}function Hf(l){let e=cd(l.parent);const n=l.structuredQuery,d=n.from?n.from.length:0;let p=null;if(d>0){Pn(1===d);const tt=n.from[0];tt.allDescendants?p=tt.collectionId:e=e.child(tt.collectionId)}let _=[];n.where&&(_=Hh(n.where));let w=[];n.orderBy&&(w=n.orderBy.map(tt=>{return new ec(b((yt=tt).field),function(Wt){switch(Wt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(yt.direction));var yt}));let j=null;n.limit&&(j=function(tt){let yt;return yt="object"==typeof tt?tt.value:tt,ua(yt)?null:yt}(n.limit));let le=null;var tt;n.startAt&&(le=new Ps((tt=n.startAt).values||[],!!tt.before));let me=null;return n.endAt&&(me=function(tt){return new Ps(tt.values||[],!tt.before)}(n.endAt)),Dc(e,p,w,_,j,"F",le,me)}function Hh(l){return l?void 0!==l.unaryFilter?[ue(l)]:void 0!==l.fieldFilter?[M(l)]:void 0!==l.compositeFilter?l.compositeFilter.filters.map(e=>Hh(e)).reduce((e,n)=>e.concat(n)):Qt():[]}function cc(l){return gl[l]}function C(l){return Bh[l]}function y(l){return{fieldPath:l.canonicalString()}}function b(l){return ts.fromServerFormat(l.fieldPath)}function M(l){return go.create(b(l.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}}(l.fieldFilter.op),l.fieldFilter.value)}function ue(l){switch(l.unaryFilter.op){case"IS_NAN":const e=b(l.unaryFilter.field);return go.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=b(l.unaryFilter.field);return go.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=b(l.unaryFilter.field);return go.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=b(l.unaryFilter.field);return go.create(p,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}}function De(l){const e=[];return l.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function It(l){return l.length>=4&&"projects"===l.get(0)&&"databases"===l.get(2)}function Ht(l){let e="";for(let n=0;n<l.length;n++)e.length>0&&(e=er(e)),e=Un(l.get(n),e);return er(e)}function Un(l,e){let n=e;const d=l.length;for(let p=0;p<d;p++){const _=l.charAt(p);switch(_){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=_}}return n}function er(l){return l+"\x01\x01"}function lr(l){const e=l.length;if(Pn(e>=2),2===e)return Pn("\x01"===l.charAt(0)&&"\x01"===l.charAt(1)),mi.emptyPath();const n=e-2,d=[];let p="";for(let _=0;_<e;){const w=l.indexOf("\x01",_);switch((w<0||w>n)&&Qt(),l.charAt(w+1)){case"\x01":const j=l.substring(_,w);let le;0===p.length?le=j:(p+=j,le=p,p=""),d.push(le);break;case"\x10":p+=l.substring(_,w),p+="\0";break;case"\x11":p+=l.substring(_,w+1);break;default:Qt()}_=w+2}return new mi(d)}const _r=["userId","batchId"];function to(l,e){return[l,Ht(e)]}function Na(l,e,n){return[l,Ht(e),n]}const dd={},Gf=["prefixPath","collectionGroup","readTime","documentId"],Bp=["prefixPath","collectionGroup","documentId"],Rl=["collectionGroup","readTime","prefixPath","documentId"],qn=["canonicalId","targetId"],Lc=["targetId","path"],$f=["path","targetId"],hd=["collectionId","parent"],qd=["indexId","uid"],Kd=["uid","sequenceNumber"],em=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mo=["indexId","uid","orderedDocumentKey"],Zd=["userId","collectionPath","documentId"],Vp=["userId","collectionPath","largestBatchId"],Yd=["userId","collectionGroup","largestBatchId"],Fc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wf=[...Fc,"documentOverlays"],Qd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yv=[...Qd,"indexConfiguration","indexState","indexEntries"],zf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Xt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Xt((d,p)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(d,p)},this.catchCallback=_=>{this.wrapFailure(n,_).next(d,p)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Xt?n:Xt.resolve(n)}catch(n){return Xt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Xt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Xt.reject(n)}static resolve(e){return new Xt((n,d)=>{n(e)})}static reject(e){return new Xt((n,d)=>{d(e)})}static waitFor(e){return new Xt((n,d)=>{let p=0,_=0,w=!1;e.forEach(j=>{++p,j.next(()=>{++_,w&&_===p&&n()},le=>d(le))}),w=!0,_===p&&n()})}static or(e){let n=Xt.resolve(!1);for(const d of e)n=n.next(p=>p?Xt.resolve(p):d());return n}static forEach(e,n){const d=[];return e.forEach((p,_)=>{d.push(n.call(this,p,_))}),this.waitFor(d)}}class ha{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.At=new gs,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{n.error?this.At.reject(new kt(e,n.error)):this.At.resolve()},this.transaction.onerror=d=>{const p=Au(d.target.error);this.At.reject(new kt(e,p))}}static open(e,n,d,p){try{return new ha(n,e.transaction(p,d))}catch(_){throw new kt(n,_)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(de("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new rm(n)}}class yl{constructor(e,n,d){this.name=e,this.version=n,this.Pt=d,12.2===yl.Vt((0,xt.z$)())&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return de("SimpleDb","Removing database:",e),xa(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,xt.hl)())return!1;if(yl.St())return!0;const e=(0,xt.z$)(),n=yl.Vt(e),d=0<n&&n<10,p=yl.Dt(e),_=0<p&&p<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||d||_)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,n){return e.store(n)}static Vt(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),d=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(d)}static Dt(e){const n=e.match(/Android ([\d.]+)/i),d=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(d)}Nt(e){var n=this;return(0,ne.Z)(function*(){return n.db||(de("SimpleDb","Opening database:",n.name),n.db=yield new Promise((d,p)=>{const _=indexedDB.open(n.name,n.version);_.onsuccess=w=>{d(w.target.result)},_.onblocked=()=>{p(new kt(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=w=>{const j=w.target.error;p("VersionError"===j.name?new dn(Rt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===j.name?new dn(Rt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+j):new kt(e,j))},_.onupgradeneeded=w=>{de("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',w.oldVersion),n.Pt.kt(w.target.result,_.transaction,w.oldVersion,n.version).next(()=>{de("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.Mt&&(n.db.onversionchange=d=>n.Mt(d)),n.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,d,p){var _=this;return(0,ne.Z)(function*(){const w="readonly"===n;let j=0;for(;;){++j;try{_.db=yield _.Nt(e);const le=ha.open(_.db,e,w?"readonly":"readwrite",d),me=p(le).next(tt=>(le.bt(),tt)).catch(tt=>(le.abort(tt),Xt.reject(tt))).toPromise();return me.catch(()=>{}),yield le.Rt,me}catch(le){const me="FirebaseError"!==le.name&&j<3;if(de("SimpleDb","Transaction failed with error:",le.message,"Retrying:",me),_.close(),!me)return Promise.reject(le)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nm{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return xa(this.Ft.delete())}}class kt extends dn{constructor(e,n){super(Rt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Yu(l){return"IndexedDbTransactionError"===l.name}class rm{constructor(e){this.store=e}put(e,n){let d;return void 0!==n?(de("SimpleDb","PUT",this.store.name,e,n),d=this.store.put(n,e)):(de("SimpleDb","PUT",this.store.name,"<auto-key>",e),d=this.store.put(e)),xa(d)}add(e){return de("SimpleDb","ADD",this.store.name,e,e),xa(this.store.add(e))}get(e){return xa(this.store.get(e)).next(n=>(void 0===n&&(n=null),de("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return de("SimpleDb","DELETE",this.store.name,e),xa(this.store.delete(e))}count(){return de("SimpleDb","COUNT",this.store.name),xa(this.store.count())}qt(e,n){const d=this.options(e,n);if(d.index||"function"!=typeof this.store.getAll){const p=this.cursor(d),_=[];return this.Kt(p,(w,j)=>{_.push(j)}).next(()=>_)}{const p=this.store.getAll(d.range);return new Xt((_,w)=>{p.onerror=j=>{w(j.target.error)},p.onsuccess=j=>{_(j.target.result)}})}}Gt(e,n){const d=this.store.getAll(e,null===n?void 0:n);return new Xt((p,_)=>{d.onerror=w=>{_(w.target.error)},d.onsuccess=w=>{p(w.target.result)}})}Qt(e,n){de("SimpleDb","DELETE ALL",this.store.name);const d=this.options(e,n);d.jt=!1;const p=this.cursor(d);return this.Kt(p,(_,w,j)=>j.delete())}Wt(e,n){let d;n?d=e:(d={},n=e);const p=this.cursor(d);return this.Kt(p,n)}zt(e){const n=this.cursor({});return new Xt((d,p)=>{n.onerror=_=>{const w=Au(_.target.error);p(w)},n.onsuccess=_=>{const w=_.target.result;w?e(w.primaryKey,w.value).next(j=>{j?w.continue():d()}):d()}})}Kt(e,n){const d=[];return new Xt((p,_)=>{e.onerror=w=>{_(w.target.error)},e.onsuccess=w=>{const j=w.target.result;if(!j)return void p();const le=new nm(j),me=n(j.primaryKey,j.value,le);if(me instanceof Xt){const tt=me.catch(yt=>(le.done(),Xt.reject(yt)));d.push(tt)}le.isDone?p():null===le.Lt?j.continue():j.continue(le.Lt)}}).next(()=>Xt.waitFor(d))}options(e,n){let d;return void 0!==e&&("string"==typeof e?d=e:n=e),{index:d,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const d=this.store.index(e.index);return e.jt?d.openKeyCursor(e.range,n):d.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function xa(l){return new Xt((e,n)=>{l.onsuccess=d=>{e(d.target.result)},l.onerror=d=>{const p=Au(d.target.error);n(p)}})}let Gh=!1;function Au(l){const e=yl.Vt((0,xt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(l.message.indexOf(n)>=0){const d=new dn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gh||(Gh=!0,setTimeout(()=>{throw d},0)),d}}return l}class Nl extends tm{constructor(e,n){super(),this.Ht=e,this.currentSequenceNumber=n}}function Is(l,e){const n=pn(l);return yl.xt(n.Ht,e)}class Xd{constructor(e,n,d,p){this.batchId=e,this.localWriteTime=n,this.baseMutations=d,this.mutations=p}applyToRemoteDocument(e,n){const d=n.mutationResults;for(let p=0;p<this.mutations.length;p++){const _=this.mutations[p];_.key.isEqual(e.key)&&sc(_,e,d[p])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&pl(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&pl(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const d=e.get(n.key),p=d;this.applyToLocalView(p),d.isValidDocument()||p.convertToNoDocument(Dr.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qi())}isEqual(e){return this.batchId===e.batchId&&uu(this.mutations,e.mutations,(n,d)=>kf(n,d))&&uu(this.baseMutations,e.baseMutations,(n,d)=>kf(n,d))}}class Ll{constructor(e,n,d,p){this.batch=e,this.commitVersion=n,this.mutationResults=d,this.docVersions=p}static from(e,n,d){Pn(e.mutations.length===d.length);let p=Jg;const _=e.mutations;for(let w=0;w<_.length;w++)p=p.insert(_[w].key,d[w].version);return new Ll(e,n,d,p)}}class Jd{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dc{constructor(e,n,d,p,_=Dr.min(),w=Dr.min(),j=ho.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=d,this.sequenceNumber=p,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=j}withSequenceNumber(e){return new dc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class im{constructor(e){this.Jt=e}}function $h(l,e){const n=e.key,d={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:hc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())d.document={name:Ol(p=l.Jt,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:ml(p,_.version.toTimestamp())};else if(e.isNoDocument())d.noDocument={path:n.path.toArray(),readTime:fd(e.version)};else{if(!e.isUnknownDocument())return Qt();d.unknownDocument={path:n.path.toArray(),version:fd(e.version)}}var p,_;return d}function hc(l){const e=l.toTimestamp();return[e.seconds,e.nanoseconds]}function fd(l){const e=l.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pd(l){const e=new Vs(l.seconds,l.nanoseconds);return Dr.fromTimestamp(e)}function gd(l,e){const n=(e.baseMutations||[]).map(_=>Wd(l.Jt,_));for(let _=0;_<e.mutations.length-1;++_){const w=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(w.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const d=e.mutations.map(_=>Wd(l.Jt,_)),p=Vs.fromMillis(e.localWriteTimeMs);return new Xd(e.batchId,p,n,d)}function eh(l){const e=pd(l.readTime),n=void 0!==l.lastLimboFreeSnapshotVersion?pd(l.lastLimboFreeSnapshotVersion):Dr.min();let d;var p;return void 0!==l.query.documents?(Pn(1===(p=l.query).documents.length),d=Iu(nc(cd(p.documents[0])))):d=Iu(Hf(l.query)),new dc(d,l.targetId,0,l.lastListenSequenceNumber,e,n,ho.fromBase64String(l.resumeToken))}function Wh(l,e){const n=fd(e.snapshotVersion),d=fd(e.lastLimboFreeSnapshotVersion);let p;p=nd(e.target)?Vf(l.Jt,e.target):zd(l.Jt,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:dl(e.target),readTime:n,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:d,query:p}}function zh(l){const e=Hf({parent:l.parent,structuredQuery:l.structuredQuery});return"LAST"===l.limitType?wf(e,e.limit,"L"):e}function sm(l,e){return new Jd(e.largestBatchId,Wd(l.Jt,e.overlayMutation))}function Gp(l,e){const n=e.path.lastSegment();return[l,Ht(e.path.popLast()),n]}class _v{getBundleMetadata(e,n){return om(e).get(n).next(d=>{if(d)return{id:(p=d).bundleId,createTime:pd(p.createTime),version:p.version};var p})}saveBundleMetadata(e,n){return om(e).put({bundleId:(d=n).id,createTime:fd(eo(d.createTime)),version:d.version});var d}getNamedQuery(e,n){return bv(e).get(n).next(d=>{if(d)return{name:(p=d).name,query:zh(p.bundledQuery),readTime:pd(p.readTime)};var p})}saveNamedQuery(e,n){return bv(e).put({name:(d=n).name,readTime:fd(eo(d.readTime)),bundledQuery:d.bundledQuery});var d}}function om(l){return Is(l,"bundles")}function bv(l){return Is(l,"namedQueries")}class $p{constructor(e,n){this.M=e,this.userId=n}static Yt(e,n){return new $p(e,n.uid||"")}getOverlay(e,n){return Ya(e).get(Gp(this.userId,n)).next(d=>d?sm(this.M,d):null)}saveOverlays(e,n,d){const p=[];return d.forEach((_,w)=>{const j=new Jd(n,w);p.push(this.Xt(e,j))}),Xt.waitFor(p)}removeOverlaysForBatchId(e,n,d){const p=new Set;n.forEach(w=>p.add(Ht(w.getCollectionPath())));const _=[];return p.forEach(w=>{const j=IDBKeyRange.bound([this.userId,w,d],[this.userId,w,d+1],!1,!0);_.push(Ya(e).Qt("collectionPathOverlayIndex",j))}),Xt.waitFor(_)}getOverlaysForCollection(e,n,d){const p=Ml(),_=Ht(n),w=IDBKeyRange.bound([this.userId,_,d],[this.userId,_,Number.POSITIVE_INFINITY],!0);return Ya(e).qt("collectionPathOverlayIndex",w).next(j=>{for(const le of j){const me=sm(this.M,le);p.set(me.getKey(),me)}return p})}getOverlaysForCollectionGroup(e,n,d,p){const _=Ml();let w;const j=IDBKeyRange.bound([this.userId,n,d],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ya(e).Wt({index:"collectionGroupOverlayIndex",range:j},(le,me,tt)=>{const yt=sm(this.M,me);_.size()<p||yt.largestBatchId===w?(_.set(yt.getKey(),yt),w=yt.largestBatchId):tt.done()}).next(()=>_)}Xt(e,n){return Ya(e).put(function(d,p,_){const[w,j,le]=Gp(p,_.mutation.key);return{userId:p,collectionPath:j,documentId:le,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:vl(d.Jt,_.mutation)}}(this.M,this.userId,n))}}function Ya(l){return Is(l,"documentOverlays")}class Fl{constructor(){}Zt(e,n){this.te(e,n),n.ee()}te(e,n){if("nullValue"in e)this.ne(n,5);else if("booleanValue"in e)this.ne(n,10),n.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(n,15),n.se(ns(e.integerValue));else if("doubleValue"in e){const d=ns(e.doubleValue);isNaN(d)?this.ne(n,13):(this.ne(n,15),No(d)?n.se(0):n.se(d))}else if("timestampValue"in e){const d=e.timestampValue;this.ne(n,20),"string"==typeof d?n.ie(d):(n.ie(`${d.seconds||""}`),n.se(d.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,n),this.oe(n);else if("bytesValue"in e)this.ne(n,30),n.ue(Xo(e.bytesValue)),this.oe(n);else if("referenceValue"in e)this.ae(e.referenceValue,n);else if("geoPointValue"in e){const d=e.geoPointValue;this.ne(n,45),n.se(d.latitude||0),n.se(d.longitude||0)}else"mapValue"in e?ea(e)?this.ne(n,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,n),this.oe(n)):"arrayValue"in e?(this.he(e.arrayValue,n),this.oe(n)):Qt()}re(e,n){this.ne(n,25),this.le(e,n)}le(e,n){n.ie(e)}ce(e,n){const d=e.fields||{};this.ne(n,55);for(const p of Object.keys(d))this.re(p,n),this.te(d[p],n)}he(e,n){const d=e.values||[];this.ne(n,50);for(const p of d)this.te(p,n)}ae(e,n){this.ne(n,37),Fn.fromName(e).path.forEach(d=>{this.ne(n,60),this.le(d,n)})}ne(e,n){e.se(n)}oe(e){e.se(2)}}function am(l){if(0===l)return 8;let e=0;return l>>4==0&&(e+=4,l<<=4),l>>6==0&&(e+=2,l<<=2),l>>7==0&&(e+=1),e}function Tv(l){const e=64-function(n){let d=0;for(let p=0;p<8;++p){const _=am(255&n[p]);if(d+=_,8!==_)break}return d}(l);return Math.ceil(e/8)}Fl.fe=new Fl;class Gy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const n=e[Symbol.iterator]();let d=n.next();for(;!d.done;)this._e(d.value),d=n.next();this.we()}me(e){const n=e[Symbol.iterator]();let d=n.next();for(;!d.done;)this.ge(d.value),d=n.next();this.ye()}pe(e){for(const n of e){const d=n.charCodeAt(0);if(d<128)this._e(d);else if(d<2048)this._e(960|d>>>6),this._e(128|63&d);else if(n<"\ud800"||"\udbff"<n)this._e(480|d>>>12),this._e(128|63&d>>>6),this._e(128|63&d);else{const p=n.codePointAt(0);this._e(240|p>>>18),this._e(128|63&p>>>12),this._e(128|63&p>>>6),this._e(128|63&p)}}this.we()}Ie(e){for(const n of e){const d=n.charCodeAt(0);if(d<128)this.ge(d);else if(d<2048)this.ge(960|d>>>6),this.ge(128|63&d);else if(n<"\ud800"||"\udbff"<n)this.ge(480|d>>>12),this.ge(128|63&d>>>6),this.ge(128|63&d);else{const p=n.codePointAt(0);this.ge(240|p>>>18),this.ge(128|63&p>>>12),this.ge(128|63&p>>>6),this.ge(128|63&p)}}this.ye()}Te(e){const n=this.Ee(e),d=Tv(n);this.Ae(1+d),this.buffer[this.position++]=255&d;for(let p=n.length-d;p<n.length;++p)this.buffer[this.position++]=255&n[p]}Re(e){const n=this.Ee(e),d=Tv(n);this.Ae(1+d),this.buffer[this.position++]=~(255&d);for(let p=n.length-d;p<n.length;++p)this.buffer[this.position++]=~(255&n[p])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const n=function(p){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,p,!1),new Uint8Array(_.buffer)}(e),d=0!=(128&n[0]);n[0]^=d?255:128;for(let p=1;p<n.length;++p)n[p]^=d?255:0;return n}_e(e){const n=255&e;0===n?(this.Pe(0),this.Pe(255)):255===n?(this.Pe(255),this.Pe(0)):this.Pe(n)}ge(e){const n=255&e;0===n?(this.ve(0),this.ve(255)):255===n?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const n=e+this.position;if(n<=this.buffer.length)return;let d=2*this.buffer.length;d<n&&(d=n);const p=new Uint8Array(d);p.set(this.buffer),this.buffer=p}}class Ev{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class um{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class jc{constructor(){this.De=new Gy,this.Ce=new Ev(this.De),this.xe=new um(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class th{constructor(e,n,d,p){this.indexId=e,this.documentKey=n,this.arrayValue=d,this.directionalValue=p}ke(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,d=new Uint8Array(n);return d.set(this.directionalValue,0),n!==e?d.set([0],this.directionalValue.length):++d[d.length-1],new th(this.indexId,this.documentKey,this.arrayValue,d)}}function nh(l,e){let n=l.indexId-e.indexId;return 0!==n?n:(n=lm(l.arrayValue,e.arrayValue),0!==n?n:(n=lm(l.directionalValue,e.directionalValue),0!==n?n:Fn.comparator(l.documentKey,e.documentKey)))}function lm(l,e){for(let n=0;n<l.length&&n<e.length;++n){const d=l[n]-e[n];if(0!==d)return d}return l.length-e.length}class ni{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const n of e.filters){const d=n;d.S()?this.Fe=d:this.Oe.push(d)}}$e(e){const n=Ut(e);if(void 0!==n&&!this.Be(n))return!1;const d=yn(e);let p=0,_=0;for(;p<d.length&&this.Be(d[p]);++p);if(p===d.length)return!0;if(void 0!==this.Fe){const w=d[p];if(!this.Le(this.Fe,w)||!this.Ue(this.Me[_++],w))return!1;++p}for(;p<d.length;++p){const w=d[p];if(_>=this.Me.length||!this.Ue(this.Me[_++],w))return!1}return!0}Be(e){for(const n of this.Oe)if(this.Le(n,e))return!0;return!1}Le(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}class Wp{constructor(){this.qe=new qh}addToCollectionParentIndex(e,n){return this.qe.add(n),Xt.resolve()}getCollectionParents(e,n){return Xt.resolve(this.qe.getEntries(n))}addFieldIndex(e,n){return Xt.resolve()}deleteFieldIndex(e,n){return Xt.resolve()}getDocumentsMatchingTarget(e,n){return Xt.resolve(null)}getIndexType(e,n){return Xt.resolve(0)}getFieldIndexes(e,n){return Xt.resolve([])}getNextCollectionGroupToUpdate(e){return Xt.resolve(null)}getMinOffset(e,n){return Xt.resolve(Tr.min())}updateCollectionGroup(e,n,d){return Xt.resolve()}updateIndexEntries(e,n){return Xt.resolve()}}class qh{constructor(){this.index={}}add(e){const n=e.lastSegment(),d=e.popLast(),p=this.index[n]||new vi(mi.comparator),_=!p.has(d);return this.index[n]=p.add(d),_}has(e){const n=e.lastSegment(),d=e.popLast(),p=this.index[n];return p&&p.has(d)}getEntries(e){return(this.index[e]||new vi(mi.comparator)).toArray()}}const Kh=new Uint8Array(0);class md{constructor(e,n){this.user=e,this.databaseId=n,this.Ke=new qh,this.Ge=new pu(d=>dl(d),(d,p)=>Gu(d,p)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ke.has(n)){const d=n.lastSegment(),p=n.popLast();e.addOnCommittedListener(()=>{this.Ke.add(n)});const _={collectionId:d,parent:Ht(p)};return no(e).put(_)}return Xt.resolve()}getCollectionParents(e,n){const d=[],p=IDBKeyRange.bound([n,""],[Eu(n),""],!1,!0);return no(e).qt(p).next(_=>{for(const w of _){if(w.collectionId!==n)break;d.push(lr(w.parent))}return d})}addFieldIndex(e,n){const d=Zh(e),p={indexId:(_=n).indexId,collectionGroup:_.collectionGroup,fields:_.fields.map(w=>[w.fieldPath.canonicalString(),w.kind])};var _;return delete p.indexId,d.add(p).next()}deleteFieldIndex(e,n){const d=Zh(e),p=Yh(e),_=rh(e);return d.delete(n.indexId).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const d=rh(e);let p=!0;const _=new Map;return Xt.forEach(this.Qe(n),w=>this.je(e,w).next(j=>{p&&(p=!!j),_.set(w,j)})).next(()=>{if(p){let w=qi();const j=[];return Xt.forEach(_,(le,me)=>{var tt;de("IndexedDbIndexManager",`Using index ${tt=le,`id=${tt.indexId}|cg=${tt.collectionGroup}|f=${tt.fields.map(Ri=>`${Ri.fieldPath}:${Ri.kind}`).join(",")}`} to execute ${dl(n)}`);const yt=function(Ri,na){const io=Ut(na);if(void 0===io)return null;for(const xo of Ic(Ri,io.fieldPath))switch(xo.op){case"array-contains-any":return xo.value.arrayValue.values||[];case"array-contains":return[xo.value]}return null}(me,le),Wt=function(Ri,na){const io=new Map;for(const xo of yn(na))for(const Ja of Ic(Ri,xo.fieldPath))switch(Ja.op){case"==":case"in":io.set(xo.fieldPath.canonicalString(),Ja.value);break;case"not-in":case"!=":return io.set(xo.fieldPath.canonicalString(),Ja.value),Array.from(io.values())}return null}(me,le),bn=function(Ri,na){const io=[];let xo=!0;for(const Ja of yn(na)){const Ip=0===Ja.kind?Sf(Ri,Ja.fieldPath,Ri.startAt):$u(Ri,Ja.fieldPath,Ri.startAt);io.push(Ip.value),xo&&(xo=Ip.inclusive)}return new Ps(io,xo)}(me,le),Tn=function(Ri,na){const io=[];let xo=!0;for(const Ja of yn(na)){const Ip=0===Ja.kind?$u(Ri,Ja.fieldPath,Ri.endAt):Sf(Ri,Ja.fieldPath,Ri.endAt);io.push(Ip.value),xo&&(xo=Ip.inclusive)}return new Ps(io,xo)}(me,le),rr=this.We(le,me,bn),Gr=this.We(le,me,Tn),Ws=this.ze(le,me,Wt),zs=this.He(le.indexId,yt,rr,bn.inclusive,Gr,Tn.inclusive,Ws);return Xt.forEach(zs,Ri=>d.Gt(Ri,n.limit).next(na=>{na.forEach(io=>{const xo=Fn.fromSegments(io.documentKey);w.has(xo)||(w=w.add(xo),j.push(xo))})}))}).next(()=>j)}return Xt.resolve(null)})}Qe(e){let n=this.Ge.get(e);return n||(n=[e],this.Ge.set(e,n),n)}He(e,n,d,p,_,w,j){const le=(null!=n?n.length:1)*Math.max(d.length,_.length),me=le/(null!=n?n.length:1),tt=[];for(let yt=0;yt<le;++yt){const Wt=n?this.Je(n[yt/me]):Kh,bn=this.Ye(e,Wt,d[yt%me],p),Tn=this.Xe(e,Wt,_[yt%me],w),rr=j.map(Gr=>this.Ye(e,Wt,Gr,!0));tt.push(...this.createRange(bn,Tn,rr))}return tt}Ye(e,n,d,p){const _=new th(e,Fn.empty(),n,d);return p?_:_.ke()}Xe(e,n,d,p){const _=new th(e,Fn.empty(),n,d);return p?_.ke():_}je(e,n){const d=new ni(n),p=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,p).next(_=>{let w=null;for(const j of _)d.$e(j)&&(!w||j.fields.length>w.fields.length)&&(w=j);return w})}getIndexType(e,n){let d=2;return Xt.forEach(this.Qe(n),p=>this.je(e,p).next(_=>{_?0!==d&&_.fields.length<function(w){let j=new vi(ts.comparator),le=!1;for(const me of w.filters){const tt=me;tt.field.isKeyField()||("array-contains"===tt.op||"array-contains-any"===tt.op?le=!0:j=j.add(tt.field))}for(const me of w.orderBy)me.field.isKeyField()||(j=j.add(me.field));return j.size+(le?1:0)}(p)&&(d=1):d=0})).next(()=>d)}Ze(e,n){const d=new jc;for(const p of yn(e)){const _=n.data.field(p.fieldPath);if(null==_)return null;const w=d.Ne(p.kind);Fl.fe.Zt(_,w)}return d.Se()}Je(e){const n=new jc;return Fl.fe.Zt(e,n.Ne(0)),n.Se()}tn(e,n){const d=new jc;return Fl.fe.Zt(lu(this.databaseId,n),d.Ne(function(p){const _=yn(p);return 0===_.length?0:_[_.length-1].kind}(e))),d.Se()}ze(e,n,d){if(null===d)return[];let p=[];p.push(new jc);let _=0;for(const w of yn(e)){const j=d[_++];for(const le of p)if(this.en(n,w.fieldPath)&&Pa(j))p=this.nn(p,w,j);else{const me=le.Ne(w.kind);Fl.fe.Zt(j,me)}}return this.sn(p)}We(e,n,d){return this.ze(e,n,d.position)}sn(e){const n=[];for(let d=0;d<e.length;++d)n[d]=e[d].Se();return n}nn(e,n,d){const p=[...e],_=[];for(const w of d.arrayValue.values||[])for(const j of p){const le=new jc;le.seed(j.Se()),Fl.fe.Zt(w,le.Ne(n.kind)),_.push(le)}return _}en(e,n){return!!e.filters.find(d=>d instanceof go&&d.field.isEqual(n)&&("in"===d.op||"not-in"===d.op))}getFieldIndexes(e,n){const d=Zh(e),p=Yh(e);return(n?d.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)):d.qt()).next(_=>{const w=[];return Xt.forEach(_,j=>p.get([j.indexId,this.uid]).next(le=>{w.push(function(me,tt){const yt=tt?new or(tt.sequenceNumber,new Tr(pd(tt.readTime),new Fn(lr(tt.documentKey)),tt.largestBatchId)):or.empty(),Wt=me.fields.map(([bn,Tn])=>new sr(ts.fromServerFormat(bn),Tn));return new Lt(me.indexId,me.collectionGroup,Wt,yt)}(j,le))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((d,p)=>{const _=d.indexState.sequenceNumber-p.indexState.sequenceNumber;return 0!==_?_:Ur(d.collectionGroup,p.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,d){const p=Zh(e),_=Yh(e);return this.rn(e).next(w=>p.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(j=>Xt.forEach(j,le=>{return _.put({indexId:le.indexId,uid:this.user.uid||"",sequenceNumber:w,readTime:fd((Wt=d).readTime),documentKey:Ht(Wt.documentKey.path),largestBatchId:Wt.largestBatchId});var Wt})))}updateIndexEntries(e,n){const d=new Map;return Xt.forEach(n,(p,_)=>{const w=d.get(p.collectionGroup);return(w?Xt.resolve(w):this.getFieldIndexes(e,p.collectionGroup)).next(j=>(d.set(p.collectionGroup,j),Xt.forEach(j,le=>this.on(e,p,le).next(me=>{const tt=this.un(_,le);return me.isEqual(tt)?Xt.resolve():this.an(e,_,le,me,tt)}))))})}cn(e,n,d,p){return rh(e).put({indexId:p.indexId,uid:this.uid,arrayValue:p.arrayValue,directionalValue:p.directionalValue,orderedDocumentKey:this.tn(d,n.key),documentKey:n.key.path.toArray()})}hn(e,n,d,p){return rh(e).delete([p.indexId,this.uid,p.arrayValue,p.directionalValue,this.tn(d,n.key),n.key.path.toArray()])}on(e,n,d){const p=rh(e);let _=new vi(nh);return p.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([d.indexId,this.uid,this.tn(d,n)])},(w,j)=>{_=_.add(new th(d.indexId,n,j.arrayValue,j.directionalValue))}).next(()=>_)}un(e,n){let d=new vi(nh);const p=this.Ze(n,e);if(null==p)return d;const _=Ut(n);if(null!=_){const w=e.data.field(_.fieldPath);if(Pa(w))for(const j of w.arrayValue.values||[])d=d.add(new th(n.indexId,e.key,this.Je(j),p))}else d=d.add(new th(n.indexId,e.key,Kh,p));return d}an(e,n,d,p,_){de("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const w=[];return function(j,le,me,tt,yt){const Wt=j.getIterator(),bn=le.getIterator();let Tn=ca(Wt),rr=ca(bn);for(;Tn||rr;){let Gr=!1,Ws=!1;if(Tn&&rr){const zs=me(Tn,rr);zs<0?Ws=!0:zs>0&&(Gr=!0)}else null!=Tn?Ws=!0:Gr=!0;Gr?(tt(rr),rr=ca(bn)):Ws?(yt(Tn),Tn=ca(Wt)):(Tn=ca(Wt),rr=ca(bn))}}(p,_,nh,j=>{w.push(this.cn(e,n,d,j))},j=>{w.push(this.hn(e,n,d,j))}),Xt.waitFor(w)}rn(e){let n=1;return Yh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(d,p,_)=>{_.done(),n=p.sequenceNumber+1}).next(()=>n)}createRange(e,n,d){d=d.sort((w,j)=>nh(w,j)).filter((w,j,le)=>!j||0!==nh(w,le[j-1]));const p=[];p.push(e);for(const w of d){const j=nh(w,e),le=nh(w,n);if(0===j)p[0]=e.ke();else if(j>0&&le<0)p.push(w),p.push(w.ke());else if(le>0)break}p.push(n);const _=[];for(let w=0;w<p.length;w+=2)_.push(IDBKeyRange.bound([p[w].indexId,this.uid,p[w].arrayValue,p[w].directionalValue,Kh,[]],[p[w+1].indexId,this.uid,p[w+1].arrayValue,p[w+1].directionalValue,Kh,[]]));return _}getMinOffset(e,n){let d;return Xt.forEach(this.Qe(n),p=>this.je(e,p).next(_=>{_?(!d||po(_.indexState.offset,d)<0)&&(d=_.indexState.offset):d=Tr.min()})).next(()=>d)}}function no(l){return Is(l,"collectionParents")}function rh(l){return Is(l,"indexEntries")}function Zh(l){return Is(l,"indexConfiguration")}function Yh(l){return Is(l,"indexState")}const ku={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class La{constructor(e,n,d){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=d}static withCacheSize(e){return new La(e,La.DEFAULT_COLLECTION_PERCENTILE,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cm(l,e,n){const d=l.store("mutations"),p=l.store("documentMutations"),_=[],w=IDBKeyRange.only(n.batchId);let j=0;const le=d.Wt({range:w},(tt,yt,Wt)=>(j++,Wt.delete()));_.push(le.next(()=>{Pn(1===j)}));const me=[];for(const tt of n.mutations){const yt=Na(e,tt.key.path,n.batchId);_.push(p.delete(yt)),me.push(tt.key)}return Xt.waitFor(_).next(()=>me)}function Qh(l){if(!l)return 0;let e;if(l.document)e=l.document;else if(l.unknownDocument)e=l.unknownDocument;else{if(!l.noDocument)throw Qt();e=l.noDocument}return JSON.stringify(e).length}La.DEFAULT_COLLECTION_PERCENTILE=10,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,La.DEFAULT=new La(41943040,La.DEFAULT_COLLECTION_PERCENTILE,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),La.DISABLED=new La(-1,0,0);class Sv{constructor(e,n,d,p){this.userId=e,this.M=n,this.indexManager=d,this.referenceDelegate=p,this.ln={}}static Yt(e,n,d,p){Pn(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new Sv(_,n,d,p)}checkEmpty(e){let n=!0;const d=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fc(e).Wt({index:"userMutationsIndex",range:d},(p,_,w)=>{n=!1,w.done()}).next(()=>n)}addMutationBatch(e,n,d,p){const _=Uc(e),w=fc(e);return w.add({}).next(j=>{Pn("number"==typeof j);const le=new Xd(j,n,d,p),me=function(Wt,bn,Tn){const rr=Tn.baseMutations.map(Ws=>vl(Wt.Jt,Ws)),Gr=Tn.mutations.map(Ws=>vl(Wt.Jt,Ws));return{userId:bn,batchId:Tn.batchId,localWriteTimeMs:Tn.localWriteTime.toMillis(),baseMutations:rr,mutations:Gr}}(this.M,this.userId,le),tt=[];let yt=new vi((Wt,bn)=>Ur(Wt.canonicalString(),bn.canonicalString()));for(const Wt of p){const bn=Na(this.userId,Wt.key.path,j);yt=yt.add(Wt.key.path.popLast()),tt.push(w.put(me)),tt.push(_.put(bn,dd))}return yt.forEach(Wt=>{tt.push(this.indexManager.addToCollectionParentIndex(e,Wt))}),e.addOnCommittedListener(()=>{this.ln[j]=le.keys()}),Xt.waitFor(tt).next(()=>le)})}lookupMutationBatch(e,n){return fc(e).get(n).next(d=>d?(Pn(d.userId===this.userId),gd(this.M,d)):null)}fn(e,n){return this.ln[n]?Xt.resolve(this.ln[n]):this.lookupMutationBatch(e,n).next(d=>{if(d){const p=d.keys();return this.ln[n]=p,p}return null})}getNextMutationBatchAfterBatchId(e,n){const d=n+1,p=IDBKeyRange.lowerBound([this.userId,d]);let _=null;return fc(e).Wt({index:"userMutationsIndex",range:p},(w,j,le)=>{j.userId===this.userId&&(Pn(j.batchId>=d),_=gd(this.M,j)),le.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let d=-1;return fc(e).Wt({index:"userMutationsIndex",range:n,reverse:!0},(p,_,w)=>{d=_.batchId,w.done()}).next(()=>d)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fc(e).qt("userMutationsIndex",n).next(d=>d.map(p=>gd(this.M,p)))}getAllMutationBatchesAffectingDocumentKey(e,n){const d=to(this.userId,n.path),p=IDBKeyRange.lowerBound(d),_=[];return Uc(e).Wt({range:p},(w,j,le)=>{const[me,tt,yt]=w,Wt=lr(tt);if(me===this.userId&&n.path.isEqual(Wt))return fc(e).get(yt).next(bn=>{if(!bn)throw Qt();Pn(bn.userId===this.userId),_.push(gd(this.M,bn))});le.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let d=new vi(Ur);const p=[];return n.forEach(_=>{const w=to(this.userId,_.path),j=IDBKeyRange.lowerBound(w),le=Uc(e).Wt({range:j},(me,tt,yt)=>{const[Wt,bn,Tn]=me,rr=lr(bn);Wt===this.userId&&_.path.isEqual(rr)?d=d.add(Tn):yt.done()});p.push(le)}),Xt.waitFor(p).next(()=>this.dn(e,d))}getAllMutationBatchesAffectingQuery(e,n){const d=n.path,p=d.length+1,_=to(this.userId,d),w=IDBKeyRange.lowerBound(_);let j=new vi(Ur);return Uc(e).Wt({range:w},(le,me,tt)=>{const[yt,Wt,bn]=le,Tn=lr(Wt);yt===this.userId&&d.isPrefixOf(Tn)?Tn.length===p&&(j=j.add(bn)):tt.done()}).next(()=>this.dn(e,j))}dn(e,n){const d=[],p=[];return n.forEach(_=>{p.push(fc(e).get(_).next(w=>{if(null===w)throw Qt();Pn(w.userId===this.userId),d.push(gd(this.M,w))}))}),Xt.waitFor(p).next(()=>d)}removeMutationBatch(e,n){return cm(e.Ht,this.userId,n).next(d=>(e.addOnCommittedListener(()=>{this._n(n.batchId)}),Xt.forEach(d,p=>this.referenceDelegate.markPotentiallyOrphaned(e,p))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Xt.resolve();const d=IDBKeyRange.lowerBound([this.userId]),p=[];return Uc(e).Wt({range:d},(_,w,j)=>{if(_[0]===this.userId){const le=lr(_[1]);p.push(le)}else j.done()}).next(()=>{Pn(0===p.length)})})}containsKey(e,n){return zp(e,this.userId,n)}wn(e){return qf(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zp(l,e,n){const d=to(e,n.path),p=d[1],_=IDBKeyRange.lowerBound(d);let w=!1;return Uc(l).Wt({range:_,jt:!0},(j,le,me)=>{const[tt,yt,Wt]=j;tt===e&&yt===p&&(w=!0),me.done()}).next(()=>w)}function fc(l){return Is(l,"mutations")}function Uc(l){return Is(l,"documentMutations")}function qf(l){return Is(l,"mutationQueues")}class Bc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Bc(0)}static yn(){return new Bc(-1)}}class dm{constructor(e,n){this.referenceDelegate=e,this.M=n}allocateTargetId(e){return this.pn(e).next(n=>{const d=new Bc(n.highestTargetId);return n.highestTargetId=d.next(),this.In(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(n=>Dr.fromTimestamp(new Vs(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,d){return this.pn(e).next(p=>(p.highestListenSequenceNumber=n,d&&(p.lastRemoteSnapshotVersion=d.toTimestamp()),n>p.highestListenSequenceNumber&&(p.highestListenSequenceNumber=n),this.In(e,p)))}addTargetData(e,n){return this.Tn(e,n).next(()=>this.pn(e).next(d=>(d.targetCount+=1,this.En(n,d),this.In(e,d))))}updateTargetData(e,n){return this.Tn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Vc(e).delete(n.targetId)).next(()=>this.pn(e)).next(d=>(Pn(d.targetCount>0),d.targetCount-=1,this.In(e,d)))}removeTargets(e,n,d){let p=0;const _=[];return Vc(e).Wt((w,j)=>{const le=eh(j);le.sequenceNumber<=n&&null===d.get(le.targetId)&&(p++,_.push(this.removeTargetData(e,le)))}).next(()=>Xt.waitFor(_)).next(()=>p)}forEachTarget(e,n){return Vc(e).Wt((d,p)=>{const _=eh(p);n(_)})}pn(e){return wv(e).get("targetGlobalKey").next(n=>(Pn(null!==n),n))}In(e,n){return wv(e).put("targetGlobalKey",n)}Tn(e,n){return Vc(e).put(Wh(this.M,n))}En(e,n){let d=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,d=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,d=!0),d}getTargetCount(e){return this.pn(e).next(n=>n.targetCount)}getTargetData(e,n){const d=dl(n),p=IDBKeyRange.bound([d,Number.NEGATIVE_INFINITY],[d,Number.POSITIVE_INFINITY]);let _=null;return Vc(e).Wt({range:p,index:"queryTargetsIndex"},(w,j,le)=>{const me=eh(j);Gu(n,me.target)&&(_=me,le.done())}).next(()=>_)}addMatchingKeys(e,n,d){const p=[],_=Hc(e);return n.forEach(w=>{const j=Ht(w.path);p.push(_.put({targetId:d,path:j})),p.push(this.referenceDelegate.addReference(e,d,w))}),Xt.waitFor(p)}removeMatchingKeys(e,n,d){const p=Hc(e);return Xt.forEach(n,_=>{const w=Ht(_.path);return Xt.waitFor([p.delete([d,w]),this.referenceDelegate.removeReference(e,d,_)])})}removeMatchingKeysForTargetId(e,n){const d=Hc(e),p=IDBKeyRange.bound([n],[n+1],!1,!0);return d.delete(p)}getMatchingKeysForTargetId(e,n){const d=IDBKeyRange.bound([n],[n+1],!1,!0),p=Hc(e);let _=qi();return p.Wt({range:d,jt:!0},(w,j,le)=>{const me=lr(w[1]),tt=new Fn(me);_=_.add(tt)}).next(()=>_)}containsKey(e,n){const d=Ht(n.path),p=IDBKeyRange.bound([d],[Eu(d)],!1,!0);let _=0;return Hc(e).Wt({index:"documentTargetsIndex",jt:!0,range:p},([w,j],le,me)=>{0!==w&&(_++,me.done())}).next(()=>_>0)}Et(e,n){return Vc(e).get(n).next(d=>d?eh(d):null)}}function Vc(l){return Is(l,"targets")}function wv(l){return Is(l,"targetGlobal")}function Hc(l){return Is(l,"targetDocuments")}function Gc(l){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,ne.Z)(function*(l){if(l.code!==Rt.FAILED_PRECONDITION||l.message!==zf)throw l;de("LocalStore","Unexpectedly lost primary lease")}),Kf.apply(this,arguments)}function ih([l,e],[n,d]){const p=Ur(l,n);return 0===p?Ur(e,d):p}class Cv{constructor(e){this.An=e,this.buffer=new vi(ih),this.Rn=0}bn(){return++this.Rn}Pn(e){const n=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(n);else{const d=this.buffer.last();ih(n,d)<0&&(this.buffer=this.buffer.delete(d).add(n))}}get maxValue(){return this.buffer.last()[0]}}class L_{constructor(e,n){this.garbageCollector=e,this.asyncQueue=n,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var n=this;const d=this.Vn?3e5:6e4;de("LruGarbageCollector",`Garbage collection scheduled in ${d}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",d,(0,ne.Z)(function*(){n.vn=null,n.Vn=!0;try{yield e.collectGarbage(n.garbageCollector)}catch(p){Yu(p)?de("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",p):yield Gc(p)}yield n.Sn(e)}))}}class hm{constructor(e,n){this.Dn=e,this.params=n}calculateTargetCount(e,n){return this.Dn.Cn(e).next(d=>Math.floor(n/100*d))}nthSequenceNumber(e,n){if(0===n)return Xt.resolve(Bs.A);const d=new Cv(n);return this.Dn.forEachTarget(e,p=>d.Pn(p.sequenceNumber)).next(()=>this.Dn.xn(e,p=>d.Pn(p))).next(()=>d.maxValue)}removeTargets(e,n,d){return this.Dn.removeTargets(e,n,d)}removeOrphanedDocuments(e,n){return this.Dn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Xt.resolve(ku)):this.getCacheSize(e).next(d=>d<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${d} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ku):this.Nn(e,n))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,n){let d,p,_,w,j,le,me;const tt=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(yt=>(yt>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${yt}`),p=this.params.maximumSequenceNumbersToCollect):p=yt,w=Date.now(),this.nthSequenceNumber(e,p))).next(yt=>(d=yt,j=Date.now(),this.removeTargets(e,d,n))).next(yt=>(_=yt,le=Date.now(),this.removeOrphanedDocuments(e,d))).next(yt=>(me=Date.now(),K()<=gt.in.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-tt}ms\n\tDetermined least recently used ${p} in `+(j-w)+`ms\n\tRemoved ${_} targets in `+(le-j)+`ms\n\tRemoved ${yt} documents in `+(me-le)+`ms\nTotal Duration: ${me-tt}ms`),Xt.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:_,documentsRemoved:yt})))}}class $y{constructor(e,n){this.db=e,this.garbageCollector=new hm(this,n)}Cn(e){const n=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(d=>n.next(p=>d+p))}kn(e){let n=0;return this.xn(e,d=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}xn(e,n){return this.Mn(e,(d,p)=>n(p))}addReference(e,n,d){return Zf(e,d)}removeReference(e,n,d){return Zf(e,d)}removeTargets(e,n,d){return this.db.getTargetCache().removeTargets(e,n,d)}markPotentiallyOrphaned(e,n){return Zf(e,n)}On(e,n){return function(d,p){let _=!1;return qf(d).zt(w=>zp(d,w,p).next(j=>(j&&(_=!0),Xt.resolve(!j)))).next(()=>_)}(e,n)}removeOrphanedDocuments(e,n){const d=this.db.getRemoteDocumentCache().newChangeBuffer(),p=[];let _=0;return this.Mn(e,(w,j)=>{if(j<=n){const le=this.On(e,w).next(me=>{if(!me)return _++,d.getEntry(e,w).next(()=>(d.removeEntry(w,Dr.min()),Hc(e).delete([0,Ht(w.path)])))});p.push(le)}}).next(()=>Xt.waitFor(p)).next(()=>d.apply(e)).next(()=>_)}removeTarget(e,n){const d=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,d)}updateLimboDocument(e,n){return Zf(e,n)}Mn(e,n){const d=Hc(e);let p,_=Bs.A;return d.Wt({index:"documentTargetsIndex"},([w,j],{path:le,sequenceNumber:me})=>{0===w?(_!==Bs.A&&n(new Fn(lr(p)),_),_=me,p=le):_=Bs.A}).next(()=>{_!==Bs.A&&n(new Fn(lr(p)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zf(l,e){return Hc(l).put((d=l.currentSequenceNumber,{targetId:0,path:Ht(e.path),sequenceNumber:d}));var d}class Yf{constructor(){this.changes=new pu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const d=this.changes.get(n);return void 0!==d?Xt.resolve(d):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wy{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,d){return sh(e).put(d)}removeEntry(e,n,d){return sh(e).delete(function(p,_){const w=p.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],hc(_),w[w.length-1]]}(n,d))}updateMetadata(e,n){return this.getMetadata(e).next(d=>(d.byteSize+=n,this.Fn(e,d)))}getEntry(e,n){let d=qe.newInvalidDocument(n);return sh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(oh(n))},(p,_)=>{d=this.$n(n,_)}).next(()=>d)}Bn(e,n){let d={size:0,document:qe.newInvalidDocument(n)};return sh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(oh(n))},(p,_)=>{d={document:this.$n(n,_),size:Qh(_)}}).next(()=>d)}getEntries(e,n){let d=gu();return this.Ln(e,n,(p,_)=>{const w=this.$n(p,_);d=d.insert(p,w)}).next(()=>d)}Un(e,n){let d=gu(),p=new li(Fn.comparator);return this.Ln(e,n,(_,w)=>{const j=this.$n(_,w);d=d.insert(_,j),p=p.insert(_,Qh(w))}).next(()=>({documents:d,qn:p}))}Ln(e,n,d){if(n.isEmpty())return Xt.resolve();let p=new vi(Iv);n.forEach(le=>p=p.add(le));const _=IDBKeyRange.bound(oh(p.first()),oh(p.last())),w=p.getIterator();let j=w.getNext();return sh(e).Wt({index:"documentKeyIndex",range:_},(le,me,tt)=>{const yt=Fn.fromSegments([...me.prefixPath,me.collectionGroup,me.documentId]);for(;j&&Iv(j,yt)<0;)d(j,null),j=w.getNext();j&&j.isEqual(yt)&&(d(j,me),j=w.hasNext()?w.getNext():null),j?tt.Ut(oh(j)):tt.done()}).next(()=>{for(;j;)d(j,null),j=w.hasNext()?w.getNext():null})}getAllFromCollection(e,n,d){const p=[n.popLast().toArray(),n.lastSegment(),hc(d.readTime),d.documentKey.path.isEmpty()?"":d.documentKey.path.lastSegment()],_=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sh(e).qt(IDBKeyRange.bound(p,_,!0)).next(w=>{let j=gu();for(const le of w){const me=this.$n(Fn.fromSegments(le.prefixPath.concat(le.collectionGroup,le.documentId)),le);j=j.insert(me.key,me)}return j})}getAllFromCollectionGroup(e,n,d,p){let _=gu();const w=xv(n,d),j=xv(n,Tr.max());return sh(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,j,!0)},(le,me,tt)=>{const yt=this.$n(Fn.fromSegments(me.prefixPath.concat(me.collectionGroup,me.documentId)),me);_=_.insert(yt.key,yt),_.size===p&&tt.done()}).next(()=>_)}newChangeBuffer(e){return new fm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return zy(e).get("remoteDocumentGlobalKey").next(n=>(Pn(!!n),n))}Fn(e,n){return zy(e).put("remoteDocumentGlobalKey",n)}$n(e,n){if(n){const d=function Hp(l,e){let n;if(e.document)n=$d(l.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const d=Fn.fromSegments(e.noDocument.path),p=pd(e.noDocument.readTime);n=qe.newNoDocument(d,p),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qt();{const d=Fn.fromSegments(e.unknownDocument.path),p=pd(e.unknownDocument.version);n=qe.newUnknownDocument(d,p)}}return e.readTime&&n.setReadTime(function(d){const p=new Vs(d[0],d[1]);return Dr.fromTimestamp(p)}(e.readTime)),n}(this.M,n);if(!d.isNoDocument()||!d.version.isEqual(Dr.min()))return d}return qe.newInvalidDocument(e)}}class fm extends Yf{constructor(e,n){super(),this.Kn=e,this.trackRemovals=n,this.Gn=new pu(d=>d.toString(),(d,p)=>d.isEqual(p))}applyChanges(e){const n=[];let d=0,p=new vi((_,w)=>Ur(_.canonicalString(),w.canonicalString()));return this.changes.forEach((_,w)=>{const j=this.Gn.get(_);if(n.push(this.Kn.removeEntry(e,_,j.readTime)),w.isValidDocument()){const le=$h(this.Kn.M,w);p=p.add(_.path.popLast()),d+=Qh(le)-j.size,n.push(this.Kn.addEntry(e,_,le))}else if(d-=j.size,this.trackRemovals){const le=$h(this.Kn.M,w.convertToNoDocument(Dr.min()));n.push(this.Kn.addEntry(e,_,le))}}),p.forEach(_=>{n.push(this.Kn.indexManager.addToCollectionParentIndex(e,_))}),n.push(this.Kn.updateMetadata(e,d)),Xt.waitFor(n)}getFromCache(e,n){return this.Kn.Bn(e,n).next(d=>(this.Gn.set(n,{size:d.size,readTime:d.document.readTime}),d.document))}getAllFromCache(e,n){return this.Kn.Un(e,n).next(({documents:d,qn:p})=>(p.forEach((_,w)=>{this.Gn.set(_,{size:w,readTime:d.get(_).readTime})}),d))}}function zy(l){return Is(l,"remoteDocumentGlobal")}function sh(l){return Is(l,"remoteDocumentsV14")}function oh(l){const e=l.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xv(l,e){const n=e.documentKey.path.toArray();return[l,hc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Iv(l,e){const n=l.path.toArray(),d=e.path.toArray();let p=0;for(let _=0;_<n.length-2&&_<d.length-2;++_)if(p=Ur(n[_],d[_]),p)return p;return p=Ur(n.length,d.length),p||(p=Ur(n[n.length-2],d[d.length-2]),p||Ur(n[n.length-1],d[d.length-1]))}class F_{constructor(e){this.M=e}kt(e,n,d,p){const _=new ha("createOrUpgrade",n);var j;d<1&&p>=1&&(e.createObjectStore("owner"),(j=e).createObjectStore("mutationQueues",{keyPath:"userId"}),j.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_r,{unique:!0}),j.createObjectStore("documentMutations"),qy(e),function(j){j.createObjectStore("remoteDocuments")}(e));let w=Xt.resolve();return d<3&&p>=3&&(0!==d&&(function(j){j.deleteObjectStore("targetDocuments"),j.deleteObjectStore("targets"),j.deleteObjectStore("targetGlobal")}(e),qy(e)),w=w.next(()=>function(j){const le=j.store("targetGlobal"),me={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dr.min().toTimestamp(),targetCount:0};return le.put("targetGlobalKey",me)}(_))),d<4&&p>=4&&(0!==d&&(w=w.next(()=>function(j,le){return le.store("mutations").qt().next(me=>{j.deleteObjectStore("mutations"),j.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_r,{unique:!0});const tt=le.store("mutations"),yt=me.map(Wt=>tt.put(Wt));return Xt.waitFor(yt)})}(e,_))),w=w.next(()=>{!function(j){j.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),d<5&&p>=5&&(w=w.next(()=>this.Qn(_))),d<6&&p>=6&&(w=w.next(()=>(function(j){j.createObjectStore("remoteDocumentGlobal")}(e),this.jn(_)))),d<7&&p>=7&&(w=w.next(()=>this.Wn(_))),d<8&&p>=8&&(w=w.next(()=>this.zn(e,_))),d<9&&p>=9&&(w=w.next(()=>{!function(j){j.objectStoreNames.contains("remoteDocumentChanges")&&j.deleteObjectStore("remoteDocumentChanges")}(e)})),d<10&&p>=10&&(w=w.next(()=>this.Hn(_))),d<11&&p>=11&&(w=w.next(()=>{(function(j){j.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(j){j.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),d<12&&p>=12&&(w=w.next(()=>{!function(j){const le=j.createObjectStore("documentOverlays",{keyPath:Zd});le.createIndex("collectionPathOverlayIndex",Vp,{unique:!1}),le.createIndex("collectionGroupOverlayIndex",Yd,{unique:!1})}(e)})),d<13&&p>=13&&(w=w.next(()=>function(j){const le=j.createObjectStore("remoteDocumentsV14",{keyPath:Gf});le.createIndex("documentKeyIndex",Bp),le.createIndex("collectionGroupIndex",Rl)}(e)).next(()=>this.Jn(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),d<14&&p>=14&&(w=w.next(()=>{!function(j){j.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),j.createObjectStore("indexState",{keyPath:qd}).createIndex("sequenceNumberIndex",Kd,{unique:!1}),j.createObjectStore("indexEntries",{keyPath:em}).createIndex("documentKeyIndex",mo,{unique:!1})}(e)})),w}jn(e){let n=0;return e.store("remoteDocuments").Wt((d,p)=>{n+=Qh(p)}).next(()=>{const d={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",d)})}Qn(e){const n=e.store("mutationQueues"),d=e.store("mutations");return n.qt().next(p=>Xt.forEach(p,_=>{const w=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return d.qt("userMutationsIndex",w).next(j=>Xt.forEach(j,le=>{Pn(le.userId===_.userId);const me=gd(this.M,le);return cm(e,_.userId,me).next(()=>{})}))}))}Wn(e){const n=e.store("targetDocuments"),d=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(p=>{const _=[];return d.Wt((w,j)=>{const le=new mi(w),me=[0,Ht(le)];_.push(n.get(me).next(tt=>tt?Xt.resolve():n.put({targetId:0,path:Ht(le),sequenceNumber:p.highestListenSequenceNumber})))}).next(()=>Xt.waitFor(_))})}zn(e,n){e.createObjectStore("collectionParents",{keyPath:hd});const d=n.store("collectionParents"),p=new qh,_=w=>{if(p.add(w)){const j=w.lastSegment(),le=w.popLast();return d.put({collectionId:j,parent:Ht(le)})}};return n.store("remoteDocuments").Wt({jt:!0},(w,j)=>{const le=new mi(w);return _(le.popLast())}).next(()=>n.store("documentMutations").Wt({jt:!0},([w,j,le],me)=>{const tt=lr(j);return _(tt.popLast())}))}Hn(e){const n=e.store("targets");return n.Wt((d,p)=>{const _=eh(p),w=Wh(this.M,_);return n.put(w)})}Jn(e,n){const d=n.store("remoteDocuments"),p=[];return d.Wt((_,w)=>{const j=n.store("remoteDocumentsV14"),le=(me=w,me.document?new Fn(mi.fromString(me.document.name).popFirst(5)):me.noDocument?Fn.fromSegments(me.noDocument.path):me.unknownDocument?Fn.fromSegments(me.unknownDocument.path):Qt()).path.toArray();var me;const tt={prefixPath:le.slice(0,le.length-2),collectionGroup:le[le.length-2],documentId:le[le.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};p.push(j.put(tt))}).next(()=>Xt.waitFor(p))}}function qy(l){l.createObjectStore("targetDocuments",{keyPath:Lc}).createIndex("documentTargetsIndex",$f,{unique:!0}),l.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qn,{unique:!0}),l.createObjectStore("targetGlobal")}const Dv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pm{constructor(e,n,d,p,_,w,j,le,me,tt,yt=13){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=d,this.Yn=_,this.window=w,this.document=j,this.Xn=me,this.Zn=tt,this.ts=yt,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=Wt=>Promise.resolve(),!pm.vt())throw new dn(Rt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $y(this,p),this.hs=n+"main",this.M=new im(le),this.ls=new yl(this.hs,this.ts,new F_(this.M)),this.fs=new dm(this.referenceDelegate,this.M),this.ds=new Wy(this.M),this._s=new _v,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===tt&&ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dn(Rt.FAILED_PRECONDITION,Dv);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Bs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var n=this;return this.cs=function(){var d=(0,ne.Z)(function*(p){if(n.started)return e(p)});return function(p){return d.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var n=(0,ne.Z)(function*(d){null===d.newVersion&&(yield e())});return function(d){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ne.Z)(function*(){n.started&&(yield n.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(n=>{n||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(n=>this.isPrimary&&!n?this.Rs(e).next(()=>!1):!!n&&this.bs(e).next(()=>!0))).catch(e=>{if(Yu(e))return de("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return de("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return qp(e).get("owner").next(n=>Xt.resolve(this.Ps(n)))}Vs(e){return jl(e).delete(this.clientId)}vs(){var e=this;return(0,ne.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",d=>{const p=Is(d,"clientMetadata");return p.qt().next(_=>{const w=e.Ds(_,18e5),j=_.filter(le=>-1===w.indexOf(le));return Xt.forEach(j,le=>p.delete(le.clientId)).next(()=>j)})}).catch(()=>[]);if(e.ws)for(const d of n)e.ws.removeItem(e.Cs(d.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Xt.resolve(!0):qp(e).get("owner").next(n=>{if(null!==n&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)){if(this.Ps(n)&&this.networkEnabled)return!0;if(!this.Ps(n)){if(!n.allowTabSynchronization)throw new dn(Rt.FAILED_PRECONDITION,Dv);return!1}}return!(!this.networkEnabled||!this.inForeground)||jl(e).qt().next(d=>void 0===this.Ds(d,5e3).find(p=>{if(this.clientId!==p.clientId){const w=!this.inForeground&&p.inForeground,j=this.networkEnabled===p.networkEnabled;if(!this.networkEnabled&&p.networkEnabled||w&&j)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&de("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,ne.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const d=new Nl(n,Bs.A);return e.Rs(d).next(()=>e.Vs(d))}),e.ls.close(),e.Os()})()}Ds(e,n){return e.filter(d=>this.Ss(d.updateTimeMs,n)&&!this.xs(d.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>jl(e).qt().next(n=>this.Ds(n,18e5).map(d=>d.clientId)))}get started(){return this.ns}getMutationQueue(e,n){return Sv.Yt(e,this.M,n,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new md(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return $p.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,n,d){de("IndexedDbPersistence","Starting transaction:",e);const p="readonly"===n?"readonly":"readwrite",_=14===(w=this.ts)?yv:13===w?Qd:12===w?Wf:11===w?Fc:void Qt();var w;let j;return this.ls.runTransaction(e,p,_,le=>(j=new Nl(le,this.es?this.es.next():Bs.A),"readwrite-primary"===n?this.Es(j).next(me=>!!me||this.As(j)).next(me=>{if(!me)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new dn(Rt.FAILED_PRECONDITION,zf);return d(j)}).next(me=>this.bs(j).next(()=>me)):this.$s(j).next(()=>d(j)))).then(le=>(j.raiseOnCommittedEvent(),le))}$s(e){return qp(e).get("owner").next(n=>{if(null!==n&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)&&!this.Ps(n)&&!(this.Zn||this.allowTabSynchronization&&n.allowTabSynchronization))throw new dn(Rt.FAILED_PRECONDITION,Dv)})}bs(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qp(e).put("owner",n)}static vt(){return yl.vt()}Rs(e){const n=qp(e);return n.get("owner").next(d=>this.Ps(d)?(de("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Xt.resolve())}Ss(e,n){const d=Date.now();return!(e<d-n||e>d&&(ze(`Detected an update time that is in the future: ${e} > ${d}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var n;try{const d=null!==(null===(n=this.ws)||void 0===n?void 0:n.getItem(this.Cs(e)));return de("IndexedDbPersistence",`Client '${e}' ${d?"is":"is not"} zombied in LocalStorage`),d}catch(d){return ze("IndexedDbPersistence","Failed to get zombied client id.",d),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qp(l){return Is(l,"owner")}function jl(l){return Is(l,"clientMetadata")}function Qf(l,e){let n=l.projectId;return l.isDefaultDatabase||(n+="."+l.database),"firestore/"+e+"/"+n+"/"}class Ky{constructor(e,n,d){this.ds=e,this.Bs=n,this.indexManager=d}Ls(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,n).next(d=>this.Us(e,n,d))}Us(e,n,d){return this.ds.getEntry(e,n).next(p=>{for(const _ of d)_.applyToLocalView(p);return p})}qs(e,n){e.forEach((d,p)=>{for(const _ of n)_.applyToLocalView(p)})}Ks(e,n){return this.ds.getEntries(e,n).next(d=>this.Gs(e,d).next(()=>d))}Gs(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>this.qs(n,d))}Qs(e,n,d){return Fn.isDocumentKey((p=n).path)&&null===p.collectionGroup&&0===p.filters.length?this.js(e,n.path):hl(n)?this.Ws(e,n,d):this.zs(e,n,d);var p}js(e,n){return this.Ls(e,new Fn(n)).next(d=>{let p=Lf();return d.isFoundDocument()&&(p=p.insert(d.key,d)),p})}Ws(e,n,d){const p=n.collectionGroup;let _=Lf();return this.indexManager.getCollectionParents(e,p).next(w=>Xt.forEach(w,j=>{const le=(me=n,tt=j.child(p),new Wu(tt,null,me.explicitOrderBy.slice(),me.filters.slice(),me.limit,me.limitType,me.startAt,me.endAt));var me,tt;return this.zs(e,le,d).next(me=>{me.forEach((tt,yt)=>{_=_.insert(tt,yt)})})}).next(()=>_))}zs(e,n,d){let p;return this.ds.getAllFromCollection(e,n.path,d).next(_=>(p=_,this.Bs.getAllMutationBatchesAffectingQuery(e,n))).next(_=>{for(const w of _)for(const j of w.mutations){const le=j.key;let me=p.get(le);null==me&&(me=qe.newInvalidDocument(le),p=p.insert(le,me)),pl(j,me,w.localWriteTime),me.isFoundDocument()||(p=p.remove(le))}}).next(()=>(p.forEach((_,w)=>{rc(n,w)||(p=p.remove(_))}),p))}}class Kp{constructor(e,n,d,p){this.targetId=e,this.fromCache=n,this.Hs=d,this.Js=p}static Ys(e,n){let d=qi(),p=qi();for(const _ of n.docChanges)switch(_.type){case 0:d=d.add(_.doc.key);break;case 1:p=p.add(_.doc.key)}return new Kp(e,n.fromCache,d,p)}}class Zp{constructor(){this.Xs=!1}initialize(e,n){this.Zs=e,this.indexManager=n,this.Xs=!0}Qs(e,n,d,p){return this.ti(e,n).next(_=>_||this.ei(e,n,p,d)).next(_=>_||this.ni(e,n))}ti(e,n){return Xt.resolve(null)}ei(e,n,d,p){return function Pp(l){return 0===l.filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())}(n)||p.isEqual(Dr.min())?this.ni(e,n):this.Zs.Ks(e,d).next(_=>{const w=this.si(n,_);return this.ii(n,w,d,p)?this.ni(e,n):(K()<=gt.in.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",p.toString(),du(n)),this.ri(e,w,n,Nr(p,-1)))})}si(e,n){let d=new vi(Rp(e));return n.forEach((p,_)=>{rc(e,_)&&(d=d.add(_))}),d}ii(e,n,d,p){if(null===e.limit)return!1;if(d.size!==n.size)return!0;const _="F"===e.limitType?n.last():n.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(p)>0)}ni(e,n){return K()<=gt.in.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",du(n)),this.Zs.Qs(e,n,Tr.min())}ri(e,n,d,p){return this.Zs.Qs(e,d,p).next(_=>(n.forEach(w=>{_=_.insert(w.key,w)}),_))}}class Av{constructor(e,n,d,p){this.persistence=e,this.oi=n,this.M=p,this.ui=new li(Ur),this.ai=new pu(_=>dl(_),Gu),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(d)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Ky(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ui))}}function Yp(l,e,n,d){return new Av(l,e,n,d)}function Qp(l,e){return pc.apply(this,arguments)}function pc(){return pc=(0,ne.Z)(function*(l,e){const n=pn(l);return yield n.persistence.runTransaction("Handle user change","readonly",d=>{let p;return n.Bs.getAllMutationBatches(d).next(_=>(p=_,n.li(e),n.Bs.getAllMutationBatches(d))).next(_=>{const w=[],j=[];let le=qi();for(const me of p){w.push(me.batchId);for(const tt of me.mutations)le=le.add(tt.key)}for(const me of _){j.push(me.batchId);for(const tt of me.mutations)le=le.add(tt.key)}return n.fi.Ks(d,le).next(me=>({di:me,removedBatchIds:w,addedBatchIds:j}))})})}),pc.apply(this,arguments)}function kv(l,e){const n=pn(l);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",d=>{const p=e.batch.keys(),_=n.hi.newChangeBuffer({trackRemovals:!0});return function(w,j,le,me){const tt=le.batch,yt=tt.keys();let Wt=Xt.resolve();return yt.forEach(bn=>{Wt=Wt.next(()=>me.getEntry(j,bn)).next(Tn=>{const rr=le.docVersions.get(bn);Pn(null!==rr),Tn.version.compareTo(rr)<0&&(tt.applyToRemoteDocument(Tn,le),Tn.isValidDocument()&&(Tn.setReadTime(le.commitVersion),me.addEntry(Tn)))})}),Wt.next(()=>w.Bs.removeMutationBatch(j,tt))}(n,d,e,_).next(()=>_.apply(d)).next(()=>n.Bs.performConsistencyCheck(d)).next(()=>n.fi.Ks(d,p))})}function gm(l){const e=pn(l);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.fs.getLastRemoteSnapshotVersion(n))}function Xp(l,e){const n=pn(l),d=e.snapshotVersion;let p=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const w=n.hi.newChangeBuffer({trackRemovals:!0});p=n.ui;const j=[];e.targetChanges.forEach((me,tt)=>{const yt=p.get(tt);if(!yt)return;j.push(n.fs.removeMatchingKeys(_,me.removedDocuments,tt).next(()=>n.fs.addMatchingKeys(_,me.addedDocuments,tt)));let Wt=yt.withSequenceNumber(_.currentSequenceNumber);var bn,Tn,rr;e.targetMismatches.has(tt)?Wt=Wt.withResumeToken(ho.EMPTY_BYTE_STRING,Dr.min()).withLastLimboFreeSnapshotVersion(Dr.min()):me.resumeToken.approximateByteSize()>0&&(Wt=Wt.withResumeToken(me.resumeToken,d)),p=p.insert(tt,Wt),Tn=Wt,rr=me,(0===(bn=yt).resumeToken.approximateByteSize()||Tn.snapshotVersion.toMicroseconds()-bn.snapshotVersion.toMicroseconds()>=3e8||rr.addedDocuments.size+rr.modifiedDocuments.size+rr.removedDocuments.size>0)&&j.push(n.fs.updateTargetData(_,Wt))});let le=gu();if(e.documentUpdates.forEach(me=>{e.resolvedLimboDocuments.has(me)&&j.push(n.persistence.referenceDelegate.updateLimboDocument(_,me))}),j.push(Mv(_,w,e.documentUpdates).next(me=>{le=me})),!d.isEqual(Dr.min())){const me=n.fs.getLastRemoteSnapshotVersion(_).next(tt=>n.fs.setTargetsMetadata(_,_.currentSequenceNumber,d));j.push(me)}return Xt.waitFor(j).next(()=>w.apply(_)).next(()=>n.fi.Gs(_,le)).next(()=>le)}).then(_=>(n.ui=p,_))}function Mv(l,e,n){let d=qi();return n.forEach(p=>d=d.add(p)),e.getEntries(l,d).next(p=>{let _=gu();return n.forEach((w,j)=>{const le=p.get(w);j.isNoDocument()&&j.version.isEqual(Dr.min())?(e.removeEntry(w,j.readTime),_=_.insert(w,j)):!le.isValidDocument()||j.version.compareTo(le.version)>0||0===j.version.compareTo(le.version)&&le.hasPendingWrites?(e.addEntry(j),_=_.insert(w,j)):de("LocalStore","Ignoring outdated watch update for ",w,". Current version:",le.version," Watch version:",j.version)}),_})}function Pv(l,e){const n=pn(l);return n.persistence.runTransaction("Get next mutation batch","readonly",d=>(void 0===e&&(e=-1),n.Bs.getNextMutationBatchAfterBatchId(d,e)))}function Xh(l,e){const n=pn(l);return n.persistence.runTransaction("Allocate target","readwrite",d=>{let p;return n.fs.getTargetData(d,e).next(_=>_?(p=_,Xt.resolve(p)):n.fs.allocateTargetId(d).next(w=>(p=new dc(e,w,0,d.currentSequenceNumber),n.fs.addTargetData(d,p).next(()=>p))))}).then(d=>{const p=n.ui.get(d.targetId);return(null===p||d.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(n.ui=n.ui.insert(d.targetId,d),n.ai.set(e,d.targetId)),d})}function ah(l,e,n){return uh.apply(this,arguments)}function uh(){return uh=(0,ne.Z)(function*(l,e,n){const d=pn(l),p=d.ui.get(e),_=n?"readwrite":"readwrite-primary";try{n||(yield d.persistence.runTransaction("Release target",_,w=>d.persistence.referenceDelegate.removeTarget(w,p)))}catch(w){if(!Yu(w))throw w;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}d.ui=d.ui.remove(e),d.ai.delete(p.target)}),uh.apply(this,arguments)}function Ul(l,e,n){const d=pn(l);let p=Dr.min(),_=qi();return d.persistence.runTransaction("Execute query","readonly",w=>function(j,le,me){const tt=pn(j),yt=tt.ai.get(me);return void 0!==yt?Xt.resolve(tt.ui.get(yt)):tt.fs.getTargetData(le,me)}(d,w,Iu(e)).next(j=>{if(j)return p=j.lastLimboFreeSnapshotVersion,d.fs.getMatchingKeysForTargetId(w,j.targetId).next(le=>{_=le})}).next(()=>d.oi.Qs(w,e,n?p:Dr.min(),n?_:qi())).next(j=>(ch(d,zu(e),j),{documents:j,_i:_})))}function Vo(l,e){const n=pn(l),d=pn(n.fs),p=n.ui.get(e);return p?Promise.resolve(p.target):n.persistence.runTransaction("Get target data","readonly",_=>d.Et(_,e).next(w=>w?w.target:null))}function lh(l,e){const n=pn(l),d=n.ci.get(e)||Dr.min();return n.persistence.runTransaction("Get new document changes","readonly",p=>n.hi.getAllFromCollectionGroup(p,e,Nr(d,-1),Number.MAX_SAFE_INTEGER)).then(p=>(ch(n,e,p),p))}function ch(l,e,n){let d=Dr.min();n.forEach((p,_)=>{_.readTime.compareTo(d)>0&&(d=_.readTime)}),l.ci.set(e,d)}function Jp(){return Jp=(0,ne.Z)(function*(l,e,n,d){const p=pn(l);let _=qi(),w=gu();for(const me of n){const tt=e.wi(me.metadata.name);me.document&&(_=_.add(tt));const yt=e.mi(me);yt.setReadTime(e.gi(me.metadata.readTime)),w=w.insert(tt,yt)}const j=p.hi.newChangeBuffer({trackRemovals:!0}),le=yield Xh(p,(me=d,Iu(nc(mi.fromString(`__bundle__/docs/${me}`)))));var me;return p.persistence.runTransaction("Apply bundle documents","readwrite",me=>Mv(me,j,w).next(tt=>(j.apply(me),tt)).next(tt=>p.fs.removeMatchingKeysForTargetId(me,le.targetId).next(()=>p.fs.addMatchingKeys(me,_,le.targetId)).next(()=>p.fi.Gs(me,tt)).next(()=>tt)))}),Jp.apply(this,arguments)}function mm(l,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,ne.Z)(function*(l,e,n=qi()){const d=yield Xh(l,Iu(zh(e.bundledQuery))),p=pn(l);return p.persistence.runTransaction("Save named query","readwrite",_=>{const w=eo(e.readTime);if(d.snapshotVersion.compareTo(w)>=0)return p._s.saveNamedQuery(_,e);const j=d.withResumeToken(ho.EMPTY_BYTE_STRING,w);return p.ui=p.ui.insert(j.targetId,j),p.fs.updateTargetData(_,j).next(()=>p.fs.removeMatchingKeysForTargetId(_,d.targetId)).next(()=>p.fs.addMatchingKeys(_,n,d.targetId)).next(()=>p._s.saveNamedQuery(_,e))})}),Xf.apply(this,arguments)}class vm{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,n){return Xt.resolve(this.yi.get(n))}saveBundleMetadata(e,n){var d;return this.yi.set(n.id,{id:(d=n).id,version:d.version,createTime:eo(d.createTime)}),Xt.resolve()}getNamedQuery(e,n){return Xt.resolve(this.pi.get(n))}saveNamedQuery(e,n){return this.pi.set(n.name,{name:(d=n).name,query:zh(d.bundledQuery),readTime:eo(d.readTime)}),Xt.resolve();var d}}class ym{constructor(){this.overlays=new li(Fn.comparator),this.Ii=new Map}getOverlay(e,n){return Xt.resolve(this.overlays.get(n))}saveOverlays(e,n,d){return d.forEach((p,_)=>{this.Xt(e,n,_)}),Xt.resolve()}removeOverlaysForBatchId(e,n,d){const p=this.Ii.get(d);return void 0!==p&&(p.forEach(_=>this.overlays=this.overlays.remove(_)),this.Ii.delete(d)),Xt.resolve()}getOverlaysForCollection(e,n,d){const p=Ml(),_=n.length+1,w=new Fn(n.child("")),j=this.overlays.getIteratorFrom(w);for(;j.hasNext();){const le=j.getNext().value,me=le.getKey();if(!n.isPrefixOf(me.path))break;me.path.length===_&&le.largestBatchId>d&&p.set(le.getKey(),le)}return Xt.resolve(p)}getOverlaysForCollectionGroup(e,n,d,p){let _=new li((me,tt)=>me-tt);const w=this.overlays.getIterator();for(;w.hasNext();){const me=w.getNext().value;if(me.getKey().getCollectionGroup()===n&&me.largestBatchId>d){let tt=_.get(me.largestBatchId);null===tt&&(tt=Ml(),_=_.insert(me.largestBatchId,tt)),tt.set(me.getKey(),me)}}const j=Ml(),le=_.getIterator();for(;le.hasNext()&&(le.getNext().value.forEach((me,tt)=>j.set(me,tt)),!(j.size()>=p)););return Xt.resolve(j)}Xt(e,n,d){if(null===d)return;const p=this.overlays.get(d.key);if(null!==p){const w=this.Ii.get(p.largestBatchId).delete(d.key);this.Ii.set(p.largestBatchId,w)}this.overlays=this.overlays.insert(d.key,new Jd(n,d));let _=this.Ii.get(n);void 0===_&&(_=qi(),this.Ii.set(n,_)),this.Ii.set(n,_.add(d.key))}}class eg{constructor(){this.Ti=new vi(Ho.Ei),this.Ai=new vi(Ho.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,n){const d=new Ho(e,n);this.Ti=this.Ti.add(d),this.Ai=this.Ai.add(d)}bi(e,n){e.forEach(d=>this.addReference(d,n))}removeReference(e,n){this.Pi(new Ho(e,n))}Vi(e,n){e.forEach(d=>this.removeReference(d,n))}vi(e){const n=new Fn(new mi([])),d=new Ho(n,e),p=new Ho(n,e+1),_=[];return this.Ai.forEachInRange([d,p],w=>{this.Pi(w),_.push(w.key)}),_}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const n=new Fn(new mi([])),d=new Ho(n,e),p=new Ho(n,e+1);let _=qi();return this.Ai.forEachInRange([d,p],w=>{_=_.add(w.key)}),_}containsKey(e){const n=new Ho(e,0),d=this.Ti.firstAfterOrEqual(n);return null!==d&&e.isEqual(d.key)}}class Ho{constructor(e,n){this.key=e,this.Ci=n}static Ei(e,n){return Fn.comparator(e.key,n.key)||Ur(e.Ci,n.Ci)}static Ri(e,n){return Ur(e.Ci,n.Ci)||Fn.comparator(e.key,n.key)}}class Zy{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new vi(Ho.Ei)}checkEmpty(e){return Xt.resolve(0===this.Bs.length)}addMutationBatch(e,n,d,p){const _=this.xi;this.xi++;const w=new Xd(_,n,d,p);this.Bs.push(w);for(const j of p)this.Ni=this.Ni.add(new Ho(j.key,_)),this.indexManager.addToCollectionParentIndex(e,j.key.path.popLast());return Xt.resolve(w)}lookupMutationBatch(e,n){return Xt.resolve(this.ki(n))}getNextMutationBatchAfterBatchId(e,n){const p=this.Mi(n+1),_=p<0?0:p;return Xt.resolve(this.Bs.length>_?this.Bs[_]:null)}getHighestUnacknowledgedBatchId(){return Xt.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return Xt.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const d=new Ho(n,0),p=new Ho(n,Number.POSITIVE_INFINITY),_=[];return this.Ni.forEachInRange([d,p],w=>{const j=this.ki(w.Ci);_.push(j)}),Xt.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let d=new vi(Ur);return n.forEach(p=>{const _=new Ho(p,0),w=new Ho(p,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([_,w],j=>{d=d.add(j.Ci)})}),Xt.resolve(this.Oi(d))}getAllMutationBatchesAffectingQuery(e,n){const d=n.path,p=d.length+1;let _=d;Fn.isDocumentKey(_)||(_=_.child(""));const w=new Ho(new Fn(_),0);let j=new vi(Ur);return this.Ni.forEachWhile(le=>{const me=le.key.path;return!!d.isPrefixOf(me)&&(me.length===p&&(j=j.add(le.Ci)),!0)},w),Xt.resolve(this.Oi(j))}Oi(e){const n=[];return e.forEach(d=>{const p=this.ki(d);null!==p&&n.push(p)}),n}removeMutationBatch(e,n){Pn(0===this.Fi(n.batchId,"removed")),this.Bs.shift();let d=this.Ni;return Xt.forEach(n.mutations,p=>{const _=new Ho(p.key,n.batchId);return d=d.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,p.key)}).next(()=>{this.Ni=d})}_n(e){}containsKey(e,n){const d=new Ho(n,0),p=this.Ni.firstAfterOrEqual(d);return Xt.resolve(n.isEqual(p&&p.key))}performConsistencyCheck(e){return Xt.resolve()}Fi(e,n){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const n=this.Mi(e);return n<0||n>=this.Bs.length?null:this.Bs[n]}}class _m{constructor(e){this.$i=e,this.docs=new li(Fn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const d=n.key,p=this.docs.get(d),_=p?p.size:0,w=this.$i(n);return this.docs=this.docs.insert(d,{document:n.mutableCopy(),size:w}),this.size+=w-_,this.indexManager.addToCollectionParentIndex(e,d.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const d=this.docs.get(n);return Xt.resolve(d?d.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let d=gu();return n.forEach(p=>{const _=this.docs.get(p);d=d.insert(p,_?_.document.mutableCopy():qe.newInvalidDocument(p))}),Xt.resolve(d)}getAllFromCollection(e,n,d){let p=gu();const _=new Fn(n.child("")),w=this.docs.getIteratorFrom(_);for(;w.hasNext();){const{key:j,value:{document:le}}=w.getNext();if(!n.isPrefixOf(j.path))break;j.path.length>n.length+1||po(Si(le),d)<=0||(p=p.insert(le.key,le.mutableCopy()))}return Xt.resolve(p)}getAllFromCollectionGroup(e,n,d,p){Qt()}Bi(e,n){return Xt.forEach(this.docs,d=>n(d))}newChangeBuffer(e){return new Yy(this)}getSize(e){return Xt.resolve(this.size)}}class Yy extends Yf{constructor(e){super(),this.Kn=e}applyChanges(e){const n=[];return this.changes.forEach((d,p)=>{p.isValidDocument()?n.push(this.Kn.addEntry(e,p)):this.Kn.removeEntry(d)}),Xt.waitFor(n)}getFromCache(e,n){return this.Kn.getEntry(e,n)}getAllFromCache(e,n){return this.Kn.getEntries(e,n)}}class bm{constructor(e){this.persistence=e,this.Li=new pu(n=>dl(n),Gu),this.lastRemoteSnapshotVersion=Dr.min(),this.highestTargetId=0,this.Ui=0,this.qi=new eg,this.targetCount=0,this.Ki=Bc.gn()}forEachTarget(e,n){return this.Li.forEach((d,p)=>n(p)),Xt.resolve()}getLastRemoteSnapshotVersion(e){return Xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xt.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),Xt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,d){return d&&(this.lastRemoteSnapshotVersion=d),n>this.Ui&&(this.Ui=n),Xt.resolve()}Tn(e){this.Li.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ki=new Bc(n),this.highestTargetId=n),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,n){return this.Tn(n),this.targetCount+=1,Xt.resolve()}updateTargetData(e,n){return this.Tn(n),Xt.resolve()}removeTargetData(e,n){return this.Li.delete(n.target),this.qi.vi(n.targetId),this.targetCount-=1,Xt.resolve()}removeTargets(e,n,d){let p=0;const _=[];return this.Li.forEach((w,j)=>{j.sequenceNumber<=n&&null===d.get(j.targetId)&&(this.Li.delete(w),_.push(this.removeMatchingKeysForTargetId(e,j.targetId)),p++)}),Xt.waitFor(_).next(()=>p)}getTargetCount(e){return Xt.resolve(this.targetCount)}getTargetData(e,n){const d=this.Li.get(n)||null;return Xt.resolve(d)}addMatchingKeys(e,n,d){return this.qi.bi(n,d),Xt.resolve()}removeMatchingKeys(e,n,d){this.qi.Vi(n,d);const p=this.persistence.referenceDelegate,_=[];return p&&n.forEach(w=>{_.push(p.markPotentiallyOrphaned(e,w))}),Xt.waitFor(_)}removeMatchingKeysForTargetId(e,n){return this.qi.vi(n),Xt.resolve()}getMatchingKeysForTargetId(e,n){const d=this.qi.Di(n);return Xt.resolve(d)}containsKey(e,n){return Xt.resolve(this.qi.containsKey(n))}}class Tm{constructor(e,n){this.Gi={},this.overlays={},this.es=new Bs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new bm(this),this.indexManager=new Wp,this.ds=new _m(d=>this.referenceDelegate.Qi(d)),this.M=new im(n),this._s=new vm(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ym,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let d=this.Gi[e.toKey()];return d||(d=new Zy(n,this.referenceDelegate),this.Gi[e.toKey()]=d),d}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,n,d){de("MemoryPersistence","Starting transaction:",e);const p=new Qy(this.es.next());return this.referenceDelegate.ji(),d(p).next(_=>this.referenceDelegate.Wi(p).next(()=>_)).toPromise().then(_=>(p.raiseOnCommittedEvent(),_))}zi(e,n){return Xt.or(Object.values(this.Gi).map(d=>()=>d.containsKey(e,n)))}}class Qy extends tm{constructor(e){super(),this.currentSequenceNumber=e}}class tg{constructor(e){this.persistence=e,this.Hi=new eg,this.Ji=null}static Yi(e){return new tg(e)}get Xi(){if(this.Ji)return this.Ji;throw Qt()}addReference(e,n,d){return this.Hi.addReference(d,n),this.Xi.delete(d.toString()),Xt.resolve()}removeReference(e,n,d){return this.Hi.removeReference(d,n),this.Xi.add(d.toString()),Xt.resolve()}markPotentiallyOrphaned(e,n){return this.Xi.add(n.toString()),Xt.resolve()}removeTarget(e,n){this.Hi.vi(n.targetId).forEach(p=>this.Xi.add(p.toString()));const d=this.persistence.getTargetCache();return d.getMatchingKeysForTargetId(e,n.targetId).next(p=>{p.forEach(_=>this.Xi.add(_.toString()))}).next(()=>d.removeTargetData(e,n))}ji(){this.Ji=new Set}Wi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xt.forEach(this.Xi,d=>{const p=Fn.fromPath(d);return this.Zi(e,p).next(_=>{_||n.removeEntry(p,Dr.min())})}).next(()=>(this.Ji=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zi(e,n).next(d=>{d?this.Xi.delete(n.toString()):this.Xi.add(n.toString())})}Qi(e){return 0}Zi(e,n){return Xt.or([()=>Xt.resolve(this.Hi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zi(e,n)])}}function Em(l,e){return`firestore_clients_${l}_${e}`}function Ov(l,e,n){let d=`firestore_mutations_${l}_${n}`;return e.isAuthenticated()&&(d+=`_${e.uid}`),d}function Fa(l,e){return`firestore_targets_${l}_${e}`}class dh{constructor(e,n,d,p){this.user=e,this.batchId=n,this.state=d,this.error=p}static tr(e,n,d){const p=JSON.parse(d);let _,w="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return w&&p.error&&(w="string"==typeof p.error.message&&"string"==typeof p.error.code,w&&(_=new dn(p.error.code,p.error.message))),w?new dh(e,n,p.state,_):(ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${d}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mu{constructor(e,n,d){this.targetId=e,this.state=n,this.error=d}static tr(e,n){const d=JSON.parse(n);let p,_="object"==typeof d&&-1!==["not-current","current","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return _&&d.error&&(_="string"==typeof d.error.message&&"string"==typeof d.error.code,_&&(p=new dn(d.error.code,d.error.message))),_?new Mu(e,d.state,p):(ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static tr(e,n){const d=JSON.parse(n);let p="object"==typeof d&&d.activeTargetIds instanceof Array,_=ta();for(let w=0;p&&w<d.activeTargetIds.length;++w)p=Su(d.activeTargetIds[w]),_=_.add(d.activeTargetIds[w]);return p?new Jf(e,_):(ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Rv{constructor(e,n){this.clientId=e,this.onlineState=n}static tr(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Rv(n.clientId,n.onlineState):(ze("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ng{constructor(){this.activeTargetIds=ta()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rg{constructor(e,n,d,p,_){this.window=e,this.Yn=n,this.persistenceKey=d,this.ir=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new li(Ur),this.started=!1,this.cr=[];const w=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.hr=Em(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ng),this.dr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(j){return`firestore_bundle_loaded_v2_${j}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ne.Z)(function*(){const n=yield e.syncEngine.Fs();for(const p of n){if(p===e.ir)continue;const _=e.getItem(Em(e.persistenceKey,p));if(_){const w=Jf.tr(p,_);w&&(e.ar=e.ar.insert(w.clientId,w))}}e.yr();const d=e.storage.getItem(e.mr);if(d){const p=e.pr(d);p&&e.Ir(p)}for(const p of e.cr)e.ur(p);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((d,p)=>{p.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,n,d){this.Er(e,n,d),this.Ar(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const d=this.storage.getItem(Fa(this.persistenceKey,e));if(d){const p=Mu.tr(e,d);p&&(n=p.state)}}return this.Rr.nr(e),this.yr(),n}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fa(this.persistenceKey,e))}updateQueryState(e,n,d){this.br(e,n,d)}handleUserChange(e,n,d){n.forEach(p=>{this.Ar(p)}),this.currentUser=e,d.forEach(p=>{this.addPendingMutation(p)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return de("SharedClientState","READ",e,n),n}setItem(e,n){de("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){de("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var n=this;const d=e;if(d.storageArea===this.storage){if(de("SharedClientState","EVENT",d.key,d.newValue),d.key===this.hr)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ne.Z)(function*(){if(n.started){if(null!==d.key)if(n.dr.test(d.key)){if(null==d.newValue){const p=n.vr(d.key);return n.Sr(p,null)}{const p=n.Dr(d.key,d.newValue);if(p)return n.Sr(p.clientId,p)}}else if(n._r.test(d.key)){if(null!==d.newValue){const p=n.Cr(d.key,d.newValue);if(p)return n.Nr(p)}}else if(n.wr.test(d.key)){if(null!==d.newValue){const p=n.kr(d.key,d.newValue);if(p)return n.Mr(p)}}else if(d.key===n.mr){if(null!==d.newValue){const p=n.pr(d.newValue);if(p)return n.Ir(p)}}else if(d.key===n.lr){const p=function(_){let w=Bs.A;if(null!=_)try{const j=JSON.parse(_);Pn("number"==typeof j),w=j}catch(j){ze("SharedClientState","Failed to read sequence number from WebStorage",j)}return w}(d.newValue);p!==Bs.A&&n.sequenceNumberHandler(p)}else if(d.key===n.gr){const p=n.Or(d.newValue);yield Promise.all(p.map(_=>n.syncEngine.Fr(_)))}}else n.cr.push(d)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,n,d){const p=new dh(this.currentUser,e,n,d),_=Ov(this.persistenceKey,this.currentUser,e);this.setItem(_,p.er())}Ar(e){const n=Ov(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,n,d){const p=Fa(this.persistenceKey,e),_=new Mu(e,n,d);this.setItem(p,_.er())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.gr,n)}vr(e){const n=this.dr.exec(e);return n?n[1]:null}Dr(e,n){const d=this.vr(e);return Jf.tr(d,n)}Cr(e,n){const d=this._r.exec(e),p=Number(d[1]);return dh.tr(new F(void 0!==d[2]?d[2]:null),p,n)}kr(e,n){const d=this.wr.exec(e),p=Number(d[1]);return Mu.tr(p,n)}pr(e){return Rv.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var n=this;return(0,ne.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.$r(e.batchId,e.state,e.error);de("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,n){const d=n?this.ar.insert(e,n):this.ar.remove(e),p=this.Tr(this.ar),_=this.Tr(d),w=[],j=[];return _.forEach(le=>{p.has(le)||w.push(le)}),p.forEach(le=>{_.has(le)||j.push(le)}),this.syncEngine.Lr(w,j).then(()=>{this.ar=d})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let n=ta();return e.forEach((d,p)=>{n=n.unionWith(p.activeTargetIds)}),n}}class Sm{constructor(){this.Ur=new ng,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,d){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,n,d){this.qr[e]=n}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ng,Promise.resolve()}handleUserChange(e,n,d){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ig{Kr(e){}shutdown(){}}class wm{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Xy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Jy{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Nv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,d,p,_){const w=this.ho(e,n);de("RestConnection","Sending: ",w,d);const j={};return this.lo(j,p,_),this.fo(e,w,j,d).then(le=>(de("RestConnection","Received: ",le),le),le=>{throw st("RestConnection",`${e} failed with error: `,le,"url: ",w,"request:",d),le})}_o(e,n,d,p,_){return this.co(e,n,d,p,_)}lo(e,n,d){e["X-Goog-Api-Client"]="gl-js/ fire/"+P,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((p,_)=>e[_]=p),d&&d.headers.forEach((p,_)=>e[_]=p)}ho(e,n){return`${this.uo}/v1/${n}:${Xy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,d,p){return new Promise((_,w)=>{const j=new ju;j.listenOnce(Zo.COMPLETE,()=>{try{switch(j.getLastErrorCode()){case Ka.NO_ERROR:const me=j.getResponseJson();de("Connection","XHR received:",JSON.stringify(me)),_(me);break;case Ka.TIMEOUT:de("Connection",'RPC "'+e+'" timed out'),w(new dn(Rt.DEADLINE_EXCEEDED,"Request time out"));break;case Ka.HTTP_ERROR:const tt=j.getStatus();if(de("Connection",'RPC "'+e+'" failed with status:',tt,"response text:",j.getResponseText()),tt>0){const yt=j.getResponseJson().error;if(yt&&yt.status&&yt.message){const Wt=function(bn){const Tn=bn.toLowerCase().replace(/_/g,"-");return Object.values(Rt).indexOf(Tn)>=0?Tn:Rt.UNKNOWN}(yt.status);w(new dn(Wt,yt.message))}else w(new dn(Rt.UNKNOWN,"Server responded with status "+j.getStatus()))}else w(new dn(Rt.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{de("Connection",'RPC "'+e+'" completed.')}});const le=JSON.stringify(p);j.send(n,"POST",le,d,15)})}wo(e,n,d){const p=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=So(),w=Fu(),j={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(j.xmlHttpFactory=new su({})),this.lo(j.initMessageHeaders,n,d),(0,xt.uI)()||(0,xt.b$)()||(0,xt.d)()||(0,xt.w1)()||(0,xt.Mn)()||(0,xt.ru)()||(j.httpHeadersOverwriteParam="$httpHeaders");const le=p.join("");de("Connection","Creating WebChannel: "+le,j);const me=_.createWebChannel(le,j);let tt=!1,yt=!1;const Wt=new Jy({Jr:Tn=>{yt?de("Connection","Not sending because WebChannel is closed:",Tn):(tt||(de("Connection","Opening WebChannel transport."),me.open(),tt=!0),de("Connection","WebChannel sending:",Tn),me.send(Tn))},Yr:()=>me.close()}),bn=(Tn,rr,Gr)=>{Tn.listen(rr,Ws=>{try{Gr(Ws)}catch(zs){setTimeout(()=>{throw zs},0)}})};return bn(me,lo.EventType.OPEN,()=>{yt||de("Connection","WebChannel transport opened.")}),bn(me,lo.EventType.CLOSE,()=>{yt||(yt=!0,de("Connection","WebChannel transport closed"),Wt.ro())}),bn(me,lo.EventType.ERROR,Tn=>{yt||(yt=!0,st("Connection","WebChannel transport errored:",Tn),Wt.ro(new dn(Rt.UNAVAILABLE,"The operation could not be completed")))}),bn(me,lo.EventType.MESSAGE,Tn=>{var rr;if(!yt){const Gr=Tn.data[0];Pn(!!Gr);const Ws=Gr,zs=Ws.error||(null===(rr=Ws[0])||void 0===rr?void 0:rr.error);if(zs){de("Connection","WebChannel received error:",zs);const Ri=zs.status;let na=function(xo){const Ja=Os[xo];if(void 0!==Ja)return Rf(Ja)}(Ri),io=zs.message;void 0===na&&(na=Rt.INTERNAL,io="Unknown error status: "+Ri+" with message "+zs.message),yt=!0,Wt.ro(new dn(na,io)),me.close()}else de("Connection","WebChannel received:",Gr),Wt.oo(Gr)}}),bn(w,Yo.STAT_EVENT,Tn=>{Tn.stat===Ms.PROXY?de("Connection","Detected buffering proxy"):Tn.stat===Ms.NOPROXY&&de("Connection","Detected no buffering proxy")}),setTimeout(()=>{Wt.io()},0),Wt}}function sg(){return"undefined"!=typeof window?window:null}function og(){return"undefined"!=typeof document?document:null}function ef(l){return new Ff(l,!0)}class Cm{constructor(e,n,d=1e3,p=1.5,_=6e4){this.Yn=e,this.timerId=n,this.mo=d,this.yo=p,this.po=_,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),d=Math.max(0,Date.now()-this.Eo),p=Math.max(0,n-d);p>0&&de("ExponentialBackoff",`Backing off for ${p} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${d} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,p,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Lv{constructor(e,n,d,p,_,w,j,le){this.Yn=e,this.Vo=d,this.vo=p,this.So=_,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=j,this.listener=le,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Cm(e,n)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ne.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ne.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,n){var d=this;return(0,ne.Z)(function*(){d.Uo(),d.qo(),d.No.cancel(),d.Do++,4!==e?d.No.reset():n&&n.code===Rt.RESOURCE_EXHAUSTED?(ze(n.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),d.No.Ao()):n&&n.code===Rt.UNAUTHENTICATED&&3!==d.state&&(d.authCredentialsProvider.invalidateToken(),d.appCheckCredentialsProvider.invalidateToken()),null!==d.stream&&(d.Ko(),d.stream.close(),d.stream=null),d.state=e,yield d.listener.eo(n)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([d,p])=>{this.Do===n&&this.Qo(d,p)},d=>{e(()=>{const p=new dn(Rt.UNKNOWN,"Fetching auth token failed: "+d.message);return this.jo(p)})})}Qo(e,n){const d=this.Go(this.Do);this.stream=this.Wo(e,n),this.stream.Xr(()=>{d(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(p=>{d(()=>this.jo(p))}),this.stream.onMessage(p=>{d(()=>this.onMessage(p))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ne.Z)(function*(){e.state=0,e.start()}))}jo(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return n=>{this.Yn.enqueueAndForget(()=>this.Do===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fv extends Lv{constructor(e,n,d,p,_,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,d,p,w),this.M=_}Wo(e,n){return this.So.wo("Listen",e,n)}onMessage(e){this.No.reset();const n=function Zu(l,e){let n;if("targetChange"in e){const d="NO_CHANGE"===(le=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===le?1:"REMOVE"===le?2:"CURRENT"===le?3:"RESET"===le?4:Qt(),p=e.targetChange.targetIds||[],_=function(le,me){return le.N?(Pn(void 0===me||"string"==typeof me),ho.fromBase64String(me||"")):(Pn(void 0===me||me instanceof Uint8Array),ho.fromUint8Array(me||new Uint8Array))}(l,e.targetChange.resumeToken),w=e.targetChange.cause,j=w&&function(le){const me=void 0===le.code?Rt.UNKNOWN:Rf(le.code);return new dn(me,le.message||"")}(w);n=new Pl(d,p,_,j||null)}else if("documentChange"in e){const d=e.documentChange,p=Ku(l,d.document.name),_=eo(d.document.updateTime),w=new Q({mapValue:{fields:d.document.fields}}),j=qe.newFoundDocument(p,_,w);n=new lc(d.targetIds||[],d.removedTargetIds||[],j.key,j)}else if("documentDelete"in e){const d=e.documentDelete,p=Ku(l,d.document),_=d.readTime?eo(d.readTime):Dr.min(),w=qe.newNoDocument(p,_);n=new lc([],d.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const d=e.documentRemove,p=Ku(l,d.document);n=new lc([],d.removedTargetIds||[],p,null)}else{if(!("filter"in e))return Qt();{const d=e.filter,_=new Of(d.count||0);n=new Co(d.targetId,_)}}var le;return n}(this.M,e),d=function(p){if(!("targetChange"in p))return Dr.min();const _=p.targetChange;return _.targetIds&&_.targetIds.length?Dr.min():_.readTime?eo(_.readTime):Dr.min()}(e);return this.listener.zo(n,d)}Ho(e){const n={};n.database=Rc(this.M),n.addTarget=function(p,_){let w;const j=_.target;return w=nd(j)?{documents:Vf(p,j)}:{query:zd(p,j)},w.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?w.resumeToken=ld(p,_.resumeToken):_.snapshotVersion.compareTo(Dr.min())>0&&(w.readTime=ml(p,_.snapshotVersion.toTimestamp())),w}(this.M,e);const d=function Up(l,e){const n=function(d,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qt()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);d&&(n.labels=d),this.Lo(n)}Jo(e){const n={};n.database=Rc(this.M),n.removeTarget=e,this.Lo(n)}}class jv extends Lv{constructor(e,n,d,p,_,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,d,p,w),this.M=_,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,n){return this.So.wo("Write",e,n)}onMessage(e){if(Pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const n=function Bf(l,e){return l&&l.length>0?(Pn(void 0!==e),l.map(n=>function(d,p){let _=eo(d.updateTime?d.updateTime:p);return _.isEqual(Dr.min())&&(_=eo(p)),new Df(_,d.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),d=eo(e.commitTime);return this.listener.tu(d,n)}return Pn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Rc(this.M),this.Lo(e)}Zo(e){const n={streamToken:this.lastStreamToken,writes:e.map(d=>vl(this.M,d))};this.Lo(n)}}class e_ extends class{}{constructor(e,n,d,p){super(),this.authCredentials=e,this.appCheckCredentials=n,this.So=d,this.M=p,this.su=!1}iu(){if(this.su)throw new dn(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,d){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,_])=>this.So.co(e,n,d,p,_)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new dn(Rt.UNKNOWN,p.toString())})}_o(e,n,d){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,_])=>this.So._o(e,n,d,p,_)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new dn(Rt.UNKNOWN,p.toString())})}terminate(){this.su=!0}}class Bl{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ze(n),this.uu=!1):de("OnlineStateTracker",n)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class xm{constructor(e,n,d,p,_){var w=this;this.localStore=e,this.datastore=n,this.asyncQueue=d,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=_,this.gu.Kr(j=>{d.enqueueAndForget((0,ne.Z)(function*(){var le;_l(w)&&(de("RemoteStore","Restarting streams for network reachability change."),yield(le=(0,ne.Z)(function*(me){const tt=pn(me);tt.wu.add(4),yield $c(tt),tt.yu.set("Unknown"),tt.wu.delete(4),yield vd(tt)}),function(me){return le.apply(this,arguments)})(w))}))}),this.yu=new Bl(d,p)}}function vd(l){return ag.apply(this,arguments)}function ag(){return ag=(0,ne.Z)(function*(l){if(_l(l))for(const e of l.mu)yield e(!0)}),ag.apply(this,arguments)}function $c(l){return hh.apply(this,arguments)}function hh(){return hh=(0,ne.Z)(function*(l){for(const e of l.mu)yield e(!1)}),hh.apply(this,arguments)}function ep(l,e){const n=pn(l);n._u.has(e.targetId)||(n._u.set(e.targetId,e),ug(n)?Im(n):bd(n).Mo()&&_d(n,e))}function yd(l,e){const n=pn(l),d=bd(n);n._u.delete(e),d.Mo()&&tf(n,e),0===n._u.size&&(d.Mo()?d.$o():_l(n)&&n.yu.set("Unknown"))}function _d(l,e){l.pu.Z(e.targetId),bd(l).Ho(e)}function tf(l,e){l.pu.Z(e),bd(l).Jo(e)}function Im(l){l.pu=new Oc({getRemoteKeysForTarget:e=>l.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>l._u.get(e)||null}),bd(l).start(),l.yu.au()}function ug(l){return _l(l)&&!bd(l).ko()&&l._u.size>0}function _l(l){return 0===pn(l).wu.size}function lg(l){l.pu=void 0}function t_(l){return tp.apply(this,arguments)}function tp(){return tp=(0,ne.Z)(function*(l){l._u.forEach((e,n)=>{_d(l,e)})}),tp.apply(this,arguments)}function Dm(l,e){return cg.apply(this,arguments)}function cg(){return cg=(0,ne.Z)(function*(l,e){lg(l),ug(l)?(l.yu.lu(e),Im(l)):l.yu.set("Unknown")}),cg.apply(this,arguments)}function j_(l,e,n){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ne.Z)(function*(l,e,n){if(l.yu.set("Online"),e instanceof Pl&&2===e.state&&e.cause)try{yield(d=(0,ne.Z)(function*(p,_){const w=_.cause;for(const j of _.targetIds)p._u.has(j)&&(yield p.remoteSyncer.rejectListen(j,w),p._u.delete(j),p.pu.removeTarget(j))}),function(p,_){return d.apply(this,arguments)})(l,e)}catch(d){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),d),yield nf(l,d)}else if(e instanceof lc?l.pu.ut(e):e instanceof Co?l.pu._t(e):l.pu.ht(e),!n.isEqual(Dr.min()))try{const d=yield gm(l.localStore);n.compareTo(d)>=0&&(yield function(p,_){const w=p.pu.yt(_);return w.targetChanges.forEach((j,le)=>{if(j.resumeToken.approximateByteSize()>0){const me=p._u.get(le);me&&p._u.set(le,me.withResumeToken(j.resumeToken,_))}}),w.targetMismatches.forEach(j=>{const le=p._u.get(j);if(!le)return;p._u.set(j,le.withResumeToken(ho.EMPTY_BYTE_STRING,le.snapshotVersion)),tf(p,j);const me=new dc(le.target,j,1,le.sequenceNumber);_d(p,me)}),p.remoteSyncer.applyRemoteEvent(w)}(l,n))}catch(d){de("RemoteStore","Failed to raise snapshot:",d),yield nf(l,d)}var d}),Uv.apply(this,arguments)}function nf(l,e,n){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,ne.Z)(function*(l,e,n){if(!Yu(e))throw e;l.wu.add(1),yield $c(l),l.yu.set("Offline"),n||(n=()=>gm(l.localStore)),l.asyncQueue.enqueueRetryable((0,ne.Z)(function*(){de("RemoteStore","Retrying IndexedDB access"),yield n(),l.wu.delete(1),yield vd(l)}))}),Bv.apply(this,arguments)}function rf(l,e){return e().catch(n=>nf(l,n,e))}function fh(l){return dg.apply(this,arguments)}function dg(){return dg=(0,ne.Z)(function*(l){const e=pn(l),n=Td(e);let d=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Vv(e);)try{const p=yield Pv(e.localStore,d);if(null===p){0===e.du.length&&n.$o();break}d=p.batchId,Hv(e,p)}catch(p){yield nf(e,p)}Am(e)&&Vl(e)}),dg.apply(this,arguments)}function Vv(l){return _l(l)&&l.du.length<10}function Hv(l,e){l.du.push(e);const n=Td(l);n.Mo()&&n.Xo&&n.Zo(e.mutations)}function Am(l){return _l(l)&&!Td(l).ko()&&l.du.length>0}function Vl(l){Td(l).start()}function hg(l){return ph.apply(this,arguments)}function ph(){return ph=(0,ne.Z)(function*(l){Td(l).nu()}),ph.apply(this,arguments)}function n_(l){return km.apply(this,arguments)}function km(){return km=(0,ne.Z)(function*(l){const e=Td(l);for(const n of l.du)e.Zo(n.mutations)}),km.apply(this,arguments)}function sf(l,e,n){return fg.apply(this,arguments)}function fg(){return fg=(0,ne.Z)(function*(l,e,n){const d=l.du.shift(),p=Ll.from(d,e,n);yield rf(l,()=>l.remoteSyncer.applySuccessfulWrite(p)),yield fh(l)}),fg.apply(this,arguments)}function Mm(l,e){return bl.apply(this,arguments)}function bl(){return bl=(0,ne.Z)(function*(l,e){var n;e&&Td(l).Xo&&(yield(n=(0,ne.Z)(function*(d,p){if(Hd(_=p.code)&&_!==Rt.ABORTED){const w=d.du.shift();Td(d).Fo(),yield rf(d,()=>d.remoteSyncer.rejectFailedWrite(w.batchId,p)),yield fh(d)}var _}),function(d,p){return n.apply(this,arguments)})(l,e)),Am(l)&&Vl(l)}),bl.apply(this,arguments)}function Pm(l,e){return np.apply(this,arguments)}function np(){return np=(0,ne.Z)(function*(l,e){const n=pn(l);n.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const d=_l(n);n.wu.add(3),yield $c(n),d&&n.yu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.wu.delete(3),yield vd(n)}),np.apply(this,arguments)}function rp(l,e){return pg.apply(this,arguments)}function pg(){return pg=(0,ne.Z)(function*(l,e){const n=pn(l);e?(n.wu.delete(2),yield vd(n)):e||(n.wu.add(2),yield $c(n),n.yu.set("Unknown"))}),pg.apply(this,arguments)}function bd(l){return l.Iu||(l.Iu=function(e,n,d){const p=pn(e);return p.iu(),new Fv(n,p.So,p.authCredentials,p.appCheckCredentials,p.M,d)}(l.datastore,l.asyncQueue,{Xr:t_.bind(null,l),eo:Dm.bind(null,l),zo:j_.bind(null,l)}),l.mu.push(function(){var e=(0,ne.Z)(function*(n){n?(l.Iu.Fo(),ug(l)?Im(l):l.yu.set("Unknown")):(yield l.Iu.stop(),lg(l))});return function(n){return e.apply(this,arguments)}}())),l.Iu}function Td(l){return l.Tu||(l.Tu=function(e,n,d){const p=pn(e);return p.iu(),new jv(n,p.So,p.authCredentials,p.appCheckCredentials,p.M,d)}(l.datastore,l.asyncQueue,{Xr:hg.bind(null,l),eo:Mm.bind(null,l),eu:n_.bind(null,l),tu:sf.bind(null,l)}),l.mu.push(function(){var e=(0,ne.Z)(function*(n){n?(l.Tu.Fo(),yield fh(l)):(yield l.Tu.stop(),l.du.length>0&&(de("RemoteStore",`Stopping write stream with ${l.du.length} pending writes`),l.du=[]))});return function(n){return e.apply(this,arguments)}}())),l.Tu}class gh{constructor(e,n,d,p,_){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=d,this.op=p,this.removalCallback=_,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,n,d,p,_){const w=Date.now()+d,j=new gh(e,n,w,p,_);return j.start(d),j}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dn(Rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pu(l,e){if(ze("AsyncQueue",`${e}: ${l}`),Yu(l))return new dn(Rt.UNAVAILABLE,`${e}: ${l}`);throw l}class mh{constructor(e){this.comparator=e?(n,d)=>e(n,d)||Fn.comparator(n.key,d.key):(n,d)=>Fn.comparator(n.key,d.key),this.keyedMap=Lf(),this.sortedSet=new li(this.comparator)}static emptySet(e){return new mh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,d)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),d=e.sortedSet.getIterator();for(;n.hasNext();){const p=n.getNext().key,_=d.getNext().key;if(!p.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const d=new mh;return d.comparator=this.comparator,d.keyedMap=e,d.sortedSet=n,d}}class Om{constructor(){this.Eu=new li(Fn.comparator)}track(e){const n=e.doc.key,d=this.Eu.get(n);d?0!==e.type&&3===d.type?this.Eu=this.Eu.insert(n,e):3===e.type&&1!==d.type?this.Eu=this.Eu.insert(n,{type:d.type,doc:e.doc}):2===e.type&&2===d.type?this.Eu=this.Eu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===d.type?this.Eu=this.Eu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===d.type?this.Eu=this.Eu.remove(n):1===e.type&&2===d.type?this.Eu=this.Eu.insert(n,{type:1,doc:d.doc}):0===e.type&&1===d.type?this.Eu=this.Eu.insert(n,{type:2,doc:e.doc}):Qt():this.Eu=this.Eu.insert(n,e)}Au(){const e=[];return this.Eu.inorderTraversal((n,d)=>{e.push(d)}),e}}class Qu{constructor(e,n,d,p,_,w,j,le){this.query=e,this.docs=n,this.oldDocs=d,this.docChanges=p,this.mutatedKeys=_,this.fromCache=w,this.syncStateChanged=j,this.excludesMetadataChanges=le}static fromInitialDocuments(e,n,d,p){const _=[];return n.forEach(w=>{_.push({type:0,doc:w})}),new Qu(e,n,mh.emptySet(n),_,d,p,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,d=e.docChanges;if(n.length!==d.length)return!1;for(let p=0;p<n.length;p++)if(n[p].type!==d[p].type||!n[p].doc.isEqual(d[p].doc))return!1;return!0}}class Gv{constructor(){this.Ru=void 0,this.listeners=[]}}class Rm{constructor(){this.queries=new pu(e=>Op(e),kc),this.onlineState="Unknown",this.bu=new Set}}function gg(l,e){return ja.apply(this,arguments)}function ja(){return ja=(0,ne.Z)(function*(l,e){const n=pn(l),d=e.query;let p=!1,_=n.queries.get(d);if(_||(p=!0,_=new Gv),p)try{_.Ru=yield n.onListen(d)}catch(w){const j=Pu(w,`Initialization of query '${du(e.query)}' failed`);return void e.onError(j)}n.queries.set(d,_),_.listeners.push(e),e.Pu(n.onlineState),_.Ru&&e.Vu(_.Ru)&&Xu(n)}),ja.apply(this,arguments)}function mu(l,e){return vu.apply(this,arguments)}function vu(){return vu=(0,ne.Z)(function*(l,e){const n=pn(l),d=e.query;let p=!1;const _=n.queries.get(d);if(_){const w=_.listeners.indexOf(e);w>=0&&(_.listeners.splice(w,1),p=0===_.listeners.length)}if(p)return n.queries.delete(d),n.onUnlisten(d)}),vu.apply(this,arguments)}function $v(l,e){const n=pn(l);let d=!1;for(const p of e){const w=n.queries.get(p.query);if(w){for(const j of w.listeners)j.Vu(p)&&(d=!0);w.Ru=p}}d&&Xu(n)}function Wv(l,e,n){const d=pn(l),p=d.queries.get(e);if(p)for(const _ of p.listeners)_.onError(n);d.queries.delete(e)}function Xu(l){l.bu.forEach(e=>{e.next()})}class af{constructor(e,n,d){this.query=e,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=d||{}}Vu(e){if(!this.options.includeMetadataChanges){const d=[];for(const p of e.docChanges)3!==p.type&&d.push(p);e=new Qu(e.query,e.docs,e.oldDocs,d,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),n=!0):this.xu(e,this.onlineState)&&(this.Nu(e),n=!0),this.Du=e,n}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),n=!0),n}xu(e,n){return!e.fromCache||!(this.options.ku&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Qu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class zv{constructor(e,n){this.payload=e,this.byteLength=n}Mu(){return"metadata"in this.payload}}class Nm{constructor(e){this.M=e}wi(e){return Ku(this.M,e)}mi(e){return e.metadata.exists?$d(this.M,e.document,!1):qe.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return eo(e)}}class qv{constructor(e,n,d){this.Ou=e,this.localStore=n,this.M=d,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Lm(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const d=mi.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(d.get(d.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,d=new Nm(this.M);for(const p of e)if(p.metadata.queries){const _=d.wi(p.metadata.name);for(const w of p.metadata.queries){const j=(n.get(w)||qi()).add(_);n.set(w,j)}}return n}complete(){var e=this;return(0,ne.Z)(function*(){const n=yield function Jh(l,e,n,d){return Jp.apply(this,arguments)}(e.localStore,new Nm(e.M),e.documents,e.Ou.id),d=e.$u(e.documents);for(const p of e.queries)yield mm(e.localStore,p,d.get(p.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:n}})()}}function Lm(l){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:l.totalDocuments,totalBytes:l.totalBytes}}class Fm{constructor(e){this.key=e}}class Kv{constructor(e){this.key=e}}class Zv{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.current=!1,this.Ku=qi(),this.mutatedKeys=qi(),this.Gu=Rp(e),this.Qu=new mh(this.Gu)}get ju(){return this.Uu}Wu(e,n){const d=n?n.zu:new Om,p=n?n.Qu:this.Qu;let _=n?n.mutatedKeys:this.mutatedKeys,w=p,j=!1;const le="F"===this.query.limitType&&p.size===this.query.limit?p.last():null,me="L"===this.query.limitType&&p.size===this.query.limit?p.first():null;if(e.inorderTraversal((tt,yt)=>{const Wt=p.get(tt),bn=rc(this.query,yt)?yt:null,Tn=!!Wt&&this.mutatedKeys.has(Wt.key),rr=!!bn&&(bn.hasLocalMutations||this.mutatedKeys.has(bn.key)&&bn.hasCommittedMutations);let Gr=!1;Wt&&bn?Wt.data.isEqual(bn.data)?Tn!==rr&&(d.track({type:3,doc:bn}),Gr=!0):this.Hu(Wt,bn)||(d.track({type:2,doc:bn}),Gr=!0,(le&&this.Gu(bn,le)>0||me&&this.Gu(bn,me)<0)&&(j=!0)):!Wt&&bn?(d.track({type:0,doc:bn}),Gr=!0):Wt&&!bn&&(d.track({type:1,doc:Wt}),Gr=!0,(le||me)&&(j=!0)),Gr&&(bn?(w=w.add(bn),_=rr?_.add(tt):_.delete(tt)):(w=w.delete(tt),_=_.delete(tt)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const tt="F"===this.query.limitType?w.last():w.first();w=w.delete(tt.key),_=_.delete(tt.key),d.track({type:1,doc:tt})}return{Qu:w,zu:d,ii:j,mutatedKeys:_}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,d){const p=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const _=e.zu.Au();_.sort((me,tt)=>function(yt,Wt){const bn=Tn=>{switch(Tn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return bn(yt)-bn(Wt)}(me.type,tt.type)||this.Gu(me.doc,tt.doc)),this.Ju(d);const w=n?this.Yu():[],j=0===this.Ku.size&&this.current?1:0,le=j!==this.qu;return this.qu=j,0!==_.length||le?{snapshot:new Qu(this.query,e.Qu,p,_,e.mutatedKeys,0===j,le,!1),Xu:w}:{Xu:w}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Om,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=qi(),this.Qu.forEach(d=>{this.Zu(d.key)&&(this.Ku=this.Ku.add(d.key))});const n=[];return e.forEach(d=>{this.Ku.has(d)||n.push(new Kv(d))}),this.Ku.forEach(d=>{e.has(d)||n.push(new Fm(d))}),n}ta(e){this.Uu=e._i,this.Ku=qi();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ea(){return Qu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class r_{constructor(e,n,d){this.query=e,this.targetId=n,this.view=d}}class Yv{constructor(e){this.key=e,this.na=!1}}class U_{constructor(e,n,d,p,_,w){this.localStore=e,this.remoteStore=n,this.eventManager=d,this.sharedClientState=p,this.currentUser=_,this.maxConcurrentLimboResolutions=w,this.sa={},this.ia=new pu(j=>Op(j),kc),this.ra=new Map,this.oa=new Set,this.ua=new li(Fn.comparator),this.aa=new Map,this.ca=new eg,this.ha={},this.la=new Map,this.fa=Bc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function ip(l,e){return sp.apply(this,arguments)}function sp(){return sp=(0,ne.Z)(function*(l,e){const n=Id(l);let d,p;const _=n.ia.get(e);if(_)d=_.targetId,n.sharedClientState.addLocalQueryTarget(d),p=_.view.ea();else{const w=yield Xh(n.localStore,Iu(e));n.isPrimaryClient&&ep(n.remoteStore,w);const j=n.sharedClientState.addLocalQueryTarget(w.targetId);d=w.targetId,p=yield jm(n,e,d,"current"===j)}return p}),sp.apply(this,arguments)}function jm(l,e,n,d){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,ne.Z)(function*(l,e,n,d){l._a=(tt,yt,Wt)=>{return(bn=(0,ne.Z)(function*(Tn,rr,Gr,Ws){let zs=rr.view.Wu(Gr);zs.ii&&(zs=yield Ul(Tn.localStore,rr.query,!1).then(({documents:io})=>rr.view.Wu(io,zs)));const Ri=Ws&&Ws.targetChanges.get(rr.targetId),na=rr.view.applyChanges(zs,Tn.isPrimaryClient,Ri);return _g(Tn,rr.targetId,na.Xu),na.snapshot}),function(Tn,rr,Gr,Ws){return bn.apply(this,arguments)})(l,tt,yt,Wt);var bn};const p=yield Ul(l.localStore,e,!0),_=new Zv(e,p._i),w=_.Wu(p.documents),j=uc.createSynthesizedTargetChangeForCurrentChange(n,d&&"Offline"!==l.onlineState),le=_.applyChanges(w,l.isPrimaryClient,j);_g(l,n,le.Xu);const me=new r_(e,n,_);return l.ia.set(e,me),l.ra.has(n)?l.ra.get(n).push(e):l.ra.set(n,[e]),le.snapshot}),Qv.apply(this,arguments)}function B_(l,e){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,ne.Z)(function*(l,e){const n=pn(l),d=n.ia.get(e),p=n.ra.get(d.targetId);if(p.length>1)return n.ra.set(d.targetId,p.filter(_=>!kc(_,e))),void n.ia.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(d.targetId),n.sharedClientState.isActiveQueryTarget(d.targetId)||(yield ah(n.localStore,d.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(d.targetId),yd(n.remoteStore,d.targetId),Sd(n,d.targetId)}).catch(Gc))):(Sd(n,d.targetId),yield ah(n.localStore,d.targetId,!0))}),Ed.apply(this,arguments)}function mg(){return mg=(0,ne.Z)(function*(l,e,n){const d=Dd(l);try{const p=yield function(_,w){const j=pn(_),le=Vs.now(),me=w.reduce((yt,Wt)=>yt.add(Wt.key),qi());let tt;return j.persistence.runTransaction("Locally write mutations","readwrite",yt=>j.fi.Ks(yt,me).next(Wt=>{tt=Wt;const bn=[];for(const Tn of w){const rr=Lp(Tn,tt.get(Tn.key));null!=rr&&bn.push(new kl(Tn.key,rr,Se(rr.value.mapValue),wo.exists(!0)))}return j.Bs.addMutationBatch(yt,le,bn,w)})).then(yt=>(yt.applyToLocalDocumentSet(tt),{batchId:yt.batchId,changes:tt}))}(d.localStore,e);d.sharedClientState.addPendingMutation(p.batchId),function(_,w,j){let le=_.ha[_.currentUser.toKey()];le||(le=new li(Ur)),le=le.insert(w,j),_.ha[_.currentUser.toKey()]=le}(d,p.batchId,n),yield Wc(d,p.changes),yield fh(d.remoteStore)}catch(p){const _=Pu(p,"Failed to persist write");n.reject(_)}}),mg.apply(this,arguments)}function Um(l,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,ne.Z)(function*(l,e){const n=pn(l);try{const d=yield Xp(n.localStore,e);e.targetChanges.forEach((p,_)=>{const w=n.aa.get(_);w&&(Pn(p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size<=1),p.addedDocuments.size>0?w.na=!0:p.modifiedDocuments.size>0?Pn(w.na):p.removedDocuments.size>0&&(Pn(w.na),w.na=!1))}),yield Wc(n,d,e)}catch(d){yield Gc(d)}}),Jv.apply(this,arguments)}function Tl(l,e,n){const d=pn(l);if(d.isPrimaryClient&&0===n||!d.isPrimaryClient&&1===n){const p=[];d.ia.forEach((_,w)=>{const j=w.view.Pu(e);j.snapshot&&p.push(j.snapshot)}),function(_,w){const j=pn(_);j.onlineState=w;let le=!1;j.queries.forEach((me,tt)=>{for(const yt of tt.listeners)yt.Pu(w)&&(le=!0)}),le&&Xu(j)}(d.eventManager,e),p.length&&d.sa.zo(p),d.onlineState=e,d.isPrimaryClient&&d.sharedClientState.setOnlineState(e)}}function V_(l,e,n){return ey.apply(this,arguments)}function ey(){return ey=(0,ne.Z)(function*(l,e,n){const d=pn(l);d.sharedClientState.updateQueryState(e,"rejected",n);const p=d.aa.get(e),_=p&&p.key;if(_){let w=new li(Fn.comparator);w=w.insert(_,qe.newNoDocument(_,Dr.min()));const j=qi().add(_),le=new ac(Dr.min(),new Map,new vi(Ur),w,j);yield Um(d,le),d.ua=d.ua.remove(_),d.aa.delete(e),Hm(d)}else yield ah(d.localStore,e,!1).then(()=>Sd(d,e,n)).catch(Gc)}),ey.apply(this,arguments)}function ty(l,e){return vg.apply(this,arguments)}function vg(){return vg=(0,ne.Z)(function*(l,e){const n=pn(l),d=e.batch.batchId;try{const p=yield kv(n.localStore,e);Vm(n,d,null),op(n,d),n.sharedClientState.updateMutationState(d,"acknowledged"),yield Wc(n,p)}catch(p){yield Gc(p)}}),vg.apply(this,arguments)}function gc(l,e,n){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,ne.Z)(function*(l,e,n){const d=pn(l);try{const p=yield function(_,w){const j=pn(_);return j.persistence.runTransaction("Reject batch","readwrite-primary",le=>{let me;return j.Bs.lookupMutationBatch(le,w).next(tt=>(Pn(null!==tt),me=tt.keys(),j.Bs.removeMutationBatch(le,tt))).next(()=>j.Bs.performConsistencyCheck(le)).next(()=>j.fi.Ks(le,me))})}(d.localStore,e);Vm(d,e,n),op(d,e),d.sharedClientState.updateMutationState(e,"rejected",n),yield Wc(d,p)}catch(p){yield Gc(p)}}),Bm.apply(this,arguments)}function yg(){return yg=(0,ne.Z)(function*(l,e){const n=pn(l);_l(n.remoteStore)||de("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const d=yield function(_){const w=pn(_);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",j=>w.Bs.getHighestUnacknowledgedBatchId(j))}(n.localStore);if(-1===d)return void e.resolve();const p=n.la.get(d)||[];p.push(e),n.la.set(d,p)}catch(d){const p=Pu(d,"Initialization of waitForPendingWrites() operation failed");e.reject(p)}}),yg.apply(this,arguments)}function op(l,e){(l.la.get(e)||[]).forEach(n=>{n.resolve()}),l.la.delete(e)}function Vm(l,e,n){const d=pn(l);let p=d.ha[d.currentUser.toKey()];if(p){const _=p.get(e);_&&(n?_.reject(n):_.resolve(),p=p.remove(e)),d.ha[d.currentUser.toKey()]=p}}function Sd(l,e,n=null){l.sharedClientState.removeLocalQueryTarget(e);for(const d of l.ra.get(e))l.ia.delete(d),n&&l.sa.wa(d,n);l.ra.delete(e),l.isPrimaryClient&&l.ca.vi(e).forEach(d=>{l.ca.containsKey(d)||ny(l,d)})}function ny(l,e){l.oa.delete(e.path.canonicalString());const n=l.ua.get(e);null!==n&&(yd(l.remoteStore,n),l.ua=l.ua.remove(e),l.aa.delete(n),Hm(l))}function _g(l,e,n){for(const d of n)d instanceof Fm?(l.ca.addReference(d.key,e),i_(l,d)):d instanceof Kv?(de("SyncEngine","Document no longer in limbo: "+d.key),l.ca.removeReference(d.key,e),l.ca.containsKey(d.key)||ny(l,d.key)):Qt()}function i_(l,e){const n=e.key,d=n.path.canonicalString();l.ua.get(n)||l.oa.has(d)||(de("SyncEngine","New document in limbo: "+n),l.oa.add(d),Hm(l))}function Hm(l){for(;l.oa.size>0&&l.ua.size<l.maxConcurrentLimboResolutions;){const e=l.oa.values().next().value;l.oa.delete(e);const n=new Fn(mi.fromString(e)),d=l.fa.next();l.aa.set(d,new Yv(n)),l.ua=l.ua.insert(n,d),ep(l.remoteStore,new dc(Iu(nc(n.path)),d,2,Bs.A))}}function Wc(l,e,n){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,ne.Z)(function*(l,e,n){const d=pn(l),p=[],_=[],w=[];var j;d.ia.isEmpty()||(d.ia.forEach((j,le)=>{w.push(d._a(le,e,n).then(me=>{if(me){d.isPrimaryClient&&d.sharedClientState.updateQueryState(le.targetId,me.fromCache?"not-current":"current"),p.push(me);const tt=Kp.Ys(le.targetId,me);_.push(tt)}}))}),yield Promise.all(w),d.sa.zo(p),yield(j=(0,ne.Z)(function*(le,me){const tt=pn(le);try{yield tt.persistence.runTransaction("notifyLocalViewChanges","readwrite",yt=>Xt.forEach(me,Wt=>Xt.forEach(Wt.Hs,bn=>tt.persistence.referenceDelegate.addReference(yt,Wt.targetId,bn)).next(()=>Xt.forEach(Wt.Js,bn=>tt.persistence.referenceDelegate.removeReference(yt,Wt.targetId,bn)))))}catch(yt){if(!Yu(yt))throw yt;de("LocalStore","Failed to update sequence numbers: "+yt)}for(const yt of me){const Wt=yt.targetId;if(!yt.fromCache){const bn=tt.ui.get(Wt),rr=bn.withLastLimboFreeSnapshotVersion(bn.snapshotVersion);tt.ui=tt.ui.insert(Wt,rr)}}}),function(le,me){return j.apply(this,arguments)})(d.localStore,_))}),Gm.apply(this,arguments)}function ap(l,e){return wd.apply(this,arguments)}function wd(){return wd=(0,ne.Z)(function*(l,e){const n=pn(l);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const d=yield Qp(n.localStore,e);n.currentUser=e,(p=n).la.forEach(w=>{w.forEach(j=>{j.reject(new dn(Rt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.la.clear(),n.sharedClientState.handleUserChange(e,d.removedBatchIds,d.addedBatchIds),yield Wc(n,d.di)}var p}),wd.apply(this,arguments)}function s_(l,e){const n=pn(l),d=n.aa.get(e);if(d&&d.na)return qi().add(d.key);{let p=qi();const _=n.ra.get(e);if(!_)return p;for(const w of _){const j=n.ia.get(w);p=p.unionWith(j.view.ju)}return p}}function up(l,e){return $m.apply(this,arguments)}function $m(){return $m=(0,ne.Z)(function*(l,e){const n=pn(l),d=yield Ul(n.localStore,e.query,!0),p=e.view.ta(d);return n.isPrimaryClient&&_g(n,e.targetId,p.Xu),p}),$m.apply(this,arguments)}function Ua(l,e){return uf.apply(this,arguments)}function uf(){return uf=(0,ne.Z)(function*(l,e){const n=pn(l);return lh(n.localStore,e).then(d=>Wc(n,d))}),uf.apply(this,arguments)}function Hl(l,e,n,d){return vh.apply(this,arguments)}function vh(){return vh=(0,ne.Z)(function*(l,e,n,d){const p=pn(l),_=yield function(w,j){const le=pn(w),me=pn(le.Bs);return le.persistence.runTransaction("Lookup mutation documents","readonly",tt=>me.fn(tt,j).next(yt=>yt?le.fi.Ks(tt,yt):Xt.resolve(null)))}(p.localStore,e);var j;null!==_?("pending"===n?yield fh(p.remoteStore):"acknowledged"===n||"rejected"===n?(Vm(p,e,d||null),op(p,e),j=e,pn(pn(p.localStore).Bs)._n(j)):Qt(),yield Wc(p,_)):de("SyncEngine","Cannot apply mutation batch with id: "+e)}),vh.apply(this,arguments)}function zc(){return zc=(0,ne.Z)(function*(l,e){const n=pn(l);if(Id(n),Dd(n),!0===e&&!0!==n.da){const d=n.sharedClientState.getAllActiveQueryTargets(),p=yield lp(n,d.toArray());n.da=!0,yield rp(n.remoteStore,!0);for(const _ of p)ep(n.remoteStore,_)}else if(!1===e&&!1!==n.da){const d=[];let p=Promise.resolve();n.ra.forEach((_,w)=>{n.sharedClientState.isLocalQueryTarget(w)?d.push(w):p=p.then(()=>(Sd(n,w),ah(n.localStore,w,!0))),yd(n.remoteStore,w)}),yield p,yield lp(n,d),function(_){const w=pn(_);w.aa.forEach((j,le)=>{yd(w.remoteStore,le)}),w.ca.Si(),w.aa=new Map,w.ua=new li(Fn.comparator)}(n),n.da=!1,yield rp(n.remoteStore,!1)}}),zc.apply(this,arguments)}function lp(l,e,n){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,ne.Z)(function*(l,e,n){const d=pn(l),p=[],_=[];for(const w of e){let j;const le=d.ra.get(w);if(le&&0!==le.length){j=yield Xh(d.localStore,Iu(le[0]));for(const me of le){const tt=d.ia.get(me),yt=yield up(d,tt);yt.snapshot&&_.push(yt.snapshot)}}else{const me=yield Vo(d.localStore,w);j=yield Xh(d.localStore,me),yield jm(d,cp(me),w,!1)}p.push(j)}return d.sa.zo(_),p}),Ou.apply(this,arguments)}function cp(l){return Dc(l.path,l.collectionGroup,l.orderBy,l.filters,l.limit,"F",l.startAt,l.endAt)}function lf(l){const e=pn(l);return pn(pn(e.localStore).persistence).Fs()}function cf(l,e,n,d){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,ne.Z)(function*(l,e,n,d){const p=pn(l);if(p.da)return void de("SyncEngine","Ignoring unexpected query state notification.");const _=p.ra.get(e);if(_&&_.length>0)switch(n){case"current":case"not-current":{const w=yield lh(p.localStore,zu(_[0])),j=ac.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield Wc(p,w,j);break}case"rejected":yield ah(p.localStore,e,!0),Sd(p,e,d);break;default:Qt()}}),Cd.apply(this,arguments)}function xd(l,e,n){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,ne.Z)(function*(l,e,n){const d=Id(l);if(d.da){for(const p of e){if(d.ra.has(p)){de("SyncEngine","Adding an already active target "+p);continue}const _=yield Vo(d.localStore,p),w=yield Xh(d.localStore,_);yield jm(d,cp(_),w.targetId,!1),ep(d.remoteStore,w)}for(const p of n)d.ra.has(p)&&(yield ah(d.localStore,p,!1).then(()=>{yd(d.remoteStore,p),Sd(d,p)}).catch(Gc))}}),Gl.apply(this,arguments)}function Id(l){const e=pn(l);return e.remoteStore.remoteSyncer.applyRemoteEvent=Um.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V_.bind(null,e),e.sa.zo=$v.bind(null,e.eventManager),e.sa.wa=Wv.bind(null,e.eventManager),e}function Dd(l){const e=pn(l);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ty.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gc.bind(null,e),e}class Ad{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,ne.Z)(function*(){n.M=ef(e.databaseInfo.databaseId),n.sharedClientState=n.ga(e),n.persistence=n.ya(e),yield n.persistence.start(),n.gcScheduler=n.pa(e),n.localStore=n.Ia(e)})()}pa(e){return null}Ia(e){return Yp(this.persistence,new Zp,e.initialUser,this.M)}ya(e){return new Tm(tg.Yi,this.M)}ga(e){return new Sm}terminate(){var e=this;return(0,ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bg extends Ad{constructor(e,n,d){super(),this.Ta=e,this.cacheSizeBytes=n,this.forceOwnership=d,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,d=this;return(0,ne.Z)(function*(){yield n().call(d,e),yield d.Ta.initialize(d,e),yield Dd(d.Ta.syncEngine),yield fh(d.Ta.remoteStore),yield d.persistence.Ts(()=>(d.gcScheduler&&!d.gcScheduler.started&&d.gcScheduler.start(d.localStore),Promise.resolve()))})()}Ia(e){return Yp(this.persistence,new Zp,e.initialUser,this.M)}pa(e){return new L_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const n=Qf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),d=void 0!==this.cacheSizeBytes?La.withCacheSize(this.cacheSizeBytes):La.DEFAULT;return new pm(this.synchronizeTabs,n,e.clientId,d,e.asyncQueue,sg(),og(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Sm}}class ry extends bg{constructor(e,n){super(e,n,!1),this.Ta=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,d=this;return(0,ne.Z)(function*(){yield n().call(d,e);const p=d.Ta.syncEngine;d.sharedClientState instanceof rg&&(d.sharedClientState.syncEngine={$r:Hl.bind(null,p),Br:cf.bind(null,p),Lr:xd.bind(null,p),Fs:lf.bind(null,p),Fr:Ua.bind(null,p)},yield d.sharedClientState.start()),yield d.persistence.Ts(function(){var _=(0,ne.Z)(function*(w){yield function Qa(l,e){return zc.apply(this,arguments)}(d.Ta.syncEngine,w),d.gcScheduler&&(w&&!d.gcScheduler.started?d.gcScheduler.start(d.localStore):w||d.gcScheduler.stop())});return function(w){return _.apply(this,arguments)}}())})()}ga(e){const n=sg();if(!rg.vt(n))throw new dn(Rt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const d=Qf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rg(n,e.asyncQueue,d,e.clientId,e.initialUser)}}class Tg{initialize(e,n){var d=this;return(0,ne.Z)(function*(){d.localStore||(d.localStore=e.localStore,d.sharedClientState=e.sharedClientState,d.datastore=d.createDatastore(n),d.remoteStore=d.createRemoteStore(n),d.eventManager=d.createEventManager(n),d.syncEngine=d.createSyncEngine(n,!e.synchronizeTabs),d.sharedClientState.onlineStateHandler=p=>Tl(d.syncEngine,p,1),d.remoteStore.remoteSyncer.handleCredentialChange=ap.bind(null,d.syncEngine),yield rp(d.remoteStore,d.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Rm}createDatastore(e){const n=ef(e.databaseInfo.databaseId),d=new Nv(e.databaseInfo);return new e_(e.authCredentials,e.appCheckCredentials,d,n)}createRemoteStore(e){return n=this.localStore,d=this.datastore,p=e.asyncQueue,_=j=>Tl(this.syncEngine,j,0),w=wm.vt()?new wm:new ig,new xm(n,d,p,_,w);var n,d,p,_,w}createSyncEngine(e,n){return function(d,p,_,w,j,le,me){const tt=new U_(d,p,_,w,j,le);return me&&(tt.da=!0),tt}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,ne.Z)(function*(n){const d=pn(n);de("RemoteStore","RemoteStore shutting down."),d.wu.add(5),yield $c(d),d.gu.shutdown(),d.yu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function Eg(l,e=10240){let n=0;return{read:()=>(0,ne.Z)(function*(){if(n<l.byteLength){const d={value:l.slice(n,n+e),done:!1};return n+=e,d}return{done:!0}})(),cancel:()=>(0,ne.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class iy{constructor(e,n){this.Ra=e,this.M=n,this.metadata=new gs,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(d=>{d&&d.Mu()?this.metadata.resolve(d.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==d?void 0:d.payload)}`))},d=>this.metadata.reject(d))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ne.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ne.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ne.Z)(function*(){const n=yield e.Va();if(null===n)return null;const d=e.ba.decode(n),p=Number(d);isNaN(p)&&e.va(`length string (${d}) is not valid number`);const _=yield e.Sa(p);return new zv(JSON.parse(_),n.length+p)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ne.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const n=e.Da();n<0&&e.va("Reached the end of bundle when a length string is expected.");const d=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),d})()}Sa(e){var n=this;return(0,ne.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ca())&&n.va("Reached the end of bundle when more is expected.");const d=n.ba.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),d})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ne.Z)(function*(){const n=yield e.Ra.read();if(!n.done){const d=new Uint8Array(e.buffer.length+n.value.length);d.set(e.buffer),d.set(n.value,e.buffer.length),e.buffer=d}return n.done})()}}class sy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,ne.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new dn(Rt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const d=yield(p=(0,ne.Z)(function*(_,w){const j=pn(_),le=Rc(j.M)+"/documents",me={documents:w.map(bn=>Ol(j.M,bn))},tt=yield j._o("BatchGetDocuments",le,me),yt=new Map;tt.forEach(bn=>{const Tn=function Uf(l,e){return"found"in e?function(n,d){Pn(!!d.found);const p=Ku(n,d.found.name),_=eo(d.found.updateTime),w=new Q({mapValue:{fields:d.found.fields}});return qe.newFoundDocument(p,_,w)}(l,e):"missing"in e?function(n,d){Pn(!!d.missing),Pn(!!d.readTime);const p=Ku(n,d.missing),_=eo(d.readTime);return qe.newNoDocument(p,_)}(l,e):Qt()}(j.M,bn);yt.set(Tn.key.toString(),Tn)});const Wt=[];return w.forEach(bn=>{const Tn=yt.get(bn.toString());Pn(!!Tn),Wt.push(Tn)}),Wt}),function(_,w){return p.apply(this,arguments)})(n.datastore,e);var p;return d.forEach(p=>n.recordVersion(p)),d})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(d){this.lastWriteError=d}this.writtenDocs.add(e.toString())}delete(e){this.write(new Du(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var d;e.mutations.forEach(d=>{n.delete(d.key.toString())}),n.forEach((d,p)=>{const _=Fn.fromPath(p);e.mutations.push(new jh(_,e.precondition(_)))}),yield(d=(0,ne.Z)(function*(p,_){const w=pn(p),j=Rc(w.M)+"/documents",le={writes:_.map(me=>vl(w.M,me))};yield w.co("Commit",j,le)}),function(p,_){return d.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Qt();n=Dr.min()}const d=this.readVersions.get(e.key.toString());if(d){if(!n.isEqual(d))throw new dn(Rt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?wo.updateTime(n):wo.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Dr.min()))throw new dn(Rt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wo.updateTime(n)}return wo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oy{constructor(e,n,d,p,_){this.asyncQueue=e,this.datastore=n,this.options=d,this.updateFunction=p,this.deferred=_,this.xa=d.maxAttempts,this.No=new Cm(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ne.Z)(function*(){const n=new sy(e.datastore),d=e.ka(n);d&&d.then(p=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(p)}).catch(_=>{e.Ma(_)}))}).catch(p=>{e.Ma(p)})}))}ka(e){try{const n=this.updateFunction(e);return!ua(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||!Hd(n)}return!1}}class ay{constructor(e,n,d,p){var _=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=d,this.databaseInfo=p,this.user=F.UNAUTHENTICATED,this.clientId=Tu.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(d,function(){var w=(0,ne.Z)(function*(j){de("FirestoreClient","Received user=",j.uid),yield _.authCredentialListener(j),_.user=j});return function(j){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(d,w=>(de("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new dn(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(d){const p=Pu(d,"Failed to shutdown persistence");n.reject(p)}})),n.promise}}function uy(l,e){return yh.apply(this,arguments)}function yh(){return yh=(0,ne.Z)(function*(l,e){l.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=yield l.getConfiguration();yield e.initialize(n);let d=n.initialUser;l.setCredentialChangeListener(function(){var p=(0,ne.Z)(function*(_){d.isEqual(_)||(yield Qp(e.localStore,_),d=_)});return function(_){return p.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>l.terminate()),l.offlineComponents=e}),yh.apply(this,arguments)}function Sg(l,e){return wg.apply(this,arguments)}function wg(){return wg=(0,ne.Z)(function*(l,e){l.asyncQueue.verifyOperationInProgress();const n=yield hf(l);de("FirestoreClient","Initializing OnlineComponentProvider");const d=yield l.getConfiguration();yield e.initialize(n,d),l.setCredentialChangeListener(p=>Pm(e.remoteStore,p)),l.setAppCheckTokenChangeListener((p,_)=>Pm(e.remoteStore,_)),l.onlineComponents=e}),wg.apply(this,arguments)}function hf(l){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,ne.Z)(function*(l){return l.offlineComponents||(de("FirestoreClient","Using default OfflineComponentProvider"),yield uy(l,new Ad)),l.offlineComponents}),Wm.apply(this,arguments)}function Cg(l){return xg.apply(this,arguments)}function xg(){return xg=(0,ne.Z)(function*(l){return l.onlineComponents||(de("FirestoreClient","Using default OnlineComponentProvider"),yield Sg(l,new Tg)),l.onlineComponents}),xg.apply(this,arguments)}function ly(l){return hf(l).then(e=>e.persistence)}function Ig(l){return hf(l).then(e=>e.localStore)}function cy(l){return Cg(l).then(e=>e.remoteStore)}function Dg(l){return Cg(l).then(e=>e.syncEngine)}function hp(l){return zm.apply(this,arguments)}function zm(){return zm=(0,ne.Z)(function*(l){const e=yield Cg(l),n=e.eventManager;return n.onListen=ip.bind(null,e.syncEngine),n.onUnlisten=B_.bind(null,e.syncEngine),n}),zm.apply(this,arguments)}function dy(l,e,n={}){const d=new gs;return l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(p,_,w,j,le){const me=new dp({next:yt=>{_.enqueueAndForget(()=>mu(p,tt));const Wt=yt.docs.has(w);!Wt&&yt.fromCache?le.reject(new dn(Rt.UNAVAILABLE,"Failed to get document because the client is offline.")):Wt&&yt.fromCache&&j&&"server"===j.source?le.reject(new dn(Rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):le.resolve(yt)},error:yt=>le.reject(yt)}),tt=new af(nc(w.path),me,{includeMetadataChanges:!0,ku:!0});return gg(p,tt)}(yield hp(l),l.asyncQueue,e,n,d)})),d.promise}function a_(l,e,n={}){const d=new gs;return l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(p,_,w,j,le){const me=new dp({next:yt=>{_.enqueueAndForget(()=>mu(p,tt)),yt.fromCache&&"server"===j.source?le.reject(new dn(Rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):le.resolve(yt)},error:yt=>le.reject(yt)}),tt=new af(w,me,{includeMetadataChanges:!0,ku:!0});return gg(p,tt)}(yield hp(l),l.asyncQueue,e,n,d)})),d.promise}const _h=new Map;function Ag(l,e,n){if(!n)throw new dn(Rt.INVALID_ARGUMENT,`Function ${l}() cannot be called with an empty ${e}.`)}function kg(l,e,n,d){if(!0===e&&!0===d)throw new dn(Rt.INVALID_ARGUMENT,`${l} and ${n} cannot be used together.`)}function fy(l){if(!Fn.isDocumentKey(l))throw new dn(Rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${l} has ${l.length}.`)}function Zm(l){if(Fn.isDocumentKey(l))throw new dn(Rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${l} has ${l.length}.`)}function bh(l){if(void 0===l)return"undefined";if(null===l)return"null";if("string"==typeof l)return l.length>20&&(l=`${l.substring(0,20)}...`),JSON.stringify(l);if("number"==typeof l||"boolean"==typeof l)return""+l;if("object"==typeof l){if(l instanceof Array)return"an array";{const e=(n=l).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof l?"a function":Qt()}function Bi(l,e){if("_delegate"in l&&(l=l._delegate),!(l instanceof e)){if(e.name===l.constructor.name)throw new dn(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bh(l);throw new dn(Rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return l}function Ym(l,e){if(e<=0)throw new dn(Rt.INVALID_ARGUMENT,`Function ${l}() requires a positive number, but it was: ${e}.`)}class py{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new dn(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new dn(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,kg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fp{constructor(e,n,d){this._authCredentials=n,this._appCheckCredentials=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new py({}),this._settingsFrozen=!1,e instanceof aa?this._databaseId=e:(this._app=e,this._databaseId=function(p){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new dn(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aa(p.options.projectId)}(e))}get app(){if(!this._app)throw new dn(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new dn(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new py(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new xl;switch(n.type){case"gapi":const d=n.client;return Pn(!("object"!=typeof d||null===d||!d.auth||!d.auth.getAuthHeaderValueForFirstParty)),new Bu(d,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new dn(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=_h.get(e);n&&(de("ComponentProvider","Removing Datastore"),_h.delete(e),n.terminate())}(this),Promise.resolve()}}class ro{constructor(e,n,d){this.converter=n,this._key=d,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $l(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ro(this.firestore,e,this._key)}}class Xa{constructor(e,n,d){this.converter=n,this._query=d,this.type="query",this.firestore=e}withConverter(e){return new Xa(this.firestore,e,this._query)}}class $l extends Xa{constructor(e,n,d){super(e,n,nc(d)),this._path=d,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ro(this.firestore,null,new Fn(e))}withConverter(e){return new $l(this.firestore,e,this._path)}}function Mg(l,e,...n){if(l=(0,xt.m9)(l),Ag("collection","path",e),l instanceof fp){const d=mi.fromString(e,...n);return Zm(d),new $l(l,null,d)}{if(!(l instanceof ro||l instanceof $l))throw new dn(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const d=l._path.child(mi.fromString(e,...n));return Zm(d),new $l(l.firestore,null,d)}}function pp(l,e,...n){if(l=(0,xt.m9)(l),1===arguments.length&&(e=Tu.R()),Ag("doc","path",e),l instanceof fp){const d=mi.fromString(e,...n);return fy(d),new ro(l,null,new Fn(d))}{if(!(l instanceof ro||l instanceof $l))throw new dn(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const d=l._path.child(mi.fromString(e,...n));return fy(d),new ro(l.firestore,l instanceof $l?l.converter:null,new Fn(d))}}function gp(l,e){return l=(0,xt.m9)(l),e=(0,xt.m9)(e),(l instanceof ro||l instanceof $l)&&(e instanceof ro||e instanceof $l)&&l.firestore===e.firestore&&l.path===e.path&&l.converter===e.converter}function $_(l,e){return l=(0,xt.m9)(l),e=(0,xt.m9)(e),l instanceof Xa&&e instanceof Xa&&l.firestore===e.firestore&&kc(l._query,e._query)&&l.converter===e.converter}class Pg{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Cm(this,"async_queue_retry"),this.Qa=()=>{const n=og();n&&de("AsyncQueue","Visibility state changed to "+n.visibilityState),this.No.Po()};const e=og();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const n=og();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const n=new gs;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ne.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(n){if(!Yu(n))throw n;de("AsyncQueue","Operation failed with retryable error: "+n)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const n=this.Fa.then(()=>(this.qa=!0,e().catch(d=>{throw this.Ua=d,this.qa=!1,ze("INTERNAL UNHANDLED ERROR: ",function(_){let w=_.message||"";return _.stack&&(w=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),w}(d)),d}).then(d=>(this.qa=!1,d))));return this.Fa=n,n}enqueueAfterDelay(e,n,d){this.ja(),this.Ga.indexOf(e)>-1&&(n=0);const p=gh.createAndSchedule(this,e,n,d,_=>this.Ha(_));return this.La.push(p),p}ja(){this.Ua&&Qt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ne.Z)(function*(){let n;do{n=e.Fa,yield n}while(n!==e.Fa)})()}Ya(e){for(const n of this.La)if(n.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((n,d)=>n.targetTimeMs-d.targetTimeMs);for(const n of this.La)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const n=this.La.indexOf(e);this.La.splice(n,1)}}function g(l){return function(e,n){if("object"!=typeof e||null===e)return!1;const d=e;for(const p of["next","error","complete"])if(p in d&&"function"==typeof d[p])return!0;return!1}(l)}class u{constructor(){this._progressObserver={},this._taskCompletionResolver=new gs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,d){this._progressObserver={next:e,error:n,complete:d}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class o extends fp{constructor(e,n,d){super(e,n,d),this.type="firestore",this._queue=new Pg,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||v(this),this._firestoreClient.terminate()}}function h(l){return l._firestoreClient||v(l),l._firestoreClient.verifyNotTerminated(),l._firestoreClient}function v(l){var e;const n=l._freezeSettings(),d=(_=(null===(e=l._app)||void 0===e?void 0:e.options.appId)||"",new Cc(l._databaseId,_,l._persistenceKey,(j=n).host,j.ssl,j.experimentalForceLongPolling,j.experimentalAutoDetectLongPolling,j.useFetchStreams));var _,j;l._firestoreClient=new ay(l._authCredentials,l._appCheckCredentials,l._queue,d)}function R(l,e,n){const d=new gs;return l.asyncQueue.enqueue((0,ne.Z)(function*(){try{yield uy(l,n),yield Sg(l,e),d.resolve()}catch(p){if(!("FirebaseError"===(_=p).name?_.code===Rt.FAILED_PRECONDITION||_.code===Rt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&_ instanceof DOMException)||22===_.code||20===_.code||11===_.code))throw p;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+p),d.reject(p)}var _})).then(()=>d.promise)}function vn(l){if(l._initialized||l._terminated)throw new dn(Rt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kn{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new dn(Rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ts(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tn(ho.fromBase64String(e))}catch(n){throw new dn(Rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tn(ho.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wn{constructor(e){this._methodName=e}}class un{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new dn(Rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new dn(Rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ur(this._lat,e._lat)||Ur(this._long,e._long)}}const ln=/^__.*__$/;class In{constructor(e,n,d){this.data=e,this.fieldMask=n,this.fieldTransforms=d}toMutation(e,n){return null!==this.fieldMask?new kl(e,this.data,this.fieldMask,n,this.fieldTransforms):new oc(e,this.data,n,this.fieldTransforms)}}class gn{constructor(e,n,d){this.data=e,this.fieldMask=n,this.fieldTransforms=d}toMutation(e,n){return new kl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Er(l){switch(l){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class Wn{constructor(e,n,d,p,_,w){this.settings=e,this.databaseId=n,this.M=d,this.ignoreUndefinedProperties=p,void 0===_&&this.tc(),this.fieldTransforms=_||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Wn(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var n;const d=null===(n=this.path)||void 0===n?void 0:n.child(e),p=this.nc({path:d,ic:!1});return p.rc(e),p}oc(e){var n;const d=null===(n=this.path)||void 0===n?void 0:n.child(e),p=this.nc({path:d,ic:!1});return p.tc(),p}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return yp(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Er(this.ec)&&ln.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Vr{constructor(e,n,d){this.databaseId=e,this.ignoreUndefinedProperties=n,this.M=d||ef(e)}lc(e,n,d,p=!1){return new Wn({ec:e,methodName:n,hc:d,path:ts.emptyPath(),ic:!1,cc:p},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ki(l){const e=l._freezeSettings(),n=ef(l._databaseId);return new Vr(l._databaseId,!!e.ignoreUndefinedProperties,n)}function Ts(l,e,n,d,p,_={}){const w=l.lc(_.merge||_.mergeFields?2:0,e,n,p);$s("Data must be an object, but it was:",w,d);const j=El(d,w);let le,me;if(_.merge)le=new Yi(w.fieldMask),me=w.fieldTransforms;else if(_.mergeFields){const tt=[];for(const yt of _.mergeFields){const Wt=Kc(e,yt,n);if(!w.contains(Wt))throw new dn(Rt.INVALID_ARGUMENT,`Field '${Wt}' is specified in your field mask but missing from your input data.`);gy(tt,Wt)||tt.push(Wt)}le=new Yi(tt),me=w.fieldTransforms.filter(yt=>le.covers(yt.field))}else le=null,me=w.fieldTransforms;return new In(new Q(j),le,me)}class Gs extends wn{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gs}}function Lo(l,e,n){return new Wn({ec:3,hc:e.settings.hc,methodName:l._methodName,ic:n},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Rs extends wn{_toFieldTransform(e){return new od(e.path,new Mc)}isEqual(e){return e instanceof Rs}}class Ba extends wn{constructor(e,n){super(e),this.fc=n}_toFieldTransform(e){const n=Lo(this,e,!0),d=this.fc.map(_=>Ju(_,n)),p=new Bd(d);return new od(e.path,p)}isEqual(e){return this===e}}class ms extends wn{constructor(e,n){super(e),this.fc=n}_toFieldTransform(e){const n=Lo(this,e,!0),d=this.fc.map(_=>Ju(_,n)),p=new fu(d);return new od(e.path,p)}isEqual(e){return this===e}}class mp extends wn{constructor(e,n){super(e),this.dc=n}_toFieldTransform(e){const n=new da(e.M,Cf(e.M,this.dc));return new od(e.path,n)}isEqual(e){return this===e}}function yu(l,e,n,d){const p=l.lc(1,e,n);$s("Data must be an object, but it was:",p,d);const _=[],w=Q.empty();Js(d,(le,me)=>{const tt=vp(e,le,n);me=(0,xt.m9)(me);const yt=p.oc(tt);if(me instanceof Gs)_.push(tt);else{const Wt=Ju(me,yt);null!=Wt&&(_.push(tt),w.set(tt,Wt))}});const j=new Yi(_);return new gn(w,j,p.fieldTransforms)}function mc(l,e,n,d,p,_){const w=l.lc(1,e,n),j=[Kc(e,d,n)],le=[p];if(_.length%2!=0)throw new dn(Rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Wt=0;Wt<_.length;Wt+=2)j.push(Kc(e,_[Wt])),le.push(_[Wt+1]);const me=[],tt=Q.empty();for(let Wt=j.length-1;Wt>=0;--Wt)if(!gy(me,j[Wt])){const bn=j[Wt];let Tn=le[Wt];Tn=(0,xt.m9)(Tn);const rr=w.oc(bn);if(Tn instanceof Gs)me.push(bn);else{const Gr=Ju(Tn,rr);null!=Gr&&(me.push(bn),tt.set(bn,Gr))}}const yt=new Yi(me);return new gn(tt,yt,w.fieldTransforms)}function qc(l,e,n,d=!1){return Ju(n,l.lc(d?4:3,e))}function Ju(l,e){if(Th(l=(0,xt.m9)(l)))return $s("Unsupported field value:",e,l),El(l,e);if(l instanceof wn)return function(n,d){if(!Er(d.ec))throw d.ac(`${n._methodName}() can only be used with update() and set()`);if(!d.path)throw d.ac(`${n._methodName}() is not currently supported inside arrays`);const p=n._toFieldTransform(d);p&&d.fieldTransforms.push(p)}(l,e),null;if(void 0===l&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),l instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(n,d){const p=[];let _=0;for(const w of n){let j=Ju(w,d.uc(_));null==j&&(j={nullValue:"NULL_VALUE"}),p.push(j),_++}return{arrayValue:{values:p}}}(l,e)}return function(n,d){if(null===(n=(0,xt.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return Cf(d.M,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const p=Vs.fromDate(n);return{timestampValue:ml(d.M,p)}}if(n instanceof Vs){const p=new Vs(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ml(d.M,p)}}if(n instanceof un)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof tn)return{bytesValue:ld(d.M,n._byteString)};if(n instanceof ro){const p=d.databaseId,_=n.firestore._databaseId;if(!_.isEqual(p))throw d.ac(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:Vh(n.firestore._databaseId||d.databaseId,n._key.path)}}throw d.ac(`Unsupported field value: ${bh(n)}`)}(l,e)}function El(l,e){const n={};return wc(l)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(l,(d,p)=>{const _=Ju(p,e.sc(d));null!=_&&(n[d]=_)}),{mapValue:{fields:n}}}function Th(l){return!("object"!=typeof l||null===l||l instanceof Array||l instanceof Date||l instanceof Vs||l instanceof un||l instanceof tn||l instanceof ro||l instanceof wn)}function $s(l,e,n){if(!Th(n)||"object"!=typeof(d=n)||null===d||Object.getPrototypeOf(d)!==Object.prototype&&null!==Object.getPrototypeOf(d)){const d=bh(n);throw e.ac("an object"===d?l+" a custom object":l+" "+d)}var d}function Kc(l,e,n){if((e=(0,xt.m9)(e))instanceof kn)return e._internalPath;if("string"==typeof e)return vp(l,e);throw yp("Field path arguments must be of type string or ",l,!1,void 0,n)}const d_=new RegExp("[~\\*/\\[\\]]");function vp(l,e,n){if(e.search(d_)>=0)throw yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,l,!1,void 0,n);try{return new kn(...e.split("."))._internalPath}catch(d){throw yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,l,!1,void 0,n)}}function yp(l,e,n,d,p){const _=d&&!d.isEmpty(),w=void 0!==p;let j=`Function ${e}() called with invalid data`;n&&(j+=" (via `toFirestore()`)"),j+=". ";let le="";return(_||w)&&(le+=" (found",_&&(le+=` in field ${d}`),w&&(le+=` in document ${p}`),le+=")"),new dn(Rt.INVALID_ARGUMENT,j+l+le)}function gy(l,e){return l.some(n=>n.isEqual(e))}class ff{constructor(e,n,d,p,_){this._firestore=e,this._userDataWriter=n,this._key=d,this._document=p,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new ro(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new my(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(el("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class my extends ff{data(){return super.data()}}function el(l,e){return"string"==typeof e?vp(l,e):e instanceof kn?e._internalPath:e._delegate._internalPath}class Ru{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wl extends ff{constructor(e,n,d,p,_,w){super(e,n,d,p,w),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const d=this._document.data.field(el("DocumentSnapshot.get",e));if(null!==d)return this._userDataWriter.convertValue(d,n.serverTimestamps)}}}class Zi extends Wl{data(e={}){return super.data(e)}}class kd{constructor(e,n,d,p){this._firestore=e,this._userDataWriter=n,this._snapshot=p,this.metadata=new Ru(p.hasPendingWrites,p.fromCache),this.query=d}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(d=>{e.call(n,new Zi(this._firestore,this._userDataWriter,d.key,d,new Ru(this._snapshot.mutatedKeys.has(d.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new dn(Rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(d,p){if(d._snapshot.oldDocs.isEmpty()){let _=0;return d._snapshot.docChanges.map(w=>({type:"added",doc:new Zi(d._firestore,d._userDataWriter,w.doc.key,w.doc,new Ru(d._snapshot.mutatedKeys.has(w.doc.key),d._snapshot.fromCache),d.query.converter),oldIndex:-1,newIndex:_++}))}{let _=d._snapshot.oldDocs;return d._snapshot.docChanges.filter(w=>p||3!==w.type).map(w=>{const j=new Zi(d._firestore,d._userDataWriter,w.doc.key,w.doc,new Ru(d._snapshot.mutatedKeys.has(w.doc.key),d._snapshot.fromCache),d.query.converter);let le=-1,me=-1;return 0!==w.type&&(le=_.indexOf(w.doc.key),_=_.delete(w.doc.key)),1!==w.type&&(_=_.add(w.doc),me=_.indexOf(w.doc.key)),{type:Og(w.type),doc:j,oldIndex:le,newIndex:me}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Og(l){switch(l){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}function h_(l,e){return l instanceof Wl&&e instanceof Wl?l._firestore===e._firestore&&l._key.isEqual(e._key)&&(null===l._document?null===e._document:l._document.isEqual(e._document))&&l._converter===e._converter:l instanceof kd&&e instanceof kd&&l._firestore===e._firestore&&$_(l.query,e.query)&&l.metadata.isEqual(e.metadata)&&l._snapshot.isEqual(e._snapshot)}function _p(l){if("L"===l.limitType&&0===l.explicitOrderBy.length)throw new dn(Rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zc{}function fa(l,...e){for(const n of e)l=n._apply(l);return l}class Rg extends Zc{constructor(e,n,d){super(),this._c=e,this.wc=n,this.mc=d,this.type="where"}_apply(e){const n=Ki(e.firestore),d=function(p,_,w,j,le,me,tt){let yt;if(le.isKeyField()){if("array-contains"===me||"array-contains-any"===me)throw new dn(Rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${me}' queries on documentId().`);if("in"===me||"not-in"===me){Ty(tt,me);const bn=[];for(const Tn of tt)bn.push(Jm(j,p,Tn));yt={arrayValue:{values:bn}}}else yt=Jm(j,p,tt)}else"in"!==me&&"not-in"!==me&&"array-contains-any"!==me||Ty(tt,me),yt=qc(w,"where",tt,"in"===me||"not-in"===me);const Wt=go.create(le,me,yt);return function(bn,Tn){if(Tn.S()){const Gr=Lh(bn);if(null!==Gr&&!Gr.isEqual(Tn.field))throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Gr.toString()}' and '${Tn.field.toString()}'`);const Ws=Nh(bn);null!==Ws&&nl(0,Tn.field,Ws)}const rr=function(Gr,Ws){for(const zs of Gr.filters)if(Ws.indexOf(zs.op)>=0)return zs.op;return null}(bn,function(Gr){switch(Gr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Tn.op));if(null!==rr)throw new dn(Rt.INVALID_ARGUMENT,rr===Tn.op?`Invalid query. You cannot use more than one '${Tn.op.toString()}' filter.`:`Invalid query. You cannot use '${Tn.op.toString()}' filters with '${rr.toString()}' filters.`)}(p,Wt),Wt}(e._query,0,n,e.firestore._databaseId,this._c,this.wc,this.mc);return new Xa(e.firestore,e.converter,function(p,_){const w=p.filters.concat([_]);return new Wu(p.path,p.collectionGroup,p.explicitOrderBy.slice(),w,p.limit,p.limitType,p.startAt,p.endAt)}(e._query,d))}}class zl extends Zc{constructor(e,n){super(),this._c=e,this.gc=n,this.type="orderBy"}_apply(e){const n=function(d,p,_){if(null!==d.startAt)throw new dn(Rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==d.endAt)throw new dn(Rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new ec(p,_);return function(j,le){if(null===Nh(j)){const me=Lh(j);null!==me&&nl(0,me,le.field)}}(d,w),w}(e._query,this._c,this.gc);return new Xa(e.firestore,e.converter,function(d,p){const _=d.explicitOrderBy.concat([p]);return new Wu(d.path,d.collectionGroup,_,d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(e._query,n))}}class tl extends Zc{constructor(e,n,d){super(),this.type=e,this.yc=n,this.Ic=d}_apply(e){return new Xa(e.firestore,e.converter,wf(e._query,this.yc,this.Ic))}}class yy extends Zc{constructor(e,n,d){super(),this.type=e,this.Tc=n,this.Ec=d}_apply(e){const n=by(e,this.type,this.Tc,this.Ec);return new Xa(e.firestore,e.converter,(p=n,new Wu((d=e._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,p,d.endAt)));var d,p}}class _y extends Zc{constructor(e,n,d){super(),this.type=e,this.Tc=n,this.Ec=d}_apply(e){const n=by(e,this.type,this.Tc,this.Ec);return new Xa(e.firestore,e.converter,(p=n,new Wu((d=e._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,p)));var d,p}}function by(l,e,n,d){if(n[0]=(0,xt.m9)(n[0]),n[0]instanceof ff)return function(p,_,w,j,le){if(!j)throw new dn(Rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const me=[];for(const tt of Ac(p))if(tt.field.isKeyField())me.push(lu(_,j.key));else{const yt=j.data.field(tt.field);if(Ld(yt))throw new dn(Rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+tt.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===yt){const Wt=tt.field.canonicalString();throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Wt}' (used as the orderBy) does not exist.`)}me.push(yt)}return new Ps(me,le)}(l._query,l.firestore._databaseId,e,n[0]._document,d);{const p=Ki(l.firestore);return function(_,w,j,le,me,tt){const yt=_.explicitOrderBy;if(me.length>yt.length)throw new dn(Rt.INVALID_ARGUMENT,`Too many arguments provided to ${le}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Wt=[];for(let bn=0;bn<me.length;bn++){const Tn=me[bn];if(yt[bn].field.isKeyField()){if("string"!=typeof Tn)throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${le}(), but got a ${typeof Tn}`);if(!hl(_)&&-1!==Tn.indexOf("/"))throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${le}() must be a plain document ID, but '${Tn}' contains a slash.`);const rr=_.path.child(mi.fromString(Tn));if(!Fn.isDocumentKey(rr))throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${le}() must result in a valid document path, but '${rr}' is not because it contains an odd number of segments.`);const Gr=new Fn(rr);Wt.push(lu(w,Gr))}else{const rr=qc(j,le,Tn);Wt.push(rr)}}return new Ps(Wt,tt)}(l._query,l.firestore._databaseId,p,e,n,d)}}function Jm(l,e,n){if("string"==typeof(n=(0,xt.m9)(n))){if(""===n)throw new dn(Rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hl(e)&&-1!==n.indexOf("/"))throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const d=e.path.child(mi.fromString(n));if(!Fn.isDocumentKey(d))throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${d}' is not because it has an odd number of segments (${d.length}).`);return lu(l,new Fn(d))}if(n instanceof ro)return lu(l,n._key);throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bh(n)}.`)}function Ty(l,e){if(!Array.isArray(l)||0===l.length)throw new dn(Rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(l.length>10)throw new dn(Rt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nl(l,e,n){if(!n.isEqual(e))throw new dn(Rt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const ev={maxAttempts:5};class gf{convertValue(e,n="none"){switch(wu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ns(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Qt()}}convertObject(e,n){const d={};return Js(e.fields,(p,_)=>{d[p]=this.convertValue(_,n)}),d}convertGeoPoint(e){return new un(ns(e.latitude),ns(e.longitude))}convertArray(e,n){return(e.values||[]).map(d=>this.convertValue(d,n))}convertServerTimestamp(e,n){switch(n){case"previous":const d=Ro(e);return null==d?null:this.convertValue(d,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=Qo(e);return new Vs(n.seconds,n.nanos)}convertDocumentKey(e,n){const d=mi.fromString(e);Pn(It(d));const p=new aa(d.get(1),d.get(3)),_=new Fn(d.popFirst(5));return p.isEqual(n)||ze(`Document ${_} contains a document reference within a different database (${p.projectId}/${p.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),_}}function Ng(l,e,n){let d;return d=l?n&&(n.merge||n.mergeFields)?l.toFirestore(e,n):l.toFirestore(e):e,d}class Ey extends gf{constructor(e){super(),this.firestore=e}convertBytes(e){return new tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ro(this.firestore,null,n)}}class tv{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ki(e)}set(e,n,d){this._verifyNotCommitted();const p=vc(e,this._firestore),_=Ng(p.converter,n,d),w=Ts(this._dataReader,"WriteBatch.set",p._key,_,null!==p.converter,d);return this._mutations.push(w.toMutation(p._key,wo.none())),this}update(e,n,d,...p){this._verifyNotCommitted();const _=vc(e,this._firestore);let w;return w="string"==typeof(n=(0,xt.m9)(n))||n instanceof kn?mc(this._dataReader,"WriteBatch.update",_._key,n,d,p):yu(this._dataReader,"WriteBatch.update",_._key,n),this._mutations.push(w.toMutation(_._key,wo.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=vc(e,this._firestore);return this._mutations=this._mutations.concat(new Du(n._key,wo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new dn(Rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vc(l,e){if((l=(0,xt.m9)(l)).firestore!==e)throw new dn(Rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return l}class Go extends gf{constructor(e){super(),this.firestore=e}convertBytes(e){return new tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ro(this.firestore,null,n)}}function Ds(l,e,n){l=Bi(l,ro);const d=Bi(l.firestore,o),p=Ng(l.converter,e,n);return As(d,[Ts(Ki(d),"setDoc",l._key,p,null!==l.converter,n).toMutation(l._key,wo.none())])}function nv(l,e,n,...d){l=Bi(l,ro);const p=Bi(l.firestore,o),_=Ki(p);let w;return w="string"==typeof(e=(0,xt.m9)(e))||e instanceof kn?mc(_,"updateDoc",l._key,e,n,d):yu(_,"updateDoc",l._key,e),As(p,[w.toMutation(l._key,wo.exists(!0))])}function Cy(l,...e){var n,d,p;l=(0,xt.m9)(l);let _={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||g(e[w])||(_=e[w],w++);const j={includeMetadataChanges:_.includeMetadataChanges};if(g(e[w])){const yt=e[w];e[w]=null===(n=yt.next)||void 0===n?void 0:n.bind(yt),e[w+1]=null===(d=yt.error)||void 0===d?void 0:d.bind(yt),e[w+2]=null===(p=yt.complete)||void 0===p?void 0:p.bind(yt)}let le,me,tt;if(l instanceof ro)me=Bi(l.firestore,o),tt=nc(l._key.path),le={next:yt=>{e[w]&&e[w](mf(me,l,yt))},error:e[w+1],complete:e[w+2]};else{const yt=Bi(l,Xa);me=Bi(yt.firestore,o),tt=yt._query;const Wt=new Go(me);le={next:bn=>{e[w]&&e[w](new kd(me,Wt,yt,bn))},error:e[w+1],complete:e[w+2]},_p(l._query)}return function(yt,Wt,bn,Tn){const rr=new dp(Tn),Gr=new af(Wt,rr,bn);return yt.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return gg(yield hp(yt),Gr)})),()=>{rr.Aa(),yt.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return mu(yield hp(yt),Gr)}))}}(h(me),tt,j,le)}function As(l,e){return function(n,d){const p=new gs;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function Xv(l,e,n){return mg.apply(this,arguments)}(yield Dg(n),d,p)})),p.promise}(h(l),e)}function mf(l,e,n){const d=n.docs.get(e._key),p=new Go(l);return new Wl(l,p,e._key,d,new Ru(n.hasPendingWrites,n.fromCache),e.converter)}class Va extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ki(e)}get(e){const n=vc(e,this._firestore),d=new Ey(this._firestore);return this._transaction.lookup([n._key]).then(p=>{if(!p||1!==p.length)return Qt();const _=p[0];if(_.isFoundDocument())return new ff(this._firestore,d,_.key,_,n.converter);if(_.isNoDocument())return new ff(this._firestore,d,n._key,null,n.converter);throw Qt()})}set(e,n,d){const p=vc(e,this._firestore),_=Ng(p.converter,n,d),w=Ts(this._dataReader,"Transaction.set",p._key,_,null!==p.converter,d);return this._transaction.set(p._key,w),this}update(e,n,d,...p){const _=vc(e,this._firestore);let w;return w="string"==typeof(n=(0,xt.m9)(n))||n instanceof kn?mc(this._dataReader,"Transaction.update",_._key,n,d,p):yu(this._dataReader,"Transaction.update",_._key,n),this._transaction.update(_._key,w),this}delete(e){const n=vc(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=vc(e,this._firestore),d=new Go(this._firestore);return super.get(e).then(p=>new Wl(this._firestore,d,n._key,p._document,new Ru(!1,!1),n.converter))}}function Sh(l,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dn("invalid-argument",`Invalid options passed to function ${l}(): You cannot specify both "merge" and "mergeFields".`);return e}function sv(){if("undefined"==typeof Uint8Array)throw new dn("unimplemented","Uint8Arrays are not available in this environment.")}function ov(){if(!function Ma(){return"undefined"!=typeof atob}())throw new dn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(l,e=!0){P=be.SDK_VERSION,(0,be._registerComponent)(new Ke.wA("firestore",(n,{options:d})=>{const p=n.getProvider("app").getImmediate(),_=new o(p,new ul(n.getProvider("auth-internal")),new Sc(n.getProvider("app-check-internal")));return d=Object.assign({useFetchStreams:e},d),_._setSettings(d),_},"PUBLIC")),(0,be.registerVersion)(Uu,"3.4.9",l),(0,be.registerVersion)(Uu,"3.4.9","esm2017")}();class Yc{constructor(e){this._delegate=e}static fromBase64String(e){return ov(),new Yc(tn.fromBase64String(e))}static fromUint8Array(e){return sv(),new Yc(tn.fromUint8Array(e))}toBase64(){return ov(),this._delegate.toBase64()}toUint8Array(){return sv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Pd(l){return function Sp(l,e){if("object"!=typeof l||null===l)return!1;const n=l;for(const d of e)if(d in n&&"function"==typeof n[d])return!0;return!1}(l,["next","error","complete"])}class wh{enableIndexedDbPersistence(e,n){return function S(l,e){vn(l=Bi(l,o));const n=h(l),d=l._freezeSettings(),p=new Tg;return R(n,p,new bg(p,d.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function x(l){vn(l=Bi(l,o));const e=h(l),n=l._freezeSettings(),d=new Tg;return R(e,d,new ry(d,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ee(l){if(l._initialized&&!l._terminated)throw new dn(Rt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gs;return l._queue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{yield(n=(0,ne.Z)(function*(d){if(!yl.vt())return Promise.resolve();const p=d+"main";yield yl.delete(p)}),function(d){return n.apply(this,arguments)})(Qf(l._databaseId,l._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class wp{constructor(e,n,d){this._delegate=n,this._persistenceProvider=d,this.INTERNAL={delete:()=>this.terminate()},e instanceof aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&st("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,d={}){!function c_(l,e,n,d={}){var p;const _=(l=Bi(l,fp))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&st("Host has been set in both settings() and useEmulator(), emulator host will be used"),l._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${n}`,ssl:!1})),d.mockUserToken){let w,j;if("string"==typeof d.mockUserToken)w=d.mockUserToken,j=F.MOCK_USER;else{w=(0,xt.Sg)(d.mockUserToken,null===(p=l._app)||void 0===p?void 0:p.options.projectId);const le=d.mockUserToken.sub||d.mockUserToken.user_id;if(!le)throw new dn(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");j=new F(le)}l._authCredentials=new Ea(new ou(w,j))}}(this._delegate,e,n,d)}enableNetwork(){return function _e(l){return function qm(l){return l.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield ly(l),n=yield cy(l);return e.setNetworkEnabled(!0),function(d){const p=pn(d);return p.wu.delete(0),vd(p)}(n)}))}(h(l=Bi(l,o)))}(this._delegate)}disableNetwork(){return function Re(l){return function Km(l){return l.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield ly(l),n=yield cy(l);return e.setNetworkEnabled(!1),(d=(0,ne.Z)(function*(p){const _=pn(p);_.wu.add(0),yield $c(_),_.yu.set("Offline")}),function(p){return d.apply(this,arguments)})(n);var d}))}(h(l=Bi(l,o)))}(this._delegate)}enablePersistence(e){let n=!1,d=!1;return e&&(n=!!e.synchronizeTabs,d=!!e.experimentalForceOwningTab,kg("synchronizeTabs",n,"experimentalForceOwningTab",d)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,d)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function q(l){return function(e){const n=new gs;return e.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function H_(l,e){return yg.apply(this,arguments)}(yield Dg(e),n)})),n.promise}(h(l=Bi(l,o)))}(this._delegate)}onSnapshotsInSync(e){return function Eh(l,e){return function u_(l,e){const n=new dp(e);return l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return d=yield hp(l),p=n,pn(d).bu.add(p),void p.next();var d,p})),()=>{n.Aa(),l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return d=yield hp(l),p=n,void pn(d).bu.delete(p);var d,p}))}}(h(l=Bi(l,o)),g(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new dn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xh(this,Mg(this._delegate,e))}catch(n){throw $o(n,"collection()","Firestore.collection()")}}doc(e){try{return new rl(this,pp(this._delegate,e))}catch(n){throw $o(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ha(this,function Qm(l,e){if(l=Bi(l,fp),Ag("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new dn(Rt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xa(l,null,(n=e,new Wu(mi.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw $o(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function g_(l,e,n){l=Bi(l,o);const d=Object.assign(Object.assign({},ev),n);return function(p){if(p.maxAttempts<1)throw new dn(Rt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(d),function hy(l,e,n){const d=new gs;return l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){const p=yield(_=l,Cg(_).then(w=>w.datastore));var _;new oy(l.asyncQueue,p,n,e,d).run()})),d.promise}(h(l),p=>e(new Va(l,p)),d)}(this._delegate,n=>e(new ql(this,n)))}batch(){return h(this._delegate),new Od(new tv(this._delegate,e=>As(this._delegate,e)))}loadBundle(e){return function Ve(l,e){const n=h(l=Bi(l,o)),d=new u;return function G_(l,e,n,d){const p=function(_,w){let j;return j="string"==typeof _?(new TextEncoder).encode(_):_,le=function(le,me){if(le instanceof Uint8Array)return Eg(le,void 0);if(le instanceof ArrayBuffer)return Eg(new Uint8Array(le),void 0);if(le instanceof ReadableStream)return le.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(j),new iy(le,w);var le}(n,ef(e));l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){!function df(l,e,n){const d=pn(l);var p;(p=(0,ne.Z)(function*(_,w,j){try{const le=yield w.getMetadata();if(yield function(Wt,bn){const Tn=pn(Wt),rr=eo(bn.createTime);return Tn.persistence.runTransaction("hasNewerBundle","readonly",Gr=>Tn._s.getBundleMetadata(Gr,bn.id)).then(Gr=>!!Gr&&Gr.createTime.compareTo(rr)>=0)}(_.localStore,le))return yield w.close(),j._completeWith({taskState:"Success",documentsLoaded:(Wt=le).totalDocuments,bytesLoaded:Wt.totalBytes,totalDocuments:Wt.totalDocuments,totalBytes:Wt.totalBytes}),Promise.resolve(new Set);j._updateProgress(Lm(le));const me=new qv(le,_.localStore,w.M);let tt=yield w.ma();for(;tt;){const Wt=yield me.Fu(tt);Wt&&j._updateProgress(Wt),tt=yield w.ma()}const yt=yield me.complete();return yield Wc(_,yt.Lu,void 0),yield function(Wt,bn){const Tn=pn(Wt);return Tn.persistence.runTransaction("Save bundle","readwrite",rr=>Tn._s.saveBundleMetadata(rr,bn))}(_.localStore,le),j._completeWith(yt.progress),Promise.resolve(yt.Bu)}catch(le){return st("SyncEngine",`Loading bundle failed with ${le}`),j._failWith(le),Promise.resolve(new Set)}var Wt}),function(_,w,j){return p.apply(this,arguments)})(d,e,n).then(p=>{d.sharedClientState.notifyBundleLoaded(p)})}(yield Dg(l),p,d)}))}(n,l._databaseId,e,d),d}(this._delegate,e)}namedQuery(e){return function zt(l,e){return function l_(l,e){return l.asyncQueue.enqueue((0,ne.Z)(function*(){return function(n,d){const p=pn(n);return p.persistence.runTransaction("Get named query","readonly",_=>p._s.getNamedQuery(_,d))}(yield Ig(l),e)}))}(h(l=Bi(l,o)),e).then(n=>n?new Xa(l,null,n.query):null)}(this._delegate,e).then(n=>n?new Ha(this,n):null)}}class vf extends gf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yc(new tn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return rl.forKey(n,this.firestore,null)}}class ql{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new vf(e)}get(e){const n=Ih(e);return this._delegate.get(n).then(d=>new Ch(this._firestore,new Wl(this._firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,n.converter)))}set(e,n,d){const p=Ih(e);return d?(Sh("Transaction.set",d),this._delegate.set(p,n,d)):this._delegate.set(p,n),this}update(e,n,d,...p){const _=Ih(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,d,...p),this}delete(e){const n=Ih(e);return this._delegate.delete(n),this}}class Od{constructor(e){this._delegate=e}set(e,n,d){const p=Ih(e);return d?(Sh("WriteBatch.set",d),this._delegate.set(p,n,d)):this._delegate.set(p,n),this}update(e,n,d,...p){const _=Ih(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,d,...p),this}delete(e){const n=Ih(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class _c{constructor(e,n,d){this._firestore=e,this._userDataWriter=n,this._delegate=d}fromFirestore(e,n){const d=new Zi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bc(this._firestore,d),null!=n?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const d=_c.INSTANCES;let p=d.get(e);p||(p=new WeakMap,d.set(e,p));let _=p.get(n);return _||(_=new _c(e,new vf(e),n),p.set(n,_)),_}}_c.INSTANCES=new WeakMap;class rl{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vf(e)}static forPath(e,n,d){if(e.length%2!=0)throw new dn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new rl(n,new ro(n._delegate,d,new Fn(e)))}static forKey(e,n,d){return new rl(n,new ro(n._delegate,d,e))}get id(){return this._delegate.id}get parent(){return new xh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xh(this.firestore,Mg(this._delegate,e))}catch(n){throw $o(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof ro&&gp(this._delegate,e)}set(e,n){n=Sh("DocumentReference.set",n);try{return n?Ds(this._delegate,e,n):Ds(this._delegate,e)}catch(d){throw $o(d,"setDoc()","DocumentReference.set()")}}update(e,n,...d){try{return 1===arguments.length?nv(this._delegate,e):nv(this._delegate,e,n,...d)}catch(p){throw $o(p,"updateDoc()","DocumentReference.update()")}}delete(){return function Lg(l){return As(Bi(l.firestore,o),[new Du(l._key,wo.none())])}(this._delegate)}onSnapshot(...e){const n=My(e),d=Bg(e,p=>new Ch(this.firestore,new Wl(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)));return Cy(this._delegate,n,d)}get(e){let n;return n="cache"===(null==e?void 0:e.source)?function Sy(l){l=Bi(l,ro);const e=Bi(l.firestore,o),n=h(e),d=new Go(e);return function o_(l,e){const n=new gs;return l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(d=(0,ne.Z)(function*(p,_,w){try{const j=yield function(le,me){const tt=pn(le);return tt.persistence.runTransaction("read document","readonly",yt=>tt.fi.Ls(yt,me))}(p,_);j.isFoundDocument()?w.resolve(j):j.isNoDocument()?w.resolve(null):w.reject(new dn(Rt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(j){const le=Pu(j,`Failed to get document '${_} from cache`);w.reject(le)}}),function(p,_,w){return d.apply(this,arguments)})(yield Ig(l),e,n);var d})),n.promise}(n,l._key).then(p=>new Wl(e,d,l._key,p,new Ru(null!==p&&p.hasLocalMutations,!0),l.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function wy(l){l=Bi(l,ro);const e=Bi(l.firestore,o);return dy(h(e),l._key,{source:"server"}).then(n=>mf(e,l,n))}(this._delegate):function Md(l){l=Bi(l,ro);const e=Bi(l.firestore,o);return dy(h(e),l._key).then(n=>mf(e,l,n))}(this._delegate),n.then(d=>new Ch(this.firestore,new Wl(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)))}withConverter(e){return new rl(this.firestore,this._delegate.withConverter(e?_c.getInstance(this.firestore,e):null))}}function $o(l,e,n){return l.message=l.message.replace(e,n),l}function My(l){for(const e of l)if("object"==typeof e&&!Pd(e))return e;return{}}function Bg(l,e){var n,d;let p;return p=Pd(l[0])?l[0]:Pd(l[1])?l[1]:"function"==typeof l[0]?{next:l[0],error:l[1],complete:l[2]}:{next:l[1],error:l[2],complete:l[3]},{next:_=>{p.next&&p.next(e(_))},error:null===(n=p.error)||void 0===n?void 0:n.bind(p),complete:null===(d=p.complete)||void 0===d?void 0:d.bind(p)}}class Ch{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new rl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return h_(this._delegate,e._delegate)}}class bc extends Ch{data(e){const n=this._delegate.data(e);return function ir(l,e){l||Qt()}(void 0!==n),n}}class Ha{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vf(e)}where(e,n,d){try{return new Ha(this.firestore,fa(this._delegate,function Xm(l,e,n){const d=e,p=el("where",l);return new Rg(p,d,n)}(e,n,d)))}catch(p){throw $o(p,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ha(this.firestore,fa(this._delegate,function Sl(l,e="asc"){const n=e,d=el("orderBy",l);return new zl(d,n)}(e,n)))}catch(d){throw $o(d,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ha(this.firestore,fa(this._delegate,function is(l){return Ym("limit",l),new tl("limit",l,"F")}(e)))}catch(n){throw $o(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ha(this.firestore,fa(this._delegate,function vy(l){return Ym("limitToLast",l),new tl("limitToLast",l,"L")}(e)))}catch(n){throw $o(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ha(this.firestore,fa(this._delegate,function f_(...l){return new yy("startAt",l,!0)}(...e)))}catch(n){throw $o(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ha(this.firestore,fa(this._delegate,function p_(...l){return new yy("startAfter",l,!1)}(...e)))}catch(n){throw $o(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ha(this.firestore,fa(this._delegate,function pf(...l){return new _y("endBefore",l,!1)}(...e)))}catch(n){throw $o(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ha(this.firestore,fa(this._delegate,function bp(...l){return new _y("endAt",l,!0)}(...e)))}catch(n){throw $o(n,"endAt()","Query.endAt()")}}isEqual(e){return $_(this._delegate,e._delegate)}get(e){let n;return n="cache"===(null==e?void 0:e.source)?function yc(l){l=Bi(l,Xa);const e=Bi(l.firestore,o),n=h(e),d=new Go(e);return function rs(l,e){const n=new gs;return l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(d=(0,ne.Z)(function*(p,_,w){try{const j=yield Ul(p,_,!0),le=new Zv(_,j._i),me=le.Wu(j.documents),tt=le.applyChanges(me,!1);w.resolve(tt.snapshot)}catch(j){const le=Pu(j,`Failed to execute query '${_} against cache`);w.reject(le)}}),function(p,_,w){return d.apply(this,arguments)})(yield Ig(l),e,n);var d})),n.promise}(n,l._query).then(p=>new kd(e,d,l,p))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ep(l){l=Bi(l,Xa);const e=Bi(l.firestore,o),n=h(e),d=new Go(e);return a_(n,l._query,{source:"server"}).then(p=>new kd(e,d,l,p))}(this._delegate):function Tp(l){l=Bi(l,Xa);const e=Bi(l.firestore,o),n=h(e),d=new Go(e);return _p(l._query),a_(n,l._query).then(p=>new kd(e,d,l,p))}(this._delegate),n.then(d=>new Or(this.firestore,new kd(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)))}onSnapshot(...e){const n=My(e),d=Bg(e,p=>new Or(this.firestore,new kd(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)));return Cy(this._delegate,n,d)}withConverter(e){return new Ha(this.firestore,this._delegate.withConverter(e?_c.getInstance(this.firestore,e):null))}}class W_{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new bc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Or{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ha(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new W_(this._firestore,n))}forEach(e,n){this._delegate.forEach(d=>{e.call(n,new bc(this._firestore,d))})}isEqual(e){return h_(this._delegate,e._delegate)}}class xh extends Ha{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new rl(this.firestore,e):null}doc(e){try{return new rl(this.firestore,void 0===e?pp(this._delegate):pp(this._delegate,e))}catch(n){throw $o(n,"doc()","CollectionReference.doc()")}}add(e){return function Fg(l,e){const n=Bi(l.firestore,o),d=pp(l),p=Ng(l.converter,e);return As(n,[Ts(Ki(l.firestore),"addDoc",d._key,p,null!==l.converter,{}).toMutation(d._key,wo.exists(!1))]).then(()=>d)}(this._delegate,e).then(n=>new rl(this.firestore,n))}isEqual(e){return gp(this._delegate,e._delegate)}withConverter(e){return new xh(this.firestore,this._delegate.withConverter(e?_c.getInstance(this.firestore,e):null))}}function Ih(l){return Bi(l,ro)}class av{constructor(...e){this._delegate=new kn(...e)}static documentId(){return new av(ts.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof kn&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xy(){return new Rs("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kl(e)}static delete(){const e=function m_(){return new Gs("deleteField")}();return e._methodName="FieldValue.delete",new Kl(e)}static arrayUnion(...e){const n=function rv(...l){return new Ba("arrayUnion",l)}(...e);return n._methodName="FieldValue.arrayUnion",new Kl(n)}static arrayRemove(...e){const n=function Iy(...l){return new ms("arrayRemove",l)}(...e);return n._methodName="FieldValue.arrayRemove",new Kl(n)}static increment(e){const n=function Dy(l){return new mp("increment",l)}(e);return n._methodName="FieldValue.increment",new Kl(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const y_={Firestore:wp,GeoPoint:un,Timestamp:Vs,Blob:Yc,Transaction:ql,WriteBatch:Od,DocumentReference:rl,DocumentSnapshot:Ch,Query:Ha,QueryDocumentSnapshot:bc,QuerySnapshot:Or,CollectionReference:xh,FieldPath:av,FieldValue:Kl,setLogLevel:function Ug(l){!function se(l){A.setLogLevel(l)}(l)},CACHE_SIZE_UNLIMITED:-1};!function Hg(l){(function Vg(l,e){l.INTERNAL.registerComponent(new Ke.wA("firestore-compat",n=>{const d=n.getProvider("app-compat").getImmediate(),p=n.getProvider("firestore").getImmediate();return e(d,p)},"PUBLIC").setServiceProps(Object.assign({},y_)))})(l,(e,n)=>new wp(e,n,new wh)),l.registerVersion("@firebase/firestore-compat","0.1.18")}(ie.Z);var Es=U(1205),z_=U(440),Py=U(127);function Cp(l,e){return function Gg(l,e=k.z){return new oe.y(n=>{let d;return null!=e?e.schedule(()=>{d=l.onSnapshot({includeMetadataChanges:!0},n)}):d=l.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=d&&d()}})}(l,e)}function $g(l,e){return Cp(l,e).pipe((0,Je.U)(n=>({payload:n,type:"query"})))}function Dh(l,e){return $g(l,e).pipe((0,et.O)(void 0),Xe(),(0,Je.U)(([n,d])=>{const p=d.payload.docChanges(),_=p.map(w=>({type:w.type,payload:w}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(d.payload.metadata)&&d.payload.docs.forEach((w,j)=>{const le=p.find(tt=>tt.doc.ref.isEqual(w.ref)),me=null==n?void 0:n.payload.docs.find(tt=>tt.ref.isEqual(w.ref));le&&JSON.stringify(le.doc.metadata)===JSON.stringify(w.metadata)||!le&&me&&JSON.stringify(me.metadata)===JSON.stringify(w.metadata)||_.push({type:"modified",payload:{oldIndex:j,newIndex:j,type:"modified",doc:w}})}),_}))}function uv(l,e,n){return Dh(l,n).pipe((0,ft.R)((d,p)=>function lv(l,e,n){return e.forEach(d=>{n.indexOf(d.type)>-1&&(l=function __(l,e){switch(e.type){case"added":if(!l[e.newIndex]||!l[e.newIndex].doc.ref.isEqual(e.doc.ref))return cv(l,e.newIndex,0,e);break;case"modified":if(null==l[e.oldIndex]||l[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=l.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return cv(l,e.newIndex,1,e)}break;case"removed":if(l[e.oldIndex]&&l[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cv(l,e.oldIndex,1)}return l}(l,d))}),l}(d,p.map(_=>_.payload),e),[]),function Me(l,e=pe.y){return l=null!=l?l:Oe,(0,Ge.e)((n,d)=>{let p,_=!0;n.subscribe((0,Y.x)(d,w=>{const j=e(w);(_||!l(p,j))&&(_=!1,p=j,d.next(w))}))})}(),(0,Je.U)(d=>d.map(p=>({type:p.type,payload:p}))))}function cv(l,e,n,...d){const p=l.slice();return p.splice(e,n,...d),p}function yf(l){return(!l||0===l.length)&&(l=["added","removed","modified"]),l}class _f{constructor(e,n,d){this.ref=e,this.query=n,this.afs=d}stateChanges(e){let n=Dh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Je.U)(d=>d.filter(p=>e.indexOf(p.type)>-1)))),n.pipe((0,et.O)(void 0),Xe(),(0,it.h)(([d,p])=>p.length>0||!d),(0,Je.U)(([d,p])=>p),ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ft.R)((n,d)=>[...n,...d],[]))}snapshotChanges(e){const n=yf(e);return uv(this.query,n,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return $g(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(n=>n.payload.docs.map(d=>e.idField?Object.assign(Object.assign({},d.data()),{[e.idField]:d.id}):d.data())),ke.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(ke.iC)}add(e){return this.ref.add(e)}doc(e){return new Ah(this.ref.doc(e),this.afs)}}class Ah{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const d=this.ref.collection(e),{ref:p,query:_}=zg(d,n);return new _f(p,_,this.afs)}snapshotChanges(){return function Oy(l,e){return Cp(l,e).pipe((0,et.O)(void 0),Xe(),(0,Je.U)(([n,d])=>d.exists?(null==n?void 0:n.exists)?{payload:d,type:"modified"}:{payload:d,type:"added"}:{payload:d,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Je.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,Ne.D)(this.ref.get(e)).pipe(ke.iC)}}class Wg{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Dh(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(n=>n.filter(d=>e.indexOf(d.type)>-1)),(0,it.h)(n=>n.length>0),ke.iC):Dh(this.query,this.afs.schedulers.outsideAngular).pipe(ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ft.R)((n,d)=>[...n,...d],[]))}snapshotChanges(e){const n=yf(e);return uv(this.query,n,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return $g(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(d=>d.payload.docs.map(p=>e.idField?Object.assign({[e.idField]:p.id},p.data()):p.data())),ke.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(ke.iC)}}const Zl=new E.OlP("angularfire2.enableFirestorePersistence"),dv=new E.OlP("angularfire2.firestore.persistenceSettings"),hv=new E.OlP("angularfire2.firestore.settings"),fv=new E.OlP("angularfire2.firestore.use-emulator");function zg(l,e=(n=>n)){return{query:e(l),ref:l}}let bf=(()=>{class l{constructor(n,d,p,_,w,j,le,me,tt,yt,Wt,bn,Tn,rr,Gr,Ws,zs){this.schedulers=le;const Ri=(0,He.on)(n,j,d),na=tt;yt&&(0,Es.nw)(Ri,j,Wt,Tn,rr,Gr,bn,Ws),[this.firestore,this.persistenceEnabled$]=(0,He.cc)(`${Ri.name}.firestore`,"AngularFirestore",Ri.name,()=>{const io=j.runOutsideAngular(()=>Ri.firestore());if(_&&io.settings(_),na&&io.useEmulator(...na),p&&!(0,$e.PM)(w)){const xo=()=>{try{return(0,Ne.D)(io.enablePersistence(me||void 0).then(()=>!0,()=>!1))}catch(Ja){return"undefined"!=typeof console&&console.warn(Ja),(0,Pe.of)(!1)}};return[io,j.runOutsideAngular(xo)]}return[io,(0,Pe.of)(!1)]},[_,na,p])}collection(n,d){let p;p="string"==typeof n?this.firestore.collection(n):n;const{ref:_,query:w}=zg(p,d),j=this.schedulers.ngZone.run(()=>_);return new _f(j,w,this)}collectionGroup(n,d){const p=d||(w=>w),_=this.firestore.collectionGroup(n);return new Wg(p(_),this)}doc(n){let d;d="string"==typeof n?this.firestore.doc(n):n;const p=this.schedulers.ngZone.run(()=>d);return new Ah(p,this)}createId(){return this.firestore.collection("_").doc().id}}return l.\u0275fac=function(n){return new(n||l)(E.LFG(He.Dh),E.LFG(He.xv,8),E.LFG(Zl,8),E.LFG(hv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(ke.HU),E.LFG(dv,8),E.LFG(fv,8),E.LFG(Es.zQ,8),E.LFG(Es.Qv,8),E.LFG(Es.L6,8),E.LFG(Es._Q,8),E.LFG(Es.rT,8),E.LFG(Es.lh,8),E.LFG(Es.f7,8),E.LFG(z_.nm,8))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),xp=(()=>{class l{constructor(){Py.Z.registerVersion("angularfire",ke.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:l,providers:[{provide:Zl,useValue:!0},{provide:dv,useValue:n}]}}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({providers:[bf]}),l})()},2084:(Gt,rt,U)=>{"use strict";U.d(rt,{Q1:()=>Pi});var E=U(9751),k=U(9646),oe=U(8996),Ne=U(4986),Pe=U(4482),ke=U(5403),Y=U(4004),Xe=U(3900),pe=U(5813),Me=U(5e3),Oe=U(2011),et=U(3942),Je=U(5861),ft=U(9681),it=U(2090),He=U(4859);const $e="firebasestorage.googleapis.com",Tt="storageBucket";class be extends it.ZR{constructor(G,Ie){super(Ke(G),`Firebase Storage: ${Ie} (${Ke(G)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,be.prototype)}_codeEquals(G){return Ke(G)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(G){this.customData.serverResponse=G,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ke(fe){return"storage/"+fe}function gt(){return new be("unknown","An unknown error occurred, please check the error payload for server response.")}function je(){return new be("canceled","User canceled the upload/download.")}function wt(){return new be("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $t(fe){return new be("invalid-argument",fe)}function cn(){return new be("app-deleted","The Firebase app was deleted.")}function Yt(fe){return new be("invalid-root-operation","The operation '"+fe+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nt(fe,G){return new be("invalid-format","String does not match format '"+fe+"': "+G)}function fn(fe){throw new be("internal-error","Internal error: "+fe)}class Ln{constructor(G,Ie){this.bucket=G,this.path_=Ie}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const G=encodeURIComponent;return"/b/"+G(this.bucket)+"/o/"+G(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(G,Ie){let Qe;try{Qe=Ln.makeFromUrl(G,Ie)}catch(lt){return new Ln(G,"")}if(""===Qe.path)return Qe;throw function St(fe){return new be("invalid-default-bucket","Invalid default bucket '"+fe+"'.")}(G)}static makeFromUrl(G,Ie){let Qe=null;const lt="([A-Za-z0-9.\\-_]+)",Gn=new RegExp("^gs://"+lt+"(/(.*))?$","i");function yr(es){es.path_=decodeURIComponent(es.path)}const gi=Ie.replace(/[.]/g,"\\."),ji=[{regex:Gn,indices:{bucket:1,path:3},postModify:function Bt(es){"/"===es.path.charAt(es.path.length-1)&&(es.path_=es.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${gi}/v[A-Za-z0-9_]+/b/${lt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:yr},{regex:new RegExp(`^https?://${Ie===$e?"(?:storage.googleapis.com|storage.cloud.google.com)":Ie}/${lt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:yr}];for(let es=0;es<ji.length;es++){const hi=ji[es],us=hi.regex.exec(G);if(us){let ya=us[hi.indices.path];ya||(ya=""),Qe=new Ln(us[hi.indices.bucket],ya),hi.postModify(Qe);break}}if(null==Qe)throw function We(fe){return new be("invalid-url","Invalid URL '"+fe+"'.")}(G);return Qe}}class Vn{constructor(G){this.promise_=Promise.reject(G)}getPromise(){return this.promise_}cancel(G=!1){}}function Lr(fe){return"string"==typeof fe||fe instanceof String}function Mr(fe){return Pr()&&fe instanceof Blob}function Pr(){return"undefined"!=typeof Blob}function Mn(fe,G,Ie,Qe){if(Qe<G)throw $t(`Invalid value for '${fe}'. Expected ${G} or greater.`);if(Qe>Ie)throw $t(`Invalid value for '${fe}'. Expected ${Ie} or less.`)}function Kn(fe,G,Ie){let Qe=G;return null==Ie&&(Qe=`https://${G}`),`${Ie}://${Qe}/v0${fe}`}function pr(fe){const G=encodeURIComponent;let Ie="?";for(const Qe in fe)fe.hasOwnProperty(Qe)&&(Ie=Ie+(G(Qe)+"=")+G(fe[Qe])+"&");return Ie=Ie.slice(0,-1),Ie}var Cn=(()=>{return(fe=Cn||(Cn={}))[fe.NO_ERROR=0]="NO_ERROR",fe[fe.NETWORK_ERROR=1]="NETWORK_ERROR",fe[fe.ABORT=2]="ABORT",Cn;var fe})();class Vi{constructor(G,Ie,Qe,lt,Bt,mn,Gn,$n,yr,Zr,gi){this.url_=G,this.method_=Ie,this.headers_=Qe,this.body_=lt,this.successCodes_=Bt,this.additionalRetryCodes_=mn,this.callback_=Gn,this.errorCallback_=$n,this.timeout_=yr,this.progressCallback_=Zr,this.connectionFactory_=gi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((xi,Ii)=>{this.resolve_=xi,this.reject_=Ii,this.start_()})}start_(){const Ie=(Qe,lt)=>{const Bt=this.resolve_,mn=this.reject_,Gn=lt.connection;if(lt.wasSuccessCode)try{const $n=this.callback_(Gn,Gn.getResponse());!function Cr(fe){return void 0!==fe}($n)?Bt():Bt($n)}catch($n){mn($n)}else if(null!==Gn){const $n=gt();$n.serverResponse=Gn.getErrorText(),mn(this.errorCallback_?this.errorCallback_(Gn,$n):$n)}else mn(lt.canceled?this.appDelete_?cn():je():function Ee(){return new be("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?Ie(0,new hr(!1,null,!0)):this.backoffId_=function Ar(fe,G,Ie){let Qe=1,lt=null,Bt=null,mn=!1,Gn=0;function $n(){return 2===Gn}let yr=!1;function Zr(...Oi){yr||(yr=!0,G.apply(null,Oi))}function gi(Oi){lt=setTimeout(()=>{lt=null,fe(Ii,$n())},Oi)}function xi(){Bt&&clearTimeout(Bt)}function Ii(Oi,..._s){if(yr)return void xi();if(Oi)return xi(),void Zr.call(null,Oi,..._s);if($n()||mn)return xi(),void Zr.call(null,Oi,..._s);let ji;Qe<64&&(Qe*=2),1===Gn?(Gn=2,ji=0):ji=1e3*(Qe+Math.random()),gi(ji)}let Yr=!1;function Wi(Oi){Yr||(Yr=!0,xi(),!yr&&(null!==lt?(Oi||(Gn=2),clearTimeout(lt),gi(0)):Oi||(Gn=1)))}return gi(0),Bt=setTimeout(()=>{mn=!0,Wi(!0)},Ie),Wi}((Qe,lt)=>{if(lt)return void Qe(!1,new hr(!1,null,!0));const Bt=this.connectionFactory_();this.pendingConnection_=Bt;const mn=Gn=>{null!==this.progressCallback_&&this.progressCallback_(Gn.loaded,Gn.lengthComputable?Gn.total:-1)};null!==this.progressCallback_&&Bt.addUploadProgressListener(mn),Bt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Bt.removeUploadProgressListener(mn),this.pendingConnection_=null;const Gn=Bt.getErrorCode()===Cn.NO_ERROR,$n=Bt.getStatus();if(!Gn||this.isRetryStatusCode_($n)){const Zr=Bt.getErrorCode()===Cn.ABORT;return void Qe(!1,new hr(!1,null,Zr))}const yr=-1!==this.successCodes_.indexOf($n);Qe(!0,new hr(yr,Bt))})},Ie,this.timeout_)}getPromise(){return this.promise_}cancel(G){this.canceled_=!0,this.appDelete_=G||!1,null!==this.backoffId_&&function vr(fe){fe(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(G){const Ie=G>=500&&G<600,lt=-1!==[408,429].indexOf(G),Bt=-1!==this.additionalRetryCodes_.indexOf(G);return Ie||lt||Bt}}class hr{constructor(G,Ie,Qe){this.wasSuccessCode=G,this.connection=Ie,this.canceled=!!Qe}}function Jn(...fe){const G=function Nn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==G){const Ie=new G;for(let Qe=0;Qe<fe.length;Qe++)Ie.append(fe[Qe]);return Ie.getBlob()}if(Pr())return new Blob(fe);throw new be("unsupported-environment","This browser doesn't seem to support creating Blobs")}const cr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xn{constructor(G,Ie){this.data=G,this.contentType=Ie||null}}function Hr(fe,G){switch(fe){case cr.RAW:return new xn(_i(G));case cr.BASE64:case cr.BASE64URL:return new xn(ut(fe,G));case cr.DATA_URL:return new xn(function Jt(fe){const G=new dt(fe);return G.base64?ut(cr.BASE64,G.rest):function Ye(fe){let G;try{G=decodeURIComponent(fe)}catch(Ie){throw Nt(cr.DATA_URL,"Malformed data URL.")}return _i(G)}(G.rest)}(G),function at(fe){return new dt(fe).contentType}(G))}throw gt()}function _i(fe){const G=[];for(let Ie=0;Ie<fe.length;Ie++){let Qe=fe.charCodeAt(Ie);Qe<=127?G.push(Qe):Qe<=2047?G.push(192|Qe>>6,128|63&Qe):55296==(64512&Qe)?Ie<fe.length-1&&56320==(64512&fe.charCodeAt(Ie+1))?(Qe=65536|(1023&Qe)<<10|1023&fe.charCodeAt(++Ie),G.push(240|Qe>>18,128|Qe>>12&63,128|Qe>>6&63,128|63&Qe)):G.push(239,191,189):56320==(64512&Qe)?G.push(239,191,189):G.push(224|Qe>>12,128|Qe>>6&63,128|63&Qe)}return new Uint8Array(G)}function ut(fe,G){switch(fe){case cr.BASE64:{const lt=-1!==G.indexOf("-"),Bt=-1!==G.indexOf("_");if(lt||Bt)throw Nt(fe,"Invalid character '"+(lt?"-":"_")+"' found: is it base64url encoded?");break}case cr.BASE64URL:{const lt=-1!==G.indexOf("+"),Bt=-1!==G.indexOf("/");if(lt||Bt)throw Nt(fe,"Invalid character '"+(lt?"+":"/")+"' found: is it base64 encoded?");G=G.replace(/-/g,"+").replace(/_/g,"/");break}}let Ie;try{Ie=function yi(fe){return atob(fe)}(G)}catch(lt){throw Nt(fe,"Invalid character found")}const Qe=new Uint8Array(Ie.length);for(let lt=0;lt<Ie.length;lt++)Qe[lt]=Ie.charCodeAt(lt);return Qe}class dt{constructor(G){this.base64=!1,this.contentType=null;const Ie=G.match(/^data:([^,]+)?,/);if(null===Ie)throw Nt(cr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Qe=Ie[1]||null;null!=Qe&&(this.base64=function Mt(fe,G){return fe.length>=G.length&&fe.substring(fe.length-G.length)===G}(Qe,";base64"),this.contentType=this.base64?Qe.substring(0,Qe.length-7):Qe),this.rest=G.substring(G.indexOf(",")+1)}}class sn{constructor(G,Ie){let Qe=0,lt="";Mr(G)?(this.data_=G,Qe=G.size,lt=G.type):G instanceof ArrayBuffer?(Ie?this.data_=new Uint8Array(G):(this.data_=new Uint8Array(G.byteLength),this.data_.set(new Uint8Array(G))),Qe=this.data_.length):G instanceof Uint8Array&&(Ie?this.data_=G:(this.data_=new Uint8Array(G.length),this.data_.set(G)),Qe=G.length),this.size_=Qe,this.type_=lt}size(){return this.size_}type(){return this.type_}slice(G,Ie){if(Mr(this.data_)){const lt=function ci(fe,G,Ie){return fe.webkitSlice?fe.webkitSlice(G,Ie):fe.mozSlice?fe.mozSlice(G,Ie):fe.slice?fe.slice(G,Ie):null}(this.data_,G,Ie);return null===lt?null:new sn(lt)}{const Qe=new Uint8Array(this.data_.buffer,G,Ie-G);return new sn(Qe,!0)}}static getBlob(...G){if(Pr()){const Ie=G.map(Qe=>Qe instanceof sn?Qe.data_:Qe);return new sn(Jn.apply(null,Ie))}{const Ie=G.map(mn=>Lr(mn)?Hr(cr.RAW,mn).data:mn.data_);let Qe=0;Ie.forEach(mn=>{Qe+=mn.byteLength});const lt=new Uint8Array(Qe);let Bt=0;return Ie.forEach(mn=>{for(let Gn=0;Gn<mn.length;Gn++)lt[Bt++]=mn[Gn]}),new sn(lt,!0)}}uploadData(){return this.data_}}function jn(fe){let G;try{G=JSON.parse(fe)}catch(Ie){return null}return function ur(fe){return"object"==typeof fe&&!Array.isArray(fe)}(G)?G:null}function Ue(fe){const G=fe.lastIndexOf("/",fe.length-2);return-1===G?fe:fe.slice(G+1)}function At(fe,G){return G}class on{constructor(G,Ie,Qe,lt){this.server=G,this.local=Ie||G,this.writable=!!Qe,this.xform=lt||At}}let Qn=null;function Ot(){if(Qn)return Qn;const fe=[];fe.push(new on("bucket")),fe.push(new on("generation")),fe.push(new on("metageneration")),fe.push(new on("name","fullPath",!0));const Ie=new on("name");Ie.xform=function G(Bt,mn){return function Qr(fe){return!Lr(fe)||fe.length<2?fe:Ue(fe)}(mn)},fe.push(Ie);const lt=new on("size");return lt.xform=function Qe(Bt,mn){return void 0!==mn?Number(mn):mn},fe.push(lt),fe.push(new on("timeCreated")),fe.push(new on("updated")),fe.push(new on("md5Hash",null,!0)),fe.push(new on("cacheControl",null,!0)),fe.push(new on("contentDisposition",null,!0)),fe.push(new on("contentEncoding",null,!0)),fe.push(new on("contentLanguage",null,!0)),fe.push(new on("contentType",null,!0)),fe.push(new on("metadata","customMetadata",!0)),Qn=fe,Qn}function bt(fe,G,Ie){const Qe=jn(G);return null===Qe?null:function Be(fe,G,Ie){const Qe={type:"file"},lt=Ie.length;for(let Bt=0;Bt<lt;Bt++){const mn=Ie[Bt];Qe[mn.local]=mn.xform(Qe,G[mn.server])}return function ht(fe,G){Object.defineProperty(fe,"ref",{get:function Ie(){const Bt=new Ln(fe.bucket,fe.fullPath);return G._makeStorageReference(Bt)}})}(Qe,fe),Qe}(fe,Qe,Ie)}function Hn(fe,G){const Ie={},Qe=G.length;for(let lt=0;lt<Qe;lt++){const Bt=G[lt];Bt.writable&&(Ie[Bt.server]=fe[Bt.local])}return JSON.stringify(Ie)}const Zn="prefixes";class mr{constructor(G,Ie,Qe,lt){this.url=G,this.method=Ie,this.handler=Qe,this.timeout=lt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jr(fe){if(!fe)throw gt()}function oi(fe,G){return function Ie(Qe,lt){const Bt=bt(fe,lt,G);return Jr(null!==Bt),Bt}}function An(fe){return function G(Ie,Qe){let lt;return lt=401===Ie.getStatus()?Ie.getErrorText().includes("Firebase App Check token is invalid")?function J(){return new be("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function he(){return new be("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Ie.getStatus()?function X(fe){return new be("quota-exceeded","Quota for bucket '"+fe+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(fe.bucket):403===Ie.getStatus()?function Ae(fe){return new be("unauthorized","User does not have permission to access '"+fe+"'.")}(fe.path):Qe,lt.serverResponse=Qe.serverResponse,lt}}function Rn(fe){const G=An(fe);return function Ie(Qe,lt){let Bt=G(Qe,lt);return 404===Qe.getStatus()&&(Bt=function xt(fe){return new be("object-not-found","Object '"+fe+"' does not exist.")}(fe.path)),Bt.serverResponse=lt.serverResponse,Bt}}function fr(fe,G,Ie){const lt=Kn(G.fullServerUrl(),fe.host,fe._protocol),mn=fe.maxOperationRetryTime,Gn=new mr(lt,"GET",oi(fe,Ie),mn);return Gn.errorHandler=Rn(G),Gn}function Gi(fe,G,Ie,Qe,lt){const Bt={};Bt.prefix=G.isRoot?"":G.path+"/",Ie&&Ie.length>0&&(Bt.delimiter=Ie),Qe&&(Bt.pageToken=Qe),lt&&(Bt.maxResults=lt);const Gn=Kn(G.bucketOnlyServerUrl(),fe.host,fe._protocol),yr=fe.maxOperationRetryTime,Zr=new mr(Gn,"GET",function ls(fe,G){return function Ie(Qe,lt){const Bt=function wi(fe,G,Ie){const Qe=jn(Ie);return null===Qe?null:function Xr(fe,G,Ie){const Qe={prefixes:[],items:[],nextPageToken:Ie.nextPageToken};if(Ie[Zn])for(const lt of Ie[Zn]){const Bt=lt.replace(/\/$/,""),mn=fe._makeStorageReference(new Ln(G,Bt));Qe.prefixes.push(mn)}if(Ie.items)for(const lt of Ie.items){const Bt=fe._makeStorageReference(new Ln(G,lt.name));Qe.items.push(Bt)}return Qe}(fe,G,Qe)}(fe,G,lt);return Jr(null!==Bt),Bt}}(fe,G.bucket),yr);return Zr.urlParams=Bt,Zr.errorHandler=An(G),Zr}function ei(fe,G,Ie){const Qe=Object.assign({},Ie);return Qe.fullPath=fe.path,Qe.size=G.size(),Qe.contentType||(Qe.contentType=function vs(fe,G){return fe&&fe.contentType||G&&G.type()||"application/octet-stream"}(null,G)),Qe}class hs{constructor(G,Ie,Qe,lt){this.current=G,this.total=Ie,this.finalized=!!Qe,this.metadata=lt||null}}function ws(fe,G){let Ie=null;try{Ie=fe.getResponseHeader("X-Goog-Upload-Status")}catch(lt){Jr(!1)}return Jr(!!Ie&&-1!==(G||["active"]).indexOf(Ie)),Ie}const Cs={STATE_CHANGED:"state_changed"},Wr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ii(fe){switch(fe){case"running":case"pausing":case"canceling":return Wr.RUNNING;case"paused":return Wr.PAUSED;case"success":return Wr.SUCCESS;case"canceled":return Wr.CANCELED;default:return Wr.ERROR}}class Wo{constructor(G,Ie,Qe){if(function kr(fe){return"function"==typeof fe}(G)||null!=Ie||null!=Qe)this.next=G,this.error=null!=Ie?Ie:void 0,this.complete=null!=Qe?Qe:void 0;else{const Bt=G;this.next=Bt.next,this.error=Bt.error,this.complete=Bt.complete}}}function ys(fe){return(...G)=>{Promise.resolve().then(()=>fe(...G))}}class oo extends class so{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cn.NO_ERROR,this.sendPromise_=new Promise(G=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cn.ABORT,G()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cn.NETWORK_ERROR,G()}),this.xhr_.addEventListener("load",()=>{G()})})}send(G,Ie,Qe,lt){if(this.sent_)throw fn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Ie,G,!0),void 0!==lt)for(const Bt in lt)lt.hasOwnProperty(Bt)&&this.xhr_.setRequestHeader(Bt,lt[Bt].toString());return void 0!==Qe?this.xhr_.send(Qe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(G){return-1}}getResponse(){if(!this.sent_)throw fn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(G){return this.xhr_.getResponseHeader(G)}addUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",G)}removeUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",G)}}{initXhr(){this.xhr_.responseType="text"}}function ss(){return new oo}class Ia{constructor(G,Ie,Qe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=G,this._blob=Ie,this._metadata=Qe,this._mappings=Ot(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=lt=>{this._request=void 0,this._chunkMultiplier=1,lt._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=lt,this._transition("error"))},this._metadataErrorHandler=lt=>{this._request=void 0,lt._codeEquals("canceled")?this.completeTransitions_():(this._error=lt,this._transition("error"))},this._promise=new Promise((lt,Bt)=>{this._resolve=lt,this._reject=Bt,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const G=this._transferred;return Ie=>this._updateProgress(G+Ie)}_shouldDoResumable(G){return G.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(G){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Ie,Qe])=>{switch(this._state){case"running":G(Ie,Qe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((G,Ie)=>{const Qe=function Io(fe,G,Ie,Qe,lt){const Bt=G.bucketOnlyServerUrl(),mn=ei(G,Qe,lt),Gn={name:mn.fullPath},$n=Kn(Bt,fe.host,fe._protocol),Zr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Qe.size()}`,"X-Goog-Upload-Header-Content-Type":mn.contentType,"Content-Type":"application/json; charset=utf-8"},gi=Hn(mn,Ie),Yr=new mr($n,"POST",function Ii(Wi){let Oi;ws(Wi);try{Oi=Wi.getResponseHeader("X-Goog-Upload-URL")}catch(_s){Jr(!1)}return Jr(Lr(Oi)),Oi},fe.maxUploadRetryTime);return Yr.urlParams=Gn,Yr.headers=Zr,Yr.body=gi,Yr.errorHandler=An(G),Yr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),lt=this._ref.storage._makeRequest(Qe,ss,G,Ie);this._request=lt,lt.getPromise().then(Bt=>{this._request=void 0,this._uploadUrl=Bt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const G=this._uploadUrl;this._resolveToken((Ie,Qe)=>{const lt=function Di(fe,G,Ie,Qe){const $n=new mr(Ie,"POST",function Bt(yr){const Zr=ws(yr,["active","final"]);let gi=null;try{gi=yr.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Ii){Jr(!1)}gi||Jr(!1);const xi=Number(gi);return Jr(!isNaN(xi)),new hs(xi,Qe.size(),"final"===Zr)},fe.maxUploadRetryTime);return $n.headers={"X-Goog-Upload-Command":"query"},$n.errorHandler=An(G),$n}(this._ref.storage,this._ref._location,G,this._blob),Bt=this._ref.storage._makeRequest(lt,ss,Ie,Qe);this._request=Bt,Bt.getPromise().then(mn=>{mn=mn,this._request=void 0,this._updateProgress(mn.current),this._needToFetchStatus=!1,mn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const G=262144*this._chunkMultiplier,Ie=new hs(this._transferred,this._blob.size()),Qe=this._uploadUrl;this._resolveToken((lt,Bt)=>{let mn;try{mn=function Ls(fe,G,Ie,Qe,lt,Bt,mn,Gn){const $n=new hs(0,0);if(mn?($n.current=mn.current,$n.total=mn.total):($n.current=0,$n.total=Qe.size()),Qe.size()!==$n.total)throw function Dt(){return new be("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const yr=$n.total-$n.current;let Zr=yr;lt>0&&(Zr=Math.min(Zr,lt));const gi=$n.current,Yr={"X-Goog-Upload-Command":Zr===yr?"upload, finalize":"upload","X-Goog-Upload-Offset":`${$n.current}`},Wi=Qe.slice(gi,gi+Zr);if(null===Wi)throw wt();const ji=new mr(Ie,"POST",function Oi(es,hi){const us=ws(es,["active","final"]),tu=$n.current+Zr,ya=Qe.size();let Fr;return Fr="final"===us?oi(G,Bt)(es,hi):null,new hs(tu,ya,"final"===us,Fr)},G.maxUploadRetryTime);return ji.headers=Yr,ji.body=Wi.uploadData(),ji.progressCallback=Gn||null,ji.errorHandler=An(fe),ji}(this._ref._location,this._ref.storage,Qe,this._blob,G,this._mappings,Ie,this._makeProgressCallback())}catch($n){return this._error=$n,void this._transition("error")}const Gn=this._ref.storage._makeRequest(mn,ss,lt,Bt);this._request=Gn,Gn.getPromise().then($n=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress($n.current),$n.finalized?(this._metadata=$n.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((G,Ie)=>{const Qe=fr(this._ref.storage,this._ref._location,this._mappings),lt=this._ref.storage._makeRequest(Qe,ss,G,Ie);this._request=lt,lt.getPromise().then(Bt=>{this._request=void 0,this._metadata=Bt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((G,Ie)=>{const Qe=function dr(fe,G,Ie,Qe,lt){const Bt=G.bucketOnlyServerUrl(),mn={"X-Goog-Upload-Protocol":"multipart"},$n=function Gn(){let ji="";for(let es=0;es<2;es++)ji+=Math.random().toString().slice(2);return ji}();mn["Content-Type"]="multipart/related; boundary="+$n;const yr=ei(G,Qe,lt),Zr=Hn(yr,Ie),Ii=sn.getBlob("--"+$n+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Zr+"\r\n--"+$n+"\r\nContent-Type: "+yr.contentType+"\r\n\r\n",Qe,"\r\n--"+$n+"--");if(null===Ii)throw wt();const Yr={name:yr.fullPath},Wi=Kn(Bt,fe.host,fe._protocol),_s=fe.maxUploadRetryTime,as=new mr(Wi,"POST",oi(fe,Ie),_s);return as.urlParams=Yr,as.headers=mn,as.body=Ii.uploadData(),as.errorHandler=An(G),as}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),lt=this._ref.storage._makeRequest(Qe,ss,G,Ie);this._request=lt,lt.getPromise().then(Bt=>{this._request=void 0,this._metadata=Bt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(G){const Ie=this._transferred;this._transferred=G,this._transferred!==Ie&&this._notifyObservers()}_transition(G){if(this._state!==G)switch(G){case"canceling":case"pausing":this._state=G,void 0!==this._request&&this._request.cancel();break;case"running":const Ie="paused"===this._state;this._state=G,Ie&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=G,this._notifyObservers();break;case"canceled":this._error=je(),this._state=G,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const G=ii(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:G,metadata:this._metadata,task:this,ref:this._ref}}on(G,Ie,Qe,lt){const Bt=new Wo(Ie||void 0,Qe||void 0,lt||void 0);return this._addObserver(Bt),()=>{this._removeObserver(Bt)}}then(G,Ie){return this._promise.then(G,Ie)}catch(G){return this.then(null,G)}_addObserver(G){this._observers.push(G),this._notifyObserver(G)}_removeObserver(G){const Ie=this._observers.indexOf(G);-1!==Ie&&this._observers.splice(Ie,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Ie=>{this._notifyObserver(Ie)})}_finishPromise(){if(void 0!==this._resolve){let G=!0;switch(ii(this._state)){case Wr.SUCCESS:ys(this._resolve.bind(null,this.snapshot))();break;case Wr.CANCELED:case Wr.ERROR:ys(this._reject.bind(null,this._error))();break;default:G=!1}G&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(G){switch(ii(this._state)){case Wr.RUNNING:case Wr.PAUSED:G.next&&ys(G.next.bind(G,this.snapshot))();break;case Wr.SUCCESS:G.complete&&ys(G.complete.bind(G))();break;default:G.error&&ys(G.error.bind(G,this._error))()}}resume(){const G="paused"===this._state||"pausing"===this._state;return G&&this._transition("running"),G}pause(){const G="running"===this._state;return G&&this._transition("pausing"),G}cancel(){const G="running"===this._state||"pausing"===this._state;return G&&this._transition("canceling"),G}}class si{constructor(G,Ie){this._service=G,this._location=Ie instanceof Ln?Ie:Ln.makeFromUrl(Ie,G.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(G,Ie){return new si(G,Ie)}get root(){const G=new Ln(this._location.bucket,"");return this._newRef(this._service,G)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ue(this._location.path)}get storage(){return this._service}get parent(){const G=function ge(fe){if(0===fe.length)return null;const G=fe.lastIndexOf("/");return-1===G?"":fe.slice(0,G)}(this._location.path);if(null===G)return null;const Ie=new Ln(this._location.bucket,G);return new si(this._service,Ie)}_throwIfRoot(G){if(""===this._location.path)throw Yt(G)}}function Dn(fe,G,Ie){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,Je.Z)(function*(fe,G,Ie){const lt=yield zr(fe,{pageToken:Ie});G.prefixes.push(...lt.prefixes),G.items.push(...lt.items),null!=lt.nextPageToken&&(yield Dn(fe,G,lt.nextPageToken))})).apply(this,arguments)}function zr(fe,G){null!=G&&"number"==typeof G.maxResults&&Mn("options.maxResults",1,1e3,G.maxResults);const Ie=G||{},Qe=Gi(fe.storage,fe._location,"/",Ie.pageToken,Ie.maxResults);return fe.storage.makeRequestWithTokens(Qe,ss)}function yo(fe){fe._throwIfRoot("getDownloadURL");const G=function $i(fe,G,Ie){const lt=Kn(G.fullServerUrl(),fe.host,fe._protocol),mn=fe.maxOperationRetryTime,Gn=new mr(lt,"GET",function cs(fe,G){return function Ie(Qe,lt){const Bt=bt(fe,lt,G);return Jr(null!==Bt),function Kt(fe,G,Ie,Qe){const lt=jn(G);if(null===lt||!Lr(lt.downloadTokens))return null;const Bt=lt.downloadTokens;if(0===Bt.length)return null;const mn=encodeURIComponent;return Bt.split(",").map(yr=>{const gi=fe.fullPath;return Kn("/b/"+mn(fe.bucket)+"/o/"+mn(gi),Ie,Qe)+pr({alt:"media",token:yr})})[0]}(Bt,lt,fe.host,fe._protocol)}}(fe,Ie),mn);return Gn.errorHandler=Rn(G),Gn}(fe.storage,fe._location,Ot());return fe.storage.makeRequestWithTokens(G,ss).then(Ie=>{if(null===Ie)throw function Et(){return new be("no-download-url","The given file does not have any download URLs.")}();return Ie})}function os(fe,G){const Ie=function xe(fe,G){const Ie=G.split("/").filter(Qe=>Qe.length>0).join("/");return 0===fe.length?Ie:fe+"/"+Ie}(fe._location.path,G),Qe=new Ln(fe._location.bucket,Ie);return new si(fe.storage,Qe)}function jo(fe,G){if(fe instanceof Ao){const Ie=fe;if(null==Ie._bucket)throw function ct(){return new be("no-default-bucket","No default bucket found. Did you set the '"+Tt+"' property when initializing the app?")}();const Qe=new si(Ie,Ie._bucket);return null!=G?jo(Qe,G):Qe}return void 0!==G?os(fe,G):fe}function Zs(fe,G){if(G&&function ga(fe){return/^[A-Za-z]+:\/\//.test(fe)}(G)){if(fe instanceof Ao)return function Do(fe,G){return new si(fe,G)}(fe,G);throw $t("To use ref(service, url), the first argument must be a Storage instance.")}return jo(fe,G)}function ia(fe,G){const Ie=null==G?void 0:G[Tt];return null==Ie?null:Ln.makeFromBucketSpec(Ie,fe)}class Ao{constructor(G,Ie,Qe,lt,Bt){this.app=G,this._authProvider=Ie,this._appCheckProvider=Qe,this._url=lt,this._firebaseVersion=Bt,this._bucket=null,this._host=$e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=lt?Ln.makeFromBucketSpec(lt,this._host):ia(this._host,this.app.options)}get host(){return this._host}set host(G){this._host=G,this._bucket=null!=this._url?Ln.makeFromBucketSpec(this._url,G):ia(G,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(G){Mn("time",0,Number.POSITIVE_INFINITY,G),this._maxUploadRetryTime=G}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(G){Mn("time",0,Number.POSITIVE_INFINITY,G),this._maxOperationRetryTime=G}_getAuthToken(){var G=this;return(0,Je.Z)(function*(){if(G._overrideAuthToken)return G._overrideAuthToken;const Ie=G._authProvider.getImmediate({optional:!0});if(Ie){const Qe=yield Ie.getToken();if(null!==Qe)return Qe.accessToken}return null})()}_getAppCheckToken(){var G=this;return(0,Je.Z)(function*(){const Ie=G._appCheckProvider.getImmediate({optional:!0});return Ie?(yield Ie.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(G=>G.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(G){return new si(this,G)}_makeRequest(G,Ie,Qe,lt){if(this._deleted)return new Vn(cn());{const Bt=function Rr(fe,G,Ie,Qe,lt,Bt){const mn=pr(fe.urlParams),Gn=fe.url+mn,$n=Object.assign({},fe.headers);return function Ni(fe,G){G&&(fe["X-Firebase-GMPID"]=G)}($n,G),function xr(fe,G){null!==G&&G.length>0&&(fe.Authorization="Firebase "+G)}($n,Ie),function ri(fe,G){fe["X-Firebase-Storage-Version"]="webjs/"+(null!=G?G:"AppManager")}($n,Bt),function Hi(fe,G){null!==G&&(fe["X-Firebase-AppCheck"]=G)}($n,Qe),new Vi(Gn,fe.method,$n,fe.body,fe.successCodes,fe.additionalRetryCodes,fe.handler,fe.errorHandler,fe.timeout,fe.progressCallback,lt)}(G,this._appId,Qe,lt,Ie,this._firebaseVersion);return this._requests.add(Bt),Bt.getPromise().then(()=>this._requests.delete(Bt),()=>this._requests.delete(Bt)),Bt}}makeRequestWithTokens(G,Ie){var Qe=this;return(0,Je.Z)(function*(){const[lt,Bt]=yield Promise.all([Qe._getAuthToken(),Qe._getAppCheckToken()]);return Qe._makeRequest(G,Ie,lt,Bt).getPromise()})()}}const Ys="@firebase/storage";function Da(fe,G){return Zs(fe=(0,it.m9)(fe),G)}function pi(fe,{instanceIdentifier:G}){const Ie=fe.getProvider("app").getImmediate(),Qe=fe.getProvider("auth-internal"),lt=fe.getProvider("app-check-internal");return new Ao(Ie,Qe,lt,G,ft.SDK_VERSION)}!function Z(){(0,ft._registerComponent)(new He.wA("storage",pi,"PUBLIC").setMultipleInstances(!0)),(0,ft.registerVersion)(Ys,"0.9.6",""),(0,ft.registerVersion)(Ys,"0.9.6","esm2017")}();class ve{constructor(G,Ie,Qe){this._delegate=G,this.task=Ie,this.ref=Qe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class z{constructor(G,Ie){this._delegate=G,this._ref=Ie,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ve(this._delegate.snapshot,this,this._ref)}then(G,Ie){return this._delegate.then(Qe=>{if(G)return G(new ve(Qe,this,this._ref))},Ie)}on(G,Ie,Qe,lt){let Bt;return Ie&&(Bt="function"==typeof Ie?mn=>Ie(new ve(mn,this,this._ref)):{next:Ie.next?mn=>Ie.next(new ve(mn,this,this._ref)):void 0,complete:Ie.complete||void 0,error:Ie.error||void 0}),this._delegate.on(G,Bt,Qe||void 0,lt||void 0)}}class Ce{constructor(G,Ie){this._delegate=G,this._service=Ie}get prefixes(){return this._delegate.prefixes.map(G=>new ot(G,this._service))}get items(){return this._delegate.items.map(G=>new ot(G,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ot{constructor(G,Ie){this._delegate=G,this.storage=Ie}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(G){const Ie=function ks(fe,G){return os(fe,G)}(this._delegate,G);return new ot(Ie,this.storage)}get root(){return new ot(this._delegate.root,this.storage)}get parent(){const G=this._delegate.parent;return null==G?null:new ot(G,this.storage)}put(G,Ie){return this._throwIfRoot("put"),new z(function bo(fe,G,Ie){return function mt(fe,G,Ie){return fe._throwIfRoot("uploadBytesResumable"),new Ia(fe,new sn(G),Ie)}(fe=(0,it.m9)(fe),G,Ie)}(this._delegate,G,Ie),this)}putString(G,Ie=cr.RAW,Qe){this._throwIfRoot("putString");const lt=Hr(Ie,G),Bt=Object.assign({},Qe);return null==Bt.contentType&&null!=lt.contentType&&(Bt.contentType=lt.contentType),new z(new Ia(this._delegate,new sn(lt.data,!0),Bt),this)}listAll(){return function ko(fe){return function nn(fe){const G={prefixes:[],items:[]};return Dn(fe,G).then(()=>G)}(fe=(0,it.m9)(fe))}(this._delegate).then(G=>new Ce(G,this.storage))}list(G){return function Mi(fe,G){return zr(fe=(0,it.m9)(fe),G)}(this._delegate,G||void 0).then(Ie=>new Ce(Ie,this.storage))}getMetadata(){return function Ji(fe){return function di(fe){fe._throwIfRoot("getMetadata");const G=fr(fe.storage,fe._location,Ot());return fe.storage.makeRequestWithTokens(G,ss)}(fe=(0,it.m9)(fe))}(this._delegate)}updateMetadata(G){return function $a(fe,G){return function qr(fe,G){fe._throwIfRoot("updateMetadata");const Ie=function Ss(fe,G,Ie,Qe){const Bt=Kn(G.fullServerUrl(),fe.host,fe._protocol),Gn=Hn(Ie,Qe),yr=fe.maxOperationRetryTime,Zr=new mr(Bt,"PATCH",oi(fe,Qe),yr);return Zr.headers={"Content-Type":"application/json; charset=utf-8"},Zr.body=Gn,Zr.errorHandler=Rn(G),Zr}(fe.storage,fe._location,G,Ot());return fe.storage.makeRequestWithTokens(Ie,ss)}(fe=(0,it.m9)(fe),G)}(this._delegate,G)}getDownloadURL(){return function Li(fe){return yo(fe=(0,it.m9)(fe))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Wa(fe){return function ki(fe){fe._throwIfRoot("deleteObject");const G=function ai(fe,G){const Qe=Kn(G.fullServerUrl(),fe.host,fe._protocol),Gn=new mr(Qe,"DELETE",function mn($n,yr){},fe.maxOperationRetryTime);return Gn.successCodes=[200,204],Gn.errorHandler=Rn(G),Gn}(fe.storage,fe._location);return fe.storage.makeRequestWithTokens(G,ss)}(fe=(0,it.m9)(fe))}(this._delegate)}_throwIfRoot(G){if(""===this._delegate._location.path)throw Yt(G)}}class Vt{constructor(G,Ie){this.app=G,this._delegate=Ie}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(G){if(qt(G))throw $t("ref() expected a child path but got a URL, use refFromURL instead.");return new ot(Da(this._delegate,G),this)}refFromURL(G){if(!qt(G))throw $t("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ln.makeFromUrl(G,this._delegate.host)}catch(Ie){throw $t("refFromUrl() expected a valid full URL but got an invalid one.")}return new ot(Da(this._delegate,G),this)}setMaxUploadRetryTime(G){this._delegate.maxUploadRetryTime=G}setMaxOperationRetryTime(G){this._delegate.maxOperationRetryTime=G}useEmulator(G,Ie,Qe={}){!function qo(fe,G,Ie,Qe={}){!function Ci(fe,G,Ie,Qe={}){fe.host=`${G}:${Ie}`,fe._protocol="http";const{mockUserToken:lt}=Qe;lt&&(fe._overrideAuthToken="string"==typeof lt?lt:(0,it.Sg)(lt,fe.app.options.projectId))}(fe,G,Ie,Qe)}(this._delegate,G,Ie,Qe)}}function qt(fe){return/^[A-Za-z]+:\/\//.test(fe)}function Sr(fe,{instanceIdentifier:G}){const Ie=fe.getProvider("app-compat").getImmediate(),Qe=fe.getProvider("storage").getImmediate({identifier:G});return new Vt(Ie,Qe)}!function jr(fe){const G={TaskState:Wr,TaskEvent:Cs,StringFormat:cr,Storage:Vt,Reference:ot};fe.INTERNAL.registerComponent(new He.wA("storage-compat",Sr,"PUBLIC").setServiceProps(G).setMultipleInstances(!0)),fe.registerVersion("@firebase/storage-compat","0.1.14")}(et.Z);var bi=U(440);function te(fe){const G=function Fi(fe){return new E.y(G=>{const Ie=mn=>G.next(mn);Ie(fe.snapshot);const Bt=fe.on("state_changed",Ie);return fe.then(mn=>{Ie(mn),G.complete()},mn=>{Ie(fe.snapshot),(mn=>{G.error(mn)})(mn)}),function(){Bt()}}).pipe(function Ge(fe,G=Ne.z){return(0,Pe.e)((Ie,Qe)=>{let lt=null,Bt=null,mn=null;const Gn=()=>{if(lt){lt.unsubscribe(),lt=null;const yr=Bt;Bt=null,Qe.next(yr)}};function $n(){const yr=mn+fe,Zr=G.now();if(Zr<yr)return lt=this.schedule(void 0,yr-Zr),void Qe.add(lt);Gn()}Ie.subscribe((0,ke.x)(Qe,yr=>{Bt=yr,mn=G.now(),lt||(lt=G.schedule($n,fe),Qe.add(lt))},()=>{Gn(),Qe.complete()},void 0,()=>{Bt=lt=null}))})}(0))}(fe);return{task:fe,then:fe.then.bind(fe),catch:fe.catch.bind(fe),pause:fe.pause.bind(fe),cancel:fe.cancel.bind(fe),resume:fe.resume.bind(fe),snapshotChanges:()=>G,percentageChanges:()=>G.pipe((0,Y.U)(Ie=>Ie.bytesTransferred/Ie.totalBytes*100))}}function $(fe){return{getDownloadURL:()=>(0,k.of)(void 0).pipe(pe.fc,(0,Xe.w)(()=>fe.getDownloadURL()),pe.iC),getMetadata:()=>(0,k.of)(void 0).pipe(pe.fc,(0,Xe.w)(()=>fe.getMetadata()),pe.iC),delete:()=>(0,oe.D)(fe.delete()),child:G=>$(fe.child(G)),updateMetadata:G=>(0,oe.D)(fe.updateMetadata(G)),put:(G,Ie)=>te(fe.put(G,Ie)),putString:(G,Ie,Qe)=>te(fe.putString(G,Ie,Qe)),list:G=>(0,oe.D)(fe.list(G)),listAll:()=>(0,oe.D)(fe.listAll())}}U(127);const B=new Me.OlP("angularfire2.storageBucket"),we=new Me.OlP("angularfire2.storage.maxUploadRetryTime"),Zt=new Me.OlP("angularfire2.storage.maxOperationRetryTime"),tr=new Me.OlP("angularfire2.storage.use-emulator");let Pi=(()=>{class fe{constructor(Ie,Qe,lt,Bt,mn,Gn,$n,yr,Zr,gi){const xi=(0,Oe.on)(Ie,mn,Qe);this.storage=(0,Oe.cc)(`${xi.name}.storage.${lt}`,"AngularFireStorage",xi.name,()=>{const Ii=mn.runOutsideAngular(()=>xi.storage(lt||void 0)),Yr=Zr;return Yr&&Ii.useEmulator(...Yr),$n&&Ii.setMaxUploadRetryTime($n),yr&&Ii.setMaxOperationRetryTime(yr),Ii},[$n,yr])}ref(Ie){return $(this.storage.ref(Ie))}refFromURL(Ie){return $(this.storage.refFromURL(Ie))}upload(Ie,Qe,lt){return $(this.storage.ref(Ie)).put(Qe,lt)}}return fe.\u0275fac=function(Ie){return new(Ie||fe)(Me.LFG(Oe.Dh),Me.LFG(Oe.xv,8),Me.LFG(B,8),Me.LFG(Me.Lbi),Me.LFG(Me.R0b),Me.LFG(pe.HU),Me.LFG(we,8),Me.LFG(Zt,8),Me.LFG(tr,8),Me.LFG(bi.nm,8))},fe.\u0275prov=Me.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"any"}),fe})()},2011:(Gt,rt,U)=>{"use strict";U.d(rt,{Dh:()=>Y,GT:()=>ke,cc:()=>Je,hO:()=>et,on:()=>pe,pX:()=>Pe,xv:()=>Xe});var E=U(5e3),k=U(127),oe=U(5813);Gt=U.hmd(Gt);const Ne=["ngOnDestroy"],Pe=($e,Tt,ie,ne={})=>new Proxy($e,{get:(be,Ke)=>ie.runOutsideAngular(()=>{var gt;if($e[Ke])return(null===(gt=null==ne?void 0:ne.spy)||void 0===gt?void 0:gt.get)&&ne.spy.get(Ke,$e[Ke]),$e[Ke];if(Ne.indexOf(Ke)>-1)return()=>{};const xt=Tt.toPromise().then(X=>{const he=X&&X[Ke];return"function"==typeof he?he.bind(X):he&&he.then?he.then(J=>ie.run(()=>J)):ie.run(()=>he)});return new Proxy(()=>{},{get:(X,he)=>xt[he],apply:(X,he,J)=>xt.then(Ae=>{var Ee;const je=Ae&&Ae(...J);return(null===(Ee=null==ne?void 0:ne.spy)||void 0===Ee?void 0:Ee.apply)&&ne.spy.apply(Ke,J,je),je})})})}),ke=($e,Tt)=>{Tt.forEach(ie=>{Object.getOwnPropertyNames(ie.prototype||ie).forEach(ne=>{Object.defineProperty($e.prototype,ne,Object.getOwnPropertyDescriptor(ie.prototype||ie,ne))})})};class Ge{constructor(Tt){return Tt}}const Y=new E.OlP("angularfire2.app.options"),Xe=new E.OlP("angularfire2.app.name");function pe($e,Tt,ie){const be="object"==typeof ie&&ie||{};be.name=be.name||"string"==typeof ie&&ie||"[DEFAULT]";const gt=k.Z.apps.filter(xt=>xt&&xt.name===be.name)[0]||Tt.runOutsideAngular(()=>k.Z.initializeApp($e,be));try{JSON.stringify($e)!==JSON.stringify(gt.options)&&Me("error",`${gt.name} Firebase App already initialized with different options${Gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(xt){}return new Ge(gt)}const Me=($e,...Tt)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[$e](...Tt)},Oe={provide:Ge,useFactory:pe,deps:[Y,E.R0b,[new E.FiY,Xe]]};let et=(()=>{class $e{constructor(ie){k.Z.registerVersion("angularfire",oe.q4.full,"core"),k.Z.registerVersion("angularfire",oe.q4.full,"app-compat"),k.Z.registerVersion("angular",E.q4F.full,ie.toString())}static initializeApp(ie,ne){return{ngModule:$e,providers:[{provide:Y,useValue:ie},{provide:Xe,useValue:ne}]}}}return $e.\u0275fac=function(ie){return new(ie||$e)(E.LFG(E.Lbi))},$e.\u0275mod=E.oAB({type:$e}),$e.\u0275inj=E.cJS({providers:[Oe]}),$e})();function Je($e,Tt,ie,ne,be){const[,Ke,gt]=globalThis.\u0275AngularfireInstanceCache.find(xt=>xt[0]===$e)||[];if(Ke)return function ft($e,Tt){try{return $e.toString()===Tt.toString()}catch(ie){return $e===Tt}}(be,gt)||(He("error",`${Tt} was already initialized on the ${ie} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),He("warn",{is:be,was:gt})),Ke;{const xt=ne();return globalThis.\u0275AngularfireInstanceCache.push([$e,xt,be]),xt}}const it=!!Gt.hot,He=($e,...Tt)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[$e](...Tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Gt,rt,U)=>{"use strict";U.d(rt,{q4:()=>Cc,iC:()=>ea,fc:()=>Jo,HU:()=>_n,vb:()=>Ef,JM:()=>ui});var E=U(5e3),k=U(5867),oe=U(5861),Ne=U(9681),Pe=U(2090),ke=U(4859),Ge=U(1877),Y=U(8766);const Xe="@firebase/installations",Oe="w:0.5.9",et="FIS_v2",Tt=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ie(W){return W instanceof Pe.ZR&&W.code.includes("request-failed")}function ne({projectId:W}){return`https://firebaseinstallations.googleapis.com/v1/projects/${W}/installations`}function be(W){return{token:W.token,requestStatus:2,expiresIn:Ae(W.expiresIn),creationTime:Date.now()}}function Ke(W,Q){return gt.apply(this,arguments)}function gt(){return(gt=(0,oe.Z)(function*(W,Q){const qe=(yield Q.json()).error;return Tt.create("request-failed",{requestName:W,serverCode:qe.code,serverMessage:qe.message,serverStatus:qe.status})})).apply(this,arguments)}function xt({apiKey:W}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":W})}function X(W,{refreshToken:Q}){const Se=xt(W);return Se.append("Authorization",function Ee(W){return`${et} ${W}`}(Q)),Se}function he(W){return J.apply(this,arguments)}function J(){return(J=(0,oe.Z)(function*(W){const Q=yield W();return Q.status>=500&&Q.status<600?W():Q})).apply(this,arguments)}function Ae(W){return Number(W.replace("s","000"))}function je(W,Q){return We.apply(this,arguments)}function We(){return(We=(0,oe.Z)(function*({appConfig:W,heartbeatServiceProvider:Q},{fid:Se}){const qe=ne(W),Lt=xt(W),Ut=Q.getImmediate({optional:!0});if(Ut){const Nr=yield Ut.getHeartbeatsHeader();Nr&&Lt.append("x-firebase-client",Nr)}const sr={method:"POST",headers:Lt,body:JSON.stringify({fid:Se,authVersion:et,appId:W.appId,sdkVersion:Oe})},or=yield he(()=>fetch(qe,sr));if(or.ok){const Nr=yield or.json();return{fid:Nr.fid||Se,registrationStatus:2,refreshToken:Nr.refreshToken,authToken:be(Nr.authToken)}}throw yield Ke("Create Installation",or)})).apply(this,arguments)}function St(W){return new Promise(Q=>{setTimeout(Q,W)})}const wt=/^[cdef][\w-]{21}$/;function Et(){try{const W=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(W),W[0]=112+W[0]%16;const Se=function $t(W){return function ct(W){return btoa(String.fromCharCode(...W)).replace(/\+/g,"-").replace(/\//g,"_")}(W).substr(0,22)}(W);return wt.test(Se)?Se:""}catch(W){return""}}function cn(W){return`${W.appName}!${W.appId}`}const Yt=new Map;function Nt(W,Q){const Se=cn(W);Vn(Se,Q),function Ar(W,Q){const Se=function Cr(){return!vr&&"BroadcastChannel"in self&&(vr=new BroadcastChannel("[Firebase] FID Change"),vr.onmessage=W=>{Vn(W.data.key,W.data.fid)}),vr}();Se&&Se.postMessage({key:W,fid:Q}),function kr(){0===Yt.size&&vr&&(vr.close(),vr=null)}()}(Se,Q)}function Vn(W,Q){const Se=Yt.get(W);if(Se)for(const qe of Se)qe(Q)}let vr=null;const Mr="firebase-installations-store";let Pr=null;function Mn(){return Pr||(Pr=(0,Y.X3)("firebase-installations-database",1,{upgrade:(W,Q)=>{0===Q&&W.createObjectStore(Mr)}})),Pr}function Kn(W,Q){return pr.apply(this,arguments)}function pr(){return(pr=(0,oe.Z)(function*(W,Q){const Se=cn(W),Lt=(yield Mn()).transaction(Mr,"readwrite"),Ut=Lt.objectStore(Mr),yn=yield Ut.get(Se);return yield Ut.put(Q,Se),yield Lt.done,(!yn||yn.fid!==Q.fid)&&Nt(W,Q.fid),Q})).apply(this,arguments)}function Cn(W){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,oe.Z)(function*(W){const Q=cn(W),qe=(yield Mn()).transaction(Mr,"readwrite");yield qe.objectStore(Mr).delete(Q),yield qe.done})).apply(this,arguments)}function hr(W,Q){return xr.apply(this,arguments)}function xr(){return(xr=(0,oe.Z)(function*(W,Q){const Se=cn(W),Lt=(yield Mn()).transaction(Mr,"readwrite"),Ut=Lt.objectStore(Mr),yn=yield Ut.get(Se),sr=Q(yn);return void 0===sr?yield Ut.delete(Se):yield Ut.put(sr,Se),yield Lt.done,sr&&(!yn||yn.fid!==sr.fid)&&Nt(W,sr.fid),sr})).apply(this,arguments)}function ri(W){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,oe.Z)(function*(W){let Q;const Se=yield hr(W.appConfig,qe=>{const Lt=Hi(qe),Ut=Rr(W,Lt);return Q=Ut.registrationPromise,Ut.installationEntry});return""===Se.fid?{installationEntry:yield Q}:{installationEntry:Se,registrationPromise:Q}})).apply(this,arguments)}function Hi(W){return xn(W||{fid:Et(),registrationStatus:0})}function Rr(W,Q){if(0===Q.registrationStatus){if(!navigator.onLine)return{installationEntry:Q,registrationPromise:Promise.reject(Tt.create("app-offline"))};const Se={fid:Q.fid,registrationStatus:1,registrationTime:Date.now()},qe=function Nn(W,Q){return Jn.apply(this,arguments)}(W,Se);return{installationEntry:Se,registrationPromise:qe}}return 1===Q.registrationStatus?{installationEntry:Q,registrationPromise:ci(W)}:{installationEntry:Q}}function Jn(){return(Jn=(0,oe.Z)(function*(W,Q){try{const Se=yield je(W,Q);return Kn(W.appConfig,Se)}catch(Se){throw ie(Se)&&409===Se.customData.serverCode?yield Cn(W.appConfig):yield Kn(W.appConfig,{fid:Q.fid,registrationStatus:0}),Se}})).apply(this,arguments)}function ci(W){return yi.apply(this,arguments)}function yi(){return(yi=(0,oe.Z)(function*(W){let Q=yield cr(W.appConfig);for(;1===Q.registrationStatus;)yield St(100),Q=yield cr(W.appConfig);if(0===Q.registrationStatus){const{installationEntry:Se,registrationPromise:qe}=yield ri(W);return qe||Se}return Q})).apply(this,arguments)}function cr(W){return hr(W,Q=>{if(!Q)throw Tt.create("installation-not-found");return xn(Q)})}function xn(W){return function Hr(W){return 1===W.registrationStatus&&W.registrationTime+1e4<Date.now()}(W)?{fid:W.fid,registrationStatus:0}:W}function _i(W,Q){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,oe.Z)(function*({appConfig:W,heartbeatServiceProvider:Q},Se){const qe=ut(W,Se),Lt=X(W,Se),Ut=Q.getImmediate({optional:!0});if(Ut){const Nr=yield Ut.getHeartbeatsHeader();Nr&&Lt.append("x-firebase-client",Nr)}const sr={method:"POST",headers:Lt,body:JSON.stringify({installation:{sdkVersion:Oe,appId:W.appId}})},or=yield he(()=>fetch(qe,sr));if(or.ok)return be(yield or.json());throw yield Ke("Generate Auth Token",or)})).apply(this,arguments)}function ut(W,{fid:Q}){return`${ne(W)}/${Q}/authTokens:generate`}function dt(W){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,oe.Z)(function*(W,Q=!1){let Se;const qe=yield hr(W.appConfig,Ut=>{if(!xe(Ut))throw Tt.create("not-registered");const yn=Ut.authToken;if(!Q&&Ue(yn))return Ut;if(1===yn.requestStatus)return Se=at(W,Q),Ut;{if(!navigator.onLine)throw Tt.create("app-offline");const sr=on(Ut);return Se=jn(W,sr),sr}});return Se?yield Se:qe.authToken})).apply(this,arguments)}function at(W,Q){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,oe.Z)(function*(W,Q){let Se=yield sn(W.appConfig);for(;1===Se.authToken.requestStatus;)yield St(100),Se=yield sn(W.appConfig);const qe=Se.authToken;return 0===qe.requestStatus?dt(W,Q):qe})).apply(this,arguments)}function sn(W){return hr(W,Q=>{if(!xe(Q))throw Tt.create("not-registered");return function Qn(W){return 1===W.requestStatus&&W.requestTime+1e4<Date.now()}(Q.authToken)?Object.assign(Object.assign({},Q),{authToken:{requestStatus:0}}):Q})}function jn(W,Q){return ge.apply(this,arguments)}function ge(){return(ge=(0,oe.Z)(function*(W,Q){try{const Se=yield _i(W,Q),qe=Object.assign(Object.assign({},Q),{authToken:Se});return yield Kn(W.appConfig,qe),Se}catch(Se){if(!ie(Se)||401!==Se.customData.serverCode&&404!==Se.customData.serverCode){const qe=Object.assign(Object.assign({},Q),{authToken:{requestStatus:0}});yield Kn(W.appConfig,qe)}else yield Cn(W.appConfig);throw Se}})).apply(this,arguments)}function xe(W){return void 0!==W&&2===W.registrationStatus}function Ue(W){return 2===W.requestStatus&&!function At(W){const Q=Date.now();return Q<W.creationTime||W.creationTime+W.expiresIn<Q+36e5}(W)}function on(W){const Q={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},W),{authToken:Q})}function Ot(){return(Ot=(0,oe.Z)(function*(W){const Q=W,{installationEntry:Se,registrationPromise:qe}=yield ri(Q);return qe?qe.catch(console.error):dt(Q).catch(console.error),Se.fid})).apply(this,arguments)}function Be(){return(Be=(0,oe.Z)(function*(W,Q=!1){const Se=W;return yield bt(Se),(yield dt(Se,Q)).token})).apply(this,arguments)}function bt(W){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,oe.Z)(function*(W){const{registrationPromise:Q}=yield ri(W);Q&&(yield Q)})).apply(this,arguments)}function ls(W){return Tt.create("missing-app-config-values",{valueName:W})}const cs="installations",Rn=W=>{const Q=W.getProvider("app").getImmediate(),Se=function oi(W){if(!W||!W.options)throw ls("App Configuration");if(!W.name)throw ls("App Name");const Q=["projectId","apiKey","appId"];for(const Se of Q)if(!W.options[Se])throw ls(Se);return{appName:W.name,projectId:W.options.projectId,apiKey:W.options.apiKey,appId:W.options.appId}}(Q);return{app:Q,appConfig:Se,heartbeatServiceProvider:(0,Ne._getProvider)(Q,"heartbeat"),_delete:()=>Promise.resolve()}},fr=W=>{const Q=W.getProvider("app").getImmediate(),Se=(0,Ne._getProvider)(Q,cs).getImmediate();return{getId:()=>function Qr(W){return Ot.apply(this,arguments)}(Se),getToken:Lt=>function ht(W){return Be.apply(this,arguments)}(Se,Lt)}};(function Gi(){(0,Ne._registerComponent)(new ke.wA(cs,Rn,"PUBLIC")),(0,Ne._registerComponent)(new ke.wA("installations-internal",fr,"PRIVATE"))})(),(0,Ne.registerVersion)(Xe,"0.5.9"),(0,Ne.registerVersion)(Xe,"0.5.9","esm2017");const ds="@firebase/remote-config",ei=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pa{constructor(Q,Se,qe,Lt){this.client=Q,this.storage=Se,this.storageCache=qe,this.logger=Lt}isCachedDataFresh(Q,Se){if(!Se)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const qe=Date.now()-Se,Lt=qe<=Q;return this.logger.debug(`Config fetch cache check. Cache age millis: ${qe}. Cache max age millis (minimumFetchIntervalMillis setting): ${Q}. Is cache hit: ${Lt}.`),Lt}fetch(Q){var Se=this;return(0,oe.Z)(function*(){const[qe,Lt]=yield Promise.all([Se.storage.getLastSuccessfulFetchTimestampMillis(),Se.storage.getLastSuccessfulFetchResponse()]);if(Lt&&Se.isCachedDataFresh(Q.cacheMaxAgeMillis,qe))return Lt;Q.eTag=Lt&&Lt.eTag;const Ut=yield Se.client.fetch(Q),yn=[Se.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ut.status&&yn.push(Se.storage.setLastSuccessfulFetchResponse(Ut)),yield Promise.all(yn),Ut})()}}function Ia(W=navigator){return W.languages&&W.languages[0]||W.language}class si{constructor(Q,Se,qe,Lt,Ut,yn){this.firebaseInstallations=Q,this.sdkVersion=Se,this.namespace=qe,this.projectId=Lt,this.apiKey=Ut,this.appId=yn}fetch(Q){var Se=this;return(0,oe.Z)(function*(){const[qe,Lt]=yield Promise.all([Se.firebaseInstallations.getId(),Se.firebaseInstallations.getToken()]),yn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Se.projectId}/namespaces/${Se.namespace}:fetch?key=${Se.apiKey}`,sr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Q.eTag||"*"},or={sdk_version:Se.sdkVersion,app_instance_id:qe,app_instance_id_token:Lt,app_id:Se.appId,language_code:Ia()},Nr={method:"POST",headers:sr,body:JSON.stringify(or)},Si=fetch(yn,Nr),Tr=new Promise((Oa,ca)=>{Q.signal.addEventListener(()=>{const cl=new Error("The operation was aborted.");cl.name="AbortError",ca(cl)})});let po;try{yield Promise.race([Si,Tr]),po=yield Si}catch(Oa){let ca="fetch-client-network";throw"AbortError"===Oa.name&&(ca="fetch-timeout"),ei.create(ca,{originalErrorMessage:Oa.message})}let li=po.status;const Cu=po.headers.get("ETag")||void 0;let Hs,vi;if(200===po.status){let Oa;try{Oa=yield po.json()}catch(ca){throw ei.create("fetch-client-parse",{originalErrorMessage:ca.message})}Hs=Oa.entries,vi=Oa.state}if("INSTANCE_STATE_UNSPECIFIED"===vi?li=500:"NO_CHANGE"===vi?li=304:("NO_TEMPLATE"===vi||"EMPTY_CONFIG"===vi)&&(Hs={}),304!==li&&200!==li)throw ei.create("fetch-status",{httpStatus:li});return{status:li,eTag:Cu,config:Hs}})()}}class Ct{constructor(Q,Se){this.client=Q,this.storage=Se}fetch(Q){var Se=this;return(0,oe.Z)(function*(){const qe=(yield Se.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Se.attemptFetch(Q,qe)})()}attemptFetch(Q,{throttleEndTimeMillis:Se,backoffCount:qe}){var Lt=this;return(0,oe.Z)(function*(){yield function ao(W,Q){return new Promise((Se,qe)=>{const Lt=Math.max(Q-Date.now(),0),Ut=setTimeout(Se,Lt);W.addEventListener(()=>{clearTimeout(Ut),qe(ei.create("fetch-throttle",{throttleEndTimeMillis:Q}))})})}(Q.signal,Se);try{const Ut=yield Lt.client.fetch(Q);return yield Lt.storage.deleteThrottleMetadata(),Ut}catch(Ut){if(!function ra(W){if(!(W instanceof Pe.ZR&&W.customData))return!1;const Q=Number(W.customData.httpStatus);return 429===Q||500===Q||503===Q||504===Q}(Ut))throw Ut;const yn={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(qe),backoffCount:qe+1};return yield Lt.storage.setThrottleMetadata(yn),Lt.attemptFetch(Q,yn)}})()}}class nn{constructor(Q,Se,qe,Lt,Ut){this.app=Q,this._client=Se,this._storageCache=qe,this._storage=Lt,this._logger=Ut,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dn(W,Q){const Se=W.target.error||void 0;return ei.create(Q,{originalErrorMessage:Se&&Se.message})}const Sn="app_namespace_store";class yo{constructor(Q,Se,qe,Lt=function qr(){return new Promise((W,Q)=>{try{const Se=indexedDB.open("firebase_remote_config",1);Se.onerror=qe=>{Q(Dn(qe,"storage-open"))},Se.onsuccess=qe=>{W(qe.target.result)},Se.onupgradeneeded=qe=>{0===qe.oldVersion&&qe.target.result.createObjectStore(Sn,{keyPath:"compositeKey"})}}catch(Se){Q(ei.create("storage-open",{originalErrorMessage:Se}))}})}()){this.appId=Q,this.appName=Se,this.namespace=qe,this.openDbPromise=Lt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Q){return this.set("last_fetch_status",Q)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Q){return this.set("last_successful_fetch_timestamp_millis",Q)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Q){return this.set("last_successful_fetch_response",Q)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Q){return this.set("active_config",Q)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Q){return this.set("active_config_etag",Q)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Q){return this.set("throttle_metadata",Q)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Q){var Se=this;return(0,oe.Z)(function*(){const qe=yield Se.openDbPromise;return new Promise((Lt,Ut)=>{const sr=qe.transaction([Sn],"readonly").objectStore(Sn),or=Se.createCompositeKey(Q);try{const Nr=sr.get(or);Nr.onerror=Si=>{Ut(Dn(Si,"storage-get"))},Nr.onsuccess=Si=>{const Tr=Si.target.result;Lt(Tr?Tr.value:void 0)}}catch(Nr){Ut(ei.create("storage-get",{originalErrorMessage:Nr&&Nr.message}))}})})()}set(Q,Se){var qe=this;return(0,oe.Z)(function*(){const Lt=yield qe.openDbPromise;return new Promise((Ut,yn)=>{const or=Lt.transaction([Sn],"readwrite").objectStore(Sn),Nr=qe.createCompositeKey(Q);try{const Si=or.put({compositeKey:Nr,value:Se});Si.onerror=Tr=>{yn(Dn(Tr,"storage-set"))},Si.onsuccess=()=>{Ut()}}catch(Si){yn(ei.create("storage-set",{originalErrorMessage:Si&&Si.message}))}})})()}delete(Q){var Se=this;return(0,oe.Z)(function*(){const qe=yield Se.openDbPromise;return new Promise((Lt,Ut)=>{const sr=qe.transaction([Sn],"readwrite").objectStore(Sn),or=Se.createCompositeKey(Q);try{const Nr=sr.delete(or);Nr.onerror=Si=>{Ut(Dn(Si,"storage-delete"))},Nr.onsuccess=()=>{Lt()}}catch(Nr){Ut(ei.create("storage-delete",{originalErrorMessage:Nr&&Nr.message}))}})})()}createCompositeKey(Q){return[this.appId,this.appName,this.namespace,Q].join()}}class ki{constructor(Q){this.storage=Q}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Q=this;return(0,oe.Z)(function*(){const Se=Q.storage.getLastFetchStatus(),qe=Q.storage.getLastSuccessfulFetchTimestampMillis(),Lt=Q.storage.getActiveConfig(),Ut=yield Se;Ut&&(Q.lastFetchStatus=Ut);const yn=yield qe;yn&&(Q.lastSuccessfulFetchTimestampMillis=yn);const sr=yield Lt;sr&&(Q.activeConfig=sr)})()}setLastFetchStatus(Q){return this.lastFetchStatus=Q,this.storage.setLastFetchStatus(Q)}setLastSuccessfulFetchTimestampMillis(Q){return this.lastSuccessfulFetchTimestampMillis=Q,this.storage.setLastSuccessfulFetchTimestampMillis(Q)}setActiveConfig(Q){return this.activeConfig=Q,this.storage.setActiveConfig(Q)}}function jo(){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,oe.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch(W){return!1}})).apply(this,arguments)}!function os(){(0,Ne._registerComponent)(new ke.wA("remote-config",function W(Q,{instanceIdentifier:Se}){const qe=Q.getProvider("app").getImmediate(),Lt=Q.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ei.create("registration-window");if(!(0,Pe.hl)())throw ei.create("indexed-db-unavailable");const{projectId:Ut,apiKey:yn,appId:sr}=qe.options;if(!Ut)throw ei.create("registration-project-id");if(!yn)throw ei.create("registration-api-key");if(!sr)throw ei.create("registration-app-id");const or=new yo(sr,qe.name,Se=Se||"firebase"),Nr=new ki(or),Si=new Ge.Yd(ds);Si.logLevel=Ge.in.ERROR;const Tr=new si(Lt,Ne.SDK_VERSION,Se,Ut,yn,sr),po=new Ct(Tr,or),li=new pa(po,or,Nr,Si),Cu=new nn(qe,li,Nr,or,Si);return function ii(W){const Q=(0,Pe.m9)(W);Q._initializePromise||(Q._initializePromise=Q._storageCache.loadFromStorage().then(()=>{Q._isInitializationComplete=!0}))}(Cu),Cu},"PUBLIC").setMultipleInstances(!0)),(0,Ne.registerVersion)(ds,"0.3.8"),(0,Ne.registerVersion)(ds,"0.3.8","esm2017")}();const ia="/firebase-messaging-sw.js",Ci="/firebase-cloud-messaging-push-scope",Ao="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_o="google.c.a.c_id",ma="google.c.a.c_l",Ga="google.c.a.ts",sa="google.c.a.e";var bo=(()=>{return(W=bo||(bo={})).PUSH_RECEIVED="push-received",W.NOTIFICATION_CLICKED="notification-clicked",bo;var W})();function Ji(W){const Q=new Uint8Array(W);return btoa(String.fromCharCode(...Q)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $a(W){const Se=(W+"=".repeat((4-W.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),qe=atob(Se),Lt=new Uint8Array(qe.length);for(let Ut=0;Ut<qe.length;++Ut)Lt[Ut]=qe.charCodeAt(Ut);return Lt}const Mi="fcm_token_details_db",Li="fcm_token_object_Store";function Wa(W){return Da.apply(this,arguments)}function Da(){return Da=(0,oe.Z)(function*(W){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ut=>Ut.name).includes(Mi))return null;let Q=null;return(yield(0,Y.X3)(Mi,5,{upgrade:(qe=(0,oe.Z)(function*(Lt,Ut,yn,sr){var or;if(Ut<2||!Lt.objectStoreNames.contains(Li))return;const Nr=sr.objectStore(Li),Si=yield Nr.index("fcmSenderId").get(W);if(yield Nr.clear(),Si)if(2===Ut){const Tr=Si;if(!Tr.auth||!Tr.p256dh||!Tr.endpoint)return;Q={token:Tr.fcmToken,createTime:null!==(or=Tr.createTime)&&void 0!==or?or:Date.now(),subscriptionOptions:{auth:Tr.auth,p256dh:Tr.p256dh,endpoint:Tr.endpoint,swScope:Tr.swScope,vapidKey:"string"==typeof Tr.vapidKey?Tr.vapidKey:Ji(Tr.vapidKey)}}}else if(3===Ut){const Tr=Si;Q={token:Tr.fcmToken,createTime:Tr.createTime,subscriptionOptions:{auth:Ji(Tr.auth),p256dh:Ji(Tr.p256dh),endpoint:Tr.endpoint,swScope:Tr.swScope,vapidKey:Ji(Tr.vapidKey)}}}else if(4===Ut){const Tr=Si;Q={token:Tr.fcmToken,createTime:Tr.createTime,subscriptionOptions:{auth:Ji(Tr.auth),p256dh:Ji(Tr.p256dh),endpoint:Tr.endpoint,swScope:Tr.swScope,vapidKey:Ji(Tr.vapidKey)}}}}),function(Ut,yn,sr,or){return qe.apply(this,arguments)})})).close(),yield(0,Y.Lj)(Mi),yield(0,Y.Lj)("fcm_vapid_details_db"),yield(0,Y.Lj)("undefined"),ks(Q)?Q:null;var qe}),Da.apply(this,arguments)}function ks(W){if(!W||!W.subscriptionOptions)return!1;const{subscriptionOptions:Q}=W;return"number"==typeof W.createTime&&W.createTime>0&&"string"==typeof W.token&&W.token.length>0&&"string"==typeof Q.auth&&Q.auth.length>0&&"string"==typeof Q.p256dh&&Q.p256dh.length>0&&"string"==typeof Q.endpoint&&Q.endpoint.length>0&&"string"==typeof Q.swScope&&Q.swScope.length>0&&"string"==typeof Q.vapidKey&&Q.vapidKey.length>0}const fs="firebase-messaging-store";let va=null;function pi(){return va||(va=(0,Y.X3)("firebase-messaging-database",1,{upgrade:(W,Q)=>{0===Q&&W.createObjectStore(fs)}})),va}function Z(W){return ve.apply(this,arguments)}function ve(){return(ve=(0,oe.Z)(function*(W){const Q=qt(W),qe=yield(yield pi()).transaction(fs).objectStore(fs).get(Q);if(qe)return qe;{const Lt=yield Wa(W.appConfig.senderId);if(Lt)return yield z(W,Lt),Lt}})).apply(this,arguments)}function z(W,Q){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,oe.Z)(function*(W,Q){const Se=qt(W),Lt=(yield pi()).transaction(fs,"readwrite");return yield Lt.objectStore(fs).put(Q,Se),yield Lt.done,Q})).apply(this,arguments)}function ot(W){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,oe.Z)(function*(W){const Q=qt(W),qe=(yield pi()).transaction(fs,"readwrite");yield qe.objectStore(fs).delete(Q),yield qe.done})).apply(this,arguments)}function qt({appConfig:W}){return W.appId}const br=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ar(W,Q){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,oe.Z)(function*(W,Q){const Se=yield $(W),qe=we(Q),Lt={method:"POST",headers:Se,body:JSON.stringify(qe)};let Ut;try{Ut=yield(yield fetch(te(W.appConfig),Lt)).json()}catch(yn){throw br.create("token-subscribe-failed",{errorInfo:yn})}if(Ut.error)throw br.create("token-subscribe-failed",{errorInfo:Ut.error.message});if(!Ut.token)throw br.create("token-subscribe-no-token");return Ut.token})).apply(this,arguments)}function jr(W,Q){return bi.apply(this,arguments)}function bi(){return(bi=(0,oe.Z)(function*(W,Q){const Se=yield $(W),qe=we(Q.subscriptionOptions),Lt={method:"PATCH",headers:Se,body:JSON.stringify(qe)};let Ut;try{Ut=yield(yield fetch(`${te(W.appConfig)}/${Q.token}`,Lt)).json()}catch(yn){throw br.create("token-update-failed",{errorInfo:yn})}if(Ut.error)throw br.create("token-update-failed",{errorInfo:Ut.error.message});if(!Ut.token)throw br.create("token-update-no-token");return Ut.token})).apply(this,arguments)}function Ti(W,Q){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,oe.Z)(function*(W,Q){const qe={method:"DELETE",headers:yield $(W)};try{const Ut=yield(yield fetch(`${te(W.appConfig)}/${Q}`,qe)).json();if(Ut.error)throw br.create("token-unsubscribe-failed",{errorInfo:Ut.error.message})}catch(Lt){throw br.create("token-unsubscribe-failed",{errorInfo:Lt})}})).apply(this,arguments)}function te({projectId:W}){return`https://fcmregistrations.googleapis.com/v1/projects/${W}/registrations`}function $(W){return B.apply(this,arguments)}function B(){return(B=(0,oe.Z)(function*({appConfig:W,installations:Q}){const Se=yield Q.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":W.apiKey,"x-goog-firebase-installations-auth":`FIS ${Se}`})})).apply(this,arguments)}function we({p256dh:W,auth:Q,endpoint:Se,vapidKey:qe}){const Lt={web:{endpoint:Se,auth:Q,p256dh:W}};return qe!==Ao&&(Lt.web.applicationPubKey=qe),Lt}const Zt=6048e5;function tr(W){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,oe.Z)(function*(W){const Q=yield Qe(W.swRegistration,W.vapidKey),Se={vapidKey:W.vapidKey,swScope:W.swRegistration.scope,endpoint:Q.endpoint,auth:Ji(Q.getKey("auth")),p256dh:Ji(Q.getKey("p256dh"))},qe=yield Z(W.firebaseDependencies);if(qe){if(Bt(qe.subscriptionOptions,Se))return Date.now()>=qe.createTime+Zt?_u(W,{token:qe.token,createTime:Date.now(),subscriptionOptions:Se}):qe.token;try{yield Ti(W.firebaseDependencies,qe.token)}catch(Lt){console.warn(Lt)}return G(W.firebaseDependencies,Se)}return G(W.firebaseDependencies,Se)})).apply(this,arguments)}function Uo(W){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,oe.Z)(function*(W){const Q=yield Z(W.firebaseDependencies);Q&&(yield Ti(W.firebaseDependencies,Q.token),yield ot(W.firebaseDependencies));const Se=yield W.swRegistration.pushManager.getSubscription();return!Se||Se.unsubscribe()})).apply(this,arguments)}function _u(W,Q){return fe.apply(this,arguments)}function fe(){return(fe=(0,oe.Z)(function*(W,Q){try{const Se=yield jr(W.firebaseDependencies,Q),qe=Object.assign(Object.assign({},Q),{token:Se,createTime:Date.now()});return yield z(W.firebaseDependencies,qe),Se}catch(Se){throw yield Uo(W),Se}})).apply(this,arguments)}function G(W,Q){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,oe.Z)(function*(W,Q){const qe={token:yield ar(W,Q),createTime:Date.now(),subscriptionOptions:Q};return yield z(W,qe),qe.token})).apply(this,arguments)}function Qe(W,Q){return lt.apply(this,arguments)}function lt(){return(lt=(0,oe.Z)(function*(W,Q){return(yield W.pushManager.getSubscription())||W.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$a(Q)})})).apply(this,arguments)}function Bt(W,Q){return Q.vapidKey===W.vapidKey&&Q.endpoint===W.endpoint&&Q.auth===W.auth&&Q.p256dh===W.p256dh}function mn(W){const Q={from:W.from,collapseKey:W.collapse_key,messageId:W.fcmMessageId};return function Gn(W,Q){if(!Q.notification)return;W.notification={};const Se=Q.notification.title;Se&&(W.notification.title=Se);const qe=Q.notification.body;qe&&(W.notification.body=qe);const Lt=Q.notification.image;Lt&&(W.notification.image=Lt)}(Q,W),function $n(W,Q){!Q.data||(W.data=Q.data)}(Q,W),function yr(W,Q){if(!Q.fcmOptions)return;W.fcmOptions={};const Se=Q.fcmOptions.link;Se&&(W.fcmOptions.link=Se);const qe=Q.fcmOptions.analytics_label;qe&&(W.fcmOptions.analyticsLabel=qe)}(Q,W),Q}function Zr(W){return"object"==typeof W&&!!W&&_o in W}function gi(W,Q){const Se=[];for(let qe=0;qe<W.length;qe++)Se.push(W.charAt(qe)),qe<Q.length&&Se.push(Q.charAt(qe));return Se.join("")}function Ii(W){return br.create("missing-app-config-values",{valueName:W})}gi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Yr{constructor(Q,Se,qe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Lt=function xi(W){if(!W||!W.options)throw Ii("App Configuration Object");if(!W.name)throw Ii("App Name");const Q=["projectId","apiKey","appId","messagingSenderId"],{options:Se}=W;for(const qe of Q)if(!Se[qe])throw Ii(qe);return{appName:W.name,projectId:Se.projectId,apiKey:Se.apiKey,appId:Se.appId,senderId:Se.messagingSenderId}}(Q);this.firebaseDependencies={app:Q,appConfig:Lt,installations:Se,analyticsProvider:qe}}_delete(){return Promise.resolve()}}function Wi(W){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,oe.Z)(function*(W){try{W.swRegistration=yield navigator.serviceWorker.register(ia,{scope:Ci}),W.swRegistration.update().catch(()=>{})}catch(Q){throw br.create("failed-service-worker-registration",{browserErrorMessage:Q.message})}})).apply(this,arguments)}function _s(W,Q){return as.apply(this,arguments)}function as(){return(as=(0,oe.Z)(function*(W,Q){if(!Q&&!W.swRegistration&&(yield Wi(W)),Q||!W.swRegistration){if(!(Q instanceof ServiceWorkerRegistration))throw br.create("invalid-sw-registration");W.swRegistration=Q}})).apply(this,arguments)}function ji(W,Q){return es.apply(this,arguments)}function es(){return(es=(0,oe.Z)(function*(W,Q){Q?W.vapidKey=Q:W.vapidKey||(W.vapidKey=Ao)})).apply(this,arguments)}function us(){return(us=(0,oe.Z)(function*(W,Q){if(!navigator)throw br.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw br.create("permission-blocked");return yield ji(W,null==Q?void 0:Q.vapidKey),yield _s(W,null==Q?void 0:Q.serviceWorkerRegistration),tr(W)})).apply(this,arguments)}function tu(W,Q,Se){return ya.apply(this,arguments)}function ya(){return(ya=(0,oe.Z)(function*(W,Q,Se){const qe=Fr(Q);(yield W.firebaseDependencies.analyticsProvider.get()).logEvent(qe,{message_id:Se[_o],message_name:Se[ma],message_time:Se[Ga],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fr(W){switch(W){case bo.NOTIFICATION_CLICKED:return"notification_open";case bo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wl(){return(wl=(0,oe.Z)(function*(W,Q){const Se=Q.data;if(!Se.isFirebaseMessaging)return;W.onMessageHandler&&Se.messageType===bo.PUSH_RECEIVED&&("function"==typeof W.onMessageHandler?W.onMessageHandler(mn(Se)):W.onMessageHandler.next(mn(Se)));const qe=Se.data;Zr(qe)&&"1"===qe[sa]&&(yield tu(W,Se.messageType,qe))})).apply(this,arguments)}const sl="@firebase/messaging",Cl=W=>{const Q=new Yr(W.getProvider("app").getImmediate(),W.getProvider("installations-internal").getImmediate(),W.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Se=>function Ql(W,Q){return wl.apply(this,arguments)}(Q,Se)),Q},Ui=W=>{const Q=W.getProvider("messaging").getImmediate();return{getToken:qe=>function hi(W,Q){return us.apply(this,arguments)}(Q,qe)}};function za(){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,oe.Z)(function*(){try{yield(0,Pe.eu)()}catch(W){return!1}return"undefined"!=typeof window&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xs(){(0,Ne._registerComponent)(new ke.wA("messaging",Cl,"PUBLIC")),(0,Ne._registerComponent)(new ke.wA("messaging-internal",Ui,"PRIVATE")),(0,Ne.registerVersion)(sl,"0.9.13"),(0,Ne.registerVersion)(sl,"0.9.13","esm2017")}();const Xl="analytics",ol="firebase_id",Us="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ba="https://www.googletagmanager.com/gtag/js",xs=new Ge.Yd("@firebase/analytics");function qa(W){return Promise.all(W.map(Q=>Q.catch(Se=>Se)))}function al(W,Q){const Se=document.createElement("script");Se.src=`${ba}?l=${W}&id=${Q}`,Se.async=!0,document.head.appendChild(Se)}function bs(W,Q,Se,qe,Lt,Ut){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,oe.Z)(function*(W,Q,Se,qe,Lt,Ut){const yn=qe[Lt];try{if(yn)yield Q[yn];else{const or=(yield qa(Se)).find(Nr=>Nr.measurementId===Lt);or&&(yield Q[or.appId])}}catch(sr){xs.error(sr)}W("config",Lt,Ut)})).apply(this,arguments)}function Rd(W,Q,Se,qe,Lt){return uo.apply(this,arguments)}function uo(){return(uo=(0,oe.Z)(function*(W,Q,Se,qe,Lt){try{let Ut=[];if(Lt&&Lt.send_to){let yn=Lt.send_to;Array.isArray(yn)||(yn=[yn]);const sr=yield qa(Se);for(const or of yn){const Nr=sr.find(Tr=>Tr.measurementId===or),Si=Nr&&Q[Nr.appId];if(!Si){Ut=[];break}Ut.push(Si)}}0===Ut.length&&(Ut=Object.values(Q)),yield Promise.all(Ut),W("event",qe,Lt||{})}catch(Ut){xs.error(Ut)}})).apply(this,arguments)}function ru(){const W=window.document.getElementsByTagName("script");for(const Q of Object.values(W))if(Q.src&&Q.src.includes(ba))return Q;return null}const oa=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fu=new class So{constructor(Q={},Se=1e3){this.throttleMetadata=Q,this.intervalMillis=Se}getThrottleMetadata(Q){return this.throttleMetadata[Q]}setThrottleMetadata(Q,Se){this.throttleMetadata[Q]=Se}deleteThrottleMetadata(Q){delete this.throttleMetadata[Q]}};function Ka(W){return new Headers({Accept:"application/json","x-goog-api-key":W})}function Zo(W){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,oe.Z)(function*(W){var Q;const{appId:Se,apiKey:qe}=W,Lt={method:"GET",headers:Ka(qe)},Ut=Us.replace("{app-id}",Se),yn=yield fetch(Ut,Lt);if(200!==yn.status&&304!==yn.status){let sr="";try{const or=yield yn.json();(null===(Q=or.error)||void 0===Q?void 0:Q.message)&&(sr=or.error.message)}catch(or){}throw oa.create("config-fetch-failed",{httpStatus:yn.status,responseMessage:sr})}return yn.json()})).apply(this,arguments)}function Ms(W){return su.apply(this,arguments)}function su(){return(su=(0,oe.Z)(function*(W,Q=Fu,Se){const{appId:qe,apiKey:Lt,measurementId:Ut}=W.options;if(!qe)throw oa.create("no-app-id");if(!Lt){if(Ut)return{measurementId:Ut,appId:qe};throw oa.create("no-api-key")}const yn=Q.getThrottleMetadata(qe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},sr=new P;return setTimeout((0,oe.Z)(function*(){sr.abort()}),void 0!==Se?Se:6e4),lo({appId:qe,apiKey:Lt,measurementId:Ut},yn,sr,Q)})).apply(this,arguments)}function lo(W,Q,Se){return ju.apply(this,arguments)}function ju(){return(ju=(0,oe.Z)(function*(W,{throttleEndTimeMillis:Q,backoffCount:Se},qe,Lt=Fu){const{appId:Ut,measurementId:yn}=W;try{yield Uu(qe,Q)}catch(sr){if(yn)return xs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${sr.message}]`),{appId:Ut,measurementId:yn};throw sr}try{const sr=yield Zo(W);return Lt.deleteThrottleMetadata(Ut),sr}catch(sr){if(!F(sr)){if(Lt.deleteThrottleMetadata(Ut),yn)return xs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${sr.message}]`),{appId:Ut,measurementId:yn};throw sr}const or=503===Number(sr.customData.httpStatus)?(0,Pe.$s)(Se,Lt.intervalMillis,30):(0,Pe.$s)(Se,Lt.intervalMillis),Nr={throttleEndTimeMillis:Date.now()+or,backoffCount:Se+1};return Lt.setThrottleMetadata(Ut,Nr),xs.debug(`Calling attemptFetch again in ${or} millis`),lo(W,Nr,qe,Lt)}})).apply(this,arguments)}function Uu(W,Q){return new Promise((Se,qe)=>{const Lt=Math.max(Q-Date.now(),0),Ut=setTimeout(Se,Lt);W.addEventListener(()=>{clearTimeout(Ut),qe(oa.create("fetch-throttle",{throttleEndTimeMillis:Q}))})})}function F(W){if(!(W instanceof Pe.ZR&&W.customData))return!1;const Q=Number(W.customData.httpStatus);return 429===Q||500===Q||503===Q||504===Q}class P{constructor(){this.listeners=[]}addEventListener(Q){this.listeners.push(Q)}abort(){this.listeners.forEach(Q=>Q())}}function A(){return K.apply(this,arguments)}function K(){return(K=(0,oe.Z)(function*(){if(!(0,Pe.hl)())return xs.warn(oa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(W){return xs.warn(oa.create("indexeddb-unavailable",{errorInfo:W}).message),!1}return!0})).apply(this,arguments)}function de(){return(de=(0,oe.Z)(function*(W,Q,Se,qe,Lt,Ut,yn){var sr;const or=Ms(W);or.then(li=>{Se[li.measurementId]=li.appId,W.options.measurementId&&li.measurementId!==W.options.measurementId&&xs.warn(`The measurement ID in the local Firebase config (${W.options.measurementId}) does not match the measurement ID fetched from the server (${li.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(li=>xs.error(li)),Q.push(or);const Nr=A().then(li=>{if(li)return qe.getId()}),[Si,Tr]=yield Promise.all([or,Nr]);ru()||al(Ut,Si.measurementId),Lt("js",new Date);const po=null!==(sr=null==yn?void 0:yn.config)&&void 0!==sr?sr:{};return po.origin="firebase",po.update=!0,null!=Tr&&(po[ol]=Tr),Lt("config",Si.measurementId,po),Si.measurementId})).apply(this,arguments)}class ze{constructor(Q){this.app=Q}_delete(){return delete st[this.app.options.appId],Promise.resolve()}}let st={},en=[];const Qt={};let pn,Rt,Pn="dataLayer",dn=!1;function xl(W,Q,Se){!function ou(){const W=[];if((0,Pe.ru)()&&W.push("This is a browser extension environment."),(0,Pe.zI)()||W.push("Cookies are not available."),W.length>0){const Q=W.map((qe,Lt)=>`(${Lt+1}) ${qe}`).join(" "),Se=oa.create("invalid-analytics-context",{errorInfo:Q});xs.warn(Se.message)}}();const qe=W.options.appId;if(!qe)throw oa.create("no-app-id");if(!W.options.apiKey){if(!W.options.measurementId)throw oa.create("no-api-key");xs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${W.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=st[qe])throw oa.create("already-exists",{id:qe});if(!dn){!function Ta(W){let Q=[];Array.isArray(window[W])?Q=window[W]:window[W]=Q}(Pn);const{wrappedGtag:Ut,gtagCore:yn}=function Jc(W,Q,Se,qe,Lt){let Ut=function(...yn){window[qe].push(arguments)};return window[Lt]&&"function"==typeof window[Lt]&&(Ut=window[Lt]),window[Lt]=function Lu(W,Q,Se,qe){function Ut(){return(Ut=(0,oe.Z)(function*(yn,sr,or){try{"event"===yn?yield Rd(W,Q,Se,sr,or):"config"===yn?yield bs(W,Q,Se,qe,sr,or):W("set",sr)}catch(Nr){xs.error(Nr)}})).apply(this,arguments)}return function Lt(yn,sr,or){return Ut.apply(this,arguments)}}(Ut,W,Q,Se),{gtagCore:Ut,wrappedGtag:window[Lt]}}(st,en,Qt,Pn,"gtag");Rt=Ut,pn=yn,dn=!0}return st[qe]=function se(W,Q,Se,qe,Lt,Ut,yn){return de.apply(this,arguments)}(W,en,Qt,Q,pn,Pn,Se),new ze(W)}function ul(){return(ul=(0,oe.Z)(function*(W,Q,Se,qe,Lt){if(Lt&&Lt.global)W("event",Se,qe);else{const Ut=yield Q;W("event",Se,Object.assign(Object.assign({},qe),{send_to:Ut}))}})).apply(this,arguments)}function Eu(){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,oe.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch(W){return!1}})).apply(this,arguments)}const mi="@firebase/analytics";!function ts(){(0,Ne._registerComponent)(new ke.wA(Xl,(Q,{options:Se})=>xl(Q.getProvider("app").getImmediate(),Q.getProvider("installations-internal").getImmediate(),Se),"PUBLIC")),(0,Ne._registerComponent)(new ke.wA("analytics-internal",function W(Q){try{const Se=Q.getProvider(Xl).getImmediate();return{logEvent:(qe,Lt,Ut)=>function Il(W,Q,Se,qe){W=(0,Pe.m9)(W),function Ea(W,Q,Se,qe,Lt){return ul.apply(this,arguments)}(Rt,st[W.app.options.appId],Q,Se,qe).catch(Lt=>xs.error(Lt))}(Se,qe,Lt,Ut)}}catch(Se){throw oa.create("interop-component-reg-failed",{reason:Se})}},"PRIVATE")),(0,Ne.registerVersion)(mi,"0.7.9"),(0,Ne.registerVersion)(mi,"0.7.9","esm2017")}();var Yi=U(4408),ho=U(7565);const Qo=new class fi extends ho.v{}(class Ma extends Yi.o{constructor(Q,Se){super(Q,Se),this.scheduler=Q,this.work=Se}schedule(Q,Se=0){return Se>0?super.schedule(Q,Se):(this.delay=Se,this.state=Q,this.scheduler.flush(this),this)}execute(Q,Se){return Se>0||this.closed?super.execute(Q,Se):this._execute(Q,Se)}requestAsyncId(Q,Se,qe=0){return null!=qe&&qe>0||null==qe&&this.delay>0?super.requestAsyncId(Q,Se,qe):Q.flush(this)}});var Xo=U(4986),Ld=U(8505),Ro=U(5363),fo=U(9468);const Cc=new E.GfV("7.3.0"),aa="__angularfire_symbol__analyticsIsSupportedValue",ua="__angularfire_symbol__analyticsIsSupported",No="__angularfire_symbol__remoteConfigIsSupportedValue",Su="__angularfire_symbol__remoteConfigIsSupported",Fn="__angularfire_symbol__messagingIsSupportedValue",Vu="__angularfire_symbol__messagingIsSupported";function ui(W,Q,Se){if(Q){if(1===Q.length)return Q[0];const Ut=Q.filter(yn=>yn.app===Se);if(1===Ut.length)return Ut[0]}return Se.container.getProvider(W).getImmediate({optional:!0})}globalThis[ua]||(globalThis[ua]=Eu().then(W=>globalThis[aa]=W).catch(()=>globalThis[aa]=!1)),globalThis[Vu]||(globalThis[Vu]=za().then(W=>globalThis[Fn]=W).catch(()=>globalThis[Fn]=!1)),globalThis[Su]||(globalThis[Su]=jo().then(W=>globalThis[No]=W).catch(()=>globalThis[No]=!1));const Ef=(W,Q)=>{const Se=Q?[Q]:(0,k.C6)(),qe=[];return Se.forEach(Lt=>{Lt.container.getProvider(W).instances.forEach(yn=>{qe.includes(yn)||qe.push(yn)})}),qe};function Sa(){}class ed{constructor(Q,Se=Qo){this.zone=Q,this.delegate=Se}now(){return this.delegate.now()}schedule(Q,Se,qe){const Lt=this.zone;return this.delegate.schedule(function(yn){Lt.runGuarded(()=>{Q.apply(this,[yn])})},Se,qe)}}class lu{constructor(Q){this.zone=Q,this.task=null}call(Q,Se){const qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sa,{},Sa,Sa)),Se.pipe((0,Ld.b)({next:qe,complete:qe,error:qe})).subscribe(Q).add(qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _n=(()=>{class W{constructor(Se){this.ngZone=Se,this.outsideAngular=Se.runOutsideAngular(()=>new ed(Zone.current)),this.insideAngular=Se.run(()=>new ed(Zone.current,Xo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return W.\u0275fac=function(Se){return new(Se||W)(E.LFG(E.R0b))},W.\u0275prov=E.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})();function Pa(){const W=globalThis.\u0275AngularFireScheduler;if(!W)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return W}function Jo(W){return W.pipe((0,Ro.Q)(Pa().outsideAngular))}function ea(W){return Pa(),function Za(W){return function(Se){return(Se=Se.lift(new lu(W.ngZone))).pipe((0,fo.R)(W.outsideAngular),(0,Ro.Q)(W.insideAngular))}}(Pa())(W)}},2090:(Gt,rt,U)=>{"use strict";U.d(rt,{$s:()=>cr,BH:()=>et,G6:()=>xt,L:()=>Y,LL:()=>We,Mn:()=>Ke,Sg:()=>Je,UG:()=>He,US:()=>ke,ZB:()=>Me,ZR:()=>je,b$:()=>ie,d:()=>ne,eu:()=>he,hl:()=>X,jU:()=>$e,m9:()=>_i,ne:()=>Pr,pd:()=>Lr,r3:()=>fn,ru:()=>Tt,tV:()=>Xe,uI:()=>it,vZ:()=>vr,w1:()=>be,xO:()=>kr,xb:()=>Vn,z$:()=>ft,zI:()=>J,zd:()=>ur});const Ne=function(Ye){const ut=[];let dt=0;for(let Jt=0;Jt<Ye.length;Jt++){let at=Ye.charCodeAt(Jt);at<128?ut[dt++]=at:at<2048?(ut[dt++]=at>>6|192,ut[dt++]=63&at|128):55296==(64512&at)&&Jt+1<Ye.length&&56320==(64512&Ye.charCodeAt(Jt+1))?(at=65536+((1023&at)<<10)+(1023&Ye.charCodeAt(++Jt)),ut[dt++]=at>>18|240,ut[dt++]=at>>12&63|128,ut[dt++]=at>>6&63|128,ut[dt++]=63&at|128):(ut[dt++]=at>>12|224,ut[dt++]=at>>6&63|128,ut[dt++]=63&at|128)}return ut},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ye,ut){if(!Array.isArray(Ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const dt=ut?this.byteToCharMapWebSafe_:this.byteToCharMap_,Jt=[];for(let at=0;at<Ye.length;at+=3){const Mt=Ye[at],sn=at+1<Ye.length,jn=sn?Ye[at+1]:0,ge=at+2<Ye.length,xe=ge?Ye[at+2]:0;let on=(15&jn)<<2|xe>>6,Qn=63&xe;ge||(Qn=64,sn||(on=64)),Jt.push(dt[Mt>>2],dt[(3&Mt)<<4|jn>>4],dt[on],dt[Qn])}return Jt.join("")},encodeString(Ye,ut){return this.HAS_NATIVE_SUPPORT&&!ut?btoa(Ye):this.encodeByteArray(Ne(Ye),ut)},decodeString(Ye,ut){return this.HAS_NATIVE_SUPPORT&&!ut?atob(Ye):function(Ye){const ut=[];let dt=0,Jt=0;for(;dt<Ye.length;){const at=Ye[dt++];if(at<128)ut[Jt++]=String.fromCharCode(at);else if(at>191&&at<224){const Mt=Ye[dt++];ut[Jt++]=String.fromCharCode((31&at)<<6|63&Mt)}else if(at>239&&at<365){const ge=((7&at)<<18|(63&Ye[dt++])<<12|(63&Ye[dt++])<<6|63&Ye[dt++])-65536;ut[Jt++]=String.fromCharCode(55296+(ge>>10)),ut[Jt++]=String.fromCharCode(56320+(1023&ge))}else{const Mt=Ye[dt++],sn=Ye[dt++];ut[Jt++]=String.fromCharCode((15&at)<<12|(63&Mt)<<6|63&sn)}}return ut.join("")}(this.decodeStringToByteArray(Ye,ut))},decodeStringToByteArray(Ye,ut){this.init_();const dt=ut?this.charToByteMapWebSafe_:this.charToByteMap_,Jt=[];for(let at=0;at<Ye.length;){const Mt=dt[Ye.charAt(at++)],jn=at<Ye.length?dt[Ye.charAt(at)]:0;++at;const xe=at<Ye.length?dt[Ye.charAt(at)]:64;++at;const At=at<Ye.length?dt[Ye.charAt(at)]:64;if(++at,null==Mt||null==jn||null==xe||null==At)throw Error();Jt.push(Mt<<2|jn>>4),64!==xe&&(Jt.push(jn<<4&240|xe>>2),64!==At&&Jt.push(xe<<6&192|At))}return Jt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ye=0;Ye<this.ENCODED_VALS.length;Ye++)this.byteToCharMap_[Ye]=this.ENCODED_VALS.charAt(Ye),this.charToByteMap_[this.byteToCharMap_[Ye]]=Ye,this.byteToCharMapWebSafe_[Ye]=this.ENCODED_VALS_WEBSAFE.charAt(Ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ye]]=Ye,Ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ye)]=Ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ye)]=Ye)}}},Y=function(Ye){return function(Ye){const ut=Ne(Ye);return ke.encodeByteArray(ut,!0)}(Ye).replace(/\./g,"")},Xe=function(Ye){try{return ke.decodeString(Ye,!0)}catch(ut){console.error("base64Decode failed: ",ut)}return null};function Me(Ye,ut){if(!(ut instanceof Object))return ut;switch(ut.constructor){case Date:return new Date(ut.getTime());case Object:void 0===Ye&&(Ye={});break;case Array:Ye=[];break;default:return ut}for(const dt in ut)!ut.hasOwnProperty(dt)||!Oe(dt)||(Ye[dt]=Me(Ye[dt],ut[dt]));return Ye}function Oe(Ye){return"__proto__"!==Ye}class et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ut,dt)=>{this.resolve=ut,this.reject=dt})}wrapCallback(ut){return(dt,Jt)=>{dt?this.reject(dt):this.resolve(Jt),"function"==typeof ut&&(this.promise.catch(()=>{}),1===ut.length?ut(dt):ut(dt,Jt))}}}function Je(Ye,ut){if(Ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Jt=ut||"demo-project",at=Ye.iat||0,Mt=Ye.sub||Ye.user_id;if(!Mt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const sn=Object.assign({iss:`https://securetoken.google.com/${Jt}`,aud:Jt,iat:at,exp:at+3600,auth_time:at,sub:Mt,user_id:Mt,firebase:{sign_in_provider:"custom",identities:{}}},Ye);return[Y(JSON.stringify({alg:"none",type:"JWT"})),Y(JSON.stringify(sn)),""].join(".")}function ft(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function He(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ye){return!1}}function $e(){return"object"==typeof self&&self.self===self}function Tt(){const Ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ye&&void 0!==Ye.id}function ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ne(){return ft().indexOf("Electron/")>=0}function be(){const Ye=ft();return Ye.indexOf("MSIE ")>=0||Ye.indexOf("Trident/")>=0}function Ke(){return ft().indexOf("MSAppHost/")>=0}function xt(){return!He()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){return"object"==typeof indexedDB}function he(){return new Promise((Ye,ut)=>{try{let dt=!0;const Jt="validate-browser-context-for-indexeddb-analytics-module",at=self.indexedDB.open(Jt);at.onsuccess=()=>{at.result.close(),dt||self.indexedDB.deleteDatabase(Jt),Ye(!0)},at.onupgradeneeded=()=>{dt=!1},at.onerror=()=>{var Mt;ut((null===(Mt=at.error)||void 0===Mt?void 0:Mt.message)||"")}}catch(dt){ut(dt)}})}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class je extends Error{constructor(ut,dt,Jt){super(dt),this.code=ut,this.customData=Jt,this.name="FirebaseError",Object.setPrototypeOf(this,je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(ut,dt,Jt){this.service=ut,this.serviceName=dt,this.errors=Jt}create(ut,...dt){const Jt=dt[0]||{},at=`${this.service}/${ut}`,Mt=this.errors[ut],sn=Mt?function St(Ye,ut){return Ye.replace(ct,(dt,Jt)=>{const at=ut[Jt];return null!=at?String(at):`<${Jt}?>`})}(Mt,Jt):"Error";return new je(at,`${this.serviceName}: ${sn} (${at}).`,Jt)}}const ct=/\{\$([^}]+)}/g;function fn(Ye,ut){return Object.prototype.hasOwnProperty.call(Ye,ut)}function Vn(Ye){for(const ut in Ye)if(Object.prototype.hasOwnProperty.call(Ye,ut))return!1;return!0}function vr(Ye,ut){if(Ye===ut)return!0;const dt=Object.keys(Ye),Jt=Object.keys(ut);for(const at of dt){if(!Jt.includes(at))return!1;const Mt=Ye[at],sn=ut[at];if(Cr(Mt)&&Cr(sn)){if(!vr(Mt,sn))return!1}else if(Mt!==sn)return!1}for(const at of Jt)if(!dt.includes(at))return!1;return!0}function Cr(Ye){return null!==Ye&&"object"==typeof Ye}function kr(Ye){const ut=[];for(const[dt,Jt]of Object.entries(Ye))Array.isArray(Jt)?Jt.forEach(at=>{ut.push(encodeURIComponent(dt)+"="+encodeURIComponent(at))}):ut.push(encodeURIComponent(dt)+"="+encodeURIComponent(Jt));return ut.length?"&"+ut.join("&"):""}function ur(Ye){const ut={};return Ye.replace(/^\?/,"").split("&").forEach(Jt=>{if(Jt){const[at,Mt]=Jt.split("=");ut[decodeURIComponent(at)]=decodeURIComponent(Mt)}}),ut}function Lr(Ye){const ut=Ye.indexOf("?");if(!ut)return"";const dt=Ye.indexOf("#",ut);return Ye.substring(ut,dt>0?dt:void 0)}function Pr(Ye,ut){const dt=new Mn(Ye,ut);return dt.subscribe.bind(dt)}class Mn{constructor(ut,dt){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=dt,this.task.then(()=>{ut(this)}).catch(Jt=>{this.error(Jt)})}next(ut){this.forEachObserver(dt=>{dt.next(ut)})}error(ut){this.forEachObserver(dt=>{dt.error(ut)}),this.close(ut)}complete(){this.forEachObserver(ut=>{ut.complete()}),this.close()}subscribe(ut,dt,Jt){let at;if(void 0===ut&&void 0===dt&&void 0===Jt)throw new Error("Missing Observer.");at=function pr(Ye,ut){if("object"!=typeof Ye||null===Ye)return!1;for(const dt of ut)if(dt in Ye&&"function"==typeof Ye[dt])return!0;return!1}(ut,["next","error","complete"])?ut:{next:ut,error:dt,complete:Jt},void 0===at.next&&(at.next=Cn),void 0===at.error&&(at.error=Cn),void 0===at.complete&&(at.complete=Cn);const Mt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?at.error(this.finalError):at.complete()}catch(sn){}}),this.observers.push(at),Mt}unsubscribeOne(ut){void 0===this.observers||void 0===this.observers[ut]||(delete this.observers[ut],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ut){if(!this.finalized)for(let dt=0;dt<this.observers.length;dt++)this.sendOne(dt,ut)}sendOne(ut,dt){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ut])try{dt(this.observers[ut])}catch(Jt){"undefined"!=typeof console&&console.error&&console.error(Jt)}})}close(ut){this.finalized||(this.finalized=!0,void 0!==ut&&(this.finalError=ut),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cn(){}function cr(Ye,ut=1e3,dt=2){const Jt=ut*Math.pow(dt,Ye),at=Math.round(.5*Jt*(Math.random()-.5)*2);return Math.min(144e5,Jt+at)}function _i(Ye){return Ye&&Ye._delegate?Ye._delegate:Ye}},656:(Gt,rt,U)=>{"use strict";U.d(rt,{e:()=>J});var E=U(5861),k=U(9300),oe=U(9646),Ne=U(8996),Pe=U(4986),ke=U(7272),Ge=U(5698),Y=U(4482),Xe=U(5403),pe=U(5032),Oe=U(4004),Je=U(5577);function ft(Ae,Ee){return Ee?je=>(0,ke.z)(Ee.pipe((0,Ge.q)(1),function Me(){return(0,Y.e)((Ae,Ee)=>{Ae.subscribe((0,Xe.x)(Ee,pe.Z))})}()),je.pipe(ft(Ae))):(0,Je.z)((je,We)=>Ae(je,We).pipe((0,Ge.q)(1),function et(Ae){return(0,Oe.U)(()=>Ae)}(je)))}var it=U(9751),He=U(3532);var ne=U(3900),be=U(262),Ke=U(4351),gt=U(5367),xt=U(5e3),X=U(1205),he=U(7566);let J=(()=>{class Ae{constructor(je,We,St,ct){this.auth=je,this.db=We,this.route=St,this.router=ct,this.redirect=!1,this.currentUser=null,this.userCollection=this.db.collection("users"),this.isAuthenticated$=je.user.pipe((0,Oe.U)(wt=>!!wt)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function ie(Ae,Ee=Pe.z){const je=function Tt(Ae=0,Ee,je=Pe.P){let We=-1;return null!=Ee&&((0,He.K)(Ee)?je=Ee:We=Ee),new it.y(St=>{let ct=function $e(Ae){return Ae instanceof Date&&!isNaN(Ae)}(Ae)?+Ae-je.now():Ae;ct<0&&(ct=0);let wt=0;return je.schedule(function(){St.closed||(St.next(wt++),0<=We?this.schedule(void 0,We):St.complete())},ct)})}(Ae,Ee);return ft(()=>je)}(1e3)),this.router.events.pipe((0,k.h)(wt=>wt instanceof gt.m2),(0,Oe.U)(wt=>this.route.firstChild),(0,ne.w)(wt=>{var Dt;return null!==(Dt=null==wt?void 0:wt.data)&&void 0!==Dt?Dt:(0,oe.of)({})})).subscribe(wt=>{var Dt;this.redirect=null!==(Dt=wt.authOnly)&&void 0!==Dt&&Dt}),this.auth.user.subscribe(wt=>this.currentUser=wt)}getUser(){return this.auth.user}createUser(je,We){return(0,Ne.D)(this.auth.createUserWithEmailAndPassword(je.email,We)).pipe((0,be.K)(wt=>{throw console.log(wt),wt}),(0,Ge.q)(1),(0,Ke.b)(wt=>{if(null==wt)throw Error("User credentials conn't be null !!\u{1f480}");return(0,Ne.D)(this.userCollection.doc(wt.user.uid).set(je)).pipe((0,Je.z)(()=>(0,Ne.D)(wt.user.updateProfile({displayName:je.name}))))})).pipe((0,Oe.U)(wt=>je),(0,Ge.q)(1))}login(je,We){var St=this;return(0,E.Z)(function*(){yield St.auth.signInWithEmailAndPassword(je,We)})()}logout(){var je=this;return(0,E.Z)(function*(){yield je.auth.signOut(),je.redirect&&(yield je.router.navigateByUrl("/"))})()}}return Ae.\u0275fac=function(je){return new(je||Ae)(xt.LFG(X.zQ),xt.LFG(he.ST),xt.LFG(gt.gz),xt.LFG(gt.F0))},Ae.\u0275prov=xt.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})()},1518:(Gt,rt,U)=>{"use strict";U.d(rt,{Y:()=>Oe});var E=U(5861),k=U(6805),oe=U(930),Pe=U(9646),ke=U(4004),Ge=U(5e3),Y=U(7566),Xe=U(656),pe=U(2084),Me=U(5367);let Oe=(()=>{class et{constructor(ft,it,He,$e){this.db=ft,this.auth=it,this.storage=He,this.router=$e,this.pageClips=[],this.hasPendingRequest=!1,this.clipsCollection=ft.collection("clips")}createClip(ft){return this.clipsCollection.add(ft)}getUserClips(ft){var it=this;return(0,E.Z)(function*(){var He;return(yield it.clipsCollection.ref.where("uid","==",null===(He=it.auth.currentUser)||void 0===He?void 0:He.uid).orderBy("timestamp","1"===ft?"desc":"asc").get()).docs})()}updateClip(ft){return(0,Pe.of)(this.clipsCollection.doc(ft.id).set(ft))}deleteClip(ft){var it=this;return(0,E.Z)(function*(){yield it.storage.ref(`${ft.clipPath}`).delete(),yield it.storage.ref(`${ft.screenshotPath}`).delete(),yield it.clipsCollection.doc(ft.id).delete()})()}getClips(){var ft=this;return(0,E.Z)(function*(){if(ft.hasPendingRequest)return;ft.hasPendingRequest=!0;let it=ft.clipsCollection.ref.orderBy("timestamp","desc").limit(6);const{length:He}=ft.pageClips;if(He){const Tt=ft.pageClips[He-1].id,ie=yield function Ne(et,Je){const ft="object"==typeof Je;return new Promise((it,He)=>{const $e=new oe.Hp({next:Tt=>{it(Tt),$e.unsubscribe()},error:He,complete:()=>{ft?it(Je.defaultValue):He(new k.K)}});et.subscribe($e)})}(ft.clipsCollection.doc(Tt).get());it=it.startAfter(ie)}(yield it.get()).forEach(Tt=>{ft.pageClips.push(Object.assign({id:Tt.id},Tt.data()))}),ft.hasPendingRequest=!1})()}resolve(ft,it){return this.clipsCollection.doc(ft.params.id).get().pipe((0,ke.U)($e=>$e.data()||(this.router.navigate(["/"]),null)))}}return et.\u0275fac=function(ft){return new(ft||et)(Ge.LFG(Y.ST),Ge.LFG(Xe.e),Ge.LFG(pe.Q1),Ge.LFG(Me.F0))},et.\u0275prov=Ge.Yz7({token:et,factory:et.\u0275fac,providedIn:"root"}),et})()},8549:(Gt,rt,U)=>{"use strict";U.d(rt,{w:()=>Ne});var E=U(5e3),k=U(9808);const oe=["*"];let Ne=(()=>{class Pe{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return Pe.\u0275fac=function(Ge){return new(Ge||Pe)},Pe.\u0275cmp=E.Xpm({type:Pe,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:oe,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(Ge,Y){1&Ge&&(E.F$t(),E.TgZ(0,"div",0),E.Hsn(1),E.qZA()),2&Ge&&E.Q6J("ngClass",Y.bgColor)},directives:[k.mk],styles:[""]}),Pe})()},235:(Gt,rt,U)=>{"use strict";U.d(rt,{a:()=>ft});var E=U(3075),k=U(5e3),oe=U(1470),Ne=U(9808);function Pe(it,He){1&it&&(k.TgZ(0,"p",3),k._uU(1," Field is required !! "),k.qZA())}function ke(it,He){if(1&it&&(k.TgZ(0,"p",3),k._uU(1),k.qZA()),2&it){const $e=k.oxw(2);k.xp6(1),k.AsE(" The value you inputted is ",null==$e.control.errors?null:$e.control.errors.minlength.actualLength," characters long. It must be at least ",null==$e.control.errors?null:$e.control.errors.minlength.requiredLength," !! ")}}function Ge(it,He){1&it&&(k.TgZ(0,"p",3),k._uU(1," You must enter a valid email !! "),k.qZA())}function Y(it,He){1&it&&(k.TgZ(0,"p",3),k._uU(1," Value too low !! "),k.qZA())}function Xe(it,He){1&it&&(k.TgZ(0,"p",3),k._uU(1," Value too high !! "),k.qZA())}function pe(it,He){1&it&&(k.TgZ(0,"p",3),k._uU(1," Password must be at least 8 characters, contain at least 1 uppercase letter, 1 lowercase letter, and 1 number, Can contain special characters !! "),k.qZA())}function Me(it,He){if(1&it&&(k.TgZ(0,"p",3),k._uU(1),k.qZA()),2&it){const $e=k.oxw(2);k.xp6(1),k.hij(" ",null==$e.control.errors?null:$e.control.errors.noMatch," ")}}function Oe(it,He){if(1&it&&(k.ynx(0),k.YNc(1,Pe,2,0,"p",2),k.YNc(2,ke,2,2,"p",2),k.YNc(3,Ge,2,0,"p",2),k.YNc(4,Y,2,0,"p",2),k.YNc(5,Xe,2,0,"p",2),k.YNc(6,pe,2,0,"p",2),k.YNc(7,Me,2,1,"p",2),k.Hsn(8),k.BQk()),2&it){const $e=k.oxw();k.xp6(1),k.Q6J("ngIf",null==$e.control.errors?null:$e.control.errors.required),k.xp6(1),k.Q6J("ngIf",null==$e.control.errors?null:$e.control.errors.minlength),k.xp6(1),k.Q6J("ngIf",null==$e.control.errors?null:$e.control.errors.email),k.xp6(1),k.Q6J("ngIf",null==$e.control.errors?null:$e.control.errors.min),k.xp6(1),k.Q6J("ngIf",null==$e.control.errors?null:$e.control.errors.max),k.xp6(1),k.Q6J("ngIf",null==$e.control.errors?null:$e.control.errors.pattern),k.xp6(1),k.Q6J("ngIf",null==$e.control.errors?null:$e.control.errors.noMatch)}}const et=[[["","validators",""]]],Je=["[validators]"];let ft=(()=>{class it{constructor(){this.control=new E.NI,this.placeholder="",this.type="text",this.format=""}ngOnInit(){}}return it.\u0275fac=function($e){return new($e||it)},it.\u0275cmp=k.Xpm({type:it,selectors:[["app-input"]],inputs:{control:"control",placeholder:"placeholder",type:"type",format:"format"},ngContentSelectors:Je,decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"type","placeholder","formControl","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function($e,Tt){1&$e&&(k.F$t(et),k._UZ(0,"input",0),k.YNc(1,Oe,9,7,"ng-container",1)),2&$e&&(k.Q6J("type",Tt.type)("placeholder",Tt.placeholder)("formControl",Tt.control)("mask",Tt.format)("dropSpecialCharacters",!1),k.xp6(1),k.Q6J("ngIf",Tt.control.dirty||Tt.control.touched))},directives:[E.Fj,oe.hx,E.JJ,E.oH,Ne.O5],styles:[""]}),it})()},7583:(Gt,rt,U)=>{"use strict";U.d(rt,{Z:()=>k});var E=U(5e3);let k=(()=>{class oe{constructor(){this.modalsBag=[]}register(Pe){if(this.modalsBag.some(ke=>ke.Id==Pe))throw Error(`Dublicate modal key !! \u{1f480}\u{1f480} ... the key ${Pe} already exists \u{1f914}`);this.modalsBag.push({Id:Pe,visible:!1})}unRegister(Pe){this.modalsBag=this.modalsBag.filter(ke=>ke.Id!=Pe)}isModalOpen(Pe){var ke,Ge;return null!==(Ge=null===(ke=this.modalsBag.find(Y=>Y.Id==Pe))||void 0===ke?void 0:ke.visible)&&void 0!==Ge&&Ge}toggleModal(Pe){var ke;let Ge=this.modalsBag.find(Y=>Y.Id==Pe);Ge&&(Ge.visible=null!==(ke=!(null==Ge?void 0:Ge.visible))&&void 0!==ke&&ke)}}return oe.\u0275fac=function(Pe){return new(Pe||oe)},oe.\u0275prov=E.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})()},3446:(Gt,rt,U)=>{"use strict";U.d(rt,{z:()=>Ge});var E=U(5e3),k=U(7583),oe=U(9808);const Ne=[[["","heading",""]],"*"],Pe=function(Y){return{hidden:Y}},ke=["[heading]","*"];let Ge=(()=>{class Y{constructor(pe,Me){this.modalService=pe,this.element=Me,this._modalId=""}set modalId(pe){this.modalService.register(pe),this._modalId=pe}get modalId(){return this._modalId}closeModal(){this.modalService.toggleModal(this.modalId)}isModalOpen(){return this.modalService.isModalOpen(this.modalId)}ngOnInit(){document.body.appendChild(this.element.nativeElement)}ngOnDestroy(){this.modalService.unRegister(this.modalId),document.body.removeChild(this.element.nativeElement)}}return Y.\u0275fac=function(pe){return new(pe||Y)(E.Y36(k.Z),E.Y36(E.SBq))},Y.\u0275cmp=E.Xpm({type:Y,selectors:[["app-modal"]],inputs:{modalId:"modalId"},ngContentSelectors:ke,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(pe,Me){1&pe&&(E.F$t(Ne),E.TgZ(0,"div",0)(1,"div",1)(2,"div",2),E.NdJ("click",function(){return Me.closeModal()}),E._UZ(3,"div",3),E.qZA(),E.TgZ(4,"span",4),E._uU(5,"\u200b"),E.qZA(),E.TgZ(6,"div",5)(7,"div",6)(8,"div",7),E.Hsn(9),E.TgZ(10,"div",8),E.NdJ("click",function(){return Me.closeModal()}),E._uU(11," \u2715 "),E.qZA()(),E.Hsn(12,1),E.qZA()()()()),2&pe&&E.Q6J("ngClass",E.VKq(1,Pe,!Me.isModalOpen()))},directives:[oe.mk],styles:[""]}),Y})()},4466:(Gt,rt,U)=>{"use strict";U.d(rt,{m:()=>Pe});var E=U(9808),k=U(3075),oe=U(1470),Ne=U(5e3);let Pe=(()=>{class ke{}return ke.\u0275fac=function(Y){return new(Y||ke)},ke.\u0275mod=Ne.oAB({type:ke}),ke.\u0275inj=Ne.cJS({providers:[],imports:[[E.ez,k.UX,oe.yI.forRoot()]]}),ke})()},80:(Gt,rt,U)=>{"use strict";var E=U(2313),k=U(5e3),oe=U(5861),Ne=U(5367);let Pe=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-about"]],decls:2,vars:0,template:function(a,o){1&a&&(k.TgZ(0,"p"),k._uU(1,"about works!"),k.qZA())},styles:[""]}),g})();var ke=U(9808),Ge=U(9226),Y=U.n(Ge),Xe=U(1421),pe=U.n(Xe);function Me(){return Me=Object.assign||function(g){for(var u=1;u<arguments.length;u++){var a=arguments[u];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(g[o]=a[o])}return g},Me.apply(this,arguments)}var Oe=U(1234),et=U.n(Oe);function Je(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function ft(g,u){return(ft=Object.setPrototypeOf||function(o,t){return o.__proto__=t,o})(g,u)}function it(g,u){g.prototype=Object.create(u.prototype),g.prototype.constructor=g,ft(g,u)}var He=U(8099),$e=U.n(He),Tt=U(745),ie=U.n(Tt),ne=U(3629),be=U.n(ne);function Ke(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}function gt(g,u,a){return(gt=Ke()?Reflect.construct:function(t,s,h){var v=[null];v.push.apply(v,s);var x=new(Function.bind.apply(t,v));return h&&ft(x,h.prototype),x}).apply(null,arguments)}var X=U(3871),he=U.n(X),J="http://example.com";const Ee=function(u,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(u)&&(u=Y().location&&Y().location.href||"");var o="function"==typeof Y().URL,t=/^\/\//.test(u),s=!Y().location&&!/\/\//i.test(u);if(o?u=new(Y().URL)(u,Y().location||J):/\/\//i.test(u)||(u=he().buildAbsoluteURL(Y().location&&Y().location.href||"",u)),o){var h=new URL(a,u);return s?h.href.slice(J.length):t?h.href.slice(h.protocol.length):h.href}return he().buildAbsoluteURL(u,a)};var je=function(){function g(){this.listeners={}}var u=g.prototype;return u.on=function(o,t){this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(t)},u.off=function(o,t){if(!this.listeners[o])return!1;var s=this.listeners[o].indexOf(t);return this.listeners[o]=this.listeners[o].slice(0),this.listeners[o].splice(s,1),s>-1},u.trigger=function(o){var t=this.listeners[o];if(t)if(2===arguments.length)for(var s=t.length,h=0;h<s;++h)t[h].call(this,arguments[1]);else for(var v=Array.prototype.slice.call(arguments,1),S=t.length,x=0;x<S;++x)t[x].apply(this,v)},u.dispose=function(){this.listeners={}},u.pipe=function(o){this.on("data",function(t){o.push(t)})},g}();function St(g){for(var u=function(u){return Y().atob?Y().atob(u):Buffer.from(u,"base64").toString("binary")}(g),a=new Uint8Array(u.length),o=0;o<u.length;o++)a[o]=u.charCodeAt(o);return a}var g,Z,ct=function(g){function u(){var o;return(o=g.call(this)||this).buffer="",o}return it(u,g),u.prototype.push=function(t){var s;for(this.buffer+=t,s=this.buffer.indexOf("\n");s>-1;s=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},u}(je),wt=String.fromCharCode(9),Dt=function(u){var a=/([0-9.]*)?@?([0-9.]*)?/.exec(u||""),o={};return a[1]&&(o.length=parseInt(a[1],10)),a[2]&&(o.offset=parseInt(a[2],10)),o},$t=function(u){for(var s,a=u.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),o={},t=a.length;t--;)""!==a[t]&&((s=/([^=]*)=(.*)/.exec(a[t]).slice(1))[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),o[s[0]]=s[1]);return o},cn=function(g){function u(){var o;return(o=g.call(this)||this).customParsers=[],o.tagMappers=[],o}it(u,g);var a=u.prototype;return a.push=function(t){var h,v,s=this;if(0!==(t=t.trim()).length){if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});this.tagMappers.reduce(function(x,R){var ee=R(t);return ee===t?x:x.concat([ee])},[t]).forEach(function(x){for(var R=0;R<s.customParsers.length;R++)if(s.customParsers[R].call(s,x))return;if(0===x.indexOf("#EXT"))if(x=x.replace("\r",""),h=/^#EXTM3U/.exec(x))s.trigger("data",{type:"tag",tagType:"m3u"});else{if(h=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(x))return v={type:"tag",tagType:"inf"},h[1]&&(v.duration=parseFloat(h[1])),h[2]&&(v.title=h[2]),void s.trigger("data",v);if(h=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(x))return v={type:"tag",tagType:"targetduration"},h[1]&&(v.duration=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(x))return v={type:"tag",tagType:"version"},h[1]&&(v.version=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(x))return v={type:"tag",tagType:"media-sequence"},h[1]&&(v.number=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(x))return v={type:"tag",tagType:"discontinuity-sequence"},h[1]&&(v.number=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(x))return v={type:"tag",tagType:"playlist-type"},h[1]&&(v.playlistType=h[1]),void s.trigger("data",v);if(h=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(x))return v=Me(Dt(h[1]),{type:"tag",tagType:"byterange"}),void s.trigger("data",v);if(h=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(x))return v={type:"tag",tagType:"allow-cache"},h[1]&&(v.allowed=!/NO/.test(h[1])),void s.trigger("data",v);if(h=/^#EXT-X-MAP:?(.*)$/.exec(x)){if(v={type:"tag",tagType:"map"},h[1]){var ee=$t(h[1]);ee.URI&&(v.uri=ee.URI),ee.BYTERANGE&&(v.byterange=Dt(ee.BYTERANGE))}s.trigger("data",v)}else if(h=/^#EXT-X-STREAM-INF:?(.*)$/.exec(x)){if(v={type:"tag",tagType:"stream-inf"},h[1]){if(v.attributes=$t(h[1]),v.attributes.RESOLUTION){var q=v.attributes.RESOLUTION.split("x"),_e={};q[0]&&(_e.width=parseInt(q[0],10)),q[1]&&(_e.height=parseInt(q[1],10)),v.attributes.RESOLUTION=_e}v.attributes.BANDWIDTH&&(v.attributes.BANDWIDTH=parseInt(v.attributes.BANDWIDTH,10)),v.attributes["PROGRAM-ID"]&&(v.attributes["PROGRAM-ID"]=parseInt(v.attributes["PROGRAM-ID"],10))}s.trigger("data",v)}else{if(h=/^#EXT-X-MEDIA:?(.*)$/.exec(x))return v={type:"tag",tagType:"media"},h[1]&&(v.attributes=$t(h[1])),void s.trigger("data",v);if(h=/^#EXT-X-ENDLIST/.exec(x))s.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(h=/^#EXT-X-DISCONTINUITY/.exec(x)))return(h=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(x))?(v={type:"tag",tagType:"program-date-time"},h[1]&&(v.dateTimeString=h[1],v.dateTimeObject=new Date(h[1])),void s.trigger("data",v)):(h=/^#EXT-X-KEY:?(.*)$/.exec(x))?(v={type:"tag",tagType:"key"},h[1]&&(v.attributes=$t(h[1]),v.attributes.IV&&("0x"===v.attributes.IV.substring(0,2).toLowerCase()&&(v.attributes.IV=v.attributes.IV.substring(2)),v.attributes.IV=v.attributes.IV.match(/.{8}/g),v.attributes.IV[0]=parseInt(v.attributes.IV[0],16),v.attributes.IV[1]=parseInt(v.attributes.IV[1],16),v.attributes.IV[2]=parseInt(v.attributes.IV[2],16),v.attributes.IV[3]=parseInt(v.attributes.IV[3],16),v.attributes.IV=new Uint32Array(v.attributes.IV))),void s.trigger("data",v)):(h=/^#EXT-X-START:?(.*)$/.exec(x))?(v={type:"tag",tagType:"start"},h[1]&&(v.attributes=$t(h[1]),v.attributes["TIME-OFFSET"]=parseFloat(v.attributes["TIME-OFFSET"]),v.attributes.PRECISE=/YES/.test(v.attributes.PRECISE)),void s.trigger("data",v)):(h=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(x))?((v={type:"tag",tagType:"cue-out-cont"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(x))?((v={type:"tag",tagType:"cue-out"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-CUE-IN:?(.*)?$/.exec(x))?((v={type:"tag",tagType:"cue-in"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-SKIP:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"skip"}).attributes=$t(h[1]),v.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(v.attributes["SKIPPED-SEGMENTS"]=parseInt(v.attributes["SKIPPED-SEGMENTS"],10)),v.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(v.attributes["RECENTLY-REMOVED-DATERANGES"]=v.attributes["RECENTLY-REMOVED-DATERANGES"].split(wt)),void s.trigger("data",v)):(h=/^#EXT-X-PART:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"part"}).attributes=$t(h[1]),["DURATION"].forEach(function(Re){v.attributes.hasOwnProperty(Re)&&(v.attributes[Re]=parseFloat(v.attributes[Re]))}),["INDEPENDENT","GAP"].forEach(function(Re){v.attributes.hasOwnProperty(Re)&&(v.attributes[Re]=/YES/.test(v.attributes[Re]))}),v.attributes.hasOwnProperty("BYTERANGE")&&(v.attributes.byterange=Dt(v.attributes.BYTERANGE)),void s.trigger("data",v)):(h=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"server-control"}).attributes=$t(h[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(Re){v.attributes.hasOwnProperty(Re)&&(v.attributes[Re]=parseFloat(v.attributes[Re]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(Re){v.attributes.hasOwnProperty(Re)&&(v.attributes[Re]=/YES/.test(v.attributes[Re]))}),void s.trigger("data",v)):(h=/^#EXT-X-PART-INF:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"part-inf"}).attributes=$t(h[1]),["PART-TARGET"].forEach(function(Re){v.attributes.hasOwnProperty(Re)&&(v.attributes[Re]=parseFloat(v.attributes[Re]))}),void s.trigger("data",v)):(h=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"preload-hint"}).attributes=$t(h[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(Re){if(v.attributes.hasOwnProperty(Re)){v.attributes[Re]=parseInt(v.attributes[Re],10);var Le="BYTERANGE-LENGTH"===Re?"length":"offset";v.attributes.byterange=v.attributes.byterange||{},v.attributes.byterange[Le]=v.attributes[Re],delete v.attributes[Re]}}),void s.trigger("data",v)):(h=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"rendition-report"}).attributes=$t(h[1]),["LAST-MSN","LAST-PART"].forEach(function(Re){v.attributes.hasOwnProperty(Re)&&(v.attributes[Re]=parseInt(v.attributes[Re],10))}),void s.trigger("data",v)):void s.trigger("data",{type:"tag",data:x.slice(4)});s.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else s.trigger("data",{type:"comment",text:x.slice(1)})})}},a.addParser=function(t){var s=this,h=t.expression,v=t.customType,S=t.dataParser,x=t.segment;"function"!=typeof S&&(S=function(ee){return ee}),this.customParsers.push(function(R){if(h.exec(R))return s.trigger("data",{type:"custom",data:S(R),customType:v,segment:x}),!0})},a.addTagMapper=function(t){var s=t.expression,h=t.map;this.tagMappers.push(function(x){return s.test(x)?h(x):x})},u}(je),Nt=function(u){var a={};return Object.keys(u).forEach(function(o){a[function(u){return u.toLowerCase().replace(/-(\w)/g,function(a){return a[1].toUpperCase()})}(o)]=u[o]}),a},fn=function(u){var a=u.serverControl,o=u.targetDuration,t=u.partTargetDuration;if(a){var s="#EXT-X-SERVER-CONTROL",h="holdBack",v="partHoldBack",S=o&&3*o,x=t&&2*t;o&&!a.hasOwnProperty(h)&&(a[h]=S,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+S+")."})),S&&a[h]<S&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+a[h]+") to targetDuration * 3 ("+S+")"}),a[h]=S),t&&!a.hasOwnProperty(v)&&(a[v]=3*t,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+a[v]+")."})),t&&a[v]<x&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+a[v]+") to partTargetDuration * 2 ("+x+")."}),a[v]=x)}},Ln=function(g){function u(){var o;(o=g.call(this)||this).lineStream=new ct,o.parseStream=new cn,o.lineStream.pipe(o.parseStream);var v,S,t=Je(o),s=[],h={},x=!1,R=function(){},ee={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},_e=0;o.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var Re=0,Le=0;return o.on("end",function(){h.uri||!h.parts&&!h.preloadHints||(!h.map&&v&&(h.map=v),!h.key&&S&&(h.key=S),!h.timeline&&"number"==typeof _e&&(h.timeline=_e),o.manifest.preloadSegment=h)}),o.parseStream.on("data",function(Ve){var zt,vn;({tag:function(){({version:function(){Ve.version&&(this.manifest.version=Ve.version)},"allow-cache":function(){this.manifest.allowCache=Ve.allowed,"allowed"in Ve||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var tn={};"length"in Ve&&(h.byterange=tn,tn.length=Ve.length,"offset"in Ve||(Ve.offset=Re)),"offset"in Ve&&(h.byterange=tn,tn.offset=Ve.offset),Re=tn.offset+tn.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),Ve.duration>0&&(h.duration=Ve.duration),0===Ve.duration&&(h.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(Ve.attributes)if("NONE"!==Ve.attributes.METHOD)if(Ve.attributes.URI){if("com.apple.streamingkeydelivery"===Ve.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:Ve.attributes});if("com.microsoft.playready"===Ve.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:Ve.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===Ve.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(Ve.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===Ve.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==Ve.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):Ve.attributes.KEYID&&"0x"===Ve.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:Ve.attributes.KEYFORMAT,keyId:Ve.attributes.KEYID.substring(2)},pssh:St(Ve.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));Ve.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),S={method:Ve.attributes.METHOD||"AES-128",uri:Ve.attributes.URI},void 0!==Ve.attributes.IV&&(S.iv=Ve.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else S=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(Ve.number)?this.manifest.mediaSequence=Ve.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+Ve.number})},"discontinuity-sequence":function(){isFinite(Ve.number)?(this.manifest.discontinuitySequence=Ve.number,_e=Ve.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+Ve.number})},"playlist-type":function(){/VOD|EVENT/.test(Ve.playlistType)?this.manifest.playlistType=Ve.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+Ve.playlist})},map:function(){v={},Ve.uri&&(v.uri=Ve.uri),Ve.byterange&&(v.byterange=Ve.byterange),S&&(v.key=S)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||ee,Ve.attributes?(h.attributes||(h.attributes={}),Me(h.attributes,Ve.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||ee,Ve.attributes&&Ve.attributes.TYPE&&Ve.attributes["GROUP-ID"]&&Ve.attributes.NAME){var tn=this.manifest.mediaGroups[Ve.attributes.TYPE];tn[Ve.attributes["GROUP-ID"]]=tn[Ve.attributes["GROUP-ID"]]||{},zt=tn[Ve.attributes["GROUP-ID"]],(vn={default:/yes/i.test(Ve.attributes.DEFAULT)}).autoselect=!!vn.default||/yes/i.test(Ve.attributes.AUTOSELECT),Ve.attributes.LANGUAGE&&(vn.language=Ve.attributes.LANGUAGE),Ve.attributes.URI&&(vn.uri=Ve.attributes.URI),Ve.attributes["INSTREAM-ID"]&&(vn.instreamId=Ve.attributes["INSTREAM-ID"]),Ve.attributes.CHARACTERISTICS&&(vn.characteristics=Ve.attributes.CHARACTERISTICS),Ve.attributes.FORCED&&(vn.forced=/yes/i.test(Ve.attributes.FORCED)),zt[Ve.attributes.NAME]=vn}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){_e+=1,h.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=Ve.dateTimeString,this.manifest.dateTimeObject=Ve.dateTimeObject),h.dateTimeString=Ve.dateTimeString,h.dateTimeObject=Ve.dateTimeObject},targetduration:function(){!isFinite(Ve.duration)||Ve.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+Ve.duration}):(this.manifest.targetDuration=Ve.duration,fn.call(this,this.manifest))},start:function(){Ve.attributes&&!isNaN(Ve.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:Ve.attributes["TIME-OFFSET"],precise:Ve.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){h.cueOut=Ve.data},"cue-out-cont":function(){h.cueOutCont=Ve.data},"cue-in":function(){h.cueIn=Ve.data},skip:function(){this.manifest.skip=Nt(Ve.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",Ve.attributes,["SKIPPED-SEGMENTS"])},part:function(){var tn=this;x=!0;var wn=this.manifest.segments.length,un=Nt(Ve.attributes);h.parts=h.parts||[],h.parts.push(un),un.byterange&&(un.byterange.hasOwnProperty("offset")||(un.byterange.offset=Le),Le=un.byterange.offset+un.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(h.parts.length-1)+" for segment #"+wn,Ve.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(In,gn){In.hasOwnProperty("lastPart")||tn.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+gn+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var tn=this.manifest.serverControl=Nt(Ve.attributes);tn.hasOwnProperty("canBlockReload")||(tn.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),fn.call(this,this.manifest),tn.canSkipDateranges&&!tn.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var tn=this.manifest.segments.length,wn=Nt(Ve.attributes),un=wn.type&&"PART"===wn.type;h.preloadHints=h.preloadHints||[],h.preloadHints.push(wn),wn.byterange&&(wn.byterange.hasOwnProperty("offset")||(wn.byterange.offset=un?Le:0,un&&(Le=wn.byterange.offset+wn.byterange.length)));var ln=h.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+ln+" for segment #"+tn,Ve.attributes,["TYPE","URI"]),wn.type)for(var In=0;In<h.preloadHints.length-1;In++){var gn=h.preloadHints[In];!gn.type||gn.type===wn.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+ln+" for segment #"+tn+" has the same TYPE "+wn.type+" as preload hint #"+In})}},"rendition-report":function(){var tn=Nt(Ve.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(tn);var wn=this.manifest.renditionReports.length-1,un=["LAST-MSN","URI"];x&&un.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+wn,Ve.attributes,un)},"part-inf":function(){this.manifest.partInf=Nt(Ve.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",Ve.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),fn.call(this,this.manifest)}}[Ve.tagType]||R).call(t)},uri:function(){h.uri=Ve.uri,s.push(h),this.manifest.targetDuration&&!("duration"in h)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.targetDuration),S&&(h.key=S),h.timeline=_e,v&&(h.map=v),Le=0,h={}},comment:function(){},custom:function(){Ve.segment?(h.custom=h.custom||{},h.custom[Ve.customType]=Ve.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[Ve.customType]=Ve.data)}})[Ve.type].call(t)}),o}it(u,g);var a=u.prototype;return a.warnOnMissingAttributes_=function(t,s,h){var v=[];h.forEach(function(S){s.hasOwnProperty(S)||v.push(S)}),v.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+v.join(", ")})},a.push=function(t){this.lineStream.push(t)},a.end=function(){this.lineStream.push("\n"),this.trigger("end")},a.addParser=function(t){this.parseStream.addParser(t)},a.addTagMapper=function(t){this.parseStream.addTagMapper(t)},u}(je),Vn={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Ar=["video","audio","text"],vr=["Video","Audio","Text"],Cr=function(u){return u&&u.replace(/avc1\.(\d+)\.(\d+)/i,function(a,o,t){return"avc1."+("00"+Number(o).toString(16)).slice(-2)+"00"+("00"+Number(t).toString(16)).slice(-2)})},Lr=function(u){void 0===u&&(u="");var a=u.split(","),o=[];return a.forEach(function(t){var s;t=t.trim(),Ar.forEach(function(h){var v=Vn[h].exec(t.toLowerCase());if(v&&!(v.length<=1)){s=h;var S=t.substring(0,v[1].length),x=t.replace(S,"");o.push({type:S,details:x,mediaType:h})}}),s||o.push({type:t,details:"",mediaType:"unknown"})}),o},Mn=function(u){return void 0===u&&(u=""),Vn.audio.test(u.trim().toLowerCase())},pr=function(u){if(u&&"string"==typeof u){var a=u.toLowerCase().split(",").map(function(s){return Cr(s.trim())}),o="video";1===a.length&&Mn(a[0])?o="audio":1===a.length&&function(u){return void 0===u&&(u=""),Vn.text.test(u.trim().toLowerCase())}(a[0])&&(o="application");var t="mp4";return a.every(function(s){return Vn.mp4.test(s)})?t="mp4":a.every(function(s){return Vn.webm.test(s)})?t="webm":a.every(function(s){return Vn.ogg.test(s)})&&(t="ogg"),o+"/"+t+';codecs="'+u+'"'}},Cn=function(u){return void 0===u&&(u=""),Y().MediaSource&&Y().MediaSource.isTypeSupported&&Y().MediaSource.isTypeSupported(pr(u))||!1},Vi=function(u){return void 0===u&&(u=""),u.toLowerCase().split(",").every(function(a){a=a.trim();for(var o=0;o<vr.length;o++)if(Vn["muxer"+vr[o]].test(a))return!0;return!1})},hr="mp4a.40.2",ri=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Ni=/^application\/dash\+xml/i,Hi=function(u){return ri.test(u)?"hls":Ni.test(u)?"dash":"application/vnd.videojs.vhs+json"===u?"vhs-json":null},yi=function(u){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(u):u&&u.buffer instanceof ArrayBuffer},xn=function(u){return u instanceof Uint8Array?u:(!Array.isArray(u)&&!function(u){return yi(u)}(u)&&!(u instanceof ArrayBuffer)&&(u="number"!=typeof u||"number"==typeof u&&u!=u?0:[u]),new Uint8Array(u&&u.buffer||u,u&&u.byteOffset||0,u&&u.byteLength||0))},Ye=Y().BigInt||Number,ut=[Ye("0x1"),Ye("0x100"),Ye("0x10000"),Ye("0x1000000"),Ye("0x100000000"),Ye("0x10000000000"),Ye("0x1000000000000"),Ye("0x100000000000000"),Ye("0x10000000000000000")],Mt=(g=new Uint16Array([65484]),new Uint8Array(g.buffer,g.byteOffset,g.byteLength),function(u,a){var o=void 0===a?{}:a,t=o.signed,s=void 0!==t&&t,h=o.le,v=void 0!==h&&h;u=xn(u);var S=v?"reduce":"reduceRight",R=(u[S]?u[S]:Array.prototype[S]).call(u,function(q,_e,Re){var Le=v?Re:Math.abs(Re+1-u.length);return q+Ye(_e)*ut[Le]},Ye(0));if(s){var ee=ut[u.length]/Ye(2)-Ye(1);(R=Ye(R))>ee&&(R-=ee,R-=ee,R-=Ye(2))}return Number(R)}),ge=function(u,a){if("string"!=typeof u&&u&&"function"==typeof u.toString&&(u=u.toString()),"string"!=typeof u)return new Uint8Array;a||(u=unescape(encodeURIComponent(u)));for(var o=new Uint8Array(u.length),t=0;t<u.length;t++)o[t]=u.charCodeAt(t);return o},Ue=function(u,a,o){var t=void 0===o?{}:o,s=t.offset,h=void 0===s?0:s,v=t.mask,S=void 0===v?[]:v;return u=xn(u),(a=xn(a)).length&&u.length-h>=a.length&&(a.every?a.every:Array.prototype.every).call(a,function(R,ee){return R===(S[ee]?S[ee]&u[h+ee]:u[h+ee])})},Qr=U(978),ht=function(u){return!!u&&"object"==typeof u},Be=function g(){for(var u=arguments.length,a=new Array(u),o=0;o<u;o++)a[o]=arguments[o];return a.reduce(function(t,s){return"object"!=typeof s||Object.keys(s).forEach(function(h){t[h]=Array.isArray(t[h])&&Array.isArray(s[h])?t[h].concat(s[h]):ht(t[h])&&ht(s[h])?g(t[h],s[h]):s[h]}),t},{})},bt=function(u){return Object.keys(u).map(function(a){return u[a]})},Hn=function(u){return u.reduce(function(a,o){return a.concat(o)},[])},Zn=function(u){if(!u.length)return[];for(var a=[],o=0;o<u.length;o++)a.push(u[o]);return a},Xr=function(u,a){for(var o=0;o<u.length;o++)if(a(u[o]))return o;return-1},Jr=function(u){var a=u.baseUrl,t=u.source,s=void 0===t?"":t,h=u.range,v=void 0===h?"":h,S=u.indexRange,x=void 0===S?"":S,R={uri:s,resolvedUri:Ee((void 0===a?"":a)||"",s)};if(v||x){var Le,q=(v||x).split("-"),_e=Y().BigInt?Y().BigInt(q[0]):parseInt(q[0],10),Re=Y().BigInt?Y().BigInt(q[1]):parseInt(q[1],10);_e<Number.MAX_SAFE_INTEGER&&"bigint"==typeof _e&&(_e=Number(_e)),Re<Number.MAX_SAFE_INTEGER&&"bigint"==typeof Re&&(Re=Number(Re)),"bigint"==typeof(Le="bigint"==typeof Re||"bigint"==typeof _e?Y().BigInt(Re)-Y().BigInt(_e)+Y().BigInt(1):Re-_e+1)&&Le<Number.MAX_SAFE_INTEGER&&(Le=Number(Le)),R.byterange={length:Le,offset:_e}}return R},ls=function(u){return u&&"number"!=typeof u&&(u=parseInt(u,10)),isNaN(u)?null:u},cs={static:function(u){var a=u.duration,o=u.timescale,t=void 0===o?1:o,s=u.sourceDuration,h=u.periodDuration,v=ls(u.endNumber),S=a/t;return"number"==typeof v?{start:0,end:v}:"number"==typeof h?{start:0,end:h/S}:{start:0,end:s/S}},dynamic:function(u){var a=u.NOW,o=u.clientOffset,t=u.availabilityStartTime,s=u.timescale,h=void 0===s?1:s,v=u.duration,S=u.periodStart,x=void 0===S?0:S,R=u.minimumUpdatePeriod,ee=void 0===R?0:R,q=u.timeShiftBufferDepth,_e=void 0===q?1/0:q,Re=ls(u.endNumber),Le=(a+o)/1e3,Ve=t+x,kn=Math.ceil((Le+ee-Ve)*h/v),rn=Math.floor((Le-Ve-_e)*h/v),tn=Math.floor((Le-Ve)*h/v);return{start:Math.max(0,rn),end:"number"==typeof Re?Re:Math.min(kn,tn)}}},Rn=function(u){var a=u.type,o=u.duration,t=u.timescale,s=void 0===t?1:t,h=u.periodDuration,v=u.sourceDuration,S=cs[a](u),ee=function(u,a){for(var o=[],t=u;t<a;t++)o.push(t);return o}(S.start,S.end).map(function(u){return function(a){var o=u.duration,t=u.timescale,v=u.startNumber;return{number:(void 0===v?1:v)+a,duration:o/(void 0===t?1:t),timeline:u.periodStart,time:a*o}}}(u));if("static"===a){var q=ee.length-1;ee[q].duration=("number"==typeof h?h:v)-o/s*q}return ee},fr=function(u){var a=u.baseUrl,o=u.initialization,t=void 0===o?{}:o,s=u.sourceDuration,h=u.indexRange,v=void 0===h?"":h,S=u.periodStart,x=u.presentationTime,R=u.number,ee=void 0===R?0:R,q=u.duration;if(!a)throw new Error("NO_BASE_URL");var _e=Jr({baseUrl:a,source:t.sourceURL,range:t.range}),Re=Jr({baseUrl:a,source:a,indexRange:v});if(Re.map=_e,q){var Le=Rn(u);Le.length&&(Re.duration=Le[0].duration,Re.timeline=Le[0].timeline)}else s&&(Re.duration=s,Re.timeline=S);return Re.presentationTime=x||S,Re.number=ee,[Re]},Gi=function(u,a,o){var Ve,t=u.sidx.map?u.sidx.map:null,s=u.sidx.duration,h=u.timeline||0,v=u.sidx.byterange,S=v.offset+v.length,x=a.timescale,R=a.references.filter(function(In){return 1!==In.referenceType}),ee=[],q=u.endList?"static":"dynamic",_e=u.sidx.timeline,Re=_e,Le=u.mediaSequence||0;Ve="bigint"==typeof a.firstOffset?Y().BigInt(S)+a.firstOffset:S+a.firstOffset;for(var zt=0;zt<R.length;zt++){var tn,vn=a.references[zt],kn=vn.referencedSize,rn=vn.subsegmentDuration;tn="bigint"==typeof Ve?Ve+Y().BigInt(kn)-Y().BigInt(1):Ve+kn-1;var ln=fr({baseUrl:o,timescale:x,timeline:h,periodStart:_e,presentationTime:Re,number:Le,duration:rn,sourceDuration:s,indexRange:Ve+"-"+tn,type:q})[0];t&&(ln.map=t),ee.push(ln),Ve+="bigint"==typeof Ve?Y().BigInt(kn):kn,Re+=rn/x,Le++}return u.segments=ee,u},ds=["AUDIO","SUBTITLES"],Ss=function(u){return function(u,a){return bt(u.reduce(function(o,t){return t.forEach(function(s){o[function(a){return a.timeline}(s)]=s}),o},{}))}(u).sort(function(a,o){return a.timeline>o.timeline?1:-1})},vs=function(u){var a=[];return function(u,a,o){a.forEach(function(t){for(var s in u.mediaGroups[t])for(var h in u.mediaGroups[t][s])o(u.mediaGroups[t][s][h])})}(u,ds,function(o,t,s,h){a=a.concat(o.playlists||[])}),a},ei=function(u){var a=u.playlist;a.mediaSequence=u.mediaSequence,a.segments.forEach(function(t,s){t.number=a.mediaSequence+s})},ws=function(u){return u&&u.uri+"-"+function(u){var a;return a="bigint"==typeof u.offset||"bigint"==typeof u.length?Y().BigInt(u.offset)+Y().BigInt(u.length)-Y().BigInt(1):u.offset+u.length-1,u.offset+"-"+a}(u.byterange)},Io=function(u){return bt(u.reduce(function(o,t){var h,s=t.attributes.id+(t.attributes.lang||"");o[s]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(h=o[s].segments).push.apply(h,t.segments)),t.attributes.contentProtection&&(o[s].attributes.contentProtection=t.attributes.contentProtection)):(o[s]=t,o[s].attributes.timelineStarts=[]);return o[s].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),o},{})).map(function(o){return o.discontinuityStarts=function(u,a){return u.reduce(function(o,t,s){return t.discontinuity&&o.push(s),o},[])}(o.segments||[]),o})},Di=function(u,a){var o=ws(u.sidx),t=o&&a[o]&&a[o].sidx;return t&&Gi(u,t,u.sidx.resolvedUri),u},Ai=function(u,a){if(void 0===a&&(a={}),!Object.keys(a).length)return u;for(var o in u)u[o]=Di(u[o],a);return u},ys=function(u){var a,o=u.attributes,t=u.segments,s=u.sidx,h=u.discontinuityStarts,v={attributes:(a={NAME:o.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:o.width,height:o.height},CODECS:o.codecs,BANDWIDTH:o.bandwidth},a["PROGRAM-ID"]=1,a),uri:"",endList:"static"===o.type,timeline:o.periodStart,resolvedUri:"",targetDuration:o.duration,discontinuityStarts:h,timelineStarts:o.timelineStarts,segments:t};return o.contentProtection&&(v.contentProtection=o.contentProtection),s&&(v.sidx=s),v},Xi=function(u){var a=u.attributes;return"video/mp4"===a.mimeType||"video/webm"===a.mimeType||"video"===a.contentType},so=function(u){var a=u.attributes;return"audio/mp4"===a.mimeType||"audio/webm"===a.mimeType||"audio"===a.contentType},oo=function(u){var a=u.attributes;return"text/vtt"===a.mimeType||"text"===a.contentType},Ks=function(u){return u?Object.keys(u).reduce(function(a,o){return a.concat(u[o].playlists)},[]):[]},vo=function(u){var a,o=u.dashPlaylists,t=u.locations,s=u.sidxMapping,h=void 0===s?{}:s,v=u.previousManifest;if(!o.length)return{};var S=o[0].attributes,x=S.sourceDuration,R=S.type,ee=S.suggestedPresentationDelay,q=S.minimumUpdatePeriod,_e=Io(o.filter(Xi)).map(ys),Re=Io(o.filter(so)),Le=Io(o.filter(oo)),Ve=o.map(function(un){return un.attributes.captionServices}).filter(Boolean),zt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(a={AUDIO:{},VIDEO:{}},a["CLOSED-CAPTIONS"]={},a.SUBTITLES={},a),uri:"",duration:x,playlists:Ai(_e,h)};q>=0&&(zt.minimumUpdatePeriod=1e3*q),t&&(zt.locations=t),"dynamic"===R&&(zt.suggestedPresentationDelay=ee);var kn=Re.length?function(u,a,o){void 0===a&&(a={}),void 0===o&&(o=!1);var t,s=u.reduce(function(v,S){var x=S.attributes.role&&S.attributes.role.value||"",R=S.attributes.lang||"",ee=S.attributes.label||"main";R&&!S.attributes.label&&(ee=S.attributes.lang+(x?" ("+x+")":"")),v[ee]||(v[ee]={language:R,autoselect:!0,default:"main"===x,playlists:[],uri:""});var _e=Di(function(u,a){var o,t=u.attributes,s=u.segments,h=u.sidx,v=u.mediaSequence,S=u.discontinuitySequence,x=u.discontinuityStarts,R={attributes:(o={NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs},o["PROGRAM-ID"]=1,o),uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuitySequence:S,discontinuityStarts:x,timelineStarts:t.timelineStarts,mediaSequence:v,segments:s};return t.contentProtection&&(R.contentProtection=t.contentProtection),h&&(R.sidx=h),a&&(R.attributes.AUDIO="audio",R.attributes.SUBTITLES="subs"),R}(S,o),a);return v[ee].playlists.push(_e),void 0===t&&"main"===x&&((t=S).default=!0),v},{});return t||(s[Object.keys(s)[0]].default=!0),s}(Re,h,0===zt.playlists.length):null,rn=Le.length?function(u,a){return void 0===a&&(a={}),u.reduce(function(o,t){var s=t.attributes.lang||"text";return o[s]||(o[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),o[s].playlists.push(Di(function(u){var a,o=u.attributes,t=u.segments,s=u.mediaSequence,h=u.discontinuityStarts,v=u.discontinuitySequence;void 0===t&&(t=[{uri:o.baseUrl,timeline:o.periodStart,resolvedUri:o.baseUrl||"",duration:o.sourceDuration,number:0}],o.duration=o.sourceDuration);var S=((a={NAME:o.id,BANDWIDTH:o.bandwidth})["PROGRAM-ID"]=1,a);return o.codecs&&(S.CODECS=o.codecs),{attributes:S,uri:"",endList:"static"===o.type,timeline:o.periodStart,resolvedUri:o.baseUrl||"",targetDuration:o.duration,timelineStarts:o.timelineStarts,discontinuityStarts:h,discontinuitySequence:v,mediaSequence:s,segments:t}}(t),a)),o},{})}(Le,h):null,tn=_e.concat(Ks(kn),Ks(rn)),wn=tn.map(function(un){return un.timelineStarts});return zt.timelineStarts=Ss(wn),function(u,a){u.forEach(function(o){o.mediaSequence=0,o.discontinuitySequence=Xr(a,function(t){return t.timeline===o.timeline}),o.segments&&o.segments.forEach(function(t,s){t.number=s})})}(tn,zt.timelineStarts),kn&&(zt.mediaGroups.AUDIO.audio=kn),rn&&(zt.mediaGroups.SUBTITLES.subs=rn),Ve.length&&(zt.mediaGroups["CLOSED-CAPTIONS"].cc=function(u){return u.reduce(function(a,o){return o&&o.forEach(function(t){var h=t.language;a[h]={autoselect:!1,default:!1,instreamId:t.channel,language:h},t.hasOwnProperty("aspectRatio")&&(a[h].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(a[h].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(a[h]["3D"]=t["3D"])}),a},{})}(Ve)),v?function(u){var a=u.oldManifest,o=u.newManifest,t=a.playlists.concat(vs(a)),s=o.playlists.concat(vs(o));return o.timelineStarts=Ss([a.timelineStarts,o.timelineStarts]),function(u){var a=u.oldPlaylists,t=u.timelineStarts;u.newPlaylists.forEach(function(s){s.discontinuitySequence=Xr(t,function(R){return R.timeline===s.timeline});var h=function(u,a){for(var o=0;o<u.length;o++)if(u[o].attributes.NAME===a)return u[o];return null}(a,s.attributes.NAME);if(h&&!s.sidx){var v=s.segments[0],S=Xr(h.segments,function(R){return Math.abs(R.presentationTime-v.presentationTime)<.016666666666666666});if(-1===S)return ei({playlist:s,mediaSequence:h.mediaSequence+h.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),void((!h.segments.length&&s.timeline>h.timeline||h.segments.length&&s.timeline>h.segments[h.segments.length-1].timeline)&&s.discontinuitySequence--);h.segments[S].discontinuity&&!v.discontinuity&&(v.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),ei({playlist:s,mediaSequence:h.segments[S].number})}})}({oldPlaylists:t,newPlaylists:s,timelineStarts:o.timelineStarts}),o}({oldManifest:v,newManifest:zt}):zt},Fs=function(u,a,o){var v=u.timescale,x=u.periodStart,ee=u.minimumUpdatePeriod;return Math.ceil((((u.NOW+u.clientOffset)/1e3+(void 0===ee?0:ee)-(u.availabilityStartTime+(void 0===x?0:x)))*(void 0===v?1:v)-a)/o)},pa=function(u,a){for(var o=u.type,t=u.minimumUpdatePeriod,s=void 0===t?0:t,h=u.media,v=void 0===h?"":h,S=u.sourceDuration,x=u.timescale,R=void 0===x?1:x,ee=u.startNumber,q=void 0===ee?1:ee,_e=u.periodStart,Re=[],Le=-1,Ve=0;Ve<a.length;Ve++){var zt=a[Ve],vn=zt.d,kn=zt.r||0,rn=zt.t||0;Le<0&&(Le=rn),rn&&rn>Le&&(Le=rn);var tn=void 0;if(kn<0){var wn=Ve+1;tn=wn===a.length?"dynamic"===o&&s>0&&v.indexOf("$Number$")>0?Fs(u,Le,vn):(S*R-Le)/vn:(a[wn].t-Le)/vn}else tn=kn+1;for(var un=q+Re.length+tn,ln=q+Re.length;ln<un;)Re.push({number:ln,duration:vn/R,time:Le,timeline:_e}),Le+=vn,ln++}return Re},Ia=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ao=function(u,a){return u.replace(Ia,function(u){return function(a,o,t,s){if("$$"===a)return"$";if(void 0===u[o])return a;var h=""+u[o];return"RepresentationID"===o||(s=t?parseInt(s,10):1,h.length>=s)?h:""+new Array(s-h.length+1).join("0")+h}}(a))},Ct=function(u,a){var o={RepresentationID:u.id,Bandwidth:u.bandwidth||0},t=u.initialization,s=void 0===t?{sourceURL:"",range:""}:t,h=Jr({baseUrl:u.baseUrl,source:ao(s.sourceURL,o),range:s.range}),v=function(u,a){return u.duration||a?u.duration?Rn(u):pa(u,a):[{number:u.startNumber||1,duration:u.sourceDuration,time:0,timeline:u.periodStart}]}(u,a);return v.map(function(S){o.Number=S.number,o.Time=S.time;var x=ao(u.media||"",o),q=u.periodStart+(S.time-(u.presentationTimeOffset||0))/(u.timescale||1);return{uri:x,timeline:S.timeline,duration:S.duration,resolvedUri:Ee(u.baseUrl||"",x),map:h,number:S.number,presentationTime:q}})},jt=function(u,a){var o=u.duration,t=u.segmentUrls,s=void 0===t?[]:t,h=u.periodStart;if(!o&&!a||o&&a)throw new Error("SEGMENT_TIME_UNSPECIFIED");var S,v=s.map(function(R){return function(u,a){var o=u.baseUrl,t=u.initialization,s=void 0===t?{}:t,h=Jr({baseUrl:o,source:s.sourceURL,range:s.range}),v=Jr({baseUrl:o,source:a.media,range:a.mediaRange});return v.map=h,v}(u,R)});return o&&(S=Rn(u)),a&&(S=pa(u,a)),S.map(function(R,ee){if(v[ee]){var q=v[ee],_e=u.timescale||1,Re=u.presentationTimeOffset||0;return q.timeline=R.timeline,q.duration=R.duration,q.number=R.number,q.presentationTime=h+(R.time-Re)/_e,q}}).filter(function(R){return R})},nn=function(u){var t,s,a=u.attributes,o=u.segmentInfo;o.template?(s=Ct,t=Be(a,o.template)):o.base?(s=fr,t=Be(a,o.base)):o.list&&(s=jt,t=Be(a,o.list));var h={attributes:a};if(!s)return h;var v=s(t,o.segmentTimeline);if(t.duration){var R=t.timescale;t.duration=t.duration/(void 0===R?1:R)}else t.duration=v.length?v.reduce(function(q,_e){return Math.max(q,Math.ceil(_e.duration))},0):0;return h.attributes=t,h.segments=v,o.base&&t.indexRange&&(h.sidx=v[0],h.segments=[]),h},Sn=function(u,a){return Zn(u.childNodes).filter(function(o){return o.tagName===a})},zr=function(u){return u.textContent.trim()},di=function(u){var S=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(u);if(!S)return 0;var x=S.slice(1),ee=x[1],q=x[2],_e=x[3],Re=x[4],Le=x[5];return 31536e3*parseFloat(x[0]||0)+2592e3*parseFloat(ee||0)+86400*parseFloat(q||0)+3600*parseFloat(_e||0)+60*parseFloat(Re||0)+parseFloat(Le||0)},yo={mediaPresentationDuration:function(u){return di(u)},availabilityStartTime:function(u){return function(u){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(u)&&(u+="Z"),Date.parse(u)}(u)/1e3},minimumUpdatePeriod:function(u){return di(u)},suggestedPresentationDelay:function(u){return di(u)},type:function(u){return u},timeShiftBufferDepth:function(u){return di(u)},start:function(u){return di(u)},width:function(u){return parseInt(u,10)},height:function(u){return parseInt(u,10)},bandwidth:function(u){return parseInt(u,10)},startNumber:function(u){return parseInt(u,10)},timescale:function(u){return parseInt(u,10)},presentationTimeOffset:function(u){return parseInt(u,10)},duration:function(u){var a=parseInt(u,10);return isNaN(a)?di(u):a},d:function(u){return parseInt(u,10)},t:function(u){return parseInt(u,10)},r:function(u){return parseInt(u,10)},DEFAULT:function(u){return u}},ki=function(u){return u&&u.attributes?Zn(u.attributes).reduce(function(a,o){return a[o.name]=(yo[o.name]||yo.DEFAULT)(o.value),a},{}):{}},os={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ga=function(u,a){return a.length?Hn(u.map(function(o){return a.map(function(t){return Ee(o,zr(t))})})):u},Do=function(u){var a=Sn(u,"SegmentTemplate")[0],o=Sn(u,"SegmentList")[0],t=o&&Sn(o,"SegmentURL").map(function(q){return Be({tag:"SegmentURL"},ki(q))}),s=Sn(u,"SegmentBase")[0],h=o||a,v=h&&Sn(h,"SegmentTimeline")[0],S=o||s||a,x=S&&Sn(S,"Initialization")[0],R=a&&ki(a);R&&x?R.initialization=x&&ki(x):R&&R.initialization&&(R.initialization={sourceURL:R.initialization});var ee={template:R,segmentTimeline:v&&Sn(v,"S").map(function(q){return ki(q)}),list:o&&Be(ki(o),{segmentUrls:t,initialization:ki(x)}),base:s&&Be(ki(s),{initialization:ki(x)})};return Object.keys(ee).forEach(function(q){ee[q]||delete ee[q]}),ee},Ao=function(u,a){return function(o,t){var s=ga(a,Sn(o.node,"BaseURL")),h=Be(u,{periodStart:o.attributes.start});"number"==typeof o.attributes.duration&&(h.periodDuration=o.attributes.duration);var v=Sn(o.node,"AdaptationSet"),S=Do(o.node);return Hn(v.map(function(u,a,o){return function(t){var s=ki(t),h=ga(a,Sn(t,"BaseURL")),v=Sn(t,"Role")[0],S={role:ki(v)},x=Be(u,s,S),R=Sn(t,"Accessibility")[0],ee=function(u){return"urn:scte:dash:cc:cea-608:2015"===u.schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map(function(t){var s,h;if(h=t,/^CC\d=/.test(t)){var v=t.split("=");s=v[0],h=v[1]}else/^CC\d$/.test(t)&&(s=t);return{channel:s,language:h}}):"urn:scte:dash:cc:cea-708:2015"===u.schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map(function(t){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var h=t.split("="),S=h[1],x=void 0===S?"":S;s.channel=h[0],s.language=t,x.split(",").forEach(function(R){var ee=R.split(":"),q=ee[0],_e=ee[1];"lang"===q?s.language=_e:"er"===q?s.easyReader=Number(_e):"war"===q?s.aspectRatio=Number(_e):"3D"===q&&(s["3D"]=Number(_e))})}else s.language=t;return s.channel&&(s.channel="SERVICE"+s.channel),s}):void 0}(ki(R));ee&&(x=Be(x,{captionServices:ee}));var q=Sn(t,"Label")[0];if(q&&q.childNodes.length){var _e=q.childNodes[0].nodeValue.trim();x=Be(x,{label:_e})}var Re=function(u){return u.reduce(function(a,o){var t=ki(o);t.schemeIdUri&&(t.schemeIdUri=t.schemeIdUri.toLowerCase());var s=os[t.schemeIdUri];if(s){a[s]={attributes:t};var h=Sn(o,"cenc:pssh")[0];if(h){var v=zr(h);a[s].pssh=v&&St(v)}}return a},{})}(Sn(t,"ContentProtection"));Object.keys(Re).length&&(x=Be(x,{contentProtection:Re}));var Le=Do(t),Ve=Sn(t,"Representation"),zt=Be(o,Le);return Hn(Ve.map(function(u,a,o){return function(t){var s=Sn(t,"BaseURL"),h=ga(a,s),v=Be(u,ki(t)),S=Do(t);return h.map(function(x){return{segmentInfo:Be(o,S),attributes:Be(v,{baseUrl:x})}})}}(x,h,zt)))}}(h,s,S)))}},ma=function(u){if(""===u)throw new Error("DASH_EMPTY_MANIFEST");var o,t,a=new Qr.DOMParser;try{t=(o=a.parseFromString(u,"application/xml"))&&"MPD"===o.documentElement.tagName?o.documentElement:null}catch(s){}if(!t||t&&t.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return t},Ji=U(7459),$a=U.n(Ji),Mi=xn([73,68,51]),Li=function g(u,a){return void 0===a&&(a=0),(u=xn(u)).length-a<10||!Ue(u,Mi,{offset:a})?a:(a+=function(u,a){void 0===a&&(a=0);var t=(u=xn(u))[a+6]<<21|u[a+7]<<14|u[a+8]<<7|u[a+9];return(16&u[a+5])>>4?t+20:t+10}(u,a),g(u,a))},va=(new Uint8Array([79,112,117,115,72,101,97,100]),function(u){return"string"==typeof u?ge(u):u}),ve=function(u){u=xn(u);for(var a=[],o=0;u.length>o;){var t=u[o],s=0,h=0,v=u[++h];for(h++;128&v;)s=(127&v)<<7,v=u[h],h++;s+=127&v;for(var S=0;S<Z.length;S++){var x=Z[S];if(t===x.id){a.push((0,x.parser)(u.subarray(h,h+s)));break}}o+=s+h}return a};Z=[{id:3,parser:function(u){var a={tag:3,id:u[0]<<8|u[1],flags:u[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&a.flags&&(a.dependsOnEsId=u[a.size]<<8|u[a.size+1],a.size+=2),64&a.flags){var o=u[a.size];a.url=function(u){if(!u)return"";u=Array.prototype.slice.call(u);var a=String.fromCharCode.apply(null,xn(u));try{return decodeURIComponent(escape(a))}catch(o){}return a}(u.subarray(a.size+1,a.size+1+o)),a.size+=o}return 32&a.flags&&(a.ocrEsId=u[a.size]<<8|u[a.size+1],a.size+=2),a.descriptors=ve(u.subarray(a.size))||[],a}},{id:4,parser:function(u){return{tag:4,oti:u[0],streamType:u[1],bufferSize:u[2]<<16|u[3]<<8|u[4],maxBitrate:u[5]<<24|u[6]<<16|u[7]<<8|u[8],avgBitrate:u[9]<<24|u[10]<<16|u[11]<<8|u[12],descriptors:ve(u.subarray(13))}}},{id:5,parser:function(u){return{tag:5,bytes:u}}},{id:6,parser:function(u){return{tag:6,bytes:u}}}];var z=function g(u,a,o){void 0===o&&(o=!1),a=function(u){return Array.isArray(u)?u.map(function(a){return va(a)}):[va(u)]}(a),u=xn(u);var t=[];if(!a.length)return t;for(var s=0;s<u.length;){var h=(u[s]<<24|u[s+1]<<16|u[s+2]<<8|u[s+3])>>>0,v=u.subarray(s+4,s+8);if(0===h)break;var S=s+h;if(S>u.length){if(o)break;S=u.length}var x=u.subarray(s+8,S);Ue(v,a[0])&&(1===a.length?t.push(x):t.push.apply(t,g(x,a.slice(1),o))),s=S}return t},ar={EBML:xn([26,69,223,163]),DocType:xn([66,130]),Segment:xn([24,83,128,103]),SegmentInfo:xn([21,73,169,102]),Tracks:xn([22,84,174,107]),Track:xn([174]),TrackNumber:xn([215]),DefaultDuration:xn([35,227,131]),TrackEntry:xn([174]),TrackType:xn([131]),FlagDefault:xn([136]),CodecID:xn([134]),CodecPrivate:xn([99,162]),VideoTrack:xn([224]),AudioTrack:xn([225]),Cluster:xn([31,67,182,117]),Timestamp:xn([231]),TimestampScale:xn([42,215,177]),BlockGroup:xn([160]),BlockDuration:xn([155]),Block:xn([161]),SimpleBlock:xn([163])},Sr=[128,64,32,16,8,4,2,1],bi=function(u,a,o,t){void 0===o&&(o=!0),void 0===t&&(t=!1);var s=function(u){for(var a=1,o=0;o<Sr.length&&!(u&Sr[o]);o++)a++;return a}(u[a]),h=u.subarray(a,a+s);return o&&((h=Array.prototype.slice.call(u,a,a+s))[0]^=Sr[s-1]),{length:s,value:Mt(h,{signed:t}),bytes:h}},Ti=function g(u){return"string"==typeof u?u.match(/.{1,2}/g).map(function(a){return g(a)}):"number"==typeof u?function(u,a){var t=(void 0===a?{}:a).le,s=void 0!==t&&t;("bigint"!=typeof u&&"number"!=typeof u||"number"==typeof u&&u!=u)&&(u=0);for(var h=function(u){return Math.ceil(function(u){return u.toString(2).length}(u)/8)}(u=Ye(u)),v=new Uint8Array(new ArrayBuffer(h)),S=0;S<h;S++){var x=s?S:Math.abs(S+1-v.length);v[x]=Number(u/ut[S]&Ye(255)),u<0&&(v[x]=Math.abs(~v[x]),v[x]-=0===S?1:2)}return v}(u):u},te=function g(u,a,o){if(o>=a.length)return a.length;var t=bi(a,o,!1);if(Ue(u.bytes,t.bytes))return o;var s=bi(a,o+t.length);return g(u,a,o+s.length+s.value+t.length)},$=function g(u,a){a=function(u){return Array.isArray(u)?u.map(function(a){return Ti(a)}):[Ti(u)]}(a),u=xn(u);var o=[];if(!a.length)return o;for(var t=0;t<u.length;){var s=bi(u,t,!1),h=bi(u,t+s.length),v=t+s.length+h.length;127===h.value&&(h.value=te(s,u,v),h.value!==u.length&&(h.value-=v));var x=u.subarray(v,v+h.value>u.length?u.length:v+h.value);Ue(a[0],s.bytes)&&(1===a.length?o.push(x):o=o.concat(g(x,a.slice(1)))),t+=s.length+h.length+x.length}return o},Pi=xn([0,0,0,1]),Uo=xn([0,0,1]),Qs=xn([0,0,3]),_u=function(u){for(var a=[],o=1;o<u.length-2;)Ue(u.subarray(o,o+3),Qs)&&(a.push(o+2),o++),o++;if(0===a.length)return u;var t=u.length-a.length,s=new Uint8Array(t),h=0;for(o=0;o<t;h++,o++)h===a[0]&&(h++,a.shift()),s[o]=u[h];return s},fe=function(u,a,o,t){void 0===t&&(t=1/0),u=xn(u),o=[].concat(o);for(var h,s=0,v=0;s<u.length&&(v<t||h);){var S=void 0;if(Ue(u.subarray(s),Pi)?S=4:Ue(u.subarray(s),Uo)&&(S=3),S){if(v++,h)return _u(u.subarray(h,s));var x=void 0;"h264"===a?x=31&u[s+S]:"h265"===a&&(x=u[s+S]>>1&63),-1!==o.indexOf(x)&&(h=s+S),s+=S+("h264"===a?1:2)}else s++}return u.subarray(0,0)},Qe={webm:xn([119,101,98,109]),matroska:xn([109,97,116,114,111,115,107,97]),flac:xn([102,76,97,67]),ogg:xn([79,103,103,83]),ac3:xn([11,119]),riff:xn([82,73,70,70]),avi:xn([65,86,73]),wav:xn([87,65,86,69]),"3gp":xn([102,116,121,112,51,103]),mp4:xn([102,116,121,112]),fmp4:xn([115,116,121,112]),mov:xn([102,116,121,112,113,116]),moov:xn([109,111,111,118]),moof:xn([109,111,111,102])},lt={aac:function(u){var a=Li(u);return Ue(u,[255,16],{offset:a,mask:[255,22]})},mp3:function(u){var a=Li(u);return Ue(u,[255,2],{offset:a,mask:[255,6]})},webm:function(u){var a=$(u,[ar.EBML,ar.DocType])[0];return Ue(a,Qe.webm)},mkv:function(u){var a=$(u,[ar.EBML,ar.DocType])[0];return Ue(a,Qe.matroska)},mp4:function(u){return!lt["3gp"](u)&&!lt.mov(u)&&(!!(Ue(u,Qe.mp4,{offset:4})||Ue(u,Qe.fmp4,{offset:4})||Ue(u,Qe.moof,{offset:4})||Ue(u,Qe.moov,{offset:4}))||void 0)},mov:function(u){return Ue(u,Qe.mov,{offset:4})},"3gp":function(u){return Ue(u,Qe["3gp"],{offset:4})},ac3:function(u){var a=Li(u);return Ue(u,Qe.ac3,{offset:a})},ts:function(u){if(u.length<189&&u.length>=1)return 71===u[0];for(var a=0;a+188<u.length&&a<188;){if(71===u[a]&&71===u[a+188])return!0;a+=1}return!1},flac:function(u){var a=Li(u);return Ue(u,Qe.flac,{offset:a})},ogg:function(u){return Ue(u,Qe.ogg)},avi:function(u){return Ue(u,Qe.riff)&&Ue(u,Qe.avi,{offset:8})},wav:function(u){return Ue(u,Qe.riff)&&Ue(u,Qe.wav,{offset:8})},h264:function(u){return function(u,a,o){return fe(u,"h264",7,3)}(u).length},h265:function(u){return function(u,a,o){return fe(u,"h265",[32,33],3)}(u).length}},Bt=Object.keys(lt).filter(function(g){return"ts"!==g&&"h264"!==g&&"h265"!==g}).concat(["ts","h264","h265"]);Bt.forEach(function(g){var u=lt[g];lt[g]=function(a){return u(xn(a))}});for(var ji,mn=lt,Gn=function(u){u=xn(u);for(var a=0;a<Bt.length;a++){var o=Bt[a];if(mn[o](u))return o}return""},yr=U(6277),gi={},xi=function(u,a){return gi[u]=gi[u]||[],a&&(gi[u]=gi[u].concat(a)),gi[u]},Yr=function(u,a){var o=xi(u).indexOf(a);return!(o<=-1||(gi[u]=gi[u].slice(),gi[u].splice(o,1),0))},Oi={prefixed:!0},_s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],as=_s[0],es=0;es<_s.length;es++)if(_s[es][1]in pe()){ji=_s[es];break}if(ji){for(var hi=0;hi<ji.length;hi++)Oi[as[hi]]=ji[hi];Oi.prefixed=ji[0]!==as[0]}var us=[],Fr=function ya(g){var a,u="info",o=function(){for(var s=arguments.length,h=new Array(s),v=0;v<s;v++)h[v]=arguments[v];a("log",u,h)};return a=function(u,a){return function(o,t,s){var h=a.levels[t],v=new RegExp("^("+h+")$");if("log"!==o&&s.unshift(o.toUpperCase()+":"),s.unshift(u+":"),us){us.push([].concat(s));var S=us.length-1e3;us.splice(0,S>0?S:0)}if(Y().console){var x=Y().console[o];!x&&"debug"===o&&(x=Y().console.info||Y().console.log),x&&h&&v.test(o)&&x[Array.isArray(s)?"apply":"call"](Y().console,s)}}}(g,o),o.createLogger=function(t){return ya(g+": "+t)},o.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:u},o.level=function(t){if("string"==typeof t){if(!o.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');u=t}return u},(o.history=function(){return us?[].concat(us):[]}).filter=function(t){return(us||[]).filter(function(s){return new RegExp(".*"+t+".*").test(s[0])})},o.history.clear=function(){us&&(us.length=0)},o.history.disable=function(){null!==us&&(us.length=0,us=null)},o.history.enable=function(){null===us&&(us=[])},o.error=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return a("error",u,s)},o.warn=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return a("warn",u,s)},o.debug=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return a("debug",u,s)},o}("VIDEOJS"),Ql=Fr.createLogger,wl=Object.prototype.toString,sl=function(u){return Xs(u)?Object.keys(u):[]};function Bo(g,u){sl(g).forEach(function(a){return u(g[a],a)})}function Ui(g){for(var u=arguments.length,a=new Array(u>1?u-1:0),o=1;o<u;o++)a[o-1]=arguments[o];return Object.assign?Me.apply(void 0,[g].concat(a)):(a.forEach(function(t){!t||Bo(t,function(s,h){g[h]=s})}),g)}function Xs(g){return!!g&&"object"==typeof g}function za(g){return Xs(g)&&"[object Object]"===wl.call(g)&&g.constructor===Object}function Aa(g,u){if(!g||!u)return"";if("function"==typeof Y().getComputedStyle){var a;try{a=Y().getComputedStyle(g)}catch(o){return""}return a?a.getPropertyValue(u)||a[u]:""}return""}var js=Y().navigator&&Y().navigator.userAgent||"",bu=/AppleWebKit\/([\d.]+)/i.exec(js),Po=bu?parseFloat(bu.pop()):null,nu=/iPod/i.test(js),ps=function(){var g=js.match(/OS (\d+)_/i);return g&&g[1]?g[1]:null}(),_a=/Android/i.test(js),Tc=function(){var g=js.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!g)return null;var u=g[1]&&parseFloat(g[1]),a=g[2]&&parseFloat(g[2]);return u&&a?parseFloat(g[1]+"."+g[2]):u||null}(),To=_a&&Tc<5&&Po<537,Xl=/Firefox/i.test(js),ol=/Edg/i.test(js),Ko=!ol&&(/Chrome/i.test(js)||/CriOS/i.test(js)),ka=function(){var g=js.match(/(Chrome|CriOS)\/(\d+)/);return g&&g[2]?parseFloat(g[2]):null}(),Us=function(){var g=/MSIE\s(\d+)\.\d/.exec(js),u=g&&parseFloat(g[1]);return!u&&/Trident\/7.0/i.test(js)&&/rv:11.0/.test(js)&&(u=11),u}(),ba=/Safari/i.test(js)&&!Ko&&!_a&&!ol,xs=/Windows/i.test(js),qa=Boolean(ru()&&("ontouchstart"in Y()||Y().navigator.maxTouchPoints||Y().DocumentTouch&&Y().document instanceof Y().DocumentTouch)),al=/iPad/i.test(js)||ba&&qa&&!/iPhone/i.test(js),Ta=/iPhone/i.test(js)&&!al,bs=Ta||al||nu,Oo=(ba||bs)&&!Ko,Rd=Object.freeze({__proto__:null,IS_IPOD:nu,IOS_VERSION:ps,IS_ANDROID:_a,ANDROID_VERSION:Tc,IS_NATIVE_ANDROID:To,IS_FIREFOX:Xl,IS_EDGE:ol,IS_CHROME:Ko,CHROME_VERSION:ka,IE_VERSION:Us,IS_SAFARI:ba,IS_WINDOWS:xs,TOUCH_ENABLED:qa,IS_IPAD:al,IS_IPHONE:Ta,IS_IOS:bs,IS_ANY_SAFARI:Oo});function uo(g){return"string"==typeof g&&Boolean(g.trim())}function Lu(g){if(g.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function ru(){return pe()===Y().document}function Eo(g){return Xs(g)&&1===g.nodeType}function oa(){try{return Y().parent!==Y().self}catch(g){return!0}}function iu(g){return function(u,a){if(!uo(u))return pe()[g](null);uo(a)&&(a=pe().querySelector(a));var o=Eo(a)?a:pe();return o[g]&&o[g](u)}}function ti(g,u,a,o){void 0===g&&(g="div"),void 0===u&&(u={}),void 0===a&&(a={});var t=pe().createElement(g);return Object.getOwnPropertyNames(u).forEach(function(s){var h=u[s];-1!==s.indexOf("aria-")||"role"===s||"type"===s?(Fr.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+s+" to "+h+"."),t.setAttribute(s,h)):"textContent"===s?So(t,h):(t[s]!==h||"tabIndex"===s)&&(t[s]=h)}),Object.getOwnPropertyNames(a).forEach(function(s){t.setAttribute(s,a[s])}),o&&Qt(t,o),t}function So(g,u){return void 0===g.textContent?g.innerText=u:g.textContent=u,g}function Fu(g,u){u.firstChild?u.insertBefore(g,u.firstChild):u.appendChild(g)}function Ka(g,u){return Lu(u),g.classList?g.classList.contains(u):function Jc(g){return new RegExp("(^|\\s)"+g+"($|\\s)")}(u).test(g.className)}function Zo(g,u){return g.classList?g.classList.add(u):Ka(g,u)||(g.className=(g.className+" "+u).trim()),g}function Yo(g,u){return g?(g.classList?g.classList.remove(u):(Lu(u),g.className=g.className.split(/\s+/).filter(function(a){return a!==u}).join(" ")),g):(Fr.warn("removeClass was called with an element that doesn't exist"),null)}function Ms(g,u,a){var o=Ka(g,u);if("function"==typeof a&&(a=a(g,u)),"boolean"!=typeof a&&(a=!o),a!==o)return a?Zo(g,u):Yo(g,u),g}function su(g,u){Object.getOwnPropertyNames(u).forEach(function(a){var o=u[a];null==o||!1===o?g.removeAttribute(a):g.setAttribute(a,!0===o?"":o)})}function lo(g){var u={};if(g&&g.attributes&&g.attributes.length>0)for(var o=g.attributes,t=o.length-1;t>=0;t--){var s=o[t].name,h=o[t].value;("boolean"==typeof g[s]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+s+","))&&(h=null!==h),u[s]=h}return u}function ju(g,u){return g.getAttribute(u)}function Uu(g,u,a){g.setAttribute(u,a)}function F(g,u){g.removeAttribute(u)}function P(){pe().body.focus(),pe().onselectstart=function(){return!1}}function A(){pe().onselectstart=function(){return!0}}function K(g){if(g&&g.getBoundingClientRect&&g.parentNode){var u=g.getBoundingClientRect(),a={};return["bottom","height","left","right","top","width"].forEach(function(o){void 0!==u[o]&&(a[o]=u[o])}),a.height||(a.height=parseFloat(Aa(g,"height"))),a.width||(a.width=parseFloat(Aa(g,"width"))),a}}function se(g){if(!g||g&&!g.offsetParent)return{left:0,top:0,width:0,height:0};for(var u=g.offsetWidth,a=g.offsetHeight,o=0,t=0;g.offsetParent&&g!==pe()[Oi.fullscreenElement];)o+=g.offsetLeft,t+=g.offsetTop,g=g.offsetParent;return{left:o,top:t,width:u,height:a}}function de(g,u){var a={x:0,y:0};if(bs)for(var o=g;o&&"html"!==o.nodeName.toLowerCase();){var t=Aa(o,"transform");if(/^matrix/.test(t)){var s=t.slice(7,-1).split(/,\s/).map(Number);a.x+=s[4],a.y+=s[5]}else if(/^matrix3d/.test(t)){var h=t.slice(9,-1).split(/,\s/).map(Number);a.x+=h[12],a.y+=h[13]}o=o.parentNode}var v={},S=se(u.target),x=se(g),R=x.width,q=u.offsetY-(x.top-S.top),_e=u.offsetX-(x.left-S.left);return u.changedTouches&&(_e=u.changedTouches[0].pageX-x.left,q=u.changedTouches[0].pageY+x.top,bs&&(_e-=a.x,q-=a.y)),v.y=1-Math.max(0,Math.min(1,q/x.height)),v.x=Math.max(0,Math.min(1,_e/R)),v}function ze(g){return Xs(g)&&3===g.nodeType}function st(g){for(;g.firstChild;)g.removeChild(g.firstChild);return g}function en(g){return"function"==typeof g&&(g=g()),(Array.isArray(g)?g:[g]).map(function(u){return"function"==typeof u&&(u=u()),Eo(u)||ze(u)?u:"string"==typeof u&&/\S/.test(u)?pe().createTextNode(u):void 0}).filter(function(u){return u})}function Qt(g,u){return en(u).forEach(function(a){return g.appendChild(a)}),g}function Pn(g,u){return Qt(st(g),u)}function ir(g){return void 0===g.button&&void 0===g.buttons||0===g.button&&void 0===g.buttons||"mouseup"===g.type&&0===g.button&&0===g.buttons||!(0!==g.button||1!==g.buttons)}var ou,pn=iu("querySelector"),Rt=iu("querySelectorAll"),dn=Object.freeze({__proto__:null,isReal:ru,isEl:Eo,isInFrame:oa,createEl:ti,textContent:So,prependTo:Fu,hasClass:Ka,addClass:Zo,removeClass:Yo,toggleClass:Ms,setAttributes:su,getAttributes:lo,getAttribute:ju,setAttribute:Uu,removeAttribute:F,blockTextSelection:P,unblockTextSelection:A,getBoundingClientRect:K,findPosition:se,getPointerPosition:de,isTextNode:ze,emptyEl:st,normalizeContent:en,appendContent:Qt,insertContent:Pn,isSingleLeftClick:ir,$:pn,$$:Rt}),gs=!1,xl=function(){if(!1!==ou.options.autoSetup){var u=Array.prototype.slice.call(pe().getElementsByTagName("video")),a=Array.prototype.slice.call(pe().getElementsByTagName("audio")),o=Array.prototype.slice.call(pe().getElementsByTagName("video-js")),t=u.concat(a,o);if(t&&t.length>0)for(var s=0,h=t.length;s<h;s++){var v=t[s];if(!v||!v.getAttribute){Ea(1);break}void 0===v.player&&null!==v.getAttribute("data-setup")&&ou(v)}else gs||Ea(1)}};function Ea(g,u){!ru()||(u&&(ou=u),Y().setTimeout(xl,g))}function ul(){gs=!0,Y().removeEventListener("load",ul)}ru()&&("complete"===pe().readyState?ul():Y().addEventListener("load",ul));var Bs,Nd=function(u){var a=pe().createElement("style");return a.className=u,a},Bu=function(u,a){u.styleSheet?u.styleSheet.cssText=a:u.textContent=a},Sc=3;function au(){return Sc++}Y().WeakMap||(Bs=function(){function g(){this.vdata="vdata"+Math.floor(Y().performance&&Y().performance.now()||Date.now()),this.data={}}var u=g.prototype;return u.set=function(o,t){var s=o[this.vdata]||au();return o[this.vdata]||(o[this.vdata]=s),this.data[s]=t,this},u.get=function(o){var t=o[this.vdata];if(t)return this.data[t];Fr("We have no data for this element",o)},u.has=function(o){return o[this.vdata]in this.data},u.delete=function(o){var t=o[this.vdata];t&&(delete this.data[t],delete o[this.vdata])},g}());var co=Y().WeakMap?new WeakMap:new Bs;function Tu(g,u){if(co.has(g)){var a=co.get(g);0===a.handlers[u].length&&(delete a.handlers[u],g.removeEventListener?g.removeEventListener(u,a.dispatcher,!1):g.detachEvent&&g.detachEvent("on"+u,a.dispatcher)),Object.getOwnPropertyNames(a.handlers).length<=0&&(delete a.handlers,delete a.dispatcher,delete a.disabled),0===Object.getOwnPropertyNames(a).length&&co.delete(g)}}function Ur(g,u,a,o){a.forEach(function(t){g(u,t,o)})}function uu(g){if(g.fixed_)return g;function u(){return!0}function a(){return!1}if(!g||!g.isPropagationStopped||!g.isImmediatePropagationStopped){var o=g||Y().event;for(var t in g={},o)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&o.preventDefault||(g[t]=o[t]));if(g.target||(g.target=g.srcElement||pe()),g.relatedTarget||(g.relatedTarget=g.fromElement===g.target?g.toElement:g.fromElement),g.preventDefault=function(){o.preventDefault&&o.preventDefault(),g.returnValue=!1,o.returnValue=!1,g.defaultPrevented=!0},g.defaultPrevented=!1,g.stopPropagation=function(){o.stopPropagation&&o.stopPropagation(),g.cancelBubble=!0,o.cancelBubble=!0,g.isPropagationStopped=u},g.isPropagationStopped=a,g.stopImmediatePropagation=function(){o.stopImmediatePropagation&&o.stopImmediatePropagation(),g.isImmediatePropagationStopped=u,g.stopPropagation()},g.isImmediatePropagationStopped=a,null!=g.clientX){var s=pe().documentElement,h=pe().body;g.pageX=g.clientX+(s&&s.scrollLeft||h&&h.scrollLeft||0)-(s&&s.clientLeft||h&&h.clientLeft||0),g.pageY=g.clientY+(s&&s.scrollTop||h&&h.scrollTop||0)-(s&&s.clientTop||h&&h.clientTop||0)}g.which=g.charCode||g.keyCode,null!=g.button&&(g.button=1&g.button?0:4&g.button?1:2&g.button?2:0)}return g.fixed_=!0,g}var Eu,Dr=["touchstart","touchmove"];function Ei(g,u,a){if(Array.isArray(u))return Ur(Ei,g,u,a);co.has(g)||co.set(g,{});var o=co.get(g);if(o.handlers||(o.handlers={}),o.handlers[u]||(o.handlers[u]=[]),a.guid||(a.guid=au()),o.handlers[u].push(a),o.dispatcher||(o.disabled=!1,o.dispatcher=function(s,h){if(!o.disabled){s=uu(s);var v=o.handlers[s.type];if(v)for(var S=v.slice(0),x=0,R=S.length;x<R&&!s.isImmediatePropagationStopped();x++)try{S[x].call(g,s,h)}catch(ee){Fr.error(ee)}}}),1===o.handlers[u].length)if(g.addEventListener){var t=!1;(function(){if("boolean"!=typeof Eu){Eu=!1;try{var u=Object.defineProperty({},"passive",{get:function(){Eu=!0}});Y().addEventListener("test",null,u),Y().removeEventListener("test",null,u)}catch(a){}}return Eu})()&&Dr.indexOf(u)>-1&&(t={passive:!0}),g.addEventListener(u,o.dispatcher,t)}else g.attachEvent&&g.attachEvent("on"+u,o.dispatcher)}function Js(g,u,a){if(co.has(g)){var o=co.get(g);if(o.handlers){if(Array.isArray(u))return Ur(Js,g,u,a);var t=function(x,R){o.handlers[R]=[],Tu(x,R)};if(void 0===u){for(var s in o.handlers)Object.prototype.hasOwnProperty.call(o.handlers||{},s)&&t(g,s);return}var h=o.handlers[u];if(h){if(!a)return void t(g,u);if(a.guid)for(var v=0;v<h.length;v++)h[v].guid===a.guid&&h.splice(v--,1);Tu(g,u)}}}}function wc(g,u,a){var o=co.has(g)?co.get(g):{},t=g.parentNode||g.ownerDocument;if("string"==typeof u?u={type:u,target:g}:u.target||(u.target=g),u=uu(u),o.dispatcher&&o.dispatcher.call(g,u,a),t&&!u.isPropagationStopped()&&!0===u.bubbles)wc.call(null,t,u,a);else if(!t&&!u.defaultPrevented&&u.target&&u.target[u.type]){co.has(u.target)||co.set(u.target,{});var s=co.get(u.target);u.target[u.type]&&(s.disabled=!0,"function"==typeof u.target[u.type]&&u.target[u.type](),s.disabled=!1)}return!u.defaultPrevented}function Il(g,u,a){if(Array.isArray(u))return Ur(Il,g,u,a);var o=function t(){Js(g,u,t),a.apply(this,arguments)};o.guid=a.guid=a.guid||au(),Ei(g,u,o)}function mi(g,u,a){var o=function t(){Js(g,u,t),a.apply(this,arguments)};o.guid=a.guid=a.guid||au(),Ei(g,u,o)}var Qo,Mh=Object.freeze({__proto__:null,fixEvent:uu,on:Ei,off:Js,trigger:wc,one:Il,any:mi}),Yi=function(u,a,o){a.guid||(a.guid=au());var t=a.bind(u);return t.guid=o?o+"_"+a.guid:a.guid,t},Ma=function(u,a){var o=Y().performance.now();return function(){var h=Y().performance.now();h-o>=a&&(u.apply(void 0,arguments),o=h)}},fi=function(){};fi.prototype.allowedEvents_={},fi.prototype.addEventListener=fi.prototype.on=function(g,u){var a=this.addEventListener;this.addEventListener=function(){},Ei(this,g,u),this.addEventListener=a},fi.prototype.removeEventListener=fi.prototype.off=function(g,u){Js(this,g,u)},fi.prototype.one=function(g,u){var a=this.addEventListener;this.addEventListener=function(){},Il(this,g,u),this.addEventListener=a},fi.prototype.any=function(g,u){var a=this.addEventListener;this.addEventListener=function(){},mi(this,g,u),this.addEventListener=a},fi.prototype.dispatchEvent=fi.prototype.trigger=function(g){var u=g.type||g;"string"==typeof g&&(g={type:u}),g=uu(g),this.allowedEvents_[u]&&this["on"+u]&&this["on"+u](g),wc(this,g)},fi.prototype.queueTrigger=function(g){var u=this;Qo||(Qo=new Map);var a=g.type||g,o=Qo.get(this);o||Qo.set(this,o=new Map);var t=o.get(a);o.delete(a),Y().clearTimeout(t);var s=Y().setTimeout(function(){0===o.size&&(o=null,Qo.delete(u)),u.trigger(g)},0);o.set(a,s)};var ns=function(u){return"function"==typeof u.name?u.name():"string"==typeof u.name?u.name:u.name_?u.name_:u.constructor&&u.constructor.name?u.constructor.name:typeof u},Xo=function(u){return u instanceof fi||!!u.eventBusEl_&&["on","one","off","trigger"].every(function(a){return"function"==typeof u[a]})},Ro=function(u){return"string"==typeof u&&/\S/.test(u)||Array.isArray(u)&&!!u.length},fo=function(u,a,o){if(!u||!u.nodeName&&!Xo(u))throw new Error("Invalid target for "+ns(a)+"#"+o+"; must be a DOM node or evented object.")},Cc=function(u,a,o){if(!Ro(u))throw new Error("Invalid event type for "+ns(a)+"#"+o+"; must be a non-empty string or array.")},aa=function(u,a,o){if("function"!=typeof u)throw new Error("Invalid listener for "+ns(a)+"#"+o+"; must be a function.")},ua=function(u,a,o){var s,h,v,t=a.length<3||a[0]===u||a[0]===u.eventBusEl_;return t?(s=u.eventBusEl_,a.length>=3&&a.shift(),h=a[0],v=a[1]):(s=a[0],h=a[1],v=a[2]),fo(s,u,o),Cc(h,u,o),aa(v,u,o),{isTargetingSelf:t,target:s,type:h,listener:v=Yi(u,v)}},No=function(u,a,o,t){fo(u,u,a),u.nodeName?Mh[a](u,o,t):u[a](o,t)},Su={on:function(){for(var u=this,a=arguments.length,o=new Array(a),t=0;t<a;t++)o[t]=arguments[t];var s=ua(this,o,"on"),h=s.isTargetingSelf,v=s.target,S=s.type,x=s.listener;if(No(v,"on",S,x),!h){var R=function(){return u.off(v,S,x)};R.guid=x.guid;var ee=function(){return u.off("dispose",R)};ee.guid=x.guid,No(this,"on","dispose",R),No(v,"on","dispose",ee)}},one:function(){for(var u=this,a=arguments.length,o=new Array(a),t=0;t<a;t++)o[t]=arguments[t];var s=ua(this,o,"one"),h=s.isTargetingSelf,v=s.target,S=s.type,x=s.listener;if(h)No(v,"one",S,x);else{var R=function ee(){u.off(v,S,ee);for(var q=arguments.length,_e=new Array(q),Re=0;Re<q;Re++)_e[Re]=arguments[Re];x.apply(null,_e)};R.guid=x.guid,No(v,"one",S,R)}},any:function(){for(var u=this,a=arguments.length,o=new Array(a),t=0;t<a;t++)o[t]=arguments[t];var s=ua(this,o,"any"),h=s.isTargetingSelf,v=s.target,S=s.type,x=s.listener;if(h)No(v,"any",S,x);else{var R=function ee(){u.off(v,S,ee);for(var q=arguments.length,_e=new Array(q),Re=0;Re<q;Re++)_e[Re]=arguments[Re];x.apply(null,_e)};R.guid=x.guid,No(v,"any",S,R)}},off:function(u,a,o){if(!u||Ro(u))Js(this.eventBusEl_,u,a);else{var t=u,s=a;fo(t,this,"off"),Cc(s,this,"off"),aa(o,this,"off"),o=Yi(this,o),this.off("dispose",o),t.nodeName?(Js(t,s,o),Js(t,"dispose",o)):Xo(t)&&(t.off(s,o),t.off("dispose",o))}},trigger:function(u,a){if(fo(this.eventBusEl_,this,"trigger"),!Ro(u&&"string"!=typeof u?u.type:u)){var t="Invalid event type for "+ns(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!u)throw new Error(t);(this.log||Fr).error(t)}return wc(this.eventBusEl_,u,a)}};function Fn(g,u){void 0===u&&(u={});var o=u.eventBusKey;if(o){if(!g[o].nodeName)throw new Error('The eventBusKey "'+o+'" does not refer to an element.');g.eventBusEl_=g[o]}else g.eventBusEl_=ti("span",{className:"vjs-event-bus"});return Ui(g,Su),g.eventedCallbacks&&g.eventedCallbacks.forEach(function(t){t()}),g.on("dispose",function(){g.off(),[g,g.el_,g.eventBusEl_].forEach(function(t){t&&co.has(t)&&co.delete(t)}),Y().setTimeout(function(){g.eventBusEl_=null},0)}),g}var Vu={state:{},setState:function(u){var o,a=this;return"function"==typeof u&&(u=u()),Bo(u,function(t,s){a.state[s]!==t&&((o=o||{})[s]={from:a.state[s],to:t}),a.state[s]=t}),o&&Xo(this)&&this.trigger({changes:o,type:"statechanged"}),o}};function Jl(g,u){return Ui(g,Vu),g.state=Ui({},g.state,u),"function"==typeof g.handleStateChanged&&Xo(g)&&g.on("statechanged",g.handleStateChanged),g}var wu=function(u){return"string"!=typeof u?u:u.replace(/./,function(a){return a.toLowerCase()})},Kr=function(u){return"string"!=typeof u?u:u.replace(/./,function(a){return a.toUpperCase()})};function ui(){for(var g={},u=arguments.length,a=new Array(u),o=0;o<u;o++)a[o]=arguments[o];return a.forEach(function(t){!t||Bo(t,function(s,h){za(s)?(za(g[h])||(g[h]={}),g[h]=ui(g[h],s)):g[h]=s})}),g}var Ef=function(){function g(){this.map_={}}var u=g.prototype;return u.has=function(o){return o in this.map_},u.delete=function(o){var t=this.has(o);return delete this.map_[o],t},u.set=function(o,t){return this.map_[o]=t,this},u.forEach=function(o,t){for(var s in this.map_)o.call(t,this.map_[s],s,this)},g}(),Sa=Y().Map?Y().Map:Ef,ed=function(){function g(){this.set_={}}var u=g.prototype;return u.has=function(o){return o in this.set_},u.delete=function(o){var t=this.has(o);return delete this.set_[o],t},u.add=function(o){return this.set_[o]=1,this},u.forEach=function(o,t){for(var s in this.set_)o.call(t,s,s,this)},g}(),lu=Y().Set?Y().Set:ed,_n=function(){function g(a,o,t){var s=this;if(this.player_=!a&&this.play?a=this:a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ui({},this.options_),o=this.options_=ui(this.options_,o),this.id_=o.id||o.el&&o.el.id,!this.id_){var h=a&&a.id&&a.id()||"no_player";this.id_=h+"_component_"+au()}this.name_=o.name||null,o.el?this.el_=o.el:!1!==o.createEl&&(this.el_=this.createEl()),o.className&&this.el_&&o.className.split(" ").forEach(function(v){return s.addClass(v)}),!1!==o.evented&&(Fn(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Jl(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new lu,this.setIntervalIds_=new lu,this.rafIds_=new lu,this.namedRafs_=new Sa,this.clearingTimersOnDispose_=!1,!1!==o.initChildren&&this.initChildren(),this.ready(t),!1!==o.reportTouchActivity&&this.enableTouchActivity()}var u=g.prototype;return u.dispose=function(o){if(void 0===o&&(o={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(o.restoreEl?this.el_.parentNode.replaceChild(o.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},u.isDisposed=function(){return Boolean(this.isDisposed_)},u.player=function(){return this.player_},u.options=function(o){return o?(this.options_=ui(this.options_,o),this.options_):this.options_},u.el=function(){return this.el_},u.createEl=function(o,t,s){return ti(o,t,s)},u.localize=function(o,t,s){void 0===s&&(s=o);var h=this.player_.language&&this.player_.language(),v=this.player_.languages&&this.player_.languages(),S=v&&v[h],x=h&&h.split("-")[0],R=v&&v[x],ee=s;return S&&S[o]?ee=S[o]:R&&R[o]&&(ee=R[o]),t&&(ee=ee.replace(/\{(\d+)\}/g,function(q,_e){var Re=t[_e-1],Le=Re;return void 0===Re&&(Le=q),Le})),ee},u.handleLanguagechange=function(){},u.contentEl=function(){return this.contentEl_||this.el_},u.id=function(){return this.id_},u.name=function(){return this.name_},u.children=function(){return this.children_},u.getChildById=function(o){return this.childIndex_[o]},u.getChild=function(o){if(o)return this.childNameIndex_[o]},u.getDescendant=function(){for(var o=arguments.length,t=new Array(o),s=0;s<o;s++)t[s]=arguments[s];t=t.reduce(function(S,x){return S.concat(x)},[]);for(var h=this,v=0;v<t.length;v++)if(!(h=h.getChild(t[v]))||!h.getChild)return;return h},u.addChild=function(o,t,s){var h,v;if(void 0===t&&(t={}),void 0===s&&(s=this.children_.length),"string"==typeof o){v=Kr(o);var S=t.componentClass||v;t.name=v;var x=g.getComponent(S);if(!x)throw new Error("Component "+S+" does not exist");if("function"!=typeof x)return null;h=new x(this.player_||this,t)}else h=o;if(h.parentComponent_&&h.parentComponent_.removeChild(h),this.children_.splice(s,0,h),h.parentComponent_=this,"function"==typeof h.id&&(this.childIndex_[h.id()]=h),(v=v||h.name&&Kr(h.name()))&&(this.childNameIndex_[v]=h,this.childNameIndex_[wu(v)]=h),"function"==typeof h.el&&h.el()){var R=null;this.children_[s+1]&&(this.children_[s+1].el_?R=this.children_[s+1].el_:Eo(this.children_[s+1])&&(R=this.children_[s+1])),this.contentEl().insertBefore(h.el(),R)}return h},u.removeChild=function(o){if("string"==typeof o&&(o=this.getChild(o)),o&&this.children_){for(var t=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===o){t=!0,this.children_.splice(s,1);break}if(t){o.parentComponent_=null,this.childIndex_[o.id()]=null,this.childNameIndex_[Kr(o.name())]=null,this.childNameIndex_[wu(o.name())]=null;var h=o.el();h&&h.parentNode===this.contentEl()&&this.contentEl().removeChild(o.el())}}},u.initChildren=function(){var o=this,t=this.options_.children;if(t){var v,s=this.options_,S=g.getComponent("Tech");(v=Array.isArray(t)?t:Object.keys(t)).concat(Object.keys(this.options_).filter(function(x){return!v.some(function(R){return"string"==typeof R?x===R:x===R.name})})).map(function(x){var R,ee;return"string"==typeof x?ee=t[R=x]||o.options_[R]||{}:(R=x.name,ee=x),{name:R,opts:ee}}).filter(function(x){var R=g.getComponent(x.opts.componentClass||Kr(x.name));return R&&!S.isTech(R)}).forEach(function(R){var ee=R.name,q=R.opts;if(void 0!==s[ee]&&(q=s[ee]),!1!==q){!0===q&&(q={}),q.playerOptions=o.options_.playerOptions;var _e=o.addChild(ee,q);_e&&(o[ee]=_e)}})}},u.buildCSSClass=function(){return""},u.ready=function(o,t){if(void 0===t&&(t=!1),o){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(o);t?o.call(this):this.setTimeout(o,1)}},u.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var o=this.readyQueue_;this.readyQueue_=[],o&&o.length>0&&o.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},u.$=function(o,t){return pn(o,t||this.contentEl())},u.$$=function(o,t){return Rt(o,t||this.contentEl())},u.hasClass=function(o){return Ka(this.el_,o)},u.addClass=function(o){Zo(this.el_,o)},u.removeClass=function(o){Yo(this.el_,o)},u.toggleClass=function(o,t){Ms(this.el_,o,t)},u.show=function(){this.removeClass("vjs-hidden")},u.hide=function(){this.addClass("vjs-hidden")},u.lockShowing=function(){this.addClass("vjs-lock-showing")},u.unlockShowing=function(){this.removeClass("vjs-lock-showing")},u.getAttribute=function(o){return ju(this.el_,o)},u.setAttribute=function(o,t){Uu(this.el_,o,t)},u.removeAttribute=function(o){F(this.el_,o)},u.width=function(o,t){return this.dimension("width",o,t)},u.height=function(o,t){return this.dimension("height",o,t)},u.dimensions=function(o,t){this.width(o,!0),this.height(t)},u.dimension=function(o,t,s){if(void 0!==t)return(null===t||t!=t)&&(t=0),this.el_.style[o]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(s||this.trigger("componentresize"));if(!this.el_)return 0;var h=this.el_.style[o],v=h.indexOf("px");return parseInt(-1!==v?h.slice(0,v):this.el_["offset"+Kr(o)],10)},u.currentDimension=function(o){var t=0;if("width"!==o&&"height"!==o)throw new Error("currentDimension only accepts width or height value");if(t=Aa(this.el_,o),0===(t=parseFloat(t))||isNaN(t)){var s="offset"+Kr(o);t=this.el_[s]}return t},u.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},u.currentWidth=function(){return this.currentDimension("width")},u.currentHeight=function(){return this.currentDimension("height")},u.focus=function(){this.el_.focus()},u.blur=function(){this.el_.blur()},u.handleKeyDown=function(o){this.player_&&(et().isEventKey(o,"Tab")||o.stopPropagation(),this.player_.handleKeyDown(o))},u.handleKeyPress=function(o){this.handleKeyDown(o)},u.emitTapEvents=function(){var v,o=0,t=null;this.on("touchstart",function(x){1===x.touches.length&&(t={pageX:x.touches[0].pageX,pageY:x.touches[0].pageY},o=Y().performance.now(),v=!0)}),this.on("touchmove",function(x){if(x.touches.length>1)v=!1;else if(t){var R=x.touches[0].pageX-t.pageX,ee=x.touches[0].pageY-t.pageY;Math.sqrt(R*R+ee*ee)>10&&(v=!1)}});var S=function(){v=!1};this.on("touchleave",S),this.on("touchcancel",S),this.on("touchend",function(x){t=null,!0===v&&Y().performance.now()-o<200&&(x.preventDefault(),this.trigger("tap"))})},u.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,o=Yi(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){o(),this.clearInterval(t),t=this.setInterval(o,250)});var s=function(v){o(),this.clearInterval(t)};this.on("touchmove",o),this.on("touchend",s),this.on("touchcancel",s)}},u.setTimeout=function(o,t){var h,s=this;return o=Yi(this,o),this.clearTimersOnDispose_(),h=Y().setTimeout(function(){s.setTimeoutIds_.has(h)&&s.setTimeoutIds_.delete(h),o()},t),this.setTimeoutIds_.add(h),h},u.clearTimeout=function(o){return this.setTimeoutIds_.has(o)&&(this.setTimeoutIds_.delete(o),Y().clearTimeout(o)),o},u.setInterval=function(o,t){o=Yi(this,o),this.clearTimersOnDispose_();var s=Y().setInterval(o,t);return this.setIntervalIds_.add(s),s},u.clearInterval=function(o){return this.setIntervalIds_.has(o)&&(this.setIntervalIds_.delete(o),Y().clearInterval(o)),o},u.requestAnimationFrame=function(o){var s,t=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),o=Yi(this,o),s=Y().requestAnimationFrame(function(){t.rafIds_.has(s)&&t.rafIds_.delete(s),o()}),this.rafIds_.add(s),s):this.setTimeout(o,1e3/60)},u.requestNamedAnimationFrame=function(o,t){var s=this;if(!this.namedRafs_.has(o)){this.clearTimersOnDispose_(),t=Yi(this,t);var h=this.requestAnimationFrame(function(){t(),s.namedRafs_.has(o)&&s.namedRafs_.delete(o)});return this.namedRafs_.set(o,h),o}},u.cancelNamedAnimationFrame=function(o){!this.namedRafs_.has(o)||(this.cancelAnimationFrame(this.namedRafs_.get(o)),this.namedRafs_.delete(o))},u.cancelAnimationFrame=function(o){return this.supportsRaf_?(this.rafIds_.has(o)&&(this.rafIds_.delete(o),Y().cancelAnimationFrame(o)),o):this.clearTimeout(o)},u.clearTimersOnDispose_=function(){var o=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var h=t[1];o[t[0]].forEach(function(v,S){return o[h](S)})}),o.clearingTimersOnDispose_=!1}))},g.registerComponent=function(o,t){if("string"!=typeof o||!o)throw new Error('Illegal component name, "'+o+'"; must be a non-empty string.');var s=g.getComponent("Tech"),h=s&&s.isTech(t),v=g===t||g.prototype.isPrototypeOf(t.prototype);if(h||!v)throw new Error('Illegal component, "'+o+'"; '+(h?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");o=Kr(o),g.components_||(g.components_={});var x=g.getComponent("Player");if("Player"===o&&x&&x.players){var R=x.players,ee=Object.keys(R);if(R&&ee.length>0&&ee.map(function(q){return R[q]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return g.components_[o]=t,g.components_[wu(o)]=t,t},g.getComponent=function(o){if(o&&g.components_)return g.components_[o]},g}();function xc(g,u,a,o){return function Pa(g,u,a){if("number"!=typeof u||u<0||u>a)throw new Error("Failed to execute '"+g+"' on 'TimeRanges': The index provided ("+u+") is non-numeric or out of bounds (0-"+a+").")}(g,o,a.length-1),a[o][u]}function cu(g){var u;return u=void 0===g||0===g.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:g.length,start:xc.bind(null,"start",0,g),end:xc.bind(null,"end",1,g)},Y().Symbol&&Y().Symbol.iterator&&(u[Y().Symbol.iterator]=function(){return(g||[]).values()}),u}function Jo(g,u){return Array.isArray(g)?cu(g):void 0===g||void 0===u?cu():cu([[g,u]])}function ll(g,u){var o,t,a=0;if(!u)return 0;(!g||!g.length)&&(g=Jo(0,0));for(var s=0;s<g.length;s++)o=g.start(s),(t=g.end(s))>u&&(t=u),a+=t-o;return a/u}function ea(g){if(g instanceof ea)return g;"number"==typeof g?this.code=g:"string"==typeof g?this.message=g:Xs(g)&&("number"==typeof g.code&&(this.code=g.code),Ui(this,g)),this.message||(this.message=ea.defaultMessages[this.code]||"")}_n.prototype.supportsRaf_="function"==typeof Y().requestAnimationFrame&&"function"==typeof Y().cancelAnimationFrame,_n.registerComponent("Component",_n),ea.prototype.code=0,ea.prototype.message="",ea.prototype.status=null,ea.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ea.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Za=0;Za<ea.errorTypes.length;Za++)ea[ea.errorTypes[Za]]=Za,ea.prototype[ea.errorTypes[Za]]=Za;function Hu(g){return null!=g&&"function"==typeof g.then}function la(g){Hu(g)&&g.then(null,function(u){})}var W=function(u){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(o,t,s){return u[t]&&(o[t]=u[t]),o},{cues:u.cues&&Array.prototype.map.call(u.cues,function(o){return{startTime:o.startTime,endTime:o.endTime,text:o.text,id:o.id}})})},Lt="vjs-modal-dialog",Ut=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).handleKeyDown_=function(h){return s.handleKeyDown(h)},s.close_=function(h){return s.close(h)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=ti("div",{className:Lt+"-content"},{role:"document"}),s.descEl_=ti("p",{className:Lt+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),So(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},a.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,g.prototype.dispose.call(this)},a.buildCSSClass=function(){return Lt+" vjs-hidden "+g.prototype.buildCSSClass.call(this)},a.label=function(){return this.localize(this.options_.label||"Modal Window")},a.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},a.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},a.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},a.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},a.closeable=function(t){if("boolean"==typeof t){var s=this.closeable_=!!t,h=this.getChild("closeButton");if(s&&!h){var v=this.contentEl_;this.contentEl_=this.el_,h=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=v,this.on(h,"close",this.close_)}!s&&h&&(this.off(h,"close",this.close_),this.removeChild(h),h.dispose())}return this.closeable_},a.fill=function(){this.fillWith(this.content())},a.fillWith=function(t){var s=this.contentEl(),h=s.parentNode,v=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,h.removeChild(s),this.empty(),Pn(s,t),this.trigger("modalfill"),v?h.insertBefore(s,v):h.appendChild(s);var S=this.getChild("closeButton");S&&h.appendChild(S.el_)},a.empty=function(){this.trigger("beforemodalempty"),st(this.contentEl()),this.trigger("modalempty")},a.content=function(t){return void 0!==t&&(this.content_=t),this.content_},a.conditionalFocus_=function(){var t=pe().activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(t)||s===t)&&(this.previouslyActiveEl_=t,this.focus())},a.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},a.handleKeyDown=function(t){if(t.stopPropagation(),et().isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(et().isEventKey(t,"Tab")){for(var v,s=this.focusableEls_(),h=this.el_.querySelector(":focus"),S=0;S<s.length;S++)if(h===s[S]){v=S;break}pe().activeElement===this.el_&&(v=0),t.shiftKey&&0===v?(s[s.length-1].focus(),t.preventDefault()):!t.shiftKey&&v===s.length-1&&(s[0].focus(),t.preventDefault())}},a.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(s){return(s instanceof Y().HTMLAnchorElement||s instanceof Y().HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof Y().HTMLInputElement||s instanceof Y().HTMLSelectElement||s instanceof Y().HTMLTextAreaElement||s instanceof Y().HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof Y().HTMLIFrameElement||s instanceof Y().HTMLObjectElement||s instanceof Y().HTMLEmbedElement||s.hasAttribute("tabindex")&&-1!==s.getAttribute("tabindex")||s.hasAttribute("contenteditable")})},u}(_n);Ut.prototype.options_={pauseOnOpen:!0,temporary:!0},_n.registerComponent("ModalDialog",Ut);var yn=function(g){function u(o){var t;void 0===o&&(o=[]),(t=g.call(this)||this).tracks_=[],Object.defineProperty(Je(t),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<o.length;s++)t.addTrack(o[s]);return t}it(u,g);var a=u.prototype;return a.addTrack=function(t){var s=this,h=this.tracks_.length;""+h in this||Object.defineProperty(this,h,{get:function(){return this.tracks_[h]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){s.trigger({track:t,type:"labelchange",target:s})},Xo(t)&&t.addEventListener("labelchange",t.labelchange_)},a.removeTrack=function(t){for(var s,h=0,v=this.length;h<v;h++)if(this[h]===t){(s=this[h]).off&&s.off(),this.tracks_.splice(h,1);break}!s||this.trigger({track:s,type:"removetrack",target:this})},a.getTrackById=function(t){for(var s=null,h=0,v=this.length;h<v;h++){var S=this[h];if(S.id===t){s=S;break}}return s},u}(fi);for(var sr in yn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},yn.prototype.allowedEvents_)yn.prototype["on"+sr]=null;var or=function(u,a){for(var o=0;o<u.length;o++)!Object.keys(u[o]).length||a.id===u[o].id||(u[o].enabled=!1)},Nr=function(g){function u(o){var t;void 0===o&&(o=[]);for(var s=o.length-1;s>=0;s--)if(o[s].enabled){or(o,o[s]);break}return(t=g.call(this,o)||this).changing_=!1,t}it(u,g);var a=u.prototype;return a.addTrack=function(t){var s=this;t.enabled&&or(this,t),g.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){s.changing_||(s.changing_=!0,or(s,t),s.changing_=!1,s.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},a.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},u}(yn),Si=function(u,a){for(var o=0;o<u.length;o++)!Object.keys(u[o]).length||a.id===u[o].id||(u[o].selected=!1)},Tr=function(g){function u(o){var t;void 0===o&&(o=[]);for(var s=o.length-1;s>=0;s--)if(o[s].selected){Si(o,o[s]);break}return(t=g.call(this,o)||this).changing_=!1,Object.defineProperty(Je(t),"selectedIndex",{get:function(){for(var v=0;v<this.length;v++)if(this[v].selected)return v;return-1},set:function(){}}),t}it(u,g);var a=u.prototype;return a.addTrack=function(t){var s=this;t.selected&&Si(this,t),g.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){s.changing_||(s.changing_=!0,Si(s,t),s.changing_=!1,s.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},a.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},u}(yn),po=function(g){function u(){return g.apply(this,arguments)||this}it(u,g);var a=u.prototype;return a.addTrack=function(t){var s=this;g.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},a.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},u}(yn),li=function(){function g(a){void 0===a&&(a=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var o=0,t=a.length;o<t;o++)this.addTrackElement_(a[o])}var u=g.prototype;return u.addTrackElement_=function(o){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(o)&&this.trackElements_.push(o)},u.getTrackElementByTrack_=function(o){for(var t,s=0,h=this.trackElements_.length;s<h;s++)if(o===this.trackElements_[s].track){t=this.trackElements_[s];break}return t},u.removeTrackElement_=function(o){for(var t=0,s=this.trackElements_.length;t<s;t++)if(o===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},g}(),Cu=function(){function g(a){g.prototype.setCues_.call(this,a),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var u=g.prototype;return u.setCues_=function(o){var t=this.length||0,s=0,h=o.length;this.cues_=o,this.length_=o.length;var v=function(x){""+x in this||Object.defineProperty(this,""+x,{get:function(){return this.cues_[x]}})};if(t<h)for(s=t;s<h;s++)v.call(this,s)},u.getCueById=function(o){for(var t=null,s=0,h=this.length;s<h;s++){var v=this[s];if(v.id===o){t=v;break}}return t},g}(),Hs={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},vi={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Oa={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ca={disabled:"disabled",hidden:"hidden",showing:"showing"},cl=function(g){function u(a){var o;void 0===a&&(a={}),o=g.call(this)||this;var t={id:a.id||"vjs_track_"+au(),kind:a.kind||"",language:a.language||""},s=a.label||"",h=function(x){Object.defineProperty(Je(o),x,{get:function(){return t[x]},set:function(){}})};for(var v in t)h(v);return Object.defineProperty(Je(o),"label",{get:function(){return s},set:function(x){x!==s&&(s=x,this.trigger("labelchange"))}}),o}return it(u,g),u}(fi),Fd=function(u){var a=["protocol","hostname","port","pathname","search","hash","host"],o=pe().createElement("a");o.href=u;for(var t={},s=0;s<a.length;s++)t[a[s]]=o[a[s]];return"http:"===t.protocol&&(t.host=t.host.replace(/:80$/,"")),"https:"===t.protocol&&(t.host=t.host.replace(/:443$/,"")),t.protocol||(t.protocol=Y().location.protocol),t.host||(t.host=Y().location.host),t},dl=function(u){if(!u.match(/^https?:\/\//)){var a=pe().createElement("a");a.href=u,u=a.href}return u},td=function(u){if("string"==typeof u){var o=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(u);if(o)return o.pop().toLowerCase()}return""},Gu=function(u,a){void 0===a&&(a=Y().location);var o=Fd(u);return(":"===o.protocol?a.protocol:o.protocol)+o.host!==a.protocol+a.host},nd=Object.freeze({__proto__:null,parseUrl:Fd,getAbsoluteURL:dl,getFileExtension:td,isCrossOrigin:Gu}),Ic=function(u,a){var o=new(Y().WebVTT.Parser)(Y(),Y().vttjs,Y().WebVTT.StringDecoder()),t=[];o.oncue=function(s){a.addCue(s)},o.onparsingerror=function(s){t.push(s)},o.onflush=function(){a.trigger({type:"loadeddata",target:a})},o.parse(u),t.length>0&&(Y().console&&Y().console.groupCollapsed&&Y().console.groupCollapsed("Text Track parsing errors for "+a.src),t.forEach(function(s){return Fr.error(s)}),Y().console&&Y().console.groupEnd&&Y().console.groupEnd()),o.flush()},Sf=function(u,a){var o={uri:u},t=Gu(u);t&&(o.cors=t);var s="use-credentials"===a.tech_.crossOrigin();s&&(o.withCredentials=s),ie()(o,Yi(this,function(h,v,S){if(h)return Fr.error(h,v);a.loaded_=!0,"function"!=typeof Y().WebVTT?a.tech_&&a.tech_.any(["vttjsloaded","vttjserror"],function(x){if("vttjserror"!==x.type)return Ic(S,a);Fr.error("vttjs failed to load, stopping trying to process "+a.src)}):Ic(S,a)}))},$u=function(g){function u(o){var t;if(void 0===o&&(o={}),!o.tech)throw new Error("A tech was not provided.");var s=ui(o,{kind:Oa[o.kind]||"subtitles",language:o.language||o.srclang||""}),h=ca[s.mode]||"disabled",v=s.default;("metadata"===s.kind||"chapters"===s.kind)&&(h="hidden"),(t=g.call(this,s)||this).tech_=s.tech,t.cues_=[],t.activeCues_=[],t.preload_=!1!==t.tech_.preloadTextTracks;var S=new Cu(t.cues_),x=new Cu(t.activeCues_),R=!1;return t.timeupdateHandler=Yi(Je(t),function(){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));this.activeCues=this.activeCues,R&&(this.trigger("cuechange"),R=!1),this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)}}),t.tech_.one("dispose",function(){t.stopTracking()}),"disabled"!==h&&t.startTracking(),Object.defineProperties(Je(t),{default:{get:function(){return v},set:function(){}},mode:{get:function(){return h},set:function(_e){!ca[_e]||h!==_e&&(h=_e,!this.preload_&&"disabled"!==h&&0===this.cues.length&&Sf(this.src,this),this.stopTracking(),"disabled"!==h&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?S:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return x;for(var _e=this.tech_.currentTime(),Re=[],Le=0,Ve=this.cues.length;Le<Ve;Le++){var zt=this.cues[Le];(zt.startTime<=_e&&zt.endTime>=_e||zt.startTime===zt.endTime&&zt.startTime<=_e&&zt.startTime+.5>=_e)&&Re.push(zt)}if(R=!1,Re.length!==this.activeCues_.length)R=!0;else for(var vn=0;vn<Re.length;vn++)-1===this.activeCues_.indexOf(Re[vn])&&(R=!0);return this.activeCues_=Re,x.setCues_(this.activeCues_),x},set:function(){}}}),s.src?(t.src=s.src,t.preload_||(t.loaded_=!0),(t.preload_||"subtitles"!==s.kind&&"captions"!==s.kind)&&Sf(t.src,Je(t))):t.loaded_=!0,t}it(u,g);var a=u.prototype;return a.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)},a.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0)},a.addCue=function(t){var s=t;if(Y().vttjs&&!(t instanceof Y().vttjs.VTTCue)){for(var h in s=new(Y().vttjs.VTTCue)(t.startTime,t.endTime,t.text),t)h in s||(s[h]=t[h]);s.id=t.id,s.originalCue_=t}for(var v=this.tech_.textTracks(),S=0;S<v.length;S++)v[S]!==this&&v[S].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},a.removeCue=function(t){for(var s=this.cues_.length;s--;){var h=this.cues_[s];if(h===t||h.originalCue_&&h.originalCue_===t){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},u}(cl);$u.prototype.allowedEvents_={cuechange:"cuechange"};var go=function(g){function u(a){var o;void 0===a&&(a={});var t=ui(a,{kind:vi[a.kind]||""});o=g.call(this,t)||this;var s=!1;return Object.defineProperty(Je(o),"enabled",{get:function(){return s},set:function(v){"boolean"!=typeof v||v===s||(s=v,this.trigger("enabledchange"))}}),t.enabled&&(o.enabled=t.enabled),o.loaded_=!0,o}return it(u,g),u}(cl),Ph=function(g){function u(a){var o;void 0===a&&(a={});var t=ui(a,{kind:Hs[a.kind]||""});o=g.call(this,t)||this;var s=!1;return Object.defineProperty(Je(o),"selected",{get:function(){return s},set:function(v){"boolean"!=typeof v||v===s||(s=v,this.trigger("selectedchange"))}}),t.selected&&(o.selected=t.selected),o}return it(u,g),u}(cl),Al=function(g){function u(a){var o;void 0===a&&(a={}),o=g.call(this)||this;var t,s=new $u(a);return o.kind=s.kind,o.src=s.src,o.srclang=s.language,o.label=s.label,o.default=s.default,Object.defineProperties(Je(o),{readyState:{get:function(){return t}},track:{get:function(){return s}}}),t=0,s.addEventListener("loadeddata",function(){t=2,o.trigger({type:"load",target:Je(o)})}),o}return it(u,g),u}(fi);Al.prototype.allowedEvents_={load:"load"},Al.NONE=0,Al.LOADING=1,Al.LOADED=2,Al.ERROR=3;var xu={audio:{ListClass:Nr,TrackClass:go,capitalName:"Audio"},video:{ListClass:Tr,TrackClass:Ph,capitalName:"Video"},text:{ListClass:po,TrackClass:$u,capitalName:"Text"}};Object.keys(xu).forEach(function(g){xu[g].getterName=g+"Tracks",xu[g].privateName=g+"Tracks_"});var rd={remoteText:{ListClass:po,TrackClass:$u,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:li,TrackClass:Al,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ps=Me({},xu,rd);rd.names=Object.keys(rd),xu.names=Object.keys(xu),Ps.names=[].concat(rd.names).concat(xu.names);var zi=function(g){function u(o,t){var s;return void 0===o&&(o={}),void 0===t&&(t=function(){}),o.reportTouchActivity=!1,(s=g.call(this,null,o,t)||this).onDurationChange_=function(h){return s.onDurationChange(h)},s.trackProgress_=function(h){return s.trackProgress(h)},s.trackCurrentTime_=function(h){return s.trackCurrentTime(h)},s.stopTrackingCurrentTime_=function(h){return s.stopTrackingCurrentTime(h)},s.disposeSourceHandler_=function(h){return s.disposeSourceHandler(h)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),Ps.names.forEach(function(h){var v=Ps[h];o&&o[v.getterName]&&(s[v.privateName]=o[v.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(h){!1===o["native"+h+"Tracks"]&&(s["featuresNative"+h+"Tracks"]=!1)}),!1===o.nativeCaptions||!1===o.nativeTextTracks?s.featuresNativeTextTracks=!1:(!0===o.nativeCaptions||!0===o.nativeTextTracks)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=!1!==o.preloadTextTracks,s.autoRemoteTextTracks_=new Ps.text.ListClass,s.initTrackListeners(),o.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}it(u,g);var a=u.prototype;return a.triggerSourceset=function(t){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},a.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},a.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},a.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Yi(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,1===s&&this.stopTrackingProgress()}),500)},a.onDurationChange=function(t){this.duration_=this.duration()},a.buffered=function(){return Jo(0,0)},a.bufferedPercent=function(){return ll(this.buffered(),this.duration_)},a.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},a.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},a.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},a.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},a.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.dispose=function(){this.clearTracks(xu.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),g.prototype.dispose.call(this)},a.clearTracks=function(t){var s=this;(t=[].concat(t)).forEach(function(h){for(var v=s[h+"Tracks"]()||[],S=v.length;S--;){var x=v[S];"text"===h&&s.removeRemoteTextTrack(x),v.removeTrack(x)}})},a.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],s=t.length;s--;)this.removeRemoteTextTrack(t[s])},a.reset=function(){},a.crossOrigin=function(){},a.setCrossOrigin=function(){},a.error=function(t){return void 0!==t&&(this.error_=new ea(t),this.trigger("error")),this.error_},a.played=function(){return this.hasStarted_?Jo(0,0):Jo()},a.play=function(){},a.setScrubbing=function(){},a.scrubbing=function(){},a.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.initTrackListeners=function(){var t=this;xu.names.forEach(function(s){var v=function(){t.trigger(s+"trackchange")},S=t[xu[s].getterName]();S.addEventListener("removetrack",v),S.addEventListener("addtrack",v),t.on("dispose",function(){S.removeEventListener("removetrack",v),S.removeEventListener("addtrack",v)})})},a.addWebVttScript_=function(){var t=this;if(!Y().WebVTT)if(pe().body.contains(this.el())){if(!this.options_["vtt.js"]&&za(be())&&Object.keys(be()).length>0)return void this.trigger("vttjsloaded");var s=pe().createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){t.trigger("vttjsloaded")},s.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),Y().WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},a.emulateTextTracks=function(){var t=this,s=this.textTracks(),h=this.remoteTextTracks(),v=function(q){return s.addTrack(q.track)},S=function(q){return s.removeTrack(q.track)};h.on("addtrack",v),h.on("removetrack",S),this.addWebVttScript_();var x=function(){return t.trigger("texttrackchange")},R=function(){x();for(var q=0;q<s.length;q++){var _e=s[q];_e.removeEventListener("cuechange",x),"showing"===_e.mode&&_e.addEventListener("cuechange",x)}};R(),s.addEventListener("change",R),s.addEventListener("addtrack",R),s.addEventListener("removetrack",R),this.on("dispose",function(){h.off("addtrack",v),h.off("removetrack",S),s.removeEventListener("change",R),s.removeEventListener("addtrack",R),s.removeEventListener("removetrack",R);for(var ee=0;ee<s.length;ee++)s[ee].removeEventListener("cuechange",x)})},a.addTextTrack=function(t,s,h){if(!t)throw new Error("TextTrack kind is required but was not provided");return function ec(g,u,a,o,t){void 0===t&&(t={});var s=g.textTracks();t.kind=u,a&&(t.label=a),o&&(t.language=o),t.tech=g;var h=new Ps.text.TrackClass(t);return s.addTrack(h),h}(this,t,s,h)},a.createRemoteTextTrack=function(t){var s=ui(t,{tech:this});return new rd.remoteTextEl.TrackClass(s)},a.addRemoteTextTrack=function(t,s){var h=this;void 0===t&&(t={});var v=this.createRemoteTextTrack(t);return!0!==s&&!1!==s&&(Fr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(v),this.remoteTextTracks().addTrack(v.track),!0!==s&&this.ready(function(){return h.autoRemoteTextTracks_.addTrack(v.track)}),v},a.removeRemoteTextTrack=function(t){var s=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},a.getVideoPlaybackQuality=function(){return{}},a.requestPictureInPicture=function(){var t=this.options_.Promise||Y().Promise;if(t)return t.reject()},a.disablePictureInPicture=function(){return!0},a.setDisablePictureInPicture=function(){},a.requestVideoFrameCallback=function(t){var s=this,h=au();return this.paused()?(this.queuedHanders_.add(h),this.one("playing",function(){s.queuedHanders_.has(h)&&(s.queuedHanders_.delete(h),t())})):this.requestNamedAnimationFrame(h,t),h},a.cancelVideoFrameCallback=function(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)},a.setPoster=function(){},a.playsinline=function(){},a.setPlaysinline=function(){},a.overrideNativeAudioTracks=function(){},a.overrideNativeVideoTracks=function(){},a.canPlayType=function(){return""},u.canPlayType=function(){return""},u.canPlaySource=function(t,s){return u.canPlayType(t.type)},u.isTech=function(t){return t.prototype instanceof u||t instanceof u||t===u},u.registerTech=function(t,s){if(u.techs_||(u.techs_={}),!u.isTech(s))throw new Error("Tech "+t+" must be a Tech");if(!u.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!u.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Kr(t),u.techs_[t]=s,u.techs_[wu(t)]=s,"Tech"!==t&&u.defaultTechOrder_.push(t),s},u.getTech=function(t){if(t){if(u.techs_&&u.techs_[t])return u.techs_[t];if(t=Kr(t),Y()&&Y().videojs&&Y().videojs[t])return Fr.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Y().videojs[t]}},u}(_n);Ps.names.forEach(function(g){var u=Ps[g];zi.prototype[u.getterName]=function(){return this[u.privateName]=this[u.privateName]||new u.ListClass,this[u.privateName]}}),zi.prototype.featuresVolumeControl=!0,zi.prototype.featuresMuteControl=!0,zi.prototype.featuresFullscreenResize=!1,zi.prototype.featuresPlaybackRate=!1,zi.prototype.featuresProgressEvents=!1,zi.prototype.featuresSourceset=!1,zi.prototype.featuresTimeupdateEvents=!1,zi.prototype.featuresNativeTextTracks=!1,zi.prototype.featuresVideoFrameCallback=!1,zi.withSourceHandlers=function(g){g.registerSourceHandler=function(a,o){var t=g.sourceHandlers;t||(t=g.sourceHandlers=[]),void 0===o&&(o=t.length),t.splice(o,0,a)},g.canPlayType=function(a){for(var t,o=g.sourceHandlers||[],s=0;s<o.length;s++)if(t=o[s].canPlayType(a))return t;return""},g.selectSourceHandler=function(a,o){for(var t=g.sourceHandlers||[],h=0;h<t.length;h++)if(t[h].canHandleSource(a,o))return t[h];return null},g.canPlaySource=function(a,o){var t=g.selectSourceHandler(a,o);return t?t.canHandleSource(a,o):""},["seekable","seeking","duration"].forEach(function(a){var o=this[a];"function"==typeof o&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):o.apply(this,arguments)})},g.prototype),g.prototype.setSource=function(a){var o=g.selectSourceHandler(a,this.options_);o||(g.nativeSourceHandler?o=g.nativeSourceHandler:Fr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),o!==g.nativeSourceHandler&&(this.currentSource_=a),this.sourceHandler_=o.handleSource(a,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},g.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},_n.registerComponent("Tech",zi),zi.registerTech("Tech",zi),zi.defaultTechOrder_=[];var tc={},Rh={},Wu={};function nc(g,u,a){g.setTimeout(function(){return zu(u,tc[u.type],a,g)},1)}function hl(g,u,a,o){void 0===o&&(o=null);var t="call"+Kr(a),s=g.reduce(kc(t),o),h=s===Wu,v=h?null:u[a](s);return function Op(g,u,a,o){for(var t=g.length-1;t>=0;t--){var s=g[t];s[u]&&s[u](o,a)}}(g,a,v,h),v}var Ac={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Iu={setCurrentTime:1,setMuted:1,setVolume:1},wf={play:1,pause:1};function kc(g){return function(u,a){return u===Wu?Wu:a[g]?a[g](u):u}}function zu(g,u,a,o,t,s){void 0===g&&(g={}),void 0===u&&(u=[]),void 0===t&&(t=[]),void 0===s&&(s=!1);var v=u[0],S=u.slice(1);if("string"==typeof v)zu(g,tc[v],a,o,t,s);else if(v){var x=function rc(g,u){var a=Rh[g.id()],o=null;if(null==a)return o=u(g),Rh[g.id()]=[[u,o]],o;for(var t=0;t<a.length;t++){var s=a[t];s[0]===u&&(o=s[1])}return null===o&&(o=u(g),a.push([u,o])),o}(o,v);if(!x.setSource)return t.push(x),zu(g,S,a,o,t,s);x.setSource(Ui({},g),function(R,ee){if(R)return zu(g,S,a,o,t,s);t.push(x),zu(ee,g.type===ee.type?S:tc[ee.type],a,o,t,s)})}else S.length?zu(g,S,a,o,t,s):s?a(g,t):zu(g,tc["*"],a,o,t,!0)}var Rp={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},jd=function(u){void 0===u&&(u="");var a=td(u);return Rp[a.toLowerCase()]||""},Fh=function g(u){if(Array.isArray(u)){var a=[];u.forEach(function(o){o=g(o),Array.isArray(o)?a=a.concat(o):Xs(o)&&a.push(o)}),u=a}else u="string"==typeof u&&u.trim()?[Cf({src:u})]:Xs(u)&&"string"==typeof u.src&&u.src&&u.src.trim()?[Cf(u)]:[];return u};function Cf(g){if(!g.type){var u=jd(g.src);u&&(g.type=u)}return g}var id=function(g){function u(a,o,t){var s,h=ui({createEl:!1},o);if(s=g.call(this,a,h,t)||this,o.playerOptions.sources&&0!==o.playerOptions.sources.length)a.src(o.playerOptions.sources);else for(var v=0,S=o.playerOptions.techOrder;v<S.length;v++){var x=Kr(S[v]),R=zi.getTech(x);if(x||(R=_n.getComponent(x)),R&&R.isSupported()){a.loadTech_(x);break}}return s}return it(u,g),u}(_n);_n.registerComponent("MediaLoader",id);var Ud=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(h){return s.handleMouseOver(h)},s.handleMouseOut_=function(h){return s.handleMouseOut(h)},s.handleClick_=function(h){return s.handleClick(h)},s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.emitTapEvents(),s.enable(),s}it(u,g);var a=u.prototype;return a.createEl=function(t,s,h){void 0===t&&(t="div"),void 0===s&&(s={}),void 0===h&&(h={}),s=Ui({className:this.buildCSSClass(),tabIndex:0},s),"button"===t&&Fr.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),h=Ui({role:"button"},h),this.tabIndex_=s.tabIndex;var v=ti(t,s,h);return v.appendChild(ti("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(v),v},a.dispose=function(){this.controlTextEl_=null,g.prototype.dispose.call(this)},a.createControlTextEl=function(t){return this.controlTextEl_=ti("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},a.controlText=function(t,s){if(void 0===s&&(s=this.el()),void 0===t)return this.controlText_||"Need Text";var h=this.localize(t);this.controlText_=t,So(this.controlTextEl_,h),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",h)},a.buildCSSClass=function(){return"vjs-control vjs-button "+g.prototype.buildCSSClass.call(this)},a.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},a.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},a.handleLanguagechange=function(){this.controlText(this.controlText_)},a.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},a.handleKeyDown=function(t){et().isEventKey(t,"Space")||et().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,t)},u}(_n);_n.registerComponent("ClickableComponent",Ud);var Xg=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).update(),s.update_=function(h){return s.update(h)},o.on("posterchange",s.update_),s}it(u,g);var a=u.prototype;return a.dispose=function(){this.player().off("posterchange",this.update_),g.prototype.dispose.call(this)},a.createEl=function(){return ti("div",{className:"vjs-poster",tabIndex:-1})},a.update=function(t){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},a.setSrc=function(t){var s="";t&&(s='url("'+t+'")'),this.el_.style.backgroundImage=s},a.handleClick=function(t){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Us||ol)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?la(this.player_.play()):this.player_.pause()}},u}(Ud);_n.registerComponent("PosterImage",Xg);var hu="#222",Bd={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function fl(g,u){var a;if(4===g.length)a=g[1]+g[1]+g[2]+g[2]+g[3]+g[3];else{if(7!==g.length)throw new Error("Invalid color code provided, "+g+"; must be formatted as e.g. #f0e or #f604e2.");a=g.slice(1)}return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+u+")"}function fu(g,u,a){try{g.style[u]=a}catch(o){return}}var xf=function(g){function u(o,t,s){var h;h=g.call(this,o,t,s)||this;var v=function(x){return h.updateDisplay(x)};return o.on("loadstart",function(S){return h.toggleDisplay(S)}),o.on("texttrackchange",v),o.on("loadedmetadata",function(S){return h.preselectTrack(S)}),o.ready(Yi(Je(h),function(){if(o.tech_&&o.tech_.featuresNativeTextTracks)this.hide();else{o.on("fullscreenchange",v),o.on("playerresize",v),Y().addEventListener("orientationchange",v),o.on("dispose",function(){return Y().removeEventListener("orientationchange",v)});for(var S=this.options_.playerOptions.tracks||[],x=0;x<S.length;x++)this.player_.addRemoteTextTrack(S[x],!0);this.preselectTrack()}})),h}it(u,g);var a=u.prototype;return a.preselectTrack=function(){for(var v,S,x,t={captions:1,subtitles:1},s=this.player_.textTracks(),h=this.player_.cache_.selectedLanguage,R=0;R<s.length;R++){var ee=s[R];h&&h.enabled&&h.language&&h.language===ee.language&&ee.kind in t?ee.kind===h.kind?x=ee:x||(x=ee):h&&!h.enabled?(x=null,v=null,S=null):ee.default&&("descriptions"!==ee.kind||v?ee.kind in t&&!S&&(S=ee):v=ee)}x?x.mode="showing":S?S.mode="showing":v&&(v.mode="showing")},a.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},a.clearDisplay=function(){"function"==typeof Y().WebVTT&&Y().WebVTT.processCues(Y(),[],this.el_)},a.updateDisplay=function(){var t=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var h=[],v=0;v<t.length;++v){var S=t[v];"showing"===S.mode&&h.push(S)}this.updateForTrack(h)}else{for(var x=null,R=null,ee=t.length;ee--;){var q=t[ee];"showing"===q.mode&&("descriptions"===q.kind?x=q:R=q)}R?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(R)):x&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(x))}},a.updateDisplayState=function(t){for(var s=this.player_.textTrackSettings.getValues(),h=t.activeCues,v=h.length;v--;){var S=h[v];if(S){var x=S.displayState;if(s.color&&(x.firstChild.style.color=s.color),s.textOpacity&&fu(x.firstChild,"color",fl(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(x.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&fu(x.firstChild,"backgroundColor",fl(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?fu(x,"backgroundColor",fl(s.windowColor,s.windowOpacity)):x.style.backgroundColor=s.windowColor),s.edgeStyle&&("dropshadow"===s.edgeStyle?x.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+hu:"raised"===s.edgeStyle?x.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+hu:"depressed"===s.edgeStyle?x.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+hu:"uniform"===s.edgeStyle&&(x.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+hu)),s.fontPercent&&1!==s.fontPercent){var R=Y().parseFloat(x.style.fontSize);x.style.fontSize=R*s.fontPercent+"px",x.style.height="auto",x.style.top="auto"}s.fontFamily&&"default"!==s.fontFamily&&("small-caps"===s.fontFamily?x.firstChild.style.fontVariant="small-caps":x.firstChild.style.fontFamily=Bd[s.fontFamily])}}},a.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof Y().WebVTT&&!t.every(function(_e){return!_e.activeCues})){for(var s=[],h=0;h<t.length;++h)for(var v=t[h],S=0;S<v.activeCues.length;++S)s.push(v.activeCues[S]);Y().WebVTT.processCues(Y(),s,this.el_);for(var x=0;x<t.length;++x){for(var R=t[x],ee=0;ee<R.activeCues.length;++ee){var q=R.activeCues[ee].displayState;Zo(q,"vjs-text-track-cue"),Zo(q,"vjs-text-track-cue-"+(R.language?R.language:x)),R.language&&Uu(q,"lang",R.language)}this.player_.textTrackSettings&&this.updateDisplayState(R)}}},u}(_n);_n.registerComponent("TextTrackDisplay",xf);var da=function(g){function u(){return g.apply(this,arguments)||this}return it(u,g),u.prototype.createEl=function(){var t=this.player_.isAudio(),s=this.localize(t?"Audio Player":"Video Player"),h=ti("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),v=g.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return v.appendChild(h),v},u}(_n);_n.registerComponent("LoadingSpinner",da);var wa=function(g){function u(){return g.apply(this,arguments)||this}it(u,g);var a=u.prototype;return a.createEl=function(t,s,h){void 0===s&&(s={}),void 0===h&&(h={});var v=ti("button",s=Ui({className:this.buildCSSClass()},s),h=Ui({type:"button"},h));return v.appendChild(ti("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(v),v},a.addChild=function(t,s){return void 0===s&&(s={}),Fr.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),_n.prototype.addChild.call(this,t,s)},a.enable=function(){g.prototype.enable.call(this),this.el_.removeAttribute("disabled")},a.disable=function(){g.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},a.handleKeyDown=function(t){et().isEventKey(t,"Space")||et().isEventKey(t,"Enter")?t.stopPropagation():g.prototype.handleKeyDown.call(this,t)},u}(Ud);_n.registerComponent("Button",wa);var sd=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).mouseused_=!1,s.on("mousedown",function(h){return s.handleMouseDown(h)}),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-big-play-button"},a.handleClick=function(t){var s=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var h=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return la(s),void(this.player_.tech(!0)&&(!Us&&!ol||!h)&&this.player_.tech(!0).focus())}var v=this.player_.getChild("controlBar"),S=v&&v.getChild("playToggle");if(S){var x=function(){return S.focus()};Hu(s)?s.then(x,function(){}):this.setTimeout(x,1)}else this.player_.tech(!0).focus()},a.handleKeyDown=function(t){this.mouseused_=!1,g.prototype.handleKeyDown.call(this,t)},a.handleMouseDown=function(t){this.mouseused_=!0},u}(wa);sd.prototype.controlText_="Play Video",_n.registerComponent("BigPlayButton",sd);var od=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).controlText(t&&t.controlText||s.localize("Close")),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-close-button "+g.prototype.buildCSSClass.call(this)},a.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},a.handleKeyDown=function(t){et().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,t)},u}(wa);_n.registerComponent("CloseButton",od);var If=function(g){function u(o,t){var s;return void 0===t&&(t={}),s=g.call(this,o,t)||this,t.replay=void 0===t.replay||t.replay,s.on(o,"play",function(h){return s.handlePlay(h)}),s.on(o,"pause",function(h){return s.handlePause(h)}),t.replay&&s.on(o,"ended",function(h){return s.handleEnded(h)}),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-play-control "+g.prototype.buildCSSClass.call(this)},a.handleClick=function(t){this.player_.paused()?la(this.player_.play()):this.player_.pause()},a.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},a.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},a.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},a.handleEnded=function(t){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(h){return s.handleSeeked(h)})},u}(wa);If.prototype.controlText_="Play",_n.registerComponent("PlayToggle",If);var Df=function(u,a){u=u<0?0:u;var o=Math.floor(u%60),t=Math.floor(u/60%60),s=Math.floor(u/3600),h=Math.floor(a/60%60),v=Math.floor(a/3600);return(isNaN(u)||u===1/0)&&(s=t=o="-"),(s=s>0||v>0?s+":":"")+(t=((s||h>=10)&&t<10?"0"+t:t)+":")+(o<10?"0"+o:o)},wo=Df;function sc(g,u){return void 0===u&&(u=g),wo(g,u)}var pl=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).on(o,["timeupdate","ended"],function(h){return s.updateContent(h)}),s.updateTextNode_(),s}it(u,g);var a=u.prototype;return a.createEl=function(){var t=this.buildCSSClass(),s=g.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),h=ti("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return s.appendChild(h),this.contentEl_=ti("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},a.dispose=function(){this.contentEl_=null,this.textNode_=null,g.prototype.dispose.call(this)},a.updateTextNode_=function(t){var s=this;void 0===t&&(t=0),t=sc(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var h=s.textNode_;h&&s.contentEl_.firstChild!==h&&(h=null,Fr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=pe().createTextNode(s.formattedTime_),s.textNode_&&(h?s.contentEl_.replaceChild(s.textNode_,h):s.contentEl_.appendChild(s.textNode_))}}))},a.updateContent=function(t){},u}(_n);pl.prototype.labelText_="Time",pl.prototype.controlText_="Time",_n.registerComponent("TimeDisplay",pl);var Lp=function(g){function u(){return g.apply(this,arguments)||this}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-current-time"},a.updateContent=function(t){var s;s=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},u}(pl);Lp.prototype.labelText_="Current Time",Lp.prototype.controlText_="Current Time",_n.registerComponent("CurrentTimeDisplay",Lp);var kf=function(g){function u(o,t){var s,h=function(S){return s.updateContent(S)};return(s=g.call(this,o,t)||this).on(o,"durationchange",h),s.on(o,"loadstart",h),s.on(o,"loadedmetadata",h),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-duration"},a.updateContent=function(t){var s=this.player_.duration();this.updateTextNode_(s)},u}(pl);kf.prototype.labelText_="Duration",kf.prototype.controlText_="Duration",_n.registerComponent("DurationDisplay",kf);var Mf=function(g){function u(){return g.apply(this,arguments)||this}return it(u,g),u.prototype.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=g.prototype.createEl.call(this,"div"),h=g.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(h),t.appendChild(s),t},u}(_n);_n.registerComponent("TimeDivider",Mf);var oc=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).on(o,"durationchange",function(h){return s.updateContent(h)}),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-remaining-time"},a.createEl=function(){var t=g.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(ti("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},a.updateContent=function(t){var s;"number"==typeof this.player_.duration()&&(s=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(s))},u}(pl);oc.prototype.labelText_="Remaining Time",oc.prototype.controlText_="Remaining Time",_n.registerComponent("RemainingTimeDisplay",oc);var kl=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).updateShowing(),s.on(s.player(),"durationchange",function(h){return s.updateShowing(h)}),s}it(u,g);var a=u.prototype;return a.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ti("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(ti("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(pe().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},a.dispose=function(){this.contentEl_=null,g.prototype.dispose.call(this)},a.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},u}(_n);_n.registerComponent("LiveDisplay",kl);var Pf=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(h){return s.updateLiveEdgeStatus(h)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}it(u,g);var a=u.prototype;return a.createEl=function(){var t=g.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=ti("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},a.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},a.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},a.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,g.prototype.dispose.call(this)},u}(wa);Pf.prototype.controlText_="Seek to live, currently playing live",_n.registerComponent("SeekToLive",Pf);var Vd=function(u,a,o){return u=Number(u),Math.min(o,Math.max(a,isNaN(u)?a:u))},Pc=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).handleMouseDown_=function(h){return s.handleMouseDown(h)},s.handleMouseUp_=function(h){return s.handleMouseUp(h)},s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.handleClick_=function(h){return s.handleClick(h)},s.handleMouseMove_=function(h){return s.handleMouseMove(h)},s.update_=function(h){return s.update(h)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}it(u,g);var a=u.prototype;return a.enabled=function(){return this.enabled_},a.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},a.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},a.createEl=function(t,s,h){return void 0===s&&(s={}),void 0===h&&(h={}),s.className=s.className+" vjs-slider",s=Ui({tabIndex:0},s),h=Ui({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},h),g.prototype.createEl.call(this,t,s,h)},a.handleMouseDown=function(t){var s=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"===t.type&&!Ko&&t.preventDefault(),P(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)},a.handleMouseMove=function(t){},a.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;A(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},a.update=function(){var t=this;if(this.el_&&this.bar){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var h=t.vertical()?"height":"width";t.bar.el().style[h]=(100*s).toFixed(2)+"%"})),s}},a.getProgress=function(){return Number(Vd(this.getPercent(),0,1).toFixed(4))},a.calculateDistance=function(t){var s=de(this.el_,t);return this.vertical()?s.y:s.x},a.handleKeyDown=function(t){et().isEventKey(t,"Left")||et().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):et().isEventKey(t,"Right")||et().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):g.prototype.handleKeyDown.call(this,t)},a.handleClick=function(t){t.stopPropagation(),t.preventDefault()},a.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},u}(_n);_n.registerComponent("Slider",Pc);var Du=function(u,a){return Vd(u/a*100,0,100).toFixed(2)+"%"},jh=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).partEls_=[],s.on(o,"progress",function(h){return s.update(h)}),s}it(u,g);var a=u.prototype;return a.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=ti("span",{className:"vjs-control-text"}),h=ti("span",{textContent:this.localize("Loaded")}),v=pe().createTextNode(": ");return this.percentageEl_=ti("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(s),s.appendChild(h),s.appendChild(v),s.appendChild(this.percentageEl_),t},a.dispose=function(){this.partEls_=null,this.percentageEl_=null,g.prototype.dispose.call(this)},a.update=function(t){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var h=s.player_.liveTracker,v=s.player_.buffered(),S=h&&h.isLive()?h.seekableEnd():s.player_.duration(),x=s.player_.bufferedEnd(),R=s.partEls_,ee=Du(x,S);s.percent_!==ee&&(s.el_.style.width=ee,So(s.percentageEl_,ee),s.percent_=ee);for(var q=0;q<v.length;q++){var _e=v.start(q),Re=v.end(q),Le=R[q];Le||(Le=s.el_.appendChild(ti()),R[q]=Le),(Le.dataset.start!==_e||Le.dataset.end!==Re)&&(Le.dataset.start=_e,Le.dataset.end=Re,Le.style.left=Du(_e,x),Le.style.width=Du(Re-_e,x))}for(var Ve=R.length;Ve>v.length;Ve--)s.el_.removeChild(R[Ve-1]);R.length=v.length})},u}(_n);_n.registerComponent("LoadProgressBar",jh);var Of=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).update=Ma(Yi(Je(s),s.update),30),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},a.update=function(t,s,h){var v=se(this.el_),S=K(this.player_.el()),x=t.width*s;if(S&&v){var R=t.left-S.left+x,ee=t.width-x+(S.right-t.right),q=v.width/2;R<q?q+=q-R:ee<q&&(q=ee),q<0?q=0:q>v.width&&(q=v.width),q=Math.round(q),this.el_.style.right="-"+q+"px",this.write(h)}},a.write=function(t){So(this.el_,t)},a.updateTime=function(t,s,h,v){var S=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var x,R=S.player_.duration();if(S.player_.liveTracker&&S.player_.liveTracker.isLive()){var ee=S.player_.liveTracker.liveWindow(),q=ee-s*ee;x=(q<1?"":"-")+sc(q,ee)}else x=sc(h,R);S.update(t,s,x),v&&v()})},u}(_n);_n.registerComponent("TimeTooltip",Of);var Os=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).update=Ma(Yi(Je(s),s.update),30),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},a.update=function(t,s){var h=this.getChild("timeTooltip");if(h){var v=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();h.updateTime(t,s,v)}},u}(_n);Os.prototype.options_={children:[]},!bs&&!_a&&Os.prototype.options_.children.push("timeTooltip"),_n.registerComponent("PlayProgressBar",Os);var wr=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).update=Ma(Yi(Je(s),s.update),30),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},a.update=function(t,s){var h=this,v=s*this.player_.duration();this.getChild("timeTooltip").updateTime(t,s,v,function(){h.el_.style.left=t.width*s+"px"})},u}(_n);wr.prototype.options_={children:["timeTooltip"]},_n.registerComponent("MouseTimeDisplay",wr);var pu=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).setEventHandlers_(),s}it(u,g);var a=u.prototype;return a.setEventHandlers_=function(){var t=this;this.update_=Yi(this,this.update),this.update=Ma(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return t.enableInterval_(s)},this.disableIntervalHandler_=function(s){return t.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in pe()&&"visibilityState"in pe()&&this.on(pe(),"visibilitychange",this.toggleVisibility_)},a.toggleVisibility_=function(t){"hidden"===pe().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},a.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},a.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},a.update=function(t){var s=this;if("hidden"!==pe().visibilityState){var h=g.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var v=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),S=s.player_.liveTracker,x=s.player_.duration();S&&S.isLive()&&(x=s.player_.liveTracker.liveCurrentTime()),s.percent_!==h&&(s.el_.setAttribute("aria-valuenow",(100*h).toFixed(2)),s.percent_=h),(s.currentTime_!==v||s.duration_!==x)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[sc(v,x),sc(x,x)],"{1} of {2}")),s.currentTime_=v,s.duration_=x),s.bar&&s.bar.update(K(s.el()),s.getProgress())}),h}},a.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},a.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},a.getPercent=function(){var s,t=this.getCurrentTime_(),h=this.player_.liveTracker;return h&&h.isLive()?(s=(t-h.seekableStart())/h.liveWindow(),h.atLiveEdge()&&(s=1)):s=t/this.player_.duration(),s},a.handleMouseDown=function(t){!ir(t)||(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),g.prototype.handleMouseDown.call(this,t))},a.handleMouseMove=function(t,s){if(void 0===s&&(s=!1),ir(t)){!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var h,v=this.calculateDistance(t),S=this.player_.liveTracker;if(S&&S.isLive()){if(v>=.99)return void S.seekToLiveEdge();var x=S.seekableStart(),R=S.liveCurrentTime();if((h=x+v*S.liveWindow())>=R&&(h=R),h<=x&&(h=x+.1),h===1/0)return}else(h=v*this.player_.duration())===this.player_.duration()&&(h-=.1);this.userSeek_(h)}},a.enable=function(){g.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.show()},a.disable=function(){g.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.hide()},a.handleMouseUp=function(t){g.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?la(this.player_.play()):this.update_()},a.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},a.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},a.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},a.handleKeyDown=function(t){var s=this.player_.liveTracker;if(et().isEventKey(t,"Space")||et().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(et().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(et().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(et()(t))){t.preventDefault(),t.stopPropagation();var h=10*(et().codes[et()(t)]-et().codes[0])/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*h):this.userSeek_(this.player_.duration()*h)}else et().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):et().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):g.prototype.handleKeyDown.call(this,t)},a.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in pe()&&"visibilityState"in pe()&&this.off(pe(),"visibilitychange",this.toggleVisibility_),g.prototype.dispose.call(this)},u}(Pc);pu.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!bs&&!_a&&pu.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),_n.registerComponent("SeekBar",pu);var Nf=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).handleMouseMove=Ma(Yi(Je(s),s.handleMouseMove),30),s.throttledHandleMouseSeek=Ma(Yi(Je(s),s.handleMouseSeek),30),s.handleMouseUpHandler_=function(h){return s.handleMouseUp(h)},s.handleMouseDownHandler_=function(h){return s.handleMouseDown(h)},s.enable(),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},a.handleMouseMove=function(t){var s=this.getChild("seekBar");if(s){var h=s.getChild("playProgressBar"),v=s.getChild("mouseTimeDisplay");if(h||v){var S=s.el(),x=se(S),R=de(S,t).x;R=Vd(R,0,1),v&&v.update(x,R),h&&h.update(x,s.getProgress())}}},a.handleMouseSeek=function(t){var s=this.getChild("seekBar");s&&s.handleMouseMove(t)},a.enabled=function(){return this.enabled_},a.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&la(this.player_.play())}},a.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},a.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},a.handleMouseDown=function(t){var s=this.el_.ownerDocument,h=this.getChild("seekBar");h&&h.handleMouseDown(t),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},a.handleMouseUp=function(t){var s=this.getChild("seekBar");s&&s.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},u}(_n);Nf.prototype.options_={children:["seekBar"]},_n.registerComponent("ProgressControl",Nf);var gu=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).on(o,["enterpictureinpicture","leavepictureinpicture"],function(h){return s.handlePictureInPictureChange(h)}),s.on(o,["disablepictureinpicturechanged","loadedmetadata"],function(h){return s.handlePictureInPictureEnabledChange(h)}),s.on(o,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===o.currentType().substring(0,5)||o.audioPosterMode()||o.audioOnlyMode()?(o.isInPictureInPicture()&&o.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-picture-in-picture-control "+g.prototype.buildCSSClass.call(this)},a.handlePictureInPictureEnabledChange=function(){pe().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},a.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},a.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},u}(wa);gu.prototype.controlText_="Picture-in-Picture",_n.registerComponent("PictureInPictureToggle",gu);var Fp=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).on(o,"fullscreenchange",function(h){return s.handleFullscreenChange(h)}),!1===pe()[o.fsApi_.fullscreenEnabled]&&s.disable(),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-fullscreen-control "+g.prototype.buildCSSClass.call(this)},a.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},a.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},u}(wa);Fp.prototype.controlText_="Fullscreen",_n.registerComponent("FullscreenToggle",Fp);var Ml=function(g){function u(){return g.apply(this,arguments)||this}return it(u,g),u.prototype.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(g.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},u}(_n);_n.registerComponent("VolumeLevel",Ml);var Jg=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).update=Ma(Yi(Je(s),s.update),30),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},a.update=function(t,s,h,v){if(!h){var S=K(this.el_),x=K(this.player_.el()),R=t.width*s;if(!x||!S)return;var ee=t.left-x.left+R,q=t.width-R+(x.right-t.right),_e=S.width/2;ee<_e?_e+=_e-ee:q<_e&&(_e=q),_e<0?_e=0:_e>S.width&&(_e=S.width),this.el_.style.right="-"+_e+"px"}this.write(v+"%")},a.write=function(t){So(this.el_,t)},a.updateVolume=function(t,s,h,v,S){var x=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){x.update(t,s,h,v.toFixed(0)),S&&S()})},u}(_n);_n.registerComponent("VolumeLevelTooltip",Jg);var jp=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).update=Ma(Yi(Je(s),s.update),30),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},a.update=function(t,s,h){var v=this,S=100*s;this.getChild("volumeLevelTooltip").updateVolume(t,s,h,S,function(){h?v.el_.style.bottom=t.height*s+"px":v.el_.style.left=t.width*s+"px"})},u}(_n);jp.prototype.options_={children:["volumeLevelTooltip"]},_n.registerComponent("MouseVolumeLevelDisplay",jp);var qi=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).on("slideractive",function(h){return s.updateLastVolume_(h)}),s.on(o,"volumechange",function(h){return s.updateARIAAttributes(h)}),o.ready(function(){return s.updateARIAAttributes()}),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},a.handleMouseDown=function(t){!ir(t)||g.prototype.handleMouseDown.call(this,t)},a.handleMouseMove=function(t){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var h=this.el(),v=K(h),S=this.vertical(),x=de(h,t);x=Vd(x=S?x.y:x.x,0,1),s.update(v,x,S)}!ir(t)||(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},a.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},a.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},a.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},a.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},a.updateARIAAttributes=function(t){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},a.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},a.updateLastVolume_=function(){var t=this,s=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(s)})},u}(Pc);qi.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!bs&&!_a&&qi.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),qi.prototype.playerEvent="volumechange",_n.registerComponent("VolumeBar",qi);var ad=function(g){function u(o,t){var s;return void 0===t&&(t={}),t.vertical=t.vertical||!1,(void 0===t.volumeBar||za(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),function(u,a){a.tech_&&!a.tech_.featuresVolumeControl&&u.addClass("vjs-hidden"),u.on(a,"loadstart",function(){a.tech_.featuresVolumeControl?u.removeClass("vjs-hidden"):u.addClass("vjs-hidden")})}(Je(s=g.call(this,o,t)||this),o),s.throttledHandleMouseMove=Ma(Yi(Je(s),s.handleMouseMove),30),s.handleMouseUpHandler_=function(h){return s.handleMouseUp(h)},s.on("mousedown",function(h){return s.handleMouseDown(h)}),s.on("touchstart",function(h){return s.handleMouseDown(h)}),s.on("mousemove",function(h){return s.handleMouseMove(h)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}it(u,g);var a=u.prototype;return a.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},a.handleMouseDown=function(t){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},a.handleMouseUp=function(t){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},a.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},u}(_n);ad.prototype.options_={children:["volumeBar"]},_n.registerComponent("VolumeControl",ad);var ac=function(g){function u(o,t){var s;return function(u,a){a.tech_&&!a.tech_.featuresMuteControl&&u.addClass("vjs-hidden"),u.on(a,"loadstart",function(){a.tech_.featuresMuteControl?u.removeClass("vjs-hidden"):u.addClass("vjs-hidden")})}(Je(s=g.call(this,o,t)||this),o),s.on(o,["loadstart","volumechange"],function(h){return s.update(h)}),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-mute-control "+g.prototype.buildCSSClass.call(this)},a.handleClick=function(t){var s=this.player_.volume(),h=this.player_.lastVolume_();0===s?(this.player_.volume(h<.1?.1:h),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},a.update=function(t){this.updateIcon_(),this.updateControlText_()},a.updateIcon_=function(){var t=this.player_.volume(),s=3;bs&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?s=0:t<.33?s=1:t<.67&&(s=2);for(var h=0;h<4;h++)Yo(this.el_,"vjs-vol-"+h);Zo(this.el_,"vjs-vol-"+s)},a.updateControlText_=function(){var s=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},u}(wa);ac.prototype.controlText_="Mute",_n.registerComponent("MuteToggle",ac);var uc=function(g){function u(o,t){var s;return void 0===t&&(t={}),t.inline=void 0===t.inline||t.inline,(void 0===t.volumeControl||za(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(s=g.call(this,o,t)||this).handleKeyPressHandler_=function(h){return s.handleKeyPress(h)},s.on(o,["loadstart"],function(h){return s.volumePanelState_(h)}),s.on(s.muteToggle,"keyup",function(h){return s.handleKeyPress(h)}),s.on(s.volumeControl,"keyup",function(h){return s.handleVolumeControlKeyUp(h)}),s.on("keydown",function(h){return s.handleKeyPress(h)}),s.on("mouseover",function(h){return s.handleMouseOver(h)}),s.on("mouseout",function(h){return s.handleMouseOut(h)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}it(u,g);var a=u.prototype;return a.sliderActive_=function(){this.addClass("vjs-slider-active")},a.sliderInactive_=function(){this.removeClass("vjs-slider-active")},a.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},a.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},a.dispose=function(){this.handleMouseOut(),g.prototype.dispose.call(this)},a.handleVolumeControlKeyUp=function(t){et().isEventKey(t,"Esc")&&this.muteToggle.focus()},a.handleMouseOver=function(t){this.addClass("vjs-hover"),Ei(pe(),"keyup",this.handleKeyPressHandler_)},a.handleMouseOut=function(t){this.removeClass("vjs-hover"),Js(pe(),"keyup",this.handleKeyPressHandler_)},a.handleKeyPress=function(t){et().isEventKey(t,"Esc")&&this.handleMouseOut()},u}(_n);uc.prototype.options_={children:["muteToggle","volumeControl"]},_n.registerComponent("VolumePanel",uc);var lc=function(g){function u(o,t){var s;return s=g.call(this,o,t)||this,t&&(s.menuButton_=t.menuButton),s.focusedChild_=-1,s.on("keydown",function(h){return s.handleKeyDown(h)}),s.boundHandleBlur_=function(h){return s.handleBlur(h)},s.boundHandleTapClick_=function(h){return s.handleTapClick(h)},s}it(u,g);var a=u.prototype;return a.addEventListenerForItem=function(t){t instanceof _n&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},a.removeEventListenerForItem=function(t){t instanceof _n&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},a.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),g.prototype.removeChild.call(this,t)},a.addItem=function(t){var s=this.addChild(t);s&&this.addEventListenerForItem(s)},a.createEl=function(){this.contentEl_=ti(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=g.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),Ei(s,"click",function(h){h.preventDefault(),h.stopImmediatePropagation()}),s},a.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,g.prototype.dispose.call(this)},a.handleBlur=function(t){var s=t.relatedTarget||pe().activeElement;if(!this.children().some(function(v){return v.el()===s})){var h=this.menuButton_;h&&h.buttonPressed_&&s!==h.el().firstChild&&h.unpressButton()}},a.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var h=s.filter(function(v){return v.el()===t.target})[0];if(!h)return;"CaptionSettingsMenuItem"!==h.name()&&this.menuButton_.focus()}},a.handleKeyDown=function(t){et().isEventKey(t,"Left")||et().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(et().isEventKey(t,"Right")||et().isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},a.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},a.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},a.focus=function(t){void 0===t&&(t=0);var s=this.children().slice();s.length&&s[0].hasClass("vjs-menu-title")&&s.shift(),s.length>0&&(t<0?t=0:t>=s.length&&(t=s.length-1),this.focusedChild_=t,s[t].el_.focus())},u}(_n);_n.registerComponent("Menu",lc);var Co=function(g){function u(o,t){var s;void 0===t&&(t={}),(s=g.call(this,o,t)||this).menuButton_=new wa(o,t),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var h=wa.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+h,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var v=function(x){return s.handleClick(x)};return s.handleMenuKeyUp_=function(S){return s.handleMenuKeyUp(S)},s.on(s.menuButton_,"tap",v),s.on(s.menuButton_,"click",v),s.on(s.menuButton_,"keydown",function(S){return s.handleKeyDown(S)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),Ei(pe(),"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(S){return s.handleMouseLeave(S)}),s.on("keydown",function(S){return s.handleSubmenuKeyDown(S)}),s}it(u,g);var a=u.prototype;return a.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},a.createMenu=function(){var t=new lc(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=ti("li",{className:"vjs-menu-title",textContent:Kr(this.options_.title),tabIndex:-1}),h=new _n(this.player_,{el:s});t.addItem(h)}if(this.items=this.createItems(),this.items)for(var v=0;v<this.items.length;v++)t.addItem(this.items[v]);return t},a.createItems=function(){},a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},a.buildWrapperCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+wa.prototype.buildCSSClass()+" "+g.prototype.buildCSSClass.call(this)},a.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+g.prototype.buildCSSClass.call(this)},a.controlText=function(t,s){return void 0===s&&(s=this.menuButton_.el()),this.menuButton_.controlText(t,s)},a.dispose=function(){this.handleMouseLeave(),g.prototype.dispose.call(this)},a.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},a.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Js(pe(),"keyup",this.handleMenuKeyUp_)},a.focus=function(){this.menuButton_.focus()},a.blur=function(){this.menuButton_.blur()},a.handleKeyDown=function(t){et().isEventKey(t,"Esc")||et().isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),et().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(et().isEventKey(t,"Up")||et().isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},a.handleMenuKeyUp=function(t){(et().isEventKey(t,"Esc")||et().isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},a.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},a.handleSubmenuKeyDown=function(t){(et().isEventKey(t,"Esc")||et().isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),et().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},a.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),bs&&oa())return;this.menu.focus()}},a.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},a.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},a.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},u}(_n);_n.registerComponent("MenuButton",Co);var Pl=function(g){function u(a,o){var t,s=o.tracks;if((t=g.call(this,a,o)||this).items.length<=1&&t.hide(),!s)return Je(t);var h=Yi(Je(t),t.update);return s.addEventListener("removetrack",h),s.addEventListener("addtrack",h),s.addEventListener("labelchange",h),t.player_.on("ready",h),t.player_.on("dispose",function(){s.removeEventListener("removetrack",h),s.removeEventListener("addtrack",h),s.removeEventListener("labelchange",h)}),t}return it(u,g),u}(Co);_n.registerComponent("TrackButton",Pl);var Uh=["Tab","Esc","Up","Down","Right","Left"],Oc=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).selectable=t.selectable,s.isSelected_=t.selected||!1,s.multiSelectable=t.multiSelectable,s.selected(s.isSelected_),s.el_.setAttribute("role",s.selectable?s.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),s}it(u,g);var a=u.prototype;return a.createEl=function(t,s,h){this.nonIconControl=!0;var v=g.prototype.createEl.call(this,"li",Ui({className:"vjs-menu-item",tabIndex:-1},s),h);return v.replaceChild(ti("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),v.querySelector(".vjs-icon-placeholder")),v},a.handleKeyDown=function(t){Uh.some(function(s){return et().isEventKey(t,s)})||g.prototype.handleKeyDown.call(this,t)},a.handleClick=function(t){this.selected(!0)},a.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},u}(Ud);_n.registerComponent("MenuItem",Oc);var ud=function(g){function u(o,t){var s,h=t.track,v=o.textTracks();t.label=h.label||h.language||"Unknown",t.selected="showing"===h.mode,(s=g.call(this,o,t)||this).track=h,s.kinds=(t.kinds||[t.kind||s.track.kind]).filter(Boolean);var R,S=function(){for(var q=arguments.length,_e=new Array(q),Re=0;Re<q;Re++)_e[Re]=arguments[Re];s.handleTracksChange.apply(Je(s),_e)},x=function(){for(var q=arguments.length,_e=new Array(q),Re=0;Re<q;Re++)_e[Re]=arguments[Re];s.handleSelectedLanguageChange.apply(Je(s),_e)};return o.on(["loadstart","texttrackchange"],S),v.addEventListener("change",S),v.addEventListener("selectedlanguagechange",x),s.on("dispose",function(){o.off(["loadstart","texttrackchange"],S),v.removeEventListener("change",S),v.removeEventListener("selectedlanguagechange",x)}),void 0===v.onchange&&s.on(["tap","click"],function(){if("object"!=typeof Y().Event)try{R=new(Y().Event)("change")}catch(ee){}R||(R=pe().createEvent("Event")).initEvent("change",!0,!0),v.dispatchEvent(R)}),s.handleTracksChange(),s}it(u,g);var a=u.prototype;return a.handleClick=function(t){var s=this.track,h=this.player_.textTracks();if(g.prototype.handleClick.call(this,t),h)for(var v=0;v<h.length;v++){var S=h[v];-1!==this.kinds.indexOf(S.kind)&&(S===s?"showing"!==S.mode&&(S.mode="showing"):"disabled"!==S.mode&&(S.mode="disabled"))}},a.handleTracksChange=function(t){var s="showing"===this.track.mode;s!==this.isSelected_&&this.selected(s)},a.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},a.dispose=function(){this.track=null,g.prototype.dispose.call(this)},u}(Oc);_n.registerComponent("TextTrackMenuItem",ud);var Ca=function(g){function u(o,t){return t.track={player:o,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.track.label=t.label?t.label:t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,g.call(this,o,t)||this}it(u,g);var a=u.prototype;return a.handleTracksChange=function(t){for(var s=this.player().textTracks(),h=!0,v=0,S=s.length;v<S;v++){var x=s[v];if(this.options_.kinds.indexOf(x.kind)>-1&&"showing"===x.mode){h=!1;break}}h!==this.isSelected_&&this.selected(h)},a.handleSelectedLanguageChange=function(t){for(var s=this.player().textTracks(),h=!0,v=0,S=s.length;v<S;v++){var x=s[v];if(["captions","descriptions","subtitles"].indexOf(x.kind)>-1&&"showing"===x.mode){h=!1;break}}h&&(this.player_.cache_.selectedLanguage={enabled:!1})},u}(ud);_n.registerComponent("OffTextTrackMenuItem",Ca);var gl=function(g){function u(o,t){return void 0===t&&(t={}),t.tracks=o.textTracks(),g.call(this,o,t)||this}return it(u,g),u.prototype.createItems=function(t,s){var h;void 0===t&&(t=[]),void 0===s&&(s=ud),this.label_&&(h=this.label_+" off"),t.push(new Ca(this.player_,{kinds:this.kinds_,kind:this.kind_,label:h})),this.hideThreshold_+=1;var v=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var S=0;S<v.length;S++){var x=v[S];if(this.kinds_.indexOf(x.kind)>-1){var R=new s(this.player_,{track:x,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});R.addClass("vjs-"+x.kind+"-menu-item"),t.push(R)}}return t},u}(Pl);_n.registerComponent("TextTrackButton",gl);var Bh=function(g){function u(o,t){var s,h=t.track,v=t.cue,S=o.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=v.text,t.selected=v.startTime<=S&&S<v.endTime,(s=g.call(this,o,t)||this).track=h,s.cue=v,s}return it(u,g),u.prototype.handleClick=function(t){g.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},u}(Oc);_n.registerComponent("ChaptersTrackMenuItem",Bh);var Ff=function(g){function u(o,t,s){var h;return(h=g.call(this,o,t,s)||this).selectCurrentItem_=function(){h.items.forEach(function(v){v.selected(h.track_.activeCues[0]===v.cue)})},h}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildWrapperCSSClass.call(this)},a.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),g.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&g.prototype.update.call(this)}},a.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var h=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);h&&h.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},a.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],s=t.length-1;s>=0;s--){var h=t[s];if(h.kind===this.kind_)return h}},a.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Kr(this.kind_))},a.createMenu=function(){return this.options_.title=this.getMenuCaption(),g.prototype.createMenu.call(this)},a.createItems=function(){var t=[];if(!this.track_)return t;var s=this.track_.cues;if(!s)return t;for(var h=0,v=s.length;h<v;h++){var x=new Bh(this.player_,{track:this.track_,cue:s[h]});t.push(x)}return t},u}(gl);Ff.prototype.kind_="chapters",Ff.prototype.controlText_="Chapters",_n.registerComponent("ChaptersButton",Ff);var ml=function(g){function u(o,t,s){var h;h=g.call(this,o,t,s)||this;var v=o.textTracks(),S=Yi(Je(h),h.handleTracksChange);return v.addEventListener("change",S),h.on("dispose",function(){v.removeEventListener("change",S)}),h}it(u,g);var a=u.prototype;return a.handleTracksChange=function(t){for(var s=this.player().textTracks(),h=!1,v=0,S=s.length;v<S;v++){var x=s[v];if(x.kind!==this.kind_&&"showing"===x.mode){h=!0;break}}h?this.disable():this.enable()},a.buildCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildWrapperCSSClass.call(this)},u}(gl);ml.prototype.kind_="descriptions",ml.prototype.controlText_="Descriptions",_n.registerComponent("DescriptionsButton",ml);var ld=function(g){function u(o,t,s){return g.call(this,o,t,s)||this}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildWrapperCSSClass.call(this)},u}(gl);ld.prototype.kind_="subtitles",ld.prototype.controlText_="Subtitles",_n.registerComponent("SubtitlesButton",ld);var jf=function(g){function u(o,t){var s;return t.track={player:o,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(s=g.call(this,o,t)||this).addClass("vjs-texttrack-settings"),s.controlText(", opens "+t.kind+" settings dialog"),s}return it(u,g),u.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},u}(ud);_n.registerComponent("CaptionSettingsMenuItem",jf);var eo=function(g){function u(o,t,s){return g.call(this,o,t,s)||this}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-captions-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-captions-button "+g.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new jf(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,t)},u}(gl);eo.prototype.kind_="captions",eo.prototype.controlText_="Captions",_n.registerComponent("CaptionsButton",eo);var Vh=function(g){function u(){return g.apply(this,arguments)||this}return it(u,g),u.prototype.createEl=function(t,s,h){var v=g.prototype.createEl.call(this,t,s,h),S=v.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(S.appendChild(ti("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(ti("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),v},u}(ud);_n.registerComponent("SubsCapsMenuItem",Vh);var qu=function(g){function u(o,t){var s;return void 0===t&&(t={}),(s=g.call(this,o,t)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(Kr(s.label_)),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new jf(this.player_,{kind:this.label_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,t,Vh)},u}(gl);qu.prototype.kinds_=["captions","subtitles"],qu.prototype.controlText_="Subtitles",_n.registerComponent("SubsCapsButton",qu);var Ol=function(g){function u(o,t){var s,h=t.track,v=o.audioTracks();t.label=h.label||h.language||"Unknown",t.selected=h.enabled,(s=g.call(this,o,t)||this).track=h,s.addClass("vjs-"+h.kind+"-menu-item");var S=function(){for(var R=arguments.length,ee=new Array(R),q=0;q<R;q++)ee[q]=arguments[q];s.handleTracksChange.apply(Je(s),ee)};return v.addEventListener("change",S),s.on("dispose",function(){v.removeEventListener("change",S)}),s}it(u,g);var a=u.prototype;return a.createEl=function(t,s,h){var v=g.prototype.createEl.call(this,t,s,h),S=v.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(S.appendChild(ti("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(ti("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),v},a.handleClick=function(t){if(g.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),h=0;h<s.length;h++){var v=s[h];v!==this.track&&(v.enabled=v===this.track)}},a.handleTracksChange=function(t){this.selected(this.track.enabled)},u}(Oc);_n.registerComponent("AudioTrackMenuItem",Ol);var Ku=function(g){function u(o,t){return void 0===t&&(t={}),t.tracks=o.audioTracks(),g.call(this,o,t)||this}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-audio-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-audio-button "+g.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),h=0;h<s.length;h++)t.push(new Ol(this.player_,{track:s[h],selectable:!0,multiSelectable:!1}));return t},u}(Pl);Ku.prototype.controlText_="Audio Track",_n.registerComponent("AudioTrackButton",Ku);var Gd=function(g){function u(o,t){var s,h=t.rate,v=parseFloat(h,10);return t.label=h,t.selected=v===o.playbackRate(),t.selectable=!0,t.multiSelectable=!1,(s=g.call(this,o,t)||this).label=h,s.rate=v,s.on(o,"ratechange",function(S){return s.update(S)}),s}it(u,g);var a=u.prototype;return a.handleClick=function(t){g.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},a.update=function(t){this.selected(this.player().playbackRate()===this.rate)},u}(Oc);Gd.prototype.contentElType="button",_n.registerComponent("PlaybackRateMenuItem",Gd);var cd=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(o,"loadstart",function(h){return s.updateVisibility(h)}),s.on(o,"ratechange",function(h){return s.updateLabel(h)}),s.on(o,"playbackrateschange",function(h){return s.handlePlaybackRateschange(h)}),s}it(u,g);var a=u.prototype;return a.createEl=function(){var t=g.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=ti("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},a.dispose=function(){this.labelEl_=null,g.prototype.dispose.call(this)},a.buildCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){for(var t=this.playbackRates(),s=[],h=t.length-1;h>=0;h--)s.push(new Gd(this.player(),{rate:t[h]+"x"}));return s},a.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},a.handleClick=function(t){var s=this.player().playbackRate(),h=this.playbackRates(),S=(h.indexOf(s)+1)%h.length;this.player().playbackRate(h[S])},a.handlePlaybackRateschange=function(t){this.update()},a.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},a.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},a.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},a.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},u}(Co);cd.prototype.controlText_="Playback Rate",_n.registerComponent("PlaybackRateMenuButton",cd);var Rc=function(g){function u(){return g.apply(this,arguments)||this}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-spacer "+g.prototype.buildCSSClass.call(this)},a.createEl=function(t,s,h){return void 0===t&&(t="div"),void 0===s&&(s={}),void 0===h&&(h={}),s.className||(s.className=this.buildCSSClass()),g.prototype.createEl.call(this,t,s,h)},u}(_n);_n.registerComponent("Spacer",Rc);var Ra=function(g){function u(){return g.apply(this,arguments)||this}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-custom-control-spacer "+g.prototype.buildCSSClass.call(this)},a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},u}(Rc);_n.registerComponent("CustomControlSpacer",Ra);var Nc=function(g){function u(){return g.apply(this,arguments)||this}return it(u,g),u.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},u}(_n);Nc.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in pe()&&Nc.prototype.options_.children.splice(Nc.prototype.options_.children.length-1,0,"pictureInPictureToggle"),_n.registerComponent("ControlBar",Nc);var $d=function(g){function u(o,t){var s;return(s=g.call(this,o,t)||this).on(o,"error",function(h){return s.open(h)}),s}it(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-error-display "+g.prototype.buildCSSClass.call(this)},a.content=function(){var t=this.player().error();return t?this.localize(t.message):""},u}(Ut);$d.prototype.options_=Me({},Ut.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),_n.registerComponent("ErrorDisplay",$d);var Uf="vjs-text-track-settings",Zu=["#000","Black"],vl=["#00F","Blue"],Wd=["#0FF","Cyan"],Bf=["#0F0","Green"],Vf=["#F0F","Magenta"],zd=["#F00","Red"],Hf=["#FFF","White"],Up=["#FF0","Yellow"],Hh=["1","Opaque"],cc=["0.5","Semi-Transparent"],C=["0","Transparent"],y={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Zu,Hf,zd,Bf,vl,Up,Vf,Wd]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Hh,cc,C]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Hf,Zu,zd,Bf,vl,Up,Vf,Wd]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(u){return"1.00"===u?null:Number(u)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Hh,cc]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[C,cc,Hh]}};function b(g,u){if(u&&(g=u(g)),g&&"none"!==g)return g}y.windowColor.options=y.backgroundColor.options;var De=function(g){function u(o,t){var s;return t.temporary=!1,(s=g.call(this,o,t)||this).updateDisplay=s.updateDisplay.bind(Je(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=ti("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),void 0===t.persistTextTrackSettings&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),Bo(y,function(h){s.on(s.$(h.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}it(u,g);var a=u.prototype;return a.dispose=function(){this.endDialog=null,g.prototype.dispose.call(this)},a.createElSelect_=function(t,s,h){var v=this;void 0===s&&(s=""),void 0===h&&(h="label");var S=y[t],x=S.id.replace("%s",this.id_),R=[s,x].join(" ").trim();return["<"+h+' id="'+x+'" class="'+("label"===h?"vjs-label":"")+'">',this.localize(S.label),"</"+h+">",'<select aria-labelledby="'+R+'">'].concat(S.options.map(function(ee){var q=x+"-"+ee[1].replace(/\W+/g,"");return['<option id="'+q+'" value="'+ee[0]+'" ','aria-labelledby="'+R+" "+q+'">',v.localize(ee[1]),"</option>"].join("")})).concat("</select>").join("")},a.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},a.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},a.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},a.createElColors_=function(){return ti("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},a.createElFont_=function(){return ti("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},a.createElControls_=function(){var t=this.localize("restore all settings to the default values");return ti("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},a.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},a.label=function(){return this.localize("Caption Settings Dialog")},a.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},a.buildCSSClass=function(){return g.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},a.getValues=function(){var t=this;return function Cl(g,u,a){return void 0===a&&(a=0),sl(g).reduce(function(o,t){return u(o,g[t],t)},a)}(y,function(s,h,v){var S=function M(g,u){return b(g.options[g.options.selectedIndex].value,u)}(t.$(h.selector),h.parser);return void 0!==S&&(s[v]=S),s},{})},a.setValues=function(t){var s=this;Bo(y,function(h,v){!function ue(g,u,a){if(u)for(var o=0;o<g.options.length;o++)if(b(g.options[o].value,a)===u){g.selectedIndex=o;break}}(s.$(h.selector),t[v],h.parser)})},a.setDefaults=function(){var t=this;Bo(y,function(s){var h=s.hasOwnProperty("default")?s.default:0;t.$(s.selector).selectedIndex=h})},a.restoreSettings=function(){var t;try{t=JSON.parse(Y().localStorage.getItem(Uf))}catch(s){Fr.warn(s)}t&&this.setValues(t)},a.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?Y().localStorage.setItem(Uf,JSON.stringify(t)):Y().localStorage.removeItem(Uf)}catch(s){Fr.warn(s)}}},a.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},a.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,s=t&&t.subsCapsButton,h=t&&t.captionsButton;s?s.focus():h&&h.focus()},u}(Ut);_n.registerComponent("TextTrackSettings",De);var It=function(g){function u(o,t){var s,h=t.ResizeObserver||Y().ResizeObserver;null===t.ResizeObserver&&(h=!1);var v=ui({createEl:!h,reportTouchActivity:!1},t);return(s=g.call(this,o,v)||this).ResizeObserver=t.ResizeObserver||Y().ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=function(u,a,o,t){void 0===t&&(t=Y());var s,v=function(){var x=this,R=arguments,ee=function(){s=null,ee=null,u.apply(x,R)};t.clearTimeout(s),s=t.setTimeout(ee,100)};return v.cancel=function(){t.clearTimeout(s),s=null},v}(function(){s.resizeHandler()},0,0,Je(s)),h?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(o.el())):(s.loadListener_=function(){if(s.el_&&s.el_.contentWindow){var S=s.debouncedHandler_,x=s.unloadListener_=function(){Js(this,"resize",S),Js(this,"unload",x),x=null};Ei(s.el_.contentWindow,"unload",x),Ei(s.el_.contentWindow,"resize",S)}},s.one("load",s.loadListener_)),s}it(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},a.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},a.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,g.prototype.dispose.call(this)},u}(_n);_n.registerComponent("ResizeManager",It);var Ht={trackingThreshold:20,liveTolerance:15},Un=function(g){function u(o,t){var s,h=ui(Ht,t,{createEl:!1});return(s=g.call(this,o,h)||this).handleVisibilityChange_=function(v){return s.handleVisibilityChange(v)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(v){return s.handlePlay(v)},s.handleFirstTimeupdate_=function(v){return s.handleFirstTimeupdate(v)},s.handleSeeked_=function(v){return s.handleSeeked(v)},s.seekToLiveEdge_=function(v){return s.seekToLiveEdge(v)},s.reset_(),s.on(s.player_,"durationchange",function(v){return s.handleDurationchange(v)}),s.on(s.player_,"canplay",function(){return s.toggleTracking()}),Us&&"hidden"in pe()&&"visibilityState"in pe()&&s.on(pe(),"visibilitychange",s.handleVisibilityChange_),s}it(u,g);var a=u.prototype;return a.handleVisibilityChange=function(){this.player_.duration()===1/0&&(pe().hidden?this.stopTracking():this.startTracking())},a.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var s=Number(Y().performance.now().toFixed(4)),h=-1===this.lastTime_?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+h;var v=this.liveCurrentTime(),S=this.player_.currentTime(),x=this.player_.paused()||this.seekedBehindLive_||Math.abs(v-S)>this.options_.liveTolerance;(!this.timeupdateSeen_||v===1/0)&&(x=!1),x!==this.behindLiveEdge_&&(this.behindLiveEdge_=x,this.trigger("liveedgechange"))}},a.handleDurationchange=function(){this.toggleTracking()},a.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},a.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},a.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},a.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},a.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},a.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},a.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},a.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},a.seekableEnd=function(){for(var t=this.player_.seekable(),s=[],h=t?t.length:0;h--;)s.push(t.end(h));return s.length?s.sort()[s.length-1]:1/0},a.seekableStart=function(){for(var t=this.player_.seekable(),s=[],h=t?t.length:0;h--;)s.push(t.start(h));return s.length?s.sort()[0]:0},a.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},a.isLive=function(){return this.isTracking()},a.atLiveEdge=function(){return!this.behindLiveEdge()},a.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},a.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},a.behindLiveEdge=function(){return this.behindLiveEdge_},a.isTracking=function(){return"number"==typeof this.trackingInterval_},a.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},a.dispose=function(){this.off(pe(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),g.prototype.dispose.call(this)},u}(_n);_n.registerComponent("LiveTracker",Un);var Lc,er=function(u){var a=u.el();if(a.hasAttribute("src"))return u.triggerSourceset(a.src),!0;var o=u.$$("source"),t=[],s="";if(!o.length)return!1;for(var h=0;h<o.length;h++){var v=o[h].src;v&&-1===t.indexOf(v)&&t.push(v)}return!!t.length&&(1===t.length&&(s=t[0]),u.triggerSourceset(s),!0)},lr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(u){var a=pe().createElement(this.nodeName.toLowerCase());a.innerHTML=u;for(var o=pe().createDocumentFragment();a.childNodes.length;)o.appendChild(a.childNodes[0]);return this.innerText="",Y().Element.prototype.appendChild.call(this,o),this.innerHTML}}),_r=function(u,a){for(var o={},t=0;t<u.length&&!((o=Object.getOwnPropertyDescriptor(u[t],a))&&o.set&&o.get);t++);return o.enumerable=!0,o.configurable=!0,o},Na=function(u){var a=u.el();if(!a.resetSourceWatch_){var o={},t=function(u){return _r([u.el(),Y().HTMLMediaElement.prototype,Y().Element.prototype,lr],"innerHTML")}(u),s=function(v){return function(){for(var S=arguments.length,x=new Array(S),R=0;R<S;R++)x[R]=arguments[R];var ee=v.apply(a,x);return er(u),ee}};["append","appendChild","insertAdjacentHTML"].forEach(function(h){!a[h]||(o[h]=a[h],a[h]=s(o[h]))}),Object.defineProperty(a,"innerHTML",ui(t,{set:s(t.set)})),a.resetSourceWatch_=function(){a.resetSourceWatch_=null,Object.keys(o).forEach(function(h){a[h]=o[h]}),Object.defineProperty(a,"innerHTML",t)},u.one("sourceset",a.resetSourceWatch_)}},dd=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?dl(Y().Element.prototype.getAttribute.call(this,"src")):""},set:function(u){return Y().Element.prototype.setAttribute.call(this,"src",u),u}}),Rl=function(u,a,o,t){void 0===t&&(t=!0);var s=function(S){return Object.defineProperty(u,a,{value:S,enumerable:!0,writable:!0})},h={configurable:!0,enumerable:!0,get:function(){var S=o();return s(S),S}};return t&&(h.set=s),Object.defineProperty(u,a,h)},qn=function(g){function u(o,t){var s;s=g.call(this,o,t)||this;var h=o.source,v=!1;if(h&&(s.el_.currentSrc!==h.src||o.tag&&3===o.tag.initNetworkState_)?s.setSource(h):s.handleLateInit_(s.el_),o.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var S=s.el_.childNodes,x=S.length,R=[];x--;){var ee=S[x];"track"===ee.nodeName.toLowerCase()&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(ee),s.remoteTextTracks().addTrack(ee.track),s.textTracks().addTrack(ee.track),!v&&!s.el_.hasAttribute("crossorigin")&&Gu(ee.src)&&(v=!0)):R.push(ee))}for(var _e=0;_e<R.length;_e++)s.el_.removeChild(R[_e])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&v&&Fr.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),s.restoreMetadataTracksInIOSNativePlayer_(),(qa||Ta||To)&&!0===o.nativeControlsForTouch&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&"VIDEO"===s.el_.tagName,s.triggerReady(),s}it(u,g);var a=u.prototype;return a.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),u.disposeMediaElement(this.el_),this.options_=null,g.prototype.dispose.call(this)},a.setupSourcesetHandling_=function(){!function(u){if(u.featuresSourceset){var a=u.el();if(!a.resetSourceset_){var o=function(u){return _r([u.el(),Y().HTMLMediaElement.prototype,dd],"src")}(u),t=a.setAttribute,s=a.load;Object.defineProperty(a,"src",ui(o,{set:function(v){var S=o.set.call(a,v);return u.triggerSourceset(a.src),S}})),a.setAttribute=function(h,v){var S=t.call(a,h,v);return/src/i.test(h)&&u.triggerSourceset(a.src),S},a.load=function(){var h=s.call(a);return er(u)||(u.triggerSourceset(""),Na(u)),h},a.currentSrc?u.triggerSourceset(a.currentSrc):er(u)||Na(u),a.resetSourceset_=function(){a.resetSourceset_=null,a.load=s,a.setAttribute=t,Object.defineProperty(a,"src",o),a.resetSourceWatch_&&a.resetSourceWatch_()}}}}(this)},a.restoreMetadataTracksInIOSNativePlayer_=function(){var s,t=this.textTracks(),h=function(){s=[];for(var x=0;x<t.length;x++){var R=t[x];"metadata"===R.kind&&s.push({track:R,storedMode:R.mode})}};h(),t.addEventListener("change",h),this.on("dispose",function(){return t.removeEventListener("change",h)});var v=function S(){for(var x=0;x<s.length;x++){var R=s[x];"disabled"===R.track.mode&&R.track.mode!==R.storedMode&&(R.track.mode=R.storedMode)}t.removeEventListener("change",S)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",h),t.removeEventListener("change",v),t.addEventListener("change",v)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",h),t.addEventListener("change",h),t.removeEventListener("change",v)})},a.overrideNative_=function(t,s){var h=this;if(s===this["featuresNative"+t+"Tracks"]){var v=t.toLowerCase();this[v+"TracksListeners_"]&&Object.keys(this[v+"TracksListeners_"]).forEach(function(S){h.el()[v+"Tracks"].removeEventListener(S,h[v+"TracksListeners_"][S])}),this["featuresNative"+t+"Tracks"]=!s,this[v+"TracksListeners_"]=null,this.proxyNativeTracksForType_(v)}},a.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},a.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},a.proxyNativeTracksForType_=function(t){var s=this,h=xu[t],v=this.el()[h.getterName],S=this[h.getterName]();if(this["featuresNative"+h.capitalName+"Tracks"]&&v&&v.addEventListener){var x={change:function(q){var _e={type:"change",target:S,currentTarget:S,srcElement:S};S.trigger(_e),"text"===t&&s[rd.remoteText.getterName]().trigger(_e)},addtrack:function(q){S.addTrack(q.track)},removetrack:function(q){S.removeTrack(q.track)}},R=function(){for(var q=[],_e=0;_e<S.length;_e++){for(var Re=!1,Le=0;Le<v.length;Le++)if(v[Le]===S[_e]){Re=!0;break}Re||q.push(S[_e])}for(;q.length;)S.removeTrack(q.shift())};this[h.getterName+"Listeners_"]=x,Object.keys(x).forEach(function(ee){var q=x[ee];v.addEventListener(ee,q),s.on("dispose",function(_e){return v.removeEventListener(ee,q)})}),this.on("loadstart",R),this.on("dispose",function(ee){return s.off("loadstart",R)})}},a.proxyNativeTracks_=function(){var t=this;xu.names.forEach(function(s){t.proxyNativeTracksForType_(s)})},a.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var s=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(s,t),u.disposeMediaElement(t),t=s}else{t=pe().createElement("video");var v=ui({},this.options_.tag&&lo(this.options_.tag));(!qa||!0!==this.options_.nativeControlsForTouch)&&delete v.controls,su(t,Ui(v,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&Uu(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var S=["loop","muted","playsinline","autoplay"],x=0;x<S.length;x++){var R=S[x],ee=this.options_[R];void 0!==ee&&(ee?Uu(t,R,R):F(t,R),t[R]=ee)}return t},a.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var s=!1,h=function(){s=!0};this.on("loadstart",h);var v=function(){s||this.trigger("loadstart")};return this.on("loadedmetadata",v),void this.ready(function(){this.off("loadstart",h),this.off("loadedmetadata",v),s||this.trigger("loadstart")})}var S=["loadstart"];S.push("loadedmetadata"),t.readyState>=2&&S.push("loadeddata"),t.readyState>=3&&S.push("canplay"),t.readyState>=4&&S.push("canplaythrough"),this.ready(function(){S.forEach(function(x){this.trigger(x)},this)})}},a.setScrubbing=function(t){this.isScrubbing_=t},a.scrubbing=function(){return this.isScrubbing_},a.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&Oo?this.el_.fastSeek(t):this.el_.currentTime=t}catch(s){Fr(s,"Video is not ready. (Video.js)")}},a.duration=function(){var t=this;return this.el_.duration===1/0&&_a&&Ko&&0===this.el_.currentTime?(this.on("timeupdate",function h(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",h))}),NaN):this.el_.duration||NaN},a.width=function(){return this.el_.offsetWidth},a.height=function(){return this.el_.offsetHeight},a.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},h=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",h),this.on("dispose",function(){t.off("webkitbeginfullscreen",h),t.off("webkitendfullscreen",s)})}},a.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=Y().navigator&&Y().navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},a.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)la(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{t.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},a.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},a.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},a.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback?this.el_.requestVideoFrameCallback(t):g.prototype.requestVideoFrameCallback.call(this,t)},a.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback?this.el_.cancelVideoFrameCallback(t):g.prototype.cancelVideoFrameCallback.call(this,t)},a.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},a.reset=function(){u.resetMediaElement(this.el_)},a.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},a.setControls=function(t){this.el_.controls=!!t},a.addTextTrack=function(t,s,h){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,s,h):g.prototype.addTextTrack.call(this,t,s,h)},a.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return g.prototype.createRemoteTextTrack.call(this,t);var s=pe().createElement("track");return t.kind&&(s.kind=t.kind),t.label&&(s.label=t.label),(t.language||t.srclang)&&(s.srclang=t.language||t.srclang),t.default&&(s.default=t.default),t.id&&(s.id=t.id),t.src&&(s.src=t.src),s},a.addRemoteTextTrack=function(t,s){var h=g.prototype.addRemoteTextTrack.call(this,t,s);return this.featuresNativeTextTracks&&this.el().appendChild(h),h},a.removeRemoteTextTrack=function(t){if(g.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var s=this.$$("track"),h=s.length;h--;)(t===s[h]||t===s[h].track)&&this.el().removeChild(s[h])},a.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),Y().performance&&"function"==typeof Y().performance.now?t.creationTime=Y().performance.now():Y().performance&&Y().performance.timing&&"number"==typeof Y().performance.timing.navigationStart&&(t.creationTime=Y().Date.now()-Y().performance.timing.navigationStart),t},u}(zi);Rl(qn,"TEST_VID",function(){if(ru()){var g=pe().createElement("video"),u=pe().createElement("track");return u.kind="captions",u.srclang="en",u.label="English",g.appendChild(u),g}}),qn.isSupported=function(){try{qn.TEST_VID.volume=.5}catch(g){return!1}return!(!qn.TEST_VID||!qn.TEST_VID.canPlayType)},qn.canPlayType=function(g){return qn.TEST_VID.canPlayType(g)},qn.canPlaySource=function(g,u){return qn.canPlayType(g.type)},qn.canControlVolume=function(){try{var g=qn.TEST_VID.volume;qn.TEST_VID.volume=g/2+.1;var u=g!==qn.TEST_VID.volume;return u&&bs?(Y().setTimeout(function(){qn&&qn.prototype&&(qn.prototype.featuresVolumeControl=g!==qn.TEST_VID.volume)}),!1):u}catch(a){return!1}},qn.canMuteVolume=function(){try{var g=qn.TEST_VID.muted;return qn.TEST_VID.muted=!g,qn.TEST_VID.muted?Uu(qn.TEST_VID,"muted","muted"):F(qn.TEST_VID,"muted"),g!==qn.TEST_VID.muted}catch(u){return!1}},qn.canControlPlaybackRate=function(){if(_a&&Ko&&ka<58)return!1;try{var g=qn.TEST_VID.playbackRate;return qn.TEST_VID.playbackRate=g/2+.1,g!==qn.TEST_VID.playbackRate}catch(u){return!1}},qn.canOverrideAttributes=function(){try{var g=function(){};Object.defineProperty(pe().createElement("video"),"src",{get:g,set:g}),Object.defineProperty(pe().createElement("audio"),"src",{get:g,set:g}),Object.defineProperty(pe().createElement("video"),"innerHTML",{get:g,set:g}),Object.defineProperty(pe().createElement("audio"),"innerHTML",{get:g,set:g})}catch(u){return!1}return!0},qn.supportsNativeTextTracks=function(){return Oo||bs&&Ko},qn.supportsNativeVideoTracks=function(){return!(!qn.TEST_VID||!qn.TEST_VID.videoTracks)},qn.supportsNativeAudioTracks=function(){return!(!qn.TEST_VID||!qn.TEST_VID.audioTracks)},qn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(g){var a=g[1];Rl(qn.prototype,g[0],function(){return qn[a]()},!0)}),qn.prototype.featuresVolumeControl=qn.canControlVolume(),qn.prototype.movingMediaElementInDOM=!bs,qn.prototype.featuresFullscreenResize=!0,qn.prototype.featuresProgressEvents=!0,qn.prototype.featuresTimeupdateEvents=!0,qn.prototype.featuresVideoFrameCallback=!(!qn.TEST_VID||!qn.TEST_VID.requestVideoFrameCallback),qn.patchCanPlayType=function(){Tc>=4&&!Xl&&!Ko&&(Lc=qn.TEST_VID&&qn.TEST_VID.constructor.prototype.canPlayType,qn.TEST_VID.constructor.prototype.canPlayType=function(g){return g&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(g)?"maybe":Lc.call(this,g)})},qn.unpatchCanPlayType=function(){var g=qn.TEST_VID.constructor.prototype.canPlayType;return Lc&&(qn.TEST_VID.constructor.prototype.canPlayType=Lc),g},qn.patchCanPlayType(),qn.disposeMediaElement=function(g){if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch(u){}}()}},qn.resetMediaElement=function(g){if(g){for(var u=g.querySelectorAll("source"),a=u.length;a--;)g.removeChild(u[a]);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch(o){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(g){qn.prototype[g]=function(){return this.el_[g]||this.el_.hasAttribute(g)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(g){qn.prototype["set"+Kr(g)]=function(u){this.el_[g]=u,u?this.el_.setAttribute(g,g):this.el_.removeAttribute(g)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(g){qn.prototype[g]=function(){return this.el_[g]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(g){qn.prototype["set"+Kr(g)]=function(u){this.el_[g]=u}}),["pause","load","play"].forEach(function(g){qn.prototype[g]=function(){return this.el_[g]()}}),zi.withSourceHandlers(qn),qn.nativeSourceHandler={},qn.nativeSourceHandler.canPlayType=function(g){try{return qn.TEST_VID.canPlayType(g)}catch(u){return""}},qn.nativeSourceHandler.canHandleSource=function(g,u){if(g.type)return qn.nativeSourceHandler.canPlayType(g.type);if(g.src){var a=td(g.src);return qn.nativeSourceHandler.canPlayType("video/"+a)}return""},qn.nativeSourceHandler.handleSource=function(g,u,a){u.setSrc(g.src)},qn.nativeSourceHandler.dispose=function(){},qn.registerSourceHandler(qn.nativeSourceHandler),zi.registerTech("Html5",qn);var $f=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],hd={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},qd=["tiny","xsmall","small","medium","large","xlarge","huge"],Kd={};qd.forEach(function(g){var u="x"===g.charAt(0)?"x-"+g.substring(1):g;Kd[g]="vjs-layout-"+u});var em={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},mo=function(g){function u(o,t,s){var h;if(o.id=o.id||t.id||"vjs_video_"+au(),(t=Ui(u.getTagSettings(o),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof o.closest){var v=o.closest("[lang]");v&&v.getAttribute&&(t.language=v.getAttribute("lang"))}else for(var S=o;S&&1===S.nodeType;){if(lo(S).hasOwnProperty("lang")){t.language=S.getAttribute("lang");break}S=S.parentNode}if((h=g.call(this,null,t,s)||this).boundDocumentFullscreenChange_=function(q){return h.documentFullscreenChange_(q)},h.boundFullWindowOnEscKey_=function(q){return h.fullWindowOnEscKey(q)},h.boundUpdateStyleEl_=function(q){return h.updateStyleEl_(q)},h.boundApplyInitTime_=function(q){return h.applyInitTime_(q)},h.boundUpdateCurrentBreakpoint_=function(q){return h.updateCurrentBreakpoint_(q)},h.boundHandleTechClick_=function(q){return h.handleTechClick_(q)},h.boundHandleTechDoubleClick_=function(q){return h.handleTechDoubleClick_(q)},h.boundHandleTechTouchStart_=function(q){return h.handleTechTouchStart_(q)},h.boundHandleTechTouchMove_=function(q){return h.handleTechTouchMove_(q)},h.boundHandleTechTouchEnd_=function(q){return h.handleTechTouchEnd_(q)},h.boundHandleTechTap_=function(q){return h.handleTechTap_(q)},h.isFullscreen_=!1,h.log=Ql(h.id_),h.fsApi_=Oi,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,h.audioOnlyMode_=!1,h.audioPosterMode_=!1,h.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(h.tag=o,h.tagAttributes=o&&lo(o),h.language(h.options_.language),t.languages){var x={};Object.getOwnPropertyNames(t.languages).forEach(function(q){x[q.toLowerCase()]=t.languages[q]}),h.languages_=x}else h.languages_=u.prototype.options_.languages;h.resetCache_(),h.poster_=t.poster||"",h.controls_=!!t.controls,o.controls=!1,o.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],o.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(q){if("function"!=typeof h[q])throw new Error('plugin "'+q+'" does not exist')}),h.scrubbing_=!1,h.el_=h.createEl(),Fn(Je(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(Ei(pe(),h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on(["playerreset","resize"],h.boundUpdateStyleEl_);var R=ui(h.options_);t.plugins&&Object.keys(t.plugins).forEach(function(q){h[q](t.plugins[q])}),t.debug&&h.debug(!0),h.options_.playerOptions=R,h.middleware_=[],h.playbackRates(t.playbackRates),h.initChildren(),h.isAudio("audio"===o.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),qa&&h.addClass("vjs-touch-enabled"),bs||h.addClass("vjs-workinghover"),u.players[h.id_]=Je(h);var ee="7.20.1".split(".")[0];return h.addClass("vjs-v"+ee),h.userActive(!0),h.reportUserActivity(),h.one("play",function(q){return h.listenForUserActivity_(q)}),h.on("stageclick",function(q){return h.handleStageClick_(q)}),h.on("keydown",function(q){return h.handleKeyDown(q)}),h.on("languagechange",function(q){return h.handleLanguagechange(q)}),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h.on("ready",function(){h.audioPosterMode(h.options_.audioPosterMode),h.audioOnlyMode(h.options_.audioOnlyMode)}),h}it(u,g);var a=u.prototype;return a.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),Js(pe(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Js(pe(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),u.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function du(g){Rh[g.id()]=null}(this),Ps.names.forEach(function(s){var v=t[Ps[s].getterName]();v&&v.off&&v.off()}),g.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},a.createEl=function(){var s,t=this.tag,h=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),v="video-js"===this.tag.tagName.toLowerCase();h?s=this.el_=t.parentNode:v||(s=this.el_=g.prototype.createEl.call(this,"div"));var S=lo(t);if(v){for(s=this.el_=t,t=this.tag=pe().createElement("video");s.children.length;)t.appendChild(s.firstChild);Ka(s,"video-js")||Zo(s,"video-js"),s.appendChild(t),h=this.playerElIngest_=s,Object.keys(s).forEach(function(Re){try{t[Re]=s[Re]}catch(Le){}})}if(t.setAttribute("tabindex","-1"),S.tabindex="-1",(Us||Ko&&xs)&&(t.setAttribute("role","application"),S.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in S&&delete S.width,"height"in S&&delete S.height,Object.getOwnPropertyNames(S).forEach(function(Re){v&&"class"===Re||s.setAttribute(Re,S[Re]),v&&t.setAttribute(Re,S[Re])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=s.player=this,this.addClass("vjs-paused"),!0!==Y().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Nd("vjs-styles-dimensions");var x=pn(".vjs-styles-defaults"),R=pn("head");R.insertBefore(this.styleEl_,x?x.nextSibling:R.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var ee=t.getElementsByTagName("a"),q=0;q<ee.length;q++){var _e=ee.item(q);Zo(_e,"vjs-hidden"),_e.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!h&&t.parentNode.insertBefore(s,t),Fu(t,s),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},a.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):Fr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},a.width=function(t){return this.dimension("width",t)},a.height=function(t){return this.dimension("height",t)},a.dimension=function(t,s){var h=t+"_";if(void 0===s)return this[h]||0;if(""===s||"auto"===s)return this[h]=void 0,void this.updateStyleEl_();var v=parseFloat(s);isNaN(v)?Fr.error('Improper value "'+s+'" supplied for for '+t):(this[h]=v,this.updateStyleEl_())},a.fluid=function(t){var s=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,Xo(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),function(u,a){Xo(u)?a():(u.eventedCallbacks||(u.eventedCallbacks=[]),u.eventedCallbacks.push(a))}(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},a.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},a.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},a.updateStyleEl_=function(){if(!0!==Y().VIDEOJS_NO_DYNAMIC_STYLE){var v,S,R,ee=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),q=ee[1]/ee[0];v=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/q:this.videoWidth()||300,S=void 0!==this.height_?this.height_:v*q,R=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(R),Bu(this.styleEl_,"\n      ."+R+" {\n        width: "+v+"px;\n        height: "+S+"px;\n      }\n\n      ."+R+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*q+"%;\n      }\n    ")}else{var t="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(t>=0&&(h.width=t),s>=0&&(h.height=s))}},a.loadTech_=function(t,s){var h=this;this.tech_&&this.unloadTech_();var v=Kr(t),S=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==v&&this.tag&&(zi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=v,this.isReady_=!1;var x=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(x=!1);var R={source:s,autoplay:x,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+S+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ps.names.forEach(function(q){var _e=Ps[q];R[_e.getterName]=h[_e.privateName]}),Ui(R,this.options_[v]),Ui(R,this.options_[S]),Ui(R,this.options_[t.toLowerCase()]),this.tag&&(R.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(R.startTime=this.cache_.currentTime);var ee=zi.getTech(t);if(!ee)throw new Error("No Tech named '"+v+"' exists! '"+v+"' should be registered using videojs.registerTech()'");this.tech_=new ee(R),this.tech_.ready(Yi(this,this.handleTechReady_),!0),function(u,a){u.forEach(function(o){var t=a.addRemoteTextTrack(o).track;!o.src&&o.cues&&o.cues.forEach(function(s){return t.addCue(s)})}),a.textTracks()}(this.textTracksJson_||[],this.tech_),$f.forEach(function(q){h.on(h.tech_,q,function(_e){return h["handleTech"+Kr(q)+"_"](_e)})}),Object.keys(hd).forEach(function(q){h.on(h.tech_,q,function(_e){0===h.tech_.playbackRate()&&h.tech_.seeking()?h.queuedCallbacks_.push({callback:h["handleTech"+hd[q]+"_"].bind(h),event:_e}):h["handleTech"+hd[q]+"_"](_e)})}),this.on(this.tech_,"loadstart",function(q){return h.handleTechLoadStart_(q)}),this.on(this.tech_,"sourceset",function(q){return h.handleTechSourceset_(q)}),this.on(this.tech_,"waiting",function(q){return h.handleTechWaiting_(q)}),this.on(this.tech_,"ended",function(q){return h.handleTechEnded_(q)}),this.on(this.tech_,"seeking",function(q){return h.handleTechSeeking_(q)}),this.on(this.tech_,"play",function(q){return h.handleTechPlay_(q)}),this.on(this.tech_,"firstplay",function(q){return h.handleTechFirstPlay_(q)}),this.on(this.tech_,"pause",function(q){return h.handleTechPause_(q)}),this.on(this.tech_,"durationchange",function(q){return h.handleTechDurationChange_(q)}),this.on(this.tech_,"fullscreenchange",function(q,_e){return h.handleTechFullscreenChange_(q,_e)}),this.on(this.tech_,"fullscreenerror",function(q,_e){return h.handleTechFullscreenError_(q,_e)}),this.on(this.tech_,"enterpictureinpicture",function(q){return h.handleTechEnterPictureInPicture_(q)}),this.on(this.tech_,"leavepictureinpicture",function(q){return h.handleTechLeavePictureInPicture_(q)}),this.on(this.tech_,"error",function(q){return h.handleTechError_(q)}),this.on(this.tech_,"posterchange",function(q){return h.handleTechPosterChange_(q)}),this.on(this.tech_,"textdata",function(q){return h.handleTechTextData_(q)}),this.on(this.tech_,"ratechange",function(q){return h.handleTechRateChange_(q)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==v||!this.tag)&&Fu(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},a.unloadTech_=function(){var t=this;Ps.names.forEach(function(s){var h=Ps[s];t[h.privateName]=t[h.getterName]()}),this.textTracksJson_=function(u){var a=u.$$("track"),o=Array.prototype.map.call(a,function(s){return s.track});return Array.prototype.map.call(a,function(s){var h=W(s.track);return s.src&&(h.src=s.src),h}).concat(Array.prototype.filter.call(u.textTracks(),function(s){return-1===o.indexOf(s)}).map(W))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},a.tech=function(t){return void 0===t&&Fr.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},a.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},a.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},a.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},a.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},a.manualAutoplay_=function(t){var s=this;if(this.tech_&&"string"==typeof t){var v,h=function(){var x=s.muted();s.muted(!0);var R=function(){s.muted(x)};s.playTerminatedQueue_.push(R);var ee=s.play();if(Hu(ee))return ee.catch(function(q){throw R(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(q||""))})};if("any"!==t||this.muted()?v="muted"!==t||this.muted()?this.play():h():Hu(v=this.play())&&(v=v.catch(h)),Hu(v))return v.then(function(){s.trigger({type:"autoplay-success",autoplay:t})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:t})})}},a.updateSourceCaches_=function(t){void 0===t&&(t="");var s=t,h="";"string"!=typeof s&&(s=t.src,h=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!h&&(h=function(u,a){if(!a)return"";if(u.cache_.source.src===a&&u.cache_.source.type)return u.cache_.source.type;var o=u.cache_.sources.filter(function(v){return v.src===a});if(o.length)return o[0].type;for(var t=u.$$("source"),s=0;s<t.length;s++){var h=t[s];if(h.type&&h.src&&h.src===a)return h.type}return jd(a)}(this,s)),this.cache_.source=ui({},t,{src:s,type:h});for(var v=this.cache_.sources.filter(function(_e){return _e.src&&_e.src===s}),S=[],x=this.$$("source"),R=[],ee=0;ee<x.length;ee++){var q=lo(x[ee]);S.push(q),q.src&&q.src===s&&R.push(q.src)}R.length&&!v.length?this.cache_.sources=S:v.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},a.handleTechSourceset_=function(t){var s=this;if(!this.changingSrc_){var h=function(R){return s.updateSourceCaches_(R)},v=this.currentSource().src,S=t.src;v&&!/^blob:/.test(v)&&/^blob:/.test(S)&&(!this.lastSource_||this.lastSource_.tech!==S&&this.lastSource_.player!==v)&&(h=function(){}),h(S),t.src||this.tech_.any(["sourceset","loadstart"],function(x){if("sourceset"!==x.type){var R=s.techGet("currentSrc");s.lastSource_.tech=R,s.updateSourceCaches_(R)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},a.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},a.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},a.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},a.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime();this.on("timeupdate",function v(){s!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",v))})},a.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},a.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},a.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},a.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},a.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},a.handleTechFirstPlay_=function(){this.options_.starttime&&(Fr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},a.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},a.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},a.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},a.handleTechClick_=function(t){!this.controls_||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,t):this.paused()?la(this.play()):this.pause())},a.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(h){return h.contains(t.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},a.handleTechTap_=function(){this.userActive(!this.userActive())},a.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},a.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},a.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},a.handleStageClick_=function(){this.reportUserActivity()},a.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},a.documentFullscreenChange_=function(t){var s=t.target.player;if(!s||s===this){var h=this.el(),v=pe()[this.fsApi_.fullscreenElement]===h;!v&&h.matches?v=h.matches(":"+this.fsApi_.fullscreen):!v&&h.msMatchesSelector&&(v=h.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(v)}},a.handleTechFullscreenChange_=function(t,s){var h=this;s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){h.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))},a.handleTechFullscreenError_=function(t,s){this.trigger("fullscreenerror",s)},a.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},a.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},a.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},a.handleTechError_=function(){var t=this.tech_.error();this.error(t)},a.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},a.getCache=function(){return this.cache_},a.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},a.techCall_=function(t,s){this.ready(function(){if(t in Iu)return function Lh(g,u,a,o){return u[a](g.reduce(kc(a),o))}(this.middleware_,this.tech_,t,s);if(t in wf)return hl(this.middleware_,this.tech_,t,s);try{this.tech_&&this.tech_[t](s)}catch(h){throw Fr(h),h}},!0)},a.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Ac)return function Nh(g,u,a){return g.reduceRight(kc(a),u[a]())}(this.middleware_,this.tech_,t);if(t in wf)return hl(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(s){throw void 0===this.tech_[t]?(Fr("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",s),s):"TypeError"===s.name?(Fr("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(Fr(s),s)}}},a.play=function(){var t=this,s=this.options_.Promise||Y().Promise;return s?new s(function(h){t.play_(h)}):this.play_()},a.play_=function(t){var s=this;void 0===t&&(t=la),this.playCallbacks_.push(t);var h=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!h)return this.waitToPlay_=function(S){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!h&&(Oo||bs)&&this.load());var v=this.techGet_("play");null===v?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(v)},a.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(s){s()})},a.runPlayCallbacks_=function(t){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(h){h(t)})},a.pause=function(){this.techCall_("pause")},a.paused=function(){return!1!==this.techGet_("paused")},a.played=function(){return this.techGet_("played")||Jo(0,0)},a.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},a.currentTime=function(t){return void 0!==t?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},a.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},a.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},a.remainingTime=function(){return this.duration()-this.currentTime()},a.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},a.buffered=function(){var t=this.techGet_("buffered");return(!t||!t.length)&&(t=Jo(0,0)),t},a.bufferedPercent=function(){return ll(this.buffered(),this.duration())},a.bufferedEnd=function(){var t=this.buffered(),s=this.duration(),h=t.end(t.length-1);return h>s&&(h=s),h},a.volume=function(t){var s;return void 0!==t?(s=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=s,this.techCall_("setVolume",s),void(s>0&&this.lastVolume_(s))):(s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s)},a.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},a.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},a.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},a.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},a.isFullscreen=function(t){if(void 0!==t){var s=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},a.requestFullscreen=function(t){var s=this.options_.Promise||Y().Promise;if(s){var h=this;return new s(function(v,S){function x(){h.off("fullscreenerror",ee),h.off("fullscreenchange",R)}function R(){x(),v()}function ee(_e,Re){x(),S(Re)}h.one("fullscreenchange",R),h.one("fullscreenerror",ee);var q=h.requestFullscreenHelper_(t);q&&(q.then(x,x),q.then(v,S))})}return this.requestFullscreenHelper_()},a.requestFullscreenHelper_=function(t){var h,s=this;if(this.fsApi_.prefixed||(h=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(h=t)),this.fsApi_.requestFullscreen){var v=this.el_[this.fsApi_.requestFullscreen](h);return v&&v.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),v}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},a.exitFullscreen=function(){var t=this.options_.Promise||Y().Promise;if(t){var s=this;return new t(function(h,v){function S(){s.off("fullscreenerror",R),s.off("fullscreenchange",x)}function x(){S(),h()}function R(q,_e){S(),v(_e)}s.one("fullscreenchange",x),s.one("fullscreenerror",R);var ee=s.exitFullscreenHelper_();ee&&(ee.then(S,S),ee.then(h,v))})}return this.exitFullscreenHelper_()},a.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var s=pe()[this.fsApi_.exitFullscreen]();return s&&la(s.then(function(){return t.isFullscreen(!1)})),s}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},a.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=pe().documentElement.style.overflow,Ei(pe(),"keydown",this.boundFullWindowOnEscKey_),pe().documentElement.style.overflow="hidden",Zo(pe().body,"vjs-full-window"),this.trigger("enterFullWindow")},a.fullWindowOnEscKey=function(t){et().isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},a.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Js(pe(),"keydown",this.boundFullWindowOnEscKey_),pe().documentElement.style.overflow=this.docOrigOverflow,Yo(pe().body,"vjs-full-window"),this.trigger("exitFullWindow")},a.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},a.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},a.requestPictureInPicture=function(){if("pictureInPictureEnabled"in pe()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},a.exitPictureInPicture=function(){if("pictureInPictureEnabled"in pe())return pe().exitPictureInPicture()},a.handleKeyDown=function(t){var S,x,s=this.options_.userActions;s&&s.hotkeys&&(x=(S=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),S.isContentEditable||("input"===x?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(S.type):-1!==["textarea"].indexOf(x))||("function"==typeof s.hotkeys?s.hotkeys.call(this,t):this.handleHotkeys(t)))},a.handleHotkeys=function(t){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},h=s.fullscreenKey,S=s.muteKey,x=void 0===S?function(Le){return et().isEventKey(Le,"m")}:S,R=s.playPauseKey,ee=void 0===R?function(Le){return et().isEventKey(Le,"k")||et().isEventKey(Le,"Space")}:R;if((void 0===h?function(Le){return et().isEventKey(Le,"f")}:h).call(this,t)){t.preventDefault(),t.stopPropagation();var q=_n.getComponent("FullscreenToggle");!1!==pe()[this.fsApi_.fullscreenEnabled]&&q.prototype.handleClick.call(this,t)}else x.call(this,t)?(t.preventDefault(),t.stopPropagation(),_n.getComponent("MuteToggle").prototype.handleClick.call(this,t)):ee.call(this,t)&&(t.preventDefault(),t.stopPropagation(),_n.getComponent("PlayToggle").prototype.handleClick.call(this,t))},a.canPlayType=function(t){for(var s,h=0,v=this.options_.techOrder;h<v.length;h++){var S=v[h],x=zi.getTech(S);if(x||(x=_n.getComponent(S)),x){if(x.isSupported()&&(s=x.canPlayType(t)))return s}else Fr.error('The "'+S+'" tech is undefined. Skipped browser support check for that tech.')}return""},a.selectSource=function(t){var q,s=this,h=this.options_.techOrder.map(function(ee){return[ee,zi.getTech(ee)]}).filter(function(ee){var q=ee[0],_e=ee[1];return _e?_e.isSupported():(Fr.error('The "'+q+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),v=function(q,_e,Re){var Le;return q.some(function(Ve){return _e.some(function(zt){if(Le=Re(Ve,zt))return!0})}),Le},R=function(q,_e){var Re=q[0];if(q[1].canPlaySource(_e,s.options_[Re.toLowerCase()]))return{source:_e,tech:Re}};return(this.options_.sourceOrder?v(t,h,(q=R,function(_e,Re){return q(Re,_e)})):v(h,t,R))||!1},a.handleSrc_=function(t,s){var h=this;if(void 0===t)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var v=Fh(t);if(v.length){if(this.changingSrc_=!0,s||(this.cache_.sources=v),this.updateSourceCaches_(v[0]),nc(this,v[0],function(R,ee){if(h.middleware_=ee,s||(h.cache_.sources=v),h.updateSourceCaches_(R),h.src_(R))return v.length>1?h.handleSrc_(v.slice(1)):(h.changingSrc_=!1,h.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void h.triggerReady());!function Pp(g,u){g.forEach(function(a){return a.setTech&&a.setTech(u)})}(ee,h.tech_)}),this.options_.retryOnError&&v.length>1){var S=function(){h.error(null),h.handleSrc_(v.slice(1),!0)},x=function(){h.off("error",S)};this.one("error",S),this.one("playing",x),this.resetRetryOnError_=function(){h.off("error",S),h.off("playing",x)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},a.src=function(t){return this.handleSrc_(t,!1)},a.src_=function(t){var s=this,h=this.selectSource([t]);return!h||(function(u,a){return Kr(u)===Kr(a)}(h.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(h.tech,h.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1))},a.load=function(){this.techCall_("load")},a.reset=function(){var t=this,s=this.options_.Promise||Y().Promise;this.paused()||!s?this.doReset_():la(this.play().then(function(){return t.doReset_()}))},a.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Xo(this)&&this.trigger("playerreset")},a.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},a.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar||{},s=t.durationDisplay,h=t.remainingTimeDisplay;s&&s.updateContent(),h&&h.updateContent()},a.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},a.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},a.currentSources=function(){var t=this.currentSource(),s=[];return 0!==Object.keys(t).length&&s.push(t),this.cache_.sources||s},a.currentSource=function(){return this.cache_.source||{}},a.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},a.currentType=function(){return this.currentSource()&&this.currentSource().type||""},a.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},a.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var s;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),s=!1):this.options_.autoplay=!!t,s=void 0===s?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},a.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},a.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},a.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},a.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},a.controls=function(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},a.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},a.error=function(t){var s=this;if(void 0===t)return this.error_||null;if(xi("beforeerror").forEach(function(v){var S=v(s,t);Xs(S)&&!Array.isArray(S)||"string"==typeof S||"number"==typeof S||null===S?t=S:s.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&4===t.code){var h=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],h),void this.one("loadstart",function(){this.off(["click","touchstart"],h)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ea(t),this.addClass("vjs-error"),Fr.error("(CODE:"+this.error_.code+" "+ea.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),xi("error").forEach(function(v){return v(s,s.error_)})},a.reportUserActivity=function(t){this.userActivity_=!0},a.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},a.listenForUserActivity_=function(){var t,s,h,v=Yi(this,this.reportUserActivity),R=function(Re){v(),this.clearInterval(t)};this.on("mousedown",function(){v(),this.clearInterval(t),t=this.setInterval(v,250)}),this.on("mousemove",function(Re){(Re.screenX!==s||Re.screenY!==h)&&(s=Re.screenX,h=Re.screenY,v())}),this.on("mouseup",R),this.on("mouseleave",R);var q,ee=this.getChild("controlBar");ee&&!bs&&!_a&&(ee.on("mouseenter",function(_e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),ee.on("mouseleave",function(_e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",v),this.on("keyup",v),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(q);var _e=this.options_.inactivityTimeout;_e<=0||(q=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},_e))}},250)},a.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},a.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},a.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},a.enableAudioOnlyUI_=function(){var t=this;this.addClass("vjs-audio-only-mode");var s=this.children(),h=this.getChild("ControlBar"),v=h&&h.currentHeight();s.forEach(function(S){S!==h&&S.el_&&!S.hasClass("vjs-hidden")&&(S.hide(),t.audioOnlyCache_.hiddenChildren.push(S))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(v),this.trigger("audioonlymodechange")},a.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(t){return t.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},a.audioOnlyMode=function(t){var s=this;if("boolean"!=typeof t||t===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=t;var h=this.options_.Promise||Y().Promise;if(h){if(t){var v=[];return this.isInPictureInPicture()&&v.push(this.exitPictureInPicture()),this.isFullscreen()&&v.push(this.exitFullscreen()),this.audioPosterMode()&&v.push(this.audioPosterMode(!1)),h.all(v).then(function(){return s.enableAudioOnlyUI_()})}return h.resolve().then(function(){return s.disableAudioOnlyUI_()})}t?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},a.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},a.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},a.audioPosterMode=function(t){var s=this;if("boolean"!=typeof t||t===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=t;var h=this.options_.Promise||Y().Promise;return h?t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){s.enablePosterModeUI_()}):h.resolve().then(function(){s.enablePosterModeUI_()}):h.resolve().then(function(){s.disablePosterModeUI_()}):t?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},a.addTextTrack=function(t,s,h){if(this.tech_)return this.tech_.addTextTrack(t,s,h)},a.addRemoteTextTrack=function(t,s){if(this.tech_)return this.tech_.addRemoteTextTrack(t,s)},a.removeRemoteTextTrack=function(t){void 0===t&&(t={});var h=t.track;if(h||(h=t),this.tech_)return this.tech_.removeRemoteTextTrack(h)},a.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},a.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},a.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},a.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),Xo(this)&&this.trigger("languagechange"))},a.languages=function(){return ui(u.prototype.options_.languages,this.languages_)},a.toJSON=function(){var t=ui(this.options_),s=t.tracks;t.tracks=[];for(var h=0;h<s.length;h++){var v=s[h];(v=ui(v)).player=void 0,t.tracks[h]=v}return t},a.createModal=function(t,s){var h=this;(s=s||{}).content=t||"";var v=new Ut(this,s);return this.addChild(v),v.on("dispose",function(){h.removeChild(v)}),v.open(),v},a.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),s=this.currentWidth(),h=0;h<qd.length;h++){var v=qd[h];if(s<=this.breakpoints_[v]){if(t===v)return;t&&this.removeClass(Kd[t]),this.addClass(Kd[v]),this.breakpoint_=v;break}}},a.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},a.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=Ui({},em,t),this.updateCurrentBreakpoint_()),Ui(this.breakpoints_)},a.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},a.currentBreakpoint=function(){return this.breakpoint_},a.currentBreakpointClass=function(){return Kd[this.breakpoint_]||""},a.loadMedia=function(t,s){var h=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=ui(t);var v=this.cache_.media,x=v.poster,R=v.src,ee=v.textTracks;!v.artwork&&x&&(this.cache_.media.artwork=[{src:x,type:jd(x)}]),R&&this.src(R),x&&this.poster(x),Array.isArray(ee)&&ee.forEach(function(q){return h.addRemoteTextTrack(q,!1)}),this.ready(s)}},a.getMedia=function(){if(!this.cache_.media){var t=this.poster(),v={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(S){return{kind:S.kind,label:S.label,language:S.language,src:S.src}})};return t&&(v.poster=t,v.artwork=[{src:v.poster,type:jd(v.poster)}]),v}return ui(this.cache_.media)},u.getTagSettings=function(t){var s={sources:[],tracks:[]},h=lo(t),v=h["data-setup"];if(Ka(t,"vjs-fill")&&(h.fill=!0),Ka(t,"vjs-fluid")&&(h.fluid=!0),null!==v){var S=$e()(v||"{}"),x=S[0],R=S[1];x&&Fr.error(x),Ui(h,R)}if(Ui(s,h),t.hasChildNodes())for(var ee=t.childNodes,q=0,_e=ee.length;q<_e;q++){var Re=ee[q],Le=Re.nodeName.toLowerCase();"source"===Le?s.sources.push(lo(Re)):"track"===Le&&s.tracks.push(lo(Re))}return s},a.flexNotSupported_=function(){var t=pe().createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},a.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},a.playbackRates=function(t){if(void 0===t)return this.cache_.playbackRates;!Array.isArray(t)||!t.every(function(s){return"number"==typeof s})||(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},u}(_n);Ps.names.forEach(function(g){var u=Ps[g];mo.prototype[u.getterName]=function(){return this.tech_?this.tech_[u.getterName]():(this[u.privateName]=this[u.privateName]||new u.ListClass,this[u.privateName])}}),mo.prototype.crossorigin=mo.prototype.crossOrigin,mo.players={};var Zd=Y().navigator;mo.prototype.options_={techOrder:zi.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Zd&&(Zd.languages&&Zd.languages[0]||Zd.userLanguage||Zd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(g){mo.prototype[g]=function(){return this.techGet_(g)}}),$f.forEach(function(g){mo.prototype["handleTech"+Kr(g)+"_"]=function(){return this.trigger(g)}}),_n.registerComponent("Player",mo);var Vp="plugin",Yd="activePlugins_",Fc={},Wf=function(u){return Fc.hasOwnProperty(u)},Qd=function(u){return Wf(u)?Fc[u]:void 0},yv=function(u,a){u[Yd]=u[Yd]||{},u[Yd][a]=!0},zf=function(u,a,o){var t=(o?"before":"")+"pluginsetup";u.trigger(t,a),u.trigger(t+":"+a.name,a)},Xt=function(u,a){return a.prototype.name=u,function(){zf(this,{name:u,plugin:a,instance:null},!0);for(var o=arguments.length,t=new Array(o),s=0;s<o;s++)t[s]=arguments[s];var h=gt(a,[this].concat(t));return this[u]=function(){return h},zf(this,h.getEventHash()),h}},ha=function(){function g(a){if(this.constructor===g)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=a,this.log||(this.log=this.player.log.createLogger(this.name)),Fn(this),delete this.trigger,Jl(this,this.constructor.defaultState),yv(a,this.name),this.dispose=this.dispose.bind(this),a.on("dispose",this.dispose)}var u=g.prototype;return u.version=function(){return this.constructor.VERSION},u.getEventHash=function(o){return void 0===o&&(o={}),o.name=this.name,o.plugin=this.constructor,o.instance=this,o},u.trigger=function(o,t){return void 0===t&&(t={}),wc(this.eventBusEl_,o,this.getEventHash(t))},u.handleStateChanged=function(o){},u.dispose=function(){var o=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Yd][o]=!1,this.player=this.state=null,t[o]=Xt(o,Fc[o])},g.isBasic=function(o){var t="string"==typeof o?Qd(o):o;return"function"==typeof t&&!g.prototype.isPrototypeOf(t.prototype)},g.registerPlugin=function(o,t){if("string"!=typeof o)throw new Error('Illegal plugin name, "'+o+'", must be a string, was '+typeof o+".");if(Wf(o))Fr.warn('A plugin named "'+o+'" already exists. You may want to avoid re-registering plugins!');else if(mo.prototype.hasOwnProperty(o))throw new Error('Illegal plugin name, "'+o+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+o+'", must be a function, was '+typeof t+".");return Fc[o]=t,o!==Vp&&(mo.prototype[o]=g.isBasic(t)?function(u,a){var o=function(){zf(this,{name:u,plugin:a,instance:null},!0);var s=a.apply(this,arguments);return yv(this,u),zf(this,{name:u,plugin:a,instance:s}),s};return Object.keys(a).forEach(function(t){o[t]=a[t]}),o}(o,t):Xt(o,t)),t},g.deregisterPlugin=function(o){if(o===Vp)throw new Error("Cannot de-register base plugin.");Wf(o)&&(delete Fc[o],delete mo.prototype[o])},g.getPlugins=function(o){var t;return void 0===o&&(o=Object.keys(Fc)),o.forEach(function(s){var h=Qd(s);h&&((t=t||{})[s]=h)}),t},g.getPluginVersion=function(o){var t=Qd(o);return t&&t.VERSION||""},g}();ha.getPlugin=Qd,ha.BASE_PLUGIN_NAME=Vp,ha.registerPlugin(Vp,ha),mo.prototype.usingPlugin=function(g){return!!this[Yd]&&!0===this[Yd][g]},mo.prototype.hasPlugin=function(g){return!!Wf(g)};var nm=function(u){return 0===u.indexOf("#")?u.slice(1):u};function kt(g,u,a){var o=kt.getPlayer(g);if(o)return u&&Fr.warn('Player "'+g+'" is already initialised. Options will not be applied.'),a&&o.ready(a),o;var t="string"==typeof g?pn("#"+nm(g)):g;if(!Eo(t))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!t.ownerDocument.defaultView||!t.ownerDocument.body.contains(t))&&Fr.warn("The element supplied is not included in the DOM"),!0===(u=u||{}).restoreEl&&(u.restoreEl=(t.parentNode&&t.parentNode.hasAttribute("data-vjs-player")?t.parentNode:t).cloneNode(!0)),xi("beforesetup").forEach(function(h){var v=h(t,ui(u));Xs(v)&&!Array.isArray(v)?u=ui(u,v):Fr.error("please return an object in beforesetup hooks")});var s=_n.getComponent("Player");return o=new s(t,u,a),xi("setup").forEach(function(h){return h(o)}),o}if(kt.hooks_=gi,kt.hooks=xi,kt.hook=function(u,a){xi(u,a)},kt.hookOnce=function(u,a){xi(u,[].concat(a).map(function(o){return function s(){return Yr(u,s),o.apply(void 0,arguments)}}))},kt.removeHook=Yr,!0!==Y().VIDEOJS_NO_DYNAMIC_STYLE&&ru()){var Yu=pn(".vjs-styles-defaults");if(!Yu){Yu=Nd("vjs-styles-defaults");var rm=pn("head");rm&&rm.insertBefore(Yu,rm.firstChild),Bu(Yu,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Ea(1,kt),kt.VERSION="7.20.1",kt.options=mo.prototype.options_,kt.getPlayers=function(){return mo.players},kt.getPlayer=function(g){var a,u=mo.players;if("string"==typeof g){var o=nm(g),t=u[o];if(t)return t;a=pn("#"+o)}else a=g;if(Eo(a)){var h=a.player,v=a.playerId;if(h||u[v])return h||u[v]}},kt.getAllPlayers=function(){return Object.keys(mo.players).map(function(g){return mo.players[g]}).filter(Boolean)},kt.players=mo.players,kt.getComponent=_n.getComponent,kt.registerComponent=function(g,u){zi.isTech(u)&&Fr.warn("The "+g+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),_n.registerComponent.call(_n,g,u)},kt.getTech=zi.getTech,kt.registerTech=zi.registerTech,kt.use=function Dc(g,u){tc[g]=tc[g]||[],tc[g].push(u)},Object.defineProperty(kt,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(kt.middleware,"TERMINATOR",{value:Wu,writeable:!1,enumerable:!0}),kt.browser=Rd,kt.TOUCH_ENABLED=qa,kt.extend=function(u,a){void 0===a&&(a={});var o=function(){u.apply(this,arguments)},t={};for(var s in"object"==typeof a?(a.constructor!==Object.prototype.constructor&&(o=a.constructor),t=a):"function"==typeof a&&(o=a),function xt(g,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(u&&u.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),u&&ft(g,u)}(o,u),u&&(o.super_=u),t)t.hasOwnProperty(s)&&(o.prototype[s]=t[s]);return o},kt.mergeOptions=ui,kt.bind=Yi,kt.registerPlugin=ha.registerPlugin,kt.deregisterPlugin=ha.deregisterPlugin,kt.plugin=function(g,u){return Fr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ha.registerPlugin(g,u)},kt.getPlugins=ha.getPlugins,kt.getPlugin=ha.getPlugin,kt.getPluginVersion=ha.getPluginVersion,kt.addLanguage=function(g,u){var a;return g=(""+g).toLowerCase(),(kt.options.languages=ui(kt.options.languages,((a={})[g]=u,a)))[g]},kt.log=Fr,kt.createLogger=Ql,kt.createTimeRange=kt.createTimeRanges=Jo,kt.formatTime=sc,kt.setFormatTime=function Af(g){wo=g},kt.resetFormatTime=function ic(){wo=Df},kt.parseUrl=Fd,kt.isCrossOrigin=Gu,kt.EventTarget=fi,kt.on=Ei,kt.one=Il,kt.off=Js,kt.trigger=wc,kt.xhr=ie(),kt.TextTrack=$u,kt.AudioTrack=go,kt.VideoTrack=Ph,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(g){kt[g]=function(){return Fr.warn("videojs."+g+"() is deprecated; use videojs.dom."+g+"() instead"),dn[g].apply(null,arguments)}}),kt.computedStyle=Aa,kt.dom=dn,kt.url=nd,kt.defineLazyProperty=Rl,kt.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var xa=Ee,Gh=function(u,a,o){return u&&o&&o.responseURL&&a!==o.responseURL?o.responseURL:a},Au=function(u){return kt.log.debug?kt.log.debug.bind(kt,"VHS:",u+" >"):function(){}},Nl=1/30,Is=.1,Xd=function(u,a){var t,o=[];if(u&&u.length)for(t=0;t<u.length;t++)a(u.start(t),u.end(t))&&o.push([u.start(t),u.end(t)]);return kt.createTimeRanges(o)},Ll=function(u,a){return Xd(u,function(o,t){return o-Is<=a&&t+Is>=a})},Jd=function(u,a){return Xd(u,function(o){return o-Nl>=a})},Hp=function(u){var a=[];if(!u||!u.length)return"";for(var o=0;o<u.length;o++)a.push(u.start(o)+" => "+u.end(o));return a.join(", ")},hc=function(u){for(var a=[],o=0;o<u.length;o++)a.push({start:u.start(o),end:u.end(o)});return a},pd=function(u){if(u&&u.length&&u.end)return u.end(u.length-1)},gd=function(u,a){var o=0;if(!u||!u.length)return o;for(var t=0;t<u.length;t++){var s=u.start(t),h=u.end(t);if(!(a>h)){if(a>s&&a<=h){o+=h-a;continue}o+=h-s}}return o},eh=kt.createTimeRange,Wh=function(u,a){if(!a.preload)return a.duration;var o=0;return(a.parts||[]).forEach(function(t){o+=t.duration}),(a.preloadHints||[]).forEach(function(t){"PART"===t.type&&(o+=u.partTargetDuration)}),o},zh=function(u){return(u.segments||[]).reduce(function(a,o,t){return o.parts?o.parts.forEach(function(s,h){a.push({duration:s.duration,segmentIndex:t,partIndex:h,part:s,segment:o})}):a.push({duration:o.duration,segmentIndex:t,partIndex:null,segment:o,part:null}),a},[])},sm=function(u){var a=u.segments&&u.segments.length&&u.segments[u.segments.length-1];return a&&a.parts||[]},Gp=function(u){var a=u.preloadSegment;if(a){var o=a.parts;return(a.preloadHints||[]).reduce(function(h,v){return h+("PART"===v.type?1:0)},0)+(o&&o.length?o.length:0)}},_v=function(u,a){if(a.endList)return 0;if(u&&u.suggestedPresentationDelay)return u.suggestedPresentationDelay;var o=sm(a).length>0;return o&&a.serverControl&&a.serverControl.partHoldBack?a.serverControl.partHoldBack:o&&a.partTargetDuration?3*a.partTargetDuration:a.serverControl&&a.serverControl.holdBack?a.serverControl.holdBack:a.targetDuration?3*a.targetDuration:0},$p=function(u,a,o){if(void 0===a&&(a=u.mediaSequence+u.segments.length),a<u.mediaSequence)return 0;var t=function(u,a){var o=0,t=a-u.mediaSequence,s=u.segments[t];if(s){if(void 0!==s.start)return{result:s.start,precise:!0};if(void 0!==s.end)return{result:s.end-s.duration,precise:!0}}for(;t--;){if(void 0!==(s=u.segments[t]).end)return{result:o+s.end,precise:!0};if(o+=Wh(u,s),void 0!==s.start)return{result:o+s.start,precise:!0}}return{result:o,precise:!1}}(u,a);if(t.precise)return t.result;var s=function(u,a){for(var t,o=0,s=a-u.mediaSequence;s<u.segments.length;s++){if(void 0!==(t=u.segments[s]).start)return{result:t.start-o,precise:!0};if(o+=Wh(u,t),void 0!==t.end)return{result:t.end-o,precise:!0}}return{result:-1,precise:!1}}(u,a);return s.precise?s.result:t.result+o},Ya=function(u,a,o){if(!u)return 0;if("number"!=typeof o&&(o=0),void 0===a){if(u.totalDuration)return u.totalDuration;if(!u.endList)return Y()[1/0]}return $p(u,a,o)},Fl=function(u){var a=u.defaultDuration,o=u.durationList,t=u.startIndex,s=u.endIndex,h=0;if(t>s){var v=[s,t];t=v[0],s=v[1]}if(t<0){for(var S=t;S<Math.min(0,s);S++)h+=a;t=0}for(var x=t;x<s;x++)h+=o[x].duration;return h},am=function(u,a,o,t){if(!u||!u.segments)return null;if(u.endList)return Ya(u);if(null===a)return null;var s=$p(u,u.mediaSequence+u.segments.length,a=a||0);return o&&(s-=t="number"==typeof t?t:_v(null,u)),Math.max(0,s)},Ev=function(u){return u.excludeUntil&&u.excludeUntil>Date.now()},um=function(u){return u.excludeUntil&&u.excludeUntil===1/0},jc=function(u){var a=Ev(u);return!u.disabled&&!a},lm=function(u,a){return a.attributes&&a.attributes[u]},Wp=function(u,a){if(1===u.playlists.length)return!0;var o=a.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===u.playlists.filter(function(t){return!!jc(t)&&(t.attributes.BANDWIDTH||0)<o}).length},qh=function(u,a){return!(!u&&!a||!u&&a||u&&!a||!(u===a||u.id&&a.id&&u.id===a.id||u.resolvedUri&&a.resolvedUri&&u.resolvedUri===a.resolvedUri||u.uri&&a.uri&&u.uri===a.uri))},Kh=function(u,a){var o=u&&u.mediaGroups&&u.mediaGroups.AUDIO||{},t=!1;for(var s in o){for(var h in o[s])if(t=a(o[s][h]))break;if(t)break}return!!t},md=function(u){if(!u||!u.playlists||!u.playlists.length)return Kh(u,function(h){return h.playlists&&h.playlists.length||h.uri});for(var o=function(v){var S=u.playlists[v],x=S.attributes&&S.attributes.CODECS;return x&&x.split(",").every(function(ee){return Mn(ee)})||Kh(u,function(ee){return qh(S,ee)})?"continue":{v:!1}},t=0;t<u.playlists.length;t++){var s=o(t);if("continue"!==s&&"object"==typeof s)return s.v}return!0},no={liveEdgeDelay:_v,duration:Ya,seekable:function(u,a,o){var s=a||0,h=am(u,a,!0,o);return null===h?eh():eh(s,h)},getMediaInfoForTime:function(u){for(var a=u.playlist,o=u.currentTime,t=u.startingSegmentIndex,s=u.startingPartIndex,h=u.startTime,v=u.experimentalExactManifestTimings,S=o-h,x=zh(a),R=0,ee=0;ee<x.length;ee++){var q=x[ee];if(t===q.segmentIndex&&("number"!=typeof s||"number"!=typeof q.partIndex||s===q.partIndex)){R=ee;break}}if(S<0){if(R>0)for(var _e=R-1;_e>=0;_e--){var Re=x[_e];if(S+=Re.duration,v){if(S<0)continue}else if(S+Nl<=0)continue;return{partIndex:Re.partIndex,segmentIndex:Re.segmentIndex,startTime:h-Fl({defaultDuration:a.targetDuration,durationList:x,startIndex:R,endIndex:_e})}}return{partIndex:x[0]&&x[0].partIndex||null,segmentIndex:x[0]&&x[0].segmentIndex||0,startTime:o}}if(R<0){for(var Le=R;Le<0;Le++)if((S-=a.targetDuration)<0)return{partIndex:x[0]&&x[0].partIndex||null,segmentIndex:x[0]&&x[0].segmentIndex||0,startTime:o};R=0}for(var Ve=R;Ve<x.length;Ve++){var zt=x[Ve];if(S-=zt.duration,v){if(S>0)continue}else if(S-Nl>=0)continue;return{partIndex:zt.partIndex,segmentIndex:zt.segmentIndex,startTime:h+Fl({defaultDuration:a.targetDuration,durationList:x,startIndex:R,endIndex:Ve})}}return{segmentIndex:x[x.length-1].segmentIndex,partIndex:x[x.length-1].partIndex,startTime:o}},isEnabled:jc,isDisabled:function(u){return u.disabled},isBlacklisted:Ev,isIncompatible:um,playlistEnd:am,isAes:function(u){for(var a=0;a<u.segments.length;a++)if(u.segments[a].key)return!0;return!1},hasAttribute:lm,estimateSegmentRequestTime:function(u,a,o,t){return void 0===t&&(t=0),lm("BANDWIDTH",o)?(u*o.attributes.BANDWIDTH-8*t)/a:NaN},isLowestEnabledRendition:Wp,isAudioOnly:md,playlistMatch:qh,segmentDurationWithParts:Wh},rh=kt.log,Zh=function(u,a){return u+"-"+a},ku=function(u,a){!u.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(o){if(u.mediaGroups[o])for(var t in u.mediaGroups[o])for(var s in u.mediaGroups[o][t])a(u.mediaGroups[o][t][s],o,t,s)})},La=function(u){var a=u.playlist,o=u.uri;a.id=u.id,a.playlistErrors_=0,o&&(a.uri=o),a.attributes=a.attributes||{}},zp=function(u,a){u.uri=a;for(var o=0;o<u.playlists.length;o++)u.playlists[o].uri||(u.playlists[o].uri="placeholder-uri-"+o);var s=md(u);ku(u,function(h,v,S,x){var R="placeholder-uri-"+v+"-"+S+"-"+x;if(!h.playlists||!h.playlists.length){if(s&&"AUDIO"===v&&!h.uri)for(var ee=0;ee<u.playlists.length;ee++){var q=u.playlists[ee];if(q.attributes&&q.attributes.AUDIO&&q.attributes.AUDIO===S)return}h.playlists=[Me({},h)]}h.playlists.forEach(function(_e,Re){var Le=Zh(Re,R);_e.uri?_e.resolvedUri=_e.resolvedUri||xa(u.uri,_e.uri):(_e.uri=0===Re?R:Le,_e.resolvedUri=_e.uri),_e.id=_e.id||Le,_e.attributes=_e.attributes||{},u.playlists[_e.id]=_e,u.playlists[_e.uri]=_e})}),function(u){for(var a=u.playlists.length;a--;){var o=u.playlists[a];La({playlist:o,id:Zh(a,o.uri)}),o.resolvedUri=xa(u.uri,o.uri),u.playlists[o.id]=o,u.playlists[o.uri]=o,o.attributes.BANDWIDTH||rh.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(u),function(u){ku(u,function(a){a.uri&&(a.resolvedUri=xa(u.uri,a.uri))})}(u)},fc=kt.mergeOptions,Bc=function(u,a){if(!u)return a;var o=fc(u,a);if(u.preloadHints&&!a.preloadHints&&delete o.preloadHints,u.parts&&!a.parts)delete o.parts;else if(u.parts&&a.parts)for(var t=0;t<a.parts.length;t++)u.parts&&u.parts[t]&&(o.parts[t]=fc(u.parts[t],a.parts[t]));return!u.skipped&&a.skipped&&(o.skipped=!1),u.preload&&!a.preload&&(o.preload=!1),o},Vc=function(u,a){!u.resolvedUri&&u.uri&&(u.resolvedUri=xa(a,u.uri)),u.key&&!u.key.resolvedUri&&(u.key.resolvedUri=xa(a,u.key.uri)),u.map&&!u.map.resolvedUri&&(u.map.resolvedUri=xa(a,u.map.uri)),u.map&&u.map.key&&!u.map.key.resolvedUri&&(u.map.key.resolvedUri=xa(a,u.map.key.uri)),u.parts&&u.parts.length&&u.parts.forEach(function(o){o.resolvedUri||(o.resolvedUri=xa(a,o.uri))}),u.preloadHints&&u.preloadHints.length&&u.preloadHints.forEach(function(o){o.resolvedUri||(o.resolvedUri=xa(a,o.uri))})},wv=function(u){var a=u.segments||[],o=u.preloadSegment;if(o&&o.parts&&o.parts.length){if(o.preloadHints)for(var t=0;t<o.preloadHints.length;t++)if("MAP"===o.preloadHints[t].type)return a;o.duration=u.targetDuration,o.preload=!0,a.push(o)}return a},Hc=function(u,a){return u===a||u.segments&&a.segments&&u.segments.length===a.segments.length&&u.endList===a.endList&&u.mediaSequence===a.mediaSequence&&u.preloadSegment===a.preloadSegment},Gc=function(u,a,o){void 0===o&&(o=Hc);var t=fc(u,{}),s=t.playlists[a.id];if(!s||o(s,a))return null;a.segments=wv(a);var h=fc(s,a);if(h.preloadSegment&&!a.preloadSegment&&delete h.preloadSegment,s.segments){if(a.skip){a.segments=a.segments||[];for(var v=0;v<a.skip.skippedSegments;v++)a.segments.unshift({skipped:!0})}h.segments=function(u,a,o){var t=u.slice(),s=a.slice();o=o||0;for(var v,h=[],S=0;S<s.length;S++){var x=t[S+o],R=s[S];x?(v=x.map||v,h.push(Bc(x,R))):(v&&!R.map&&(R.map=v),h.push(R))}return h}(s.segments,a.segments,a.mediaSequence-s.mediaSequence)}h.segments.forEach(function(x){Vc(x,h.resolvedUri)});for(var S=0;S<t.playlists.length;S++)t.playlists[S].id===a.id&&(t.playlists[S]=h);return t.playlists[a.id]=h,t.playlists[a.uri]=h,ku(u,function(x,R,ee,q){if(x.playlists)for(var _e=0;_e<x.playlists.length;_e++)a.id===x.playlists[_e].id&&(x.playlists[_e]=h)}),t},Kf=function(u,a){var o=u.segments||[],t=o[o.length-1],s=t&&t.parts&&t.parts[t.parts.length-1],h=s&&s.duration||t&&t.duration;return a&&h?1e3*h:500*(u.partTargetDuration||u.targetDuration||10)},ih=function(g){function u(o,t,s){var h;if(void 0===s&&(s={}),h=g.call(this)||this,!o)throw new Error("A non-empty playlist URL or object is required");h.logger_=Au("PlaylistLoader");var S=s.withCredentials,x=void 0!==S&&S,R=s.handleManifestRedirects,ee=void 0!==R&&R;h.src=o,h.vhs_=t,h.withCredentials=x,h.handleManifestRedirects=ee;var q=t.options_;return h.customTagParsers=q&&q.customTagParsers||[],h.customTagMappers=q&&q.customTagMappers||[],h.experimentalLLHLS=q&&q.experimentalLLHLS||!1,kt.browser.IE_VERSION&&(h.experimentalLLHLS=!1),h.state="HAVE_NOTHING",h.handleMediaupdatetimeout_=h.handleMediaupdatetimeout_.bind(Je(h)),h.on("mediaupdatetimeout",h.handleMediaupdatetimeout_),h}it(u,g);var a=u.prototype;return a.handleMediaupdatetimeout_=function(){var t=this;if("HAVE_METADATA"===this.state){var s=this.media(),h=xa(this.master.uri,s.uri);this.experimentalLLHLS&&(h=function(u,a){if(a.endList||!a.serverControl)return u;var o={};if(a.serverControl.canBlockReload){var t=a.preloadSegment,s=a.mediaSequence+a.segments.length;if(t){var h=t.parts||[],v=Gp(a)-1;v>-1&&v!==h.length-1&&(o._HLS_part=v),(v>-1||h.length)&&s--}o._HLS_msn=s}if(a.serverControl&&a.serverControl.canSkipUntil&&(o._HLS_skip=a.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(o).length){var S=new(Y().URL)(u);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(x){!o.hasOwnProperty(x)||S.searchParams.set(x,o[x])}),u=S.toString()}return u}(h,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:h,withCredentials:this.withCredentials},function(v,S){if(t.request){if(v)return t.playlistRequestError(t.request,t.media(),"HAVE_METADATA");t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}})}},a.playlistRequestError=function(t,s,h){var v=s.uri,S=s.id;this.request=null,h&&(this.state=h),this.error={playlist:this.master.playlists[S],status:t.status,message:"HLS playlist request error at URL: "+v+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},a.parseManifest_=function(t){var s=this,h=t.url;return function(u){var a=u.onwarn,o=u.oninfo,t=u.manifestString,s=u.customTagParsers,h=void 0===s?[]:s,v=u.customTagMappers,S=void 0===v?[]:v,x=u.experimentalLLHLS,R=new Ln;a&&R.on("warn",a),o&&R.on("info",o),h.forEach(function(Le){return R.addParser(Le)}),S.forEach(function(Le){return R.addTagMapper(Le)}),R.push(t),R.end();var ee=R.manifest;if(x||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(Le){ee.hasOwnProperty(Le)&&delete ee[Le]}),ee.segments&&ee.segments.forEach(function(Le){["parts","preloadHints"].forEach(function(Ve){Le.hasOwnProperty(Ve)&&delete Le[Ve]})})),!ee.targetDuration){var q=10;ee.segments&&ee.segments.length&&(q=ee.segments.reduce(function(Le,Ve){return Math.max(Le,Ve.duration)},0)),a&&a("manifest has no targetDuration defaulting to "+q),ee.targetDuration=q}var _e=sm(ee);if(_e.length&&!ee.partTargetDuration){var Re=_e.reduce(function(Le,Ve){return Math.max(Le,Ve.duration)},0);a&&(a("manifest has no partTargetDuration defaulting to "+Re),rh.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),ee.partTargetDuration=Re}return ee}({onwarn:function(x){return s.logger_("m3u8-parser warn for "+h+": "+x.message)},oninfo:function(x){return s.logger_("m3u8-parser info for "+h+": "+x.message)},manifestString:t.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},a.haveMetadata=function(t){var s=t.playlistString,h=t.playlistObject,v=t.url,S=t.id;this.request=null,this.state="HAVE_METADATA";var x=h||this.parseManifest_({url:v,manifestString:s});x.lastRequest=Date.now(),La({playlist:x,uri:v,id:S});var R=Gc(this.master,x);this.targetDuration=x.partTargetDuration||x.targetDuration,this.pendingMedia_=null,R?(this.master=R,this.media_=this.master.playlists[S]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Kf(this.media(),!!R)),this.trigger("loadedplaylist")},a.dispose=function(){this.trigger("dispose"),this.stopRequest(),Y().clearTimeout(this.mediaUpdateTimeout),Y().clearTimeout(this.finalRenditionTimeout),this.off()},a.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},a.media=function(t,s){var h=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(Y().clearTimeout(this.finalRenditionTimeout),s){var v=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Y().setTimeout(this.media.bind(this,t,!1),v)}else{var S=this.state,x=!this.media_||t.id!==this.media_.id,R=this.master.playlists[t.id];if(R&&R.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(x&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(Kf(t,!0)),x){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(ee,q){if(h.request){if(t.lastRequest=Date.now(),t.resolvedUri=Gh(h.handleManifestRedirects,t.resolvedUri,q),ee)return h.playlistRequestError(h.request,t,S);h.haveMetadata({playlistString:q.responseText,url:t.uri,id:t.id}),h.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")}})}}},a.pause=function(){this.mediaUpdateTimeout&&(Y().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},a.load=function(t){var s=this;this.mediaUpdateTimeout&&(Y().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var h=this.media();if(t){var v=h?(h.partTargetDuration||h.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Y().setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},v)}else this.started?this.trigger(h&&!h.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},a.updateMediaUpdateTimeout_=function(t){var s=this;this.mediaUpdateTimeout&&(Y().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Y().setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(t)},t))},a.start=function(){var t=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Y().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){t.setupInitialPlaylist(t.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,h){if(t.request){if(t.request=null,s)return t.error={status:h.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:h.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=Gh(t.handleManifestRedirects,t.src,h);var v=t.parseManifest_({manifestString:h.responseText,url:t.src});t.setupInitialPlaylist(v)}})},a.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},a.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,zp(this.master,this.srcUri()),t.playlists.forEach(function(h){h.segments=wv(h),h.segments.forEach(function(v){Vc(v,h.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var s=this.srcUri()||Y().location.href;this.master=function(u,a){var o=Zh(0,a),t={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Y().location.href,resolvedUri:Y().location.href,playlists:[{uri:a,id:o,resolvedUri:a,attributes:{}}]};return t.playlists[o]=t.playlists[0],t.playlists[a]=t.playlists[0],t}(0,s),this.haveMetadata({playlistObject:t,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},u}(kt.EventTarget),Cv=kt.xhr,L_=kt.mergeOptions,hm=function(u,a,o,t){var s="arraybuffer"===u.responseType?u.response:u.responseText;!a&&s&&(u.responseTime=Date.now(),u.roundTripTime=u.responseTime-u.requestTime,u.bytesReceived=s.byteLength||s.length,u.bandwidth||(u.bandwidth=Math.floor(u.bytesReceived/u.roundTripTime*8*1e3))),o.headers&&(u.responseHeaders=o.headers),a&&"ETIMEDOUT"===a.code&&(u.timedout=!0),!a&&!u.aborted&&200!==o.statusCode&&206!==o.statusCode&&0!==o.statusCode&&(a=new Error("XHR Failed with a response of: "+(u&&(s||u.responseText)))),t(a,u)},$y=function(){var u=function a(o,t){o=L_({timeout:45e3},o);var s=a.beforeRequest||kt.Vhs.xhr.beforeRequest;if(s&&"function"==typeof s){var h=s(o);h&&(o=h)}var S=(!0===kt.Vhs.xhr.original?Cv:kt.Vhs.xhr)(o,function(R,ee){return hm(S,R,ee,t)}),x=S.abort;return S.abort=function(){return S.aborted=!0,x.apply(S,arguments)},S.uri=o.uri,S.requestTime=Date.now(),S};return u.original=!0,u},Yf=function(u){var a={};return u.byterange&&(a.Range=function(u){return"bytes="+u.offset+"-"+("bigint"==typeof u.offset||"bigint"==typeof u.length?Y().BigInt(u.offset)+Y().BigInt(u.length)-Y().BigInt(1):u.offset+u.length-1)}(u.byterange)),a},Wy=function(u,a){return u.start(a)+"-"+u.end(a)},fm=function(u,a){var o=u.toString(16);return"00".substring(0,2-o.length)+o+(a%2?" ":"")},zy=function(u){return u>=32&&u<126?String.fromCharCode(u):"."},sh=function(u){var a={};return Object.keys(u).forEach(function(o){var t=u[o];a[o]=yi(t)?{bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:t}),a},oh=function(u){var a=u.byterange||{length:1/0,offset:0};return[a.length,a.offset,u.resolvedUri].join(",")},xv=function(u){return u.resolvedUri},Iv=function(u){for(var a=Array.prototype.slice.call(u),o=16,t="",v=0;v<a.length/o;v++)t+=a.slice(v*o,v*o+o).map(fm).join("")+" "+a.slice(v*o,v*o+o).map(zy).join("")+"\n";return t},Dv=Object.freeze({__proto__:null,createTransferableMessage:sh,initSegmentId:oh,segmentKeyId:xv,hexDump:Iv,tagDump:function(u){return Iv(u.bytes)},textRanges:function(u){var o,a="";for(o=0;o<u.length;o++)a+=Wy(u,o)+" ";return a}}),Yp=function g(u){var a=u.programTime,o=u.playlist,t=u.retryCount,s=void 0===t?2:t,h=u.seekTo,v=u.pauseAfterSeek,S=void 0===v||v,x=u.tech,R=u.callback;if(!R)throw new Error("seekToProgramTime: callback must be provided");if(void 0===a||!o||!h)return R({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!o.endList&&!x.hasStarted_)return R({message:"player must be playing a live stream to start buffering"});if(!function(u){if(!u.segments||0===u.segments.length)return!1;for(var a=0;a<u.segments.length;a++)if(!u.segments[a].dateTimeObject)return!1;return!0}(o))return R({message:"programDateTime tags must be provided in the manifest "+o.resolvedUri});var ee=function(u,a){var o;try{o=new Date(u)}catch(ee){return null}if(!a||!a.segments||0===a.segments.length)return null;var t=a.segments[0];if(o<t.dateTimeObject)return null;for(var s=0;s<a.segments.length-1&&(t=a.segments[s],!(o<a.segments[s+1].dateTimeObject));s++);var v=a.segments[a.segments.length-1],S=v.dateTimeObject,x=v.videoTimingInfo?function(u){return u.transmuxedPresentationEnd-u.transmuxedPresentationStart-u.transmuxerPrependedSeconds}(v.videoTimingInfo):v.duration+.25*v.duration;return o>new Date(S.getTime()+1e3*x)?null:(o>S&&(t=v),{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:no.duration(a,a.mediaSequence+a.segments.indexOf(t)),type:t.videoTimingInfo?"accurate":"estimate"})}(a,o);if(!ee)return R({message:a+" was not found in the stream"});var q=ee.segment,_e=function(u,a){var o,t;try{o=new Date(u),t=new Date(a)}catch(v){}var s=o.getTime();return(t.getTime()-s)/1e3}(q.dateTimeObject,a);if("estimate"===ee.type)return 0===s?R({message:a+" is not buffered yet. Try again"}):(h(ee.estimatedStart+_e),void x.one("seeked",function(){g({programTime:a,playlist:o,retryCount:s-1,seekTo:h,pauseAfterSeek:S,tech:x,callback:R})}));var Re=q.start+_e;x.one("seeked",function(){return R(null,x.currentTime())}),S&&x.pause(),h(Re)},Qp=function(u,a){if(4===u.readyState)return a()},gm=kt.mergeOptions,Xp=function(u,a){if(!Hc(u,a)||u.sidx&&a.sidx&&(u.sidx.offset!==a.sidx.offset||u.sidx.length!==a.sidx.length))return!1;if(!u.sidx&&a.sidx||u.sidx&&!a.sidx||u.segments&&!a.segments||!u.segments&&a.segments)return!1;if(!u.segments&&!a.segments)return!0;for(var o=0;o<u.segments.length;o++){var t=u.segments[o],s=a.segments[o];if(t.uri!==s.uri)return!1;if(t.byterange||s.byterange){var h=t.byterange,v=s.byterange;if(h&&!v||!h&&v||h.offset!==v.offset||h.length!==v.length)return!1}}return!0},Xh=function(u,a){return(Boolean(!u.map&&!a.map)||Boolean(u.map&&a.map&&u.map.byterange.offset===a.map.byterange.offset&&u.map.byterange.length===a.map.byterange.length))&&u.uri===a.uri&&u.byterange.offset===a.byterange.offset&&u.byterange.length===a.byterange.length},ah=function(u,a){var o={};for(var t in u){var h=u[t].sidx;if(h){var v=ws(h);if(!a[v])break;Xh(a[v].sidxInfo,h)&&(o[v]=a[v])}}return o},Ul=function(g){function u(o,t,s,h){var v;void 0===s&&(s={}),(v=g.call(this)||this).masterPlaylistLoader_=h||Je(v),h||(v.isMaster_=!0);var x=s.withCredentials,R=void 0!==x&&x,ee=s.handleManifestRedirects,q=void 0!==ee&&ee;if(v.vhs_=t,v.withCredentials=R,v.handleManifestRedirects=q,!o)throw new Error("A non-empty playlist URL or object is required");return v.on("minimumUpdatePeriod",function(){v.refreshXml_()}),v.on("mediaupdatetimeout",function(){v.refreshMedia_(v.media().id)}),v.state="HAVE_NOTHING",v.loadedPlaylists_={},v.logger_=Au("DashPlaylistLoader"),v.isMaster_?(v.masterPlaylistLoader_.srcUrl=o,v.masterPlaylistLoader_.sidxMapping_={}):v.childPlaylist_=o,v}it(u,g);var a=u.prototype;return a.requestErrored_=function(t,s,h){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2}:t,h&&(this.state=h),this.trigger("error"),!0):void 0)},a.addSidxSegments_=function(t,s,h){var v=this,S=t.sidx&&ws(t.sidx);if(t.sidx&&S&&!this.masterPlaylistLoader_.sidxMapping_[S]){var x=Gh(this.handleManifestRedirects,t.sidx.resolvedUri),R=function(q,_e){if(!v.requestErrored_(q,_e,s)){var Le,Re=v.masterPlaylistLoader_.sidxMapping_;try{Le=$a()(xn(_e.response).subarray(8))}catch(Ve){return void v.requestErrored_(Ve,_e,s)}return Re[S]={sidxInfo:t.sidx,sidx:Le},Gi(t,Le,t.sidx.resolvedUri),h(!0)}};this.request=function(u,a,o){var s,t=[],h=!1,v=function(q,_e,Re,Le){return _e.abort(),h=!0,o(q,_e,Re,Le)},S=function(q,_e){if(!h){if(q)return v(q,_e,"",t);var Re=_e.responseText.substring(t&&t.byteLength||0,_e.responseText.length);if(t=function(){for(var u=arguments.length,a=new Array(u),o=0;o<u;o++)a[o]=arguments[o];if((a=a.filter(function(v){return v&&(v.byteLength||v.length)&&"string"!=typeof v})).length<=1)return xn(a[0]);var t=a.reduce(function(v,S,x){return v+(S.byteLength||S.length)},0),s=new Uint8Array(t),h=0;return a.forEach(function(v){v=xn(v),s.set(v,h),h+=v.byteLength}),s}(t,ge(Re,!0)),s=s||Li(t),t.length<10||s&&t.length<s+2)return Qp(_e,function(){return v(q,_e,"",t)});var Le=Gn(t);return"ts"===Le&&t.length<188||!Le&&t.length<376?Qp(_e,function(){return v(q,_e,"",t)}):v(null,_e,Le,t)}},R=a({uri:u,beforeSend:function(q){q.overrideMimeType("text/plain; charset=x-user-defined"),q.addEventListener("progress",function(_e){return hm(q,null,{statusCode:q.status},S)})}},function(ee,q){return hm(R,ee,q,S)});return R}(x,this.vhs_.xhr,function(ee,q,_e,Re){if(ee)return R(ee,q);if(!_e||"mp4"!==_e)return R({status:q.status,message:"Unsupported "+(_e||"unknown")+" container type for sidx segment at URL: "+x,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},q);var Le=t.sidx.byterange,Ve=Le.offset,zt=Le.length;if(Re.length>=zt+Ve)return R(ee,{response:Re.subarray(Ve,Ve+zt),status:q.status,uri:q.uri});v.request=v.vhs_.xhr({uri:x,responseType:"arraybuffer",headers:Yf({byterange:t.sidx.byterange})},R)})}else this.mediaRequest_=Y().setTimeout(function(){return h(!1)},0)},a.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Y().clearTimeout(this.minimumUpdatePeriodTimeout_),Y().clearTimeout(this.mediaRequest_),Y().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},a.hasPendingRequest=function(){return this.request||this.mediaRequest_},a.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},a.media=function(t){var s=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var h=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var v=!this.media_||t.id!==this.media_.id;if(v&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(v&&(this.trigger("mediachanging"),this.trigger("mediachange")));!v||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,h,function(S){s.haveMetadata({startingState:h,playlist:t})}))},a.haveMetadata=function(t){var s=t.startingState,h=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[h.id]=h,this.mediaRequest_=null,this.refreshMedia_(h.id),this.trigger("HAVE_MASTER"===s?"loadedmetadata":"mediachange")},a.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Y().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Y().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},a.load=function(t){var s=this;Y().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var h=this.media();if(t){var v=h?h.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Y().setTimeout(function(){return s.load()},v)}else this.started?h&&!h.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},a.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_(function(s,h){t.haveMaster_(),!t.hasPendingRequest()&&!t.media_&&t.media(t.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=Y().setTimeout(function(){return t.haveMaster_()},0)},a.requestMaster_=function(t){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(h,v){if(!s.requestErrored_(h,v)){var S=v.responseText!==s.masterPlaylistLoader_.masterXml_;return s.masterPlaylistLoader_.masterXml_=v.responseText,s.masterLoaded_=v.responseHeaders&&v.responseHeaders.date?Date.parse(v.responseHeaders.date):Date.now(),s.masterPlaylistLoader_.srcUrl=Gh(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,v),S?(s.handleMaster_(),void s.syncClientServerClock_(function(){return t(v,S)})):t(v,S)}"HAVE_NOTHING"===s.state&&(s.started=!1)})},a.syncClientServerClock_=function(t){var s=this,h=function(u){return function(u){var a=Sn(u,"UTCTiming")[0];if(!a)return null;var o=ki(a);switch(o.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":o.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":o.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":o.method="DIRECT",o.value=Date.parse(o.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return o}(ma(u))}(this.masterPlaylistLoader_.masterXml_);return null===h?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===h.method?(this.masterPlaylistLoader_.clientOffset_=h.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:xa(this.masterPlaylistLoader_.srcUrl,h.value),method:h.method,withCredentials:this.withCredentials},function(v,S){if(s.request){if(v)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),t();var x;x="HEAD"===h.method?S.responseHeaders&&S.responseHeaders.date?Date.parse(S.responseHeaders.date):s.masterLoaded_:Date.parse(S.responseText),s.masterPlaylistLoader_.clientOffset_=x-Date.now(),t()}}))},a.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},a.handleMaster_=function(){this.mediaRequest_=null;var t=this.masterPlaylistLoader_.master,s=function(u){var o=u.srcUrl,v=function(u,a){void 0===a&&(a={});var o=function(u,a){void 0===a&&(a={});var o=a,t=o.manifestUri,s=void 0===t?"":t,h=o.NOW,v=void 0===h?Date.now():h,S=o.clientOffset,x=void 0===S?0:S,R=Sn(u,"Period");if(!R.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var ee=Sn(u,"Location"),q=ki(u),_e=ga([s],Sn(u,"BaseURL"));q.type=q.type||"static",q.sourceDuration=q.mediaPresentationDuration||0,q.NOW=v,q.clientOffset=x,ee.length&&(q.locations=ee.map(zr));var Re=[];return R.forEach(function(Le,Ve){var zt=ki(Le),vn=Re[Ve-1];zt.start=function(u){var a=u.attributes,o=u.priorPeriodAttributes;return"number"==typeof a.start?a.start:o&&"number"==typeof o.start&&"number"==typeof o.duration?o.start+o.duration:o||"static"!==u.mpdType?null:0}({attributes:zt,priorPeriodAttributes:vn?vn.attributes:null,mpdType:q.type}),Re.push({node:Le,attributes:zt})}),{locations:q.locations,representationInfo:Hn(Re.map(Ao(q,_e)))}}(ma(u),a),t=function(u){return u.map(nn)}(o.representationInfo);return vo({dashPlaylists:t,locations:o.locations,sidxMapping:a.sidxMapping,previousManifest:a.previousManifest})}(u.masterXml,{manifestUri:o,clientOffset:u.clientOffset,sidxMapping:u.sidxMapping,previousManifest:u.previousManifest});return zp(v,o),v}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(s=function(u,a,o){for(var t=!0,s=gm(u,{duration:a.duration,minimumUpdatePeriod:a.minimumUpdatePeriod,timelineStarts:a.timelineStarts}),h=0;h<a.playlists.length;h++){var v=a.playlists[h];if(v.sidx){var S=ws(v.sidx);o&&o[S]&&o[S].sidx&&Gi(v,o[S].sidx,v.sidx.resolvedUri)}var x=Gc(s,v,Xp);x&&(s=x,t=!1)}return ku(a,function(R,ee,q,_e){if(R.playlists&&R.playlists.length){var Re=R.playlists[0].id,Le=Gc(s,R.playlists[0],Xp);Le&&((s=Le).mediaGroups[ee][q][_e].playlists[0]=s.playlists[Re],t=!1)}}),a.minimumUpdatePeriod!==u.minimumUpdatePeriod&&(t=!1),t?null:s}(t,s,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=s||t;var h=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return h&&h!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=h),(!t||s&&s.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(s)},a.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(Y().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var s=t.master&&t.master.minimumUpdatePeriod;0===s&&(t.media()?s=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof s||s<=0?s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout"):this.createMUPTimeout_(s)},a.createMUPTimeout_=function(t){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=Y().setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(t)},t)},a.refreshXml_=function(){var t=this;this.requestMaster_(function(s,h){!h||(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=function(u,a){var t=ah(u.playlists,a);return ku(u,function(s,h,v,S){s.playlists&&s.playlists.length&&(t=gm(t,ah(s.playlists,a)))}),t}(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.sidxMapping_),t.addSidxSegments_(t.media(),t.state,function(v){t.refreshMedia_(t.media().id)}))})},a.refreshMedia_=function(t){var s=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var h=this.masterPlaylistLoader_.master.playlists,v=!this.media_||this.media_!==h[t];v?this.media_=h[t]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function x(){s.media().endList||(s.mediaUpdateTimeout=Y().setTimeout(function(){s.trigger("mediaupdatetimeout"),x()},Kf(s.media(),Boolean(v))))}(),this.trigger("loadedplaylist")},u}(kt.EventTarget),Vo={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},ch=function(u){return u.on=u.addEventListener,u.off=u.removeEventListener,u},Jp=function(u){return function(){var a=function(u){try{return URL.createObjectURL(new Blob([u],{type:"application/javascript"}))}catch(o){var a=new BlobBuilder;return a.append(u),URL.createObjectURL(a.getBlob())}}(u),o=ch(new Worker(a));o.objURL=a;var t=o.terminate;return o.on=o.addEventListener,o.off=o.removeEventListener,o.terminate=function(){return URL.revokeObjectURL(a),t.call(this)},o}},mm=function(u){return"var browserWorkerPolyFill = "+ch.toString()+";\nbrowserWorkerPolyFill(self);\n"+u},Xf=function(u){return u.toString().replace(/^function.+?{/,"").slice(0,-1)},vm=mm(Xf(function(){var g=function(){this.init=function(){var I={};this.on=function(L,N){I[L]||(I[L]=[]),I[L]=I[L].concat(N)},this.off=function(L,N){var V;return!!I[L]&&(V=I[L].indexOf(N),I[L]=I[L].slice(),I[L].splice(V,1),V>-1)},this.trigger=function(L){var N,V,re,ae;if(N=I[L])if(2===arguments.length)for(re=N.length,V=0;V<re;++V)N[V].call(this,arguments[1]);else{for(ae=[],V=arguments.length,V=1;V<arguments.length;++V)ae.push(arguments[V]);for(re=N.length,V=0;V<re;++V)N[V].apply(this,ae)}},this.dispose=function(){I={}}}};g.prototype.pipe=function(ye){return this.on("data",function(I){ye.push(I)}),this.on("done",function(I){ye.flush(I)}),this.on("partialdone",function(I){ye.partialFlush(I)}),this.on("endedtimeline",function(I){ye.endTimeline(I)}),this.on("reset",function(I){ye.reset(I)}),ye},g.prototype.push=function(ye){this.trigger("data",ye)},g.prototype.flush=function(ye){this.trigger("done",ye)},g.prototype.partialFlush=function(ye){this.trigger("partialdone",ye)},g.prototype.endTimeline=function(ye){this.trigger("endedtimeline",ye)},g.prototype.reset=function(ye){this.trigger("reset",ye)};var h,v,S,x,R,ee,q,_e,Re,Le,Ve,zt,vn,kn,rn,tn,wn,un,ln,In,gn,Er,Wn,Vr,Ki,Ts,Gs,Lo,Rs,Ba,ms,mp,yu,mc,qc,Ju,ye,I,u=g,a=Math.pow(2,32),t={getUint64:function(I){var N,L=new DataView(I.buffer,I.byteOffset,I.byteLength);return L.getBigUint64?(N=L.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(N):N:L.getUint32(0)*a+L.getUint32(4)},MAX_UINT32:a},s=t.MAX_UINT32;(function(){var ye;if(Wn={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(ye in Wn)Wn.hasOwnProperty(ye)&&(Wn[ye]=[ye.charCodeAt(0),ye.charCodeAt(1),ye.charCodeAt(2),ye.charCodeAt(3)]);Vr=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Ts=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Ki=new Uint8Array([0,0,0,1]),Gs=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Lo=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Rs={video:Gs,audio:Lo},mp=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ms=new Uint8Array([0,0,0,0,0,0,0,0]),yu=new Uint8Array([0,0,0,0,0,0,0,0]),mc=yu,qc=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ju=yu,Ba=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),h=function(I){var V,re,L=[],N=0;for(V=1;V<arguments.length;V++)L.push(arguments[V]);for(V=L.length;V--;)N+=L[V].byteLength;for(re=new Uint8Array(N+8),new DataView(re.buffer,re.byteOffset,re.byteLength).setUint32(0,re.byteLength),re.set(I,4),V=0,N=8;V<L.length;V++)re.set(L[V],N),N+=L[V].byteLength;return re},v=function(){return h(Wn.dinf,h(Wn.dref,mp))},S=function(I){return h(Wn.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,I.audioobjecttype<<3|I.samplingfrequencyindex>>>1,I.samplingfrequencyindex<<7|I.channelcount<<3,6,1,2]))},x=function(){return h(Wn.ftyp,Vr,Ki,Vr,Ts)},tn=function(I){return h(Wn.hdlr,Rs[I])},R=function(I){return h(Wn.mdat,I)},rn=function(I){var L=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,I.duration>>>24&255,I.duration>>>16&255,I.duration>>>8&255,255&I.duration,85,196,0,0]);return I.samplerate&&(L[12]=I.samplerate>>>24&255,L[13]=I.samplerate>>>16&255,L[14]=I.samplerate>>>8&255,L[15]=255&I.samplerate),h(Wn.mdhd,L)},kn=function(I){return h(Wn.mdia,rn(I),tn(I.type),q(I))},ee=function(I){return h(Wn.mfhd,new Uint8Array([0,0,0,0,(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I]))},q=function(I){return h(Wn.minf,"video"===I.type?h(Wn.vmhd,Ba):h(Wn.smhd,ms),v(),un(I))},_e=function(I,L){for(var N=[],V=L.length;V--;)N[V]=In(L[V]);return h.apply(null,[Wn.moof,ee(I)].concat(N))},Re=function(I){for(var L=I.length,N=[];L--;)N[L]=zt(I[L]);return h.apply(null,[Wn.moov,Ve(4294967295)].concat(N).concat(Le(I)))},Le=function(I){for(var L=I.length,N=[];L--;)N[L]=gn(I[L]);return h.apply(null,[Wn.mvex].concat(N))},Ve=function(I){var L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h(Wn.mvhd,L)},wn=function(I){var V,re,L=I.samples||[],N=new Uint8Array(4+L.length);for(re=0;re<L.length;re++)N[re+4]=(V=L[re].flags).dependsOn<<4|V.isDependedOn<<2|V.hasRedundancy;return h(Wn.sdtp,N)},un=function(I){return h(Wn.stbl,ln(I),h(Wn.stts,Ju),h(Wn.stsc,mc),h(Wn.stsz,qc),h(Wn.stco,yu))},ln=function(N){return h(Wn.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===N.type?ye(N):I(N))},ye=function(N){var nt,_t,V=N.sps||[],re=N.pps||[],ae=[],Fe=[];for(nt=0;nt<V.length;nt++)ae.push((65280&V[nt].byteLength)>>>8),ae.push(255&V[nt].byteLength),ae=ae.concat(Array.prototype.slice.call(V[nt]));for(nt=0;nt<re.length;nt++)Fe.push((65280&re[nt].byteLength)>>>8),Fe.push(255&re[nt].byteLength),Fe=Fe.concat(Array.prototype.slice.call(re[nt]));if(_t=[Wn.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&N.width)>>8,255&N.width,(65280&N.height)>>8,255&N.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h(Wn.avcC,new Uint8Array([1,N.profileIdc,N.profileCompatibility,N.levelIdc,255].concat([V.length],ae,[re.length],Fe))),h(Wn.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],N.sarRatio){var pt=N.sarRatio[0],Pt=N.sarRatio[1];_t.push(h(Wn.pasp,new Uint8Array([(4278190080&pt)>>24,(16711680&pt)>>16,(65280&pt)>>8,255&pt,(4278190080&Pt)>>24,(16711680&Pt)>>16,(65280&Pt)>>8,255&Pt])))}return h.apply(null,_t)},I=function(N){return h(Wn.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&N.channelcount)>>8,255&N.channelcount,(65280&N.samplesize)>>8,255&N.samplesize,0,0,0,0,(65280&N.samplerate)>>8,255&N.samplerate,0,0]),S(N))},vn=function(I){var L=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&I.id)>>24,(16711680&I.id)>>16,(65280&I.id)>>8,255&I.id,0,0,0,0,(4278190080&I.duration)>>24,(16711680&I.duration)>>16,(65280&I.duration)>>8,255&I.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&I.width)>>8,255&I.width,0,0,(65280&I.height)>>8,255&I.height,0,0]);return h(Wn.tkhd,L)},In=function(I){var L,N,V,re,Fe,nt;return L=h(Wn.tfhd,new Uint8Array([0,0,0,58,(4278190080&I.id)>>24,(16711680&I.id)>>16,(65280&I.id)>>8,255&I.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Fe=Math.floor(I.baseMediaDecodeTime/s),nt=Math.floor(I.baseMediaDecodeTime%s),N=h(Wn.tfdt,new Uint8Array([1,0,0,0,Fe>>>24&255,Fe>>>16&255,Fe>>>8&255,255&Fe,nt>>>24&255,nt>>>16&255,nt>>>8&255,255&nt])),"audio"===I.type?(V=Er(I,92),h(Wn.traf,L,N,V)):(re=wn(I),V=Er(I,re.length+92),h(Wn.traf,L,N,V,re))},zt=function(I){return I.duration=I.duration||4294967295,h(Wn.trak,vn(I),kn(I))},gn=function(I){var L=new Uint8Array([0,0,0,0,(4278190080&I.id)>>24,(16711680&I.id)>>16,(65280&I.id)>>8,255&I.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==I.type&&(L[L.length-1]=0),h(Wn.trex,L)},function(){var ye,I,L;L=function(V,re){var ae=0,Fe=0,nt=0,_t=0;return V.length&&(void 0!==V[0].duration&&(ae=1),void 0!==V[0].size&&(Fe=2),void 0!==V[0].flags&&(nt=4),void 0!==V[0].compositionTimeOffset&&(_t=8)),[0,0,ae|Fe|nt|_t,1,(4278190080&V.length)>>>24,(16711680&V.length)>>>16,(65280&V.length)>>>8,255&V.length,(4278190080&re)>>>24,(16711680&re)>>>16,(65280&re)>>>8,255&re]},I=function(V,re){var ae,Fe,nt,_t,pt,Pt;for(nt=L(_t=V.samples||[],re+=20+16*_t.length),(Fe=new Uint8Array(nt.length+16*_t.length)).set(nt),ae=nt.length,Pt=0;Pt<_t.length;Pt++)Fe[ae++]=(4278190080&(pt=_t[Pt]).duration)>>>24,Fe[ae++]=(16711680&pt.duration)>>>16,Fe[ae++]=(65280&pt.duration)>>>8,Fe[ae++]=255&pt.duration,Fe[ae++]=(4278190080&pt.size)>>>24,Fe[ae++]=(16711680&pt.size)>>>16,Fe[ae++]=(65280&pt.size)>>>8,Fe[ae++]=255&pt.size,Fe[ae++]=pt.flags.isLeading<<2|pt.flags.dependsOn,Fe[ae++]=pt.flags.isDependedOn<<6|pt.flags.hasRedundancy<<4|pt.flags.paddingValue<<1|pt.flags.isNonSyncSample,Fe[ae++]=61440&pt.flags.degradationPriority,Fe[ae++]=15&pt.flags.degradationPriority,Fe[ae++]=(4278190080&pt.compositionTimeOffset)>>>24,Fe[ae++]=(16711680&pt.compositionTimeOffset)>>>16,Fe[ae++]=(65280&pt.compositionTimeOffset)>>>8,Fe[ae++]=255&pt.compositionTimeOffset;return h(Wn.trun,Fe)},ye=function(V,re){var ae,Fe,nt,_t,pt,Pt;for(nt=L(_t=V.samples||[],re+=20+8*_t.length),(ae=new Uint8Array(nt.length+8*_t.length)).set(nt),Fe=nt.length,Pt=0;Pt<_t.length;Pt++)ae[Fe++]=(4278190080&(pt=_t[Pt]).duration)>>>24,ae[Fe++]=(16711680&pt.duration)>>>16,ae[Fe++]=(65280&pt.duration)>>>8,ae[Fe++]=255&pt.duration,ae[Fe++]=(4278190080&pt.size)>>>24,ae[Fe++]=(16711680&pt.size)>>>16,ae[Fe++]=(65280&pt.size)>>>8,ae[Fe++]=255&pt.size;return h(Wn.trun,ae)},Er=function(V,re){return"audio"===V.type?ye(V,re):I(V,re)}}();var Og,Zc,fa,Rg,Xm,zl,Sl,tl,El_mdat=R,El_moof=_e,vp=function(I,L){var N={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return N.dataOffset=L,N.compositionTimeOffset=I.pts-I.dts,N.duration=I.duration,N.size=4*I.length,N.size+=I.byteLength,I.keyFrame&&(N.flags.dependsOn=2,N.flags.isNonSyncSample=0),N},Ru=[33,16,5,32,164,27],Wl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Zi=function(I){for(var L=[];I--;)L.push(0);return L};Zc=function(I){return 9e4*I},fa=function(I,L){return I*L},Rg=function(I){return I/9e4},Xm=function(I,L){return I/L},zl=function(I,L){return Zc(Xm(I,L))},Sl=function(I,L){return fa(Rg(I),L)},tl=function(I,L,N){return Rg(N?I:I-L)};var is_secondsToVideoTs=Zc,is_videoTsToSeconds=Rg,is_audioTsToVideoTs=zl,is_videoTsToAudioTs=Sl,is_metadataTsToSeconds=tl,pf_prefixWithSilence=function(I,L,N,V){var re,pt,Pt,an,ae=0,Fe=0,nt=0,_t=0;if(L.length&&(re=is_audioTsToVideoTs(I.baseMediaDecodeTime,I.samplerate),ae=Math.ceil(9e4/(I.samplerate/1024)),N&&V&&(Fe=re-Math.max(N,V),_t=(nt=Math.floor(Fe/ae))*ae),!(nt<1||_t>45e3))){for((pt=function(){if(!Og){var I={96e3:[Ru,[227,64],Zi(154),[56]],88200:[Ru,[231],Zi(170),[56]],64e3:[Ru,[248,192],Zi(240),[56]],48e3:[Ru,[255,192],Zi(268),[55,148,128],Zi(54),[112]],44100:[Ru,[255,192],Zi(268),[55,163,128],Zi(84),[112]],32e3:[Ru,[255,192],Zi(268),[55,234],Zi(226),[112]],24e3:[Ru,[255,192],Zi(268),[55,255,128],Zi(268),[111,112],Zi(126),[224]],16e3:[Ru,[255,192],Zi(268),[55,255,128],Zi(268),[111,255],Zi(269),[223,108],Zi(195),[1,192]],12e3:[Wl,Zi(268),[3,127,248],Zi(268),[6,255,240],Zi(268),[13,255,224],Zi(268),[27,253,128],Zi(259),[56]],11025:[Wl,Zi(268),[3,127,248],Zi(268),[6,255,240],Zi(268),[13,255,224],Zi(268),[27,255,192],Zi(268),[55,175,128],Zi(108),[112]],8e3:[Wl,Zi(268),[3,121,16],Zi(47),[7]]};Og=function(I){return Object.keys(I).reduce(function(L,N){return L[N]=new Uint8Array(I[N].reduce(function(V,re){return V.concat(re)},[])),L},{})}(I)}return Og}()[I.samplerate])||(pt=L[0].data),Pt=0;Pt<nt;Pt++)L.splice(0,0,{data:pt,dts:(an=L[0]).dts-ae,pts:an.pts-ae});return I.baseMediaDecodeTime-=Math.floor(is_videoTsToAudioTs(_t,I.samplerate)),_t}},nl_clearDtsInfo=function(I){delete I.minSegmentDts,delete I.maxSegmentDts,delete I.minSegmentPts,delete I.maxSegmentPts},nl_calculateTrackBaseMediaDecodeTime=function(I,L){var N,re=I.minSegmentDts;return L||(re-=I.timelineStartInfo.dts),N=I.timelineStartInfo.baseMediaDecodeTime,N+=re,N=Math.max(0,N),"audio"===I.type&&(N*=I.samplerate/9e4,N=Math.floor(N)),N},nl_collectDtsInfo=function(I,L){"number"==typeof L.pts&&(void 0===I.timelineStartInfo.pts&&(I.timelineStartInfo.pts=L.pts),I.minSegmentPts=void 0===I.minSegmentPts?L.pts:Math.min(I.minSegmentPts,L.pts),I.maxSegmentPts=void 0===I.maxSegmentPts?L.pts:Math.max(I.maxSegmentPts,L.pts)),"number"==typeof L.dts&&(void 0===I.timelineStartInfo.dts&&(I.timelineStartInfo.dts=L.dts),I.minSegmentDts=void 0===I.minSegmentDts?L.dts:Math.min(I.minSegmentDts,L.dts),I.maxSegmentDts=void 0===I.maxSegmentDts?L.dts:Math.max(I.maxSegmentDts,L.dts))},Go=function ye(I){I=I||{},ye.prototype.init.call(this),this.parse708captions_="boolean"!=typeof I.parse708captions||I.parse708captions,this.captionPackets_=[],this.ccStreams_=[new As(0,0),new As(0,1),new As(1,0),new As(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ds({captionServices:I.captionServices})),this.reset(),this.ccStreams_.forEach(function(L){L.on("data",this.trigger.bind(this,"data")),L.on("partialdone",this.trigger.bind(this,"partialdone")),L.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Go.prototype=new u).push=function(ye){var I,L,N;if("sei_rbsp"===ye.nalUnitType&&(I=function(I){for(var L=0,N={payloadType:-1,payloadSize:0},V=0,re=0;L<I.byteLength&&128!==I[L];){for(;255===I[L];)V+=255,L++;for(V+=I[L++];255===I[L];)re+=255,L++;if(re+=I[L++],!N.payload&&4===V){if("GA94"===String.fromCharCode(I[L+3],I[L+4],I[L+5],I[L+6])){N.payloadType=V,N.payloadSize=re,N.payload=I.subarray(L,L+re);break}N.payload=void 0}L+=re,V=0,re=0}return N}(ye.escapedRBSP)).payload&&4===I.payloadType&&(L=function(I){return 181!==I.payload[0]||49!=(I.payload[1]<<8|I.payload[2])||"GA94"!==String.fromCharCode(I.payload[3],I.payload[4],I.payload[5],I.payload[6])||3!==I.payload[7]?null:I.payload.subarray(8,I.payload.length-1)}(I))){if(ye.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(ye.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));N=function(I,L){var V,re,ae,Fe,N=[];if(!(64&L[0]))return N;for(re=31&L[0],V=0;V<re;V++)Fe={type:3&L[2+(ae=3*V)],pts:I},4&L[ae+2]&&(Fe.ccData=L[ae+3]<<8|L[ae+4],N.push(Fe));return N}(ye.pts,L),this.captionPackets_=this.captionPackets_.concat(N),this.latestDts_!==ye.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=ye.dts}},Go.prototype.flushCCStreams=function(ye){this.ccStreams_.forEach(function(I){return"flush"===ye?I.flush():I.partialFlush()},this)},Go.prototype.flushStream=function(ye){this.captionPackets_.length?(this.captionPackets_.forEach(function(I,L){I.presortIndex=L}),this.captionPackets_.sort(function(I,L){return I.pts===L.pts?I.presortIndex-L.presortIndex:I.pts-L.pts}),this.captionPackets_.forEach(function(I){I.type<2?this.dispatchCea608Packet(I):this.dispatchCea708Packet(I)},this),this.captionPackets_.length=0,this.flushCCStreams(ye)):this.flushCCStreams(ye)},Go.prototype.flush=function(){return this.flushStream("flush")},Go.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Go.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(ye){ye.reset()})},Go.prototype.dispatchCea608Packet=function(ye){this.setsTextOrXDSActive(ye)?this.activeCea608Channel_[ye.type]=null:this.setsChannel1Active(ye)?this.activeCea608Channel_[ye.type]=0:this.setsChannel2Active(ye)&&(this.activeCea608Channel_[ye.type]=1),null!==this.activeCea608Channel_[ye.type]&&this.ccStreams_[(ye.type<<1)+this.activeCea608Channel_[ye.type]].push(ye)},Go.prototype.setsChannel1Active=function(ye){return 4096==(30720&ye.ccData)},Go.prototype.setsChannel2Active=function(ye){return 6144==(30720&ye.ccData)},Go.prototype.setsTextOrXDSActive=function(ye){return 256==(28928&ye.ccData)||4138==(30974&ye.ccData)||6186==(30974&ye.ccData)},Go.prototype.dispatchCea708Packet=function(ye){this.parse708captions_&&this.cc708Stream_.push(ye)};var Sy={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Tp=function(I){return 32<=I&&I<=127||160<=I&&I<=255},yc=function(I){this.windowNum=I,this.reset()};yc.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},yc.prototype.getText=function(){return this.rows.join("\n")},yc.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},yc.prototype.newLine=function(ye){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(ye),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},yc.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},yc.prototype.addText=function(ye){this.rows[this.rowIdx]+=ye},yc.prototype.backspace=function(){if(!this.isEmpty()){var ye=this.rows[this.rowIdx];this.rows[this.rowIdx]=ye.substr(0,ye.length-1)}};var Ep=function(I,L,N){this.serviceNum=I,this.text="",this.currentWindow=new yc(-1),this.windows=[],this.stream=N,"string"==typeof L&&this.createTextDecoder(L)};Ep.prototype.init=function(ye,I){this.startPts=ye;for(var L=0;L<8;L++)this.windows[L]=new yc(L),"function"==typeof I&&(this.windows[L].beforeRowOverflow=I)},Ep.prototype.setCurrentWindow=function(ye){this.currentWindow=this.windows[ye]},Ep.prototype.createTextDecoder=function(ye){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(ye)}catch(I){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+ye+" encoding. "+I})}};var Ds=function ye(I){I=I||{},ye.prototype.init.call(this);var re,L=this,N=I.captionServices||{},V={};Object.keys(N).forEach(function(ae){re=N[ae],/^SERVICE/.test(ae)&&(V[ae]=re.encoding)}),this.serviceEncodings=V,this.current708Packet=null,this.services={},this.push=function(ae){3===ae.type?(L.new708Packet(),L.add708Bytes(ae)):(null===L.current708Packet&&L.new708Packet(),L.add708Bytes(ae))}};Ds.prototype=new u,Ds.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ds.prototype.add708Bytes=function(ye){var I=ye.ccData,L=I>>>8,N=255&I;this.current708Packet.ptsVals.push(ye.pts),this.current708Packet.data.push(L),this.current708Packet.data.push(N)},Ds.prototype.push708Packet=function(){var ye=this.current708Packet,I=ye.data,L=null,N=null,V=0,re=I[V++];for(ye.seq=re>>6,ye.sizeCode=63&re;V<I.length;V++)N=31&(re=I[V++]),7==(L=re>>5)&&N>0&&(L=re=I[V++]),this.pushServiceBlock(L,V,N),N>0&&(V+=N-1)},Ds.prototype.pushServiceBlock=function(ye,I,L){var N,V=I,re=this.current708Packet.data,ae=this.services[ye];for(ae||(ae=this.initService(ye,V));V<I+L&&V<re.length;V++)Tp(N=re[V])?V=this.handleText(V,ae):24===N?V=this.multiByteCharacter(V,ae):16===N?V=this.extendedCommands(V,ae):128<=N&&N<=135?V=this.setCurrentWindow(V,ae):152<=N&&N<=159?V=this.defineWindow(V,ae):136===N?V=this.clearWindows(V,ae):140===N?V=this.deleteWindows(V,ae):137===N?V=this.displayWindows(V,ae):138===N?V=this.hideWindows(V,ae):139===N?V=this.toggleWindows(V,ae):151===N?V=this.setWindowAttributes(V,ae):144===N?V=this.setPenAttributes(V,ae):145===N?V=this.setPenColor(V,ae):146===N?V=this.setPenLocation(V,ae):143===N?ae=this.reset(V,ae):8===N?ae.currentWindow.backspace():12===N?ae.currentWindow.clearText():13===N?ae.currentWindow.pendingNewLine=!0:14===N?ae.currentWindow.clearText():141===N&&V++},Ds.prototype.extendedCommands=function(ye,I){var N=this.current708Packet.data[++ye];return Tp(N)&&(ye=this.handleText(ye,I,{isExtended:!0})),ye},Ds.prototype.getPts=function(ye){return this.current708Packet.ptsVals[Math.floor(ye/2)]},Ds.prototype.initService=function(ye,I){var N,V,L=this;return(N="SERVICE"+ye)in this.serviceEncodings&&(V=this.serviceEncodings[N]),this.services[ye]=new Ep(ye,V,L),this.services[ye].init(this.getPts(I),function(re){L.flushDisplayed(re,L.services[ye])}),this.services[ye]},Ds.prototype.handleText=function(ye,I,L){var pt,Pt,N=L&&L.isExtended,re=this.current708Packet.data,ae=N?4096:0,Fe=re[ye],_t=I.currentWindow;return I.textDecoder_&&!N?(L&&L.isMultiByte?(Pt=[Fe,re[ye+1]],ye++):Pt=[Fe],pt=I.textDecoder_.decode(new Uint8Array(Pt))):pt=function(I){var L=Sy[I]||I;return 4096&I&&I===L?"":String.fromCharCode(L)}(ae|Fe),_t.pendingNewLine&&!_t.isEmpty()&&_t.newLine(this.getPts(ye)),_t.pendingNewLine=!1,_t.addText(pt),ye},Ds.prototype.multiByteCharacter=function(ye,I){var L=this.current708Packet.data,V=L[ye+2];return Tp(L[ye+1])&&Tp(V)&&(ye=this.handleText(++ye,I,{isMultiByte:!0})),ye},Ds.prototype.setCurrentWindow=function(ye,I){return I.setCurrentWindow(7&this.current708Packet.data[ye]),ye},Ds.prototype.defineWindow=function(ye,I){var L=this.current708Packet.data,N=L[ye];I.setCurrentWindow(7&N);var re=I.currentWindow;return N=L[++ye],re.visible=(32&N)>>5,re.rowLock=(16&N)>>4,re.columnLock=(8&N)>>3,re.priority=7&N,N=L[++ye],re.relativePositioning=(128&N)>>7,re.anchorVertical=127&N,N=L[++ye],re.anchorHorizontal=N,N=L[++ye],re.anchorPoint=(240&N)>>4,re.rowCount=15&N,N=L[++ye],re.columnCount=63&N,N=L[++ye],re.windowStyle=(56&N)>>3,re.penStyle=7&N,re.virtualRowCount=re.rowCount+1,ye},Ds.prototype.setWindowAttributes=function(ye,I){var L=this.current708Packet.data,N=L[ye],V=I.currentWindow.winAttr;return N=L[++ye],V.fillOpacity=(192&N)>>6,V.fillRed=(48&N)>>4,V.fillGreen=(12&N)>>2,V.fillBlue=3&N,N=L[++ye],V.borderType=(192&N)>>6,V.borderRed=(48&N)>>4,V.borderGreen=(12&N)>>2,V.borderBlue=3&N,N=L[++ye],V.borderType+=(128&N)>>5,V.wordWrap=(64&N)>>6,V.printDirection=(48&N)>>4,V.scrollDirection=(12&N)>>2,V.justify=3&N,N=L[++ye],V.effectSpeed=(240&N)>>4,V.effectDirection=(12&N)>>2,V.displayEffect=3&N,ye},Ds.prototype.flushDisplayed=function(ye,I){for(var L=[],N=0;N<8;N++)I.windows[N].visible&&!I.windows[N].isEmpty()&&L.push(I.windows[N].getText());I.endPts=ye,I.text=L.join("\n\n"),this.pushCaption(I),I.startPts=ye},Ds.prototype.pushCaption=function(ye){""!==ye.text&&(this.trigger("data",{startPts:ye.startPts,endPts:ye.endPts,text:ye.text,stream:"cc708_"+ye.serviceNum}),ye.text="",ye.startPts=ye.endPts)},Ds.prototype.displayWindows=function(ye,I){var N=this.current708Packet.data[++ye],V=this.getPts(ye);this.flushDisplayed(V,I);for(var re=0;re<8;re++)N&1<<re&&(I.windows[re].visible=1);return ye},Ds.prototype.hideWindows=function(ye,I){var N=this.current708Packet.data[++ye],V=this.getPts(ye);this.flushDisplayed(V,I);for(var re=0;re<8;re++)N&1<<re&&(I.windows[re].visible=0);return ye},Ds.prototype.toggleWindows=function(ye,I){var N=this.current708Packet.data[++ye],V=this.getPts(ye);this.flushDisplayed(V,I);for(var re=0;re<8;re++)N&1<<re&&(I.windows[re].visible^=1);return ye},Ds.prototype.clearWindows=function(ye,I){var N=this.current708Packet.data[++ye],V=this.getPts(ye);this.flushDisplayed(V,I);for(var re=0;re<8;re++)N&1<<re&&I.windows[re].clearText();return ye},Ds.prototype.deleteWindows=function(ye,I){var N=this.current708Packet.data[++ye],V=this.getPts(ye);this.flushDisplayed(V,I);for(var re=0;re<8;re++)N&1<<re&&I.windows[re].reset();return ye},Ds.prototype.setPenAttributes=function(ye,I){var L=this.current708Packet.data,N=L[ye],V=I.currentWindow.penAttr;return N=L[++ye],V.textTag=(240&N)>>4,V.offset=(12&N)>>2,V.penSize=3&N,N=L[++ye],V.italics=(128&N)>>7,V.underline=(64&N)>>6,V.edgeType=(56&N)>>3,V.fontStyle=7&N,ye},Ds.prototype.setPenColor=function(ye,I){var L=this.current708Packet.data,N=L[ye],V=I.currentWindow.penColor;return N=L[++ye],V.fgOpacity=(192&N)>>6,V.fgRed=(48&N)>>4,V.fgGreen=(12&N)>>2,V.fgBlue=3&N,N=L[++ye],V.bgOpacity=(192&N)>>6,V.bgRed=(48&N)>>4,V.bgGreen=(12&N)>>2,V.bgBlue=3&N,N=L[++ye],V.edgeRed=(48&N)>>4,V.edgeGreen=(12&N)>>2,V.edgeBlue=3&N,ye},Ds.prototype.setPenLocation=function(ye,I){var L=this.current708Packet.data,N=L[ye],V=I.currentWindow.penLoc;return I.currentWindow.pendingNewLine=!0,N=L[++ye],V.row=15&N,N=L[++ye],V.column=63&N,ye},Ds.prototype.reset=function(ye,I){var L=this.getPts(ye);return this.flushDisplayed(L,I),this.initService(I.serviceNum,ye)};var nv={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Lg=function(I){return null===I?"":(I=nv[I]||I,String.fromCharCode(I))},Cy=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Eh=function(){for(var I=[],L=15;L--;)I.push("");return I},As=function ye(I,L){ye.prototype.init.call(this),this.field_=I||0,this.dataChannel_=L||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(N){var V,re,ae,Fe,nt;if((V=32639&N.ccData)!==this.lastControlCode_){if(4096==(61440&V)?this.lastControlCode_=V:V!==this.PADDING_&&(this.lastControlCode_=null),ae=V>>>8,Fe=255&V,V!==this.PADDING_)if(V===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(V===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(N.pts),this.flushDisplayed(N.pts),re=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=re,this.startPts_=N.pts;else if(V===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(N.pts);else if(V===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(N.pts);else if(V===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(N.pts);else if(V===this.CARRIAGE_RETURN_)this.clearFormatting(N.pts),this.flushDisplayed(N.pts),this.shiftRowsUp_(),this.startPts_=N.pts;else if(V===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(V===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(N.pts),this.displayed_=Eh();else if(V===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Eh();else if(V===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(N.pts),this.displayed_=Eh()),this.mode_="paintOn",this.startPts_=N.pts;else if(this.isSpecialCharacter(ae,Fe))nt=Lg((ae=(3&ae)<<8)|Fe),this[this.mode_](N.pts,nt),this.column_++;else if(this.isExtCharacter(ae,Fe))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),nt=Lg((ae=(3&ae)<<8)|Fe),this[this.mode_](N.pts,nt),this.column_++;else if(this.isMidRowCode(ae,Fe))this.clearFormatting(N.pts),this[this.mode_](N.pts," "),this.column_++,14==(14&Fe)&&this.addFormatting(N.pts,["i"]),1==(1&Fe)&&this.addFormatting(N.pts,["u"]);else if(this.isOffsetControlCode(ae,Fe))this.column_+=3&Fe;else if(this.isPAC(ae,Fe)){var _t=Cy.indexOf(7968&V);"rollUp"===this.mode_&&(_t-this.rollUpRows_+1<0&&(_t=this.rollUpRows_-1),this.setRollUp(N.pts,_t)),_t!==this.row_&&(this.clearFormatting(N.pts),this.row_=_t),1&Fe&&-1===this.formatting_.indexOf("u")&&this.addFormatting(N.pts,["u"]),16==(16&V)&&(this.column_=4*((14&V)>>1)),this.isColorPAC(Fe)&&14==(14&Fe)&&this.addFormatting(N.pts,["i"])}else this.isNormalChar(ae)&&(0===Fe&&(Fe=null),nt=Lg(ae),nt+=Lg(Fe),this[this.mode_](N.pts,nt),this.column_+=nt.length)}else this.lastControlCode_=null}};As.prototype=new u,As.prototype.flushDisplayed=function(ye){var I=this.displayed_.map(function(L,N){try{return L.trim()}catch(V){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+N+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");I.length&&this.trigger("data",{startPts:this.startPts_,endPts:ye,text:I,stream:this.name_})},As.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Eh(),this.nonDisplayed_=Eh(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},As.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},As.prototype.isSpecialCharacter=function(ye,I){return ye===this.EXT_&&I>=48&&I<=63},As.prototype.isExtCharacter=function(ye,I){return(ye===this.EXT_+1||ye===this.EXT_+2)&&I>=32&&I<=63},As.prototype.isMidRowCode=function(ye,I){return ye===this.EXT_&&I>=32&&I<=47},As.prototype.isOffsetControlCode=function(ye,I){return ye===this.OFFSET_&&I>=33&&I<=35},As.prototype.isPAC=function(ye,I){return ye>=this.BASE_&&ye<this.BASE_+8&&I>=64&&I<=127},As.prototype.isColorPAC=function(ye){return ye>=64&&ye<=79||ye>=96&&ye<=127},As.prototype.isNormalChar=function(ye){return ye>=32&&ye<=127},As.prototype.setRollUp=function(ye,I){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(ye),this.nonDisplayed_=Eh(),this.displayed_=Eh()),void 0!==I&&I!==this.row_)for(var L=0;L<this.rollUpRows_;L++)this.displayed_[I-L]=this.displayed_[this.row_-L],this.displayed_[this.row_-L]="";void 0===I&&(I=this.row_),this.topRow_=I-this.rollUpRows_+1},As.prototype.addFormatting=function(ye,I){this.formatting_=this.formatting_.concat(I);var L=I.reduce(function(N,V){return N+"<"+V+">"},"");this[this.mode_](ye,L)},As.prototype.clearFormatting=function(ye){if(this.formatting_.length){var I=this.formatting_.reverse().reduce(function(L,N){return L+"</"+N+">"},"");this.formatting_=[],this[this.mode_](ye,I)}},As.prototype.popOn=function(ye,I){var L=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=L+=I},As.prototype.rollUp=function(ye,I){var L=this.displayed_[this.row_];this.displayed_[this.row_]=L+=I},As.prototype.shiftRowsUp_=function(){var ye;for(ye=0;ye<this.topRow_;ye++)this.displayed_[ye]="";for(ye=this.row_+1;ye<15;ye++)this.displayed_[ye]="";for(ye=this.topRow_;ye<this.row_;ye++)this.displayed_[ye]=this.displayed_[ye+1];this.displayed_[this.row_]=""},As.prototype.paintOn=function(ye,I){var L=this.displayed_[this.row_];this.displayed_[this.row_]=L+=I};var mf={CaptionStream:Go,Cea608Stream:As,Cea708Stream:Ds},Va={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},rv=function(I,L){var N=1;for(I>L&&(N=-1);Math.abs(L-I)>4294967296;)I+=8589934592*N;return I},Iy=function ye(I){var L,N;ye.prototype.init.call(this),this.type_=I||"shared",this.push=function(V){"shared"!==this.type_&&V.type!==this.type_||(void 0===N&&(N=V.dts),V.dts=rv(V.dts,N),V.pts=rv(V.pts,N),L=V.dts,this.trigger("data",V))},this.flush=function(){N=L,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){N=void 0,L=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Iy.prototype=new u;var Sh,Dy_TimestampRolloverStream=Iy,Dy_handleRollover=rv,v_=function(I,L,N){var V,re="";for(V=L;V<N;V++)re+="%"+("00"+I[V].toString(16)).slice(-2);return re},iv=function(I,L,N){return decodeURIComponent(v_(I,L,N))},Ay=function(I,L,N){return unescape(v_(I,L,N))},jg=function(I){return I[0]<<21|I[1]<<14|I[2]<<7|I[3]},ky={TXXX:function(I){var L;if(3===I.data[0]){for(L=1;L<I.data.length;L++)if(0===I.data[L]){I.description=iv(I.data,1,L),I.value=iv(I.data,L+1,I.data.length).replace(/\0*$/,"");break}I.data=I.value}},WXXX:function(I){var L;if(3===I.data[0])for(L=1;L<I.data.length;L++)if(0===I.data[L]){I.description=iv(I.data,1,L),I.url=iv(I.data,L+1,I.data.length);break}},PRIV:function(I){var L;for(L=0;L<I.data.length;L++)if(0===I.data[L]){I.owner=Ay(I.data,0,L);break}I.privateData=I.data.subarray(L+1),I.data=I.privateData}};Sh=function(I){var ae,L={descriptor:I&&I.descriptor},N=0,V=[],re=0;if(Sh.prototype.init.call(this),this.dispatchType=Va.METADATA_STREAM_TYPE.toString(16),L.descriptor)for(ae=0;ae<L.descriptor.length;ae++)this.dispatchType+=("00"+L.descriptor[ae].toString(16)).slice(-2);this.push=function(Fe){var nt,_t,pt,Pt,an;if("timed-metadata"===Fe.type){if(Fe.dataAlignmentIndicator&&(re=0,V.length=0),0===V.length&&(Fe.data.length<10||Fe.data[0]!=="I".charCodeAt(0)||Fe.data[1]!=="D".charCodeAt(0)||Fe.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(V.push(Fe),re+=Fe.data.byteLength,1===V.length&&(N=jg(Fe.data.subarray(6,10)),N+=10),!(re<N)){for(nt={data:new Uint8Array(N),frames:[],pts:V[0].pts,dts:V[0].dts},an=0;an<N;)nt.data.set(V[0].data.subarray(0,N-an),an),an+=V[0].data.byteLength,re-=V[0].data.byteLength,V.shift();_t=10,64&nt.data[5]&&(_t+=4,_t+=jg(nt.data.subarray(10,14)),N-=jg(nt.data.subarray(16,20)));do{if((pt=jg(nt.data.subarray(_t+4,_t+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((Pt={id:String.fromCharCode(nt.data[_t],nt.data[_t+1],nt.data[_t+2],nt.data[_t+3]),data:nt.data.subarray(_t+10,_t+pt+10)}).key=Pt.id,ky[Pt.id]&&(ky[Pt.id](Pt),"com.apple.streaming.transportStreamTimestamp"===Pt.owner)){var nr=Pt.data,On=(1&nr[3])<<30|nr[4]<<22|nr[5]<<14|nr[6]<<6|nr[7]>>>2;On*=4,Pt.timeStamp=On+=3&nr[7],void 0===nt.pts&&void 0===nt.dts&&(nt.pts=Pt.timeStamp,nt.dts=Pt.timeStamp),this.trigger("timestamp",Pt)}nt.frames.push(Pt),_t+=10,_t+=pt}while(_t<N);this.trigger("data",nt)}}}},Sh.prototype=new u;var Yc,Pd,Sp,sv=Sh,ov=Dy_TimestampRolloverStream;Yc=function(){var I=new Uint8Array(188),L=0;Yc.prototype.init.call(this),this.push=function(N){var ae,V=0,re=188;for(L?((ae=new Uint8Array(N.byteLength+L)).set(I.subarray(0,L)),ae.set(N,L),L=0):ae=N;re<ae.byteLength;)71!==ae[V]||71!==ae[re]?(V++,re++):(this.trigger("data",ae.subarray(V,re)),V+=188,re+=188);V<ae.byteLength&&(I.set(ae.subarray(V),0),L=ae.byteLength-V)},this.flush=function(){188===L&&71===I[0]&&(this.trigger("data",I),L=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){L=0,this.trigger("reset")}},Yc.prototype=new u,Pd=function(){var I,L,N,V;Pd.prototype.init.call(this),V=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,I=function(ae,Fe){var nt=0;Fe.payloadUnitStartIndicator&&(nt+=ae[nt]+1),"pat"===Fe.type?L(ae.subarray(nt),Fe):N(ae.subarray(nt),Fe)},L=function(ae,Fe){Fe.section_number=ae[7],Fe.last_section_number=ae[8],V.pmtPid=(31&ae[10])<<8|ae[11],Fe.pmtPid=V.pmtPid},N=function(ae,Fe){var _t,Pt;if(1&ae[5]){for(V.programMapTable={video:null,audio:null,"timed-metadata":{}},_t=3+((15&ae[1])<<8|ae[2])-4,Pt=12+((15&ae[10])<<8|ae[11]);Pt<_t;){var an=ae[Pt],zn=(31&ae[Pt+1])<<8|ae[Pt+2];an===Va.H264_STREAM_TYPE&&null===V.programMapTable.video?V.programMapTable.video=zn:an===Va.ADTS_STREAM_TYPE&&null===V.programMapTable.audio?V.programMapTable.audio=zn:an===Va.METADATA_STREAM_TYPE&&(V.programMapTable["timed-metadata"][zn]=an),Pt+=5+((15&ae[Pt+3])<<8|ae[Pt+4])}Fe.programMapTable=V.programMapTable}},this.push=function(re){var ae={},Fe=4;if(ae.payloadUnitStartIndicator=!!(64&re[1]),ae.pid=31&re[1],ae.pid<<=8,ae.pid|=re[2],(48&re[3])>>>4>1&&(Fe+=re[Fe]+1),0===ae.pid)ae.type="pat",I(re.subarray(Fe),ae),this.trigger("data",ae);else if(ae.pid===this.pmtPid)for(ae.type="pmt",I(re.subarray(Fe),ae),this.trigger("data",ae);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([re,Fe,ae]):this.processPes_(re,Fe,ae)},this.processPes_=function(re,ae,Fe){Fe.streamType=Fe.pid===this.programMapTable.video?Va.H264_STREAM_TYPE:Fe.pid===this.programMapTable.audio?Va.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][Fe.pid],Fe.type="pes",Fe.data=re.subarray(ae),this.trigger("data",Fe)}},Pd.prototype=new u,Pd.STREAM_TYPES={h264:27,adts:15},Sp=function(){var ae,I=this,L=!1,N={data:[],size:0},V={data:[],size:0},re={data:[],size:0},nt=function(pt,Pt,an){var Nu,zn=new Uint8Array(pt.size),nr={type:Pt},On=0,$r=0,eu=!1;if(pt.data.length&&!(pt.size<9)){for(nr.trackId=pt.data[0].pid,On=0;On<pt.data.length;On++)zn.set((Nu=pt.data[On]).data,$r),$r+=Nu.data.byteLength;(function(pt,Pt){var an,zn=pt[0]<<16|pt[1]<<8|pt[2];Pt.data=new Uint8Array,1===zn&&(Pt.packetLength=6+(pt[4]<<8|pt[5]),Pt.dataAlignmentIndicator=0!=(4&pt[6]),192&(an=pt[7])&&(Pt.pts=(14&pt[9])<<27|(255&pt[10])<<20|(254&pt[11])<<12|(255&pt[12])<<5|(254&pt[13])>>>3,Pt.pts*=4,Pt.pts+=(6&pt[13])>>>1,Pt.dts=Pt.pts,64&an&&(Pt.dts=(14&pt[14])<<27|(255&pt[15])<<20|(254&pt[16])<<12|(255&pt[17])<<5|(254&pt[18])>>>3,Pt.dts*=4,Pt.dts+=(6&pt[18])>>>1)),Pt.data=pt.subarray(9+pt[8]))})(zn,nr),eu="video"===Pt||nr.packetLength<=pt.size,(an||eu)&&(pt.size=0,pt.data.length=0),eu&&I.trigger("data",nr)}};Sp.prototype.init.call(this),this.push=function(_t){({pat:function(){},pes:function(){var Pt,an;switch(_t.streamType){case Va.H264_STREAM_TYPE:Pt=N,an="video";break;case Va.ADTS_STREAM_TYPE:Pt=V,an="audio";break;case Va.METADATA_STREAM_TYPE:Pt=re,an="timed-metadata";break;default:return}_t.payloadUnitStartIndicator&&nt(Pt,an,!0),Pt.data.push(_t),Pt.size+=_t.data.byteLength},pmt:function(){var Pt={type:"metadata",tracks:[]};null!==(ae=_t.programMapTable).video&&Pt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ae.video,codec:"avc",type:"video"}),null!==ae.audio&&Pt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ae.audio,codec:"adts",type:"audio"}),L=!0,I.trigger("data",Pt)}})[_t.type]()},this.reset=function(){N.size=0,N.data.length=0,V.size=0,V.data.length=0,this.trigger("reset")},this.flushStreams_=function(){nt(N,"video"),nt(V,"audio"),nt(re,"timed-metadata")},this.flush=function(){if(!L&&ae){var _t={type:"metadata",tracks:[]};null!==ae.video&&_t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ae.video,codec:"avc",type:"video"}),null!==ae.audio&&_t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ae.audio,codec:"adts",type:"audio"}),I.trigger("data",_t)}L=!1,this.flushStreams_(),this.trigger("done")}},Sp.prototype=new u;var vf={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Yc,TransportParseStream:Pd,ElementaryStream:Sp,TimestampRolloverStream:ov,CaptionStream:mf.CaptionStream,Cea608Stream:mf.Cea608Stream,Cea708Stream:mf.Cea708Stream,MetadataStream:sv};for(var Ug in Va)Va.hasOwnProperty(Ug)&&(vf[Ug]=Va[Ug]);var _c,ql=vf,rl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_c=function(I){var L,N=0;_c.prototype.init.call(this),this.skipWarn_=function(V,re){this.trigger("log",{level:"warn",message:"adts skiping bytes "+V+" to "+re+" in frame "+N+" outside syncword"})},this.push=function(V){var ae,Fe,nt,_t,pt,re=0;if(I||(N=0),"audio"===V.type){L&&L.length?(nt=L,(L=new Uint8Array(nt.byteLength+V.data.byteLength)).set(nt),L.set(V.data,nt.byteLength)):L=V.data;for(var Pt;re+7<L.length;)if(255===L[re]&&240==(246&L[re+1])){if("number"==typeof Pt&&(this.skipWarn_(Pt,re),Pt=null),Fe=2*(1&~L[re+1]),pt=9e4*(_t=1024*(1+(3&L[re+6])))/rl[(60&L[re+2])>>>2],L.byteLength-re<(ae=(3&L[re+3])<<11|L[re+4]<<3|(224&L[re+5])>>5))break;this.trigger("data",{pts:V.pts+N*pt,dts:V.dts+N*pt,sampleCount:_t,audioobjecttype:1+(L[re+2]>>>6&3),channelcount:(1&L[re+2])<<2|(192&L[re+3])>>>6,samplerate:rl[(60&L[re+2])>>>2],samplingfrequencyindex:(60&L[re+2])>>>2,samplesize:16,data:L.subarray(re+7+Fe,re+ae)}),N++,re+=ae}else"number"!=typeof Pt&&(Pt=re),re++;"number"==typeof Pt&&(this.skipWarn_(Pt,re),Pt=null),L=L.subarray(re)}},this.flush=function(){N=0,this.trigger("done")},this.reset=function(){L=void 0,this.trigger("reset")},this.endTimeline=function(){L=void 0,this.trigger("endedtimeline")}},_c.prototype=new u;var My,$o=_c;My=function(I){var L=I.byteLength,N=0,V=0;this.length=function(){return 8*L},this.bitsAvailable=function(){return 8*L+V},this.loadWord=function(){var re=I.byteLength-L,ae=new Uint8Array(4),Fe=Math.min(4,L);if(0===Fe)throw new Error("no bytes available");ae.set(I.subarray(re,re+Fe)),N=new DataView(ae.buffer).getUint32(0),V=8*Fe,L-=Fe},this.skipBits=function(re){var ae;V>re?(N<<=re,V-=re):(re-=V,re-=8*(ae=Math.floor(re/8)),L-=ae,this.loadWord(),N<<=re,V-=re)},this.readBits=function(re){var ae=Math.min(V,re),Fe=N>>>32-ae;return(V-=ae)>0?N<<=ae:L>0&&this.loadWord(),(ae=re-ae)>0?Fe<<ae|this.readBits(ae):Fe},this.skipLeadingZeros=function(){var re;for(re=0;re<V;++re)if(0!=(N&2147483648>>>re))return N<<=re,V-=re,re;return this.loadWord(),re+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var re=this.skipLeadingZeros();return this.readBits(re+1)-1},this.readExpGolomb=function(){var re=this.readUnsignedExpGolomb();return 1&re?1+re>>>1:-1*(re>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Ch,bc,Ha,Bg=My;bc=function(){var L,N,I=0;bc.prototype.init.call(this),this.push=function(V){var re;N?((re=new Uint8Array(N.byteLength+V.data.byteLength)).set(N),re.set(V.data,N.byteLength),N=re):N=V.data;for(var ae=N.byteLength;I<ae-3;I++)if(1===N[I+2]){L=I+5;break}for(;L<ae;)switch(N[L]){case 0:if(0!==N[L-1]){L+=2;break}if(0!==N[L-2]){L++;break}I+3!==L-2&&this.trigger("data",N.subarray(I+3,L-2));do{L++}while(1!==N[L]&&L<ae);I=L-2,L+=3;break;case 1:if(0!==N[L-1]||0!==N[L-2]){L+=3;break}this.trigger("data",N.subarray(I+3,L-2)),I=L-2,L+=3;break;default:L+=3}N=N.subarray(I),L-=I,I=0},this.reset=function(){N=null,I=0,this.trigger("reset")},this.flush=function(){N&&N.byteLength>3&&this.trigger("data",N.subarray(I+3)),N=null,I=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},bc.prototype=new u,Ha={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ch=function(){var L,N,V,re,ae,Fe,nt,I=new bc;Ch.prototype.init.call(this),L=this,this.push=function(_t){"video"===_t.type&&(N=_t.trackId,V=_t.pts,re=_t.dts,I.push(_t))},I.on("data",function(_t){var pt={trackId:N,pts:V,dts:re,data:_t,nalUnitTypeCode:31&_t[0]};switch(pt.nalUnitTypeCode){case 5:pt.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:pt.nalUnitType="sei_rbsp",pt.escapedRBSP=ae(_t.subarray(1));break;case 7:pt.nalUnitType="seq_parameter_set_rbsp",pt.escapedRBSP=ae(_t.subarray(1)),pt.config=Fe(pt.escapedRBSP);break;case 8:pt.nalUnitType="pic_parameter_set_rbsp";break;case 9:pt.nalUnitType="access_unit_delimiter_rbsp"}L.trigger("data",pt)}),I.on("done",function(){L.trigger("done")}),I.on("partialdone",function(){L.trigger("partialdone")}),I.on("reset",function(){L.trigger("reset")}),I.on("endedtimeline",function(){L.trigger("endedtimeline")}),this.flush=function(){I.flush()},this.partialFlush=function(){I.partialFlush()},this.reset=function(){I.reset()},this.endTimeline=function(){I.endTimeline()},nt=function(pt,Pt){var nr,an=8,zn=8;for(nr=0;nr<pt;nr++)0!==zn&&(zn=(an+Pt.readExpGolomb()+256)%256),an=0===zn?an:zn},ae=function(pt){for(var nr,On,Pt=pt.byteLength,an=[],zn=1;zn<Pt-2;)0===pt[zn]&&0===pt[zn+1]&&3===pt[zn+2]?(an.push(zn+2),zn+=2):zn++;if(0===an.length)return pt;nr=Pt-an.length,On=new Uint8Array(nr);var $r=0;for(zn=0;zn<nr;$r++,zn++)$r===an[0]&&($r++,an.shift()),On[zn]=pt[$r];return On},Fe=function(pt){var On,$r,eu,Nu,Ap,k_,e0,t0,M_,jy,Uy,kp,Pt=0,an=0,zn=0,nr=0,Fo=[1,1];if($r=(On=new Bg(pt)).readUnsignedByte(),Nu=On.readUnsignedByte(),eu=On.readUnsignedByte(),On.skipUnsignedExpGolomb(),Ha[$r]&&(3===(Ap=On.readUnsignedExpGolomb())&&On.skipBits(1),On.skipUnsignedExpGolomb(),On.skipUnsignedExpGolomb(),On.skipBits(1),On.readBoolean()))for(Uy=3!==Ap?8:12,kp=0;kp<Uy;kp++)On.readBoolean()&&nt(kp<6?16:64,On);if(On.skipUnsignedExpGolomb(),0===(k_=On.readUnsignedExpGolomb()))On.readUnsignedExpGolomb();else if(1===k_)for(On.skipBits(1),On.skipExpGolomb(),On.skipExpGolomb(),e0=On.readUnsignedExpGolomb(),kp=0;kp<e0;kp++)On.skipExpGolomb();if(On.skipUnsignedExpGolomb(),On.skipBits(1),t0=On.readUnsignedExpGolomb(),M_=On.readUnsignedExpGolomb(),0===(jy=On.readBits(1))&&On.skipBits(1),On.skipBits(1),On.readBoolean()&&(Pt=On.readUnsignedExpGolomb(),an=On.readUnsignedExpGolomb(),zn=On.readUnsignedExpGolomb(),nr=On.readUnsignedExpGolomb()),On.readBoolean()&&On.readBoolean())switch(On.readUnsignedByte()){case 1:Fo=[1,1];break;case 2:Fo=[12,11];break;case 3:Fo=[10,11];break;case 4:Fo=[16,11];break;case 5:Fo=[40,33];break;case 6:Fo=[24,11];break;case 7:Fo=[20,11];break;case 8:Fo=[32,11];break;case 9:Fo=[80,33];break;case 10:Fo=[18,11];break;case 11:Fo=[15,11];break;case 12:Fo=[64,33];break;case 13:Fo=[160,99];break;case 14:Fo=[4,3];break;case 15:Fo=[3,2];break;case 16:Fo=[2,1];break;case 255:Fo=[On.readUnsignedByte()<<8|On.readUnsignedByte(),On.readUnsignedByte()<<8|On.readUnsignedByte()]}return{profileIdc:$r,levelIdc:eu,profileCompatibility:Nu,width:16*(t0+1)-2*Pt-2*an,height:(2-jy)*(M_+1)*16-2*zn-2*nr,sarRatio:Fo}}},Ch.prototype=new u;var Cp,W_={H264Stream:Ch,NalByteStream:bc},Or=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],xh=function(I,L){var N=I[L+6]<<21|I[L+7]<<14|I[L+8]<<7|I[L+9];return N=N>=0?N:0,(16&I[L+5])>>4?N+20:N+10},Ih=function ye(I,L){return I.length-L<10||I[L]!=="I".charCodeAt(0)||I[L+1]!=="D".charCodeAt(0)||I[L+2]!=="3".charCodeAt(0)?L:ye(I,L+=xh(I,L))},Kl=function(I){return I[0]<<21|I[1]<<14|I[2]<<7|I[3]},Vg=function(I,L,N){return unescape(function(I,L,N){var V,re="";for(V=L;V<N;V++)re+="%"+("00"+I[V].toString(16)).slice(-2);return re}(I,L,N))},Gg={isLikelyAacData:function(I){var L=Ih(I,0);return I.length>=L+2&&255==(255&I[L])&&240==(240&I[L+1])&&16==(22&I[L+1])},parseId3TagSize:xh,parseAdtsSize:function(I,L){return 6144&I[L+3]|I[L+4]<<3|(224&I[L+5])>>5},parseType:function(I,L){return I[L]==="I".charCodeAt(0)&&I[L+1]==="D".charCodeAt(0)&&I[L+2]==="3".charCodeAt(0)?"timed-metadata":!0&I[L]&&240==(240&I[L+1])?"audio":null},parseSampleRate:function(I){for(var L=0;L+5<I.length;){if(255===I[L]&&240==(246&I[L+1]))return Or[(60&I[L+2])>>>2];L++}return null},parseAacTimestamp:function(I){var L,N,V;L=10,64&I[5]&&(L+=4,L+=Kl(I.subarray(10,14)));do{if((N=Kl(I.subarray(L+4,L+8)))<1)return null;if("PRIV"===String.fromCharCode(I[L],I[L+1],I[L+2],I[L+3])){V=I.subarray(L+10,L+N+10);for(var ae=0;ae<V.byteLength;ae++)if(0===V[ae]){if("com.apple.streaming.transportStreamTimestamp"===Vg(V,0,ae)){var nt=V.subarray(ae+1),_t=(1&nt[3])<<30|nt[4]<<22|nt[5]<<14|nt[6]<<6|nt[7]>>>2;return(_t*=4)+(3&nt[7])}break}}L+=10,L+=N}while(L<I.byteLength);return null}};Cp=function(){var I=new Uint8Array,L=0;Cp.prototype.init.call(this),this.setTimestamp=function(N){L=N},this.push=function(N){var Fe,nt,_t,V=0,re=0;for(I.length?(_t=I.length,(I=new Uint8Array(N.byteLength+_t)).set(I.subarray(0,_t)),I.set(N,_t)):I=N;I.length-re>=3;)if(I[re]!=="I".charCodeAt(0)||I[re+1]!=="D".charCodeAt(0)||I[re+2]!=="3".charCodeAt(0))if(255!=(255&I[re])||240!=(240&I[re+1]))re++;else{if(I.length-re<7||re+(V=Gg.parseAdtsSize(I,re))>I.length)break;nt={type:"audio",data:I.subarray(re,re+V),pts:L,dts:L},this.trigger("data",nt),re+=V}else{if(I.length-re<10||re+(V=Gg.parseId3TagSize(I,re))>I.length)break;Fe={type:"timed-metadata",data:I.subarray(re,re+V)},this.trigger("data",Fe),re+=V}I=I.length-re>0?I.subarray(re):new Uint8Array},this.reset=function(){I=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){I=new Uint8Array,this.trigger("endedtimeline")}},Cp.prototype=new u;var _f,Ah,Wg,Zl,Oy=Cp,Dh=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],lv=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],cv=W_.H264Stream,__=Gg.isLikelyAacData,dv=function(I,L){L.stream=I,this.trigger("log",L)},hv=function(I,L){for(var N=Object.keys(L),V=0;V<N.length;V++){var re=N[V];"headOfPipeline"===re||!L[re].on||L[re].on("log",dv.bind(I,re))}},fv=function(I,L){var N;if(I.length!==L.length)return!1;for(N=0;N<I.length;N++)if(I[N]!==L[N])return!1;return!0},zg=function(I,L,N,V,re,ae){return{start:{dts:I,pts:I+(N-L)},end:{dts:I+(V-L),pts:I+(re-N)},prependedContentDuration:ae,baseMediaDecodeTime:I}};Ah=function(I,L){var V,N=[],re=0,ae=0,Fe=1/0;V=(L=L||{}).firstSequenceNumber||0,Ah.prototype.init.call(this),this.push=function(nt){nl_collectDtsInfo(I,nt),I&&Dh.forEach(function(_t){I[_t]=nt[_t]}),N.push(nt)},this.setEarliestDts=function(nt){re=nt},this.setVideoBaseMediaDecodeTime=function(nt){Fe=nt},this.setAudioAppendStart=function(nt){ae=nt},this.flush=function(){var nt,_t,pt,Pt,an,zn,nr;0!==N.length?(nt=function(I,L,N){return L.minSegmentDts>=N?I:(L.minSegmentDts=1/0,I.filter(function(V){return V.dts>=N&&(L.minSegmentDts=Math.min(L.minSegmentDts,V.dts),L.minSegmentPts=L.minSegmentDts,!0)}))}(N,I,re),I.baseMediaDecodeTime=nl_calculateTrackBaseMediaDecodeTime(I,L.keepOriginalTimestamps),nr=pf_prefixWithSilence(I,nt,ae,Fe),I.samples=function(I){var L,V=[];for(L=0;L<I.length;L++)V.push({size:I[L].data.byteLength,duration:1024});return V}(nt),pt=El_mdat(function(I){var L,N,V=0,re=new Uint8Array(function(I){var L,V=0;for(L=0;L<I.length;L++)V+=I[L].data.byteLength;return V}(I));for(L=0;L<I.length;L++)re.set((N=I[L]).data,V),V+=N.data.byteLength;return re}(nt)),N=[],_t=El_moof(V,[I]),Pt=new Uint8Array(_t.byteLength+pt.byteLength),V++,Pt.set(_t),Pt.set(pt,_t.byteLength),nl_clearDtsInfo(I),an=Math.ceil(9216e4/I.samplerate),nt.length&&(zn=nt.length*an,this.trigger("segmentTimingInfo",zg(is_audioTsToVideoTs(I.baseMediaDecodeTime,I.samplerate),nt[0].dts,nt[0].pts,nt[0].dts+zn,nt[0].pts+zn,nr||0)),this.trigger("timingInfo",{start:nt[0].pts,end:nt[0].pts+zn})),this.trigger("data",{track:I,boxes:Pt}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){nl_clearDtsInfo(I),N=[],this.trigger("reset")}},Ah.prototype=new u,_f=function(I,L){var N,ae,Fe,V=[],re=[];N=(L=L||{}).firstSequenceNumber||0,_f.prototype.init.call(this),delete I.minPTS,this.gopCache_=[],this.push=function(nt){nl_collectDtsInfo(I,nt),"seq_parameter_set_rbsp"===nt.nalUnitType&&!ae&&(ae=nt.config,I.sps=[nt.data],lv.forEach(function(_t){I[_t]=ae[_t]},this)),"pic_parameter_set_rbsp"===nt.nalUnitType&&!Fe&&(Fe=nt.data,I.pps=[nt.data]),V.push(nt)},this.flush=function(){for(var nt,_t,pt,Pt,an,zn,On,$r,nr=0;V.length&&"access_unit_delimiter_rbsp"!==V[0].nalUnitType;)V.shift();if(0===V.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(nt=function(I){var L,N,V=[],re=[];for(re.byteLength=0,re.nalCount=0,re.duration=0,V.byteLength=0,L=0;L<I.length;L++)"access_unit_delimiter_rbsp"===(N=I[L]).nalUnitType?(V.length&&(V.duration=N.dts-V.dts,re.byteLength+=V.byteLength,re.nalCount+=V.length,re.duration+=V.duration,re.push(V)),(V=[N]).byteLength=N.data.byteLength,V.pts=N.pts,V.dts=N.dts):("slice_layer_without_partitioning_rbsp_idr"===N.nalUnitType&&(V.keyFrame=!0),V.duration=N.dts-V.dts,V.byteLength+=N.data.byteLength,V.push(N));return re.length&&(!V.duration||V.duration<=0)&&(V.duration=re[re.length-1].duration),re.byteLength+=V.byteLength,re.nalCount+=V.length,re.duration+=V.duration,re.push(V),re}(V),(pt=function(I){var L,N,V=[],re=[];for(V.byteLength=0,V.nalCount=0,V.duration=0,V.pts=I[0].pts,V.dts=I[0].dts,re.byteLength=0,re.nalCount=0,re.duration=0,re.pts=I[0].pts,re.dts=I[0].dts,L=0;L<I.length;L++)(N=I[L]).keyFrame?(V.length&&(re.push(V),re.byteLength+=V.byteLength,re.nalCount+=V.nalCount,re.duration+=V.duration),(V=[N]).nalCount=N.length,V.byteLength=N.byteLength,V.pts=N.pts,V.dts=N.dts,V.duration=N.duration):(V.duration+=N.duration,V.nalCount+=N.length,V.byteLength+=N.byteLength,V.push(N));return re.length&&V.duration<=0&&(V.duration=re[re.length-1].duration),re.byteLength+=V.byteLength,re.nalCount+=V.nalCount,re.duration+=V.duration,re.push(V),re}(nt))[0][0].keyFrame||((_t=this.getGopForFusion_(V[0],I))?(nr=_t.duration,pt.unshift(_t),pt.byteLength+=_t.byteLength,pt.nalCount+=_t.nalCount,pt.pts=_t.pts,pt.dts=_t.dts,pt.duration+=_t.duration):pt=function(I){var L;return!I[0][0].keyFrame&&I.length>1&&(L=I.shift(),I.byteLength-=L.byteLength,I.nalCount-=L.nalCount,I[0][0].dts=L.dts,I[0][0].pts=L.pts,I[0][0].duration+=L.duration),I}(pt)),re.length){var eu;if(!(eu=L.alignGopsAtEnd?this.alignGopsAtEnd_(pt):this.alignGopsAtStart_(pt)))return this.gopCache_.unshift({gop:pt.pop(),pps:I.pps,sps:I.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),V=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");nl_clearDtsInfo(I),pt=eu}nl_collectDtsInfo(I,pt),I.samples=function(I,L){var N,V,re,ae,nt=L||0,_t=[];for(N=0;N<I.length;N++)for(ae=I[N],V=0;V<ae.length;V++)nt+=(re=vp(ae[V],nt)).size,_t.push(re);return _t}(pt),an=El_mdat(function(I){var L,N,V,re,ae,Fe,nt=0,an=new Uint8Array(I.byteLength+4*I.nalCount),zn=new DataView(an.buffer);for(L=0;L<I.length;L++)for(re=I[L],N=0;N<re.length;N++)for(ae=re[N],V=0;V<ae.length;V++)zn.setUint32(nt,(Fe=ae[V]).data.byteLength),an.set(Fe.data,nt+=4),nt+=Fe.data.byteLength;return an}(pt)),I.baseMediaDecodeTime=nl_calculateTrackBaseMediaDecodeTime(I,L.keepOriginalTimestamps),this.trigger("processedGopsInfo",pt.map(function(Nu){return{pts:Nu.pts,dts:Nu.dts,byteLength:Nu.byteLength}})),this.trigger("segmentTimingInfo",zg(I.baseMediaDecodeTime,(On=pt[0]).dts,On.pts,($r=pt[pt.length-1]).dts+$r.duration,$r.pts+$r.duration,nr)),this.trigger("timingInfo",{start:pt[0].pts,end:pt[pt.length-1].pts+pt[pt.length-1].duration}),this.gopCache_.unshift({gop:pt.pop(),pps:I.pps,sps:I.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),V=[],this.trigger("baseMediaDecodeTime",I.baseMediaDecodeTime),this.trigger("timelineStartInfo",I.timelineStartInfo),Pt=El_moof(N,[I]),zn=new Uint8Array(Pt.byteLength+an.byteLength),N++,zn.set(Pt),zn.set(an,Pt.byteLength),this.trigger("data",{track:I,boxes:zn}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),V=[],this.gopCache_.length=0,re.length=0,this.trigger("reset")},this.resetStream_=function(){nl_clearDtsInfo(I),ae=void 0,Fe=void 0},this.getGopForFusion_=function(nt){var an,zn,nr,On,$r,Pt=1/0;for($r=0;$r<this.gopCache_.length;$r++)nr=(On=this.gopCache_[$r]).gop,I.pps&&fv(I.pps[0],On.pps[0])&&I.sps&&fv(I.sps[0],On.sps[0])&&(nr.dts<I.timelineStartInfo.dts||(an=nt.dts-nr.dts-nr.duration)>=-1e4&&an<=45e3&&(!zn||Pt>an)&&(zn=On,Pt=an));return zn?zn.gop:null},this.alignGopsAtStart_=function(nt){var _t,pt,Pt,an,zn,nr,On,$r;for(zn=nt.byteLength,nr=nt.nalCount,On=nt.duration,_t=pt=0;_t<re.length&&pt<nt.length&&(Pt=re[_t]).pts!==(an=nt[pt]).pts;)an.pts>Pt.pts?_t++:(pt++,zn-=an.byteLength,nr-=an.nalCount,On-=an.duration);return 0===pt?nt:pt===nt.length?null:(($r=nt.slice(pt)).byteLength=zn,$r.duration=On,$r.nalCount=nr,$r.pts=$r[0].pts,$r.dts=$r[0].dts,$r)},this.alignGopsAtEnd_=function(nt){var _t,pt,Pt,an,zn,nr,On;for(_t=re.length-1,pt=nt.length-1,zn=null,nr=!1;_t>=0&&pt>=0;){if((Pt=re[_t]).pts===(an=nt[pt]).pts){nr=!0;break}Pt.pts>an.pts?_t--:(_t===re.length-1&&(zn=pt),pt--)}if(!nr&&null===zn)return null;if(0===(On=nr?pt:zn))return nt;var $r=nt.slice(On),eu=$r.reduce(function(Nu,Ap){return Nu.byteLength+=Ap.byteLength,Nu.duration+=Ap.duration,Nu.nalCount+=Ap.nalCount,Nu},{byteLength:0,duration:0,nalCount:0});return $r.byteLength=eu.byteLength,$r.duration=eu.duration,$r.nalCount=eu.nalCount,$r.pts=$r[0].pts,$r.dts=$r[0].dts,$r},this.alignGopsWith=function(nt){re=nt}},_f.prototype=new u,Zl=function(I,L){this.numberOfTracks=0,this.metadataStream=L,this.remuxTracks=void 0===(I=I||{}).remux||!!I.remux,this.keepOriginalTimestamps="boolean"==typeof I.keepOriginalTimestamps&&I.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Zl.prototype.init.call(this),this.push=function(N){return N.text?this.pendingCaptions.push(N):N.frames?this.pendingMetadata.push(N):(this.pendingTracks.push(N.track),this.pendingBytes+=N.boxes.byteLength,"video"===N.track.type&&(this.videoTrack=N.track,this.pendingBoxes.push(N.boxes)),void("audio"===N.track.type&&(this.audioTrack=N.track,this.pendingBoxes.unshift(N.boxes))))}},Zl.prototype=new u,Zl.prototype.flush=function(ye){var N,V,re,Fe,I=0,L={captions:[],captionStreams:{},metadata:[],info:{}},ae=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==ye&&"AudioSegmentStream"!==ye)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(ae=this.videoTrack.timelineStartInfo.pts,lv.forEach(function(nt){L.info[nt]=this.videoTrack[nt]},this)):this.audioTrack&&(ae=this.audioTrack.timelineStartInfo.pts,Dh.forEach(function(nt){L.info[nt]=this.audioTrack[nt]},this)),this.videoTrack||this.audioTrack){for(L.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,re=function(I){var V,L=x(),N=Re(I);return(V=new Uint8Array(L.byteLength+N.byteLength)).set(L),V.set(N,L.byteLength),V}(this.pendingTracks),L.initSegment=new Uint8Array(re.byteLength),L.initSegment.set(re),L.data=new Uint8Array(this.pendingBytes),Fe=0;Fe<this.pendingBoxes.length;Fe++)L.data.set(this.pendingBoxes[Fe],I),I+=this.pendingBoxes[Fe].byteLength;for(Fe=0;Fe<this.pendingCaptions.length;Fe++)(N=this.pendingCaptions[Fe]).startTime=is_metadataTsToSeconds(N.startPts,ae,this.keepOriginalTimestamps),N.endTime=is_metadataTsToSeconds(N.endPts,ae,this.keepOriginalTimestamps),L.captionStreams[N.stream]=!0,L.captions.push(N);for(Fe=0;Fe<this.pendingMetadata.length;Fe++)(V=this.pendingMetadata[Fe]).cueTime=is_metadataTsToSeconds(V.pts,ae,this.keepOriginalTimestamps),L.metadata.push(V);for(L.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",L),Fe=0;Fe<L.captions.length;Fe++)this.trigger("caption",N=L.captions[Fe]);for(Fe=0;Fe<L.metadata.length;Fe++)this.trigger("id3Frame",V=L.metadata[Fe])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Zl.prototype.setRemux=function(ye){this.remuxTracks=ye},Wg=function(I){var V,re,L=this,N=!0;Wg.prototype.init.call(this),this.baseMediaDecodeTime=(I=I||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var ae={};this.transmuxPipeline_=ae,ae.type="aac",ae.metadataStream=new ql.MetadataStream,ae.aacStream=new Oy,ae.audioTimestampRolloverStream=new ql.TimestampRolloverStream("audio"),ae.timedMetadataTimestampRolloverStream=new ql.TimestampRolloverStream("timed-metadata"),ae.adtsStream=new $o,ae.coalesceStream=new Zl(I,ae.metadataStream),ae.headOfPipeline=ae.aacStream,ae.aacStream.pipe(ae.audioTimestampRolloverStream).pipe(ae.adtsStream),ae.aacStream.pipe(ae.timedMetadataTimestampRolloverStream).pipe(ae.metadataStream).pipe(ae.coalesceStream),ae.metadataStream.on("timestamp",function(Fe){ae.aacStream.setTimestamp(Fe.timeStamp)}),ae.aacStream.on("data",function(Fe){"timed-metadata"!==Fe.type&&"audio"!==Fe.type||ae.audioSegmentStream||(re=re||{timelineStartInfo:{baseMediaDecodeTime:L.baseMediaDecodeTime},codec:"adts",type:"audio"},ae.coalesceStream.numberOfTracks++,ae.audioSegmentStream=new Ah(re,I),ae.audioSegmentStream.on("log",L.getLogTrigger_("audioSegmentStream")),ae.audioSegmentStream.on("timingInfo",L.trigger.bind(L,"audioTimingInfo")),ae.adtsStream.pipe(ae.audioSegmentStream).pipe(ae.coalesceStream),L.trigger("trackinfo",{hasAudio:!!re,hasVideo:!!V}))}),ae.coalesceStream.on("data",this.trigger.bind(this,"data")),ae.coalesceStream.on("done",this.trigger.bind(this,"done")),hv(this,ae)},this.setupTsPipeline=function(){var ae={};this.transmuxPipeline_=ae,ae.type="ts",ae.metadataStream=new ql.MetadataStream,ae.packetStream=new ql.TransportPacketStream,ae.parseStream=new ql.TransportParseStream,ae.elementaryStream=new ql.ElementaryStream,ae.timestampRolloverStream=new ql.TimestampRolloverStream,ae.adtsStream=new $o,ae.h264Stream=new cv,ae.captionStream=new ql.CaptionStream(I),ae.coalesceStream=new Zl(I,ae.metadataStream),ae.headOfPipeline=ae.packetStream,ae.packetStream.pipe(ae.parseStream).pipe(ae.elementaryStream).pipe(ae.timestampRolloverStream),ae.timestampRolloverStream.pipe(ae.h264Stream),ae.timestampRolloverStream.pipe(ae.adtsStream),ae.timestampRolloverStream.pipe(ae.metadataStream).pipe(ae.coalesceStream),ae.h264Stream.pipe(ae.captionStream).pipe(ae.coalesceStream),ae.elementaryStream.on("data",function(Fe){var nt;if("metadata"===Fe.type){for(nt=Fe.tracks.length;nt--;)V||"video"!==Fe.tracks[nt].type?!re&&"audio"===Fe.tracks[nt].type&&((re=Fe.tracks[nt]).timelineStartInfo.baseMediaDecodeTime=L.baseMediaDecodeTime):(V=Fe.tracks[nt]).timelineStartInfo.baseMediaDecodeTime=L.baseMediaDecodeTime;V&&!ae.videoSegmentStream&&(ae.coalesceStream.numberOfTracks++,ae.videoSegmentStream=new _f(V,I),ae.videoSegmentStream.on("log",L.getLogTrigger_("videoSegmentStream")),ae.videoSegmentStream.on("timelineStartInfo",function(_t){re&&!I.keepOriginalTimestamps&&(re.timelineStartInfo=_t,ae.audioSegmentStream.setEarliestDts(_t.dts-L.baseMediaDecodeTime))}),ae.videoSegmentStream.on("processedGopsInfo",L.trigger.bind(L,"gopInfo")),ae.videoSegmentStream.on("segmentTimingInfo",L.trigger.bind(L,"videoSegmentTimingInfo")),ae.videoSegmentStream.on("baseMediaDecodeTime",function(_t){re&&ae.audioSegmentStream.setVideoBaseMediaDecodeTime(_t)}),ae.videoSegmentStream.on("timingInfo",L.trigger.bind(L,"videoTimingInfo")),ae.h264Stream.pipe(ae.videoSegmentStream).pipe(ae.coalesceStream)),re&&!ae.audioSegmentStream&&(ae.coalesceStream.numberOfTracks++,ae.audioSegmentStream=new Ah(re,I),ae.audioSegmentStream.on("log",L.getLogTrigger_("audioSegmentStream")),ae.audioSegmentStream.on("timingInfo",L.trigger.bind(L,"audioTimingInfo")),ae.audioSegmentStream.on("segmentTimingInfo",L.trigger.bind(L,"audioSegmentTimingInfo")),ae.adtsStream.pipe(ae.audioSegmentStream).pipe(ae.coalesceStream)),L.trigger("trackinfo",{hasAudio:!!re,hasVideo:!!V})}}),ae.coalesceStream.on("data",this.trigger.bind(this,"data")),ae.coalesceStream.on("id3Frame",function(Fe){Fe.dispatchType=ae.metadataStream.dispatchType,L.trigger("id3Frame",Fe)}),ae.coalesceStream.on("caption",this.trigger.bind(this,"caption")),ae.coalesceStream.on("done",this.trigger.bind(this,"done")),hv(this,ae)},this.setBaseMediaDecodeTime=function(ae){var Fe=this.transmuxPipeline_;I.keepOriginalTimestamps||(this.baseMediaDecodeTime=ae),re&&(re.timelineStartInfo.dts=void 0,re.timelineStartInfo.pts=void 0,nl_clearDtsInfo(re),Fe.audioTimestampRolloverStream&&Fe.audioTimestampRolloverStream.discontinuity()),V&&(Fe.videoSegmentStream&&(Fe.videoSegmentStream.gopCache_=[]),V.timelineStartInfo.dts=void 0,V.timelineStartInfo.pts=void 0,nl_clearDtsInfo(V),Fe.captionStream.reset()),Fe.timestampRolloverStream&&Fe.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(ae){re&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(ae)},this.setRemux=function(ae){var Fe=this.transmuxPipeline_;I.remux=ae,Fe&&Fe.coalesceStream&&Fe.coalesceStream.setRemux(ae)},this.alignGopsWith=function(ae){V&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(ae)},this.getLogTrigger_=function(ae){var Fe=this;return function(nt){nt.stream=ae,Fe.trigger("log",nt)}},this.push=function(ae){if(N){var Fe=__(ae);Fe&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!Fe&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),N=!1}this.transmuxPipeline_.headOfPipeline.push(ae)},this.flush=function(){N=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Wg.prototype=new u;var K_,Ny,E_,bf={Transmuxer:Wg,VideoSegmentStream:_f,AudioSegmentStream:Ah,AUDIO_PROPERTIES:Dh,VIDEO_PROPERTIES:lv,generateSegmentTimingInfo:zg},e_toUnsigned=function(I){return I>>>0},d=function(I){var L="";return L+=String.fromCharCode(I[0]),L+=String.fromCharCode(I[1]),(L+=String.fromCharCode(I[2]))+String.fromCharCode(I[3])},p=e_toUnsigned,w=function ye(I,L){var V,re,ae,Fe,nt,N=[];if(!L.length)return null;for(V=0;V<I.byteLength;)re=p(I[V]<<24|I[V+1]<<16|I[V+2]<<8|I[V+3]),ae=d(I.subarray(V+4,V+8)),Fe=re>1?V+re:I.byteLength,ae===L[0]&&(1===L.length?N.push(I.subarray(V+8,Fe)):(nt=ye(I.subarray(V+8,Fe),L.slice(1))).length&&(N=N.concat(nt))),V=Fe;return N},j=e_toUnsigned,le=t.getUint64,Wt=function(I){return{isLeading:(12&I[0])>>>2,dependsOn:3&I[0],isDependedOn:(192&I[1])>>>6,hasRedundancy:(48&I[1])>>>4,paddingValue:(14&I[1])>>>1,isNonSyncSample:1&I[1],degradationPriority:I[2]<<8|I[3]}},Ws="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ri="undefined"!=typeof window?window:void 0!==Ws?Ws:"undefined"!=typeof self?self:{},na=function(I){for(var re,ae,L=I.byteLength,N=[],V=1;V<L-2;)0===I[V]&&0===I[V+1]&&3===I[V+2]?(N.push(V+2),V+=2):V++;if(0===N.length)return I;re=L-N.length,ae=new Uint8Array(re);var Fe=0;for(V=0;V<re;Fe++,V++)Fe===N[0]&&(Fe++,N.shift()),ae[V]=I[Fe];return ae},io=mf.CaptionStream,xo=function(I,L){for(var N=I,V=0;V<L.length;V++){var re=L[V];if(N<re.size)return re;N-=re.size}return null},q_=function(I,L){var N=w(I,["moof","traf"]),V=w(I,["mdat"]),re={},ae=[];return V.forEach(function(Fe,nt){ae.push({mdat:Fe,traf:N[nt]})}),ae.forEach(function(Fe){var $r,eu,nt=Fe.mdat,_t=Fe.traf,Pt=function(I){var Pt,L=new DataView(I.buffer,I.byteOffset,I.byteLength),N={version:I[0],flags:new Uint8Array(I.subarray(1,4)),trackId:L.getUint32(4)},V=1&N.flags[2],re=2&N.flags[2],ae=8&N.flags[2],Fe=16&N.flags[2],nt=32&N.flags[2],_t=65536&N.flags[0],pt=131072&N.flags[0];return Pt=8,V&&(Pt+=4,N.baseDataOffset=L.getUint32(12),Pt+=4),re&&(N.sampleDescriptionIndex=L.getUint32(Pt),Pt+=4),ae&&(N.defaultSampleDuration=L.getUint32(Pt),Pt+=4),Fe&&(N.defaultSampleSize=L.getUint32(Pt),Pt+=4),nt&&(N.defaultSampleFlags=L.getUint32(Pt)),_t&&(N.durationIsEmpty=!0),!V&&pt&&(N.baseDataOffsetIsMoof=!0),N}(w(_t,["tfhd"])[0]),an=Pt.trackId,zn=w(_t,["tfdt"]),nr=zn.length>0?function(I){var L={version:I[0],flags:new Uint8Array(I.subarray(1,4))};return L.baseMediaDecodeTime=1===L.version?le(I.subarray(4)):j(I[4]<<24|I[5]<<16|I[6]<<8|I[7]),L}(zn[0]).baseMediaDecodeTime:0,On=w(_t,["trun"]);L===an&&On.length>0&&($r=function(I,L,N){var V=L,re=N.defaultSampleDuration||0,ae=N.defaultSampleSize||0,Fe=N.trackId,nt=[];return I.forEach(function(_t){var Pt=function(I){var an,L={version:I[0],flags:new Uint8Array(I.subarray(1,4)),samples:[]},N=new DataView(I.buffer,I.byteOffset,I.byteLength),V=1&L.flags[2],re=4&L.flags[2],ae=1&L.flags[1],Fe=2&L.flags[1],nt=4&L.flags[1],_t=8&L.flags[1],pt=N.getUint32(4),Pt=8;for(V&&(L.dataOffset=N.getInt32(Pt),Pt+=4),re&&pt&&(an={flags:Wt(I.subarray(Pt,Pt+4))},Pt+=4,ae&&(an.duration=N.getUint32(Pt),Pt+=4),Fe&&(an.size=N.getUint32(Pt),Pt+=4),_t&&(an.compositionTimeOffset=1===L.version?N.getInt32(Pt):N.getUint32(Pt),Pt+=4),L.samples.push(an),pt--);pt--;)an={},ae&&(an.duration=N.getUint32(Pt),Pt+=4),Fe&&(an.size=N.getUint32(Pt),Pt+=4),nt&&(an.flags=Wt(I.subarray(Pt,Pt+4)),Pt+=4),_t&&(an.compositionTimeOffset=1===L.version?N.getInt32(Pt):N.getUint32(Pt),Pt+=4),L.samples.push(an);return L}(_t).samples;Pt.forEach(function(an){void 0===an.duration&&(an.duration=re),void 0===an.size&&(an.size=ae),an.trackId=Fe,an.dts=V,void 0===an.compositionTimeOffset&&(an.compositionTimeOffset=0),"bigint"==typeof V?(an.pts=V+Ri.BigInt(an.compositionTimeOffset),V+=Ri.BigInt(an.duration)):(an.pts=V+an.compositionTimeOffset,V+=an.duration)}),nt=nt.concat(Pt)}),nt}(On,nr,Pt),eu=function(I,L,N){var ae,Fe,nt,_t,V=new DataView(I.buffer,I.byteOffset,I.byteLength),re={logs:[],seiNals:[]};for(Fe=0;Fe+4<I.length;Fe+=nt)if(nt=V.getUint32(Fe),Fe+=4,!(nt<=0))switch(31&I[Fe]){case 6:var pt=I.subarray(Fe+1,Fe+1+nt),Pt=xo(Fe,L);if(ae={nalUnitType:"sei_rbsp",size:nt,data:pt,escapedRBSP:na(pt),trackId:N},Pt)ae.pts=Pt.pts,ae.dts=Pt.dts,_t=Pt;else{if(!_t){re.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Fe+" for trackId "+N+". See mux.js#223."});break}ae.pts=_t.pts,ae.dts=_t.dts}re.seiNals.push(ae)}return re}(nt,$r,an),re[an]||(re[an]={seiNals:[],logs:[]}),re[an].seiNals=re[an].seiNals.concat(eu.seiNals),re[an].logs=re[an].logs.concat(eu.logs))}),re},qg=function(){var L,N,V,re,ae,Fe,I=!1;this.isInitialized=function(){return I},this.init=function(nt){L=new io,I=!0,Fe=!!nt&&nt.isPartial,L.on("data",function(_t){_t.startTime=_t.startPts/re,_t.endTime=_t.endPts/re,ae.captions.push(_t),ae.captionStreams[_t.stream]=!0}),L.on("log",function(_t){ae.logs.push(_t)})},this.isNewInit=function(nt,_t){return!(nt&&0===nt.length||_t&&"object"==typeof _t&&0===Object.keys(_t).length||V===nt[0]&&re===_t[V])},this.parse=function(nt,_t,pt){var Pt;if(!this.isInitialized())return null;if(!_t||!pt)return null;if(this.isNewInit(_t,pt))re=pt[V=_t[0]];else if(null===V||!re)return N.push(nt),null;for(;N.length>0;){var an=N.shift();this.parse(an,_t,pt)}return Pt=function(I,L,N){if(null===L)return null;var re=q_(I,L)[L]||{};return{seiNals:re.seiNals,logs:re.logs,timescale:N}}(nt,V,re),Pt&&Pt.logs&&(ae.logs=ae.logs.concat(Pt.logs)),null!==Pt&&Pt.seiNals?(this.pushNals(Pt.seiNals),this.flushStream(),ae):ae.logs.length?{logs:ae.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(nt){if(!this.isInitialized()||!nt||0===nt.length)return null;nt.forEach(function(_t){L.push(_t)})},this.flushStream=function(){if(!this.isInitialized())return null;Fe?L.partialFlush():L.flush()},this.clearParsedCaptions=function(){ae.captions=[],ae.captionStreams={},ae.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;L.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){N=[],V=null,re=null,ae?this.clearParsedCaptions():ae={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ry=e_toUnsigned,Kg=function(I){return("00"+I.toString(16)).slice(-2)},f0=t.getUint64;K_=function(I,L){var V=w(L,["moof","traf"]).reduce(function(re,ae){var an,zn,Fe=w(ae,["tfhd"])[0],nt=Ry(Fe[4]<<24|Fe[5]<<16|Fe[6]<<8|Fe[7]),_t=I[nt]||9e4,pt=w(ae,["tfdt"])[0],Pt=new DataView(pt.buffer,pt.byteOffset,pt.byteLength);return"bigint"==typeof(an=1===pt[0]?f0(pt.subarray(4,12)):Pt.getUint32(4))?zn=an/Ri.BigInt(_t):"number"==typeof an&&!isNaN(an)&&(zn=an/_t),zn<Number.MAX_SAFE_INTEGER&&(zn=Number(zn)),zn<re&&(re=zn),re},1/0);return"bigint"==typeof V||isFinite(V)?V:0},E_=function(I){var N=0===I[0]?12:20;return Ry(I[N]<<24|I[N+1]<<16|I[N+2]<<8|I[N+3])},Ny=function(I){var L=w(I,["moov","trak"]),N=[];return L.forEach(function(V){var Fe,nt,re={},ae=w(V,["tkhd"])[0];ae&&(nt=(Fe=new DataView(ae.buffer,ae.byteOffset,ae.byteLength)).getUint8(0),re.id=Fe.getUint32(0===nt?12:20));var _t=w(V,["mdia","hdlr"])[0];if(_t){var pt=d(_t.subarray(8,12));re.type="vide"===pt?"video":"soun"===pt?"audio":pt}var Pt=w(V,["mdia","minf","stbl","stsd"])[0];if(Pt){var an=Pt.subarray(8);re.codec=d(an.subarray(4,8));var nr,zn=w(an,[re.codec])[0];zn&&(/^[asm]vc[1-9]$/i.test(re.codec)?(nr=zn.subarray(78),"avcC"===d(nr.subarray(4,8))&&nr.length>11?(re.codec+=".",re.codec+=Kg(nr[9]),re.codec+=Kg(nr[10]),re.codec+=Kg(nr[11])):re.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(re.codec)?(nr=zn.subarray(28),"esds"===d(nr.subarray(4,8))&&nr.length>20&&0!==nr[19]?(re.codec+="."+Kg(nr[19]),re.codec+="."+Kg(nr[20]>>>2&63).replace(/^0/,"")):re.codec="mp4a.40.2"):re.codec=re.codec.toLowerCase())}var $r=w(V,["mdia","mdhd"])[0];$r&&(re.timescale=E_($r)),N.push(re)}),N};var S__startTime=K_,S__tracks=Ny,w_=function(I){var L=31&I[1];return(L<<=8)|I[2]},Ly=function(I){return!!(64&I[1])},Fy=function(I){var L=0;return(48&I[3])>>>4>1&&(L+=I[4]+1),L},x_=function(I){switch(I){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},y0={parseType:function(I,L){var N=w_(I);return 0===N?"pat":N===L?"pmt":L?"pes":null},parsePat:function(I){var L=Ly(I),N=4+Fy(I);return L&&(N+=I[N]+1),(31&I[N+10])<<8|I[N+11]},parsePmt:function(I){var L={},N=Ly(I),V=4+Fy(I);if(N&&(V+=I[V]+1),1&I[V+5]){var ae;ae=3+((15&I[V+1])<<8|I[V+2])-4;for(var nt=12+((15&I[V+10])<<8|I[V+11]);nt<ae;){var _t=V+nt;L[(31&I[_t+1])<<8|I[_t+2]]=I[_t],nt+=5+((15&I[_t+3])<<8|I[_t+4])}return L}},parsePayloadUnitStartIndicator:Ly,parsePesType:function(I,L){switch(L[w_(I)]){case Va.H264_STREAM_TYPE:return"video";case Va.ADTS_STREAM_TYPE:return"audio";case Va.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(I){if(!Ly(I))return null;var N=4+Fy(I);if(N>=I.byteLength)return null;var re,V=null;return 192&(re=I[N+7])&&((V={}).pts=(14&I[N+9])<<27|(255&I[N+10])<<20|(254&I[N+11])<<12|(255&I[N+12])<<5|(254&I[N+13])>>>3,V.pts*=4,V.pts+=(6&I[N+13])>>>1,V.dts=V.pts,64&re&&(V.dts=(14&I[N+14])<<27|(255&I[N+15])<<20|(254&I[N+16])<<12|(255&I[N+17])<<5|(254&I[N+18])>>>3,V.dts*=4,V.dts+=(6&I[N+18])>>>1)),V},videoPacketContainsKeyFrame:function(I){for(var L=4+Fy(I),N=I.subarray(L),V=0,re=0,ae=!1;re<N.byteLength-3;re++)if(1===N[re+2]){V=re+5;break}for(;V<N.byteLength;)switch(N[V]){case 0:if(0!==N[V-1]){V+=2;break}if(0!==N[V-2]){V++;break}re+3!==V-2&&"slice_layer_without_partitioning_rbsp_idr"===x_(31&N[re+3])&&(ae=!0);do{V++}while(1!==N[V]&&V<N.length);re=V-2,V+=3;break;case 1:if(0!==N[V-1]||0!==N[V-2]){V+=3;break}"slice_layer_without_partitioning_rbsp_idr"===x_(31&N[re+3])&&(ae=!0),re=V-2,V+=3;break;default:V+=3}return N=N.subarray(re),V-=re,re=0,N&&N.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===x_(31&N[re+3])&&(ae=!0),ae}},Zg=Dy_handleRollover,Ns={};Ns.ts=y0,Ns.aac=Gg;var Dp=9e4,il=188,X_=function(I,L,N){for(var ae,nt,_t,pt,V=0,re=il,Pt=!1;re<=I.byteLength;)if(71!==I[V]||71!==I[re]&&re!==I.byteLength)V++,re++;else{if("pes"===(ae=I.subarray(V,re),Ns.ts.parseType(ae,L.pid))&&(nt=Ns.ts.parsePesType(ae,L.table),_t=Ns.ts.parsePayloadUnitStartIndicator(ae),"audio"===nt&&_t&&(pt=Ns.ts.parsePesTime(ae))&&(pt.type="audio",N.audio.push(pt),Pt=!0)),Pt)break;V+=il,re+=il}for(V=(re=I.byteLength)-il,Pt=!1;V>=0;)if(71!==I[V]||71!==I[re]&&re!==I.byteLength)V--,re--;else{if("pes"===(ae=I.subarray(V,re),Ns.ts.parseType(ae,L.pid))&&(nt=Ns.ts.parsePesType(ae,L.table),_t=Ns.ts.parsePayloadUnitStartIndicator(ae),"audio"===nt&&_t&&(pt=Ns.ts.parsePesTime(ae))&&(pt.type="audio",N.audio.push(pt),Pt=!0)),Pt)break;V-=il,re-=il}},_0=function(I,L,N){for(var ae,nt,_t,pt,Pt,an,zn,V=0,re=il,nr=!1,On={data:[],size:0};re<I.byteLength;)if(71!==I[V]||71!==I[re])V++,re++;else{if("pes"===(ae=I.subarray(V,re),Ns.ts.parseType(ae,L.pid))&&(nt=Ns.ts.parsePesType(ae,L.table),_t=Ns.ts.parsePayloadUnitStartIndicator(ae),"video"===nt&&(_t&&!nr&&(pt=Ns.ts.parsePesTime(ae))&&(pt.type="video",N.video.push(pt),nr=!0),!N.firstKeyFrame))){if(_t&&0!==On.size){for(Pt=new Uint8Array(On.size),an=0;On.data.length;)zn=On.data.shift(),Pt.set(zn,an),an+=zn.byteLength;if(Ns.ts.videoPacketContainsKeyFrame(Pt)){var $r=Ns.ts.parsePesTime(Pt);$r?(N.firstKeyFrame=$r,N.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}On.size=0}On.data.push(ae),On.size+=ae.byteLength}if(nr&&N.firstKeyFrame)break;V+=il,re+=il}for(V=(re=I.byteLength)-il,nr=!1;V>=0;)if(71!==I[V]||71!==I[re])V--,re--;else{if("pes"===(ae=I.subarray(V,re),Ns.ts.parseType(ae,L.pid))&&(nt=Ns.ts.parsePesType(ae,L.table),_t=Ns.ts.parsePayloadUnitStartIndicator(ae),"video"===nt&&_t&&(pt=Ns.ts.parsePesTime(ae))&&(pt.type="video",N.video.push(pt),nr=!0)),nr)break;V-=il,re-=il}},I__inspect=function(I,L){var V;return V=Ns.aac.isLikelyAacData(I)?function(I){for(var nt,L=!1,N=0,V=null,re=null,ae=0,Fe=0;I.length-Fe>=3;){switch(Ns.aac.parseType(I,Fe)){case"timed-metadata":if(I.length-Fe<10){L=!0;break}if((ae=Ns.aac.parseId3TagSize(I,Fe))>I.length){L=!0;break}null===re&&(nt=I.subarray(Fe,Fe+ae),re=Ns.aac.parseAacTimestamp(nt)),Fe+=ae;break;case"audio":if(I.length-Fe<7){L=!0;break}if((ae=Ns.aac.parseAdtsSize(I,Fe))>I.length){L=!0;break}null===V&&(nt=I.subarray(Fe,Fe+ae),V=Ns.aac.parseSampleRate(nt)),N++,Fe+=ae;break;default:Fe++}if(L)return null}if(null===V||null===re)return null;var pt=Dp/V;return{audio:[{type:"audio",dts:re,pts:re},{type:"audio",dts:re+1024*N*pt,pts:re+1024*N*pt}]}}(I):function(I){var L={pid:null,table:null},N={};for(var V in function(I,L){for(var re,N=0,V=il;V<I.byteLength;)if(71!==I[N]||71!==I[V])N++,V++;else{switch(re=I.subarray(N,V),Ns.ts.parseType(re,L.pid)){case"pat":L.pid=Ns.ts.parsePat(re);break;case"pmt":var Fe=Ns.ts.parsePmt(re);L.table=L.table||{},Object.keys(Fe).forEach(function(nt){L.table[nt]=Fe[nt]})}N+=il,V+=il}}(I,L),L.table)if(L.table.hasOwnProperty(V))switch(L.table[V]){case Va.H264_STREAM_TYPE:N.video=[],_0(I,L,N),0===N.video.length&&delete N.video;break;case Va.ADTS_STREAM_TYPE:N.audio=[],X_(I,L,N),0===N.audio.length&&delete N.audio}return N}(I),V&&(V.audio||V.video)?(function(I,L){if(I.audio&&I.audio.length){var N=L;(void 0===N||isNaN(N))&&(N=I.audio[0].dts),I.audio.forEach(function(ae){ae.dts=Zg(ae.dts,N),ae.pts=Zg(ae.pts,N),ae.dtsTime=ae.dts/Dp,ae.ptsTime=ae.pts/Dp})}if(I.video&&I.video.length){var V=L;if((void 0===V||isNaN(V))&&(V=I.video[0].dts),I.video.forEach(function(ae){ae.dts=Zg(ae.dts,V),ae.pts=Zg(ae.pts,V),ae.dtsTime=ae.dts/Dp,ae.ptsTime=ae.pts/Dp}),I.firstKeyFrame){var re=I.firstKeyFrame;re.dts=Zg(re.dts,V),re.pts=Zg(re.pts,V),re.dtsTime=re.dts/Dp,re.ptsTime=re.pts/Dp}}}(V,L),V):null},A_=function(){function ye(L,N){this.options=N||{},this.self=L,this.init()}var I=ye.prototype;return I.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new bf.Transmuxer(this.options),function(I,L){L.on("data",function(N){var V=N.initSegment;N.initSegment={data:V.buffer,byteOffset:V.byteOffset,byteLength:V.byteLength};var re=N.data;N.data=re.buffer,I.postMessage({action:"data",segment:N,byteOffset:re.byteOffset,byteLength:re.byteLength},[N.data])}),L.on("done",function(N){I.postMessage({action:"done"})}),L.on("gopInfo",function(N){I.postMessage({action:"gopInfo",gopInfo:N})}),L.on("videoSegmentTimingInfo",function(N){var V={start:{decode:is_videoTsToSeconds(N.start.dts),presentation:is_videoTsToSeconds(N.start.pts)},end:{decode:is_videoTsToSeconds(N.end.dts),presentation:is_videoTsToSeconds(N.end.pts)},baseMediaDecodeTime:is_videoTsToSeconds(N.baseMediaDecodeTime)};N.prependedContentDuration&&(V.prependedContentDuration=is_videoTsToSeconds(N.prependedContentDuration)),I.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:V})}),L.on("audioSegmentTimingInfo",function(N){var V={start:{decode:is_videoTsToSeconds(N.start.dts),presentation:is_videoTsToSeconds(N.start.pts)},end:{decode:is_videoTsToSeconds(N.end.dts),presentation:is_videoTsToSeconds(N.end.pts)},baseMediaDecodeTime:is_videoTsToSeconds(N.baseMediaDecodeTime)};N.prependedContentDuration&&(V.prependedContentDuration=is_videoTsToSeconds(N.prependedContentDuration)),I.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:V})}),L.on("id3Frame",function(N){I.postMessage({action:"id3Frame",id3Frame:N})}),L.on("caption",function(N){I.postMessage({action:"caption",caption:N})}),L.on("trackinfo",function(N){I.postMessage({action:"trackinfo",trackInfo:N})}),L.on("audioTimingInfo",function(N){I.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:is_videoTsToSeconds(N.start),end:is_videoTsToSeconds(N.end)}})}),L.on("videoTimingInfo",function(N){I.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:is_videoTsToSeconds(N.start),end:is_videoTsToSeconds(N.end)}})}),L.on("log",function(N){I.postMessage({action:"log",log:N})})}(this.self,this.transmuxer)},I.pushMp4Captions=function(N){this.captionParser||(this.captionParser=new qg,this.captionParser.init());var V=new Uint8Array(N.data,N.byteOffset,N.byteLength),re=this.captionParser.parse(V,N.trackIds,N.timescales);this.self.postMessage({action:"mp4Captions",captions:re&&re.captions||[],logs:re&&re.logs||[],data:V.buffer},[V.buffer])},I.probeMp4StartTime=function(N){var re=N.data,ae=S__startTime(N.timescales,re);this.self.postMessage({action:"probeMp4StartTime",startTime:ae,data:re},[re.buffer])},I.probeMp4Tracks=function(N){var V=N.data,re=S__tracks(V);this.self.postMessage({action:"probeMp4Tracks",tracks:re,data:V},[V.buffer])},I.probeTs=function(N){var V=N.data,re=N.baseStartTime,ae="number"!=typeof re||isNaN(re)?void 0:9e4*re,Fe=I__inspect(V,ae),nt=null;Fe&&((nt={hasVideo:Fe.video&&2===Fe.video.length||!1,hasAudio:Fe.audio&&2===Fe.audio.length||!1}).hasVideo&&(nt.videoStart=Fe.video[0].ptsTime),nt.hasAudio&&(nt.audioStart=Fe.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:nt,data:V},[V.buffer])},I.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},I.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},I.push=function(N){var V=new Uint8Array(N.data,N.byteOffset,N.byteLength);this.transmuxer.push(V)},I.reset=function(){this.transmuxer.reset()},I.setTimestampOffset=function(N){this.transmuxer.setBaseMediaDecodeTime(Math.round(is_secondsToVideoTs(N.timestampOffset||0)))},I.setAudioAppendStart=function(N){this.transmuxer.setAudioAppendStart(Math.ceil(is_secondsToVideoTs(N.appendStart)))},I.setRemux=function(N){this.transmuxer.setRemux(N.remux)},I.flush=function(N){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},I.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},I.alignGopsWith=function(N){this.transmuxer.alignGopsWith(N.gopsToAlignWith.slice())},ye}();self.onmessage=function(ye){"init"===ye.data.action&&ye.data.options?this.messageHandlers=new A_(self,ye.data.options):(this.messageHandlers||(this.messageHandlers=new A_(self)),ye.data&&ye.data.action&&"init"!==ye.data.action&&this.messageHandlers[ye.data.action]&&this.messageHandlers[ye.data.action](ye.data))}})),ym=Jp(vm),_m=function(u){var a=u.transmuxer,o=u.bytes,t=u.audioAppendStart,s=u.gopsToAlignWith,h=u.remux,v=u.onData,S=u.onTrackInfo,x=u.onAudioTimingInfo,R=u.onVideoTimingInfo,ee=u.onVideoSegmentTimingInfo,q=u.onAudioSegmentTimingInfo,_e=u.onId3,Re=u.onCaptions,Le=u.onDone,Ve=u.onEndedTimeline,zt=u.onTransmuxerLog,vn=u.isEndOfTimeline,kn={buffer:[]},rn=vn;if(a.onmessage=function(In){a.currentTransmux===u&&("data"===In.data.action&&function(u,a,o){var t=u.data.segment,s=t.type,h=t.initSegment,R=t.videoFrameDtsTime,ee=t.videoFramePtsTime;a.buffer.push({captions:t.captions,captionStreams:t.captionStreams,metadata:t.metadata});var q=u.data.segment.boxes||{data:u.data.segment.data},_e={type:s,data:new Uint8Array(q.data,q.data.byteOffset,q.data.byteLength),initSegment:new Uint8Array(h.data,h.byteOffset,h.byteLength)};void 0!==R&&(_e.videoFrameDtsTime=R),void 0!==ee&&(_e.videoFramePtsTime=ee),o(_e)}(In,kn,v),"trackinfo"===In.data.action&&S(In.data.trackInfo),"gopInfo"===In.data.action&&function(u,a){a.gopInfo=u.data.gopInfo}(In,kn),"audioTimingInfo"===In.data.action&&x(In.data.audioTimingInfo),"videoTimingInfo"===In.data.action&&R(In.data.videoTimingInfo),"videoSegmentTimingInfo"===In.data.action&&ee(In.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===In.data.action&&q(In.data.audioSegmentTimingInfo),"id3Frame"===In.data.action&&_e([In.data.id3Frame],In.data.id3Frame.dispatchType),"caption"===In.data.action&&Re(In.data.caption),"endedtimeline"===In.data.action&&(rn=!1,Ve()),"log"===In.data.action&&zt(In.data.log),"transmuxed"===In.data.type&&(rn||(a.onmessage=null,function(u){var a=u.transmuxedData,o=u.callback;a.buffer=[],o(a)}({transmuxedData:kn,callback:Le}),Yy(a))))},t&&a.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(s)&&a.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),void 0!==h&&a.postMessage({action:"setRemux",remux:h}),o.byteLength){var wn=o instanceof ArrayBuffer?o:o.buffer,un=o instanceof ArrayBuffer?0:o.byteOffset;a.postMessage({action:"push",data:wn,byteOffset:un,byteLength:o.byteLength},[wn])}vn&&a.postMessage({action:"endTimeline"}),a.postMessage({action:"flush"})},Yy=function(u){u.currentTransmux=null,u.transmuxQueue.length&&(u.currentTransmux=u.transmuxQueue.shift(),"function"==typeof u.currentTransmux?u.currentTransmux():_m(u.currentTransmux))},bm=function(u,a){u.postMessage({action:a}),Yy(u)},Fa_reset=function(u){!function(u,a){if(!a.currentTransmux)return a.currentTransmux=u,void bm(a,u);a.transmuxQueue.push(bm.bind(null,a,u))}("reset",u)},dh=function(u){var a=u.transmuxer,o=u.endAction||u.action,t=u.callback,s=Me({},u,{endAction:null,transmuxer:null,callback:null});if(a.addEventListener("message",function x(R){R.data.action===o&&(a.removeEventListener("message",x),R.data.data&&(R.data.data=new Uint8Array(R.data.data,u.byteOffset||0,u.byteLength||R.data.data.byteLength),u.data&&(u.data=R.data.data)),t(R.data))}),u.data){var v=u.data instanceof ArrayBuffer;s.byteOffset=v?0:u.data.byteOffset,s.byteLength=u.data.byteLength,a.postMessage(s,[v?u.data:u.data.buffer])}else a.postMessage(s)},Jf=function(u){u.forEach(function(a){a.abort()})},rg=function(u,a){return a.timedout?{status:a.status,message:"HLS request timed-out at URL: "+a.uri,code:-101,xhr:a}:a.aborted?{status:a.status,message:"HLS request aborted at URL: "+a.uri,code:-102,xhr:a}:u?{status:a.status,message:"HLS request errored at URL: "+a.uri,code:2,xhr:a}:"arraybuffer"===a.responseType&&0===a.response.byteLength?{status:a.status,message:"Empty HLS response at URL: "+a.uri,code:2,xhr:a}:null},Sm=function(u,a,o){return function(t,s){var h=s.response,v=rg(t,s);if(v)return o(v,u);if(16!==h.byteLength)return o({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:2,xhr:s},u);for(var S=new DataView(h),x=new Uint32Array([S.getUint32(0),S.getUint32(4),S.getUint32(8),S.getUint32(12)]),R=0;R<a.length;R++)a[R].bytes=x;return o(null,u)}},ig=function(u,a){var o=Gn(u.map.bytes);if("mp4"!==o)return a({internal:!0,message:"Found unsupported "+(o||"unknown")+" container for initialization segment at URL: "+(u.map.resolvedUri||u.map.uri),code:2});dh({action:"probeMp4Tracks",data:u.map.bytes,transmuxer:u.transmuxer,callback:function(h){var v=h.tracks;return u.map.bytes=h.data,v.forEach(function(x){u.map.tracks=u.map.tracks||{},!u.map.tracks[x.type]&&(u.map.tracks[x.type]=x,"number"==typeof x.id&&x.timescale&&(u.map.timescales=u.map.timescales||{},u.map.timescales[x.id]=x.timescale))}),a(null)}})},Jy=function(u){var a=u.segment,o=u.bytes,t=u.trackInfoFn,s=u.timingInfoFn,h=u.videoSegmentTimingInfoFn,v=u.audioSegmentTimingInfoFn,S=u.id3Fn,x=u.captionsFn,R=u.isEndOfTimeline,ee=u.endedTimelineFn,q=u.dataFn,_e=u.doneFn,Re=u.onTransmuxerLog,Le=a.map&&a.map.tracks||{},Ve=Boolean(Le.audio&&Le.video),zt=s.bind(null,a,"audio","start"),vn=s.bind(null,a,"audio","end"),kn=s.bind(null,a,"video","start"),rn=s.bind(null,a,"video","end");dh({action:"probeTs",transmuxer:a.transmuxer,data:o,baseStartTime:a.baseStartTime,callback:function(un){a.bytes=o=un.data;var ln=un.result;ln&&(t(a,{hasAudio:ln.hasAudio,hasVideo:ln.hasVideo,isMuxed:Ve}),t=null,ln.hasAudio&&!Ve&&zt(ln.audioStart),ln.hasVideo&&kn(ln.videoStart),zt=null,kn=null),function(u){if(!u.transmuxer.currentTransmux)return u.transmuxer.currentTransmux=u,void _m(u);u.transmuxer.transmuxQueue.push(u)}({bytes:o,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,remux:Ve,onData:function(ln){ln.type="combined"===ln.type?"video":ln.type,q(a,ln)},onTrackInfo:function(ln){t&&(Ve&&(ln.isMuxed=!0),t(a,ln))},onAudioTimingInfo:function(ln){zt&&void 0!==ln.start&&(zt(ln.start),zt=null),vn&&void 0!==ln.end&&vn(ln.end)},onVideoTimingInfo:function(ln){kn&&void 0!==ln.start&&(kn(ln.start),kn=null),rn&&void 0!==ln.end&&rn(ln.end)},onVideoSegmentTimingInfo:function(ln){h(ln)},onAudioSegmentTimingInfo:function(ln){v(ln)},onId3:function(ln,In){S(a,ln,In)},onCaptions:function(ln){x(a,[ln])},isEndOfTimeline:R,onEndedTimeline:function(){ee()},onTransmuxerLog:Re,onDone:function(ln){!_e||(ln.type="combined"===ln.type?"video":ln.type,_e(null,a,ln))}})}})},Nv=function(u){var a=u.segment,o=u.bytes,t=u.trackInfoFn,s=u.timingInfoFn,h=u.videoSegmentTimingInfoFn,v=u.audioSegmentTimingInfoFn,S=u.id3Fn,x=u.captionsFn,R=u.isEndOfTimeline,ee=u.endedTimelineFn,q=u.dataFn,_e=u.doneFn,Re=u.onTransmuxerLog,Le=new Uint8Array(o);if(function(u){return z(u,["moof"]).length>0}(Le)){a.isFmp4=!0;var Ve=a.map.tracks,zt={isFmp4:!0,hasVideo:!!Ve.video,hasAudio:!!Ve.audio};Ve.audio&&Ve.audio.codec&&"enca"!==Ve.audio.codec&&(zt.audioCodec=Ve.audio.codec),Ve.video&&Ve.video.codec&&"encv"!==Ve.video.codec&&(zt.videoCodec=Ve.video.codec),Ve.video&&Ve.audio&&(zt.isMuxed=!0),t(a,zt);var vn=function(rn){q(a,{data:Le,type:zt.hasAudio&&!zt.isMuxed?"audio":"video"}),rn&&rn.length&&x(a,rn),_e(null,a,{})};dh({action:"probeMp4StartTime",timescales:a.map.timescales,data:Le,transmuxer:a.transmuxer,callback:function(rn){var tn=rn.data,wn=rn.startTime;o=tn.buffer,a.bytes=Le=tn,zt.hasAudio&&!zt.isMuxed&&s(a,"audio","start",wn),zt.hasVideo&&s(a,"video","start",wn),Ve.video&&tn.byteLength&&a.transmuxer?dh({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:a.transmuxer,data:Le,timescales:a.map.timescales,trackIds:[Ve.video.id],callback:function(ln){o=ln.data.buffer,a.bytes=Le=ln.data,ln.logs.forEach(function(In){Re(kt.mergeOptions(In,{stream:"mp4CaptionParser"}))}),vn(ln.captions)}}):vn()}})}else{if(a.transmuxer)return void 0===a.container&&(a.container=Gn(Le)),"ts"!==a.container&&"aac"!==a.container?(t(a,{hasAudio:!1,hasVideo:!1}),void _e(null,a,{})):void Jy({segment:a,bytes:o,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:x,isEndOfTimeline:R,endedTimelineFn:ee,dataFn:q,doneFn:_e,onTransmuxerLog:Re});_e(null,a,{})}},sg=function(u,a){var S,o=u.id,t=u.key,s=u.encryptedBytes,h=u.decryptionWorker;h.addEventListener("message",function x(R){if(R.data.source===o){h.removeEventListener("message",x);var ee=R.data.decrypted;a(new Uint8Array(ee.bytes,ee.byteOffset,ee.byteLength))}}),S=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),h.postMessage(sh({source:o,encrypted:s,key:S,iv:t.iv}),[s.buffer,S.buffer])},Fv=function(u){var a=u.xhr,o=u.xhrOptions,s=u.segment,h=u.abortFn,v=u.progressFn,S=u.trackInfoFn,x=u.timingInfoFn,R=u.videoSegmentTimingInfoFn,ee=u.audioSegmentTimingInfoFn,q=u.id3Fn,_e=u.captionsFn,Re=u.isEndOfTimeline,Le=u.endedTimelineFn,Ve=u.dataFn,kn=[],rn=function(u){var a=u.activeXhrs,o=u.decryptionWorker,t=u.trackInfoFn,s=u.timingInfoFn,h=u.videoSegmentTimingInfoFn,v=u.audioSegmentTimingInfoFn,S=u.id3Fn,x=u.captionsFn,R=u.isEndOfTimeline,ee=u.endedTimelineFn,q=u.dataFn,_e=u.doneFn,Re=u.onTransmuxerLog,Le=0,Ve=!1;return function(zt,vn){if(!Ve){if(zt)return Ve=!0,Jf(a),_e(zt,vn);if((Le+=1)===a.length){var kn=function(){if(vn.encryptedBytes)return function(u){var o=u.segment,t=u.trackInfoFn,s=u.timingInfoFn,h=u.videoSegmentTimingInfoFn,v=u.audioSegmentTimingInfoFn,S=u.id3Fn,x=u.captionsFn,R=u.isEndOfTimeline,ee=u.endedTimelineFn,q=u.dataFn,_e=u.doneFn,Re=u.onTransmuxerLog;sg({id:o.requestId,key:o.key,encryptedBytes:o.encryptedBytes,decryptionWorker:u.decryptionWorker},function(Le){o.bytes=Le,Nv({segment:o,bytes:o.bytes,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:x,isEndOfTimeline:R,endedTimelineFn:ee,dataFn:q,doneFn:_e,onTransmuxerLog:Re})})}({decryptionWorker:o,segment:vn,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:x,isEndOfTimeline:R,endedTimelineFn:ee,dataFn:q,doneFn:_e,onTransmuxerLog:Re});Nv({segment:vn,bytes:vn.bytes,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:x,isEndOfTimeline:R,endedTimelineFn:ee,dataFn:q,doneFn:_e,onTransmuxerLog:Re})};if(vn.endOfAllRequests=Date.now(),vn.map&&vn.map.encryptedBytes&&!vn.map.bytes)return sg({decryptionWorker:o,id:vn.requestId+"-init",encryptedBytes:vn.map.encryptedBytes,key:vn.map.key},function(rn){vn.map.bytes=rn,ig(vn,function(tn){if(tn)return Jf(a),_e(tn,vn);kn()})});kn()}}}}({activeXhrs:kn,decryptionWorker:u.decryptionWorker,trackInfoFn:S,timingInfoFn:x,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:ee,id3Fn:q,captionsFn:_e,isEndOfTimeline:Re,endedTimelineFn:Le,dataFn:Ve,doneFn:u.doneFn,onTransmuxerLog:u.onTransmuxerLog});if(s.key&&!s.key.bytes){var tn=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&tn.push(s.map.key);var ln=a(kt.mergeOptions(o,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),Sm(s,tn,rn));kn.push(ln)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){var Wn=a(kt.mergeOptions(o,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),Sm(s,[s.map.key],rn));kn.push(Wn)}var Vr=kt.mergeOptions(o,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:Yf(s.map)}),Ki=function(u){var a=u.segment,o=u.finishProcessingFn;return function(t,s){var h=rg(t,s);if(h)return o(h,a);var v=new Uint8Array(s.response);if(a.map.key)return a.map.encryptedBytes=v,o(null,a);a.map.bytes=v,ig(a,function(S){if(S)return S.xhr=s,S.status=s.status,o(S,a);o(null,a)})}}({segment:s,finishProcessingFn:rn}),Ts=a(Vr,Ki);kn.push(Ts)}var Gs=kt.mergeOptions(o,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:Yf(s)}),Rs=a(Gs,function(u){var a=u.segment,o=u.finishProcessingFn,t=u.responseType;return function(s,h){var v=rg(s,h);if(v)return o(v,a);var S="arraybuffer"!==t&&h.responseText?function(u){for(var a=new Uint8Array(new ArrayBuffer(u.length)),o=0;o<u.length;o++)a[o]=u.charCodeAt(o);return a.buffer}(h.responseText.substring(a.lastReachedChar||0)):h.response;return a.stats=function(u){return{bandwidth:u.bandwidth,bytesReceived:u.bytesReceived||0,roundTripTime:u.roundTripTime||0}}(h),a.key?a.encryptedBytes=new Uint8Array(S):a.bytes=new Uint8Array(S),o(null,a)}}({segment:s,finishProcessingFn:rn,responseType:Gs.responseType}));Rs.addEventListener("progress",function(u){var a=u.segment,o=u.progressFn;return function(t){if(!t.target.aborted)return a.stats=kt.mergeOptions(a.stats,function(u){var a=u.target,t={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-a.requestTime||0};return t.bytesReceived=u.loaded,t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3),t}(t)),!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now()),o(t,a)}}({segment:s,progressFn:v,trackInfoFn:S,timingInfoFn:x,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:ee,id3Fn:q,captionsFn:_e,isEndOfTimeline:Re,endedTimelineFn:Le,dataFn:Ve})),kn.push(Rs);var Ba={};return kn.forEach(function(ms){ms.addEventListener("loadend",function(u){var a=u.loadendState,o=u.abortFn;return function(t){t.target.aborted&&o&&!a.calledAbortFn&&(o(),a.calledAbortFn=!0)}}({loadendState:Ba,abortFn:h}))}),function(){return Jf(kn)}},jv=Au("CodecUtils"),Bl=function(u,a){var o=a.attributes||{};return u&&u.mediaGroups&&u.mediaGroups.AUDIO&&o.AUDIO&&u.mediaGroups.AUDIO[o.AUDIO]},vd=function(u){var a={};return u.forEach(function(o){var t=o.mediaType,s=o.type,h=o.details;a[t]=a[t]||[],a[t].push(Cr(""+s+h))}),Object.keys(a).forEach(function(o){if(a[o].length>1)return jv("multiple "+o+" codecs found as attributes: "+a[o].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(a[o]=null);a[o]=a[o][0]}),a},ag=function(u){var a=0;return u.audio&&a++,u.video&&a++,a},$c=function(u,a){var o=a.attributes||{},t=vd(function(u){var a=u.attributes||{};if(a.CODECS)return Lr(a.CODECS)}(a)||[]);if(Bl(u,a)&&!t.audio&&!function(u,a){if(!Bl(u,a))return!0;var t=u.mediaGroups.AUDIO[(a.attributes||{}).AUDIO];for(var s in t)if(!t[s].uri&&!t[s].playlists)return!0;return!1}(u,a)){var s=vd(function(u,a){if(!u.mediaGroups.AUDIO||!a)return null;var o=u.mediaGroups.AUDIO[a];if(!o)return null;for(var t in o){var s=o[t];if(s.default&&s.playlists)return Lr(s.playlists[0].attributes.CODECS)}return null}(u,o.AUDIO)||[]);s.audio&&(t.audio=s.audio)}return t},hh=Au("PlaylistSelector"),ep=function(u){if(u&&u.playlist){var a=u.playlist;return JSON.stringify({id:a.id,bandwidth:u.bandwidth,width:u.width,height:u.height,codecs:a.attributes&&a.attributes.CODECS||""})}},yd=function(u,a){if(!u)return"";var o=Y().getComputedStyle(u);return o?o[a]:""},_d=function(u,a){var o=u.slice();u.sort(function(t,s){var h=a(t,s);return 0===h?o.indexOf(t)-o.indexOf(s):h})},tf=function(u,a){var o,t;return u.attributes.BANDWIDTH&&(o=u.attributes.BANDWIDTH),o=o||Y().Number.MAX_VALUE,a.attributes.BANDWIDTH&&(t=a.attributes.BANDWIDTH),o-(t||Y().Number.MAX_VALUE)},ug=function(u,a,o,t,s,h){if(u){var v={bandwidth:a,width:o,height:t,limitRenditionByPlayerDimensions:s},S=u.playlists;no.isAudioOnly(u)&&(S=h.getAudioTrackPlaylists_(),v.audioOnly=!0);var x=S.map(function(gn){var Wn=gn.attributes&&gn.attributes.RESOLUTION&&gn.attributes.RESOLUTION.width,Vr=gn.attributes&&gn.attributes.RESOLUTION&&gn.attributes.RESOLUTION.height;return{bandwidth:gn.attributes&&gn.attributes.BANDWIDTH||Y().Number.MAX_VALUE,width:Wn,height:Vr,playlist:gn}});_d(x,function(gn,Er){return gn.bandwidth-Er.bandwidth});var R=(x=x.filter(function(gn){return!no.isIncompatible(gn.playlist)})).filter(function(gn){return no.isEnabled(gn.playlist)});R.length||(R=x.filter(function(gn){return!no.isDisabled(gn.playlist)}));var ee=R.filter(function(gn){return gn.bandwidth*Vo.BANDWIDTH_VARIANCE<a}),q=ee[ee.length-1],_e=ee.filter(function(gn){return gn.bandwidth===q.bandwidth})[0];if(!1===s){var Re=_e||R[0]||x[0];if(Re&&Re.playlist){var Le="sortedPlaylistReps";return _e&&(Le="bandwidthBestRep"),R[0]&&(Le="enabledPlaylistReps"),hh("choosing "+ep(Re)+" using "+Le+" with options",v),Re.playlist}return hh("could not choose a playlist with options",v),null}var Ve=ee.filter(function(gn){return gn.width&&gn.height});_d(Ve,function(gn,Er){return gn.width-Er.width});var zt=Ve.filter(function(gn){return gn.width===o&&gn.height===t});q=zt[zt.length-1];var kn,rn,tn,wn,vn=zt.filter(function(gn){return gn.bandwidth===q.bandwidth})[0];if(vn||(rn=(kn=Ve.filter(function(gn){return gn.width>o||gn.height>t})).filter(function(gn){return gn.width===kn[0].width&&gn.height===kn[0].height}),q=rn[rn.length-1],tn=rn.filter(function(gn){return gn.bandwidth===q.bandwidth})[0]),h.experimentalLeastPixelDiffSelector){var un=Ve.map(function(gn){return gn.pixelDiff=Math.abs(gn.width-o)+Math.abs(gn.height-t),gn});_d(un,function(gn,Er){return gn.pixelDiff===Er.pixelDiff?Er.bandwidth-gn.bandwidth:gn.pixelDiff-Er.pixelDiff}),wn=un[0]}var ln=wn||tn||vn||_e||R[0]||x[0];if(ln&&ln.playlist){var In="sortedPlaylistReps";return wn?In="leastPixelDiffRep":tn?In="resolutionPlusOneRep":vn?In="resolutionBestRep":_e?In="bandwidthBestRep":R[0]&&(In="enabledPlaylistReps"),hh("choosing "+ep(ln)+" using "+In+" with options",v),ln.playlist}return hh("could not choose a playlist with options",v),null}},_l=function(){var u=this.useDevicePixelRatio&&Y().devicePixelRatio||1;return ug(this.playlists.master,this.systemBandwidth,parseInt(yd(this.tech_.el(),"width"),10)*u,parseInt(yd(this.tech_.el(),"height"),10)*u,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},rf=function(u,a,o){var t,s;if(o&&o.cues)for(t=o.cues.length;t--;)(s=o.cues[t]).startTime>=u&&s.endTime<=a&&o.removeCue(s)},km=function(u){return"number"==typeof u&&isFinite(u)},sf=1/60,bl=function(u){var a=u.startOfSegment,o=u.duration,t=u.segment,s=u.part,h=u.playlist,v=h.mediaSequence,S=h.id,x=h.segments,ee=u.mediaIndex,q=u.partIndex,_e=u.timeline,Re=(void 0===x?[]:x).length-1,Le="mediaIndex/partIndex increment";u.getMediaInfoForTime?Le="getMediaInfoForTime ("+u.getMediaInfoForTime+")":u.isSyncRequest&&(Le="getSyncSegmentCandidate (isSyncRequest)"),u.independent&&(Le+=" with independent "+u.independent);var Ve="number"==typeof q,zt=u.segment.uri?"segment":"pre-segment",vn=Ve?Gp({preloadSegment:t})-1:0;return zt+" ["+(v+ee)+"/"+(v+Re)+"]"+(Ve?" part ["+q+"/"+vn+"]":"")+" segment start/end ["+t.start+" => "+t.end+"]"+(Ve?" part start/end ["+s.start+" => "+s.end+"]":"")+" startOfSegment ["+a+"] duration ["+o+"] timeline ["+_e+"] selected by ["+Le+"] playlist ["+S+"]"},Pm=function(u){return u+"TimingInfo"},rp=function(u){var a=u.timelineChangeController,t=u.segmentTimeline,s=u.loaderType,h=u.audioDisabled;if(u.currentTimeline===t)return!1;if("audio"===s){var v=a.lastTimelineChange({type:"main"});return!v||v.to!==t}if("main"===s&&h){var S=a.pendingTimelineChange({type:"audio"});return!(S&&S.to===t)}return!1},bd=function(u){var a=u.segmentDuration,o=u.maxDuration;return!!a&&Math.round(a)>o+Nl},gh=function(g){function u(o,t){var s;if(s=g.call(this)||this,!o)throw new TypeError("Initialization settings are required");if("function"!=typeof o.currentTime)throw new TypeError("No currentTime getter specified");if(!o.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=o.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=o.hasPlayed,s.currentTime_=o.currentTime,s.seekable_=o.seekable,s.seeking_=o.seeking,s.duration_=o.duration,s.mediaSource_=o.mediaSource,s.vhs_=o.vhs,s.loaderType_=o.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=o.segmentMetadataTrack,s.goalBufferLength_=o.goalBufferLength,s.sourceType_=o.sourceType,s.sourceUpdater_=o.sourceUpdater,s.inbandTextTracks_=o.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=o.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=o.parse708captions,s.useDtsForTimestampOffset_=o.useDtsForTimestampOffset,s.captionServices_=o.captionServices,s.experimentalExactManifestTimings=o.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=kt.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=o.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=o.decrypter,s.syncController_=o.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=Au("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(Je(s),"state",{get:function(){return this.state_},set:function(v){v!==this.state_&&(this.logger_(this.state_+" -> "+v),this.state_=v,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"main"===s.loaderType_&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"audio"===s.loaderType_&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}it(u,g);var a=u.prototype;return a.createTransmuxer_=function(){return function(u){var a=new ym;a.currentTransmux=null,a.transmuxQueue=[];var o=a.terminate;return a.terminate=function(){return a.currentTransmux=null,a.transmuxQueue.length=0,o.call(a)},a.postMessage({action:"init",options:u}),a}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},a.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},a.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Y().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},a.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},a.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},a.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Y().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},a.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},a.error=function(t){return void 0!==t&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},a.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Fa_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},a.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return kt.createTimeRanges();if("main"===this.loaderType_){var h=t.hasVideo;if(h&&t.hasAudio&&!this.audioDisabled_&&!t.isMuxed)return this.sourceUpdater_.buffered();if(h)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},a.initSegmentForMap=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=oh(t),v=this.initSegments_[h];return s&&!v&&t.bytes&&(this.initSegments_[h]=v={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),v||t},a.segmentKey=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=xv(t),v=this.keyCache_[h];this.cacheEncryptionKeys_&&s&&!v&&t.bytes&&(this.keyCache_[h]=v={resolvedUri:t.resolvedUri,bytes:t.bytes});var S={resolvedUri:(v||t).resolvedUri};return v&&(S.bytes=v.bytes),S},a.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},a.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},a.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},a.playlist=function(t,s){if(void 0===s&&(s={}),t){var h=this.playlist_,v=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=s,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));var S=null;if(h&&(h.id?S=h.id:h.uri&&(S=h.uri)),this.logger_("playlist update ["+S+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!h||h.uri!==t.uri)return null!==this.mediaIndex&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var x=t.mediaSequence-h.mediaSequence;if(this.logger_("live window shift ["+x+"]"),null!==this.mediaIndex)if(this.mediaIndex-=x,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var R=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!R.parts||!R.parts.length||!R.parts[this.partIndex])){var ee=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=ee}}v&&(v.mediaIndex-=x,v.mediaIndex<0?(v.mediaIndex=null,v.partIndex=null):(v.mediaIndex>=0&&(v.segment=t.segments[v.mediaIndex]),v.partIndex>=0&&v.segment.parts&&(v.part=v.segment.parts[v.partIndex]))),this.syncController_.saveExpiredSegmentInfo(h,t)}},a.pause=function(){this.checkBufferTimeout_&&(Y().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},a.paused=function(){return null===this.checkBufferTimeout_},a.resetEverything=function(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},a.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},a.resyncLoader=function(){this.transmuxer_&&Fa_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},a.remove=function(t,s,h,v){if(void 0===h&&(h=function(){}),void 0===v&&(v=!1),s===1/0&&(s=this.duration_()),s<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var S=1,x=function(){0==--S&&h()};for(var R in(v||!this.audioDisabled_)&&(S++,this.sourceUpdater_.removeAudio(t,s,x)),(v||"main"===this.loaderType_)&&(this.gopBuffer_=function(u,a,o,t){for(var s=Math.ceil((a-t)*yr.ONE_SECOND_IN_TS),h=Math.ceil((o-t)*yr.ONE_SECOND_IN_TS),v=u.slice(),S=u.length;S--&&!(u[S].pts<=h););if(-1===S)return v;for(var x=S+1;x--&&!(u[x].pts<=s););return x=Math.max(x,0),v.splice(x,S-x+1),v}(this.gopBuffer_,t,s,this.timeMapping_),S++,this.sourceUpdater_.removeVideo(t,s,x)),this.inbandTextTracks_)rf(t,s,this.inbandTextTracks_[R]);rf(t,s,this.segmentMetadataTrack_),x()}else this.logger_("skipping remove because no source updater or starting media info")},a.monitorBuffer_=function(){this.checkBufferTimeout_&&Y().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Y().setTimeout(this.monitorBufferTick_.bind(this),1)},a.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Y().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Y().setTimeout(this.monitorBufferTick_.bind(this),500)},a.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();!t||("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},a.isEndOfStream_=function(t,s,h){if(void 0===t&&(t=this.mediaIndex),void 0===s&&(s=this.playlist_),void 0===h&&(h=this.partIndex),!s||!this.mediaSource_)return!1;var v="number"==typeof t&&s.segments[t];return s.endList&&"open"===this.mediaSource_.readyState&&t+1===s.segments.length&&(!v||!v.parts||h+1===v.parts.length)},a.chooseNextRequest_=function(){var t=this.buffered_(),s=pd(t)||0,h=gd(t,this.currentTime_()),v=!this.hasPlayed_()&&h>=1,S=h>=this.goalBufferLength_(),x=this.playlist_.segments;if(!x.length||v||S)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var R={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(R.isSyncRequest)R.mediaIndex=function(u,a,o){a=a||[];for(var t=[],s=0,h=0;h<a.length;h++){var v=a[h];if(u===v.timeline&&(t.push(h),(s+=v.duration)>o))return h}return 0===t.length?0:t[t.length-1]}(this.currentTimeline_,x,s);else if(null!==this.mediaIndex){var ee=x[this.mediaIndex],q="number"==typeof this.partIndex?this.partIndex:-1;R.startOfSegment=ee.end?ee.end:s,ee.parts&&ee.parts[q+1]?(R.mediaIndex=this.mediaIndex,R.partIndex=q+1):R.mediaIndex=this.mediaIndex+1}else{var _e=no.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),Re=_e.segmentIndex,Le=_e.startTime,Ve=_e.partIndex;R.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),R.mediaIndex=Re,R.startOfSegment=Le,R.partIndex=Ve}var zt=x[R.mediaIndex],vn=zt&&"number"==typeof R.partIndex&&zt.parts&&zt.parts[R.partIndex];if(!zt||"number"==typeof R.partIndex&&!vn)return null;if("number"!=typeof R.partIndex&&zt.parts&&(R.partIndex=0,vn=zt.parts[0]),!h&&vn&&!vn.independent)if(0===R.partIndex){var kn=x[R.mediaIndex-1],rn=kn.parts&&kn.parts.length&&kn.parts[kn.parts.length-1];rn&&rn.independent&&(R.mediaIndex-=1,R.partIndex=kn.parts.length-1,R.independent="previous segment")}else zt.parts[R.partIndex-1].independent&&(R.partIndex-=1,R.independent="previous part");return R.mediaIndex>=x.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(R)},a.generateSegmentInfo_=function(t){var s=t.independent,h=t.playlist,v=t.mediaIndex,S=t.startOfSegment,x=t.isSyncRequest,R=t.partIndex,ee=t.forceTimestampOffset,q=t.getMediaInfoForTime,_e=h.segments[v],Re="number"==typeof R&&_e.parts[R],Le={requestId:"segment-loader-"+Math.random(),uri:Re&&Re.resolvedUri||_e.resolvedUri,mediaIndex:v,partIndex:Re?R:null,isSyncRequest:x,startOfSegment:S,playlist:h,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:_e.timeline,duration:Re&&Re.duration||_e.duration,segment:_e,part:Re,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:q,independent:s},Ve=void 0!==ee?ee:this.isPendingTimestampOffset_;Le.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:_e.timeline,currentTimeline:this.currentTimeline_,startOfSegment:S,buffered:this.buffered_(),overrideCheck:Ve});var zt=pd(this.sourceUpdater_.audioBuffered());return"number"==typeof zt&&(Le.audioAppendStart=zt-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(Le.gopsToAlignWith=function(u,a,o){if(null==a||!u.length)return[];var s,t=Math.ceil((a-o+3)*yr.ONE_SECOND_IN_TS);for(s=0;s<u.length&&!(u[s].pts>t);s++);return u.slice(s)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),Le},a.timestampOffsetForSegment_=function(t){return function(u){var a=u.segmentTimeline,o=u.currentTimeline,t=u.startOfSegment,s=u.buffered;return u.overrideCheck||a!==o?a<o?t:s.length?s.end(s.length-1):t:null}(t)},a.earlyAbortWhenNeeded_=function(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),h=t.bandwidth,v=this.pendingSegment_.duration,S=no.estimateSegmentRequestTime(v,h,this.playlist_,t.bytesReceived),x=function(u,a,o){return void 0===o&&(o=1),((u.length?u.end(u.length-1):0)-a)/o}(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(S<=x)){var R=function(u){var o=u.currentTime,t=u.bandwidth,s=u.duration,h=u.segmentDuration,v=u.timeUntilRebuffer,S=u.currentTimeline,x=u.syncController,R=u.master.playlists.filter(function(Le){return!no.isIncompatible(Le)}),ee=R.filter(no.isEnabled);ee.length||(ee=R.filter(function(Le){return!no.isDisabled(Le)}));var _e=ee.filter(no.hasAttribute.bind(null,"BANDWIDTH")).map(function(Le){var zt=x.getSyncPoint(Le,s,S,o)?1:2;return{playlist:Le,rebufferingImpact:no.estimateSegmentRequestTime(h,t,Le)*zt-v}}),Re=_e.filter(function(Le){return Le.rebufferingImpact<=0});return _d(Re,function(Le,Ve){return tf(Ve.playlist,Le.playlist)}),Re.length?Re[0]:(_d(_e,function(Le,Ve){return Le.rebufferingImpact-Ve.rebufferingImpact}),_e[0]||null)}({master:this.vhs_.playlists.master,currentTime:s,bandwidth:h,duration:this.duration_(),segmentDuration:v,timeUntilRebuffer:x,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(R){var _e=.5;x<=Nl&&(_e=1),R.playlist&&R.playlist.uri!==this.playlist_.uri&&!(S-x-R.rebufferingImpact<_e)&&(this.bandwidth=R.playlist.attributes.BANDWIDTH*Vo.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},a.handleAbort_=function(t){this.logger_("Aborting "+bl(t)),this.mediaRequestsAborted+=1},a.handleProgress_=function(t,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},a.handleTrackInfo_=function(t,s){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(s)||(function(u,a){if(!u&&!a||!u&&a||u&&!a)return!1;if(u===a)return!0;var o=Object.keys(u).sort(),t=Object.keys(a).sort();if(o.length!==t.length)return!1;for(var s=0;s<o.length;s++){var h=o[s];if(h!==t[s]||u[h]!==a[h])return!1}return!0}(this.currentMediaInfo_,s=s||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},a.handleTimingInfo_=function(t,s,h,v){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var S=this.pendingSegment_,x=Pm(s);S[x]=S[x]||{},S[x][h]=v,this.logger_("timinginfo: "+s+" - "+h+" - "+v),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},a.handleCaptions_=function(t,s){var h=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(0===s.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,s));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),x={};s.forEach(function(R){x[R.stream]=x[R.stream]||{startTime:1/0,captions:[],endTime:0};var ee=x[R.stream];ee.startTime=Math.min(ee.startTime,R.startTime+S),ee.endTime=Math.max(ee.endTime,R.endTime+S),ee.captions.push(R)}),Object.keys(x).forEach(function(R){var ee=x[R],q=ee.startTime,_e=ee.endTime,Re=ee.captions,Le=h.inbandTextTracks_;h.logger_("adding cues from "+q+" -> "+_e+" for "+R),function(u,a,o){if(!u[o]){a.trigger({type:"usage",name:"vhs-608"}),a.trigger({type:"usage",name:"hls-608"});var t=o;/^cc708_/.test(o)&&(t="SERVICE"+o.split("_")[1]);var s=a.textTracks().getTrackById(t);if(s)u[o]=s;else{var v=o,S=o,x=!1,R=(a.options_.vhs&&a.options_.vhs.captionServices||{})[t];R&&(v=R.label,S=R.language,x=R.default),u[o]=a.addRemoteTextTrack({kind:"captions",id:t,default:x,label:v,language:S},!1).track}}}(Le,h.vhs_.tech_,R),rf(q,_e,Le[R]),function(u){var a=u.inbandTextTracks,o=u.captionArray,t=u.timestampOffset;if(o){var s=Y().WebKitDataCue||Y().VTTCue;o.forEach(function(h){a[h.stream].addCue(new s(h.startTime+t,h.endTime+t,h.text))})}}({captionArray:Re,inbandTextTracks:Le,timestampOffset:S})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},a.handleId3_=function(t,s,h){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,s,h));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(u,a,o){u.metadataTrack_||(u.metadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,u.metadataTrack_.inBandMetadataTrackDispatchType=a)})(this.inbandTextTracks_,h,this.vhs_.tech_),function(u){var a=u.inbandTextTracks,o=u.metadataArray,t=u.timestampOffset,s=u.videoDuration;if(o){var h=Y().WebKitDataCue||Y().VTTCue,v=a.metadataTrack_;if(v&&(o.forEach(function(_e){var Re=_e.cueTime+t;"number"!=typeof Re||Y().isNaN(Re)||Re<0||!(Re<1/0)||_e.frames.forEach(function(Le){var Ve=new h(Re,Re,Le.value||Le.url||Le.data||"");Ve.frame=Le,Ve.value=Le,function(u){Object.defineProperties(u.frame,{id:{get:function(){return kt.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),u.value.key}},value:{get:function(){return kt.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),u.value.data}},privateData:{get:function(){return kt.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),u.value.data}}})}(Ve),v.addCue(Ve)})}),v.cues&&v.cues.length)){for(var S=v.cues,x=[],R=0;R<S.length;R++)S[R]&&x.push(S[R]);var ee=x.reduce(function(_e,Re){var Le=_e[Re.startTime]||[];return Le.push(Re),_e[Re.startTime]=Le,_e},{}),q=Object.keys(ee).sort(function(_e,Re){return Number(_e)-Number(Re)});q.forEach(function(_e,Re){var Le=ee[_e],Ve=Number(q[Re+1])||s;Le.forEach(function(zt){zt.endTime=Ve})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:S,videoDuration:this.duration_()})}},a.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(t){return t()}),this.metadataQueue_.caption.forEach(function(t){return t()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},a.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach(function(s){return s()})},a.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(function(s){return s()})},a.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&rp({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},a.getCurrentMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},a.getMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},a.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,s=this.getCurrentMediaInfo_();return!(!t||!s||s.hasVideo&&!t.videoTimingInfo||s.hasAudio&&!this.audioDisabled_&&!s.isMuxed&&!t.audioTimingInfo||rp({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},a.handleData_=function(t,s){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,t,s));var h=this.pendingSegment_;if(this.setTimeMapping_(h.timeline),this.updateMediaSecondsLoaded_(h.part||h.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),h.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),h.isFmp4=t.isFmp4,h.timingInfo=h.timingInfo||{},h.isFmp4)this.trigger("fmp4"),h.timingInfo.start=h[Pm(s.type)].start;else{var x,v=this.getCurrentMediaInfo_(),S="main"===this.loaderType_&&v&&v.hasVideo;S&&(x=h.videoTimingInfo.start),h.timingInfo.start=this.trueSegmentStart_({currentStart:h.timingInfo.start,playlist:h.playlist,mediaIndex:h.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:S,firstVideoFrameTimeForData:x,videoTimingInfo:h.videoTimingInfo,audioTimingInfo:h.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(h,s.type),this.updateSourceBufferTimestampOffset_(h),h.isSyncRequest){this.updateTimingInfoEnd_(h),this.syncController_.saveSegmentTimingInfo({segmentInfo:h,shouldSaveTimelineMapping:"main"===this.loaderType_});var R=this.chooseNextRequest_();if(R.mediaIndex!==h.mediaIndex||R.partIndex!==h.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}h.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(h,s)}}},a.updateAppendInitSegmentStatus=function(t,s){"main"===this.loaderType_&&"number"==typeof t.timestampOffset&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==t.playlist&&(this.appendInitSegment_[s]=!0)},a.getInitSegmentAndUpdateState_=function(t){var s=t.type,h=t.initSegment,v=t.map,S=t.playlist;if(v){var x=oh(v);if(this.activeInitSegmentId_===x)return null;h=this.initSegmentForMap(v,!0).bytes,this.activeInitSegmentId_=x}return h&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=S,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,h):null},a.handleQuotaExceededError_=function(t,s){var h=this,v=t.segmentInfo,S=t.type,x=t.bytes,R=this.sourceUpdater_.audioBuffered(),ee=this.sourceUpdater_.videoBuffered();R.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+hc(R).join(", ")),ee.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+hc(ee).join(", "));var q=R.length?R.start(0):0,_e=R.length?R.end(R.length-1):0,Re=ee.length?ee.start(0):0,Le=ee.length?ee.end(ee.length-1):0;if(_e-q<=1&&Le-Re<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+x.byteLength+", audio buffer: "+hc(R).join(", ")+", video buffer: "+hc(ee).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:v,type:S,bytes:x}));var zt=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+zt),this.remove(0,zt,function(){h.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),h.waitingOnRemove_=!1,h.quotaExceededErrorRetryTimeout_=Y().setTimeout(function(){h.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),h.quotaExceededErrorRetryTimeout_=null,h.processCallQueue_()},1e3)},!0)},a.handleAppendError_=function(t,s){var h=t.segmentInfo,v=t.type,S=t.bytes;if(s){if(22===s.code)return void this.handleQuotaExceededError_({segmentInfo:h,type:v,bytes:S});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(v+" append of "+S.length+"b failed for segment #"+h.mediaIndex+" in playlist "+h.playlist.id),this.trigger("appenderror")}},a.appendToSourceBuffer_=function(t){var s=t.segmentInfo,h=t.type,v=t.initSegment,S=t.data,x=t.bytes;if(!x){var R=[S],ee=S.byteLength;v&&(R.unshift(v),ee+=v.byteLength),x=function(u){var o,a=0;return u.bytes&&(o=new Uint8Array(u.bytes),u.segments.forEach(function(t){o.set(t,a),a+=t.byteLength})),o}({bytes:ee,segments:R})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:h,bytes:x},this.handleAppendError_.bind(this,{segmentInfo:s,type:h,bytes:x}))},a.handleSegmentTimingInfo_=function(t,s,h){if(this.pendingSegment_&&s===this.pendingSegment_.requestId){var v=this.pendingSegment_.segment,S=t+"TimingInfo";v[S]||(v[S]={}),v[S].transmuxerPrependedSeconds=h.prependedContentDuration||0,v[S].transmuxedPresentationStart=h.start.presentation,v[S].transmuxedDecodeStart=h.start.decode,v[S].transmuxedPresentationEnd=h.end.presentation,v[S].transmuxedDecodeEnd=h.end.decode,v[S].baseMediaDecodeTime=h.baseMediaDecodeTime}},a.appendData_=function(t,s){var h=s.type,v=s.data;if(v&&v.byteLength&&("audio"!==h||!this.audioDisabled_)){var S=this.getInitSegmentAndUpdateState_({type:h,initSegment:s.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:h,initSegment:S,data:v})}},a.loadSegment_=function(t){var s=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(function(){var h=Me({},t,{forceTimestampOffset:!0});Me(t,s.generateSegmentInfo_(h)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(t)})},a.updateTransmuxerAndRequestSegment_=function(t){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var h=this.createSimplifiedSegmentObj_(t),R=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)||null!==this.mediaIndex&&t.timeline!==this.currentTimeline_&&t.timeline>0;this.logger_("Requesting "+bl(t)),h.map&&!h.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=Fv({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:h,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:R,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(q){var _e=q.message,Re=q.level,Le=q.stream;s.logger_(bl(t)+" logged from transmuxer stream "+Le+" as a "+Re+": "+_e)}})},a.trimBackBuffer_=function(t){var s=function(u,a,o){var t=a-Vo.BACK_BUFFER_LENGTH;return u.length&&(t=Math.max(t,u.start(0))),Math.min(a-o,t)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},a.createSimplifiedSegmentObj_=function(t){var s=t.segment,h=t.part,v={resolvedUri:h?h.resolvedUri:s.resolvedUri,byterange:h?h.byterange:s.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},S=t.playlist.segments[t.mediaIndex-1];if(S&&S.timeline===s.timeline&&(S.videoTimingInfo?v.baseStartTime=S.videoTimingInfo.transmuxedDecodeEnd:S.audioTimingInfo&&(v.baseStartTime=S.audioTimingInfo.transmuxedDecodeEnd)),s.key){var x=s.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);v.key=this.segmentKey(s.key),v.key.iv=x}return s.map&&(v.map=this.initSegmentForMap(s.map)),v},a.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},a.saveBandwidthRelatedStats_=function(t,s){this.pendingSegment_.byteLength=s.bytesReceived,t<sf?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record "+sf):(this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime)},a.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},a.segmentRequestFinished_=function(t,s,h){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,s,h));else if(this.saveTransferStats_(s.stats),this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",-102===t.code)return;return this.pause(),-101===t.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}var v=this.pendingSegment_;this.saveBandwidthRelatedStats_(v.duration,s.stats),v.endOfAllRequests=s.endOfAllRequests,h.gopInfo&&(this.gopBuffer_=function(u,a,o){if(!a.length)return u;if(o)return a.slice();for(var t=a[0].pts,s=0;s<u.length&&!(u[s].pts>=t);s++);return u.slice(0,s).concat(a)}(this.gopBuffer_,h.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(v)}},a.setTimeMapping_=function(t){var s=this.syncController_.mappingForTimeline(t);null!==s&&(this.timeMapping_=s)},a.updateMediaSecondsLoaded_=function(t){this.mediaSecondsLoaded+="number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:t.duration},a.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},a.trueSegmentStart_=function(t){var s=t.currentStart,v=t.mediaIndex,S=t.firstVideoFrameTimeForData;if(void 0!==s)return s;if(!t.useVideoTimingInfo)return t.audioTimingInfo.start;var _e=t.playlist.segments[v-1];return 0!==v&&_e&&void 0!==_e.start&&_e.end===S+t.currentVideoTimestampOffset?t.videoTimingInfo.start:S},a.waitForAppendsToComplete_=function(t){var s=this.getCurrentMediaInfo_(t);if(!s)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var x="main"===this.loaderType_&&s.hasVideo,R=!this.audioDisabled_&&s.hasAudio&&!s.isMuxed;if(t.waitingOnAppends=0,!t.hasAppendedData_)return!t.timingInfo&&"number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);x&&t.waitingOnAppends++,R&&t.waitingOnAppends++,x&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),R&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},a.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},a.checkForIllegalMediaSwitch=function(t){var s=function(u,a,o){return"main"===u&&a&&o?o.hasAudio||o.hasVideo?a.hasVideo&&!o.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.hasVideo&&o.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!s&&(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0)},a.updateSourceBufferTimestampOffset_=function(t){if(null!==t.timestampOffset&&"number"==typeof t.timingInfo.start&&!t.changedTimestampOffset&&"main"===this.loaderType_){var s=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),s=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},a.getSegmentStartTimeForTimestampOffsetCalculation_=function(t){var s=t.videoTimingInfo,h=t.audioTimingInfo,v=t.timingInfo;return this.useDtsForTimestampOffset_?s&&"number"==typeof s.transmuxedDecodeStart?s.transmuxedDecodeStart:h&&"number"==typeof h.transmuxedDecodeStart?h.transmuxedDecodeStart:v.start:v.start},a.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var s=this.getMediaInfo_(),v="main"===this.loaderType_&&s&&s.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;!v||(t.timingInfo.end="number"==typeof v.end?v.end:v.start+t.duration)},a.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=function(u,a){if("hls"!==a)return null;var o=function(u){var a=0;return["video","audio"].forEach(function(o){var t=u[o+"TimingInfo"];if(t){var v,s=t.start,h=t.end;"bigint"==typeof s||"bigint"==typeof h?v=Y().BigInt(h)-Y().BigInt(s):"number"==typeof s&&"number"==typeof h&&(v=h-s),void 0!==v&&v>a&&(a=v)}}),"bigint"==typeof a&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),a}({audioTimingInfo:u.audioTimingInfo,videoTimingInfo:u.videoTimingInfo});if(!o)return null;var t=u.playlist.targetDuration,s=bd({segmentDuration:o,maxDuration:2*t}),h=bd({segmentDuration:o,maxDuration:t});return s||h?{severity:s?"warn":"info",message:"Segment with index "+u.mediaIndex+" from playlist "+u.playlist.id+" has a duration of "+o+" when the reported duration is "+u.duration+" and the target duration is "+t+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(t,this.sourceType_);if(s&&("warn"===s.severity?kt.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",!t.isSyncRequest||(this.trigger("syncinfoupdate"),t.hasAppendedData_)){this.logger_("Appended "+bl(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var h=t.segment,v=t.part,S=h.end&&this.currentTime_()-h.end>3*t.playlist.targetDuration,x=v&&v.end&&this.currentTime_()-v.end>3*t.playlist.partTargetDuration;if(S||x)return this.logger_("bad "+(S?"segment":"part")+" "+bl(t)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+bl(t))},a.recordThroughput_=function(t){if(t.duration<sf)this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record "+sf);else{var s=this.throughput.rate,h=Date.now()-t.endOfAllRequests+1,v=Math.floor(t.byteLength/h*8*1e3);this.throughput.rate+=(v-s)/++this.throughput.count}},a.addSegmentMetadataCue_=function(t){if(this.segmentMetadataTrack_){var s=t.segment,h=s.start,v=s.end;if(km(h)&&km(v)){rf(h,v,this.segmentMetadataTrack_);var S=Y().WebKitDataCue||Y().VTTCue,x={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:h,end:v},ee=new S(h,v,JSON.stringify(x));ee.value=x,this.segmentMetadataTrack_.addCue(ee)}}},u}(kt.EventTarget);function Pu(){}var gc,mh=function(u){return"string"!=typeof u?u:u.replace(/./,function(a){return a.toUpperCase()})},Om=["video","audio"],Qu=function(u,a){var o=a[u+"Buffer"];return o&&o.updating||a.queuePending[u]},Rm=function g(u,a){if(0!==a.queue.length){var o=0,t=a.queue[o];if("mediaSource"===t.type)return void(!a.updating()&&"closed"!==a.mediaSource.readyState&&(a.queue.shift(),t.action(a),t.doneFn&&t.doneFn(),g("audio",a),g("video",a)));if("mediaSource"!==u&&a.ready()&&"closed"!==a.mediaSource.readyState&&!Qu(u,a)){if(t.type!==u){if(o=function(u,a){for(var o=0;o<a.length;o++){var t=a[o];if("mediaSource"===t.type)return null;if(t.type===u)return o}return null}(u,a.queue),null===o)return;t=a.queue[o]}if(a.queue.splice(o,1),a.queuePending[u]=t,t.action(u,a),!t.doneFn)return a.queuePending[u]=null,void g(u,a)}}},gg=function(u,a){var o=a[u+"Buffer"],t=mh(u);!o||(o.removeEventListener("updateend",a["on"+t+"UpdateEnd_"]),o.removeEventListener("error",a["on"+t+"Error_"]),a.codecs[u]=null,a[u+"Buffer"]=null)},ja=function(u,a){return u&&a&&-1!==Array.prototype.indexOf.call(u.sourceBuffers,a)},mu_appendBuffer=function(u,a,o){return function(t,s){var h=s[t+"Buffer"];if(ja(s.mediaSource,h)){s.logger_("Appending segment "+a.mediaIndex+"'s "+u.length+" bytes to "+t+"Buffer");try{h.appendBuffer(u)}catch(v){s.logger_("Error with code "+v.code+" "+(22===v.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+a.mediaIndex+" to "+t+"Buffer"),s.queuePending[t]=null,o(v)}}}},mu_remove=function(u,a){return function(o,t){var s=t[o+"Buffer"];if(ja(t.mediaSource,s)){t.logger_("Removing "+u+" to "+a+" from "+o+"Buffer");try{s.remove(u,a)}catch(h){t.logger_("Remove "+u+" to "+a+" from "+o+"Buffer failed")}}}},mu_timestampOffset=function(u){return function(a,o){var t=o[a+"Buffer"];!ja(o.mediaSource,t)||(o.logger_("Setting "+a+"timestampOffset to "+u),t.timestampOffset=u)}},mu_callback=function(u){return function(a,o){u()}},mu_endOfStream=function(u){return function(a){if("open"===a.mediaSource.readyState){a.logger_("Calling mediaSource endOfStream("+(u||"")+")");try{a.mediaSource.endOfStream(u)}catch(o){kt.log.warn("Failed to call media source endOfStream",o)}}}},mu_duration=function(u){return function(a){a.logger_("Setting mediaSource duration to "+u);try{a.mediaSource.duration=u}catch(o){kt.log.warn("Failed to set media source duration",o)}}},mu_addSourceBuffer=function(u,a){return function(o){var t=mh(u),s=pr(a);o.logger_("Adding "+u+"Buffer with codec "+a+" to mediaSource");var h=o.mediaSource.addSourceBuffer(s);h.addEventListener("updateend",o["on"+t+"UpdateEnd_"]),h.addEventListener("error",o["on"+t+"Error_"]),o.codecs[u]=a,o[u+"Buffer"]=h}},mu_removeSourceBuffer=function(u){return function(a){var o=a[u+"Buffer"];if(gg(u,a),ja(a.mediaSource,o)){a.logger_("Removing "+u+"Buffer with codec "+a.codecs[u]+" from mediaSource");try{a.mediaSource.removeSourceBuffer(o)}catch(t){kt.log.warn("Failed to removeSourceBuffer "+u+"Buffer",t)}}}},mu_changeType=function(u){return function(a,o){var t=o[a+"Buffer"],s=pr(u);!ja(o.mediaSource,t)||o.codecs[a]!==u&&(o.logger_("changing "+a+"Buffer codec from "+o.codecs[a]+" to "+u),t.changeType(s),o.codecs[a]=u)}},vu=function(u){var a=u.type,o=u.sourceUpdater;o.queue.push({type:a,action:u.action,doneFn:u.doneFn,name:u.name}),Rm(a,o)},$v=function(u,a){return function(o){if(a.queuePending[u]){var t=a.queuePending[u].doneFn;a.queuePending[u]=null,t&&t(a[u+"Error_"])}Rm(u,a)}},Wv=function(g){function u(o){var t;return(t=g.call(this)||this).mediaSource=o,t.sourceopenListener_=function(){return Rm("mediaSource",Je(t))},t.mediaSource.addEventListener("sourceopen",t.sourceopenListener_),t.logger_=Au("SourceUpdater"),t.audioTimestampOffset_=0,t.videoTimestampOffset_=0,t.queue=[],t.queuePending={audio:null,video:null},t.delayedAudioAppendQueue_=[],t.videoAppendQueued_=!1,t.codecs={},t.onVideoUpdateEnd_=$v("video",Je(t)),t.onAudioUpdateEnd_=$v("audio",Je(t)),t.onVideoError_=function(s){t.videoError_=s},t.onAudioError_=function(s){t.audioError_=s},t.createdSourceBuffers_=!1,t.initializedEme_=!1,t.triggeredReady_=!1,t}it(u,g);var a=u.prototype;return a.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},a.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},a.hasInitializedAnyEme=function(){return this.initializedEme_},a.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},a.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},a.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},a.addSourceBuffer=function(t,s){vu({type:"mediaSource",sourceUpdater:this,action:mu_addSourceBuffer(t,s),name:"addSourceBuffer"})},a.abort=function(t){vu({type:t,sourceUpdater:this,action:function(u,a){if("open"===a.mediaSource.readyState){var o=a[u+"Buffer"];if(ja(a.mediaSource,o)){a.logger_("calling abort on "+u+"Buffer");try{o.abort()}catch(t){kt.log.warn("Failed to abort on "+u+"Buffer",t)}}}},name:"abort"})},a.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?vu({type:"mediaSource",sourceUpdater:this,action:mu_removeSourceBuffer(t),name:"removeSourceBuffer"}):kt.log.error("removeSourceBuffer is not supported!")},a.canRemoveSourceBuffer=function(){return!kt.browser.IE_VERSION&&!kt.browser.IS_FIREFOX&&Y().MediaSource&&Y().MediaSource.prototype&&"function"==typeof Y().MediaSource.prototype.removeSourceBuffer},u.canChangeType=function(){return Y().SourceBuffer&&Y().SourceBuffer.prototype&&"function"==typeof Y().SourceBuffer.prototype.changeType},a.canChangeType=function(){return this.constructor.canChangeType()},a.changeType=function(t,s){this.canChangeType()?vu({type:t,sourceUpdater:this,action:mu_changeType(s),name:"changeType"}):kt.log.error("changeType is not supported!")},a.addOrChangeSourceBuffers=function(t){var s=this;if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(function(h){var v=t[h];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(h,v);s.canChangeType()&&s.changeType(h,v)})},a.appendBuffer=function(t,s){var h=this,v=t.segmentInfo,S=t.type,x=t.bytes;if(this.processedAppend_=!0,"audio"===S&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,s]),void this.logger_("delayed audio append of "+x.length+" until video append");if(vu({type:S,sourceUpdater:this,action:mu_appendBuffer(x,v||{mediaIndex:-1},s),doneFn:s,name:"appendBuffer"}),"video"===S){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var ee=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+ee.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,ee.forEach(function(q){h.appendBuffer.apply(h,q)})}},a.audioBuffered=function(){return ja(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:kt.createTimeRange()},a.videoBuffered=function(){return ja(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:kt.createTimeRange()},a.buffered=function(){var t=ja(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=ja(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!t?this.audioBuffered():t&&!s?this.videoBuffered():function(u,a){var o=null,t=null,s=0,h=[],v=[];if(!(u&&u.length&&a&&a.length))return kt.createTimeRange();for(var S=u.length;S--;)h.push({time:u.start(S),type:"start"}),h.push({time:u.end(S),type:"end"});for(S=a.length;S--;)h.push({time:a.start(S),type:"start"}),h.push({time:a.end(S),type:"end"});for(h.sort(function(x,R){return x.time-R.time}),S=0;S<h.length;S++)"start"===h[S].type?2==++s&&(o=h[S].time):"end"===h[S].type&&1==--s&&(t=h[S].time),null!==o&&null!==t&&(v.push([o,t]),o=null,t=null);return kt.createTimeRanges(v)}(this.audioBuffered(),this.videoBuffered())},a.setDuration=function(t,s){void 0===s&&(s=Pu),vu({type:"mediaSource",sourceUpdater:this,action:mu_duration(t),name:"duration",doneFn:s})},a.endOfStream=function(t,s){void 0===t&&(t=null),void 0===s&&(s=Pu),"string"!=typeof t&&(t=void 0),vu({type:"mediaSource",sourceUpdater:this,action:mu_endOfStream(t),name:"endOfStream",doneFn:s})},a.removeAudio=function(t,s,h){void 0===h&&(h=Pu),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?vu({type:"audio",sourceUpdater:this,action:mu_remove(t,s),doneFn:h,name:"remove"}):h()},a.removeVideo=function(t,s,h){void 0===h&&(h=Pu),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?vu({type:"video",sourceUpdater:this,action:mu_remove(t,s),doneFn:h,name:"remove"}):h()},a.updating=function(){return!(!Qu("audio",this)&&!Qu("video",this))},a.audioTimestampOffset=function(t){return void 0!==t&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(vu({type:"audio",sourceUpdater:this,action:mu_timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},a.videoTimestampOffset=function(t){return void 0!==t&&this.videoBuffer&&this.videoTimestampOffset!==t&&(vu({type:"video",sourceUpdater:this,action:mu_timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},a.audioQueueCallback=function(t){!this.audioBuffer||vu({type:"audio",sourceUpdater:this,action:mu_callback(t),name:"callback"})},a.videoQueueCallback=function(t){!this.videoBuffer||vu({type:"video",sourceUpdater:this,action:mu_callback(t),name:"callback"})},a.dispose=function(){var t=this;this.trigger("dispose"),Om.forEach(function(s){t.abort(s),t.canRemoveSourceBuffer()?t.removeSourceBuffer(s):t[s+"QueueCallback"](function(){return gg(s,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},u}(kt.EventTarget),Xu=function(u){return decodeURIComponent(escape(String.fromCharCode.apply(null,u)))},af=new Uint8Array("\n\n".split("").map(function(g){return g.charCodeAt(0)})),zv=function(g){function u(o,t){var s;return void 0===t&&(t={}),(s=g.call(this,o,t)||this).mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=o.featuresNativeTextTracks,s.shouldSaveSegmentTimingInfo_=!1,s}it(u,g);var a=u.prototype;return a.createTransmuxer_=function(){return null},a.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return kt.createTimeRanges();var t=this.subtitlesTrack_.cues;return kt.createTimeRanges([[t[0].startTime,t[t.length-1].startTime]])},a.initSegmentForMap=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=oh(t),v=this.initSegments_[h];if(s&&!v&&t.bytes){var x=new Uint8Array(af.byteLength+t.bytes.byteLength);x.set(t.bytes),x.set(af,t.bytes.byteLength),this.initSegments_[h]=v={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:x}}return v||t},a.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},a.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},a.track=function(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},a.remove=function(t,s){rf(t,s,this.subtitlesTrack_)},a.fillBuffer_=function(){var t=this,s=this.chooseNextRequest_();if(s){if(null===this.syncController_.timestampOffsetForTimeline(s.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(s)}},a.timestampOffsetForSegment_=function(){return null},a.chooseNextRequest_=function(){return this.skipEmptySegments_(g.prototype.chooseNextRequest_.call(this))},a.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},a.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},a.segmentRequestFinished_=function(t,s,h){var v=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(s.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return-101===t.code&&this.handleTimeout_(),-102===t.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var S=this.pendingSegment_;this.saveBandwidthRelatedStats_(S.duration,s.stats),this.state="APPENDING",this.trigger("appending");var x=S.segment;if(x.map&&(x.map.bytes=s.map.bytes),S.bytes=s.bytes,"function"!=typeof Y().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var R,ee=function(){v.subtitlesTrack_.tech_.off("vttjsloaded",R),v.stopForError({message:"Error loading vtt.js"})};return R=function(){v.subtitlesTrack_.tech_.off("vttjserror",ee),v.segmentRequestFinished_(t,s,h)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",R),void this.subtitlesTrack_.tech_.one("vttjserror",ee)}x.requested=!0;try{this.parseVTTCues_(S)}catch(q){return void this.stopForError({message:q.message})}if(this.updateTimeMapping_(S,this.syncController_.timelines[S.timeline],this.playlist_),S.timingInfo=S.cues.length?{start:S.cues[0].startTime,end:S.cues[S.cues.length-1].endTime}:{start:S.startOfSegment,end:S.startOfSegment+S.duration},S.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");S.byteLength=S.bytes.byteLength,this.mediaSecondsLoaded+=x.duration,S.cues.forEach(function(q){v.subtitlesTrack_.addCue(v.featuresNativeTextTracks_?new(Y().VTTCue)(q.startTime,q.endTime,q.text):q)}),function(u){var a=u.cues;if(a)for(var o=0;o<a.length;o++){for(var t=[],s=0,h=0;h<a.length;h++)a[o].startTime===a[h].startTime&&a[o].endTime===a[h].endTime&&a[o].text===a[h].text&&++s>1&&t.push(a[h]);t.length&&t.forEach(function(v){return u.removeCue(v)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},a.handleData_=function(){},a.updateTimingInfoEnd_=function(){},a.parseVTTCues_=function(t){var s,h=!1;"function"==typeof Y().TextDecoder?s=new(Y().TextDecoder)("utf8"):(s=Y().WebVTT.StringDecoder(),h=!0);var v=new(Y().WebVTT.Parser)(Y(),Y().vttjs,s);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},v.oncue=t.cues.push.bind(t.cues),v.ontimestampmap=function(R){t.timestampmap=R},v.onparsingerror=function(R){kt.log.warn("Error encountered when parsing cues: "+R.message)},t.segment.map){var S=t.segment.map.bytes;h&&(S=Xu(S)),v.parse(S)}var x=t.bytes;h&&(x=Xu(x)),v.parse(x),v.flush()},a.updateTimeMapping_=function(t,s,h){var v=t.segment;if(s){if(!t.cues.length)return void(v.empty=!0);var S=t.timestampmap,x=S.MPEGTS/yr.ONE_SECOND_IN_TS-S.LOCAL+s.mapping;t.cues.forEach(function(q){q.startTime+=x,q.endTime+=x}),h.syncInfo||(h.syncInfo={mediaSequence:h.mediaSequence+t.mediaIndex,time:Math.min(t.cues[0].startTime,t.cues[t.cues.length-1].startTime-v.duration)})}},u}(gh),Nm=function(u,a){for(var o=u.cues,t=0;t<o.length;t++){var s=o[t];if(a>=s.adStartTime&&a<=s.adEndTime)return s}return null},Fm=[{name:"VOD",run:function(u,a,o,t,s){return o!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(u,a,o,t,s){if(!Object.keys(u.timelineToDatetimeMappings).length)return null;var h=null,v=null,S=zh(a);s=s||0;for(var x=0;x<S.length;x++){var ee=S[a.endList||0===s?x:S.length-(x+1)],q=ee.segment,_e=u.timelineToDatetimeMappings[q.timeline];if(_e&&q.dateTimeObject){var Le=q.dateTimeObject.getTime()/1e3+_e;if(q.parts&&"number"==typeof ee.partIndex)for(var Ve=0;Ve<ee.partIndex;Ve++)Le+=q.parts[Ve].duration;var zt=Math.abs(s-Le);if(null!==v&&(0===zt||v<zt))break;v=zt,h={time:Le,segmentIndex:ee.segmentIndex,partIndex:ee.partIndex}}}return h}},{name:"Segment",run:function(u,a,o,t,s){var h=null,v=null;s=s||0;for(var S=zh(a),x=0;x<S.length;x++){var ee=S[a.endList||0===s?x:S.length-(x+1)],q=ee.segment,_e=ee.part&&ee.part.start||q&&q.start;if(q.timeline===t&&void 0!==_e){var Re=Math.abs(s-_e);if(null!==v&&v<Re)break;(!h||null===v||v>=Re)&&(v=Re,h={time:_e,segmentIndex:ee.segmentIndex,partIndex:ee.partIndex})}}return h}},{name:"Discontinuity",run:function(u,a,o,t,s){var h=null;if(s=s||0,a.discontinuityStarts&&a.discontinuityStarts.length)for(var v=null,S=0;S<a.discontinuityStarts.length;S++){var x=a.discontinuityStarts[S],ee=u.discontinuities[a.discontinuitySequence+S+1];if(ee){var q=Math.abs(s-ee.time);if(null!==v&&v<q)break;(!h||null===v||v>=q)&&(v=q,h={time:ee.time,segmentIndex:x,partIndex:null})}}return h}},{name:"Playlist",run:function(u,a,o,t,s){return a.syncInfo?{time:a.syncInfo.time,segmentIndex:a.syncInfo.mediaSequence-a.mediaSequence,partIndex:null}:null}}],Kv=function(g){function u(o){var t;return(t=g.call(this)||this).timelines=[],t.discontinuities=[],t.timelineToDatetimeMappings={},t.logger_=Au("SyncController"),t}it(u,g);var a=u.prototype;return a.getSyncPoint=function(t,s,h,v){var S=this.runStrategies_(t,s,h,v);return S.length?this.selectSyncPoint_(S,{key:"time",value:v}):null},a.getExpiredTime=function(t,s){if(!t||!t.segments)return null;var h=this.runStrategies_(t,s,t.discontinuitySequence,0);if(!h.length)return null;var v=this.selectSyncPoint_(h,{key:"segmentIndex",value:0});return v.segmentIndex>0&&(v.time*=-1),Math.abs(v.time+Fl({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:v.segmentIndex,endIndex:0}))},a.runStrategies_=function(t,s,h,v){for(var S=[],x=0;x<Fm.length;x++){var R=Fm[x],ee=R.run(this,t,s,h,v);ee&&(ee.strategy=R.name,S.push({strategy:R.name,syncPoint:ee}))}return S},a.selectSyncPoint_=function(t,s){for(var h=t[0].syncPoint,v=Math.abs(t[0].syncPoint[s.key]-s.value),S=t[0].strategy,x=1;x<t.length;x++){var R=Math.abs(t[x].syncPoint[s.key]-s.value);R<v&&(v=R,h=t[x].syncPoint,S=t[x].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy ["+S+"]: [time:"+h.time+", segmentIndex:"+h.segmentIndex+("number"==typeof h.partIndex?",partIndex:"+h.partIndex:"")+"]"),h},a.saveExpiredSegmentInfo=function(t,s){var h=s.mediaSequence-t.mediaSequence;if(h>86400)kt.log.warn("Not saving expired segment info. Media sequence gap "+h+" is too large.");else for(var v=h-1;v>=0;v--){var S=t.segments[v];if(S&&void 0!==S.start){s.syncInfo={mediaSequence:t.mediaSequence+v,time:S.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+", mediaSequence: "+s.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},a.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var s=t.segments[0],h=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-h}},a.saveSegmentTimingInfo=function(t){var s=t.segmentInfo,h=t.shouldSaveTimelineMapping,v=this.calculateSegmentTimeMapping_(s,s.timingInfo,h),S=s.segment;v&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:S.start}));var x=S.dateTimeObject;S.discontinuity&&h&&x&&(this.timelineToDatetimeMappings[S.timeline]=-x.getTime()/1e3)},a.timestampOffsetForTimeline=function(t){return void 0===this.timelines[t]?null:this.timelines[t].time},a.mappingForTimeline=function(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping},a.calculateSegmentTimeMapping_=function(t,s,h){var R,ee,v=t.segment,S=t.part,x=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)x={time:t.startOfSegment,mapping:t.startOfSegment-s.start},h&&(this.timelines[t.timeline]=x,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+x.time+"] [mapping: "+x.mapping+"]")),R=t.startOfSegment,ee=s.end+x.mapping;else{if(!x)return!1;R=s.start+x.mapping,ee=s.end+x.mapping}return S&&(S.start=R,S.end=ee),(!v.start||R<v.start)&&(v.start=R),v.end=ee,!0},a.saveDiscontinuitySyncInfo_=function(t){var s=t.playlist,h=t.segment;if(h.discontinuity)this.discontinuities[h.timeline]={time:h.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var v=0;v<s.discontinuityStarts.length;v++){var S=s.discontinuityStarts[v],x=s.discontinuitySequence+v+1,R=S-t.mediaIndex,ee=Math.abs(R);if(!this.discontinuities[x]||this.discontinuities[x].accuracy>ee){var q;q=R<0?h.start-Fl({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:t.mediaIndex,endIndex:S}):h.end+Fl({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:t.mediaIndex+1,endIndex:S}),this.discontinuities[x]={time:q,accuracy:ee}}}},a.dispose=function(){this.trigger("dispose"),this.off()},u}(kt.EventTarget),Zv=function(g){function u(){var o;return(o=g.call(this)||this).pendingTimelineChanges_={},o.lastTimelineChanges_={},o}it(u,g);var a=u.prototype;return a.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},a.pendingTimelineChange=function(t){var s=t.type,h=t.from,v=t.to;return"number"==typeof h&&"number"==typeof v&&(this.pendingTimelineChanges_[s]={type:s,from:h,to:v},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},a.lastTimelineChange=function(t){var s=t.type,h=t.from,v=t.to;return"number"==typeof h&&"number"==typeof v&&(this.lastTimelineChanges_[s]={type:s,from:h,to:v},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},a.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},u}(kt.EventTarget),r_=mm(Xf(function(){var g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(rn,tn,wn){return rn(wn={path:tn,exports:{},require:function(ln,In){return function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},wn.exports),wn.exports}var o=u(function(rn){function tn(un,ln){for(var In=0;In<ln.length;In++){var gn=ln[In];gn.enumerable=gn.enumerable||!1,gn.configurable=!0,"value"in gn&&(gn.writable=!0),Object.defineProperty(un,gn.key,gn)}}rn.exports=function wn(un,ln,In){return ln&&tn(un.prototype,ln),In&&tn(un,In),un},rn.exports.default=rn.exports,rn.exports.__esModule=!0}),t=u(function(rn){function tn(wn,un){return rn.exports=tn=Object.setPrototypeOf||function(In,gn){return In.__proto__=gn,In},rn.exports.default=rn.exports,rn.exports.__esModule=!0,tn(wn,un)}rn.exports=tn,rn.exports.default=rn.exports,rn.exports.__esModule=!0}),s=u(function(rn){rn.exports=function tn(wn,un){wn.prototype=Object.create(un.prototype),wn.prototype.constructor=wn,t(wn,un)},rn.exports.default=rn.exports,rn.exports.__esModule=!0}),h=function(){function rn(){this.listeners={}}var tn=rn.prototype;return tn.on=function(un,ln){this.listeners[un]||(this.listeners[un]=[]),this.listeners[un].push(ln)},tn.off=function(un,ln){if(!this.listeners[un])return!1;var In=this.listeners[un].indexOf(ln);return this.listeners[un]=this.listeners[un].slice(0),this.listeners[un].splice(In,1),In>-1},tn.trigger=function(un){var ln=this.listeners[un];if(ln)if(2===arguments.length)for(var In=ln.length,gn=0;gn<In;++gn)ln[gn].call(this,arguments[1]);else for(var Er=Array.prototype.slice.call(arguments,1),Wn=ln.length,Vr=0;Vr<Wn;++Vr)ln[Vr].apply(this,Er)},tn.dispose=function(){this.listeners={}},tn.pipe=function(un){this.on("data",function(ln){un.push(ln)})},rn}(),x=null,R=function(){function rn(wn){x||(x=function(){var gn,Er,Wn,Ts,Gs,Rs,Ba,ms,tn=[[[],[],[],[],[]],[[],[],[],[],[]]],wn=tn[0],un=tn[1],ln=wn[4],In=un[4],Vr=[],Ki=[];for(gn=0;gn<256;gn++)Ki[(Vr[gn]=gn<<1^283*(gn>>7))^gn]=gn;for(Er=Wn=0;!ln[Er];Er^=Ts||1,Wn=Ki[Wn]||1)for(ln[Er]=Rs=(Rs=Wn^Wn<<1^Wn<<2^Wn<<3^Wn<<4)>>8^255&Rs^99,In[Rs]=Er,ms=16843009*Vr[Gs=Vr[Ts=Vr[Er]]]^65537*Gs^257*Ts^16843008*Er,Ba=257*Vr[Rs]^16843008*Rs,gn=0;gn<4;gn++)wn[gn][Er]=Ba=Ba<<24^Ba>>>8,un[gn][Rs]=ms=ms<<24^ms>>>8;for(gn=0;gn<5;gn++)wn[gn]=wn[gn].slice(0),un[gn]=un[gn].slice(0);return tn}()),this._tables=[[x[0][0].slice(),x[0][1].slice(),x[0][2].slice(),x[0][3].slice(),x[0][4].slice()],[x[1][0].slice(),x[1][1].slice(),x[1][2].slice(),x[1][3].slice(),x[1][4].slice()]];var un,ln,In,gn=this._tables[0][4],Er=this._tables[1],Wn=wn.length,Vr=1;if(4!==Wn&&6!==Wn&&8!==Wn)throw new Error("Invalid aes key size");var Ki=wn.slice(0),Ts=[];for(this._key=[Ki,Ts],un=Wn;un<4*Wn+28;un++)In=Ki[un-1],(un%Wn==0||8===Wn&&un%Wn==4)&&(In=gn[In>>>24]<<24^gn[In>>16&255]<<16^gn[In>>8&255]<<8^gn[255&In],un%Wn==0&&(In=In<<8^In>>>24^Vr<<24,Vr=Vr<<1^283*(Vr>>7))),Ki[un]=Ki[un-Wn]^In;for(ln=0;un;ln++,un--)In=Ki[3&ln?un:un-4],Ts[ln]=un<=4||ln<4?In:Er[0][gn[In>>>24]]^Er[1][gn[In>>16&255]]^Er[2][gn[In>>8&255]]^Er[3][gn[255&In]]}return rn.prototype.decrypt=function(un,ln,In,gn,Er,Wn){var Rs,Ba,ms,yu,Vr=this._key[1],Ki=un^Vr[0],Ts=gn^Vr[1],Gs=In^Vr[2],Lo=ln^Vr[3],mp=Vr.length/4-2,mc=4,qc=this._tables[1],Ju=qc[0],El=qc[1],Th=qc[2],$s=qc[3],Kc=qc[4];for(yu=0;yu<mp;yu++)Rs=Ju[Ki>>>24]^El[Ts>>16&255]^Th[Gs>>8&255]^$s[255&Lo]^Vr[mc],Ba=Ju[Ts>>>24]^El[Gs>>16&255]^Th[Lo>>8&255]^$s[255&Ki]^Vr[mc+1],ms=Ju[Gs>>>24]^El[Lo>>16&255]^Th[Ki>>8&255]^$s[255&Ts]^Vr[mc+2],Lo=Ju[Lo>>>24]^El[Ki>>16&255]^Th[Ts>>8&255]^$s[255&Gs]^Vr[mc+3],mc+=4,Ki=Rs,Ts=Ba,Gs=ms;for(yu=0;yu<4;yu++)Er[(3&-yu)+Wn]=Kc[Ki>>>24]<<24^Kc[Ts>>16&255]<<16^Kc[Gs>>8&255]<<8^Kc[255&Lo]^Vr[mc++],Rs=Ki,Ki=Ts,Ts=Gs,Gs=Lo,Lo=Rs},rn}(),ee=function(rn){function tn(){var un;return(un=rn.call(this,h)||this).jobs=[],un.delay=1,un.timeout_=null,un}s(tn,rn);var wn=tn.prototype;return wn.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},wn.push=function(ln){this.jobs.push(ln),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},tn}(h),q=function(tn){return tn<<24|(65280&tn)<<8|(16711680&tn)>>8|tn>>>24},Re=function(){function rn(wn,un,ln,In){var gn=rn.STEP,Er=new Int32Array(wn.buffer),Wn=new Uint8Array(wn.byteLength),Vr=0;for(this.asyncStream_=new ee,this.asyncStream_.push(this.decryptChunk_(Er.subarray(Vr,Vr+gn),un,ln,Wn)),Vr=gn;Vr<Er.length;Vr+=gn)ln=new Uint32Array([q(Er[Vr-4]),q(Er[Vr-3]),q(Er[Vr-2]),q(Er[Vr-1])]),this.asyncStream_.push(this.decryptChunk_(Er.subarray(Vr,Vr+gn),un,ln,Wn));this.asyncStream_.push(function(){In(null,function v(rn){return rn.subarray(0,rn.byteLength-rn[rn.byteLength-1])}(Wn))})}return rn.prototype.decryptChunk_=function(un,ln,In,gn){return function(){var Er=function(tn,wn,un){var Wn,Vr,Ki,Ts,Gs,Lo,Rs,Ba,ms,ln=new Int32Array(tn.buffer,tn.byteOffset,tn.byteLength>>2),In=new R(Array.prototype.slice.call(wn)),gn=new Uint8Array(tn.byteLength),Er=new Int32Array(gn.buffer);for(Wn=un[0],Vr=un[1],Ki=un[2],Ts=un[3],ms=0;ms<ln.length;ms+=4)Gs=q(ln[ms]),Lo=q(ln[ms+1]),Rs=q(ln[ms+2]),Ba=q(ln[ms+3]),In.decrypt(Gs,Lo,Rs,Ba,Er,ms),Er[ms]=q(Er[ms]^Wn),Er[ms+1]=q(Er[ms+1]^Vr),Er[ms+2]=q(Er[ms+2]^Ki),Er[ms+3]=q(Er[ms+3]^Ts),Wn=Gs,Vr=Lo,Ki=Rs,Ts=Ba;return gn}(un,ln,In);gn.set(Er,un.byteOffset)}},o(rn,null,[{key:"STEP",get:function(){return 32e3}}]),rn}(),vn=("undefined"!=typeof window?window:void 0!==g?g:"undefined"!=typeof self?self:{}).BigInt||Number;vn("0x1"),vn("0x100"),vn("0x10000"),vn("0x1000000"),vn("0x100000000"),vn("0x10000000000"),vn("0x1000000000000"),vn("0x100000000000000"),vn("0x10000000000000000");self.onmessage=function(rn){var tn=rn.data,wn=new Uint8Array(tn.encrypted.bytes,tn.encrypted.byteOffset,tn.encrypted.byteLength),un=new Uint32Array(tn.key.bytes,tn.key.byteOffset,tn.key.byteLength/4),ln=new Uint32Array(tn.iv.bytes,tn.iv.byteOffset,tn.iv.byteLength/4);new Re(wn,un,ln,function(In,gn){self.postMessage(function(tn){var wn={};return Object.keys(tn).forEach(function(un){var ln=tn[un];wn[un]=function(tn){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(tn):tn&&tn.buffer instanceof ArrayBuffer}(ln)?{bytes:ln.buffer,byteOffset:ln.byteOffset,byteLength:ln.byteLength}:ln}),wn}({source:tn.source,decrypted:gn}),[gn.buffer])})}})),Yv=Jp(r_),U_=function(u){var a=u.default?"main":"alternative";return u.characteristics&&u.characteristics.indexOf("public.accessibility.describes-video")>=0&&(a="main-desc"),a},ip=function(u,a){u.abort(),u.pause(),a&&a.activePlaylistLoader&&(a.activePlaylistLoader.pause(),a.activePlaylistLoader=null)},sp=function(u,a){a.activePlaylistLoader=u,u.load()},Ed={AUDIO:function(u,a){return function(){var t=a.mediaTypes[u],s=a.blacklistCurrentPlaylist;ip(a.segmentLoaders[u],t);var h=t.activeTrack(),v=t.activeGroup(),S=(v.filter(function(ee){return ee.default})[0]||v[0]).id,x=t.tracks[S];if(h!==x){for(var R in kt.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[R].enabled=t.tracks[R]===x;t.onTrackChanged()}else s({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(u,a){return function(){var o=a.segmentLoaders[u],t=a.mediaTypes[u];kt.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),ip(o,t);var s=t.activeTrack();s&&(s.mode="disabled"),t.onTrackChanged()}}},Xv={AUDIO:function(u,a,o){if(a){var t=o.tech,s=o.requestOptions,h=o.segmentLoaders[u];a.on("loadedmetadata",function(){var v=a.media();h.playlist(v,s),(!t.paused()||v.endList&&"none"!==t.preload())&&h.load()}),a.on("loadedplaylist",function(){h.playlist(a.media(),s),t.paused()||h.load()}),a.on("error",Ed[u](u,o))}},SUBTITLES:function(u,a,o){var t=o.tech,s=o.requestOptions,h=o.segmentLoaders[u],v=o.mediaTypes[u];a.on("loadedmetadata",function(){var S=a.media();h.playlist(S,s),h.track(v.activeTrack()),(!t.paused()||S.endList&&"none"!==t.preload())&&h.load()}),a.on("loadedplaylist",function(){h.playlist(a.media(),s),t.paused()||h.load()}),a.on("error",Ed[u](u,o))}},mg={AUDIO:function(u,a){var o=a.vhs,t=a.sourceType,s=a.segmentLoaders[u],h=a.requestOptions,v=a.master.mediaGroups,S=a.mediaTypes[u],x=S.groups,R=S.tracks,ee=S.logger_,q=a.masterPlaylistLoader,_e=md(q.master);for(var Re in(!v[u]||0===Object.keys(v[u]).length)&&(v[u]={main:{default:{default:!0}}},_e&&(v[u].main.default.playlists=q.master.playlists)),v[u])for(var Le in x[Re]||(x[Re]=[]),v[u][Re]){var Ve=v[u][Re][Le],zt=void 0;if(_e?(ee("AUDIO group '"+Re+"' label '"+Le+"' is a master playlist"),Ve.isMasterPlaylist=!0,zt=null):zt="vhs-json"===t&&Ve.playlists?new ih(Ve.playlists[0],o,h):Ve.resolvedUri?new ih(Ve.resolvedUri,o,h):Ve.playlists&&"dash"===t?new Ul(Ve.playlists[0],o,h,q):null,Ve=kt.mergeOptions({id:Le,playlistLoader:zt},Ve),Xv[u](u,Ve.playlistLoader,a),x[Re].push(Ve),void 0===R[Le]){var vn=new kt.AudioTrack({id:Le,kind:U_(Ve),enabled:!1,language:Ve.language,default:Ve.default,label:Le});R[Le]=vn}}s.on("error",Ed[u](u,a))},SUBTITLES:function(u,a){var o=a.tech,t=a.vhs,s=a.sourceType,h=a.segmentLoaders[u],v=a.requestOptions,S=a.master.mediaGroups,x=a.mediaTypes[u],R=x.groups,ee=x.tracks,q=a.masterPlaylistLoader;for(var _e in S[u])for(var Re in R[_e]||(R[_e]=[]),S[u][_e])if(!S[u][_e][Re].forced){var Le=S[u][_e][Re],Ve=void 0;if("hls"===s)Ve=new ih(Le.resolvedUri,t,v);else if("dash"===s){if(!Le.playlists.filter(function(kn){return kn.excludeUntil!==1/0}).length)return;Ve=new Ul(Le.playlists[0],t,v,q)}else"vhs-json"===s&&(Ve=new ih(Le.playlists?Le.playlists[0]:Le.resolvedUri,t,v));if(Le=kt.mergeOptions({id:Re,playlistLoader:Ve},Le),Xv[u](u,Le.playlistLoader,a),R[_e].push(Le),void 0===ee[Re]){var vn=o.addRemoteTextTrack({id:Re,kind:"subtitles",default:Le.default&&Le.autoselect,language:Le.language,label:Re},!1).track;ee[Re]=vn}}h.on("error",Ed[u](u,a))},"CLOSED-CAPTIONS":function(u,a){var o=a.tech,t=a.master.mediaGroups,s=a.mediaTypes[u],h=s.groups,v=s.tracks;for(var S in t[u])for(var x in h[S]||(h[S]=[]),t[u][S]){var R=t[u][S][x];if(/^(?:CC|SERVICE)/.test(R.instreamId)){var ee=o.options_.vhs&&o.options_.vhs.captionServices||{},q={label:x,language:R.language,instreamId:R.instreamId,default:R.default&&R.autoselect};if(ee[q.instreamId]&&(q=kt.mergeOptions(q,ee[q.instreamId])),void 0===q.default&&delete q.default,h[S].push(kt.mergeOptions({id:x},R)),void 0===v[x]){var _e=o.addRemoteTextTrack({id:q.instreamId,kind:"captions",default:q.default,language:q.language,label:q.label},!1).track;v[x]=_e}}}}},Um=function g(u,a){for(var o=0;o<u.length;o++)if(qh(a,u[o])||u[o].playlists&&g(u[o].playlists,a))return!0;return!1},Tl={AUDIO:function(u,a){return function(){var o=a.mediaTypes[u].tracks;for(var t in o)if(o[t].enabled)return o[t];return null}},SUBTITLES:function(u,a){return function(){var o=a.mediaTypes[u].tracks;for(var t in o)if("showing"===o[t].mode||"hidden"===o[t].mode)return o[t];return null}}},Bm=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],H_=function(u){return this.audioSegmentLoader_[u]+this.mainSegmentLoader_[u]},op=function(g){function u(o){var t;t=g.call(this)||this;var s=o.src,h=o.handleManifestRedirects,v=o.withCredentials,S=o.tech,x=o.bandwidth,R=o.externVhs,ee=o.useCueTags,q=o.blacklistDuration,_e=o.enableLowInitialPlaylist,Re=o.sourceType,Le=o.cacheEncryptionKeys,Ve=o.experimentalBufferBasedABR,zt=o.experimentalLeastPixelDiffSelector,vn=o.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var kn=o.maxPlaylistRetries;null==kn&&(kn=1/0),gc=R,t.experimentalBufferBasedABR=Boolean(Ve),t.experimentalLeastPixelDiffSelector=Boolean(zt),t.withCredentials=v,t.tech_=S,t.vhs_=S.vhs,t.sourceType_=Re,t.useCueTags_=ee,t.blacklistDuration=q,t.maxPlaylistRetries=kn,t.enableLowInitialPlaylist=_e,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:v,handleManifestRedirects:h,maxPlaylistRetries:kn,timeout:null},t.on("error",t.pauseLoading),t.mediaTypes_=function(){var u={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){u[a]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Pu,activeTrack:Pu,getActiveGroup:Pu,onGroupChanged:Pu,onTrackChanged:Pu,lastTrack_:null,logger_:Au("MediaGroups["+a+"]")}}),u}(),t.mediaSource=new(Y().MediaSource),t.handleDurationChange_=t.handleDurationChange_.bind(Je(t)),t.handleSourceOpen_=t.handleSourceOpen_.bind(Je(t)),t.handleSourceEnded_=t.handleSourceEnded_.bind(Je(t)),t.mediaSource.addEventListener("durationchange",t.handleDurationChange_),t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_),t.mediaSource.addEventListener("sourceended",t.handleSourceEnded_),t.seekable_=kt.createTimeRanges(),t.hasPlayed_=!1,t.syncController_=new Kv(o),t.segmentMetadataTrack_=S.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new Yv,t.sourceUpdater_=new Wv(t.mediaSource),t.inbandTextTracks_={},t.timelineChangeController_=new Zv;var rn={vhs:t.vhs_,parse708captions:o.parse708captions,useDtsForTimestampOffset:o.useDtsForTimestampOffset,captionServices:vn,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.duration()},hasPlayed:function(){return t.hasPlayed_},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:x,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:Le,sourceUpdater:t.sourceUpdater_,timelineChangeController:t.timelineChangeController_,experimentalExactManifestTimings:o.experimentalExactManifestTimings};t.masterPlaylistLoader_="dash"===t.sourceType_?new Ul(s,t.vhs_,t.requestOptions_):new ih(s,t.vhs_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new gh(kt.mergeOptions(rn,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),o),t.audioSegmentLoader_=new gh(kt.mergeOptions(rn,{loaderType:"audio"}),o),t.subtitleSegmentLoader_=new zv(kt.mergeOptions(rn,{loaderType:"vtt",featuresNativeTextTracks:t.tech_.featuresNativeTextTracks}),o),t.setupSegmentLoaderListeners_(),t.experimentalBufferBasedABR&&(t.masterPlaylistLoader_.one("loadedplaylist",function(){return t.startABRTimer_()}),t.tech_.on("pause",function(){return t.stopABRTimer_()}),t.tech_.on("play",function(){return t.startABRTimer_()})),Bm.forEach(function(wn){t[wn+"_"]=H_.bind(Je(t),wn)}),t.logger_=Au("MPC"),t.triggeredFmp4Usage=!1,"none"===t.tech_.preload()?(t.loadOnPlay_=function(){t.loadOnPlay_=null,t.masterPlaylistLoader_.load()},t.tech_.one("play",t.loadOnPlay_)):t.masterPlaylistLoader_.load(),t.timeToLoadedData__=-1,t.mainAppendsToLoadedData__=-1,t.audioAppendsToLoadedData__=-1;var tn="none"===t.tech_.preload()?"play":"loadstart";return t.tech_.one(tn,function(){var wn=Date.now();t.tech_.one("loadeddata",function(){t.timeToLoadedData__=Date.now()-wn,t.mainAppendsToLoadedData__=t.mainSegmentLoader_.mediaAppends,t.audioAppendsToLoadedData__=t.audioSegmentLoader_.mediaAppends})}),t}it(u,g);var a=u.prototype;return a.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},a.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},a.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return-1===t||-1===s?-1:t+s},a.timeToLoadedData_=function(){return this.timeToLoadedData__},a.checkABR_=function(){var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,"abr")},a.switchMedia_=function(t,s,h){var v=this.media(),S=v&&(v.id||v.uri),x=t.id||t.uri;S&&S!==x&&(this.logger_("switch media "+S+" -> "+x+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(t,h)},a.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=Y().setInterval(function(){return t.checkABR_()},250)},a.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Y().clearInterval(this.abrTimer_),this.abrTimer_=null)},a.getAudioTrackPlaylists_=function(){var t=this.master(),s=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return s;var S,h=t.mediaGroups.AUDIO,v=Object.keys(h);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)S=this.mediaTypes_.AUDIO.activeTrack();else{var x=h.main||v.length&&h[v[0]];for(var R in x)if(x[R].default){S={label:R};break}}if(!S)return s;var ee=[];for(var q in h)if(h[q][S.label]){var _e=h[q][S.label];if(_e.playlists&&_e.playlists.length)ee.push.apply(ee,_e.playlists);else if(_e.uri)ee.push(_e);else if(t.playlists.length)for(var Re=0;Re<t.playlists.length;Re++){var Le=t.playlists[Re];Le.attributes&&Le.attributes.AUDIO&&Le.attributes.AUDIO===q&&ee.push(Le)}}return ee.length?ee:s},a.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=t.masterPlaylistLoader_.media(),h=1.5*s.targetDuration*1e3;t.requestOptions_.timeout=Wp(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:h,s.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(s,t.requestOptions_),t.mainSegmentLoader_.load()),function(u){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(Re){mg[Re](Re,u)});var a=u.mediaTypes,o=u.masterPlaylistLoader,t=u.tech,s=u.vhs,h=u.segmentLoaders,v=h.AUDIO,S=h.main;["AUDIO","SUBTITLES"].forEach(function(Re){a[Re].activeGroup=function(u,a){return function(o){var s=a.mediaTypes[u].groups,h=a.masterPlaylistLoader.media();if(!h)return null;var v=null;h.attributes[u]&&(v=s[h.attributes[u]]);var S=Object.keys(s);if(!v)if("AUDIO"===u&&S.length>1&&md(a.master))for(var x=0;x<S.length;x++){var R=s[S[x]];if(Um(R,h)){v=R;break}}else s.main?v=s.main:1===S.length&&(v=s[S[0]]);return void 0===o?v:null!==o&&v&&v.filter(function(ee){return ee.id===o.id})[0]||null}}(Re,u),a[Re].activeTrack=Tl[Re](Re,u),a[Re].onGroupChanged=function(u,a){return function(){var o=a.segmentLoaders,t=o[u],s=o.main,h=a.mediaTypes[u],v=h.activeTrack(),S=h.getActiveGroup(),x=h.activePlaylistLoader,R=h.lastGroup_;if((!S||!R||S.id!==R.id)&&(h.lastGroup_=S,h.lastTrack_=v,ip(t,h),S&&!S.isMasterPlaylist)){if(!S.playlistLoader)return void(x&&s.resetEverything());t.resyncLoader(),sp(S.playlistLoader,h)}}}(Re,u),a[Re].onGroupChanging=function(u,a){return function(){var o=a.segmentLoaders[u];a.mediaTypes[u].lastGroup_=null,o.abort(),o.pause()}}(Re,u),a[Re].onTrackChanged=function(u,a){return function(){var o=a.masterPlaylistLoader,t=a.segmentLoaders,s=t[u],h=t.main,v=a.mediaTypes[u],S=v.activeTrack(),x=v.getActiveGroup(),R=v.activePlaylistLoader,ee=v.lastTrack_;if((!ee||!S||ee.id!==S.id)&&(v.lastGroup_=x,v.lastTrack_=S,ip(s,v),x)){if(x.isMasterPlaylist){if(!S||!ee||S.id===ee.id)return;var q=a.vhs.masterPlaylistController_,_e=q.selectPlaylist();if(q.media()===_e)return;return v.logger_("track change. Switching master audio from "+ee.id+" to "+S.id),o.pause(),h.resetEverything(),void q.fastQualityChange_(_e)}if("AUDIO"===u){if(!x.playlistLoader)return h.setAudio(!0),void h.resetEverything();s.setAudio(!0),h.setAudio(!1)}if(R===x.playlistLoader)return void sp(x.playlistLoader,v);s.track&&s.track(S),s.resetEverything(),sp(x.playlistLoader,v)}}}(Re,u),a[Re].getActiveGroup=function(u,a){var o=a.mediaTypes;return function(){var t=o[u].activeTrack();return t?o[u].activeGroup(t):null}}(Re,u)});var x=a.AUDIO.activeGroup();if(x){var R=(x.filter(function(Re){return Re.default})[0]||x[0]).id;a.AUDIO.tracks[R].enabled=!0,a.AUDIO.onGroupChanged(),a.AUDIO.onTrackChanged(),a.AUDIO.getActiveGroup().playlistLoader?(S.setAudio(!1),v.setAudio(!0)):S.setAudio(!0)}o.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(Re){return a[Re].onGroupChanged()})}),o.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(Re){return a[Re].onGroupChanging()})});var q=function(){a.AUDIO.onTrackChanged(),t.trigger({type:"usage",name:"vhs-audio-change"}),t.trigger({type:"usage",name:"hls-audio-change"})};for(var _e in t.audioTracks().addEventListener("change",q),t.remoteTextTracks().addEventListener("change",a.SUBTITLES.onTrackChanged),s.on("dispose",function(){t.audioTracks().removeEventListener("change",q),t.remoteTextTracks().removeEventListener("change",a.SUBTITLES.onTrackChanged)}),t.clearTracks("audio"),a.AUDIO.tracks)t.audioTracks().addTrack(a.AUDIO.tracks[_e])}({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),s),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var s=t.masterPlaylistLoader_.media();if(!s){var h;if(t.excludeUnsupportedVariants_(),t.enableLowInitialPlaylist&&(h=t.selectInitialPlaylist()),h||(h=t.selectPlaylist()),!h||!t.shouldSwitchToMedia_(h))return;if(t.initialMedia_=h,t.switchMedia_(t.initialMedia_,"initial"),"vhs-json"!==t.sourceType_||!t.initialMedia_.segments)return;s=t.initialMedia_}t.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=t.masterPlaylistLoader_.media(),h=1.5*s.targetDuration*1e3;t.requestOptions_.timeout=Wp(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:h,t.mainSegmentLoader_.playlist(s,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=t.masterPlaylistLoader_.media();"playlist-unchanged"!==s.lastExcludeReason_&&t.stuckAtPlaylistEnd_(s)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},a.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},a.triggerPresenceUsage_=function(t,s){var h=t.mediaGroups||{},v=!0,S=Object.keys(h.AUDIO);for(var x in h.AUDIO)for(var R in h.AUDIO[x])h.AUDIO[x][R].uri||(v=!1);v&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(h.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),gc.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),S.length&&Object.keys(h.AUDIO[S[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},a.shouldSwitchToMedia_=function(t){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,h=this.tech_.currentTime(),v=this.bufferLowWaterLine(),S=this.bufferHighWaterLine();return function(u){var a=u.currentPlaylist,o=u.buffered,t=u.currentTime,s=u.nextPlaylist,h=u.bufferLowWaterLine,v=u.bufferHighWaterLine,S=u.duration,x=u.experimentalBufferBasedABR,R=u.log;if(!s)return kt.log.warn("We received no playlist to switch to. Please check your stream."),!1;var ee="allowing switch "+(a&&a.id||"null")+" -> "+s.id;if(!a)return R(ee+" as current playlist is not set"),!0;if(s.id===a.id)return!1;var q=Boolean(Ll(o,t).length);if(!a.endList)return q||"number"!=typeof a.partTargetDuration?(R(ee+" as current playlist is live"),!0):(R("not "+ee+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var _e=gd(o,t),Re=x?Vo.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Vo.MAX_BUFFER_LOW_WATER_LINE;if(S<Re)return R(ee+" as duration < max low water line ("+S+" < "+Re+")"),!0;var Le=s.attributes.BANDWIDTH,Ve=a.attributes.BANDWIDTH;if(Le<Ve&&(!x||_e<v)){var zt=ee+" as next bandwidth < current bandwidth ("+Le+" < "+Ve+")";return x&&(zt+=" and forwardBuffer < bufferHighWaterLine ("+_e+" < "+v+")"),R(zt),!0}if((!x||Le>Ve)&&_e>=h){var vn=ee+" as forwardBuffer >= bufferLowWaterLine ("+_e+" >= "+h+")";return x&&(vn+=" and next bandwidth > current bandwidth ("+Le+" > "+Ve+")"),R(vn),!0}return R("not "+ee+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:h,currentPlaylist:s,nextPlaylist:t,bufferLowWaterLine:v,bufferHighWaterLine:S,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},a.setupSegmentLoaderListeners_=function(){var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var h=t.selectPlaylist();t.shouldSwitchToMedia_(h)&&t.switchMedia_(h,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(h){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var s=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var v=t.getCodecsOrExclude_();!v||t.sourceUpdater_.addOrChangeSourceBuffers(v)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},a.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},a.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},a.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},a.fastQualityChange_=function(t){var s=this;void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){s.tech_.setCurrentTime(kt.browser.IE_VERSION||kt.browser.IS_EDGE?s.tech_.currentTime()+.04:s.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},a.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}},a.setupFirstPlay=function(){var t=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var h=this.seekable();if(!h.length)return!1;if(kt.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(h.end(0)),t.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(h.end(0))}return this.hasPlayed_=!0,this.load(),!0},a.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,function(s){})}this.trigger("sourceopen")},a.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(t&&t.length){var s=this.duration();t[t.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},a.handleDurationChange_=function(){this.tech_.trigger("durationchange")},a.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!s||s.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}!t||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},a.stuckAtPlaylistEnd_=function(t){if(!this.seekable().length)return!1;var h=this.syncController_.getExpiredTime(t,this.duration());if(null===h)return!1;var v=gc.Playlist.playlistEnd(t,h),S=this.tech_.currentTime(),x=this.tech_.buffered();if(!x.length)return v-S<=Is;var R=x.end(x.length-1);return R-S<=Is&&v-R<=Is},a.blacklistCurrentPlaylist=function(t,s){void 0===t&&(t={});var h=t.playlist||this.masterPlaylistLoader_.media();if(s=s||t.blacklistDuration||this.blacklistDuration,!h)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));h.playlistErrors_++;var ee,v=this.masterPlaylistLoader_.master.playlists,S=v.filter(jc),x=1===S.length&&S[0]===h;if(1===v.length&&s!==1/0)return kt.log.warn("Problem encountered with playlist "+h.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(x);if(x){var R=!1;v.forEach(function(zt){if(zt!==h){var vn=zt.excludeUntil;void 0!==vn&&vn!==1/0&&(R=!0,delete zt.excludeUntil)}}),R&&(kt.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}ee=h.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*s,h.excludeUntil=ee,t.reason&&(h.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var q=this.selectPlaylist();if(!q)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(t.internal?this.logger_:kt.log.warn)((t.internal?"Internal problem":"Problem")+" encountered with playlist "+h.id+"."+(t.message?" "+t.message:"")+" Switching to playlist "+q.id+"."),q.attributes.AUDIO!==h.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),q.attributes.SUBTITLES!==h.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var Le=q.targetDuration/2*1e3||5e3,Ve="number"==typeof q.lastRequest&&Date.now()-q.lastRequest<=Le;return this.switchMedia_(q,"exclude",x||Ve)},a.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},a.delegateLoaders_=function(t,s){var h=this,v=[],S="all"===t;(S||"main"===t)&&v.push(this.masterPlaylistLoader_);var x=[];(S||"audio"===t)&&x.push("AUDIO"),(S||"subtitle"===t)&&(x.push("CLOSED-CAPTIONS"),x.push("SUBTITLES")),x.forEach(function(R){var ee=h.mediaTypes_[R]&&h.mediaTypes_[R].activePlaylistLoader;ee&&v.push(ee)}),["main","audio","subtitle"].forEach(function(R){var ee=h[R+"SegmentLoader_"];ee&&(t===R||"all"===t)&&v.push(ee)}),v.forEach(function(R){return s.forEach(function(ee){"function"==typeof R[ee]&&R[ee]()})})},a.setCurrentTime=function(t){var s=Ll(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?s&&s.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},a.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:gc.Playlist.duration(t):1/0:0},a.seekable=function(){return this.seekable_},a.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var h=this.syncController_.getExpiredTime(s,this.duration());if(null!==h){var x,R,v=this.masterPlaylistLoader_.master,S=gc.Playlist.seekable(s,h,gc.Playlist.liveEdgeDelay(v,s));0===S.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(h=this.syncController_.getExpiredTime(s,this.duration()))||0===(t=gc.Playlist.seekable(s,h,gc.Playlist.liveEdgeDelay(v,s))).length)||(this.seekable_&&this.seekable_.length&&(x=this.seekable_.end(0),R=this.seekable_.start(0)),this.seekable_=t?t.start(0)>S.end(0)||S.start(0)>t.end(0)?S:kt.createTimeRanges([[t.start(0)>S.start(0)?t.start(0):S.start(0),t.end(0)<S.end(0)?t.end(0):S.end(0)]]):S,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==x||this.seekable_.start(0)!==R)&&(this.logger_("seekable updated ["+Hp(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},a.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1))}else{var h=this.tech_.buffered(),v=gc.Playlist.duration(this.masterPlaylistLoader_.media());h.length>0&&(v=Math.max(v,h.end(h.length-1))),this.mediaSource.duration!==v&&this.sourceUpdater_.setDuration(v)}},a.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var h=t.mediaTypes_[s].groups;for(var v in h)h[v].forEach(function(S){S.playlistLoader&&S.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},a.master=function(){return this.masterPlaylistLoader_.master},a.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},a.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),h=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!s||!h)},a.getCodecsOrExclude_=function(){var t=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};s.video=s.main;var h=$c(this.master(),this.media()),v={},S=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(v.video=h.video||s.main.videoCodec||"avc1.4d400d"),s.main.isMuxed&&(v.video+=","+(h.audio||s.main.audioCodec||hr)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||S)&&(v.audio=h.audio||s.main.audioCodec||s.audio.audioCodec||hr,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),v.audio||v.video){var ee,R={};if(["video","audio"].forEach(function(Le){if(v.hasOwnProperty(Le)&&!function(Ve,zt){return Ve?Cn(zt):Vi(zt)}(s[Le].isFmp4,v[Le])){var Ve=s[Le].isFmp4?"browser":"muxer";R[Ve]=R[Ve]||[],R[Ve].push(v[Le]),"audio"===Le&&(ee=Ve)}}),S&&ee&&this.media().attributes.AUDIO){var q=this.media().attributes.AUDIO;this.master().playlists.forEach(function(Le){(Le.attributes&&Le.attributes.AUDIO)===q&&Le!==t.media()&&(Le.excludeUntil=1/0)}),this.logger_("excluding audio group "+q+" as "+ee+' does not support codec(s): "'+v.audio+'"')}if(!Object.keys(R).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var Re=[];if(["video","audio"].forEach(function(Le){var Ve=(Lr(t.sourceUpdater_.codecs[Le]||"")[0]||{}).type,zt=(Lr(v[Le]||"")[0]||{}).type;Ve&&zt&&Ve.toLowerCase()!==zt.toLowerCase()&&Re.push('"'+t.sourceUpdater_.codecs[Le]+'" -> "'+v[Le]+'"')}),Re.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+Re.join(", ")+".",blacklistDuration:1/0,internal:!0})}return v}var _e=Object.keys(R).reduce(function(Le,Ve){return Le&&(Le+=", "),Le+(Ve+' does not support codec(s): "')+R[Ve].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:_e,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},a.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(t){this.sourceUpdater_.createSourceBuffers(t);var s=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},a.excludeUnsupportedVariants_=function(){var t=this,s=this.master().playlists,h=[];Object.keys(s).forEach(function(v){var S=s[v];if(-1===h.indexOf(S.id)){h.push(S.id);var x=$c(t.master,S),R=[];x.audio&&!Vi(x.audio)&&!Cn(x.audio)&&R.push("audio codec "+x.audio),x.video&&!Vi(x.video)&&!Cn(x.video)&&R.push("video codec "+x.video),x.text&&"stpp.ttml.im1t"===x.text&&R.push("text codec "+x.text),R.length&&(S.excludeUntil=1/0,t.logger_("excluding "+S.id+" for unsupported: "+R.join(", ")))}})},a.excludeIncompatibleVariants_=function(t){var s=this,h=[],v=this.master().playlists,S=vd(Lr(t)),x=ag(S),R=S.video&&Lr(S.video)[0]||null,ee=S.audio&&Lr(S.audio)[0]||null;Object.keys(v).forEach(function(q){var _e=v[q];if(-1===h.indexOf(_e.id)&&_e.excludeUntil!==1/0){h.push(_e.id);var Re=[],Le=$c(s.masterPlaylistLoader_.master,_e),Ve=ag(Le);if(Le.audio||Le.video){if(Ve!==x&&Re.push('codec count "'+Ve+'" !== "'+x+'"'),!s.sourceUpdater_.canChangeType()){var zt=Le.video&&Lr(Le.video)[0]||null,vn=Le.audio&&Lr(Le.audio)[0]||null;zt&&R&&zt.type.toLowerCase()!==R.type.toLowerCase()&&Re.push('video codec "'+zt.type+'" !== "'+R.type+'"'),vn&&ee&&vn.type.toLowerCase()!==ee.type.toLowerCase()&&Re.push('audio codec "'+vn.type+'" !== "'+ee.type+'"')}Re.length&&(_e.excludeUntil=1/0,s.logger_("blacklisting "+_e.id+": "+Re.join(" && ")))}}})},a.updateAdCues_=function(t){var s=0,h=this.seekable();h.length&&(s=h.start(0)),function(u,a,o){if(void 0===o&&(o=0),u.segments)for(var s,t=o,h=0;h<u.segments.length;h++){var v=u.segments[h];if(s||(s=Nm(a,t+v.duration/2)),s){if("cueIn"in v){s.endTime=t,s.adEndTime=t,t+=v.duration,s=null;continue}if(t<s.endTime){t+=v.duration;continue}s.endTime+=v.duration}else if("cueOut"in v&&((s=new(Y().VTTCue)(t,t+v.duration,v.cueOut)).adStartTime=t,s.adEndTime=t+parseFloat(v.cueOut),a.addCue(s)),"cueOutCont"in v){var S=v.cueOutCont.split("/").map(parseFloat),x=S[0],R=S[1];(s=new(Y().VTTCue)(t,t+v.duration,"")).adStartTime=t-x,s.adEndTime=s.adStartTime+R,a.addCue(s)}t+=v.duration}}(t,this.cueTagsTrack_,s)},a.goalBufferLength=function(){var t=this.tech_.currentTime(),s=Vo.GOAL_BUFFER_LENGTH,h=Vo.GOAL_BUFFER_LENGTH_RATE,v=Math.max(s,Vo.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+t*h,v)},a.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),s=Vo.BUFFER_LOW_WATER_LINE,h=Vo.BUFFER_LOW_WATER_LINE_RATE,v=Math.max(s,Vo.MAX_BUFFER_LOW_WATER_LINE),S=Math.max(s,Vo.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+t*h,this.experimentalBufferBasedABR?S:v)},a.bufferHighWaterLine=function(){return Vo.BUFFER_HIGH_WATER_LINE},u}(kt.EventTarget),Sd=function(u,a,o){var t=u.masterPlaylistController_,v=t[(u.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(t);if(a.attributes){var S=a.attributes.RESOLUTION;this.width=S&&S.width,this.height=S&&S.height,this.bandwidth=a.attributes.BANDWIDTH}this.codecs=$c(t.master(),a),this.playlist=a,this.id=o,this.enabled=function(u,a,o){return function(t){var s=u.master.playlists[a],h=um(s),v=jc(s);return void 0===t?v:(t?delete s.disabled:s.disabled=!0,t!==v&&!h&&(o(),u.trigger(t?"renditionenabled":"renditiondisabled")),t)}}(u.playlists,a.id,v)},_g=["seeking","seeked","pause","playing","error"],i_=function(){function g(a){var o=this;this.masterPlaylistController_=a.masterPlaylistController,this.tech_=a.tech,this.seekable=a.seekable,this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta,this.media=a.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Au("PlaybackWatcher"),this.logger_("initialize");var t=function(){return o.monitorCurrentTime_()},s=function(){return o.monitorCurrentTime_()},h=function(){return o.techWaiting_()},v=function(){return o.cancelTimer_()},S=this.masterPlaylistController_,x=["main","subtitle","audio"],R={};x.forEach(function(q){R[q]={reset:function(){return o.resetSegmentDownloads_(q)},updateend:function(){return o.checkSegmentDownloads_(q)}},S[q+"SegmentLoader_"].on("appendsdone",R[q].updateend),S[q+"SegmentLoader_"].on("playlistupdate",R[q].reset),o.tech_.on(["seeked","seeking"],R[q].reset)});var ee=function(_e){["main","audio"].forEach(function(Re){S[Re+"SegmentLoader_"][_e]("appended",o.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){o.fixesBadSeeks_()&&(o.consecutiveUpdates=0,o.lastRecordedTime=o.tech_.currentTime(),ee("off"))},this.clearSeekingAppendCheck_=function(){return ee("off")},this.watchForBadSeeking_=function(){o.clearSeekingAppendCheck_(),ee("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",h),this.tech_.on(_g,v),this.tech_.on("canplay",s),this.tech_.one("play",t),this.dispose=function(){o.clearSeekingAppendCheck_(),o.logger_("dispose"),o.tech_.off("waiting",h),o.tech_.off(_g,v),o.tech_.off("canplay",s),o.tech_.off("play",t),o.tech_.off("seeking",o.watchForBadSeeking_),o.tech_.off("seeked",o.clearSeekingAppendCheck_),x.forEach(function(q){S[q+"SegmentLoader_"].off("appendsdone",R[q].updateend),S[q+"SegmentLoader_"].off("playlistupdate",R[q].reset),o.tech_.off(["seeked","seeking"],R[q].reset)}),o.checkCurrentTimeTimeout_&&Y().clearTimeout(o.checkCurrentTimeTimeout_),o.cancelTimer_()}}var u=g.prototype;return u.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Y().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Y().setTimeout(this.monitorCurrentTime_.bind(this),250)},u.resetSegmentDownloads_=function(o){var t=this.masterPlaylistController_[o+"SegmentLoader_"];this[o+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+o+" loader"),this[o+"StalledDownloads_"]=0,this[o+"Buffered_"]=t.buffered_()},u.checkSegmentDownloads_=function(o){var t=this.masterPlaylistController_,s=t[o+"SegmentLoader_"],h=s.buffered_(),v=function(u,a){if(u===a)return!1;if(!u&&a||!a&&u||u.length!==a.length)return!0;for(var o=0;o<u.length;o++)if(u.start(o)!==a.start(o)||u.end(o)!==a.end(o))return!0;return!1}(this[o+"Buffered_"],h);this[o+"Buffered_"]=h,v?this.resetSegmentDownloads_(o):(this[o+"StalledDownloads_"]++,this.logger_("found #"+this[o+"StalledDownloads_"]+" "+o+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:hc(h)}),!(this[o+"StalledDownloads_"]<10)&&(this.logger_(o+" loader stalled download exclusion"),this.resetSegmentDownloads_(o),this.tech_.trigger({type:"usage",name:"vhs-"+o+"-download-exclusion"}),"subtitle"!==o&&t.blacklistCurrentPlaylist({message:"Excessive "+o+" segment downloading detected."},1/0)))},u.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var o=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===o&&(!t.length||o+Is>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&o===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):o===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=o)}},u.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},u.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var v,t=this.seekable(),s=this.tech_.currentTime();if(this.afterSeekableWindow_(t,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(v=t.end(t.length-1)),this.beforeSeekableWindow_(t,s)){var x=t.start(0);v=x+(x===t.end(0)?0:Is)}if(void 0!==v)return this.logger_("Trying to seek outside of seekable at time "+s+" with seekable range "+Hp(t)+". Seeking to "+v+"."),this.tech_.setCurrentTime(v),!0;for(var R=this.masterPlaylistController_.sourceUpdater_,ee=this.tech_.buffered(),q=R.audioBuffer?R.audioBuffered():null,_e=R.videoBuffer?R.videoBuffered():null,Re=this.media(),Le=Re.partTargetDuration?Re.partTargetDuration:2*(Re.targetDuration-Nl),Ve=[q,_e],zt=0;zt<Ve.length;zt++)if(Ve[zt]&&gd(Ve[zt],s)<Le)return!1;var kn=Jd(ee,s);return 0!==kn.length&&(v=kn.start(0)+Is,this.logger_("Buffered region starts ("+kn.start(0)+")  just beyond seek point ("+s+"). Seeking to "+v+"."),this.tech_.setCurrentTime(v),!0)},u.waiting_=function(){if(!this.techWaiting_()){var o=this.tech_.currentTime(),t=this.tech_.buffered(),s=Ll(t,o);if(s.length&&o+3<=s.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(o),this.logger_("Stopped at "+o+" while inside a buffered region ["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},u.techWaiting_=function(){var o=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(o,t)){var s=o.end(o.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+s),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var h=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,v=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:h.audioBuffered(),videoBuffered:h.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var x=Jd(v,t);if(x.length>0){var R=x.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+R+", seeking to "+x.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*R,t),!0}return!1},u.afterSeekableWindow_=function(o,t,s,h){if(void 0===h&&(h=!1),!o.length)return!1;var v=o.end(o.length-1)+Is;return!s.endList&&h&&(v=o.end(o.length-1)+3*s.targetDuration),t>v},u.beforeSeekableWindow_=function(o,t){return!!(o.length&&o.start(0)>0&&t<o.start(0)-this.liveRangeSafeTimeDelta)},u.videoUnderflow_=function(o){var t=o.videoBuffered,s=o.audioBuffered,h=o.currentTime;if(t){var v;if(t.length&&s.length){var S=Ll(t,h-3),x=Ll(t,h),R=Ll(s,h);R.length&&!x.length&&S.length&&(v={start:S.end(0),end:R.end(0)})}else Jd(t,h).length||(v=this.gapFromVideoUnderflow_(t,h));return!!v&&(this.logger_("Encountered a gap in video from "+v.start+" to "+v.end+". Seeking to current time "+h),!0)}},u.skipTheGap_=function(o){var t=this.tech_.buffered(),s=this.tech_.currentTime(),h=Jd(t,s);this.cancelTimer_(),0!==h.length&&s===o&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",o,"nextRange start:",h.start(0)),this.tech_.setCurrentTime(h.start(0)+Nl),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},u.gapFromVideoUnderflow_=function(o,t){for(var s=function(u){if(u.length<2)return kt.createTimeRanges();for(var a=[],o=1;o<u.length;o++){var t=u.end(o-1),s=u.start(o);a.push([t,s])}return kt.createTimeRanges(a)}(o),h=0;h<s.length;h++){var v=s.start(h),S=s.end(h);if(t-v<4&&t-v>2)return{start:v,end:S}}return null},g}(),Hm={errorInterval:30,getSource:function(u){return u(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Wc=function g(u,a){var o=0,t=0,s=kt.mergeOptions(Hm,a);u.ready(function(){u.trigger({type:"usage",name:"vhs-error-reload-initialized"}),u.trigger({type:"usage",name:"hls-error-reload-initialized"})});var h=function(){t&&u.currentTime(t)},v=function(q){null!=q&&(t=u.duration()!==1/0&&u.currentTime()||0,u.one("loadedmetadata",h),u.src(q),u.trigger({type:"usage",name:"vhs-error-reload"}),u.trigger({type:"usage",name:"hls-error-reload"}),u.play())},S=function(){return Date.now()-o<1e3*s.errorInterval?(u.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void u.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(o=Date.now(),s.getSource.call(u,v)):void kt.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},x=function ee(){u.off("loadedmetadata",h),u.off("error",S),u.off("dispose",ee)};u.on("error",S),u.on("dispose",x),u.reloadSourceOnError=function(q){x(),g(u,q)}},Ua={PlaylistLoader:ih,Playlist:no,utils:Dv,STANDARD_PLAYLIST_SELECTOR:_l,INITIAL_PLAYLIST_SELECTOR:function(){var u=this,a=this.playlists.master.playlists.filter(no.isEnabled);return _d(a,function(t,s){return tf(t,s)}),a.filter(function(t){return!!$c(u.playlists.master,t).video})[0]||null},lastBandwidthSelector:_l,movingAverageBandwidthSelector:function(u){var a=-1,o=-1;if(u<0||u>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var t=this.useDevicePixelRatio&&Y().devicePixelRatio||1;return a<0&&(a=this.systemBandwidth,o=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==o&&(a=u*this.systemBandwidth+(1-u)*a,o=this.systemBandwidth),ug(this.playlists.master,a,parseInt(yd(this.tech_.el(),"width"),10)*t,parseInt(yd(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:tf,comparePlaylistResolution:function(u,a){var o,t;return u.attributes.RESOLUTION&&u.attributes.RESOLUTION.width&&(o=u.attributes.RESOLUTION.width),o=o||Y().Number.MAX_VALUE,a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(t=a.attributes.RESOLUTION.width),o===(t=t||Y().Number.MAX_VALUE)&&u.attributes.BANDWIDTH&&a.attributes.BANDWIDTH?u.attributes.BANDWIDTH-a.attributes.BANDWIDTH:o-t},xhr:$y()};Object.keys(Vo).forEach(function(g){Object.defineProperty(Ua,g,{get:function(){return kt.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),Vo[g]},set:function(a){kt.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),"number"!=typeof a||a<0?kt.log.warn("value of Vhs."+g+" must be greater than or equal to 0"):Vo[g]=a}})});var uf="videojs-vhs",Hl=function(u,a){for(var o=a.media(),t=-1,s=0;s<u.length;s++)if(u[s].id===o.id){t=s;break}u.selectedIndex_=t,u.trigger({selectedIndex:t,type:"change"})};Ua.canPlaySource=function(){return kt.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var cp=function(){if(!Y().localStorage)return null;var u=Y().localStorage.getItem(uf);if(!u)return null;try{return JSON.parse(u)}catch(a){return null}};Ua.supportsNativeHls=function(){if(!pe()||!pe().createElement)return!1;var g=pe().createElement("video");return!!kt.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(a){return/maybe|probably/i.test(g.canPlayType(a))})}(),Ua.supportsNativeDash=!!(pe()&&pe().createElement&&kt.getTech("Html5").isSupported())&&/maybe|probably/i.test(pe().createElement("video").canPlayType("application/dash+xml")),Ua.supportsTypeNatively=function(g){return"hls"===g?Ua.supportsNativeHls:"dash"===g&&Ua.supportsNativeDash},Ua.isSupported=function(){return kt.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var xd=function(g){function u(o,t,s){var h;if(h=g.call(this,t,kt.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&kt.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof s.initialBandwidth&&(h.options_.bandwidth=s.initialBandwidth),h.logger_=Au("VhsHandler"),t.options_&&t.options_.playerId){var v=kt(t.options_.playerId);v.hasOwnProperty("hls")||Object.defineProperty(v,"hls",{get:function(){return kt.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"hls-player-access"}),Je(h)},configurable:!0}),v.hasOwnProperty("vhs")||Object.defineProperty(v,"vhs",{get:function(){return kt.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"vhs-player-access"}),Je(h)},configurable:!0}),v.hasOwnProperty("dash")||Object.defineProperty(v,"dash",{get:function(){return kt.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Je(h)},configurable:!0}),h.player_=v}if(h.tech_=t,h.source_=o,h.stats={},h.ignoreNextSeekingEvent_=!1,h.setOptions_(),h.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(h.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(pe(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(S){var x=pe().fullscreenElement||pe().webkitFullscreenElement||pe().mozFullScreenElement||pe().msFullscreenElement;x&&x.contains(h.tech_.el())?h.masterPlaylistController_.fastQualityChange_():h.masterPlaylistController_.checkABR_()}),h.on(h.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),h.on(h.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),h.on(h.tech_,"play",h.play),h}it(u,g);var a=u.prototype;return a.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var s=cp();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Vo.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Vo.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(h){void 0!==t.source_[h]&&(t.options_[h]=t.source_[h])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},a.src=function(t,s){var h=this;if(t){this.setOptions_(),this.options_.src=function(u){return 0===u.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(u.substring(u.indexOf(",")+1)):u}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ua,this.options_.sourceType=Hi(s),this.options_.seekTo=function(x){h.tech_.setCurrentTime(x)},this.options_.smoothQualityChange&&kt.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new op(this.options_);var v=kt.mergeOptions({liveRangeSafeTimeDelta:Is},this.options_,{seekable:function(){return h.seekable()},media:function(){return h.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new i_(v),this.masterPlaylistController_.on("error",function(){var x=kt.players[h.tech_.options_.playerId],R=h.masterPlaylistController_.error;"object"!=typeof R||R.code?"string"==typeof R&&(R={message:R,code:3}):R.code=3,x.error(R)});var S=this.options_.experimentalBufferBasedABR?Ua.movingAverageBandwidthSelector(.55):Ua.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):S.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ua.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(R){this.masterPlaylistController_.selectPlaylist=R.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(R){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=R,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var R=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,ee=Y().navigator.connection||Y().navigator.mozConnection||Y().navigator.webkitConnection,q=1e7;if(this.options_.useNetworkInformationApi&&ee){var _e=1e3*ee.downlink*1e3;R=_e>=q&&R>=q?Math.max(R,_e):_e}return R},set:function(R){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=R,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){kt.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return h.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return h.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return h.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return h.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return h.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return h.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return h.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return h.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return h.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return h.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return h.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return hc(h.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return h.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return h.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return h.tech_.name_},enumerable:!0},duration:{get:function(){return h.tech_.duration()},enumerable:!0},master:{get:function(){return h.playlists.master},enumerable:!0},playerDimensions:{get:function(){return h.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return hc(h.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return h.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){h.options_.useBandwidthFromLocalStorage&&function(u){if(!Y().localStorage)return!1;var a=cp();a=a?kt.mergeOptions(a,u):u;try{Y().localStorage.setItem(uf,JSON.stringify(a))}catch(o){return!1}}({bandwidth:h.bandwidth,throughput:Math.round(h.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(u){u.representations=function(){var a=u.masterPlaylistController_.master(),o=md(a)?u.masterPlaylistController_.getAudioTrackPlaylists_():a.playlists;return o?o.filter(function(t){return!um(t)}).map(function(t,s){return new Sd(u,t,t.id)}):[]}}(h)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){h.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Y().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},a.createKeySessions_=function(){var t=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(u){var a=u.player,o=u.sourceKeySystems,t=u.audioMedia,s=u.mainPlaylists;if(!a.eme.initializeMediaKeys)return Promise.resolve();var v=function(u,a){return u.reduce(function(o,t){if(!t.contentProtection)return o;var s=a.reduce(function(h,v){var S=t.contentProtection[v];return S&&S.pssh&&(h[v]={pssh:S.pssh}),h},{});return Object.keys(s).length&&o.push(s),o},[])}(t?s.concat([t]):s,Object.keys(o)),S=[],x=[];return v.forEach(function(R){x.push(new Promise(function(ee,q){a.tech_.one("keysessioncreated",ee)})),S.push(new Promise(function(ee,q){a.eme.initializeMediaKeys({keySystems:R},function(_e){_e?q(_e):ee()})}))}),Promise.race([Promise.all(S),Promise.race(x)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(h){t.logger_("error while creating EME key session",h),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})},a.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},a.setupEme_=function(){var t=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,h=function(u){var a=u.player,h=function(u,a,o){if(!u)return u;var t={};a&&a.attributes&&a.attributes.CODECS&&(t=vd(Lr(a.attributes.CODECS))),o&&o.attributes&&o.attributes.CODECS&&(t.audio=o.attributes.CODECS);var s=pr(t.video),h=pr(t.audio),v={};for(var S in u)v[S]={},h&&(v[S].audioContentType=h),s&&(v[S].videoContentType=s),a.contentProtection&&a.contentProtection[S]&&a.contentProtection[S].pssh&&(v[S].pssh=a.contentProtection[S].pssh),"string"==typeof u[S]&&(v[S].url=u[S]);return kt.mergeOptions(u,v)}(u.sourceKeySystems,u.media,u.audioMedia);return!(!h||(a.currentSource().keySystems=h,h&&!a.eme&&(kt.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});this.player_.tech_.on("keystatuschange",function(v){"output-restricted"===v.status&&t.masterPlaylistController_.blacklistCurrentPlaylist({playlist:t.masterPlaylistController_.media(),message:"DRM keystatus changed to "+v.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==kt.browser.IE_VERSION&&h?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},a.setupQualityLevels_=function(){var t=this,s=kt.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(u,a){a.representations().forEach(function(o){u.addQualityLevel(o)}),Hl(u,a.playlists)}(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){Hl(t.qualityLevels_,t.playlists)}))},u.version=function(){return{"@videojs/http-streaming":"2.14.2","mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},a.version=function(){return this.constructor.version()},a.canChangeType=function(){return Wv.canChangeType()},a.play=function(){this.masterPlaylistController_.play()},a.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},a.duration=function(){return this.masterPlaylistController_.duration()},a.seekable=function(){return this.masterPlaylistController_.seekable()},a.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Y().URL.revokeObjectURL&&(Y().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),g.prototype.dispose.call(this)},a.convertToProgramTime=function(t,s){return function(u){var a=u.playlist,o=u.time,t=void 0===o?void 0:o,s=u.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!a||void 0===t)return s({message:"getProgramTime: playlist and time must be provided"});var h=function(u,a){if(!a||!a.segments||0===a.segments.length)return null;for(var t,o=0,s=0;s<a.segments.length&&!(u<=(o=(t=a.segments[s]).videoTimingInfo?t.videoTimingInfo.transmuxedPresentationEnd:o+t.duration));s++);var h=a.segments[a.segments.length-1];if(h.videoTimingInfo&&h.videoTimingInfo.transmuxedPresentationEnd<u)return null;if(u>o){if(u>o+.25*h.duration)return null;t=h}return{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:o-t.duration,type:t.videoTimingInfo?"accurate":"estimate"}}(t,a);if(!h)return s({message:"valid programTime was not found"});if("estimate"===h.type)return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:h.estimatedStart});var v={mediaSeconds:t},S=function(u,a){if(!a.dateTimeObject)return null;var h=u-(a.videoTimingInfo.transmuxedPresentationStart+a.videoTimingInfo.transmuxerPrependedSeconds);return new Date(a.dateTimeObject.getTime()+1e3*h)}(t,h.segment);return S&&(v.programDateTime=S.toISOString()),s(null,v)}({playlist:this.masterPlaylistController_.media(),time:t,callback:s})},a.seekToProgramTime=function(t,s,h,v){return void 0===h&&(h=!0),void 0===v&&(v=2),Yp({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:v,pauseAfterSeek:h,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},u}(kt.getComponent("Component")),Gl={name:"videojs-http-streaming",VERSION:"2.14.2",canHandleSource:function(u,a){void 0===a&&(a={});var o=kt.mergeOptions(kt.options,a);return Gl.canPlayType(u.type,o)},handleSource:function(u,a,o){void 0===o&&(o={});var t=kt.mergeOptions(kt.options,o);return a.vhs=new xd(u,a,t),kt.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return kt.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),a.vhs},configurable:!0}),a.vhs.xhr=$y(),a.vhs.src(u.src,u.type),a.vhs},canPlayType:function(u,a){void 0===a&&(a={});var o=kt.mergeOptions(kt.options,a),t=o.vhs,s=(t=void 0===t?{}:t).overrideNative,h=void 0===s?!kt.browser.IS_ANY_SAFARI:s,v=o.hls,S=(v=void 0===v?{}:v).overrideNative,x=void 0!==S&&S,R=Hi(u);return R&&(!Ua.supportsTypeNatively(R)||x||h)?"maybe":""}};Cn("avc1.4d400d,mp4a.40.2")&&kt.getTech("Html5").registerSourceHandler(Gl,0),kt.VhsHandler=xd,Object.defineProperty(kt,"HlsHandler",{get:function(){return kt.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),xd},configurable:!0}),kt.VhsSourceHandler=Gl,Object.defineProperty(kt,"HlsSourceHandler",{get:function(){return kt.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Gl},configurable:!0}),kt.Vhs=Ua,Object.defineProperty(kt,"Hls",{get:function(){return kt.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ua},configurable:!0}),kt.use||(kt.registerComponent("Hls",Ua),kt.registerComponent("Vhs",Ua)),kt.options.vhs=kt.options.vhs||{},kt.options.hls=kt.options.hls||{},kt.getPlugin&&kt.getPlugin("reloadSourceOnError")||(kt.registerPlugin||kt.plugin)("reloadSourceOnError",function(u){Wc(this,u)});const df=kt;var Ad=U(1518);let bg=(()=>{class g{constructor(a){this.datePipe=a}transform(a){if(!a)return"";const o=a.toDate();return this.datePipe.transform(o,"mediumDate")}}return g.\u0275fac=function(a){return new(a||g)(k.Y36(ke.uU,16))},g.\u0275pipe=k.Yjl({name:"fTimestamp",type:g,pure:!0}),g})();const ry=function(g){return["/","clip",g]};function Tg(g,u){if(1&g&&(k.TgZ(0,"a",2),k._UZ(1,"img",3),k.TgZ(2,"div",4)(3,"div",5)(4,"div",6),k.O4$(),k.TgZ(5,"svg",7),k._UZ(6,"path",8),k.qZA()()()(),k.kcU(),k.TgZ(7,"div",9)(8,"h2",10),k._uU(9),k.qZA(),k.TgZ(10,"p",11),k._uU(11),k.TgZ(12,"span",12),k._uU(13),k.ALo(14,"fTimestamp"),k.qZA()()()()),2&g){const a=u.$implicit;k.Q6J("routerLink",k.VKq(7,ry,a.id)),k.xp6(1),k.Q6J("src",a.screenshotUrl,k.LSH),k.xp6(8),k.hij(" ",a.title," "),k.xp6(2),k.hij(" ",a.displayName," \xb7 "),k.xp6(2),k.Oqu(k.lcZ(14,5,a.timestamp))}}let Eg=(()=>{class g{constructor(a){this.clipService=a,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:o,offsetHeight:t}=document.documentElement,{innerHeight:s}=window;Math.round(o)+s===t&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}get pageClips(){return this.clipService.pageClips}}return g.\u0275fac=function(a){return new(a||g)(k.Y36(Ad.Y))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[k._Bn([ke.uU])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(a,o){1&a&&(k.TgZ(0,"div",0),k.YNc(1,Tg,15,9,"a",1),k.qZA()),2&a&&(k.xp6(1),k.Q6J("ngForOf",o.pageClips))},directives:[ke.sg,Ne.yS],pipes:[bg],styles:[""]}),g})();const dp=["videoPlayer"];let iy=(()=>{class g{constructor(a){this.route=a}ngOnInit(){var a;this.player=df(null===(a=this.target)||void 0===a?void 0:a.nativeElement),this.route.data.subscribe(o=>{var t;this.clip=o.clip,null===(t=this.player)||void 0===t||t.src({src:this.clip.url,type:"video/mp4"})})}}return g.\u0275fac=function(a){return new(a||g)(k.Y36(Ne.gz))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-clip"]],viewQuery:function(a,o){if(1&a&&k.Gf(dp,7),2&a){let t;k.iGM(t=k.CRH())&&(o.target=t.first)}},features:[k._Bn([ke.uU])],decls:16,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-video","overflow-hidden"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(a,o){1&a&&(k.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),k._uU(3),k.qZA(),k.TgZ(4,"div",3),k._uU(5),k.TgZ(6,"span"),k._uU(7),k.ALo(8,"fTimestamp"),k.qZA()(),k.TgZ(9,"div",4),k._UZ(10,"video",5,6),k.qZA()()(),k.TgZ(12,"div",7)(13,"h2",8),k._uU(14,"More Clips"),k.qZA(),k._UZ(15,"app-clips-list",9),k.qZA()),2&a&&(k.xp6(3),k.Oqu(null==o.clip?null:o.clip.title),k.xp6(2),k.hij(" ",null==o.clip?null:o.clip.displayName," "),k.xp6(2),k.Oqu(k.lcZ(8,4,null==o.clip?null:o.clip.timestamp)),k.xp6(8),k.Q6J("scrollable",!1))},directives:[Eg],pipes:[bg],styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0em}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer{width:auto}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2}),g})(),sy=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(a,o){1&a&&(k.TgZ(0,"section",0)(1,"video",1),k._UZ(2,"source",2),k.qZA(),k._UZ(3,"div",3),k.TgZ(4,"div",4),k._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),k.qZA(),k.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),k._uU(13,"Clip it and ship it!"),k.qZA(),k.TgZ(14,"p"),k._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),k.qZA()()()(),k.TgZ(16,"section",9)(17,"h1",10),k._uU(18,"Latest"),k.qZA(),k._UZ(19,"app-clips-list"),k.qZA())},directives:[Eg],styles:[""]}),g})(),oy=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-not-found"]],decls:15,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"]],template:function(a,o){1&a&&(k.TgZ(0,"div",0)(1,"span",1),k._uU(2,"404"),k.qZA(),k._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),k.qZA())},styles:[""]}),g})();const ay=[{path:"",component:sy},{path:"about",component:Pe},{path:"clip/:id",component:iy,resolve:{clip:Ad.Y}},{path:"",loadChildren:function(){var g=(0,oe.Z)(function*(){return(yield U.e(115).then(U.bind(U,4115))).VideoModule});return function(){return g.apply(this,arguments)}}()},{path:"**",component:oy}];let uy=(()=>{class g{}return g.\u0275fac=function(a){return new(a||g)},g.\u0275mod=k.oAB({type:g}),g.\u0275inj=k.cJS({imports:[[Ne.Bz.forRoot(ay)],Ne.Bz]}),g})();var yh=U(656),Sg=U(7583);function wg(g,u){if(1&g){const a=k.EpF();k.TgZ(0,"li")(1,"a",14),k.NdJ("click",function(t){return k.CHM(a),k.oxw().openModal(t)}),k._uU(2,"Login / Register"),k.qZA()()}}const hf=function(){return{exact:!0}},Wm=function(){return{sort:"1"}};function Cg(g,u){if(1&g){const a=k.EpF();k.TgZ(0,"li")(1,"a",15),k._uU(2,"Manage"),k.qZA()(),k.TgZ(3,"li")(4,"a",16),k._uU(5,"Upload"),k.qZA()(),k.TgZ(6,"li")(7,"a",14),k.NdJ("click",function(t){return k.CHM(a),k.oxw().logout(t)}),k._uU(8,"Logout"),k.qZA()()}2&g&&(k.xp6(1),k.Q6J("routerLinkActiveOptions",k.DdM(3,hf))("queryParams",k.DdM(4,Wm)),k.xp6(3),k.Q6J("routerLinkActiveOptions",k.DdM(5,hf)))}let xg=(()=>{class g{constructor(a,o,t){this.modalService=a,this.authService=o,this.router=t}ngOnInit(){}openModal(a){a.preventDefault(),this.modalService.toggleModal("auth-modal")}logout(a){var o=this;return(0,oe.Z)(function*(){a.preventDefault(),yield o.authService.logout()})()}}return g.\u0275fac=function(a){return new(a||g)(k.Y36(Sg.Z),k.Y36(yh.e),k.Y36(Ne.F0))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-nav"]],decls:24,vars:6,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"]],template:function(a,o){if(1&a&&(k.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),k._uU(3,"Clipz"),k.qZA(),k.TgZ(4,"div",3)(5,"ul",4),k.YNc(6,wg,3,0,"li",5),k.ALo(7,"async"),k.YNc(8,Cg,9,6,"ng-template",null,6,k.W1O),k.TgZ(10,"li")(11,"a",7),k._uU(12,"About"),k.qZA()()(),k.TgZ(13,"ul",8)(14,"li")(15,"a",9),k._UZ(16,"img",10),k.TgZ(17,"span",11),k._uU(18,"English"),k.qZA()()(),k.TgZ(19,"li",12)(20,"a",9),k._UZ(21,"img",13),k.TgZ(22,"span",11),k._uU(23,"French"),k.qZA()()()()()()()),2&a){const t=k.MAs(9);k.xp6(6),k.Q6J("ngIf",!k.lcZ(7,3,o.authService.isAuthenticatedWithDelay$))("ngIfElse",t),k.xp6(5),k.Q6J("routerLinkActiveOptions",k.DdM(5,hf))}},directives:[Ne.yS,ke.O5,Ne.Od],pipes:[ke.Ov],styles:[""]}),g})();var ly=U(3446);function Ig(g,u){1&g&&k.Hsn(0,0,["*ngIf","isActive"])}const cy=["*"];let Dg=(()=>{class g{constructor(){this.title="",this.isActive=!1}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-tab"]],inputs:{title:"title",isActive:"isActive"},ngContentSelectors:cy,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(a,o){1&a&&(k.F$t(),k.YNc(0,Ig,1,0,"ng-content",0)),2&a&&k.Q6J("ngIf",o.isActive)},directives:[ke.O5],styles:[""]}),g})();const hp=function(g,u){return{"hover:text-indigo-400":g,"hover:text-white text-white bg-indigo-400":u}};function zm(g,u){if(1&g){const a=k.EpF();k.TgZ(0,"li",2)(1,"a",3),k.NdJ("click",function(){const s=k.CHM(a).$implicit;return k.oxw().selectTab(s)}),k._uU(2),k.qZA()()}if(2&g){const a=u.$implicit;k.xp6(1),k.Q6J("ngClass",k.WLB(2,hp,!a.isActive,a.isActive)),k.xp6(1),k.Oqu(a.title)}}const qm=["*"];let Km=(()=>{class g{constructor(){this.tabs=new k.n_E}ngAfterContentInit(){const a=this.tabs.filter(o=>o.isActive);(null==a?void 0:a.length)||this.selectTab(this.tabs.first),(null==a?void 0:a.length)>1&&this.selectTab(a[0])}selectTab(a){return this.tabs.forEach(o=>{o.isActive=!1}),a.isActive=!0,!1}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-tabs-container"]],contentQueries:function(a,o,t){if(1&a&&k.Suo(t,Dg,4),2&a){let s;k.iGM(s=k.CRH())&&(o.tabs=s)}},ngContentSelectors:qm,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(a,o){1&a&&(k.F$t(),k.TgZ(0,"ul",0),k.YNc(1,zm,3,5,"li",1),k.qZA(),k.Hsn(2)),2&a&&(k.xp6(1),k.Q6J("ngForOf",o.tabs))},directives:[ke.sg,ke.mk],styles:[""]}),g})(),o_=(()=>{class g{}return g.emailPattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,g})();var dy=U(8549),rs=U(3075);function a_(g,u){if(1&g&&(k.TgZ(0,"app-alert",11),k._uU(1),k.qZA()),2&g){const a=k.oxw();k.Q6J("color",a.alertColor),k.xp6(1),k.Oqu(a.alertMessage)}}function u_(g,u){1&g&&(k.TgZ(0,"p",12),k._uU(1," Field is required !! "),k.qZA())}function hy(g,u){1&g&&(k.TgZ(0,"p",12),k._uU(1," You must enter a valid email !! "),k.qZA())}function G_(g,u){1&g&&(k.TgZ(0,"p",12),k._uU(1," Field is required !! "),k.qZA())}let l_=(()=>{class g{constructor(a,o){this.auth=a,this.modalService=o,this.constatns=o_,this.showAlert=!1,this.alertColor="blue",this.alertMessage="",this.credentials={email:"",password:""}}ngOnInit(){}login(){var a=this;return(0,oe.Z)(function*(){var o;try{a.showAlert=!0,a.alertColor="orange",a.alertMessage="Please wait ... \u{1f607}";const{email:t,password:s}=a.credentials;yield a.auth.login(t,s),a.showAlert=!1,a.modalService.toggleModal("auth-modal")}catch(t){a.showAlert=!0,a.alertColor="red",a.alertMessage=null!==(o=t.message)&&void 0!==o?o:"somthing went wrong !! \u{1f616}\u{1f613}",console.error(t)}})()}}return g.\u0275fac=function(a){return new(a||g)(k.Y36(yh.e),k.Y36(Sg.Z))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-login"]],decls:18,vars:8,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","pattern","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(a,o){if(1&a&&(k.YNc(0,a_,2,2,"app-alert",0),k.TgZ(1,"form",1,2),k.NdJ("ngSubmit",function(){return o.login()}),k.TgZ(3,"div",3)(4,"label",4),k._uU(5,"Email"),k.qZA(),k.TgZ(6,"input",5,6),k.NdJ("ngModelChange",function(s){return o.credentials.email=s}),k.qZA(),k.YNc(8,u_,2,0,"p",7),k.YNc(9,hy,2,0,"p",7),k.qZA(),k.TgZ(10,"div",3)(11,"label",4),k._uU(12,"Password"),k.qZA(),k.TgZ(13,"input",8,9),k.NdJ("ngModelChange",function(s){return o.credentials.password=s}),k.qZA(),k.YNc(15,G_,2,0,"p",7),k.qZA(),k.TgZ(16,"button",10),k._uU(17," Submit "),k.qZA()()),2&a){const t=k.MAs(2),s=k.MAs(7),h=k.MAs(14);k.Q6J("ngIf",o.showAlert),k.xp6(6),k.Q6J("ngModel",o.credentials.email)("pattern",o.constatns.emailPattern),k.xp6(2),k.Q6J("ngIf",s.dirty&&(null==s.errors?null:s.errors.required)),k.xp6(1),k.Q6J("ngIf",s.dirty&&(null==s.errors?null:s.errors.required)),k.xp6(4),k.Q6J("ngModel",o.credentials.password),k.xp6(2),k.Q6J("ngIf",h.dirty&&(null==h.errors?null:h.errors.required)),k.xp6(1),k.Q6J("disabled",t.invalid)}},directives:[ke.O5,dy.w,rs._Y,rs.JL,rs.F,rs.Fj,rs.Q7,rs.JJ,rs.On,rs.c5],styles:[""]}),g})();class _h{static match(u,a,o=""){return t=>{const s=t.get(u),h=t.get(a);return s&&h?(s.value!==h.value&&h.setErrors({noMatch:o}),null):(console.error("Form control can not be found in the form group !!"),{controlNotFound:!1})}}}var Ag=U(1205);let kg=(()=>{class g{constructor(a){this.auth=a,this.validate=o=>this.auth.fetchSignInMethodsForEmail(o.value).then(t=>t.length?{emailTaken:!0}:null)}}return g.\u0275fac=function(a){return new(a||g)(k.LFG(Ag.zQ))},g.\u0275prov=k.Yz7({token:g,factory:g.\u0275fac}),g})();var fy=U(235);function Zm(g,u){if(1&g&&(k.TgZ(0,"app-alert",13),k._uU(1),k.qZA()),2&g){const a=k.oxw();k.Q6J("color",a.alertColor),k.xp6(1),k.Oqu(a.alertMessage)}}function bh(g,u){1&g&&(k.TgZ(0,"p",14),k._uU(1," The email is taken, Please use another email. "),k.qZA())}const Bi=function(g,u){return{"opacity-50":g,"hover:bg-indigo-500":u}};let Ym=(()=>{class g{constructor(a,o){this.authService=a,this.emailTaken=o,this.showAlert=!1,this.alertMessage="",this.alertColor="orange",this.inSubmission=!1,this.name=new rs.NI("",[rs.kI.required,rs.kI.minLength(3)]),this.email=new rs.NI("",[rs.kI.required,rs.kI.email],[this.emailTaken.validate]),this.age=new rs.NI("",[rs.kI.required,rs.kI.min(18),rs.kI.max(120)]),this.password=new rs.NI("",[rs.kI.required,rs.kI.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/)]),this.confirm_password=new rs.NI("",[rs.kI.required]),this.phoneNumber=new rs.NI("",[rs.kI.required,rs.kI.minLength(15),rs.kI.maxLength(15)]),this.registerForm=new rs.cw({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[_h.match("password","confirm_password","Confirm password doesn't match the entered password \u{1f914}\u{1f914}")])}ngOnInit(){}register(){this.inSubmission=!0,this.showAlert=!0,this.alertMessage="Please wait you account is being created. \u{1f607}";const a=this.registerForm.value.password,o={name:this.registerForm.value.name,email:this.registerForm.value.email,age:+this.registerForm.value.age,phoneNumber:this.registerForm.value.phoneNumber};try{this.authService.createUser(o,a).subscribe({next:t=>{this.alertMessage="Success! Your account has been created. \u{1f44c}\u{1f44c}",this.alertColor="green"},error:t=>{console.error(t),this.alertMessage=t.message,this.alertColor="red",this.inSubmission=!1},complete:()=>{this.inSubmission=!1}})}catch(t){return console.error(t),this.alertMessage=t.message,void(this.alertColor="red")}}}return g.\u0275fac=function(a){return new(a||g)(k.Y36(yh.e),k.Y36(kg))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-register"]],features:[k._Bn([kg])],decls:30,vars:14,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","text","placeholder","Enter Name",3,"control"],["placeholder","Enter Email",3,"control"],["validators",""],["class","text-red-400",4,"ngIf"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Enter Confirm Password",3,"control"],["type","text","placeholder","Enter phone number","format","(000)0-00000000",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition",3,"ngClass","disabled"],[3,"color"],[1,"text-red-400"]],template:function(a,o){1&a&&(k.YNc(0,Zm,2,2,"app-alert",0),k.TgZ(1,"form",1),k.NdJ("ngSubmit",function(){return o.register()}),k.TgZ(2,"div",2)(3,"label",3),k._uU(4,"Name"),k.qZA(),k._UZ(5,"app-input",4),k.qZA(),k.TgZ(6,"div",2)(7,"label",3),k._uU(8,"Email"),k.qZA(),k.TgZ(9,"app-input",5),k.ynx(10,6),k.YNc(11,bh,2,0,"p",7),k.BQk(),k.qZA()(),k.TgZ(12,"div",2)(13,"label",3),k._uU(14,"Age"),k.qZA(),k._UZ(15,"app-input",8),k.qZA(),k.TgZ(16,"div",2)(17,"label",3),k._uU(18,"Password"),k.qZA(),k._UZ(19,"app-input",9),k.qZA(),k.TgZ(20,"div",2)(21,"label",3),k._uU(22,"Confirm Password"),k.qZA(),k._UZ(23,"app-input",10),k.qZA(),k.TgZ(24,"div",2)(25,"label",3),k._uU(26,"Phone Number"),k.qZA(),k._UZ(27,"app-input",11),k.qZA(),k.TgZ(28,"button",12),k._uU(29," Submit "),k.qZA()()),2&a&&(k.Q6J("ngIf",o.showAlert),k.xp6(1),k.Q6J("formGroup",o.registerForm),k.xp6(4),k.Q6J("control",o.name),k.xp6(4),k.Q6J("control",o.email),k.xp6(2),k.Q6J("ngIf",null==o.email.errors?null:o.email.errors.emailTaken),k.xp6(4),k.Q6J("control",o.age),k.xp6(4),k.Q6J("control",o.password),k.xp6(4),k.Q6J("control",o.confirm_password),k.xp6(4),k.Q6J("control",o.phoneNumber),k.xp6(1),k.Q6J("ngClass",k.WLB(11,Bi,o.registerForm.invalid,o.registerForm.valid))("disabled",o.registerForm.invalid||o.inSubmission))},directives:[ke.O5,dy.w,rs._Y,rs.JL,rs.sg,fy.a,ke.mk],styles:[""]}),g})(),py=(()=>{class g{constructor(a){this.modalService=a}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)(k.Y36(Sg.Z))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalId","auth-modal"],["heading","",1,"text-2xl","font-bold"],["title","Login"],["title","Register"]],template:function(a,o){1&a&&(k.TgZ(0,"app-modal",0)(1,"p",1),k._uU(2,"Your Account"),k.qZA(),k.TgZ(3,"app-tabs-container")(4,"app-tab",2),k._UZ(5,"app-login"),k.qZA(),k.TgZ(6,"app-tab",3),k._UZ(7,"app-register"),k.qZA()()())},directives:[ly.z,Km,Dg,l_,Ym],styles:[""]}),g})();function fp(g,u){1&g&&k._UZ(0,"app-auth-modal")}let c_=(()=>{class g{constructor(a){this.authService=a,this.title="clips"}}return g.\u0275fac=function(a){return new(a||g)(k.Y36(yh.e))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(a,o){1&a&&(k._UZ(0,"app-nav")(1,"router-outlet"),k.YNc(2,fp,1,0,"app-auth-modal",0),k.ALo(3,"async")),2&a&&(k.xp6(2),k.Q6J("ngIf",!k.lcZ(3,1,o.authService.isAuthenticatedWithDelay$)))},directives:[xg,Ne.lC,ke.O5,py],pipes:[ke.Ov],styles:[""]}),g})();var ro=U(4466);let Xa=(()=>{class g{}return g.\u0275fac=function(a){return new(a||g)},g.\u0275mod=k.oAB({type:g}),g.\u0275inj=k.cJS({imports:[[ke.ez,ro.m,rs.UX,rs.u5]]}),g})();var $l=U(2011);const Mg_firebaseConfig={apiKey:"AIzaSyCM2m0Tp1mHtZ366u5F5zI1f5rdnDRnNak",authDomain:"clibs-8ef23.firebaseapp.com",projectId:"clibs-8ef23",storageBucket:"clibs-8ef23.appspot.com",messagingSenderId:"687873988109",appId:"1:687873988109:web:e620587fa5d4c544c82744"};var Qm=U(7566);let pp=(()=>{class g{}return g.\u0275fac=function(a){return new(a||g)},g.\u0275mod=k.oAB({type:g,bootstrap:[c_]}),g.\u0275inj=k.cJS({providers:[],imports:[[E.b2,Xa,$l.hO.initializeApp(Mg_firebaseConfig),Ag.ww,Qm.yb,uy,Qm.yb]]}),g})();var gp=U(127);U(8775),(0,k.G48)(),gp.Z.initializeApp(Mg_firebaseConfig);let Pg=!1;gp.Z.auth().onAuthStateChanged(()=>{Pg||E.q6().bootstrapModule(pp).catch(g=>console.error(g)),Pg=!0})},3992:(Gt,rt,U)=>{"use strict";var E=U(9226);Gt.exports=function(Pe,ke){return void 0===ke&&(ke=!1),function(Ge,Y,Xe){if(Ge)Pe(Ge);else if(Y.statusCode>=400&&Y.statusCode<=599){var pe=Xe;if(ke)if(E.TextDecoder){var Me=function oe(Ne){return void 0===Ne&&(Ne=""),Ne.toLowerCase().split(";").reduce(function(Pe,ke){var Ge=ke.split("="),Xe=Ge[1];return"charset"===Ge[0].trim()?Xe.trim():Pe},"utf-8")}(Y.headers&&Y.headers["content-type"]);try{pe=new TextDecoder(Me).decode(Xe)}catch(Oe){}}else pe=String.fromCharCode.apply(null,new Uint8Array(Xe));Pe({cause:pe})}else Pe(null,Xe)}}},745:(Gt,rt,U)=>{"use strict";var E=U(9226),k=U(7154),oe=U(2703);function Ge(Oe,et,Je){var ft=Oe;return oe(et)?(Je=et,"string"==typeof Oe&&(ft={uri:Oe})):ft=k({},et,{uri:Oe}),ft.callback=Je,ft}function Y(Oe,et,Je){return Xe(et=Ge(Oe,et,Je))}function Xe(Oe){if(void 0===Oe.callback)throw new Error("callback argument missing");var et=!1,Je=function(je,We,St){et||(et=!0,Oe.callback(je,We,St))};function it(){var Ee=void 0;if(Ee=Tt.response?Tt.response:Tt.responseText||function pe(Oe){try{if("document"===Oe.responseType)return Oe.responseXML;if(""===Oe.responseType&&(!Oe.responseXML||"parsererror"!==Oe.responseXML.documentElement.nodeName))return Oe.responseXML}catch(Je){}return null}(Tt),he)try{Ee=JSON.parse(Ee)}catch(je){}return Ee}function He(Ee){return clearTimeout(J),Ee instanceof Error||(Ee=new Error(""+(Ee||"Unknown XMLHttpRequest Error"))),Ee.statusCode=0,Je(Ee,Ae)}function $e(){if(!ne){var Ee;clearTimeout(J);var je=Ae,We=null;return 0!==(Ee=Oe.useXDR&&void 0===Tt.status?200:1223===Tt.status?204:Tt.status)?(je={body:it(),statusCode:Ee,method:Ke,headers:{},url:be,rawRequest:Tt},Tt.getAllResponseHeaders&&(je.headers=function(et){var Je={};return et&&et.trim().split("\n").forEach(function(ft){var it=ft.indexOf(":"),He=ft.slice(0,it).trim().toLowerCase(),$e=ft.slice(it+1).trim();void 0===Je[He]?Je[He]=$e:Array.isArray(Je[He])?Je[He].push($e):Je[He]=[Je[He],$e]}),Je}(Tt.getAllResponseHeaders()))):We=new Error("Internal XMLHttpRequest Error"),Je(We,je,je.body)}}var Tt=Oe.xhr||null;Tt||(Tt=Oe.cors||Oe.useXDR?new Y.XDomainRequest:new Y.XMLHttpRequest);var ie,ne,J,be=Tt.url=Oe.uri||Oe.url,Ke=Tt.method=Oe.method||"GET",gt=Oe.body||Oe.data,xt=Tt.headers=Oe.headers||{},X=!!Oe.sync,he=!1,Ae={body:void 0,headers:{},statusCode:0,method:Ke,url:be,rawRequest:Tt};if("json"in Oe&&!1!==Oe.json&&(he=!0,xt.accept||xt.Accept||(xt.Accept="application/json"),"GET"!==Ke&&"HEAD"!==Ke&&(xt["content-type"]||xt["Content-Type"]||(xt["Content-Type"]="application/json"),gt=JSON.stringify(!0===Oe.json?gt:Oe.json))),Tt.onreadystatechange=function ft(){4===Tt.readyState&&setTimeout($e,0)},Tt.onload=$e,Tt.onerror=He,Tt.onprogress=function(){},Tt.onabort=function(){ne=!0},Tt.ontimeout=He,Tt.open(Ke,be,!X,Oe.username,Oe.password),X||(Tt.withCredentials=!!Oe.withCredentials),!X&&Oe.timeout>0&&(J=setTimeout(function(){if(!ne){ne=!0,Tt.abort("timeout");var Ee=new Error("XMLHttpRequest timeout");Ee.code="ETIMEDOUT",He(Ee)}},Oe.timeout)),Tt.setRequestHeader)for(ie in xt)xt.hasOwnProperty(ie)&&Tt.setRequestHeader(ie,xt[ie]);else if(Oe.headers&&!function ke(Oe){for(var et in Oe)if(Oe.hasOwnProperty(et))return!1;return!0}(Oe.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Oe&&(Tt.responseType=Oe.responseType),"beforeSend"in Oe&&"function"==typeof Oe.beforeSend&&Oe.beforeSend(Tt),Tt.send(gt||null),Tt}Y.httpHandler=U(3992),Gt.exports=Y,Gt.exports.default=Y,Y.XMLHttpRequest=E.XMLHttpRequest||function Me(){},Y.XDomainRequest="withCredentials"in new Y.XMLHttpRequest?Y.XMLHttpRequest:E.XDomainRequest,function Pe(Oe,et){for(var Je=0;Je<Oe.length;Je++)et(Oe[Je])}(["get","put","post","patch","head","delete"],function(Oe){Y["delete"===Oe?"del":Oe]=function(et,Je,ft){return(Je=Ge(et,Je,ft)).method=Oe.toUpperCase(),Xe(Je)}})},9401:(Gt,rt)=>{"use strict";function U(oe,Ne){return void 0===Ne&&(Ne=Object),Ne&&"function"==typeof Ne.freeze?Ne.freeze(oe):oe}var E=U({HTML:"text/html",isHTML:function(oe){return oe===E.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),k=U({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(oe){return oe===k.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});rt.freeze=U,rt.MIME_TYPE=E,rt.NAMESPACE=k},1991:(Gt,rt,U)=>{var k=U(9401),oe=U(6853),Ne=U(4436),Pe=U(8702),ke=oe.DOMImplementation,Ge=k.NAMESPACE,Y=Pe.ParseError,Xe=Pe.XMLReader;function pe(He){this.options=He||{locator:{}}}function Oe(){this.cdata=!1}function et(He,$e){$e.lineNumber=He.lineNumber,$e.columnNumber=He.columnNumber}function Je(He){if(He)return"\n@"+(He.systemId||"")+"#[line:"+He.lineNumber+",col:"+He.columnNumber+"]"}function ft(He,$e,Tt){return"string"==typeof He?He.substr($e,Tt):He.length>=$e+Tt||$e?new java.lang.String(He,$e,Tt)+"":He}function it(He,$e){He.currentElement?He.currentElement.appendChild($e):He.doc.appendChild($e)}pe.prototype.parseFromString=function(He,$e){var Tt=this.options,ie=new Xe,ne=Tt.domBuilder||new Oe,be=Tt.errorHandler,Ke=Tt.locator,gt=Tt.xmlns||{},xt=/\/x?html?$/.test($e),X=xt?Ne.HTML_ENTITIES:Ne.XML_ENTITIES;return Ke&&ne.setDocumentLocator(Ke),ie.errorHandler=function Me(He,$e,Tt){if(!He){if($e instanceof Oe)return $e;He=$e}var ie={},ne=He instanceof Function;function be(Ke){var gt=He[Ke];!gt&&ne&&(gt=2==He.length?function(xt){He(Ke,xt)}:He),ie[Ke]=gt&&function(xt){gt("[xmldom "+Ke+"]\t"+xt+Je(Tt))}||function(){}}return Tt=Tt||{},be("warning"),be("error"),be("fatalError"),ie}(be,ne,Ke),ie.domBuilder=Tt.domBuilder||ne,xt&&(gt[""]=Ge.HTML),gt.xml=gt.xml||Ge.XML,He&&"string"==typeof He?ie.parse(He,gt,X):ie.errorHandler.error("invalid doc source"),ne.doc},Oe.prototype={startDocument:function(){this.doc=(new ke).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(He,$e,Tt,ie){var ne=this.doc,be=ne.createElementNS(He,Tt||$e),Ke=ie.length;it(this,be),this.currentElement=be,this.locator&&et(this.locator,be);for(var gt=0;gt<Ke;gt++){He=ie.getURI(gt);var xt=ie.getValue(gt),X=(Tt=ie.getQName(gt),ne.createAttributeNS(He,Tt));this.locator&&et(ie.getLocator(gt),X),X.value=X.nodeValue=xt,be.setAttributeNode(X)}},endElement:function(He,$e,Tt){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(He,$e){},endPrefixMapping:function(He){},processingInstruction:function(He,$e){var Tt=this.doc.createProcessingInstruction(He,$e);this.locator&&et(this.locator,Tt),it(this,Tt)},ignorableWhitespace:function(He,$e,Tt){},characters:function(He,$e,Tt){if(He=ft.apply(this,arguments)){if(this.cdata)var ie=this.doc.createCDATASection(He);else ie=this.doc.createTextNode(He);this.currentElement?this.currentElement.appendChild(ie):/^\s*$/.test(He)&&this.doc.appendChild(ie),this.locator&&et(this.locator,ie)}},skippedEntity:function(He){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(He){(this.locator=He)&&(He.lineNumber=0)},comment:function(He,$e,Tt){He=ft.apply(this,arguments);var ie=this.doc.createComment(He);this.locator&&et(this.locator,ie),it(this,ie)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(He,$e,Tt){var ie=this.doc.implementation;if(ie&&ie.createDocumentType){var ne=ie.createDocumentType(He,$e,Tt);this.locator&&et(this.locator,ne),it(this,ne),this.doc.doctype=ne}},warning:function(He){console.warn("[xmldom warning]\t"+He,Je(this.locator))},error:function(He){console.error("[xmldom error]\t"+He,Je(this.locator))},fatalError:function(He){throw new Y(He,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(He){Oe.prototype[He]=function(){return null}}),rt.DOMParser=pe},6853:(Gt,rt,U)=>{var k=U(9401).NAMESPACE;function oe(ge){return""!==ge}function Pe(ge,xe){return ge.hasOwnProperty(xe)||(ge[xe]=!0),ge}function ke(ge){if(!ge)return[];var xe=function Ne(ge){return ge?ge.split(/[\t\n\f\r ]+/).filter(oe):[]}(ge);return Object.keys(xe.reduce(Pe,{}))}function Y(ge,xe){for(var Ue in ge)xe[Ue]=ge[Ue]}function Xe(ge,xe){var Ue=ge.prototype;if(!(Ue instanceof xe)){let on=function(){};on.prototype=xe.prototype,on=new on,Y(Ue,on),ge.prototype=Ue=on}Ue.constructor!=ge&&("function"!=typeof ge&&console.error("unknown Class:"+ge),Ue.constructor=ge)}var pe={},Me=pe.ELEMENT_NODE=1,Oe=pe.ATTRIBUTE_NODE=2,et=pe.TEXT_NODE=3,Je=pe.CDATA_SECTION_NODE=4,ft=pe.ENTITY_REFERENCE_NODE=5,it=pe.ENTITY_NODE=6,He=pe.PROCESSING_INSTRUCTION_NODE=7,$e=pe.COMMENT_NODE=8,Tt=pe.DOCUMENT_NODE=9,ie=pe.DOCUMENT_TYPE_NODE=10,ne=pe.DOCUMENT_FRAGMENT_NODE=11,be=pe.NOTATION_NODE=12,Ke={},gt={},he=(Ke.INDEX_SIZE_ERR=(gt[1]="Index size error",1),Ke.DOMSTRING_SIZE_ERR=(gt[2]="DOMString size error",2),Ke.HIERARCHY_REQUEST_ERR=(gt[3]="Hierarchy request error",3)),We=(Ke.WRONG_DOCUMENT_ERR=(gt[4]="Wrong document",4),Ke.INVALID_CHARACTER_ERR=(gt[5]="Invalid character",5),Ke.NO_DATA_ALLOWED_ERR=(gt[6]="No data allowed",6),Ke.NO_MODIFICATION_ALLOWED_ERR=(gt[7]="No modification allowed",7),Ke.NOT_FOUND_ERR=(gt[8]="Not found",8)),ct=(Ke.NOT_SUPPORTED_ERR=(gt[9]="Not supported",9),Ke.INUSE_ATTRIBUTE_ERR=(gt[10]="Attribute in use",10));function Yt(ge,xe){if(xe instanceof Error)var Ue=xe;else Ue=this,Error.call(this,gt[ge]),this.message=gt[ge],Error.captureStackTrace&&Error.captureStackTrace(this,Yt);return Ue.code=ge,xe&&(this.message=this.message+": "+xe),Ue}function Nt(){}function fn(ge,xe){this._node=ge,this._refresh=xe,Ln(this)}function Ln(ge){var xe=ge._node._inc||ge._node.ownerDocument._inc;if(ge._inc!=xe){var Ue=ge._refresh(ge._node);sn(ge,"length",Ue.length),Y(Ue,ge),ge._inc=xe}}function Vn(){}function Ar(ge,xe){for(var Ue=ge.length;Ue--;)if(ge[Ue]===xe)return Ue}function vr(ge,xe,Ue,At){if(At?xe[Ar(xe,At)]=Ue:xe[xe.length++]=Ue,ge){Ue.ownerElement=ge;var on=ge.ownerDocument;on&&(At&&Kn(on,ge,At),function Mn(ge,xe,Ue){ge&&ge._inc++,Ue.namespaceURI===k.XMLNS&&(xe._nsMap[Ue.prefix?Ue.localName:""]=Ue.value)}(on,ge,Ue))}}function Cr(ge,xe,Ue){var At=Ar(xe,Ue);if(!(At>=0))throw Yt(We,new Error(ge.tagName+"@"+Ue));for(var on=xe.length-1;At<on;)xe[At]=xe[++At];if(xe.length=on,ge){var Qn=ge.ownerDocument;Qn&&(Kn(Qn,ge,Ue),Ue.ownerElement=null)}}function kr(){}function ur(){}function Lr(ge){return("<"==ge?"&lt;":">"==ge&&"&gt;")||"&"==ge&&"&amp;"||'"'==ge&&"&quot;"||"&#"+ge.charCodeAt()+";"}function Mr(ge,xe){if(xe(ge))return!0;if(ge=ge.firstChild)do{if(Mr(ge,xe))return!0}while(ge=ge.nextSibling)}function Pr(){}function Kn(ge,xe,Ue,At){ge&&ge._inc++,Ue.namespaceURI===k.XMLNS&&delete xe._nsMap[Ue.prefix?Ue.localName:""]}function pr(ge,xe,Ue){if(ge&&ge._inc){ge._inc++;var At=xe.childNodes;if(Ue)At[At.length++]=Ue;else{for(var on=xe.firstChild,Qn=0;on;)At[Qn++]=on,on=on.nextSibling;At.length=Qn}}}function Cn(ge,xe){var Ue=xe.previousSibling,At=xe.nextSibling;return Ue?Ue.nextSibling=At:ge.firstChild=At,At?At.previousSibling=Ue:ge.lastChild=Ue,pr(ge.ownerDocument,ge),xe}function Vi(ge,xe,Ue){var At=xe.parentNode;if(At&&At.removeChild(xe),xe.nodeType===ne){var on=xe.firstChild;if(null==on)return xe;var Qn=xe.lastChild}else on=Qn=xe;var Qr=Ue?Ue.previousSibling:ge.lastChild;on.previousSibling=Qr,Qn.nextSibling=Ue,Qr?Qr.nextSibling=on:ge.firstChild=on,null==Ue?ge.lastChild=Qn:Ue.previousSibling=Qn;do{on.parentNode=ge}while(on!==Qn&&(on=on.nextSibling));return pr(ge.ownerDocument||ge,ge),xe.nodeType==ne&&(xe.firstChild=xe.lastChild=null),xe}function xr(){this._nsMap={}}function ri(){}function Ni(){}function Hi(){}function Rr(){}function Nn(){}function Jn(){}function ci(){}function yi(){}function cr(){}function xn(){}function Hr(){}function _i(){}function Ye(ge,xe){var Ue=[],At=9==this.nodeType&&this.documentElement||this,on=At.prefix,Qn=At.namespaceURI;if(Qn&&null==on&&null==(on=At.lookupPrefix(Qn)))var Qr=[{namespace:Qn,prefix:null}];return Jt(this,Ue,ge,xe,Qr),Ue.join("")}function ut(ge,xe,Ue){var At=ge.prefix||"",on=ge.namespaceURI;if(!on||"xml"===At&&on===k.XML||on===k.XMLNS)return!1;for(var Qn=Ue.length;Qn--;){var Qr=Ue[Qn];if(Qr.prefix===At)return Qr.namespace!==on}return!0}function dt(ge,xe,Ue){ge.push(" ",xe,'="',Ue.replace(/[<&"]/g,Lr),'"')}function Jt(ge,xe,Ue,At,on){if(on||(on=[]),At){if(!(ge=At(ge)))return;if("string"==typeof ge)return void xe.push(ge)}switch(ge.nodeType){case Me:var Qn=ge.attributes,Qr=Qn.length,mr=ge.firstChild,Ot=ge.tagName,ht=Ot;if(!(Ue=k.isHTML(ge.namespaceURI)||Ue)&&!ge.prefix&&ge.namespaceURI){for(var Be,bt=0;bt<Qn.length;bt++)if("xmlns"===Qn.item(bt).name){Be=Qn.item(bt).value;break}if(!Be)for(var Kt=on.length-1;Kt>=0;Kt--)if(""===(Hn=on[Kt]).prefix&&Hn.namespace===ge.namespaceURI){Be=Hn.namespace;break}if(Be!==ge.namespaceURI)for(Kt=on.length-1;Kt>=0;Kt--){var Hn;if((Hn=on[Kt]).namespace===ge.namespaceURI){Hn.prefix&&(ht=Hn.prefix+":"+Ot);break}}}xe.push("<",ht);for(var Zn=0;Zn<Qr;Zn++)"xmlns"==(Ir=Qn.item(Zn)).prefix?on.push({prefix:Ir.localName,namespace:Ir.value}):"xmlns"==Ir.nodeName&&on.push({prefix:"",namespace:Ir.value});for(Zn=0;Zn<Qr;Zn++){var Ir,Xr,wi;ut(Ir=Qn.item(Zn),0,on)&&(dt(xe,(Xr=Ir.prefix||"")?"xmlns:"+Xr:"xmlns",wi=Ir.namespaceURI),on.push({prefix:Xr,namespace:wi})),Jt(Ir,xe,Ue,At,on)}if(Ot===ht&&ut(ge,0,on)&&(dt(xe,(Xr=ge.prefix||"")?"xmlns:"+Xr:"xmlns",wi=ge.namespaceURI),on.push({prefix:Xr,namespace:wi})),mr||Ue&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ot)){if(xe.push(">"),Ue&&/^script$/i.test(Ot))for(;mr;)mr.data?xe.push(mr.data):Jt(mr,xe,Ue,At,on.slice()),mr=mr.nextSibling;else for(;mr;)Jt(mr,xe,Ue,At,on.slice()),mr=mr.nextSibling;xe.push("</",ht,">")}else xe.push("/>");return;case Tt:case ne:for(mr=ge.firstChild;mr;)Jt(mr,xe,Ue,At,on.slice()),mr=mr.nextSibling;return;case Oe:return dt(xe,ge.name,ge.value);case et:return xe.push(ge.data.replace(/[<&]/g,Lr).replace(/]]>/g,"]]&gt;"));case Je:return xe.push("<![CDATA[",ge.data,"]]>");case $e:return xe.push("\x3c!--",ge.data,"--\x3e");case ie:var Jr=ge.publicId,oi=ge.systemId;if(xe.push("<!DOCTYPE ",ge.name),Jr)xe.push(" PUBLIC ",Jr),oi&&"."!=oi&&xe.push(" ",oi),xe.push(">");else if(oi&&"."!=oi)xe.push(" SYSTEM ",oi,">");else{var ls=ge.internalSubset;ls&&xe.push(" [",ls,"]"),xe.push(">")}return;case He:return xe.push("<?",ge.target," ",ge.data,"?>");case ft:return xe.push("&",ge.nodeName,";");default:xe.push("??",ge.nodeName)}}function at(ge,xe,Ue){var At;switch(xe.nodeType){case Me:(At=xe.cloneNode(!1)).ownerDocument=ge;case ne:break;case Oe:Ue=!0}if(At||(At=xe.cloneNode(!1)),At.ownerDocument=ge,At.parentNode=null,Ue)for(var on=xe.firstChild;on;)At.appendChild(at(ge,on,Ue)),on=on.nextSibling;return At}function Mt(ge,xe,Ue){var At=new xe.constructor;for(var on in xe){var Qn=xe[on];"object"!=typeof Qn&&Qn!=At[on]&&(At[on]=Qn)}switch(xe.childNodes&&(At.childNodes=new Nt),At.ownerDocument=ge,At.nodeType){case Me:var Qr=xe.attributes,Ot=At.attributes=new Vn,ht=Qr.length;Ot._ownerElement=At;for(var Be=0;Be<ht;Be++)At.setAttributeNode(Mt(ge,Qr.item(Be),!0));break;case Oe:Ue=!0}if(Ue)for(var bt=xe.firstChild;bt;)At.appendChild(Mt(ge,bt,Ue)),bt=bt.nextSibling;return At}function sn(ge,xe,Ue){ge[xe]=Ue}Ke.INVALID_STATE_ERR=(gt[11]="Invalid state",11),Ke.SYNTAX_ERR=(gt[12]="Syntax error",12),Ke.INVALID_MODIFICATION_ERR=(gt[13]="Invalid modification",13),Ke.NAMESPACE_ERR=(gt[14]="Invalid namespace",14),Ke.INVALID_ACCESS_ERR=(gt[15]="Invalid access",15),Yt.prototype=Error.prototype,Y(Ke,Yt),Nt.prototype={length:0,item:function(ge){return this[ge]||null},toString:function(ge,xe){for(var Ue=[],At=0;At<this.length;At++)Jt(this[At],Ue,ge,xe);return Ue.join("")}},fn.prototype.item=function(ge){return Ln(this),this[ge]},Xe(fn,Nt),Vn.prototype={length:0,item:Nt.prototype.item,getNamedItem:function(ge){for(var xe=this.length;xe--;){var Ue=this[xe];if(Ue.nodeName==ge)return Ue}},setNamedItem:function(ge){var xe=ge.ownerElement;if(xe&&xe!=this._ownerElement)throw new Yt(ct);var Ue=this.getNamedItem(ge.nodeName);return vr(this._ownerElement,this,ge,Ue),Ue},setNamedItemNS:function(ge){var Ue,xe=ge.ownerElement;if(xe&&xe!=this._ownerElement)throw new Yt(ct);return Ue=this.getNamedItemNS(ge.namespaceURI,ge.localName),vr(this._ownerElement,this,ge,Ue),Ue},removeNamedItem:function(ge){var xe=this.getNamedItem(ge);return Cr(this._ownerElement,this,xe),xe},removeNamedItemNS:function(ge,xe){var Ue=this.getNamedItemNS(ge,xe);return Cr(this._ownerElement,this,Ue),Ue},getNamedItemNS:function(ge,xe){for(var Ue=this.length;Ue--;){var At=this[Ue];if(At.localName==xe&&At.namespaceURI==ge)return At}return null}},kr.prototype={hasFeature:function(ge,xe){return!0},createDocument:function(ge,xe,Ue){var At=new Pr;if(At.implementation=this,At.childNodes=new Nt,At.doctype=Ue||null,Ue&&At.appendChild(Ue),xe){var on=At.createElementNS(ge,xe);At.appendChild(on)}return At},createDocumentType:function(ge,xe,Ue){var At=new Jn;return At.name=ge,At.nodeName=ge,At.publicId=xe||"",At.systemId=Ue||"",At}},ur.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(ge,xe){return Vi(this,ge,xe)},replaceChild:function(ge,xe){this.insertBefore(ge,xe),xe&&this.removeChild(xe)},removeChild:function(ge){return Cn(this,ge)},appendChild:function(ge){return this.insertBefore(ge,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(ge){return Mt(this.ownerDocument||this,this,ge)},normalize:function(){for(var ge=this.firstChild;ge;){var xe=ge.nextSibling;xe&&xe.nodeType==et&&ge.nodeType==et?(this.removeChild(xe),ge.appendData(xe.data)):(ge.normalize(),ge=xe)}},isSupported:function(ge,xe){return this.ownerDocument.implementation.hasFeature(ge,xe)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(ge){for(var xe=this;xe;){var Ue=xe._nsMap;if(Ue)for(var At in Ue)if(Ue[At]==ge)return At;xe=xe.nodeType==Oe?xe.ownerDocument:xe.parentNode}return null},lookupNamespaceURI:function(ge){for(var xe=this;xe;){var Ue=xe._nsMap;if(Ue&&ge in Ue)return Ue[ge];xe=xe.nodeType==Oe?xe.ownerDocument:xe.parentNode}return null},isDefaultNamespace:function(ge){return null==this.lookupPrefix(ge)}},Y(pe,ur),Y(pe,ur.prototype),Pr.prototype={nodeName:"#document",nodeType:Tt,doctype:null,documentElement:null,_inc:1,insertBefore:function(ge,xe){if(ge.nodeType==ne){for(var Ue=ge.firstChild;Ue;){var At=Ue.nextSibling;this.insertBefore(Ue,xe),Ue=At}return ge}return null==this.documentElement&&ge.nodeType==Me&&(this.documentElement=ge),Vi(this,ge,xe),ge.ownerDocument=this,ge},removeChild:function(ge){return this.documentElement==ge&&(this.documentElement=null),Cn(this,ge)},importNode:function(ge,xe){return at(this,ge,xe)},getElementById:function(ge){var xe=null;return Mr(this.documentElement,function(Ue){if(Ue.nodeType==Me&&Ue.getAttribute("id")==ge)return xe=Ue,!0}),xe},getElementsByClassName:function(ge){var xe=ke(ge);return new fn(this,function(Ue){var At=[];return xe.length>0&&Mr(Ue.documentElement,function(on){if(on!==Ue&&on.nodeType===Me){var Qn=on.getAttribute("class");if(Qn){var Qr=ge===Qn;if(!Qr){var Ot=ke(Qn);Qr=xe.every(function Ge(ge){return function(xe){return ge&&-1!==ge.indexOf(xe)}}(Ot))}Qr&&At.push(on)}}}),At})},createElement:function(ge){var xe=new xr;return xe.ownerDocument=this,xe.nodeName=ge,xe.tagName=ge,xe.localName=ge,xe.childNodes=new Nt,(xe.attributes=new Vn)._ownerElement=xe,xe},createDocumentFragment:function(){var ge=new xn;return ge.ownerDocument=this,ge.childNodes=new Nt,ge},createTextNode:function(ge){var xe=new Hi;return xe.ownerDocument=this,xe.appendData(ge),xe},createComment:function(ge){var xe=new Rr;return xe.ownerDocument=this,xe.appendData(ge),xe},createCDATASection:function(ge){var xe=new Nn;return xe.ownerDocument=this,xe.appendData(ge),xe},createProcessingInstruction:function(ge,xe){var Ue=new Hr;return Ue.ownerDocument=this,Ue.tagName=Ue.target=ge,Ue.nodeValue=Ue.data=xe,Ue},createAttribute:function(ge){var xe=new ri;return xe.ownerDocument=this,xe.name=ge,xe.nodeName=ge,xe.localName=ge,xe.specified=!0,xe},createEntityReference:function(ge){var xe=new cr;return xe.ownerDocument=this,xe.nodeName=ge,xe},createElementNS:function(ge,xe){var Ue=new xr,At=xe.split(":"),on=Ue.attributes=new Vn;return Ue.childNodes=new Nt,Ue.ownerDocument=this,Ue.nodeName=xe,Ue.tagName=xe,Ue.namespaceURI=ge,2==At.length?(Ue.prefix=At[0],Ue.localName=At[1]):Ue.localName=xe,on._ownerElement=Ue,Ue},createAttributeNS:function(ge,xe){var Ue=new ri,At=xe.split(":");return Ue.ownerDocument=this,Ue.nodeName=xe,Ue.name=xe,Ue.namespaceURI=ge,Ue.specified=!0,2==At.length?(Ue.prefix=At[0],Ue.localName=At[1]):Ue.localName=xe,Ue}},Xe(Pr,ur),Pr.prototype.getElementsByTagName=(xr.prototype={nodeType:Me,hasAttribute:function(ge){return null!=this.getAttributeNode(ge)},getAttribute:function(ge){var xe=this.getAttributeNode(ge);return xe&&xe.value||""},getAttributeNode:function(ge){return this.attributes.getNamedItem(ge)},setAttribute:function(ge,xe){var Ue=this.ownerDocument.createAttribute(ge);Ue.value=Ue.nodeValue=""+xe,this.setAttributeNode(Ue)},removeAttribute:function(ge){var xe=this.getAttributeNode(ge);xe&&this.removeAttributeNode(xe)},appendChild:function(ge){return ge.nodeType===ne?this.insertBefore(ge,null):function hr(ge,xe){var Ue=xe.parentNode;if(Ue){var At=ge.lastChild;Ue.removeChild(xe),At=ge.lastChild}return At=ge.lastChild,xe.parentNode=ge,xe.previousSibling=At,xe.nextSibling=null,At?At.nextSibling=xe:ge.firstChild=xe,ge.lastChild=xe,pr(ge.ownerDocument,ge,xe),xe}(this,ge)},setAttributeNode:function(ge){return this.attributes.setNamedItem(ge)},setAttributeNodeNS:function(ge){return this.attributes.setNamedItemNS(ge)},removeAttributeNode:function(ge){return this.attributes.removeNamedItem(ge.nodeName)},removeAttributeNS:function(ge,xe){var Ue=this.getAttributeNodeNS(ge,xe);Ue&&this.removeAttributeNode(Ue)},hasAttributeNS:function(ge,xe){return null!=this.getAttributeNodeNS(ge,xe)},getAttributeNS:function(ge,xe){var Ue=this.getAttributeNodeNS(ge,xe);return Ue&&Ue.value||""},setAttributeNS:function(ge,xe,Ue){var At=this.ownerDocument.createAttributeNS(ge,xe);At.value=At.nodeValue=""+Ue,this.setAttributeNode(At)},getAttributeNodeNS:function(ge,xe){return this.attributes.getNamedItemNS(ge,xe)},getElementsByTagName:function(ge){return new fn(this,function(xe){var Ue=[];return Mr(xe,function(At){At!==xe&&At.nodeType==Me&&("*"===ge||At.tagName==ge)&&Ue.push(At)}),Ue})},getElementsByTagNameNS:function(ge,xe){return new fn(this,function(Ue){var At=[];return Mr(Ue,function(on){on!==Ue&&on.nodeType===Me&&("*"===ge||on.namespaceURI===ge)&&("*"===xe||on.localName==xe)&&At.push(on)}),At})}}).getElementsByTagName,Pr.prototype.getElementsByTagNameNS=xr.prototype.getElementsByTagNameNS,Xe(xr,ur),ri.prototype.nodeType=Oe,Xe(ri,ur),Ni.prototype={data:"",substringData:function(ge,xe){return this.data.substring(ge,ge+xe)},appendData:function(ge){this.nodeValue=this.data=ge=this.data+ge,this.length=ge.length},insertData:function(ge,xe){this.replaceData(ge,0,xe)},appendChild:function(ge){throw new Error(gt[he])},deleteData:function(ge,xe){this.replaceData(ge,xe,"")},replaceData:function(ge,xe,Ue){var At=this.data.substring(0,ge),on=this.data.substring(ge+xe);this.nodeValue=this.data=Ue=At+Ue+on,this.length=Ue.length}},Xe(Ni,ur),Hi.prototype={nodeName:"#text",nodeType:et,splitText:function(ge){var xe=this.data,Ue=xe.substring(ge);xe=xe.substring(0,ge),this.data=this.nodeValue=xe,this.length=xe.length;var At=this.ownerDocument.createTextNode(Ue);return this.parentNode&&this.parentNode.insertBefore(At,this.nextSibling),At}},Xe(Hi,Ni),Rr.prototype={nodeName:"#comment",nodeType:$e},Xe(Rr,Ni),Nn.prototype={nodeName:"#cdata-section",nodeType:Je},Xe(Nn,Ni),Jn.prototype.nodeType=ie,Xe(Jn,ur),ci.prototype.nodeType=be,Xe(ci,ur),yi.prototype.nodeType=it,Xe(yi,ur),cr.prototype.nodeType=ft,Xe(cr,ur),xn.prototype.nodeName="#document-fragment",xn.prototype.nodeType=ne,Xe(xn,ur),Hr.prototype.nodeType=He,Xe(Hr,ur),_i.prototype.serializeToString=function(ge,xe,Ue){return Ye.call(ge,xe,Ue)},ur.prototype.toString=Ye;try{if(Object.defineProperty){let ge=function(xe){switch(xe.nodeType){case Me:case ne:var Ue=[];for(xe=xe.firstChild;xe;)7!==xe.nodeType&&8!==xe.nodeType&&Ue.push(ge(xe)),xe=xe.nextSibling;return Ue.join("");default:return xe.nodeValue}};Object.defineProperty(fn.prototype,"length",{get:function(){return Ln(this),this.$$length}}),Object.defineProperty(ur.prototype,"textContent",{get:function(){return ge(this)},set:function(xe){switch(this.nodeType){case Me:case ne:for(;this.firstChild;)this.removeChild(this.firstChild);(xe||String(xe))&&this.appendChild(this.ownerDocument.createTextNode(xe));break;default:this.data=xe,this.value=xe,this.nodeValue=xe}}}),sn=function(xe,Ue,At){xe["$$"+Ue]=At}}}catch(ge){}rt.DocumentType=Jn,rt.DOMException=Yt,rt.DOMImplementation=kr,rt.Element=xr,rt.Node=ur,rt.NodeList=Nt,rt.XMLSerializer=_i},4436:(Gt,rt,U)=>{var E=U(9401).freeze;rt.XML_ENTITIES=E({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),rt.HTML_ENTITIES=E({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),rt.entityMap=rt.HTML_ENTITIES},978:(Gt,rt,U)=>{U(6853);rt.DOMParser=U(1991).DOMParser},8702:(Gt,rt,U)=>{var E=U(9401).NAMESPACE,k=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oe=new RegExp("[\\-\\.0-9"+k.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Ne=new RegExp("^"+k.source+oe.source+"*(?::"+k.source+oe.source+"*)?$");function et(X,he){this.message=X,this.locator=he,Error.captureStackTrace&&Error.captureStackTrace(this,et)}function Je(){}function it(X,he){return he.lineNumber=X.lineNumber,he.columnNumber=X.columnNumber,he}function He(X,he,J,Ae,Ee,je){function We(cn,Yt,Nt){J.attributeNames.hasOwnProperty(cn)&&je.fatalError("Attribute "+cn+" redefined"),J.addValue(cn,Yt,Nt)}for(var St,wt=++he,Dt=0;;){var Et=X.charAt(wt);switch(Et){case"=":if(1===Dt)St=X.slice(he,wt),Dt=3;else{if(2!==Dt)throw new Error("attribute equal must after attrName");Dt=3}break;case"'":case'"':if(3===Dt||1===Dt){if(1===Dt&&(je.warning('attribute value must after "="'),St=X.slice(he,wt)),!((wt=X.indexOf(Et,he=wt+1))>0))throw new Error("attribute value no end '"+Et+"' match");We(St,ct=X.slice(he,wt).replace(/&#?\w+;/g,Ee),he-1),Dt=5}else{if(4!=Dt)throw new Error('attribute value must after "="');We(St,ct=X.slice(he,wt).replace(/&#?\w+;/g,Ee),he),je.warning('attribute "'+St+'" missed start quot('+Et+")!!"),he=wt+1,Dt=5}break;case"/":switch(Dt){case 0:J.setTagName(X.slice(he,wt));case 5:case 6:case 7:Dt=7,J.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return je.error("unexpected end of input"),0==Dt&&J.setTagName(X.slice(he,wt)),wt;case">":switch(Dt){case 0:J.setTagName(X.slice(he,wt));case 5:case 6:case 7:break;case 4:case 1:"/"===(ct=X.slice(he,wt)).slice(-1)&&(J.closed=!0,ct=ct.slice(0,-1));case 2:2===Dt&&(ct=St),4==Dt?(je.warning('attribute "'+ct+'" missed quot(")!'),We(St,ct.replace(/&#?\w+;/g,Ee),he)):((!E.isHTML(Ae[""])||!ct.match(/^(?:disabled|checked|selected)$/i))&&je.warning('attribute "'+ct+'" missed value!! "'+ct+'" instead!!'),We(ct,ct,he));break;case 3:throw new Error("attribute value missed!!")}return wt;case"\x80":Et=" ";default:if(Et<=" ")switch(Dt){case 0:J.setTagName(X.slice(he,wt)),Dt=6;break;case 1:St=X.slice(he,wt),Dt=2;break;case 4:var ct=X.slice(he,wt).replace(/&#?\w+;/g,Ee);je.warning('attribute "'+ct+'" missed quot(")!!'),We(St,ct,he);case 5:Dt=6}else switch(Dt){case 2:(!E.isHTML(Ae[""])||!St.match(/^(?:disabled|checked|selected)$/i))&&je.warning('attribute "'+St+'" missed value!! "'+St+'" instead2!!'),We(St,St,he),he=wt,Dt=1;break;case 5:je.warning('attribute space is required"'+St+'"!!');case 6:Dt=1,he=wt;break;case 3:Dt=4,he=wt;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}wt++}}function $e(X,he,J){for(var Ae=X.tagName,Ee=null,Et=X.length;Et--;){var je=X[Et],We=je.qName,St=je.value;if(($t=We.indexOf(":"))>0)var ct=je.prefix=We.slice(0,$t),wt=We.slice($t+1),Dt="xmlns"===ct&&wt;else wt=We,ct=null,Dt="xmlns"===We&&"";je.localName=wt,!1!==Dt&&(null==Ee&&(Ee={},ne(J,J={})),J[Dt]=Ee[Dt]=St,je.uri=E.XMLNS,he.startPrefixMapping(Dt,St))}for(Et=X.length;Et--;)(ct=(je=X[Et]).prefix)&&("xml"===ct&&(je.uri=E.XML),"xmlns"!==ct&&(je.uri=J[ct||""]));var $t;($t=Ae.indexOf(":"))>0?(ct=X.prefix=Ae.slice(0,$t),wt=X.localName=Ae.slice($t+1)):(ct=null,wt=X.localName=Ae);var cn=X.uri=J[ct||""];if(he.startElement(cn,wt,Ae,X),!X.closed)return X.currentNSMap=J,X.localNSMap=Ee,!0;if(he.endElement(cn,wt,Ae),Ee)for(ct in Ee)he.endPrefixMapping(ct)}function Tt(X,he,J,Ae,Ee){if(/^(?:script|textarea)$/i.test(J)){var je=X.indexOf("</"+J+">",he),We=X.substring(he+1,je);if(/[&<]/.test(We))return/^script$/i.test(J)?(Ee.characters(We,0,We.length),je):(We=We.replace(/&#?\w+;/g,Ae),Ee.characters(We,0,We.length),je)}return he+1}function ie(X,he,J,Ae){var Ee=Ae[J];return null==Ee&&((Ee=X.lastIndexOf("</"+J+">"))<he&&(Ee=X.lastIndexOf("</"+J)),Ae[J]=Ee),Ee<he}function ne(X,he){for(var J in X)he[J]=X[J]}function be(X,he,J,Ae){if("-"===X.charAt(he+2))return"-"===X.charAt(he+3)?(je=X.indexOf("--\x3e",he+4))>he?(J.comment(X,he+4,je-he-4),je+3):(Ae.error("Unclosed comment"),-1):-1;if("CDATA["==X.substr(he+3,6)){var je=X.indexOf("]]>",he+9);return J.startCDATA(),J.characters(X,he+9,je-he-9),J.endCDATA(),je+3}var We=function xt(X,he){var J,Ae=[],Ee=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Ee.lastIndex=he,Ee.exec(X);J=Ee.exec(X);)if(Ae.push(J),J[1])return Ae}(X,he),St=We.length;if(St>1&&/!doctype/i.test(We[0][0])){var ct=We[1][0],wt=!1,Dt=!1;St>3&&(/^public$/i.test(We[2][0])?(wt=We[3][0],Dt=St>4&&We[4][0]):/^system$/i.test(We[2][0])&&(Dt=We[3][0]));var Et=We[St-1];return J.startDTD(ct,wt,Dt),J.endDTD(),Et.index+Et[0].length}return-1}function Ke(X,he,J){var Ae=X.indexOf("?>",he);if(Ae){var Ee=X.substring(he,Ae).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Ee?(J.processingInstruction(Ee[1],Ee[2]),Ae+2):-1}return-1}function gt(){this.attributeNames={}}(et.prototype=new Error).name=et.name,Je.prototype={parse:function(X,he,J){var Ae=this.domBuilder;Ae.startDocument(),ne(he,he={}),function ft(X,he,J,Ae,Ee){function We(hr){var xr=hr.slice(1,-1);return xr in J?J[xr]:"#"===xr.charAt(0)?function je(hr){return hr>65535?(hr-=65536,String.fromCharCode(55296+(hr>>10),56320+(1023&hr))):String.fromCharCode(hr)}(parseInt(xr.substr(1).replace("x","0x"))):(Ee.error("entity not found:"+hr),hr)}function St(hr){if(hr>Nt){var xr=X.substring(Nt,hr).replace(/&#?\w+;/g,We);$t&&ct(Nt),Ae.characters(xr,0,hr-Nt),Nt=hr}}function ct(hr,xr){for(;hr>=Dt&&(xr=Et.exec(X));)Dt=(wt=xr.index)+xr[0].length,$t.lineNumber++;$t.columnNumber=hr-wt+1}for(var wt=0,Dt=0,Et=/.*(?:\r\n?|\n)|.*$/g,$t=Ae.locator,cn=[{currentNSMap:he}],Yt={},Nt=0;;){try{var fn=X.indexOf("<",Nt);if(fn<0){if(!X.substr(Nt).match(/^\s*$/)){var Ln=Ae.doc,Vn=Ln.createTextNode(X.substr(Nt));Ln.appendChild(Vn),Ae.currentElement=Vn}return}switch(fn>Nt&&St(fn),X.charAt(fn+1)){case"/":var Mn=X.indexOf(">",fn+3),Ar=X.substring(fn+2,Mn).replace(/[ \t\n\r]+$/g,""),vr=cn.pop();Mn<0?(Ar=X.substring(fn+2).replace(/[\s<].*/,""),Ee.error("end tag name: "+Ar+" is not complete:"+vr.tagName),Mn=fn+1+Ar.length):Ar.match(/\s</)&&(Ar=Ar.replace(/[\s<].*/,""),Ee.error("end tag name: "+Ar+" maybe not complete"),Mn=fn+1+Ar.length);var Cr=vr.localNSMap,kr=vr.tagName==Ar;if(kr||vr.tagName&&vr.tagName.toLowerCase()==Ar.toLowerCase()){if(Ae.endElement(vr.uri,vr.localName,Ar),Cr)for(var Lr in Cr)Ae.endPrefixMapping(Lr);kr||Ee.fatalError("end tag name: "+Ar+" is not match the current start tagName:"+vr.tagName)}else cn.push(vr);Mn++;break;case"?":$t&&ct(fn),Mn=Ke(X,fn,Ae);break;case"!":$t&&ct(fn),Mn=be(X,fn,Ae,Ee);break;default:$t&&ct(fn);var Mr=new gt,Pr=cn[cn.length-1].currentNSMap,Kn=(Mn=He(X,fn,Mr,Pr,We,Ee),Mr.length);if(!Mr.closed&&ie(X,Mn,Mr.tagName,Yt)&&(Mr.closed=!0,J.nbsp||Ee.warning("unclosed xml attribute")),$t&&Kn){for(var pr=it($t,{}),Cn=0;Cn<Kn;Cn++){var Vi=Mr[Cn];ct(Vi.offset),Vi.locator=it($t,{})}Ae.locator=pr,$e(Mr,Ae,Pr)&&cn.push(Mr),Ae.locator=$t}else $e(Mr,Ae,Pr)&&cn.push(Mr);E.isHTML(Mr.uri)&&!Mr.closed?Mn=Tt(X,Mn,Mr.tagName,We,Ae):Mn++}}catch(hr){if(hr instanceof et)throw hr;Ee.error("element parse error: "+hr),Mn=-1}Mn>Nt?Nt=Mn:St(Math.max(fn,Nt)+1)}}(X,he,J,Ae,this.errorHandler),Ae.endDocument()}},gt.prototype={setTagName:function(X){if(!Ne.test(X))throw new Error("invalid tagName:"+X);this.tagName=X},addValue:function(X,he,J){if(!Ne.test(X))throw new Error("invalid attribute:"+X);this.attributeNames[X]=this.length,this[this.length++]={qName:X,value:he,offset:J}},length:0,getLocalName:function(X){return this[X].localName},getLocator:function(X){return this[X].locator},getQName:function(X){return this[X].qName},getURI:function(X){return this[X].uri},getValue:function(X){return this[X].value}},rt.XMLReader=Je,rt.ParseError=et},5867:(Gt,rt,U)=>{"use strict";U.d(rt,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=U(9681);(0,E.registerVersion)("firebase","9.8.2","app")},127:(Gt,rt,U)=>{"use strict";U.d(rt,{Z:()=>E.Z});var E=U(3942);E.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Gt,rt,U)=>{"use strict";U.r(rt);var E=U(5861),k=U(3942),oe=U(2090),Ne=U(9681),Pe=U(655),ke=U(1877),Ge=U(4859);const ft=function et(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},it=function Je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},He=new oe.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Tt=new ke.Yd("@firebase/auth");function ie(C,...y){Tt.logLevel<=ke.in.ERROR&&Tt.error(`Auth (${Ne.SDK_VERSION}): ${C}`,...y)}function ne(C,...y){throw xt(C,...y)}function be(C,...y){return xt(C,...y)}function Ke(C,y,b){const M=Object.assign(Object.assign({},it()),{[y]:b});return new oe.LL("auth","Firebase",M).create(y,{appName:C.name})}function gt(C,y,b){if(!(y instanceof b))throw b.name!==y.constructor.name&&ne(C,"argument-error"),Ke(C,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xt(C,...y){if("string"!=typeof C){const b=y[0],M=[...y.slice(1)];return M[0]&&(M[0].appName=C.name),C._errorFactory.create(b,...M)}return He.create(C,...y)}function X(C,y,...b){if(!C)throw xt(y,...b)}function he(C){const y="INTERNAL ASSERTION FAILED: "+C;throw ie(y),new Error(y)}function J(C,y){C||he(y)}const Ae=new Map;function Ee(C){J(C instanceof Function,"Expected a class definition");let y=Ae.get(C);return y?(J(y instanceof C,"Instance stored in cache mismatched with class"),y):(y=new C,Ae.set(C,y),y)}function St(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function ct(){return"http:"===wt()||"https:"===wt()}function wt(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class $t{constructor(y,b){this.shortDelay=y,this.longDelay=b,J(b>y,"Short delay should be less than long delay!"),this.isMobile=(0,oe.uI)()||(0,oe.b$)()}get(){return function Dt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,oe.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cn(C,y){J(C.emulator,"Emulator should always be set here");const{url:b}=C.emulator;return y?`${b}${y.startsWith("/")?y.slice(1):y}`:b}class Yt{static initialize(y,b,M){this.fetchImpl=y,b&&(this.headersImpl=b),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fn=new $t(3e4,6e4);function Ln(C,y){return C.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:C.tenantId}):y}function Vn(C,y,b,M){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,E.Z)(function*(C,y,b,M,ue={}){return vr(C,ue,(0,E.Z)(function*(){let De={},It={};M&&("GET"===y?It=M:De={body:JSON.stringify(M)});const Ht=(0,oe.xO)(Object.assign({key:C.config.apiKey},It)).slice(1),Un=yield C._getAdditionalHeaders();return Un["Content-Type"]="application/json",C.languageCode&&(Un["X-Firebase-Locale"]=C.languageCode),Yt.fetch()(Lr(C,C.config.apiHost,b,Ht),Object.assign({method:y,headers:Un,referrerPolicy:"no-referrer"},De))}))})).apply(this,arguments)}function vr(C,y,b){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,E.Z)(function*(C,y,b){C._canInitEmulator=!1;const M=Object.assign(Object.assign({},Nt),y);try{const ue=new Mr(C),De=yield Promise.race([b(),ue.promise]);ue.clearNetworkTimeout();const It=yield De.json();if("needConfirmation"in It)throw Pr(C,"account-exists-with-different-credential",It);if(De.ok&&!("errorMessage"in It))return It;{const Ht=De.ok?It.errorMessage:It.error.message,[Un,er]=Ht.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Un)throw Pr(C,"credential-already-in-use",It);if("EMAIL_EXISTS"===Un)throw Pr(C,"email-already-in-use",It);if("USER_DISABLED"===Un)throw Pr(C,"user-disabled",It);const lr=M[Un]||Un.toLowerCase().replace(/[_\s]+/g,"-");if(er)throw Ke(C,lr,er);ne(C,lr)}}catch(ue){if(ue instanceof oe.ZR)throw ue;ne(C,"network-request-failed")}})).apply(this,arguments)}function kr(C,y,b,M){return ur.apply(this,arguments)}function ur(){return(ur=(0,E.Z)(function*(C,y,b,M,ue={}){const De=yield Vn(C,y,b,M,ue);return"mfaPendingCredential"in De&&ne(C,"multi-factor-auth-required",{_serverResponse:De}),De})).apply(this,arguments)}function Lr(C,y,b,M){const ue=`${y}${b}?${M}`;return C.config.emulator?cn(C.config,ue):`${C.config.apiScheme}://${ue}`}class Mr{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((b,M)=>{this.timer=setTimeout(()=>M(be(this.auth,"network-request-failed")),fn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pr(C,y,b){const M={appName:C.name};b.email&&(M.email=b.email),b.phoneNumber&&(M.phoneNumber=b.phoneNumber);const ue=be(C,y,M);return ue.customData._tokenResponse=b,ue}function Kn(){return(Kn=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function pr(C,y){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Vi(C,y){return hr.apply(this,arguments)}function hr(){return(hr=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function xr(C){if(C)try{const y=new Date(Number(C));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function Hi(){return(Hi=(0,E.Z)(function*(C,y=!1){const b=(0,oe.m9)(C),M=yield b.getIdToken(y),ue=Nn(M);X(ue&&ue.exp&&ue.auth_time&&ue.iat,b.auth,"internal-error");const De="object"==typeof ue.firebase?ue.firebase:void 0,It=null==De?void 0:De.sign_in_provider;return{claims:ue,token:M,authTime:xr(Rr(ue.auth_time)),issuedAtTime:xr(Rr(ue.iat)),expirationTime:xr(Rr(ue.exp)),signInProvider:It||null,signInSecondFactor:(null==De?void 0:De.sign_in_second_factor)||null}})).apply(this,arguments)}function Rr(C){return 1e3*Number(C)}function Nn(C){const[y,b,M]=C.split(".");if(void 0===y||void 0===b||void 0===M)return ie("JWT malformed, contained fewer than 3 sections"),null;try{const ue=(0,oe.tV)(b);return ue?JSON.parse(ue):(ie("Failed to decode base64 JWT payload"),null)}catch(ue){return ie("Caught error parsing JWT payload as JSON",ue),null}}function ci(C,y){return yi.apply(this,arguments)}function yi(){return(yi=(0,E.Z)(function*(C,y,b=!1){if(b)return y;try{return yield y}catch(M){throw M instanceof oe.ZR&&cr(M)&&C.auth.currentUser===C&&(yield C.auth.signOut()),M}})).apply(this,arguments)}function cr({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class xn{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var b;if(y){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const ue=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,ue)}}schedule(y=!1){var b=this;if(!this.isRunning)return;const M=this.getInterval(y);this.timerId=setTimeout((0,E.Z)(function*(){yield b.iteration()}),M)}iteration(){var y=this;return(0,E.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===b.code&&y.schedule(!0))}y.schedule()})()}}class Hr{constructor(y,b){this.createdAt=y,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _i(C){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,E.Z)(function*(C){var y;const b=C.auth,M=yield C.getIdToken(),ue=yield ci(C,Vi(b,{idToken:M}));X(null==ue?void 0:ue.users.length,b,"internal-error");const De=ue.users[0];C._notifyReloadListener(De);const It=(null===(y=De.providerUserInfo)||void 0===y?void 0:y.length)?at(De.providerUserInfo):[],Ht=Jt(C.providerData,It),lr=!!C.isAnonymous&&!(C.email&&De.passwordHash||(null==Ht?void 0:Ht.length)),_r={uid:De.localId,displayName:De.displayName||null,photoURL:De.photoUrl||null,email:De.email||null,emailVerified:De.emailVerified||!1,phoneNumber:De.phoneNumber||null,tenantId:De.tenantId||null,providerData:Ht,metadata:new Hr(De.createdAt,De.lastLoginAt),isAnonymous:lr};Object.assign(C,_r)})).apply(this,arguments)}function dt(){return(dt=(0,E.Z)(function*(C){const y=(0,oe.m9)(C);yield _i(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Jt(C,y){return[...C.filter(M=>!y.some(ue=>ue.providerId===M.providerId)),...y]}function at(C){return C.map(y=>{var{providerId:b}=y,M=(0,Pe._T)(y,["providerId"]);return{providerId:b,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function sn(){return(sn=(0,E.Z)(function*(C,y){const b=yield vr(C,{},(0,E.Z)(function*(){const M=(0,oe.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:ue,apiKey:De}=C.config,It=Lr(C,ue,"/v1/token",`key=${De}`),Ht=yield C._getAdditionalHeaders();return Ht["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(It,{method:"POST",headers:Ht,body:M})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class jn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){X(y.idToken,"internal-error"),X(void 0!==y.idToken,"internal-error"),X(void 0!==y.refreshToken,"internal-error");const b="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function Jn(C){const y=Nn(C);return X(y,"internal-error"),X(void 0!==y.exp,"internal-error"),X(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,b)}getToken(y,b=!1){var M=this;return(0,E.Z)(function*(){return X(!M.accessToken||M.refreshToken,y,"user-token-expired"),b||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(y,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,b){var M=this;return(0,E.Z)(function*(){const{accessToken:ue,refreshToken:De,expiresIn:It}=yield function Mt(C,y){return sn.apply(this,arguments)}(y,b);M.updateTokensAndExpiration(ue,De,Number(It))})()}updateTokensAndExpiration(y,b,M){this.refreshToken=b||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(y,b){const{refreshToken:M,accessToken:ue,expirationTime:De}=b,It=new jn;return M&&(X("string"==typeof M,"internal-error",{appName:y}),It.refreshToken=M),ue&&(X("string"==typeof ue,"internal-error",{appName:y}),It.accessToken=ue),De&&(X("number"==typeof De,"internal-error",{appName:y}),It.expirationTime=De),It}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new jn,this.toJSON())}_performRefresh(){return he("not implemented")}}function ge(C,y){X("string"==typeof C||void 0===C,"internal-error",{appName:y})}class xe{constructor(y){var{uid:b,auth:M,stsTokenManager:ue}=y,De=(0,Pe._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=M,this.stsTokenManager=ue,this.accessToken=ue.accessToken,this.displayName=De.displayName||null,this.email=De.email||null,this.emailVerified=De.emailVerified||!1,this.phoneNumber=De.phoneNumber||null,this.photoURL=De.photoURL||null,this.isAnonymous=De.isAnonymous||!1,this.tenantId=De.tenantId||null,this.providerData=De.providerData?[...De.providerData]:[],this.metadata=new Hr(De.createdAt||void 0,De.lastLoginAt||void 0)}getIdToken(y){var b=this;return(0,E.Z)(function*(){const M=yield ci(b,b.stsTokenManager.getToken(b.auth,y));return X(M,b.auth,"internal-error"),b.accessToken!==M&&(b.accessToken=M,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),M})()}getIdTokenResult(y){return function Ni(C){return Hi.apply(this,arguments)}(this,y)}reload(){return function ut(C){return dt.apply(this,arguments)}(this)}_assign(y){this!==y&&(X(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(b=>Object.assign({},b)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new xe(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,b=!1){var M=this;return(0,E.Z)(function*(){let ue=!1;y.idToken&&y.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(y),ue=!0),b&&(yield _i(M)),yield M.auth._persistUserIfCurrent(M),ue&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var y=this;return(0,E.Z)(function*(){const b=yield y.getIdToken();return yield ci(y,function Mn(C,y){return Kn.apply(this,arguments)}(y.auth,{idToken:b})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,b){var M,ue,De,It,Ht,Un,er,lr;const _r=null!==(M=b.displayName)&&void 0!==M?M:void 0,to=null!==(ue=b.email)&&void 0!==ue?ue:void 0,Na=null!==(De=b.phoneNumber)&&void 0!==De?De:void 0,dd=null!==(It=b.photoURL)&&void 0!==It?It:void 0,Gf=null!==(Ht=b.tenantId)&&void 0!==Ht?Ht:void 0,Bp=null!==(Un=b._redirectEventId)&&void 0!==Un?Un:void 0,Rl=null!==(er=b.createdAt)&&void 0!==er?er:void 0,qn=null!==(lr=b.lastLoginAt)&&void 0!==lr?lr:void 0,{uid:Lc,emailVerified:$f,isAnonymous:hd,providerData:qd,stsTokenManager:Kd}=b;X(Lc&&Kd,y,"internal-error");const em=jn.fromJSON(this.name,Kd);X("string"==typeof Lc,y,"internal-error"),ge(_r,y.name),ge(to,y.name),X("boolean"==typeof $f,y,"internal-error"),X("boolean"==typeof hd,y,"internal-error"),ge(Na,y.name),ge(dd,y.name),ge(Gf,y.name),ge(Bp,y.name),ge(Rl,y.name),ge(qn,y.name);const mo=new xe({uid:Lc,auth:y,email:to,emailVerified:$f,displayName:_r,isAnonymous:hd,photoURL:dd,phoneNumber:Na,tenantId:Gf,stsTokenManager:em,createdAt:Rl,lastLoginAt:qn});return qd&&Array.isArray(qd)&&(mo.providerData=qd.map(Zd=>Object.assign({},Zd))),Bp&&(mo._redirectEventId=Bp),mo}static _fromIdTokenResponse(y,b,M=!1){return(0,E.Z)(function*(){const ue=new jn;ue.updateFromServerResponse(b);const De=new xe({uid:b.localId,auth:y,stsTokenManager:ue,isAnonymous:M});return yield _i(De),De})()}}const At=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(b,M){var ue=this;return(0,E.Z)(function*(){ue.storage[b]=M})()}_get(b){var M=this;return(0,E.Z)(function*(){const ue=M.storage[b];return void 0===ue?null:ue})()}_remove(b){var M=this;return(0,E.Z)(function*(){delete M.storage[b]})()}_addListener(b,M){}_removeListener(b,M){}}return C.type="NONE",C})();function on(C,y,b){return`firebase:${C}:${y}:${b}`}class Qn{constructor(y,b,M){this.persistence=y,this.auth=b,this.userKey=M;const{config:ue,name:De}=this.auth;this.fullUserKey=on(this.userKey,ue.apiKey,De),this.fullPersistenceKey=on("persistence",ue.apiKey,De),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,E.Z)(function*(){const b=yield y.persistence._get(y.fullUserKey);return b?xe._fromJSON(y.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var b=this;return(0,E.Z)(function*(){if(b.persistence===y)return;const M=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=y,M?b.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,b,M="authUser"){return(0,E.Z)(function*(){if(!b.length)return new Qn(Ee(At),y,M);const ue=(yield Promise.all(b.map(function(){var er=(0,E.Z)(function*(lr){if(yield lr._isAvailable())return lr});return function(lr){return er.apply(this,arguments)}}()))).filter(er=>er);let De=ue[0]||Ee(At);const It=on(M,y.config.apiKey,y.name);let Ht=null;for(const er of b)try{const lr=yield er._get(It);if(lr){const _r=xe._fromJSON(y,lr);er!==De&&(Ht=_r),De=er;break}}catch(lr){}const Un=ue.filter(er=>er._shouldAllowMigration);return De._shouldAllowMigration&&Un.length?(De=Un[0],Ht&&(yield De._set(It,Ht.toJSON())),yield Promise.all(b.map(function(){var er=(0,E.Z)(function*(lr){if(lr!==De)try{yield lr._remove(It)}catch(_r){}});return function(lr){return er.apply(this,arguments)}}())),new Qn(De,y,M)):new Qn(De,y,M)})()}}function Qr(C){const y=C.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(bt(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Ot(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(Hn(y))return"Blackberry";if(Zn(y))return"Webos";if(ht(y))return"Safari";if((y.includes("chrome/")||Be(y))&&!y.includes("edge/"))return"Chrome";if(Kt(y))return"Android";{const M=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==M?void 0:M.length))return M[1]}return"Other"}function Ot(C=(0,oe.z$)()){return/firefox\//i.test(C)}function ht(C=(0,oe.z$)()){const y=C.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Be(C=(0,oe.z$)()){return/crios\//i.test(C)}function bt(C=(0,oe.z$)()){return/iemobile/i.test(C)}function Kt(C=(0,oe.z$)()){return/android/i.test(C)}function Hn(C=(0,oe.z$)()){return/blackberry/i.test(C)}function Zn(C=(0,oe.z$)()){return/webos/i.test(C)}function Ir(C=(0,oe.z$)()){return/iphone|ipad|ipod/i.test(C)}function Jr(C=(0,oe.z$)()){return Ir(C)||Kt(C)||Zn(C)||Hn(C)||/windows phone/i.test(C)||bt(C)}function ls(C,y=[]){let b;switch(C){case"Browser":b=Qr((0,oe.z$)());break;case"Worker":b=`${Qr((0,oe.z$)())}-${C}`;break;default:b=C}const M=y.length?y.join(","):"FirebaseCore-web";return`${b}/JsCore/${Ne.SDK_VERSION}/${M}`}class cs{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,b){const M=De=>new Promise((It,Ht)=>{try{It(y(De))}catch(Un){Ht(Un)}});M.onAbort=b,this.queue.push(M);const ue=this.queue.length-1;return()=>{this.queue[ue]=()=>Promise.resolve()}}runMiddleware(y){var b=this;return(0,E.Z)(function*(){if(b.auth.currentUser===y)return;const M=[];try{for(const ue of b.queue)yield ue(y),ue.onAbort&&M.push(ue.onAbort)}catch(ue){M.reverse();for(const De of M)try{De()}catch(It){}throw b.auth._errorFactory.create("login-blocked",{originalMessage:ue.message})}})()}}class An{constructor(y,b,M){this.app=y,this.heartbeatServiceProvider=b,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fr(this),this.idTokenSubscription=new fr(this),this.beforeStateQueue=new cs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=He,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(y,b){var M=this;return b&&(this._popupRedirectResolver=Ee(b)),this._initializationPromise=this.queue((0,E.Z)(function*(){var ue,De;if(!M._deleted&&(M.persistenceManager=yield Qn.create(M,y),!M._deleted)){if(null===(ue=M._popupRedirectResolver)||void 0===ue?void 0:ue._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch(It){}yield M.initializeCurrentUser(b),M.lastNotifiedUid=(null===(De=M.currentUser)||void 0===De?void 0:De.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,E.Z)(function*(){if(y._deleted)return;const b=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||b){if(y.currentUser&&b&&y.currentUser.uid===b.uid)return y._currentUser._assign(b),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(b,!0)}})()}initializeCurrentUser(y){var b=this;return(0,E.Z)(function*(){var M;const ue=yield b.assertedPersistence.getCurrentUser();let De=ue,It=!1;if(y&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const Ht=null===(M=b.redirectUser)||void 0===M?void 0:M._redirectEventId,Un=null==De?void 0:De._redirectEventId,er=yield b.tryRedirectSignIn(y);(!Ht||Ht===Un)&&(null==er?void 0:er.user)&&(De=er.user,It=!0)}if(!De)return b.directlySetCurrentUser(null);if(!De._redirectEventId){if(It)try{yield b.beforeStateQueue.runMiddleware(De)}catch(Ht){De=ue,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(Ht))}return De?b.reloadAndSetCurrentUserOrClear(De):b.directlySetCurrentUser(null)}return X(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===De._redirectEventId?b.directlySetCurrentUser(De):b.reloadAndSetCurrentUserOrClear(De)})()}tryRedirectSignIn(y){var b=this;return(0,E.Z)(function*(){let M=null;try{M=yield b._popupRedirectResolver._completeRedirectFn(b,y,!0)}catch(ue){yield b._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(y){var b=this;return(0,E.Z)(function*(){try{yield _i(y)}catch(M){if("auth/network-request-failed"!==M.code)return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function Et(){if("undefined"==typeof navigator)return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var y=this;return(0,E.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var b=this;return(0,E.Z)(function*(){const M=y?(0,oe.m9)(y):null;return M&&X(M.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(M&&M._clone(b))})()}_updateCurrentUser(y,b=!1){var M=this;return(0,E.Z)(function*(){if(!M._deleted)return y&&X(M.tenantId===y.tenantId,M,"tenant-id-mismatch"),b||(yield M.beforeStateQueue.runMiddleware(y)),M.queue((0,E.Z)(function*(){yield M.directlySetCurrentUser(y),M.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,E.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var b=this;return this.queue((0,E.Z)(function*(){yield b.assertedPersistence.setPersistence(Ee(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new oe.LL("auth","Firebase",y())}onAuthStateChanged(y,b,M){return this.registerStateListener(this.authStateSubscription,y,b,M)}beforeAuthStateChanged(y,b){return this.beforeStateQueue.pushCallback(y,b)}onIdTokenChanged(y,b,M){return this.registerStateListener(this.idTokenSubscription,y,b,M)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,b){var M=this;return(0,E.Z)(function*(){const ue=yield M.getOrInitRedirectPersistenceManager(b);return null===y?ue.removeCurrentUser():ue.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var b=this;return(0,E.Z)(function*(){if(!b.redirectPersistenceManager){const M=y&&Ee(y)||b._popupRedirectResolver;X(M,b,"argument-error"),b.redirectPersistenceManager=yield Qn.create(b,[Ee(M._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(y){var b=this;return(0,E.Z)(function*(){var M,ue;return b._isInitialized&&(yield b.queue((0,E.Z)(function*(){}))),(null===(M=b._currentUser)||void 0===M?void 0:M._redirectEventId)===y?b._currentUser:(null===(ue=b.redirectUser)||void 0===ue?void 0:ue._redirectEventId)===y?b.redirectUser:null})()}_persistUserIfCurrent(y){var b=this;return(0,E.Z)(function*(){if(y===b.currentUser)return b.queue((0,E.Z)(function*(){return b.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(b=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,b,M,ue){if(this._deleted)return()=>{};const De="function"==typeof b?b:b.next.bind(b),It=this._isInitialized?Promise.resolve():this._initializationPromise;return X(It,this,"internal-error"),It.then(()=>De(this.currentUser)),"function"==typeof b?y.addObserver(b,M,ue):y.addObserver(b)}directlySetCurrentUser(y){var b=this;return(0,E.Z)(function*(){b.currentUser&&b.currentUser!==y&&(b._currentUser._stopProactiveRefresh(),y&&b.isProactiveRefreshEnabled&&y._startProactiveRefresh()),b.currentUser=y,y?yield b.assertedPersistence.setCurrentUser(y):yield b.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=ls(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,E.Z)(function*(){var b;const M={"X-Client-Version":y.clientVersion};y.app.options.appId&&(M["X-Firebase-gmpid"]=y.app.options.appId);const ue=yield null===(b=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();return ue&&(M["X-Firebase-Client"]=ue),M})()}}function Rn(C){return(0,oe.m9)(C)}class fr{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,oe.ne)(b=>this.observer=b)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ds(C){const y=C.indexOf(":");return y<0?"":C.substr(0,y+1)}function Ss(C){if(!C)return null;const y=Number(C);return isNaN(y)?null:y}class vs{constructor(y,b){this.providerId=y,this.signInMethod=b}toJSON(){return he("not implemented")}_getIdTokenResponse(y){return he("not implemented")}_linkToIdToken(y,b){return he("not implemented")}_getReauthenticationResolver(y){return he("not implemented")}}function ei(C,y){return dr.apply(this,arguments)}function dr(){return(dr=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:resetPassword",Ln(C,y))})).apply(this,arguments)}function hs(C,y){return ws.apply(this,arguments)}function ws(){return(ws=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Io(C,y){return Di.apply(this,arguments)}function Di(){return(Di=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:update",Ln(C,y))})).apply(this,arguments)}function Ls(){return(Ls=(0,E.Z)(function*(C,y){return kr(C,"POST","/v1/accounts:signInWithPassword",Ln(C,y))})).apply(this,arguments)}function Cs(C,y){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:sendOobCode",Ln(C,y))})).apply(this,arguments)}function ii(C,y){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,E.Z)(function*(C,y){return Cs(C,y)})).apply(this,arguments)}function ys(C,y){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,E.Z)(function*(C,y){return Cs(C,y)})).apply(this,arguments)}function so(C,y){return oo.apply(this,arguments)}function oo(){return(oo=(0,E.Z)(function*(C,y){return Cs(C,y)})).apply(this,arguments)}function ss(C,y){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,E.Z)(function*(C,y){return Cs(C,y)})).apply(this,arguments)}function Fs(){return(Fs=(0,E.Z)(function*(C,y){return kr(C,"POST","/v1/accounts:signInWithEmailLink",Ln(C,y))})).apply(this,arguments)}function Ia(){return(Ia=(0,E.Z)(function*(C,y){return kr(C,"POST","/v1/accounts:signInWithEmailLink",Ln(C,y))})).apply(this,arguments)}class si extends vs{constructor(y,b,M,ue=null){super("password",M),this._email=y,this._password=b,this._tenantId=ue}static _fromEmailAndPassword(y,b){return new si(y,b,"password")}static _fromEmailAndCode(y,b,M=null){return new si(y,b,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const b="string"==typeof y?JSON.parse(y):y;if((null==b?void 0:b.email)&&(null==b?void 0:b.password)){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(y){var b=this;return(0,E.Z)(function*(){switch(b.signInMethod){case"password":return function Ai(C,y){return Ls.apply(this,arguments)}(y,{returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function vo(C,y){return Fs.apply(this,arguments)}(y,{email:b._email,oobCode:b._password});default:ne(y,"internal-error")}})()}_linkToIdToken(y,b){var M=this;return(0,E.Z)(function*(){switch(M.signInMethod){case"password":return hs(y,{idToken:b,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function pa(C,y){return Ia.apply(this,arguments)}(y,{idToken:b,email:M._email,oobCode:M._password});default:ne(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function ao(C,y){return ra.apply(this,arguments)}function ra(){return(ra=(0,E.Z)(function*(C,y){return kr(C,"POST","/v1/accounts:signInWithIdp",Ln(C,y))})).apply(this,arguments)}class mt extends vs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const b=new mt(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(b.idToken=y.idToken),y.accessToken&&(b.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(b.nonce=y.nonce),y.pendingToken&&(b.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(b.accessToken=y.oauthToken,b.secret=y.oauthTokenSecret):ne("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const b="string"==typeof y?JSON.parse(y):y,{providerId:M,signInMethod:ue}=b,De=(0,Pe._T)(b,["providerId","signInMethod"]);if(!M||!ue)return null;const It=new mt(M,ue);return It.idToken=De.idToken||void 0,It.accessToken=De.accessToken||void 0,It.secret=De.secret,It.nonce=De.nonce,It.pendingToken=De.pendingToken||null,It}_getIdTokenResponse(y){return ao(y,this.buildRequest())}_linkToIdToken(y,b){const M=this.buildRequest();return M.idToken=b,ao(y,M)}_getReauthenticationResolver(y){const b=this.buildRequest();return b.autoCreate=!1,ao(y,b)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),y.postBody=(0,oe.xO)(b)}return y}}function jt(C,y){return nn.apply(this,arguments)}function nn(){return(nn=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:sendVerificationCode",Ln(C,y))})).apply(this,arguments)}function Sn(){return(Sn=(0,E.Z)(function*(C,y){return kr(C,"POST","/v1/accounts:signInWithPhoneNumber",Ln(C,y))})).apply(this,arguments)}function di(){return(di=(0,E.Z)(function*(C,y){const b=yield kr(C,"POST","/v1/accounts:signInWithPhoneNumber",Ln(C,y));if(b.temporaryProof)throw Pr(C,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const qr={USER_NOT_FOUND:"user-not-found"};function ki(){return(ki=(0,E.Z)(function*(C,y){return kr(C,"POST","/v1/accounts:signInWithPhoneNumber",Ln(C,Object.assign(Object.assign({},y),{operation:"REAUTH"})),qr)})).apply(this,arguments)}class os extends vs{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,b){return new os({verificationId:y,verificationCode:b})}static _fromTokenResponse(y,b){return new os({phoneNumber:y,temporaryProof:b})}_getIdTokenResponse(y){return function Dn(C,y){return Sn.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,b){return function zr(C,y){return di.apply(this,arguments)}(y,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function yo(C,y){return ki.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:b,verificationId:M,verificationCode:ue}=this.params;return y&&b?{temporaryProof:y,phoneNumber:b}:{sessionInfo:M,code:ue}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:b,verificationCode:M,phoneNumber:ue,temporaryProof:De}=y;return M||b||ue||De?new os({verificationId:b,verificationCode:M,phoneNumber:ue,temporaryProof:De}):null}}class jo{constructor(y){var b,M,ue,De,It,Ht;const Un=(0,oe.zd)((0,oe.pd)(y)),er=null!==(b=Un.apiKey)&&void 0!==b?b:null,lr=null!==(M=Un.oobCode)&&void 0!==M?M:null,_r=function ga(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ue=Un.mode)&&void 0!==ue?ue:null);X(er&&lr&&_r,"argument-error"),this.apiKey=er,this.operation=_r,this.code=lr,this.continueUrl=null!==(De=Un.continueUrl)&&void 0!==De?De:null,this.languageCode=null!==(It=Un.languageCode)&&void 0!==It?It:null,this.tenantId=null!==(Ht=Un.tenantId)&&void 0!==Ht?Ht:null}static parseLink(y){const b=function Do(C){const y=(0,oe.zd)((0,oe.pd)(C)).link,b=y?(0,oe.zd)((0,oe.pd)(y)).deep_link_id:null,M=(0,oe.zd)((0,oe.pd)(C)).deep_link_id;return(M?(0,oe.zd)((0,oe.pd)(M)).link:null)||M||b||y||C}(y);try{return new jo(b)}catch(M){return null}}}let ia=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(b,M){return si._fromEmailAndPassword(b,M)}static credentialWithLink(b,M){const ue=jo.parseLink(M);return X(ue,"argument-error"),si._fromEmailAndCode(b,ue.code,ue.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Ci{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Ao extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class Ys extends Ao{static credentialFromJSON(y){const b="string"==typeof y?JSON.parse(y):y;return X("providerId"in b&&"signInMethod"in b,"argument-error"),mt._fromParams(b)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return X(y.idToken||y.accessToken,"argument-error"),mt._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return Ys.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return Ys.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:b,oauthAccessToken:M,oauthTokenSecret:ue,pendingToken:De,nonce:It,providerId:Ht}=y;if(!M&&!ue&&!b&&!De||!Ht)return null;try{return new Ys(Ht)._credential({idToken:b,accessToken:M,nonce:It,pendingToken:De})}catch(Un){return null}}}let _o=(()=>{class C extends Ao{constructor(){super("facebook.com")}static credential(b){return mt._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return C.credential(b.oauthAccessToken)}catch(M){return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),ma=(()=>{class C extends Ao{constructor(){super("google.com"),this.addScope("profile")}static credential(b,M){return mt._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:M})}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:M,oauthAccessToken:ue}=b;if(!M&&!ue)return null;try{return C.credential(M,ue)}catch(De){return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Ga=(()=>{class C extends Ao{constructor(){super("github.com")}static credential(b){return mt._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return C.credential(b.oauthAccessToken)}catch(M){return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class zo extends vs{constructor(y,b){super(y,y),this.pendingToken=b}_getIdTokenResponse(y){return ao(y,this.buildRequest())}_linkToIdToken(y,b){const M=this.buildRequest();return M.idToken=b,ao(y,M)}_getReauthenticationResolver(y){const b=this.buildRequest();return b.autoCreate=!1,ao(y,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const b="string"==typeof y?JSON.parse(y):y,{providerId:M,signInMethod:ue,pendingToken:De}=b;return M&&ue&&De&&M===ue?new zo(M,De):null}static _create(y,b){return new zo(y,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ji extends Ci{constructor(y){X(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return Ji.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return Ji.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const b=zo.fromJSON(y);return X(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:b,providerId:M}=y;if(!b||!M)return null;try{return zo._create(M,b)}catch(ue){return null}}}let $a=(()=>{class C extends Ao{constructor(){super("twitter.com")}static credential(b,M){return mt._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:M})}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:M,oauthTokenSecret:ue}=b;if(!M||!ue)return null;try{return C.credential(M,ue)}catch(De){return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Mi(C,y){return ko.apply(this,arguments)}function ko(){return(ko=(0,E.Z)(function*(C,y){return kr(C,"POST","/v1/accounts:signUp",Ln(C,y))})).apply(this,arguments)}class Li{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,b,M,ue=!1){return(0,E.Z)(function*(){const De=yield xe._fromIdTokenResponse(y,M,ue),It=Wa(M);return new Li({user:De,providerId:It,_tokenResponse:M,operationType:b})})()}static _forOperation(y,b,M){return(0,E.Z)(function*(){yield y._updateTokensIfNecessary(M,!0);const ue=Wa(M);return new Li({user:y,providerId:ue,_tokenResponse:M,operationType:b})})()}}function Wa(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function ks(){return(ks=(0,E.Z)(function*(C){var y;const b=Rn(C);if(yield b._initializationPromise,null===(y=b.currentUser)||void 0===y?void 0:y.isAnonymous)return new Li({user:b.currentUser,providerId:null,operationType:"signIn"});const M=yield Mi(b,{returnSecureToken:!0}),ue=yield Li._fromIdTokenResponse(b,"signIn",M,!0);return yield b._updateCurrentUser(ue.user),ue})).apply(this,arguments)}class Mo extends oe.ZR{constructor(y,b,M,ue){var De;super(b.code,b.message),this.operationType=M,this.user=ue,Object.setPrototypeOf(this,Mo.prototype),this.customData={appName:y.name,tenantId:null!==(De=y.tenantId)&&void 0!==De?De:void 0,_serverResponse:b.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(y,b,M,ue){return new Mo(y,b,M,ue)}}function qo(C,y,b,M){return("reauthenticate"===y?b._getReauthenticationResolver(C):b._getIdTokenResponse(C)).catch(De=>{throw"auth/multi-factor-auth-required"===De.code?Mo._fromErrorAndOperation(C,De,y,M):De})}function fs(C){return new Set(C.map(({providerId:y})=>y).filter(y=>!!y))}function pi(){return(pi=(0,E.Z)(function*(C,y){const b=(0,oe.m9)(C);yield z(!0,b,y);const{providerUserInfo:M}=yield pr(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[y]}),ue=fs(M||[]);return b.providerData=b.providerData.filter(De=>ue.has(De.providerId)),ue.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b})).apply(this,arguments)}function Z(C,y){return ve.apply(this,arguments)}function ve(){return(ve=(0,E.Z)(function*(C,y,b=!1){const M=yield ci(C,y._linkToIdToken(C.auth,yield C.getIdToken()),b);return Li._forOperation(C,"link",M)})).apply(this,arguments)}function z(C,y,b){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,E.Z)(function*(C,y,b){yield _i(y);const ue=!1===C?"provider-already-linked":"no-such-provider";X(fs(y.providerData).has(b)===C,y.auth,ue)})).apply(this,arguments)}function ot(C,y){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,E.Z)(function*(C,y,b=!1){const{auth:M}=C,ue="reauthenticate";try{const De=yield ci(C,qo(M,ue,y,C),b);X(De.idToken,M,"internal-error");const It=Nn(De.idToken);X(It,M,"internal-error");const{sub:Ht}=It;return X(C.uid===Ht,M,"user-mismatch"),Li._forOperation(C,ue,De)}catch(De){throw"auth/user-not-found"===(null==De?void 0:De.code)&&ne(M,"user-mismatch"),De}})).apply(this,arguments)}function qt(C,y){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,E.Z)(function*(C,y,b=!1){const M="signIn",ue=yield qo(C,M,y),De=yield Li._fromIdTokenResponse(C,M,ue);return b||(yield C._updateCurrentUser(De.user)),De})).apply(this,arguments)}function br(C,y){return ar.apply(this,arguments)}function ar(){return(ar=(0,E.Z)(function*(C,y){return qt(Rn(C),y)})).apply(this,arguments)}function Sr(C,y){return jr.apply(this,arguments)}function jr(){return(jr=(0,E.Z)(function*(C,y){const b=(0,oe.m9)(C);return yield z(!1,b,y.providerId),Z(b,y)})).apply(this,arguments)}function bi(C,y){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,E.Z)(function*(C,y){return ot((0,oe.m9)(C),y)})).apply(this,arguments)}function Fi(C,y){return te.apply(this,arguments)}function te(){return(te=(0,E.Z)(function*(C,y){return kr(C,"POST","/v1/accounts:signInWithCustomToken",Ln(C,y))})).apply(this,arguments)}function B(){return(B=(0,E.Z)(function*(C,y){const b=Rn(C),M=yield Fi(b,{token:y,returnSecureToken:!0}),ue=yield Li._fromIdTokenResponse(b,"signIn",M);return yield b._updateCurrentUser(ue.user),ue})).apply(this,arguments)}class we{constructor(y,b){this.factorId=y,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(y,b){return"phoneInfo"in b?Zt._fromServerResponse(y,b):ne(y,"internal-error")}}class Zt extends we{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,b){return new Zt(b)}}function tr(C,y,b){var M;X((null===(M=b.url)||void 0===M?void 0:M.length)>0,C,"invalid-continue-uri"),X(void 0===b.dynamicLinkDomain||b.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),y.continueUrl=b.url,y.dynamicLinkDomain=b.dynamicLinkDomain,y.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(X(b.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),y.iOSBundleId=b.iOS.bundleId),b.android&&(X(b.android.packageName.length>0,C,"missing-android-pkg-name"),y.androidInstallApp=b.android.installApp,y.androidMinimumVersionCode=b.android.minimumVersion,y.androidPackageName=b.android.packageName)}function Uo(){return(Uo=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C),ue={requestType:"PASSWORD_RESET",email:y};b&&tr(M,ue,b),yield ys(M,ue)})).apply(this,arguments)}function _u(){return(_u=(0,E.Z)(function*(C,y,b){yield ei((0,oe.m9)(C),{oobCode:y,newPassword:b})})).apply(this,arguments)}function G(){return(G=(0,E.Z)(function*(C,y){yield Io((0,oe.m9)(C),{oobCode:y})})).apply(this,arguments)}function Ie(C,y){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,E.Z)(function*(C,y){const b=(0,oe.m9)(C),M=yield ei(b,{oobCode:y}),ue=M.requestType;switch(X(ue,b,"internal-error"),ue){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(M.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(M.mfaInfo,b,"internal-error");default:X(M.email,b,"internal-error")}let De=null;return M.mfaInfo&&(De=we._fromServerResponse(Rn(b),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:De},operation:ue}})).apply(this,arguments)}function Bt(){return(Bt=(0,E.Z)(function*(C,y){const{data:b}=yield Ie((0,oe.m9)(C),y);return b.email})).apply(this,arguments)}function Gn(){return(Gn=(0,E.Z)(function*(C,y,b){const M=Rn(C),ue=yield Mi(M,{returnSecureToken:!0,email:y,password:b}),De=yield Li._fromIdTokenResponse(M,"signIn",ue);return yield M._updateCurrentUser(De.user),De})).apply(this,arguments)}function Zr(){return(Zr=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C),ue={requestType:"EMAIL_SIGNIN",email:y};X(b.handleCodeInApp,M,"argument-error"),b&&tr(M,ue,b),yield so(M,ue)})).apply(this,arguments)}function Ii(){return(Ii=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C),ue=ia.credentialWithLink(y,b||St());return X(ue._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),br(M,ue)})).apply(this,arguments)}function Yr(C,y){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:createAuthUri",Ln(C,y))})).apply(this,arguments)}function _s(){return(_s=(0,E.Z)(function*(C,y){const M={identifier:y,continueUri:ct()?St():"http://localhost"},{signinMethods:ue}=yield Yr((0,oe.m9)(C),M);return ue||[]})).apply(this,arguments)}function ji(){return(ji=(0,E.Z)(function*(C,y){const b=(0,oe.m9)(C),ue={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};y&&tr(b.auth,ue,y);const{email:De}=yield ii(b.auth,ue);De!==C.email&&(yield C.reload())})).apply(this,arguments)}function hi(){return(hi=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C),De={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:y};b&&tr(M.auth,De,b);const{email:It}=yield ss(M.auth,De);It!==C.email&&(yield C.reload())})).apply(this,arguments)}function us(C,y){return tu.apply(this,arguments)}function tu(){return(tu=(0,E.Z)(function*(C,y){return Vn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Fr(){return(Fr=(0,E.Z)(function*(C,{displayName:y,photoURL:b}){if(void 0===y&&void 0===b)return;const M=(0,oe.m9)(C),De={idToken:yield M.getIdToken(),displayName:y,photoUrl:b,returnSecureToken:!0},It=yield ci(M,us(M.auth,De));M.displayName=It.displayName||null,M.photoURL=It.photoUrl||null;const Ht=M.providerData.find(({providerId:Un})=>"password"===Un);Ht&&(Ht.displayName=M.displayName,Ht.photoURL=M.photoURL),yield M._updateTokensIfNecessary(It)})).apply(this,arguments)}function sl(C,y,b){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,E.Z)(function*(C,y,b){const{auth:M}=C,De={idToken:yield C.getIdToken(),returnSecureToken:!0};y&&(De.email=y),b&&(De.password=b);const It=yield ci(C,hs(M,De));yield C._updateTokensIfNecessary(It,!0)})).apply(this,arguments)}class Ui{constructor(y,b,M={}){this.isNewUser=y,this.providerId=b,this.profile=M}}class Xs extends Ui{constructor(y,b,M,ue){super(y,b,M),this.username=ue}}class za extends Ui{constructor(y,b){super(y,"facebook.com",b)}}class Aa extends Xs{constructor(y,b){super(y,"github.com",b,"string"==typeof(null==b?void 0:b.login)?null==b?void 0:b.login:null)}}class js extends Ui{constructor(y,b){super(y,"google.com",b)}}class bu extends Xs{constructor(y,b,M){super(y,"twitter.com",b,M)}}function Po(C){const{user:y,_tokenResponse:b}=C;return y.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function Cl(C){var y,b;if(!C)return null;const{providerId:M}=C,ue=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},De=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!M&&(null==C?void 0:C.idToken)){const It=null===(b=null===(y=Nn(C.idToken))||void 0===y?void 0:y.firebase)||void 0===b?void 0:b.sign_in_provider;if(It)return new Ui(De,"anonymous"!==It&&"custom"!==It?It:null)}if(!M)return null;switch(M){case"facebook.com":return new za(De,ue);case"github.com":return new Aa(De,ue);case"google.com":return new js(De,ue);case"twitter.com":return new bu(De,ue,C.screenName||null);case"custom":case"anonymous":return new Ui(De,null);default:return new Ui(De,M,ue)}}(b)}class Us{constructor(y,b){this.type=y,this.credential=b}static _fromIdtoken(y){return new Us("enroll",y)}static _fromMfaPendingCredential(y){return new Us("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var b,M;if(null==y?void 0:y.multiFactorSession){if(null===(b=y.multiFactorSession)||void 0===b?void 0:b.pendingCredential)return Us._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(M=y.multiFactorSession)||void 0===M?void 0:M.idToken)return Us._fromIdtoken(y.multiFactorSession.idToken)}return null}}class ba{constructor(y,b,M){this.session=y,this.hints=b,this.signInResolver=M}static _fromError(y,b){const M=Rn(y),ue=b.customData._serverResponse,De=(ue.mfaInfo||[]).map(Ht=>we._fromServerResponse(M,Ht));X(ue.mfaPendingCredential,M,"internal-error");const It=Us._fromMfaPendingCredential(ue.mfaPendingCredential);return new ba(It,De,function(){var Ht=(0,E.Z)(function*(Un){const er=yield Un._process(M,It);delete ue.mfaInfo,delete ue.mfaPendingCredential;const lr=Object.assign(Object.assign({},ue),{idToken:er.idToken,refreshToken:er.refreshToken});switch(b.operationType){case"signIn":const _r=yield Li._fromIdTokenResponse(M,b.operationType,lr);return yield M._updateCurrentUser(_r.user),_r;case"reauthenticate":return X(b.user,M,"internal-error"),Li._forOperation(b.user,b.operationType,lr);default:ne(M,"internal-error")}});return function(Un){return Ht.apply(this,arguments)}}())}resolveSignIn(y){var b=this;return(0,E.Z)(function*(){return b.signInResolver(y)})()}}function qa(C,y){return Vn(C,"POST","/v2/accounts/mfaEnrollment:start",Ln(C,y))}class bs{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(M=>we._fromServerResponse(y.auth,M)))})}static _fromUser(y){return new bs(y)}getSession(){var y=this;return(0,E.Z)(function*(){return Us._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,b){var M=this;return(0,E.Z)(function*(){const ue=y,De=yield M.getSession(),It=yield ci(M.user,ue._process(M.user.auth,De,b));return yield M.user._updateTokensIfNecessary(It),M.user.reload()})()}unenroll(y){var b=this;return(0,E.Z)(function*(){const M="string"==typeof y?y:y.uid,ue=yield b.user.getIdToken(),De=yield ci(b.user,function Ta(C,y){return Vn(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Ln(C,y))}(b.user.auth,{idToken:ue,mfaEnrollmentId:M}));b.enrolledFactors=b.enrolledFactors.filter(({uid:It})=>It!==M),yield b.user._updateTokensIfNecessary(De);try{yield b.user.reload()}catch(It){if("auth/user-token-expired"!==It.code)throw It}})()}}const Oo=new WeakMap,uo="__sak";class Lu{constructor(y,b){this.storageRetriever=y,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,b){return this.storage.setItem(y,JSON.stringify(b)),Promise.resolve()}_get(y){const b=this.storage.getItem(y);return Promise.resolve(b?JSON.parse(b):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const iu=(()=>{class C extends Lu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,M)=>this.onStorageEvent(b,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Jc(){const C=(0,oe.z$)();return ht(C)||Ir(C)}()&&function oi(){try{return!(!window||window===window.top)}catch(C){return!1}}(),this.fallbackToPolling=Jr(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const M of Object.keys(this.listeners)){const ue=this.storage.getItem(M),De=this.localCache[M];ue!==De&&b(M,De,ue)}}onStorageEvent(b,M=!1){if(!b.key)return void this.forAllChangedKeys((Ht,Un,er)=>{this.notifyListeners(Ht,er)});const ue=b.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ht=this.storage.getItem(ue);if(b.newValue!==Ht)null!==b.newValue?this.storage.setItem(ue,b.newValue):this.storage.removeItem(ue);else if(this.localCache[ue]===b.newValue&&!M)return}const De=()=>{const Ht=this.storage.getItem(ue);!M&&this.localCache[ue]===Ht||this.notifyListeners(ue,Ht)},It=this.storage.getItem(ue);!function mr(){return(0,oe.w1)()&&10===document.documentMode}()||It===b.newValue||b.newValue===b.oldValue?De():setTimeout(De,10)}notifyListeners(b,M){this.localCache[b]=M;const ue=this.listeners[b];if(ue)for(const De of Array.from(ue))De(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,M,ue)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:M,newValue:ue}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(M)}_removeListener(b,M){this.listeners[b]&&(this.listeners[b].delete(M),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,M){var ue=()=>super._set,De=this;return(0,E.Z)(function*(){yield ue().call(De,b,M),De.localCache[b]=JSON.stringify(M)})()}_get(b){var M=()=>super._get,ue=this;return(0,E.Z)(function*(){const De=yield M().call(ue,b);return ue.localCache[b]=JSON.stringify(De),De})()}_remove(b){var M=()=>super._remove,ue=this;return(0,E.Z)(function*(){yield M().call(ue,b),delete ue.localCache[b]})()}}return C.type="LOCAL",C})(),So=(()=>{class C extends Lu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,M){}_removeListener(b,M){}}return C.type="SESSION",C})();let Ka=(()=>{class C{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const M=this.receivers.find(De=>De.isListeningto(b));if(M)return M;const ue=new C(b);return this.receivers.push(ue),ue}isListeningto(b){return this.eventTarget===b}handleEvent(b){var M=this;return(0,E.Z)(function*(){const ue=b,{eventId:De,eventType:It,data:Ht}=ue.data,Un=M.handlersMap[It];if(!(null==Un?void 0:Un.size))return;ue.ports[0].postMessage({status:"ack",eventId:De,eventType:It});const er=Array.from(Un).map(function(){var _r=(0,E.Z)(function*(to){return to(ue.origin,Ht)});return function(to){return _r.apply(this,arguments)}}()),lr=yield function Fu(C){return Promise.all(C.map(function(){var y=(0,E.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(M){return{fulfilled:!1,reason:M}}});return function(b){return y.apply(this,arguments)}}()))}(er);ue.ports[0].postMessage({status:"done",eventId:De,eventType:It,response:lr})})()}_subscribe(b,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(M)}_unsubscribe(b,M){this.handlersMap[b]&&M&&this.handlersMap[b].delete(M),(!M||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function Zo(C="",y=10){let b="";for(let M=0;M<y;M++)b+=Math.floor(10*Math.random());return C+b}class Yo{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,b,M=50){var ue=this;return(0,E.Z)(function*(){const De="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!De)throw new Error("connection_unavailable");let It,Ht;return new Promise((Un,er)=>{const lr=Zo("",20);De.port1.start();const _r=setTimeout(()=>{er(new Error("unsupported_event"))},M);Ht={messageChannel:De,onMessage(to){const Na=to;if(Na.data.eventId===lr)switch(Na.data.status){case"ack":clearTimeout(_r),It=setTimeout(()=>{er(new Error("timeout"))},3e3);break;case"done":clearTimeout(It),Un(Na.data.response);break;default:clearTimeout(_r),clearTimeout(It),er(new Error("invalid_response"))}}},ue.handlers.add(Ht),De.port1.addEventListener("message",Ht.onMessage),ue.target.postMessage({eventType:y,eventId:lr,data:b},[De.port2])}).finally(()=>{Ht&&ue.removeMessageHandler(Ht)})})()}}function Ms(){return window}function lo(){return void 0!==Ms().WorkerGlobalScope&&"function"==typeof Ms().importScripts}function Uu(){return(Uu=(0,E.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(C){return null}})).apply(this,arguments)}const A="firebaseLocalStorageDb",se="firebaseLocalStorage",de="fbase_key";class ze{constructor(y){this.request=y}toPromise(){return new Promise((y,b)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function st(C,y){return C.transaction([se],y?"readwrite":"readonly").objectStore(se)}function Qt(){const C=indexedDB.open(A,1);return new Promise((y,b)=>{C.addEventListener("error",()=>{b(C.error)}),C.addEventListener("upgradeneeded",()=>{const M=C.result;try{M.createObjectStore(se,{keyPath:de})}catch(ue){b(ue)}}),C.addEventListener("success",(0,E.Z)(function*(){const M=C.result;M.objectStoreNames.contains(se)?y(M):(M.close(),yield function en(){const C=indexedDB.deleteDatabase(A);return new ze(C).toPromise()}(),y(yield Qt()))}))})}function Pn(C,y,b){return ir.apply(this,arguments)}function ir(){return(ir=(0,E.Z)(function*(C,y,b){const M=st(C,!0).put({[de]:y,value:b});return new ze(M).toPromise()})).apply(this,arguments)}function Rt(){return(Rt=(0,E.Z)(function*(C,y){const b=st(C,!1).get(y),M=yield new ze(b).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function dn(C,y){const b=st(C,!0).delete(y);return new ze(b).toPromise()}const Ea=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,E.Z)(function*(){return b.db||(b.db=yield Qt()),b.db})()}_withRetries(b){var M=this;return(0,E.Z)(function*(){let ue=0;for(;;)try{const De=yield M._openDb();return yield b(De)}catch(De){if(ue++>3)throw De;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,E.Z)(function*(){return lo()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,E.Z)(function*(){b.receiver=Ka._getInstance(function P(){return lo()?self:null}()),b.receiver._subscribe("keyChanged",function(){var M=(0,E.Z)(function*(ue,De){return{keyProcessed:(yield b._poll()).includes(De.key)}});return function(ue,De){return M.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var M=(0,E.Z)(function*(ue,De){return["keyChanged"]});return function(ue,De){return M.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,E.Z)(function*(){var M,ue;if(b.activeServiceWorker=yield function ju(){return Uu.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new Yo(b.activeServiceWorker);const De=yield b.sender._send("ping",{},800);!De||(null===(M=De[0])||void 0===M?void 0:M.fulfilled)&&(null===(ue=De[0])||void 0===ue?void 0:ue.value.includes("keyChanged"))&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var M=this;return(0,E.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function F(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:b},M.serviceWorkerReceiverAvailable?800:50)}catch(ue){}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const b=yield Qt();return yield Pn(b,uo,"1"),yield dn(b,uo),!0}catch(b){}return!1})()}_withPendingWrite(b){var M=this;return(0,E.Z)(function*(){M.pendingWrites++;try{yield b()}finally{M.pendingWrites--}})()}_set(b,M){var ue=this;return(0,E.Z)(function*(){return ue._withPendingWrite((0,E.Z)(function*(){return yield ue._withRetries(De=>Pn(De,b,M)),ue.localCache[b]=M,ue.notifyServiceWorker(b)}))})()}_get(b){var M=this;return(0,E.Z)(function*(){const ue=yield M._withRetries(De=>function pn(C,y){return Rt.apply(this,arguments)}(De,b));return M.localCache[b]=ue,ue})()}_remove(b){var M=this;return(0,E.Z)(function*(){return M._withPendingWrite((0,E.Z)(function*(){return yield M._withRetries(ue=>dn(ue,b)),delete M.localCache[b],M.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,E.Z)(function*(){const M=yield b._withRetries(It=>{const Ht=st(It,!1).getAll();return new ze(Ht).toPromise()});if(!M)return[];if(0!==b.pendingWrites)return[];const ue=[],De=new Set;for(const{fbase_key:It,value:Ht}of M)De.add(It),JSON.stringify(b.localCache[It])!==JSON.stringify(Ht)&&(b.notifyListeners(It,Ht),ue.push(It));for(const It of Object.keys(b.localCache))b.localCache[It]&&!De.has(It)&&(b.notifyListeners(It,null),ue.push(It));return ue})()}notifyListeners(b,M){this.localCache[b]=M;const ue=this.listeners[b];if(ue)for(const De of Array.from(ue))De(M)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(M)}_removeListener(b,M){this.listeners[b]&&(this.listeners[b].delete(M),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function ul(C,y){return Vn(C,"POST","/v2/accounts/mfaSignIn:start",Ln(C,y))}function Ec(){return(Ec=(0,E.Z)(function*(C){return(yield Vn(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function au(C){return new Promise((y,b)=>{const M=document.createElement("script");M.setAttribute("src",C),M.onload=y,M.onerror=ue=>{const De=be("internal-error");De.customData=ue,b(De)},M.type="text/javascript",M.charset="UTF-8",function Sc(){var C,y;return null!==(y=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==y?y:document}().appendChild(M)})}function Bs(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Ur=1e12;class uu{constructor(y){this.auth=y,this.counter=Ur,this._widgets=new Map}render(y,b){const M=this.counter;return this._widgets.set(M,new Eu(y,this.auth.name,b||{})),this.counter++,M}reset(y){var b;const M=y||Ur;null===(b=this._widgets.get(M))||void 0===b||b.delete(),this._widgets.delete(M)}getResponse(y){var b;return(null===(b=this._widgets.get(y||Ur))||void 0===b?void 0:b.getResponse())||""}execute(y){var b=this;return(0,E.Z)(function*(){var M;return null===(M=b._widgets.get(y||Ur))||void 0===M||M.execute(),""})()}}class Eu{constructor(y,b,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ue="string"==typeof y?document.getElementById(y):y;X(ue,"argument-error",{appName:b}),this.container=ue,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vs(C){const y=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<C;M++)y.push(b.charAt(Math.floor(Math.random()*b.length)));return y.join("")}(50);const{callback:y,"expired-callback":b}=this.params;if(y)try{y(this.responseToken)}catch(M){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch(M){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Dr=Bs("rcb"),Ei=new $t(3e4,6e4);class wc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ms().grecaptcha}load(y,b=""){return X(function Il(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(b),y,"argument-error"),this.shouldResolveImmediately(b)?Promise.resolve(Ms().grecaptcha):new Promise((M,ue)=>{const De=Ms().setTimeout(()=>{ue(be(y,"network-request-failed"))},Ei.get());Ms()[Dr]=()=>{Ms().clearTimeout(De),delete Ms()[Dr];const Ht=Ms().grecaptcha;if(!Ht)return void ue(be(y,"internal-error"));const Un=Ht.render;Ht.render=(er,lr)=>{const _r=Un(er,lr);return this.counter++,_r},this.hostLanguage=b,M(Ht)},au(`https://www.google.com/recaptcha/api.js??${(0,oe.xO)({onload:Dr,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(De),ue(be(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!Ms().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mi{load(y){return(0,E.Z)(function*(){return new uu(y)})()}clearedOneInstance(){}}const Mh="recaptcha",ts={theme:"light",type:"image"};class Yi{constructor(y,b=Object.assign({},ts),M){this.parameters=b,this.type=Mh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rn(M),this.isInvisible="invisible"===this.parameters.size,X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ue="string"==typeof y?document.getElementById(y):y;X(ue,this.auth,"argument-error"),this.container=ue,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mi:new wc,this.validateStartingState()}verify(){var y=this;return(0,E.Z)(function*(){y.assertNotDestroyed();const b=yield y.render(),M=y.getAssertedRecaptcha();return M.getResponse(b)||new Promise(De=>{const It=Ht=>{!Ht||(y.tokenChangeListeners.delete(It),De(Ht))};y.tokenChangeListeners.add(It),y.isInvisible&&M.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return b=>{if(this.tokenChangeListeners.forEach(M=>M(b)),"function"==typeof y)y(b);else if("string"==typeof y){const M=Ms()[y];"function"==typeof M&&M(b)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,E.Z)(function*(){if(yield y.init(),!y.widgetId){let b=y.container;if(!y.isInvisible){const M=document.createElement("div");b.appendChild(M),b=M}y.widgetId=y.getAssertedRecaptcha().render(b,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,E.Z)(function*(){X(ct()&&!lo(),y.auth,"internal-error"),yield function Ma(){let C=null;return new Promise(y=>{"complete"!==document.readyState?(C=()=>y(),window.addEventListener("load",C)):y()}).catch(y=>{throw C&&window.removeEventListener("load",C),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const b=yield function Bu(C){return Ec.apply(this,arguments)}(y.auth);X(b,y.auth,"internal-error"),y.parameters.sitekey=b})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ho{constructor(y,b){this.verificationId=y,this.onConfirmation=b}confirm(y){const b=os._fromVerification(this.verificationId,y);return this.onConfirmation(b)}}function Qo(){return(Qo=(0,E.Z)(function*(C,y,b){const M=Rn(C),ue=yield fo(M,y,(0,oe.m9)(b));return new ho(ue,De=>br(M,De))})).apply(this,arguments)}function Xo(){return(Xo=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C);yield z(!1,M,"phone");const ue=yield fo(M.auth,y,(0,oe.m9)(b));return new ho(ue,De=>Sr(M,De))})).apply(this,arguments)}function Ro(){return(Ro=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C),ue=yield fo(M.auth,y,(0,oe.m9)(b));return new ho(ue,De=>bi(M,De))})).apply(this,arguments)}function fo(C,y,b){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,E.Z)(function*(C,y,b){var M;const ue=yield b.verify();try{let De;if(X("string"==typeof ue,C,"argument-error"),X(b.type===Mh,C,"argument-error"),De="string"==typeof y?{phoneNumber:y}:y,"session"in De){const It=De.session;if("phoneNumber"in De)return X("enroll"===It.type,C,"internal-error"),(yield qa(C,{idToken:It.credential,phoneEnrollmentInfo:{phoneNumber:De.phoneNumber,recaptchaToken:ue}})).phoneSessionInfo.sessionInfo;{X("signin"===It.type,C,"internal-error");const Ht=(null===(M=De.multiFactorHint)||void 0===M?void 0:M.uid)||De.multiFactorUid;return X(Ht,C,"missing-multi-factor-info"),(yield ul(C,{mfaPendingCredential:It.credential,mfaEnrollmentId:Ht,phoneSignInInfo:{recaptchaToken:ue}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:It}=yield jt(C,{phoneNumber:De.phoneNumber,recaptchaToken:ue});return It}}finally{b._reset()}})).apply(this,arguments)}function ua(){return(ua=(0,E.Z)(function*(C,y){yield Z((0,oe.m9)(C),y)})).apply(this,arguments)}let No=(()=>{class C{constructor(b){this.providerId=C.PROVIDER_ID,this.auth=Rn(b)}verifyPhoneNumber(b,M){return fo(this.auth,b,(0,oe.m9)(M))}static credential(b,M){return os._fromVerification(b,M)}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:M,temporaryProof:ue}=b;return M&&ue?os._fromTokenResponse(M,ue):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function Su(C,y){return y?Ee(y):(X(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class Fn extends vs{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return ao(y,this._buildIdpRequest())}_linkToIdToken(y,b){return ao(y,this._buildIdpRequest(b))}_getReauthenticationResolver(y){return ao(y,this._buildIdpRequest())}_buildIdpRequest(y){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(b.idToken=y),b}}function Vu(C){return qt(C.auth,new Fn(C),C.bypassAuthState)}function Jl(C){const{auth:y,user:b}=C;return X(b,y,"internal-error"),ot(b,new Fn(C),C.bypassAuthState)}function wu(C){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,E.Z)(function*(C){const{auth:y,user:b}=C;return X(b,y,"internal-error"),Z(b,new Fn(C),C.bypassAuthState)})).apply(this,arguments)}class Dl{constructor(y,b,M,ue,De=!1){this.auth=y,this.resolver=M,this.user=ue,this.bypassAuthState=De,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var y=this;return new Promise(function(){var b=(0,E.Z)(function*(M,ue){y.pendingPromise={resolve:M,reject:ue};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(De){y.reject(De)}});return function(M,ue){return b.apply(this,arguments)}}())}onAuthEvent(y){var b=this;return(0,E.Z)(function*(){const{urlResponse:M,sessionId:ue,postBody:De,tenantId:It,error:Ht,type:Un}=y;if(Ht)return void b.reject(Ht);const er={auth:b.auth,requestUri:M,sessionId:ue,tenantId:It||void 0,postBody:De||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(Un)(er))}catch(lr){b.reject(lr)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return Vu;case"linkViaPopup":case"linkViaRedirect":return wu;case"reauthViaPopup":case"reauthViaRedirect":return Jl;default:ne(this.auth,"internal-error")}}resolve(y){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ui=new $t(2e3,1e4);function Sa(){return(Sa=(0,E.Z)(function*(C,y,b){const M=Rn(C);gt(C,y,Ci);const ue=Su(M,b);return new xc(M,"signInViaPopup",y,ue).executeNotNull()})).apply(this,arguments)}function lu(){return(lu=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C);gt(M.auth,y,Ci);const ue=Su(M.auth,b);return new xc(M.auth,"reauthViaPopup",y,ue,M).executeNotNull()})).apply(this,arguments)}function Pa(){return(Pa=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C);gt(M.auth,y,Ci);const ue=Su(M.auth,b);return new xc(M.auth,"linkViaPopup",y,ue,M).executeNotNull()})).apply(this,arguments)}let xc=(()=>{class C extends Dl{constructor(b,M,ue,De,It){super(b,M,De,It),this.provider=ue,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var b=this;return(0,E.Z)(function*(){const M=yield b.execute();return X(M,b.auth,"internal-error"),M})()}onExecution(){var b=this;return(0,E.Z)(function*(){J(1===b.filter.length,"Popup operations only handle one event");const M=Zo();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],M),b.authWindow.associatedEvent=M,b.resolver._originValidation(b.auth).catch(ue=>{b.reject(ue)}),b.resolver._isIframeWebStorageSupported(b.auth,ue=>{ue||b.reject(be(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const b=()=>{var M,ue;this.pollId=(null===(ue=null===(M=this.authWindow)||void 0===M?void 0:M.window)||void 0===ue?void 0:ue.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(b,ui.get())};b()}}return C.currentPopupAction=null,C})();const Jo=new Map;class ll extends Dl{constructor(y,b,M=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,M),this.eventId=null}execute(){var y=()=>super.execute,b=this;return(0,E.Z)(function*(){let M=Jo.get(b.auth._key());if(!M){try{const De=(yield function ea(C,y){return Za.apply(this,arguments)}(b.resolver,b.auth))?yield y().call(b):null;M=()=>Promise.resolve(De)}catch(ue){M=()=>Promise.reject(ue)}Jo.set(b.auth._key(),M)}return b.bypassAuthState||Jo.set(b.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(y){var b=()=>super.onAuthEvent,M=this;return(0,E.Z)(function*(){if("signInViaRedirect"===y.type)return b().call(M,y);if("unknown"!==y.type){if(y.eventId){const ue=yield M.auth._redirectUserForId(y.eventId);if(ue)return M.user=ue,b().call(M,y);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Za(){return(Za=(0,E.Z)(function*(C,y){const b=qe(y),M=Se(C);if(!(yield M._isAvailable()))return!1;const ue="true"===(yield M._get(b));return yield M._remove(b),ue})).apply(this,arguments)}function Hu(C,y){return la.apply(this,arguments)}function la(){return(la=(0,E.Z)(function*(C,y){return Se(C)._set(qe(y),"true")})).apply(this,arguments)}function Q(C,y){Jo.set(C._key(),y)}function Se(C){return Ee(C._redirectPersistence)}function qe(C){return on("pendingRedirect",C.config.apiKey,C.name)}function yn(){return(yn=(0,E.Z)(function*(C,y,b){const M=Rn(C);gt(C,y,Ci);const ue=Su(M,b);return yield Hu(ue,M),ue._openRedirect(M,y,"signInViaRedirect")})).apply(this,arguments)}function Nr(){return(Nr=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C);gt(M.auth,y,Ci);const ue=Su(M.auth,b);yield Hu(ue,M.auth);const De=yield Oa(M);return ue._openRedirect(M.auth,y,"reauthViaRedirect",De)})).apply(this,arguments)}function po(){return(po=(0,E.Z)(function*(C,y,b){const M=(0,oe.m9)(C);gt(M.auth,y,Ci);const ue=Su(M.auth,b);yield z(!1,M,y.providerId),yield Hu(ue,M.auth);const De=yield Oa(M);return ue._openRedirect(M.auth,y,"linkViaRedirect",De)})).apply(this,arguments)}function Cu(){return(Cu=(0,E.Z)(function*(C,y){return yield Rn(C)._initializationPromise,Hs(C,y,!1)})).apply(this,arguments)}function Hs(C,y){return vi.apply(this,arguments)}function vi(){return(vi=(0,E.Z)(function*(C,y,b=!1){const M=Rn(C),ue=Su(M,y),It=yield new ll(M,ue,b).execute();return It&&!b&&(delete It.user._redirectEventId,yield M._persistUserIfCurrent(It.user),yield M._setRedirectUser(null,y)),It})).apply(this,arguments)}function Oa(C){return ca.apply(this,arguments)}function ca(){return(ca=(0,E.Z)(function*(C){const y=Zo(`${C.uid}:::`);return C._redirectEventId=y,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),y})).apply(this,arguments)}class Fd{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let b=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(y,M)&&(b=!0,this.sendToConsumer(y,M),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Gu(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return td(C);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=y,b=!0)),b}sendToConsumer(y,b){var M;if(y.error&&!td(y)){const ue=(null===(M=y.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";b.onError(be(this.auth,ue))}else b.onAuthEvent(y)}isEventForConsumer(y,b){const M=null===b.eventId||!!y.eventId&&y.eventId===b.eventId;return b.filter.includes(y.type)&&M}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dl(y))}saveEventToCache(y){this.cachedEventUids.add(dl(y)),this.lastProcessedEventTime=Date.now()}}function dl(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(y=>y).join("-")}function td({type:C,error:y}){return"unknown"===C&&"auth/no-auth-event"===(null==y?void 0:y.code)}function nd(C){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,E.Z)(function*(C,y={}){return Vn(C,"GET","/v1/projects",y)})).apply(this,arguments)}const Sf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$u=/^https?/;function Ph(){return(Ph=(0,E.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:y}=yield nd(C);for(const b of y)try{if(Qg(b))return}catch(M){}ne(C,"unauthorized-domain")})).apply(this,arguments)}function Qg(C){const y=St(),{protocol:b,hostname:M}=new URL(y);if(C.startsWith("chrome-extension://")){const It=new URL(C);return""===It.hostname&&""===M?"chrome-extension:"===b&&C.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===b&&It.hostname===M}if(!$u.test(b))return!1;if(Sf.test(C))return M===C;const ue=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ue+"|"+ue+")$","i").test(M)}const Mp=new $t(3e4,6e4);function Oh(){const C=Ms().___jsl;if(null==C?void 0:C.H)for(const y of Object.keys(C.H))if(C.H[y].r=C.H[y].r||[],C.H[y].L=C.H[y].L||[],C.H[y].r=[...C.H[y].L],C.CP)for(let b=0;b<C.CP.length;b++)C.CP[b]=null}let Al=null;function xu(C){return Al=Al||function vv(C){return new Promise((y,b)=>{var M,ue,De;function It(){Oh(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{Oh(),b(be(C,"network-request-failed"))},timeout:Mp.get()})}if(null===(ue=null===(M=Ms().gapi)||void 0===M?void 0:M.iframes)||void 0===ue?void 0:ue.Iframe)y(gapi.iframes.getContext());else{if(!(null===(De=Ms().gapi)||void 0===De?void 0:De.load)){const Ht=Bs("iframefcb");return Ms()[Ht]=()=>{gapi.load?It():b(be(C,"network-request-failed"))},au(`https://apis.google.com/js/api.js?onload=${Ht}`).catch(Un=>b(Un))}It()}}).catch(y=>{throw Al=null,y})}(C),Al}const rd=new $t(5e3,15e3),zi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rh(C){const y=C.config;X(y.authDomain,C,"auth-domain-config-required");const b=y.emulator?cn(y,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,M={apiKey:y.apiKey,appName:C.name,v:Ne.SDK_VERSION},ue=tc.get(C.config.apiHost);ue&&(M.eid=ue);const De=C._getFrameworks();return De.length&&(M.fw=De.join(",")),`${b}?${(0,oe.xO)(M).slice(1)}`}function Dc(){return Dc=(0,E.Z)(function*(C){const y=yield xu(C),b=Ms().gapi;return X(b,C,"internal-error"),y.open({where:document.body,url:Rh(C),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zi,dontclear:!0},M=>new Promise(function(){var ue=(0,E.Z)(function*(De,It){yield M.restyle({setHideOnLeave:!1});const Ht=be(C,"network-request-failed"),Un=Ms().setTimeout(()=>{It(Ht)},rd.get());function er(){Ms().clearTimeout(Un),De(M)}M.ping(er).then(er,()=>{It(Ht)})});return function(De,It){return ue.apply(this,arguments)}}()))}),Dc.apply(this,arguments)}const nc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ac{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function du(C,y,b,M,ue,De){X(C.config.authDomain,C,"auth-domain-config-required"),X(C.config.apiKey,C,"invalid-api-key");const It={apiKey:C.config.apiKey,appName:C.name,authType:b,redirectUrl:M,v:Ne.SDK_VERSION,eventId:ue};if(y instanceof Ci){y.setDefaultLanguage(C.languageCode),It.providerId=y.providerId||"",(0,oe.xb)(y.getCustomParameters())||(It.customParameters=JSON.stringify(y.getCustomParameters()));for(const[Un,er]of Object.entries(De||{}))It[Un]=er}if(y instanceof Ao){const Un=y.getScopes().filter(er=>""!==er);Un.length>0&&(It.scopes=Un.join(","))}C.tenantId&&(It.tid=C.tenantId);const Ht=It;for(const Un of Object.keys(Ht))void 0===Ht[Un]&&delete Ht[Un];return`${function rc({config:C}){return C.emulator?cn(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,oe.xO)(Ht).slice(1)}`}const zu="webStorageSupport";class Fh extends class Np{constructor(y){this.factorId=y}_process(y,b,M){switch(b.type){case"enroll":return this._finalizeEnroll(y,b.credential,M);case"signin":return this._finalizeSignIn(y,b.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new Fh(y)}_finalizeEnroll(y,b,M){return function al(C,y){return Vn(C,"POST","/v2/accounts/mfaEnrollment:finalize",Ln(C,y))}(y,{idToken:b,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,b){return function Nd(C,y){return Vn(C,"POST","/v2/accounts/mfaSignIn:finalize",Ln(C,y))}(y,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cf=(()=>{class C{constructor(){}static assertion(b){return Fh._fromCredential(b)}}return C.FACTOR_ID="phone",C})();var id="@firebase/auth";class Xg{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var b=this;return(0,E.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const b=this.auth.onIdTokenChanged(M=>{var ue;y((null===(ue=M)||void 0===ue?void 0:ue.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,b),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const b=this.internalListeners.get(y);!b||(this.internalListeners.delete(y),b(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fl(){return window}function da(){return(da=(0,E.Z)(function*(C,y,b){var M;const{BuildInfo:ue}=fl();J(y.sessionId,"AuthEvent did not contain a session ID");const De=yield Af(y.sessionId),It={};return Ir()?It.ibi=ue.packageName:Kt()?It.apn=ue.packageName:ne(C,"operation-not-supported-in-this-environment"),ue.displayName&&(It.appDisplayName=ue.displayName),It.sessionId=De,du(C,b,y.type,void 0,null!==(M=y.eventId)&&void 0!==M?M:void 0,It)})).apply(this,arguments)}function sd(){return(sd=(0,E.Z)(function*(C){const{BuildInfo:y}=fl(),b={};Ir()?b.iosBundleId=y.packageName:Kt()?b.androidPackageName=y.packageName:ne(C,"operation-not-supported-in-this-environment"),yield nd(C,b)})).apply(this,arguments)}function Df(){return(Df=(0,E.Z)(function*(C,y,b){const{cordova:M}=fl();let ue=()=>{};try{yield new Promise((De,It)=>{let Ht=null;function Un(){var _r;De();const to=null===(_r=M.plugins.browsertab)||void 0===_r?void 0:_r.close;"function"==typeof to&&to(),"function"==typeof(null==b?void 0:b.close)&&b.close()}function er(){Ht||(Ht=window.setTimeout(()=>{It(be(C,"redirect-cancelled-by-user"))},2e3))}function lr(){"visible"===(null==document?void 0:document.visibilityState)&&er()}y.addPassiveListener(Un),document.addEventListener("resume",er,!1),Kt()&&document.addEventListener("visibilitychange",lr,!1),ue=()=>{y.removePassiveListener(Un),document.removeEventListener("resume",er,!1),document.removeEventListener("visibilitychange",lr,!1),Ht&&window.clearTimeout(Ht)}})}finally{ue()}})).apply(this,arguments)}function Af(C){return ic.apply(this,arguments)}function ic(){return(ic=(0,E.Z)(function*(C){const y=sc(C),b=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(b)).map(ue=>ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function sc(C){if(J(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(C);const y=new ArrayBuffer(C.length),b=new Uint8Array(y);for(let M=0;M<C.length;M++)b[M]=C.charCodeAt(M);return b}!function Mc(C){(0,Ne._registerComponent)(new Ge.wA("auth",(y,{options:b})=>{const M=y.getProvider("app").getImmediate(),ue=y.getProvider("heartbeat"),{apiKey:De,authDomain:It}=M.options;return((Ht,Un)=>{X(De&&!De.includes(":"),"invalid-api-key",{appName:Ht.name}),X(!(null==It?void 0:It.includes(":")),"argument-error",{appName:Ht.name});const er={apiKey:De,authDomain:It,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ls(C)},lr=new An(Ht,Un,er);return function We(C,y){const b=(null==y?void 0:y.persistence)||[],M=(Array.isArray(b)?b:[b]).map(Ee);(null==y?void 0:y.errorMap)&&C._updateErrorMap(y.errorMap),C._initializeWithPersistence(M,null==y?void 0:y.popupRedirectResolver)}(lr,b),lr})(M,ue)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,b,M)=>{y.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Ge.wA("auth-internal",y=>{const b=Rn(y.getProvider("auth").getImmediate());return new Xg(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(id,"0.20.2",function hu(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,Ne.registerVersion)(id,"0.20.2","esm2017")}("Browser");class Lp extends Fd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(b=>b(y)),super.onEvent(y)}initialized(){var y=this;return(0,E.Z)(function*(){yield y.initPromise})()}}function oc(C){return kl.apply(this,arguments)}function kl(){return(kl=(0,E.Z)(function*(C){const y=yield Pc()._get(Du(C));return y&&(yield Pc()._remove(Du(C))),y})).apply(this,arguments)}function Vd(){const C=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<20;b++){const M=Math.floor(Math.random()*y.length);C.push(y.charAt(M))}return C.join("")}function Pc(){return Ee(iu)}function Du(C){return on("authEvent",C.config.apiKey,C.name)}function Os(C){if(!(null==C?void 0:C.includes("?")))return{};const[y,...b]=C.split("?");return(0,oe.zd)(b.join("?"))}function pu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function Ml(){var C;return(null===(C=null==self?void 0:self.location)||void 0===C?void 0:C.protocol)||null}function jp(C=(0,oe.z$)()){return!("file:"!==Ml()&&"ionic:"!==Ml()&&"capacitor:"!==Ml()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function uc(){try{const C=self.localStorage,y=Zo();if(C)return C.setItem(y,"1"),C.removeItem(y),!function ac(C=(0,oe.z$)()){return function ad(){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ta(C=(0,oe.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,oe.hl)()}catch(C){return lc()&&(0,oe.hl)()}return!1}function lc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Co(){return(function Jg(){return"http:"===Ml()||"https:"===Ml()}()||(0,oe.ru)()||jp())&&!function qi(){return(0,oe.b$)()||(0,oe.UG)()}()&&uc()&&!lc()}function Pl(){return jp()&&"undefined"!=typeof document}function Oc(){return(Oc=(0,E.Z)(function*(){return!!Pl()&&new Promise(C=>{const y=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),C(!0)})})})).apply(this,arguments)}const Ca={LOCAL:"local",NONE:"none",SESSION:"session"},gl=X,Bh="persistence";function ml(C){return ld.apply(this,arguments)}function ld(){return(ld=(0,E.Z)(function*(C){yield C._initializationPromise;const y=eo(),b=on(Bh,C.config.apiKey,C.name);y&&y.setItem(b,C._getPersistence())})).apply(this,arguments)}function eo(){var C;try{return(null===(C=function ud(){return"undefined"!=typeof window?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch(y){return null}}const Vh=X;class qu{constructor(){this.browserResolver=Ee(class Rp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=So,this._completeRedirectFn=Hs,this._overrideRedirectResult=Q}_openPopup(y,b,M,ue){var De=this;return(0,E.Z)(function*(){var It;J(null===(It=De.eventManagers[y._key()])||void 0===It?void 0:It.manager,"_initialize() not called before _openPopup()");const Ht=du(y,b,M,St(),ue);return function Iu(C,y,b,M=500,ue=600){const De=Math.max((window.screen.availHeight-ue)/2,0).toString(),It=Math.max((window.screen.availWidth-M)/2,0).toString();let Ht="";const Un=Object.assign(Object.assign({},nc),{width:M.toString(),height:ue.toString(),top:De,left:It}),er=(0,oe.z$)().toLowerCase();b&&(Ht=Be(er)?"_blank":b),Ot(er)&&(y=y||"http://localhost",Un.scrollbars="yes");const lr=Object.entries(Un).reduce((to,[Na,dd])=>`${to}${Na}=${dd},`,"");if(function wi(C=(0,oe.z$)()){var y;return Ir(C)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(er)&&"_self"!==Ht)return function wf(C,y){const b=document.createElement("a");b.href=C,b.target=y;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(M)}(y||"",Ht),new Ac(null);const _r=window.open(y||"",Ht,lr);X(_r,C,"popup-blocked");try{_r.focus()}catch(to){}return new Ac(_r)}(y,Ht,Zo())})()}_openRedirect(y,b,M,ue){var De=this;return(0,E.Z)(function*(){return yield De._originValidation(y),function su(C){Ms().location.href=C}(du(y,b,M,St(),ue)),new Promise(()=>{})})()}_initialize(y){const b=y._key();if(this.eventManagers[b]){const{manager:ue,promise:De}=this.eventManagers[b];return ue?Promise.resolve(ue):(J(De,"If manager is not set, promise should be"),De)}const M=this.initAndGetManager(y);return this.eventManagers[b]={promise:M},M.catch(()=>{delete this.eventManagers[b]}),M}initAndGetManager(y){var b=this;return(0,E.Z)(function*(){const M=yield function Wu(C){return Dc.apply(this,arguments)}(y),ue=new Fd(y);return M.register("authEvent",De=>(X(null==De?void 0:De.authEvent,y,"invalid-auth-event"),{status:ue.onEvent(De.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[y._key()]={manager:ue},b.iframes[y._key()]=M,ue})()}_isIframeWebStorageSupported(y,b){this.iframes[y._key()].send(zu,{type:zu},ue=>{var De;const It=null===(De=null==ue?void 0:ue[0])||void 0===De?void 0:De[zu];void 0!==It&&b(!!It),ne(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const b=y._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function go(C){return Ph.apply(this,arguments)}(y)),this.originValidationPromises[b]}get _shouldInitProactively(){return Jr()||ht()||Ir()}}),this.cordovaResolver=Ee(class Hd{constructor(){this._redirectPersistence=So,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hs,this._overrideRedirectResult=Q}_initialize(y){var b=this;return(0,E.Z)(function*(){const M=y._key();let ue=b.eventManagers.get(M);return ue||(ue=new Lp(y),b.eventManagers.set(M,ue),b.attachCallbackListeners(y,ue)),ue})()}_openPopup(y){ne(y,"operation-not-supported-in-this-environment")}_openRedirect(y,b,M,ue){var De=this;return(0,E.Z)(function*(){!function wo(C){var y,b,M,ue,De,It,Ht,Un,er,lr;const _r=fl();X("function"==typeof(null===(y=null==_r?void 0:_r.universalLinks)||void 0===y?void 0:y.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(void 0!==(null===(b=null==_r?void 0:_r.BuildInfo)||void 0===b?void 0:b.packageName),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(De=null===(ue=null===(M=null==_r?void 0:_r.cordova)||void 0===M?void 0:M.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===De?void 0:De.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Un=null===(Ht=null===(It=null==_r?void 0:_r.cordova)||void 0===It?void 0:It.plugins)||void 0===Ht?void 0:Ht.browsertab)||void 0===Un?void 0:Un.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(lr=null===(er=null==_r?void 0:_r.cordova)||void 0===er?void 0:er.InAppBrowser)||void 0===lr?void 0:lr.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const It=yield De._initialize(y);yield It.initialized(),It.resetRedirect(),function W(){Jo.clear()}(),yield De._originValidation(y);const Ht=function kf(C,y,b=null){return{type:y,eventId:b,urlResponse:null,sessionId:Vd(),postBody:null,tenantId:C.tenantId,error:be(C,"no-auth-event")}}(y,M,ue);yield function Mf(C,y){return Pc()._set(Du(C),y)}(y,Ht);const Un=yield function xf(C,y,b){return da.apply(this,arguments)}(y,Ht,b),er=yield function od(C){const{cordova:y}=fl();return new Promise(b=>{y.plugins.browsertab.isAvailable(M=>{let ue=null;M?y.plugins.browsertab.openUrl(C):ue=y.InAppBrowser.open(C,function Xr(C=(0,oe.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),b(ue)})})}(Un);return function If(C,y,b){return Df.apply(this,arguments)}(y,It,er)})()}_isIframeWebStorageSupported(y,b){throw new Error("Method not implemented.")}_originValidation(y){const b=y._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function wa(C){return sd.apply(this,arguments)}(y)),this.originValidationPromises[b]}attachCallbackListeners(y,b){const{universalLinks:M,handleOpenURL:ue,BuildInfo:De}=fl(),It=setTimeout((0,E.Z)(function*(){yield oc(y),b.onEvent(pu())}),500),Ht=function(){var lr=(0,E.Z)(function*(_r){clearTimeout(It);const to=yield oc(y);let Na=null;to&&(null==_r?void 0:_r.url)&&(Na=function Pf(C,y){var b,M;const ue=function Of(C){const y=Os(C),b=y.link?decodeURIComponent(y.link):void 0,M=Os(b).link,ue=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return Os(ue).link||ue||M||b||C}(y);if(ue.includes("/__/auth/callback")){const De=Os(ue),It=De.firebaseError?function jh(C){try{return JSON.parse(C)}catch(y){return null}}(decodeURIComponent(De.firebaseError)):null,Ht=null===(M=null===(b=null==It?void 0:It.code)||void 0===b?void 0:b.split("auth/"))||void 0===M?void 0:M[1],Un=Ht?be(Ht):null;return Un?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Un,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:ue,postBody:null}}return null}(to,_r.url)),b.onEvent(Na||pu())});return function(to){return lr.apply(this,arguments)}}();void 0!==M&&"function"==typeof M.subscribe&&M.subscribe(null,Ht);const Un=ue,er=`${De.packageName.toLowerCase()}://`;fl().handleOpenURL=function(){var lr=(0,E.Z)(function*(_r){if(_r.toLowerCase().startsWith(er)&&Ht({url:_r}),"function"==typeof Un)try{Un(_r)}catch(to){console.error(to)}});return function(_r){return lr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=So,this._completeRedirectFn=Hs,this._overrideRedirectResult=Q}_initialize(y){var b=this;return(0,E.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,b,M,ue){var De=this;return(0,E.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._openPopup(y,b,M,ue)})()}_openRedirect(y,b,M,ue){var De=this;return(0,E.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._openRedirect(y,b,M,ue)})()}_isIframeWebStorageSupported(y,b){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,b)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return Pl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,E.Z)(function*(){if(y.underlyingResolver)return;const b=yield function Uh(){return Oc.apply(this,arguments)}();y.underlyingResolver=b?y.cordovaResolver:y.browserResolver})()}}function Ol(C){return C.unwrap()}function Gd(C){return Rc(C)}function Rc(C){const{_tokenResponse:y}=C instanceof oe.ZR?C.customData:C;if(!y)return null;if(!(C instanceof oe.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return No.credentialFromResult(C);const b=y.providerId;if(!b||"password"===b)return null;let M;switch(b){case"google.com":M=ma;break;case"facebook.com":M=_o;break;case"github.com":M=Ga;break;case"twitter.com":M=$a;break;default:const{oauthIdToken:ue,oauthAccessToken:De,oauthTokenSecret:It,pendingToken:Ht,nonce:Un}=y;return De||It||ue||Ht?Ht?b.startsWith("saml.")?zo._create(b,Ht):mt._fromParams({providerId:b,signInMethod:b,pendingToken:Ht,idToken:ue,accessToken:De}):new Ys(b).credential({idToken:ue,accessToken:De,rawNonce:Un}):null}return C instanceof oe.ZR?M.credentialFromError(C):M.credentialFromResult(C)}function Ra(C,y){return y.catch(b=>{throw b instanceof oe.ZR&&function cd(C,y){var b;const M=null===(b=y.customData)||void 0===b?void 0:b._tokenResponse;if("auth/multi-factor-auth-required"===y.code)y.resolver=new Uf(C,function xs(C,y){var b;const M=(0,oe.m9)(C),ue=y;return X(y.customData.operationType,M,"argument-error"),X(null===(b=ue.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,M,"argument-error"),ba._fromError(M,ue)}(C,y));else if(M){const ue=Rc(y),De=y;ue&&(De.credential=ue,De.tenantId=M.tenantId||void 0,De.email=M.email||void 0,De.phoneNumber=M.phoneNumber||void 0)}}(C,b),b}).then(b=>{const ue=b.user;return{operationType:b.operationType,credential:Gd(b),additionalUserInfo:Po(b),user:Zu.getOrCreate(ue)}})}function Nc(C,y){return $d.apply(this,arguments)}function $d(){return($d=(0,E.Z)(function*(C,y){const b=yield y;return{verificationId:b.verificationId,confirm:M=>Ra(C,b.confirm(M))}})).apply(this,arguments)}class Uf{constructor(y,b){this.resolver=b,this.auth=function Ku(C){return C.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return Ra(Ol(this.auth),this.resolver.resolveSignIn(y))}}class Zu{constructor(y){this._delegate=y,this.multiFactor=function Rd(C){const y=(0,oe.m9)(C);return Oo.has(y)||Oo.set(y,bs._fromUser(y)),Oo.get(y)}(y)}static getOrCreate(y){return Zu.USER_MAP.has(y)||Zu.USER_MAP.set(y,new Zu(y)),Zu.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var b=this;return(0,E.Z)(function*(){return Ra(b.auth,Sr(b._delegate,y))})()}linkWithPhoneNumber(y,b){var M=this;return(0,E.Z)(function*(){return Nc(M.auth,function ns(C,y,b){return Xo.apply(this,arguments)}(M._delegate,y,b))})()}linkWithPopup(y){var b=this;return(0,E.Z)(function*(){return Ra(b.auth,function _n(C,y,b){return Pa.apply(this,arguments)}(b._delegate,y,qu))})()}linkWithRedirect(y){var b=this;return(0,E.Z)(function*(){return yield ml(Rn(b.auth)),function Si(C,y,b){return function Tr(C,y,b){return po.apply(this,arguments)}(C,y,b)}(b._delegate,y,qu)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var b=this;return(0,E.Z)(function*(){return Ra(b.auth,bi(b._delegate,y))})()}reauthenticateWithPhoneNumber(y,b){return Nc(this.auth,function Ld(C,y,b){return Ro.apply(this,arguments)}(this._delegate,y,b))}reauthenticateWithPopup(y){return Ra(this.auth,function ed(C,y,b){return lu.apply(this,arguments)}(this._delegate,y,qu))}reauthenticateWithRedirect(y){var b=this;return(0,E.Z)(function*(){return yield ml(Rn(b.auth)),function sr(C,y,b){return function or(C,y,b){return Nr.apply(this,arguments)}(C,y,b)}(b._delegate,y,qu)})()}sendEmailVerification(y){return function as(C,y){return ji.apply(this,arguments)}(this._delegate,y)}unlink(y){var b=this;return(0,E.Z)(function*(){return yield function va(C,y){return pi.apply(this,arguments)}(b._delegate,y),b})()}updateEmail(y){return function Ql(C,y){return sl((0,oe.m9)(C),y,null)}(this._delegate,y)}updatePassword(y){return function wl(C,y){return sl((0,oe.m9)(C),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function aa(C,y){return ua.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function ya(C,y){return Fr.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,b){return function es(C,y,b){return hi.apply(this,arguments)}(this._delegate,y,b)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zu.USER_MAP=new WeakMap;const vl=X;let Wd=(()=>{class C{constructor(b,M){if(this.app=b,M.isInitialized())return this._delegate=M.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ue}=b.options;vl(ue,"invalid-api-key",{appName:b.name}),vl(ue,"invalid-api-key",{appName:b.name});const De="undefined"!=typeof window?qu:void 0;this._delegate=M.initialize({options:{persistence:Vf(ue,b.name),popupRedirectResolver:De}}),this._delegate._updateErrorMap(ft),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(b){this._delegate.languageCode=b}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(b){this._delegate.tenantId=b}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(b,M){!function Gi(C,y,b){const M=Rn(C);X(M._canInitEmulator,M,"emulator-config-failed"),X(/^https?:\/\//.test(y),M,"invalid-emulator-scheme");const ue=!!(null==b?void 0:b.disableWarnings),De=ds(y),{host:It,port:Ht}=function $i(C){const y=ds(C),b=/(\/\/)?([^?#/]+)/.exec(C.substr(y.length));if(!b)return{host:"",port:null};const M=b[2].split("@").pop()||"",ue=/^(\[[^\]]+\])(:|$)/.exec(M);if(ue){const De=ue[1];return{host:De,port:Ss(M.substr(De.length+1))}}{const[De,It]=M.split(":");return{host:De,port:Ss(It)}}}(y);M.config.emulator={url:`${De}//${It}${null===Ht?"":`:${Ht}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:It,port:Ht,protocol:De.replace(":",""),options:Object.freeze({disableWarnings:ue})}),ue||function ai(){function C(){const y=document.createElement("p"),b=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,b,M)}applyActionCode(b){return function fe(C,y){return G.apply(this,arguments)}(this._delegate,b)}checkActionCode(b){return Ie(this._delegate,b)}confirmPasswordReset(b,M){return function Qs(C,y,b){return _u.apply(this,arguments)}(this._delegate,b,M)}createUserWithEmailAndPassword(b,M){var ue=this;return(0,E.Z)(function*(){return Ra(ue._delegate,function mn(C,y,b){return Gn.apply(this,arguments)}(ue._delegate,b,M))})()}fetchProvidersForEmail(b){return this.fetchSignInMethodsForEmail(b)}fetchSignInMethodsForEmail(b){return function Oi(C,y){return _s.apply(this,arguments)}(this._delegate,b)}isSignInWithEmailLink(b){return function gi(C,y){const b=jo.parseLink(y);return"EMAIL_SIGNIN"===(null==b?void 0:b.operation)}(0,b)}getRedirectResult(){var b=this;return(0,E.Z)(function*(){vl(Co(),b._delegate,"operation-not-supported-in-this-environment");const M=yield function li(C,y){return Cu.apply(this,arguments)}(b._delegate,qu);return M?Ra(b._delegate,Promise.resolve(M)):{credential:null,user:null}})()}addFrameworkForLogging(b){!function Nf(C,y){Rn(C)._logFramework(y)}(this._delegate,b)}onAuthStateChanged(b,M,ue){const{next:De,error:It,complete:Ht}=Bf(b,M,ue);return this._delegate.onAuthStateChanged(De,It,Ht)}onIdTokenChanged(b,M,ue){const{next:De,error:It,complete:Ht}=Bf(b,M,ue);return this._delegate.onIdTokenChanged(De,It,Ht)}sendSignInLinkToEmail(b,M){return function yr(C,y,b){return Zr.apply(this,arguments)}(this._delegate,b,M)}sendPasswordResetEmail(b,M){return function Pi(C,y,b){return Uo.apply(this,arguments)}(this._delegate,b,M||void 0)}setPersistence(b){var M=this;return(0,E.Z)(function*(){let ue;switch(function Ff(C,y){gl(Object.values(Ca).includes(y),C,"invalid-persistence-type"),(0,oe.b$)()?gl(y!==Ca.SESSION,C,"unsupported-persistence-type"):(0,oe.UG)()?gl(y===Ca.NONE,C,"unsupported-persistence-type"):lc()?gl(y===Ca.NONE||y===Ca.LOCAL&&(0,oe.hl)(),C,"unsupported-persistence-type"):gl(y===Ca.NONE||uc(),C,"unsupported-persistence-type")}(M._delegate,b),b){case Ca.SESSION:ue=So;break;case Ca.LOCAL:ue=(yield Ee(Ea)._isAvailable())?Ea:iu;break;case Ca.NONE:ue=At;break;default:return ne("argument-error",{appName:M._delegate.name})}return M._delegate.setPersistence(ue)})()}signInAndRetrieveDataWithCredential(b){return this.signInWithCredential(b)}signInAnonymously(){return Ra(this._delegate,function Da(C){return ks.apply(this,arguments)}(this._delegate))}signInWithCredential(b){return Ra(this._delegate,br(this._delegate,b))}signInWithCustomToken(b){return Ra(this._delegate,function $(C,y){return B.apply(this,arguments)}(this._delegate,b))}signInWithEmailAndPassword(b,M){return Ra(this._delegate,function $n(C,y,b){return br((0,oe.m9)(C),ia.credential(y,b))}(this._delegate,b,M))}signInWithEmailLink(b,M){return Ra(this._delegate,function xi(C,y,b){return Ii.apply(this,arguments)}(this._delegate,b,M))}signInWithPhoneNumber(b,M){return Nc(this._delegate,function fi(C,y,b){return Qo.apply(this,arguments)}(this._delegate,b,M))}signInWithPopup(b){var M=this;return(0,E.Z)(function*(){return vl(Co(),M._delegate,"operation-not-supported-in-this-environment"),Ra(M._delegate,function Ef(C,y,b){return Sa.apply(this,arguments)}(M._delegate,b,qu))})()}signInWithRedirect(b){var M=this;return(0,E.Z)(function*(){return vl(Co(),M._delegate,"operation-not-supported-in-this-environment"),yield ml(M._delegate),function Lt(C,y,b){return function Ut(C,y,b){return yn.apply(this,arguments)}(C,y,b)}(M._delegate,b,qu)})()}updateCurrentUser(b){return this._delegate.updateCurrentUser(b)}verifyPasswordResetCode(b){return function lt(C,y){return Bt.apply(this,arguments)}(this._delegate,b)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Ca,C})();function Bf(C,y,b){let M=C;"function"!=typeof C&&({next:M,error:y,complete:b}=C);const ue=M;return{next:It=>ue(It&&Zu.getOrCreate(It)),error:y,complete:b}}function Vf(C,y){const b=function jf(C,y){const b=eo();if(!b)return[];const M=on(Bh,C,y);switch(b.getItem(M)){case Ca.NONE:return[At];case Ca.LOCAL:return[Ea,So];case Ca.SESSION:return[So];default:return[]}}(C,y);if("undefined"!=typeof self&&!b.includes(Ea)&&b.push(Ea),"undefined"!=typeof window)for(const M of[iu,So])b.includes(M)||b.push(M);return b.includes(At)||b.push(At),b}class zd{constructor(){this.providerId="phone",this._delegate=new No(Ol(k.Z.auth()))}static credential(y,b){return No.credential(y,b)}verifyPhoneNumber(y,b){return this._delegate.verifyPhoneNumber(y,b)}unwrap(){return this._delegate}}zd.PHONE_SIGN_IN_METHOD=No.PHONE_SIGN_IN_METHOD,zd.PROVIDER_ID=No.PROVIDER_ID;const Hf=X;class Up{constructor(y,b,M=k.Z.app()){var ue;Hf(null===(ue=M.options)||void 0===ue?void 0:ue.apiKey,"invalid-api-key",{appName:M.name}),this._delegate=new Yi(y,b,M.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cc(C){C.INTERNAL.registerComponent(new Ge.wA("auth-compat",y=>{const b=y.getProvider("app-compat").getImmediate(),M=y.getProvider("auth");return new Wd(b,M)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ia,FacebookAuthProvider:_o,GithubAuthProvider:Ga,GoogleAuthProvider:ma,OAuthProvider:Ys,SAMLAuthProvider:Ji,PhoneAuthProvider:zd,PhoneMultiFactorGenerator:Cf,RecaptchaVerifier:Up,TwitterAuthProvider:$a,Auth:Wd,AuthCredential:vs,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.2.15")}(k.Z)},1421:(Gt,rt,U)=>{var oe,E="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},k=U(5893);"undefined"!=typeof document?oe=document:(oe=E["__GLOBAL_DOCUMENT_CACHE@4"])||(oe=E["__GLOBAL_DOCUMENT_CACHE@4"]=k),Gt.exports=oe},9226:Gt=>{var rt;rt="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Gt.exports=rt},2703:Gt=>{Gt.exports=function U(E){if(!E)return!1;var k=rt.call(E);return"[object Function]"===k||"function"==typeof E&&"[object RegExp]"!==k||"undefined"!=typeof window&&(E===window.setTimeout||E===window.alert||E===window.confirm||E===window.prompt)};var rt=Object.prototype.toString},1234:(Gt,rt)=>{function U(ke){if(ke&&"object"==typeof ke){var Ge=ke.which||ke.keyCode||ke.charCode;Ge&&(ke=Ge)}if("number"==typeof ke)return Ne[ke];var Xe,Y=String(ke);return(Xe=E[Y.toLowerCase()])?Xe:(Xe=k[Y.toLowerCase()])||(1===Y.length?Y.charCodeAt(0):void 0)}U.isEventKey=function(Ge,Y){if(Ge&&"object"==typeof Ge){var Xe=Ge.which||Ge.keyCode||Ge.charCode;if(null==Xe)return!1;if("string"==typeof Y){var pe;if(pe=E[Y.toLowerCase()])return pe===Xe;if(pe=k[Y.toLowerCase()])return pe===Xe}else if("number"==typeof Y)return Y===Xe;return!1}};var E=(rt=Gt.exports=U).code=rt.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},k=rt.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(oe=97;oe<123;oe++)E[String.fromCharCode(oe)]=oe-32;for(var oe=48;oe<58;oe++)E[oe-48]=oe;for(oe=1;oe<13;oe++)E["f"+oe]=oe+111;for(oe=0;oe<10;oe++)E["numpad "+oe]=oe+96;var Ne=rt.names=rt.title={};for(oe in E)Ne[E[oe]]=oe;for(var Pe in k)E[Pe]=k[Pe]},7459:(Gt,rt,U)=>{var E=U(3357).getUint64;Gt.exports=function(oe){var Ne=new DataView(oe.buffer,oe.byteOffset,oe.byteLength),Pe={version:oe[0],flags:new Uint8Array(oe.subarray(1,4)),references:[],referenceId:Ne.getUint32(4),timescale:Ne.getUint32(8)},ke=12;0===Pe.version?(Pe.earliestPresentationTime=Ne.getUint32(ke),Pe.firstOffset=Ne.getUint32(ke+4),ke+=8):(Pe.earliestPresentationTime=E(oe.subarray(ke)),Pe.firstOffset=E(oe.subarray(ke+8)),ke+=16);var Ge=Ne.getUint16(ke+=2);for(ke+=2;Ge>0;ke+=12,Ge--)Pe.references.push({referenceType:(128&oe[ke])>>>7,referencedSize:2147483647&Ne.getUint32(ke),subsegmentDuration:Ne.getUint32(ke+4),startsWithSap:!!(128&oe[ke+8]),sapType:(112&oe[ke+8])>>>4,sapDeltaTime:268435455&Ne.getUint32(ke+8)});return Pe}},6277:Gt=>{var U,E,k,oe,Ne,Pe,ke;Ne=function(Ge,Y){return U(oe(Ge,Y))},Pe=function(Ge,Y){return E(k(Ge),Y)},ke=function(Ge,Y,Xe){return k(Xe?Ge:Ge-Y)},Gt.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:U=function(Ge){return 9e4*Ge},secondsToAudioTs:E=function(Ge,Y){return Ge*Y},videoTsToSeconds:k=function(Ge){return Ge/9e4},audioTsToSeconds:oe=function(Ge,Y){return Ge/Y},audioTsToVideoTs:Ne,videoTsToAudioTs:Pe,metadataTsToSeconds:ke}},3357:Gt=>{var rt=Math.pow(2,32);Gt.exports={getUint64:function(E){var oe,k=new DataView(E.buffer,E.byteOffset,E.byteLength);return k.getBigUint64?(oe=k.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(oe):oe:k.getUint32(0)*rt+k.getUint32(4)},MAX_UINT32:rt}},1135:(Gt,rt,U)=>{"use strict";U.d(rt,{X:()=>k});var E=U(7579);class k extends E.x{constructor(Ne){super(),this._value=Ne}get value(){return this.getValue()}_subscribe(Ne){const Pe=super._subscribe(Ne);return!Pe.closed&&Ne.next(this._value),Pe}getValue(){const{hasError:Ne,thrownError:Pe,_value:ke}=this;if(Ne)throw Pe;return this._throwIfClosed(),ke}next(Ne){super.next(this._value=Ne)}}},9751:(Gt,rt,U)=>{"use strict";U.d(rt,{y:()=>Y});var E=U(930),k=U(727),oe=U(8822),Ne=U(9635),Pe=U(2416),ke=U(576),Ge=U(2806);let Y=(()=>{class Oe{constructor(Je){Je&&(this._subscribe=Je)}lift(Je){const ft=new Oe;return ft.source=this,ft.operator=Je,ft}subscribe(Je,ft,it){const He=function Me(Oe){return Oe&&Oe instanceof E.Lv||function pe(Oe){return Oe&&(0,ke.m)(Oe.next)&&(0,ke.m)(Oe.error)&&(0,ke.m)(Oe.complete)}(Oe)&&(0,k.Nn)(Oe)}(Je)?Je:new E.Hp(Je,ft,it);return(0,Ge.x)(()=>{const{operator:$e,source:Tt}=this;He.add($e?$e.call(He,Tt):Tt?this._subscribe(He):this._trySubscribe(He))}),He}_trySubscribe(Je){try{return this._subscribe(Je)}catch(ft){Je.error(ft)}}forEach(Je,ft){return new(ft=Xe(ft))((it,He)=>{const $e=new E.Hp({next:Tt=>{try{Je(Tt)}catch(ie){He(ie),$e.unsubscribe()}},error:He,complete:it});this.subscribe($e)})}_subscribe(Je){var ft;return null===(ft=this.source)||void 0===ft?void 0:ft.subscribe(Je)}[oe.L](){return this}pipe(...Je){return(0,Ne.U)(Je)(this)}toPromise(Je){return new(Je=Xe(Je))((ft,it)=>{let He;this.subscribe($e=>He=$e,$e=>it($e),()=>ft(He))})}}return Oe.create=et=>new Oe(et),Oe})();function Xe(Oe){var et;return null!==(et=null!=Oe?Oe:Pe.v.Promise)&&void 0!==et?et:Promise}},7579:(Gt,rt,U)=>{"use strict";U.d(rt,{x:()=>Ge});var E=U(9751),k=U(727);const Ne=(0,U(3888).d)(Xe=>function(){Xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=U(8737),ke=U(2806);let Ge=(()=>{class Xe extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Me){const Oe=new Y(this,this);return Oe.operator=Me,Oe}_throwIfClosed(){if(this.closed)throw new Ne}next(Me){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Oe of this.currentObservers)Oe.next(Me)}})}error(Me){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Me;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().error(Me)}})}complete(){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Me}=this;for(;Me.length;)Me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Me;return(null===(Me=this.observers)||void 0===Me?void 0:Me.length)>0}_trySubscribe(Me){return this._throwIfClosed(),super._trySubscribe(Me)}_subscribe(Me){return this._throwIfClosed(),this._checkFinalizedStatuses(Me),this._innerSubscribe(Me)}_innerSubscribe(Me){const{hasError:Oe,isStopped:et,observers:Je}=this;return Oe||et?k.Lc:(this.currentObservers=null,Je.push(Me),new k.w0(()=>{this.currentObservers=null,(0,Pe.P)(Je,Me)}))}_checkFinalizedStatuses(Me){const{hasError:Oe,thrownError:et,isStopped:Je}=this;Oe?Me.error(et):Je&&Me.complete()}asObservable(){const Me=new E.y;return Me.source=this,Me}}return Xe.create=(pe,Me)=>new Y(pe,Me),Xe})();class Y extends Ge{constructor(pe,Me){super(),this.destination=pe,this.source=Me}next(pe){var Me,Oe;null===(Oe=null===(Me=this.destination)||void 0===Me?void 0:Me.next)||void 0===Oe||Oe.call(Me,pe)}error(pe){var Me,Oe;null===(Oe=null===(Me=this.destination)||void 0===Me?void 0:Me.error)||void 0===Oe||Oe.call(Me,pe)}complete(){var pe,Me;null===(Me=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===Me||Me.call(pe)}_subscribe(pe){var Me,Oe;return null!==(Oe=null===(Me=this.source)||void 0===Me?void 0:Me.subscribe(pe))&&void 0!==Oe?Oe:k.Lc}}},930:(Gt,rt,U)=>{"use strict";U.d(rt,{Hp:()=>it,Lv:()=>Oe});var E=U(576),k=U(727),oe=U(2416),Ne=U(7849),Pe=U(5032);const ke=Xe("C",void 0,void 0);function Xe(ne,be,Ke){return{kind:ne,value:be,error:Ke}}var pe=U(3410),Me=U(2806);class Oe extends k.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,k.Nn)(be)&&be.add(this)):this.destination=ie}static create(be,Ke,gt){return new it(be,Ke,gt)}next(be){this.isStopped?Tt(function Y(ne){return Xe("N",ne,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Tt(function Ge(ne){return Xe("E",void 0,ne)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Tt(ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Je(ne,be){return et.call(ne,be)}class ft{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ke}=this;if(Ke.next)try{Ke.next(be)}catch(gt){He(gt)}}error(be){const{partialObserver:Ke}=this;if(Ke.error)try{Ke.error(be)}catch(gt){He(gt)}else He(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ke){He(Ke)}}}class it extends Oe{constructor(be,Ke,gt){let xt;if(super(),(0,E.m)(be)||!be)xt={next:null!=be?be:void 0,error:null!=Ke?Ke:void 0,complete:null!=gt?gt:void 0};else{let X;this&&oe.v.useDeprecatedNextContext?(X=Object.create(be),X.unsubscribe=()=>this.unsubscribe(),xt={next:be.next&&Je(be.next,X),error:be.error&&Je(be.error,X),complete:be.complete&&Je(be.complete,X)}):xt=be}this.destination=new ft(xt)}}function He(ne){oe.v.useDeprecatedSynchronousErrorHandling?(0,Me.O)(ne):(0,Ne.h)(ne)}function Tt(ne,be){const{onStoppedNotification:Ke}=oe.v;Ke&&pe.z.setTimeout(()=>Ke(ne,be))}const ie={closed:!0,next:Pe.Z,error:function $e(ne){throw ne},complete:Pe.Z}},727:(Gt,rt,U)=>{"use strict";U.d(rt,{Lc:()=>ke,w0:()=>Pe,Nn:()=>Ge});var E=U(576);const oe=(0,U(3888).d)(Xe=>function(Me){Xe(this),this.message=Me?`${Me.length} errors occurred during unsubscription:\n${Me.map((Oe,et)=>`${et+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Me});var Ne=U(8737);class Pe{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:Me}=this;if(Me)if(this._parentage=null,Array.isArray(Me))for(const Je of Me)Je.remove(this);else Me.remove(this);const{initialTeardown:Oe}=this;if((0,E.m)(Oe))try{Oe()}catch(Je){pe=Je instanceof oe?Je.errors:[Je]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Je of et)try{Y(Je)}catch(ft){pe=null!=pe?pe:[],ft instanceof oe?pe=[...pe,...ft.errors]:pe.push(ft)}}if(pe)throw new oe(pe)}}add(pe){var Me;if(pe&&pe!==this)if(this.closed)Y(pe);else{if(pe instanceof Pe){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(Me=this._finalizers)&&void 0!==Me?Me:[]).push(pe)}}_hasParent(pe){const{_parentage:Me}=this;return Me===pe||Array.isArray(Me)&&Me.includes(pe)}_addParent(pe){const{_parentage:Me}=this;this._parentage=Array.isArray(Me)?(Me.push(pe),Me):Me?[Me,pe]:pe}_removeParent(pe){const{_parentage:Me}=this;Me===pe?this._parentage=null:Array.isArray(Me)&&(0,Ne.P)(Me,pe)}remove(pe){const{_finalizers:Me}=this;Me&&(0,Ne.P)(Me,pe),pe instanceof Pe&&pe._removeParent(this)}}Pe.EMPTY=(()=>{const Xe=new Pe;return Xe.closed=!0,Xe})();const ke=Pe.EMPTY;function Ge(Xe){return Xe instanceof Pe||Xe&&"closed"in Xe&&(0,E.m)(Xe.remove)&&(0,E.m)(Xe.add)&&(0,E.m)(Xe.unsubscribe)}function Y(Xe){(0,E.m)(Xe)?Xe():Xe.unsubscribe()}},2416:(Gt,rt,U)=>{"use strict";U.d(rt,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Gt,rt,U)=>{"use strict";U.d(rt,{a:()=>pe});var E=U(9751),k=U(4742),oe=U(8996),Ne=U(4671),Pe=U(3268),ke=U(3269),Ge=U(1810),Y=U(5403),Xe=U(9672);function pe(...et){const Je=(0,ke.yG)(et),ft=(0,ke.jO)(et),{args:it,keys:He}=(0,k.D)(et);if(0===it.length)return(0,oe.D)([],Je);const $e=new E.y(function Me(et,Je,ft=Ne.y){return it=>{Oe(Je,()=>{const{length:He}=et,$e=new Array(He);let Tt=He,ie=He;for(let ne=0;ne<He;ne++)Oe(Je,()=>{const be=(0,oe.D)(et[ne],Je);let Ke=!1;be.subscribe((0,Y.x)(it,gt=>{$e[ne]=gt,Ke||(Ke=!0,ie--),ie||it.next(ft($e.slice()))},()=>{--Tt||it.complete()}))},it)},it)}}(it,Je,He?Tt=>(0,Ge.n)(He,Tt):Ne.y));return ft?$e.pipe((0,Pe.Z)(ft)):$e}function Oe(et,Je,ft){et?(0,Xe.f)(ft,et,Je):Je()}},7272:(Gt,rt,U)=>{"use strict";U.d(rt,{z:()=>Pe});var E=U(8189),oe=U(3269),Ne=U(8996);function Pe(...ke){return function k(){return(0,E.J)(1)}()((0,Ne.D)(ke,(0,oe.yG)(ke)))}},515:(Gt,rt,U)=>{"use strict";U.d(rt,{E:()=>k});const k=new(U(9751).y)(Pe=>Pe.complete())},4128:(Gt,rt,U)=>{"use strict";U.d(rt,{D:()=>Y});var E=U(9751),k=U(4742),oe=U(8421),Ne=U(3269),Pe=U(5403),ke=U(3268),Ge=U(1810);function Y(...Xe){const pe=(0,Ne.jO)(Xe),{args:Me,keys:Oe}=(0,k.D)(Xe),et=new E.y(Je=>{const{length:ft}=Me;if(!ft)return void Je.complete();const it=new Array(ft);let He=ft,$e=ft;for(let Tt=0;Tt<ft;Tt++){let ie=!1;(0,oe.Xf)(Me[Tt]).subscribe((0,Pe.x)(Je,ne=>{ie||(ie=!0,$e--),it[Tt]=ne},()=>He--,void 0,()=>{(!He||!ie)&&($e||Je.next(Oe?(0,Ge.n)(Oe,it):it),Je.complete())}))}});return pe?et.pipe((0,ke.Z)(pe)):et}},8996:(Gt,rt,U)=>{"use strict";U.d(rt,{D:()=>be});var E=U(8421),k=U(5363),oe=U(9468),ke=U(9751),Y=U(2202),Xe=U(576),pe=U(9672);function Oe(Ke,gt){if(!Ke)throw new Error("Iterable cannot be null");return new ke.y(xt=>{(0,pe.f)(xt,gt,()=>{const X=Ke[Symbol.asyncIterator]();(0,pe.f)(xt,gt,()=>{X.next().then(he=>{he.done?xt.complete():xt.next(he.value)})},0,!0)})})}var et=U(3670),Je=U(8239),ft=U(1144),it=U(6495),He=U(2206),$e=U(4532),Tt=U(3260);function be(Ke,gt){return gt?function ne(Ke,gt){if(null!=Ke){if((0,et.c)(Ke))return function Ne(Ke,gt){return(0,E.Xf)(Ke).pipe((0,oe.R)(gt),(0,k.Q)(gt))}(Ke,gt);if((0,ft.z)(Ke))return function Ge(Ke,gt){return new ke.y(xt=>{let X=0;return gt.schedule(function(){X===Ke.length?xt.complete():(xt.next(Ke[X++]),xt.closed||this.schedule())})})}(Ke,gt);if((0,Je.t)(Ke))return function Pe(Ke,gt){return(0,E.Xf)(Ke).pipe((0,oe.R)(gt),(0,k.Q)(gt))}(Ke,gt);if((0,He.D)(Ke))return Oe(Ke,gt);if((0,it.T)(Ke))return function Me(Ke,gt){return new ke.y(xt=>{let X;return(0,pe.f)(xt,gt,()=>{X=Ke[Y.h](),(0,pe.f)(xt,gt,()=>{let he,J;try{({value:he,done:J}=X.next())}catch(Ae){return void xt.error(Ae)}J?xt.complete():xt.next(he)},0,!0)}),()=>(0,Xe.m)(null==X?void 0:X.return)&&X.return()})}(Ke,gt);if((0,Tt.L)(Ke))return function ie(Ke,gt){return Oe((0,Tt.Q)(Ke),gt)}(Ke,gt)}throw(0,$e.z)(Ke)}(Ke,gt):(0,E.Xf)(Ke)}},8421:(Gt,rt,U)=>{"use strict";U.d(rt,{Xf:()=>et});var E=U(655),k=U(1144),oe=U(8239),Ne=U(9751),Pe=U(3670),ke=U(2206),Ge=U(4532),Y=U(6495),Xe=U(3260),pe=U(576),Me=U(7849),Oe=U(8822);function et(ne){if(ne instanceof Ne.y)return ne;if(null!=ne){if((0,Pe.c)(ne))return function Je(ne){return new Ne.y(be=>{const Ke=ne[Oe.L]();if((0,pe.m)(Ke.subscribe))return Ke.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ne);if((0,k.z)(ne))return function ft(ne){return new Ne.y(be=>{for(let Ke=0;Ke<ne.length&&!be.closed;Ke++)be.next(ne[Ke]);be.complete()})}(ne);if((0,oe.t)(ne))return function it(ne){return new Ne.y(be=>{ne.then(Ke=>{be.closed||(be.next(Ke),be.complete())},Ke=>be.error(Ke)).then(null,Me.h)})}(ne);if((0,ke.D)(ne))return $e(ne);if((0,Y.T)(ne))return function He(ne){return new Ne.y(be=>{for(const Ke of ne)if(be.next(Ke),be.closed)return;be.complete()})}(ne);if((0,Xe.L)(ne))return function Tt(ne){return $e((0,Xe.Q)(ne))}(ne)}throw(0,Ge.z)(ne)}function $e(ne){return new Ne.y(be=>{(function ie(ne,be){var Ke,gt,xt,X;return(0,E.mG)(this,void 0,void 0,function*(){try{for(Ke=(0,E.KL)(ne);!(gt=yield Ke.next()).done;)if(be.next(gt.value),be.closed)return}catch(he){xt={error:he}}finally{try{gt&&!gt.done&&(X=Ke.return)&&(yield X.call(Ke))}finally{if(xt)throw xt.error}}be.complete()})})(ne,be).catch(Ke=>be.error(Ke))})}},6451:(Gt,rt,U)=>{"use strict";U.d(rt,{T:()=>ke});var E=U(8189),k=U(8421),oe=U(515),Ne=U(3269),Pe=U(8996);function ke(...Ge){const Y=(0,Ne.yG)(Ge),Xe=(0,Ne._6)(Ge,1/0),pe=Ge;return pe.length?1===pe.length?(0,k.Xf)(pe[0]):(0,E.J)(Xe)((0,Pe.D)(pe,Y)):oe.E}},9646:(Gt,rt,U)=>{"use strict";U.d(rt,{of:()=>oe});var E=U(3269),k=U(8996);function oe(...Ne){const Pe=(0,E.yG)(Ne);return(0,k.D)(Ne,Pe)}},5403:(Gt,rt,U)=>{"use strict";U.d(rt,{x:()=>k});var E=U(930);function k(Ne,Pe,ke,Ge,Y){return new oe(Ne,Pe,ke,Ge,Y)}class oe extends E.Lv{constructor(Pe,ke,Ge,Y,Xe,pe){super(Pe),this.onFinalize=Xe,this.shouldUnsubscribe=pe,this._next=ke?function(Me){try{ke(Me)}catch(Oe){Pe.error(Oe)}}:super._next,this._error=Y?function(Me){try{Y(Me)}catch(Oe){Pe.error(Oe)}finally{this.unsubscribe()}}:super._error,this._complete=Ge?function(){try{Ge()}catch(Me){Pe.error(Me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ke}=this;super.unsubscribe(),!ke&&(null===(Pe=this.onFinalize)||void 0===Pe||Pe.call(this))}}}},262:(Gt,rt,U)=>{"use strict";U.d(rt,{K:()=>Ne});var E=U(8421),k=U(5403),oe=U(4482);function Ne(Pe){return(0,oe.e)((ke,Ge)=>{let pe,Y=null,Xe=!1;Y=ke.subscribe((0,k.x)(Ge,void 0,void 0,Me=>{pe=(0,E.Xf)(Pe(Me,Ne(Pe)(ke))),Y?(Y.unsubscribe(),Y=null,pe.subscribe(Ge)):Xe=!0})),Xe&&(Y.unsubscribe(),Y=null,pe.subscribe(Ge))})}},4351:(Gt,rt,U)=>{"use strict";U.d(rt,{b:()=>oe});var E=U(5577),k=U(576);function oe(Ne,Pe){return(0,k.m)(Pe)?(0,E.z)(Ne,Pe,1):(0,E.z)(Ne,1)}},6590:(Gt,rt,U)=>{"use strict";U.d(rt,{d:()=>oe});var E=U(4482),k=U(5403);function oe(Ne){return(0,E.e)((Pe,ke)=>{let Ge=!1;Pe.subscribe((0,k.x)(ke,Y=>{Ge=!0,ke.next(Y)},()=>{Ge||ke.next(Ne),ke.complete()}))})}},9300:(Gt,rt,U)=>{"use strict";U.d(rt,{h:()=>oe});var E=U(4482),k=U(5403);function oe(Ne,Pe){return(0,E.e)((ke,Ge)=>{let Y=0;ke.subscribe((0,k.x)(Ge,Xe=>Ne.call(Pe,Xe,Y++)&&Ge.next(Xe)))})}},590:(Gt,rt,U)=>{"use strict";U.d(rt,{P:()=>Ge});var E=U(6805),k=U(9300),oe=U(5698),Ne=U(6590),Pe=U(8068),ke=U(4671);function Ge(Y,Xe){const pe=arguments.length>=2;return Me=>Me.pipe(Y?(0,k.h)((Oe,et)=>Y(Oe,et,Me)):ke.y,(0,oe.q)(1),pe?(0,Ne.d)(Xe):(0,Pe.T)(()=>new E.K))}},4004:(Gt,rt,U)=>{"use strict";U.d(rt,{U:()=>oe});var E=U(4482),k=U(5403);function oe(Ne,Pe){return(0,E.e)((ke,Ge)=>{let Y=0;ke.subscribe((0,k.x)(Ge,Xe=>{Ge.next(Ne.call(Pe,Xe,Y++))}))})}},8189:(Gt,rt,U)=>{"use strict";U.d(rt,{J:()=>oe});var E=U(5577),k=U(4671);function oe(Ne=1/0){return(0,E.z)(k.y,Ne)}},5577:(Gt,rt,U)=>{"use strict";U.d(rt,{z:()=>Y});var E=U(4004),k=U(8421),oe=U(4482),Ne=U(9672),Pe=U(5403),Ge=U(576);function Y(Xe,pe,Me=1/0){return(0,Ge.m)(pe)?Y((Oe,et)=>(0,E.U)((Je,ft)=>pe(Oe,Je,et,ft))((0,k.Xf)(Xe(Oe,et))),Me):("number"==typeof pe&&(Me=pe),(0,oe.e)((Oe,et)=>function ke(Xe,pe,Me,Oe,et,Je,ft,it){const He=[];let $e=0,Tt=0,ie=!1;const ne=()=>{ie&&!He.length&&!$e&&pe.complete()},be=gt=>$e<Oe?Ke(gt):He.push(gt),Ke=gt=>{Je&&pe.next(gt),$e++;let xt=!1;(0,k.Xf)(Me(gt,Tt++)).subscribe((0,Pe.x)(pe,X=>{null==et||et(X),Je?be(X):pe.next(X)},()=>{xt=!0},void 0,()=>{if(xt)try{for($e--;He.length&&$e<Oe;){const X=He.shift();ft?(0,Ne.f)(pe,ft,()=>Ke(X)):Ke(X)}ne()}catch(X){pe.error(X)}}))};return Xe.subscribe((0,Pe.x)(pe,be,()=>{ie=!0,ne()})),()=>{null==it||it()}}(Oe,et,Xe,Me)))}},5363:(Gt,rt,U)=>{"use strict";U.d(rt,{Q:()=>Ne});var E=U(9672),k=U(4482),oe=U(5403);function Ne(Pe,ke=0){return(0,k.e)((Ge,Y)=>{Ge.subscribe((0,oe.x)(Y,Xe=>(0,E.f)(Y,Pe,()=>Y.next(Xe),ke),()=>(0,E.f)(Y,Pe,()=>Y.complete(),ke),Xe=>(0,E.f)(Y,Pe,()=>Y.error(Xe),ke)))})}},5026:(Gt,rt,U)=>{"use strict";U.d(rt,{R:()=>Ne});var E=U(4482),k=U(5403);function oe(Pe,ke,Ge,Y,Xe){return(pe,Me)=>{let Oe=Ge,et=ke,Je=0;pe.subscribe((0,k.x)(Me,ft=>{const it=Je++;et=Oe?Pe(et,ft,it):(Oe=!0,ft),Y&&Me.next(et)},Xe&&(()=>{Oe&&Me.next(et),Me.complete()})))}}function Ne(Pe,ke){return(0,E.e)(oe(Pe,ke,arguments.length>=2,!0))}},3099:(Gt,rt,U)=>{"use strict";U.d(rt,{B:()=>ke});var E=U(8996),k=U(5698),oe=U(7579),Ne=U(930),Pe=U(4482);function ke(Y={}){const{connector:Xe=(()=>new oe.x),resetOnError:pe=!0,resetOnComplete:Me=!0,resetOnRefCountZero:Oe=!0}=Y;return et=>{let Je=null,ft=null,it=null,He=0,$e=!1,Tt=!1;const ie=()=>{null==ft||ft.unsubscribe(),ft=null},ne=()=>{ie(),Je=it=null,$e=Tt=!1},be=()=>{const Ke=Je;ne(),null==Ke||Ke.unsubscribe()};return(0,Pe.e)((Ke,gt)=>{He++,!Tt&&!$e&&ie();const xt=it=null!=it?it:Xe();gt.add(()=>{He--,0===He&&!Tt&&!$e&&(ft=Ge(be,Oe))}),xt.subscribe(gt),Je||(Je=new Ne.Hp({next:X=>xt.next(X),error:X=>{Tt=!0,ie(),ft=Ge(ne,pe,X),xt.error(X)},complete:()=>{$e=!0,ie(),ft=Ge(ne,Me),xt.complete()}}),(0,E.D)(Ke).subscribe(Je))})(et)}}function Ge(Y,Xe,...pe){return!0===Xe?(Y(),null):!1===Xe?null:Xe(...pe).pipe((0,k.q)(1)).subscribe(()=>Y())}},8675:(Gt,rt,U)=>{"use strict";U.d(rt,{O:()=>Ne});var E=U(7272),k=U(3269),oe=U(4482);function Ne(...Pe){const ke=(0,k.yG)(Pe);return(0,oe.e)((Ge,Y)=>{(ke?(0,E.z)(Pe,Ge,ke):(0,E.z)(Pe,Ge)).subscribe(Y)})}},9468:(Gt,rt,U)=>{"use strict";U.d(rt,{R:()=>k});var E=U(4482);function k(oe,Ne=0){return(0,E.e)((Pe,ke)=>{ke.add(oe.schedule(()=>Pe.subscribe(ke),Ne))})}},3900:(Gt,rt,U)=>{"use strict";U.d(rt,{w:()=>Ne});var E=U(8421),k=U(4482),oe=U(5403);function Ne(Pe,ke){return(0,k.e)((Ge,Y)=>{let Xe=null,pe=0,Me=!1;const Oe=()=>Me&&!Xe&&Y.complete();Ge.subscribe((0,oe.x)(Y,et=>{null==Xe||Xe.unsubscribe();let Je=0;const ft=pe++;(0,E.Xf)(Pe(et,ft)).subscribe(Xe=(0,oe.x)(Y,it=>Y.next(ke?ke(et,it,ft,Je++):it),()=>{Xe=null,Oe()}))},()=>{Me=!0,Oe()}))})}},5698:(Gt,rt,U)=>{"use strict";U.d(rt,{q:()=>Ne});var E=U(515),k=U(4482),oe=U(5403);function Ne(Pe){return Pe<=0?()=>E.E:(0,k.e)((ke,Ge)=>{let Y=0;ke.subscribe((0,oe.x)(Ge,Xe=>{++Y<=Pe&&(Ge.next(Xe),Pe<=Y&&Ge.complete())}))})}},8505:(Gt,rt,U)=>{"use strict";U.d(rt,{b:()=>Pe});var E=U(576),k=U(4482),oe=U(5403),Ne=U(4671);function Pe(ke,Ge,Y){const Xe=(0,E.m)(ke)||Ge||Y?{next:ke,error:Ge,complete:Y}:ke;return Xe?(0,k.e)((pe,Me)=>{var Oe;null===(Oe=Xe.subscribe)||void 0===Oe||Oe.call(Xe);let et=!0;pe.subscribe((0,oe.x)(Me,Je=>{var ft;null===(ft=Xe.next)||void 0===ft||ft.call(Xe,Je),Me.next(Je)},()=>{var Je;et=!1,null===(Je=Xe.complete)||void 0===Je||Je.call(Xe),Me.complete()},Je=>{var ft;et=!1,null===(ft=Xe.error)||void 0===ft||ft.call(Xe,Je),Me.error(Je)},()=>{var Je,ft;et&&(null===(Je=Xe.unsubscribe)||void 0===Je||Je.call(Xe)),null===(ft=Xe.finalize)||void 0===ft||ft.call(Xe)}))}):Ne.y}},8068:(Gt,rt,U)=>{"use strict";U.d(rt,{T:()=>Ne});var E=U(6805),k=U(4482),oe=U(5403);function Ne(ke=Pe){return(0,k.e)((Ge,Y)=>{let Xe=!1;Ge.subscribe((0,oe.x)(Y,pe=>{Xe=!0,Y.next(pe)},()=>Xe?Y.complete():Y.error(ke())))})}function Pe(){return new E.K}},4408:(Gt,rt,U)=>{"use strict";U.d(rt,{o:()=>Pe});var E=U(727);class k extends E.w0{constructor(Ge,Y){super()}schedule(Ge,Y=0){return this}}const oe={setInterval(ke,Ge,...Y){const{delegate:Xe}=oe;return(null==Xe?void 0:Xe.setInterval)?Xe.setInterval(ke,Ge,...Y):setInterval(ke,Ge,...Y)},clearInterval(ke){const{delegate:Ge}=oe;return((null==Ge?void 0:Ge.clearInterval)||clearInterval)(ke)},delegate:void 0};var Ne=U(8737);class Pe extends k{constructor(Ge,Y){super(Ge,Y),this.scheduler=Ge,this.work=Y,this.pending=!1}schedule(Ge,Y=0){if(this.closed)return this;this.state=Ge;const Xe=this.id,pe=this.scheduler;return null!=Xe&&(this.id=this.recycleAsyncId(pe,Xe,Y)),this.pending=!0,this.delay=Y,this.id=this.id||this.requestAsyncId(pe,this.id,Y),this}requestAsyncId(Ge,Y,Xe=0){return oe.setInterval(Ge.flush.bind(Ge,this),Xe)}recycleAsyncId(Ge,Y,Xe=0){if(null!=Xe&&this.delay===Xe&&!1===this.pending)return Y;oe.clearInterval(Y)}execute(Ge,Y){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Xe=this._execute(Ge,Y);if(Xe)return Xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ge,Y){let pe,Xe=!1;try{this.work(Ge)}catch(Me){Xe=!0,pe=Me||new Error("Scheduled action threw falsy error")}if(Xe)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:Ge,scheduler:Y}=this,{actions:Xe}=Y;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ne.P)(Xe,this),null!=Ge&&(this.id=this.recycleAsyncId(Y,Ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(Gt,rt,U)=>{"use strict";U.d(rt,{v:()=>oe});var E=U(6063);class k{constructor(Pe,ke=k.now){this.schedulerActionCtor=Pe,this.now=ke}schedule(Pe,ke=0,Ge){return new this.schedulerActionCtor(this,Pe).schedule(Ge,ke)}}k.now=E.l.now;class oe extends k{constructor(Pe,ke=k.now){super(Pe,ke),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Pe){const{actions:ke}=this;if(this._active)return void ke.push(Pe);let Ge;this._active=!0;do{if(Ge=Pe.execute(Pe.state,Pe.delay))break}while(Pe=ke.shift());if(this._active=!1,Ge){for(;Pe=ke.shift();)Pe.unsubscribe();throw Ge}}}},4986:(Gt,rt,U)=>{"use strict";U.d(rt,{P:()=>Ne,z:()=>oe});var E=U(4408);const oe=new(U(7565).v)(E.o),Ne=oe},6063:(Gt,rt,U)=>{"use strict";U.d(rt,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(Gt,rt,U)=>{"use strict";U.d(rt,{z:()=>E});const E={setTimeout(k,oe,...Ne){const{delegate:Pe}=E;return(null==Pe?void 0:Pe.setTimeout)?Pe.setTimeout(k,oe,...Ne):setTimeout(k,oe,...Ne)},clearTimeout(k){const{delegate:oe}=E;return((null==oe?void 0:oe.clearTimeout)||clearTimeout)(k)},delegate:void 0}},2202:(Gt,rt,U)=>{"use strict";U.d(rt,{h:()=>k});const k=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Gt,rt,U)=>{"use strict";U.d(rt,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Gt,rt,U)=>{"use strict";U.d(rt,{K:()=>k});const k=(0,U(3888).d)(oe=>function(){oe(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Gt,rt,U)=>{"use strict";U.d(rt,{_6:()=>ke,jO:()=>Ne,yG:()=>Pe});var E=U(576),k=U(3532);function oe(Ge){return Ge[Ge.length-1]}function Ne(Ge){return(0,E.m)(oe(Ge))?Ge.pop():void 0}function Pe(Ge){return(0,k.K)(oe(Ge))?Ge.pop():void 0}function ke(Ge,Y){return"number"==typeof oe(Ge)?Ge.pop():Y}},4742:(Gt,rt,U)=>{"use strict";U.d(rt,{D:()=>Pe});const{isArray:E}=Array,{getPrototypeOf:k,prototype:oe,keys:Ne}=Object;function Pe(Ge){if(1===Ge.length){const Y=Ge[0];if(E(Y))return{args:Y,keys:null};if(function ke(Ge){return Ge&&"object"==typeof Ge&&k(Ge)===oe}(Y)){const Xe=Ne(Y);return{args:Xe.map(pe=>Y[pe]),keys:Xe}}}return{args:Ge,keys:null}}},8737:(Gt,rt,U)=>{"use strict";function E(k,oe){if(k){const Ne=k.indexOf(oe);0<=Ne&&k.splice(Ne,1)}}U.d(rt,{P:()=>E})},3888:(Gt,rt,U)=>{"use strict";function E(k){const Ne=k(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return Ne.prototype=Object.create(Error.prototype),Ne.prototype.constructor=Ne,Ne}U.d(rt,{d:()=>E})},1810:(Gt,rt,U)=>{"use strict";function E(k,oe){return k.reduce((Ne,Pe,ke)=>(Ne[Pe]=oe[ke],Ne),{})}U.d(rt,{n:()=>E})},2806:(Gt,rt,U)=>{"use strict";U.d(rt,{O:()=>Ne,x:()=>oe});var E=U(2416);let k=null;function oe(Pe){if(E.v.useDeprecatedSynchronousErrorHandling){const ke=!k;if(ke&&(k={errorThrown:!1,error:null}),Pe(),ke){const{errorThrown:Ge,error:Y}=k;if(k=null,Ge)throw Y}}else Pe()}function Ne(Pe){E.v.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=Pe)}},9672:(Gt,rt,U)=>{"use strict";function E(k,oe,Ne,Pe=0,ke=!1){const Ge=oe.schedule(function(){Ne(),ke?k.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(k.add(Ge),!ke)return Ge}U.d(rt,{f:()=>E})},4671:(Gt,rt,U)=>{"use strict";function E(k){return k}U.d(rt,{y:()=>E})},1144:(Gt,rt,U)=>{"use strict";U.d(rt,{z:()=>E});const E=k=>k&&"number"==typeof k.length&&"function"!=typeof k},2206:(Gt,rt,U)=>{"use strict";U.d(rt,{D:()=>k});var E=U(576);function k(oe){return Symbol.asyncIterator&&(0,E.m)(null==oe?void 0:oe[Symbol.asyncIterator])}},576:(Gt,rt,U)=>{"use strict";function E(k){return"function"==typeof k}U.d(rt,{m:()=>E})},3670:(Gt,rt,U)=>{"use strict";U.d(rt,{c:()=>oe});var E=U(8822),k=U(576);function oe(Ne){return(0,k.m)(Ne[E.L])}},6495:(Gt,rt,U)=>{"use strict";U.d(rt,{T:()=>oe});var E=U(2202),k=U(576);function oe(Ne){return(0,k.m)(null==Ne?void 0:Ne[E.h])}},8239:(Gt,rt,U)=>{"use strict";U.d(rt,{t:()=>k});var E=U(576);function k(oe){return(0,E.m)(null==oe?void 0:oe.then)}},3260:(Gt,rt,U)=>{"use strict";U.d(rt,{L:()=>Ne,Q:()=>oe});var E=U(655),k=U(576);function oe(Pe){return(0,E.FC)(this,arguments,function*(){const Ge=Pe.getReader();try{for(;;){const{value:Y,done:Xe}=yield(0,E.qq)(Ge.read());if(Xe)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(Y)}}finally{Ge.releaseLock()}})}function Ne(Pe){return(0,k.m)(null==Pe?void 0:Pe.getReader)}},3532:(Gt,rt,U)=>{"use strict";U.d(rt,{K:()=>k});var E=U(576);function k(oe){return oe&&(0,E.m)(oe.schedule)}},4482:(Gt,rt,U)=>{"use strict";U.d(rt,{A:()=>k,e:()=>oe});var E=U(576);function k(Ne){return(0,E.m)(null==Ne?void 0:Ne.lift)}function oe(Ne){return Pe=>{if(k(Pe))return Pe.lift(function(ke){try{return Ne(ke,this)}catch(Ge){this.error(Ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Gt,rt,U)=>{"use strict";U.d(rt,{Z:()=>Ne});var E=U(4004);const{isArray:k}=Array;function Ne(Pe){return(0,E.U)(ke=>function oe(Pe,ke){return k(ke)?Pe(...ke):Pe(ke)}(Pe,ke))}},5032:(Gt,rt,U)=>{"use strict";function E(){}U.d(rt,{Z:()=>E})},9635:(Gt,rt,U)=>{"use strict";U.d(rt,{U:()=>oe,z:()=>k});var E=U(4671);function k(...Ne){return oe(Ne)}function oe(Ne){return 0===Ne.length?E.y:1===Ne.length?Ne[0]:function(ke){return Ne.reduce((Ge,Y)=>Y(Ge),ke)}}},7849:(Gt,rt,U)=>{"use strict";U.d(rt,{h:()=>oe});var E=U(2416),k=U(3410);function oe(Ne){k.z.setTimeout(()=>{const{onUnhandledError:Pe}=E.v;if(!Pe)throw Ne;Pe(Ne)})}},4532:(Gt,rt,U)=>{"use strict";function E(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(rt,{z:()=>E})},8099:Gt=>{Gt.exports=function rt(U,E){var k,oe=null;try{k=JSON.parse(U,E)}catch(Ne){oe=Ne}return[oe,k]}},3871:function(Gt){var U,E,k,oe,Ne;U=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,E=/^(?=([^\/?#]*))\1([^]*)$/,k=/(?:\/|^)\.(?=\/)/g,oe=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Gt.exports=Ne={buildAbsoluteURL:function(Pe,ke,Ge){if(Ge=Ge||{},Pe=Pe.trim(),!(ke=ke.trim())){if(!Ge.alwaysNormalize)return Pe;var Y=Ne.parseURL(Pe);if(!Y)throw new Error("Error trying to parse base URL.");return Y.path=Ne.normalizePath(Y.path),Ne.buildURLFromParts(Y)}var Xe=Ne.parseURL(ke);if(!Xe)throw new Error("Error trying to parse relative URL.");if(Xe.scheme)return Ge.alwaysNormalize?(Xe.path=Ne.normalizePath(Xe.path),Ne.buildURLFromParts(Xe)):ke;var pe=Ne.parseURL(Pe);if(!pe)throw new Error("Error trying to parse base URL.");if(!pe.netLoc&&pe.path&&"/"!==pe.path[0]){var Me=E.exec(pe.path);pe.netLoc=Me[1],pe.path=Me[2]}pe.netLoc&&!pe.path&&(pe.path="/");var Oe={scheme:pe.scheme,netLoc:Xe.netLoc,path:null,params:Xe.params,query:Xe.query,fragment:Xe.fragment};if(!Xe.netLoc&&(Oe.netLoc=pe.netLoc,"/"!==Xe.path[0]))if(Xe.path){var et=pe.path,Je=et.substring(0,et.lastIndexOf("/")+1)+Xe.path;Oe.path=Ne.normalizePath(Je)}else Oe.path=pe.path,Xe.params||(Oe.params=pe.params,Xe.query||(Oe.query=pe.query));return null===Oe.path&&(Oe.path=Ge.alwaysNormalize?Ne.normalizePath(Xe.path):Xe.path),Ne.buildURLFromParts(Oe)},parseURL:function(Pe){var ke=U.exec(Pe);return ke?{scheme:ke[1]||"",netLoc:ke[2]||"",path:ke[3]||"",params:ke[4]||"",query:ke[5]||"",fragment:ke[6]||""}:null},normalizePath:function(Pe){for(Pe=Pe.split("").reverse().join("").replace(k,"");Pe.length!==(Pe=Pe.replace(oe,"")).length;);return Pe.split("").reverse().join("")},buildURLFromParts:function(Pe){return Pe.scheme+Pe.netLoc+Pe.path+Pe.params+Pe.query+Pe.fragment}}},3629:(Gt,rt,U)=>{var E=U(9226),k=Gt.exports={WebVTT:U(8318),VTTCue:U(5713),VTTRegion:U(3872)};E.vttjs=k,E.WebVTT=k.WebVTT;var oe=k.VTTCue,Ne=k.VTTRegion,Pe=E.VTTCue,ke=E.VTTRegion;k.shim=function(){E.VTTCue=oe,E.VTTRegion=Ne},k.restore=function(){E.VTTCue=Pe,E.VTTRegion=ke},E.VTTCue||k.shim()},8318:(Gt,rt,U)=>{var E=U(1421),k=Object.create||function(){function X(){}return function(he){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return X.prototype=he,new X}}();function oe(X,he){this.name="ParsingError",this.code=X.code,this.message=he||X.message}function Ne(X){function he(Ae,Ee,je,We){return 3600*(0|Ae)+60*(0|Ee)+(0|je)+(0|We)/1e3}var J=X.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return J?J[3]?he(J[1],J[2],J[3].replace(":",""),J[4]):J[1]>59?he(J[1],J[2],0,J[4]):he(0,J[1],J[2],J[4]):null}function Pe(){this.values=k(null)}function ke(X,he,J,Ae){var Ee=Ae?X.split(Ae):[X];for(var je in Ee)if("string"==typeof Ee[je]){var We=Ee[je].split(J);2===We.length&&he(We[0],We[1])}}function Ge(X,he,J){var Ae=X;function Ee(){var St=Ne(X);if(null===St)throw new oe(oe.Errors.BadTimeStamp,"Malformed timestamp: "+Ae);return X=X.replace(/^[^\sa-zA-Z-]+/,""),St}function We(){X=X.replace(/^\s+/,"")}if(We(),he.startTime=Ee(),We(),"--\x3e"!==X.substr(0,3))throw new oe(oe.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+Ae);X=X.substr(3),We(),he.endTime=Ee(),We(),function je(St,ct){var wt=new Pe;ke(St,function(Dt,Et){switch(Dt){case"region":for(var $t=J.length-1;$t>=0;$t--)if(J[$t].id===Et){wt.set(Dt,J[$t].region);break}break;case"vertical":wt.alt(Dt,Et,["rl","lr"]);break;case"line":var cn=Et.split(","),Yt=cn[0];wt.integer(Dt,Yt),wt.percent(Dt,Yt)&&wt.set("snapToLines",!1),wt.alt(Dt,Yt,["auto"]),2===cn.length&&wt.alt("lineAlign",cn[1],["start","center","end"]);break;case"position":cn=Et.split(","),wt.percent(Dt,cn[0]),2===cn.length&&wt.alt("positionAlign",cn[1],["start","center","end"]);break;case"size":wt.percent(Dt,Et);break;case"align":wt.alt(Dt,Et,["start","center","end","left","right"])}},/:/,/\s/),ct.region=wt.get("region",null),ct.vertical=wt.get("vertical","");try{ct.line=wt.get("line","auto")}catch(Dt){}ct.lineAlign=wt.get("lineAlign","start"),ct.snapToLines=wt.get("snapToLines",!0),ct.size=wt.get("size",100);try{ct.align=wt.get("align","center")}catch(Dt){ct.align=wt.get("align","middle")}try{ct.position=wt.get("position","auto")}catch(Dt){ct.position=wt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},ct.align)}ct.positionAlign=wt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},ct.align)}(X,he)}(oe.prototype=k(Error.prototype)).constructor=oe,oe.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Pe.prototype={set:function(X,he){!this.get(X)&&""!==he&&(this.values[X]=he)},get:function(X,he,J){return J?this.has(X)?this.values[X]:he[J]:this.has(X)?this.values[X]:he},has:function(X){return X in this.values},alt:function(X,he,J){for(var Ae=0;Ae<J.length;++Ae)if(he===J[Ae]){this.set(X,he);break}},integer:function(X,he){/^-?\d+$/.test(he)&&this.set(X,parseInt(he,10))},percent:function(X,he){return!!(he.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(he=parseFloat(he),he>=0&&he<=100))&&(this.set(X,he),!0)}};var Y=E.createElement&&E.createElement("textarea"),Xe={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},pe={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Me={v:"title",lang:"lang"},Oe={rt:"ruby"};function et(X,he){function J(){if(!he)return null;var Nt=he.match(/^([^<]*)(<[^>]*>?)?/);return function Yt(fn){return he=he.substr(fn.length),fn}(Nt[1]?Nt[1]:Nt[2])}function Ae(Yt){return Y.innerHTML=Yt,Yt=Y.textContent,Y.textContent="",Yt}function je(Yt,Nt){var fn=Xe[Yt];if(!fn)return null;var Ln=X.document.createElement(fn),Vn=Me[Yt];return Vn&&Nt&&(Ln[Vn]=Nt.trim()),Ln}for(var ct,We=X.document.createElement("div"),St=We,wt=[];null!==(ct=J());)if("<"!==ct[0])St.appendChild(X.document.createTextNode(Ae(ct)));else{if("/"===ct[1]){wt.length&&wt[wt.length-1]===ct.substr(2).replace(">","")&&(wt.pop(),St=St.parentNode);continue}var Et,Dt=Ne(ct.substr(1,ct.length-2));if(Dt){Et=X.document.createProcessingInstruction("timestamp",Dt),St.appendChild(Et);continue}var $t=ct.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!$t||!(Et=je($t[1],$t[3]))||Oe[(Nt=Et).localName]&&Oe[Nt.localName]!==St.localName)continue;if($t[2]){var cn=$t[2].split(".");cn.forEach(function(Yt){var Nt=/^bg_/.test(Yt),fn=Nt?Yt.slice(3):Yt;pe.hasOwnProperty(fn)&&(Et.style[Nt?"background-color":"color"]=pe[fn])}),Et.className=cn.join(" ")}wt.push($t[1]),St.appendChild(Et),St=Et}var Nt;return We}var Je=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function ft(X){for(var he=0;he<Je.length;he++){var J=Je[he];if(X>=J[0]&&X<=J[1])return!0}return!1}function it(X){var he=[],J="";if(!X||!X.childNodes)return"ltr";function Ee(St,ct){for(var wt=ct.childNodes.length-1;wt>=0;wt--)St.push(ct.childNodes[wt])}function je(St){if(!St||!St.length)return null;var ct=St.pop(),wt=ct.textContent||ct.innerText;if(wt){var Dt=wt.match(/^.*(\n|\r)/);return Dt?(St.length=0,Dt[0]):wt}return"ruby"===ct.tagName?je(St):ct.childNodes?(Ee(St,ct),je(St)):void 0}for(Ee(he,X);J=je(he);)for(var We=0;We<J.length;We++)if(ft(J.charCodeAt(We)))return"rtl";return"ltr"}function $e(){}function Tt(X,he,J){$e.call(this),this.cue=he,this.cueDiv=et(X,he.text);var Ae={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===he.vertical?"horizontal-tb":"lr"===he.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Ae,this.cueDiv),this.div=X.document.createElement("div"),Ae={direction:it(this.cueDiv),writingMode:""===he.vertical?"horizontal-tb":"lr"===he.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===he.align?"center":he.align,font:J.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Ae),this.div.appendChild(this.cueDiv);var Ee=0;switch(he.positionAlign){case"start":Ee=he.position;break;case"center":Ee=he.position-he.size/2;break;case"end":Ee=he.position-he.size}this.applyStyles(""===he.vertical?{left:this.formatStyle(Ee,"%"),width:this.formatStyle(he.size,"%")}:{top:this.formatStyle(Ee,"%"),height:this.formatStyle(he.size,"%")}),this.move=function(je){this.applyStyles({top:this.formatStyle(je.top,"px"),bottom:this.formatStyle(je.bottom,"px"),left:this.formatStyle(je.left,"px"),right:this.formatStyle(je.right,"px"),height:this.formatStyle(je.height,"px"),width:this.formatStyle(je.width,"px")})}}function ie(X){var he,J,Ae,Ee;if(X.div){J=X.div.offsetHeight,Ae=X.div.offsetWidth,Ee=X.div.offsetTop;var je=(je=X.div.childNodes)&&(je=je[0])&&je.getClientRects&&je.getClientRects();X=X.div.getBoundingClientRect(),he=je?Math.max(je[0]&&je[0].height||0,X.height/je.length):0}this.left=X.left,this.right=X.right,this.top=X.top||Ee,this.height=X.height||J,this.bottom=X.bottom||Ee+(X.height||J),this.width=X.width||Ae,this.lineHeight=void 0!==he?he:X.lineHeight}function ne(X,he,J,Ae){var je=new ie(he),We=he.cue,St=function He(X){if("number"==typeof X.line&&(X.snapToLines||X.line>=0&&X.line<=100))return X.line;if(!X.track||!X.track.textTrackList||!X.track.textTrackList.mediaElement)return-1;for(var he=X.track,J=he.textTrackList,Ae=0,Ee=0;Ee<J.length&&J[Ee]!==he;Ee++)"showing"===J[Ee].mode&&Ae++;return-1*++Ae}(We),ct=[];if(We.snapToLines){var wt;switch(We.vertical){case"":ct=["+y","-y"],wt="height";break;case"rl":ct=["+x","-x"],wt="width";break;case"lr":ct=["-x","+x"],wt="width"}var Dt=je.lineHeight,Et=Dt*Math.round(St),$t=J[wt]+Dt,cn=ct[0];Math.abs(Et)>$t&&(Et=Et<0?-1:1,Et*=Math.ceil($t/Dt)*Dt),St<0&&(Et+=""===We.vertical?J.height:J.width,ct=ct.reverse()),je.move(cn,Et)}else{var Yt=je.lineHeight/J.height*100;switch(We.lineAlign){case"center":St-=Yt/2;break;case"end":St-=Yt}switch(We.vertical){case"":he.applyStyles({top:he.formatStyle(St,"%")});break;case"rl":he.applyStyles({left:he.formatStyle(St,"%")});break;case"lr":he.applyStyles({right:he.formatStyle(St,"%")})}ct=["+y","-x","+x","-y"],je=new ie(he)}var Nt=function Ee(fn,Ln){for(var Vn,Ar=new ie(fn),vr=1,Cr=0;Cr<Ln.length;Cr++){for(;fn.overlapsOppositeAxis(J,Ln[Cr])||fn.within(J)&&fn.overlapsAny(Ae);)fn.move(Ln[Cr]);if(fn.within(J))return fn;var kr=fn.intersectPercentage(J);vr>kr&&(Vn=new ie(fn),vr=kr),fn=new ie(Ar)}return Vn||Ar}(je,ct);he.move(Nt.toCSSCompatValues(J))}function be(){}$e.prototype.applyStyles=function(X,he){for(var J in he=he||this.div,X)X.hasOwnProperty(J)&&(he.style[J]=X[J])},$e.prototype.formatStyle=function(X,he){return 0===X?0:X+he},(Tt.prototype=k($e.prototype)).constructor=Tt,ie.prototype.move=function(X,he){switch(he=void 0!==he?he:this.lineHeight,X){case"+x":this.left+=he,this.right+=he;break;case"-x":this.left-=he,this.right-=he;break;case"+y":this.top+=he,this.bottom+=he;break;case"-y":this.top-=he,this.bottom-=he}},ie.prototype.overlaps=function(X){return this.left<X.right&&this.right>X.left&&this.top<X.bottom&&this.bottom>X.top},ie.prototype.overlapsAny=function(X){for(var he=0;he<X.length;he++)if(this.overlaps(X[he]))return!0;return!1},ie.prototype.within=function(X){return this.top>=X.top&&this.bottom<=X.bottom&&this.left>=X.left&&this.right<=X.right},ie.prototype.overlapsOppositeAxis=function(X,he){switch(he){case"+x":return this.left<X.left;case"-x":return this.right>X.right;case"+y":return this.top<X.top;case"-y":return this.bottom>X.bottom}},ie.prototype.intersectPercentage=function(X){return Math.max(0,Math.min(this.right,X.right)-Math.max(this.left,X.left))*Math.max(0,Math.min(this.bottom,X.bottom)-Math.max(this.top,X.top))/(this.height*this.width)},ie.prototype.toCSSCompatValues=function(X){return{top:this.top-X.top,bottom:X.bottom-this.bottom,left:this.left-X.left,right:X.right-this.right,height:this.height,width:this.width}},ie.getSimpleBoxPosition=function(X){var he=X.div?X.div.offsetHeight:X.tagName?X.offsetHeight:0,J=X.div?X.div.offsetWidth:X.tagName?X.offsetWidth:0,Ae=X.div?X.div.offsetTop:X.tagName?X.offsetTop:0;return{left:(X=X.div?X.div.getBoundingClientRect():X.tagName?X.getBoundingClientRect():X).left,right:X.right,top:X.top||Ae,height:X.height||he,bottom:X.bottom||Ae+(X.height||he),width:X.width||J}},be.StringDecoder=function(){return{decode:function(X){if(!X)return"";if("string"!=typeof X)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(X))}}},be.convertCueToDOMTree=function(X,he){return X&&he?et(X,he):null},be.processCues=function(X,he,J){if(!X||!he||!J)return null;for(;J.firstChild;)J.removeChild(J.firstChild);var Ae=X.document.createElement("div");if(Ae.style.position="absolute",Ae.style.left="0",Ae.style.right="0",Ae.style.top="0",Ae.style.bottom="0",Ae.style.margin="1.5%",J.appendChild(Ae),function Ee(Dt){for(var Et=0;Et<Dt.length;Et++)if(Dt[Et].hasBeenReset||!Dt[Et].displayState)return!0;return!1}(he)){var We=[],St=ie.getSimpleBoxPosition(Ae),wt={font:Math.round(.05*St.height*100)/100+"px sans-serif"};!function(){for(var Dt,Et,$t=0;$t<he.length;$t++)Dt=new Tt(X,Et=he[$t],wt),Ae.appendChild(Dt.div),ne(0,Dt,St,We),Et.displayState=Dt.div,We.push(ie.getSimpleBoxPosition(Dt))}()}else for(var je=0;je<he.length;je++)Ae.appendChild(he[je].displayState)},(be.Parser=function(X,he,J){J||(J=he,he={}),he||(he={}),this.window=X,this.vttjs=he,this.state="INITIAL",this.buffer="",this.decoder=J||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(X){if(!(X instanceof oe))throw X;this.onparsingerror&&this.onparsingerror(X)},parse:function(X){var Dt,he=this;function J(){for(var Dt=he.buffer,Et=0;Et<Dt.length&&"\r"!==Dt[Et]&&"\n"!==Dt[Et];)++Et;var $t=Dt.substr(0,Et);return"\r"===Dt[Et]&&++Et,"\n"===Dt[Et]&&++Et,he.buffer=Dt.substr(Et),$t}X&&(he.buffer+=he.decoder.decode(X,{stream:!0}));try{var We;if("INITIAL"===he.state){if(!/\r\n|\n/.test(he.buffer))return this;var St=(We=J()).match(/^WEBVTT([ \t].*)?$/);if(!St||!St[0])throw new oe(oe.Errors.BadSignature);he.state="HEADER"}for(var ct=!1;he.buffer;){if(!/\r\n|\n/.test(he.buffer))return this;switch(ct?ct=!1:We=J(),he.state){case"HEADER":/:/.test(We)?(Dt=We).match(/X-TIMESTAMP-MAP/)?ke(Dt,function(Et,$t){"X-TIMESTAMP-MAP"===Et&&function Ee(Dt){var Et=new Pe;ke(Dt,function($t,cn){switch($t){case"MPEGT":Et.integer($t+"S",cn);break;case"LOCA":Et.set($t+"L",Ne(cn))}},/[^\d]:/,/,/),he.ontimestampmap&&he.ontimestampmap({MPEGTS:Et.get("MPEGTS"),LOCAL:Et.get("LOCAL")})}($t)},/=/):ke(Dt,function(Et,$t){"Region"===Et&&function Ae(Dt){var Et=new Pe;if(ke(Dt,function(cn,Yt){switch(cn){case"id":Et.set(cn,Yt);break;case"width":Et.percent(cn,Yt);break;case"lines":Et.integer(cn,Yt);break;case"regionanchor":case"viewportanchor":var Nt=Yt.split(",");if(2!==Nt.length)break;var fn=new Pe;if(fn.percent("x",Nt[0]),fn.percent("y",Nt[1]),!fn.has("x")||!fn.has("y"))break;Et.set(cn+"X",fn.get("x")),Et.set(cn+"Y",fn.get("y"));break;case"scroll":Et.alt(cn,Yt,["up"])}},/=/,/\s/),Et.has("id")){var $t=new(he.vttjs.VTTRegion||he.window.VTTRegion);$t.width=Et.get("width",100),$t.lines=Et.get("lines",3),$t.regionAnchorX=Et.get("regionanchorX",0),$t.regionAnchorY=Et.get("regionanchorY",100),$t.viewportAnchorX=Et.get("viewportanchorX",0),$t.viewportAnchorY=Et.get("viewportanchorY",100),$t.scroll=Et.get("scroll",""),he.onregion&&he.onregion($t),he.regionList.push({id:Et.get("id"),region:$t})}}($t)},/:/):We||(he.state="ID");continue;case"NOTE":We||(he.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(We)){he.state="NOTE";break}if(!We)continue;he.cue=new(he.vttjs.VTTCue||he.window.VTTCue)(0,0,"");try{he.cue.align="center"}catch(Dt){he.cue.align="middle"}if(he.state="CUE",-1===We.indexOf("--\x3e")){he.cue.id=We;continue}case"CUE":try{Ge(We,he.cue,he.regionList)}catch(Dt){he.reportOrThrowError(Dt),he.cue=null,he.state="BADCUE";continue}he.state="CUETEXT";continue;case"CUETEXT":var wt=-1!==We.indexOf("--\x3e");if(!We||wt&&(ct=!0)){he.oncue&&he.oncue(he.cue),he.cue=null,he.state="ID";continue}he.cue.text&&(he.cue.text+="\n"),he.cue.text+=We.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":We||(he.state="ID");continue}}}catch(Dt){he.reportOrThrowError(Dt),"CUETEXT"===he.state&&he.cue&&he.oncue&&he.oncue(he.cue),he.cue=null,he.state="INITIAL"===he.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var X=this;try{if(X.buffer+=X.decoder.decode(),(X.cue||"HEADER"===X.state)&&(X.buffer+="\n\n",X.parse()),"INITIAL"===X.state)throw new oe(oe.Errors.BadSignature)}catch(he){X.reportOrThrowError(he)}return X.onflush&&X.onflush(),this}},Gt.exports=be},5713:Gt=>{var U={"":1,lr:1,rl:1},E={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function oe(Pe){return"string"==typeof Pe&&!!E[Pe.toLowerCase()]&&Pe.toLowerCase()}function Ne(Pe,ke,Ge){this.hasBeenReset=!1;var Y="",Xe=!1,pe=Pe,Me=ke,Oe=Ge,et=null,Je="",ft=!0,it="auto",He="start",$e="auto",Tt="auto",ie=100,ne="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return Y},set:function(be){Y=""+be}},pauseOnExit:{enumerable:!0,get:function(){return Xe},set:function(be){Xe=!!be}},startTime:{enumerable:!0,get:function(){return pe},set:function(be){if("number"!=typeof be)throw new TypeError("Start time must be set to a number.");pe=be,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Me},set:function(be){if("number"!=typeof be)throw new TypeError("End time must be set to a number.");Me=be,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Oe},set:function(be){Oe=""+be,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return et},set:function(be){et=be,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Je},set:function(be){var Ke=function k(Pe){return"string"==typeof Pe&&!!U[Pe.toLowerCase()]&&Pe.toLowerCase()}(be);if(!1===Ke)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Je=Ke,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return ft},set:function(be){ft=!!be,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return it},set:function(be){if("number"!=typeof be&&"auto"!==be)throw new SyntaxError("Line: an invalid number or illegal string was specified.");it=be,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return He},set:function(be){var Ke=oe(be);Ke?(He=Ke,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return $e},set:function(be){if(be<0||be>100)throw new Error("Position must be between 0 and 100.");$e=be,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Tt},set:function(be){var Ke=oe(be);Ke?(Tt=Ke,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return ie},set:function(be){if(be<0||be>100)throw new Error("Size must be between 0 and 100.");ie=be,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return ne},set:function(be){var Ke=oe(be);if(!Ke)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");ne=Ke,this.hasBeenReset=!0}}}),this.displayState=void 0}Ne.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Gt.exports=Ne},3872:Gt=>{var rt={"":!0,up:!0};function E(oe){return"number"==typeof oe&&oe>=0&&oe<=100}Gt.exports=function k(){var oe=100,Ne=3,Pe=0,ke=100,Ge=0,Y=100,Xe="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return oe},set:function(pe){if(!E(pe))throw new Error("Width must be between 0 and 100.");oe=pe}},lines:{enumerable:!0,get:function(){return Ne},set:function(pe){if("number"!=typeof pe)throw new TypeError("Lines must be set to a number.");Ne=pe}},regionAnchorY:{enumerable:!0,get:function(){return ke},set:function(pe){if(!E(pe))throw new Error("RegionAnchorX must be between 0 and 100.");ke=pe}},regionAnchorX:{enumerable:!0,get:function(){return Pe},set:function(pe){if(!E(pe))throw new Error("RegionAnchorY must be between 0 and 100.");Pe=pe}},viewportAnchorY:{enumerable:!0,get:function(){return Y},set:function(pe){if(!E(pe))throw new Error("ViewportAnchorY must be between 0 and 100.");Y=pe}},viewportAnchorX:{enumerable:!0,get:function(){return Ge},set:function(pe){if(!E(pe))throw new Error("ViewportAnchorX must be between 0 and 100.");Ge=pe}},scroll:{enumerable:!0,get:function(){return Xe},set:function(pe){var Me=function U(oe){return"string"==typeof oe&&!!rt[oe.toLowerCase()]&&oe.toLowerCase()}(pe);!1===Me?console.warn("Scroll: an invalid or illegal string was specified."):Xe=Me}}})}},7154:Gt=>{function rt(){return Gt.exports=rt=Object.assign||function(U){for(var E=1;E<arguments.length;E++){var k=arguments[E];for(var oe in k)Object.prototype.hasOwnProperty.call(k,oe)&&(U[oe]=k[oe])}return U},Gt.exports.__esModule=!0,Gt.exports.default=Gt.exports,rt.apply(this,arguments)}Gt.exports=rt,Gt.exports.__esModule=!0,Gt.exports.default=Gt.exports},655:(Gt,rt,U)=>{"use strict";function Ne(J,Ae){var Ee={};for(var je in J)Object.prototype.hasOwnProperty.call(J,je)&&Ae.indexOf(je)<0&&(Ee[je]=J[je]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(je=Object.getOwnPropertySymbols(J);We<je.length;We++)Ae.indexOf(je[We])<0&&Object.prototype.propertyIsEnumerable.call(J,je[We])&&(Ee[je[We]]=J[je[We]])}return Ee}function Y(J,Ae,Ee,je){return new(Ee||(Ee=Promise))(function(St,ct){function wt($t){try{Et(je.next($t))}catch(cn){ct(cn)}}function Dt($t){try{Et(je.throw($t))}catch(cn){ct(cn)}}function Et($t){$t.done?St($t.value):function We(St){return St instanceof Ee?St:new Ee(function(ct){ct(St)})}($t.value).then(wt,Dt)}Et((je=je.apply(J,Ae||[])).next())})}function He(J){return this instanceof He?(this.v=J,this):new He(J)}function $e(J,Ae,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,je=Ee.apply(J,Ae||[]),St=[];return We={},ct("next"),ct("throw"),ct("return"),We[Symbol.asyncIterator]=function(){return this},We;function ct(Yt){je[Yt]&&(We[Yt]=function(Nt){return new Promise(function(fn,Ln){St.push([Yt,Nt,fn,Ln])>1||wt(Yt,Nt)})})}function wt(Yt,Nt){try{!function Dt(Yt){Yt.value instanceof He?Promise.resolve(Yt.value.v).then(Et,$t):cn(St[0][2],Yt)}(je[Yt](Nt))}catch(fn){cn(St[0][3],fn)}}function Et(Yt){wt("next",Yt)}function $t(Yt){wt("throw",Yt)}function cn(Yt,Nt){Yt(Nt),St.shift(),St.length&&wt(St[0][0],St[0][1])}}function ie(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,Ae=J[Symbol.asyncIterator];return Ae?Ae.call(J):(J=function Oe(J){var Ae="function"==typeof Symbol&&Symbol.iterator,Ee=Ae&&J[Ae],je=0;if(Ee)return Ee.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&je>=J.length&&(J=void 0),{value:J&&J[je++],done:!J}}};throw new TypeError(Ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),Ee={},je("next"),je("throw"),je("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function je(St){Ee[St]=J[St]&&function(ct){return new Promise(function(wt,Dt){!function We(St,ct,wt,Dt){Promise.resolve(Dt).then(function(Et){St({value:Et,done:wt})},ct)}(wt,Dt,(ct=J[St](ct)).done,ct.value)})}}}U.d(rt,{FC:()=>$e,KL:()=>ie,_T:()=>Ne,mG:()=>Y,qq:()=>He})},5893:()=>{},9808:(Gt,rt,U)=>{"use strict";U.d(rt,{Do:()=>ne,EM:()=>ks,HT:()=>Pe,JF:()=>pi,K0:()=>Ge,Mx:()=>hs,O5:()=>Wr,Ov:()=>jt,PM:()=>ko,S$:()=>He,V_:()=>pe,Ye:()=>be,Zx:()=>Ci,b0:()=>ie,bD:()=>zo,ez:()=>sa,lw:()=>Y,mk:()=>ws,mr:()=>Tt,q:()=>oe,sg:()=>Ai,uU:()=>qr,w_:()=>ke});var E=U(5e3);let k=null;function oe(){return k}function Pe(Z){k||(k=Z)}class ke{}const Ge=new E.OlP("DocumentToken");let Y=(()=>{class Z{historyGo(z){throw new Error("Not implemented")}}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275prov=E.Yz7({token:Z,factory:function(){return function Xe(){return(0,E.LFG)(Me)}()},providedIn:"platform"}),Z})();const pe=new E.OlP("Location Initialized");let Me=(()=>{class Z extends Y{constructor(z){super(),this._doc=z,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oe().getBaseHref(this._doc)}onPopState(z){const Ce=oe().getGlobalEventTarget(this._doc,"window");return Ce.addEventListener("popstate",z,!1),()=>Ce.removeEventListener("popstate",z)}onHashChange(z){const Ce=oe().getGlobalEventTarget(this._doc,"window");return Ce.addEventListener("hashchange",z,!1),()=>Ce.removeEventListener("hashchange",z)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(z){this.location.pathname=z}pushState(z,Ce,ot){Oe()?this._history.pushState(z,Ce,ot):this.location.hash=ot}replaceState(z,Ce,ot){Oe()?this._history.replaceState(z,Ce,ot):this.location.hash=ot}forward(){this._history.forward()}back(){this._history.back()}historyGo(z=0){this._history.go(z)}getState(){return this._history.state}}return Z.\u0275fac=function(z){return new(z||Z)(E.LFG(Ge))},Z.\u0275prov=E.Yz7({token:Z,factory:function(){return function et(){return new Me((0,E.LFG)(Ge))}()},providedIn:"platform"}),Z})();function Oe(){return!!window.history.pushState}function Je(Z,ve){if(0==Z.length)return ve;if(0==ve.length)return Z;let z=0;return Z.endsWith("/")&&z++,ve.startsWith("/")&&z++,2==z?Z+ve.substring(1):1==z?Z+ve:Z+"/"+ve}function ft(Z){const ve=Z.match(/#|\?|$/),z=ve&&ve.index||Z.length;return Z.slice(0,z-("/"===Z[z-1]?1:0))+Z.slice(z)}function it(Z){return Z&&"?"!==Z[0]?"?"+Z:Z}let He=(()=>{class Z{historyGo(z){throw new Error("Not implemented")}}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275prov=E.Yz7({token:Z,factory:function(){return function $e(Z){const ve=(0,E.LFG)(Ge).location;return new ie((0,E.LFG)(Y),ve&&ve.origin||"")}()},providedIn:"root"}),Z})();const Tt=new E.OlP("appBaseHref");let ie=(()=>{class Z extends He{constructor(z,Ce){if(super(),this._platformLocation=z,this._removeListenerFns=[],null==Ce&&(Ce=this._platformLocation.getBaseHrefFromDOM()),null==Ce)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Ce}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}prepareExternalUrl(z){return Je(this._baseHref,z)}path(z=!1){const Ce=this._platformLocation.pathname+it(this._platformLocation.search),ot=this._platformLocation.hash;return ot&&z?`${Ce}${ot}`:Ce}pushState(z,Ce,ot,Vt){const qt=this.prepareExternalUrl(ot+it(Vt));this._platformLocation.pushState(z,Ce,qt)}replaceState(z,Ce,ot,Vt){const qt=this.prepareExternalUrl(ot+it(Vt));this._platformLocation.replaceState(z,Ce,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(z=0){var Ce,ot;null===(ot=(Ce=this._platformLocation).historyGo)||void 0===ot||ot.call(Ce,z)}}return Z.\u0275fac=function(z){return new(z||Z)(E.LFG(Y),E.LFG(Tt,8))},Z.\u0275prov=E.Yz7({token:Z,factory:Z.\u0275fac}),Z})(),ne=(()=>{class Z extends He{constructor(z,Ce){super(),this._platformLocation=z,this._baseHref="",this._removeListenerFns=[],null!=Ce&&(this._baseHref=Ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}path(z=!1){let Ce=this._platformLocation.hash;return null==Ce&&(Ce="#"),Ce.length>0?Ce.substring(1):Ce}prepareExternalUrl(z){const Ce=Je(this._baseHref,z);return Ce.length>0?"#"+Ce:Ce}pushState(z,Ce,ot,Vt){let qt=this.prepareExternalUrl(ot+it(Vt));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.pushState(z,Ce,qt)}replaceState(z,Ce,ot,Vt){let qt=this.prepareExternalUrl(ot+it(Vt));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.replaceState(z,Ce,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(z=0){var Ce,ot;null===(ot=(Ce=this._platformLocation).historyGo)||void 0===ot||ot.call(Ce,z)}}return Z.\u0275fac=function(z){return new(z||Z)(E.LFG(Y),E.LFG(Tt,8))},Z.\u0275prov=E.Yz7({token:Z,factory:Z.\u0275fac}),Z})(),be=(()=>{class Z{constructor(z,Ce){this._subject=new E.vpe,this._urlChangeListeners=[],this._platformStrategy=z;const ot=this._platformStrategy.getBaseHref();this._platformLocation=Ce,this._baseHref=ft(xt(ot)),this._platformStrategy.onPopState(Vt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Vt.state,type:Vt.type})})}path(z=!1){return this.normalize(this._platformStrategy.path(z))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(z,Ce=""){return this.path()==this.normalize(z+it(Ce))}normalize(z){return Z.stripTrailingSlash(function gt(Z,ve){return Z&&ve.startsWith(Z)?ve.substring(Z.length):ve}(this._baseHref,xt(z)))}prepareExternalUrl(z){return z&&"/"!==z[0]&&(z="/"+z),this._platformStrategy.prepareExternalUrl(z)}go(z,Ce="",ot=null){this._platformStrategy.pushState(ot,"",z,Ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+it(Ce)),ot)}replaceState(z,Ce="",ot=null){this._platformStrategy.replaceState(ot,"",z,Ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+it(Ce)),ot)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(z=0){var Ce,ot;null===(ot=(Ce=this._platformStrategy).historyGo)||void 0===ot||ot.call(Ce,z)}onUrlChange(z){this._urlChangeListeners.push(z),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Ce=>{this._notifyUrlChangeListeners(Ce.url,Ce.state)}))}_notifyUrlChangeListeners(z="",Ce){this._urlChangeListeners.forEach(ot=>ot(z,Ce))}subscribe(z,Ce,ot){return this._subject.subscribe({next:z,error:Ce,complete:ot})}}return Z.normalizeQueryParams=it,Z.joinWithSlash=Je,Z.stripTrailingSlash=ft,Z.\u0275fac=function(z){return new(z||Z)(E.LFG(He),E.LFG(Y))},Z.\u0275prov=E.Yz7({token:Z,factory:function(){return function Ke(){return new be((0,E.LFG)(He),(0,E.LFG)(Y))}()},providedIn:"root"}),Z})();function xt(Z){return Z.replace(/\/index.html$/,"")}var he=(()=>((he=he||{})[he.Decimal=0]="Decimal",he[he.Percent=1]="Percent",he[he.Currency=2]="Currency",he[he.Scientific=3]="Scientific",he))(),Ae=(()=>((Ae=Ae||{})[Ae.Format=0]="Format",Ae[Ae.Standalone=1]="Standalone",Ae))(),Ee=(()=>((Ee=Ee||{})[Ee.Narrow=0]="Narrow",Ee[Ee.Abbreviated=1]="Abbreviated",Ee[Ee.Wide=2]="Wide",Ee[Ee.Short=3]="Short",Ee))(),je=(()=>((je=je||{})[je.Short=0]="Short",je[je.Medium=1]="Medium",je[je.Long=2]="Long",je[je.Full=3]="Full",je))(),We=(()=>((We=We||{})[We.Decimal=0]="Decimal",We[We.Group=1]="Group",We[We.List=2]="List",We[We.PercentSign=3]="PercentSign",We[We.PlusSign=4]="PlusSign",We[We.MinusSign=5]="MinusSign",We[We.Exponential=6]="Exponential",We[We.SuperscriptingExponent=7]="SuperscriptingExponent",We[We.PerMille=8]="PerMille",We[We.Infinity=9]="Infinity",We[We.NaN=10]="NaN",We[We.TimeSeparator=11]="TimeSeparator",We[We.CurrencyDecimal=12]="CurrencyDecimal",We[We.CurrencyGroup=13]="CurrencyGroup",We))();function Nt(Z,ve){return pr((0,E.cg1)(Z)[E.wAp.DateFormat],ve)}function fn(Z,ve){return pr((0,E.cg1)(Z)[E.wAp.TimeFormat],ve)}function Ln(Z,ve){return pr((0,E.cg1)(Z)[E.wAp.DateTimeFormat],ve)}function Vn(Z,ve){const z=(0,E.cg1)(Z),Ce=z[E.wAp.NumberSymbols][ve];if(void 0===Ce){if(ve===We.CurrencyDecimal)return z[E.wAp.NumberSymbols][We.Decimal];if(ve===We.CurrencyGroup)return z[E.wAp.NumberSymbols][We.Group]}return Ce}function Mr(Z){if(!Z[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${Z[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pr(Z,ve){for(let z=ve;z>-1;z--)if(void 0!==Z[z])return Z[z];throw new Error("Locale data API: locale data undefined")}function Cn(Z){const[ve,z]=Z.split(":");return{hours:+ve,minutes:+z}}const ri=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ni={},Hi=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Rr=(()=>((Rr=Rr||{})[Rr.Short=0]="Short",Rr[Rr.ShortGMT=1]="ShortGMT",Rr[Rr.Long=2]="Long",Rr[Rr.Extended=3]="Extended",Rr))(),Nn=(()=>((Nn=Nn||{})[Nn.FullYear=0]="FullYear",Nn[Nn.Month=1]="Month",Nn[Nn.Date=2]="Date",Nn[Nn.Hours=3]="Hours",Nn[Nn.Minutes=4]="Minutes",Nn[Nn.Seconds=5]="Seconds",Nn[Nn.FractionalSeconds=6]="FractionalSeconds",Nn[Nn.Day=7]="Day",Nn))(),Jn=(()=>((Jn=Jn||{})[Jn.DayPeriods=0]="DayPeriods",Jn[Jn.Days=1]="Days",Jn[Jn.Months=2]="Months",Jn[Jn.Eras=3]="Eras",Jn))();function ci(Z,ve,z,Ce){let ot=function ht(Z){if(bt(Z))return Z;if("number"==typeof Z&&!isNaN(Z))return new Date(Z);if("string"==typeof Z){if(Z=Z.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(Z)){const[ot,Vt=1,qt=1]=Z.split("-").map(Xn=>+Xn);return yi(ot,Vt-1,qt)}const z=parseFloat(Z);if(!isNaN(Z-z))return new Date(z);let Ce;if(Ce=Z.match(ri))return function Be(Z){const ve=new Date(0);let z=0,Ce=0;const ot=Z[8]?ve.setUTCFullYear:ve.setFullYear,Vt=Z[8]?ve.setUTCHours:ve.setHours;Z[9]&&(z=Number(Z[9]+Z[10]),Ce=Number(Z[9]+Z[11])),ot.call(ve,Number(Z[1]),Number(Z[2])-1,Number(Z[3]));const qt=Number(Z[4]||0)-z,Xn=Number(Z[5]||0)-Ce,br=Number(Z[6]||0),ar=Math.floor(1e3*parseFloat("0."+(Z[7]||0)));return Vt.call(ve,qt,Xn,br,ar),ve}(Ce)}const ve=new Date(Z);if(!bt(ve))throw new Error(`Unable to convert "${Z}" into a date`);return ve}(Z);ve=cr(z,ve)||ve;let Xn,qt=[];for(;ve;){if(Xn=Hi.exec(ve),!Xn){qt.push(ve);break}{qt=qt.concat(Xn.slice(1));const Sr=qt.pop();if(!Sr)break;ve=Sr}}let br=ot.getTimezoneOffset();Ce&&(br=Qn(Ce,br),ot=function Ot(Z,ve,z){const Ce=z?-1:1,ot=Z.getTimezoneOffset();return function Qr(Z,ve){return(Z=new Date(Z.getTime())).setMinutes(Z.getMinutes()+ve),Z}(Z,Ce*(Qn(ve,ot)-ot))}(ot,Ce,!0));let ar="";return qt.forEach(Sr=>{const jr=function on(Z){if(At[Z])return At[Z];let ve;switch(Z){case"G":case"GG":case"GGG":ve=dt(Jn.Eras,Ee.Abbreviated);break;case"GGGG":ve=dt(Jn.Eras,Ee.Wide);break;case"GGGGG":ve=dt(Jn.Eras,Ee.Narrow);break;case"y":ve=Ye(Nn.FullYear,1,0,!1,!0);break;case"yy":ve=Ye(Nn.FullYear,2,0,!0,!0);break;case"yyy":ve=Ye(Nn.FullYear,3,0,!1,!0);break;case"yyyy":ve=Ye(Nn.FullYear,4,0,!1,!0);break;case"Y":ve=Ue(1);break;case"YY":ve=Ue(2,!0);break;case"YYY":ve=Ue(3);break;case"YYYY":ve=Ue(4);break;case"M":case"L":ve=Ye(Nn.Month,1,1);break;case"MM":case"LL":ve=Ye(Nn.Month,2,1);break;case"MMM":ve=dt(Jn.Months,Ee.Abbreviated);break;case"MMMM":ve=dt(Jn.Months,Ee.Wide);break;case"MMMMM":ve=dt(Jn.Months,Ee.Narrow);break;case"LLL":ve=dt(Jn.Months,Ee.Abbreviated,Ae.Standalone);break;case"LLLL":ve=dt(Jn.Months,Ee.Wide,Ae.Standalone);break;case"LLLLL":ve=dt(Jn.Months,Ee.Narrow,Ae.Standalone);break;case"w":ve=xe(1);break;case"ww":ve=xe(2);break;case"W":ve=xe(1,!0);break;case"d":ve=Ye(Nn.Date,1);break;case"dd":ve=Ye(Nn.Date,2);break;case"c":case"cc":ve=Ye(Nn.Day,1);break;case"ccc":ve=dt(Jn.Days,Ee.Abbreviated,Ae.Standalone);break;case"cccc":ve=dt(Jn.Days,Ee.Wide,Ae.Standalone);break;case"ccccc":ve=dt(Jn.Days,Ee.Narrow,Ae.Standalone);break;case"cccccc":ve=dt(Jn.Days,Ee.Short,Ae.Standalone);break;case"E":case"EE":case"EEE":ve=dt(Jn.Days,Ee.Abbreviated);break;case"EEEE":ve=dt(Jn.Days,Ee.Wide);break;case"EEEEE":ve=dt(Jn.Days,Ee.Narrow);break;case"EEEEEE":ve=dt(Jn.Days,Ee.Short);break;case"a":case"aa":case"aaa":ve=dt(Jn.DayPeriods,Ee.Abbreviated);break;case"aaaa":ve=dt(Jn.DayPeriods,Ee.Wide);break;case"aaaaa":ve=dt(Jn.DayPeriods,Ee.Narrow);break;case"b":case"bb":case"bbb":ve=dt(Jn.DayPeriods,Ee.Abbreviated,Ae.Standalone,!0);break;case"bbbb":ve=dt(Jn.DayPeriods,Ee.Wide,Ae.Standalone,!0);break;case"bbbbb":ve=dt(Jn.DayPeriods,Ee.Narrow,Ae.Standalone,!0);break;case"B":case"BB":case"BBB":ve=dt(Jn.DayPeriods,Ee.Abbreviated,Ae.Format,!0);break;case"BBBB":ve=dt(Jn.DayPeriods,Ee.Wide,Ae.Format,!0);break;case"BBBBB":ve=dt(Jn.DayPeriods,Ee.Narrow,Ae.Format,!0);break;case"h":ve=Ye(Nn.Hours,1,-12);break;case"hh":ve=Ye(Nn.Hours,2,-12);break;case"H":ve=Ye(Nn.Hours,1);break;case"HH":ve=Ye(Nn.Hours,2);break;case"m":ve=Ye(Nn.Minutes,1);break;case"mm":ve=Ye(Nn.Minutes,2);break;case"s":ve=Ye(Nn.Seconds,1);break;case"ss":ve=Ye(Nn.Seconds,2);break;case"S":ve=Ye(Nn.FractionalSeconds,1);break;case"SS":ve=Ye(Nn.FractionalSeconds,2);break;case"SSS":ve=Ye(Nn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ve=at(Rr.Short);break;case"ZZZZZ":ve=at(Rr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ve=at(Rr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ve=at(Rr.Long);break;default:return null}return At[Z]=ve,ve}(Sr);ar+=jr?jr(ot,z,br):"''"===Sr?"'":Sr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ar}function yi(Z,ve,z){const Ce=new Date(0);return Ce.setFullYear(Z,ve,z),Ce.setHours(0,0,0),Ce}function cr(Z,ve){const z=function ct(Z){return(0,E.cg1)(Z)[E.wAp.LocaleId]}(Z);if(Ni[z]=Ni[z]||{},Ni[z][ve])return Ni[z][ve];let Ce="";switch(ve){case"shortDate":Ce=Nt(Z,je.Short);break;case"mediumDate":Ce=Nt(Z,je.Medium);break;case"longDate":Ce=Nt(Z,je.Long);break;case"fullDate":Ce=Nt(Z,je.Full);break;case"shortTime":Ce=fn(Z,je.Short);break;case"mediumTime":Ce=fn(Z,je.Medium);break;case"longTime":Ce=fn(Z,je.Long);break;case"fullTime":Ce=fn(Z,je.Full);break;case"short":const ot=cr(Z,"shortTime"),Vt=cr(Z,"shortDate");Ce=xn(Ln(Z,je.Short),[ot,Vt]);break;case"medium":const qt=cr(Z,"mediumTime"),Xn=cr(Z,"mediumDate");Ce=xn(Ln(Z,je.Medium),[qt,Xn]);break;case"long":const br=cr(Z,"longTime"),ar=cr(Z,"longDate");Ce=xn(Ln(Z,je.Long),[br,ar]);break;case"full":const Sr=cr(Z,"fullTime"),jr=cr(Z,"fullDate");Ce=xn(Ln(Z,je.Full),[Sr,jr])}return Ce&&(Ni[z][ve]=Ce),Ce}function xn(Z,ve){return ve&&(Z=Z.replace(/\{([^}]+)}/g,function(z,Ce){return null!=ve&&Ce in ve?ve[Ce]:z})),Z}function Hr(Z,ve,z="-",Ce,ot){let Vt="";(Z<0||ot&&Z<=0)&&(ot?Z=1-Z:(Z=-Z,Vt=z));let qt=String(Z);for(;qt.length<ve;)qt="0"+qt;return Ce&&(qt=qt.substr(qt.length-ve)),Vt+qt}function Ye(Z,ve,z=0,Ce=!1,ot=!1){return function(Vt,qt){let Xn=function ut(Z,ve){switch(Z){case Nn.FullYear:return ve.getFullYear();case Nn.Month:return ve.getMonth();case Nn.Date:return ve.getDate();case Nn.Hours:return ve.getHours();case Nn.Minutes:return ve.getMinutes();case Nn.Seconds:return ve.getSeconds();case Nn.FractionalSeconds:return ve.getMilliseconds();case Nn.Day:return ve.getDay();default:throw new Error(`Unknown DateType value "${Z}".`)}}(Z,Vt);if((z>0||Xn>-z)&&(Xn+=z),Z===Nn.Hours)0===Xn&&-12===z&&(Xn=12);else if(Z===Nn.FractionalSeconds)return function _i(Z,ve){return Hr(Z,3).substr(0,ve)}(Xn,ve);const br=Vn(qt,We.MinusSign);return Hr(Xn,ve,br,Ce,ot)}}function dt(Z,ve,z=Ae.Format,Ce=!1){return function(ot,Vt){return function Jt(Z,ve,z,Ce,ot,Vt){switch(z){case Jn.Months:return function Et(Z,ve,z){const Ce=(0,E.cg1)(Z),Vt=pr([Ce[E.wAp.MonthsFormat],Ce[E.wAp.MonthsStandalone]],ve);return pr(Vt,z)}(ve,ot,Ce)[Z.getMonth()];case Jn.Days:return function Dt(Z,ve,z){const Ce=(0,E.cg1)(Z),Vt=pr([Ce[E.wAp.DaysFormat],Ce[E.wAp.DaysStandalone]],ve);return pr(Vt,z)}(ve,ot,Ce)[Z.getDay()];case Jn.DayPeriods:const qt=Z.getHours(),Xn=Z.getMinutes();if(Vt){const ar=function Pr(Z){const ve=(0,E.cg1)(Z);return Mr(ve),(ve[E.wAp.ExtraData][2]||[]).map(Ce=>"string"==typeof Ce?Cn(Ce):[Cn(Ce[0]),Cn(Ce[1])])}(ve),Sr=function Mn(Z,ve,z){const Ce=(0,E.cg1)(Z);Mr(Ce);const Vt=pr([Ce[E.wAp.ExtraData][0],Ce[E.wAp.ExtraData][1]],ve)||[];return pr(Vt,z)||[]}(ve,ot,Ce),jr=ar.findIndex(bi=>{if(Array.isArray(bi)){const[Ti,Fi]=bi,te=qt>=Ti.hours&&Xn>=Ti.minutes,$=qt<Fi.hours||qt===Fi.hours&&Xn<Fi.minutes;if(Ti.hours<Fi.hours){if(te&&$)return!0}else if(te||$)return!0}else if(bi.hours===qt&&bi.minutes===Xn)return!0;return!1});if(-1!==jr)return Sr[jr]}return function wt(Z,ve,z){const Ce=(0,E.cg1)(Z),Vt=pr([Ce[E.wAp.DayPeriodsFormat],Ce[E.wAp.DayPeriodsStandalone]],ve);return pr(Vt,z)}(ve,ot,Ce)[qt<12?0:1];case Jn.Eras:return function $t(Z,ve){return pr((0,E.cg1)(Z)[E.wAp.Eras],ve)}(ve,Ce)[Z.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${z}`)}}(ot,Vt,Z,ve,z,Ce)}}function at(Z){return function(ve,z,Ce){const ot=-1*Ce,Vt=Vn(z,We.MinusSign),qt=ot>0?Math.floor(ot/60):Math.ceil(ot/60);switch(Z){case Rr.Short:return(ot>=0?"+":"")+Hr(qt,2,Vt)+Hr(Math.abs(ot%60),2,Vt);case Rr.ShortGMT:return"GMT"+(ot>=0?"+":"")+Hr(qt,1,Vt);case Rr.Long:return"GMT"+(ot>=0?"+":"")+Hr(qt,2,Vt)+":"+Hr(Math.abs(ot%60),2,Vt);case Rr.Extended:return 0===Ce?"Z":(ot>=0?"+":"")+Hr(qt,2,Vt)+":"+Hr(Math.abs(ot%60),2,Vt);default:throw new Error(`Unknown zone width "${Z}"`)}}}function ge(Z){return yi(Z.getFullYear(),Z.getMonth(),Z.getDate()+(4-Z.getDay()))}function xe(Z,ve=!1){return function(z,Ce){let ot;if(ve){const Vt=new Date(z.getFullYear(),z.getMonth(),1).getDay()-1,qt=z.getDate();ot=1+Math.floor((qt+Vt)/7)}else{const Vt=ge(z),qt=function jn(Z){const ve=yi(Z,0,1).getDay();return yi(Z,0,1+(ve<=4?4:11)-ve)}(Vt.getFullYear()),Xn=Vt.getTime()-qt.getTime();ot=1+Math.round(Xn/6048e5)}return Hr(ot,Z,Vn(Ce,We.MinusSign))}}function Ue(Z,ve=!1){return function(z,Ce){return Hr(ge(z).getFullYear(),Z,Vn(Ce,We.MinusSign),ve)}}const At={};function Qn(Z,ve){Z=Z.replace(/:/g,"");const z=Date.parse("Jan 01, 1970 00:00:00 "+Z)/6e4;return isNaN(z)?ve:z}function bt(Z){return Z instanceof Date&&!isNaN(Z.valueOf())}const Kt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Ss(Z){const ve=parseInt(Z);if(isNaN(ve))throw new Error("Invalid integer literal when parsing "+Z);return ve}function hs(Z,ve){ve=encodeURIComponent(ve);for(const z of Z.split(";")){const Ce=z.indexOf("="),[ot,Vt]=-1==Ce?[z,""]:[z.slice(0,Ce),z.slice(Ce+1)];if(ot.trim()===ve)return decodeURIComponent(Vt)}return null}let ws=(()=>{class Z{constructor(z,Ce,ot,Vt){this._iterableDiffers=z,this._keyValueDiffers=Ce,this._ngEl=ot,this._renderer=Vt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(z){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof z?z.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(z){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof z?z.split(/\s+/):z,this._rawClass&&((0,E.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const z=this._iterableDiffer.diff(this._rawClass);z&&this._applyIterableChanges(z)}else if(this._keyValueDiffer){const z=this._keyValueDiffer.diff(this._rawClass);z&&this._applyKeyValueChanges(z)}}_applyKeyValueChanges(z){z.forEachAddedItem(Ce=>this._toggleClass(Ce.key,Ce.currentValue)),z.forEachChangedItem(Ce=>this._toggleClass(Ce.key,Ce.currentValue)),z.forEachRemovedItem(Ce=>{Ce.previousValue&&this._toggleClass(Ce.key,!1)})}_applyIterableChanges(z){z.forEachAddedItem(Ce=>{if("string"!=typeof Ce.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,E.AaK)(Ce.item)}`);this._toggleClass(Ce.item,!0)}),z.forEachRemovedItem(Ce=>this._toggleClass(Ce.item,!1))}_applyClasses(z){z&&(Array.isArray(z)||z instanceof Set?z.forEach(Ce=>this._toggleClass(Ce,!0)):Object.keys(z).forEach(Ce=>this._toggleClass(Ce,!!z[Ce])))}_removeClasses(z){z&&(Array.isArray(z)||z instanceof Set?z.forEach(Ce=>this._toggleClass(Ce,!1)):Object.keys(z).forEach(Ce=>this._toggleClass(Ce,!1)))}_toggleClass(z,Ce){(z=z.trim())&&z.split(/\s+/g).forEach(ot=>{Ce?this._renderer.addClass(this._ngEl.nativeElement,ot):this._renderer.removeClass(this._ngEl.nativeElement,ot)})}}return Z.\u0275fac=function(z){return new(z||Z)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},Z.\u0275dir=E.lG2({type:Z,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Z})();class Di{constructor(ve,z,Ce,ot){this.$implicit=ve,this.ngForOf=z,this.index=Ce,this.count=ot}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ai=(()=>{class Z{constructor(z,Ce,ot){this._viewContainer=z,this._template=Ce,this._differs=ot,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(z){this._ngForOf=z,this._ngForOfDirty=!0}set ngForTrackBy(z){this._trackByFn=z}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(z){z&&(this._template=z)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const z=this._ngForOf;!this._differ&&z&&(this._differ=this._differs.find(z).create(this.ngForTrackBy))}if(this._differ){const z=this._differ.diff(this._ngForOf);z&&this._applyChanges(z)}}_applyChanges(z){const Ce=this._viewContainer;z.forEachOperation((ot,Vt,qt)=>{if(null==ot.previousIndex)Ce.createEmbeddedView(this._template,new Di(ot.item,this._ngForOf,-1,-1),null===qt?void 0:qt);else if(null==qt)Ce.remove(null===Vt?void 0:Vt);else if(null!==Vt){const Xn=Ce.get(Vt);Ce.move(Xn,qt),Ls(Xn,ot)}});for(let ot=0,Vt=Ce.length;ot<Vt;ot++){const Xn=Ce.get(ot).context;Xn.index=ot,Xn.count=Vt,Xn.ngForOf=this._ngForOf}z.forEachIdentityChange(ot=>{Ls(Ce.get(ot.currentIndex),ot)})}static ngTemplateContextGuard(z,Ce){return!0}}return Z.\u0275fac=function(z){return new(z||Z)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},Z.\u0275dir=E.lG2({type:Z,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Z})();function Ls(Z,ve){Z.context.$implicit=ve.item}let Wr=(()=>{class Z{constructor(z,Ce){this._viewContainer=z,this._context=new ii,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ce}set ngIf(z){this._context.$implicit=this._context.ngIf=z,this._updateView()}set ngIfThen(z){Wo("ngIfThen",z),this._thenTemplateRef=z,this._thenViewRef=null,this._updateView()}set ngIfElse(z){Wo("ngIfElse",z),this._elseTemplateRef=z,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(z,Ce){return!0}}return Z.\u0275fac=function(z){return new(z||Z)(E.Y36(E.s_b),E.Y36(E.Rgc))},Z.\u0275dir=E.lG2({type:Z,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Z})();class ii{constructor(){this.$implicit=null,this.ngIf=null}}function Wo(Z,ve){if(ve&&!ve.createEmbeddedView)throw new Error(`${Z} must be a TemplateRef, but received '${(0,E.AaK)(ve)}'.`)}function si(Z,ve){return new E.vHH(2100,"")}class ao{createSubscription(ve,z){return ve.subscribe({next:z,error:Ce=>{throw Ce}})}dispose(ve){ve.unsubscribe()}onDestroy(ve){ve.unsubscribe()}}class ra{createSubscription(ve,z){return ve.then(z,Ce=>{throw Ce})}dispose(ve){}onDestroy(ve){}}const Ct=new ra,mt=new ao;let jt=(()=>{class Z{constructor(z){this._ref=z,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(z){return this._obj?z!==this._obj?(this._dispose(),this.transform(z)):this._latestValue:(z&&this._subscribe(z),this._latestValue)}_subscribe(z){this._obj=z,this._strategy=this._selectStrategy(z),this._subscription=this._strategy.createSubscription(z,Ce=>this._updateLatestValue(z,Ce))}_selectStrategy(z){if((0,E.QGY)(z))return Ct;if((0,E.F4k)(z))return mt;throw si()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(z,Ce){z===this._obj&&(this._latestValue=Ce,this._ref.markForCheck())}}return Z.\u0275fac=function(z){return new(z||Z)(E.Y36(E.sBO,16))},Z.\u0275pipe=E.Yjl({name:"async",type:Z,pure:!1}),Z})();const di=new E.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let qr=(()=>{class Z{constructor(z,Ce){this.locale=z,this.defaultTimezone=Ce}transform(z,Ce="mediumDate",ot,Vt){var qt;if(null==z||""===z||z!=z)return null;try{return ci(z,Ce,Vt||this.locale,null!==(qt=null!=ot?ot:this.defaultTimezone)&&void 0!==qt?qt:void 0)}catch(Xn){throw si()}}}return Z.\u0275fac=function(z){return new(z||Z)(E.Y36(E.soG,16),E.Y36(di,24))},Z.\u0275pipe=E.Yjl({name:"date",type:Z,pure:!0}),Z})(),Ci=(()=>{class Z{constructor(z){this._locale=z}transform(z,Ce,ot){if(!function Ys(Z){return!(null==Z||""===Z||Z!=Z)}(z))return null;ot=ot||this._locale;try{return function An(Z,ve,z){return function ls(Z,ve,z,Ce,ot,Vt,qt=!1){let Xn="",br=!1;if(isFinite(Z)){let ar=function ds(Z){let Ce,ot,Vt,qt,Xn,ve=Math.abs(Z)+"",z=0;for((ot=ve.indexOf("."))>-1&&(ve=ve.replace(".","")),(Vt=ve.search(/e/i))>0?(ot<0&&(ot=Vt),ot+=+ve.slice(Vt+1),ve=ve.substring(0,Vt)):ot<0&&(ot=ve.length),Vt=0;"0"===ve.charAt(Vt);Vt++);if(Vt===(Xn=ve.length))Ce=[0],ot=1;else{for(Xn--;"0"===ve.charAt(Xn);)Xn--;for(ot-=Vt,Ce=[],qt=0;Vt<=Xn;Vt++,qt++)Ce[qt]=Number(ve.charAt(Vt))}return ot>22&&(Ce=Ce.splice(0,21),z=ot-1,ot=1),{digits:Ce,exponent:z,integerLen:ot}}(Z);qt&&(ar=function Gi(Z){if(0===Z.digits[0])return Z;const ve=Z.digits.length-Z.integerLen;return Z.exponent?Z.exponent+=2:(0===ve?Z.digits.push(0,0):1===ve&&Z.digits.push(0),Z.integerLen+=2),Z}(ar));let Sr=ve.minInt,jr=ve.minFrac,bi=ve.maxFrac;if(Vt){const we=Vt.match(Kt);if(null===we)throw new Error(`${Vt} is not a valid digit info`);const Zt=we[1],tr=we[3],Pi=we[5];null!=Zt&&(Sr=Ss(Zt)),null!=tr&&(jr=Ss(tr)),null!=Pi?bi=Ss(Pi):null!=tr&&jr>bi&&(bi=jr)}!function $i(Z,ve,z){if(ve>z)throw new Error(`The minimum number of digits after fraction (${ve}) is higher than the maximum (${z}).`);let Ce=Z.digits,ot=Ce.length-Z.integerLen;const Vt=Math.min(Math.max(ve,ot),z);let qt=Vt+Z.integerLen,Xn=Ce[qt];if(qt>0){Ce.splice(Math.max(Z.integerLen,qt));for(let jr=qt;jr<Ce.length;jr++)Ce[jr]=0}else{ot=Math.max(0,ot),Z.integerLen=1,Ce.length=Math.max(1,qt=Vt+1),Ce[0]=0;for(let jr=1;jr<qt;jr++)Ce[jr]=0}if(Xn>=5)if(qt-1<0){for(let jr=0;jr>qt;jr--)Ce.unshift(0),Z.integerLen++;Ce.unshift(1),Z.integerLen++}else Ce[qt-1]++;for(;ot<Math.max(0,Vt);ot++)Ce.push(0);let br=0!==Vt;const ar=ve+Z.integerLen,Sr=Ce.reduceRight(function(jr,bi,Ti,Fi){return Fi[Ti]=(bi+=jr)<10?bi:bi-10,br&&(0===Fi[Ti]&&Ti>=ar?Fi.pop():br=!1),bi>=10?1:0},0);Sr&&(Ce.unshift(Sr),Z.integerLen++)}(ar,jr,bi);let Ti=ar.digits,Fi=ar.integerLen;const te=ar.exponent;let $=[];for(br=Ti.every(we=>!we);Fi<Sr;Fi++)Ti.unshift(0);for(;Fi<0;Fi++)Ti.unshift(0);Fi>0?$=Ti.splice(Fi,Ti.length):($=Ti,Ti=[0]);const B=[];for(Ti.length>=ve.lgSize&&B.unshift(Ti.splice(-ve.lgSize,Ti.length).join(""));Ti.length>ve.gSize;)B.unshift(Ti.splice(-ve.gSize,Ti.length).join(""));Ti.length&&B.unshift(Ti.join("")),Xn=B.join(Vn(z,Ce)),$.length&&(Xn+=Vn(z,ot)+$.join("")),te&&(Xn+=Vn(z,We.Exponential)+"+"+te)}else Xn=Vn(z,We.Infinity);return Xn=Z<0&&!br?ve.negPre+Xn+ve.negSuf:ve.posPre+Xn+ve.posSuf,Xn}(Z,function fr(Z,ve="-"){const z={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Ce=Z.split(";"),ot=Ce[0],Vt=Ce[1],qt=-1!==ot.indexOf(".")?ot.split("."):[ot.substring(0,ot.lastIndexOf("0")+1),ot.substring(ot.lastIndexOf("0")+1)],Xn=qt[0],br=qt[1]||"";z.posPre=Xn.substr(0,Xn.indexOf("#"));for(let Sr=0;Sr<br.length;Sr++){const jr=br.charAt(Sr);"0"===jr?z.minFrac=z.maxFrac=Sr+1:"#"===jr?z.maxFrac=Sr+1:z.posSuf+=jr}const ar=Xn.split(",");if(z.gSize=ar[1]?ar[1].length:0,z.lgSize=ar[2]||ar[1]?(ar[2]||ar[1]).length:0,Vt){const Sr=ot.length-z.posPre.length-z.posSuf.length,jr=Vt.indexOf("#");z.negPre=Vt.substr(0,jr).replace(/'/g,""),z.negSuf=Vt.substr(jr+Sr).replace(/'/g,"")}else z.negPre=ve+z.posPre,z.negSuf=z.posSuf;return z}(function Ar(Z,ve){return(0,E.cg1)(Z)[E.wAp.NumberFormats][ve]}(ve,he.Percent),Vn(ve,We.MinusSign)),ve,We.Group,We.Decimal,z,!0).replace(new RegExp("%","g"),Vn(ve,We.PercentSign))}(function _o(Z){if("string"==typeof Z&&!isNaN(Number(Z)-parseFloat(Z)))return Number(Z);if("number"!=typeof Z)throw new Error(`${Z} is not a number`);return Z}(z),ot,Ce)}catch(Vt){throw si()}}}return Z.\u0275fac=function(z){return new(z||Z)(E.Y36(E.soG,16))},Z.\u0275pipe=E.Yjl({name:"percent",type:Z,pure:!0}),Z})();let sa=(()=>{class Z{}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275mod=E.oAB({type:Z}),Z.\u0275inj=E.cJS({}),Z})();const zo="browser";function ko(Z){return"server"===Z}let ks=(()=>{class Z{}return Z.\u0275prov=(0,E.Yz7)({token:Z,providedIn:"root",factory:()=>new Mo((0,E.LFG)(Ge),window)}),Z})();class Mo{constructor(ve,z){this.document=ve,this.window=z,this.offset=()=>[0,0]}setOffset(ve){this.offset=Array.isArray(ve)?()=>ve:ve}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ve){this.supportsScrolling()&&this.window.scrollTo(ve[0],ve[1])}scrollToAnchor(ve){if(!this.supportsScrolling())return;const z=function fs(Z,ve){const z=Z.getElementById(ve)||Z.getElementsByName(ve)[0];if(z)return z;if("function"==typeof Z.createTreeWalker&&Z.body&&(Z.body.createShadowRoot||Z.body.attachShadow)){const Ce=Z.createTreeWalker(Z.body,NodeFilter.SHOW_ELEMENT);let ot=Ce.currentNode;for(;ot;){const Vt=ot.shadowRoot;if(Vt){const qt=Vt.getElementById(ve)||Vt.querySelector(`[name="${ve}"]`);if(qt)return qt}ot=Ce.nextNode()}}return null}(this.document,ve);z&&(this.scrollToElement(z),z.focus())}setHistoryScrollRestoration(ve){if(this.supportScrollRestoration()){const z=this.window.history;z&&z.scrollRestoration&&(z.scrollRestoration=ve)}}scrollToElement(ve){const z=ve.getBoundingClientRect(),Ce=z.left+this.window.pageXOffset,ot=z.top+this.window.pageYOffset,Vt=this.offset();this.window.scrollTo(Ce-Vt[0],ot-Vt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ve=qo(this.window.history)||qo(Object.getPrototypeOf(this.window.history));return!(!ve||!ve.writable&&!ve.set)}catch(ve){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ve){return!1}}}function qo(Z){return Object.getOwnPropertyDescriptor(Z,"scrollRestoration")}class pi{}},5e3:(Gt,rt,U)=>{"use strict";U.d(rt,{$8M:()=>au,$Z:()=>o,AFp:()=>eT,ALo:()=>Eb,AaK:()=>Y,AsE:()=>Go,BQk:()=>_e,CHM:()=>Qe,CRH:()=>Pb,CZH:()=>F0,CqO:()=>vn,DdM:()=>pb,EJc:()=>xE,EiD:()=>jh,EpF:()=>Le,F$t:()=>Er,F4k:()=>zt,FYo:()=>Nu,FiY:()=>Oa,G48:()=>ZE,Gf:()=>kb,GfV:()=>M_,Gpc:()=>Me,Hsn:()=>Wn,JOm:()=>De,JVY:()=>Rp,L6k:()=>jd,LAX:()=>Fh,LFG:()=>or,LSH:()=>pu,Lbi:()=>SE,MAs:()=>wg,NdJ:()=>kn,O4$:()=>_a,OlP:()=>Ei,Oqu:()=>vc,PXZ:()=>VE,Q6J:()=>t,QGY:()=>Ve,Qsj:()=>Ap,R0b:()=>kh,RDi:()=>qo,Rgc:()=>R_,SBq:()=>On,Sil:()=>DE,Suo:()=>Mb,TTD:()=>Ys,TgZ:()=>v,VKq:()=>gb,VLi:()=>jE,W1O:()=>Lb,WLB:()=>mb,X6Q:()=>KE,XFs:()=>Mn,Xpm:()=>ge,Y36:()=>a,YKP:()=>cb,YNc:()=>yh,Yjl:()=>Be,Yz7:()=>Nt,ZZ4:()=>Q0,_Bn:()=>re,_UZ:()=>x,_Vd:()=>an,_c5:()=>dS,_uU:()=>tv,aQg:()=>X0,c2e:()=>wE,cJS:()=>Ln,cg1:()=>Bg,dDg:()=>oT,deG:()=>Js,dqk:()=>cr,eBb:()=>Np,eFA:()=>lT,ekj:()=>Zc,g9A:()=>nT,h0i:()=>By,hGG:()=>hS,hij:()=>Md,iGM:()=>Ab,ifc:()=>Rr,ip1:()=>Jb,kL8:()=>bc,kcU:()=>To,lG2:()=>ht,lcZ:()=>Sb,mCW:()=>fu,n5z:()=>Ec,n_E:()=>n0,oAB:()=>Qn,oxw:()=>In,pB0:()=>Cf,q3G:()=>wr,q4F:()=>jy,qLn:()=>cd,qOj:()=>op,qZA:()=>S,qzn:()=>rc,sBO:()=>YE,sIi:()=>up,s_b:()=>s0,soG:()=>U0,tBr:()=>vi,tb:()=>rT,tp0:()=>cl,uIk:()=>cp,vHH:()=>ft,vpe:()=>Tf,wAp:()=>Or,xp6:()=>Wp,yhl:()=>zu,ynx:()=>q,z2F:()=>W0,z3N:()=>du,zSh:()=>Mm,zs3:()=>Xu});var E=U(7579),k=U(727),oe=U(9751),Ne=U(6451),Pe=U(3099);function ke(r){for(let i in r)if(r[i]===ke)return i;throw Error("Could not find renamed property on target object.")}function Ge(r,i){for(const c in i)i.hasOwnProperty(c)&&!r.hasOwnProperty(c)&&(r[c]=i[c])}function Y(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Y).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const c=i.indexOf("\n");return-1===c?i:i.substring(0,c)}function Xe(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const pe=ke({__forward_ref__:ke});function Me(r){return r.__forward_ref__=Me,r.toString=function(){return Y(this())},r}function Oe(r){return et(r)?r():r}function et(r){return"function"==typeof r&&r.hasOwnProperty(pe)&&r.__forward_ref__===Me}class ft extends Error{constructor(i,c){super(function it(r,i){return`NG0${Math.abs(r)}${i?": "+i:""}`}(i,c)),this.code=i}}function He(r){return"string"==typeof r?r:null==r?"":String(r)}function $e(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():He(r)}function be(r,i){const c=i?` in ${i}`:"";throw new ft(-201,`No provider for ${$e(r)} found${c}`)}function Dt(r,i){null==r&&function Et(r,i,c,f){throw new Error(`ASSERTION ERROR: ${r}`+(null==f?"":` [Expected=> ${c} ${f} ${i} <=Actual]`))}(i,r,null,"!=")}function Nt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Ln(r){return{providers:r.providers||[],imports:r.imports||[]}}function Vn(r){return Ar(r,ur)||Ar(r,Mr)}function Ar(r,i){return r.hasOwnProperty(i)?r[i]:null}function kr(r){return r&&(r.hasOwnProperty(Lr)||r.hasOwnProperty(Pr))?r[Lr]:null}const ur=ke({\u0275prov:ke}),Lr=ke({\u0275inj:ke}),Mr=ke({ngInjectableDef:ke}),Pr=ke({ngInjectorDef:ke});var Mn=(()=>((Mn=Mn||{})[Mn.Default=0]="Default",Mn[Mn.Host=1]="Host",Mn[Mn.Self=2]="Self",Mn[Mn.SkipSelf=4]="SkipSelf",Mn[Mn.Optional=8]="Optional",Mn))();let Kn;function Cn(r){const i=Kn;return Kn=r,i}function Vi(r,i,c){const f=Vn(r);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&Mn.Optional?null:void 0!==i?i:void be(Y(r),"Injector")}function xr(r){return{toString:r}.toString()}var ri=(()=>((ri=ri||{})[ri.OnPush=0]="OnPush",ri[ri.Default=1]="Default",ri))(),Rr=(()=>{return(r=Rr||(Rr={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Rr;var r})();const Nn="undefined"!=typeof globalThis&&globalThis,Jn="undefined"!=typeof window&&window,ci="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,cr=Nn||"undefined"!=typeof global&&global||Jn||ci,_i={},Ye=[],ut=ke({\u0275cmp:ke}),dt=ke({\u0275dir:ke}),Jt=ke({\u0275pipe:ke}),at=ke({\u0275mod:ke}),Mt=ke({\u0275fac:ke}),sn=ke({__NG_ELEMENT_ID__:ke});let jn=0;function ge(r){return xr(()=>{const c={},f={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===ri.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Ye,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Rr.Emulated,id:"c",styles:r.styles||Ye,_:null,setInput:null,schemas:r.schemas||null,tView:null},m=r.directives,T=r.features,D=r.pipes;return f.id+=jn++,f.inputs=Ot(r.inputs,c),f.outputs=Ot(r.outputs),T&&T.forEach(O=>O(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Ue):null,f.pipeDefs=D?()=>("function"==typeof D?D():D).map(At):null,f})}function Ue(r){return bt(r)||function Kt(r){return r[dt]||null}(r)}function At(r){return function Hn(r){return r[Jt]||null}(r)}const on={};function Qn(r){return xr(()=>{const i={type:r.type,bootstrap:r.bootstrap||Ye,declarations:r.declarations||Ye,imports:r.imports||Ye,exports:r.exports||Ye,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(on[r.id]=r.type),i})}function Ot(r,i){if(null==r)return _i;const c={};for(const f in r)if(r.hasOwnProperty(f)){let m=r[f],T=m;Array.isArray(m)&&(T=m[1],m=m[0]),c[m]=f,i&&(i[m]=T)}return c}const ht=ge;function Be(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function bt(r){return r[ut]||null}function Zn(r,i){const c=r[at]||null;if(!c&&!0===i)throw new Error(`Type ${Y(r)} does not have '\u0275mod' property.`);return c}function Xi(r){return Array.isArray(r)&&"object"==typeof r[1]}function so(r){return Array.isArray(r)&&!0===r[1]}function oo(r){return 0!=(8&r.flags)}function ss(r){return 2==(2&r.flags)}function Ks(r){return 1==(1&r.flags)}function vo(r){return null!==r.template}function Fs(r){return 0!=(512&r[2])}function Ci(r,i){return r.hasOwnProperty(Mt)?r[Mt]:null}class Ao{constructor(i,c,f){this.previousValue=i,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function Ys(){return _o}function _o(r){return r.type.prototype.ngOnChanges&&(r.setInput=Ga),ma}function ma(){const r=zo(this),i=null==r?void 0:r.current;if(i){const c=r.previous;if(c===_i)r.previous=i;else for(let f in i)c[f]=i[f];r.current=null,this.ngOnChanges(i)}}function Ga(r,i,c,f){const m=zo(r)||function bo(r,i){return r[sa]=i}(r,{previous:_i,current:null}),T=m.current||(m.current={}),D=m.previous,O=this.declaredInputs[c],H=D[O];T[O]=new Ao(H&&H.currentValue,i,D===_i),r[f]=i}Ys.ngInherit=!0;const sa="__ngSimpleChanges__";function zo(r){return r[sa]||null}let Mo;function qo(r){Mo=r}function pi(r){return!!r.listen}const Z={createRenderer:(r,i)=>function fs(){return void 0!==Mo?Mo:"undefined"!=typeof document?document:void 0}()};function z(r){for(;Array.isArray(r);)r=r[0];return r}function Vt(r,i){return z(i[r])}function qt(r,i){return z(i[r.index])}function br(r,i){return r.data[i]}function ar(r,i){return r[i]}function Sr(r,i){const c=i[r];return Xi(c)?c:c[0]}function jr(r){return 4==(4&r[2])}function bi(r){return 128==(128&r[2])}function Fi(r,i){return null==i?null:r[i]}function te(r){r[18]=0}function $(r,i){r[5]+=i;let c=r,f=r[3];for(;null!==f&&(1===i&&1===c[5]||-1===i&&0===c[5]);)f[5]+=i,c=f,f=f[3]}const B={lFrame:Ui(null),bindingsEnabled:!0};function Qs(){return B.bindingsEnabled}function G(){return B.lFrame.lView}function Ie(){return B.lFrame.tView}function Qe(r){return B.lFrame.contextLView=r,r[8]}function lt(){let r=Bt();for(;null!==r&&64===r.type;)r=r.parent;return r}function Bt(){return B.lFrame.currentTNode}function Gn(r,i){const c=B.lFrame;c.currentTNode=r,c.isParent=i}function $n(){return B.lFrame.isParent}function yr(){B.lFrame.isParent=!1}function Yr(){const r=B.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function _s(){return B.lFrame.bindingIndex++}function as(r){const i=B.lFrame,c=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,c}function hi(r,i){const c=B.lFrame;c.bindingIndex=c.bindingRootIndex=r,tu(i)}function tu(r){B.lFrame.currentDirectiveIndex=r}function Fr(){return B.lFrame.currentQueryIndex}function Ql(r){B.lFrame.currentQueryIndex=r}function wl(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function sl(r,i,c){if(c&Mn.SkipSelf){let m=i,T=r;for(;!(m=m.parent,null!==m||c&Mn.Host||(m=wl(T),null===m||(T=T[15],10&m.type))););if(null===m)return!1;i=m,r=T}const f=B.lFrame=Cl();return f.currentTNode=i,f.lView=r,!0}function Bo(r){const i=Cl(),c=r[1];B.lFrame=i,i.currentTNode=c.firstChild,i.lView=r,i.tView=c,i.contextLView=r,i.bindingIndex=c.bindingStartIndex,i.inI18n=!1}function Cl(){const r=B.lFrame,i=null===r?null:r.child;return null===i?Ui(r):i}function Ui(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Xs(){const r=B.lFrame;return B.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const za=Xs;function Aa(){const r=Xs();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Po(){return B.lFrame.selectedIndex}function nu(r){B.lFrame.selectedIndex=r}function ps(){const r=B.lFrame;return br(r.tView,r.selectedIndex)}function _a(){B.lFrame.currentNamespace="svg"}function To(){!function Xl(){B.lFrame.currentNamespace=null}()}function ka(r,i){for(let c=i.directiveStart,f=i.directiveEnd;c<f;c++){const T=r.data[c].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:O,ngAfterViewInit:H,ngAfterViewChecked:ce,ngOnDestroy:Te}=T;D&&(r.contentHooks||(r.contentHooks=[])).push(-c,D),O&&((r.contentHooks||(r.contentHooks=[])).push(c,O),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(c,O)),H&&(r.viewHooks||(r.viewHooks=[])).push(-c,H),ce&&((r.viewHooks||(r.viewHooks=[])).push(c,ce),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(c,ce)),null!=Te&&(r.destroyHooks||(r.destroyHooks=[])).push(c,Te)}}function Us(r,i,c){qa(r,i,3,c)}function ba(r,i,c,f){(3&r[2])===c&&qa(r,i,c,f)}function xs(r,i){let c=r[2];(3&c)===i&&(c&=2047,c+=1,r[2]=c)}function qa(r,i,c,f){const T=null!=f?f:-1,D=i.length-1;let O=0;for(let H=void 0!==f?65535&r[18]:0;H<D;H++)if("number"==typeof i[H+1]){if(O=i[H],null!=f&&O>=f)break}else i[H]<0&&(r[18]+=65536),(O<T||-1==T)&&(al(r,c,i,H),r[18]=(4294901760&r[18])+H+2),H++}function al(r,i,c,f){const m=c[f]<0,T=c[f+1],O=r[m?-c[f]:c[f]];if(m){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{T.call(O)}finally{}}}else try{T.call(O)}finally{}}class bs{constructor(i,c,f){this.factory=i,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}function iu(r,i,c){const f=pi(r);let m=0;for(;m<c.length;){const T=c[m];if("number"==typeof T){if(0!==T)break;m++;const D=c[m++],O=c[m++],H=c[m++];f?r.setAttribute(i,O,H,D):i.setAttributeNS(D,O,H)}else{const D=T,O=c[++m];So(D)?f&&r.setProperty(i,D,O):f?r.setAttribute(i,D,O):i.setAttribute(D,O),m++}}return m}function ti(r){return 3===r||4===r||6===r}function So(r){return 64===r.charCodeAt(0)}function Fu(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let c=-1;for(let f=0;f<i.length;f++){const m=i[f];"number"==typeof m?c=m:0===c||Ka(r,c,m,null,-1===c||2===c?i[++f]:null)}}return r}function Ka(r,i,c,f,m){let T=0,D=r.length;if(-1===i)D=-1;else for(;T<r.length;){const O=r[T++];if("number"==typeof O){if(O===i){D=-1;break}if(O>i){D=T-1;break}}}for(;T<r.length;){const O=r[T];if("number"==typeof O)break;if(O===c){if(null===f)return void(null!==m&&(r[T+1]=m));if(f===r[T+1])return void(r[T+2]=m)}T++,null!==f&&T++,null!==m&&T++}-1!==D&&(r.splice(D,0,i),T=D+1),r.splice(T++,0,c),null!==f&&r.splice(T++,0,f),null!==m&&r.splice(T++,0,m)}function Zo(r){return-1!==r}function Yo(r){return 32767&r}function su(r,i){let c=function Ms(r){return r>>16}(r),f=i;for(;c>0;)f=f[15],c--;return f}let lo=!0;function ju(r){const i=lo;return lo=r,i}let A=0;function se(r,i){const c=ze(r,i);if(-1!==c)return c;const f=i[1];f.firstCreatePass&&(r.injectorIndex=i.length,de(f.data,r),de(i,null),de(f.blueprint,null));const m=st(r,i),T=r.injectorIndex;if(Zo(m)){const D=Yo(m),O=su(m,i),H=O[1].data;for(let ce=0;ce<8;ce++)i[T+ce]=O[D+ce]|H[D+ce]}return i[T+8]=m,T}function de(r,i){r.push(0,0,0,0,0,0,0,0,i)}function ze(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function st(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let c=0,f=null,m=i;for(;null!==m;){const T=m[1],D=T.type;if(f=2===D?T.declTNode:1===D?m[6]:null,null===f)return-1;if(c++,m=m[15],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return-1}function en(r,i,c){!function K(r,i,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(sn)&&(f=c[sn]),null==f&&(f=c[sn]=A++);const m=255&f;i.data[r+(m>>5)]|=1<<m}(r,i,c)}function Pn(r,i,c){if(c&Mn.Optional)return r;be(i,"NodeInjector")}function ir(r,i,c,f){if(c&Mn.Optional&&void 0===f&&(f=null),0==(c&(Mn.Self|Mn.Host))){const m=r[9],T=Cn(void 0);try{return m?m.get(i,f,c&Mn.Optional):Vi(i,f,c&Mn.Optional)}finally{Cn(T)}}return Pn(f,i,c)}function pn(r,i,c,f=Mn.Default,m){if(null!==r){const T=function Ea(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(sn)?r[sn]:void 0;return"number"==typeof i?i>=0?255&i:dn:i}(c);if("function"==typeof T){if(!sl(i,r,f))return f&Mn.Host?Pn(m,c,f):ir(i,c,f,m);try{const D=T(f);if(null!=D||f&Mn.Optional)return D;be(c)}finally{za()}}else if("number"==typeof T){let D=null,O=ze(r,i),H=-1,ce=f&Mn.Host?i[16][6]:null;for((-1===O||f&Mn.SkipSelf)&&(H=-1===O?st(r,i):i[O+8],-1!==H&&Nd(f,!1)?(D=i[1],O=Yo(H),i=su(H,i)):O=-1);-1!==O;){const Te=i[1];if(ul(T,O,Te.data)){const Ze=gs(O,i,c,D,f,ce);if(Ze!==Rt)return Ze}H=i[O+8],-1!==H&&Nd(f,i[1].data[O+8]===ce)&&ul(T,O,i)?(D=Te,O=Yo(H),i=su(H,i)):O=-1}}}return ir(i,c,f,m)}const Rt={};function dn(){return new Bu(lt(),G())}function gs(r,i,c,f,m,T){const D=i[1],O=D.data[r+8],Te=ou(O,D,c,null==f?ss(O)&&lo:f!=D&&0!=(3&O.type),m&Mn.Host&&T===O);return null!==Te?xl(i,D,Te,O):Rt}function ou(r,i,c,f,m){const T=r.providerIndexes,D=i.data,O=1048575&T,H=r.directiveStart,Te=T>>20,vt=m?O+Te:r.directiveEnd;for(let Ft=f?O:O+Te;Ft<vt;Ft++){const hn=D[Ft];if(Ft<H&&c===hn||Ft>=H&&hn.type===c)return Ft}if(m){const Ft=D[H];if(Ft&&vo(Ft)&&Ft.type===c)return H}return null}function xl(r,i,c,f){let m=r[c];const T=i.data;if(function Oo(r){return r instanceof bs}(m)){const D=m;D.resolving&&function Tt(r,i){const c=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new ft(-200,`Circular dependency in DI detected for ${r}${c}`)}($e(T[c]));const O=ju(D.canSeeViewProviders);D.resolving=!0;const H=D.injectImpl?Cn(D.injectImpl):null;sl(r,f,Mn.Default);try{m=r[c]=D.factory(void 0,T,r,f),i.firstCreatePass&&c>=f.directiveStart&&function Ko(r,i,c){const{ngOnChanges:f,ngOnInit:m,ngDoCheck:T}=i.type.prototype;if(f){const D=_o(i);(c.preOrderHooks||(c.preOrderHooks=[])).push(r,D),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(r,D)}m&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-r,m),T&&((c.preOrderHooks||(c.preOrderHooks=[])).push(r,T),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(r,T))}(c,T[c],i)}finally{null!==H&&Cn(H),ju(O),D.resolving=!1,za()}}return m}function ul(r,i,c){return!!(c[i+(r>>5)]&1<<r)}function Nd(r,i){return!(r&Mn.Self||r&Mn.Host&&i)}class Bu{constructor(i,c){this._tNode=i,this._lView=c}get(i,c,f){return pn(this._tNode,this._lView,i,f,c)}}function Ec(r){return xr(()=>{const i=r.prototype.constructor,c=i[Mt]||Sc(i),f=Object.prototype;let m=Object.getPrototypeOf(r.prototype).constructor;for(;m&&m!==f;){const T=m[Mt]||Sc(m);if(T&&T!==c)return T;m=Object.getPrototypeOf(m)}return T=>new T})}function Sc(r){return et(r)?()=>{const i=Sc(Oe(r));return i&&i()}:Ci(r)}function au(r){return function Qt(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const c=r.attrs;if(c){const f=c.length;let m=0;for(;m<f;){const T=c[m];if(ti(T))break;if(0===T)m+=2;else if("number"==typeof T)for(m++;m<f&&"string"==typeof c[m];)m++;else{if(T===i)return c[m+1];m+=2}}}return null}(lt(),r)}const co="__parameters__";function Eu(r,i,c){return xr(()=>{const f=function uu(r){return function(...c){if(r){const f=r(...c);for(const m in f)this[m]=f[m]}}}(i);function m(...T){if(this instanceof m)return f.apply(this,T),this;const D=new m(...T);return O.annotation=D,O;function O(H,ce,Te){const Ze=H.hasOwnProperty(co)?H[co]:Object.defineProperty(H,co,{value:[]})[co];for(;Ze.length<=Te;)Ze.push(null);return(Ze[Te]=Ze[Te]||[]).push(D),H}}return c&&(m.prototype=Object.create(c.prototype)),m.prototype.ngMetadataName=r,m.annotationCls=m,m})}class Ei{constructor(i,c){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Nt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Js=new Ei("AnalyzeForEntryComponents");function Ro(r,i){void 0===i&&(i=r);for(let c=0;c<r.length;c++){let f=r[c];Array.isArray(f)?(i===r&&(i=r.slice(0,c)),Ro(f,i)):i!==r&&i.push(f)}return i}function fo(r,i){r.forEach(c=>Array.isArray(c)?fo(c,i):i(c))}function Cc(r,i,c){i>=r.length?r.push(c):r.splice(i,0,c)}function aa(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function ua(r,i){const c=[];for(let f=0;f<r;f++)c.push(i);return c}function Kr(r,i,c){let f=ui(r,i);return f>=0?r[1|f]=c:(f=~f,function Fn(r,i,c,f){let m=r.length;if(m==i)r.push(c,f);else if(1===m)r.push(f,r[0]),r[0]=c;else{for(m--,r.push(r[m-1],r[m]);m>i;)r[m]=r[m-2],m--;r[i]=c,r[i+1]=f}}(r,f,i,c)),f}function Dl(r,i){const c=ui(r,i);if(c>=0)return r[1|c]}function ui(r,i){return function Sa(r,i,c){let f=0,m=r.length>>c;for(;m!==f;){const T=f+(m-f>>1),D=r[T<<c];if(i===D)return T<<c;D>i?m=T:f=T+1}return~(m<<c)}(r,i,1)}const Za={},Hu="__NG_DI_FLAG__",la="ngTempTokenPath",Q=/\n/gm,qe="__source",Lt=ke({provide:String,useValue:ke});let Ut;function yn(r){const i=Ut;return Ut=r,i}function sr(r,i=Mn.Default){if(void 0===Ut)throw new ft(203,"");return null===Ut?Vi(r,void 0,i):Ut.get(r,i&Mn.Optional?null:void 0,i)}function or(r,i=Mn.Default){return(function pr(){return Kn}()||sr)(Oe(r),i)}const Si=or;function Tr(r){const i=[];for(let c=0;c<r.length;c++){const f=Oe(r[c]);if(Array.isArray(f)){if(0===f.length)throw new ft(900,"");let m,T=Mn.Default;for(let D=0;D<f.length;D++){const O=f[D],H=li(O);"number"==typeof H?-1===H?m=O.token:T|=H:m=O}i.push(or(m,T))}else i.push(or(f))}return i}function po(r,i){return r[Hu]=i,r.prototype[Hu]=i,r}function li(r){return r[Hu]}const vi=po(Eu("Inject",r=>({token:r})),-1),Oa=po(Eu("Optional"),8),cl=po(Eu("SkipSelf"),4);let Ps;function zi(r){var i;return(null===(i=function ec(){if(void 0===Ps&&(Ps=null,cr.trustedTypes))try{Ps=cr.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Ps}())||void 0===i?void 0:i.createHTML(r))||r}class hl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ac extends hl{getTypeName(){return"HTML"}}class Iu extends hl{getTypeName(){return"Style"}}class wf extends hl{getTypeName(){return"Script"}}class kc extends hl{getTypeName(){return"URL"}}class Op extends hl{getTypeName(){return"ResourceURL"}}function du(r){return r instanceof hl?r.changingThisBreaksApplicationSecurity:r}function rc(r,i){const c=zu(r);if(null!=c&&c!==i){if("ResourceURL"===c&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===i}function zu(r){return r instanceof hl&&r.getTypeName()||null}function Rp(r){return new Ac(r)}function jd(r){return new Iu(r)}function Np(r){return new wf(r)}function Fh(r){return new kc(r)}function Cf(r){return new Op(r)}class Ud{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const c=(new window.DOMParser).parseFromString(zi(i),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(i):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class Xg{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const f=this.inertDocument.createElement("body");c.appendChild(f)}}getInertBodyElement(i){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=zi(i),c;const f=this.inertDocument.createElement("body");return f.innerHTML=zi(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(f),f}stripCustomNsAttrs(i){const c=i.attributes;for(let m=c.length-1;0<m;m--){const D=c.item(m).name;("xmlns:ns1"===D||0===D.indexOf("ns1:"))&&i.removeAttribute(D)}let f=i.firstChild;for(;f;)f.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(f),f=f.nextSibling}}const Mc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,fl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fu(r){return(r=String(r)).match(Mc)||r.match(fl)?r:"unsafe:"+r}function da(r){const i={};for(const c of r.split(","))i[c]=!0;return i}function wa(...r){const i={};for(const c of r)for(const f in c)c.hasOwnProperty(f)&&(i[f]=!0);return i}const sd=da("area,br,col,hr,img,wbr"),od=da("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),If=da("rp,rt"),ic=wa(sd,wa(od,da("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wa(If,da("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wa(If,od)),sc=da("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pl=da("srcset"),Mf=wa(sc,pl,da("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),da("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),oc=da("script,style,template");class kl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let c=i.firstChild,f=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?f=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,f&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let m=this.checkClobberedElement(c,c.nextSibling);if(m){c=m;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(i){const c=i.nodeName.toLowerCase();if(!ic.hasOwnProperty(c))return this.sanitizedSomething=!0,!oc.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const f=i.attributes;for(let m=0;m<f.length;m++){const T=f.item(m),D=T.name,O=D.toLowerCase();if(!Mf.hasOwnProperty(O)){this.sanitizedSomething=!0;continue}let H=T.value;sc[O]&&(H=fu(H)),pl[O]&&(r=H,H=(r=String(r)).split(",").map(i=>fu(i.trim())).join(", ")),this.buf.push(" ",D,'="',Pc(H),'"')}var r;return this.buf.push(">"),!0}endElement(i){const c=i.nodeName.toLowerCase();ic.hasOwnProperty(c)&&!sd.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(i){this.buf.push(Pc(i))}checkClobberedElement(i,c){if(c&&(i.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return c}}const Pf=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vd=/([^\#-~ |!])/g;function Pc(r){return r.replace(/&/g,"&amp;").replace(Pf,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Vd,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Du;function jh(r,i){let c=null;try{Du=Du||function id(r){const i=new Xg(r);return function hu(){try{return!!(new window.DOMParser).parseFromString(zi(""),"text/html")}catch(r){return!1}}()?new Ud(i):i}(r);let f=i?String(i):"";c=Du.getInertBodyElement(f);let m=5,T=f;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,f=T,T=c.innerHTML,c=Du.getInertBodyElement(f)}while(f!==T);return zi((new kl).sanitizeChildren(Of(c)||c))}finally{if(c){const f=Of(c)||c;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function Of(r){return"content"in r&&function Os(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function pu(r){const i=function ad(){const r=G();return r&&r[12]}();return i?i.sanitize(wr.URL,r)||"":rc(r,"URL")?du(r):fu(He(r))}const lc="__ngContext__";function Co(r,i){r[lc]=i}function Uh(r){const i=function Pl(r){return r[lc]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function Ol(r){return r.ngOriginalError}function Gd(r,...i){r.error(...i)}class cd{constructor(){this._console=console}handleError(i){const c=this._findOriginalError(i),f=function Ku(r){return r&&r.ngErrorLogger||Gd}(i);f(this._console,"ERROR",i),c&&f(this._console,"ORIGINAL ERROR",c)}_findOriginalError(i){let c=i&&Ol(i);for(;c&&Ol(c);)c=Ol(c);return c||null}}const zd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(cr))();function C(r){return r instanceof Function?r():r}var De=(()=>((De=De||{})[De.Important=1]="Important",De[De.DashCase=2]="DashCase",De))();function Ht(r,i){return undefined(r,i)}function lr(r){const i=r[3];return so(i)?i[3]:i}function Na(r){return Gf(r[13])}function dd(r){return Gf(r[4])}function Gf(r){for(;null!==r&&!so(r);)r=r[4];return r}function Rl(r,i,c,f,m){if(null!=f){let T,D=!1;so(f)?T=f:Xi(f)&&(D=!0,f=f[0]);const O=z(f);0===r&&null!==c?null==m?yl(i,c,O):ha(i,c,O,m||null,!0):1===r&&null!==c?ha(i,c,O,m||null,!0):2===r?function im(r,i,c){const f=Yu(r,i);f&&function kt(r,i,c,f){pi(r)?r.removeChild(i,c,f):i.removeChild(c)}(r,f,i,c)}(i,O,D):3===r&&i.destroyNode(O),null!=T&&function pd(r,i,c,f,m){const T=c[7];T!==z(c)&&Rl(i,r,f,T,m);for(let O=10;O<c.length;O++){const H=c[O];$h(H[1],H,r,i,f,T)}}(i,r,T,c,m)}}function hd(r,i,c){if(pi(r))return r.createElement(i,c);{const f=null!==c?function ks(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(c):null;return null===f?r.createElement(i):r.createElementNS(f,i)}}function Yd(r,i){const c=r[9],f=c.indexOf(i),m=i[3];1024&i[2]&&(i[2]&=-1025,$(m,-1)),c.splice(f,1)}function Fc(r,i){if(r.length<=10)return;const c=10+i,f=r[c];if(f){const m=f[17];null!==m&&m!==r&&Yd(m,f),i>0&&(r[c-1][4]=f[4]);const T=aa(r,10+i);!function qd(r,i){$h(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(f[1],f);const D=T[19];null!==D&&D.detachView(T[1]),f[3]=null,f[4]=null,f[2]&=-129}return f}function Wf(r,i){if(!(256&i[2])){const c=i[11];pi(c)&&c.destroyNode&&$h(r,i,c,3,null,null),function mo(r){let i=r[13];if(!i)return Qd(r[1],r);for(;i;){let c=null;if(Xi(i))c=i[13];else{const f=i[10];f&&(c=f)}if(!c){for(;i&&!i[4]&&i!==r;)Xi(i)&&Qd(i[1],i),i=i[3];null===i&&(i=r),Xi(i)&&Qd(i[1],i),c=i&&i[4]}i=c}}(i)}}function Qd(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function zf(r,i){let c;if(null!=r&&null!=(c=r.destroyHooks))for(let f=0;f<c.length;f+=2){const m=i[c[f]];if(!(m instanceof bs)){const T=c[f+1];if(Array.isArray(T))for(let D=0;D<T.length;D+=2){const O=m[T[D]],H=T[D+1];try{H.call(O)}finally{}}else try{T.call(m)}finally{}}}}(r,i),function yv(r,i){const c=r.cleanup,f=i[7];let m=-1;if(null!==c)for(let T=0;T<c.length-1;T+=2)if("string"==typeof c[T]){const D=c[T+1],O="function"==typeof D?D(i):z(i[D]),H=f[m=c[T+2]],ce=c[T+3];"boolean"==typeof ce?O.removeEventListener(c[T],H,ce):ce>=0?f[m=ce]():f[m=-ce].unsubscribe(),T+=2}else{const D=f[m=c[T+1]];c[T].call(D)}if(null!==f){for(let T=m+1;T<f.length;T++)f[T]();i[7]=null}}(r,i),1===i[1].type&&pi(i[11])&&i[11].destroy();const c=i[17];if(null!==c&&so(i[3])){c!==i[3]&&Yd(c,i);const f=i[19];null!==f&&f.detachView(r)}}}function tm(r,i,c){return function Xt(r,i,c){let f=i;for(;null!==f&&40&f.type;)f=(i=f).parent;if(null===f)return c[0];if(2&f.flags){const m=r.data[f.directiveStart].encapsulation;if(m===Rr.None||m===Rr.Emulated)return null}return qt(f,c)}(r,i.parent,c)}function ha(r,i,c,f,m){pi(r)?r.insertBefore(i,c,f,m):i.insertBefore(c,f,m)}function yl(r,i,c){pi(r)?r.appendChild(i,c):i.appendChild(c)}function nm(r,i,c,f,m){null!==f?ha(r,i,c,f,m):yl(r,i,c)}function Yu(r,i){return pi(r)?r.parentNode(i):i.parentNode}function xa(r,i,c){return Au(r,i,c)}let Au=function Gh(r,i,c){return 40&r.type?qt(r,c):null};function Xd(r,i,c,f){const m=tm(r,f,i),T=i[11],O=xa(f.parent||i[6],f,i);if(null!=m)if(Array.isArray(c))for(let H=0;H<c.length;H++)nm(T,m,c[H],O,!1);else nm(T,m,c,O,!1)}function Ll(r,i){if(null!==i){const c=i.type;if(3&c)return qt(i,r);if(4&c)return dc(-1,r[i.index]);if(8&c){const f=i.child;if(null!==f)return Ll(r,f);{const m=r[i.index];return so(m)?dc(-1,m):z(m)}}if(32&c)return Ht(i,r)()||z(r[i.index]);{const f=Jd(r,i);return null!==f?Array.isArray(f)?f[0]:Ll(lr(r[16]),f):Ll(r,i.next)}}return null}function Jd(r,i){return null!==i?r[16][6].projection[i.projection]:null}function dc(r,i){const c=10+r+1;if(c<i.length){const f=i[c],m=f[1].firstChild;if(null!==m)return Ll(f,m)}return i[7]}function Hp(r,i,c,f,m,T,D){for(;null!=c;){const O=f[c.index],H=c.type;if(D&&0===i&&(O&&Co(z(O),f),c.flags|=4),64!=(64&c.flags))if(8&H)Hp(r,i,c.child,f,m,T,!1),Rl(i,r,m,O,T);else if(32&H){const ce=Ht(c,f);let Te;for(;Te=ce();)Rl(i,r,m,Te,T);Rl(i,r,m,O,T)}else 16&H?fd(r,i,f,c,m,T):Rl(i,r,m,O,T);c=D?c.projectionNext:c.next}}function $h(r,i,c,f,m,T){Hp(c,f,r.firstChild,i,m,T,!1)}function fd(r,i,c,f,m,T){const D=c[16],H=D[6].projection[f.projection];if(Array.isArray(H))for(let ce=0;ce<H.length;ce++)Rl(i,r,m,H[ce],T);else Hp(r,i,H,D[3],m,T,!0)}function eh(r,i,c){pi(r)?r.setAttribute(i,"style",c):i.style.cssText=c}function Wh(r,i,c){pi(r)?""===c?r.removeAttribute(i,"class"):r.setAttribute(i,"class",c):i.className=c}function zh(r,i,c){let f=r.length;for(;;){const m=r.indexOf(i,c);if(-1===m)return m;if(0===m||r.charCodeAt(m-1)<=32){const T=i.length;if(m+T===f||r.charCodeAt(m+T)<=32)return m}c=m+1}}const Gp="ng-template";function _v(r,i,c){let f=0;for(;f<r.length;){let m=r[f++];if(c&&"class"===m){if(m=r[f],-1!==zh(m.toLowerCase(),i,0))return!0}else if(1===m){for(;f<r.length&&"string"==typeof(m=r[f++]);)if(m.toLowerCase()===i)return!0;return!1}}return!1}function om(r){return 4===r.type&&r.value!==Gp}function bv(r,i,c){return i===(4!==r.type||c?r.value:Gp)}function $p(r,i,c){let f=4;const m=r.attrs||[],T=function Gy(r){for(let i=0;i<r.length;i++)if(ti(r[i]))return i;return r.length}(m);let D=!1;for(let O=0;O<i.length;O++){const H=i[O];if("number"!=typeof H){if(!D)if(4&f){if(f=2|1&f,""!==H&&!bv(r,H,c)||""===H&&1===i.length){if(Ya(f))return!1;D=!0}}else{const ce=8&f?H:i[++O];if(8&f&&null!==r.attrs){if(!_v(r.attrs,ce,c)){if(Ya(f))return!1;D=!0}continue}const Ze=Fl(8&f?"class":H,m,om(r),c);if(-1===Ze){if(Ya(f))return!1;D=!0;continue}if(""!==ce){let vt;vt=Ze>T?"":m[Ze+1].toLowerCase();const Ft=8&f?vt:null;if(Ft&&-1!==zh(Ft,ce,0)||2&f&&ce!==vt){if(Ya(f))return!1;D=!0}}}}else{if(!D&&!Ya(f)&&!Ya(H))return!1;if(D&&Ya(H))continue;D=!1,f=H|1&f}}return Ya(f)||D}function Ya(r){return 0==(1&r)}function Fl(r,i,c,f){if(null===i)return-1;let m=0;if(f||!c){let T=!1;for(;m<i.length;){const D=i[m];if(D===r)return m;if(3===D||6===D)T=!0;else{if(1===D||2===D){let O=i[++m];for(;"string"==typeof O;)O=i[++m];continue}if(4===D)break;if(0===D){m+=4;continue}}m+=T?1:2}return-1}return function Ev(r,i){let c=r.indexOf(4);if(c>-1)for(c++;c<r.length;){const f=r[c];if("number"==typeof f)return-1;if(f===i)return c;c++}return-1}(i,r)}function am(r,i,c=!1){for(let f=0;f<i.length;f++)if($p(r,i[f],c))return!0;return!1}function um(r,i){e:for(let c=0;c<i.length;c++){const f=i[c];if(r.length===f.length){for(let m=0;m<r.length;m++)if(r[m]!==f[m])continue e;return!0}}return!1}function jc(r,i){return r?":not("+i.trim()+")":i}function th(r){let i=r[0],c=1,f=2,m="",T=!1;for(;c<r.length;){let D=r[c];if("string"==typeof D)if(2&f){const O=r[++c];m+="["+D+(O.length>0?'="'+O+'"':"")+"]"}else 8&f?m+="."+D:4&f&&(m+=" "+D);else""!==m&&!Ya(D)&&(i+=jc(T,m),m=""),f=D,T=T||!Ya(f);c++}return""!==m&&(i+=jc(T,m)),i}const ni={};function Wp(r){qh(Ie(),G(),Po()+r,!1)}function qh(r,i,c,f){if(!f)if(3==(3&i[2])){const T=r.preOrderCheckHooks;null!==T&&Us(i,T,c)}else{const T=r.preOrderHooks;null!==T&&ba(i,T,0,c)}nu(c)}function md(r,i){return r<<17|i<<2}function no(r){return r>>17&32767}function Yh(r){return 2|r}function ku(r){return(131068&r)>>2}function La(r,i){return-131069&r|i<<2}function Qh(r){return 1|r}function Pv(r,i){const c=r.contentQueries;if(null!==c)for(let f=0;f<c.length;f+=2){const m=c[f],T=c[f+1];if(-1!==T){const D=r.data[T];Ql(m),D.contentQueries(2,i[T],T)}}}function uh(r,i,c,f,m,T,D,O,H,ce){const Te=i.blueprint.slice();return Te[0]=m,Te[2]=140|f,te(Te),Te[3]=Te[15]=r,Te[8]=c,Te[10]=D||r&&r[10],Te[11]=O||r&&r[11],Te[12]=H||r&&r[12]||null,Te[9]=ce||r&&r[9]||null,Te[6]=T,Te[16]=2==i.type?r[16]:Te,Te}function Ul(r,i,c,f,m){let T=r.data[i];if(null===T)T=function Vo(r,i,c,f,m){const T=Bt(),D=$n(),H=r.data[i]=function Qy(r,i,c,f,m,T){return{type:c,index:f,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:T,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?T:T&&T.parent,c,i,f,m);return null===r.firstChild&&(r.firstChild=H),null!==T&&(D?null==T.child&&null!==H.parent&&(T.child=H):null===T.next&&(T.next=H)),H}(r,i,c,f,m),function ji(){return B.lFrame.inI18n}()&&(T.flags|=64);else if(64&T.type){T.type=c,T.value=f,T.attrs=m;const D=function mn(){const r=B.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();T.injectorIndex=null===D?-1:D.injectorIndex}return Gn(T,!0),T}function lh(r,i,c,f){if(0===c)return-1;const m=i.length;for(let T=0;T<c;T++)i.push(f),r.blueprint.push(f),r.data.push(null);return m}function ch(r,i,c){Bo(i);try{const f=r.viewQuery;null!==f&&nf(1,f,c);const m=r.template;null!==m&&mm(r,i,m,1,c),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Pv(r,i),r.staticViewQueries&&nf(2,r.viewQuery,c);const T=r.components;null!==T&&function ah(r,i){for(let c=0;c<i.length;c++)Im(r,i[c])}(i,T)}catch(f){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),f}finally{i[2]&=-5,Aa()}}function Jh(r,i,c,f){const m=i[2];if(256!=(256&m)){Bo(i);try{te(i),function Oi(r){return B.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==c&&mm(r,i,c,2,f);const D=3==(3&m);if(D){const ce=r.preOrderCheckHooks;null!==ce&&Us(i,ce,null)}else{const ce=r.preOrderHooks;null!==ce&&ba(i,ce,0,null),xs(i,0)}if(function yd(r){for(let i=Na(r);null!==i;i=dd(i)){if(!i[2])continue;const c=i[9];for(let f=0;f<c.length;f++){const m=c[f],T=m[3];0==(1024&m[2])&&$(T,1),m[2]|=1024}}}(i),function ep(r){for(let i=Na(r);null!==i;i=dd(i))for(let c=10;c<i.length;c++){const f=i[c],m=f[1];bi(f)&&Jh(m,f,m.template,f[8])}}(i),null!==r.contentQueries&&Pv(r,i),D){const ce=r.contentCheckHooks;null!==ce&&Us(i,ce)}else{const ce=r.contentHooks;null!==ce&&ba(i,ce,1),xs(i,1)}!function Mv(r,i){const c=r.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const m=c[f];if(m<0)nu(~m);else{const T=m,D=c[++f],O=c[++f];hi(D,T),O(2,i[T])}}}finally{nu(-1)}}(r,i);const O=r.components;null!==O&&function Xh(r,i){for(let c=0;c<i.length;c++)_d(r,i[c])}(i,O);const H=r.viewQuery;if(null!==H&&nf(2,H,f),D){const ce=r.viewCheckHooks;null!==ce&&Us(i,ce)}else{const ce=r.viewHooks;null!==ce&&ba(i,ce,2),xs(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[2]&=-73,1024&i[2]&&(i[2]&=-1025,$(i[3],-1))}finally{Aa()}}}function Jp(r,i,c,f){const m=i[10],D=jr(i);try{!D&&m.begin&&m.begin(),D&&ch(r,i,f),Jh(r,i,c,f)}finally{!D&&m.end&&m.end()}}function mm(r,i,c,f,m){const T=Po(),D=2&f;try{nu(-1),D&&i.length>20&&qh(r,i,20,!1),c(f,m)}finally{nu(T)}}function Xf(r,i,c){if(oo(i)){const m=i.directiveEnd;for(let T=i.directiveStart;T<m;T++){const D=r.data[T];D.contentQueries&&D.contentQueries(1,c[T],T)}}}function vm(r,i,c){!Qs()||(function Jy(r,i,c,f){const m=c.directiveStart,T=c.directiveEnd;r.firstCreatePass||se(c,i),Co(f,i);const D=c.initialInputs;for(let O=m;O<T;O++){const H=r.data[O],ce=vo(H);ce&&e_(i,c,H);const Te=xl(i,r,O,c);Co(Te,i),null!==D&&vd(0,O-m,Te,H,0,D),ce&&(Sr(c.index,i)[8]=Te)}}(r,i,c,qt(c,i)),128==(128&c.flags)&&function Nv(r,i,c){const f=c.directiveStart,m=c.directiveEnd,D=c.index,O=function us(){return B.lFrame.currentDirectiveIndex}();try{nu(D);for(let H=f;H<m;H++){const ce=r.data[H],Te=i[H];tu(H),(null!==ce.hostBindings||0!==ce.hostVars||null!==ce.hostAttrs)&&sg(ce,Te)}}finally{nu(-1),tu(O)}}(r,i,c))}function ym(r,i,c=qt){const f=i.localNames;if(null!==f){let m=i.index+1;for(let T=0;T<f.length;T+=2){const D=f[T+1],O=-1===D?c(i,r):r[D];r[m++]=O}}}function eg(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Ho(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Ho(r,i,c,f,m,T,D,O,H,ce){const Te=20+f,Ze=Te+m,vt=function Zy(r,i){const c=[];for(let f=0;f<i;f++)c.push(f<r?null:ni);return c}(Te,Ze),Ft="function"==typeof ce?ce():ce;return vt[1]={type:r,blueprint:vt,template:c,queries:null,viewQuery:O,declTNode:i,data:vt.slice().fill(null,Te),bindingStartIndex:Te,expandoStartIndex:Ze,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof T?T():T,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:H,consts:Ft,incompleteFirstPass:!1}}function Tm(r,i,c,f){const m=fh(i);null===c?m.push(f):(m.push(c),r.firstCreatePass&&dg(r).push(f,m.length-1))}function tg(r,i,c){for(let f in r)if(r.hasOwnProperty(f)){const m=r[f];(c=null===c?{}:c).hasOwnProperty(f)?c[f].push(i,m):c[f]=[i,m]}return c}function ig(r,i,c,f){let m=!1;if(Qs()){const T=function og(r,i,c){const f=r.directiveRegistry;let m=null;if(f)for(let T=0;T<f.length;T++){const D=f[T];am(c,D.selectors,!1)&&(m||(m=[]),en(se(c,i),r,D.type),vo(D)?(ef(r,c),m.unshift(D)):m.push(D))}return m}(r,i,c),D=null===f?null:{"":-1};if(null!==T){m=!0,Fv(c,r.data.length,T.length);for(let Te=0;Te<T.length;Te++){const Ze=T[Te];Ze.providersResolver&&Ze.providersResolver(Ze)}let O=!1,H=!1,ce=lh(r,i,T.length,null);for(let Te=0;Te<T.length;Te++){const Ze=T[Te];c.mergedAttrs=Fu(c.mergedAttrs,Ze.hostAttrs),jv(r,c,i,ce,Ze),Lv(ce,Ze,D),null!==Ze.contentQueries&&(c.flags|=8),(null!==Ze.hostBindings||null!==Ze.hostAttrs||0!==Ze.hostVars)&&(c.flags|=128);const vt=Ze.type.prototype;!O&&(vt.ngOnChanges||vt.ngOnInit||vt.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(c.index),O=!0),!H&&(vt.ngOnChanges||vt.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(c.index),H=!0),ce++}!function Em(r,i){const f=i.directiveEnd,m=r.data,T=i.attrs,D=[];let O=null,H=null;for(let ce=i.directiveStart;ce<f;ce++){const Te=m[ce],Ze=Te.inputs,vt=null===T||om(i)?null:ag(Ze,T);D.push(vt),O=tg(Ze,ce,O),H=tg(Te.outputs,ce,H)}null!==O&&(O.hasOwnProperty("class")&&(i.flags|=16),O.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=D,i.inputs=O,i.outputs=H}(r,c)}D&&function Cm(r,i,c){if(i){const f=r.localNames=[];for(let m=0;m<i.length;m+=2){const T=c[i[m+1]];if(null==T)throw new ft(-301,!1);f.push(i[m],T)}}}(c,f,D)}return c.mergedAttrs=Fu(c.mergedAttrs,c.attrs),m}function wm(r,i,c,f,m,T){const D=T.hostBindings;if(D){let O=r.hostBindingOpCodes;null===O&&(O=r.hostBindingOpCodes=[]);const H=~i.index;(function Xy(r){let i=r.length;for(;i>0;){const c=r[--i];if("number"==typeof c&&c<0)return c}return 0})(O)!=H&&O.push(H),O.push(f,m,D)}}function sg(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function ef(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function Lv(r,i,c){if(c){if(i.exportAs)for(let f=0;f<i.exportAs.length;f++)c[i.exportAs[f]]=r;vo(i)&&(c[""]=r)}}function Fv(r,i,c){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+c,r.providerIndexes=i}function jv(r,i,c,f,m){r.data[f]=m;const T=m.factory||(m.factory=Ci(m.type)),D=new bs(T,vo(m),null);r.blueprint[f]=D,c[f]=D,wm(r,i,0,f,lh(r,c,m.hostVars,ni),m)}function e_(r,i,c){const f=qt(i,r),m=eg(c),T=r[10],D=_l(r,uh(r,m,null,c.onPush?64:16,f,i,T,T.createRenderer(f,c),null,null));r[i.index]=D}function Bl(r,i,c,f,m,T){const D=qt(r,i);!function xm(r,i,c,f,m,T,D){if(null==T)pi(r)?r.removeAttribute(i,m,c):i.removeAttribute(m);else{const O=null==D?He(T):D(T,f||"",m);pi(r)?r.setAttribute(i,m,O,c):c?i.setAttributeNS(c,m,O):i.setAttribute(m,O)}}(i[11],D,T,r.value,c,f,m)}function vd(r,i,c,f,m,T){const D=T[i];if(null!==D){const O=f.setInput;for(let H=0;H<D.length;){const ce=D[H++],Te=D[H++],Ze=D[H++];null!==O?f.setInput(c,Ze,ce,Te):c[Te]=Ze}}}function ag(r,i){let c=null,f=0;for(;f<i.length;){const m=i[f];if(0!==m)if(5!==m){if("number"==typeof m)break;r.hasOwnProperty(m)&&(null===c&&(c=[]),c.push(m,r[m],i[f+1])),f+=2}else f+=2;else f+=4}return c}function hh(r,i,c,f){return new Array(r,!0,!1,i,null,0,f,c,null,null)}function _d(r,i){const c=Sr(i,r);if(bi(c)){const f=c[1];80&c[2]?Jh(f,c,f.template,c[8]):c[5]>0&&tf(c)}}function tf(r){for(let f=Na(r);null!==f;f=dd(f))for(let m=10;m<f.length;m++){const T=f[m];if(1024&T[2]){const D=T[1];Jh(D,T,D.template,T[8])}else T[5]>0&&tf(T)}const c=r[1].components;if(null!==c)for(let f=0;f<c.length;f++){const m=Sr(c[f],r);bi(m)&&m[5]>0&&tf(m)}}function Im(r,i){const c=Sr(i,r),f=c[1];(function ug(r,i){for(let c=i.length;c<r.blueprint.length;c++)i.push(r.blueprint[c])})(f,c),ch(f,c,c[8])}function _l(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function lg(r){for(;r;){r[2]|=64;const i=lr(r);if(Fs(r)&&!i)return r;r=i}return null}function cg(r){!function tp(r){for(let i=0;i<r.components.length;i++){const c=r.components[i],f=Uh(c),m=f[1];Jp(m,f,m.template,c)}}(r[8])}function nf(r,i,c){Ql(0),i(r,c)}const rf=(()=>Promise.resolve(null))();function fh(r){return r[7]||(r[7]=[])}function dg(r){return r.cleanup||(r.cleanup=[])}function Hv(r,i){const c=r[9],f=c?c.get(cd,null):null;f&&f.handleError(i)}function Am(r,i,c,f,m){for(let T=0;T<c.length;){const D=c[T++],O=c[T++],H=i[D],ce=r.data[D];null!==ce.setInput?ce.setInput(H,m,f,O):H[O]=m}}function Vl(r,i,c){const f=Vt(i,r);!function Lc(r,i,c){pi(r)?r.setValue(i,c):i.textContent=c}(r[11],f,c)}function hg(r,i,c){let f=c?r.styles:null,m=c?r.classes:null,T=0;if(null!==i)for(let D=0;D<i.length;D++){const O=i[D];"number"==typeof O?T=O:1==T?m=Xe(m,O):2==T&&(f=Xe(f,O+": "+i[++D]+";"))}c?r.styles=f:r.stylesWithoutHost=f,c?r.classes=m:r.classesWithoutHost=m}const sf=new Ei("INJECTOR",-1);class fg{get(i,c=Za){if(c===Za){const f=new Error(`NullInjectorError: No provider for ${Y(i)}!`);throw f.name="NullInjectorError",f}return c}}const Mm=new Ei("Set Injector scope."),bl={},Pm={};let np;function rp(){return void 0===np&&(np=new fg),np}function pg(r,i=null,c=null,f){const m=bd(r,i,c,f);return m._resolveInjectorDefTypes(),m}function bd(r,i=null,c=null,f){return new Td(r,c,i||rp(),f)}class Td{constructor(i,c,f,m=null){this.parent=f,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const T=[];c&&fo(c,O=>this.processProvider(O,i,c)),fo([i],O=>this.processInjectorType(O,[],T)),this.records.set(sf,Qu(void 0,this));const D=this.records.get(Mm);this.scope=null!=D?D.value:null,this.source=m||("object"==typeof i?null:Y(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,c=Za,f=Mn.Default){this.assertNotDestroyed();const m=yn(this),T=Cn(void 0);try{if(!(f&Mn.SkipSelf)){let O=this.records.get(i);if(void 0===O){const H=function Wv(r){return"function"==typeof r||"object"==typeof r&&r instanceof Ei}(i)&&Vn(i);O=H&&this.injectableDefInScope(H)?Qu(gh(i),bl):null,this.records.set(i,O)}if(null!=O)return this.hydrate(i,O)}return(f&Mn.Self?rp():this.parent).get(i,c=f&Mn.Optional&&c===Za?null:c)}catch(D){if("NullInjectorError"===D.name){if((D[la]=D[la]||[]).unshift(Y(i)),m)throw D;return function Cu(r,i,c,f){const m=r[la];throw i[qe]&&m.unshift(i[qe]),r.message=function Hs(r,i,c,f=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let m=Y(i);if(Array.isArray(i))m=i.map(Y).join(" -> ");else if("object"==typeof i){let T=[];for(let D in i)if(i.hasOwnProperty(D)){let O=i[D];T.push(D+":"+("string"==typeof O?JSON.stringify(O):Y(O)))}m=`{${T.join(", ")}}`}return`${c}${f?"("+f+")":""}[${m}]: ${r.replace(Q,"\n  ")}`}("\n"+r.message,m,c,f),r.ngTokenPath=m,r[la]=null,r}(D,i,"R3InjectorError",this.source)}throw D}finally{Cn(T),yn(m)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((f,m)=>i.push(Y(m))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ft(205,!1)}processInjectorType(i,c,f){if(!(i=Oe(i)))return!1;let m=kr(i);const T=null==m&&i.ngModule||void 0,D=void 0===T?i:T,O=-1!==f.indexOf(D);if(void 0!==T&&(m=kr(T)),null==m)return!1;if(null!=m.imports&&!O){let Te;f.push(D);try{fo(m.imports,Ze=>{this.processInjectorType(Ze,c,f)&&(void 0===Te&&(Te=[]),Te.push(Ze))})}finally{}if(void 0!==Te)for(let Ze=0;Ze<Te.length;Ze++){const{ngModule:vt,providers:Ft}=Te[Ze];fo(Ft,hn=>this.processProvider(hn,vt,Ft||Ye))}}this.injectorDefTypes.add(D);const H=Ci(D)||(()=>new D);this.records.set(D,Qu(H,bl));const ce=m.providers;if(null!=ce&&!O){const Te=i;fo(ce,Ze=>this.processProvider(Ze,Te,ce))}return void 0!==T&&void 0!==i.providers}processProvider(i,c,f){let m=ja(i=Oe(i))?i:Oe(i&&i.provide);const T=function mh(r,i,c){return Gv(r)?Qu(void 0,r.useValue):Qu(Om(r),bl)}(i);if(ja(i)||!0!==i.multi)this.records.get(m);else{let D=this.records.get(m);D||(D=Qu(void 0,bl,!0),D.factory=()=>Tr(D.multi),this.records.set(m,D)),m=i,D.multi.push(i)}this.records.set(m,T)}hydrate(i,c){return c.value===bl&&(c.value=Pm,c.value=c.factory()),"object"==typeof c.value&&c.value&&function $v(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(i){if(!i.providedIn)return!1;const c=Oe(i.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function gh(r){const i=Vn(r),c=null!==i?i.factory:Ci(r);if(null!==c)return c;if(r instanceof Ei)throw new ft(204,!1);if(r instanceof Function)return function Pu(r){const i=r.length;if(i>0)throw ua(i,"?"),new ft(204,!1);const c=function vr(r){const i=r&&(r[ur]||r[Mr]);if(i){const c=function Cr(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),i}return null}(r);return null!==c?()=>c.factory(r):()=>new r}(r);throw new ft(204,!1)}function Om(r,i,c){let f;if(ja(r)){const m=Oe(r);return Ci(m)||gh(m)}if(Gv(r))f=()=>Oe(r.useValue);else if(function gg(r){return!(!r||!r.useFactory)}(r))f=()=>r.useFactory(...Tr(r.deps||[]));else if(function Rm(r){return!(!r||!r.useExisting)}(r))f=()=>or(Oe(r.useExisting));else{const m=Oe(r&&(r.useClass||r.provide));if(!function vu(r){return!!r.deps}(r))return Ci(m)||gh(m);f=()=>new m(...Tr(r.deps))}return f}function Qu(r,i,c=!1){return{factory:r,value:i,multi:c?[]:void 0}}function Gv(r){return null!==r&&"object"==typeof r&&Lt in r}function ja(r){return"function"==typeof r}let Xu=(()=>{class r{static create(c,f){var m;if(Array.isArray(c))return pg({name:""},f,c,"");{const T=null!==(m=c.name)&&void 0!==m?m:"";return pg({name:T},c.parent,c.providers,T)}}}return r.THROW_IF_NOT_FOUND=Za,r.NULL=new fg,r.\u0275prov=Nt({token:r,providedIn:"any",factory:()=>or(sf)}),r.__NG_ELEMENT_ID__=-1,r})();function Bm(r,i){ka(Uh(r)[1],lt())}function op(r){let i=function yg(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),c=!0;const f=[r];for(;i;){let m;if(vo(r))m=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ft(903,"");m=i.\u0275dir}if(m){if(c){f.push(m);const D=r;D.inputs=Sd(r.inputs),D.declaredInputs=Sd(r.declaredInputs),D.outputs=Sd(r.outputs);const O=m.hostBindings;O&&i_(r,O);const H=m.viewQuery,ce=m.contentQueries;if(H&&ny(r,H),ce&&_g(r,ce),Ge(r.inputs,m.inputs),Ge(r.declaredInputs,m.declaredInputs),Ge(r.outputs,m.outputs),vo(m)&&m.data.animation){const Te=r.data;Te.animation=(Te.animation||[]).concat(m.data.animation)}}const T=m.features;if(T)for(let D=0;D<T.length;D++){const O=T[D];O&&O.ngInherit&&O(r),O===op&&(c=!1)}}i=Object.getPrototypeOf(i)}!function Vm(r){let i=0,c=null;for(let f=r.length-1;f>=0;f--){const m=r[f];m.hostVars=i+=m.hostVars,m.hostAttrs=Fu(m.hostAttrs,c=Fu(c,m.hostAttrs))}}(f)}function Sd(r){return r===_i?{}:r===Ye?[]:r}function ny(r,i){const c=r.viewQuery;r.viewQuery=c?(f,m)=>{i(f,m),c(f,m)}:i}function _g(r,i){const c=r.contentQueries;r.contentQueries=c?(f,m,T)=>{i(f,m,T),c(f,m,T)}:i}function i_(r,i){const c=r.hostBindings;r.hostBindings=c?(f,m)=>{i(f,m),c(f,m)}:i}let ap=null;function wd(){if(!ap){const r=cr.Symbol;if(r&&r.iterator)ap=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<i.length;++c){const f=i[c];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(ap=f)}}}return ap}function up(r){return!!uf(r)&&(Array.isArray(r)||!(r instanceof Map)&&wd()in r)}function uf(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Hl(r,i,c){return r[i]=c}function Qa(r,i,c){return!Object.is(r[i],c)&&(r[i]=c,!0)}function zc(r,i,c,f){const m=Qa(r,i,c);return Qa(r,i+1,f)||m}function cp(r,i,c,f){const m=G();return Qa(m,_s(),i)&&(Ie(),Bl(ps(),m,r,i,c,f)),cp}function Cd(r,i,c,f,m,T){const O=zc(r,function Wi(){return B.lFrame.bindingIndex}(),c,m);return as(2),O?i+He(c)+f+He(m)+T:ni}function yh(r,i,c,f,m,T,D,O){const H=G(),ce=Ie(),Te=r+20,Ze=ce.firstCreatePass?function uy(r,i,c,f,m,T,D,O,H){const ce=i.consts,Te=Ul(i,r,4,D||null,Fi(ce,O));ig(i,c,Te,Fi(ce,H)),ka(i,Te);const Ze=Te.tViews=Ho(2,Te,f,m,T,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ce);return null!==i.queries&&(i.queries.template(i,Te),Ze.queries=i.queries.embeddedTView(Te)),Te}(Te,ce,H,i,c,f,m,T,D):ce.data[Te];Gn(Ze,!1);const vt=H[11].createComment("");Xd(ce,H,vt,Ze),Co(vt,H),_l(H,H[Te]=hh(vt,H,vt,Ze)),Ks(Ze)&&vm(ce,H,Ze),null!=D&&ym(H,Ze,O)}function wg(r){return ar(function gi(){return B.lFrame.contextLView}(),20+r)}function a(r,i=Mn.Default){const c=G();return null===c?or(r,i):pn(lt(),c,Oe(r),i)}function o(){throw new Error("invalid")}function t(r,i,c){const f=G();return Qa(f,_s(),i)&&function Fa(r,i,c,f,m,T,D,O){const H=qt(i,c);let Te,ce=i.inputs;!O&&null!=ce&&(Te=ce[f])?(Am(r,c,Te,f,m),ss(i)&&function dh(r,i){const c=Sr(i,r);16&c[2]||(c[2]|=64)}(c,i.index)):3&i.type&&(f=function Ov(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(f),m=null!=D?D(m,i.value||"",f):m,pi(T)?T.setProperty(H,f,m):So(f)||(H.setProperty?H.setProperty(f,m):H[f]=m))}(Ie(),ps(),f,r,i,f[11],c,!1),t}function s(r,i,c,f,m){const D=m?"class":"style";Am(r,c,i.inputs[D],D,f)}function v(r,i,c,f){const m=G(),T=Ie(),D=20+r,O=m[11],H=m[D]=hd(O,i,function ol(){return B.lFrame.currentNamespace}()),ce=T.firstCreatePass?function h(r,i,c,f,m,T,D){const O=i.consts,ce=Ul(i,r,2,m,Fi(O,T));return ig(i,c,ce,Fi(O,D)),null!==ce.attrs&&hg(ce,ce.attrs,!1),null!==ce.mergedAttrs&&hg(ce,ce.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,ce),ce}(D,T,m,0,i,c,f):T.data[D];Gn(ce,!0);const Te=ce.mergedAttrs;null!==Te&&iu(O,H,Te);const Ze=ce.classes;null!==Ze&&Wh(O,H,Ze);const vt=ce.styles;return null!==vt&&eh(O,H,vt),64!=(64&ce.flags)&&Xd(T,m,H,ce),0===function tr(){return B.lFrame.elementDepthCount}()&&Co(H,m),function Pi(){B.lFrame.elementDepthCount++}(),Ks(ce)&&(vm(T,m,ce),Xf(T,ce,m)),null!==f&&ym(m,ce),v}function S(){let r=lt();$n()?yr():(r=r.parent,Gn(r,!1));const i=r;!function Uo(){B.lFrame.elementDepthCount--}();const c=Ie();return c.firstCreatePass&&(ka(c,r),oo(r)&&c.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Jc(r){return 0!=(16&r.flags)}(i)&&s(c,i,G(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function ru(r){return 0!=(32&r.flags)}(i)&&s(c,i,G(),i.stylesWithoutHost,!1),S}function x(r,i,c,f){return v(r,i,c,f),S(),x}function q(r,i,c){const f=G(),m=Ie(),T=r+20,D=m.firstCreatePass?function ee(r,i,c,f,m){const T=i.consts,D=Fi(T,f),O=Ul(i,r,8,"ng-container",D);return null!==D&&hg(O,D,!0),ig(i,c,O,Fi(T,m)),null!==i.queries&&i.queries.elementStart(i,O),O}(T,m,f,i,c):m.data[T];Gn(D,!0);const O=f[T]=f[11].createComment("");return Xd(m,f,O,D),Co(O,f),Ks(D)&&(vm(m,f,D),Xf(m,D,f)),null!=c&&ym(f,D),q}function _e(){let r=lt();const i=Ie();return $n()?yr():(r=r.parent,Gn(r,!1)),i.firstCreatePass&&(ka(i,r),oo(r)&&i.queries.elementEnd(r)),_e}function Le(){return G()}function Ve(r){return!!r&&"function"==typeof r.then}function zt(r){return!!r&&"function"==typeof r.subscribe}const vn=zt;function kn(r,i,c,f){const m=G(),T=Ie(),D=lt();return function wn(r,i,c,f,m,T,D,O){const H=Ks(f),Te=r.firstCreatePass&&dg(r),Ze=i[8],vt=fh(i);let Ft=!0;if(3&f.type||O){const Yn=qt(f,i),gr=O?O(Yn):Yn,En=vt.length,Br=O?Qi=>O(z(Qi[f.index])):f.index;if(pi(c)){let Qi=null;if(!O&&H&&(Qi=function tn(r,i,c,f){const m=r.cleanup;if(null!=m)for(let T=0;T<m.length-1;T+=2){const D=m[T];if(D===c&&m[T+1]===f){const O=i[7],H=m[T+2];return O.length>H?O[H]:null}"string"==typeof D&&(T+=2)}return null}(r,i,m,f.index)),null!==Qi)(Qi.__ngLastListenerFn__||Qi).__ngNextListenerFn__=T,Qi.__ngLastListenerFn__=T,Ft=!1;else{T=ln(f,i,Ze,T,!1);const qs=c.listen(gr,m,T);vt.push(T,qs),Te&&Te.push(m,Br,En,En+1)}}else T=ln(f,i,Ze,T,!0),gr.addEventListener(m,T,D),vt.push(T),Te&&Te.push(m,Br,En,D)}else T=ln(f,i,Ze,T,!1);const hn=f.outputs;let Bn;if(Ft&&null!==hn&&(Bn=hn[m])){const Yn=Bn.length;if(Yn)for(let gr=0;gr<Yn;gr+=2){const Xc=i[Bn[gr]][Bn[gr+1]].subscribe(T),mv=vt.length;vt.push(T,Xc),Te&&Te.push(m,f.index,mv,-(mv+1))}}}(T,m,m[11],D,r,i,!!c,f),kn}function un(r,i,c,f){try{return!1!==c(f)}catch(m){return Hv(r,m),!1}}function ln(r,i,c,f,m){return function T(D){if(D===Function)return f;const O=2&r.flags?Sr(r.index,i):i;0==(32&i[2])&&lg(O);let H=un(i,0,f,D),ce=T.__ngNextListenerFn__;for(;ce;)H=un(i,0,ce,D)&&H,ce=ce.__ngNextListenerFn__;return m&&!1===H&&(D.preventDefault(),D.returnValue=!1),H}}function In(r=1){return function js(r){return(B.lFrame.contextLView=function bu(r,i){for(;r>0;)i=i[15],r--;return i}(r,B.lFrame.contextLView))[8]}(r)}function gn(r,i){let c=null;const f=function Tv(r){const i=r.attrs;if(null!=i){const c=i.indexOf(5);if(0==(1&c))return i[c+1]}return null}(r);for(let m=0;m<i.length;m++){const T=i[m];if("*"!==T){if(null===f?am(r,T,!0):um(f,T))return m}else c=m}return c}function Er(r){const i=G()[16][6];if(!i.projection){const f=i.projection=ua(r?r.length:1,null),m=f.slice();let T=i.child;for(;null!==T;){const D=r?gn(T,r):0;null!==D&&(m[D]?m[D].projectionNext=T:f[D]=T,m[D]=T),T=T.next}}}function Wn(r,i=0,c){const f=G(),m=Ie(),T=Ul(m,20+r,16,null,c||null);null===T.projection&&(T.projection=i),yr(),64!=(64&T.flags)&&function hc(r,i,c){fd(i[11],0,i,c,tm(r,c,i),xa(c.parent||i[6],c,i))}(m,f,T)}function El(r,i,c,f,m){const T=r[c+1],D=null===i;let O=f?no(T):ku(T),H=!1;for(;0!==O&&(!1===H||D);){const Te=r[O+1];Th(r[O],i)&&(H=!0,r[O+1]=f?Qh(Te):Yh(Te)),O=f?no(Te):ku(Te)}H&&(r[c+1]=f?Yh(T):Qh(T))}function Th(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&ui(r,i)>=0}function Zc(r,i){return function Sl(r,i,c,f){const m=G(),T=Ie(),D=as(2);T.firstUpdatePass&&function vy(r,i,c,f){const m=r.data;if(null===m[c+1]){const T=m[Po()],D=function is(r,i){return i>=r.expandoStartIndex}(r,c);(function Ey(r,i){return 0!=(r.flags&(i?16:32))})(T,f)&&null===i&&!D&&(i=!1),i=function yy(r,i,c,f){const m=function ya(r){const i=B.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let T=f?i.residualClasses:i.residualStyles;if(null===m)0===(f?i.classBindings:i.styleBindings)&&(c=bp(c=pf(null,r,i,c,f),i.attrs,f),T=null);else{const D=i.directiveStylingLast;if(-1===D||r[D]!==m)if(c=pf(m,r,i,c,f),null===T){let H=function f_(r,i,c){const f=c?i.classBindings:i.styleBindings;if(0!==ku(f))return r[no(f)]}(r,i,f);void 0!==H&&Array.isArray(H)&&(H=pf(null,r,i,H[1],f),H=bp(H,i.attrs,f),function p_(r,i,c,f){r[no(c?i.classBindings:i.styleBindings)]=f}(r,i,f,H))}else T=function _y(r,i,c){let f;const m=i.directiveEnd;for(let T=1+i.directiveStylingLast;T<m;T++)f=bp(f,r[T].hostAttrs,c);return bp(f,i.attrs,c)}(r,i,f)}return void 0!==T&&(f?i.residualClasses=T:i.residualStyles=T),c}(m,T,i,f),function qc(r,i,c,f,m,T){let D=T?i.classBindings:i.styleBindings,O=no(D),H=ku(D);r[f]=c;let Te,ce=!1;if(Array.isArray(c)){const Ze=c;Te=Ze[1],(null===Te||ui(Ze,Te)>0)&&(ce=!0)}else Te=c;if(m)if(0!==H){const vt=no(r[O+1]);r[f+1]=md(vt,O),0!==vt&&(r[vt+1]=La(r[vt+1],f)),r[O+1]=function Zh(r,i){return 131071&r|i<<17}(r[O+1],f)}else r[f+1]=md(O,0),0!==O&&(r[O+1]=La(r[O+1],f)),O=f;else r[f+1]=md(H,0),0===O?O=f:r[H+1]=La(r[H+1],f),H=f;ce&&(r[f+1]=Yh(r[f+1])),El(r,Te,f,!0),El(r,Te,f,!1),function Ju(r,i,c,f,m){const T=m?r.residualClasses:r.residualStyles;null!=T&&"string"==typeof i&&ui(T,i)>=0&&(c[f+1]=Qh(c[f+1]))}(i,Te,r,f,T),D=md(O,H),T?i.classBindings=D:i.styleBindings=D}(m,T,i,c,D,f)}}(T,r,D,f),i!==ni&&Qa(m,D,i)&&function nl(r,i,c,f,m,T,D,O){if(!(3&i.type))return;const H=r.data,ce=H[O+1];gf(function cm(r){return 1==(1&r)}(ce)?ev(H,i,c,m,ku(ce),D):void 0)||(gf(T)||function rh(r){return 2==(2&r)}(ce)&&(T=ev(H,null,c,m,O,D)),function gd(r,i,c,f,m){const T=pi(r);if(i)m?T?r.addClass(c,f):c.classList.add(f):T?r.removeClass(c,f):c.classList.remove(f);else{let D=-1===f.indexOf("-")?void 0:De.DashCase;if(null==m)T?r.removeStyle(c,f,D):c.style.removeProperty(f);else{const O="string"==typeof m&&m.endsWith("!important");O&&(m=m.slice(0,-10),D|=De.Important),T?r.setStyle(c,f,m,D):c.style.setProperty(f,m,O?"important":"")}}}(f,D,Vt(Po(),c),m,T))}(T,T.data[Po()],m,m[11],r,m[D+1]=function Ng(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=Y(du(r)))),r}(i,c),f,D)}(r,i,null,!0),Zc}function pf(r,i,c,f,m){let T=null;const D=c.directiveEnd;let O=c.directiveStylingLast;for(-1===O?O=c.directiveStart:O++;O<D&&(T=i[O],f=bp(f,T.hostAttrs,m),T!==r);)O++;return null!==r&&(c.directiveStylingLast=O),f}function bp(r,i,c){const f=c?1:2;let m=-1;if(null!==i)for(let T=0;T<i.length;T++){const D=i[T];"number"==typeof D?m=D:m===f&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Kr(r,D,!!c||i[++T]))}return void 0===r?null:r}function ev(r,i,c,f,m,T){const D=null===i;let O;for(;m>0;){const H=r[m],ce=Array.isArray(H),Te=ce?H[1]:H,Ze=null===Te;let vt=c[m+1];vt===ni&&(vt=Ze?Ye:void 0);let Ft=Ze?Dl(vt,f):Te===f?vt:void 0;if(ce&&!gf(Ft)&&(Ft=Dl(H,f)),gf(Ft)&&(O=Ft,D))return O;const hn=r[m+1];m=D?no(hn):ku(hn)}if(null!==i){let H=T?i.residualClasses:i.residualStyles;null!=H&&(O=Dl(H,f))}return O}function gf(r){return void 0!==r}function tv(r,i=""){const c=G(),f=Ie(),m=r+20,T=f.firstCreatePass?Ul(f,m,1,i,null):f.data[m],D=c[m]=function qn(r,i){return pi(r)?r.createText(i):r.createTextNode(i)}(c[11],i);Xd(f,c,D,T),Gn(T,!1)}function vc(r){return Md("",r,""),vc}function Md(r,i,c){const f=G(),m=function cf(r,i,c,f){return Qa(r,_s(),c)?i+He(c)+f:ni}(f,r,i,c);return m!==ni&&Vl(f,Po(),m),Md}function Go(r,i,c,f,m){const T=G(),D=Cd(T,r,i,c,f,m);return D!==ni&&Vl(T,Po(),D),Go}const Od=void 0;var rl=["en",[["a","p"],["AM","PM"],Od],[["AM","PM"],Od,Od],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Od,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Od,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Od,"{1} 'at' {0}",Od],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _c(r){const c=Math.floor(Math.abs(r)),f=r.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===f?1:5}];let $o={};function Bg(r){const i=function xh(r){return r.toLowerCase().replace(/_/g,"-")}(r);let c=Ha(i);if(c)return c;const f=i.split("-")[0];if(c=Ha(f),c)return c;if("en"===f)return rl;throw new Error(`Missing locale data for the locale "${r}".`)}function bc(r){return Bg(r)[Or.PluralCase]}function Ha(r){return r in $o||($o[r]=cr.ng&&cr.ng.common&&cr.ng.common.locales&&cr.ng.common.locales[r]),$o[r]}var Or=(()=>((Or=Or||{})[Or.LocaleId=0]="LocaleId",Or[Or.DayPeriodsFormat=1]="DayPeriodsFormat",Or[Or.DayPeriodsStandalone=2]="DayPeriodsStandalone",Or[Or.DaysFormat=3]="DaysFormat",Or[Or.DaysStandalone=4]="DaysStandalone",Or[Or.MonthsFormat=5]="MonthsFormat",Or[Or.MonthsStandalone=6]="MonthsStandalone",Or[Or.Eras=7]="Eras",Or[Or.FirstDayOfWeek=8]="FirstDayOfWeek",Or[Or.WeekendRange=9]="WeekendRange",Or[Or.DateFormat=10]="DateFormat",Or[Or.TimeFormat=11]="TimeFormat",Or[Or.DateTimeFormat=12]="DateTimeFormat",Or[Or.NumberSymbols=13]="NumberSymbols",Or[Or.NumberFormats=14]="NumberFormats",Or[Or.CurrencyCode=15]="CurrencyCode",Or[Or.CurrencySymbol=16]="CurrencySymbol",Or[Or.CurrencyName=17]="CurrencyName",Or[Or.Currencies=18]="Currencies",Or[Or.Directionality=19]="Directionality",Or[Or.PluralCase=20]="PluralCase",Or[Or.ExtraData=21]="ExtraData",Or))();const Kl="en-US";let Py=Kl;function I_(r,i,c,f,m){if(r=Oe(r),Array.isArray(r))for(let T=0;T<r.length;T++)I_(r[T],i,c,f,m);else{const T=Ie(),D=G();let O=ja(r)?r:Oe(r.provide),H=Om(r);const ce=lt(),Te=1048575&ce.providerIndexes,Ze=ce.directiveStart,vt=ce.providerIndexes>>20;if(ja(r)||!r.multi){const Ft=new bs(H,m,a),hn=ye(O,i,m?Te:Te+vt,Ze);-1===hn?(en(se(ce,D),T,O),D_(T,r,i.length),i.push(O),ce.directiveStart++,ce.directiveEnd++,m&&(ce.providerIndexes+=1048576),c.push(Ft),D.push(Ft)):(c[hn]=Ft,D[hn]=Ft)}else{const Ft=ye(O,i,Te+vt,Ze),hn=ye(O,i,Te,Te+vt),Bn=Ft>=0&&c[Ft],Yn=hn>=0&&c[hn];if(m&&!Yn||!m&&!Bn){en(se(ce,D),T,O);const gr=function V(r,i,c,f,m){const T=new bs(r,c,a);return T.multi=[],T.index=i,T.componentProviders=0,A_(T,m,f&&!c),T}(m?L:I,c.length,m,f,H);!m&&Yn&&(c[hn].providerFactory=gr),D_(T,r,i.length,0),i.push(O),ce.directiveStart++,ce.directiveEnd++,m&&(ce.providerIndexes+=1048576),c.push(gr),D.push(gr)}else D_(T,r,Ft>-1?Ft:hn,A_(c[m?hn:Ft],H,!m&&f));!m&&f&&Yn&&c[hn].componentProviders++}}}function D_(r,i,c,f){const m=ja(i),T=function mu(r){return!!r.useClass}(i);if(m||T){const H=(T?Oe(i.useClass):i).prototype.ngOnDestroy;if(H){const ce=r.destroyHooks||(r.destroyHooks=[]);if(!m&&i.multi){const Te=ce.indexOf(c);-1===Te?ce.push(c,[f,H]):ce[Te+1].push(f,H)}else ce.push(c,H)}}}function A_(r,i,c){return c&&r.componentProviders++,r.multi.push(i)-1}function ye(r,i,c,f){for(let m=c;m<f;m++)if(i[m]===r)return m;return-1}function I(r,i,c,f){return N(this.multi,[])}function L(r,i,c,f){const m=this.multi;let T;if(this.providerFactory){const D=this.providerFactory.componentProviders,O=xl(c,c[1],this.providerFactory.index,f);T=O.slice(0,D),N(m,T);for(let H=D;H<O.length;H++)T.push(O[H])}else T=[],N(m,T);return T}function N(r,i){for(let c=0;c<r.length;c++)i.push((0,r[c])());return i}function re(r,i=[]){return c=>{c.providersResolver=(f,m)=>function E0(r,i,c){const f=Ie();if(f.firstCreatePass){const m=vo(r);I_(c,f.data,f.blueprint,m,!0),I_(i,f.data,f.blueprint,m,!1)}}(f,m?m(r):r,i)}}class Fe{}class Pt{resolveComponentFactory(i){throw function nt(r){const i=Error(`No component factory found for ${Y(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let an=(()=>{class r{}return r.NULL=new Pt,r})();function zn(){return nr(lt(),G())}function nr(r,i){return new On(qt(r,i))}let On=(()=>{class r{constructor(c){this.nativeElement=c}}return r.__NG_ELEMENT_ID__=zn,r})();function $r(r){return r instanceof On?r.nativeElement:r}class Nu{}let Ap=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function e0(){const r=G(),c=Sr(lt().index,r);return function k_(r){return r[11]}(Xi(c)?c:r)}(),r})(),t0=(()=>{class r{}return r.\u0275prov=Nt({token:r,providedIn:"root",factory:()=>null}),r})();class M_{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const jy=new M_("13.3.10"),Uy={};function Fo(r,i,c,f,m=!1){for(;null!==c;){const T=i[c.index];if(null!==T&&f.push(z(T)),so(T))for(let O=10;O<T.length;O++){const H=T[O],ce=H[1].firstChild;null!==ce&&Fo(H[1],H,ce,f)}const D=c.type;if(8&D)Fo(r,i,c.child,f);else if(32&D){const O=Ht(c,i);let H;for(;H=O();)f.push(H)}else if(16&D){const O=Jd(i,c);if(Array.isArray(O))f.push(...O);else{const H=lr(i[16]);Fo(H[1],H,O,f,!0)}}c=m?c.projectionNext:c.next}return f}class Yg{constructor(i,c){this._lView=i,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,c=i[1];return Fo(c,i,c.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(so(i)){const c=i[8],f=c?c.indexOf(this):-1;f>-1&&(Fc(i,f),aa(c,f))}this._attachedToViewContainer=!1}Wf(this._lView[1],this._lView)}onDestroy(i){Tm(this._lView[1],this._lView,null,i)}markForCheck(){lg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Dm(r,i,c){const f=i[10];f.begin&&f.begin();try{Jh(r,i,r.template,c)}catch(m){throw Hv(i,m),m}finally{f.end&&f.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ft(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function em(r,i){$h(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ft(902,"");this._appRef=i}}class kp extends Yg{constructor(i){super(i),this._view=i}detectChanges(){cg(this._view)}checkNoChanges(){}get context(){return null}}class ub extends an{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const c=bt(i);return new S0(c,this.ngModule)}}function lb(r){const i=[];for(let c in r)r.hasOwnProperty(c)&&i.push({propName:r[c],templateName:c});return i}class S0 extends Fe{constructor(i,c){super(),this.componentDef=i,this.ngModule=c,this.componentType=i.type,this.selector=function nh(r){return r.map(th).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return lb(this.componentDef.inputs)}get outputs(){return lb(this.componentDef.outputs)}create(i,c,f,m){const T=(m=m||this.ngModule)?function AT(r,i){return{get:(c,f,m)=>{const T=r.get(c,Uy,m);return T!==Uy||f===Uy?T:i.get(c,f,m)}}}(i,m.injector):i,D=T.get(Nu,Z),O=T.get(t0,null),H=D.createRenderer(null,this.componentDef),ce=this.componentDef.selectors[0][0]||"div",Te=f?function bm(r,i,c){if(pi(r))return r.selectRootElement(i,c===Rr.ShadowDom);let f="string"==typeof i?r.querySelector(i):i;return f.textContent="",f}(H,f,this.componentDef.encapsulation):hd(D.createRenderer(null,this.componentDef),ce,function DT(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ce)),Ze=this.componentDef.onPush?576:528,vt=function gc(r,i){return{components:[],scheduler:r||zd,clean:rf,playerHandler:i||null,flags:0}}(),Ft=Ho(0,null,null,1,0,null,null,null,null,null),hn=uh(null,Ft,vt,Ze,null,null,D,H,O,T);let Bn,Yn;Bo(hn);try{const gr=function ty(r,i,c,f,m,T){const D=c[1];c[20]=r;const H=Ul(D,20,2,"#host",null),ce=H.mergedAttrs=i.hostAttrs;null!==ce&&(hg(H,ce,!0),null!==r&&(iu(m,r,ce),null!==H.classes&&Wh(m,r,H.classes),null!==H.styles&&eh(m,r,H.styles)));const Te=f.createRenderer(r,i),Ze=uh(c,eg(i),null,i.onPush?64:16,c[20],H,f,Te,T||null,null);return D.firstCreatePass&&(en(se(H,c),D,i.type),ef(D,H),Fv(H,c.length,1)),_l(c,Ze),c[20]=Ze}(Te,this.componentDef,hn,D,H);if(Te)if(f)iu(H,Te,["ng-version",jy.full]);else{const{attrs:En,classes:Br}=function lm(r){const i=[],c=[];let f=1,m=2;for(;f<r.length;){let T=r[f];if("string"==typeof T)2===m?""!==T&&i.push(T,r[++f]):8===m&&c.push(T);else{if(!Ya(m))break;m=T}f++}return{attrs:i,classes:c}}(this.componentDef.selectors[0]);En&&iu(H,Te,En),Br&&Br.length>0&&Wh(H,Te,Br.join(" "))}if(Yn=br(Ft,20),void 0!==c){const En=Yn.projection=[];for(let Br=0;Br<this.ngContentSelectors.length;Br++){const Qi=c[Br];En.push(null!=Qi?Array.from(Qi):null)}}Bn=function vg(r,i,c,f,m){const T=c[1],D=function Sm(r,i,c){const f=lt();r.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),jv(r,f,i,lh(r,i,1,null),c));const m=xl(i,r,f.directiveStart,f);Co(m,i);const T=qt(f,i);return T&&Co(T,i),m}(T,c,i);if(f.components.push(D),r[8]=D,m&&m.forEach(H=>H(D,i)),i.contentQueries){const H=lt();i.contentQueries(1,D,H.directiveStart)}const O=lt();return!T.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(nu(O.index),wm(c[1],O,0,O.directiveStart,O.directiveEnd,i),sg(i,D)),D}(gr,this.componentDef,hn,vt,[Bm]),ch(Ft,hn,null)}finally{Aa()}return new MT(this.componentType,Bn,nr(Yn,hn),hn,Yn)}}class MT extends class ae{}{constructor(i,c,f,m,T){super(),this.location=f,this._rootLView=m,this._tNode=T,this.instance=c,this.hostView=this.changeDetectorRef=new kp(m),this.componentType=i}get injector(){return new Bu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class By{}class cb{}const Vy=new Map;class fb extends By{constructor(i,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ub(this);const f=Zn(i);this._bootstrapComponents=C(f.bootstrap),this._r3Injector=bd(i,c,[{provide:By,useValue:this},{provide:an,useValue:this.componentFactoryResolver}],Y(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,c=Xu.THROW_IF_NOT_FOUND,f=Mn.Default){return i===Xu||i===By||i===sf?this:this._r3Injector.get(i,c,f)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class w0 extends cb{constructor(i){super(),this.moduleType=i,null!==Zn(i)&&function OT(r){const i=new Set;!function c(f){const m=Zn(f,!0),T=m.id;null!==T&&(function db(r,i,c){if(i&&i!==c)throw new Error(`Duplicate module registered for ${r} - ${Y(i)} vs ${Y(i.name)}`)}(T,Vy.get(T),f),Vy.set(T,f));const D=C(m.imports);for(const O of D)i.has(O)||(i.add(O),c(O))}(r)}(i)}create(i){return new fb(this.moduleType,i)}}function pb(r,i,c){const f=Yr()+r,m=G();return m[f]===ni?Hl(m,f,c?i.call(c):i()):function vh(r,i){return r[i]}(m,f)}function gb(r,i,c,f){return vb(G(),Yr(),r,i,c,f)}function mb(r,i,c,f,m){return function yb(r,i,c,f,m,T,D){const O=i+c;return zc(r,O,m,T)?Hl(r,O+2,D?f.call(D,m,T):f(m,T)):P_(r,O+2)}(G(),Yr(),r,i,c,f,m)}function P_(r,i){const c=r[i];return c===ni?void 0:c}function vb(r,i,c,f,m,T){const D=i+c;return Qa(r,D,m)?Hl(r,D+1,T?f.call(T,m):f(m)):P_(r,D+1)}function Eb(r,i){const c=Ie();let f;const m=r+20;c.firstCreatePass?(f=function VT(r,i){if(i)for(let c=i.length-1;c>=0;c--){const f=i[c];if(r===f.name)return f}}(i,c.pipeRegistry),c.data[m]=f,f.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(m,f.onDestroy)):f=c.data[m];const T=f.factory||(f.factory=Ci(f.type)),D=Cn(a);try{const O=ju(!1),H=T();return ju(O),function Sg(r,i,c,f){c>=r.data.length&&(r.data[c]=null,r.blueprint[c]=null),i[c]=f}(c,G(),m,H),H}finally{Cn(D)}}function Sb(r,i,c){const f=r+20,m=G(),T=ar(m,f);return function O_(r,i){return r[1].data[i].pure}(m,f)?vb(m,Yr(),i,T.transform,c,T):T.transform(c)}function C0(r){return i=>{setTimeout(r,void 0,i)}}const Tf=class zT extends E.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,c,f){var m,T,D;let O=i,H=c||(()=>null),ce=f;if(i&&"object"==typeof i){const Ze=i;O=null===(m=Ze.next)||void 0===m?void 0:m.bind(Ze),H=null===(T=Ze.error)||void 0===T?void 0:T.bind(Ze),ce=null===(D=Ze.complete)||void 0===D?void 0:D.bind(Ze)}this.__isAsync&&(H=C0(H),O&&(O=C0(O)),ce&&(ce=C0(ce)));const Te=super.subscribe({next:O,error:H,complete:ce});return i instanceof k.w0&&i.add(Te),Te}};function qT(){return this._results[wd()]()}class n0{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=wd(),f=n0.prototype;f[c]||(f[c]=qT)}get changes(){return this._changes||(this._changes=new Tf)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,c){return this._results.reduce(i,c)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,c){const f=this;f.dirty=!1;const m=Ro(i);(this._changesDetected=!function Ld(r,i,c){if(r.length!==i.length)return!1;for(let f=0;f<r.length;f++){let m=r[f],T=i[f];if(c&&(m=c(m),T=c(T)),T!==m)return!1}return!0}(f._results,m,c))&&(f._results=m,f.length=m.length,f.last=m[this.length-1],f.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let R_=(()=>{class r{}return r.__NG_ELEMENT_ID__=YT,r})();const KT=R_,ZT=class extends KT{constructor(i,c,f){super(),this._declarationLView=i,this._declarationTContainer=c,this.elementRef=f}createEmbeddedView(i){const c=this._declarationTContainer.tViews,f=uh(this._declarationLView,c,i,16,null,c.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(f[19]=T.createEmbeddedView(c)),ch(c,f,i),new Yg(f)}};function YT(){return r0(lt(),G())}function r0(r,i){return 4&r.type?new ZT(i,r,nr(r,i)):null}let s0=(()=>{class r{}return r.__NG_ELEMENT_ID__=QT,r})();function QT(){return xb(lt(),G())}const XT=s0,wb=class extends XT{constructor(i,c,f){super(),this._lContainer=i,this._hostTNode=c,this._hostLView=f}get element(){return nr(this._hostTNode,this._hostLView)}get injector(){return new Bu(this._hostTNode,this._hostLView)}get parentInjector(){const i=st(this._hostTNode,this._hostLView);if(Zo(i)){const c=su(i,this._hostLView),f=Yo(i);return new Bu(c[1].data[f+8],c)}return new Bu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const c=Cb(this._lContainer);return null!==c&&c[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,c,f){const m=i.createEmbeddedView(c||{});return this.insert(m,f),m}createComponent(i,c,f,m,T){const D=i&&!function ns(r){return"function"==typeof r}(i);let O;if(D)O=c;else{const Ze=c||{};O=Ze.index,f=Ze.injector,m=Ze.projectableNodes,T=Ze.ngModuleRef}const H=D?i:new S0(bt(i)),ce=f||this.parentInjector;if(!T&&null==H.ngModule){const vt=(D?ce:this.parentInjector).get(By,null);vt&&(T=vt)}const Te=H.create(ce,m,void 0,T);return this.insert(Te.hostView,O),Te}insert(i,c){const f=i._lView,m=f[1];if(function Ti(r){return so(r[3])}(f)){const Te=this.indexOf(i);if(-1!==Te)this.detach(Te);else{const Ze=f[3],vt=new wb(Ze,Ze[6],Ze[3]);vt.detach(vt.indexOf(i))}}const T=this._adjustIndex(c),D=this._lContainer;!function Zd(r,i,c,f){const m=10+f,T=c.length;f>0&&(c[m-1][4]=i),f<T-10?(i[4]=c[m],Cc(c,10+f,i)):(c.push(i),i[4]=null),i[3]=c;const D=i[17];null!==D&&c!==D&&function Vp(r,i){const c=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===c?r[9]=[i]:c.push(i)}(D,i);const O=i[19];null!==O&&O.insertView(r),i[2]|=128}(m,f,D,T);const O=dc(T,D),H=f[11],ce=Yu(H,D[7]);return null!==ce&&function Kd(r,i,c,f,m,T){f[0]=m,f[6]=i,$h(r,f,c,1,m,T)}(m,D[6],H,f,ce,O),i.attachToViewContainerRef(),Cc(x0(D),T,i),i}move(i,c){return this.insert(i,c)}indexOf(i){const c=Cb(this._lContainer);return null!==c?c.indexOf(i):-1}remove(i){const c=this._adjustIndex(i,-1),f=Fc(this._lContainer,c);f&&(aa(x0(this._lContainer),c),Wf(f[1],f))}detach(i){const c=this._adjustIndex(i,-1),f=Fc(this._lContainer,c);return f&&null!=aa(x0(this._lContainer),c)?new Yg(f):null}_adjustIndex(i,c=0){return null==i?this.length+c:i}};function Cb(r){return r[8]}function x0(r){return r[8]||(r[8]=[])}function xb(r,i){let c;const f=i[r.index];if(so(f))c=f;else{let m;if(8&r.type)m=z(f);else{const T=i[11];m=T.createComment("");const D=qt(r,i);ha(T,Yu(T,D),m,function rm(r,i){return pi(r)?r.nextSibling(i):i.nextSibling}(T,D),!1)}i[r.index]=c=hh(f,i,m,r),_l(i,c)}return new wb(c,r,i)}class I0{constructor(i){this.queryList=i,this.matches=null}clone(){return new I0(this.queryList)}setDirty(){this.queryList.setDirty()}}class D0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const c=i.queries;if(null!==c){const f=null!==i.contentQueries?i.contentQueries[0]:c.length,m=[];for(let T=0;T<f;T++){const D=c.getByIndex(T);m.push(this.queries[D.indexInDeclarationView].clone())}return new D0(m)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let c=0;c<this.queries.length;c++)null!==Nb(i,c).matches&&this.queries[c].setDirty()}}class Ib{constructor(i,c,f=null){this.predicate=i,this.flags=c,this.read=f}}class A0{constructor(i=[]){this.queries=i}elementStart(i,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(i,c)}elementEnd(i){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(i)}embeddedTView(i){let c=null;for(let f=0;f<this.length;f++){const m=null!==c?c.length:0,T=this.getByIndex(f).embeddedTView(i,m);T&&(T.indexInDeclarationView=f,null!==c?c.push(T):c=[T])}return null!==c?new A0(c):null}template(i,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(i,c)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class k0{constructor(i,c=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(i,c){this.isApplyingToNode(c)&&this.matchTNode(i,c)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,c){this.elementStart(i,c)}embeddedTView(i,c){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,c),new k0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let f=i.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(i,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let m=0;m<f.length;m++){const T=f[m];this.matchTNodeWithReadOption(i,c,tE(c,T)),this.matchTNodeWithReadOption(i,c,ou(c,i,T,!1,!1))}else f===R_?4&c.type&&this.matchTNodeWithReadOption(i,c,-1):this.matchTNodeWithReadOption(i,c,ou(c,i,f,!1,!1))}matchTNodeWithReadOption(i,c,f){if(null!==f){const m=this.metadata.read;if(null!==m)if(m===On||m===s0||m===R_&&4&c.type)this.addMatch(c.index,-2);else{const T=ou(c,i,m,!1,!1);null!==T&&this.addMatch(c.index,T)}else this.addMatch(c.index,f)}}addMatch(i,c){null===this.matches?this.matches=[i,c]:this.matches.push(i,c)}}function tE(r,i){const c=r.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===i)return c[f+1];return null}function rE(r,i,c,f){return-1===c?function nE(r,i){return 11&r.type?nr(r,i):4&r.type?r0(r,i):null}(i,r):-2===c?function iE(r,i,c){return c===On?nr(i,r):c===R_?r0(i,r):c===s0?xb(i,r):void 0}(r,i,f):xl(r,r[1],c,i)}function Db(r,i,c,f){const m=i[19].queries[f];if(null===m.matches){const T=r.data,D=c.matches,O=[];for(let H=0;H<D.length;H+=2){const ce=D[H];O.push(ce<0?null:rE(i,T[ce],D[H+1],c.metadata.read))}m.matches=O}return m.matches}function M0(r,i,c,f){const m=r.queries.getByIndex(c),T=m.matches;if(null!==T){const D=Db(r,i,m,c);for(let O=0;O<T.length;O+=2){const H=T[O];if(H>0)f.push(D[O/2]);else{const ce=T[O+1],Te=i[-H];for(let Ze=10;Ze<Te.length;Ze++){const vt=Te[Ze];vt[17]===vt[3]&&M0(vt[1],vt,ce,f)}if(null!==Te[9]){const Ze=Te[9];for(let vt=0;vt<Ze.length;vt++){const Ft=Ze[vt];M0(Ft[1],Ft,ce,f)}}}}}return f}function Ab(r){const i=G(),c=Ie(),f=Fr();Ql(f+1);const m=Nb(c,f);if(r.dirty&&jr(i)===(2==(2&m.metadata.flags))){if(null===m.matches)r.reset([]);else{const T=m.crossesNgTemplate?M0(c,i,f,[]):Db(c,i,m,f);r.reset(T,$r),r.notifyOnChanges()}return!0}return!1}function kb(r,i,c){const f=Ie();f.firstCreatePass&&(Rb(f,new Ib(r,i,c),-1),2==(2&i)&&(f.staticViewQueries=!0)),Ob(f,G(),i)}function Mb(r,i,c,f){const m=Ie();if(m.firstCreatePass){const T=lt();Rb(m,new Ib(i,c,f),T.index),function oE(r,i){const c=r.contentQueries||(r.contentQueries=[]);i!==(c.length?c[c.length-1]:-1)&&c.push(r.queries.length-1,i)}(m,r),2==(2&c)&&(m.staticContentQueries=!0)}Ob(m,G(),c)}function Pb(){return function sE(r,i){return r[19].queries[i].queryList}(G(),Fr())}function Ob(r,i,c){const f=new n0(4==(4&c));Tm(r,i,f,f.destroy),null===i[19]&&(i[19]=new D0),i[19].queries.push(new I0(f))}function Rb(r,i,c){null===r.queries&&(r.queries=new A0),r.queries.track(new k0(i,c))}function Nb(r,i){return r.queries.getByIndex(i)}function Lb(r,i){return r0(r,i)}function u0(...r){}const Jb=new Ei("Application Initializer");let F0=(()=>{class r{constructor(c){this.appInits=c,this.resolve=u0,this.reject=u0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,m)=>{this.resolve=f,this.reject=m})}runInitializers(){if(this.initialized)return;const c=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const T=this.appInits[m]();if(Ve(T))c.push(T);else if(vn(T)){const D=new Promise((O,H)=>{T.subscribe({complete:O,error:H})});c.push(D)}}Promise.all(c).then(()=>{f()}).catch(m=>{this.reject(m)}),0===c.length&&f(),this.initialized=!0}}return r.\u0275fac=function(c){return new(c||r)(or(Jb,8))},r.\u0275prov=Nt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const eT=new Ei("AppId",{providedIn:"root",factory:function tT(){return`${j0()}${j0()}${j0()}`}});function j0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nT=new Ei("Platform Initializer"),SE=new Ei("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rT=new Ei("appBootstrapListener");let wE=(()=>{class r{log(c){console.log(c)}warn(c){console.warn(c)}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Nt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const U0=new Ei("LocaleId",{providedIn:"root",factory:()=>Si(U0,Mn.Optional|Mn.SkipSelf)||function CE(){return"undefined"!=typeof $localize&&$localize.locale||Kl}()}),xE=new Ei("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class IE{constructor(i,c){this.ngModuleFactory=i,this.componentFactories=c}}let DE=(()=>{class r{compileModuleSync(c){return new w0(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const f=this.compileModuleSync(c),T=C(Zn(c).declarations).reduce((D,O)=>{const H=bt(O);return H&&D.push(new S0(H)),D},[]);return new IE(f,T)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Nt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const kE=(()=>Promise.resolve(0))();function B0(r){"undefined"==typeof Zone?kE.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class kh{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tf(!1),this.onMicrotaskEmpty=new Tf(!1),this.onStable=new Tf(!1),this.onError=new Tf(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!f&&c,m.shouldCoalesceRunChangeDetection=f,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function ME(){let r=cr.requestAnimationFrame,i=cr.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c);const f=i[Zone.__symbol__("OriginalDelegate")];f&&(i=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function RE(r){const i=()=>{!function OE(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(cr,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,H0(r),r.isCheckStableRunning=!0,V0(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),H0(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,m,T,D,O)=>{try{return iT(r),c.invokeTask(m,T,D,O)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===T.type||r.shouldCoalesceRunChangeDetection)&&i(),sT(r)}},onInvoke:(c,f,m,T,D,O,H)=>{try{return iT(r),c.invoke(m,T,D,O,H)}finally{r.shouldCoalesceRunChangeDetection&&i(),sT(r)}},onHasTask:(c,f,m,T)=>{c.hasTask(m,T),f===m&&("microTask"==T.change?(r._hasPendingMicrotasks=T.microTask,H0(r),V0(r)):"macroTask"==T.change&&(r.hasPendingMacrotasks=T.macroTask))},onHandleError:(c,f,m,T)=>(c.handleError(m,T),r.runOutsideAngular(()=>r.onError.emit(T)),!1)})}(m)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!kh.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(kh.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,c,f){return this._inner.run(i,c,f)}runTask(i,c,f,m){const T=this._inner,D=T.scheduleEventTask("NgZoneEvent: "+m,i,PE,u0,u0);try{return T.runTask(D,c,f)}finally{T.cancelTask(D)}}runGuarded(i,c,f){return this._inner.runGuarded(i,c,f)}runOutsideAngular(i){return this._outer.run(i)}}const PE={};function V0(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function H0(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function iT(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function sT(r){r._nesting--,V0(r)}class NE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tf,this.onMicrotaskEmpty=new Tf,this.onStable=new Tf,this.onError=new Tf}run(i,c,f){return i.apply(c,f)}runGuarded(i,c,f){return i.apply(c,f)}runOutsideAngular(i){return i()}runTask(i,c,f,m){return i.apply(c,f)}}let oT=(()=>{class r{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{kh.assertNotInAngularZone(),B0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())B0(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(c)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,f,m){let T=-1;f&&f>0&&(T=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==T),c(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:c,timeoutId:T,updateCb:m})}whenStable(c,f,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,f,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,f,m){return[]}}return r.\u0275fac=function(c){return new(c||r)(or(kh))},r.\u0275prov=Nt({token:r,factory:r.\u0275fac}),r})(),LE=(()=>{class r{constructor(){this._applications=new Map,G0.addToWindow(this)}registerApplication(c,f){this._applications.set(c,f)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,f=!0){return G0.findTestabilityInTree(this,c,f)}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Nt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();class FE{addToWindow(i){}findTestabilityInTree(i,c,f){return null}}function jE(r){G0=r}let G0=new FE,pv=null;const aT=new Ei("AllowMultipleToken"),uT=new Ei("PlatformOnDestroy");class VE{constructor(i,c){this.name=i,this.token=c}}function lT(r,i,c=[]){const f=`Platform: ${i}`,m=new Ei(f);return(T=[])=>{let D=$0();if(!D||D.injector.get(aT,!1)){const O=[...c,...T,{provide:m,useValue:!0}];r?r(O):function HE(r){if(pv&&!pv.get(aT,!1))throw new ft(400,"");pv=r;const i=r.get(cT),c=r.get(nT,null);c&&c.forEach(f=>f())}(function $E(r=[],i){return Xu.create({name:i,providers:[{provide:Mm,useValue:"platform"},{provide:uT,useValue:()=>pv=null},...r]})}(O,f))}return function GE(r){const i=$0();if(!i)throw new ft(401,"");return i}()}}function $0(){var r;return null!==(r=null==pv?void 0:pv.get(cT))&&void 0!==r?r:null}let cT=(()=>{class r{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,f){const O=function WE(r,i){let c;return c="noop"===r?new NE:("zone.js"===r?void 0:r)||new kh({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),c}(f?f.ngZone:void 0,{ngZoneEventCoalescing:f&&f.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:f&&f.ngZoneRunCoalescing||!1}),H=[{provide:kh,useValue:O}];return O.run(()=>{const ce=Xu.create({providers:H,parent:this.injector,name:c.moduleType.name}),Te=c.create(ce),Ze=Te.injector.get(cd,null);if(!Ze)throw new ft(402,"");return O.runOutsideAngular(()=>{const vt=O.onError.subscribe({next:Ft=>{Ze.handleError(Ft)}});Te.onDestroy(()=>{z0(this._modules,Te),vt.unsubscribe()})}),function zE(r,i,c){try{const f=c();return Ve(f)?f.catch(m=>{throw i.runOutsideAngular(()=>r.handleError(m)),m}):f}catch(f){throw i.runOutsideAngular(()=>r.handleError(f)),f}}(Ze,O,()=>{const vt=Te.injector.get(F0);return vt.runInitializers(),vt.donePromise.then(()=>(function Gg(r){Dt(r,"Expected localeId to be defined"),"string"==typeof r&&(Py=r.toLowerCase().replace(/_/g,"-"))}(Te.injector.get(U0,Kl)||Kl),this._moduleDoBootstrap(Te),Te))})})}bootstrapModule(c,f=[]){const m=dT({},f);return function UE(r,i,c){const f=new w0(c);return Promise.resolve(f)}(0,0,c).then(T=>this.bootstrapModuleFactory(T,m))}_moduleDoBootstrap(c){const f=c.injector.get(W0);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(m=>f.bootstrap(m));else{if(!c.instance.ngDoBootstrap)throw new ft(403,"");c.instance.ngDoBootstrap(f)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ft(404,"");this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const c=this._injector.get(uT,null);null==c||c(),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(c){return new(c||r)(or(Xu))},r.\u0275prov=Nt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function dT(r,i){return Array.isArray(i)?i.reduce(dT,r):Object.assign(Object.assign({},r),i)}let W0=(()=>{class r{constructor(c,f,m,T){this._zone=c,this._injector=f,this._exceptionHandler=m,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new oe.y(H=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{H.next(this._stable),H.complete()})}),O=new oe.y(H=>{let ce;this._zone.runOutsideAngular(()=>{ce=this._zone.onStable.subscribe(()=>{kh.assertNotInAngularZone(),B0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,H.next(!0))})})});const Te=this._zone.onUnstable.subscribe(()=>{kh.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{H.next(!1)}))});return()=>{ce.unsubscribe(),Te.unsubscribe()}});this.isStable=(0,Ne.T)(D,O.pipe((0,Pe.B)()))}bootstrap(c,f){if(!this._initStatus.done)throw new ft(405,"");let m;m=c instanceof Fe?c:this._injector.get(an).resolveComponentFactory(c),this.componentTypes.push(m.componentType);const T=function BE(r){return r.isBoundToModule}(m)?void 0:this._injector.get(By),O=m.create(Xu.NULL,[],f||m.selector,T),H=O.location.nativeElement,ce=O.injector.get(oT,null),Te=ce&&O.injector.get(LE);return ce&&Te&&Te.registerApplication(H,ce),O.onDestroy(()=>{this.detachView(O.hostView),z0(this.components,O),Te&&Te.unregisterApplication(H)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new ft(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const f=c;this._views.push(f),f.attachToAppRef(this)}detachView(c){const f=c;z0(this._views,f),f.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(rT,[]).concat(this._bootstrapListeners).forEach(m=>m(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(c){return new(c||r)(or(kh),or(Xu),or(cd),or(F0))},r.\u0275prov=Nt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function z0(r,i){const c=r.indexOf(i);c>-1&&r.splice(c,1)}let fT=!0,pT=!1;function KE(){return pT=!0,fT}function ZE(){if(pT)throw new Error("Cannot enable prod mode after platform setup.");fT=!1}let YE=(()=>{class r{}return r.__NG_ELEMENT_ID__=QE,r})();function QE(r){return function XE(r,i,c){if(ss(r)&&!c){const f=Sr(r.index,i);return new Yg(f,f)}return 47&r.type?new Yg(i[16],i):null}(lt(),G(),16==(16&r))}class yT{constructor(){}supports(i){return up(i)}create(i){return new iS(i)}}const rS=(r,i)=>i;class iS{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||rS}forEachItem(i){let c;for(c=this._itHead;null!==c;c=c._next)i(c)}forEachOperation(i){let c=this._itHead,f=this._removalsHead,m=0,T=null;for(;c||f;){const D=!f||c&&c.currentIndex<bT(f,m,T)?c:f,O=bT(D,m,T),H=D.currentIndex;if(D===f)m--,f=f._nextRemoved;else if(c=c._next,null==D.previousIndex)m++;else{T||(T=[]);const ce=O-m,Te=H-m;if(ce!=Te){for(let vt=0;vt<ce;vt++){const Ft=vt<T.length?T[vt]:T[vt]=0,hn=Ft+vt;Te<=hn&&hn<ce&&(T[vt]=Ft+1)}T[D.previousIndex]=Te-ce}}O!==H&&i(D,O,H)}}forEachPreviousItem(i){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)i(c)}forEachAddedItem(i){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)i(c)}forEachMovedItem(i){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)i(c)}forEachRemovedItem(i){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)i(c)}forEachIdentityChange(i){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)i(c)}diff(i){if(null==i&&(i=[]),!up(i))throw new ft(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let m,T,D,c=this._itHead,f=!1;if(Array.isArray(i)){this.length=i.length;for(let O=0;O<this.length;O++)T=i[O],D=this._trackByFn(O,T),null!==c&&Object.is(c.trackById,D)?(f&&(c=this._verifyReinsertion(c,T,D,O)),Object.is(c.item,T)||this._addIdentityChange(c,T)):(c=this._mismatch(c,T,D,O),f=!0),c=c._next}else m=0,function Ua(r,i){if(Array.isArray(r))for(let c=0;c<r.length;c++)i(r[c]);else{const c=r[wd()]();let f;for(;!(f=c.next()).done;)i(f.value)}}(i,O=>{D=this._trackByFn(m,O),null!==c&&Object.is(c.trackById,D)?(f&&(c=this._verifyReinsertion(c,O,D,m)),Object.is(c.item,O)||this._addIdentityChange(c,O)):(c=this._mismatch(c,O,D,m),f=!0),c=c._next,m++}),this.length=m;return this._truncate(c),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,c,f,m){let T;return null===i?T=this._itTail:(T=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(i.item,c)||this._addIdentityChange(i,c),this._reinsertAfter(i,T,m)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(f,m))?(Object.is(i.item,c)||this._addIdentityChange(i,c),this._moveAfter(i,T,m)):i=this._addAfter(new sS(c,f),T,m),i}_verifyReinsertion(i,c,f,m){let T=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==T?i=this._reinsertAfter(T,i._prev,m):i.currentIndex!=m&&(i.currentIndex=m,this._addToMoves(i,m)),i}_truncate(i){for(;null!==i;){const c=i._next;this._addToRemovals(this._unlink(i)),i=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const m=i._prevRemoved,T=i._nextRemoved;return null===m?this._removalsHead=T:m._nextRemoved=T,null===T?this._removalsTail=m:T._prevRemoved=m,this._insertAfter(i,c,f),this._addToMoves(i,f),i}_moveAfter(i,c,f){return this._unlink(i),this._insertAfter(i,c,f),this._addToMoves(i,f),i}_addAfter(i,c,f){return this._insertAfter(i,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,c,f){const m=null===c?this._itHead:c._next;return i._next=m,i._prev=c,null===m?this._itTail=i:m._prev=i,null===c?this._itHead=i:c._next=i,null===this._linkedRecords&&(this._linkedRecords=new _T),this._linkedRecords.put(i),i.currentIndex=f,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const c=i._prev,f=i._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,i}_addToMoves(i,c){return i.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _T),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,c){return i.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class sS{constructor(i,c){this.item=i,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oS{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,i))return f;return null}remove(i){const c=i._prevDup,f=i._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class _T{constructor(){this.map=new Map}put(i){const c=i.trackById;let f=this.map.get(c);f||(f=new oS,this.map.set(c,f)),f.add(i)}get(i,c){const m=this.map.get(i);return m?m.get(i,c):null}remove(i){const c=i.trackById;return this.map.get(c).remove(i)&&this.map.delete(c),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bT(r,i,c){const f=r.previousIndex;if(null===f)return f;let m=0;return c&&f<c.length&&(m=c[f]),f+i+m}class TT{constructor(){}supports(i){return i instanceof Map||uf(i)}create(){return new aS}}class aS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let c;for(c=this._mapHead;null!==c;c=c._next)i(c)}forEachPreviousItem(i){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)i(c)}forEachChangedItem(i){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)i(c)}forEachAddedItem(i){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)i(c)}forEachRemovedItem(i){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)i(c)}diff(i){if(i){if(!(i instanceof Map||uf(i)))throw new ft(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(i,(f,m)=>{if(c&&c.key===m)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const T=this._getOrCreateRecordForKey(m,f);c=this._insertBeforeOrAppend(c,T)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,c){if(i){const f=i._prev;return c._next=i,c._prev=f,i._prev=c,f&&(f._next=c),i===this._mapHead&&(this._mapHead=c),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(i,c){if(this._records.has(i)){const m=this._records.get(i);this._maybeAddToChanges(m,c);const T=m._prev,D=m._next;return T&&(T._next=D),D&&(D._prev=T),m._next=null,m._prev=null,m}const f=new uS(i);return this._records.set(i,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,c){Object.is(c,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=c,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,c){i instanceof Map?i.forEach(c):Object.keys(i).forEach(f=>c(i[f],f))}}class uS{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ET(){return new Q0([new yT])}let Q0=(()=>{class r{constructor(c){this.factories=c}static create(c,f){if(null!=f){const m=f.factories.slice();c=c.concat(m)}return new r(c)}static extend(c){return{provide:r,useFactory:f=>r.create(c,f||ET()),deps:[[r,new cl,new Oa]]}}find(c){const f=this.factories.find(m=>m.supports(c));if(null!=f)return f;throw new ft(901,"")}}return r.\u0275prov=Nt({token:r,providedIn:"root",factory:ET}),r})();function ST(){return new X0([new TT])}let X0=(()=>{class r{constructor(c){this.factories=c}static create(c,f){if(f){const m=f.factories.slice();c=c.concat(m)}return new r(c)}static extend(c){return{provide:r,useFactory:f=>r.create(c,f||ST()),deps:[[r,new cl,new Oa]]}}find(c){const f=this.factories.find(T=>T.supports(c));if(f)return f;throw new ft(901,"")}}return r.\u0275prov=Nt({token:r,providedIn:"root",factory:ST}),r})();const dS=lT(null,"core",[]);let hS=(()=>{class r{constructor(c){}}return r.\u0275fac=function(c){return new(c||r)(or(W0))},r.\u0275mod=Qn({type:r}),r.\u0275inj=Ln({}),r})()},3075:(Gt,rt,U)=>{"use strict";U.d(rt,{Cf:()=>He,F:()=>Ai,Fj:()=>Je,JJ:()=>Mn,JL:()=>Kn,JU:()=>Y,Kr:()=>zo,NI:()=>dr,On:()=>ss,Q7:()=>qo,UX:()=>jr,YN:()=>Ao,_Y:()=>Ks,c5:()=>Vt,cw:()=>hs,kI:()=>ie,oH:()=>Dn,sg:()=>zr,u5:()=>Sr});var E=U(5e3),k=U(9808),oe=U(8996),Ne=U(4128),Pe=U(4004);let ke=(()=>{class te{constructor(B,we){this._renderer=B,this._elementRef=we,this.onChange=Zt=>{},this.onTouched=()=>{}}setProperty(B,we){this._renderer.setProperty(this._elementRef.nativeElement,B,we)}registerOnTouched(B){this.onTouched=B}registerOnChange(B){this.onChange=B}setDisabledState(B){this.setProperty("disabled",B)}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(E.Qsj),E.Y36(E.SBq))},te.\u0275dir=E.lG2({type:te}),te})(),Ge=(()=>{class te extends ke{}return te.\u0275fac=function(){let $;return function(we){return($||($=E.n5z(te)))(we||te)}}(),te.\u0275dir=E.lG2({type:te,features:[E.qOj]}),te})();const Y=new E.OlP("NgValueAccessor"),Me={provide:Y,useExisting:(0,E.Gpc)(()=>Je),multi:!0},et=new E.OlP("CompositionEventMode");let Je=(()=>{class te extends ke{constructor(B,we,Zt){super(B,we),this._compositionMode=Zt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Oe(){const te=(0,k.q)()?(0,k.q)().getUserAgent():"";return/android (\d+)/.test(te.toLowerCase())}())}writeValue(B){this.setProperty("value",null==B?"":B)}_handleInput(B){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(B)}_compositionStart(){this._composing=!0}_compositionEnd(B){this._composing=!1,this._compositionMode&&this.onChange(B)}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(et,8))},te.\u0275dir=E.lG2({type:te,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(B,we){1&B&&E.NdJ("input",function(tr){return we._handleInput(tr.target.value)})("blur",function(){return we.onTouched()})("compositionstart",function(){return we._compositionStart()})("compositionend",function(tr){return we._compositionEnd(tr.target.value)})},features:[E._Bn([Me]),E.qOj]}),te})();function ft(te){return null==te||0===te.length}function it(te){return null!=te&&"number"==typeof te.length}const He=new E.OlP("NgValidators"),$e=new E.OlP("NgAsyncValidators"),Tt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ie{static min($){return function ne(te){return $=>{if(ft($.value)||ft(te))return null;const B=parseFloat($.value);return!isNaN(B)&&B<te?{min:{min:te,actual:$.value}}:null}}($)}static max($){return function be(te){return $=>{if(ft($.value)||ft(te))return null;const B=parseFloat($.value);return!isNaN(B)&&B>te?{max:{max:te,actual:$.value}}:null}}($)}static required($){return Ke($)}static requiredTrue($){return function gt(te){return!0===te.value?null:{required:!0}}($)}static email($){return function xt(te){return ft(te.value)||Tt.test(te.value)?null:{email:!0}}($)}static minLength($){return function X(te){return $=>ft($.value)||!it($.value)?null:$.value.length<te?{minlength:{requiredLength:te,actualLength:$.value.length}}:null}($)}static maxLength($){return function he(te){return $=>it($.value)&&$.value.length>te?{maxlength:{requiredLength:te,actualLength:$.value.length}}:null}($)}static pattern($){return J($)}static nullValidator($){return null}static compose($){return Dt($)}static composeAsync($){return $t($)}}function Ke(te){return ft(te.value)?{required:!0}:null}function J(te){if(!te)return Ae;let $,B;return"string"==typeof te?(B="","^"!==te.charAt(0)&&(B+="^"),B+=te,"$"!==te.charAt(te.length-1)&&(B+="$"),$=new RegExp(B)):(B=te.toString(),$=te),we=>{if(ft(we.value))return null;const Zt=we.value;return $.test(Zt)?null:{pattern:{requiredPattern:B,actualValue:Zt}}}}function Ae(te){return null}function Ee(te){return null!=te}function je(te){const $=(0,E.QGY)(te)?(0,oe.D)(te):te;return(0,E.CqO)($),$}function We(te){let $={};return te.forEach(B=>{$=null!=B?Object.assign(Object.assign({},$),B):$}),0===Object.keys($).length?null:$}function St(te,$){return $.map(B=>B(te))}function wt(te){return te.map($=>function ct(te){return!te.validate}($)?$:B=>$.validate(B))}function Dt(te){if(!te)return null;const $=te.filter(Ee);return 0==$.length?null:function(B){return We(St(B,$))}}function Et(te){return null!=te?Dt(wt(te)):null}function $t(te){if(!te)return null;const $=te.filter(Ee);return 0==$.length?null:function(B){const we=St(B,$).map(je);return(0,Ne.D)(we).pipe((0,Pe.U)(We))}}function cn(te){return null!=te?$t(wt(te)):null}function Yt(te,$){return null===te?[$]:Array.isArray(te)?[...te,$]:[te,$]}function Nt(te){return te._rawValidators}function fn(te){return te._rawAsyncValidators}function Ln(te){return te?Array.isArray(te)?te:[te]:[]}function Vn(te,$){return Array.isArray(te)?te.includes($):te===$}function Ar(te,$){const B=Ln($);return Ln(te).forEach(Zt=>{Vn(B,Zt)||B.push(Zt)}),B}function vr(te,$){return Ln($).filter(B=>!Vn(te,B))}class Cr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators($){this._rawValidators=$||[],this._composedValidatorFn=Et(this._rawValidators)}_setAsyncValidators($){this._rawAsyncValidators=$||[],this._composedAsyncValidatorFn=cn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy($){this._onDestroyCallbacks.push($)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach($=>$()),this._onDestroyCallbacks=[]}reset($){this.control&&this.control.reset($)}hasError($,B){return!!this.control&&this.control.hasError($,B)}getError($,B){return this.control?this.control.getError($,B):null}}class kr extends Cr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ur extends Cr{get formDirective(){return null}get path(){return null}}class Lr{constructor($){this._cd=$}is($){var B,we,Zt;return"submitted"===$?!!(null===(B=this._cd)||void 0===B?void 0:B.submitted):!!(null===(Zt=null===(we=this._cd)||void 0===we?void 0:we.control)||void 0===Zt?void 0:Zt[$])}}let Mn=(()=>{class te extends Lr{constructor(B){super(B)}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(kr,2))},te.\u0275dir=E.lG2({type:te,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(B,we){2&B&&E.ekj("ng-untouched",we.is("untouched"))("ng-touched",we.is("touched"))("ng-pristine",we.is("pristine"))("ng-dirty",we.is("dirty"))("ng-valid",we.is("valid"))("ng-invalid",we.is("invalid"))("ng-pending",we.is("pending"))},features:[E.qOj]}),te})(),Kn=(()=>{class te extends Lr{constructor(B){super(B)}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(ur,10))},te.\u0275dir=E.lG2({type:te,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(B,we){2&B&&E.ekj("ng-untouched",we.is("untouched"))("ng-touched",we.is("touched"))("ng-pristine",we.is("pristine"))("ng-dirty",we.is("dirty"))("ng-valid",we.is("valid"))("ng-invalid",we.is("invalid"))("ng-pending",we.is("pending"))("ng-submitted",we.is("submitted"))},features:[E.qOj]}),te})();function Ye(te,$){at(te,$),$.valueAccessor.writeValue(te.value),function sn(te,$){$.valueAccessor.registerOnChange(B=>{te._pendingValue=B,te._pendingChange=!0,te._pendingDirty=!0,"change"===te.updateOn&&ge(te,$)})}(te,$),function xe(te,$){const B=(we,Zt)=>{$.valueAccessor.writeValue(we),Zt&&$.viewToModelUpdate(we)};te.registerOnChange(B),$._registerOnDestroy(()=>{te._unregisterOnChange(B)})}(te,$),function jn(te,$){$.valueAccessor.registerOnTouched(()=>{te._pendingTouched=!0,"blur"===te.updateOn&&te._pendingChange&&ge(te,$),"submit"!==te.updateOn&&te.markAsTouched()})}(te,$),function Jt(te,$){if($.valueAccessor.setDisabledState){const B=we=>{$.valueAccessor.setDisabledState(we)};te.registerOnDisabledChange(B),$._registerOnDestroy(()=>{te._unregisterOnDisabledChange(B)})}}(te,$)}function ut(te,$,B=!0){const we=()=>{};$.valueAccessor&&($.valueAccessor.registerOnChange(we),$.valueAccessor.registerOnTouched(we)),Mt(te,$),te&&($._invokeOnDestroyCallbacks(),te._registerOnCollectionChange(()=>{}))}function dt(te,$){te.forEach(B=>{B.registerOnValidatorChange&&B.registerOnValidatorChange($)})}function at(te,$){const B=Nt(te);null!==$.validator?te.setValidators(Yt(B,$.validator)):"function"==typeof B&&te.setValidators([B]);const we=fn(te);null!==$.asyncValidator?te.setAsyncValidators(Yt(we,$.asyncValidator)):"function"==typeof we&&te.setAsyncValidators([we]);const Zt=()=>te.updateValueAndValidity();dt($._rawValidators,Zt),dt($._rawAsyncValidators,Zt)}function Mt(te,$){let B=!1;if(null!==te){if(null!==$.validator){const Zt=Nt(te);if(Array.isArray(Zt)&&Zt.length>0){const tr=Zt.filter(Pi=>Pi!==$.validator);tr.length!==Zt.length&&(B=!0,te.setValidators(tr))}}if(null!==$.asyncValidator){const Zt=fn(te);if(Array.isArray(Zt)&&Zt.length>0){const tr=Zt.filter(Pi=>Pi!==$.asyncValidator);tr.length!==Zt.length&&(B=!0,te.setAsyncValidators(tr))}}}const we=()=>{};return dt($._rawValidators,we),dt($._rawAsyncValidators,we),B}function ge(te,$){te._pendingDirty&&te.markAsDirty(),te.setValue(te._pendingValue,{emitModelToViewChange:!1}),$.viewToModelUpdate(te._pendingValue),te._pendingChange=!1}function Ue(te,$){at(te,$)}function ht(te,$){if(!te.hasOwnProperty("model"))return!1;const B=te.model;return!!B.isFirstChange()||!Object.is($,B.currentValue)}function bt(te,$){te._syncPendingControls(),$.forEach(B=>{const we=B.control;"submit"===we.updateOn&&we._pendingChange&&(B.viewToModelUpdate(we._pendingValue),we._pendingChange=!1)})}function Kt(te,$){if(!$)return null;let B,we,Zt;return Array.isArray($),$.forEach(tr=>{tr.constructor===Je?B=tr:function Be(te){return Object.getPrototypeOf(te.constructor)===Ge}(tr)?we=tr:Zt=tr}),Zt||we||B||null}function Hn(te,$){const B=te.indexOf($);B>-1&&te.splice(B,1)}const Xr="VALID",wi="INVALID",mr="PENDING",Jr="DISABLED";function ls(te){return(fr(te)?te.validators:te)||null}function cs(te){return Array.isArray(te)?Et(te):te||null}function An(te,$){return(fr($)?$.asyncValidators:te)||null}function Rn(te){return Array.isArray(te)?cn(te):te||null}function fr(te){return null!=te&&!Array.isArray(te)&&"object"==typeof te}const Gi=te=>te instanceof dr,ds=te=>te instanceof hs;function Ss(te){return Gi(te)?te.value:te.getRawValue()}function ai(te,$){const B=ds(te),we=te.controls;if(!(B?Object.keys(we):we).length)throw new E.vHH(1e3,"");if(!we[$])throw new E.vHH(1001,"")}function vs(te,$){ds(te),te._forEachChild((we,Zt)=>{if(void 0===$[Zt])throw new E.vHH(1002,"")})}class ei{constructor($,B){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=$,this._rawAsyncValidators=B,this._composedValidatorFn=cs(this._rawValidators),this._composedAsyncValidatorFn=Rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator($){this._rawValidators=this._composedValidatorFn=$}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator($){this._rawAsyncValidators=this._composedAsyncValidatorFn=$}get parent(){return this._parent}get valid(){return this.status===Xr}get invalid(){return this.status===wi}get pending(){return this.status==mr}get disabled(){return this.status===Jr}get enabled(){return this.status!==Jr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators($){this._rawValidators=$,this._composedValidatorFn=cs($)}setAsyncValidators($){this._rawAsyncValidators=$,this._composedAsyncValidatorFn=Rn($)}addValidators($){this.setValidators(Ar($,this._rawValidators))}addAsyncValidators($){this.setAsyncValidators(Ar($,this._rawAsyncValidators))}removeValidators($){this.setValidators(vr($,this._rawValidators))}removeAsyncValidators($){this.setAsyncValidators(vr($,this._rawAsyncValidators))}hasValidator($){return Vn(this._rawValidators,$)}hasAsyncValidator($){return Vn(this._rawAsyncValidators,$)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched($={}){this.touched=!0,this._parent&&!$.onlySelf&&this._parent.markAsTouched($)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild($=>$.markAllAsTouched())}markAsUntouched($={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(B=>{B.markAsUntouched({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}markAsDirty($={}){this.pristine=!1,this._parent&&!$.onlySelf&&this._parent.markAsDirty($)}markAsPristine($={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(B=>{B.markAsPristine({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}markAsPending($={}){this.status=mr,!1!==$.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!$.onlySelf&&this._parent.markAsPending($)}disable($={}){const B=this._parentMarkedDirty($.onlySelf);this.status=Jr,this.errors=null,this._forEachChild(we=>{we.disable(Object.assign(Object.assign({},$),{onlySelf:!0}))}),this._updateValue(),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},$),{skipPristineCheck:B})),this._onDisabledChange.forEach(we=>we(!0))}enable($={}){const B=this._parentMarkedDirty($.onlySelf);this.status=Xr,this._forEachChild(we=>{we.enable(Object.assign(Object.assign({},$),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},$),{skipPristineCheck:B})),this._onDisabledChange.forEach(we=>we(!1))}_updateAncestors($){this._parent&&!$.onlySelf&&(this._parent.updateValueAndValidity($),$.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent($){this._parent=$}updateValueAndValidity($={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xr||this.status===mr)&&this._runAsyncValidator($.emitEvent)),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!$.onlySelf&&this._parent.updateValueAndValidity($)}_updateTreeValidity($={emitEvent:!0}){this._forEachChild(B=>B._updateTreeValidity($)),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jr:Xr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator($){if(this.asyncValidator){this.status=mr,this._hasOwnPendingAsyncValidator=!0;const B=je(this.asyncValidator(this));this._asyncValidationSubscription=B.subscribe(we=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(we,{emitEvent:$})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors($,B={}){this.errors=$,this._updateControlsErrors(!1!==B.emitEvent)}get($){return function oi(te,$,B){if(null==$||(Array.isArray($)||($=$.split(B)),Array.isArray($)&&0===$.length))return null;let we=te;return $.forEach(Zt=>{we=ds(we)?we.controls.hasOwnProperty(Zt)?we.controls[Zt]:null:(te=>te instanceof ws)(we)&&we.at(Zt)||null}),we}(this,$,".")}getError($,B){const we=B?this.get(B):this;return we&&we.errors?we.errors[$]:null}hasError($,B){return!!this.getError($,B)}get root(){let $=this;for(;$._parent;)$=$._parent;return $}_updateControlsErrors($){this.status=this._calculateStatus(),$&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors($)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?Jr:this.errors?wi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mr)?mr:this._anyControlsHaveStatus(wi)?wi:Xr}_anyControlsHaveStatus($){return this._anyControls(B=>B.status===$)}_anyControlsDirty(){return this._anyControls($=>$.dirty)}_anyControlsTouched(){return this._anyControls($=>$.touched)}_updatePristine($={}){this.pristine=!this._anyControlsDirty(),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}_updateTouched($={}){this.touched=this._anyControlsTouched(),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}_isBoxedValue($){return"object"==typeof $&&null!==$&&2===Object.keys($).length&&"value"in $&&"disabled"in $}_registerOnCollectionChange($){this._onCollectionChange=$}_setUpdateStrategy($){fr($)&&null!=$.updateOn&&(this._updateOn=$.updateOn)}_parentMarkedDirty($){return!$&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class dr extends ei{constructor($=null,B,we){super(ls(B),An(we,B)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState($),this._setUpdateStrategy(B),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fr(B)&&B.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue($)?$.value:$)}setValue($,B={}){this.value=this._pendingValue=$,this._onChange.length&&!1!==B.emitModelToViewChange&&this._onChange.forEach(we=>we(this.value,!1!==B.emitViewToModelChange)),this.updateValueAndValidity(B)}patchValue($,B={}){this.setValue($,B)}reset($=this.defaultValue,B={}){this._applyFormState($),this.markAsPristine(B),this.markAsUntouched(B),this.setValue(this.value,B),this._pendingChange=!1}_updateValue(){}_anyControls($){return!1}_allControlsDisabled(){return this.disabled}registerOnChange($){this._onChange.push($)}_unregisterOnChange($){Hn(this._onChange,$)}registerOnDisabledChange($){this._onDisabledChange.push($)}_unregisterOnDisabledChange($){Hn(this._onDisabledChange,$)}_forEachChild($){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState($){this._isBoxedValue($)?(this.value=this._pendingValue=$.value,$.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=$}}class hs extends ei{constructor($,B,we){super(ls(B),An(we,B)),this.controls=$,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl($,B){return this.controls[$]?this.controls[$]:(this.controls[$]=B,B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange),B)}addControl($,B,we={}){this.registerControl($,B),this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}removeControl($,B={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}setControl($,B,we={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],B&&this.registerControl($,B),this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}contains($){return this.controls.hasOwnProperty($)&&this.controls[$].enabled}setValue($,B={}){vs(this,$),Object.keys($).forEach(we=>{ai(this,we),this.controls[we].setValue($[we],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue($,B={}){null!=$&&(Object.keys($).forEach(we=>{this.controls[we]&&this.controls[we].patchValue($[we],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset($={},B={}){this._forEachChild((we,Zt)=>{we.reset($[Zt],{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this._reduceChildren({},($,B,we)=>($[we]=Ss(B),$))}_syncPendingControls(){let $=this._reduceChildren(!1,(B,we)=>!!we._syncPendingControls()||B);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_forEachChild($){Object.keys(this.controls).forEach(B=>{const we=this.controls[B];we&&$(we,B)})}_setUpControls(){this._forEachChild($=>{$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls($){for(const B of Object.keys(this.controls)){const we=this.controls[B];if(this.contains(B)&&$(we))return!0}return!1}_reduceValue(){return this._reduceChildren({},($,B,we)=>((B.enabled||this.disabled)&&($[we]=B.value),$))}_reduceChildren($,B){let we=$;return this._forEachChild((Zt,tr)=>{we=B(we,Zt,tr)}),we}_allControlsDisabled(){for(const $ of Object.keys(this.controls))if(this.controls[$].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ws extends ei{constructor($,B,we){super(ls(B),An(we,B)),this.controls=$,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at($){return this.controls[$]}push($,B={}){this.controls.push($),this._registerControl($),this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}insert($,B,we={}){this.controls.splice($,0,B),this._registerControl(B),this.updateValueAndValidity({emitEvent:we.emitEvent})}removeAt($,B={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),this.controls.splice($,1),this.updateValueAndValidity({emitEvent:B.emitEvent})}setControl($,B,we={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),this.controls.splice($,1),B&&(this.controls.splice($,0,B),this._registerControl(B)),this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue($,B={}){vs(this,$),$.forEach((we,Zt)=>{ai(this,Zt),this.at(Zt).setValue(we,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue($,B={}){null!=$&&($.forEach((we,Zt)=>{this.at(Zt)&&this.at(Zt).patchValue(we,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset($=[],B={}){this._forEachChild((we,Zt)=>{we.reset($[Zt],{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this.controls.map($=>Ss($))}clear($={}){this.controls.length<1||(this._forEachChild(B=>B._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:$.emitEvent}))}_syncPendingControls(){let $=this.controls.reduce((B,we)=>!!we._syncPendingControls()||B,!1);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_forEachChild($){this.controls.forEach((B,we)=>{$(B,we)})}_updateValue(){this.value=this.controls.filter($=>$.enabled||this.disabled).map($=>$.value)}_anyControls($){return this.controls.some(B=>B.enabled&&$(B))}_setUpControls(){this._forEachChild($=>this._registerControl($))}_allControlsDisabled(){for(const $ of this.controls)if($.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl($){$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)}}const Io={provide:ur,useExisting:(0,E.Gpc)(()=>Ai)},Di=(()=>Promise.resolve(null))();let Ai=(()=>{class te extends ur{constructor(B,we){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new E.vpe,this.form=new hs({},Et(B),cn(we))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(B){Di.then(()=>{const we=this._findContainer(B.path);B.control=we.registerControl(B.name,B.control),Ye(B.control,B),B.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(B)})}getControl(B){return this.form.get(B.path)}removeControl(B){Di.then(()=>{const we=this._findContainer(B.path);we&&we.removeControl(B.name),this._directives.delete(B)})}addFormGroup(B){Di.then(()=>{const we=this._findContainer(B.path),Zt=new hs({});Ue(Zt,B),we.registerControl(B.name,Zt),Zt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(B){Di.then(()=>{const we=this._findContainer(B.path);we&&we.removeControl(B.name)})}getFormGroup(B){return this.form.get(B.path)}updateModel(B,we){Di.then(()=>{this.form.get(B.path).setValue(we)})}setValue(B){this.control.setValue(B)}onSubmit(B){return this.submitted=!0,bt(this.form,this._directives),this.ngSubmit.emit(B),!1}onReset(){this.resetForm()}resetForm(B){this.form.reset(B),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(B){return B.pop(),B.length?this.form.get(B):this.form}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(He,10),E.Y36($e,10))},te.\u0275dir=E.lG2({type:te,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(B,we){1&B&&E.NdJ("submit",function(tr){return we.onSubmit(tr)})("reset",function(){return we.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Io]),E.qOj]}),te})();const so={provide:kr,useExisting:(0,E.Gpc)(()=>ss)},oo=(()=>Promise.resolve(null))();let ss=(()=>{class te extends kr{constructor(B,we,Zt,tr,Pi){super(),this._changeDetectorRef=Pi,this.control=new dr,this._registered=!1,this.update=new E.vpe,this._parent=B,this._setValidators(we),this._setAsyncValidators(Zt),this.valueAccessor=Kt(0,tr)}ngOnChanges(B){if(this._checkForErrors(),!this._registered||"name"in B){if(this._registered&&(this._checkName(),this.formDirective)){const we=B.name.previousValue;this.formDirective.removeControl({name:we,path:this._getPath(we)})}this._setUpControl()}"isDisabled"in B&&this._updateDisabled(B),ht(B,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ye(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(B){oo.then(()=>{var we;this.control.setValue(B,{emitViewToModelChange:!1}),null===(we=this._changeDetectorRef)||void 0===we||we.markForCheck()})}_updateDisabled(B){const we=B.isDisabled.currentValue,Zt=""===we||we&&"false"!==we;oo.then(()=>{var tr;Zt&&!this.control.disabled?this.control.disable():!Zt&&this.control.disabled&&this.control.enable(),null===(tr=this._changeDetectorRef)||void 0===tr||tr.markForCheck()})}_getPath(B){return this._parent?function _i(te,$){return[...$.path,te]}(B,this._parent):[B]}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(ur,9),E.Y36(He,10),E.Y36($e,10),E.Y36(Y,10),E.Y36(E.sBO,8))},te.\u0275dir=E.lG2({type:te,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([so]),E.qOj,E.TTD]}),te})(),Ks=(()=>{class te{}return te.\u0275fac=function(B){return new(B||te)},te.\u0275dir=E.lG2({type:te,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),te})(),si=(()=>{class te{}return te.\u0275fac=function(B){return new(B||te)},te.\u0275mod=E.oAB({type:te}),te.\u0275inj=E.cJS({}),te})();const jt=new E.OlP("NgModelWithFormControlWarning"),nn={provide:kr,useExisting:(0,E.Gpc)(()=>Dn)};let Dn=(()=>{class te extends kr{constructor(B,we,Zt,tr){super(),this._ngModelWarningConfig=tr,this.update=new E.vpe,this._ngModelWarningSent=!1,this._setValidators(B),this._setAsyncValidators(we),this.valueAccessor=Kt(0,Zt)}set isDisabled(B){}ngOnChanges(B){if(this._isControlChanged(B)){const we=B.form.previousValue;we&&ut(we,this,!1),Ye(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}ht(B,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ut(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}_isControlChanged(B){return B.hasOwnProperty("form")}}return te._ngModelWarningSentOnce=!1,te.\u0275fac=function(B){return new(B||te)(E.Y36(He,10),E.Y36($e,10),E.Y36(Y,10),E.Y36(jt,8))},te.\u0275dir=E.lG2({type:te,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[E._Bn([nn]),E.qOj,E.TTD]}),te})();const Sn={provide:ur,useExisting:(0,E.Gpc)(()=>zr)};let zr=(()=>{class te extends ur{constructor(B,we){super(),this.validators=B,this.asyncValidators=we,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(B),this._setAsyncValidators(we)}ngOnChanges(B){this._checkFormPresent(),B.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(B){const we=this.form.get(B.path);return Ye(we,B),we.updateValueAndValidity({emitEvent:!1}),this.directives.push(B),we}getControl(B){return this.form.get(B.path)}removeControl(B){ut(B.control||null,B,!1),Hn(this.directives,B)}addFormGroup(B){this._setUpFormContainer(B)}removeFormGroup(B){this._cleanUpFormContainer(B)}getFormGroup(B){return this.form.get(B.path)}addFormArray(B){this._setUpFormContainer(B)}removeFormArray(B){this._cleanUpFormContainer(B)}getFormArray(B){return this.form.get(B.path)}updateModel(B,we){this.form.get(B.path).setValue(we)}onSubmit(B){return this.submitted=!0,bt(this.form,this.directives),this.ngSubmit.emit(B),!1}onReset(){this.resetForm()}resetForm(B){this.form.reset(B),this.submitted=!1}_updateDomValue(){this.directives.forEach(B=>{const we=B.control,Zt=this.form.get(B.path);we!==Zt&&(ut(we||null,B),Gi(Zt)&&(Ye(Zt,B),B.control=Zt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(B){const we=this.form.get(B.path);Ue(we,B),we.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(B){if(this.form){const we=this.form.get(B.path);we&&function At(te,$){return Mt(te,$)}(we,B)&&we.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){at(this.form,this),this._oldForm&&Mt(this._oldForm,this)}_checkFormPresent(){}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(He,10),E.Y36($e,10))},te.\u0275dir=E.lG2({type:te,selectors:[["","formGroup",""]],hostBindings:function(B,we){1&B&&E.NdJ("submit",function(tr){return we.onSubmit(tr)})("reset",function(){return we.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Sn]),E.qOj,E.TTD]}),te})();const jo={provide:Y,useExisting:(0,E.Gpc)(()=>Ci),multi:!0};function Zs(te,$){return null==te?`${$}`:($&&"object"==typeof $&&($="Object"),`${te}: ${$}`.slice(0,50))}let Ci=(()=>{class te extends Ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(B){this._compareWith=B}writeValue(B){this.value=B;const Zt=Zs(this._getOptionId(B),B);this.setProperty("value",Zt)}registerOnChange(B){this.onChange=we=>{this.value=this._getOptionValue(we),B(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(B){for(const we of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(we),B))return we;return null}_getOptionValue(B){const we=function ia(te){return te.split(":")[0]}(B);return this._optionMap.has(we)?this._optionMap.get(we):B}}return te.\u0275fac=function(){let $;return function(we){return($||($=E.n5z(te)))(we||te)}}(),te.\u0275dir=E.lG2({type:te,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(B,we){1&B&&E.NdJ("change",function(tr){return we.onChange(tr.target.value)})("blur",function(){return we.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([jo]),E.qOj]}),te})(),Ao=(()=>{class te{constructor(B,we,Zt){this._element=B,this._renderer=we,this._select=Zt,this._select&&(this.id=this._select._registerOption())}set ngValue(B){null!=this._select&&(this._select._optionMap.set(this.id,B),this._setElementValue(Zs(this.id,B)),this._select.writeValue(this._select.value))}set value(B){this._setElementValue(B),this._select&&this._select.writeValue(this._select.value)}_setElementValue(B){this._renderer.setProperty(this._element.nativeElement,"value",B)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(Ci,9))},te.\u0275dir=E.lG2({type:te,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),te})();const Ys={provide:Y,useExisting:(0,E.Gpc)(()=>sa),multi:!0};function _o(te,$){return null==te?`${$}`:("string"==typeof $&&($=`'${$}'`),$&&"object"==typeof $&&($="Object"),`${te}: ${$}`.slice(0,50))}let sa=(()=>{class te extends Ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(B){this._compareWith=B}writeValue(B){let we;if(this.value=B,Array.isArray(B)){const Zt=B.map(tr=>this._getOptionId(tr));we=(tr,Pi)=>{tr._setSelected(Zt.indexOf(Pi.toString())>-1)}}else we=(Zt,tr)=>{Zt._setSelected(!1)};this._optionMap.forEach(we)}registerOnChange(B){this.onChange=we=>{const Zt=[],tr=we.selectedOptions;if(void 0!==tr){const Pi=tr;for(let Uo=0;Uo<Pi.length;Uo++){const _u=this._getOptionValue(Pi[Uo].value);Zt.push(_u)}}else{const Pi=we.options;for(let Uo=0;Uo<Pi.length;Uo++){const Qs=Pi[Uo];if(Qs.selected){const _u=this._getOptionValue(Qs.value);Zt.push(_u)}}}this.value=Zt,B(Zt)}}_registerOption(B){const we=(this._idCounter++).toString();return this._optionMap.set(we,B),we}_getOptionId(B){for(const we of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(we)._value,B))return we;return null}_getOptionValue(B){const we=function ma(te){return te.split(":")[0]}(B);return this._optionMap.has(we)?this._optionMap.get(we)._value:B}}return te.\u0275fac=function(){let $;return function(we){return($||($=E.n5z(te)))(we||te)}}(),te.\u0275dir=E.lG2({type:te,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(B,we){1&B&&E.NdJ("change",function(tr){return we.onChange(tr.target)})("blur",function(){return we.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([Ys]),E.qOj]}),te})(),zo=(()=>{class te{constructor(B,we,Zt){this._element=B,this._renderer=we,this._select=Zt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(B){null!=this._select&&(this._value=B,this._setElementValue(_o(this.id,B)),this._select.writeValue(this._select.value))}set value(B){this._select?(this._value=B,this._setElementValue(_o(this.id,B)),this._select.writeValue(this._select.value)):this._setElementValue(B)}_setElementValue(B){this._renderer.setProperty(this._element.nativeElement,"value",B)}_setSelected(B){this._renderer.setProperty(this._element.nativeElement,"selected",B)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return te.\u0275fac=function(B){return new(B||te)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(sa,9))},te.\u0275dir=E.lG2({type:te,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),te})(),Mi=(()=>{class te{constructor(){this._validator=Ae}ngOnChanges(B){if(this.inputName in B){const we=this.normalizeInput(B[this.inputName].currentValue);this._enabled=this.enabled(we),this._validator=this._enabled?this.createValidator(we):Ae,this._onChange&&this._onChange()}}validate(B){return this._validator(B)}registerOnValidatorChange(B){this._onChange=B}enabled(B){return null!=B}}return te.\u0275fac=function(B){return new(B||te)},te.\u0275dir=E.lG2({type:te,features:[E.TTD]}),te})();const ks={provide:He,useExisting:(0,E.Gpc)(()=>qo),multi:!0};let qo=(()=>{class te extends Mi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=B=>function Ji(te){return null!=te&&!1!==te&&"false"!=`${te}`}(B),this.createValidator=B=>Ke}enabled(B){return B}}return te.\u0275fac=function(){let $;return function(we){return($||($=E.n5z(te)))(we||te)}}(),te.\u0275dir=E.lG2({type:te,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(B,we){2&B&&E.uIk("required",we._enabled?"":null)},inputs:{required:"required"},features:[E._Bn([ks]),E.qOj]}),te})();const ot={provide:He,useExisting:(0,E.Gpc)(()=>Vt),multi:!0};let Vt=(()=>{class te extends Mi{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=B=>B,this.createValidator=B=>J(B)}}return te.\u0275fac=function(){let $;return function(we){return($||($=E.n5z(te)))(we||te)}}(),te.\u0275dir=E.lG2({type:te,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(B,we){2&B&&E.uIk("pattern",we._enabled?we.pattern:null)},inputs:{pattern:"pattern"},features:[E._Bn([ot]),E.qOj]}),te})(),ar=(()=>{class te{}return te.\u0275fac=function(B){return new(B||te)},te.\u0275mod=E.oAB({type:te}),te.\u0275inj=E.cJS({imports:[[si]]}),te})(),Sr=(()=>{class te{}return te.\u0275fac=function(B){return new(B||te)},te.\u0275mod=E.oAB({type:te}),te.\u0275inj=E.cJS({imports:[ar]}),te})(),jr=(()=>{class te{static withConfig(B){return{ngModule:te,providers:[{provide:jt,useValue:B.warnOnNgModelWithFormControl}]}}}return te.\u0275fac=function(B){return new(B||te)},te.\u0275mod=E.oAB({type:te}),te.\u0275inj=E.cJS({imports:[ar]}),te})()},2313:(Gt,rt,U)=>{"use strict";U.d(rt,{H7:()=>At,b2:()=>Mr,q6:()=>ur});var E=U(9808),k=U(5e3);class oe extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ne extends oe{static makeCurrent(){(0,E.HT)(new Ne)}onAndCancel(ht,Be,bt){return ht.addEventListener(Be,bt,!1),()=>{ht.removeEventListener(Be,bt,!1)}}dispatchEvent(ht,Be){ht.dispatchEvent(Be)}remove(ht){ht.parentNode&&ht.parentNode.removeChild(ht)}createElement(ht,Be){return(Be=Be||this.getDefaultDocument()).createElement(ht)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ht){return ht.nodeType===Node.ELEMENT_NODE}isShadowRoot(ht){return ht instanceof DocumentFragment}getGlobalEventTarget(ht,Be){return"window"===Be?window:"document"===Be?ht:"body"===Be?ht.body:null}getBaseHref(ht){const Be=function ke(){return Pe=Pe||document.querySelector("base"),Pe?Pe.getAttribute("href"):null}();return null==Be?null:function Y(Ot){Ge=Ge||document.createElement("a"),Ge.setAttribute("href",Ot);const ht=Ge.pathname;return"/"===ht.charAt(0)?ht:`/${ht}`}(Be)}resetBaseElement(){Pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ht){return(0,E.Mx)(document.cookie,ht)}}let Ge,Pe=null;const Xe=new k.OlP("TRANSITION_ID"),Me=[{provide:k.ip1,useFactory:function pe(Ot,ht,Be){return()=>{Be.get(k.CZH).donePromise.then(()=>{const bt=(0,E.q)(),Kt=ht.querySelectorAll(`style[ng-transition="${Ot}"]`);for(let Hn=0;Hn<Kt.length;Hn++)bt.remove(Kt[Hn])})}},deps:[Xe,E.K0,k.zs3],multi:!0}];class Oe{static init(){(0,k.VLi)(new Oe)}addToWindow(ht){k.dqk.getAngularTestability=(bt,Kt=!0)=>{const Hn=ht.findTestabilityInTree(bt,Kt);if(null==Hn)throw new Error("Could not find testability for element.");return Hn},k.dqk.getAllAngularTestabilities=()=>ht.getAllTestabilities(),k.dqk.getAllAngularRootElements=()=>ht.getAllRootElements(),k.dqk.frameworkStabilizers||(k.dqk.frameworkStabilizers=[]),k.dqk.frameworkStabilizers.push(bt=>{const Kt=k.dqk.getAllAngularTestabilities();let Hn=Kt.length,Zn=!1;const Ir=function(Xr){Zn=Zn||Xr,Hn--,0==Hn&&bt(Zn)};Kt.forEach(function(Xr){Xr.whenStable(Ir)})})}findTestabilityInTree(ht,Be,bt){if(null==Be)return null;const Kt=ht.getTestability(Be);return null!=Kt?Kt:bt?(0,E.q)().isShadowRoot(Be)?this.findTestabilityInTree(ht,Be.host,!0):this.findTestabilityInTree(ht,Be.parentElement,!0):null}}let et=(()=>{class Ot{build(){return new XMLHttpRequest}}return Ot.\u0275fac=function(Be){return new(Be||Ot)},Ot.\u0275prov=k.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})();const Je=new k.OlP("EventManagerPlugins");let ft=(()=>{class Ot{constructor(Be,bt){this._zone=bt,this._eventNameToPlugin=new Map,Be.forEach(Kt=>Kt.manager=this),this._plugins=Be.slice().reverse()}addEventListener(Be,bt,Kt){return this._findPluginFor(bt).addEventListener(Be,bt,Kt)}addGlobalEventListener(Be,bt,Kt){return this._findPluginFor(bt).addGlobalEventListener(Be,bt,Kt)}getZone(){return this._zone}_findPluginFor(Be){const bt=this._eventNameToPlugin.get(Be);if(bt)return bt;const Kt=this._plugins;for(let Hn=0;Hn<Kt.length;Hn++){const Zn=Kt[Hn];if(Zn.supports(Be))return this._eventNameToPlugin.set(Be,Zn),Zn}throw new Error(`No event manager plugin found for event ${Be}`)}}return Ot.\u0275fac=function(Be){return new(Be||Ot)(k.LFG(Je),k.LFG(k.R0b))},Ot.\u0275prov=k.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})();class it{constructor(ht){this._doc=ht}addGlobalEventListener(ht,Be,bt){const Kt=(0,E.q)().getGlobalEventTarget(this._doc,ht);if(!Kt)throw new Error(`Unsupported event target ${Kt} for event ${Be}`);return this.addEventListener(Kt,Be,bt)}}let He=(()=>{class Ot{constructor(){this._stylesSet=new Set}addStyles(Be){const bt=new Set;Be.forEach(Kt=>{this._stylesSet.has(Kt)||(this._stylesSet.add(Kt),bt.add(Kt))}),this.onStylesAdded(bt)}onStylesAdded(Be){}getAllStyles(){return Array.from(this._stylesSet)}}return Ot.\u0275fac=function(Be){return new(Be||Ot)},Ot.\u0275prov=k.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})(),$e=(()=>{class Ot extends He{constructor(Be){super(),this._doc=Be,this._hostNodes=new Map,this._hostNodes.set(Be.head,[])}_addStylesToHost(Be,bt,Kt){Be.forEach(Hn=>{const Zn=this._doc.createElement("style");Zn.textContent=Hn,Kt.push(bt.appendChild(Zn))})}addHost(Be){const bt=[];this._addStylesToHost(this._stylesSet,Be,bt),this._hostNodes.set(Be,bt)}removeHost(Be){const bt=this._hostNodes.get(Be);bt&&bt.forEach(Tt),this._hostNodes.delete(Be)}onStylesAdded(Be){this._hostNodes.forEach((bt,Kt)=>{this._addStylesToHost(Be,Kt,bt)})}ngOnDestroy(){this._hostNodes.forEach(Be=>Be.forEach(Tt))}}return Ot.\u0275fac=function(Be){return new(Be||Ot)(k.LFG(E.K0))},Ot.\u0275prov=k.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})();function Tt(Ot){(0,E.q)().remove(Ot)}const ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ne=/%COMP%/g;function J(Ot,ht,Be){for(let bt=0;bt<ht.length;bt++){let Kt=ht[bt];Array.isArray(Kt)?J(Ot,Kt,Be):(Kt=Kt.replace(ne,Ot),Be.push(Kt))}return Be}function Ae(Ot){return ht=>{if("__ngUnwrap__"===ht)return Ot;!1===Ot(ht)&&(ht.preventDefault(),ht.returnValue=!1)}}let je=(()=>{class Ot{constructor(Be,bt,Kt){this.eventManager=Be,this.sharedStylesHost=bt,this.appId=Kt,this.rendererByCompId=new Map,this.defaultRenderer=new We(Be)}createRenderer(Be,bt){if(!Be||!bt)return this.defaultRenderer;switch(bt.encapsulation){case k.ifc.Emulated:{let Kt=this.rendererByCompId.get(bt.id);return Kt||(Kt=new wt(this.eventManager,this.sharedStylesHost,bt,this.appId),this.rendererByCompId.set(bt.id,Kt)),Kt.applyToHost(Be),Kt}case 1:case k.ifc.ShadowDom:return new Dt(this.eventManager,this.sharedStylesHost,Be,bt);default:if(!this.rendererByCompId.has(bt.id)){const Kt=J(bt.id,bt.styles,[]);this.sharedStylesHost.addStyles(Kt),this.rendererByCompId.set(bt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ot.\u0275fac=function(Be){return new(Be||Ot)(k.LFG(ft),k.LFG($e),k.LFG(k.AFp))},Ot.\u0275prov=k.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})();class We{constructor(ht){this.eventManager=ht,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ht,Be){return Be?document.createElementNS(ie[Be]||Be,ht):document.createElement(ht)}createComment(ht){return document.createComment(ht)}createText(ht){return document.createTextNode(ht)}appendChild(ht,Be){ht.appendChild(Be)}insertBefore(ht,Be,bt){ht&&ht.insertBefore(Be,bt)}removeChild(ht,Be){ht&&ht.removeChild(Be)}selectRootElement(ht,Be){let bt="string"==typeof ht?document.querySelector(ht):ht;if(!bt)throw new Error(`The selector "${ht}" did not match any elements`);return Be||(bt.textContent=""),bt}parentNode(ht){return ht.parentNode}nextSibling(ht){return ht.nextSibling}setAttribute(ht,Be,bt,Kt){if(Kt){Be=Kt+":"+Be;const Hn=ie[Kt];Hn?ht.setAttributeNS(Hn,Be,bt):ht.setAttribute(Be,bt)}else ht.setAttribute(Be,bt)}removeAttribute(ht,Be,bt){if(bt){const Kt=ie[bt];Kt?ht.removeAttributeNS(Kt,Be):ht.removeAttribute(`${bt}:${Be}`)}else ht.removeAttribute(Be)}addClass(ht,Be){ht.classList.add(Be)}removeClass(ht,Be){ht.classList.remove(Be)}setStyle(ht,Be,bt,Kt){Kt&(k.JOm.DashCase|k.JOm.Important)?ht.style.setProperty(Be,bt,Kt&k.JOm.Important?"important":""):ht.style[Be]=bt}removeStyle(ht,Be,bt){bt&k.JOm.DashCase?ht.style.removeProperty(Be):ht.style[Be]=""}setProperty(ht,Be,bt){ht[Be]=bt}setValue(ht,Be){ht.nodeValue=Be}listen(ht,Be,bt){return"string"==typeof ht?this.eventManager.addGlobalEventListener(ht,Be,Ae(bt)):this.eventManager.addEventListener(ht,Be,Ae(bt))}}class wt extends We{constructor(ht,Be,bt,Kt){super(ht),this.component=bt;const Hn=J(Kt+"-"+bt.id,bt.styles,[]);Be.addStyles(Hn),this.contentAttr=function X(Ot){return"_ngcontent-%COMP%".replace(ne,Ot)}(Kt+"-"+bt.id),this.hostAttr=function he(Ot){return"_nghost-%COMP%".replace(ne,Ot)}(Kt+"-"+bt.id)}applyToHost(ht){super.setAttribute(ht,this.hostAttr,"")}createElement(ht,Be){const bt=super.createElement(ht,Be);return super.setAttribute(bt,this.contentAttr,""),bt}}class Dt extends We{constructor(ht,Be,bt,Kt){super(ht),this.sharedStylesHost=Be,this.hostEl=bt,this.shadowRoot=bt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Hn=J(Kt.id,Kt.styles,[]);for(let Zn=0;Zn<Hn.length;Zn++){const Ir=document.createElement("style");Ir.textContent=Hn[Zn],this.shadowRoot.appendChild(Ir)}}nodeOrShadowRoot(ht){return ht===this.hostEl?this.shadowRoot:ht}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ht,Be){return super.appendChild(this.nodeOrShadowRoot(ht),Be)}insertBefore(ht,Be,bt){return super.insertBefore(this.nodeOrShadowRoot(ht),Be,bt)}removeChild(ht,Be){return super.removeChild(this.nodeOrShadowRoot(ht),Be)}parentNode(ht){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ht)))}}let Et=(()=>{class Ot extends it{constructor(Be){super(Be)}supports(Be){return!0}addEventListener(Be,bt,Kt){return Be.addEventListener(bt,Kt,!1),()=>this.removeEventListener(Be,bt,Kt)}removeEventListener(Be,bt,Kt){return Be.removeEventListener(bt,Kt)}}return Ot.\u0275fac=function(Be){return new(Be||Ot)(k.LFG(E.K0))},Ot.\u0275prov=k.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})();const $t=["alt","control","meta","shift"],Yt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fn={alt:Ot=>Ot.altKey,control:Ot=>Ot.ctrlKey,meta:Ot=>Ot.metaKey,shift:Ot=>Ot.shiftKey};let Ln=(()=>{class Ot extends it{constructor(Be){super(Be)}supports(Be){return null!=Ot.parseEventName(Be)}addEventListener(Be,bt,Kt){const Hn=Ot.parseEventName(bt),Zn=Ot.eventCallback(Hn.fullKey,Kt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(Be,Hn.domEventName,Zn))}static parseEventName(Be){const bt=Be.toLowerCase().split("."),Kt=bt.shift();if(0===bt.length||"keydown"!==Kt&&"keyup"!==Kt)return null;const Hn=Ot._normalizeKey(bt.pop());let Zn="";if($t.forEach(Xr=>{const wi=bt.indexOf(Xr);wi>-1&&(bt.splice(wi,1),Zn+=Xr+".")}),Zn+=Hn,0!=bt.length||0===Hn.length)return null;const Ir={};return Ir.domEventName=Kt,Ir.fullKey=Zn,Ir}static getEventFullKey(Be){let bt="",Kt=function Vn(Ot){let ht=Ot.key;if(null==ht){if(ht=Ot.keyIdentifier,null==ht)return"Unidentified";ht.startsWith("U+")&&(ht=String.fromCharCode(parseInt(ht.substring(2),16)),3===Ot.location&&Nt.hasOwnProperty(ht)&&(ht=Nt[ht]))}return Yt[ht]||ht}(Be);return Kt=Kt.toLowerCase()," "===Kt?Kt="space":"."===Kt&&(Kt="dot"),$t.forEach(Hn=>{Hn!=Kt&&fn[Hn](Be)&&(bt+=Hn+".")}),bt+=Kt,bt}static eventCallback(Be,bt,Kt){return Hn=>{Ot.getEventFullKey(Hn)===Be&&Kt.runGuarded(()=>bt(Hn))}}static _normalizeKey(Be){return"esc"===Be?"escape":Be}}return Ot.\u0275fac=function(Be){return new(Be||Ot)(k.LFG(E.K0))},Ot.\u0275prov=k.Yz7({token:Ot,factory:Ot.\u0275fac}),Ot})();const ur=(0,k.eFA)(k._c5,"browser",[{provide:k.Lbi,useValue:E.bD},{provide:k.g9A,useValue:function Ar(){Ne.makeCurrent(),Oe.init()},multi:!0},{provide:E.K0,useFactory:function Cr(){return(0,k.RDi)(document),document},deps:[]}]),Lr=[{provide:k.zSh,useValue:"root"},{provide:k.qLn,useFactory:function vr(){return new k.qLn},deps:[]},{provide:Je,useClass:Et,multi:!0,deps:[E.K0,k.R0b,k.Lbi]},{provide:Je,useClass:Ln,multi:!0,deps:[E.K0]},{provide:je,useClass:je,deps:[ft,$e,k.AFp]},{provide:k.FYo,useExisting:je},{provide:He,useExisting:$e},{provide:$e,useClass:$e,deps:[E.K0]},{provide:k.dDg,useClass:k.dDg,deps:[k.R0b]},{provide:ft,useClass:ft,deps:[Je,k.R0b]},{provide:E.JF,useClass:et,deps:[]}];let Mr=(()=>{class Ot{constructor(Be){if(Be)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Be){return{ngModule:Ot,providers:[{provide:k.AFp,useValue:Be.appId},{provide:Xe,useExisting:k.AFp},Me]}}}return Ot.\u0275fac=function(Be){return new(Be||Ot)(k.LFG(Ot,12))},Ot.\u0275mod=k.oAB({type:Ot}),Ot.\u0275inj=k.cJS({providers:Lr,imports:[E.ez,k.hGG]}),Ot})();"undefined"!=typeof window&&window;let At=(()=>{class Ot{}return Ot.\u0275fac=function(Be){return new(Be||Ot)},Ot.\u0275prov=k.Yz7({token:Ot,factory:function(Be){let bt=null;return bt=Be?new(Be||Ot):k.LFG(Qn),bt},providedIn:"root"}),Ot})(),Qn=(()=>{class Ot extends At{constructor(Be){super(),this._doc=Be}sanitize(Be,bt){if(null==bt)return null;switch(Be){case k.q3G.NONE:return bt;case k.q3G.HTML:return(0,k.qzn)(bt,"HTML")?(0,k.z3N)(bt):(0,k.EiD)(this._doc,String(bt)).toString();case k.q3G.STYLE:return(0,k.qzn)(bt,"Style")?(0,k.z3N)(bt):bt;case k.q3G.SCRIPT:if((0,k.qzn)(bt,"Script"))return(0,k.z3N)(bt);throw new Error("unsafe value used in a script context");case k.q3G.URL:return(0,k.yhl)(bt),(0,k.qzn)(bt,"URL")?(0,k.z3N)(bt):(0,k.mCW)(String(bt));case k.q3G.RESOURCE_URL:if((0,k.qzn)(bt,"ResourceURL"))return(0,k.z3N)(bt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Be} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Be){return(0,k.JVY)(Be)}bypassSecurityTrustStyle(Be){return(0,k.L6k)(Be)}bypassSecurityTrustScript(Be){return(0,k.eBb)(Be)}bypassSecurityTrustUrl(Be){return(0,k.LAX)(Be)}bypassSecurityTrustResourceUrl(Be){return(0,k.pB0)(Be)}}return Ot.\u0275fac=function(Be){return new(Be||Ot)(k.LFG(E.K0))},Ot.\u0275prov=k.Yz7({token:Ot,factory:function(Be){let bt=null;return bt=Be?new Be:function on(Ot){return new Qn(Ot.get(E.K0))}(k.LFG(k.zs3)),bt},providedIn:"root"}),Ot})()},5367:(Gt,rt,U)=>{"use strict";U.d(rt,{gz:()=>Di,m2:()=>Nt,F0:()=>To,Od:()=>ba,yS:()=>ka,Bz:()=>Eo,lC:()=>Ji});var E=U(5e3),k=U(9751),oe=U(576);function Ne(F,P){const A=(0,oe.m)(F)?F:()=>F,K=se=>se.error(A());return new k.y(P?se=>P.schedule(K,0,se):K)}var Pe=U(8421);function ke(F){return new k.y(P=>{(0,Pe.Xf)(F()).subscribe(P)})}var Ge=U(727),Y=U(4482),Xe=U(5403);function pe(){return(0,Y.e)((F,P)=>{let A=null;F._refCount++;const K=(0,Xe.x)(P,void 0,void 0,void 0,()=>{if(!F||F._refCount<=0||0<--F._refCount)return void(A=null);const se=F._connection,de=A;A=null,se&&(!de||se===de)&&se.unsubscribe(),P.unsubscribe()});F.subscribe(K),K.closed||(A=F.connect())})}class Me extends k.y{constructor(P,A){super(),this.source=P,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,Y.A)(P)&&(this.lift=P.lift)}_subscribe(P){return this.getSubject().subscribe(P)}getSubject(){const P=this._subject;return(!P||P.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:P}=this;this._subject=this._connection=null,null==P||P.unsubscribe()}connect(){let P=this._connection;if(!P){P=this._connection=new Ge.w0;const A=this.getSubject();P.add(this.source.subscribe((0,Xe.x)(A,void 0,()=>{this._teardown(),A.complete()},K=>{this._teardown(),A.error(K)},()=>this._teardown()))),P.closed&&(this._connection=null,P=Ge.w0.EMPTY)}return P}refCount(){return pe()(this)}}var Oe=U(8996),et=U(9646),Je=U(1135),ft=U(9841),it=U(6805),He=U(7272),$e=U(515),Tt=U(7579),ie=U(9300);function ne(F){return F<=0?()=>$e.E:(0,Y.e)((P,A)=>{let K=[];P.subscribe((0,Xe.x)(A,se=>{K.push(se),F<K.length&&K.shift()},()=>{for(const se of K)A.next(se);A.complete()},void 0,()=>{K=null}))})}var be=U(8068),Ke=U(6590),gt=U(4671),he=U(4004),J=U(3900),Ae=U(5698),Ee=U(8675),je=U(5026),We=U(262),St=U(4351),ct=U(590),wt=U(5577),Dt=U(8505),Et=U(8189),$t=U(9808);class cn{constructor(P,A){this.id=P,this.url=A}}class Yt extends cn{constructor(P,A,K="imperative",se=null){super(P,A),this.navigationTrigger=K,this.restoredState=se}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nt extends cn{constructor(P,A,K){super(P,A),this.urlAfterRedirects=K}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fn extends cn{constructor(P,A,K){super(P,A),this.reason=K}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ln extends cn{constructor(P,A,K){super(P,A),this.error=K}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vn extends cn{constructor(P,A,K,se){super(P,A),this.urlAfterRedirects=K,this.state=se}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar extends cn{constructor(P,A,K,se){super(P,A),this.urlAfterRedirects=K,this.state=se}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr extends cn{constructor(P,A,K,se,de){super(P,A),this.urlAfterRedirects=K,this.state=se,this.shouldActivate=de}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cr extends cn{constructor(P,A,K,se){super(P,A),this.urlAfterRedirects=K,this.state=se}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kr extends cn{constructor(P,A,K,se){super(P,A),this.urlAfterRedirects=K,this.state=se}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ur{constructor(P){this.route=P}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Lr{constructor(P){this.route=P}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mr{constructor(P){this.snapshot=P}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pr{constructor(P){this.snapshot=P}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mn{constructor(P){this.snapshot=P}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(P){this.snapshot=P}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pr{constructor(P,A,K){this.routerEvent=P,this.position=A,this.anchor=K}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Cn="primary";class Vi{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const A=this.params[P];return Array.isArray(A)?A[0]:A}return null}getAll(P){if(this.has(P)){const A=this.params[P];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function hr(F){return new Vi(F)}const xr="ngNavigationCancelingError";function ri(F){const P=Error("NavigationCancelingError: "+F);return P[xr]=!0,P}function Hi(F,P,A){const K=A.path.split("/");if(K.length>F.length||"full"===A.pathMatch&&(P.hasChildren()||K.length<F.length))return null;const se={};for(let de=0;de<K.length;de++){const ze=K[de],st=F[de];if(ze.startsWith(":"))se[ze.substring(1)]=st;else if(ze!==st.path)return null}return{consumed:F.slice(0,K.length),posParams:se}}function Nn(F,P){const A=F?Object.keys(F):void 0,K=P?Object.keys(P):void 0;if(!A||!K||A.length!=K.length)return!1;let se;for(let de=0;de<A.length;de++)if(se=A[de],!Jn(F[se],P[se]))return!1;return!0}function Jn(F,P){if(Array.isArray(F)&&Array.isArray(P)){if(F.length!==P.length)return!1;const A=[...F].sort(),K=[...P].sort();return A.every((se,de)=>K[de]===se)}return F===P}function ci(F){return Array.prototype.concat.apply([],F)}function yi(F){return F.length>0?F[F.length-1]:null}function xn(F,P){for(const A in F)F.hasOwnProperty(A)&&P(F[A],A)}function Hr(F){return(0,E.CqO)(F)?F:(0,E.QGY)(F)?(0,Oe.D)(Promise.resolve(F)):(0,et.of)(F)}const Ye={exact:function at(F,P,A){if(!Qn(F.segments,P.segments)||!ge(F.segments,P.segments,A)||F.numberOfChildren!==P.numberOfChildren)return!1;for(const K in P.children)if(!F.children[K]||!at(F.children[K],P.children[K],A))return!1;return!0},subset:sn},ut={exact:function Jt(F,P){return Nn(F,P)},subset:function Mt(F,P){return Object.keys(P).length<=Object.keys(F).length&&Object.keys(P).every(A=>Jn(F[A],P[A]))},ignored:()=>!0};function dt(F,P,A){return Ye[A.paths](F.root,P.root,A.matrixParams)&&ut[A.queryParams](F.queryParams,P.queryParams)&&!("exact"===A.fragment&&F.fragment!==P.fragment)}function sn(F,P,A){return jn(F,P,P.segments,A)}function jn(F,P,A,K){if(F.segments.length>A.length){const se=F.segments.slice(0,A.length);return!(!Qn(se,A)||P.hasChildren()||!ge(se,A,K))}if(F.segments.length===A.length){if(!Qn(F.segments,A)||!ge(F.segments,A,K))return!1;for(const se in P.children)if(!F.children[se]||!sn(F.children[se],P.children[se],K))return!1;return!0}{const se=A.slice(0,F.segments.length),de=A.slice(F.segments.length);return!!(Qn(F.segments,se)&&ge(F.segments,se,K)&&F.children[Cn])&&jn(F.children[Cn],P,de,K)}}function ge(F,P,A){return P.every((K,se)=>ut[A](F[se].parameters,K.parameters))}class xe{constructor(P,A,K){this.root=P,this.queryParams=A,this.fragment=K}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hr(this.queryParams)),this._queryParamMap}toString(){return Be.serialize(this)}}class Ue{constructor(P,A){this.segments=P,this.children=A,this.parent=null,xn(A,(K,se)=>K.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bt(this)}}class At{constructor(P,A){this.path=P,this.parameters=A}get parameterMap(){return this._parameterMap||(this._parameterMap=hr(this.parameters)),this._parameterMap}toString(){return Jr(this)}}function Qn(F,P){return F.length===P.length&&F.every((A,K)=>A.path===P[K].path)}class Ot{}class ht{parse(P){const A=new $i(P);return new xe(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(P){const A=`/${Kt(P.root,!0)}`,K=function ls(F){const P=Object.keys(F).map(A=>{const K=F[A];return Array.isArray(K)?K.map(se=>`${Zn(A)}=${Zn(se)}`).join("&"):`${Zn(A)}=${Zn(K)}`}).filter(A=>!!A);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${A}${K}${"string"==typeof P.fragment?`#${function Ir(F){return encodeURI(F)}(P.fragment)}`:""}`}}const Be=new ht;function bt(F){return F.segments.map(P=>Jr(P)).join("/")}function Kt(F,P){if(!F.hasChildren())return bt(F);if(P){const A=F.children[Cn]?Kt(F.children[Cn],!1):"",K=[];return xn(F.children,(se,de)=>{de!==Cn&&K.push(`${de}:${Kt(se,!1)}`)}),K.length>0?`${A}(${K.join("//")})`:A}{const A=function Qr(F,P){let A=[];return xn(F.children,(K,se)=>{se===Cn&&(A=A.concat(P(K,se)))}),xn(F.children,(K,se)=>{se!==Cn&&(A=A.concat(P(K,se)))}),A}(F,(K,se)=>se===Cn?[Kt(F.children[Cn],!1)]:[`${se}:${Kt(K,!1)}`]);return 1===Object.keys(F.children).length&&null!=F.children[Cn]?`${bt(F)}/${A[0]}`:`${bt(F)}/(${A.join("//")})`}}function Hn(F){return encodeURIComponent(F).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zn(F){return Hn(F).replace(/%3B/gi,";")}function Xr(F){return Hn(F).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wi(F){return decodeURIComponent(F)}function mr(F){return wi(F.replace(/\+/g,"%20"))}function Jr(F){return`${Xr(F.path)}${function oi(F){return Object.keys(F).map(P=>`;${Xr(P)}=${Xr(F[P])}`).join("")}(F.parameters)}`}const cs=/^[^\/()?;=#]+/;function An(F){const P=F.match(cs);return P?P[0]:""}const Rn=/^[^=?&#]+/,Gi=/^[^&#]+/;class $i{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let K={};return this.peekStartsWith("(")&&(K=this.parseParens(!1)),(P.length>0||Object.keys(A).length>0)&&(K[Cn]=new Ue(P,A)),K}parseSegment(){const P=An(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(P),new At(wi(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const A=An(this.remaining);if(!A)return;this.capture(A);let K="";if(this.consumeOptional("=")){const se=An(this.remaining);se&&(K=se,this.capture(K))}P[wi(A)]=wi(K)}parseQueryParam(P){const A=function fr(F){const P=F.match(Rn);return P?P[0]:""}(this.remaining);if(!A)return;this.capture(A);let K="";if(this.consumeOptional("=")){const ze=function ds(F){const P=F.match(Gi);return P?P[0]:""}(this.remaining);ze&&(K=ze,this.capture(K))}const se=mr(A),de=mr(K);if(P.hasOwnProperty(se)){let ze=P[se];Array.isArray(ze)||(ze=[ze],P[se]=ze),ze.push(de)}else P[se]=de}parseParens(P){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const K=An(this.remaining),se=this.remaining[K.length];if("/"!==se&&")"!==se&&";"!==se)throw new Error(`Cannot parse url '${this.url}'`);let de;K.indexOf(":")>-1?(de=K.substr(0,K.indexOf(":")),this.capture(de),this.capture(":")):P&&(de=Cn);const ze=this.parseChildren();A[de]=1===Object.keys(ze).length?ze[Cn]:new Ue([],ze),this.consumeOptional("//")}return A}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new Error(`Expected "${P}".`)}}class Ss{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const A=this.pathFromRoot(P);return A.length>1?A[A.length-2]:null}children(P){const A=ai(P,this._root);return A?A.children.map(K=>K.value):[]}firstChild(P){const A=ai(P,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(P){const A=vs(P,this._root);return A.length<2?[]:A[A.length-2].children.map(se=>se.value).filter(se=>se!==P)}pathFromRoot(P){return vs(P,this._root).map(A=>A.value)}}function ai(F,P){if(F===P.value)return P;for(const A of P.children){const K=ai(F,A);if(K)return K}return null}function vs(F,P){if(F===P.value)return[P];for(const A of P.children){const K=vs(F,A);if(K.length)return K.unshift(P),K}return[]}class ei{constructor(P,A){this.value=P,this.children=A}toString(){return`TreeNode(${this.value})`}}function dr(F){const P={};return F&&F.children.forEach(A=>P[A.value.outlet]=A),P}class hs extends Ss{constructor(P,A){super(P),this.snapshot=A,ii(this,P)}toString(){return this.snapshot.toString()}}function ws(F,P){const A=function Io(F,P){const ze=new Cs([],{},{},"",{},Cn,P,null,F.root,-1,{});return new Wr("",new ei(ze,[]))}(F,P),K=new Je.X([new At("",{})]),se=new Je.X({}),de=new Je.X({}),ze=new Je.X({}),st=new Je.X(""),en=new Di(K,se,ze,st,de,Cn,P,A.root);return en.snapshot=A.root,new hs(new ei(en,[]),A)}class Di{constructor(P,A,K,se,de,ze,st,en){this.url=P,this.params=A,this.queryParams=K,this.fragment=se,this.data=de,this.outlet=ze,this.component=st,this._futureSnapshot=en}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,he.U)(P=>hr(P)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,he.U)(P=>hr(P)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ai(F,P="emptyOnly"){const A=F.pathFromRoot;let K=0;if("always"!==P)for(K=A.length-1;K>=1;){const se=A[K],de=A[K-1];if(se.routeConfig&&""===se.routeConfig.path)K--;else{if(de.component)break;K--}}return function Ls(F){return F.reduce((P,A)=>({params:Object.assign(Object.assign({},P.params),A.params),data:Object.assign(Object.assign({},P.data),A.data),resolve:Object.assign(Object.assign({},P.resolve),A._resolvedData)}),{params:{},data:{},resolve:{}})}(A.slice(K))}class Cs{constructor(P,A,K,se,de,ze,st,en,Qt,Pn,ir){this.url=P,this.params=A,this.queryParams=K,this.fragment=se,this.data=de,this.outlet=ze,this.component=st,this.routeConfig=en,this._urlSegment=Qt,this._lastPathIndex=Pn,this._resolve=ir}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(K=>K.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wr extends Ss{constructor(P,A){super(A),this.url=P,ii(this,A)}toString(){return Wo(this._root)}}function ii(F,P){P.value._routerState=F,P.children.forEach(A=>ii(F,A))}function Wo(F){const P=F.children.length>0?` { ${F.children.map(Wo).join(", ")} } `:"";return`${F.value}${P}`}function ys(F){if(F.snapshot){const P=F.snapshot,A=F._futureSnapshot;F.snapshot=A,Nn(P.queryParams,A.queryParams)||F.queryParams.next(A.queryParams),P.fragment!==A.fragment&&F.fragment.next(A.fragment),Nn(P.params,A.params)||F.params.next(A.params),function Rr(F,P){if(F.length!==P.length)return!1;for(let A=0;A<F.length;++A)if(!Nn(F[A],P[A]))return!1;return!0}(P.url,A.url)||F.url.next(A.url),Nn(P.data,A.data)||F.data.next(A.data)}else F.snapshot=F._futureSnapshot,F.data.next(F._futureSnapshot.data)}function Xi(F,P){const A=Nn(F.params,P.params)&&function on(F,P){return Qn(F,P)&&F.every((A,K)=>Nn(A.parameters,P[K].parameters))}(F.url,P.url);return A&&!(!F.parent!=!P.parent)&&(!F.parent||Xi(F.parent,P.parent))}function oo(F,P,A){if(A&&F.shouldReuseRoute(P.value,A.value.snapshot)){const K=A.value;K._futureSnapshot=P.value;const se=function ss(F,P,A){return P.children.map(K=>{for(const se of A.children)if(F.shouldReuseRoute(K.value,se.value.snapshot))return oo(F,K,se);return oo(F,K)})}(F,P,A);return new ei(K,se)}{if(F.shouldAttach(P.value)){const de=F.retrieve(P.value);if(null!==de){const ze=de.route;return ze.value._futureSnapshot=P.value,ze.children=P.children.map(st=>oo(F,st)),ze}}const K=function Ks(F){return new Di(new Je.X(F.url),new Je.X(F.params),new Je.X(F.queryParams),new Je.X(F.fragment),new Je.X(F.data),F.outlet,F.component,F)}(P.value),se=P.children.map(de=>oo(F,de));return new ei(K,se)}}function Fs(F){return"object"==typeof F&&null!=F&&!F.outlets&&!F.segmentPath}function pa(F){return"object"==typeof F&&null!=F&&F.outlets}function Ia(F,P,A,K,se){let de={};if(K&&xn(K,(st,en)=>{de[en]=Array.isArray(st)?st.map(Qt=>`${Qt}`):`${st}`}),F===P)return new xe(A,de,se);const ze=si(F,P,A);return new xe(ze,de,se)}function si(F,P,A){const K={};return xn(F.children,(se,de)=>{K[de]=se===P?A:si(se,P,A)}),new Ue(F.segments,K)}class ao{constructor(P,A,K){if(this.isAbsolute=P,this.numberOfDoubleDots=A,this.commands=K,P&&K.length>0&&Fs(K[0]))throw new Error("Root segment cannot have matrix parameters");const se=K.find(pa);if(se&&se!==yi(K))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ct{constructor(P,A,K){this.segmentGroup=P,this.processChildren=A,this.index=K}}function Dn(F,P,A){if(F||(F=new Ue([],{})),0===F.segments.length&&F.hasChildren())return Sn(F,P,A);const K=function zr(F,P,A){let K=0,se=P;const de={match:!1,pathIndex:0,commandIndex:0};for(;se<F.segments.length;){if(K>=A.length)return de;const ze=F.segments[se],st=A[K];if(pa(st))break;const en=`${st}`,Qt=K<A.length-1?A[K+1]:null;if(se>0&&void 0===en)break;if(en&&Qt&&"object"==typeof Qt&&void 0===Qt.outlets){if(!ki(en,Qt,ze))return de;K+=2}else{if(!ki(en,{},ze))return de;K++}se++}return{match:!0,pathIndex:se,commandIndex:K}}(F,P,A),se=A.slice(K.commandIndex);if(K.match&&K.pathIndex<F.segments.length){const de=new Ue(F.segments.slice(0,K.pathIndex),{});return de.children[Cn]=new Ue(F.segments.slice(K.pathIndex),F.children),Sn(de,0,se)}return K.match&&0===se.length?new Ue(F.segments,{}):K.match&&!F.hasChildren()?di(F,P,A):K.match?Sn(F,0,se):di(F,P,A)}function Sn(F,P,A){if(0===A.length)return new Ue(F.segments,{});{const K=function nn(F){return pa(F[0])?F[0].outlets:{[Cn]:F}}(A),se={};return xn(K,(de,ze)=>{"string"==typeof de&&(de=[de]),null!==de&&(se[ze]=Dn(F.children[ze],P,de))}),xn(F.children,(de,ze)=>{void 0===K[ze]&&(se[ze]=de)}),new Ue(F.segments,se)}}function di(F,P,A){const K=F.segments.slice(0,P);let se=0;for(;se<A.length;){const de=A[se];if(pa(de)){const en=qr(de.outlets);return new Ue(K,en)}if(0===se&&Fs(A[0])){K.push(new At(F.segments[P].path,yo(A[0]))),se++;continue}const ze=pa(de)?de.outlets[Cn]:`${de}`,st=se<A.length-1?A[se+1]:null;ze&&st&&Fs(st)?(K.push(new At(ze,yo(st))),se+=2):(K.push(new At(ze,{})),se++)}return new Ue(K,{})}function qr(F){const P={};return xn(F,(A,K)=>{"string"==typeof A&&(A=[A]),null!==A&&(P[K]=di(new Ue([],{}),0,A))}),P}function yo(F){const P={};return xn(F,(A,K)=>P[K]=`${A}`),P}function ki(F,P,A){return F==A.path&&Nn(P,A.parameters)}class ga{constructor(P,A,K,se){this.routeReuseStrategy=P,this.futureState=A,this.currState=K,this.forwardEvent=se}activate(P){const A=this.futureState._root,K=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,K,P),ys(this.futureState.root),this.activateChildRoutes(A,K,P)}deactivateChildRoutes(P,A,K){const se=dr(A);P.children.forEach(de=>{const ze=de.value.outlet;this.deactivateRoutes(de,se[ze],K),delete se[ze]}),xn(se,(de,ze)=>{this.deactivateRouteAndItsChildren(de,K)})}deactivateRoutes(P,A,K){const se=P.value,de=A?A.value:null;if(se===de)if(se.component){const ze=K.getContext(se.outlet);ze&&this.deactivateChildRoutes(P,A,ze.children)}else this.deactivateChildRoutes(P,A,K);else de&&this.deactivateRouteAndItsChildren(A,K)}deactivateRouteAndItsChildren(P,A){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,A):this.deactivateRouteAndOutlet(P,A)}detachAndStoreRouteSubtree(P,A){const K=A.getContext(P.value.outlet),se=K&&P.value.component?K.children:A,de=dr(P);for(const ze of Object.keys(de))this.deactivateRouteAndItsChildren(de[ze],se);if(K&&K.outlet){const ze=K.outlet.detach(),st=K.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:ze,route:P,contexts:st})}}deactivateRouteAndOutlet(P,A){const K=A.getContext(P.value.outlet),se=K&&P.value.component?K.children:A,de=dr(P);for(const ze of Object.keys(de))this.deactivateRouteAndItsChildren(de[ze],se);K&&K.outlet&&(K.outlet.deactivate(),K.children.onOutletDeactivated(),K.attachRef=null,K.resolver=null,K.route=null)}activateChildRoutes(P,A,K){const se=dr(A);P.children.forEach(de=>{this.activateRoutes(de,se[de.value.outlet],K),this.forwardEvent(new Kn(de.value.snapshot))}),P.children.length&&this.forwardEvent(new Pr(P.value.snapshot))}activateRoutes(P,A,K){const se=P.value,de=A?A.value:null;if(ys(se),se===de)if(se.component){const ze=K.getOrCreateContext(se.outlet);this.activateChildRoutes(P,A,ze.children)}else this.activateChildRoutes(P,A,K);else if(se.component){const ze=K.getOrCreateContext(se.outlet);if(this.routeReuseStrategy.shouldAttach(se.snapshot)){const st=this.routeReuseStrategy.retrieve(se.snapshot);this.routeReuseStrategy.store(se.snapshot,null),ze.children.onOutletReAttached(st.contexts),ze.attachRef=st.componentRef,ze.route=st.route.value,ze.outlet&&ze.outlet.attach(st.componentRef,st.route.value),ys(st.route.value),this.activateChildRoutes(P,null,ze.children)}else{const st=function Do(F){for(let P=F.parent;P;P=P.parent){const A=P.routeConfig;if(A&&A._loadedConfig)return A._loadedConfig;if(A&&A.component)return null}return null}(se.snapshot),en=st?st.module.componentFactoryResolver:null;ze.attachRef=null,ze.route=se,ze.resolver=en,ze.outlet&&ze.outlet.activateWith(se,en),this.activateChildRoutes(P,null,ze.children)}}else this.activateChildRoutes(P,null,K)}}class jo{constructor(P,A){this.routes=P,this.module=A}}function Zs(F){return"function"==typeof F}function Ci(F){return F instanceof xe}const Ga=Symbol("INITIAL_VALUE");function sa(){return(0,J.w)(F=>(0,ft.a)(F.map(P=>P.pipe((0,Ae.q)(1),(0,Ee.O)(Ga)))).pipe((0,je.R)((P,A)=>{let K=!1;return A.reduce((se,de,ze)=>se!==Ga?se:(de===Ga&&(K=!0),K||!1!==de&&ze!==A.length-1&&!Ci(de)?se:de),P)},Ga),(0,ie.h)(P=>P!==Ga),(0,he.U)(P=>Ci(P)?P:!0===P),(0,Ae.q)(1)))}class zo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bo,this.attachRef=null}}class bo{constructor(){this.contexts=new Map}onChildOutletCreated(P,A){const K=this.getOrCreateContext(P);K.outlet=A,this.contexts.set(P,K)}onChildOutletDestroyed(P){const A=this.getContext(P);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const P=this.contexts;return this.contexts=new Map,P}onOutletReAttached(P){this.contexts=P}getOrCreateContext(P){let A=this.getContext(P);return A||(A=new zo,this.contexts.set(P,A)),A}getContext(P){return this.contexts.get(P)||null}}let Ji=(()=>{class F{constructor(A,K,se,de,ze){this.parentContexts=A,this.location=K,this.resolver=se,this.changeDetector=ze,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.name=de||Cn,A.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const A=this.parentContexts.getContext(this.name);A&&A.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,K){this.activated=A,this._activatedRoute=K,this.location.insert(A.hostView),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,K){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=A;const ze=(K=K||this.resolver).resolveComponentFactory(A._futureSnapshot.routeConfig.component),st=this.parentContexts.getOrCreateContext(this.name).children,en=new $a(A,st,this.location.injector);this.activated=this.location.createComponent(ze,this.location.length,en),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return F.\u0275fac=function(A){return new(A||F)(E.Y36(bo),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.Y36(E.sBO))},F.\u0275dir=E.lG2({type:F,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),F})();class $a{constructor(P,A,K){this.route=P,this.childContexts=A,this.parent=K}get(P,A){return P===Di?this.route:P===bo?this.childContexts:this.parent.get(P,A)}}let Mi=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275cmp=E.Xpm({type:F,selectors:[["ng-component"]],decls:1,vars:0,template:function(A,K){1&A&&E._UZ(0,"router-outlet")},directives:[Ji],encapsulation:2}),F})();function ko(F,P=""){for(let A=0;A<F.length;A++){const K=F[A];Li(K,Wa(P,K))}}function Li(F,P){F.children&&ko(F.children,P)}function Wa(F,P){return P?F||P.path?F&&!P.path?`${F}/`:!F&&P.path?P.path:`${F}/${P.path}`:"":F}function Da(F){const P=F.children&&F.children.map(Da),A=P?Object.assign(Object.assign({},F),{children:P}):Object.assign({},F);return!A.component&&(P||A.loadChildren)&&A.outlet&&A.outlet!==Cn&&(A.component=Mi),A}function ks(F){return F.outlet||Cn}function Mo(F,P){const A=F.filter(K=>ks(K)===P);return A.push(...F.filter(K=>ks(K)!==P)),A}const qo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fs(F,P,A){var K;if(""===P.path)return"full"===P.pathMatch&&(F.hasChildren()||A.length>0)?Object.assign({},qo):{matched:!0,consumedSegments:[],remainingSegments:A,parameters:{},positionalParamSegments:{}};const de=(P.matcher||Hi)(A,F,P);if(!de)return Object.assign({},qo);const ze={};xn(de.posParams,(en,Qt)=>{ze[Qt]=en.path});const st=de.consumed.length>0?Object.assign(Object.assign({},ze),de.consumed[de.consumed.length-1].parameters):ze;return{matched:!0,consumedSegments:de.consumed,remainingSegments:A.slice(de.consumed.length),parameters:st,positionalParamSegments:null!==(K=de.posParams)&&void 0!==K?K:{}}}function va(F,P,A,K,se="corrected"){if(A.length>0&&function ve(F,P,A){return A.some(K=>Ce(F,P,K)&&ks(K)!==Cn)}(F,A,K)){const ze=new Ue(P,function Z(F,P,A,K){const se={};se[Cn]=K,K._sourceSegment=F,K._segmentIndexShift=P.length;for(const de of A)if(""===de.path&&ks(de)!==Cn){const ze=new Ue([],{});ze._sourceSegment=F,ze._segmentIndexShift=P.length,se[ks(de)]=ze}return se}(F,P,K,new Ue(A,F.children)));return ze._sourceSegment=F,ze._segmentIndexShift=P.length,{segmentGroup:ze,slicedSegments:[]}}if(0===A.length&&function z(F,P,A){return A.some(K=>Ce(F,P,K))}(F,A,K)){const ze=new Ue(F.segments,function pi(F,P,A,K,se,de){const ze={};for(const st of K)if(Ce(F,A,st)&&!se[ks(st)]){const en=new Ue([],{});en._sourceSegment=F,en._segmentIndexShift="legacy"===de?F.segments.length:P.length,ze[ks(st)]=en}return Object.assign(Object.assign({},se),ze)}(F,P,A,K,F.children,se));return ze._sourceSegment=F,ze._segmentIndexShift=P.length,{segmentGroup:ze,slicedSegments:A}}const de=new Ue(F.segments,F.children);return de._sourceSegment=F,de._segmentIndexShift=P.length,{segmentGroup:de,slicedSegments:A}}function Ce(F,P,A){return(!(F.hasChildren()||P.length>0)||"full"!==A.pathMatch)&&""===A.path}function ot(F,P,A,K){return!!(ks(F)===K||K!==Cn&&Ce(P,A,F))&&("**"===F.path||fs(P,F,A).matched)}function Vt(F,P,A){return 0===P.length&&!F.children[A]}class qt{constructor(P){this.segmentGroup=P||null}}class Xn{constructor(P){this.urlTree=P}}function br(F){return Ne(new qt(F))}function ar(F){return Ne(new Xn(F))}class Ti{constructor(P,A,K,se,de){this.configLoader=A,this.urlSerializer=K,this.urlTree=se,this.config=de,this.allowRedirects=!0,this.ngModule=P.get(E.h0i)}apply(){const P=va(this.urlTree.root,[],[],this.config).segmentGroup,A=new Ue(P.segments,P.children);return this.expandSegmentGroup(this.ngModule,this.config,A,Cn).pipe((0,he.U)(de=>this.createUrlTree(te(de),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,We.K)(de=>{if(de instanceof Xn)return this.allowRedirects=!1,this.match(de.urlTree);throw de instanceof qt?this.noMatchError(de):de}))}match(P){return this.expandSegmentGroup(this.ngModule,this.config,P.root,Cn).pipe((0,he.U)(se=>this.createUrlTree(te(se),P.queryParams,P.fragment))).pipe((0,We.K)(se=>{throw se instanceof qt?this.noMatchError(se):se}))}noMatchError(P){return new Error(`Cannot match any routes. URL Segment: '${P.segmentGroup}'`)}createUrlTree(P,A,K){const se=P.segments.length>0?new Ue([],{[Cn]:P}):P;return new xe(se,A,K)}expandSegmentGroup(P,A,K,se){return 0===K.segments.length&&K.hasChildren()?this.expandChildren(P,A,K).pipe((0,he.U)(de=>new Ue([],de))):this.expandSegment(P,K,A,K.segments,se,!0)}expandChildren(P,A,K){const se=[];for(const de of Object.keys(K.children))"primary"===de?se.unshift(de):se.push(de);return(0,Oe.D)(se).pipe((0,St.b)(de=>{const ze=K.children[de],st=Mo(A,de);return this.expandSegmentGroup(P,st,ze,de).pipe((0,he.U)(en=>({segment:en,outlet:de})))}),(0,je.R)((de,ze)=>(de[ze.outlet]=ze.segment,de),{}),function xt(F,P){const A=arguments.length>=2;return K=>K.pipe(F?(0,ie.h)((se,de)=>F(se,de,K)):gt.y,ne(1),A?(0,Ke.d)(P):(0,be.T)(()=>new it.K))}())}expandSegment(P,A,K,se,de,ze){return(0,Oe.D)(K).pipe((0,St.b)(st=>this.expandSegmentAgainstRoute(P,A,K,st,se,de,ze).pipe((0,We.K)(Qt=>{if(Qt instanceof qt)return(0,et.of)(null);throw Qt}))),(0,ct.P)(st=>!!st),(0,We.K)((st,en)=>{if(st instanceof it.K||"EmptyError"===st.name)return Vt(A,se,de)?(0,et.of)(new Ue([],{})):br(A);throw st}))}expandSegmentAgainstRoute(P,A,K,se,de,ze,st){return ot(se,A,de,ze)?void 0===se.redirectTo?this.matchSegmentAgainstRoute(P,A,se,de,ze):st&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(P,A,K,se,de,ze):br(A):br(A)}expandSegmentAgainstRouteUsingRedirect(P,A,K,se,de,ze){return"**"===se.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(P,K,se,ze):this.expandRegularSegmentAgainstRouteUsingRedirect(P,A,K,se,de,ze)}expandWildCardWithParamsAgainstRouteUsingRedirect(P,A,K,se){const de=this.applyRedirectCommands([],K.redirectTo,{});return K.redirectTo.startsWith("/")?ar(de):this.lineralizeSegments(K,de).pipe((0,wt.z)(ze=>{const st=new Ue(ze,{});return this.expandSegment(P,st,A,ze,se,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(P,A,K,se,de,ze){const{matched:st,consumedSegments:en,remainingSegments:Qt,positionalParamSegments:Pn}=fs(A,se,de);if(!st)return br(A);const ir=this.applyRedirectCommands(en,se.redirectTo,Pn);return se.redirectTo.startsWith("/")?ar(ir):this.lineralizeSegments(se,ir).pipe((0,wt.z)(pn=>this.expandSegment(P,A,K,pn.concat(Qt),ze,!1)))}matchSegmentAgainstRoute(P,A,K,se,de){if("**"===K.path)return K.loadChildren?(K._loadedConfig?(0,et.of)(K._loadedConfig):this.configLoader.load(P.injector,K)).pipe((0,he.U)(ir=>(K._loadedConfig=ir,new Ue(se,{})))):(0,et.of)(new Ue(se,{}));const{matched:ze,consumedSegments:st,remainingSegments:en}=fs(A,K,se);return ze?this.getChildConfig(P,K,se).pipe((0,wt.z)(Pn=>{const ir=Pn.module,pn=Pn.routes,{segmentGroup:Rt,slicedSegments:dn}=va(A,st,en,pn),gs=new Ue(Rt.segments,Rt.children);if(0===dn.length&&gs.hasChildren())return this.expandChildren(ir,pn,gs).pipe((0,he.U)(ul=>new Ue(st,ul)));if(0===pn.length&&0===dn.length)return(0,et.of)(new Ue(st,{}));const ou=ks(K)===de;return this.expandSegment(ir,gs,pn,dn,ou?Cn:de,!0).pipe((0,he.U)(Ea=>new Ue(st.concat(Ea.segments),Ea.children)))})):br(A)}getChildConfig(P,A,K){return A.children?(0,et.of)(new jo(A.children,P)):A.loadChildren?void 0!==A._loadedConfig?(0,et.of)(A._loadedConfig):this.runCanLoadGuards(P.injector,A,K).pipe((0,wt.z)(se=>se?this.configLoader.load(P.injector,A).pipe((0,he.U)(de=>(A._loadedConfig=de,de))):function jr(F){return Ne(ri(`Cannot load children because the guard of the route "path: '${F.path}'" returned false`))}(A))):(0,et.of)(new jo([],P))}runCanLoadGuards(P,A,K){const se=A.canLoad;if(!se||0===se.length)return(0,et.of)(!0);const de=se.map(ze=>{const st=P.get(ze);let en;if(function Ao(F){return F&&Zs(F.canLoad)}(st))en=st.canLoad(A,K);else{if(!Zs(st))throw new Error("Invalid CanLoad guard");en=st(A,K)}return Hr(en)});return(0,et.of)(de).pipe(sa(),(0,Dt.b)(ze=>{if(!Ci(ze))return;const st=ri(`Redirecting to "${this.urlSerializer.serialize(ze)}"`);throw st.url=ze,st}),(0,he.U)(ze=>!0===ze))}lineralizeSegments(P,A){let K=[],se=A.root;for(;;){if(K=K.concat(se.segments),0===se.numberOfChildren)return(0,et.of)(K);if(se.numberOfChildren>1||!se.children[Cn])return Ne(new Error(`Only absolute redirects can have named outlets. redirectTo: '${P.redirectTo}'`));se=se.children[Cn]}}applyRedirectCommands(P,A,K){return this.applyRedirectCreatreUrlTree(A,this.urlSerializer.parse(A),P,K)}applyRedirectCreatreUrlTree(P,A,K,se){const de=this.createSegmentGroup(P,A.root,K,se);return new xe(de,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(P,A){const K={};return xn(P,(se,de)=>{if("string"==typeof se&&se.startsWith(":")){const st=se.substring(1);K[de]=A[st]}else K[de]=se}),K}createSegmentGroup(P,A,K,se){const de=this.createSegments(P,A.segments,K,se);let ze={};return xn(A.children,(st,en)=>{ze[en]=this.createSegmentGroup(P,st,K,se)}),new Ue(de,ze)}createSegments(P,A,K,se){return A.map(de=>de.path.startsWith(":")?this.findPosParam(P,de,se):this.findOrReturn(de,K))}findPosParam(P,A,K){const se=K[A.path.substring(1)];if(!se)throw new Error(`Cannot redirect to '${P}'. Cannot find '${A.path}'.`);return se}findOrReturn(P,A){let K=0;for(const se of A){if(se.path===P.path)return A.splice(K),se;K++}return P}}function te(F){const P={};for(const K of Object.keys(F.children)){const de=te(F.children[K]);(de.segments.length>0||de.hasChildren())&&(P[K]=de)}return function Fi(F){if(1===F.numberOfChildren&&F.children[Cn]){const P=F.children[Cn];return new Ue(F.segments.concat(P.segments),P.children)}return F}(new Ue(F.segments,P))}class B{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class we{constructor(P,A){this.component=P,this.route=A}}function Zt(F,P,A){const K=F._root;return Qs(K,P?P._root:null,A,[K.value])}function Pi(F,P,A){const K=function Uo(F){if(!F)return null;for(let P=F.parent;P;P=P.parent){const A=P.routeConfig;if(A&&A._loadedConfig)return A._loadedConfig}return null}(P);return(K?K.module.injector:A).get(F)}function Qs(F,P,A,K,se={canDeactivateChecks:[],canActivateChecks:[]}){const de=dr(P);return F.children.forEach(ze=>{(function _u(F,P,A,K,se={canDeactivateChecks:[],canActivateChecks:[]}){const de=F.value,ze=P?P.value:null,st=A?A.getContext(F.value.outlet):null;if(ze&&de.routeConfig===ze.routeConfig){const en=function fe(F,P,A){if("function"==typeof A)return A(F,P);switch(A){case"pathParamsChange":return!Qn(F.url,P.url);case"pathParamsOrQueryParamsChange":return!Qn(F.url,P.url)||!Nn(F.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xi(F,P)||!Nn(F.queryParams,P.queryParams);default:return!Xi(F,P)}}(ze,de,de.routeConfig.runGuardsAndResolvers);en?se.canActivateChecks.push(new B(K)):(de.data=ze.data,de._resolvedData=ze._resolvedData),Qs(F,P,de.component?st?st.children:null:A,K,se),en&&st&&st.outlet&&st.outlet.isActivated&&se.canDeactivateChecks.push(new we(st.outlet.component,ze))}else ze&&G(P,st,se),se.canActivateChecks.push(new B(K)),Qs(F,null,de.component?st?st.children:null:A,K,se)})(ze,de[ze.value.outlet],A,K.concat([ze.value]),se),delete de[ze.value.outlet]}),xn(de,(ze,st)=>G(ze,A.getContext(st),se)),se}function G(F,P,A){const K=dr(F),se=F.value;xn(K,(de,ze)=>{G(de,se.component?P?P.children.getContext(ze):null:P,A)}),A.canDeactivateChecks.push(new we(se.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,se))}class Zr{}function gi(F){return new k.y(P=>P.error(F))}class Ii{constructor(P,A,K,se,de,ze){this.rootComponentType=P,this.config=A,this.urlTree=K,this.url=se,this.paramsInheritanceStrategy=de,this.relativeLinkResolution=ze}recognize(){const P=va(this.urlTree.root,[],[],this.config.filter(ze=>void 0===ze.redirectTo),this.relativeLinkResolution).segmentGroup,A=this.processSegmentGroup(this.config,P,Cn);if(null===A)return null;const K=new Cs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Cn,this.rootComponentType,null,this.urlTree.root,-1,{}),se=new ei(K,A),de=new Wr(this.url,se);return this.inheritParamsAndData(de._root),de}inheritParamsAndData(P){const A=P.value,K=Ai(A,this.paramsInheritanceStrategy);A.params=Object.freeze(K.params),A.data=Object.freeze(K.data),P.children.forEach(se=>this.inheritParamsAndData(se))}processSegmentGroup(P,A,K){return 0===A.segments.length&&A.hasChildren()?this.processChildren(P,A):this.processSegment(P,A,A.segments,K)}processChildren(P,A){const K=[];for(const de of Object.keys(A.children)){const ze=A.children[de],st=Mo(P,de),en=this.processSegmentGroup(st,ze,de);if(null===en)return null;K.push(...en)}const se=_s(K);return function Yr(F){F.sort((P,A)=>P.value.outlet===Cn?-1:A.value.outlet===Cn?1:P.value.outlet.localeCompare(A.value.outlet))}(se),se}processSegment(P,A,K,se){for(const de of P){const ze=this.processSegmentAgainstRoute(de,A,K,se);if(null!==ze)return ze}return Vt(A,K,se)?[]:null}processSegmentAgainstRoute(P,A,K,se){if(P.redirectTo||!ot(P,A,K,se))return null;let de,ze=[],st=[];if("**"===P.path){const Rt=K.length>0?yi(K).parameters:{};de=new Cs(K,Rt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hi(P),ks(P),P.component,P,ji(A),es(A)+K.length,us(P))}else{const Rt=fs(A,P,K);if(!Rt.matched)return null;ze=Rt.consumedSegments,st=Rt.remainingSegments,de=new Cs(ze,Rt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hi(P),ks(P),P.component,P,ji(A),es(A)+ze.length,us(P))}const en=function Wi(F){return F.children?F.children:F.loadChildren?F._loadedConfig.routes:[]}(P),{segmentGroup:Qt,slicedSegments:Pn}=va(A,ze,st,en.filter(Rt=>void 0===Rt.redirectTo),this.relativeLinkResolution);if(0===Pn.length&&Qt.hasChildren()){const Rt=this.processChildren(en,Qt);return null===Rt?null:[new ei(de,Rt)]}if(0===en.length&&0===Pn.length)return[new ei(de,[])];const ir=ks(P)===se,pn=this.processSegment(en,Qt,Pn,ir?Cn:se);return null===pn?null:[new ei(de,pn)]}}function Oi(F){const P=F.value.routeConfig;return P&&""===P.path&&void 0===P.redirectTo}function _s(F){const P=[],A=new Set;for(const K of F){if(!Oi(K)){P.push(K);continue}const se=P.find(de=>K.value.routeConfig===de.value.routeConfig);void 0!==se?(se.children.push(...K.children),A.add(se)):P.push(K)}for(const K of A){const se=_s(K.children);P.push(new ei(K.value,se))}return P.filter(K=>!A.has(K))}function ji(F){let P=F;for(;P._sourceSegment;)P=P._sourceSegment;return P}function es(F){let P=F,A=P._segmentIndexShift?P._segmentIndexShift:0;for(;P._sourceSegment;)P=P._sourceSegment,A+=P._segmentIndexShift?P._segmentIndexShift:0;return A-1}function hi(F){return F.data||{}}function us(F){return F.resolve||{}}function wl(F){return[...Object.keys(F),...Object.getOwnPropertySymbols(F)]}function Bo(F){return(0,J.w)(P=>{const A=F(P);return A?(0,Oe.D)(A).pipe((0,he.U)(()=>P)):(0,et.of)(P)})}class Xs extends class Ui{shouldDetach(P){return!1}store(P,A){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,A){return P.routeConfig===A.routeConfig}}{}const za=new E.OlP("ROUTES");class Aa{constructor(P,A,K,se){this.injector=P,this.compiler=A,this.onLoadStartListener=K,this.onLoadEndListener=se}load(P,A){if(A._loader$)return A._loader$;this.onLoadStartListener&&this.onLoadStartListener(A);const se=this.loadModuleFactory(A.loadChildren).pipe((0,he.U)(de=>{this.onLoadEndListener&&this.onLoadEndListener(A);const ze=de.create(P);return new jo(ci(ze.injector.get(za,void 0,E.XFs.Self|E.XFs.Optional)).map(Da),ze)}),(0,We.K)(de=>{throw A._loader$=void 0,de}));return A._loader$=new Me(se,()=>new Tt.x).pipe(pe()),A._loader$}loadModuleFactory(P){return Hr(P()).pipe((0,wt.z)(A=>A instanceof E.YKP?(0,et.of)(A):(0,Oe.D)(this.compiler.compileModuleAsync(A))))}}class bu{shouldProcessUrl(P){return!0}extract(P){return P}merge(P,A){return P}}function Po(F){throw F}function nu(F,P,A){return P.parse("/")}function ps(F,P){return(0,et.of)(null)}const _a={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let To=(()=>{class F{constructor(A,K,se,de,ze,st,en){this.rootComponentType=A,this.urlSerializer=K,this.rootContexts=se,this.location=de,this.config=en,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tt.x,this.errorHandler=Po,this.malformedUriErrorHandler=nu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ps,afterPreactivation:ps},this.urlHandlingStrategy=new bu,this.routeReuseStrategy=new Xs,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ze.get(E.h0i),this.console=ze.get(E.c2e);const ir=ze.get(E.R0b);this.isNgZoneEnabled=ir instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(en),this.currentUrlTree=function _i(){return new xe(new Ue([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Aa(ze,st,pn=>this.triggerEvent(new ur(pn)),pn=>this.triggerEvent(new Lr(pn))),this.routerState=ws(this.currentUrlTree,this.rootComponentType),this.transitions=new Je.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var A;return null===(A=this.location.getState())||void 0===A?void 0:A.\u0275routerPageId}setupNavigations(A){const K=this.events;return A.pipe((0,ie.h)(se=>0!==se.id),(0,he.U)(se=>Object.assign(Object.assign({},se),{extractedUrl:this.urlHandlingStrategy.extract(se.rawUrl)})),(0,J.w)(se=>{let de=!1,ze=!1;return(0,et.of)(se).pipe((0,Dt.b)(st=>{this.currentNavigation={id:st.id,initialUrl:st.currentRawUrl,extractedUrl:st.extractedUrl,trigger:st.source,extras:st.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,J.w)(st=>{const en=this.browserUrlTree.toString(),Qt=!this.navigated||st.extractedUrl.toString()!==en||en!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Qt)&&this.urlHandlingStrategy.shouldProcessUrl(st.rawUrl))return ol(st.source)&&(this.browserUrlTree=st.extractedUrl),(0,et.of)(st).pipe((0,J.w)(ir=>{const pn=this.transitions.getValue();return K.next(new Yt(ir.id,this.serializeUrl(ir.extractedUrl),ir.source,ir.restoredState)),pn!==this.transitions.getValue()?$e.E:Promise.resolve(ir)}),function $(F,P,A,K){return(0,J.w)(se=>function bi(F,P,A,K,se){return new Ti(F,P,A,K,se).apply()}(F,P,A,se.extractedUrl,K).pipe((0,he.U)(de=>Object.assign(Object.assign({},se),{urlAfterRedirects:de}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Dt.b)(ir=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:ir.urlAfterRedirects})}),function tu(F,P,A,K,se){return(0,wt.z)(de=>function xi(F,P,A,K,se="emptyOnly",de="legacy"){try{const ze=new Ii(F,P,A,K,se,de).recognize();return null===ze?gi(new Zr):(0,et.of)(ze)}catch(ze){return gi(ze)}}(F,P,de.urlAfterRedirects,A(de.urlAfterRedirects),K,se).pipe((0,he.U)(ze=>Object.assign(Object.assign({},de),{targetSnapshot:ze}))))}(this.rootComponentType,this.config,ir=>this.serializeUrl(ir),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Dt.b)(ir=>{if("eager"===this.urlUpdateStrategy){if(!ir.extras.skipLocationChange){const Rt=this.urlHandlingStrategy.merge(ir.urlAfterRedirects,ir.rawUrl);this.setBrowserUrl(Rt,ir)}this.browserUrlTree=ir.urlAfterRedirects}const pn=new Vn(ir.id,this.serializeUrl(ir.extractedUrl),this.serializeUrl(ir.urlAfterRedirects),ir.targetSnapshot);K.next(pn)}));if(Qt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:pn,extractedUrl:Rt,source:dn,restoredState:gs,extras:ou}=st,xl=new Yt(pn,this.serializeUrl(Rt),dn,gs);K.next(xl);const Ea=ws(Rt,this.rootComponentType).snapshot;return(0,et.of)(Object.assign(Object.assign({},st),{targetSnapshot:Ea,urlAfterRedirects:Rt,extras:Object.assign(Object.assign({},ou),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=st.rawUrl,st.resolve(null),$e.E}),Bo(st=>{const{targetSnapshot:en,id:Qt,extractedUrl:Pn,rawUrl:ir,extras:{skipLocationChange:pn,replaceUrl:Rt}}=st;return this.hooks.beforePreactivation(en,{navigationId:Qt,appliedUrlTree:Pn,rawUrlTree:ir,skipLocationChange:!!pn,replaceUrl:!!Rt})}),(0,Dt.b)(st=>{const en=new Ar(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(en)}),(0,he.U)(st=>Object.assign(Object.assign({},st),{guards:Zt(st.targetSnapshot,st.currentSnapshot,this.rootContexts)})),function Ie(F,P){return(0,wt.z)(A=>{const{targetSnapshot:K,currentSnapshot:se,guards:{canActivateChecks:de,canDeactivateChecks:ze}}=A;return 0===ze.length&&0===de.length?(0,et.of)(Object.assign(Object.assign({},A),{guardsResult:!0})):function Qe(F,P,A,K){return(0,Oe.D)(F).pipe((0,wt.z)(se=>function yr(F,P,A,K,se){const de=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!de||0===de.length)return(0,et.of)(!0);const ze=de.map(st=>{const en=Pi(st,P,se);let Qt;if(function ma(F){return F&&Zs(F.canDeactivate)}(en))Qt=Hr(en.canDeactivate(F,P,A,K));else{if(!Zs(en))throw new Error("Invalid CanDeactivate guard");Qt=Hr(en(F,P,A,K))}return Qt.pipe((0,ct.P)())});return(0,et.of)(ze).pipe(sa())}(se.component,se.route,A,P,K)),(0,ct.P)(se=>!0!==se,!0))}(ze,K,se,F).pipe((0,wt.z)(st=>st&&function ia(F){return"boolean"==typeof F}(st)?function lt(F,P,A,K){return(0,Oe.D)(P).pipe((0,St.b)(se=>(0,He.z)(function mn(F,P){return null!==F&&P&&P(new Mr(F)),(0,et.of)(!0)}(se.route.parent,K),function Bt(F,P){return null!==F&&P&&P(new Mn(F)),(0,et.of)(!0)}(se.route,K),function $n(F,P,A){const K=P[P.length-1],de=P.slice(0,P.length-1).reverse().map(ze=>function tr(F){const P=F.routeConfig?F.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:F,guards:P}:null}(ze)).filter(ze=>null!==ze).map(ze=>ke(()=>{const st=ze.guards.map(en=>{const Qt=Pi(en,ze.node,A);let Pn;if(function _o(F){return F&&Zs(F.canActivateChild)}(Qt))Pn=Hr(Qt.canActivateChild(K,F));else{if(!Zs(Qt))throw new Error("Invalid CanActivateChild guard");Pn=Hr(Qt(K,F))}return Pn.pipe((0,ct.P)())});return(0,et.of)(st).pipe(sa())}));return(0,et.of)(de).pipe(sa())}(F,se.path,A),function Gn(F,P,A){const K=P.routeConfig?P.routeConfig.canActivate:null;if(!K||0===K.length)return(0,et.of)(!0);const se=K.map(de=>ke(()=>{const ze=Pi(de,P,A);let st;if(function Ys(F){return F&&Zs(F.canActivate)}(ze))st=Hr(ze.canActivate(P,F));else{if(!Zs(ze))throw new Error("Invalid CanActivate guard");st=Hr(ze(P,F))}return st.pipe((0,ct.P)())}));return(0,et.of)(se).pipe(sa())}(F,se.route,A))),(0,ct.P)(se=>!0!==se,!0))}(K,de,F,P):(0,et.of)(st)),(0,he.U)(st=>Object.assign(Object.assign({},A),{guardsResult:st})))})}(this.ngModule.injector,st=>this.triggerEvent(st)),(0,Dt.b)(st=>{if(Ci(st.guardsResult)){const Qt=ri(`Redirecting to "${this.serializeUrl(st.guardsResult)}"`);throw Qt.url=st.guardsResult,Qt}const en=new vr(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot,!!st.guardsResult);this.triggerEvent(en)}),(0,ie.h)(st=>!!st.guardsResult||(this.restoreHistory(st),this.cancelNavigationTransition(st,""),!1)),Bo(st=>{if(st.guards.canActivateChecks.length)return(0,et.of)(st).pipe((0,Dt.b)(en=>{const Qt=new Cr(en.id,this.serializeUrl(en.extractedUrl),this.serializeUrl(en.urlAfterRedirects),en.targetSnapshot);this.triggerEvent(Qt)}),(0,J.w)(en=>{let Qt=!1;return(0,et.of)(en).pipe(function ya(F,P){return(0,wt.z)(A=>{const{targetSnapshot:K,guards:{canActivateChecks:se}}=A;if(!se.length)return(0,et.of)(A);let de=0;return(0,Oe.D)(se).pipe((0,St.b)(ze=>function Fr(F,P,A,K){return function Ql(F,P,A,K){const se=wl(F);if(0===se.length)return(0,et.of)({});const de={};return(0,Oe.D)(se).pipe((0,wt.z)(ze=>function sl(F,P,A,K){const se=Pi(F,P,K);return Hr(se.resolve?se.resolve(P,A):se(P,A))}(F[ze],P,A,K).pipe((0,Dt.b)(st=>{de[ze]=st}))),ne(1),(0,wt.z)(()=>wl(de).length===se.length?(0,et.of)(de):$e.E))}(F._resolve,F,P,K).pipe((0,he.U)(de=>(F._resolvedData=de,F.data=Object.assign(Object.assign({},F.data),Ai(F,A).resolve),null)))}(ze.route,K,F,P)),(0,Dt.b)(()=>de++),ne(1),(0,wt.z)(ze=>de===se.length?(0,et.of)(A):$e.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Dt.b)({next:()=>Qt=!0,complete:()=>{Qt||(this.restoreHistory(en),this.cancelNavigationTransition(en,"At least one route resolver didn't emit any value."))}}))}),(0,Dt.b)(en=>{const Qt=new kr(en.id,this.serializeUrl(en.extractedUrl),this.serializeUrl(en.urlAfterRedirects),en.targetSnapshot);this.triggerEvent(Qt)}))}),Bo(st=>{const{targetSnapshot:en,id:Qt,extractedUrl:Pn,rawUrl:ir,extras:{skipLocationChange:pn,replaceUrl:Rt}}=st;return this.hooks.afterPreactivation(en,{navigationId:Qt,appliedUrlTree:Pn,rawUrlTree:ir,skipLocationChange:!!pn,replaceUrl:!!Rt})}),(0,he.U)(st=>{const en=function so(F,P,A){const K=oo(F,P._root,A?A._root:void 0);return new hs(K,P)}(this.routeReuseStrategy,st.targetSnapshot,st.currentRouterState);return Object.assign(Object.assign({},st),{targetRouterState:en})}),(0,Dt.b)(st=>{this.currentUrlTree=st.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(st.urlAfterRedirects,st.rawUrl),this.routerState=st.targetRouterState,"deferred"===this.urlUpdateStrategy&&(st.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,st),this.browserUrlTree=st.urlAfterRedirects)}),((F,P,A)=>(0,he.U)(K=>(new ga(P,K.targetRouterState,K.currentRouterState,A).activate(F),K)))(this.rootContexts,this.routeReuseStrategy,st=>this.triggerEvent(st)),(0,Dt.b)({next(){de=!0},complete(){de=!0}}),function X(F){return(0,Y.e)((P,A)=>{try{P.subscribe(A)}finally{A.add(F)}})}(()=>{var st;de||ze||this.cancelNavigationTransition(se,`Navigation ID ${se.id} is not equal to the current navigation id ${this.navigationId}`),(null===(st=this.currentNavigation)||void 0===st?void 0:st.id)===se.id&&(this.currentNavigation=null)}),(0,We.K)(st=>{if(ze=!0,function Ni(F){return F&&F[xr]}(st)){const en=Ci(st.url);en||(this.navigated=!0,this.restoreHistory(se,!0));const Qt=new fn(se.id,this.serializeUrl(se.extractedUrl),st.message);K.next(Qt),en?setTimeout(()=>{const Pn=this.urlHandlingStrategy.merge(st.url,this.rawUrlTree),ir={skipLocationChange:se.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ol(se.source)};this.scheduleNavigation(Pn,"imperative",null,ir,{resolve:se.resolve,reject:se.reject,promise:se.promise})},0):se.resolve(!1)}else{this.restoreHistory(se,!0);const en=new Ln(se.id,this.serializeUrl(se.extractedUrl),st);K.next(en);try{se.resolve(this.errorHandler(st))}catch(Qt){se.reject(Qt)}}return $e.E}))}))}resetRootComponentType(A){this.rootComponentType=A,this.routerState.root.component=this.rootComponentType}setTransition(A){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),A))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(A=>{const K="popstate"===A.type?"popstate":"hashchange";"popstate"===K&&setTimeout(()=>{var se;const de={replaceUrl:!0},ze=(null===(se=A.state)||void 0===se?void 0:se.navigationId)?A.state:null;if(ze){const en=Object.assign({},ze);delete en.navigationId,delete en.\u0275routerPageId,0!==Object.keys(en).length&&(de.state=en)}const st=this.parseUrl(A.url);this.scheduleNavigation(st,K,ze,de)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(A){this.events.next(A)}resetConfig(A){ko(A),this.config=A.map(Da),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(A,K={}){const{relativeTo:se,queryParams:de,fragment:ze,queryParamsHandling:st,preserveFragment:en}=K,Qt=se||this.routerState.root,Pn=en?this.currentUrlTree.fragment:ze;let ir=null;switch(st){case"merge":ir=Object.assign(Object.assign({},this.currentUrlTree.queryParams),de);break;case"preserve":ir=this.currentUrlTree.queryParams;break;default:ir=de||null}return null!==ir&&(ir=this.removeEmptyProps(ir)),function vo(F,P,A,K,se){if(0===A.length)return Ia(P.root,P.root,P.root,K,se);const de=function ra(F){if("string"==typeof F[0]&&1===F.length&&"/"===F[0])return new ao(!0,0,F);let P=0,A=!1;const K=F.reduce((se,de,ze)=>{if("object"==typeof de&&null!=de){if(de.outlets){const st={};return xn(de.outlets,(en,Qt)=>{st[Qt]="string"==typeof en?en.split("/"):en}),[...se,{outlets:st}]}if(de.segmentPath)return[...se,de.segmentPath]}return"string"!=typeof de?[...se,de]:0===ze?(de.split("/").forEach((st,en)=>{0==en&&"."===st||(0==en&&""===st?A=!0:".."===st?P++:""!=st&&se.push(st))}),se):[...se,de]},[]);return new ao(A,P,K)}(A);if(de.toRoot())return Ia(P.root,P.root,new Ue([],{}),K,se);const ze=function mt(F,P,A){if(F.isAbsolute)return new Ct(P.root,!0,0);if(-1===A.snapshot._lastPathIndex){const de=A.snapshot._urlSegment;return new Ct(de,de===P.root,0)}const K=Fs(F.commands[0])?0:1;return function jt(F,P,A){let K=F,se=P,de=A;for(;de>se;){if(de-=se,K=K.parent,!K)throw new Error("Invalid number of '../'");se=K.segments.length}return new Ct(K,!1,se-de)}(A.snapshot._urlSegment,A.snapshot._lastPathIndex+K,F.numberOfDoubleDots)}(de,P,F),st=ze.processChildren?Sn(ze.segmentGroup,ze.index,de.commands):Dn(ze.segmentGroup,ze.index,de.commands);return Ia(P.root,ze.segmentGroup,st,K,se)}(Qt,this.currentUrlTree,A,ir,null!=Pn?Pn:null)}navigateByUrl(A,K={skipLocationChange:!1}){const se=Ci(A)?A:this.parseUrl(A),de=this.urlHandlingStrategy.merge(se,this.rawUrlTree);return this.scheduleNavigation(de,"imperative",null,K)}navigate(A,K={skipLocationChange:!1}){return function Xl(F){for(let P=0;P<F.length;P++){const A=F[P];if(null==A)throw new Error(`The requested path contains ${A} segment at index ${P}`)}}(A),this.navigateByUrl(this.createUrlTree(A,K),K)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){let K;try{K=this.urlSerializer.parse(A)}catch(se){K=this.malformedUriErrorHandler(se,this.urlSerializer,A)}return K}isActive(A,K){let se;if(se=!0===K?Object.assign({},_a):!1===K?Object.assign({},Tc):K,Ci(A))return dt(this.currentUrlTree,A,se);const de=this.parseUrl(A);return dt(this.currentUrlTree,de,se)}removeEmptyProps(A){return Object.keys(A).reduce((K,se)=>{const de=A[se];return null!=de&&(K[se]=de),K},{})}processNavigations(){this.navigations.subscribe(A=>{this.navigated=!0,this.lastSuccessfulId=A.id,this.currentPageId=A.targetPageId,this.events.next(new Nt(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,A.resolve(!0)},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)})}scheduleNavigation(A,K,se,de,ze){var st,en;if(this.disposed)return Promise.resolve(!1);let Qt,Pn,ir;ze?(Qt=ze.resolve,Pn=ze.reject,ir=ze.promise):ir=new Promise((dn,gs)=>{Qt=dn,Pn=gs});const pn=++this.navigationId;let Rt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(se=this.location.getState()),Rt=se&&se.\u0275routerPageId?se.\u0275routerPageId:de.replaceUrl||de.skipLocationChange?null!==(st=this.browserPageId)&&void 0!==st?st:0:(null!==(en=this.browserPageId)&&void 0!==en?en:0)+1):Rt=0,this.setTransition({id:pn,targetPageId:Rt,source:K,restoredState:se,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:A,extras:de,resolve:Qt,reject:Pn,promise:ir,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ir.catch(dn=>Promise.reject(dn))}setBrowserUrl(A,K){const se=this.urlSerializer.serialize(A),de=Object.assign(Object.assign({},K.extras.state),this.generateNgRouterState(K.id,K.targetPageId));this.location.isCurrentPathEqualTo(se)||K.extras.replaceUrl?this.location.replaceState(se,"",de):this.location.go(se,"",de)}restoreHistory(A,K=!1){var se,de;if("computed"===this.canceledNavigationResolution){const ze=this.currentPageId-A.targetPageId;"popstate"!==A.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(se=this.currentNavigation)||void 0===se?void 0:se.finalUrl)||0===ze?this.currentUrlTree===(null===(de=this.currentNavigation)||void 0===de?void 0:de.finalUrl)&&0===ze&&(this.resetState(A),this.browserUrlTree=A.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ze)}else"replace"===this.canceledNavigationResolution&&(K&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=A.currentRouterState,this.currentUrlTree=A.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(A,K){const se=new fn(A.id,this.serializeUrl(A.extractedUrl),K);this.triggerEvent(se),A.resolve(!1)}generateNgRouterState(A,K){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:K}:{navigationId:A}}}return F.\u0275fac=function(A){E.$Z()},F.\u0275prov=E.Yz7({token:F,factory:F.\u0275fac}),F})();function ol(F){return"imperative"!==F}let Ko=(()=>{class F{constructor(A,K,se,de,ze){this.router=A,this.route=K,this.tabIndexAttribute=se,this.renderer=de,this.el=ze,this.commands=null,this.onChanges=new Tt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){if(null!=this.tabIndexAttribute)return;const K=this.renderer,se=this.el.nativeElement;null!==A?K.setAttribute(se,"tabindex",A):K.removeAttribute(se,"tabindex")}ngOnChanges(A){this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const A={skipLocationChange:Us(this.skipLocationChange),replaceUrl:Us(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,A),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Us(this.preserveFragment)})}}return F.\u0275fac=function(A){return new(A||F)(E.Y36(To),E.Y36(Di),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq))},F.\u0275dir=E.lG2({type:F,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(A,K){1&A&&E.NdJ("click",function(){return K.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[E.TTD]}),F})(),ka=(()=>{class F{constructor(A,K,se){this.router=A,this.route=K,this.locationStrategy=se,this.commands=null,this.href=null,this.onChanges=new Tt.x,this.subscription=A.events.subscribe(de=>{de instanceof Nt&&this.updateTargetUrlAndHref()})}set routerLink(A){this.commands=null!=A?Array.isArray(A)?A:[A]:null}ngOnChanges(A){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(A,K,se,de,ze){if(0!==A||K||se||de||ze||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const st={skipLocationChange:Us(this.skipLocationChange),replaceUrl:Us(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,st),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Us(this.preserveFragment)})}}return F.\u0275fac=function(A){return new(A||F)(E.Y36(To),E.Y36(Di),E.Y36($t.S$))},F.\u0275dir=E.lG2({type:F,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(A,K){1&A&&E.NdJ("click",function(de){return K.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&A&&E.uIk("target",K.target)("href",K.href,E.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[E.TTD]}),F})();function Us(F){return""===F||!!F}let ba=(()=>{class F{constructor(A,K,se,de,ze,st){this.router=A,this.element=K,this.renderer=se,this.cdr=de,this.link=ze,this.linkWithHref=st,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new E.vpe,this.routerEventsSubscription=A.events.subscribe(en=>{en instanceof Nt&&this.update()})}ngAfterContentInit(){(0,et.of)(this.links.changes,this.linksWithHrefs.changes,(0,et.of)(null)).pipe((0,Et.J)()).subscribe(A=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var A;null===(A=this.linkInputChangesSubscription)||void 0===A||A.unsubscribe();const K=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(se=>!!se).map(se=>se.onChanges);this.linkInputChangesSubscription=(0,Oe.D)(K).pipe((0,Et.J)()).subscribe(se=>{this.isActive!==this.isLinkActive(this.router)(se)&&this.update()})}set routerLinkActive(A){const K=Array.isArray(A)?A:A.split(" ");this.classes=K.filter(se=>!!se)}ngOnChanges(A){this.update()}ngOnDestroy(){var A;this.routerEventsSubscription.unsubscribe(),null===(A=this.linkInputChangesSubscription)||void 0===A||A.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const A=this.hasActiveLinks();this.isActive!==A&&(this.isActive=A,this.cdr.markForCheck(),this.classes.forEach(K=>{A?this.renderer.addClass(this.element.nativeElement,K):this.renderer.removeClass(this.element.nativeElement,K)}),this.isActiveChange.emit(A))})}isLinkActive(A){const K=function xs(F){return!!F.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return se=>!!se.urlTree&&A.isActive(se.urlTree,K)}hasActiveLinks(){const A=this.isLinkActive(this.router);return this.link&&A(this.link)||this.linkWithHref&&A(this.linkWithHref)||this.links.some(A)||this.linksWithHrefs.some(A)}}return F.\u0275fac=function(A){return new(A||F)(E.Y36(To),E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(E.sBO),E.Y36(Ko,8),E.Y36(ka,8))},F.\u0275dir=E.lG2({type:F,selectors:[["","routerLinkActive",""]],contentQueries:function(A,K,se){if(1&A&&(E.Suo(se,Ko,5),E.Suo(se,ka,5)),2&A){let de;E.iGM(de=E.CRH())&&(K.links=de),E.iGM(de=E.CRH())&&(K.linksWithHrefs=de)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[E.TTD]}),F})();class qa{}class Ta{preload(P,A){return(0,et.of)(null)}}let bs=(()=>{class F{constructor(A,K,se,de){this.router=A,this.injector=se,this.preloadingStrategy=de,this.loader=new Aa(se,K,en=>A.triggerEvent(new ur(en)),en=>A.triggerEvent(new Lr(en)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ie.h)(A=>A instanceof Nt),(0,St.b)(()=>this.preload())).subscribe(()=>{})}preload(){const A=this.injector.get(E.h0i);return this.processRoutes(A,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,K){const se=[];for(const de of K)if(de.loadChildren&&!de.canLoad&&de._loadedConfig){const ze=de._loadedConfig;se.push(this.processRoutes(ze.module,ze.routes))}else de.loadChildren&&!de.canLoad?se.push(this.preloadConfig(A,de)):de.children&&se.push(this.processRoutes(A,de.children));return(0,Oe.D)(se).pipe((0,Et.J)(),(0,he.U)(de=>{}))}preloadConfig(A,K){return this.preloadingStrategy.preload(K,()=>(K._loadedConfig?(0,et.of)(K._loadedConfig):this.loader.load(A.injector,K)).pipe((0,wt.z)(de=>(K._loadedConfig=de,this.processRoutes(de.module,de.routes)))))}}return F.\u0275fac=function(A){return new(A||F)(E.LFG(To),E.LFG(E.Sil),E.LFG(E.zs3),E.LFG(qa))},F.\u0275prov=E.Yz7({token:F,factory:F.\u0275fac}),F})(),Oo=(()=>{class F{constructor(A,K,se={}){this.router=A,this.viewportScroller=K,this.options=se,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},se.scrollPositionRestoration=se.scrollPositionRestoration||"disabled",se.anchorScrolling=se.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(A=>{A instanceof Yt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof Nt&&(this.lastId=A.id,this.scheduleScrollEvent(A,this.router.parseUrl(A.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(A=>{A instanceof pr&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,K){this.router.triggerEvent(new pr(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,K))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return F.\u0275fac=function(A){E.$Z()},F.\u0275prov=E.Yz7({token:F,factory:F.\u0275fac}),F})();const uo=new E.OlP("ROUTER_CONFIGURATION"),Lu=new E.OlP("ROUTER_FORROOT_GUARD"),Jc=[$t.Ye,{provide:Ot,useClass:ht},{provide:To,useFactory:function Fu(F,P,A,K,se,de,ze={},st,en){const Qt=new To(null,F,P,A,K,se,ci(de));return st&&(Qt.urlHandlingStrategy=st),en&&(Qt.routeReuseStrategy=en),function Ka(F,P){F.errorHandler&&(P.errorHandler=F.errorHandler),F.malformedUriErrorHandler&&(P.malformedUriErrorHandler=F.malformedUriErrorHandler),F.onSameUrlNavigation&&(P.onSameUrlNavigation=F.onSameUrlNavigation),F.paramsInheritanceStrategy&&(P.paramsInheritanceStrategy=F.paramsInheritanceStrategy),F.relativeLinkResolution&&(P.relativeLinkResolution=F.relativeLinkResolution),F.urlUpdateStrategy&&(P.urlUpdateStrategy=F.urlUpdateStrategy),F.canceledNavigationResolution&&(P.canceledNavigationResolution=F.canceledNavigationResolution)}(ze,Qt),ze.enableTracing&&Qt.events.subscribe(Pn=>{var ir,pn;null===(ir=console.group)||void 0===ir||ir.call(console,`Router Event: ${Pn.constructor.name}`),console.log(Pn.toString()),console.log(Pn),null===(pn=console.groupEnd)||void 0===pn||pn.call(console)}),Qt},deps:[Ot,bo,$t.Ye,E.zs3,E.Sil,za,uo,[class js{},new E.FiY],[class Cl{},new E.FiY]]},bo,{provide:Di,useFactory:function Zo(F){return F.routerState.root},deps:[To]},bs,Ta,class al{preload(P,A){return A().pipe((0,We.K)(()=>(0,et.of)(null)))}},{provide:uo,useValue:{enableTracing:!1}}];function ru(){return new E.PXZ("Router",To)}let Eo=(()=>{class F{constructor(A,K){}static forRoot(A,K){return{ngModule:F,providers:[Jc,So(A),{provide:Lu,useFactory:ti,deps:[[To,new E.FiY,new E.tp0]]},{provide:uo,useValue:K||{}},{provide:$t.S$,useFactory:iu,deps:[$t.lw,[new E.tBr($t.mr),new E.FiY],uo]},{provide:Oo,useFactory:oa,deps:[To,$t.EM,uo]},{provide:qa,useExisting:K&&K.preloadingStrategy?K.preloadingStrategy:Ta},{provide:E.PXZ,multi:!0,useFactory:ru},[Yo,{provide:E.ip1,multi:!0,useFactory:Ms,deps:[Yo]},{provide:lo,useFactory:su,deps:[Yo]},{provide:E.tb,multi:!0,useExisting:lo}]]}}static forChild(A){return{ngModule:F,providers:[So(A)]}}}return F.\u0275fac=function(A){return new(A||F)(E.LFG(Lu,8),E.LFG(To,8))},F.\u0275mod=E.oAB({type:F}),F.\u0275inj=E.cJS({}),F})();function oa(F,P,A){return A.scrollOffset&&P.setOffset(A.scrollOffset),new Oo(F,P,A)}function iu(F,P,A={}){return A.useHash?new $t.Do(F,P):new $t.b0(F,P)}function ti(F){return"guarded"}function So(F){return[{provide:E.deG,multi:!0,useValue:F},{provide:za,multi:!0,useValue:F}]}let Yo=(()=>{class F{constructor(A){this.injector=A,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tt.x}appInitializer(){return this.injector.get($t.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let K=null;const se=new Promise(st=>K=st),de=this.injector.get(To),ze=this.injector.get(uo);return"disabled"===ze.initialNavigation?(de.setUpLocationChangeListener(),K(!0)):"enabled"===ze.initialNavigation||"enabledBlocking"===ze.initialNavigation?(de.hooks.afterPreactivation=()=>this.initNavigation?(0,et.of)(null):(this.initNavigation=!0,K(!0),this.resultOfPreactivationDone),de.initialNavigation()):K(!0),se})}bootstrapListener(A){const K=this.injector.get(uo),se=this.injector.get(bs),de=this.injector.get(Oo),ze=this.injector.get(To),st=this.injector.get(E.z2F);A===st.components[0]&&(("enabledNonBlocking"===K.initialNavigation||void 0===K.initialNavigation)&&ze.initialNavigation(),se.setUpPreloading(),de.init(),ze.resetRootComponentType(st.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return F.\u0275fac=function(A){return new(A||F)(E.LFG(E.zs3))},F.\u0275prov=E.Yz7({token:F,factory:F.\u0275fac}),F})();function Ms(F){return F.appInitializer.bind(F)}function su(F){return F.bootstrapListener.bind(F)}const lo=new E.OlP("Router Initializer")},3942:(Gt,rt,U)=>{"use strict";U.d(rt,{Z:()=>ft});var E=U(2090),k=U(4859),oe=U(9681),Ne=U(1877);class Pe{constructor(He,$e){this._delegate=He,this.firebase=$e,(0,oe._addComponent)(He,new k.wA("app-compat",()=>this,"PUBLIC")),this.container=He.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this._delegate.automaticDataCollectionEnabled=He}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(He=>{this._delegate.checkDestroyed(),He()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oe.deleteApp)(this._delegate)))}_getService(He,$e=oe._DEFAULT_ENTRY_NAME){var Tt;this._delegate.checkDestroyed();const ie=this._delegate.container.getProvider(He);return!ie.isInitialized()&&"EXPLICIT"===(null===(Tt=ie.getComponent())||void 0===Tt?void 0:Tt.instantiationMode)&&ie.initialize(),ie.getImmediate({identifier:$e})}_removeServiceInstance(He,$e=oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(He).clearInstance($e)}_addComponent(He){(0,oe._addComponent)(this._delegate,He)}_addOrOverwriteComponent(He){(0,oe._addOrOverwriteComponent)(this._delegate,He)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ge=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function Xe(){const it=function Y(it){const He={},$e={__esModule:!0,initializeApp:function ne(xt,X={}){const he=oe.initializeApp(xt,X);if((0,E.r3)(He,he.name))return He[he.name];const J=new it(he,$e);return He[he.name]=J,J},app:ie,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function Ke(xt){const X=xt.name,he=X.replace("-compat","");if(oe._registerComponent(xt)&&"PUBLIC"===xt.type){const J=(Ae=ie())=>{if("function"!=typeof Ae[he])throw Ge.create("invalid-app-argument",{appName:X});return Ae[he]()};void 0!==xt.serviceProps&&(0,E.ZB)(J,xt.serviceProps),$e[he]=J,it.prototype[he]=function(...Ae){return this._getService.bind(this,X).apply(this,xt.multipleInstances?Ae:[])}}return"PUBLIC"===xt.type?$e[he]:null},removeApp:function Tt(xt){delete He[xt]},useAsService:function gt(xt,X){return"serverAuth"===X?null:X},modularAPIs:oe}};function ie(xt){if(!(0,E.r3)(He,xt=xt||oe._DEFAULT_ENTRY_NAME))throw Ge.create("no-app",{appName:xt});return He[xt]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function be(){return Object.keys(He).map(xt=>He[xt])}}),ie.App=it,$e}(Pe);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Xe,extendNamespace:function He($e){(0,E.ZB)(it,$e)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),it}(),Me=new Ne.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){Me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&Me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ft=pe;!function Je(it){(0,oe.registerVersion)("@firebase/app-compat","0.1.26",it)}()},9681:(Gt,rt,U)=>{"use strict";U.r(rt),U.d(rt,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>ur,_DEFAULT_ENTRY_NAME:()=>Dt,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>Nt,_apps:()=>$t,_clearComponents:()=>Ar,_components:()=>cn,_getProvider:()=>Ln,_registerComponent:()=>fn,_removeServiceInstance:()=>Vn,deleteApp:()=>Mn,getApp:()=>Mr,getApps:()=>Pr,initializeApp:()=>Lr,onLog:()=>Cn,registerVersion:()=>pr,setLogLevel:()=>Vi});var E=U(5861),k=U(4859),oe=U(1877),Ne=U(2090),Pe=U(8766);class ke{constructor(Mt){this.container=Mt}getPlatformInfoString(){return this.container.getProviders().map(sn=>{if(function Ge(at){const Mt=at.getComponent();return"VERSION"===(null==Mt?void 0:Mt.type)}(sn)){const jn=sn.getImmediate();return`${jn.library}/${jn.version}`}return null}).filter(sn=>sn).join(" ")}}const Y="@firebase/app",pe=new oe.Yd("@firebase/app"),Dt="[DEFAULT]",Et={[Y]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},$t=new Map,cn=new Map;function Yt(at,Mt){try{at.container.addComponent(Mt)}catch(sn){pe.debug(`Component ${Mt.name} failed to register with FirebaseApp ${at.name}`,sn)}}function Nt(at,Mt){at.container.addOrOverwriteComponent(Mt)}function fn(at){const Mt=at.name;if(cn.has(Mt))return pe.debug(`There were multiple attempts to register component ${Mt}.`),!1;cn.set(Mt,at);for(const sn of $t.values())Yt(sn,at);return!0}function Ln(at,Mt){const sn=at.container.getProvider("heartbeat").getImmediate({optional:!0});return sn&&sn.triggerHeartbeat(),at.container.getProvider(Mt)}function Vn(at,Mt,sn=Dt){Ln(at,Mt).clearInstance(sn)}function Ar(){cn.clear()}const Cr=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class kr{constructor(Mt,sn,jn){this._isDeleted=!1,this._options=Object.assign({},Mt),this._config=Object.assign({},sn),this._name=sn.name,this._automaticDataCollectionEnabled=sn.automaticDataCollectionEnabled,this._container=jn,this.container.addComponent(new k.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Mt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Mt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Mt){this._isDeleted=Mt}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}const ur="9.8.2";function Lr(at,Mt={}){"object"!=typeof Mt&&(Mt={name:Mt});const sn=Object.assign({name:Dt,automaticDataCollectionEnabled:!1},Mt),jn=sn.name;if("string"!=typeof jn||!jn)throw Cr.create("bad-app-name",{appName:String(jn)});const ge=$t.get(jn);if(ge){if((0,Ne.vZ)(at,ge.options)&&(0,Ne.vZ)(sn,ge.config))return ge;throw Cr.create("duplicate-app",{appName:jn})}const xe=new k.H0(jn);for(const At of cn.values())xe.addComponent(At);const Ue=new kr(at,sn,xe);return $t.set(jn,Ue),Ue}function Mr(at=Dt){const Mt=$t.get(at);if(!Mt)throw Cr.create("no-app",{appName:at});return Mt}function Pr(){return Array.from($t.values())}function Mn(at){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,E.Z)(function*(at){const Mt=at.name;$t.has(Mt)&&($t.delete(Mt),yield Promise.all(at.container.getProviders().map(sn=>sn.delete())),at.isDeleted=!0)})).apply(this,arguments)}function pr(at,Mt,sn){var jn;let ge=null!==(jn=Et[at])&&void 0!==jn?jn:at;sn&&(ge+=`-${sn}`);const xe=ge.match(/\s|\//),Ue=Mt.match(/\s|\//);if(xe||Ue){const At=[`Unable to register library "${ge}" with version "${Mt}":`];return xe&&At.push(`library name "${ge}" contains illegal characters (whitespace or "/")`),xe&&Ue&&At.push("and"),Ue&&At.push(`version name "${Mt}" contains illegal characters (whitespace or "/")`),void pe.warn(At.join(" "))}fn(new k.wA(`${ge}-version`,()=>({library:ge,version:Mt}),"VERSION"))}function Cn(at,Mt){if(null!==at&&"function"!=typeof at)throw Cr.create("invalid-log-argument");(0,oe.Am)(at,Mt)}function Vi(at){(0,oe.Ub)(at)}const ri="firebase-heartbeat-store";let Ni=null;function Hi(){return Ni||(Ni=(0,Pe.X3)("firebase-heartbeat-database",1,{upgrade:(at,Mt)=>{0===Mt&&at.createObjectStore(ri)}}).catch(at=>{throw Cr.create("storage-open",{originalErrorMessage:at.message})})),Ni}function Nn(){return(Nn=(0,E.Z)(function*(at){try{return(yield Hi()).transaction(ri).objectStore(ri).get(yi(at))}catch(Mt){throw Cr.create("storage-get",{originalErrorMessage:Mt.message})}})).apply(this,arguments)}function Jn(at,Mt){return ci.apply(this,arguments)}function ci(){return(ci=(0,E.Z)(function*(at,Mt){try{const jn=(yield Hi()).transaction(ri,"readwrite");return yield jn.objectStore(ri).put(Mt,yi(at)),jn.done}catch(sn){throw Cr.create("storage-set",{originalErrorMessage:sn.message})}})).apply(this,arguments)}function yi(at){return`${at.name}!${at.options.appId}`}class Hr{constructor(Mt){this.container=Mt,this._heartbeatsCache=null;const sn=this.container.getProvider("app").getImmediate();this._storage=new ut(sn),this._heartbeatsCachePromise=this._storage.read().then(jn=>(this._heartbeatsCache=jn,jn))}triggerHeartbeat(){var Mt=this;return(0,E.Z)(function*(){const jn=Mt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ge=_i();if(null===Mt._heartbeatsCache&&(Mt._heartbeatsCache=yield Mt._heartbeatsCachePromise),Mt._heartbeatsCache.lastSentHeartbeatDate!==ge&&!Mt._heartbeatsCache.heartbeats.some(xe=>xe.date===ge))return Mt._heartbeatsCache.heartbeats.push({date:ge,agent:jn}),Mt._heartbeatsCache.heartbeats=Mt._heartbeatsCache.heartbeats.filter(xe=>{const Ue=new Date(xe.date).valueOf();return Date.now()-Ue<=2592e6}),Mt._storage.overwrite(Mt._heartbeatsCache)})()}getHeartbeatsHeader(){var Mt=this;return(0,E.Z)(function*(){if(null===Mt._heartbeatsCache&&(yield Mt._heartbeatsCachePromise),null===Mt._heartbeatsCache||0===Mt._heartbeatsCache.heartbeats.length)return"";const sn=_i(),{heartbeatsToSend:jn,unsentEntries:ge}=function Ye(at,Mt=1024){const sn=[];let jn=at.slice();for(const ge of at){const xe=sn.find(Ue=>Ue.agent===ge.agent);if(xe){if(xe.dates.push(ge.date),dt(sn)>Mt){xe.dates.pop();break}}else if(sn.push({agent:ge.agent,dates:[ge.date]}),dt(sn)>Mt){sn.pop();break}jn=jn.slice(1)}return{heartbeatsToSend:sn,unsentEntries:jn}}(Mt._heartbeatsCache.heartbeats),xe=(0,Ne.L)(JSON.stringify({version:2,heartbeats:jn}));return Mt._heartbeatsCache.lastSentHeartbeatDate=sn,ge.length>0?(Mt._heartbeatsCache.heartbeats=ge,yield Mt._storage.overwrite(Mt._heartbeatsCache)):(Mt._heartbeatsCache.heartbeats=[],Mt._storage.overwrite(Mt._heartbeatsCache)),xe})()}}function _i(){return(new Date).toISOString().substring(0,10)}class ut{constructor(Mt){this.app=Mt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Mt=this;return(0,E.Z)(function*(){return(yield Mt._canUseIndexedDBPromise)&&(yield function Rr(at){return Nn.apply(this,arguments)}(Mt.app))||{heartbeats:[]}})()}overwrite(Mt){var sn=this;return(0,E.Z)(function*(){var jn;if(yield sn._canUseIndexedDBPromise){const xe=yield sn.read();return Jn(sn.app,{lastSentHeartbeatDate:null!==(jn=Mt.lastSentHeartbeatDate)&&void 0!==jn?jn:xe.lastSentHeartbeatDate,heartbeats:Mt.heartbeats})}})()}add(Mt){var sn=this;return(0,E.Z)(function*(){var jn;if(yield sn._canUseIndexedDBPromise){const xe=yield sn.read();return Jn(sn.app,{lastSentHeartbeatDate:null!==(jn=Mt.lastSentHeartbeatDate)&&void 0!==jn?jn:xe.lastSentHeartbeatDate,heartbeats:[...xe.heartbeats,...Mt.heartbeats]})}})()}}function dt(at){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:at})).length}!function Jt(at){fn(new k.wA("platform-logger",Mt=>new ke(Mt),"PRIVATE")),fn(new k.wA("heartbeat",Mt=>new Hr(Mt),"PRIVATE")),pr(Y,"0.7.25",at),pr(Y,"0.7.25","esm2017"),pr("fire-js","")}("")},4859:(Gt,rt,U)=>{"use strict";U.d(rt,{H0:()=>Y,wA:()=>oe});var E=U(5861),k=U(2090);class oe{constructor(pe,Me,Oe){this.name=pe,this.instanceFactory=Me,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const Ne="[DEFAULT]";class Pe{constructor(pe,Me){this.name=pe,this.container=Me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const Me=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(Me)){const Oe=new k.BH;if(this.instancesDeferred.set(Me,Oe),this.isInitialized(Me)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:Me});et&&Oe.resolve(et)}catch(et){}}return this.instancesDeferred.get(Me).promise}getImmediate(pe){var Me;const Oe=this.normalizeInstanceIdentifier(null==pe?void 0:pe.identifier),et=null!==(Me=null==pe?void 0:pe.optional)&&void 0!==Me&&Me;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(Je){if(et)return null;throw Je}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Ge(Xe){return"EAGER"===Xe.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch(Me){}for(const[Me,Oe]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(Me);try{const Je=this.getOrInitializeService({instanceIdentifier:et});Oe.resolve(Je)}catch(Je){}}}}clearInstance(pe=Ne){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,E.Z)(function*(){const Me=Array.from(pe.instances.values());yield Promise.all([...Me.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...Me.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=Ne){return this.instances.has(pe)}getOptions(pe=Ne){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:Me={}}=pe,Oe=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:Oe,options:Me});for(const[Je,ft]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(Je)&&ft.resolve(et);return et}onInit(pe,Me){var Oe;const et=this.normalizeInstanceIdentifier(Me),Je=null!==(Oe=this.onInitCallbacks.get(et))&&void 0!==Oe?Oe:new Set;Je.add(pe),this.onInitCallbacks.set(et,Je);const ft=this.instances.get(et);return ft&&pe(ft,et),()=>{Je.delete(pe)}}invokeOnInitCallbacks(pe,Me){const Oe=this.onInitCallbacks.get(Me);if(Oe)for(const et of Oe)try{et(pe,Me)}catch(Je){}}getOrInitializeService({instanceIdentifier:pe,options:Me={}}){let Oe=this.instances.get(pe);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(Xe=pe,Xe===Ne?void 0:Xe),options:Me}),this.instances.set(pe,Oe),this.instancesOptions.set(pe,Me),this.invokeOnInitCallbacks(Oe,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Oe)}catch(et){}var Xe;return Oe||null}normalizeInstanceIdentifier(pe=Ne){return this.component?this.component.multipleInstances?pe:Ne:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Y{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const Me=this.getProvider(pe.name);if(Me.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);Me.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const Me=new Pe(pe,this);return this.providers.set(pe,Me),Me}getProviders(){return Array.from(this.providers.values())}}},1877:(Gt,rt,U)=>{"use strict";U.d(rt,{Am:()=>Xe,Ub:()=>Y,Yd:()=>Ge,in:()=>k});const E=[];var k=(()=>{return(pe=k||(k={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",k;var pe})();const oe={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},Ne=k.INFO,Pe={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},ke=(pe,Me,...Oe)=>{if(Me<pe.logLevel)return;const et=(new Date).toISOString(),Je=Pe[Me];if(!Je)throw new Error(`Attempted to log a message with an invalid logType (value: ${Me})`);console[Je](`[${et}]  ${pe.name}:`,...Oe)};class Ge{constructor(Me){this.name=Me,this._logLevel=Ne,this._logHandler=ke,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(Me){if(!(Me in k))throw new TypeError(`Invalid value "${Me}" assigned to \`logLevel\``);this._logLevel=Me}setLogLevel(Me){this._logLevel="string"==typeof Me?oe[Me]:Me}get logHandler(){return this._logHandler}set logHandler(Me){if("function"!=typeof Me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Me}get userLogHandler(){return this._userLogHandler}set userLogHandler(Me){this._userLogHandler=Me}debug(...Me){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...Me),this._logHandler(this,k.DEBUG,...Me)}log(...Me){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...Me),this._logHandler(this,k.VERBOSE,...Me)}info(...Me){this._userLogHandler&&this._userLogHandler(this,k.INFO,...Me),this._logHandler(this,k.INFO,...Me)}warn(...Me){this._userLogHandler&&this._userLogHandler(this,k.WARN,...Me),this._logHandler(this,k.WARN,...Me)}error(...Me){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...Me),this._logHandler(this,k.ERROR,...Me)}}function Y(pe){E.forEach(Me=>{Me.setLogLevel(pe)})}function Xe(pe,Me){for(const Oe of E){let et=null;Me&&Me.level&&(et=oe[Me.level]),Oe.userLogHandler=null===pe?null:(Je,ft,...it)=>{const He=it.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch(Tt){return null}}).filter($e=>$e).join(" ");ft>=(null!=et?et:Je.logLevel)&&pe({level:k[ft].toLowerCase(),message:He,args:it,type:Je.name})}}}},8766:(Gt,rt,U)=>{"use strict";U.d(rt,{Lj:()=>ne,X3:()=>ie});var E=U(5861);let oe,Ne;const Ge=new WeakMap,Y=new WeakMap,Xe=new WeakMap,pe=new WeakMap,Me=new WeakMap;let Je={get(X,he,J){if(X instanceof IDBTransaction){if("done"===he)return Y.get(X);if("objectStoreNames"===he)return X.objectStoreNames||Xe.get(X);if("store"===he)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return $e(X[he])},set:(X,he,J)=>(X[he]=J,!0),has:(X,he)=>X instanceof IDBTransaction&&("done"===he||"store"===he)||he in X};function He(X){return"function"==typeof X?function it(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ke(){return Ne||(Ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...he){return X.apply(Tt(this),he),$e(Ge.get(this))}:function(...he){return $e(X.apply(Tt(this),he))}:function(he,...J){const Ae=X.call(Tt(this),he,...J);return Xe.set(Ae,he.sort?he.sort():[he]),$e(Ae)}}(X):(X instanceof IDBTransaction&&function et(X){if(Y.has(X))return;const he=new Promise((J,Ae)=>{const Ee=()=>{X.removeEventListener("complete",je),X.removeEventListener("error",We),X.removeEventListener("abort",We)},je=()=>{J(),Ee()},We=()=>{Ae(X.error||new DOMException("AbortError","AbortError")),Ee()};X.addEventListener("complete",je),X.addEventListener("error",We),X.addEventListener("abort",We)});Y.set(X,he)}(X),((X,he)=>he.some(J=>X instanceof J))(X,function Pe(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,Je):X)}function $e(X){if(X instanceof IDBRequest)return function Oe(X){const he=new Promise((J,Ae)=>{const Ee=()=>{X.removeEventListener("success",je),X.removeEventListener("error",We)},je=()=>{J($e(X.result)),Ee()},We=()=>{Ae(X.error),Ee()};X.addEventListener("success",je),X.addEventListener("error",We)});return he.then(J=>{J instanceof IDBCursor&&Ge.set(J,X)}).catch(()=>{}),Me.set(he,X),he}(X);if(pe.has(X))return pe.get(X);const he=He(X);return he!==X&&(pe.set(X,he),Me.set(he,X)),he}const Tt=X=>Me.get(X);function ie(X,he,{blocked:J,upgrade:Ae,blocking:Ee,terminated:je}={}){const We=indexedDB.open(X,he),St=$e(We);return Ae&&We.addEventListener("upgradeneeded",ct=>{Ae($e(We.result),ct.oldVersion,ct.newVersion,$e(We.transaction))}),J&&We.addEventListener("blocked",()=>J()),St.then(ct=>{je&&ct.addEventListener("close",()=>je()),Ee&&ct.addEventListener("versionchange",()=>Ee())}).catch(()=>{}),St}function ne(X,{blocked:he}={}){const J=indexedDB.deleteDatabase(X);return he&&J.addEventListener("blocked",()=>he()),$e(J).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],Ke=["put","add","delete","clear"],gt=new Map;function xt(X,he){if(!(X instanceof IDBDatabase)||he in X||"string"!=typeof he)return;if(gt.get(he))return gt.get(he);const J=he.replace(/FromIndex$/,""),Ae=he!==J,Ee=Ke.includes(J);if(!(J in(Ae?IDBIndex:IDBObjectStore).prototype)||!Ee&&!be.includes(J))return;const je=function(){var We=(0,E.Z)(function*(St,...ct){const wt=this.transaction(St,Ee?"readwrite":"readonly");let Dt=wt.store;return Ae&&(Dt=Dt.index(ct.shift())),(yield Promise.all([Dt[J](...ct),Ee&&wt.done]))[0]});return function(ct){return We.apply(this,arguments)}}();return gt.set(he,je),je}!function ft(X){Je=X(Je)}(X=>IT(xT({},X),{get:(he,J,Ae)=>xt(he,J)||X.get(he,J,Ae),has:(he,J)=>!!xt(he,J)||X.has(he,J)}))},1470:(Gt,rt,U)=>{"use strict";U.d(rt,{hx:()=>et,yI:()=>it});var E=U(5e3),k=U(655),oe=U(3075),Ne=U(9808);const Pe=new E.OlP("ngx-mask config"),ke=new E.OlP("new ngx-mask config"),Ge=new E.OlP("initial ngx-mask config"),Y={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new E.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Xe=["Hh:m0:s0","Hh:m0","m0:s0"],pe=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let Me=(()=>{class $e{constructor(ie){this._config=ie,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(ne,be,Ke,gt)=>{var xt,X;let he=[],J="";if(Array.isArray(Ke)){const St=new RegExp(Ke.map(ct=>"[\\^$.|?*+()".indexOf(ct)>=0?`\\${ct}`:ct).join("|"));he=ne.split(St),J=null!==(X=null===(xt=ne.match(St))||void 0===xt?void 0:xt[0])&&void 0!==X?X:""}else he=ne.split(Ke),J=Ke;const Ae=he.length>1?`${J}${he[1]}`:"";let Ee=he[0];const je=this.separatorLimit.replace(/\s/g,"");je&&+je&&(Ee="-"===Ee[0]?`-${Ee.slice(1,Ee.length).slice(0,je.length)}`:Ee.slice(0,je.length));const We=/(\d+)(\d{3})/;for(;be&&We.test(Ee);)Ee=Ee.replace(We,"$1"+be+"$2");return void 0===gt?Ee+Ae:0===gt?Ee:Ee+Ae.substr(0,gt+1)},this.percentage=ne=>Number(ne)>=0&&Number(ne)<=100,this.getPrecision=ne=>{const be=ne.split(".");return be.length>1?Number(be[be.length-1]):1/0},this.checkAndRemoveSuffix=ne=>{var be,Ke,gt;for(let xt=(null===(be=this.suffix)||void 0===be?void 0:be.length)-1;xt>=0;xt--){const X=this.suffix.substr(xt,null===(Ke=this.suffix)||void 0===Ke?void 0:Ke.length);if(ne.includes(X)&&(xt-1<0||!ne.includes(this.suffix.substr(xt-1,null===(gt=this.suffix)||void 0===gt?void 0:gt.length))))return ne.replace(X,"")}return ne},this.checkInputPrecision=(ne,be,Ke)=>{if(be<1/0){if(Array.isArray(Ke)){const X=Ke.find(he=>he!==this.thousandSeparator);Ke=X||Ke[0]}const gt=new RegExp(this._charToRegExpExpression(Ke)+`\\d{${be}}.*$`),xt=ne.match(gt);xt&&xt[0].length-1>be&&(ne=ne.substring(0,ne.length-(xt[0].length-1-be))),0===be&&this._compareOrIncludes(ne[ne.length-1],Ke,this.thousandSeparator)&&(ne=ne.substring(0,ne.length-1))}return ne},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(ie,ne){const[be,Ke]=ne;return this.customPattern=Ke,this.applyMask(ie,be)}applyMask(ie,ne,be=0,Ke=!1,gt=!1,xt=(()=>{})){var X,he;if(!ne||"string"!=typeof ie)return"";let J=0,Ae="",Ee=!1,je=!1,We=1,St=!1;ie.slice(0,this.prefix.length)===this.prefix&&(ie=ie.slice(this.prefix.length,ie.length)),this.suffix&&(null==ie?void 0:ie.length)>0&&(ie=this.checkAndRemoveSuffix(ie));const ct=ie.toString().split("");"IP"===ne&&(this.ipError=ct.filter(Yt=>"."===Yt).length<3&&ct.length<7,ne="099.099.099.099");const wt=[];for(let Yt=0;Yt<ie.length;Yt++)(null===(X=ie[Yt])||void 0===X?void 0:X.match("\\d"))&&wt.push(ie[Yt]);if("CPF_CNPJ"===ne&&(this.cpfCnpjError=11!==wt.length&&14!==wt.length,ne=wt.length>11?"00.000.000/0000-00":"000.000.000-00"),ne.startsWith("percent")){if(ie.match("[a-z]|[A-Z]")||ie.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){ie=this._stripToDecimal(ie);const Yt=this.getPrecision(ne);ie=this.checkInputPrecision(ie,Yt,this.decimalMarker)}ie.indexOf(".")>0&&!this.percentage(ie.substring(0,ie.indexOf(".")))&&(ie=`${ie.substring(0,ie.indexOf(".")-1)}${ie.substring(ie.indexOf("."),ie.length)}`),Ae=this.percentage(ie)?ie:ie.substring(0,ie.length-1)}else if(ne.startsWith("separator")){(ie.match("[w\u0430-\u044f\u0410-\u042f]")||ie.match("[\u0401\u0451\u0410-\u044f]")||ie.match("[a-z]|[A-Z]")||ie.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||ie.match("[^A-Za-z0-9,]"))&&(ie=this._stripToDecimal(ie)),ie=ie.length>1&&"0"===ie[0]&&!this._compareOrIncludes(ie[1],this.decimalMarker,this.thousandSeparator)&&!gt?ie.slice(1,ie.length):ie,gt&&(ie=this._compareOrIncludes(ie[ie.length-1],this.decimalMarker,this.thousandSeparator)?ie.slice(0,ie.length-1):ie);const Yt=this._charToRegExpExpression(this.thousandSeparator);let Nt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Yt,"");if(Array.isArray(this.decimalMarker))for(const Cr of this.decimalMarker)Nt=Nt.replace(this._charToRegExpExpression(Cr),"");else Nt=Nt.replace(this._charToRegExpExpression(this.decimalMarker),"");const fn=new RegExp("["+Nt+"]");(ie.match(fn)||1===ie.length&&this._compareOrIncludes(ie,this.decimalMarker,this.thousandSeparator))&&(ie=ie.substring(0,ie.length-1));const Ln=this.getPrecision(ne),Vn=(ie=this.checkInputPrecision(ie,Ln,this.decimalMarker)).replace(new RegExp(Yt,"g"),"");Ae=this._formatWithSeparators(Vn,this.thousandSeparator,this.decimalMarker,Ln);const Ar=Ae.indexOf(",")-ie.indexOf(","),vr=Ae.length-ie.length;if(vr>0&&","!==Ae[be]){je=!0;let Cr=0;do{this._shift.add(be+Cr),Cr++}while(Cr<vr)}else 0!==Ar&&be>0&&!(Ae.indexOf(",")>=be&&be>3)||!(Ae.indexOf(".")>=be&&be>3)&&vr<=0?(this._shift.clear(),je=!0,We=vr,this._shift.add(be+=vr)):this._shift.clear()}else for(let Yt=0,Nt=ct[0];Yt<ct.length&&J!==ne.length;Yt++,Nt=ct[Yt])if(this._checkSymbolMask(Nt,ne[J])&&"?"===ne[J+1])Ae+=Nt,J+=2;else if("*"===ne[J+1]&&Ee&&this._checkSymbolMask(Nt,ne[J+2]))Ae+=Nt,J+=3,Ee=!1;else if(this._checkSymbolMask(Nt,ne[J])&&"*"===ne[J+1])Ae+=Nt,Ee=!0;else if("?"===ne[J+1]&&this._checkSymbolMask(Nt,ne[J+2]))Ae+=Nt,J+=3;else if(this._checkSymbolMask(Nt,ne[J])){if("H"===ne[J]&&Number(Nt)>2){J+=1,this._shiftStep(ne,J,ct.length),Yt--,this.leadZeroDateTime&&(Ae+="0");continue}if("h"===ne[J]&&"2"===Ae&&Number(Nt)>3){J+=1,Yt--;continue}if("m"===ne[J]&&Number(Nt)>5){J+=1,this._shiftStep(ne,J,ct.length),Yt--,this.leadZeroDateTime&&(Ae+="0");continue}if("s"===ne[J]&&Number(Nt)>5){J+=1,this._shiftStep(ne,J,ct.length),Yt--,this.leadZeroDateTime&&(Ae+="0");continue}const fn=31;if("d"===ne[J]&&(Number(Nt)>3&&this.leadZeroDateTime||Number(ie.slice(J,J+2))>fn||"/"===ie[J+1])){J+=1,this._shiftStep(ne,J,ct.length),Yt--,this.leadZeroDateTime&&(Ae+="0");continue}if("M"===ne[J]){const Vn=0===J&&(Number(Nt)>2||Number(ie.slice(J,J+2))>12||"/"===ie[J+1]),Ar=ie.slice(J-3,J-1).includes("/")&&("/"===ie[J-2]&&Number(ie.slice(J-1,J+1))>12&&"/"!==ie[J]||"/"===ie[J]||"/"===ie[J-3]&&Number(ie.slice(J-2,J))>12&&"/"!==ie[J-1]||"/"===ie[J-1]),vr=Number(ie.slice(J-3,J-1))<=fn&&!ie.slice(J-3,J-1).includes("/")&&"/"===ie[J-1]&&(Number(ie.slice(J,J+2))>12||"/"===ie[J+1]),Cr=Number(ie.slice(J-3,J-1))>fn&&!ie.slice(J-3,J-1).includes("/")&&!ie.slice(J-2,J).includes("/")&&Number(ie.slice(J-2,J))>12,kr=Number(ie.slice(J-3,J-1))<=fn&&!ie.slice(J-3,J-1).includes("/")&&"/"!==ie[J-1]&&Number(ie.slice(J-1,J+1))>12;if(Number(Nt)>1&&this.leadZeroDateTime||Vn||Ar||vr||Cr||kr){J+=1,this._shiftStep(ne,J,ct.length),Yt--,this.leadZeroDateTime&&(Ae+="0");continue}}Ae+=Nt,J++}else" "===Nt&&" "===ne[J]?(Ae+=Nt,J++):-1!==this.maskSpecialCharacters.indexOf(ne[J])?(Ae+=ne[J],J++,this._shiftStep(ne,J,ct.length),Yt--):this.maskSpecialCharacters.indexOf(Nt)>-1&&this.maskAvailablePatterns[ne[J]]&&(null===(he=this.maskAvailablePatterns[ne[J]])||void 0===he?void 0:he.optional)?(!!ct[J]&&"099.099.099.099"!==ne&&"000.000.000-00"!==ne&&"00.000.000/0000-00"!==ne&&!ne.match(/^9+\.0+$/)&&(Ae+=ct[J]),J++,Yt--):"*"===this.maskExpression[J+1]&&this._findSpecialChar(this.maskExpression[J+2])&&this._findSpecialChar(Nt)===this.maskExpression[J+2]&&Ee||"?"===this.maskExpression[J+1]&&this._findSpecialChar(this.maskExpression[J+2])&&this._findSpecialChar(Nt)===this.maskExpression[J+2]&&Ee?(J+=3,Ae+=Nt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(Nt)<0&&Nt!==this.placeHolderCharacter&&(St=!0);Ae.length+1===ne.length&&-1!==this.maskSpecialCharacters.indexOf(ne[ne.length-1])&&(Ae+=ne[ne.length-1]);let Dt=be+1;for(;this._shift.has(Dt);)We++,Dt++;let Et=Ke&&!ne.startsWith("separator")?J:this._shift.has(be)?We:0;St&&Et--,xt(Et,je),We<0&&this._shift.clear();let $t=!1;gt&&($t=ct.every(Yt=>this.maskSpecialCharacters.includes(Yt)));let cn=`${this.prefix}${$t?"":Ae}${this.suffix}`;return 0===Ae.length&&(cn=`${this.prefix}${Ae}`),cn}_findSpecialChar(ie){return this.maskSpecialCharacters.find(ne=>ne===ie)}_checkSymbolMask(ie,ne){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[ne]&&this.maskAvailablePatterns[ne].pattern&&this.maskAvailablePatterns[ne].pattern.test(ie)}_stripToDecimal(ie){return ie.split("").filter((ne,be)=>ne.match("^-?\\d")||ne.match("\\s")||"."===ne||","===ne||"-"===ne&&0===be&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(ie){return ie&&(" "===ie?"\\s":"[\\^$.|?*+()".indexOf(ie)>=0?`\\${ie}`:ie)}_shiftStep(ie,ne,be){const Ke=/[*?]/g.test(ie.slice(0,ne))?be:ne;this._shift.add(Ke+this.prefix.length||0)}_compareOrIncludes(ie,ne,be){return Array.isArray(ne)?ne.filter(Ke=>Ke!==be).includes(ie):ie===ne}}return $e.\u0275fac=function(ie){return new(ie||$e)(E.LFG(Pe))},$e.\u0275prov=E.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),Oe=(()=>{class $e extends Me{constructor(ie,ne,be,Ke){super(ne),this.document=ie,this._config=ne,this._elementRef=be,this._renderer=Ke,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=gt=>{}}applyMask(ie,ne,be=0,Ke=!1,gt=!1,xt=(()=>{})){if(!ne)return ie!==this.actualValue?this.actualValue:ie;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(ie||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(ie||"#")),!ie&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const X=ie&&"number"==typeof this.selStart?ie[this.selStart]:"";let he="";if(this.hiddenInput&&!this.writingValue){let je=this.actualValue.split("");""!==ie&&je.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(ie.length>je.length?je.splice(this.selStart,0,X):ie.length<je.length&&(je.length-ie.length==1?je.splice(this.selStart-1,1):je.splice(this.selStart,this.selEnd-this.selStart))):je=[],this.showMaskTyped&&(ie=this.removeMask(ie)),he=this.actualValue.length&&je.length<=ie.length?this.shiftTypedSymbols(je.join("")):ie}he=Boolean(he)&&he.length?he:ie;const J=super.applyMask(he,ne,be,Ke,gt,xt);if(this.actualValue=this.getActualValue(J),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(je=>!this._compareOrIncludes(je,this.decimalMarker,this.thousandSeparator))),this.formControlResult(J),!this.showMaskTyped)return this.hiddenInput&&J&&J.length?this.hideInput(J,this.maskExpression):J;const Ae=J.length,Ee=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const je=this._numberSkipedSymbols(J);return J+Ee.slice(Ae+je)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?J+Ee:J+Ee.slice(Ae)}_numberSkipedSymbols(ie){const ne=/(^|\D)(\d\D)/g;let be=ne.exec(ie),Ke=0;for(;null!=be;)Ke+=1,be=ne.exec(ie);return Ke}applyValueChanges(ie,ne,be,Ke=(()=>{})){const gt=this._elementRef.nativeElement;gt.value=this.applyMask(gt.value,this.maskExpression,ie,ne,be,Ke),gt!==this._getActiveElement()&&this.clearIfNotMatchFn()}hideInput(ie,ne){return ie.split("").map((be,Ke)=>{var gt,xt;return this.maskAvailablePatterns&&this.maskAvailablePatterns[ne[Ke]]&&(null===(gt=this.maskAvailablePatterns[ne[Ke]])||void 0===gt?void 0:gt.symbol)?null===(xt=this.maskAvailablePatterns[ne[Ke]])||void 0===xt?void 0:xt.symbol:be}).join("")}getActualValue(ie){const ne=ie.split("").filter((be,Ke)=>this._checkSymbolMask(be,this.maskExpression[Ke])||this.maskSpecialCharacters.includes(this.maskExpression[Ke])&&be===this.maskExpression[Ke]);return ne.join("")===ie?ne.join(""):ie}shiftTypedSymbols(ie){let ne="";return(ie&&ie.split("").map((Ke,gt)=>{if(this.maskSpecialCharacters.includes(ie[gt+1])&&ie[gt+1]!==this.maskExpression[gt+1])return ne=Ke,ie[gt+1];if(ne.length){const xt=ne;return ne="",xt}return Ke})||[]).join("")}numberToString(ie){return ie||0===ie?Number(ie).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(ie)}showMaskInInput(ie){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(ie){if("IP"===this.maskExpression)return this._checkForIp(ie);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(ie)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const ie=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==ie.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(ie.value,this.maskExpression))}set formElementProperty([ie,ne]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,ie,ne))}checkSpecialCharAmount(ie){return ie.split("").filter(be=>this._findSpecialChar(be)).length}removeMask(ie){return this._removeMask(this._removeSuffix(this._removePrefix(ie)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(ie){var ne;if("#"===ie)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const be=[];for(let Ke=0;Ke<ie.length;Ke++)(null===(ne=ie[Ke])||void 0===ne?void 0:ne.match("\\d"))&&be.push(ie[Ke]);return be.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:be.length>3&&be.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:be.length>6&&be.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(ie){var ne;const be=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,Ke=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===ie)return be;const gt=[];for(let xt=0;xt<ie.length;xt++)(null===(ne=ie[xt])||void 0===ne?void 0:ne.match("\\d"))&&gt.push(ie[xt]);return gt.length<=3?be.slice(gt.length,be.length):gt.length>3&&gt.length<=6?be.slice(gt.length+1,be.length):gt.length>6&&gt.length<=9?be.slice(gt.length+2,be.length):gt.length>9&&gt.length<11?be.slice(gt.length+3,be.length):11===gt.length?"":12===gt.length?Ke.slice(17===ie.length?16:15,Ke.length):gt.length>12&&gt.length<=14?Ke.slice(gt.length+4,Ke.length):""}_getActiveElement(ie=this.document){var ne;const be=null===(ne=null==ie?void 0:ie.activeElement)||void 0===ne?void 0:ne.shadowRoot;return(null==be?void 0:be.activeElement)?this._getActiveElement(be):ie.activeElement}formControlResult(ie){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(ie)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(ie)):this._removeSuffix(ie))}_toNumber(ie){if(!this.isNumberValue||""===ie)return ie;const ne=Number(ie);return Number.isNaN(ne)?ie:ne}_removeMask(ie,ne){return ie&&ie.replace(this._regExpForRemove(ne),"")}_removePrefix(ie){return this.prefix?ie&&ie.replace(this.prefix,""):ie}_removeSuffix(ie){return this.suffix?ie&&ie.replace(this.suffix,""):ie}_retrieveSeparatorValue(ie){return this._removeMask(this._removeSuffix(this._removePrefix(ie)),this.maskSpecialCharacters)}_regExpForRemove(ie){return new RegExp(ie.map(ne=>`\\${ne}`).join("|"),"gi")}_checkSymbols(ie){if(""===ie)return ie;const ne=this._retrieveSeparatorPrecision(this.maskExpression);let be=this._retrieveSeparatorValue(ie);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(be=be.replace(this.decimalMarker,".")),this.isNumberValue?ne?ie===this.decimalMarker?null:this._checkPrecision(this.maskExpression,be):Number(be):be}_retrieveSeparatorPrecision(ie){const ne=ie.match(new RegExp("^separator\\.([^d]*)"));return ne?Number(ne[1]):null}_checkPrecision(ie,ne){return ie.indexOf("2")>0?Number(ne).toFixed(2):Number(ne)}}return $e.\u0275fac=function(ie){return new(ie||$e)(E.LFG(Ne.K0),E.LFG(Pe),E.LFG(E.SBq),E.LFG(E.Qsj))},$e.\u0275prov=E.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),et=(()=>{class $e{constructor(ie,ne,be){this.document=ie,this._maskService=ne,this._config=be,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new E.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=Ke=>{},this.onTouch=()=>{}}ngOnChanges(ie){const{maskExpression:ne,specialCharacters:be,patterns:Ke,prefix:gt,suffix:xt,thousandSeparator:X,decimalMarker:he,dropSpecialCharacters:J,hiddenInput:Ae,showMaskTyped:Ee,placeHolderCharacter:je,shownMaskExpression:We,showTemplate:St,clearIfNotMatch:ct,validation:wt,separatorLimit:Dt,allowNegativeNumbers:Et,leadZeroDateTime:$t,triggerOnMaskChange:cn}=ie;if(ne&&(ne.currentValue!==ne.previousValue&&!ne.firstChange&&(this._maskService.maskChanged=!0),ne.currentValue&&ne.currentValue.split("||").length>1?(this._maskExpressionArray=ne.currentValue.split("||").sort((Yt,Nt)=>Yt.length-Nt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=ne.currentValue||"",this._maskService.maskExpression=this._maskValue)),be){if(!be.currentValue||!Array.isArray(be.currentValue))return;this._maskService.maskSpecialCharacters=be.currentValue||[]}Ke&&Ke.currentValue&&(this._maskService.maskAvailablePatterns=Ke.currentValue),gt&&(this._maskService.prefix=gt.currentValue),xt&&(this._maskService.suffix=xt.currentValue),X&&(this._maskService.thousandSeparator=X.currentValue),he&&(this._maskService.decimalMarker=he.currentValue),J&&(this._maskService.dropSpecialCharacters=J.currentValue),Ae&&(this._maskService.hiddenInput=Ae.currentValue),Ee&&(this._maskService.showMaskTyped=Ee.currentValue),je&&(this._maskService.placeHolderCharacter=je.currentValue),We&&(this._maskService.shownMaskExpression=We.currentValue),St&&(this._maskService.showTemplate=St.currentValue),ct&&(this._maskService.clearIfNotMatch=ct.currentValue),wt&&(this._maskService.validation=wt.currentValue),Dt&&(this._maskService.separatorLimit=Dt.currentValue),Et&&(this._maskService.allowNegativeNumbers=Et.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Yt=>"-"!==Yt))),$t&&(this._maskService.leadZeroDateTime=$t.currentValue),cn&&(this._maskService.triggerOnMaskChange=cn.currentValue),this._applyMask()}validate({value:ie}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(ie);if(this._maskService.cpfCnpjError)return this._createValidationError(ie);if(this._maskValue.startsWith("separator")||pe.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Xe.includes(this._maskValue))return this._validateTime(ie);if(ie&&ie.toString().length>=1){let ne=0;for(const be in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[be].optional&&(this._maskValue.indexOf(be)!==this._maskValue.lastIndexOf(be)?ne+=this._maskValue.split("").filter(gt=>gt===be).join("").length:-1!==this._maskValue.indexOf(be)&&ne++,-1!==this._maskValue.indexOf(be)&&ie.toString().length>=this._maskValue.indexOf(be)||ne===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&ie.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&ie.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&ie.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(ie);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const be=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-ne:this._maskValue.length-ne;if(ie.toString().length<be)return this._createValidationError(ie)}}return ie&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(ie){(""===ie||null==ie)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(ie){const ne=ie.target;if(this._inputValue=ne.value,this._setMask(),!this._maskValue)return void this.onChange(ne.value);const be=1===ne.selectionStart?ne.selectionStart+this._maskService.prefix.length:ne.selectionStart;let Ke=0,gt=!1;if(this._maskService.applyValueChanges(be,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(X,he)=>{this._justPasted=!1,Ke=X,gt=he}),this._getActiveElement()!==ne)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let xt=this._position?this._inputValue.length+be+Ke:be+("Backspace"!==this._code||gt?Ke:0);xt>this._getActualInputLength()&&(xt=this._getActualInputLength()),xt<0&&(xt=0),ne.setSelectionRange(xt,xt),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(ie){if(!this._maskValue)return;const ne=ie.target;null!==ne&&null!==ne.selectionStart&&ne.selectionStart===ne.selectionEnd&&ne.selectionStart>this._maskService.prefix.length&&38!==ie.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),ne.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===ne.value?(ne.focus(),ne.setSelectionRange(0,0)):ne.selectionStart>this._maskService.actualValue.length&&ne.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const gt=ne.value&&ne.value!==this._maskService.prefix?ne.value:this._maskService.prefix+this._maskService.maskIsShown;ne.value!==gt&&(ne.value=gt),(ne.selectionStart||ne.selectionEnd)<=this._maskService.prefix.length?ne.selectionStart=this._maskService.prefix.length:ne.selectionEnd>this._getActualInputLength()&&(ne.selectionEnd=this._getActualInputLength())}onKeyDown(ie){var ne;if(!this._maskValue)return;this._code=ie.code?ie.code:ie.key;const be=ie.target;if(this._inputValue=be.value,this._setMask(),38===ie.keyCode&&ie.preventDefault(),37===ie.keyCode||8===ie.keyCode||46===ie.keyCode){if(8===ie.keyCode&&0===be.value.length&&(be.selectionStart=be.selectionEnd),8===ie.keyCode&&0!==be.selectionStart)if(this.specialCharacters=(null===(ne=this.specialCharacters)||void 0===ne?void 0:ne.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&be.selectionStart<=this.prefix.length)be.setSelectionRange(this.prefix.length,be.selectionEnd);else if(this._inputValue.length!==be.selectionStart&&1!==be.selectionStart)for(;this.specialCharacters.includes(this._inputValue[be.selectionStart-1].toString())&&(this.prefix.length>=1&&be.selectionStart>this.prefix.length||0===this.prefix.length);)be.setSelectionRange(be.selectionStart-1,be.selectionEnd);this.checkSelectionOnDeletion(be),this._maskService.prefix.length&&be.selectionStart<=this._maskService.prefix.length&&be.selectionEnd<=this._maskService.prefix.length&&ie.preventDefault();const Ke=be.selectionStart;8===ie.keyCode&&!be.readOnly&&0===Ke&&be.selectionEnd===be.value.length&&0!==be.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<be.selectionStart?be.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===ie.keyCode&&ie.ctrlKey||65===ie.keyCode&&ie.metaKey)&&(be.setSelectionRange(0,this._getActualInputLength()),ie.preventDefault()),this._maskService.selStart=be.selectionStart,this._maskService.selEnd=be.selectionEnd}writeValue(ie){return(0,k.mG)(this,void 0,void 0,function*(){"object"==typeof ie&&null!==ie&&"value"in ie&&("disable"in ie&&this.setDisabledState(Boolean(ie.disable)),ie=ie.value),("number"==typeof ie||this._maskValue.startsWith("separator"))&&(ie=this._maskService.numberToString(ie),Array.isArray(this.decimalMarker)||(ie="."!==this.decimalMarker?ie.replace(".",this.decimalMarker):ie),this._maskService.isNumberValue=!0),"string"!=typeof ie&&(ie=""),this._inputValue=ie,this._setMask(),ie&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(ie,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",ie],this._inputValue=ie})}registerOnChange(ie){this.onChange=ie,this._maskService.onChange=this.onChange}registerOnTouched(ie){this.onTouch=ie}_getActiveElement(ie=this.document){var ne;const be=null===(ne=null==ie?void 0:ie.activeElement)||void 0===ne?void 0:ne.shadowRoot;return(null==be?void 0:be.activeElement)?this._getActiveElement(be):ie.activeElement}checkSelectionOnDeletion(ie){ie.selectionStart=Math.min(Math.max(this.prefix.length,ie.selectionStart),this._inputValue.length-this.suffix.length),ie.selectionEnd=Math.min(Math.max(this.prefix.length,ie.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(ie){this._maskService.formElementProperty=["disabled",ie]}_repeatPatternSymbols(ie){return ie.match(/{[0-9]+}/)&&ie.split("").reduce((ne,be,Ke)=>{if(this._start="{"===be?Ke:this._start,"}"!==be)return this._maskService._findSpecialChar(be)?ne+be:ne;this._end=Ke;const gt=Number(ie.slice(this._start+1,this._end));return ne+new Array(gt+1).join(ie[this._start-1])},"")||ie}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(ie){const ne=this._maskValue.split("").filter(be=>":"!==be).length;return ie&&(0==+ie[ie.length-1]&&ie.length<ne||ie.length<=ne-2)?this._createValidationError(ie):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(ie){return{mask:{requiredMask:this._maskValue,actualValue:ie}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(ie=>{var ne,be;const Ke=(null===(ne=this._maskService.removeMask(this._inputValue))||void 0===ne?void 0:ne.length)<=(null===(be=this._maskService.removeMask(ie))||void 0===be?void 0:be.length);if(this._inputValue&&Ke)return this._maskValue=ie,this.maskExpression=ie,this._maskService.maskExpression=ie,Ke;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return $e.\u0275fac=function(ie){return new(ie||$e)(E.Y36(Ne.K0),E.Y36(Oe),E.Y36(Pe))},$e.\u0275dir=E.lG2({type:$e,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(ie,ne){1&ie&&E.NdJ("paste",function(){return ne.onPaste()})("ngModelChange",function(Ke){return ne.onModelChange(Ke)})("input",function(Ke){return ne.onInput(Ke)})("blur",function(){return ne.onBlur()})("click",function(Ke){return ne.onClick(Ke)})("keydown",function(Ke){return ne.onKeyDown(Ke)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[E._Bn([{provide:oe.JU,useExisting:(0,E.Gpc)(()=>$e),multi:!0},{provide:oe.Cf,useExisting:(0,E.Gpc)(()=>$e),multi:!0},Oe]),E.TTD]}),$e})();function ft($e,Tt){return Object.assign(Object.assign({},$e),Tt instanceof Function?Tt():Tt)}let it=(()=>{class $e{static forRoot(ie){return{ngModule:$e,providers:[{provide:ke,useValue:ie},{provide:Ge,useValue:Y},{provide:Pe,useFactory:ft,deps:[Ge,ke]},Me]}}static forChild(){return{ngModule:$e}}}return $e.\u0275fac=function(ie){return new(ie||$e)},$e.\u0275mod=E.oAB({type:$e}),$e.\u0275inj=E.cJS({}),$e})();const He="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};He.KeyboardEvent||(He.KeyboardEvent=function($e,Tt){})},5861:(Gt,rt,U)=>{"use strict";function E(oe,Ne,Pe,ke,Ge,Y,Xe){try{var pe=oe[Y](Xe),Me=pe.value}catch(Oe){return void Pe(Oe)}pe.done?Ne(Me):Promise.resolve(Me).then(ke,Ge)}function k(oe){return function(){var Ne=this,Pe=arguments;return new Promise(function(ke,Ge){var Y=oe.apply(Ne,Pe);function Xe(Me){E(Y,ke,Ge,Xe,pe,"next",Me)}function pe(Me){E(Y,ke,Ge,Xe,pe,"throw",Me)}Xe(void 0)})}}U.d(rt,{Z:()=>k})}},Gt=>{Gt(Gt.s=80)}]);