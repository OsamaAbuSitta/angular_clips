var qK=Object.defineProperty,zK=Object.defineProperties,WK=Object.getOwnPropertyDescriptors,XA=Object.getOwnPropertySymbols,M3=Object.prototype.hasOwnProperty,P3=Object.prototype.propertyIsEnumerable,k3=(Ze,_e,B)=>_e in Ze?qK(Ze,_e,{enumerable:!0,configurable:!0,writable:!0,value:B}):Ze[_e]=B,yw=(Ze,_e)=>{for(var B in _e||(_e={}))M3.call(_e,B)&&k3(Ze,B,_e[B]);if(XA)for(var B of XA(_e))P3.call(_e,B)&&k3(Ze,B,_e[B]);return Ze},O3=(Ze,_e)=>zK(Ze,WK(_e)),R3=(Ze,_e)=>{var B={};for(var h in Ze)M3.call(Ze,h)&&_e.indexOf(h)<0&&(B[h]=Ze[h]);if(null!=Ze&&XA)for(var h of XA(Ze))_e.indexOf(h)<0&&P3.call(Ze,h)&&(B[h]=Ze[h]);return B};(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(Ze,_e,B)=>{"use strict";B.d(_e,{Dh:()=>fe,GT:()=>ce,cc:()=>Ye,hO:()=>rt,on:()=>J,pX:()=>ie,xv:()=>ve});var h=B(5e3),ne=B(127),V=B(5813);Ze=B.hmd(Ze);const de=["ngOnDestroy"],ie=(Oe,Xe,lt,Qe={})=>new Proxy(Oe,{get:(Pe,Ve)=>lt.runOutsideAngular(()=>{var ot;if(Oe[Ve])return(null===(ot=null==Qe?void 0:Qe.spy)||void 0===ot?void 0:ot.get)&&Qe.spy.get(Ve,Oe[Ve]),Oe[Ve];if(de.indexOf(Ve)>-1)return()=>{};const gt=Xe.toPromise().then(R=>{const z=R&&R[Ve];return"function"==typeof z?z.bind(R):z&&z.then?z.then(Y=>lt.run(()=>Y)):lt.run(()=>z)});return new Proxy(()=>{},{get:(R,z)=>gt[z],apply:(R,z,Y)=>gt.then(he=>{var oe;const we=he&&he(...Y);return(null===(oe=null==Qe?void 0:Qe.spy)||void 0===oe?void 0:oe.apply)&&Qe.spy.apply(Ve,Y,we),we})})})}),ce=(Oe,Xe)=>{Xe.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(Qe=>{Object.defineProperty(Oe.prototype,Qe,Object.getOwnPropertyDescriptor(lt.prototype||lt,Qe))})})};class me{constructor(Xe){return Xe}}const fe=new h.OlP("angularfire2.app.options"),ve=new h.OlP("angularfire2.app.name");function J(Oe,Xe,lt){const Pe="object"==typeof lt&&lt||{};Pe.name=Pe.name||"string"==typeof lt&&lt||"[DEFAULT]";const ot=ne.Z.apps.filter(gt=>gt&&gt.name===Pe.name)[0]||Xe.runOutsideAngular(()=>ne.Z.initializeApp(Oe,Pe));try{JSON.stringify(Oe)!==JSON.stringify(ot.options)&&ue("error",`${ot.name} Firebase App already initialized with different options${Ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(gt){}return new me(ot)}const ue=(Oe,...Xe)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Oe](...Xe)},re={provide:me,useFactory:J,deps:[fe,h.R0b,[new h.FiY,ve]]};let rt=(()=>{class Oe{constructor(lt){ne.Z.registerVersion("angularfire",V.q4.full,"core"),ne.Z.registerVersion("angularfire",V.q4.full,"app-compat"),ne.Z.registerVersion("angular",h.q4F.full,lt.toString())}static initializeApp(lt,Qe){return{ngModule:Oe,providers:[{provide:fe,useValue:lt},{provide:ve,useValue:Qe}]}}}return Oe.\u0275fac=function(lt){return new(lt||Oe)(h.LFG(h.Lbi))},Oe.\u0275mod=h.oAB({type:Oe}),Oe.\u0275inj=h.cJS({providers:[re]}),Oe})();function Ye(Oe,Xe,lt,Qe,Pe){const[,Ve,ot]=globalThis.\u0275AngularfireInstanceCache.find(gt=>gt[0]===Oe)||[];if(Ve)return function Je(Oe,Xe){try{return Oe.toString()===Xe.toString()}catch(lt){return Oe===Xe}}(Pe,ot)||(Ee("error",`${Xe} was already initialized on the ${lt} Firebase App with different settings.${wt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Pe,was:ot})),Ve;{const gt=Qe();return globalThis.\u0275AngularfireInstanceCache.push([Oe,gt,Pe]),gt}}const wt=!!Ze.hot,Ee=(Oe,...Xe)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Oe](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ze,_e,B)=>{"use strict";B.d(_e,{q4:()=>bl,iC:()=>Bp,fc:()=>yi,HU:()=>Zh,vb:()=>Qm,JM:()=>Fu});var h=B(5e3),ne=B(5867),V=B(5861),de=B(9681),ie=B(2090),ce=B(4859),me=B(1877),fe=B(8766);const ve="@firebase/installations",J="0.5.9",re=`w:${J}`,rt="FIS_v2",Xe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(P){return P instanceof ie.ZR&&P.code.includes("request-failed")}function Qe({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Pe(P){return{token:P.token,requestStatus:2,expiresIn:he(P.expiresIn),creationTime:Date.now()}}function Ve(P,O){return ot.apply(this,arguments)}function ot(){return(ot=(0,V.Z)(function*(P,O){const le=(yield O.json()).error;return Xe.create("request-failed",{requestName:P,serverCode:le.code,serverMessage:le.message,serverStatus:le.status})})).apply(this,arguments)}function gt({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function R(P,{refreshToken:O}){const W=gt(P);return W.append("Authorization",function oe(P){return`${rt} ${P}`}(O)),W}function z(P){return Y.apply(this,arguments)}function Y(){return(Y=(0,V.Z)(function*(P){const O=yield P();return O.status>=500&&O.status<600?P():O})).apply(this,arguments)}function he(P){return Number(P.replace("s","000"))}function we(P,O){return X.apply(this,arguments)}function X(){return(X=(0,V.Z)(function*({appConfig:P,heartbeatServiceProvider:O},{fid:W}){const le=Qe(P),Ue=gt(P),Ke=O.getImmediate({optional:!0});if(Ke){const en=yield Ke.getHeartbeatsHeader();en&&Ue.append("x-firebase-client",en)}const Ht={method:"POST",headers:Ue,body:JSON.stringify({fid:W,authVersion:rt,appId:P.appId,sdkVersion:re})},Yt=yield z(()=>fetch(le,Ht));if(Yt.ok){const en=yield Yt.json();return{fid:en.fid||W,registrationStatus:2,refreshToken:en.refreshToken,authToken:Pe(en.authToken)}}throw yield Ve("Create Installation",Yt)})).apply(this,arguments)}function se(P){return new Promise(O=>{setTimeout(O,P)})}const He=/^[cdef][\w-]{21}$/;function Fe(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const W=function pt(P){return function ye(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return He.test(W)?W:""}catch(P){return""}}function Nt(P){return`${P.appName}!${P.appId}`}const kt=new Map;function St(P,O){const W=Nt(P);Qt(W,O),function Bn(P,O){const W=function Zn(){return!Vn&&"BroadcastChannel"in self&&(Vn=new BroadcastChannel("[Firebase] FID Change"),Vn.onmessage=P=>{Qt(P.data.key,P.data.fid)}),Vn}();W&&W.postMessage({key:P,fid:O}),function ar(){0===kt.size&&Vn&&(Vn.close(),Vn=null)}()}(W,O)}function Qt(P,O){const W=kt.get(P);if(W)for(const le of W)le(O)}let Vn=null;const On="firebase-installations-store";let Er=null;function Vt(){return Er||(Er=(0,fe.X3)("firebase-installations-database",1,{upgrade:(P,O)=>{0===O&&P.createObjectStore(On)}})),Er}function Zr(P,O){return qn.apply(this,arguments)}function qn(){return(qn=(0,V.Z)(function*(P,O){const W=Nt(P),Ue=(yield Vt()).transaction(On,"readwrite"),Ke=Ue.objectStore(On),at=yield Ke.get(W);return yield Ke.put(O,W),yield Ue.done,(!at||at.fid!==O.fid)&&St(P,O.fid),O})).apply(this,arguments)}function zn(P){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,V.Z)(function*(P){const O=Nt(P),le=(yield Vt()).transaction(On,"readwrite");yield le.objectStore(On).delete(O),yield le.done})).apply(this,arguments)}function An(P,O){return xn.apply(this,arguments)}function xn(){return(xn=(0,V.Z)(function*(P,O){const W=Nt(P),Ue=(yield Vt()).transaction(On,"readwrite"),Ke=Ue.objectStore(On),at=yield Ke.get(W),Ht=O(at);return void 0===Ht?yield Ke.delete(W):yield Ke.put(Ht,W),yield Ue.done,Ht&&(!at||at.fid!==Ht.fid)&&St(P,Ht.fid),Ht})).apply(this,arguments)}function Yn(P){return si.apply(this,arguments)}function si(){return(si=(0,V.Z)(function*(P){let O;const W=yield An(P.appConfig,le=>{const Ue=so(le),Ke=Dn(P,Ue);return O=Ke.registrationPromise,Ke.installationEntry});return""===W.fid?{installationEntry:yield O}:{installationEntry:W,registrationPromise:O}})).apply(this,arguments)}function so(P){return hs(P||{fid:Fe(),registrationStatus:0})}function Dn(P,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(Xe.create("app-offline"))};const W={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},le=function Wt(P,O){return sn.apply(this,arguments)}(P,W);return{installationEntry:W,registrationPromise:le}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:Yr(P)}:{installationEntry:O}}function sn(){return(sn=(0,V.Z)(function*(P,O){try{const W=yield we(P,O);return Zr(P.appConfig,W)}catch(W){throw lt(W)&&409===W.customData.serverCode?yield zn(P.appConfig):yield Zr(P.appConfig,{fid:O.fid,registrationStatus:0}),W}})).apply(this,arguments)}function Yr(P){return Si.apply(this,arguments)}function Si(){return(Si=(0,V.Z)(function*(P){let O=yield Sn(P.appConfig);for(;1===O.registrationStatus;)yield se(100),O=yield Sn(P.appConfig);if(0===O.registrationStatus){const{installationEntry:W,registrationPromise:le}=yield Yn(P);return le||W}return O})).apply(this,arguments)}function Sn(P){return An(P,O=>{if(!O)throw Xe.create("installation-not-found");return hs(O)})}function hs(P){return function jr(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Qr(P,O){return ge.apply(this,arguments)}function ge(){return(ge=(0,V.Z)(function*({appConfig:P,heartbeatServiceProvider:O},W){const le=xe(P,W),Ue=R(P,W),Ke=O.getImmediate({optional:!0});if(Ke){const en=yield Ke.getHeartbeatsHeader();en&&Ue.append("x-firebase-client",en)}const Ht={method:"POST",headers:Ue,body:JSON.stringify({installation:{sdkVersion:re,appId:P.appId}})},Yt=yield z(()=>fetch(le,Ht));if(Yt.ok)return Pe(yield Yt.json());throw yield Ve("Generate Auth Token",Yt)})).apply(this,arguments)}function xe(P,{fid:O}){return`${Qe(P)}/${O}/authTokens:generate`}function Ae(P){return dt.apply(this,arguments)}function dt(){return(dt=(0,V.Z)(function*(P,O=!1){let W;const le=yield An(P.appConfig,Ke=>{if(!Q(Ke))throw Xe.create("not-registered");const at=Ke.authToken;if(!O&&Se(at))return Ke;if(1===at.requestStatus)return W=Ce(P,O),Ke;{if(!navigator.onLine)throw Xe.create("app-offline");const Ht=bt(Ke);return W=Gt(P,Ht),Ht}});return W?yield W:le.authToken})).apply(this,arguments)}function Ce(P,O){return $e.apply(this,arguments)}function $e(){return($e=(0,V.Z)(function*(P,O){let W=yield yt(P.appConfig);for(;1===W.authToken.requestStatus;)yield se(100),W=yield yt(P.appConfig);const le=W.authToken;return 0===le.requestStatus?Ae(P,O):le})).apply(this,arguments)}function yt(P){return An(P,O=>{if(!Q(O))throw Xe.create("not-registered");return function fn(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function Gt(P,O){return K.apply(this,arguments)}function K(){return(K=(0,V.Z)(function*(P,O){try{const W=yield Qr(P,O),le=Object.assign(Object.assign({},O),{authToken:W});return yield Zr(P.appConfig,le),W}catch(W){if(!lt(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const le=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield Zr(P.appConfig,le)}else yield zn(P.appConfig);throw W}})).apply(this,arguments)}function Q(P){return void 0!==P&&2===P.registrationStatus}function Se(P){return 2===P.requestStatus&&!function qe(P){const O=Date.now();return O<P.creationTime||P.creationTime+P.expiresIn<O+36e5}(P)}function bt(P){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:O})}function Ci(){return(Ci=(0,V.Z)(function*(P){const O=P,{installationEntry:W,registrationPromise:le}=yield Yn(O);return le?le.catch(console.error):Ae(O).catch(console.error),W.fid})).apply(this,arguments)}function Li(){return(Li=(0,V.Z)(function*(P,O=!1){const W=P;return yield Hn(W),(yield Ae(W,O)).token})).apply(this,arguments)}function Hn(P){return mr.apply(this,arguments)}function mr(){return(mr=(0,V.Z)(function*(P){const{registrationPromise:O}=yield Yn(P);O&&(yield O)})).apply(this,arguments)}function Ro(P){return Xe.create("missing-app-config-values",{valueName:P})}const es="installations",Jt=P=>{const O=P.getProvider("app").getImmediate(),W=function lr(P){if(!P||!P.options)throw Ro("App Configuration");if(!P.name)throw Ro("App Name");const O=["projectId","apiKey","appId"];for(const W of O)if(!P.options[W])throw Ro(W);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(O);return{app:O,appConfig:W,heartbeatServiceProvider:(0,de._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},Wn=P=>{const O=P.getProvider("app").getImmediate(),W=(0,de._getProvider)(O,es).getImmediate();return{getId:()=>function ur(P){return Ci.apply(this,arguments)}(W),getToken:Ue=>function Ls(P){return Li.apply(this,arguments)}(W,Ue)}};(function ts(){(0,de._registerComponent)(new ce.wA(es,Jt,"PUBLIC")),(0,de._registerComponent)(new ce.wA("installations-internal",Wn,"PRIVATE"))})(),(0,de.registerVersion)(ve,J),(0,de.registerVersion)(ve,J,"esm2017");const ao="@firebase/remote-config",xr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hm{constructor(O,W,le,Ue){this.client=O,this.storage=W,this.storageCache=le,this.logger=Ue}isCachedDataFresh(O,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const le=Date.now()-W,Ue=le<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${le}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${Ue}.`),Ue}fetch(O){var W=this;return(0,V.Z)(function*(){const[le,Ue]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Ue&&W.isCachedDataFresh(O.cacheMaxAgeMillis,le))return Ue;O.eTag=Ue&&Ue.eTag;const Ke=yield W.client.fetch(O),at=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ke.status&&at.push(W.storage.setLastSuccessfulFetchResponse(Ke)),yield Promise.all(at),Ke})()}}function Eh(P=navigator){return P.languages&&P.languages[0]||P.language}class xi{constructor(O,W,le,Ue,Ke,at){this.firebaseInstallations=O,this.sdkVersion=W,this.namespace=le,this.projectId=Ue,this.apiKey=Ke,this.appId=at}fetch(O){var W=this;return(0,V.Z)(function*(){const[le,Ue]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),at=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,Ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},Yt={sdk_version:W.sdkVersion,app_instance_id:le,app_instance_id_token:Ue,app_id:W.appId,language_code:Eh()},en={method:"POST",headers:Ht,body:JSON.stringify(Yt)},Rn=fetch(at,en),pn=new Promise((ki,zo)=>{O.signal.addEventListener(()=>{const xa=new Error("The operation was aborted.");xa.name="AbortError",zo(xa)})});let Hr;try{yield Promise.race([Rn,pn]),Hr=yield Rn}catch(ki){let zo="fetch-client-network";throw"AbortError"===ki.name&&(zo="fetch-timeout"),xr.create(zo,{originalErrorMessage:ki.message})}let li=Hr.status;const qo=Hr.headers.get("ETag")||void 0;let Eo,Gs;if(200===Hr.status){let ki;try{ki=yield Hr.json()}catch(zo){throw xr.create("fetch-client-parse",{originalErrorMessage:zo.message})}Eo=ki.entries,Gs=ki.state}if("INSTANCE_STATE_UNSPECIFIED"===Gs?li=500:"NO_CHANGE"===Gs?li=304:("NO_TEMPLATE"===Gs||"EMPTY_CONFIG"===Gs)&&(Eo={}),304!==li&&200!==li)throw xr.create("fetch-status",{httpStatus:li});return{status:li,eTag:qo,config:Eo}})()}}class Gm{constructor(O,W){this.client=O,this.storage=W}fetch(O){var W=this;return(0,V.Z)(function*(){const le=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(O,le)})()}attemptFetch(O,{throttleEndTimeMillis:W,backoffCount:le}){var Ue=this;return(0,V.Z)(function*(){yield function fa(P,O){return new Promise((W,le)=>{const Ue=Math.max(O-Date.now(),0),Ke=setTimeout(W,Ue);P.addEventListener(()=>{clearTimeout(Ke),le(xr.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,W);try{const Ke=yield Ue.client.fetch(O);return yield Ue.storage.deleteThrottleMetadata(),Ke}catch(Ke){if(!function wh(P){if(!(P instanceof ie.ZR&&P.customData))return!1;const O=Number(P.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Ke))throw Ke;const at={throttleEndTimeMillis:Date.now()+(0,ie.$s)(le),backoffCount:le+1};return yield Ue.storage.setThrottleMetadata(at),Ue.attemptFetch(O,at)}})()}}class Ch{constructor(O,W,le,Ue,Ke){this.app=O,this._client=W,this._storageCache=le,this._storage=Ue,this._logger=Ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xc(P,O){const W=P.target.error||void 0;return xr.create(O,{originalErrorMessage:W&&W.message})}const pa="app_namespace_store";class qm{constructor(O,W,le,Ue=function Jc(){return new Promise((P,O)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=le=>{O(Xc(le,"storage-open"))},W.onsuccess=le=>{P(le.target.result)},W.onupgradeneeded=le=>{0===le.oldVersion&&le.target.result.createObjectStore(pa,{keyPath:"compositeKey"})}}catch(W){O(xr.create("storage-open",{originalErrorMessage:W}))}})}()){this.appId=O,this.appName=W,this.namespace=le,this.openDbPromise=Ue}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var W=this;return(0,V.Z)(function*(){const le=yield W.openDbPromise;return new Promise((Ue,Ke)=>{const Ht=le.transaction([pa],"readonly").objectStore(pa),Yt=W.createCompositeKey(O);try{const en=Ht.get(Yt);en.onerror=Rn=>{Ke(Xc(Rn,"storage-get"))},en.onsuccess=Rn=>{const pn=Rn.target.result;Ue(pn?pn.value:void 0)}}catch(en){Ke(xr.create("storage-get",{originalErrorMessage:en&&en.message}))}})})()}set(O,W){var le=this;return(0,V.Z)(function*(){const Ue=yield le.openDbPromise;return new Promise((Ke,at)=>{const Yt=Ue.transaction([pa],"readwrite").objectStore(pa),en=le.createCompositeKey(O);try{const Rn=Yt.put({compositeKey:en,value:W});Rn.onerror=pn=>{at(Xc(pn,"storage-set"))},Rn.onsuccess=()=>{Ke()}}catch(Rn){at(xr.create("storage-set",{originalErrorMessage:Rn&&Rn.message}))}})})()}delete(O){var W=this;return(0,V.Z)(function*(){const le=yield W.openDbPromise;return new Promise((Ue,Ke)=>{const Ht=le.transaction([pa],"readwrite").objectStore(pa),Yt=W.createCompositeKey(O);try{const en=Ht.delete(Yt);en.onerror=Rn=>{Ke(Xc(Rn,"storage-delete"))},en.onsuccess=()=>{Ue()}}catch(en){Ke(xr.create("storage-delete",{originalErrorMessage:en&&en.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Ih{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,V.Z)(function*(){const W=O.storage.getLastFetchStatus(),le=O.storage.getLastSuccessfulFetchTimestampMillis(),Ue=O.storage.getActiveConfig(),Ke=yield W;Ke&&(O.lastFetchStatus=Ke);const at=yield le;at&&(O.lastSuccessfulFetchTimestampMillis=at);const Ht=yield Ue;Ht&&(O.activeConfig=Ht)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function Kl(){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,V.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(P){return!1}})).apply(this,arguments)}!function bu(){(0,de._registerComponent)(new ce.wA("remote-config",function P(O,{instanceIdentifier:W}){const le=O.getProvider("app").getImmediate(),Ue=O.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw xr.create("registration-window");if(!(0,ie.hl)())throw xr.create("indexed-db-unavailable");const{projectId:Ke,apiKey:at,appId:Ht}=le.options;if(!Ke)throw xr.create("registration-project-id");if(!at)throw xr.create("registration-api-key");if(!Ht)throw xr.create("registration-app-id");const Yt=new qm(Ht,le.name,W=W||"firebase"),en=new Ih(Yt),Rn=new me.Yd(ao);Rn.logLevel=me.in.ERROR;const pn=new xi(Ue,de.SDK_VERSION,W,Ke,at,Ht),Hr=new Gm(pn,Yt),li=new Hm(Hr,Yt,en,Rn),qo=new Ch(le,li,en,Yt,Rn);return function Xn(P){const O=(0,ie.m9)(P);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(qo),qo},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(ao,"0.3.8"),(0,de.registerVersion)(ao,"0.3.8","esm2017")}();const Dh="/firebase-messaging-sw.js",pi="/firebase-cloud-messaging-push-scope",Ba="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Tu="google.c.a.c_id",kh="google.c.a.c_l",Np="google.c.a.ts",ul="google.c.a.e";var Eu=(()=>{return(P=Eu||(Eu={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",Eu;var P})();function Fi(P){const O=new Uint8Array(P);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mh(P){const W=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),le=atob(W),Ue=new Uint8Array(le.length);for(let Ke=0;Ke<le.length;++Ke)Ue[Ke]=le.charCodeAt(Ke);return Ue}const ji="fcm_token_details_db",fs="fcm_token_object_Store";function ed(P){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,V.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ke=>Ke.name).includes(ji))return null;let O=null;return(yield(0,fe.X3)(ji,5,{upgrade:(le=(0,V.Z)(function*(Ue,Ke,at,Ht){var Yt;if(Ke<2||!Ue.objectStoreNames.contains(fs))return;const en=Ht.objectStore(fs),Rn=yield en.index("fcmSenderId").get(P);if(yield en.clear(),Rn)if(2===Ke){const pn=Rn;if(!pn.auth||!pn.p256dh||!pn.endpoint)return;O={token:pn.fcmToken,createTime:null!==(Yt=pn.createTime)&&void 0!==Yt?Yt:Date.now(),subscriptionOptions:{auth:pn.auth,p256dh:pn.p256dh,endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:"string"==typeof pn.vapidKey?pn.vapidKey:Fi(pn.vapidKey)}}}else if(3===Ke){const pn=Rn;O={token:pn.fcmToken,createTime:pn.createTime,subscriptionOptions:{auth:Fi(pn.auth),p256dh:Fi(pn.p256dh),endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:Fi(pn.vapidKey)}}}else if(4===Ke){const pn=Rn;O={token:pn.fcmToken,createTime:pn.createTime,subscriptionOptions:{auth:Fi(pn.auth),p256dh:Fi(pn.p256dh),endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:Fi(pn.vapidKey)}}}}),function(Ke,at,Ht,Yt){return le.apply(this,arguments)})})).close(),yield(0,fe.Lj)(ji),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),td(O)?O:null;var le}),Ph.apply(this,arguments)}function td(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:O}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const po="firebase-messaging-store";let Lp=null;function Jn(){return Lp||(Lp=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(P,O)=>{0===O&&P.createObjectStore(po)}})),Lp}function ll(P){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,V.Z)(function*(P){const O=gi(P),le=yield(yield Jn()).transaction(po).objectStore(po).get(O);if(le)return le;{const Ue=yield ed(P.appConfig.senderId);if(Ue)return yield Fn(P,Ue),Ue}})).apply(this,arguments)}function Fn(P,O){return cl.apply(this,arguments)}function cl(){return(cl=(0,V.Z)(function*(P,O){const W=gi(P),Ue=(yield Jn()).transaction(po,"readwrite");return yield Ue.objectStore(po).put(O,W),yield Ue.done,O})).apply(this,arguments)}function Zl(P){return ga.apply(this,arguments)}function ga(){return(ga=(0,V.Z)(function*(P){const O=gi(P),le=(yield Jn()).transaction(po,"readwrite");yield le.objectStore(po).delete(O),yield le.done})).apply(this,arguments)}function gi({appConfig:P}){return P.appId}const yr=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function go(P,O){return mi.apply(this,arguments)}function mi(){return(mi=(0,V.Z)(function*(P,O){const W=yield Cu(P),le=ma(O),Ue={method:"POST",headers:W,body:JSON.stringify(le)};let Ke;try{Ke=yield(yield fetch(mo(P.appConfig),Ue)).json()}catch(at){throw yr.create("token-subscribe-failed",{errorInfo:at})}if(Ke.error)throw yr.create("token-subscribe-failed",{errorInfo:Ke.error.message});if(!Ke.token)throw yr.create("token-subscribe-no-token");return Ke.token})).apply(this,arguments)}function Ga(P,O){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,V.Z)(function*(P,O){const W=yield Cu(P),le=ma(O.subscriptionOptions),Ue={method:"PATCH",headers:W,body:JSON.stringify(le)};let Ke;try{Ke=yield(yield fetch(`${mo(P.appConfig)}/${O.token}`,Ue)).json()}catch(at){throw yr.create("token-update-failed",{errorInfo:at})}if(Ke.error)throw yr.create("token-update-failed",{errorInfo:Ke.error.message});if(!Ke.token)throw yr.create("token-update-no-token");return Ke.token})).apply(this,arguments)}function dl(P,O){return Us.apply(this,arguments)}function Us(){return(Us=(0,V.Z)(function*(P,O){const le={method:"DELETE",headers:yield Cu(P)};try{const Ke=yield(yield fetch(`${mo(P.appConfig)}/${O}`,le)).json();if(Ke.error)throw yr.create("token-unsubscribe-failed",{errorInfo:Ke.error.message})}catch(Ue){throw yr.create("token-unsubscribe-failed",{errorInfo:Ue})}})).apply(this,arguments)}function mo({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function Cu(P){return dn.apply(this,arguments)}function dn(){return(dn=(0,V.Z)(function*({appConfig:P,installations:O}){const W=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function ma({p256dh:P,auth:O,endpoint:W,vapidKey:le}){const Ue={web:{endpoint:W,auth:O,p256dh:P}};return le!==Ba&&(Ue.web.applicationPubKey=le),Ue}const id=6048e5;function hl(P){return sd.apply(this,arguments)}function sd(){return(sd=(0,V.Z)(function*(P){const O=yield Iu(P.swRegistration,P.vapidKey),W={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:O.endpoint,auth:Fi(O.getKey("auth")),p256dh:Fi(O.getKey("p256dh"))},le=yield ll(P.firebaseDependencies);if(le){if(Xl(le.subscriptionOptions,W))return Date.now()>=le.createTime+id?od(P,{token:le.token,createTime:Date.now(),subscriptionOptions:W}):le.token;try{yield dl(P.firebaseDependencies,le.token)}catch(Ue){console.warn(Ue)}return mt(P.firebaseDependencies,W)}return mt(P.firebaseDependencies,W)})).apply(this,arguments)}function Yl(P){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,V.Z)(function*(P){const O=yield ll(P.firebaseDependencies);O&&(yield dl(P.firebaseDependencies,O.token),yield Zl(P.firebaseDependencies));const W=yield P.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function od(P,O){return xu.apply(this,arguments)}function xu(){return(xu=(0,V.Z)(function*(P,O){try{const W=yield Ga(P.firebaseDependencies,O),le=Object.assign(Object.assign({},O),{token:W,createTime:Date.now()});return yield Fn(P.firebaseDependencies,le),W}catch(W){throw yield Yl(P),W}})).apply(this,arguments)}function mt(P,O){return kn.apply(this,arguments)}function kn(){return(kn=(0,V.Z)(function*(P,O){const le={token:yield go(P,O),createTime:Date.now(),subscriptionOptions:O};return yield Fn(P,le),le.token})).apply(this,arguments)}function Iu(P,O){return dr.apply(this,arguments)}function dr(){return(dr=(0,V.Z)(function*(P,O){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mh(O)})})).apply(this,arguments)}function Xl(P,O){return O.vapidKey===P.vapidKey&&O.endpoint===P.endpoint&&O.auth===P.auth&&O.p256dh===P.p256dh}function $a(P){const O={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function ps(P,O){if(!O.notification)return;P.notification={};const W=O.notification.title;W&&(P.notification.title=W);const le=O.notification.body;le&&(P.notification.body=le);const Ue=O.notification.image;Ue&&(P.notification.image=Ue)}(O,P),function ad(P,O){!O.data||(P.data=O.data)}(O,P),function ud(P,O){if(!O.fcmOptions)return;P.fcmOptions={};const W=O.fcmOptions.link;W&&(P.fcmOptions.link=W);const le=O.fcmOptions.analytics_label;le&&(P.fcmOptions.analyticsLabel=le)}(O,P),O}function ld(P){return"object"==typeof P&&!!P&&Tu in P}function Oh(P,O){const W=[];for(let le=0;le<P.length;le++)W.push(P.charAt(le)),le<O.length&&W.push(O.charAt(le));return W.join("")}function Fo(P){return yr.create("missing-app-config-values",{valueName:P})}Oh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Oh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ii{constructor(O,W,le){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ue=function zm(P){if(!P||!P.options)throw Fo("App Configuration Object");if(!P.name)throw Fo("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:W}=P;for(const le of O)if(!W[le])throw Fo(le);return{appName:P.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:Ue,installations:W,analyticsProvider:le}}_delete(){return Promise.resolve()}}function gs(P){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,V.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(Dh,{scope:pi}),P.swRegistration.update().catch(()=>{})}catch(O){throw yr.create("failed-service-worker-registration",{browserErrorMessage:O.message})}})).apply(this,arguments)}function va(P,O){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,V.Z)(function*(P,O){if(!O&&!P.swRegistration&&(yield gs(P)),O||!P.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw yr.create("invalid-sw-registration");P.swRegistration=O}})).apply(this,arguments)}function cd(P,O){return ec.apply(this,arguments)}function ec(){return(ec=(0,V.Z)(function*(P,O){O?P.vapidKey=O:P.vapidKey||(P.vapidKey=Ba)})).apply(this,arguments)}function dd(){return(dd=(0,V.Z)(function*(P,O){if(!navigator)throw yr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yr.create("permission-blocked");return yield cd(P,null==O?void 0:O.vapidKey),yield va(P,null==O?void 0:O.serviceWorkerRegistration),hl(P)})).apply(this,arguments)}function fl(P,O,W){return nc.apply(this,arguments)}function nc(){return(nc=(0,V.Z)(function*(P,O,W){const le=rc(O);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(le,{message_id:W[Tu],message_name:W[kh],message_time:W[Np],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function rc(P){switch(P){case Eu.NOTIFICATION_CLICKED:return"notification_open";case Eu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Nh(){return(Nh=(0,V.Z)(function*(P,O){const W=O.data;if(!W.isFirebaseMessaging)return;P.onMessageHandler&&W.messageType===Eu.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler($a(W)):P.onMessageHandler.next($a(W)));const le=W.data;ld(le)&&"1"===le[ul]&&(yield fl(P,W.messageType,le))})).apply(this,arguments)}const ic="@firebase/messaging",Lh=P=>{const O=new Ii(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function Rh(P,O){return Nh.apply(this,arguments)}(O,W)),O},Au=P=>{const O=P.getProvider("messaging").getImmediate();return{getToken:le=>function tc(P,O){return dd.apply(this,arguments)}(O,le)}};function sc(){return is.apply(this,arguments)}function is(){return(is=(0,V.Z)(function*(){try{yield(0,ie.eu)()}catch(P){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fh(){(0,de._registerComponent)(new ce.wA("messaging",Lh,"PUBLIC")),(0,de._registerComponent)(new ce.wA("messaging-internal",Au,"PRIVATE")),(0,de.registerVersion)(ic,"0.9.13"),(0,de.registerVersion)(ic,"0.9.13","esm2017")}();const Uh="analytics",Km="firebase_id",jo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wa="https://www.googletagmanager.com/gtag/js",Xr=new me.Yd("@firebase/analytics");function Bh(P){return Promise.all(P.map(O=>O.catch(W=>W)))}function Zm(P,O){const W=document.createElement("script");W.src=`${Wa}?l=${P}&id=${O}`,W.async=!0,document.head.appendChild(W)}function Du(P,O,W,le,Ue,Ke){return oc.apply(this,arguments)}function oc(){return(oc=(0,V.Z)(function*(P,O,W,le,Ue,Ke){const at=le[Ue];try{if(at)yield O[at];else{const Yt=(yield Bh(W)).find(en=>en.measurementId===Ue);Yt&&(yield O[Yt.appId])}}catch(Ht){Xr.error(Ht)}P("config",Ue,Ke)})).apply(this,arguments)}function Vh(P,O,W,le,Ue){return vo.apply(this,arguments)}function vo(){return(vo=(0,V.Z)(function*(P,O,W,le,Ue){try{let Ke=[];if(Ue&&Ue.send_to){let at=Ue.send_to;Array.isArray(at)||(at=[at]);const Ht=yield Bh(W);for(const Yt of at){const en=Ht.find(pn=>pn.measurementId===Yt),Rn=en&&O[en.appId];if(!Rn){Ke=[];break}Ke.push(Rn)}}0===Ke.length&&(Ke=Object.values(O)),yield Promise.all(Ke),P("event",le,Ue||{})}catch(Ke){Xr.error(Ke)}})).apply(this,arguments)}function jn(){const P=window.document.getElementsByTagName("script");for(const O of Object.values(P))if(O.src&&O.src.includes(Wa))return O;return null}const Zt=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),vl=new class Ar{constructor(O={},W=1e3){this.throttleMetadata=O,this.intervalMillis=W}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,W){this.throttleMetadata[O]=W}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function Hh(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function ku(P){return ya.apply(this,arguments)}function ya(){return(ya=(0,V.Z)(function*(P){var O;const{appId:W,apiKey:le}=P,Ue={method:"GET",headers:Hh(le)},Ke=jo.replace("{app-id}",W),at=yield fetch(Ke,Ue);if(200!==at.status&&304!==at.status){let Ht="";try{const Yt=yield at.json();(null===(O=Yt.error)||void 0===O?void 0:O.message)&&(Ht=Yt.error.message)}catch(Yt){}throw Zt.create("config-fetch-failed",{httpStatus:at.status,responseMessage:Ht})}return at.json()})).apply(this,arguments)}function Dr(P){return _a.apply(this,arguments)}function _a(){return(_a=(0,V.Z)(function*(P,O=vl,W){const{appId:le,apiKey:Ue,measurementId:Ke}=P.options;if(!le)throw Zt.create("no-app-id");if(!Ue){if(Ke)return{measurementId:Ke,appId:le};throw Zt.create("no-api-key")}const at=O.getThrottleMetadata(le)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ht=new fd;return setTimeout((0,V.Z)(function*(){Ht.abort()}),void 0!==W?W:6e4),yo({appId:le,apiKey:Ue,measurementId:Ke},at,Ht,O)})).apply(this,arguments)}function yo(P,O,W){return an.apply(this,arguments)}function an(){return(an=(0,V.Z)(function*(P,{throttleEndTimeMillis:O,backoffCount:W},le,Ue=vl){const{appId:Ke,measurementId:at}=P;try{yield Gh(le,O)}catch(Ht){if(at)return Xr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${Ht.message}]`),{appId:Ke,measurementId:at};throw Ht}try{const Ht=yield ku(P);return Ue.deleteThrottleMetadata(Ke),Ht}catch(Ht){if(!$h(Ht)){if(Ue.deleteThrottleMetadata(Ke),at)return Xr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${Ht.message}]`),{appId:Ke,measurementId:at};throw Ht}const Yt=503===Number(Ht.customData.httpStatus)?(0,ie.$s)(W,Ue.intervalMillis,30):(0,ie.$s)(W,Ue.intervalMillis),en={throttleEndTimeMillis:Date.now()+Yt,backoffCount:W+1};return Ue.setThrottleMetadata(Ke,en),Xr.debug(`Calling attemptFetch again in ${Yt} millis`),yo(P,en,le,Ue)}})).apply(this,arguments)}function Gh(P,O){return new Promise((W,le)=>{const Ue=Math.max(O-Date.now(),0),Ke=setTimeout(W,Ue);P.addEventListener(()=>{clearTimeout(Ke),le(Zt.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function $h(P){if(!(P instanceof ie.ZR&&P.customData))return!1;const O=Number(P.customData.httpStatus);return 429===O||500===O||503===O||504===O}class fd{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}function pd(){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,V.Z)(function*(){if(!(0,ie.hl)())return Xr.warn(Zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(P){return Xr.warn(Zt.create("indexeddb-unavailable",{errorInfo:P}).message),!1}return!0})).apply(this,arguments)}function Za(){return(Za=(0,V.Z)(function*(P,O,W,le,Ue,Ke,at){var Ht;const Yt=Dr(P);Yt.then(li=>{W[li.measurementId]=li.appId,P.options.measurementId&&li.measurementId!==P.options.measurementId&&Xr.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${li.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(li=>Xr.error(li)),O.push(Yt);const en=pd().then(li=>{if(li)return le.getId()}),[Rn,pn]=yield Promise.all([Yt,en]);jn()||Zm(Ke,Rn.measurementId),Ue("js",new Date);const Hr=null!==(Ht=null==at?void 0:at.config)&&void 0!==Ht?Ht:{};return Hr.origin="firebase",Hr.update=!0,null!=pn&&(Hr[Km]=pn),Ue("config",Rn.measurementId,Hr),Rn.measurementId})).apply(this,arguments)}class Ya{constructor(O){this.app=O}_delete(){return delete vi[this.app.options.appId],Promise.resolve()}}let vi={},Qa=[];const Xa={};let Pu,Ta,Mu="dataLayer",Ja=!1;function Bo(P,O,W){!function yl(){const P=[];if((0,ie.ru)()&&P.push("This is a browser extension environment."),(0,ie.zI)()||P.push("Cookies are not available."),P.length>0){const O=P.map((le,Ue)=>`(${Ue+1}) ${le}`).join(" "),W=Zt.create("invalid-analytics-context",{errorInfo:O});Xr.warn(W.message)}}();const le=P.options.appId;if(!le)throw Zt.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw Zt.create("no-api-key");Xr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vi[le])throw Zt.create("already-exists",{id:le});if(!Ja){!function Ka(P){let O=[];Array.isArray(window[P])?O=window[P]:window[P]=O}(Mu);const{wrappedGtag:Ke,gtagCore:at}=function Ym(P,O,W,le,Ue){let Ke=function(...at){window[le].push(arguments)};return window[Ue]&&"function"==typeof window[Ue]&&(Ke=window[Ue]),window[Ue]=function gl(P,O,W,le){function Ke(){return(Ke=(0,V.Z)(function*(at,Ht,Yt){try{"event"===at?yield Vh(P,O,W,Ht,Yt):"config"===at?yield Du(P,O,W,le,Ht,Yt):P("set",Ht)}catch(en){Xr.error(en)}})).apply(this,arguments)}return function Ue(at,Ht,Yt){return Ke.apply(this,arguments)}}(Ke,P,O,W),{gtagCore:Ke,wrappedGtag:window[Ue]}}(vi,Qa,Xa,Mu,"gtag");Ta=Ke,Pu=at,Ja=!0}return vi[le]=function ba(P,O,W,le,Ue,Ke,at){return Za.apply(this,arguments)}(P,Qa,Xa,O,Pu,Mu,W),new Ya(P)}function ei(){return(ei=(0,V.Z)(function*(P,O,W,le,Ue){if(Ue&&Ue.global)P("event",W,le);else{const Ke=yield O;P("event",W,Object.assign(Object.assign({},le),{send_to:Ke}))}})).apply(this,arguments)}function Vs(){return ac.apply(this,arguments)}function ac(){return(ac=(0,V.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(P){return!1}})).apply(this,arguments)}const ss="@firebase/analytics";!function wa(){(0,de._registerComponent)(new ce.wA(Uh,(O,{options:W})=>Bo(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,de._registerComponent)(new ce.wA("analytics-internal",function P(O){try{const W=O.getProvider(Uh).getImmediate();return{logEvent:(le,Ue,Ke)=>function Ou(P,O,W,le){P=(0,ie.m9)(P),function eu(P,O,W,le,Ue){return ei.apply(this,arguments)}(Ta,vi[P.app.options.appId],O,W,le).catch(Ue=>Xr.error(Ue))}(W,le,Ue,Ke)}}catch(W){throw Zt.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,de.registerVersion)(ss,"0.7.9"),(0,de.registerVersion)(ss,"0.7.9","esm2017")}();var zh=B(4408),yd=B(7565);const _l=new class Vr extends yd.v{}(class bo extends zh.o{constructor(O,W){super(O,W),this.scheduler=O,this.work=W}schedule(O,W=0){return W>0?super.schedule(O,W):(this.delay=W,this.state=O,this.scheduler.flush(this),this)}execute(O,W){return W>0||this.closed?super.execute(O,W):this._execute(O,W)}requestAsyncId(O,W,le=0){return null!=le&&le>0||null==le&&this.delay>0?super.requestAsyncId(O,W,le):O.flush(this)}});var Wh=B(4986),Up=B(8505),Ai=B(5363),Bi=B(9468);const bl=new h.GfV("7.3.0"),Ru="__angularfire_symbol__analyticsIsSupportedValue",Ho="__angularfire_symbol__analyticsIsSupported",Sa="__angularfire_symbol__remoteConfigIsSupportedValue",Go="__angularfire_symbol__remoteConfigIsSupported",Nu="__angularfire_symbol__messagingIsSupportedValue",Cn="__angularfire_symbol__messagingIsSupported";function Fu(P,O,W){if(O){if(1===O.length)return O[0];const Ke=O.filter(at=>at.app===W);if(1===Ke.length)return Ke[0]}return W.container.getProvider(P).getImmediate({optional:!0})}globalThis[Ho]||(globalThis[Ho]=Vs().then(P=>globalThis[Ru]=P).catch(()=>globalThis[Ru]=!1)),globalThis[Cn]||(globalThis[Cn]=sc().then(P=>globalThis[Nu]=P).catch(()=>globalThis[Nu]=!1)),globalThis[Go]||(globalThis[Go]=Kl().then(P=>globalThis[Sa]=P).catch(()=>globalThis[Sa]=!1));const Qm=(P,O)=>{const W=O?[O]:(0,ne.C6)(),le=[];return W.forEach(Ue=>{Ue.container.getProvider(P).instances.forEach(at=>{le.includes(at)||le.push(at)})}),le};function $o(){}class Hs{constructor(O,W=_l){this.zone=O,this.delegate=W}now(){return this.delegate.now()}schedule(O,W,le){const Ue=this.zone;return this.delegate.schedule(function(at){Ue.runGuarded(()=>{O.apply(this,[at])})},W,le)}}class lc{constructor(O){this.zone=O,this.task=null}call(O,W){const le=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$o,{},$o,$o)),W.pipe((0,Up.b)({next:le,complete:le,error:le})).subscribe(O).add(le)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zh=(()=>{class P{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new Hs(Zone.current)),this.insideAngular=W.run(()=>new Hs(Zone.current,Wh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(W){return new(W||P)(h.LFG(h.R0b))},P.\u0275prov=h.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function To(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function yi(P){return P.pipe((0,Ai.Q)(To().outsideAngular))}function Bp(P){return To(),function Ca(P){return function(W){return(W=W.lift(new lc(P.ngZone))).pipe((0,Bi.R)(P.outsideAngular),(0,Ai.Q)(P.insideAngular))}}(To())(P)}},8292:(Ze,_e,B)=>{B(5555);const{devDependencies:ne}=B(3681);Ze.exports={corePath:`https://unpkg.com/@ffmpeg/core@${ne["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}},2187:(Ze,_e,B)=>{var h=B(8926).default;const ne=B(5555);Ze.exports=function(){var de=h(function*(ie){let ce=ie;return void 0===ie?new Uint8Array:("string"==typeof ie?ce=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(ie)?atob(ie.split(",")[1]).split("").map(me=>me.charCodeAt(0)):yield(yield fetch(ne(ie))).arrayBuffer():(ie instanceof File||ie instanceof Blob)&&(ce=yield(de=>new Promise((ie,ce)=>{const me=new FileReader;me.onload=()=>{ie(me.result)},me.onerror=({target:{error:{code:fe}}})=>{ce(Error(`File could not be read! Code=${fe}`))},me.readAsArrayBuffer(de)}))(ie)),new Uint8Array(ce))});return function(ie){return de.apply(this,arguments)}}()},9965:(Ze,_e,B)=>{var h=B(8926).default;const ne=B(5555),{log:V}=B(6945),de=function(){var ie=h(function*(ce,me){V("info",`fetch ${ce}`);const fe=yield(yield fetch(ce)).arrayBuffer();V("info",`${ce} file size = ${fe.byteLength} bytes`);const ve=new Blob([fe],{type:me}),J=URL.createObjectURL(ve);return V("info",`${ce} blob URL = ${J}`),J});return function(me,fe){return ie.apply(this,arguments)}}();Ze.exports=function(){var ie=h(function*({corePath:ce}){if("string"!=typeof ce)throw Error("corePath should be a string!");const me=ne(ce),fe=yield de(me,"application/javascript"),ve=yield de(me.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),J=yield de(me.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(ue=>{const re=document.createElement("script"),rt=()=>{re.removeEventListener("load",rt),V("info","ffmpeg-core.js script loaded"),ue({createFFmpegCore,corePath:fe,wasmPath:ve,workerPath:J})};re.src=fe,re.type="text/javascript",re.addEventListener("load",rt),document.getElementsByTagName("head")[0].appendChild(re)}):(V("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:fe,wasmPath:ve,workerPath:J}))});return function(ce){return ie.apply(this,arguments)}}()},1346:(Ze,_e,B)=>{const h=B(8292),ne=B(9965),V=B(2187);Ze.exports={defaultOptions:h,getCreateFFmpegCore:ne,fetchFile:V}},6151:Ze=>{Ze.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},9639:(Ze,_e,B)=>{var h=B(8926).default;const{defaultArgs:ne,baseOptions:V}=B(6151),{setLogging:de,setCustomLogger:ie,log:ce}=B(6945),me=B(5542),fe=B(8333),{defaultOptions:ve,getCreateFFmpegCore:J}=B(1346),{version:ue}=B(3681),re=Error("ffmpeg.wasm is not ready, make sure you have completed load().");Ze.exports=(rt={})=>{const X=yw(yw(yw({},V),ve),rt),{log:Ye,logger:Je,progress:wt}=X,Ee=R3(X,["log","logger","progress"]);let Oe=null,Xe=null,lt=null,Qe=!1,Pe=wt;const ot=({type:se,message:ye})=>{ce(se,ye),me(ye,Pe),(se=>{"FFMPEG_END"===se&&null!==lt&&(lt(),lt=null,Qe=!1)})(ye)},gt=function(){var se=h(function*(){if(ce("info","load ffmpeg-core"),null!==Oe)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{ce("info","loading ffmpeg-core");const{createFFmpegCore:ye,corePath:He,workerPath:Re,wasmPath:Fe}=yield J(Ee);Oe=yield ye({mainScriptUrlOrBlob:He,printErr:pt=>ot({type:"fferr",message:pt}),print:pt=>ot({type:"ffout",message:pt}),locateFile:(pt,Nt)=>{if("undefined"!=typeof window){if(void 0!==Fe&&pt.endsWith("ffmpeg-core.wasm"))return Fe;if(void 0!==Re&&pt.endsWith("ffmpeg-core.worker.js"))return Re}return Nt+pt}}),Xe=Oe.cwrap("proxy_main","number",["number","number"]),ce("info","ffmpeg-core loaded")}});return function(){return se.apply(this,arguments)}}();return de(Ye),ie(Je),ce("info",`use ffmpeg.wasm v${ue}`),{setProgress:se=>{Pe=se},setLogger:se=>{ie(se)},setLogging:de,load:gt,isLoaded:()=>null!==Oe,run:(...se)=>{if(ce("info",`run ffmpeg command: ${se.join(" ")}`),null===Oe)throw re;if(Qe)throw Error("ffmpeg.wasm can only run one command at a time");return Qe=!0,new Promise(ye=>{const He=[...ne,...se].filter(Re=>0!==Re.length);lt=ye,Xe(...fe(Oe,He))})},exit:()=>{if(null===Oe)throw re;Qe=!1,Oe.exit(1),Oe=null,Xe=null,lt=null},FS:(se,...ye)=>{if(ce("info",`run FS.${se} ${ye.map(He=>"string"==typeof He?He:`<${He.length} bytes binary file>`).join(" ")}`),null===Oe)throw re;{let He=null;try{He=Oe.FS[se](...ye)}catch(Re){throw Error("readdir"===se?`ffmpeg.FS('readdir', '${ye[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===se?`ffmpeg.FS('readFile', '${ye[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return He}}}}},260:(Ze,_e,B)=>{B(7854);const h=B(9639),{fetchFile:ne}=B(1346);Ze.exports={createFFmpeg:h,fetchFile:ne}},6945:Ze=>{let _e=!1,B=()=>{};Ze.exports={logging:_e,setLogging:de=>{_e=de},setCustomLogger:de=>{B=de},log:(de,ie)=>{B({type:de,message:ie}),_e&&console.log(`[${de}] ${ie}`)}}},8333:Ze=>{Ze.exports=(_e,B)=>{const h=_e._malloc(B.length*Uint32Array.BYTES_PER_ELEMENT);return B.forEach((ne,V)=>{const de=_e._malloc(ne.length+1);_e.writeAsciiToMemory(ne,de),_e.setValue(h+Uint32Array.BYTES_PER_ELEMENT*V,de,"i32")}),[B.length,h]}},5542:Ze=>{let _e=0,B=0;const h=ne=>{const[V,de,ie]=ne.split(":");return 60*parseFloat(V)*60+60*parseFloat(de)+parseFloat(ie)};Ze.exports=(ne,V)=>{if("string"==typeof ne)if(ne.startsWith("  Duration")){const de=ne.split(", ")[0].split(": ")[1],ie=h(de);V({duration:ie,ratio:B}),(0===_e||_e>ie)&&(_e=ie)}else if(ne.startsWith("frame")||ne.startsWith("size")){const de=ne.split("time=")[1].split(" ")[0],ie=h(de);B=ie/_e,V({ratio:B,time:ie})}else ne.startsWith("video:")&&(V({ratio:1}),_e=0)}},2090:(Ze,_e,B)=>{"use strict";B.d(_e,{$s:()=>Sn,BH:()=>rt,G6:()=>gt,L:()=>fe,LL:()=>X,Mn:()=>Ve,Sg:()=>Ye,UG:()=>Ee,US:()=>ce,ZB:()=>ue,ZR:()=>we,b$:()=>lt,d:()=>Qe,eu:()=>z,hl:()=>R,jU:()=>Oe,m9:()=>Qr,ne:()=>Er,pd:()=>Qi,r3:()=>Ut,ru:()=>Xe,tV:()=>ve,uI:()=>wt,vZ:()=>Vn,w1:()=>Pe,xO:()=>ar,xb:()=>Qt,z$:()=>Je,zI:()=>Y,zd:()=>Ln});const de=function(ge){const xe=[];let Ae=0;for(let dt=0;dt<ge.length;dt++){let Ce=ge.charCodeAt(dt);Ce<128?xe[Ae++]=Ce:Ce<2048?(xe[Ae++]=Ce>>6|192,xe[Ae++]=63&Ce|128):55296==(64512&Ce)&&dt+1<ge.length&&56320==(64512&ge.charCodeAt(dt+1))?(Ce=65536+((1023&Ce)<<10)+(1023&ge.charCodeAt(++dt)),xe[Ae++]=Ce>>18|240,xe[Ae++]=Ce>>12&63|128,xe[Ae++]=Ce>>6&63|128,xe[Ae++]=63&Ce|128):(xe[Ae++]=Ce>>12|224,xe[Ae++]=Ce>>6&63|128,xe[Ae++]=63&Ce|128)}return xe},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,xe){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ae=xe?this.byteToCharMapWebSafe_:this.byteToCharMap_,dt=[];for(let Ce=0;Ce<ge.length;Ce+=3){const $e=ge[Ce],yt=Ce+1<ge.length,Gt=yt?ge[Ce+1]:0,K=Ce+2<ge.length,Q=K?ge[Ce+2]:0;let bt=(15&Gt)<<2|Q>>6,fn=63&Q;K||(fn=64,yt||(bt=64)),dt.push(Ae[$e>>2],Ae[(3&$e)<<4|Gt>>4],Ae[bt],Ae[fn])}return dt.join("")},encodeString(ge,xe){return this.HAS_NATIVE_SUPPORT&&!xe?btoa(ge):this.encodeByteArray(de(ge),xe)},decodeString(ge,xe){return this.HAS_NATIVE_SUPPORT&&!xe?atob(ge):function(ge){const xe=[];let Ae=0,dt=0;for(;Ae<ge.length;){const Ce=ge[Ae++];if(Ce<128)xe[dt++]=String.fromCharCode(Ce);else if(Ce>191&&Ce<224){const $e=ge[Ae++];xe[dt++]=String.fromCharCode((31&Ce)<<6|63&$e)}else if(Ce>239&&Ce<365){const K=((7&Ce)<<18|(63&ge[Ae++])<<12|(63&ge[Ae++])<<6|63&ge[Ae++])-65536;xe[dt++]=String.fromCharCode(55296+(K>>10)),xe[dt++]=String.fromCharCode(56320+(1023&K))}else{const $e=ge[Ae++],yt=ge[Ae++];xe[dt++]=String.fromCharCode((15&Ce)<<12|(63&$e)<<6|63&yt)}}return xe.join("")}(this.decodeStringToByteArray(ge,xe))},decodeStringToByteArray(ge,xe){this.init_();const Ae=xe?this.charToByteMapWebSafe_:this.charToByteMap_,dt=[];for(let Ce=0;Ce<ge.length;){const $e=Ae[ge.charAt(Ce++)],Gt=Ce<ge.length?Ae[ge.charAt(Ce)]:0;++Ce;const Q=Ce<ge.length?Ae[ge.charAt(Ce)]:64;++Ce;const qe=Ce<ge.length?Ae[ge.charAt(Ce)]:64;if(++Ce,null==$e||null==Gt||null==Q||null==qe)throw Error();dt.push($e<<2|Gt>>4),64!==Q&&(dt.push(Gt<<4&240|Q>>2),64!==qe&&dt.push(Q<<6&192|qe))}return dt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}},fe=function(ge){return function(ge){const xe=de(ge);return ce.encodeByteArray(xe,!0)}(ge).replace(/\./g,"")},ve=function(ge){try{return ce.decodeString(ge,!0)}catch(xe){console.error("base64Decode failed: ",xe)}return null};function ue(ge,xe){if(!(xe instanceof Object))return xe;switch(xe.constructor){case Date:return new Date(xe.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return xe}for(const Ae in xe)!xe.hasOwnProperty(Ae)||!re(Ae)||(ge[Ae]=ue(ge[Ae],xe[Ae]));return ge}function re(ge){return"__proto__"!==ge}class rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((xe,Ae)=>{this.resolve=xe,this.reject=Ae})}wrapCallback(xe){return(Ae,dt)=>{Ae?this.reject(Ae):this.resolve(dt),"function"==typeof xe&&(this.promise.catch(()=>{}),1===xe.length?xe(Ae):xe(Ae,dt))}}}function Ye(ge,xe){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const dt=xe||"demo-project",Ce=ge.iat||0,$e=ge.sub||ge.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${dt}`,aud:dt,iat:Ce,exp:Ce+3600,auth_time:Ce,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(yt)),""].join(".")}function Je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function wt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ge){return!1}}function Oe(){return"object"==typeof self&&self.self===self}function Xe(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){return Je().indexOf("Electron/")>=0}function Pe(){const ge=Je();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function Ve(){return Je().indexOf("MSAppHost/")>=0}function gt(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){return"object"==typeof indexedDB}function z(){return new Promise((ge,xe)=>{try{let Ae=!0;const dt="validate-browser-context-for-indexeddb-analytics-module",Ce=self.indexedDB.open(dt);Ce.onsuccess=()=>{Ce.result.close(),Ae||self.indexedDB.deleteDatabase(dt),ge(!0)},Ce.onupgradeneeded=()=>{Ae=!1},Ce.onerror=()=>{var $e;xe((null===($e=Ce.error)||void 0===$e?void 0:$e.message)||"")}}catch(Ae){xe(Ae)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class we extends Error{constructor(xe,Ae,dt){super(Ae),this.code=xe,this.customData=dt,this.name="FirebaseError",Object.setPrototypeOf(this,we.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,X.prototype.create)}}class X{constructor(xe,Ae,dt){this.service=xe,this.serviceName=Ae,this.errors=dt}create(xe,...Ae){const dt=Ae[0]||{},Ce=`${this.service}/${xe}`,$e=this.errors[xe],yt=$e?function se(ge,xe){return ge.replace(ye,(Ae,dt)=>{const Ce=xe[dt];return null!=Ce?String(Ce):`<${dt}?>`})}($e,dt):"Error";return new we(Ce,`${this.serviceName}: ${yt} (${Ce}).`,dt)}}const ye=/\{\$([^}]+)}/g;function Ut(ge,xe){return Object.prototype.hasOwnProperty.call(ge,xe)}function Qt(ge){for(const xe in ge)if(Object.prototype.hasOwnProperty.call(ge,xe))return!1;return!0}function Vn(ge,xe){if(ge===xe)return!0;const Ae=Object.keys(ge),dt=Object.keys(xe);for(const Ce of Ae){if(!dt.includes(Ce))return!1;const $e=ge[Ce],yt=xe[Ce];if(Zn($e)&&Zn(yt)){if(!Vn($e,yt))return!1}else if($e!==yt)return!1}for(const Ce of dt)if(!Ae.includes(Ce))return!1;return!0}function Zn(ge){return null!==ge&&"object"==typeof ge}function ar(ge){const xe=[];for(const[Ae,dt]of Object.entries(ge))Array.isArray(dt)?dt.forEach(Ce=>{xe.push(encodeURIComponent(Ae)+"="+encodeURIComponent(Ce))}):xe.push(encodeURIComponent(Ae)+"="+encodeURIComponent(dt));return xe.length?"&"+xe.join("&"):""}function Ln(ge){const xe={};return ge.replace(/^\?/,"").split("&").forEach(dt=>{if(dt){const[Ce,$e]=dt.split("=");xe[decodeURIComponent(Ce)]=decodeURIComponent($e)}}),xe}function Qi(ge){const xe=ge.indexOf("?");if(!xe)return"";const Ae=ge.indexOf("#",xe);return ge.substring(xe,Ae>0?Ae:void 0)}function Er(ge,xe){const Ae=new Vt(ge,xe);return Ae.subscribe.bind(Ae)}class Vt{constructor(xe,Ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ae,this.task.then(()=>{xe(this)}).catch(dt=>{this.error(dt)})}next(xe){this.forEachObserver(Ae=>{Ae.next(xe)})}error(xe){this.forEachObserver(Ae=>{Ae.error(xe)}),this.close(xe)}complete(){this.forEachObserver(xe=>{xe.complete()}),this.close()}subscribe(xe,Ae,dt){let Ce;if(void 0===xe&&void 0===Ae&&void 0===dt)throw new Error("Missing Observer.");Ce=function qn(ge,xe){if("object"!=typeof ge||null===ge)return!1;for(const Ae of xe)if(Ae in ge&&"function"==typeof ge[Ae])return!0;return!1}(xe,["next","error","complete"])?xe:{next:xe,error:Ae,complete:dt},void 0===Ce.next&&(Ce.next=zn),void 0===Ce.error&&(Ce.error=zn),void 0===Ce.complete&&(Ce.complete=zn);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ce.error(this.finalError):Ce.complete()}catch(yt){}}),this.observers.push(Ce),$e}unsubscribeOne(xe){void 0===this.observers||void 0===this.observers[xe]||(delete this.observers[xe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(xe){if(!this.finalized)for(let Ae=0;Ae<this.observers.length;Ae++)this.sendOne(Ae,xe)}sendOne(xe,Ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[xe])try{Ae(this.observers[xe])}catch(dt){"undefined"!=typeof console&&console.error&&console.error(dt)}})}close(xe){this.finalized||(this.finalized=!0,void 0!==xe&&(this.finalError=xe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}function Sn(ge,xe=1e3,Ae=2){const dt=xe*Math.pow(Ae,ge),Ce=Math.round(.5*dt*(Math.random()-.5)*2);return Math.min(144e5,dt+Ce)}function Qr(ge){return ge&&ge._delegate?ge._delegate:ge}},9047:(Ze,_e,B)=>{"use strict";var h=B(5e3);let ne=null;function V(){return ne}const me=new h.OlP("DocumentToken");let fe=(()=>{class r{historyGo(t){throw new Error("Not implemented")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=h.Yz7({token:r,factory:function(){return function ve(){return(0,h.LFG)(ue)}()},providedIn:"platform"}),r})();const J=new h.OlP("Location Initialized");let ue=(()=>{class r extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const n=V().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=V().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,i){re()?this._history.pushState(t,n,i):this.location.hash=i}replaceState(t,n,i){re()?this._history.replaceState(t,n,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(me))},r.\u0275prov=h.Yz7({token:r,factory:function(){return function rt(){return new ue((0,h.LFG)(me))}()},providedIn:"platform"}),r})();function re(){return!!window.history.pushState}function Ye(r,e){if(0==r.length)return e;if(0==e.length)return r;let t=0;return r.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?r+e.substring(1):1==t?r+e:r+"/"+e}function Je(r){const e=r.match(/#|\?|$/),t=e&&e.index||r.length;return r.slice(0,t-("/"===r[t-1]?1:0))+r.slice(t)}function wt(r){return r&&"?"!==r[0]?"?"+r:r}let Ee=(()=>{class r{historyGo(t){throw new Error("Not implemented")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=h.Yz7({token:r,factory:function(){return function Oe(r){const e=(0,h.LFG)(me).location;return new lt((0,h.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),r})();const Xe=new h.OlP("appBaseHref");let lt=(()=>{class r extends Ee{constructor(t,n){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ye(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+wt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${n}${i}`:n}pushState(t,n,i,s){const o=this.prepareExternalUrl(i+wt(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,i,s){const o=this.prepareExternalUrl(i+wt(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var n,i;null===(i=(n=this._platformLocation).historyGo)||void 0===i||i.call(n,t)}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(fe),h.LFG(Xe,8))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})(),Qe=(()=>{class r extends Ee{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=Ye(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,i,s){let o=this.prepareExternalUrl(i+wt(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,i,s){let o=this.prepareExternalUrl(i+wt(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var n,i;null===(i=(n=this._platformLocation).historyGo)||void 0===i||i.call(n,t)}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(fe),h.LFG(Xe,8))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})(),Pe=(()=>{class r{constructor(t,n){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Je(gt(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+wt(n))}normalize(t){return r.stripTrailingSlash(function ot(r,e){return r&&e.startsWith(r)?e.substring(r.length):e}(this._baseHref,gt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,n="",i=null){this._platformStrategy.pushState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wt(n)),i)}replaceState(t,n="",i=null){this._platformStrategy.replaceState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wt(n)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var n,i;null===(i=(n=this._platformStrategy).historyGo)||void 0===i||i.call(n,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(i=>i(t,n))}subscribe(t,n,i){return this._subject.subscribe({next:t,error:n,complete:i})}}return r.normalizeQueryParams=wt,r.joinWithSlash=Ye,r.stripTrailingSlash=Je,r.\u0275fac=function(t){return new(t||r)(h.LFG(Ee),h.LFG(fe))},r.\u0275prov=h.Yz7({token:r,factory:function(){return function Ve(){return new Pe((0,h.LFG)(Ee),(0,h.LFG)(fe))}()},providedIn:"root"}),r})();function gt(r){return r.replace(/\/index.html$/,"")}var z=(()=>((z=z||{})[z.Decimal=0]="Decimal",z[z.Percent=1]="Percent",z[z.Currency=2]="Currency",z[z.Scientific=3]="Scientific",z))(),he=(()=>((he=he||{})[he.Format=0]="Format",he[he.Standalone=1]="Standalone",he))(),oe=(()=>((oe=oe||{})[oe.Narrow=0]="Narrow",oe[oe.Abbreviated=1]="Abbreviated",oe[oe.Wide=2]="Wide",oe[oe.Short=3]="Short",oe))(),we=(()=>((we=we||{})[we.Short=0]="Short",we[we.Medium=1]="Medium",we[we.Long=2]="Long",we[we.Full=3]="Full",we))(),X=(()=>((X=X||{})[X.Decimal=0]="Decimal",X[X.Group=1]="Group",X[X.List=2]="List",X[X.PercentSign=3]="PercentSign",X[X.PlusSign=4]="PlusSign",X[X.MinusSign=5]="MinusSign",X[X.Exponential=6]="Exponential",X[X.SuperscriptingExponent=7]="SuperscriptingExponent",X[X.PerMille=8]="PerMille",X[X.Infinity=9]="Infinity",X[X.NaN=10]="NaN",X[X.TimeSeparator=11]="TimeSeparator",X[X.CurrencyDecimal=12]="CurrencyDecimal",X[X.CurrencyGroup=13]="CurrencyGroup",X))();function St(r,e){return qn((0,h.cg1)(r)[h.wAp.DateFormat],e)}function Ut(r,e){return qn((0,h.cg1)(r)[h.wAp.TimeFormat],e)}function rn(r,e){return qn((0,h.cg1)(r)[h.wAp.DateTimeFormat],e)}function Qt(r,e){const t=(0,h.cg1)(r),n=t[h.wAp.NumberSymbols][e];if(void 0===n){if(e===X.CurrencyDecimal)return t[h.wAp.NumberSymbols][X.Decimal];if(e===X.CurrencyGroup)return t[h.wAp.NumberSymbols][X.Group]}return n}function On(r){if(!r[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${r[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function qn(r,e){for(let t=e;t>-1;t--)if(void 0!==r[t])return r[t];throw new Error("Locale data API: locale data undefined")}function zn(r){const[e,t]=r.split(":");return{hours:+e,minutes:+t}}const Yn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,si={},so=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Dn=(()=>((Dn=Dn||{})[Dn.Short=0]="Short",Dn[Dn.ShortGMT=1]="ShortGMT",Dn[Dn.Long=2]="Long",Dn[Dn.Extended=3]="Extended",Dn))(),Wt=(()=>((Wt=Wt||{})[Wt.FullYear=0]="FullYear",Wt[Wt.Month=1]="Month",Wt[Wt.Date=2]="Date",Wt[Wt.Hours=3]="Hours",Wt[Wt.Minutes=4]="Minutes",Wt[Wt.Seconds=5]="Seconds",Wt[Wt.FractionalSeconds=6]="FractionalSeconds",Wt[Wt.Day=7]="Day",Wt))(),sn=(()=>((sn=sn||{})[sn.DayPeriods=0]="DayPeriods",sn[sn.Days=1]="Days",sn[sn.Months=2]="Months",sn[sn.Eras=3]="Eras",sn))();function Yr(r,e,t,n){let i=function Ls(r){if(Hn(r))return r;if("number"==typeof r&&!isNaN(r))return new Date(r);if("string"==typeof r){if(r=r.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(r)){const[i,s=1,o=1]=r.split("-").map(l=>+l);return Si(i,s-1,o)}const t=parseFloat(r);if(!isNaN(r-t))return new Date(t);let n;if(n=r.match(Yn))return function Li(r){const e=new Date(0);let t=0,n=0;const i=r[8]?e.setUTCFullYear:e.setFullYear,s=r[8]?e.setUTCHours:e.setHours;r[9]&&(t=Number(r[9]+r[10]),n=Number(r[9]+r[11])),i.call(e,Number(r[1]),Number(r[2])-1,Number(r[3]));const o=Number(r[4]||0)-t,l=Number(r[5]||0)-n,f=Number(r[6]||0),g=Math.floor(1e3*parseFloat("0."+(r[7]||0)));return s.call(e,o,l,f,g),e}(n)}const e=new Date(r);if(!Hn(e))throw new Error(`Unable to convert "${r}" into a date`);return e}(r);e=Sn(t,e)||e;let l,o=[];for(;e;){if(l=so.exec(e),!l){o.push(e);break}{o=o.concat(l.slice(1));const y=o.pop();if(!y)break;e=y}}let f=i.getTimezoneOffset();n&&(f=fn(n,f),i=function Ci(r,e,t){const n=t?-1:1,i=r.getTimezoneOffset();return function ur(r,e){return(r=new Date(r.getTime())).setMinutes(r.getMinutes()+e),r}(r,n*(fn(e,i)-i))}(i,n,!0));let g="";return o.forEach(y=>{const T=function bt(r){if(qe[r])return qe[r];let e;switch(r){case"G":case"GG":case"GGG":e=Ae(sn.Eras,oe.Abbreviated);break;case"GGGG":e=Ae(sn.Eras,oe.Wide);break;case"GGGGG":e=Ae(sn.Eras,oe.Narrow);break;case"y":e=ge(Wt.FullYear,1,0,!1,!0);break;case"yy":e=ge(Wt.FullYear,2,0,!0,!0);break;case"yyy":e=ge(Wt.FullYear,3,0,!1,!0);break;case"yyyy":e=ge(Wt.FullYear,4,0,!1,!0);break;case"Y":e=Se(1);break;case"YY":e=Se(2,!0);break;case"YYY":e=Se(3);break;case"YYYY":e=Se(4);break;case"M":case"L":e=ge(Wt.Month,1,1);break;case"MM":case"LL":e=ge(Wt.Month,2,1);break;case"MMM":e=Ae(sn.Months,oe.Abbreviated);break;case"MMMM":e=Ae(sn.Months,oe.Wide);break;case"MMMMM":e=Ae(sn.Months,oe.Narrow);break;case"LLL":e=Ae(sn.Months,oe.Abbreviated,he.Standalone);break;case"LLLL":e=Ae(sn.Months,oe.Wide,he.Standalone);break;case"LLLLL":e=Ae(sn.Months,oe.Narrow,he.Standalone);break;case"w":e=Q(1);break;case"ww":e=Q(2);break;case"W":e=Q(1,!0);break;case"d":e=ge(Wt.Date,1);break;case"dd":e=ge(Wt.Date,2);break;case"c":case"cc":e=ge(Wt.Day,1);break;case"ccc":e=Ae(sn.Days,oe.Abbreviated,he.Standalone);break;case"cccc":e=Ae(sn.Days,oe.Wide,he.Standalone);break;case"ccccc":e=Ae(sn.Days,oe.Narrow,he.Standalone);break;case"cccccc":e=Ae(sn.Days,oe.Short,he.Standalone);break;case"E":case"EE":case"EEE":e=Ae(sn.Days,oe.Abbreviated);break;case"EEEE":e=Ae(sn.Days,oe.Wide);break;case"EEEEE":e=Ae(sn.Days,oe.Narrow);break;case"EEEEEE":e=Ae(sn.Days,oe.Short);break;case"a":case"aa":case"aaa":e=Ae(sn.DayPeriods,oe.Abbreviated);break;case"aaaa":e=Ae(sn.DayPeriods,oe.Wide);break;case"aaaaa":e=Ae(sn.DayPeriods,oe.Narrow);break;case"b":case"bb":case"bbb":e=Ae(sn.DayPeriods,oe.Abbreviated,he.Standalone,!0);break;case"bbbb":e=Ae(sn.DayPeriods,oe.Wide,he.Standalone,!0);break;case"bbbbb":e=Ae(sn.DayPeriods,oe.Narrow,he.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ae(sn.DayPeriods,oe.Abbreviated,he.Format,!0);break;case"BBBB":e=Ae(sn.DayPeriods,oe.Wide,he.Format,!0);break;case"BBBBB":e=Ae(sn.DayPeriods,oe.Narrow,he.Format,!0);break;case"h":e=ge(Wt.Hours,1,-12);break;case"hh":e=ge(Wt.Hours,2,-12);break;case"H":e=ge(Wt.Hours,1);break;case"HH":e=ge(Wt.Hours,2);break;case"m":e=ge(Wt.Minutes,1);break;case"mm":e=ge(Wt.Minutes,2);break;case"s":e=ge(Wt.Seconds,1);break;case"ss":e=ge(Wt.Seconds,2);break;case"S":e=ge(Wt.FractionalSeconds,1);break;case"SS":e=ge(Wt.FractionalSeconds,2);break;case"SSS":e=ge(Wt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ce(Dn.Short);break;case"ZZZZZ":e=Ce(Dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ce(Dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ce(Dn.Long);break;default:return null}return qe[r]=e,e}(y);g+=T?T(i,t,f):"''"===y?"'":y.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),g}function Si(r,e,t){const n=new Date(0);return n.setFullYear(r,e,t),n.setHours(0,0,0),n}function Sn(r,e){const t=function ye(r){return(0,h.cg1)(r)[h.wAp.LocaleId]}(r);if(si[t]=si[t]||{},si[t][e])return si[t][e];let n="";switch(e){case"shortDate":n=St(r,we.Short);break;case"mediumDate":n=St(r,we.Medium);break;case"longDate":n=St(r,we.Long);break;case"fullDate":n=St(r,we.Full);break;case"shortTime":n=Ut(r,we.Short);break;case"mediumTime":n=Ut(r,we.Medium);break;case"longTime":n=Ut(r,we.Long);break;case"fullTime":n=Ut(r,we.Full);break;case"short":const i=Sn(r,"shortTime"),s=Sn(r,"shortDate");n=hs(rn(r,we.Short),[i,s]);break;case"medium":const o=Sn(r,"mediumTime"),l=Sn(r,"mediumDate");n=hs(rn(r,we.Medium),[o,l]);break;case"long":const f=Sn(r,"longTime"),g=Sn(r,"longDate");n=hs(rn(r,we.Long),[f,g]);break;case"full":const y=Sn(r,"fullTime"),T=Sn(r,"fullDate");n=hs(rn(r,we.Full),[y,T])}return n&&(si[t][e]=n),n}function hs(r,e){return e&&(r=r.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),r}function jr(r,e,t="-",n,i){let s="";(r<0||i&&r<=0)&&(i?r=1-r:(r=-r,s=t));let o=String(r);for(;o.length<e;)o="0"+o;return n&&(o=o.substr(o.length-e)),s+o}function ge(r,e,t=0,n=!1,i=!1){return function(s,o){let l=function xe(r,e){switch(r){case Wt.FullYear:return e.getFullYear();case Wt.Month:return e.getMonth();case Wt.Date:return e.getDate();case Wt.Hours:return e.getHours();case Wt.Minutes:return e.getMinutes();case Wt.Seconds:return e.getSeconds();case Wt.FractionalSeconds:return e.getMilliseconds();case Wt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${r}".`)}}(r,s);if((t>0||l>-t)&&(l+=t),r===Wt.Hours)0===l&&-12===t&&(l=12);else if(r===Wt.FractionalSeconds)return function Qr(r,e){return jr(r,3).substr(0,e)}(l,e);const f=Qt(o,X.MinusSign);return jr(l,e,f,n,i)}}function Ae(r,e,t=he.Format,n=!1){return function(i,s){return function dt(r,e,t,n,i,s){switch(t){case sn.Months:return function Fe(r,e,t){const n=(0,h.cg1)(r),s=qn([n[h.wAp.MonthsFormat],n[h.wAp.MonthsStandalone]],e);return qn(s,t)}(e,i,n)[r.getMonth()];case sn.Days:return function Re(r,e,t){const n=(0,h.cg1)(r),s=qn([n[h.wAp.DaysFormat],n[h.wAp.DaysStandalone]],e);return qn(s,t)}(e,i,n)[r.getDay()];case sn.DayPeriods:const o=r.getHours(),l=r.getMinutes();if(s){const g=function Er(r){const e=(0,h.cg1)(r);return On(e),(e[h.wAp.ExtraData][2]||[]).map(n=>"string"==typeof n?zn(n):[zn(n[0]),zn(n[1])])}(e),y=function Vt(r,e,t){const n=(0,h.cg1)(r);On(n);const s=qn([n[h.wAp.ExtraData][0],n[h.wAp.ExtraData][1]],e)||[];return qn(s,t)||[]}(e,i,n),T=g.findIndex(S=>{if(Array.isArray(S)){const[M,L]=S,H=o>=M.hours&&l>=M.minutes,$=o<L.hours||o===L.hours&&l<L.minutes;if(M.hours<L.hours){if(H&&$)return!0}else if(H||$)return!0}else if(S.hours===o&&S.minutes===l)return!0;return!1});if(-1!==T)return y[T]}return function He(r,e,t){const n=(0,h.cg1)(r),s=qn([n[h.wAp.DayPeriodsFormat],n[h.wAp.DayPeriodsStandalone]],e);return qn(s,t)}(e,i,n)[o<12?0:1];case sn.Eras:return function pt(r,e){return qn((0,h.cg1)(r)[h.wAp.Eras],e)}(e,n)[r.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,r,e,t,n)}}function Ce(r){return function(e,t,n){const i=-1*n,s=Qt(t,X.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(r){case Dn.Short:return(i>=0?"+":"")+jr(o,2,s)+jr(Math.abs(i%60),2,s);case Dn.ShortGMT:return"GMT"+(i>=0?"+":"")+jr(o,1,s);case Dn.Long:return"GMT"+(i>=0?"+":"")+jr(o,2,s)+":"+jr(Math.abs(i%60),2,s);case Dn.Extended:return 0===n?"Z":(i>=0?"+":"")+jr(o,2,s)+":"+jr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${r}"`)}}}function K(r){return Si(r.getFullYear(),r.getMonth(),r.getDate()+(4-r.getDay()))}function Q(r,e=!1){return function(t,n){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=K(t),o=function Gt(r){const e=Si(r,0,1).getDay();return Si(r,0,1+(e<=4?4:11)-e)}(s.getFullYear()),l=s.getTime()-o.getTime();i=1+Math.round(l/6048e5)}return jr(i,r,Qt(n,X.MinusSign))}}function Se(r,e=!1){return function(t,n){return jr(K(t).getFullYear(),r,Qt(n,X.MinusSign),e)}}const qe={};function fn(r,e){r=r.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+r)/6e4;return isNaN(t)?e:t}function Hn(r){return r instanceof Date&&!isNaN(r.valueOf())}const mr=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function uo(r){const e=parseInt(r);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+r);return e}let ns=(()=>{class r{constructor(t,n,i,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(n.item)}`);this._toggleClass(n.item,!0)}),t.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!0)):Object.keys(t).forEach(n=>this._toggleClass(n,!!t[n])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!1)):Object.keys(t).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(t,n){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{n?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},r.\u0275dir=h.lG2({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})();class da{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ir=(()=>{class r{constructor(t,n,i){this._viewContainer=t,this._template=n,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)n.createEmbeddedView(this._template,new da(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const l=n.get(s);n.move(l,o),Ua(l,i)}});for(let i=0,s=n.length;i<s;i++){const l=n.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ua(n.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,n){return!0}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},r.\u0275dir=h.lG2({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();function Ua(r,e){r.context.$implicit=e.item}let cr=(()=>{class r{constructor(t,n){this._viewContainer=t,this._context=new Xn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.s_b),h.Y36(h.Rgc))},r.\u0275dir=h.lG2({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class Xn{constructor(){this.$implicit=null,this.ngIf=null}}function zl(r,e){if(e&&!e.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function xi(r,e){return new h.vHH(2100,"")}class fa{createSubscription(e,t){return e.subscribe({next:t,error:n=>{throw n}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class wh{createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}onDestroy(e){}}const Gm=new wh,No=new fa;let Sh=(()=>{class r{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,n=>this._updateLatestValue(t,n))}_selectStrategy(t){if((0,h.QGY)(t))return Gm;if((0,h.F4k)(t))return No;throw xi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,n){t===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.sBO,16))},r.\u0275pipe=h.Yjl({name:"async",type:r,pure:!1}),r})();const xh=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Jc=(()=>{class r{constructor(t,n){this.locale=t,this.defaultTimezone=n}transform(t,n="mediumDate",i,s){var o;if(null==t||""===t||t!=t)return null;try{return Yr(t,n,s||this.locale,null!==(o=null!=i?i:this.defaultTimezone)&&void 0!==o?o:void 0)}catch(l){throw xi()}}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.soG,16),h.Y36(xh,24))},r.\u0275pipe=h.Yjl({name:"date",type:r,pure:!0}),r})(),pi=(()=>{class r{constructor(t){this._locale=t}transform(t,n,i){if(!function fo(r){return!(null==r||""===r||r!=r)}(t))return null;i=i||this._locale;try{return function jt(r,e,t){return function Ro(r,e,t,n,i,s,o=!1){let l="",f=!1;if(isFinite(r)){let g=function ao(r){let n,i,s,o,l,e=Math.abs(r)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(l=e.length))n=[0],i=1;else{for(l--;"0"===e.charAt(l);)l--;for(i-=s,n=[],o=0;s<=l;s++,o++)n[o]=Number(e.charAt(s))}return i>22&&(n=n.splice(0,21),t=i-1,i=1),{digits:n,exponent:t,integerLen:i}}(r);o&&(g=function ts(r){if(0===r.digits[0])return r;const e=r.digits.length-r.integerLen;return r.exponent?r.exponent+=2:(0===e?r.digits.push(0,0):1===e&&r.digits.push(0),r.integerLen+=2),r}(g));let y=e.minInt,T=e.minFrac,S=e.maxFrac;if(s){const We=s.match(mr);if(null===We)throw new Error(`${s} is not a valid digit info`);const et=We[1],Me=We[3],je=We[5];null!=et&&(y=uo(et)),null!=Me&&(T=uo(Me)),null!=je?S=uo(je):null!=Me&&T>S&&(S=T)}!function Ur(r,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=r.digits,i=n.length-r.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+r.integerLen,l=n[o];if(o>0){n.splice(Math.max(r.integerLen,o));for(let T=o;T<n.length;T++)n[T]=0}else{i=Math.max(0,i),r.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let T=1;T<o;T++)n[T]=0}if(l>=5)if(o-1<0){for(let T=0;T>o;T--)n.unshift(0),r.integerLen++;n.unshift(1),r.integerLen++}else n[o-1]++;for(;i<Math.max(0,s);i++)n.push(0);let f=0!==s;const g=e+r.integerLen,y=n.reduceRight(function(T,S,M,L){return L[M]=(S+=T)<10?S:S-10,f&&(0===L[M]&&M>=g?L.pop():f=!1),S>=10?1:0},0);y&&(n.unshift(y),r.integerLen++)}(g,T,S);let M=g.digits,L=g.integerLen;const H=g.exponent;let $=[];for(f=M.every(We=>!We);L<y;L++)M.unshift(0);for(;L<0;L++)M.unshift(0);L>0?$=M.splice(L,M.length):($=M,M=[0]);const De=[];for(M.length>=e.lgSize&&De.unshift(M.splice(-e.lgSize,M.length).join(""));M.length>e.gSize;)De.unshift(M.splice(-e.gSize,M.length).join(""));M.length&&De.unshift(M.join("")),l=De.join(Qt(t,n)),$.length&&(l+=Qt(t,i)+$.join("")),H&&(l+=Qt(t,X.Exponential)+"+"+H)}else l=Qt(t,X.Infinity);return l=r<0&&!f?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf,l}(r,function Wn(r,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=r.split(";"),i=n[0],s=n[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],l=o[0],f=o[1]||"";t.posPre=l.substr(0,l.indexOf("#"));for(let y=0;y<f.length;y++){const T=f.charAt(y);"0"===T?t.minFrac=t.maxFrac=y+1:"#"===T?t.maxFrac=y+1:t.posSuf+=T}const g=l.split(",");if(t.gSize=g[1]?g[1].length:0,t.lgSize=g[2]||g[1]?(g[2]||g[1]).length:0,s){const y=i.length-t.posPre.length-t.posSuf.length,T=s.indexOf("#");t.negPre=s.substr(0,T).replace(/'/g,""),t.negSuf=s.substr(T+y).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Bn(r,e){return(0,h.cg1)(r)[h.wAp.NumberFormats][e]}(e,z.Percent),Qt(e,X.MinusSign)),e,X.Group,X.Decimal,t,!0).replace(new RegExp("%","g"),Qt(e,X.PercentSign))}(function Tu(r){if("string"==typeof r&&!isNaN(Number(r)-parseFloat(r)))return Number(r);if("number"!=typeof r)throw new Error(`${r} is not a number`);return r}(t),i,n)}catch(s){throw xi()}}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.soG,16))},r.\u0275pipe=h.Yjl({name:"percent",type:r,pure:!0}),r})();let ul=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({}),r})();function wu(r){return"server"===r}let td=(()=>{class r{}return r.\u0275prov=(0,h.Yz7)({token:r,providedIn:"root",factory:()=>new Su((0,h.LFG)(me),window)}),r})();class Su{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function po(r,e){const t=r.getElementById(e)||r.getElementsByName(e)[0];if(t)return t;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=nd(this.window.history)||nd(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function nd(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class Ha extends class ll extends class ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(r){ne||(ne=r)}(new Ha)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cl(){return Fn=Fn||document.querySelector("base"),Fn?Fn.getAttribute("href"):null}();return null==t?null:function ga(r){Zl=Zl||document.createElement("a"),Zl.setAttribute("href",r);const e=Zl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Fn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sl(r,e){e=encodeURIComponent(e);for(const t of r.split(";")){const n=t.indexOf("="),[i,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Zl,Fn=null;const gi=new h.OlP("TRANSITION_ID"),yr=[{provide:h.ip1,useFactory:function rd(r,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const n=V(),i=e.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<i.length;s++)n.remove(i[s])})}},deps:[gi,me,h.zs3],multi:!0}];class go{static init(){(0,h.VLi)(new go)}addToWindow(e){h.dqk.getAngularTestability=(n,i=!0)=>{const s=e.findTestabilityInTree(n,i);if(null==s)throw new Error("Could not find testability for element.");return s},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(n=>{const i=h.dqk.getAllAngularTestabilities();let s=i.length,o=!1;const l=function(f){o=o||f,s--,0==s&&n(o)};i.forEach(function(f){f.whenStable(l)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let mi=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();const Ga=new h.OlP("EventManagerPlugins");let Lo=(()=>{class r{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,i){return this._findPluginFor(n).addEventListener(t,n,i)}addGlobalEventListener(t,n,i){return this._findPluginFor(n).addGlobalEventListener(t,n,i)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(Ga),h.LFG(h.R0b))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();class dl{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let Us=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),n.add(i))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})(),mo=(()=>{class r extends Us{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(Cu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,i)=>{this._addStylesToHost(t,i,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Cu))}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(me))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();function Cu(r){V().remove(r)}const dn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ma=/%COMP%/g;function xu(r,e,t){for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?xu(r,i,t):(i=i.replace(ma,r),t.push(i))}return t}function mt(r){return e=>{if("__ngUnwrap__"===e)return r;!1===r(e)&&(e.preventDefault(),e.returnValue=!1)}}let Iu=(()=>{class r{constructor(t,n,i){this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new dr(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(n.id);return i||(i=new ps(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new ad(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const i=xu(n.id,n.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(Lo),h.LFG(mo),h.LFG(h.AFp))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();class dr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const s=dn[i];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=dn[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,n,i&h.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mt(n)):this.eventManager.addEventListener(e,t,mt(n))}}class ps extends dr{constructor(e,t,n,i){super(e),this.component=n;const s=xu(i+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr=function Ql(r){return"_ngcontent-%COMP%".replace(ma,r)}(i+"-"+n.id),this.hostAttr=function od(r){return"_nghost-%COMP%".replace(ma,r)}(i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class ad extends dr{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=xu(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const l=document.createElement("style");l.textContent=s[o],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ud=(()=>{class r extends dl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,i){return t.addEventListener(n,i,!1),()=>this.removeEventListener(t,n,i)}removeEventListener(t,n,i){return t.removeEventListener(n,i)}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(me))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();const ld=["alt","control","meta","shift"],zm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ii={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let gs=(()=>{class r extends dl{constructor(t){super(t)}supports(t){return null!=r.parseEventName(t)}addEventListener(t,n,i){const s=r.parseEventName(n),o=r.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const s=r._normalizeKey(n.pop());let o="";if(ld.forEach(f=>{const g=n.indexOf(f);g>-1&&(n.splice(g,1),o+=f+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static getEventFullKey(t){let n="",i=function Jl(r){let e=r.key;if(null==e){if(e=r.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===r.location&&Fo.hasOwnProperty(e)&&(e=Fo[e]))}return zm[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ld.forEach(s=>{s!=i&&Ii[s](t)&&(n+=s+".")}),n+=i,n}static eventCallback(t,n,i){return s=>{r.getEventFullKey(s)===t&&i.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(me))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();const tc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function va(){Ha.makeCurrent(),go.init()},multi:!0},{provide:me,useFactory:function cd(){return(0,h.RDi)(document),document},deps:[]}]),dd=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Bs(){return new h.qLn},deps:[]},{provide:Ga,useClass:ud,multi:!0,deps:[me,h.R0b,h.Lbi]},{provide:Ga,useClass:gs,multi:!0,deps:[me]},{provide:Iu,useClass:Iu,deps:[Lo,mo,h.AFp]},{provide:h.FYo,useExisting:Iu},{provide:Us,useExisting:mo},{provide:mo,useClass:mo,deps:[me]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Lo,useClass:Lo,deps:[Ga,h.R0b]},{provide:class Jn{},useClass:mi,deps:[]}];let fl=(()=>{class r{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:r,providers:[{provide:h.AFp,useValue:t.appId},{provide:gi,useExisting:h.AFp},yr]}}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(r,12))},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({providers:dd,imports:[ul,h.hGG]}),r})();"undefined"!=typeof window&&window;let Vh=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=h.Yz7({token:r,factory:function(t){let n=null;return n=t?new(t||r):h.LFG(gl),n},providedIn:"root"}),r})(),gl=(()=>{class r extends Vh{constructor(t){super(),this._doc=t}sanitize(t,n){if(null==n)return null;switch(t){case h.q3G.NONE:return n;case h.q3G.HTML:return(0,h.qzn)(n,"HTML")?(0,h.z3N)(n):(0,h.EiD)(this._doc,String(n)).toString();case h.q3G.STYLE:return(0,h.qzn)(n,"Style")?(0,h.z3N)(n):n;case h.q3G.SCRIPT:if((0,h.qzn)(n,"Script"))return(0,h.z3N)(n);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.yhl)(n),(0,h.qzn)(n,"URL")?(0,h.z3N)(n):(0,h.mCW)(String(n));case h.q3G.RESOURCE_URL:if((0,h.qzn)(n,"ResourceURL"))return(0,h.z3N)(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(me))},r.\u0275prov=h.Yz7({token:r,factory:function(t){let n=null;return n=t?new t:function vo(r){return new gl(r.get(me))}(h.LFG(h.zs3)),n},providedIn:"root"}),r})();var jn=B(8996),ml=B(3269);function Zt(...r){const e=(0,ml.yG)(r);return(0,jn.D)(r,e)}var Ui=B(7579);class ms extends Ui.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}var Ar=B(9751);const{isArray:vl}=Array,{getPrototypeOf:Hh,prototype:ku,keys:ya}=Object;function Dr(r){if(1===r.length){const e=r[0];if(vl(e))return{args:e,keys:null};if(function _a(r){return r&&"object"==typeof r&&Hh(r)===ku}(e)){const t=ya(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:r,keys:null}}var yo=B(4671),an=B(4004);const{isArray:Gh}=Array;function fd(r){return(0,an.U)(e=>function $h(r,e){return Gh(e)?r(...e):r(e)}(r,e))}function pd(r,e){return r.reduce((t,n,i)=>(t[n]=e[i],t),{})}var Jr=B(5403),ba=B(9672);function Za(...r){const e=(0,ml.yG)(r),t=(0,ml.jO)(r),{args:n,keys:i}=Dr(r);if(0===n.length)return(0,jn.D)([],e);const s=new Ar.y(function Ya(r,e,t=yo.y){return n=>{vi(e,()=>{const{length:i}=r,s=new Array(i);let o=i,l=i;for(let f=0;f<i;f++)vi(e,()=>{const g=(0,jn.D)(r[f],e);let y=!1;g.subscribe((0,Jr.x)(n,T=>{s[f]=T,y||(y=!0,l--),l||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,i?o=>pd(i,o):yo.y));return t?s.pipe(fd(t)):s}function vi(r,e,t){r?(0,ba.f)(t,r,e):e()}var Qa=B(576);function Xa(r,e){const t=(0,Qa.m)(r)?r:()=>r,n=i=>i.error(t());return new Ar.y(e?i=>e.schedule(n,0,i):n)}const Uo=(0,B(3888).d)(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});var Pu=B(8189);function Ja(...r){return function Ta(){return(0,Pu.J)(1)}()((0,jn.D)(r,(0,ml.yG)(r)))}var gd=B(8421);function yl(r){return new Ar.y(e=>{(0,gd.Xf)(r()).subscribe(e)})}var Bo=B(515),eu=B(727),ei=B(4482);function md(){return(0,ei.e)((r,e)=>{let t=null;r._refCount++;const n=(0,Jr.x)(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(t=null);const i=r._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});r.subscribe(n),n.closed||(t=r.connect())})}class Ea extends Ar.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ei.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new eu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Jr.x)(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=eu.w0.EMPTY)}return e}refCount(){return md()(this)}}function _r(r,e){return(0,ei.e)((t,n)=>{let i=null,s=0,o=!1;const l=()=>o&&!i&&n.complete();t.subscribe((0,Jr.x)(n,f=>{null==i||i.unsubscribe();let g=0;const y=s++;(0,gd.Xf)(r(f,y)).subscribe(i=(0,Jr.x)(n,T=>n.next(e?e(f,T,y,g++):T),()=>{i=null,l()}))},()=>{o=!0,l()}))})}var vs=B(5698);function tu(...r){const e=(0,ml.yG)(r);return(0,ei.e)((t,n)=>{(e?Ja(r,t,e):Ja(r,t)).subscribe(n)})}function Vo(r,e,t,n,i){return(s,o)=>{let l=t,f=e,g=0;s.subscribe((0,Jr.x)(o,y=>{const T=g++;f=l?r(f,y,T):(l=!0,y),n&&o.next(f)},i&&(()=>{l&&o.next(f),o.complete()})))}}function _o(r,e){return(0,ei.e)(Vo(r,e,arguments.length>=2,!0))}function ui(r,e){return(0,ei.e)((t,n)=>{let i=0;t.subscribe((0,Jr.x)(n,s=>r.call(e,s,i++)&&n.next(s)))})}function ys(r){return(0,ei.e)((e,t)=>{let s,n=null,i=!1;n=e.subscribe((0,Jr.x)(t,void 0,void 0,o=>{s=(0,gd.Xf)(r(o,ys(r)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,s.subscribe(t))})}var kr=B(5577);function Vs(r,e){return(0,Qa.m)(e)?(0,kr.z)(r,e,1):(0,kr.z)(r,1)}function ac(r){return r<=0?()=>Bo.E:(0,ei.e)((e,t)=>{let n=[];e.subscribe((0,Jr.x)(t,i=>{n.push(i),r<n.length&&n.shift()},()=>{for(const i of n)t.next(i);t.complete()},void 0,()=>{n=null}))})}function vd(r=wr){return(0,ei.e)((e,t)=>{let n=!1;e.subscribe((0,Jr.x)(t,i=>{n=!0,t.next(i)},()=>n?t.complete():t.error(r())))})}function wr(){return new Uo}function jp(r){return(0,ei.e)((e,t)=>{let n=!1;e.subscribe((0,Jr.x)(t,i=>{n=!0,t.next(i)},()=>{n||t.next(r),t.complete()}))})}function Ou(r,e){const t=arguments.length>=2;return n=>n.pipe(r?ui((i,s)=>r(i,s,n)):yo.y,(0,vs.q)(1),t?jp(e):vd(()=>new Uo))}var ss=B(8505);class wa{constructor(e,t){this.id=e,this.url=t}}class zh extends wa{constructor(e,t,n="imperative",i=null){super(e,t),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bo extends wa{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yd extends wa{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vr extends wa{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _l extends wa{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uc extends wa{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wh extends wa{constructor(e,t,n,i,s){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Up extends wa{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ai extends wa{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bi{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ru{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ho{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sa{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Go{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nu{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Cn="primary";class Kh{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lu(r){return new Kh(r)}const Di="ngNavigationCancelingError";function Tl(r){const e=Error("NavigationCancelingError: "+r);return e[Di]=!0,e}function Qm(r,e,t){const n=t.path.split("/");if(n.length>r.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<r.length))return null;const i={};for(let s=0;s<n.length;s++){const o=n[s],l=r[s];if(o.startsWith(":"))i[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function Hs(r,e){const t=r?Object.keys(r):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!lc(r[i],e[i]))return!1;return!0}function lc(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;const t=[...r].sort(),n=[...e].sort();return t.every((i,s)=>n[s]===i)}return r===e}function Zh(r){return Array.prototype.concat.apply([],r)}function To(r){return r.length>0?r[r.length-1]:null}function rr(r,e){for(const t in r)r.hasOwnProperty(t)&&e(r[t],t)}function yi(r){return(0,h.CqO)(r)?r:(0,h.QGY)(r)?(0,jn.D)(Promise.resolve(r)):Zt(r)}const Bp={exact:function P(r,e,t){if(!en(r.segments,e.segments)||!Ue(r.segments,e.segments,t)||r.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!r.children[n]||!P(r.children[n],e.children[n],t))return!1;return!0},subset:W},Ca={exact:function El(r,e){return Hs(r,e)},subset:function O(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(t=>lc(r[t],e[t]))},ignored:()=>!0};function ju(r,e,t){return Bp[t.paths](r.root,e.root,t.matrixParams)&&Ca[t.queryParams](r.queryParams,e.queryParams)&&!("exact"===t.fragment&&r.fragment!==e.fragment)}function W(r,e,t){return le(r,e,e.segments,t)}function le(r,e,t,n){if(r.segments.length>t.length){const i=r.segments.slice(0,t.length);return!(!en(i,t)||e.hasChildren()||!Ue(i,t,n))}if(r.segments.length===t.length){if(!en(r.segments,t)||!Ue(r.segments,t,n))return!1;for(const i in e.children)if(!r.children[i]||!W(r.children[i],e.children[i],n))return!1;return!0}{const i=t.slice(0,r.segments.length),s=t.slice(r.segments.length);return!!(en(r.segments,i)&&Ue(r.segments,i,n)&&r.children[Cn])&&le(r.children[Cn],e,s,n)}}function Ue(r,e,t){return e.every((n,i)=>Ca[t](r[i].parameters,n.parameters))}class Ke{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lu(this.queryParams)),this._queryParamMap}toString(){return li.serialize(this)}}class at{constructor(e,t){this.segments=e,this.children=t,this.parent=null,rr(t,(n,i)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qo(this)}}class Ht{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lu(this.parameters)),this._parameterMap}toString(){return Td(this)}}function en(r,e){return r.length===e.length&&r.every((t,n)=>t.path===e[n].path)}class pn{}class Hr{parse(e){const t=new Xm(e);return new Ke(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Eo(e.root,!0)}`,n=function Vp(r){const e=Object.keys(r).map(t=>{const n=r[t];return Array.isArray(n)?n.map(i=>`${ki(t)}=${ki(i)}`).join("&"):`${ki(t)}=${ki(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function zo(r){return encodeURI(r)}(e.fragment)}`:""}`}}const li=new Hr;function qo(r){return r.segments.map(e=>Td(e)).join("/")}function Eo(r,e){if(!r.hasChildren())return qo(r);if(e){const t=r.children[Cn]?Eo(r.children[Cn],!1):"",n=[];return rr(r.children,(i,s)=>{s!==Cn&&n.push(`${s}:${Eo(i,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function Rn(r,e){let t=[];return rr(r.children,(n,i)=>{i===Cn&&(t=t.concat(e(n,i)))}),rr(r.children,(n,i)=>{i!==Cn&&(t=t.concat(e(n,i)))}),t}(r,(n,i)=>i===Cn?[Eo(r.children[Cn],!1)]:[`${i}:${Eo(n,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[Cn]?`${qo(r)}/${t[0]}`:`${qo(r)}/(${t.join("//")})`}}function Gs(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ki(r){return Gs(r).replace(/%3B/gi,";")}function xa(r){return Gs(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bd(r){return decodeURIComponent(r)}function Qh(r){return bd(r.replace(/\+/g,"%20"))}function Td(r){return`${xa(r.path)}${function Xh(r){return Object.keys(r).map(e=>`;${xa(e)}=${xa(r[e])}`).join("")}(r.parameters)}`}const Hp=/^[^\/()?;=#]+/;function Jh(r){const e=r.match(Hp);return e?e[0]:""}const cc=/^[^=?&#]+/,Gp=/^[^&#]+/;class Xm{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new at([],{}):new at([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Cn]=new at(e,t)),n}parseSegment(){const e=Jh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ht(bd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Jh(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const i=Jh(this.remaining);i&&(n=i,this.capture(n))}e[bd(t)]=bd(n)}parseQueryParam(e){const t=function Ed(r){const e=r.match(cc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function bw(r){const e=r.match(Gp);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const i=Qh(t),s=Qh(n);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Jh(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Cn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Cn]:new at([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class $p{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Jm(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=Jm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=dc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dc(e,this._root).map(t=>t.value)}}function Jm(r,e){if(r===e.value)return e;for(const t of e.children){const n=Jm(r,t);if(n)return n}return null}function dc(r,e){if(r===e.value)return[e];for(const t of e.children){const n=dc(r,t);if(n.length)return n.unshift(e),n}return[]}class nu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function hc(r){const e={};return r&&r.children.forEach(t=>e[t.value.outlet]=t),e}class wd extends $p{constructor(e,t){super(e),this.snapshot=t,nf(this,e)}toString(){return this.snapshot.toString()}}function ef(r,e){const t=function fc(r,e){const o=new iu([],{},{},"",{},Cn,e,null,r.root,-1,{});return new tf("",new nu(o,[]))}(r,e),n=new ms([new Ht("",{})]),i=new ms({}),s=new ms({}),o=new ms({}),l=new ms(""),f=new ru(n,i,o,l,s,Cn,e,t.root);return f.snapshot=t.root,new wd(new nu(f,[]),t)}class ru{constructor(e,t,n,i,s,o,l,f){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=s,this.outlet=o,this.component=l,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,an.U)(e=>Lu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,an.U)(e=>Lu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ev(r,e="emptyOnly"){const t=r.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const i=t[n],s=t[n-1];if(i.routeConfig&&""===i.routeConfig.path)n--;else{if(s.component)break;n--}}return function Tw(r){return r.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(n))}class iu{constructor(e,t,n,i,s,o,l,f,g,y,T){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=s,this.outlet=o,this.component=l,this.routeConfig=f,this._urlSegment=g,this._lastPathIndex=y,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class tf extends $p{constructor(e,t){super(t),this.url=e,nf(this,t)}toString(){return qp(this._root)}}function nf(r,e){e.value._routerState=r,e.children.forEach(t=>nf(r,t))}function qp(r){const e=r.children.length>0?` { ${r.children.map(qp).join(", ")} } `:"";return`${r.value}${e}`}function rf(r){if(r.snapshot){const e=r.snapshot,t=r._futureSnapshot;r.snapshot=t,Hs(e.queryParams,t.queryParams)||r.queryParams.next(t.queryParams),e.fragment!==t.fragment&&r.fragment.next(t.fragment),Hs(e.params,t.params)||r.params.next(t.params),function $o(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(!Hs(r[t],e[t]))return!1;return!0}(e.url,t.url)||r.url.next(t.url),Hs(e.data,t.data)||r.data.next(t.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function su(r,e){const t=Hs(r.params,e.params)&&function Yt(r,e){return en(r,e)&&r.every((t,n)=>Hs(t.parameters,e[n].parameters))}(r.url,e.url);return t&&!(!r.parent!=!e.parent)&&(!r.parent||su(r.parent,e.parent))}function Sd(r,e,t){if(t&&r.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const i=function W_(r,e,t){return e.children.map(n=>{for(const i of t.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return Sd(r,n,i);return Sd(r,n)})}(r,e,t);return new nu(n,i)}{if(r.shouldAttach(e.value)){const s=r.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(l=>Sd(r,l)),o}}const n=function K_(r){return new ru(new ms(r.url),new ms(r.params),new ms(r.queryParams),new ms(r.fragment),new ms(r.data),r.outlet,r.component,r)}(e.value),i=e.children.map(s=>Sd(r,s));return new nu(n,i)}}function _s(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function Ia(r){return"object"==typeof r&&null!=r&&r.outlets}function pc(r,e,t,n,i){let s={};if(n&&rr(n,(l,f)=>{s[f]=Array.isArray(l)?l.map(g=>`${g}`):`${l}`}),r===e)return new Ke(t,s,i);const o=nv(r,e,t);return new Ke(o,s,i)}function nv(r,e,t){const n={};return rr(r.children,(i,s)=>{n[s]=i===e?t:nv(i,e,t)}),new at(r.segments,n)}class zp{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&_s(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(Ia);if(i&&i!==To(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cd{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function iv(r,e,t){if(r||(r=new at([],{})),0===r.segments.length&&r.hasChildren())return sf(r,e,t);const n=function X_(r,e,t){let n=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=t.length)return s;const o=r.segments[i],l=t[n];if(Ia(l))break;const f=`${l}`,g=n<t.length-1?t[n+1]:null;if(i>0&&void 0===f)break;if(f&&g&&"object"==typeof g&&void 0===g.outlets){if(!Kp(f,g,o))return s;n+=2}else{if(!Kp(f,{},o))return s;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}(r,e,t),i=t.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){const s=new at(r.segments.slice(0,n.pathIndex),{});return s.children[Cn]=new at(r.segments.slice(n.pathIndex),r.children),sf(s,0,i)}return n.match&&0===i.length?new at(r.segments,{}):n.match&&!r.hasChildren()?J_(r,e,t):n.match?sf(r,0,i):J_(r,e,t)}function sf(r,e,t){if(0===t.length)return new at(r.segments,{});{const n=function rv(r){return Ia(r[0])?r[0].outlets:{[Cn]:r}}(t),i={};return rr(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=iv(r.children[o],e,s))}),rr(r.children,(s,o)=>{void 0===n[o]&&(i[o]=s)}),new at(r.segments,i)}}function J_(r,e,t){const n=r.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Ia(s)){const f=wl(s.outlets);return new at(n,f)}if(0===i&&_s(t[0])){n.push(new Ht(r.segments[e].path,gc(t[0]))),i++;continue}const o=Ia(s)?s.outlets[Cn]:`${s}`,l=i<t.length-1?t[i+1]:null;o&&l&&_s(l)?(n.push(new Ht(o,gc(l))),i+=2):(n.push(new Ht(o,{})),i++)}return new at(n,{})}function wl(r){const e={};return rr(r,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=J_(new at([],{}),0,t))}),e}function gc(r){const e={};return rr(r,(t,n)=>e[n]=`${t}`),e}function Kp(r,e,t){return r==t.path&&Hs(e,t.parameters)}class xd{constructor(e,t,n,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),rf(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const i=hc(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],n),delete i[o]}),rr(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,s=hc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(n&&n.outlet){const o=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,s=hc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const i=hc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],n),this.forwardEvent(new Go(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ho(e.value.snapshot))}activateRoutes(e,t,n){const i=e.value,s=t?t.value:null;if(rf(i),i===s)if(i.component){const o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(i.component){const o=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),rf(l.route.value),this.activateChildRoutes(e,null,o.children)}else{const l=function af(r){for(let e=r.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),f=l?l.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=f,o.outlet&&o.outlet.activateWith(i,f),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class uf{constructor(e,t){this.routes=e,this.module=t}}function ou(r){return"function"==typeof r}function mc(r){return r instanceof Ke}const lf=Symbol("INITIAL_VALUE");function cf(){return _r(r=>Za(r.map(e=>e.pipe((0,vs.q)(1),tu(lf)))).pipe(_o((e,t)=>{let n=!1;return t.reduce((i,s,o)=>i!==lf?i:(s===lf&&(n=!0),n||!1!==s&&o!==t.length-1&&!mc(s)?i:s),e)},lf),ui(e=>e!==lf),(0,an.U)(e=>mc(e)?e:!0===e),(0,vs.q)(1)))}class ov{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new vc,this.attachRef=null}}class vc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new ov,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ad=(()=>{class r{constructor(t,n,i,s,o){this.parentContexts=t,this.location=n,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=s||Cn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(n=n||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),l=this.parentContexts.getOrCreateContext(this.name).children,f=new e0(t,l,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,f),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(vc),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},r.\u0275dir=h.lG2({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),r})();class e0{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===ru?this.route:e===vc?this.childContexts:this.parent.get(e,t)}}let av=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,n){1&t&&h._UZ(0,"router-outlet")},directives:[Ad],encapsulation:2}),r})();function Dd(r,e=""){for(let t=0;t<r.length;t++){const n=r[t];yc(n,uv(e,n))}}function yc(r,e){r.children&&Dd(r.children,e)}function uv(r,e){return e?r||e.path?r&&!e.path?`${r}/`:!r&&e.path?e.path:`${r}/${e.path}`:"":r}function kd(r){const e=r.children&&r.children.map(kd),t=e?Object.assign(Object.assign({},r),{children:e}):Object.assign({},r);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Cn&&(t.component=av),t}function os(r){return r.outlet||Cn}function Mr(r,e){const t=r.filter(n=>os(n)===e);return t.push(...r.filter(n=>os(n)!==e)),t}const lv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function df(r,e,t){var n;if(""===e.path)return"full"===e.pathMatch&&(r.hasChildren()||t.length>0)?Object.assign({},lv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Qm)(t,r,e);if(!s)return Object.assign({},lv);const o={};rr(s.posParams,(f,g)=>{o[g]=f.path});const l=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:null!==(n=s.posParams)&&void 0!==n?n:{}}}function Sl(r,e,t,n,i="corrected"){if(t.length>0&&function n0(r,e,t){return t.some(n=>Uu(r,e,n)&&os(n)!==Cn)}(r,t,n)){const o=new at(e,function t0(r,e,t,n){const i={};i[Cn]=n,n._sourceSegment=r,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&os(s)!==Cn){const o=new at([],{});o._sourceSegment=r,o._segmentIndexShift=e.length,i[os(s)]=o}return i}(r,e,n,new at(t,r.children)));return o._sourceSegment=r,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function r0(r,e,t){return t.some(n=>Uu(r,e,n))}(r,t,n)){const o=new at(r.segments,function cv(r,e,t,n,i,s){const o={};for(const l of n)if(Uu(r,t,l)&&!i[os(l)]){const f=new at([],{});f._sourceSegment=r,f._segmentIndexShift="legacy"===s?r.segments.length:e.length,o[os(l)]=f}return Object.assign(Object.assign({},i),o)}(r,e,t,n,r.children,i));return o._sourceSegment=r,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new at(r.segments,r.children);return s._sourceSegment=r,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Uu(r,e,t){return(!(r.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function dv(r,e,t,n){return!!(os(r)===n||n!==Cn&&Uu(e,t,r))&&("**"===r.path||df(e,r,t).matched)}function hv(r,e,t){return 0===e.length&&!r.children[t]}class Qp{constructor(e){this.segmentGroup=e||null}}class _c{constructor(e){this.urlTree=e}}function ci(r){return Xa(new Qp(r))}function hf(r){return Xa(new _c(r))}class bc{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Sl(this.urlTree.root,[],[],this.config).segmentGroup,t=new at(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Cn).pipe((0,an.U)(s=>this.createUrlTree(Md(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ys(s=>{if(s instanceof _c)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Qp?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Cn).pipe((0,an.U)(i=>this.createUrlTree(Md(i),e.queryParams,e.fragment))).pipe(ys(i=>{throw i instanceof Qp?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const i=e.segments.length>0?new at([],{[Cn]:e}):e;return new Ke(i,t,n)}expandSegmentGroup(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,an.U)(s=>new at([],s))):this.expandSegment(e,n,t,n.segments,i,!0)}expandChildren(e,t,n){const i=[];for(const s of Object.keys(n.children))"primary"===s?i.unshift(s):i.push(s);return(0,jn.D)(i).pipe(Vs(s=>{const o=n.children[s],l=Mr(t,s);return this.expandSegmentGroup(e,l,o,s).pipe((0,an.U)(f=>({segment:f,outlet:s})))}),_o((s,o)=>(s[o.outlet]=o.segment,s),{}),function z_(r,e){const t=arguments.length>=2;return n=>n.pipe(r?ui((i,s)=>r(i,s,n)):yo.y,ac(1),t?jp(e):vd(()=>new Uo))}())}expandSegment(e,t,n,i,s,o){return(0,jn.D)(n).pipe(Vs(l=>this.expandSegmentAgainstRoute(e,t,n,l,i,s,o).pipe(ys(g=>{if(g instanceof Qp)return Zt(null);throw g}))),Ou(l=>!!l),ys((l,f)=>{if(l instanceof Uo||"EmptyError"===l.name)return hv(t,i,s)?Zt(new at([],{})):ci(t);throw l}))}expandSegmentAgainstRoute(e,t,n,i,s,o,l){return dv(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o):ci(t):ci(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,i){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?hf(s):this.lineralizeSegments(n,s).pipe((0,kr.z)(o=>{const l=new at(o,{});return this.expandSegment(e,l,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o){const{matched:l,consumedSegments:f,remainingSegments:g,positionalParamSegments:y}=df(t,i,s);if(!l)return ci(t);const T=this.applyRedirectCommands(f,i.redirectTo,y);return i.redirectTo.startsWith("/")?hf(T):this.lineralizeSegments(i,T).pipe((0,kr.z)(S=>this.expandSegment(e,t,n,S.concat(g),o,!1)))}matchSegmentAgainstRoute(e,t,n,i,s){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Zt(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,an.U)(T=>(n._loadedConfig=T,new at(i,{})))):Zt(new at(i,{}));const{matched:o,consumedSegments:l,remainingSegments:f}=df(t,n,i);return o?this.getChildConfig(e,n,i).pipe((0,kr.z)(y=>{const T=y.module,S=y.routes,{segmentGroup:M,slicedSegments:L}=Sl(t,l,f,S),H=new at(M.segments,M.children);if(0===L.length&&H.hasChildren())return this.expandChildren(T,S,H).pipe((0,an.U)(et=>new at(l,et)));if(0===S.length&&0===L.length)return Zt(new at(l,{}));const $=os(n)===s;return this.expandSegment(T,H,S,L,$?Cn:s,!0).pipe((0,an.U)(We=>new at(l.concat(We.segments),We.children)))})):ci(t)}getChildConfig(e,t,n){return t.children?Zt(new uf(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Zt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,kr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,an.U)(s=>(t._loadedConfig=s,s))):function ff(r){return Xa(Tl(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`))}(t))):Zt(new uf([],e))}runCanLoadGuards(e,t,n){const i=t.canLoad;return i&&0!==i.length?Zt(i.map(o=>{const l=e.get(o);let f;if(function Ew(r){return r&&ou(r.canLoad)}(l))f=l.canLoad(t,n);else{if(!ou(l))throw new Error("Invalid CanLoad guard");f=l(t,n)}return yi(f)})).pipe(cf(),(0,ss.b)(o=>{if(!mc(o))return;const l=Tl(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw l.url=o,l}),(0,an.U)(o=>!0===o)):Zt(!0)}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Zt(n);if(i.numberOfChildren>1||!i.children[Cn])return Xa(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Cn]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,i){const s=this.createSegmentGroup(e,t.root,n,i);return new Ke(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return rr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);n[s]=t[l]}else n[s]=i}),n}createSegmentGroup(e,t,n,i){const s=this.createSegments(e,t.segments,n,i);let o={};return rr(t.children,(l,f)=>{o[f]=this.createSegmentGroup(e,l,n,i)}),new at(s,o)}createSegments(e,t,n,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,n))}findPosParam(e,t,n){const i=n[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let n=0;for(const i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}}function Md(r){const e={};for(const n of Object.keys(r.children)){const s=Md(r.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function Jp(r){if(1===r.numberOfChildren&&r.children[Cn]){const e=r.children[Cn];return new at(r.segments.concat(e.segments),e.children)}return r}(new at(r.segments,e))}class as{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bu{constructor(e,t){this.component=e,this.route=t}}function eg(r,e,t){const n=r._root;return Pd(n,e?e._root:null,t,[n.value])}function Cl(r,e,t){const n=function tg(r){if(!r)return null;for(let e=r.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(n?n.module.injector:t).get(r)}function Pd(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=hc(e);return r.children.forEach(o=>{(function pf(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=r.value,o=e?e.value:null,l=t?t.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const f=function a0(r,e,t){if("function"==typeof t)return t(r,e);switch(t){case"pathParamsChange":return!en(r.url,e.url);case"pathParamsOrQueryParamsChange":return!en(r.url,e.url)||!Hs(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!su(r,e)||!Hs(r.queryParams,e.queryParams);default:return!su(r,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new as(n)):(s.data=o.data,s._resolvedData=o._resolvedData),Pd(r,e,s.component?l?l.children:null:t,n,i),f&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Bu(l.outlet.component,o))}else o&&So(e,l,i),i.canActivateChecks.push(new as(n)),Pd(r,null,s.component?l?l.children:null:t,n,i)})(o,s[o.value.outlet],t,n.concat([o.value]),i),delete s[o.value.outlet]}),rr(s,(o,l)=>So(o,t.getContext(l),i)),i}function So(r,e,t){const n=hc(r),i=r.value;rr(n,(s,o)=>{So(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Bu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class c0{}function Wo(r){return new Ar.y(e=>e.error(r))}class pv{constructor(e,t,n,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Sl(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Cn);if(null===t)return null;const n=new iu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Cn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new nu(n,t),s=new tf(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,n=ev(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const s of Object.keys(t.children)){const o=t.children[s],l=Mr(e,s),f=this.processSegmentGroup(l,o,s);if(null===f)return null;n.push(...f)}const i=mv(n);return function gv(r){r.sort((e,t)=>e.value.outlet===Cn?-1:t.value.outlet===Cn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,n,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,n,i);if(null!==o)return o}return hv(t,n,i)?[]:null}processSegmentAgainstRoute(e,t,n,i){if(e.redirectTo||!dv(e,t,n,i))return null;let s,o=[],l=[];if("**"===e.path){const M=n.length>0?To(n).parameters:{};s=new iu(n,M,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,b(e),os(e),e.component,e,vv(t),xl(t)+n.length,m(e))}else{const M=df(t,e,n);if(!M.matched)return null;o=M.consumedSegments,l=M.remainingSegments,s=new iu(o,M.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,b(e),os(e),e.component,e,vv(t),xl(t)+o.length,m(e))}const f=function d0(r){return r.children?r.children:r.loadChildren?r._loadedConfig.routes:[]}(e),{segmentGroup:g,slicedSegments:y}=Sl(t,o,l,f.filter(M=>void 0===M.redirectTo),this.relativeLinkResolution);if(0===y.length&&g.hasChildren()){const M=this.processChildren(f,g);return null===M?null:[new nu(s,M)]}if(0===f.length&&0===y.length)return[new nu(s,[])];const T=os(e)===i,S=this.processSegment(f,g,y,T?Cn:i);return null===S?null:[new nu(s,S)]}}function ig(r){const e=r.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function mv(r){const e=[],t=new Set;for(const n of r){if(!ig(n)){e.push(n);continue}const i=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...n.children),t.add(i)):e.push(n)}for(const n of t){const i=mv(n.children);e.push(new nu(n.value,i))}return e.filter(n=>!t.has(n))}function vv(r){let e=r;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xl(r){let e=r,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function b(r){return r.data||{}}function m(r){return r.resolve||{}}function ke(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function xt(r){return _r(e=>{const t=r(e);return t?(0,jn.D)(t).pipe((0,an.U)(()=>e)):Zt(e)})}class tn extends class on{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Pr=new h.OlP("ROUTES");class Ts{constructor(e,t,n,i){this.injector=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,an.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new uf(Zh(o.injector.get(Pr,void 0,h.XFs.Self|h.XFs.Optional)).map(kd),o)}),ys(s=>{throw t._loader$=void 0,s}));return t._loader$=new Ea(i,()=>new Ui.x).pipe(md()),t._loader$}loadModuleFactory(e){return yi(e()).pipe((0,kr.z)(t=>t instanceof h.YKP?Zt(t):(0,jn.D)(this.compiler.compileModuleAsync(t))))}}class sg{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function yv(r){throw r}function Il(r,e,t){return e.parse("/")}function Rd(r,e){return Zt(null)}const vf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_v={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Or=(()=>{class r{constructor(t,n,i,s,o,l,f){this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=i,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ui.x,this.errorHandler=yv,this.malformedUriErrorHandler=Il,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Rd,afterPreactivation:Rd},this.urlHandlingStrategy=new sg,this.routeReuseStrategy=new tn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(h.h0i),this.console=o.get(h.c2e);const T=o.get(h.R0b);this.isNgZoneEnabled=T instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function _d(){return new Ke(new at([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ts(o,l,S=>this.triggerEvent(new Bi(S)),S=>this.triggerEvent(new bl(S))),this.routerState=ef(this.currentUrlTree,this.rootComponentType),this.transitions=new ms({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const n=this.events;return t.pipe(ui(i=>0!==i.id),(0,an.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),_r(i=>{let s=!1,o=!1;return Zt(i).pipe((0,ss.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.currentRawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_r(l=>{const f=this.browserUrlTree.toString(),g=!this.navigated||l.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ag(l.source)&&(this.browserUrlTree=l.extractedUrl),Zt(l).pipe(_r(T=>{const S=this.transitions.getValue();return n.next(new zh(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),S!==this.transitions.getValue()?Bo.E:Promise.resolve(T)}),function s0(r,e,t,n){return _r(i=>function _i(r,e,t,n,i){return new bc(r,e,t,n,i).apply()}(r,e,t,i.extractedUrl,n).pipe((0,an.U)(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ss.b)(T=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:T.urlAfterRedirects})}),function _(r,e,t,n,i){return(0,kr.z)(s=>function Od(r,e,t,n,i="emptyOnly",s="legacy"){try{const o=new pv(r,e,t,n,i,s).recognize();return null===o?Wo(new c0):Zt(o)}catch(o){return Wo(o)}}(r,e,s.urlAfterRedirects,t(s.urlAfterRedirects),n,i).pipe((0,an.U)(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ss.b)(T=>{if("eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const M=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(M,T)}this.browserUrlTree=T.urlAfterRedirects}const S=new _l(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);n.next(S)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:M,source:L,restoredState:H,extras:$}=l,De=new zh(S,this.serializeUrl(M),L,H);n.next(De);const We=ef(M,this.rootComponentType).snapshot;return Zt(Object.assign(Object.assign({},l),{targetSnapshot:We,urlAfterRedirects:M,extras:Object.assign(Object.assign({},$),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=l.rawUrl,l.resolve(null),Bo.E}),xt(l=>{const{targetSnapshot:f,id:g,extractedUrl:y,rawUrl:T,extras:{skipLocationChange:S,replaceUrl:M}}=l;return this.hooks.beforePreactivation(f,{navigationId:g,appliedUrlTree:y,rawUrlTree:T,skipLocationChange:!!S,replaceUrl:!!M})}),(0,ss.b)(l=>{const f=new uc(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(f)}),(0,an.U)(l=>Object.assign(Object.assign({},l),{guards:eg(l.targetSnapshot,l.currentSnapshot,this.rootContexts)})),function gf(r,e){return(0,kr.z)(t=>{const{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Zt(Object.assign(Object.assign({},t),{guardsResult:!0})):function u0(r,e,t,n){return(0,jn.D)(r).pipe((0,kr.z)(i=>function rg(r,e,t,n,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Zt(s.map(l=>{const f=Cl(l,e,i);let g;if(function Yp(r){return r&&ou(r.canDeactivate)}(f))g=yi(f.canDeactivate(r,e,t,n));else{if(!ou(f))throw new Error("Invalid CanDeactivate guard");g=yi(f(r,e,t,n))}return g.pipe(Ou())})).pipe(cf()):Zt(!0)}(i.component,i.route,t,e,n)),Ou(i=>!0!==i,!0))}(o,n,i,r).pipe((0,kr.z)(l=>l&&function sv(r){return"boolean"==typeof r}(l)?function l0(r,e,t,n){return(0,jn.D)(e).pipe(Vs(i=>Ja(function fv(r,e){return null!==r&&e&&e(new Ru(r)),Zt(!0)}(i.route.parent,n),function mf(r,e){return null!==r&&e&&e(new Sa(r)),Zt(!0)}(i.route,n),function ng(r,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function o0(r){const e=r.routeConfig?r.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:r,guards:e}:null}(o)).filter(o=>null!==o).map(o=>yl(()=>Zt(o.guards.map(f=>{const g=Cl(f,o.node,t);let y;if(function Zp(r){return r&&ou(r.canActivateChild)}(g))y=yi(g.canActivateChild(n,r));else{if(!ou(g))throw new Error("Invalid CanActivateChild guard");y=yi(g(n,r))}return y.pipe(Ou())})).pipe(cf())));return Zt(s).pipe(cf())}(r,i.path,t),function bs(r,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return Zt(!0);const i=n.map(s=>yl(()=>{const o=Cl(s,e,t);let l;if(function Id(r){return r&&ou(r.canActivate)}(o))l=yi(o.canActivate(e,r));else{if(!ou(o))throw new Error("Invalid CanActivate guard");l=yi(o(e,r))}return l.pipe(Ou())}));return Zt(i).pipe(cf())}(r,i.route,t))),Ou(i=>!0!==i,!0))}(n,s,r,e):Zt(l)),(0,an.U)(l=>Object.assign(Object.assign({},t),{guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),(0,ss.b)(l=>{if(mc(l.guardsResult)){const g=Tl(`Redirecting to "${this.serializeUrl(l.guardsResult)}"`);throw g.url=l.guardsResult,g}const f=new Wh(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(f)}),ui(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,""),!1)),xt(l=>{if(l.guards.canActivateChecks.length)return Zt(l).pipe((0,ss.b)(f=>{const g=new Up(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(g)}),_r(f=>{let g=!1;return Zt(f).pipe(function C(r,e){return(0,kr.z)(t=>{const{targetSnapshot:n,guards:{canActivateChecks:i}}=t;if(!i.length)return Zt(t);let s=0;return(0,jn.D)(i).pipe(Vs(o=>function j(r,e,t,n){return function Z(r,e,t,n){const i=ke(r);if(0===i.length)return Zt({});const s={};return(0,jn.D)(i).pipe((0,kr.z)(o=>function it(r,e,t,n){const i=Cl(r,e,n);return yi(i.resolve?i.resolve(e,t):i(e,t))}(r[o],e,t,n).pipe((0,ss.b)(l=>{s[o]=l}))),ac(1),(0,kr.z)(()=>ke(s).length===i.length?Zt(s):Bo.E))}(r._resolve,r,e,n).pipe((0,an.U)(s=>(r._resolvedData=s,r.data=Object.assign(Object.assign({},r.data),ev(r,t).resolve),null)))}(o.route,n,r,e)),(0,ss.b)(()=>s++),ac(1),(0,kr.z)(o=>s===i.length?Zt(t):Bo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ss.b)({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(f),this.cancelNavigationTransition(f,"At least one route resolver didn't emit any value."))}}))}),(0,ss.b)(f=>{const g=new Ai(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(g)}))}),xt(l=>{const{targetSnapshot:f,id:g,extractedUrl:y,rawUrl:T,extras:{skipLocationChange:S,replaceUrl:M}}=l;return this.hooks.afterPreactivation(f,{navigationId:g,appliedUrlTree:y,rawUrlTree:T,skipLocationChange:!!S,replaceUrl:!!M})}),(0,an.U)(l=>{const f=function tv(r,e,t){const n=Sd(r,e._root,t?t._root:void 0);return new wd(n,e)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return Object.assign(Object.assign({},l),{targetRouterState:f})}),(0,ss.b)(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((r,e,t)=>(0,an.U)(n=>(new xd(e,n.targetRouterState,n.currentRouterState,t).activate(r),n)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),(0,ss.b)({next(){s=!0},complete(){s=!0}}),function qh(r){return(0,ei.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}(()=>{var l;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(l=this.currentNavigation)||void 0===l?void 0:l.id)===i.id&&(this.currentNavigation=null)}),ys(l=>{if(o=!0,function Fu(r){return r&&r[Di]}(l)){const f=mc(l.url);f||(this.navigated=!0,this.restoreHistory(i,!0));const g=new yd(i.id,this.serializeUrl(i.extractedUrl),l.message);n.next(g),f?setTimeout(()=>{const y=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ag(i.source)};this.scheduleNavigation(y,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new Vr(i.id,this.serializeUrl(i.extractedUrl),l);n.next(f);try{i.resolve(this.errorHandler(l))}catch(g){i.reject(g)}}return Bo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const f=Object.assign({},o);delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,n,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Dd(t),this.config=t.map(kd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:f}=n,g=i||this.routerState.root,y=f?this.currentUrlTree.fragment:o;let T=null;switch(l){case"merge":T=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),function Z_(r,e,t,n,i){if(0===t.length)return pc(e.root,e.root,e.root,n,i);const s=function Y_(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new zp(!0,0,r);let e=0,t=!1;const n=r.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return rr(s.outlets,(f,g)=>{l[g]="string"==typeof f?f.split("/"):f}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((l,f)=>{0==f&&"."===l||(0==f&&""===l?t=!0:".."===l?e++:""!=l&&i.push(l))}),i):[...i,s]},[]);return new zp(t,e,n)}(t);if(s.toRoot())return pc(e.root,e.root,new at([],{}),n,i);const o=function Q_(r,e,t){if(r.isAbsolute)return new Cd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Cd(s,s===e.root,0)}const n=_s(r.commands[0])?0:1;return function Wp(r,e,t){let n=r,i=e,s=t;for(;s>i;){if(s-=i,n=n.parent,!n)throw new Error("Invalid number of '../'");i=n.segments.length}return new Cd(n,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+n,r.numberOfDoubleDots)}(s,e,r),l=o.processChildren?sf(o.segmentGroup,o.index,s.commands):iv(o.segmentGroup,o.index,s.commands);return pc(e.root,o.segmentGroup,l,n,i)}(g,this.currentUrlTree,t,T,null!=y?y:null)}navigateByUrl(t,n={skipLocationChange:!1}){const i=mc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(t,n={skipLocationChange:!1}){return function og(r){for(let e=0;e<r.length;e++){const t=r[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(i){n=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return n}isActive(t,n){let i;if(i=!0===n?Object.assign({},vf):!1===n?Object.assign({},_v):n,mc(t))return ju(this.currentUrlTree,t,i);const s=this.parseUrl(t);return ju(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((n,i)=>{const s=t[i];return null!=s&&(n[i]=s),n},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new bo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,n,i,s,o){var l,f;if(this.disposed)return Promise.resolve(!1);let g,y,T;o?(g=o.resolve,y=o.reject,T=o.promise):T=new Promise((L,H)=>{g=L,y=H});const S=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),M=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(f=this.browserPageId)&&void 0!==f?f:0)+1):M=0,this.setTransition({id:S,targetPageId:M,source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:g,reject:y,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(L=>Promise.reject(L))}setBrowserUrl(t,n){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,n=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,n){const i=new yd(t.id,this.serializeUrl(t.extractedUrl),n);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return r.\u0275fac=function(t){h.$Z()},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();function ag(r){return"imperative"!==r}let ug=(()=>{class r{constructor(t,n,i,s,o){this.router=t,this.route=n,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new Ui.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const n=this.renderer,i=this.el.nativeElement;null!==t?n.setAttribute(i,"tabindex",t):n.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Ec(this.skipLocationChange),replaceUrl:Ec(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ec(this.preserveFragment)})}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(Or),h.Y36(ru),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},r.\u0275dir=h.lG2({type:r,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,n){1&t&&h.NdJ("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),r})(),Vu=(()=>{class r{constructor(t,n,i){this.router=t,this.route=n,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ui.x,this.subscription=t.events.subscribe(s=>{s instanceof bo&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,n,i,s,o){if(0!==t||n||i||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const l={skipLocationChange:Ec(this.skipLocationChange),replaceUrl:Ec(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ec(this.preserveFragment)})}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(Or),h.Y36(ru),h.Y36(Ee))},r.\u0275dir=h.lG2({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,n){1&t&&h.NdJ("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&h.uIk("target",n.target)("href",n.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),r})();function Ec(r){return""===r||!!r}let Sw=(()=>{class r{constructor(t,n,i,s,o,l){this.router=t,this.element=n,this.renderer=i,this.cdr=s,this.link=o,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof bo&&this.update()})}ngAfterContentInit(){Zt(this.links.changes,this.linksWithHrefs.changes,Zt(null)).pipe((0,Pu.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const n=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,jn.D)(n).pipe((0,Pu.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const n=Array.isArray(t)?t:t.split(" ");this.classes=n.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(n=>{t?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),this.isActiveChange.emit(t))})}isLinkActive(t){const n=function Cw(r){return!!r.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,n)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(Or),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(ug,8),h.Y36(Vu,8))},r.\u0275dir=h.lG2({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(t,n,i){if(1&t&&(h.Suo(i,ug,5),h.Suo(i,Vu,5)),2&t){let s;h.iGM(s=h.CRH())&&(n.links=s),h.iGM(s=h.CRH())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[h.TTD]}),r})();class bv{}class Tv{preload(e,t){return Zt(null)}}let Iw=(()=>{class r{constructor(t,n,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new Ts(i,n,f=>t.triggerEvent(new Bi(f)),f=>t.triggerEvent(new bl(f)))}setUpPreloading(){this.subscription=this.router.events.pipe(ui(t=>t instanceof bo),Vs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const i=[];for(const s of n)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,jn.D)(i).pipe((0,Pu.J)(),(0,an.U)(s=>{}))}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?Zt(n._loadedConfig):this.loader.load(t.injector,n)).pipe((0,kr.z)(s=>(n._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(Or),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(bv))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})(),h0=(()=>{class r{constructor(t,n,i={}){this.router=t,this.viewportScroller=n,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.router.triggerEvent(new Nu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(t){h.$Z()},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();const wc=new h.OlP("ROUTER_CONFIGURATION"),Sc=new h.OlP("ROUTER_FORROOT_GUARD"),Aw=[Pe,{provide:pn,useClass:Hr},{provide:Or,useFactory:function Mw(r,e,t,n,i,s,o={},l,f){const g=new Or(null,r,e,t,n,i,Zh(s));return l&&(g.urlHandlingStrategy=l),f&&(g.routeReuseStrategy=f),function p0(r,e){r.errorHandler&&(e.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(e.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(e.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(e.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(e.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(e.canceledNavigationResolution=r.canceledNavigationResolution)}(o,g),o.enableTracing&&g.events.subscribe(y=>{var T,S;null===(T=console.group)||void 0===T||T.call(console,`Router Event: ${y.constructor.name}`),console.log(y.toString()),console.log(y),null===(S=console.groupEnd)||void 0===S||S.call(console)}),g},deps:[pn,vc,Pe,h.zs3,h.Sil,Pr,wc,[class Tc{},new h.FiY],[class $t{},new h.FiY]]},vc,{provide:ru,useFactory:function Pw(r){return r.routerState.root},deps:[Or]},Iw,Tv,class xw{preload(e,t){return t().pipe(ys(()=>Zt(null)))}},{provide:wc,useValue:{enableTracing:!1}}];function Dw(){return new h.PXZ("Router",Or)}let Ev=(()=>{class r{constructor(t,n){}static forRoot(t,n){return{ngModule:r,providers:[Aw,f0(t),{provide:Sc,useFactory:kw,deps:[[Or,new h.FiY,new h.tp0]]},{provide:wc,useValue:n||{}},{provide:Ee,useFactory:eD,deps:[fe,[new h.tBr(Xe),new h.FiY],wc]},{provide:h0,useFactory:wv,deps:[Or,td,wc]},{provide:bv,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Tv},{provide:h.PXZ,multi:!0,useFactory:Dw},[yf,{provide:h.ip1,multi:!0,useFactory:Sv,deps:[yf]},{provide:Cv,useFactory:Ow,deps:[yf]},{provide:h.tb,multi:!0,useExisting:Cv}]]}}static forChild(t){return{ngModule:r,providers:[f0(t)]}}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(Sc,8),h.LFG(Or,8))},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({}),r})();function wv(r,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new h0(r,e,t)}function eD(r,e,t={}){return t.useHash?new Qe(r,e):new lt(r,e)}function kw(r){return"guarded"}function f0(r){return[{provide:h.deG,multi:!0,useValue:r},{provide:Pr,multi:!0,useValue:r}]}let yf=(()=>{class r{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ui.x}appInitializer(){return this.injector.get(J,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const i=new Promise(l=>n=l),s=this.injector.get(Or),o=this.injector.get(wc);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),n(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Zt(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),s.initialNavigation()):n(!0),i})}bootstrapListener(t){const n=this.injector.get(wc),i=this.injector.get(Iw),s=this.injector.get(h0),o=this.injector.get(Or),l=this.injector.get(h.z2F);t===l.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(l.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(h.zs3))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();function Sv(r){return r.appInitializer.bind(r)}function Ow(r){return r.bootstrapListener.bind(r)}const Cv=new h.OlP("Router Initializer");let lg=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-about"]],decls:2,vars:0,template:function(t,n){1&t&&(h.TgZ(0,"p"),h._uU(1,"about works!"),h.qZA())},styles:[""]}),r})();var tD=B(9226),pe=B.n(tD),nD=B(1421),Dt=B.n(nD);function Aa(){return Aa=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Aa.apply(this,arguments)}var g0=B(1234),bn=B.n(g0);function Tn(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _f(r,e){return(_f=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(r,e)}function Mt(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,_f(r,e)}var Lw=B(8099),rD=B.n(Lw),iD=B(745),Da=B.n(iD),sD=B(3629),m0=B.n(sD);function oD(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function xv(r,e,t){return(xv=oD()?Reflect.construct:function(i,s,o){var l=[null];l.push.apply(l,s);var g=new(Function.bind.apply(i,l));return o&&_f(g,o.prototype),g}).apply(null,arguments)}var uD=B(3871),v0=B.n(uD),Fw="http://example.com";const Iv=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=pe().location&&pe().location.href||"");var n="function"==typeof pe().URL,i=/^\/\//.test(e),s=!pe().location&&!/\/\//i.test(e);if(n?e=new(pe().URL)(e,pe().location||Fw):/\/\//i.test(e)||(e=v0().buildAbsoluteURL(pe().location&&pe().location.href||"",e)),n){var o=new URL(t,e);return s?o.href.slice(Fw.length):i?o.href.slice(o.protocol.length):o.href}return v0().buildAbsoluteURL(e,t)};var _n=function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var s=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(s,1),s>-1},e.trigger=function(n){var i=this.listeners[n];if(i)if(2===arguments.length)for(var s=i.length,o=0;o<s;++o)i[o].call(this,arguments[1]);else for(var l=Array.prototype.slice.call(arguments,1),f=i.length,g=0;g<f;++g)i[g].apply(this,l)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},r}();function y0(r){for(var e=function(e){return pe().atob?pe().atob(e):Buffer.from(e,"base64").toString("binary")}(r),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}var r,Hv,Uw=function(r){function e(){var n;return(n=r.call(this)||this).buffer="",n}return Mt(e,r),e.prototype.push=function(i){var s;for(this.buffer+=i,s=this.buffer.indexOf("\n");s>-1;s=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},e}(_n),Av=String.fromCharCode(9),Ko=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},au=function(e){for(var s,t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=t.length;i--;)""!==t[i]&&((s=/([^=]*)=(.*)/.exec(t[i]).slice(1))[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),n[s[0]]=s[1]);return n},_0=function(r){function e(){var n;return(n=r.call(this)||this).customParsers=[],n.tagMappers=[],n}Mt(e,r);var t=e.prototype;return t.push=function(i){var o,l,s=this;if(0!==(i=i.trim()).length){if("#"!==i[0])return void this.trigger("data",{type:"uri",uri:i});this.tagMappers.reduce(function(g,y){var T=y(i);return T===i?g:g.concat([T])},[i]).forEach(function(g){for(var y=0;y<s.customParsers.length;y++)if(s.customParsers[y].call(s,g))return;if(0===g.indexOf("#EXT"))if(g=g.replace("\r",""),o=/^#EXTM3U/.exec(g))s.trigger("data",{type:"tag",tagType:"m3u"});else{if(o=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(g))return l={type:"tag",tagType:"inf"},o[1]&&(l.duration=parseFloat(o[1])),o[2]&&(l.title=o[2]),void s.trigger("data",l);if(o=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(g))return l={type:"tag",tagType:"targetduration"},o[1]&&(l.duration=parseInt(o[1],10)),void s.trigger("data",l);if(o=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(g))return l={type:"tag",tagType:"version"},o[1]&&(l.version=parseInt(o[1],10)),void s.trigger("data",l);if(o=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(g))return l={type:"tag",tagType:"media-sequence"},o[1]&&(l.number=parseInt(o[1],10)),void s.trigger("data",l);if(o=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(g))return l={type:"tag",tagType:"discontinuity-sequence"},o[1]&&(l.number=parseInt(o[1],10)),void s.trigger("data",l);if(o=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(g))return l={type:"tag",tagType:"playlist-type"},o[1]&&(l.playlistType=o[1]),void s.trigger("data",l);if(o=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(g))return l=Aa(Ko(o[1]),{type:"tag",tagType:"byterange"}),void s.trigger("data",l);if(o=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(g))return l={type:"tag",tagType:"allow-cache"},o[1]&&(l.allowed=!/NO/.test(o[1])),void s.trigger("data",l);if(o=/^#EXT-X-MAP:?(.*)$/.exec(g)){if(l={type:"tag",tagType:"map"},o[1]){var T=au(o[1]);T.URI&&(l.uri=T.URI),T.BYTERANGE&&(l.byterange=Ko(T.BYTERANGE))}s.trigger("data",l)}else if(o=/^#EXT-X-STREAM-INF:?(.*)$/.exec(g)){if(l={type:"tag",tagType:"stream-inf"},o[1]){if(l.attributes=au(o[1]),l.attributes.RESOLUTION){var S=l.attributes.RESOLUTION.split("x"),M={};S[0]&&(M.width=parseInt(S[0],10)),S[1]&&(M.height=parseInt(S[1],10)),l.attributes.RESOLUTION=M}l.attributes.BANDWIDTH&&(l.attributes.BANDWIDTH=parseInt(l.attributes.BANDWIDTH,10)),l.attributes["PROGRAM-ID"]&&(l.attributes["PROGRAM-ID"]=parseInt(l.attributes["PROGRAM-ID"],10))}s.trigger("data",l)}else{if(o=/^#EXT-X-MEDIA:?(.*)$/.exec(g))return l={type:"tag",tagType:"media"},o[1]&&(l.attributes=au(o[1])),void s.trigger("data",l);if(o=/^#EXT-X-ENDLIST/.exec(g))s.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(o=/^#EXT-X-DISCONTINUITY/.exec(g)))return(o=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(g))?(l={type:"tag",tagType:"program-date-time"},o[1]&&(l.dateTimeString=o[1],l.dateTimeObject=new Date(o[1])),void s.trigger("data",l)):(o=/^#EXT-X-KEY:?(.*)$/.exec(g))?(l={type:"tag",tagType:"key"},o[1]&&(l.attributes=au(o[1]),l.attributes.IV&&("0x"===l.attributes.IV.substring(0,2).toLowerCase()&&(l.attributes.IV=l.attributes.IV.substring(2)),l.attributes.IV=l.attributes.IV.match(/.{8}/g),l.attributes.IV[0]=parseInt(l.attributes.IV[0],16),l.attributes.IV[1]=parseInt(l.attributes.IV[1],16),l.attributes.IV[2]=parseInt(l.attributes.IV[2],16),l.attributes.IV[3]=parseInt(l.attributes.IV[3],16),l.attributes.IV=new Uint32Array(l.attributes.IV))),void s.trigger("data",l)):(o=/^#EXT-X-START:?(.*)$/.exec(g))?(l={type:"tag",tagType:"start"},o[1]&&(l.attributes=au(o[1]),l.attributes["TIME-OFFSET"]=parseFloat(l.attributes["TIME-OFFSET"]),l.attributes.PRECISE=/YES/.test(l.attributes.PRECISE)),void s.trigger("data",l)):(o=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(g))?((l={type:"tag",tagType:"cue-out-cont"}).data=o[1]?o[1]:"",void s.trigger("data",l)):(o=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(g))?((l={type:"tag",tagType:"cue-out"}).data=o[1]?o[1]:"",void s.trigger("data",l)):(o=/^#EXT-X-CUE-IN:?(.*)?$/.exec(g))?((l={type:"tag",tagType:"cue-in"}).data=o[1]?o[1]:"",void s.trigger("data",l)):(o=/^#EXT-X-SKIP:(.*)$/.exec(g))&&o[1]?((l={type:"tag",tagType:"skip"}).attributes=au(o[1]),l.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(l.attributes["SKIPPED-SEGMENTS"]=parseInt(l.attributes["SKIPPED-SEGMENTS"],10)),l.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(l.attributes["RECENTLY-REMOVED-DATERANGES"]=l.attributes["RECENTLY-REMOVED-DATERANGES"].split(Av)),void s.trigger("data",l)):(o=/^#EXT-X-PART:(.*)$/.exec(g))&&o[1]?((l={type:"tag",tagType:"part"}).attributes=au(o[1]),["DURATION"].forEach(function(L){l.attributes.hasOwnProperty(L)&&(l.attributes[L]=parseFloat(l.attributes[L]))}),["INDEPENDENT","GAP"].forEach(function(L){l.attributes.hasOwnProperty(L)&&(l.attributes[L]=/YES/.test(l.attributes[L]))}),l.attributes.hasOwnProperty("BYTERANGE")&&(l.attributes.byterange=Ko(l.attributes.BYTERANGE)),void s.trigger("data",l)):(o=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(g))&&o[1]?((l={type:"tag",tagType:"server-control"}).attributes=au(o[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(L){l.attributes.hasOwnProperty(L)&&(l.attributes[L]=parseFloat(l.attributes[L]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(L){l.attributes.hasOwnProperty(L)&&(l.attributes[L]=/YES/.test(l.attributes[L]))}),void s.trigger("data",l)):(o=/^#EXT-X-PART-INF:(.*)$/.exec(g))&&o[1]?((l={type:"tag",tagType:"part-inf"}).attributes=au(o[1]),["PART-TARGET"].forEach(function(L){l.attributes.hasOwnProperty(L)&&(l.attributes[L]=parseFloat(l.attributes[L]))}),void s.trigger("data",l)):(o=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(g))&&o[1]?((l={type:"tag",tagType:"preload-hint"}).attributes=au(o[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(L){if(l.attributes.hasOwnProperty(L)){l.attributes[L]=parseInt(l.attributes[L],10);var H="BYTERANGE-LENGTH"===L?"length":"offset";l.attributes.byterange=l.attributes.byterange||{},l.attributes.byterange[H]=l.attributes[L],delete l.attributes[L]}}),void s.trigger("data",l)):(o=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(g))&&o[1]?((l={type:"tag",tagType:"rendition-report"}).attributes=au(o[1]),["LAST-MSN","LAST-PART"].forEach(function(L){l.attributes.hasOwnProperty(L)&&(l.attributes[L]=parseInt(l.attributes[L],10))}),void s.trigger("data",l)):void s.trigger("data",{type:"tag",data:g.slice(4)});s.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else s.trigger("data",{type:"comment",text:g.slice(1)})})}},t.addParser=function(i){var s=this,o=i.expression,l=i.customType,f=i.dataParser,g=i.segment;"function"!=typeof f&&(f=function(T){return T}),this.customParsers.push(function(y){if(o.exec(y))return s.trigger("data",{type:"custom",data:f(y),customType:l,segment:g}),!0})},t.addTagMapper=function(i){var s=i.expression,o=i.map;this.tagMappers.push(function(g){return s.test(g)?o(g):g})},e}(_n),Cc=function(e){var t={};return Object.keys(e).forEach(function(n){t[function(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})}(n)]=e[n]}),t},Dv=function(e){var t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var s="#EXT-X-SERVER-CONTROL",o="holdBack",l="partHoldBack",f=n&&3*n,g=i&&2*i;n&&!t.hasOwnProperty(o)&&(t[o]=f,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+f+")."})),f&&t[o]<f&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+t[o]+") to targetDuration * 3 ("+f+")"}),t[o]=f),i&&!t.hasOwnProperty(l)&&(t[l]=3*i,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[l]+")."})),i&&t[l]<g&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+t[l]+") to partTargetDuration * 2 ("+g+")."}),t[l]=g)}},b0=function(r){function e(){var n;(n=r.call(this)||this).lineStream=new Uw,n.parseStream=new _0,n.lineStream.pipe(n.parseStream);var l,f,i=Tn(n),s=[],o={},g=!1,y=function(){},T={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},M=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var L=0,H=0;return n.on("end",function(){o.uri||!o.parts&&!o.preloadHints||(!o.map&&l&&(o.map=l),!o.key&&f&&(o.key=f),!o.timeline&&"number"==typeof M&&(o.timeline=M),n.manifest.preloadSegment=o)}),n.parseStream.on("data",function($){var De,We;({tag:function(){({version:function(){$.version&&(this.manifest.version=$.version)},"allow-cache":function(){this.manifest.allowCache=$.allowed,"allowed"in $||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var je={};"length"in $&&(o.byterange=je,je.length=$.length,"offset"in $||($.offset=L)),"offset"in $&&(o.byterange=je,je.offset=$.offset),L=je.offset+je.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),$.duration>0&&(o.duration=$.duration),0===$.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if($.attributes)if("NONE"!==$.attributes.METHOD)if($.attributes.URI){if("com.apple.streamingkeydelivery"===$.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:$.attributes});if("com.microsoft.playready"===$.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:$.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===$.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf($.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===$.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==$.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):$.attributes.KEYID&&"0x"===$.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:$.attributes.KEYFORMAT,keyId:$.attributes.KEYID.substring(2)},pssh:y0($.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));$.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),f={method:$.attributes.METHOD||"AES-128",uri:$.attributes.URI},void 0!==$.attributes.IV&&(f.iv=$.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else f=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite($.number)?this.manifest.mediaSequence=$.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+$.number})},"discontinuity-sequence":function(){isFinite($.number)?(this.manifest.discontinuitySequence=$.number,M=$.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+$.number})},"playlist-type":function(){/VOD|EVENT/.test($.playlistType)?this.manifest.playlistType=$.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+$.playlist})},map:function(){l={},$.uri&&(l.uri=$.uri),$.byterange&&(l.byterange=$.byterange),f&&(l.key=f)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||T,$.attributes?(o.attributes||(o.attributes={}),Aa(o.attributes,$.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||T,$.attributes&&$.attributes.TYPE&&$.attributes["GROUP-ID"]&&$.attributes.NAME){var je=this.manifest.mediaGroups[$.attributes.TYPE];je[$.attributes["GROUP-ID"]]=je[$.attributes["GROUP-ID"]]||{},De=je[$.attributes["GROUP-ID"]],(We={default:/yes/i.test($.attributes.DEFAULT)}).autoselect=!!We.default||/yes/i.test($.attributes.AUTOSELECT),$.attributes.LANGUAGE&&(We.language=$.attributes.LANGUAGE),$.attributes.URI&&(We.uri=$.attributes.URI),$.attributes["INSTREAM-ID"]&&(We.instreamId=$.attributes["INSTREAM-ID"]),$.attributes.CHARACTERISTICS&&(We.characteristics=$.attributes.CHARACTERISTICS),$.attributes.FORCED&&(We.forced=/yes/i.test($.attributes.FORCED)),De[$.attributes.NAME]=We}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){M+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=$.dateTimeString,this.manifest.dateTimeObject=$.dateTimeObject),o.dateTimeString=$.dateTimeString,o.dateTimeObject=$.dateTimeObject},targetduration:function(){!isFinite($.duration)||$.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+$.duration}):(this.manifest.targetDuration=$.duration,Dv.call(this,this.manifest))},start:function(){$.attributes&&!isNaN($.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:$.attributes["TIME-OFFSET"],precise:$.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=$.data},"cue-out-cont":function(){o.cueOutCont=$.data},"cue-in":function(){o.cueIn=$.data},skip:function(){this.manifest.skip=Cc($.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",$.attributes,["SKIPPED-SEGMENTS"])},part:function(){var je=this;g=!0;var ze=this.manifest.segments.length,Be=Cc($.attributes);o.parts=o.parts||[],o.parts.push(Be),Be.byterange&&(Be.byterange.hasOwnProperty("offset")||(Be.byterange.offset=H),H=Be.byterange.offset+Be.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(o.parts.length-1)+" for segment #"+ze,$.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(_t,ft){_t.hasOwnProperty("lastPart")||je.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+ft+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var je=this.manifest.serverControl=Cc($.attributes);je.hasOwnProperty("canBlockReload")||(je.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Dv.call(this,this.manifest),je.canSkipDateranges&&!je.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var je=this.manifest.segments.length,ze=Cc($.attributes),Be=ze.type&&"PART"===ze.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(ze),ze.byterange&&(ze.byterange.hasOwnProperty("offset")||(ze.byterange.offset=Be?H:0,Be&&(H=ze.byterange.offset+ze.byterange.length)));var tt=o.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+tt+" for segment #"+je,$.attributes,["TYPE","URI"]),ze.type)for(var _t=0;_t<o.preloadHints.length-1;_t++){var ft=o.preloadHints[_t];!ft.type||ft.type===ze.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+tt+" for segment #"+je+" has the same TYPE "+ze.type+" as preload hint #"+_t})}},"rendition-report":function(){var je=Cc($.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(je);var ze=this.manifest.renditionReports.length-1,Be=["LAST-MSN","URI"];g&&Be.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+ze,$.attributes,Be)},"part-inf":function(){this.manifest.partInf=Cc($.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",$.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Dv.call(this,this.manifest)}}[$.tagType]||y).call(i)},uri:function(){o.uri=$.uri,s.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),f&&(o.key=f),o.timeline=M,l&&(o.map=l),H=0,o={}},comment:function(){},custom:function(){$.segment?(o.custom=o.custom||{},o.custom[$.customType]=$.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[$.customType]=$.data)}})[$.type].call(i)}),n}Mt(e,r);var t=e.prototype;return t.warnOnMissingAttributes_=function(i,s,o){var l=[];o.forEach(function(f){s.hasOwnProperty(f)||l.push(f)}),l.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+l.join(", ")})},t.push=function(i){this.lineStream.push(i)},t.end=function(){this.lineStream.push("\n"),this.trigger("end")},t.addParser=function(i){this.parseStream.addParser(i)},t.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e}(_n),Nd={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Vw=["video","audio","text"],cD=["Video","Audio","Text"],bf=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,n,i){return"avc1."+("00"+Number(n).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})},ka=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach(function(i){var s;i=i.trim(),Vw.forEach(function(o){var l=Nd[o].exec(i.toLowerCase());if(l&&!(l.length<=1)){s=o;var f=i.substring(0,l[1].length),g=i.replace(f,"");n.push({type:f,details:g,mediaType:o})}}),s||n.push({type:i,details:"",mediaType:"unknown"})}),n},Gw=function(e){return void 0===e&&(e=""),Nd.audio.test(e.trim().toLowerCase())},cg=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(s){return bf(s.trim())}),n="video";1===t.length&&Gw(t[0])?n="audio":1===t.length&&function(e){return void 0===e&&(e=""),Nd.text.test(e.trim().toLowerCase())}(t[0])&&(n="application");var i="mp4";return t.every(function(s){return Nd.mp4.test(s)})?i="mp4":t.every(function(s){return Nd.webm.test(s)})?i="webm":t.every(function(s){return Nd.ogg.test(s)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},Mv=function(e){return void 0===e&&(e=""),pe().MediaSource&&pe().MediaSource.isTypeSupported&&pe().MediaSource.isTypeSupported(cg(e))||!1},Pv=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var n=0;n<cD.length;n++)if(Nd["muxer"+cD[n]].test(t))return!0;return!1})},hD="mp4a.40.2",QR=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,$w=/^application\/dash\+xml/i,E0=function(e){return QR.test(e)?"hls":$w.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},mD=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},un=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!function(e){return mD(e)}(e)&&!(e instanceof ArrayBuffer)&&(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Es=pe().BigInt||Number,qw=[Es("0x1"),Es("0x100"),Es("0x10000"),Es("0x1000000"),Es("0x100000000"),Es("0x10000000000"),Es("0x1000000000000"),Es("0x100000000000000"),Es("0x10000000000000000")],yD=(r=new Uint16Array([65484]),new Uint8Array(r.buffer,r.byteOffset,r.byteLength),function(e,t){var n=void 0===t?{}:t,i=n.signed,s=void 0!==i&&i,o=n.le,l=void 0!==o&&o;e=un(e);var f=l?"reduce":"reduceRight",y=(e[f]?e[f]:Array.prototype[f]).call(e,function(S,M,L){var H=l?L:Math.abs(L+1-e.length);return S+Es(M)*qw[H]},Es(0));if(s){var T=qw[e.length]/Es(2)-Es(1);(y=Es(y))>T&&(y-=T,y-=T,y-=Es(2))}return Number(y)}),C0=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},Rr=function(e,t,n){var i=void 0===n?{}:n,s=i.offset,o=void 0===s?0:s,l=i.mask,f=void 0===l?[]:l;return e=un(e),(t=un(t)).length&&e.length-o>=t.length&&(t.every?t.every:Array.prototype.every).call(t,function(y,T){return y===(f[T]?f[T]&e[o+T]:e[o+T])})},I0=B(978),A0=function(e){return!!e&&"object"==typeof e},$s=function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(i,s){return"object"!=typeof s||Object.keys(s).forEach(function(o){i[o]=Array.isArray(i[o])&&Array.isArray(s[o])?i[o].concat(s[o]):A0(i[o])&&A0(s[o])?r(i[o],s[o]):s[o]}),i},{})},Kw=function(e){return Object.keys(e).map(function(t){return e[t]})},Dl=function(e){return e.reduce(function(t,n){return t.concat(n)},[])},Ov=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},jd=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},Sf=function(e){var t=e.baseUrl,i=e.source,s=void 0===i?"":i,o=e.range,l=void 0===o?"":o,f=e.indexRange,g=void 0===f?"":f,y={uri:s,resolvedUri:Iv((void 0===t?"":t)||"",s)};if(l||g){var H,S=(l||g).split("-"),M=pe().BigInt?pe().BigInt(S[0]):parseInt(S[0],10),L=pe().BigInt?pe().BigInt(S[1]):parseInt(S[1],10);M<Number.MAX_SAFE_INTEGER&&"bigint"==typeof M&&(M=Number(M)),L<Number.MAX_SAFE_INTEGER&&"bigint"==typeof L&&(L=Number(L)),"bigint"==typeof(H="bigint"==typeof L||"bigint"==typeof M?pe().BigInt(L)-pe().BigInt(M)+pe().BigInt(1):L-M+1)&&H<Number.MAX_SAFE_INTEGER&&(H=Number(H)),y.byterange={length:H,offset:M}}return y},Rv=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},D0={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,s=e.sourceDuration,o=e.periodDuration,l=Rv(e.endNumber),f=t/i;return"number"==typeof l?{start:0,end:l}:"number"==typeof o?{start:0,end:o/f}:{start:0,end:s/f}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,l=e.duration,f=e.periodStart,g=void 0===f?0:f,y=e.minimumUpdatePeriod,T=void 0===y?0:y,S=e.timeShiftBufferDepth,M=void 0===S?1/0:S,L=Rv(e.endNumber),H=(t+n)/1e3,$=i+g,et=Math.ceil((H+T-$)*o/l),Me=Math.floor((H-$-M)*o/l),je=Math.floor((H-$)*o/l);return{start:Math.max(0,Me),end:"number"==typeof L?L:Math.min(et,je)}}},Cf=function(e){var t=e.type,n=e.duration,i=e.timescale,s=void 0===i?1:i,o=e.periodDuration,l=e.sourceDuration,f=D0[t](e),T=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(f.start,f.end).map(function(e){return function(t){var n=e.duration,i=e.timescale,l=e.startNumber;return{number:(void 0===l?1:l)+t,duration:n/(void 0===i?1:i),timeline:e.periodStart,time:t*n}}}(e));if("static"===t){var S=T.length-1;T[S].duration=("number"==typeof o?o:l)-n/s*S}return T},Qw=function(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,s=e.sourceDuration,o=e.indexRange,l=void 0===o?"":o,f=e.periodStart,g=e.presentationTime,y=e.number,T=void 0===y?0:y,S=e.duration;if(!t)throw new Error("NO_BASE_URL");var M=Sf({baseUrl:t,source:i.sourceURL,range:i.range}),L=Sf({baseUrl:t,source:t,indexRange:l});if(L.map=M,S){var H=Cf(e);H.length&&(L.duration=H[0].duration,L.timeline=H[0].timeline)}else s&&(L.duration=s,L.timeline=f);return L.presentationTime=g||f,L.number=T,[L]},Nv=function(e,t,n){var $,i=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,o=e.timeline||0,l=e.sidx.byterange,f=l.offset+l.length,g=t.timescale,y=t.references.filter(function(_t){return 1!==_t.referenceType}),T=[],S=e.endList?"static":"dynamic",M=e.sidx.timeline,L=M,H=e.mediaSequence||0;$="bigint"==typeof t.firstOffset?pe().BigInt(f)+t.firstOffset:f+t.firstOffset;for(var De=0;De<y.length;De++){var je,We=t.references[De],et=We.referencedSize,Me=We.subsegmentDuration;je="bigint"==typeof $?$+pe().BigInt(et)-pe().BigInt(1):$+et-1;var tt=Qw({baseUrl:n,timescale:g,timeline:o,periodStart:M,presentationTime:L,number:H,duration:Me,sourceDuration:s,indexRange:$+"-"+je,type:S})[0];i&&(tt.map=i),T.push(tt),$+="bigint"==typeof $?pe().BigInt(et):et,L+=Me/g,H++}return e.segments=T,e},tN=["AUDIO","SUBTITLES"],k0=function(e){return function(e,t){return Kw(e.reduce(function(n,i){return i.forEach(function(s){n[function(t){return t.timeline}(s)]=s}),n},{}))}(e).sort(function(t,n){return t.timeline>n.timeline?1:-1})},M0=function(e){var t=[];return function(e,t,n){t.forEach(function(i){for(var s in e.mediaGroups[i])for(var o in e.mediaGroups[i][s])n(e.mediaGroups[i][s][o])})}(e,tN,function(n,i,s,o){t=t.concat(n.playlists||[])}),t},Jw=function(e){var t=e.playlist;t.mediaSequence=e.mediaSequence,t.segments.forEach(function(i,s){i.number=t.mediaSequence+s})},Lv=function(e){return e&&e.uri+"-"+function(e){var t;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?pe().BigInt(e.offset)+pe().BigInt(e.length)-pe().BigInt(1):e.offset+e.length-1,e.offset+"-"+t}(e.byterange)},P0=function(e){return Kw(e.reduce(function(n,i){var o,s=i.attributes.id+(i.attributes.lang||"");n[s]?(i.segments&&(i.segments[0]&&(i.segments[0].discontinuity=!0),(o=n[s].segments).push.apply(o,i.segments)),i.attributes.contentProtection&&(n[s].attributes.contentProtection=i.attributes.contentProtection)):(n[s]=i,n[s].attributes.timelineStarts=[]);return n[s].attributes.timelineStarts.push({start:i.attributes.periodStart,timeline:i.attributes.periodStart}),n},{})).map(function(n){return n.discontinuityStarts=function(e,t){return e.reduce(function(n,i,s){return i.discontinuity&&n.push(s),n},[])}(n.segments||[]),n})},eS=function(e,t){var n=Lv(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&Nv(e,i,e.sidx.resolvedUri),e},nN=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=eS(e[n],t);return e},SD=function(e){var t,n=e.attributes,i=e.segments,s=e.sidx,o=e.discontinuityStarts,l={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:o,timelineStarts:n.timelineStarts,segments:i};return n.contentProtection&&(l.contentProtection=n.contentProtection),s&&(l.sidx=s),l},CD=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},xD=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},rS=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},R0=function(e){return e?Object.keys(e).reduce(function(t,n){return t.concat(e[n].playlists)},[]):[]},AD=function(e){var t,n=e.dashPlaylists,i=e.locations,s=e.sidxMapping,o=void 0===s?{}:s,l=e.previousManifest;if(!n.length)return{};var f=n[0].attributes,g=f.sourceDuration,y=f.type,T=f.suggestedPresentationDelay,S=f.minimumUpdatePeriod,M=P0(n.filter(CD)).map(SD),L=P0(n.filter(xD)),H=P0(n.filter(rS)),$=n.map(function(Be){return Be.attributes.captionServices}).filter(Boolean),De={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:g,playlists:nN(M,o)};S>=0&&(De.minimumUpdatePeriod=1e3*S),i&&(De.locations=i),"dynamic"===y&&(De.suggestedPresentationDelay=T);var et=L.length?function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1);var i,s=e.reduce(function(l,f){var g=f.attributes.role&&f.attributes.role.value||"",y=f.attributes.lang||"",T=f.attributes.label||"main";y&&!f.attributes.label&&(T=f.attributes.lang+(g?" ("+g+")":"")),l[T]||(l[T]={language:y,autoselect:!0,default:"main"===g,playlists:[],uri:""});var M=eS(function(e,t){var n,i=e.attributes,s=e.segments,o=e.sidx,l=e.mediaSequence,f=e.discontinuitySequence,g=e.discontinuityStarts,y={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:f,discontinuityStarts:g,timelineStarts:i.timelineStarts,mediaSequence:l,segments:s};return i.contentProtection&&(y.contentProtection=i.contentProtection),o&&(y.sidx=o),t&&(y.attributes.AUDIO="audio",y.attributes.SUBTITLES="subs"),y}(f,n),t);return l[T].playlists.push(M),void 0===i&&"main"===g&&((i=f).default=!0),l},{});return i||(s[Object.keys(s)[0]].default=!0),s}(L,o,0===De.playlists.length):null,Me=H.length?function(e,t){return void 0===t&&(t={}),e.reduce(function(n,i){var s=i.attributes.lang||"text";return n[s]||(n[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),n[s].playlists.push(eS(function(e){var t,n=e.attributes,i=e.segments,s=e.mediaSequence,o=e.discontinuityStarts,l=e.discontinuitySequence;void 0===i&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var f=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(f.CODECS=n.codecs),{attributes:f,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:o,discontinuitySequence:l,mediaSequence:s,segments:i}}(i),t)),n},{})}(H,o):null,je=M.concat(R0(et),R0(Me)),ze=je.map(function(Be){return Be.timelineStarts});return De.timelineStarts=k0(ze),function(e,t){e.forEach(function(n){n.mediaSequence=0,n.discontinuitySequence=jd(t,function(i){return i.timeline===n.timeline}),n.segments&&n.segments.forEach(function(i,s){i.number=s})})}(je,De.timelineStarts),et&&(De.mediaGroups.AUDIO.audio=et),Me&&(De.mediaGroups.SUBTITLES.subs=Me),$.length&&(De.mediaGroups["CLOSED-CAPTIONS"].cc=function(e){return e.reduce(function(t,n){return n&&n.forEach(function(i){var o=i.language;t[o]={autoselect:!1,default:!1,instreamId:i.channel,language:o},i.hasOwnProperty("aspectRatio")&&(t[o].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(t[o].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(t[o]["3D"]=i["3D"])}),t},{})}($)),l?function(e){var t=e.oldManifest,n=e.newManifest,i=t.playlists.concat(M0(t)),s=n.playlists.concat(M0(n));return n.timelineStarts=k0([t.timelineStarts,n.timelineStarts]),function(e){var t=e.oldPlaylists,i=e.timelineStarts;e.newPlaylists.forEach(function(s){s.discontinuitySequence=jd(i,function(y){return y.timeline===s.timeline});var o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,s.attributes.NAME);if(o&&!s.sidx){var l=s.segments[0],f=jd(o.segments,function(y){return Math.abs(y.presentationTime-l.presentationTime)<.016666666666666666});if(-1===f)return Jw({playlist:s,mediaSequence:o.mediaSequence+o.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),void((!o.segments.length&&s.timeline>o.timeline||o.segments.length&&s.timeline>o.segments[o.segments.length-1].timeline)&&s.discontinuitySequence--);o.segments[f].discontinuity&&!l.discontinuity&&(l.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),Jw({playlist:s,mediaSequence:o.segments[f].number})}})}({oldPlaylists:i,newPlaylists:s,timelineStarts:n.timelineStarts}),n}({oldManifest:l,newManifest:De}):De},DD=function(e,t,n){var l=e.timescale,g=e.periodStart,T=e.minimumUpdatePeriod;return Math.ceil((((e.NOW+e.clientOffset)/1e3+(void 0===T?0:T)-(e.availabilityStartTime+(void 0===g?0:g)))*(void 0===l?1:l)-t)/n)},N0=function(e,t){for(var n=e.type,i=e.minimumUpdatePeriod,s=void 0===i?0:i,o=e.media,l=void 0===o?"":o,f=e.sourceDuration,g=e.timescale,y=void 0===g?1:g,T=e.startNumber,S=void 0===T?1:T,M=e.periodStart,L=[],H=-1,$=0;$<t.length;$++){var De=t[$],We=De.d,et=De.r||0,Me=De.t||0;H<0&&(H=Me),Me&&Me>H&&(H=Me);var je=void 0;if(et<0){var ze=$+1;je=ze===t.length?"dynamic"===n&&s>0&&l.indexOf("$Number$")>0?DD(e,H,We):(f*y-H)/We:(t[ze].t-H)/We}else je=et+1;for(var Be=S+L.length+je,tt=S+L.length;tt<Be;)L.push({number:tt,duration:We/y,time:H,timeline:M}),H+=We,tt++}return L},iS=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,uu=function(e,t){return e.replace(iS,function(e){return function(t,n,i,s){if("$$"===t)return"$";if(void 0===e[n])return t;var o=""+e[n];return"RepresentationID"===n||(s=i?parseInt(s,10):1,o.length>=s)?o:""+new Array(s-o.length+1).join("0")+o}}(t))},MD=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,s=void 0===i?{sourceURL:"",range:""}:i,o=Sf({baseUrl:e.baseUrl,source:uu(s.sourceURL,n),range:s.range}),l=function(e,t){return e.duration||t?e.duration?Cf(e):N0(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return l.map(function(f){n.Number=f.number,n.Time=f.time;var g=uu(e.media||"",n),S=e.periodStart+(f.time-(e.presentationTimeOffset||0))/(e.timescale||1);return{uri:g,timeline:f.timeline,duration:f.duration,resolvedUri:Iv(e.baseUrl||"",g),map:o,number:f.number,presentationTime:S}})},iN=function(e,t){var n=e.duration,i=e.segmentUrls,s=void 0===i?[]:i,o=e.periodStart;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var f,l=s.map(function(y){return function(e,t){var n=e.baseUrl,i=e.initialization,s=void 0===i?{}:i,o=Sf({baseUrl:n,source:s.sourceURL,range:s.range}),l=Sf({baseUrl:n,source:t.media,range:t.mediaRange});return l.map=o,l}(e,y)});return n&&(f=Cf(e)),t&&(f=N0(e,t)),f.map(function(y,T){if(l[T]){var S=l[T],M=e.timescale||1,L=e.presentationTimeOffset||0;return S.timeline=y.timeline,S.duration=y.duration,S.number=y.number,S.presentationTime=o+(y.time-L)/M,S}}).filter(function(y){return y})},sS=function(e){var i,s,t=e.attributes,n=e.segmentInfo;n.template?(s=MD,i=$s(t,n.template)):n.base?(s=Qw,i=$s(t,n.base)):n.list&&(s=iN,i=$s(t,n.list));var o={attributes:t};if(!s)return o;var l=s(i,n.segmentTimeline);if(i.duration){var y=i.timescale;i.duration=i.duration/(void 0===y?1:y)}else i.duration=l.length?l.reduce(function(S,M){return Math.max(S,Math.ceil(M.duration))},0):0;return o.attributes=i,o.segments=l,n.base&&i.indexRange&&(o.sidx=l[0],o.segments=[]),o},di=function(e,t){return Ov(e.childNodes).filter(function(n){return n.tagName===t})},F0=function(e){return e.textContent.trim()},xc=function(e){var f=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!f)return 0;var g=f.slice(1),T=g[1],S=g[2],M=g[3],L=g[4],H=g[5];return 31536e3*parseFloat(g[0]||0)+2592e3*parseFloat(T||0)+86400*parseFloat(S||0)+3600*parseFloat(M||0)+60*parseFloat(L||0)+parseFloat(H||0)},oS={mediaPresentationDuration:function(e){return xc(e)},availabilityStartTime:function(e){return function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)}(e)/1e3},minimumUpdatePeriod:function(e){return xc(e)},suggestedPresentationDelay:function(e){return xc(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return xc(e)},start:function(e){return xc(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?xc(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Mi=function(e){return e&&e.attributes?Ov(e.attributes).reduce(function(t,n){return t[n.name]=(oS[n.name]||oS.DEFAULT)(n.value),t},{}):{}},j0={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Fv=function(e,t){return t.length?Dl(e.map(function(n){return t.map(function(i){return Iv(n,F0(i))})})):e},hg=function(e){var t=di(e,"SegmentTemplate")[0],n=di(e,"SegmentList")[0],i=n&&di(n,"SegmentURL").map(function(S){return $s({tag:"SegmentURL"},Mi(S))}),s=di(e,"SegmentBase")[0],o=n||t,l=o&&di(o,"SegmentTimeline")[0],f=n||s||t,g=f&&di(f,"Initialization")[0],y=t&&Mi(t);y&&g?y.initialization=g&&Mi(g):y&&y.initialization&&(y.initialization={sourceURL:y.initialization});var T={template:y,segmentTimeline:l&&di(l,"S").map(function(S){return Mi(S)}),list:n&&$s(Mi(n),{segmentUrls:i,initialization:Mi(g)}),base:s&&$s(Mi(s),{initialization:Mi(g)})};return Object.keys(T).forEach(function(S){T[S]||delete T[S]}),T},B0=function(e,t){return function(n,i){var s=Fv(t,di(n.node,"BaseURL")),o=$s(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(o.periodDuration=n.attributes.duration);var l=di(n.node,"AdaptationSet"),f=hg(n.node);return Dl(l.map(function(e,t,n){return function(i){var s=Mi(i),o=Fv(t,di(i,"BaseURL")),l=di(i,"Role")[0],f={role:Mi(l)},g=$s(e,s,f),y=di(i,"Accessibility")[0],T=function(e){return"urn:scte:dash:cc:cea-608:2015"===e.schemeIdUri?("string"!=typeof e.value?[]:e.value.split(";")).map(function(i){var s,o;if(o=i,/^CC\d=/.test(i)){var l=i.split("=");s=l[0],o=l[1]}else/^CC\d$/.test(i)&&(s=i);return{channel:s,language:o}}):"urn:scte:dash:cc:cea-708:2015"===e.schemeIdUri?("string"!=typeof e.value?[]:e.value.split(";")).map(function(i){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var o=i.split("="),f=o[1],g=void 0===f?"":f;s.channel=o[0],s.language=i,g.split(",").forEach(function(y){var T=y.split(":"),S=T[0],M=T[1];"lang"===S?s.language=M:"er"===S?s.easyReader=Number(M):"war"===S?s.aspectRatio=Number(M):"3D"===S&&(s["3D"]=Number(M))})}else s.language=i;return s.channel&&(s.channel="SERVICE"+s.channel),s}):void 0}(Mi(y));T&&(g=$s(g,{captionServices:T}));var S=di(i,"Label")[0];if(S&&S.childNodes.length){var M=S.childNodes[0].nodeValue.trim();g=$s(g,{label:M})}var L=function(e){return e.reduce(function(t,n){var i=Mi(n);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var s=j0[i.schemeIdUri];if(s){t[s]={attributes:i};var o=di(n,"cenc:pssh")[0];if(o){var l=F0(o);t[s].pssh=l&&y0(l)}}return t},{})}(di(i,"ContentProtection"));Object.keys(L).length&&(g=$s(g,{contentProtection:L}));var H=hg(i),$=di(i,"Representation"),De=$s(n,H);return Dl($.map(function(e,t,n){return function(i){var s=di(i,"BaseURL"),o=Fv(t,s),l=$s(e,Mi(i)),f=hg(i);return o.map(function(g){return{segmentInfo:$s(n,f),attributes:$s(l,{baseUrl:g})}})}}(g,o,De)))}}(o,s,f)))}},V0=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var n,i,t=new I0.DOMParser;try{i=(n=t.parseFromString(e,"application/xml"))&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(s){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i},kl=B(7459),jv=B.n(kl),FD=un([73,68,51]),Uv=function r(e,t){return void 0===t&&(t=0),(e=un(e)).length-t<10||!Rr(e,FD,{offset:t})?t:(t+=function(e,t){void 0===t&&(t=0);var i=(e=un(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10}(e,t),r(e,t))},Vv=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?C0(e):e}),H0=function(e){e=un(e);for(var t=[],n=0;e.length>n;){var i=e[n],s=0,o=0,l=e[++o];for(o++;128&l;)s=(127&l)<<7,l=e[o],o++;s+=127&l;for(var f=0;f<Hv.length;f++){var g=Hv[f];if(i===g.id){t.push((0,g.parser)(e.subarray(o,o+s)));break}}n+=s+o}return t};Hv=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,un(e));try{return decodeURIComponent(escape(t))}catch(n){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=H0(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:H0(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var ws=function r(e,t,n){void 0===n&&(n=!1),t=function(e){return Array.isArray(e)?e.map(function(t){return Vv(t)}):[Vv(e)]}(t),e=un(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var o=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,l=e.subarray(s+4,s+8);if(0===o)break;var f=s+o;if(f>e.length){if(n)break;f=e.length}var g=e.subarray(s+8,f);Rr(l,t[0])&&(1===t.length?i.push(g):i.push.apply(i,r(g,t.slice(1),n))),s=f}return i},Sr={EBML:un([26,69,223,163]),DocType:un([66,130]),Segment:un([24,83,128,103]),SegmentInfo:un([21,73,169,102]),Tracks:un([22,84,174,107]),Track:un([174]),TrackNumber:un([215]),DefaultDuration:un([35,227,131]),TrackEntry:un([174]),TrackType:un([131]),FlagDefault:un([136]),CodecID:un([134]),CodecPrivate:un([99,162]),VideoTrack:un([224]),AudioTrack:un([225]),Cluster:un([31,67,182,117]),Timestamp:un([231]),TimestampScale:un([42,215,177]),BlockGroup:un([160]),BlockDuration:un([155]),Block:un([161]),SimpleBlock:un([163])},Ic=[128,64,32,16,8,4,2,1],Ud=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var s=function(e){for(var t=1,n=0;n<Ic.length&&!(e&Ic[n]);n++)t++;return t}(e[t]),o=e.subarray(t,t+s);return n&&((o=Array.prototype.slice.call(e,t,t+s))[0]^=Ic[s-1]),{length:s,value:yD(o,{signed:i}),bytes:o}},mS=function r(e){return"string"==typeof e?e.match(/.{1,2}/g).map(function(t){return r(t)}):"number"==typeof e?function(e,t){var i=(void 0===t?{}:t).le,s=void 0!==i&&i;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var o=function(e){return Math.ceil(function(e){return e.toString(2).length}(e)/8)}(e=Es(e)),l=new Uint8Array(new ArrayBuffer(o)),f=0;f<o;f++){var g=s?f:Math.abs(f+1-l.length);l[g]=Number(e/qw[f]&Es(255)),e<0&&(l[g]=Math.abs(~l[g]),l[g]-=0===f?1:2)}return l}(e):e},Hu=function r(e,t,n){if(n>=t.length)return t.length;var i=Ud(t,n,!1);if(Rr(e.bytes,i.bytes))return n;var s=Ud(t,n+i.length);return r(e,t,n+s.length+s.value+i.length)},Cr=function r(e,t){t=function(e){return Array.isArray(e)?e.map(function(t){return mS(t)}):[mS(e)]}(t),e=un(e);var n=[];if(!t.length)return n;for(var i=0;i<e.length;){var s=Ud(e,i,!1),o=Ud(e,i+s.length),l=i+s.length+o.length;127===o.value&&(o.value=Hu(s,e,l),o.value!==e.length&&(o.value-=l));var g=e.subarray(l,l+o.value>e.length?e.length:l+o.value);Rr(t[0],s.bytes)&&(1===t.length?n.push(g):n=n.concat(r(g,t.slice(1)))),i+=s.length+o.length+g.length}return n},$D=un([0,0,0,1]),qD=un([0,0,1]),zD=un([0,0,3]),WD=function(e){for(var t=[],n=1;n<e.length-2;)Rr(e.subarray(n,n+3),zD)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,s=new Uint8Array(i),o=0;for(n=0;n<i;o++,n++)o===t[0]&&(o++,t.shift()),s[n]=e[o];return s},G0=function(e,t,n,i){void 0===i&&(i=1/0),e=un(e),n=[].concat(n);for(var o,s=0,l=0;s<e.length&&(l<i||o);){var f=void 0;if(Rr(e.subarray(s),$D)?f=4:Rr(e.subarray(s),qD)&&(f=3),f){if(l++,o)return WD(e.subarray(o,s));var g=void 0;"h264"===t?g=31&e[s+f]:"h265"===t&&(g=e[s+f]>>1&63),-1!==n.indexOf(g)&&(o=s+f),s+=f+("h264"===t?1:2)}else s++}return e.subarray(0,0)},qs={webm:un([119,101,98,109]),matroska:un([109,97,116,114,111,115,107,97]),flac:un([102,76,97,67]),ogg:un([79,103,103,83]),ac3:un([11,119]),riff:un([82,73,70,70]),avi:un([65,86,73]),wav:un([87,65,86,69]),"3gp":un([102,116,121,112,51,103]),mp4:un([102,116,121,112]),fmp4:un([115,116,121,112]),mov:un([102,116,121,112,113,116]),moov:un([109,111,111,118]),moof:un([109,111,111,102])},Af={aac:function(e){var t=Uv(e);return Rr(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Uv(e);return Rr(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Cr(e,[Sr.EBML,Sr.DocType])[0];return Rr(t,qs.webm)},mkv:function(e){var t=Cr(e,[Sr.EBML,Sr.DocType])[0];return Rr(t,qs.matroska)},mp4:function(e){return!Af["3gp"](e)&&!Af.mov(e)&&(!!(Rr(e,qs.mp4,{offset:4})||Rr(e,qs.fmp4,{offset:4})||Rr(e,qs.moof,{offset:4})||Rr(e,qs.moov,{offset:4}))||void 0)},mov:function(e){return Rr(e,qs.mov,{offset:4})},"3gp":function(e){return Rr(e,qs["3gp"],{offset:4})},ac3:function(e){var t=Uv(e);return Rr(e,qs.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Uv(e);return Rr(e,qs.flac,{offset:t})},ogg:function(e){return Rr(e,qs.ogg)},avi:function(e){return Rr(e,qs.riff)&&Rr(e,qs.avi,{offset:8})},wav:function(e){return Rr(e,qs.riff)&&Rr(e,qs.wav,{offset:8})},h264:function(e){return function(e,t,n){return G0(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,n){return G0(e,"h265",[32,33],3)}(e).length}},TS=Object.keys(Af).filter(function(r){return"ts"!==r&&"h264"!==r&&"h265"!==r}).concat(["ts","h264","h265"]);TS.forEach(function(r){var e=Af[r];Af[r]=function(t){return e(un(t))}});for(var Gv,dN=Af,pg=function(e){e=un(e);for(var t=0;t<TS.length;t++){var n=TS[t];if(dN[n](e))return n}return""},gg=B(6277),Ac={},Vi=function(e,t){return Ac[e]=Ac[e]||[],t&&(Ac[e]=Ac[e].concat(t)),Ac[e]},ZD=function(e,t){var n=Vi(e).indexOf(t);return!(n<=-1||(Ac[e]=Ac[e].slice(),Ac[e].splice(n,1),0))},mg={prefixed:!0},vg=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],wS=vg[0],yg=0;yg<vg.length;yg++)if(vg[yg][1]in Dt()){Gv=vg[yg];break}if(Gv){for(var Df=0;Df<Gv.length;Df++)mg[wS[Df]]=Gv[Df];mg.prefixed=Gv[0]!==wS[0]}var Co=[],Pn=function SS(r){var t,e="info",n=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];t("log",e,o)};return t=function(e,t){return function(n,i,s){var o=t.levels[i],l=new RegExp("^("+o+")$");if("log"!==n&&s.unshift(n.toUpperCase()+":"),s.unshift(e+":"),Co){Co.push([].concat(s));var f=Co.length-1e3;Co.splice(0,f>0?f:0)}if(pe().console){var g=pe().console[n];!g&&"debug"===n&&(g=pe().console.info||pe().console.log),g&&o&&l.test(n)&&g[Array.isArray(s)?"apply":"call"](pe().console,s)}}}(r,n),n.createLogger=function(i){return SS(r+": "+i)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(i){if("string"==typeof i){if(!n.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');e=i}return e},(n.history=function(){return Co?[].concat(Co):[]}).filter=function(i){return(Co||[]).filter(function(s){return new RegExp(".*"+i+".*").test(s[0])})},n.history.clear=function(){Co&&(Co.length=0)},n.history.disable=function(){null!==Co&&(Co.length=0,Co=null)},n.history.enable=function(){null===Co&&(Co=[])},n.error=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t("error",e,s)},n.warn=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t("warn",e,s)},n.debug=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t("debug",e,s)},n}("VIDEOJS"),CS=Pn.createLogger,YD=Object.prototype.toString,xS=function(e){return Ml(e)?Object.keys(e):[]};function kf(r,e){xS(r).forEach(function(t){return e(r[t],t)})}function hr(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?Aa.apply(void 0,[r].concat(t)):(t.forEach(function(i){!i||kf(i,function(s,o){r[o]=s})}),r)}function Ml(r){return!!r&&"object"==typeof r}function Pl(r){return Ml(r)&&"[object Object]"===YD.call(r)&&r.constructor===Object}function _g(r,e){if(!r||!e)return"";if("function"==typeof pe().getComputedStyle){var t;try{t=pe().getComputedStyle(r)}catch(n){return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var Hi=pe().navigator&&pe().navigator.userAgent||"",qv=/AppleWebKit\/([\d.]+)/i.exec(Hi),Gu=qv?parseFloat(qv.pop()):null,Mf=/iPod/i.test(Hi),Ss=function(){var r=Hi.match(/OS (\d+)_/i);return r&&r[1]?r[1]:null}(),zs=/Android/i.test(Hi),Pf=function(){var r=Hi.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!r)return null;var e=r[1]&&parseFloat(r[1]),t=r[2]&&parseFloat(r[2]);return e&&t?parseFloat(r[1]+"."+r[2]):e||null}(),Yo=zs&&Pf<5&&Gu<537,zv=/Firefox/i.test(Hi),$u=/Edg/i.test(Hi),xo=!$u&&(/Chrome/i.test(Hi)||/CriOS/i.test(Hi)),Bd=function(){var r=Hi.match(/(Chrome|CriOS)\/(\d+)/);return r&&r[2]?parseFloat(r[2]):null}(),qu=function(){var r=/MSIE\s(\d+)\.\d/.exec(Hi),e=r&&parseFloat(r[1]);return!e&&/Trident\/7.0/i.test(Hi)&&/rv:11.0/.test(Hi)&&(e=11),e}(),Dc=/Safari/i.test(Hi)&&!xo&&!zs&&!$u,Vd=/Windows/i.test(Hi),lu=Boolean(Hd()&&("ontouchstart"in pe()||pe().navigator.maxTouchPoints||pe().DocumentTouch&&pe().document instanceof pe().DocumentTouch)),kc=/iPad/i.test(Hi)||Dc&&lu&&!/iPhone/i.test(Hi),Mc=/iPhone/i.test(Hi)&&!kc,Cs=Mc||kc||Mf,bg=(Dc||Cs)&&!xo,IS=Object.freeze({__proto__:null,IS_IPOD:Mf,IOS_VERSION:Ss,IS_ANDROID:zs,ANDROID_VERSION:Pf,IS_NATIVE_ANDROID:Yo,IS_FIREFOX:zv,IS_EDGE:$u,IS_CHROME:xo,CHROME_VERSION:Bd,IE_VERSION:qu,IS_SAFARI:Dc,IS_WINDOWS:Vd,TOUCH_ENABLED:lu,IS_IPAD:kc,IS_IPHONE:Mc,IS_IOS:Cs,IS_ANY_SAFARI:bg});function z0(r){return"string"==typeof r&&Boolean(r.trim())}function W0(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Hd(){return Dt()===pe().document}function Gd(r){return Ml(r)&&1===r.nodeType}function K0(){try{return pe().parent!==pe().self}catch(r){return!0}}function DS(r){return function(e,t){if(!z0(e))return Dt()[r](null);z0(t)&&(t=Dt().querySelector(t));var n=Gd(t)?t:Dt();return n[r]&&n[r](e)}}function Nn(r,e,t,n){void 0===r&&(r="div"),void 0===e&&(e={}),void 0===t&&(t={});var i=Dt().createElement(r);return Object.getOwnPropertyNames(e).forEach(function(s){var o=e[s];-1!==s.indexOf("aria-")||"role"===s||"type"===s?(Pn.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+s+" to "+o+"."),i.setAttribute(s,o)):"textContent"===s?$d(i,o):(i[s]!==o||"tabIndex"===s)&&(i[s]=o)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),n&&Zv(i,n),i}function $d(r,e){return void 0===r.textContent?r.innerText=e:r.textContent=e,r}function Wv(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function Pc(r,e){return W0(e),r.classList?r.classList.contains(e):function AS(r){return new RegExp("(^|\\s)"+r+"($|\\s)")}(e).test(r.className)}function Ol(r,e){return r.classList?r.classList.add(e):Pc(r,e)||(r.className=(r.className+" "+e).trim()),r}function Tg(r,e){return r?(r.classList?r.classList.remove(e):(W0(e),r.className=r.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),r):(Pn.warn("removeClass was called with an element that doesn't exist"),null)}function Z0(r,e,t){var n=Pc(r,e);if("function"==typeof t&&(t=t(r,e)),"boolean"!=typeof t&&(t=!n),t!==n)return t?Ol(r,e):Tg(r,e),r}function kS(r,e){Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];null==n||!1===n?r.removeAttribute(t):r.setAttribute(t,!0===n?"":n)})}function zu(r){var e={};if(r&&r.attributes&&r.attributes.length>0)for(var n=r.attributes,i=n.length-1;i>=0;i--){var s=n[i].name,o=n[i].value;("boolean"==typeof r[s]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+s+","))&&(o=null!==o),e[s]=o}return e}function MS(r,e){return r.getAttribute(e)}function Of(r,e,t){r.setAttribute(e,t)}function Y0(r,e){r.removeAttribute(e)}function PS(){Dt().body.focus(),Dt().onselectstart=function(){return!1}}function Kv(){Dt().onselectstart=function(){return!0}}function Oc(r){if(r&&r.getBoundingClientRect&&r.parentNode){var e=r.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),t.height||(t.height=parseFloat(_g(r,"height"))),t.width||(t.width=parseFloat(_g(r,"width"))),t}}function Eg(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=r.offsetWidth,t=r.offsetHeight,n=0,i=0;r.offsetParent&&r!==Dt()[mg.fullscreenElement];)n+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return{left:n,top:i,width:e,height:t}}function Q0(r,e){var t={x:0,y:0};if(Cs)for(var n=r;n&&"html"!==n.nodeName.toLowerCase();){var i=_g(n,"transform");if(/^matrix/.test(i)){var s=i.slice(7,-1).split(/,\s/).map(Number);t.x+=s[4],t.y+=s[5]}else if(/^matrix3d/.test(i)){var o=i.slice(9,-1).split(/,\s/).map(Number);t.x+=o[12],t.y+=o[13]}n=n.parentNode}var l={},f=Eg(e.target),g=Eg(r),y=g.width,S=e.offsetY-(g.top-f.top),M=e.offsetX-(g.left-f.left);return e.changedTouches&&(M=e.changedTouches[0].pageX-g.left,S=e.changedTouches[0].pageY+g.top,Cs&&(M-=t.x,S-=t.y)),l.y=1-Math.max(0,Math.min(1,S/g.height)),l.x=Math.max(0,Math.min(1,M/y)),l}function QD(r){return Ml(r)&&3===r.nodeType}function OS(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function RS(r){return"function"==typeof r&&(r=r()),(Array.isArray(r)?r:[r]).map(function(e){return"function"==typeof e&&(e=e()),Gd(e)||QD(e)?e:"string"==typeof e&&/\S/.test(e)?Dt().createTextNode(e):void 0}).filter(function(e){return e})}function Zv(r,e){return RS(e).forEach(function(t){return r.appendChild(t)}),r}function XD(r,e){return Zv(OS(r),e)}function wg(r){return void 0===r.button&&void 0===r.buttons||0===r.button&&void 0===r.buttons||"mouseup"===r.type&&0===r.button&&0===r.buttons||!(0!==r.button||1!==r.buttons)}var Yv,Qo=DS("querySelector"),NS=DS("querySelectorAll"),X0=Object.freeze({__proto__:null,isReal:Hd,isEl:Gd,isInFrame:K0,createEl:Nn,textContent:$d,prependTo:Wv,hasClass:Pc,addClass:Ol,removeClass:Tg,toggleClass:Z0,setAttributes:kS,getAttributes:zu,getAttribute:MS,setAttribute:Of,removeAttribute:Y0,blockTextSelection:PS,unblockTextSelection:Kv,getBoundingClientRect:Oc,findPosition:Eg,getPointerPosition:Q0,isTextNode:QD,emptyEl:OS,normalizeContent:RS,appendContent:Zv,insertContent:XD,isSingleLeftClick:wg,$:Qo,$$:NS}),LS=!1,Qv=function(){if(!1!==Yv.options.autoSetup){var e=Array.prototype.slice.call(Dt().getElementsByTagName("video")),t=Array.prototype.slice.call(Dt().getElementsByTagName("audio")),n=Array.prototype.slice.call(Dt().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(var s=0,o=i.length;s<o;s++){var l=i[s];if(!l||!l.getAttribute){J0(1);break}void 0===l.player&&null!==l.getAttribute("data-setup")&&Yv(l)}else LS||J0(1)}};function J0(r,e){!Hd()||(e&&(Yv=e),pe().setTimeout(Qv,r))}function Xv(){LS=!0,pe().removeEventListener("load",Xv)}Hd()&&("complete"===Dt().readyState?Xv():pe().addEventListener("load",Xv));var eb,FS=function(e){var t=Dt().createElement("style");return t.className=e,t},jS=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},e1=3;function Rl(){return e1++}pe().WeakMap||(eb=function(){function r(){this.vdata="vdata"+Math.floor(pe().performance&&pe().performance.now()||Date.now()),this.data={}}var e=r.prototype;return e.set=function(n,i){var s=n[this.vdata]||Rl();return n[this.vdata]||(n[this.vdata]=s),this.data[s]=i,this},e.get=function(n){var i=n[this.vdata];if(i)return this.data[i];Pn("We have no data for this element",n)},e.has=function(n){return n[this.vdata]in this.data},e.delete=function(n){var i=n[this.vdata];i&&(delete this.data[i],delete n[this.vdata])},r}());var Ws=pe().WeakMap?new WeakMap:new eb;function tb(r,e){if(Ws.has(r)){var t=Ws.get(r);0===t.handlers[e].length&&(delete t.handlers[e],r.removeEventListener?r.removeEventListener(e,t.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),0===Object.getOwnPropertyNames(t).length&&Ws.delete(r)}}function Jv(r,e,t,n){t.forEach(function(i){r(e,i,n)})}function Rf(r){if(r.fixed_)return r;function e(){return!0}function t(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){var n=r||pe().event;for(var i in r={},n)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&"path"!==i&&("returnValue"===i&&n.preventDefault||(r[i]=n[i]));if(r.target||(r.target=r.srcElement||Dt()),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){n.preventDefault&&n.preventDefault(),r.returnValue=!1,n.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),r.cancelBubble=!0,n.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=t,r.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=t,null!=r.clientX){var s=Dt().documentElement,o=Dt().body;r.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),r.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}r.which=r.charCode||r.keyCode,null!=r.button&&(r.button=1&r.button?0:4&r.button?1:2&r.button?2:0)}return r.fixed_=!0,r}var nb,t1=["touchstart","touchmove"];function Ma(r,e,t){if(Array.isArray(e))return Jv(Ma,r,e,t);Ws.has(r)||Ws.set(r,{});var n=Ws.get(r);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),t.guid||(t.guid=Rl()),n.handlers[e].push(t),n.dispatcher||(n.disabled=!1,n.dispatcher=function(s,o){if(!n.disabled){s=Rf(s);var l=n.handlers[s.type];if(l)for(var f=l.slice(0),g=0,y=f.length;g<y&&!s.isImmediatePropagationStopped();g++)try{f[g].call(r,s,o)}catch(T){Pn.error(T)}}}),1===n.handlers[e].length)if(r.addEventListener){var i=!1;(function(){if("boolean"!=typeof nb){nb=!1;try{var e=Object.defineProperty({},"passive",{get:function(){nb=!0}});pe().addEventListener("test",null,e),pe().removeEventListener("test",null,e)}catch(t){}}return nb})()&&t1.indexOf(e)>-1&&(i={passive:!0}),r.addEventListener(e,n.dispatcher,i)}else r.attachEvent&&r.attachEvent("on"+e,n.dispatcher)}function bi(r,e,t){if(Ws.has(r)){var n=Ws.get(r);if(n.handlers){if(Array.isArray(e))return Jv(bi,r,e,t);var i=function(g,y){n.handlers[y]=[],tb(g,y)};if(void 0===e){for(var s in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},s)&&i(r,s);return}var o=n.handlers[e];if(o){if(!t)return void i(r,e);if(t.guid)for(var l=0;l<o.length;l++)o[l].guid===t.guid&&o.splice(l--,1);tb(r,e)}}}}function qd(r,e,t){var n=Ws.has(r)?Ws.get(r):{},i=r.parentNode||r.ownerDocument;if("string"==typeof e?e={type:e,target:r}:e.target||(e.target=r),e=Rf(e),n.dispatcher&&n.dispatcher.call(r,e,t),i&&!e.isPropagationStopped()&&!0===e.bubbles)qd.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){Ws.has(e.target)||Ws.set(e.target,{});var s=Ws.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function Nf(r,e,t){if(Array.isArray(e))return Jv(Nf,r,e,t);var n=function i(){bi(r,e,i),t.apply(this,arguments)};n.guid=t.guid=t.guid||Rl(),Ma(r,e,n)}function ey(r,e,t){var n=function i(){bi(r,e,i),t.apply(this,arguments)};n.guid=t.guid=t.guid||Rl(),Ma(r,e,n)}var Rc,n1=Object.freeze({__proto__:null,fixEvent:Rf,on:Ma,off:bi,trigger:qd,one:Nf,any:ey}),ir=function(e,t,n){t.guid||(t.guid=Rl());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},cu=function(e,t){var n=pe().performance.now();return function(){var o=pe().performance.now();o-n>=t&&(e.apply(void 0,arguments),n=o)}},Gi=function(){};Gi.prototype.allowedEvents_={},Gi.prototype.addEventListener=Gi.prototype.on=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},Ma(this,r,e),this.addEventListener=t},Gi.prototype.removeEventListener=Gi.prototype.off=function(r,e){bi(this,r,e)},Gi.prototype.one=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},Nf(this,r,e),this.addEventListener=t},Gi.prototype.any=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},ey(this,r,e),this.addEventListener=t},Gi.prototype.dispatchEvent=Gi.prototype.trigger=function(r){var e=r.type||r;"string"==typeof r&&(r={type:e}),r=Rf(r),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](r),qd(this,r)},Gi.prototype.queueTrigger=function(r){var e=this;Rc||(Rc=new Map);var t=r.type||r,n=Rc.get(this);n||Rc.set(this,n=new Map);var i=n.get(t);n.delete(t),pe().clearTimeout(i);var s=pe().setTimeout(function(){0===n.size&&(n=null,Rc.delete(e)),e.trigger(r)},0);n.set(t,s)};var zd=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Wu=function(e){return e instanceof Gi||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},Sg=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Cg=function(e,t,n){if(!e||!e.nodeName&&!Wu(e))throw new Error("Invalid target for "+zd(t)+"#"+n+"; must be a DOM node or evented object.")},ib=function(e,t,n){if(!Sg(e))throw new Error("Invalid event type for "+zd(t)+"#"+n+"; must be a non-empty string or array.")},ty=function(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+zd(t)+"#"+n+"; must be a function.")},ny=function(e,t,n){var s,o,l,i=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return i?(s=e.eventBusEl_,t.length>=3&&t.shift(),o=t[0],l=t[1]):(s=t[0],o=t[1],l=t[2]),Cg(s,e,n),ib(o,e,n),ty(l,e,n),{isTargetingSelf:i,target:s,type:o,listener:l=ir(e,l)}},Wd=function(e,t,n,i){Cg(e,e,t),e.nodeName?n1[t](e,n,i):e[t](n,i)},BS={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=ny(this,n,"on"),o=s.isTargetingSelf,l=s.target,f=s.type,g=s.listener;if(Wd(l,"on",f,g),!o){var y=function(){return e.off(l,f,g)};y.guid=g.guid;var T=function(){return e.off("dispose",y)};T.guid=g.guid,Wd(this,"on","dispose",y),Wd(l,"on","dispose",T)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=ny(this,n,"one"),o=s.isTargetingSelf,l=s.target,f=s.type,g=s.listener;if(o)Wd(l,"one",f,g);else{var y=function T(){e.off(l,f,T);for(var S=arguments.length,M=new Array(S),L=0;L<S;L++)M[L]=arguments[L];g.apply(null,M)};y.guid=g.guid,Wd(l,"one",f,y)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=ny(this,n,"any"),o=s.isTargetingSelf,l=s.target,f=s.type,g=s.listener;if(o)Wd(l,"any",f,g);else{var y=function T(){e.off(l,f,T);for(var S=arguments.length,M=new Array(S),L=0;L<S;L++)M[L]=arguments[L];g.apply(null,M)};y.guid=g.guid,Wd(l,"any",f,y)}},off:function(e,t,n){if(!e||Sg(e))bi(this.eventBusEl_,e,t);else{var i=e,s=t;Cg(i,this,"off"),ib(s,this,"off"),ty(n,this,"off"),n=ir(this,n),this.off("dispose",n),i.nodeName?(bi(i,s,n),bi(i,"dispose",n)):Wu(i)&&(i.off(s,n),i.off("dispose",n))}},trigger:function(e,t){if(Cg(this.eventBusEl_,this,"trigger"),!Sg(e&&"string"!=typeof e?e.type:e)){var i="Invalid event type for "+zd(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(i);(this.log||Pn).error(i)}return qd(this.eventBusEl_,e,t)}};function ry(r,e){void 0===e&&(e={});var n=e.eventBusKey;if(n){if(!r[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');r.eventBusEl_=r[n]}else r.eventBusEl_=Nn("span",{className:"vjs-event-bus"});return hr(r,BS),r.eventedCallbacks&&r.eventedCallbacks.forEach(function(i){i()}),r.on("dispose",function(){r.off(),[r,r.el_,r.eventBusEl_].forEach(function(i){i&&Ws.has(i)&&Ws.delete(i)}),pe().setTimeout(function(){r.eventBusEl_=null},0)}),r}var sb={state:{},setState:function(e){var n,t=this;return"function"==typeof e&&(e=e()),kf(e,function(i,s){t.state[s]!==i&&((n=n||{})[s]={from:t.state[s],to:i}),t.state[s]=i}),n&&Wu(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function ob(r,e){return hr(r,sb),r.state=hr({},r.state,e),"function"==typeof r.handleStateChanged&&Wu(r)&&r.on("statechanged",r.handleStateChanged),r}var iy=function(e){return"string"!=typeof e?e:e.replace(/./,function(t){return t.toLowerCase()})},ti=function(e){return"string"!=typeof e?e:e.replace(/./,function(t){return t.toUpperCase()})};function br(){for(var r={},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(i){!i||kf(i,function(s,o){Pl(s)?(Pl(r[o])||(r[o]={}),r[o]=br(r[o],s)):r[o]=s})}),r}var ab=function(){function r(){this.map_={}}var e=r.prototype;return e.has=function(n){return n in this.map_},e.delete=function(n){var i=this.has(n);return delete this.map_[n],i},e.set=function(n,i){return this.map_[n]=i,this},e.forEach=function(n,i){for(var s in this.map_)n.call(i,this.map_[s],s,this)},r}(),HS=pe().Map?pe().Map:ab,GS=function(){function r(){this.set_={}}var e=r.prototype;return e.has=function(n){return n in this.set_},e.delete=function(n){var i=this.has(n);return delete this.set_[n],i},e.add=function(n){return this.set_[n]=1,this},e.forEach=function(n,i){for(var s in this.set_)n.call(i,s,s,this)},r}(),sy=pe().Set?pe().Set:GS,Tt=function(){function r(t,n,i){var s=this;if(this.player_=!t&&this.play?t=this:t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=br({},this.options_),n=this.options_=br(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var o=t&&t.id&&t.id()||"no_player";this.id_=o+"_component_"+Rl()}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(function(l){return s.addClass(l)}),!1!==n.evented&&(ry(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ob(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new sy,this.setIntervalIds_=new sy,this.rafIds_=new sy,this.namedRafs_=new HS,this.clearingTimersOnDispose_=!1,!1!==n.initChildren&&this.initChildren(),this.ready(i),!1!==n.reportTouchActivity&&this.enableTouchActivity()}var e=r.prototype;return e.dispose=function(n){if(void 0===n&&(n={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(n.restoreEl?this.el_.parentNode.replaceChild(n.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(n){return n?(this.options_=br(this.options_,n),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(n,i,s){return Nn(n,i,s)},e.localize=function(n,i,s){void 0===s&&(s=n);var o=this.player_.language&&this.player_.language(),l=this.player_.languages&&this.player_.languages(),f=l&&l[o],g=o&&o.split("-")[0],y=l&&l[g],T=s;return f&&f[n]?T=f[n]:y&&y[n]&&(T=y[n]),i&&(T=T.replace(/\{(\d+)\}/g,function(S,M){var L=i[M-1],H=L;return void 0===L&&(H=S),H})),T},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(n){return this.childIndex_[n]},e.getChild=function(n){if(n)return this.childNameIndex_[n]},e.getDescendant=function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];i=i.reduce(function(f,g){return f.concat(g)},[]);for(var o=this,l=0;l<i.length;l++)if(!(o=o.getChild(i[l]))||!o.getChild)return;return o},e.addChild=function(n,i,s){var o,l;if(void 0===i&&(i={}),void 0===s&&(s=this.children_.length),"string"==typeof n){l=ti(n);var f=i.componentClass||l;i.name=l;var g=r.getComponent(f);if(!g)throw new Error("Component "+f+" does not exist");if("function"!=typeof g)return null;o=new g(this.player_||this,i)}else o=n;if(o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(s,0,o),o.parentComponent_=this,"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(l=l||o.name&&ti(o.name()))&&(this.childNameIndex_[l]=o,this.childNameIndex_[iy(l)]=o),"function"==typeof o.el&&o.el()){var y=null;this.children_[s+1]&&(this.children_[s+1].el_?y=this.children_[s+1].el_:Gd(this.children_[s+1])&&(y=this.children_[s+1])),this.contentEl().insertBefore(o.el(),y)}return o},e.removeChild=function(n){if("string"==typeof n&&(n=this.getChild(n)),n&&this.children_){for(var i=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===n){i=!0,this.children_.splice(s,1);break}if(i){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[ti(n.name())]=null,this.childNameIndex_[iy(n.name())]=null;var o=n.el();o&&o.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},e.initChildren=function(){var n=this,i=this.options_.children;if(i){var l,s=this.options_,f=r.getComponent("Tech");(l=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(g){return!l.some(function(y){return"string"==typeof y?g===y:g===y.name})})).map(function(g){var y,T;return"string"==typeof g?T=i[y=g]||n.options_[y]||{}:(y=g.name,T=g),{name:y,opts:T}}).filter(function(g){var y=r.getComponent(g.opts.componentClass||ti(g.name));return y&&!f.isTech(y)}).forEach(function(y){var T=y.name,S=y.opts;if(void 0!==s[T]&&(S=s[T]),!1!==S){!0===S&&(S={}),S.playerOptions=n.options_.playerOptions;var M=n.addChild(T,S);M&&(n[T]=M)}})}},e.buildCSSClass=function(){return""},e.ready=function(n,i){if(void 0===i&&(i=!1),n){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(n);i?n.call(this):this.setTimeout(n,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},e.$=function(n,i){return Qo(n,i||this.contentEl())},e.$$=function(n,i){return NS(n,i||this.contentEl())},e.hasClass=function(n){return Pc(this.el_,n)},e.addClass=function(n){Ol(this.el_,n)},e.removeClass=function(n){Tg(this.el_,n)},e.toggleClass=function(n,i){Z0(this.el_,n,i)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(n){return MS(this.el_,n)},e.setAttribute=function(n,i){Of(this.el_,n,i)},e.removeAttribute=function(n){Y0(this.el_,n)},e.width=function(n,i){return this.dimension("width",n,i)},e.height=function(n,i){return this.dimension("height",n,i)},e.dimensions=function(n,i){this.width(n,!0),this.height(i)},e.dimension=function(n,i,s){if(void 0!==i)return(null===i||i!=i)&&(i=0),this.el_.style[n]=-1!==(""+i).indexOf("%")||-1!==(""+i).indexOf("px")?i:"auto"===i?"":i+"px",void(s||this.trigger("componentresize"));if(!this.el_)return 0;var o=this.el_.style[n],l=o.indexOf("px");return parseInt(-1!==l?o.slice(0,l):this.el_["offset"+ti(n)],10)},e.currentDimension=function(n){var i=0;if("width"!==n&&"height"!==n)throw new Error("currentDimension only accepts width or height value");if(i=_g(this.el_,n),0===(i=parseFloat(i))||isNaN(i)){var s="offset"+ti(n);i=this.el_[s]}return i},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(n){this.player_&&(bn().isEventKey(n,"Tab")||n.stopPropagation(),this.player_.handleKeyDown(n))},e.handleKeyPress=function(n){this.handleKeyDown(n)},e.emitTapEvents=function(){var l,n=0,i=null;this.on("touchstart",function(g){1===g.touches.length&&(i={pageX:g.touches[0].pageX,pageY:g.touches[0].pageY},n=pe().performance.now(),l=!0)}),this.on("touchmove",function(g){if(g.touches.length>1)l=!1;else if(i){var y=g.touches[0].pageX-i.pageX,T=g.touches[0].pageY-i.pageY;Math.sqrt(y*y+T*T)>10&&(l=!1)}});var f=function(){l=!1};this.on("touchleave",f),this.on("touchcancel",f),this.on("touchend",function(g){i=null,!0===l&&pe().performance.now()-n<200&&(g.preventDefault(),this.trigger("tap"))})},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var i,n=ir(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){n(),this.clearInterval(i),i=this.setInterval(n,250)});var s=function(l){n(),this.clearInterval(i)};this.on("touchmove",n),this.on("touchend",s),this.on("touchcancel",s)}},e.setTimeout=function(n,i){var o,s=this;return n=ir(this,n),this.clearTimersOnDispose_(),o=pe().setTimeout(function(){s.setTimeoutIds_.has(o)&&s.setTimeoutIds_.delete(o),n()},i),this.setTimeoutIds_.add(o),o},e.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),pe().clearTimeout(n)),n},e.setInterval=function(n,i){n=ir(this,n),this.clearTimersOnDispose_();var s=pe().setInterval(n,i);return this.setIntervalIds_.add(s),s},e.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),pe().clearInterval(n)),n},e.requestAnimationFrame=function(n){var s,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),n=ir(this,n),s=pe().requestAnimationFrame(function(){i.rafIds_.has(s)&&i.rafIds_.delete(s),n()}),this.rafIds_.add(s),s):this.setTimeout(n,1e3/60)},e.requestNamedAnimationFrame=function(n,i){var s=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),i=ir(this,i);var o=this.requestAnimationFrame(function(){i(),s.namedRafs_.has(n)&&s.namedRafs_.delete(n)});return this.namedRafs_.set(n,o),n}},e.cancelNamedAnimationFrame=function(n){!this.namedRafs_.has(n)||(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},e.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),pe().cancelAnimationFrame(n)),n):this.clearTimeout(n)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(i){var o=i[1];n[i[0]].forEach(function(l,f){return n[o](f)})}),n.clearingTimersOnDispose_=!1}))},r.registerComponent=function(n,i){if("string"!=typeof n||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var s=r.getComponent("Tech"),o=s&&s.isTech(i),l=r===i||r.prototype.isPrototypeOf(i.prototype);if(o||!l)throw new Error('Illegal component, "'+n+'"; '+(o?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");n=ti(n),r.components_||(r.components_={});var g=r.getComponent("Player");if("Player"===n&&g&&g.players){var y=g.players,T=Object.keys(y);if(y&&T.length>0&&T.map(function(S){return y[S]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return r.components_[n]=i,r.components_[iy(n)]=i,i},r.getComponent=function(n){if(n&&r.components_)return r.components_[n]},r}();function ub(r,e,t,n){return function $S(r,e,t){if("number"!=typeof e||e<0||e>t)throw new Error("Failed to execute '"+r+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+t+").")}(r,n,t.length-1),t[n][e]}function oy(r){var e;return e=void 0===r||0===r.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:r.length,start:ub.bind(null,"start",0,r),end:ub.bind(null,"end",1,r)},pe().Symbol&&pe().Symbol.iterator&&(e[pe().Symbol.iterator]=function(){return(r||[]).values()}),e}function Nc(r,e){return Array.isArray(r)?oy(r):void 0===r||void 0===e?oy():oy([[r,e]])}function r1(r,e){var n,i,t=0;if(!e)return 0;(!r||!r.length)&&(r=Nc(0,0));for(var s=0;s<r.length;s++)n=r.start(s),(i=r.end(s))>e&&(i=e),t+=i-n;return t/e}function Ks(r){if(r instanceof Ks)return r;"number"==typeof r?this.code=r:"string"==typeof r?this.message=r:Ml(r)&&("number"==typeof r.code&&(this.code=r.code),hr(this,r)),this.message||(this.message=Ks.defaultMessages[this.code]||"")}Tt.prototype.supportsRaf_="function"==typeof pe().requestAnimationFrame&&"function"==typeof pe().cancelAnimationFrame,Tt.registerComponent("Component",Tt),Ks.prototype.code=0,Ks.prototype.message="",Ks.prototype.status=null,Ks.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Ks.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Lf=0;Lf<Ks.errorTypes.length;Lf++)Ks[Ks.errorTypes[Lf]]=Lf,Ks.prototype[Ks.errorTypes[Lf]]=Lf;function Ff(r){return null!=r&&"function"==typeof r.then}function Ku(r){Ff(r)&&r.then(null,function(e){})}var hi=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,i,s){return e[i]&&(n[i]=e[i]),n},{cues:e.cues&&Array.prototype.map.call(e.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},ay="vjs-modal-dialog",jf=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).handleKeyDown_=function(o){return s.handleKeyDown(o)},s.close_=function(o){return s.close(o)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=Nn("div",{className:ay+"-content"},{role:"document"}),s.descEl_=Nn("p",{className:ay+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),$d(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,r.prototype.dispose.call(this)},t.buildCSSClass=function(){return ay+" vjs-hidden "+r.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},t.open=function(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(i){return"boolean"==typeof i&&this[i?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(i){if("boolean"==typeof i){var s=this.closeable_=!!i,o=this.getChild("closeButton");if(s&&!o){var l=this.contentEl_;this.contentEl_=this.el_,o=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=l,this.on(o,"close",this.close_)}!s&&o&&(this.off(o,"close",this.close_),this.removeChild(o),o.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(i){var s=this.contentEl(),o=s.parentNode,l=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,o.removeChild(s),this.empty(),XD(s,i),this.trigger("modalfill"),l?o.insertBefore(s,l):o.appendChild(s);var f=this.getChild("closeButton");f&&o.appendChild(f.el_)},t.empty=function(){this.trigger("beforemodalempty"),OS(this.contentEl()),this.trigger("modalempty")},t.content=function(i){return void 0!==i&&(this.content_=i),this.content_},t.conditionalFocus_=function(){var i=Dt().activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(i)||s===i)&&(this.previouslyActiveEl_=i,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(i){if(i.stopPropagation(),bn().isEventKey(i,"Escape")&&this.closeable())return i.preventDefault(),void this.close();if(bn().isEventKey(i,"Tab")){for(var l,s=this.focusableEls_(),o=this.el_.querySelector(":focus"),f=0;f<s.length;f++)if(o===s[f]){l=f;break}Dt().activeElement===this.el_&&(l=0),i.shiftKey&&0===l?(s[s.length-1].focus(),i.preventDefault()):!i.shiftKey&&l===s.length-1&&(s[0].focus(),i.preventDefault())}},t.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(s){return(s instanceof pe().HTMLAnchorElement||s instanceof pe().HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof pe().HTMLInputElement||s instanceof pe().HTMLSelectElement||s instanceof pe().HTMLTextAreaElement||s instanceof pe().HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof pe().HTMLIFrameElement||s instanceof pe().HTMLObjectElement||s instanceof pe().HTMLEmbedElement||s.hasAttribute("tabindex")&&-1!==s.getAttribute("tabindex")||s.hasAttribute("contenteditable")})},e}(Tt);jf.prototype.options_={pauseOnOpen:!0,temporary:!0},Tt.registerComponent("ModalDialog",jf);var Kd=function(r){function e(n){var i;void 0===n&&(n=[]),(i=r.call(this)||this).tracks_=[],Object.defineProperty(Tn(i),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<n.length;s++)i.addTrack(n[s]);return i}Mt(e,r);var t=e.prototype;return t.addTrack=function(i){var s=this,o=this.tracks_.length;""+o in this||Object.defineProperty(this,o,{get:function(){return this.tracks_[o]}}),-1===this.tracks_.indexOf(i)&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){s.trigger({track:i,type:"labelchange",target:s})},Wu(i)&&i.addEventListener("labelchange",i.labelchange_)},t.removeTrack=function(i){for(var s,o=0,l=this.length;o<l;o++)if(this[o]===i){(s=this[o]).off&&s.off(),this.tracks_.splice(o,1);break}!s||this.trigger({track:s,type:"removetrack",target:this})},t.getTrackById=function(i){for(var s=null,o=0,l=this.length;o<l;o++){var f=this[o];if(f.id===i){s=f;break}}return s},e}(Gi);for(var WS in Kd.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Kd.prototype.allowedEvents_)Kd.prototype["on"+WS]=null;var Lc=function(e,t){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||t.id===e[n].id||(e[n].enabled=!1)},s1=function(r){function e(n){var i;void 0===n&&(n=[]);for(var s=n.length-1;s>=0;s--)if(n[s].enabled){Lc(n,n[s]);break}return(i=r.call(this,n)||this).changing_=!1,i}Mt(e,r);var t=e.prototype;return t.addTrack=function(i){var s=this;i.enabled&&Lc(this,i),r.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){s.changing_||(s.changing_=!0,Lc(s,i),s.changing_=!1,s.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},e}(Kd),lb=function(e,t){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||t.id===e[n].id||(e[n].selected=!1)},KS=function(r){function e(n){var i;void 0===n&&(n=[]);for(var s=n.length-1;s>=0;s--)if(n[s].selected){lb(n,n[s]);break}return(i=r.call(this,n)||this).changing_=!1,Object.defineProperty(Tn(i),"selectedIndex",{get:function(){for(var l=0;l<this.length;l++)if(this[l].selected)return l;return-1},set:function(){}}),i}Mt(e,r);var t=e.prototype;return t.addTrack=function(i){var s=this;i.selected&&lb(this,i),r.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){s.changing_||(s.changing_=!0,lb(s,i),s.changing_=!1,s.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},e}(Kd),ZS=function(r){function e(){return r.apply(this,arguments)||this}Mt(e,r);var t=e.prototype;return t.addTrack=function(i){var s=this;r.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(i.kind)&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Kd),YS=function(){function r(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=t.length;n<i;n++)this.addTrackElement_(t[n])}var e=r.prototype;return e.addTrackElement_=function(n){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),-1===this.trackElements_.indexOf(n)&&this.trackElements_.push(n)},e.getTrackElementByTrack_=function(n){for(var i,s=0,o=this.trackElements_.length;s<o;s++)if(n===this.trackElements_[s].track){i=this.trackElements_[s];break}return i},e.removeTrackElement_=function(n){for(var i=0,s=this.trackElements_.length;i<s;i++)if(n===this.trackElements_[i]){this.trackElements_[i].track&&"function"==typeof this.trackElements_[i].track.off&&this.trackElements_[i].track.off(),"function"==typeof this.trackElements_[i].off&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},r}(),o1=function(){function r(t){r.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=r.prototype;return e.setCues_=function(n){var i=this.length||0,s=0,o=n.length;this.cues_=n,this.length_=n.length;var l=function(g){""+g in this||Object.defineProperty(this,""+g,{get:function(){return this.cues_[g]}})};if(i<o)for(s=i;s<o;s++)l.call(this,s)},e.getCueById=function(n){for(var i=null,s=0,o=this.length;s<o;s++){var l=this[s];if(l.id===n){i=l;break}}return i},r}(),QS={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},cb={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Zu={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},XS={disabled:"disabled",hidden:"hidden",showing:"showing"},db=function(r){function e(t){var n;void 0===t&&(t={}),n=r.call(this)||this;var i={id:t.id||"vjs_track_"+Rl(),kind:t.kind||"",language:t.language||""},s=t.label||"",o=function(g){Object.defineProperty(Tn(n),g,{get:function(){return i[g]},set:function(){}})};for(var l in i)o(l);return Object.defineProperty(Tn(n),"label",{get:function(){return s},set:function(g){g!==s&&(s=g,this.trigger("labelchange"))}}),n}return Mt(e,r),e}(Gi),Pa=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=Dt().createElement("a");n.href=e;for(var i={},s=0;s<t.length;s++)i[t[s]]=n[t[s]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=pe().location.protocol),i.host||(i.host=pe().location.host),i},Oa=function(e){if(!e.match(/^https?:\/\//)){var t=Dt().createElement("a");t.href=e,e=t.href}return e},Xo=function(e){if("string"==typeof e){var n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(n)return n.pop().toLowerCase()}return""},xg=function(e,t){void 0===t&&(t=pe().location);var n=Pa(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},JS=Object.freeze({__proto__:null,parseUrl:Pa,getAbsoluteURL:Oa,getFileExtension:Xo,isCrossOrigin:xg}),eC=function(e,t){var n=new(pe().WebVTT.Parser)(pe(),pe().vttjs,pe().WebVTT.StringDecoder()),i=[];n.oncue=function(s){t.addCue(s)},n.onparsingerror=function(s){i.push(s)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(pe().console&&pe().console.groupCollapsed&&pe().console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(s){return Pn.error(s)}),pe().console&&pe().console.groupEnd&&pe().console.groupEnd()),n.flush()},tC=function(e,t){var n={uri:e},i=xg(e);i&&(n.cors=i);var s="use-credentials"===t.tech_.crossOrigin();s&&(n.withCredentials=s),Da()(n,ir(this,function(o,l,f){if(o)return Pn.error(o,l);t.loaded_=!0,"function"!=typeof pe().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(g){if("vttjserror"!==g.type)return eC(f,t);Pn.error("vttjs failed to load, stopping trying to process "+t.src)}):eC(f,t)}))},Ig=function(r){function e(n){var i;if(void 0===n&&(n={}),!n.tech)throw new Error("A tech was not provided.");var s=br(n,{kind:Zu[n.kind]||"subtitles",language:n.language||n.srclang||""}),o=XS[s.mode]||"disabled",l=s.default;("metadata"===s.kind||"chapters"===s.kind)&&(o="hidden"),(i=r.call(this,s)||this).tech_=s.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var f=new o1(i.cues_),g=new o1(i.activeCues_),y=!1;return i.timeupdateHandler=ir(Tn(i),function(){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));this.activeCues=this.activeCues,y&&(this.trigger("cuechange"),y=!1),this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)}}),i.tech_.one("dispose",function(){i.stopTracking()}),"disabled"!==o&&i.startTracking(),Object.defineProperties(Tn(i),{default:{get:function(){return l},set:function(){}},mode:{get:function(){return o},set:function(M){!XS[M]||o!==M&&(o=M,!this.preload_&&"disabled"!==o&&0===this.cues.length&&tC(this.src,this),this.stopTracking(),"disabled"!==o&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?f:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return g;for(var M=this.tech_.currentTime(),L=[],H=0,$=this.cues.length;H<$;H++){var De=this.cues[H];(De.startTime<=M&&De.endTime>=M||De.startTime===De.endTime&&De.startTime<=M&&De.startTime+.5>=M)&&L.push(De)}if(y=!1,L.length!==this.activeCues_.length)y=!0;else for(var We=0;We<L.length;We++)-1===this.activeCues_.indexOf(L[We])&&(y=!0);return this.activeCues_=L,g.setCues_(this.activeCues_),g},set:function(){}}}),s.src?(i.src=s.src,i.preload_||(i.loaded_=!0),(i.preload_||"subtitles"!==s.kind&&"captions"!==s.kind)&&tC(i.src,Tn(i))):i.loaded_=!0,i}Mt(e,r);var t=e.prototype;return t.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)},t.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0)},t.addCue=function(i){var s=i;if(pe().vttjs&&!(i instanceof pe().vttjs.VTTCue)){for(var o in s=new(pe().vttjs.VTTCue)(i.startTime,i.endTime,i.text),i)o in s||(s[o]=i[o]);s.id=i.id,s.originalCue_=i}for(var l=this.tech_.textTracks(),f=0;f<l.length;f++)l[f]!==this&&l[f].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},t.removeCue=function(i){for(var s=this.cues_.length;s--;){var o=this.cues_[s];if(o===i||o.originalCue_&&o.originalCue_===i){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},e}(db);Ig.prototype.allowedEvents_={cuechange:"cuechange"};var nC=function(r){function e(t){var n;void 0===t&&(t={});var i=br(t,{kind:cb[t.kind]||""});n=r.call(this,i)||this;var s=!1;return Object.defineProperty(Tn(n),"enabled",{get:function(){return s},set:function(l){"boolean"!=typeof l||l===s||(s=l,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return Mt(e,r),e}(db),uy=function(r){function e(t){var n;void 0===t&&(t={});var i=br(t,{kind:QS[t.kind]||""});n=r.call(this,i)||this;var s=!1;return Object.defineProperty(Tn(n),"selected",{get:function(){return s},set:function(l){"boolean"!=typeof l||l===s||(s=l,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return Mt(e,r),e}(db),Zd=function(r){function e(t){var n;void 0===t&&(t={}),n=r.call(this)||this;var i,s=new Ig(t);return n.kind=s.kind,n.src=s.src,n.srclang=s.language,n.label=s.label,n.default=s.default,Object.defineProperties(Tn(n),{readyState:{get:function(){return i}},track:{get:function(){return s}}}),i=0,s.addEventListener("loadeddata",function(){i=2,n.trigger({type:"load",target:Tn(n)})}),n}return Mt(e,r),e}(Gi);Zd.prototype.allowedEvents_={load:"load"},Zd.NONE=0,Zd.LOADING=1,Zd.LOADED=2,Zd.ERROR=3;var Jo={audio:{ListClass:s1,TrackClass:nC,capitalName:"Audio"},video:{ListClass:KS,TrackClass:uy,capitalName:"Video"},text:{ListClass:ZS,TrackClass:Ig,capitalName:"Text"}};Object.keys(Jo).forEach(function(r){Jo[r].getterName=r+"Tracks",Jo[r].privateName=r+"Tracks_"});var Nl={remoteText:{ListClass:ZS,TrackClass:Ig,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:YS,TrackClass:Zd,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Zs=Aa({},Jo,Nl);Nl.names=Object.keys(Nl),Jo.names=Object.keys(Jo),Zs.names=[].concat(Nl.names).concat(Jo.names);var sr=function(r){function e(n,i){var s;return void 0===n&&(n={}),void 0===i&&(i=function(){}),n.reportTouchActivity=!1,(s=r.call(this,null,n,i)||this).onDurationChange_=function(o){return s.onDurationChange(o)},s.trackProgress_=function(o){return s.trackProgress(o)},s.trackCurrentTime_=function(o){return s.trackCurrentTime(o)},s.stopTrackingCurrentTime_=function(o){return s.stopTrackingCurrentTime(o)},s.disposeSourceHandler_=function(o){return s.disposeSourceHandler(o)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),Zs.names.forEach(function(o){var l=Zs[o];n&&n[l.getterName]&&(s[l.privateName]=n[l.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(o){!1===n["native"+o+"Tracks"]&&(s["featuresNative"+o+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?s.featuresNativeTextTracks=!1:(!0===n.nativeCaptions||!0===n.nativeTextTracks)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=!1!==n.preloadTextTracks,s.autoRemoteTextTracks_=new Zs.text.ListClass,s.initTrackListeners(),n.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}Mt(e,r);var t=e.prototype;return t.triggerSourceset=function(i){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ir(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,1===s&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(i){this.duration_=this.duration()},t.buffered=function(){return Nc(0,0)},t.bufferedPercent=function(){return r1(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(Jo.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),r.prototype.dispose.call(this)},t.clearTracks=function(i){var s=this;(i=[].concat(i)).forEach(function(o){for(var l=s[o+"Tracks"]()||[],f=l.length;f--;){var g=l[f];"text"===o&&s.removeRemoteTextTrack(g),l.removeTrack(g)}})},t.cleanupAutoTextTracks=function(){for(var i=this.autoRemoteTextTracks_||[],s=i.length;s--;)this.removeRemoteTextTrack(i[s])},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(i){return void 0!==i&&(this.error_=new Ks(i),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?Nc(0,0):Nc()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var i=this;Jo.names.forEach(function(s){var l=function(){i.trigger(s+"trackchange")},f=i[Jo[s].getterName]();f.addEventListener("removetrack",l),f.addEventListener("addtrack",l),i.on("dispose",function(){f.removeEventListener("removetrack",l),f.removeEventListener("addtrack",l)})})},t.addWebVttScript_=function(){var i=this;if(!pe().WebVTT)if(Dt().body.contains(this.el())){if(!this.options_["vtt.js"]&&Pl(m0())&&Object.keys(m0()).length>0)return void this.trigger("vttjsloaded");var s=Dt().createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){i.trigger("vttjsloaded")},s.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),pe().WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var i=this,s=this.textTracks(),o=this.remoteTextTracks(),l=function(S){return s.addTrack(S.track)},f=function(S){return s.removeTrack(S.track)};o.on("addtrack",l),o.on("removetrack",f),this.addWebVttScript_();var g=function(){return i.trigger("texttrackchange")},y=function(){g();for(var S=0;S<s.length;S++){var M=s[S];M.removeEventListener("cuechange",g),"showing"===M.mode&&M.addEventListener("cuechange",g)}};y(),s.addEventListener("change",y),s.addEventListener("addtrack",y),s.addEventListener("removetrack",y),this.on("dispose",function(){o.off("addtrack",l),o.off("removetrack",f),s.removeEventListener("change",y),s.removeEventListener("addtrack",y),s.removeEventListener("removetrack",y);for(var T=0;T<s.length;T++)s[T].removeEventListener("cuechange",g)})},t.addTextTrack=function(i,s,o){if(!i)throw new Error("TextTrack kind is required but was not provided");return function rC(r,e,t,n,i){void 0===i&&(i={});var s=r.textTracks();i.kind=e,t&&(i.label=t),n&&(i.language=n),i.tech=r;var o=new Zs.text.TrackClass(i);return s.addTrack(o),o}(this,i,s,o)},t.createRemoteTextTrack=function(i){var s=br(i,{tech:this});return new Nl.remoteTextEl.TrackClass(s)},t.addRemoteTextTrack=function(i,s){var o=this;void 0===i&&(i={});var l=this.createRemoteTextTrack(i);return!0!==s&&!1!==s&&(Pn.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),!0!==s&&this.ready(function(){return o.autoRemoteTextTracks_.addTrack(l.track)}),l},t.removeRemoteTextTrack=function(i){var s=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var i=this.options_.Promise||pe().Promise;if(i)return i.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.requestVideoFrameCallback=function(i){var s=this,o=Rl();return this.paused()?(this.queuedHanders_.add(o),this.one("playing",function(){s.queuedHanders_.has(o)&&(s.queuedHanders_.delete(o),i())})):this.requestNamedAnimationFrame(o,i),o},t.cancelVideoFrameCallback=function(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(i,s){return e.canPlayType(i.type)},e.isTech=function(i){return i.prototype instanceof e||i instanceof e||i===e},e.registerTech=function(i,s){if(e.techs_||(e.techs_={}),!e.isTech(s))throw new Error("Tech "+i+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=ti(i),e.techs_[i]=s,e.techs_[iy(i)]=s,"Tech"!==i&&e.defaultTechOrder_.push(i),s},e.getTech=function(i){if(i){if(e.techs_&&e.techs_[i])return e.techs_[i];if(i=ti(i),pe()&&pe().videojs&&pe().videojs[i])return Pn.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),pe().videojs[i]}},e}(Tt);Zs.names.forEach(function(r){var e=Zs[r];sr.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),sr.prototype.featuresVolumeControl=!0,sr.prototype.featuresMuteControl=!0,sr.prototype.featuresFullscreenResize=!1,sr.prototype.featuresPlaybackRate=!1,sr.prototype.featuresProgressEvents=!1,sr.prototype.featuresSourceset=!1,sr.prototype.featuresTimeupdateEvents=!1,sr.prototype.featuresNativeTextTracks=!1,sr.prototype.featuresVideoFrameCallback=!1,sr.withSourceHandlers=function(r){r.registerSourceHandler=function(t,n){var i=r.sourceHandlers;i||(i=r.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},r.canPlayType=function(t){for(var i,n=r.sourceHandlers||[],s=0;s<n.length;s++)if(i=n[s].canPlayType(t))return i;return""},r.selectSourceHandler=function(t,n){for(var i=r.sourceHandlers||[],o=0;o<i.length;o++)if(i[o].canHandleSource(t,n))return i[o];return null},r.canPlaySource=function(t,n){var i=r.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(t){var n=this[t];"function"==typeof n&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){var n=r.selectSourceHandler(t,this.options_);n||(r.nativeSourceHandler?n=r.nativeSourceHandler:Pn.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Tt.registerComponent("Tech",sr),sr.registerTech("Tech",sr),sr.defaultTechOrder_=[];var Ll={},Bf={},Vf={};function sC(r,e,t){r.setTimeout(function(){return Yd(e,Ll[e.type],t,r)},1)}function fb(r,e,t,n){void 0===n&&(n=null);var i="call"+ti(t),s=r.reduce(pb(i),n),o=s===Vf,l=o?null:e[t](s);return function c1(r,e,t,n){for(var i=r.length-1;i>=0;i--){var s=r[i];s[e]&&s[e](n,t)}}(r,t,l,o),l}var lC={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},l1={setCurrentTime:1,setMuted:1,setVolume:1},cC={play:1,pause:1};function pb(r){return function(e,t){return e===Vf?Vf:t[r]?t[r](e):e}}function Yd(r,e,t,n,i,s){void 0===r&&(r={}),void 0===e&&(e=[]),void 0===i&&(i=[]),void 0===s&&(s=!1);var l=e[0],f=e.slice(1);if("string"==typeof l)Yd(r,Ll[l],t,n,i,s);else if(l){var g=function h1(r,e){var t=Bf[r.id()],n=null;if(null==t)return n=e(r),Bf[r.id()]=[[e,n]],n;for(var i=0;i<t.length;i++){var s=t[i];s[0]===e&&(n=s[1])}return null===n&&(n=e(r),t.push([e,n])),n}(n,l);if(!g.setSource)return i.push(g),Yd(r,f,t,n,i,s);g.setSource(hr({},r),function(y,T){if(y)return Yd(r,f,t,n,i,s);i.push(g),Yd(T,r.type===T.type?f:Ll[T.type],t,n,i,s)})}else f.length?Yd(r,f,t,n,i,s):s?t(r,i):Yd(r,Ll["*"],t,n,i,!0)}var f1={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ly=function(e){void 0===e&&(e="");var t=Xo(e);return f1[t.toLowerCase()]||""},g1=function r(e){if(Array.isArray(e)){var t=[];e.forEach(function(n){n=r(n),Array.isArray(n)?t=t.concat(n):Ml(n)&&t.push(n)}),e=t}else e="string"==typeof e&&e.trim()?[dC({src:e})]:Ml(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[dC(e)]:[];return e};function dC(r){if(!r.type){var e=ly(r.src);e&&(r.type=e)}return r}var m1=function(r){function e(t,n,i){var s,o=br({createEl:!1},n);if(s=r.call(this,t,o,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var l=0,f=n.playerOptions.techOrder;l<f.length;l++){var g=ti(f[l]),y=sr.getTech(g);if(g||(y=Tt.getComponent(g)),y&&y.isSupported()){t.loadTech_(g);break}}return s}return Mt(e,r),e}(Tt);Tt.registerComponent("MediaLoader",m1);var cy=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(o){return s.handleMouseOver(o)},s.handleMouseOut_=function(o){return s.handleMouseOut(o)},s.handleClick_=function(o){return s.handleClick(o)},s.handleKeyDown_=function(o){return s.handleKeyDown(o)},s.emitTapEvents(),s.enable(),s}Mt(e,r);var t=e.prototype;return t.createEl=function(i,s,o){void 0===i&&(i="div"),void 0===s&&(s={}),void 0===o&&(o={}),s=hr({className:this.buildCSSClass(),tabIndex:0},s),"button"===i&&Pn.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),o=hr({role:"button"},o),this.tabIndex_=s.tabIndex;var l=Nn(i,s,o);return l.appendChild(Nn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(l),l},t.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},t.createControlTextEl=function(i){return this.controlTextEl_=Nn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},t.controlText=function(i,s){if(void 0===s&&(s=this.el()),void 0===i)return this.controlText_||"Need Text";var o=this.localize(i);this.controlText_=i,$d(this.controlTextEl_,o),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",o)},t.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(i){bn().isEventKey(i,"Space")||bn().isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,i)},e}(Tt);Tt.registerComponent("ClickableComponent",cy);var v1=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update(),s.update_=function(o){return s.update(o)},n.on("posterchange",s.update_),s}Mt(e,r);var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),r.prototype.dispose.call(this)},t.createEl=function(){return Nn("div",{className:"vjs-poster",tabIndex:-1})},t.update=function(i){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},t.setSrc=function(i){var s="";i&&(s='url("'+i+'")'),this.el_.style.backgroundImage=s},t.handleClick=function(i){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((qu||$u)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?Ku(this.player_.play()):this.player_.pause()}},e}(cy);Tt.registerComponent("PosterImage",v1);var Ra="#222",y1={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function dy(r,e){var t;if(4===r.length)t=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else{if(7!==r.length)throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");t=r.slice(1)}return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function hy(r,e,t){try{r.style[e]=t}catch(n){return}}var fC=function(r){function e(n,i,s){var o;o=r.call(this,n,i,s)||this;var l=function(g){return o.updateDisplay(g)};return n.on("loadstart",function(f){return o.toggleDisplay(f)}),n.on("texttrackchange",l),n.on("loadedmetadata",function(f){return o.preselectTrack(f)}),n.ready(ir(Tn(o),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",l),n.on("playerresize",l),pe().addEventListener("orientationchange",l),n.on("dispose",function(){return pe().removeEventListener("orientationchange",l)});for(var f=this.options_.playerOptions.tracks||[],g=0;g<f.length;g++)this.player_.addRemoteTextTrack(f[g],!0);this.preselectTrack()}})),o}Mt(e,r);var t=e.prototype;return t.preselectTrack=function(){for(var l,f,g,i={captions:1,subtitles:1},s=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,y=0;y<s.length;y++){var T=s[y];o&&o.enabled&&o.language&&o.language===T.language&&T.kind in i?T.kind===o.kind?g=T:g||(g=T):o&&!o.enabled?(g=null,l=null,f=null):T.default&&("descriptions"!==T.kind||l?T.kind in i&&!f&&(f=T):l=T)}g?g.mode="showing":f?f.mode="showing":l&&(l.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof pe().WebVTT&&pe().WebVTT.processCues(pe(),[],this.el_)},t.updateDisplay=function(){var i=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var o=[],l=0;l<i.length;++l){var f=i[l];"showing"===f.mode&&o.push(f)}this.updateForTrack(o)}else{for(var g=null,y=null,T=i.length;T--;){var S=i[T];"showing"===S.mode&&("descriptions"===S.kind?g=S:y=S)}y?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(y)):g&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(g))}},t.updateDisplayState=function(i){for(var s=this.player_.textTrackSettings.getValues(),o=i.activeCues,l=o.length;l--;){var f=o[l];if(f){var g=f.displayState;if(s.color&&(g.firstChild.style.color=s.color),s.textOpacity&&hy(g.firstChild,"color",dy(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(g.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&hy(g.firstChild,"backgroundColor",dy(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?hy(g,"backgroundColor",dy(s.windowColor,s.windowOpacity)):g.style.backgroundColor=s.windowColor),s.edgeStyle&&("dropshadow"===s.edgeStyle?g.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Ra:"raised"===s.edgeStyle?g.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Ra:"depressed"===s.edgeStyle?g.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Ra:"uniform"===s.edgeStyle&&(g.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Ra)),s.fontPercent&&1!==s.fontPercent){var y=pe().parseFloat(g.style.fontSize);g.style.fontSize=y*s.fontPercent+"px",g.style.height="auto",g.style.top="auto"}s.fontFamily&&"default"!==s.fontFamily&&("small-caps"===s.fontFamily?g.firstChild.style.fontVariant="small-caps":g.firstChild.style.fontFamily=y1[s.fontFamily])}}},t.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),"function"==typeof pe().WebVTT&&!i.every(function(M){return!M.activeCues})){for(var s=[],o=0;o<i.length;++o)for(var l=i[o],f=0;f<l.activeCues.length;++f)s.push(l.activeCues[f]);pe().WebVTT.processCues(pe(),s,this.el_);for(var g=0;g<i.length;++g){for(var y=i[g],T=0;T<y.activeCues.length;++T){var S=y.activeCues[T].displayState;Ol(S,"vjs-text-track-cue"),Ol(S,"vjs-text-track-cue-"+(y.language?y.language:g)),y.language&&Of(S,"lang",y.language)}this.player_.textTrackSettings&&this.updateDisplayState(y)}}},e}(Tt);Tt.registerComponent("TextTrackDisplay",fC);var pC=function(r){function e(){return r.apply(this,arguments)||this}return Mt(e,r),e.prototype.createEl=function(){var i=this.player_.isAudio(),s=this.localize(i?"Audio Player":"Video Player"),o=Nn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),l=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return l.appendChild(o),l},e}(Tt);Tt.registerComponent("LoadingSpinner",pC);var Na=function(r){function e(){return r.apply(this,arguments)||this}Mt(e,r);var t=e.prototype;return t.createEl=function(i,s,o){void 0===s&&(s={}),void 0===o&&(o={});var l=Nn("button",s=hr({className:this.buildCSSClass()},s),o=hr({type:"button"},o));return l.appendChild(Nn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(l),l},t.addChild=function(i,s){return void 0===s&&(s={}),Pn.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),Tt.prototype.addChild.call(this,i,s)},t.enable=function(){r.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){r.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(i){bn().isEventKey(i,"Space")||bn().isEventKey(i,"Enter")?i.stopPropagation():r.prototype.handleKeyDown.call(this,i)},e}(cy);Tt.registerComponent("Button",Na);var gb=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).mouseused_=!1,s.on("mousedown",function(o){return s.handleMouseDown(o)}),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(i){var s=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var o=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Ku(s),void(this.player_.tech(!0)&&(!qu&&!$u||!o)&&this.player_.tech(!0).focus())}var l=this.player_.getChild("controlBar"),f=l&&l.getChild("playToggle");if(f){var g=function(){return f.focus()};Ff(s)?s.then(g,function(){}):this.setTimeout(g,1)}else this.player_.tech(!0).focus()},t.handleKeyDown=function(i){this.mouseused_=!1,r.prototype.handleKeyDown.call(this,i)},t.handleMouseDown=function(i){this.mouseused_=!0},e}(Na);gb.prototype.controlText_="Play Video",Tt.registerComponent("BigPlayButton",gb);var gC=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).controlText(i&&i.controlText||s.localize("Close")),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(i){bn().isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,i)},e}(Na);Tt.registerComponent("CloseButton",gC);var mb=function(r){function e(n,i){var s;return void 0===i&&(i={}),s=r.call(this,n,i)||this,i.replay=void 0===i.replay||i.replay,s.on(n,"play",function(o){return s.handlePlay(o)}),s.on(n,"pause",function(o){return s.handlePause(o)}),i.replay&&s.on(n,"ended",function(o){return s.handleEnded(o)}),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.player_.paused()?Ku(this.player_.play()):this.player_.pause()},t.handleSeeked=function(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},t.handlePlay=function(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(i){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(o){return s.handleSeeked(o)})},e}(Na);mb.prototype.controlText_="Play",Tt.registerComponent("PlayToggle",mb);var vb=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),s=Math.floor(e/3600),o=Math.floor(t/60%60),l=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=i=n="-"),(s=s>0||l>0?s+":":"")+(i=((s||o>=10)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)},fy=vb;function Hf(r,e){return void 0===e&&(e=r),fy(r,e)}var Gf=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,["timeupdate","ended"],function(o){return s.updateContent(o)}),s.updateTextNode_(),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){var i=this.buildCSSClass(),s=r.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control"}),o=Nn("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return s.appendChild(o),this.contentEl_=Nn("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},t.dispose=function(){this.contentEl_=null,this.textNode_=null,r.prototype.dispose.call(this)},t.updateTextNode_=function(i){var s=this;void 0===i&&(i=0),i=Hf(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var o=s.textNode_;o&&s.contentEl_.firstChild!==o&&(o=null,Pn.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=Dt().createTextNode(s.formattedTime_),s.textNode_&&(o?s.contentEl_.replaceChild(s.textNode_,o):s.contentEl_.appendChild(s.textNode_))}}))},t.updateContent=function(i){},e}(Tt);Gf.prototype.labelText_="Time",Gf.prototype.controlText_="Time",Tt.registerComponent("TimeDisplay",Gf);var Fc=function(r){function e(){return r.apply(this,arguments)||this}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(i){var s;s=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},e}(Gf);Fc.prototype.labelText_="Current Time",Fc.prototype.controlText_="Current Time",Tt.registerComponent("CurrentTimeDisplay",Fc);var vC=function(r){function e(n,i){var s,o=function(f){return s.updateContent(f)};return(s=r.call(this,n,i)||this).on(n,"durationchange",o),s.on(n,"loadstart",o),s.on(n,"loadedmetadata",o),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(i){var s=this.player_.duration();this.updateTextNode_(s)},e}(Gf);vC.prototype.labelText_="Duration",vC.prototype.controlText_="Duration",Tt.registerComponent("DurationDisplay",vC);var yb=function(r){function e(){return r.apply(this,arguments)||this}return Mt(e,r),e.prototype.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=r.prototype.createEl.call(this,"div"),o=r.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(o),i.appendChild(s),i},e}(Tt);Tt.registerComponent("TimeDivider",yb);var yC=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,"durationchange",function(o){return s.updateContent(o)}),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var i=r.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&i.insertBefore(Nn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},t.updateContent=function(i){var s;"number"==typeof this.player_.duration()&&(s=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(s))},e}(Gf);yC.prototype.labelText_="Remaining Time",yC.prototype.controlText_="Remaining Time",Tt.registerComponent("RemainingTimeDisplay",yC);var _C=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).updateShowing(),s.on(s.player(),"durationchange",function(o){return s.updateShowing(o)}),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Nn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Nn("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(Dt().createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i},t.dispose=function(){this.contentEl_=null,r.prototype.dispose.call(this)},t.updateShowing=function(i){this.player().duration()===1/0?this.show():this.hide()},e}(Tt);Tt.registerComponent("LiveDisplay",_C);var _b=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(o){return s.updateLiveEdgeStatus(o)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Nn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,r.prototype.dispose.call(this)},e}(Na);_b.prototype.controlText_="Seek to live, currently playing live",Tt.registerComponent("SeekToLive",_b);var bb=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},hn=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).handleMouseDown_=function(o){return s.handleMouseDown(o)},s.handleMouseUp_=function(o){return s.handleMouseUp(o)},s.handleKeyDown_=function(o){return s.handleKeyDown(o)},s.handleClick_=function(o){return s.handleClick(o)},s.handleMouseMove_=function(o){return s.handleMouseMove(o)},s.update_=function(o){return s.update(o)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}Mt(e,r);var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(i,s,o){return void 0===s&&(s={}),void 0===o&&(o={}),s.className=s.className+" vjs-slider",s=hr({tabIndex:0},s),o=hr({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},o),r.prototype.createEl.call(this,i,s,o)},t.handleMouseDown=function(i){var s=this.bar.el_.ownerDocument;"mousedown"===i.type&&i.preventDefault(),"touchstart"===i.type&&!xo&&i.preventDefault(),PS(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},t.handleMouseMove=function(i){},t.handleMouseUp=function(){var i=this.bar.el_.ownerDocument;Kv(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var i=this;if(this.el_&&this.bar){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var o=i.vertical()?"height":"width";i.bar.el().style[o]=(100*s).toFixed(2)+"%"})),s}},t.getProgress=function(){return Number(bb(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(i){var s=Q0(this.el_,i);return this.vertical()?s.y:s.x},t.handleKeyDown=function(i){bn().isEventKey(i,"Left")||bn().isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):bn().isEventKey(i,"Right")||bn().isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):r.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){i.stopPropagation(),i.preventDefault()},t.vertical=function(i){if(void 0===i)return this.vertical_||!1;this.vertical_=!!i,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},e}(Tt);Tt.registerComponent("Slider",hn);var Tb=function(e,t){return bb(e/t*100,0,100).toFixed(2)+"%"},_1=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).partEls_=[],s.on(n,"progress",function(o){return s.update(o)}),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=Nn("span",{className:"vjs-control-text"}),o=Nn("span",{textContent:this.localize("Loaded")}),l=Dt().createTextNode(": ");return this.percentageEl_=Nn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(s),s.appendChild(o),s.appendChild(l),s.appendChild(this.percentageEl_),i},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,r.prototype.dispose.call(this)},t.update=function(i){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var o=s.player_.liveTracker,l=s.player_.buffered(),f=o&&o.isLive()?o.seekableEnd():s.player_.duration(),g=s.player_.bufferedEnd(),y=s.partEls_,T=Tb(g,f);s.percent_!==T&&(s.el_.style.width=T,$d(s.percentageEl_,T),s.percent_=T);for(var S=0;S<l.length;S++){var M=l.start(S),L=l.end(S),H=y[S];H||(H=s.el_.appendChild(Nn()),y[S]=H),(H.dataset.start!==M||H.dataset.end!==L)&&(H.dataset.start=M,H.dataset.end=L,H.style.left=Tb(M,g),H.style.width=Tb(L-M,g))}for(var $=y.length;$>l.length;$--)s.el_.removeChild(y[$-1]);y.length=l.length})},e}(Tt);Tt.registerComponent("LoadProgressBar",_1);var b1=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=cu(ir(Tn(s),s.update),30),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(i,s,o){var l=Eg(this.el_),f=Oc(this.player_.el()),g=i.width*s;if(f&&l){var y=i.left-f.left+g,T=i.width-g+(f.right-i.right),S=l.width/2;y<S?S+=S-y:T<S&&(S=T),S<0?S=0:S>l.width&&(S=l.width),S=Math.round(S),this.el_.style.right="-"+S+"px",this.write(o)}},t.write=function(i){$d(this.el_,i)},t.updateTime=function(i,s,o,l){var f=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var g,y=f.player_.duration();if(f.player_.liveTracker&&f.player_.liveTracker.isLive()){var T=f.player_.liveTracker.liveWindow(),S=T-s*T;g=(S<1?"":"-")+Hf(S,T)}else g=Hf(o,y);f.update(i,s,g),l&&l()})},e}(Tt);Tt.registerComponent("TimeTooltip",b1);var $f=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=cu(ir(Tn(s),s.update),30),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(i,s){var o=this.getChild("timeTooltip");if(o){var l=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();o.updateTime(i,s,l)}},e}(Tt);$f.prototype.options_={children:[]},!Cs&&!zs&&$f.prototype.options_.children.push("timeTooltip"),Tt.registerComponent("PlayProgressBar",$f);var bC=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=cu(ir(Tn(s),s.update),30),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,s){var o=this,l=s*this.player_.duration();this.getChild("timeTooltip").updateTime(i,s,l,function(){o.el_.style.left=i.width*s+"px"})},e}(Tt);bC.prototype.options_={children:["timeTooltip"]},Tt.registerComponent("MouseTimeDisplay",bC);var Nr=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).setEventHandlers_(),s}Mt(e,r);var t=e.prototype;return t.setEventHandlers_=function(){var i=this;this.update_=ir(this,this.update),this.update=cu(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return i.enableInterval_(s)},this.disableIntervalHandler_=function(s){return i.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Dt()&&"visibilityState"in Dt()&&this.on(Dt(),"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(i){"hidden"===Dt().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},t.disableInterval_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&"ended"!==i.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(i){var s=this;if("hidden"!==Dt().visibilityState){var o=r.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var l=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),f=s.player_.liveTracker,g=s.player_.duration();f&&f.isLive()&&(g=s.player_.liveTracker.liveCurrentTime()),s.percent_!==o&&(s.el_.setAttribute("aria-valuenow",(100*o).toFixed(2)),s.percent_=o),(s.currentTime_!==l||s.duration_!==g)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[Hf(l,g),Hf(g,g)],"{1} of {2}")),s.currentTime_=l,s.duration_=g),s.bar&&s.bar.update(Oc(s.el()),s.getProgress())}),o}},t.userSeek_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var s,i=this.getCurrentTime_(),o=this.player_.liveTracker;return o&&o.isLive()?(s=(i-o.seekableStart())/o.liveWindow(),o.atLiveEdge()&&(s=1)):s=i/this.player_.duration(),s},t.handleMouseDown=function(i){!wg(i)||(i.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),r.prototype.handleMouseDown.call(this,i))},t.handleMouseMove=function(i,s){if(void 0===s&&(s=!1),wg(i)){!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var o,l=this.calculateDistance(i),f=this.player_.liveTracker;if(f&&f.isLive()){if(l>=.99)return void f.seekToLiveEdge();var g=f.seekableStart(),y=f.liveCurrentTime();if((o=g+l*f.liveWindow())>=y&&(o=y),o<=g&&(o=g+.1),o===1/0)return}else(o=l*this.player_.duration())===this.player_.duration()&&(o-=.1);this.userSeek_(o)}},t.enable=function(){r.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");!i||i.show()},t.disable=function(){r.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");!i||i.hide()},t.handleMouseUp=function(i){r.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ku(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},t.handleAction=function(i){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(i){var s=this.player_.liveTracker;if(bn().isEventKey(i,"Space")||bn().isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if(bn().isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if(bn().isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(bn()(i))){i.preventDefault(),i.stopPropagation();var o=10*(bn().codes[bn()(i)]-bn().codes[0])/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*o):this.userSeek_(this.player_.duration()*o)}else bn().isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):bn().isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):r.prototype.handleKeyDown.call(this,i)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Dt()&&"visibilityState"in Dt()&&this.off(Dt(),"visibilitychange",this.toggleVisibility_),r.prototype.dispose.call(this)},e}(hn);Nr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!Cs&&!zs&&Nr.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Tt.registerComponent("SeekBar",Nr);var T1=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).handleMouseMove=cu(ir(Tn(s),s.handleMouseMove),30),s.throttledHandleMouseSeek=cu(ir(Tn(s),s.handleMouseSeek),30),s.handleMouseUpHandler_=function(o){return s.handleMouseUp(o)},s.handleMouseDownHandler_=function(o){return s.handleMouseDown(o)},s.enable(),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(i){var s=this.getChild("seekBar");if(s){var o=s.getChild("playProgressBar"),l=s.getChild("mouseTimeDisplay");if(o||l){var f=s.el(),g=Eg(f),y=Q0(f,i).x;y=bb(y,0,1),l&&l.update(g,y),o&&o.update(g,s.getProgress())}}},t.handleMouseSeek=function(i){var s=this.getChild("seekBar");s&&s.handleMouseMove(i)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&Ku(this.player_.play())}},t.enable=function(){this.children().forEach(function(i){return i.enable&&i.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(i){var s=this.el_.ownerDocument,o=this.getChild("seekBar");o&&o.handleMouseDown(i),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var s=this.getChild("seekBar");s&&s.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},e}(Tt);T1.prototype.options_={children:["seekBar"]},Tt.registerComponent("ProgressControl",T1);var Eb=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,["enterpictureinpicture","leavepictureinpicture"],function(o){return s.handlePictureInPictureChange(o)}),s.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(o){return s.handlePictureInPictureEnabledChange(o)}),s.on(n,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===n.currentType().substring(0,5)||n.audioPosterMode()||n.audioOnlyMode()?(n.isInPictureInPicture()&&n.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+r.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){Dt().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},t.handlePictureInPictureChange=function(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Na);Eb.prototype.controlText_="Picture-in-Picture",Tt.registerComponent("PictureInPictureToggle",Eb);var TC=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,"fullscreenchange",function(o){return s.handleFullscreenChange(o)}),!1===Dt()[n.fsApi_.fullscreenEnabled]&&s.disable(),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+r.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Na);TC.prototype.controlText_="Fullscreen",Tt.registerComponent("FullscreenToggle",TC);var EC=function(r){function e(){return r.apply(this,arguments)||this}return Mt(e,r),e.prototype.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return i.appendChild(r.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),i},e}(Tt);Tt.registerComponent("VolumeLevel",EC);var wC=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=cu(ir(Tn(s),s.update),30),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(i,s,o,l){if(!o){var f=Oc(this.el_),g=Oc(this.player_.el()),y=i.width*s;if(!g||!f)return;var T=i.left-g.left+y,S=i.width-y+(g.right-i.right),M=f.width/2;T<M?M+=M-T:S<M&&(M=S),M<0?M=0:M>f.width&&(M=f.width),this.el_.style.right="-"+M+"px"}this.write(l+"%")},t.write=function(i){$d(this.el_,i)},t.updateVolume=function(i,s,o,l,f){var g=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){g.update(i,s,o,l.toFixed(0)),f&&f()})},e}(Tt);Tt.registerComponent("VolumeLevelTooltip",wC);var wb=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).update=cu(ir(Tn(s),s.update),30),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,s,o){var l=this,f=100*s;this.getChild("volumeLevelTooltip").updateVolume(i,s,o,f,function(){o?l.el_.style.bottom=i.height*s+"px":l.el_.style.left=i.width*s+"px"})},e}(Tt);wb.prototype.options_={children:["volumeLevelTooltip"]},Tt.registerComponent("MouseVolumeLevelDisplay",wb);var Dg=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on("slideractive",function(o){return s.updateLastVolume_(o)}),s.on(n,"volumechange",function(o){return s.updateARIAAttributes(o)}),n.ready(function(){return s.updateARIAAttributes()}),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(i){!wg(i)||r.prototype.handleMouseDown.call(this,i)},t.handleMouseMove=function(i){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var o=this.el(),l=Oc(o),f=this.vertical(),g=Q0(o,i);g=bb(g=f?g.y:g.x,0,1),s.update(l,g,f)}!wg(i)||(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(i){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},t.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function(){var i=this,s=this.player_.volume();this.one("sliderinactive",function(){0===i.player_.volume()&&i.player_.lastVolume_(s)})},e}(hn);Dg.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!Cs&&!zs&&Dg.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Dg.prototype.playerEvent="volumechange",Tt.registerComponent("VolumeBar",Dg);var SC=function(r){function e(n,i){var s;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||Pl(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(Tn(s=r.call(this,n,i)||this),n),s.throttledHandleMouseMove=cu(ir(Tn(s),s.handleMouseMove),30),s.handleMouseUpHandler_=function(o){return s.handleMouseUp(o)},s.on("mousedown",function(o){return s.handleMouseDown(o)}),s.on("touchstart",function(o){return s.handleMouseDown(o)}),s.on("mousemove",function(o){return s.handleMouseMove(o)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},t.handleMouseDown=function(i){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(i){this.volumeBar.handleMouseMove(i)},e}(Tt);SC.prototype.options_={children:["volumeBar"]},Tt.registerComponent("VolumeControl",SC);var CC=function(r){function e(n,i){var s;return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(Tn(s=r.call(this,n,i)||this),n),s.on(n,["loadstart","volumechange"],function(o){return s.update(o)}),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){var s=this.player_.volume(),o=this.player_.lastVolume_();0===s?(this.player_.volume(o<.1?.1:o),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},t.update=function(i){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var i=this.player_.volume(),s=3;Cs&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===i||this.player_.muted()?s=0:i<.33?s=1:i<.67&&(s=2);for(var o=0;o<4;o++)Tg(this.el_,"vjs-vol-"+o);Ol(this.el_,"vjs-vol-"+s)},t.updateControlText_=function(){var s=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},e}(Na);CC.prototype.controlText_="Mute",Tt.registerComponent("MuteToggle",CC);var qf=function(r){function e(n,i){var s;return void 0===i&&(i={}),i.inline=void 0===i.inline||i.inline,(void 0===i.volumeControl||Pl(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(s=r.call(this,n,i)||this).handleKeyPressHandler_=function(o){return s.handleKeyPress(o)},s.on(n,["loadstart"],function(o){return s.volumePanelState_(o)}),s.on(s.muteToggle,"keyup",function(o){return s.handleKeyPress(o)}),s.on(s.volumeControl,"keyup",function(o){return s.handleVolumeControlKeyUp(o)}),s.on("keydown",function(o){return s.handleKeyPress(o)}),s.on("mouseover",function(o){return s.handleMouseOver(o)}),s.on("mouseout",function(o){return s.handleMouseOut(o)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}Mt(e,r);var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},t.dispose=function(){this.handleMouseOut(),r.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(i){bn().isEventKey(i,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(i){this.addClass("vjs-hover"),Ma(Dt(),"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(i){this.removeClass("vjs-hover"),bi(Dt(),"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(i){bn().isEventKey(i,"Esc")&&this.handleMouseOut()},e}(Tt);qf.prototype.options_={children:["muteToggle","volumeControl"]},Tt.registerComponent("VolumePanel",qf);var xC=function(r){function e(n,i){var s;return s=r.call(this,n,i)||this,i&&(s.menuButton_=i.menuButton),s.focusedChild_=-1,s.on("keydown",function(o){return s.handleKeyDown(o)}),s.boundHandleBlur_=function(o){return s.handleBlur(o)},s.boundHandleTapClick_=function(o){return s.handleTapClick(o)},s}Mt(e,r);var t=e.prototype;return t.addEventListenerForItem=function(i){i instanceof Tt&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(i){i instanceof Tt&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(i){"string"==typeof i&&(i=this.getChild(i)),this.removeEventListenerForItem(i),r.prototype.removeChild.call(this,i)},t.addItem=function(i){var s=this.addChild(i);s&&this.addEventListenerForItem(s)},t.createEl=function(){this.contentEl_=Nn(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=r.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),Ma(s,"click",function(o){o.preventDefault(),o.stopImmediatePropagation()}),s},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,r.prototype.dispose.call(this)},t.handleBlur=function(i){var s=i.relatedTarget||Dt().activeElement;if(!this.children().some(function(l){return l.el()===s})){var o=this.menuButton_;o&&o.buttonPressed_&&s!==o.el().firstChild&&o.unpressButton()}},t.handleTapClick=function(i){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var o=s.filter(function(l){return l.el()===i.target})[0];if(!o)return;"CaptionSettingsMenuItem"!==o.name()&&this.menuButton_.focus()}},t.handleKeyDown=function(i){bn().isEventKey(i,"Left")||bn().isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(bn().isEventKey(i,"Right")||bn().isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},t.stepForward=function(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_+1),this.focus(i)},t.stepBack=function(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_-1),this.focus(i)},t.focus=function(i){void 0===i&&(i=0);var s=this.children().slice();s.length&&s[0].hasClass("vjs-menu-title")&&s.shift(),s.length>0&&(i<0?i=0:i>=s.length&&(i=s.length-1),this.focusedChild_=i,s[i].el_.focus())},e}(Tt);Tt.registerComponent("Menu",xC);var Sb=function(r){function e(n,i){var s;void 0===i&&(i={}),(s=r.call(this,n,i)||this).menuButton_=new Na(n,i),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var o=Na.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+o,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var l=function(g){return s.handleClick(g)};return s.handleMenuKeyUp_=function(f){return s.handleMenuKeyUp(f)},s.on(s.menuButton_,"tap",l),s.on(s.menuButton_,"click",l),s.on(s.menuButton_,"keydown",function(f){return s.handleKeyDown(f)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),Ma(Dt(),"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(f){return s.handleMouseLeave(f)}),s.on("keydown",function(f){return s.handleSubmenuKeyDown(f)}),s}Mt(e,r);var t=e.prototype;return t.update=function(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},t.createMenu=function(){var i=new xC(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=Nn("li",{className:"vjs-menu-title",textContent:ti(this.options_.title),tabIndex:-1}),o=new Tt(this.player_,{el:s});i.addItem(o)}if(this.items=this.createItems(),this.items)for(var l=0;l<this.items.length;l++)i.addItem(this.items[l]);return i},t.createItems=function(){},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var i="vjs-menu-button";return"vjs-menu-button "+(i+=!0===this.options_.inline?"-inline":"-popup")+" "+Na.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var i="vjs-menu-button";return"vjs-menu-button "+(i+=!0===this.options_.inline?"-inline":"-popup")+" "+r.prototype.buildCSSClass.call(this)},t.controlText=function(i,s){return void 0===s&&(s=this.menuButton_.el()),this.menuButton_.controlText(i,s)},t.dispose=function(){this.handleMouseLeave(),r.prototype.dispose.call(this)},t.handleClick=function(i){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(i){this.removeClass("vjs-hover"),bi(Dt(),"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(i){bn().isEventKey(i,"Esc")||bn().isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),bn().isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(bn().isEventKey(i,"Up")||bn().isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(i){(bn().isEventKey(i,"Esc")||bn().isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(i){this.handleSubmenuKeyDown(i)},t.handleSubmenuKeyDown=function(i){(bn().isEventKey(i,"Esc")||bn().isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),bn().isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Cs&&K0())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Tt);Tt.registerComponent("MenuButton",Sb);var Cb=function(r){function e(t,n){var i,s=n.tracks;if((i=r.call(this,t,n)||this).items.length<=1&&i.hide(),!s)return Tn(i);var o=ir(Tn(i),i.update);return s.addEventListener("removetrack",o),s.addEventListener("addtrack",o),s.addEventListener("labelchange",o),i.player_.on("ready",o),i.player_.on("dispose",function(){s.removeEventListener("removetrack",o),s.removeEventListener("addtrack",o),s.removeEventListener("labelchange",o)}),i}return Mt(e,r),e}(Sb);Tt.registerComponent("TrackButton",Cb);var py=["Tab","Esc","Up","Down","Right","Left"],zf=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).selectable=i.selectable,s.isSelected_=i.selected||!1,s.multiSelectable=i.multiSelectable,s.selected(s.isSelected_),s.el_.setAttribute("role",s.selectable?s.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),s}Mt(e,r);var t=e.prototype;return t.createEl=function(i,s,o){this.nonIconControl=!0;var l=r.prototype.createEl.call(this,"li",hr({className:"vjs-menu-item",tabIndex:-1},s),o);return l.replaceChild(Nn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),l.querySelector(".vjs-icon-placeholder")),l},t.handleKeyDown=function(i){py.some(function(s){return bn().isEventKey(i,s)})||r.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){this.selected(!0)},t.selected=function(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(cy);Tt.registerComponent("MenuItem",zf);var Wf=function(r){function e(n,i){var s,o=i.track,l=n.textTracks();i.label=o.label||o.language||"Unknown",i.selected="showing"===o.mode,(s=r.call(this,n,i)||this).track=o,s.kinds=(i.kinds||[i.kind||s.track.kind]).filter(Boolean);var y,f=function(){for(var S=arguments.length,M=new Array(S),L=0;L<S;L++)M[L]=arguments[L];s.handleTracksChange.apply(Tn(s),M)},g=function(){for(var S=arguments.length,M=new Array(S),L=0;L<S;L++)M[L]=arguments[L];s.handleSelectedLanguageChange.apply(Tn(s),M)};return n.on(["loadstart","texttrackchange"],f),l.addEventListener("change",f),l.addEventListener("selectedlanguagechange",g),s.on("dispose",function(){n.off(["loadstart","texttrackchange"],f),l.removeEventListener("change",f),l.removeEventListener("selectedlanguagechange",g)}),void 0===l.onchange&&s.on(["tap","click"],function(){if("object"!=typeof pe().Event)try{y=new(pe().Event)("change")}catch(T){}y||(y=Dt().createEvent("Event")).initEvent("change",!0,!0),l.dispatchEvent(y)}),s.handleTracksChange(),s}Mt(e,r);var t=e.prototype;return t.handleClick=function(i){var s=this.track,o=this.player_.textTracks();if(r.prototype.handleClick.call(this,i),o)for(var l=0;l<o.length;l++){var f=o[l];-1!==this.kinds.indexOf(f.kind)&&(f===s?"showing"!==f.mode&&(f.mode="showing"):"disabled"!==f.mode&&(f.mode="disabled"))}},t.handleTracksChange=function(i){var s="showing"===this.track.mode;s!==this.isSelected_&&this.selected(s)},t.handleSelectedLanguageChange=function(i){if("showing"===this.track.mode){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,r.prototype.dispose.call(this)},e}(zf);Tt.registerComponent("TextTrackMenuItem",Wf);var xb=function(r){function e(n,i){return i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.track.label=i.label?i.label:i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,r.call(this,n,i)||this}Mt(e,r);var t=e.prototype;return t.handleTracksChange=function(i){for(var s=this.player().textTracks(),o=!0,l=0,f=s.length;l<f;l++){var g=s[l];if(this.options_.kinds.indexOf(g.kind)>-1&&"showing"===g.mode){o=!1;break}}o!==this.isSelected_&&this.selected(o)},t.handleSelectedLanguageChange=function(i){for(var s=this.player().textTracks(),o=!0,l=0,f=s.length;l<f;l++){var g=s[l];if(["captions","descriptions","subtitles"].indexOf(g.kind)>-1&&"showing"===g.mode){o=!1;break}}o&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Wf);Tt.registerComponent("OffTextTrackMenuItem",xb);var Kf=function(r){function e(n,i){return void 0===i&&(i={}),i.tracks=n.textTracks(),r.call(this,n,i)||this}return Mt(e,r),e.prototype.createItems=function(i,s){var o;void 0===i&&(i=[]),void 0===s&&(s=Wf),this.label_&&(o=this.label_+" off"),i.push(new xb(this.player_,{kinds:this.kinds_,kind:this.kind_,label:o})),this.hideThreshold_+=1;var l=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var f=0;f<l.length;f++){var g=l[f];if(this.kinds_.indexOf(g.kind)>-1){var y=new s(this.player_,{track:g,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});y.addClass("vjs-"+g.kind+"-menu-item"),i.push(y)}}return i},e}(Cb);Tt.registerComponent("TextTrackButton",Kf);var Zf=function(r){function e(n,i){var s,o=i.track,l=i.cue,f=n.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=l.text,i.selected=l.startTime<=f&&f<l.endTime,(s=r.call(this,n,i)||this).track=o,s.cue=l,s}return Mt(e,r),e.prototype.handleClick=function(i){r.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(zf);Tt.registerComponent("ChaptersTrackMenuItem",Zf);var Jd=function(r){function e(n,i,s){var o;return(o=r.call(this,n,i,s)||this).selectCurrentItem_=function(){o.items.forEach(function(l){l.selected(o.track_.activeCues[0]===l.cue)})},o}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildWrapperCSSClass.call(this)},t.update=function(i){if(!i||!i.track||"chapters"===i.track.kind){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),r.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&r.prototype.update.call(this)}},t.setTrack=function(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var o=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);o&&o.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},t.findChaptersTrack=function(){for(var i=this.player_.textTracks()||[],s=i.length-1;s>=0;s--){var o=i[s];if(o.kind===this.kind_)return o}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ti(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),r.prototype.createMenu.call(this)},t.createItems=function(){var i=[];if(!this.track_)return i;var s=this.track_.cues;if(!s)return i;for(var o=0,l=s.length;o<l;o++){var g=new Zf(this.player_,{track:this.track_,cue:s[o]});i.push(g)}return i},e}(Kf);Jd.prototype.kind_="chapters",Jd.prototype.controlText_="Chapters",Tt.registerComponent("ChaptersButton",Jd);var Ib=function(r){function e(n,i,s){var o;o=r.call(this,n,i,s)||this;var l=n.textTracks(),f=ir(Tn(o),o.handleTracksChange);return l.addEventListener("change",f),o.on("dispose",function(){l.removeEventListener("change",f)}),o}Mt(e,r);var t=e.prototype;return t.handleTracksChange=function(i){for(var s=this.player().textTracks(),o=!1,l=0,f=s.length;l<f;l++){var g=s[l];if(g.kind!==this.kind_&&"showing"===g.mode){o=!0;break}}o?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildWrapperCSSClass.call(this)},e}(Kf);Ib.prototype.kind_="descriptions",Ib.prototype.controlText_="Descriptions",Tt.registerComponent("DescriptionsButton",Ib);var Ab=function(r){function e(n,i,s){return r.call(this,n,i,s)||this}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildWrapperCSSClass.call(this)},e}(Kf);Ab.prototype.kind_="subtitles",Ab.prototype.controlText_="Subtitles",Tt.registerComponent("SubtitlesButton",Ab);var Db=function(r){function e(n,i){var s;return i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(s=r.call(this,n,i)||this).addClass("vjs-texttrack-settings"),s.controlText(", opens "+i.kind+" settings dialog"),s}return Mt(e,r),e.prototype.handleClick=function(i){this.player().getChild("textTrackSettings").open()},e}(Wf);Tt.registerComponent("CaptionSettingsMenuItem",Db);var gy=function(r){function e(n,i,s){return r.call(this,n,i,s)||this}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new Db(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),r.prototype.createItems.call(this,i)},e}(Kf);gy.prototype.kind_="captions",gy.prototype.controlText_="Captions",Tt.registerComponent("CaptionsButton",gy);var kb=function(r){function e(){return r.apply(this,arguments)||this}return Mt(e,r),e.prototype.createEl=function(i,s,o){var l=r.prototype.createEl.call(this,i,s,o),f=l.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(f.appendChild(Nn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(Nn("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),l},e}(Wf);Tt.registerComponent("SubsCapsMenuItem",kb);var my=function(r){function e(n,i){var s;return void 0===i&&(i={}),(s=r.call(this,n,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(ti(s.label_)),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new Db(this.player_,{kind:this.label_})),this.hideThreshold_+=1),r.prototype.createItems.call(this,i,kb)},e}(Kf);my.prototype.kinds_=["captions","subtitles"],my.prototype.controlText_="Subtitles",Tt.registerComponent("SubsCapsButton",my);var IC=function(r){function e(n,i){var s,o=i.track,l=n.audioTracks();i.label=o.label||o.language||"Unknown",i.selected=o.enabled,(s=r.call(this,n,i)||this).track=o,s.addClass("vjs-"+o.kind+"-menu-item");var f=function(){for(var y=arguments.length,T=new Array(y),S=0;S<y;S++)T[S]=arguments[S];s.handleTracksChange.apply(Tn(s),T)};return l.addEventListener("change",f),s.on("dispose",function(){l.removeEventListener("change",f)}),s}Mt(e,r);var t=e.prototype;return t.createEl=function(i,s,o){var l=r.prototype.createEl.call(this,i,s,o),f=l.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(f.appendChild(Nn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(Nn("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),l},t.handleClick=function(i){if(r.prototype.handleClick.call(this,i),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),o=0;o<s.length;o++){var l=s[o];l!==this.track&&(l.enabled=l===this.track)}},t.handleTracksChange=function(i){this.selected(this.track.enabled)},e}(zf);Tt.registerComponent("AudioTrackMenuItem",IC);var Mb=function(r){function e(n,i){return void 0===i&&(i={}),i.tracks=n.audioTracks(),r.call(this,n,i)||this}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(i){void 0===i&&(i=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),o=0;o<s.length;o++)i.push(new IC(this.player_,{track:s[o],selectable:!0,multiSelectable:!1}));return i},e}(Cb);Mb.prototype.controlText_="Audio Track",Tt.registerComponent("AudioTrackButton",Mb);var Pb=function(r){function e(n,i){var s,o=i.rate,l=parseFloat(o,10);return i.label=o,i.selected=l===n.playbackRate(),i.selectable=!0,i.multiSelectable=!1,(s=r.call(this,n,i)||this).label=o,s.rate=l,s.on(n,"ratechange",function(f){return s.update(f)}),s}Mt(e,r);var t=e.prototype;return t.handleClick=function(i){r.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(i){this.selected(this.player().playbackRate()===this.rate)},e}(zf);Pb.prototype.contentElType="button",Tt.registerComponent("PlaybackRateMenuItem",Pb);var AC=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(n,"loadstart",function(o){return s.updateVisibility(o)}),s.on(n,"ratechange",function(o){return s.updateLabel(o)}),s.on(n,"playbackrateschange",function(o){return s.handlePlaybackRateschange(o)}),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Nn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i},t.dispose=function(){this.labelEl_=null,r.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var i=this.playbackRates(),s=[],o=i.length-1;o>=0;o--)s.push(new Pb(this.player(),{rate:i[o]+"x"}));return s},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(i){var s=this.player().playbackRate(),o=this.playbackRates(),f=(o.indexOf(s)+1)%o.length;this.player().playbackRate(o[f])},t.handlePlaybackRateschange=function(i){this.update()},t.playbackRates=function(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(Sb);AC.prototype.controlText_="Playback Rate",Tt.registerComponent("PlaybackRateMenuButton",AC);var S1=function(r){function e(){return r.apply(this,arguments)||this}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+r.prototype.buildCSSClass.call(this)},t.createEl=function(i,s,o){return void 0===i&&(i="div"),void 0===s&&(s={}),void 0===o&&(o={}),s.className||(s.className=this.buildCSSClass()),r.prototype.createEl.call(this,i,s,o)},e}(Tt);Tt.registerComponent("Spacer",S1);var pN=function(r){function e(){return r.apply(this,arguments)||this}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+r.prototype.buildCSSClass.call(this)},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},e}(S1);Tt.registerComponent("CustomControlSpacer",pN);var Ob=function(r){function e(){return r.apply(this,arguments)||this}return Mt(e,r),e.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Tt);Ob.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Dt()&&Ob.prototype.options_.children.splice(Ob.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Tt.registerComponent("ControlBar",Ob);var C1=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).on(n,"error",function(o){return s.open(o)}),s}Mt(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+r.prototype.buildCSSClass.call(this)},t.content=function(){var i=this.player().error();return i?this.localize(i.message):""},e}(jf);C1.prototype.options_=Aa({},jf.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Tt.registerComponent("ErrorDisplay",C1);var vy="vjs-text-track-settings",kg=["#000","Black"],DC=["#00F","Blue"],kC=["#0FF","Cyan"],Rb=["#0F0","Green"],Yf=["#F0F","Magenta"],MC=["#F00","Red"],PC=["#FFF","White"],OC=["#FF0","Yellow"],Nb=["1","Opaque"],Lb=["0.5","Semi-Transparent"],Fb=["0","Transparent"],eh={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[kg,PC,MC,Rb,DC,OC,Yf,kC]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Nb,Lb,Fb]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[PC,kg,MC,Rb,DC,OC,Yf,kC]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Nb,Lb]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Fb,Lb,Nb]}};function RC(r,e){if(e&&(r=e(r)),r&&"none"!==r)return r}eh.windowColor.options=eh.backgroundColor.options;var NC=function(r){function e(n,i){var s;return i.temporary=!1,(s=r.call(this,n,i)||this).updateDisplay=s.updateDisplay.bind(Tn(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=Nn("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),void 0===i.persistTextTrackSettings&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),kf(eh,function(o){s.on(s.$(o.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}Mt(e,r);var t=e.prototype;return t.dispose=function(){this.endDialog=null,r.prototype.dispose.call(this)},t.createElSelect_=function(i,s,o){var l=this;void 0===s&&(s=""),void 0===o&&(o="label");var f=eh[i],g=f.id.replace("%s",this.id_),y=[s,g].join(" ").trim();return["<"+o+' id="'+g+'" class="'+("label"===o?"vjs-label":"")+'">',this.localize(f.label),"</"+o+">",'<select aria-labelledby="'+y+'">'].concat(f.options.map(function(T){var S=g+"-"+T[1].replace(/\W+/g,"");return['<option id="'+S+'" value="'+T[0]+'" ','aria-labelledby="'+y+" "+S+'">',l.localize(T[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return Nn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return Nn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var i=this.localize("restore all settings to the default values");return Nn("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return r.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var i=this;return function $v(r,e,t){return void 0===t&&(t=0),xS(r).reduce(function(n,i){return e(n,r[i],i)},t)}(eh,function(s,o,l){var f=function Qf(r,e){return RC(r.options[r.options.selectedIndex].value,e)}(i.$(o.selector),o.parser);return void 0!==f&&(s[l]=f),s},{})},t.setValues=function(i){var s=this;kf(eh,function(o,l){!function x1(r,e,t){if(e)for(var n=0;n<r.options.length;n++)if(RC(r.options[n].value,t)===e){r.selectedIndex=n;break}}(s.$(o.selector),i[l],o.parser)})},t.setDefaults=function(){var i=this;kf(eh,function(s){var o=s.hasOwnProperty("default")?s.default:0;i.$(s.selector).selectedIndex=o})},t.restoreSettings=function(){var i;try{i=JSON.parse(pe().localStorage.getItem(vy))}catch(s){Pn.warn(s)}i&&this.setValues(i)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?pe().localStorage.setItem(vy,JSON.stringify(i)):pe().localStorage.removeItem(vy)}catch(s){Pn.warn(s)}}},t.updateDisplay=function(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,s=i&&i.subsCapsButton,o=i&&i.captionsButton;s?s.focus():o&&o.focus()},e}(jf);Tt.registerComponent("TextTrackSettings",NC);var I1=function(r){function e(n,i){var s,o=i.ResizeObserver||pe().ResizeObserver;null===i.ResizeObserver&&(o=!1);var l=br({createEl:!o,reportTouchActivity:!1},i);return(s=r.call(this,n,l)||this).ResizeObserver=i.ResizeObserver||pe().ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=function(e,t,n,i){void 0===i&&(i=pe());var s,l=function(){var g=this,y=arguments,T=function(){s=null,T=null,e.apply(g,y)};i.clearTimeout(s),s=i.setTimeout(T,100)};return l.cancel=function(){i.clearTimeout(s),s=null},l}(function(){s.resizeHandler()},0,0,Tn(s)),o?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(n.el())):(s.loadListener_=function(){if(s.el_&&s.el_.contentWindow){var f=s.debouncedHandler_,g=s.unloadListener_=function(){bi(this,"resize",f),bi(this,"unload",g),g=null};Ma(s.el_.contentWindow,"unload",g),Ma(s.el_.contentWindow,"resize",f)}},s.one("load",s.loadListener_)),s}Mt(e,r);var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,r.prototype.dispose.call(this)},e}(Tt);Tt.registerComponent("ResizeManager",I1);var LC={trackingThreshold:20,liveTolerance:15},A1=function(r){function e(n,i){var s,o=br(LC,i,{createEl:!1});return(s=r.call(this,n,o)||this).handleVisibilityChange_=function(l){return s.handleVisibilityChange(l)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(l){return s.handlePlay(l)},s.handleFirstTimeupdate_=function(l){return s.handleFirstTimeupdate(l)},s.handleSeeked_=function(l){return s.handleSeeked(l)},s.seekToLiveEdge_=function(l){return s.seekToLiveEdge(l)},s.reset_(),s.on(s.player_,"durationchange",function(l){return s.handleDurationchange(l)}),s.on(s.player_,"canplay",function(){return s.toggleTracking()}),qu&&"hidden"in Dt()&&"visibilityState"in Dt()&&s.on(Dt(),"visibilitychange",s.handleVisibilityChange_),s}Mt(e,r);var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Dt().hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var i=this.player_.seekable();if(i&&i.length){var s=Number(pe().performance.now().toFixed(4)),o=-1===this.lastTime_?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+o;var l=this.liveCurrentTime(),f=this.player_.currentTime(),g=this.player_.paused()||this.seekedBehindLive_||Math.abs(l-f)>this.options_.liveTolerance;(!this.timeupdateSeen_||l===1/0)&&(g=!1),g!==this.behindLiveEdge_&&(this.behindLiveEdge_=g,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var i=this.player_.seekable(),s=[],o=i?i.length:0;o--;)s.push(i.end(o));return s.length?s.sort()[s.length-1]:1/0},t.seekableStart=function(){for(var i=this.player_.seekable(),s=[],o=i?i.length:0;o--;)s.push(i.start(o));return s.length?s.sort()[0]:0},t.liveWindow=function(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var i=this.seekableEnd();return-1!==this.lastSeekEnd_&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(Dt(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),r.prototype.dispose.call(this)},e}(Tt);Tt.registerComponent("LiveTracker",A1);var by,yy=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],s="";if(!n.length)return!1;for(var o=0;o<n.length;o++){var l=n[o].src;l&&-1===i.indexOf(l)&&i.push(l)}return!!i.length&&(1===i.length&&(s=i[0]),e.triggerSourceset(s),!0)},D1=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Dt().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=Dt().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",pe().Element.prototype.appendChild.call(this,n),this.innerHTML}}),_y=function(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},jb=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},i=function(e){return _y([e.el(),pe().HTMLMediaElement.prototype,pe().Element.prototype,D1],"innerHTML")}(e),s=function(l){return function(){for(var f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];var T=l.apply(t,g);return yy(e),T}};["append","appendChild","insertAdjacentHTML"].forEach(function(o){!t[o]||(n[o]=t[o],t[o]=s(n[o]))}),Object.defineProperty(t,"innerHTML",br(i,{set:s(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach(function(o){t[o]=n[o]}),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},FC=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Oa(pe().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return pe().Element.prototype.setAttribute.call(this,"src",e),e}}),Ub=function(e,t,n,i){void 0===i&&(i=!0);var s=function(f){return Object.defineProperty(e,t,{value:f,enumerable:!0,writable:!0})},o={configurable:!0,enumerable:!0,get:function(){var f=n();return s(f),f}};return i&&(o.set=s),Object.defineProperty(e,t,o)},Lt=function(r){function e(n,i){var s;s=r.call(this,n,i)||this;var o=n.source,l=!1;if(o&&(s.el_.currentSrc!==o.src||n.tag&&3===n.tag.initNetworkState_)?s.setSource(o):s.handleLateInit_(s.el_),n.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var f=s.el_.childNodes,g=f.length,y=[];g--;){var T=f[g];"track"===T.nodeName.toLowerCase()&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(T),s.remoteTextTracks().addTrack(T.track),s.textTracks().addTrack(T.track),!l&&!s.el_.hasAttribute("crossorigin")&&xg(T.src)&&(l=!0)):y.push(T))}for(var M=0;M<y.length;M++)s.el_.removeChild(y[M])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&l&&Pn.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),s.restoreMetadataTracksInIOSNativePlayer_(),(lu||Mc||Yo)&&!0===n.nativeControlsForTouch&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&"VIDEO"===s.el_.tagName,s.triggerReady(),s}Mt(e,r);var t=e.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,r.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return _y([e.el(),pe().HTMLMediaElement.prototype,FC],"src")}(e),i=t.setAttribute,s=t.load;Object.defineProperty(t,"src",br(n,{set:function(l){var f=n.set.call(t,l);return e.triggerSourceset(t.src),f}})),t.setAttribute=function(o,l){var f=i.call(t,o,l);return/src/i.test(o)&&e.triggerSourceset(t.src),f},t.load=function(){var o=s.call(t);return yy(e)||(e.triggerSourceset(""),jb(e)),o},t.currentSrc?e.triggerSourceset(t.currentSrc):yy(e)||jb(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=s,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var s,i=this.textTracks(),o=function(){s=[];for(var g=0;g<i.length;g++){var y=i[g];"metadata"===y.kind&&s.push({track:y,storedMode:y.mode})}};o(),i.addEventListener("change",o),this.on("dispose",function(){return i.removeEventListener("change",o)});var l=function f(){for(var g=0;g<s.length;g++){var y=s[g];"disabled"===y.track.mode&&y.track.mode!==y.storedMode&&(y.track.mode=y.storedMode)}i.removeEventListener("change",f)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",o),i.removeEventListener("change",l),i.addEventListener("change",l)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",o),i.addEventListener("change",o),i.removeEventListener("change",l)})},t.overrideNative_=function(i,s){var o=this;if(s===this["featuresNative"+i+"Tracks"]){var l=i.toLowerCase();this[l+"TracksListeners_"]&&Object.keys(this[l+"TracksListeners_"]).forEach(function(f){o.el()[l+"Tracks"].removeEventListener(f,o[l+"TracksListeners_"][f])}),this["featuresNative"+i+"Tracks"]=!s,this[l+"TracksListeners_"]=null,this.proxyNativeTracksForType_(l)}},t.overrideNativeAudioTracks=function(i){this.overrideNative_("Audio",i)},t.overrideNativeVideoTracks=function(i){this.overrideNative_("Video",i)},t.proxyNativeTracksForType_=function(i){var s=this,o=Jo[i],l=this.el()[o.getterName],f=this[o.getterName]();if(this["featuresNative"+o.capitalName+"Tracks"]&&l&&l.addEventListener){var g={change:function(S){var M={type:"change",target:f,currentTarget:f,srcElement:f};f.trigger(M),"text"===i&&s[Nl.remoteText.getterName]().trigger(M)},addtrack:function(S){f.addTrack(S.track)},removetrack:function(S){f.removeTrack(S.track)}},y=function(){for(var S=[],M=0;M<f.length;M++){for(var L=!1,H=0;H<l.length;H++)if(l[H]===f[M]){L=!0;break}L||S.push(f[M])}for(;S.length;)f.removeTrack(S.shift())};this[o.getterName+"Listeners_"]=g,Object.keys(g).forEach(function(T){var S=g[T];l.addEventListener(T,S),s.on("dispose",function(M){return l.removeEventListener(T,S)})}),this.on("loadstart",y),this.on("dispose",function(T){return s.off("loadstart",y)})}},t.proxyNativeTracks_=function(){var i=this;Jo.names.forEach(function(s){i.proxyNativeTracksForType_(s)})},t.createEl=function(){var i=this.options_.tag;if(!i||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(i){var s=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(s,i),e.disposeMediaElement(i),i=s}else{i=Dt().createElement("video");var l=br({},this.options_.tag&&zu(this.options_.tag));(!lu||!0!==this.options_.nativeControlsForTouch)&&delete l.controls,kS(i,hr(l,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}void 0!==this.options_.preload&&Of(i,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var f=["loop","muted","playsinline","autoplay"],g=0;g<f.length;g++){var y=f[g],T=this.options_[y];void 0!==T&&(T?Of(i,y,y):Y0(i,y),i[y]=T)}return i},t.handleLateInit_=function(i){if(0!==i.networkState&&3!==i.networkState){if(0===i.readyState){var s=!1,o=function(){s=!0};this.on("loadstart",o);var l=function(){s||this.trigger("loadstart")};return this.on("loadedmetadata",l),void this.ready(function(){this.off("loadstart",o),this.off("loadedmetadata",l),s||this.trigger("loadstart")})}var f=["loadstart"];f.push("loadedmetadata"),i.readyState>=2&&f.push("loadeddata"),i.readyState>=3&&f.push("canplay"),i.readyState>=4&&f.push("canplaythrough"),this.ready(function(){f.forEach(function(g){this.trigger(g)},this)})}},t.setScrubbing=function(i){this.isScrubbing_=i},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(i){try{this.isScrubbing_&&this.el_.fastSeek&&bg?this.el_.fastSeek(i):this.el_.currentTime=i}catch(s){Pn(s,"Video is not ready. (Video.js)")}},t.duration=function(){var i=this;return this.el_.duration===1/0&&zs&&xo&&0===this.el_.currentTime?(this.on("timeupdate",function o(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",o))}),NaN):this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},o=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",o),this.on("dispose",function(){i.off("webkitbeginfullscreen",o),i.off("webkitendfullscreen",s)})}},t.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var i=pe().navigator&&pe().navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},t.enterFullScreen=function(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)Ku(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},t.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.requestVideoFrameCallback=function(i){return this.featuresVideoFrameCallback?this.el_.requestVideoFrameCallback(i):r.prototype.requestVideoFrameCallback.call(this,i)},t.cancelVideoFrameCallback=function(i){this.featuresVideoFrameCallback?this.el_.cancelVideoFrameCallback(i):r.prototype.cancelVideoFrameCallback.call(this,i)},t.src=function(i){if(void 0===i)return this.el_.src;this.setSrc(i)},t.reset=function(){e.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(i){this.el_.controls=!!i},t.addTextTrack=function(i,s,o){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,s,o):r.prototype.addTextTrack.call(this,i,s,o)},t.createRemoteTextTrack=function(i){if(!this.featuresNativeTextTracks)return r.prototype.createRemoteTextTrack.call(this,i);var s=Dt().createElement("track");return i.kind&&(s.kind=i.kind),i.label&&(s.label=i.label),(i.language||i.srclang)&&(s.srclang=i.language||i.srclang),i.default&&(s.default=i.default),i.id&&(s.id=i.id),i.src&&(s.src=i.src),s},t.addRemoteTextTrack=function(i,s){var o=r.prototype.addRemoteTextTrack.call(this,i,s);return this.featuresNativeTextTracks&&this.el().appendChild(o),o},t.removeRemoteTextTrack=function(i){if(r.prototype.removeRemoteTextTrack.call(this,i),this.featuresNativeTextTracks)for(var s=this.$$("track"),o=s.length;o--;)(i===s[o]||i===s[o].track)&&this.el().removeChild(s[o])},t.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var i={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),pe().performance&&"function"==typeof pe().performance.now?i.creationTime=pe().performance.now():pe().performance&&pe().performance.timing&&"number"==typeof pe().performance.timing.navigationStart&&(i.creationTime=pe().Date.now()-pe().performance.timing.navigationStart),i},e}(sr);Ub(Lt,"TEST_VID",function(){if(Hd()){var r=Dt().createElement("video"),e=Dt().createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r}}),Lt.isSupported=function(){try{Lt.TEST_VID.volume=.5}catch(r){return!1}return!(!Lt.TEST_VID||!Lt.TEST_VID.canPlayType)},Lt.canPlayType=function(r){return Lt.TEST_VID.canPlayType(r)},Lt.canPlaySource=function(r,e){return Lt.canPlayType(r.type)},Lt.canControlVolume=function(){try{var r=Lt.TEST_VID.volume;Lt.TEST_VID.volume=r/2+.1;var e=r!==Lt.TEST_VID.volume;return e&&Cs?(pe().setTimeout(function(){Lt&&Lt.prototype&&(Lt.prototype.featuresVolumeControl=r!==Lt.TEST_VID.volume)}),!1):e}catch(t){return!1}},Lt.canMuteVolume=function(){try{var r=Lt.TEST_VID.muted;return Lt.TEST_VID.muted=!r,Lt.TEST_VID.muted?Of(Lt.TEST_VID,"muted","muted"):Y0(Lt.TEST_VID,"muted"),r!==Lt.TEST_VID.muted}catch(e){return!1}},Lt.canControlPlaybackRate=function(){if(zs&&xo&&Bd<58)return!1;try{var r=Lt.TEST_VID.playbackRate;return Lt.TEST_VID.playbackRate=r/2+.1,r!==Lt.TEST_VID.playbackRate}catch(e){return!1}},Lt.canOverrideAttributes=function(){try{var r=function(){};Object.defineProperty(Dt().createElement("video"),"src",{get:r,set:r}),Object.defineProperty(Dt().createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(Dt().createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(Dt().createElement("audio"),"innerHTML",{get:r,set:r})}catch(e){return!1}return!0},Lt.supportsNativeTextTracks=function(){return bg||Cs&&xo},Lt.supportsNativeVideoTracks=function(){return!(!Lt.TEST_VID||!Lt.TEST_VID.videoTracks)},Lt.supportsNativeAudioTracks=function(){return!(!Lt.TEST_VID||!Lt.TEST_VID.audioTracks)},Lt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(r){var t=r[1];Ub(Lt.prototype,r[0],function(){return Lt[t]()},!0)}),Lt.prototype.featuresVolumeControl=Lt.canControlVolume(),Lt.prototype.movingMediaElementInDOM=!Cs,Lt.prototype.featuresFullscreenResize=!0,Lt.prototype.featuresProgressEvents=!0,Lt.prototype.featuresTimeupdateEvents=!0,Lt.prototype.featuresVideoFrameCallback=!(!Lt.TEST_VID||!Lt.TEST_VID.requestVideoFrameCallback),Lt.patchCanPlayType=function(){Pf>=4&&!zv&&!xo&&(by=Lt.TEST_VID&&Lt.TEST_VID.constructor.prototype.canPlayType,Lt.TEST_VID.constructor.prototype.canPlayType=function(r){return r&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(r)?"maybe":by.call(this,r)})},Lt.unpatchCanPlayType=function(){var r=Lt.TEST_VID.constructor.prototype.canPlayType;return by&&(Lt.TEST_VID.constructor.prototype.canPlayType=by),r},Lt.patchCanPlayType(),Lt.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),"function"==typeof r.load&&function(){try{r.load()}catch(e){}}()}},Lt.resetMediaElement=function(r){if(r){for(var e=r.querySelectorAll("source"),t=e.length;t--;)r.removeChild(e[t]);r.removeAttribute("src"),"function"==typeof r.load&&function(){try{r.load()}catch(n){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){Lt.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){Lt.prototype["set"+ti(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){Lt.prototype[r]=function(){return this.el_[r]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){Lt.prototype["set"+ti(r)]=function(e){this.el_[r]=e}}),["pause","load","play"].forEach(function(r){Lt.prototype[r]=function(){return this.el_[r]()}}),sr.withSourceHandlers(Lt),Lt.nativeSourceHandler={},Lt.nativeSourceHandler.canPlayType=function(r){try{return Lt.TEST_VID.canPlayType(r)}catch(e){return""}},Lt.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return Lt.nativeSourceHandler.canPlayType(r.type);if(r.src){var t=Xo(r.src);return Lt.nativeSourceHandler.canPlayType("video/"+t)}return""},Lt.nativeSourceHandler.handleSource=function(r,e,t){e.setSrc(r.src)},Lt.nativeSourceHandler.dispose=function(){},Lt.registerSourceHandler(Lt.nativeSourceHandler),sr.registerTech("Html5",Lt);var Bb=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Vb={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Hb=["tiny","xsmall","small","medium","large","xlarge","huge"],Ty={};Hb.forEach(function(r){var e="x"===r.charAt(0)?"x-"+r.substring(1):r;Ty[r]="vjs-layout-"+e});var O1={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Ti=function(r){function e(n,i,s){var o;if(n.id=n.id||i.id||"vjs_video_"+Rl(),(i=hr(e.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var l=n.closest("[lang]");l&&l.getAttribute&&(i.language=l.getAttribute("lang"))}else for(var f=n;f&&1===f.nodeType;){if(zu(f).hasOwnProperty("lang")){i.language=f.getAttribute("lang");break}f=f.parentNode}if((o=r.call(this,null,i,s)||this).boundDocumentFullscreenChange_=function(S){return o.documentFullscreenChange_(S)},o.boundFullWindowOnEscKey_=function(S){return o.fullWindowOnEscKey(S)},o.boundUpdateStyleEl_=function(S){return o.updateStyleEl_(S)},o.boundApplyInitTime_=function(S){return o.applyInitTime_(S)},o.boundUpdateCurrentBreakpoint_=function(S){return o.updateCurrentBreakpoint_(S)},o.boundHandleTechClick_=function(S){return o.handleTechClick_(S)},o.boundHandleTechDoubleClick_=function(S){return o.handleTechDoubleClick_(S)},o.boundHandleTechTouchStart_=function(S){return o.handleTechTouchStart_(S)},o.boundHandleTechTouchMove_=function(S){return o.handleTechTouchMove_(S)},o.boundHandleTechTouchEnd_=function(S){return o.handleTechTouchEnd_(S)},o.boundHandleTechTap_=function(S){return o.handleTechTap_(S)},o.isFullscreen_=!1,o.log=CS(o.id_),o.fsApi_=mg,o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,o.debugEnabled_=!1,o.audioOnlyMode_=!1,o.audioPosterMode_=!1,o.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=n,o.tagAttributes=n&&zu(n),o.language(o.options_.language),i.languages){var g={};Object.getOwnPropertyNames(i.languages).forEach(function(S){g[S.toLowerCase()]=i.languages[S]}),o.languages_=g}else o.languages_=e.prototype.options_.languages;o.resetCache_(),o.poster_=i.poster||"",o.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),o.changingSrc_=!1,o.playCallbacks_=[],o.playTerminatedQueue_=[],n.hasAttribute("autoplay")?o.autoplay(!0):o.autoplay(o.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(S){if("function"!=typeof o[S])throw new Error('plugin "'+S+'" does not exist')}),o.scrubbing_=!1,o.el_=o.createEl(),ry(Tn(o),{eventBusKey:"el_"}),o.fsApi_.requestFullscreen&&(Ma(Dt(),o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_),o.on(o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_)),o.fluid_&&o.on(["playerreset","resize"],o.boundUpdateStyleEl_);var y=br(o.options_);i.plugins&&Object.keys(i.plugins).forEach(function(S){o[S](i.plugins[S])}),i.debug&&o.debug(!0),o.options_.playerOptions=y,o.middleware_=[],o.playbackRates(i.playbackRates),o.initChildren(),o.isAudio("audio"===n.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),lu&&o.addClass("vjs-touch-enabled"),Cs||o.addClass("vjs-workinghover"),e.players[o.id_]=Tn(o);var T="7.20.1".split(".")[0];return o.addClass("vjs-v"+T),o.userActive(!0),o.reportUserActivity(),o.one("play",function(S){return o.listenForUserActivity_(S)}),o.on("stageclick",function(S){return o.handleStageClick_(S)}),o.on("keydown",function(S){return o.handleKeyDown(S)}),o.on("languagechange",function(S){return o.handleLanguagechange(S)}),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o.on("ready",function(){o.audioPosterMode(o.options_.audioPosterMode),o.audioOnlyMode(o.options_.audioOnlyMode)}),o}Mt(e,r);var t=e.prototype;return t.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),bi(Dt(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),bi(Dt(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function d1(r){Bf[r.id()]=null}(this),Zs.names.forEach(function(s){var l=i[Zs[s].getterName]();l&&l.off&&l.off()}),r.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},t.createEl=function(){var s,i=this.tag,o=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),l="video-js"===this.tag.tagName.toLowerCase();o?s=this.el_=i.parentNode:l||(s=this.el_=r.prototype.createEl.call(this,"div"));var f=zu(i);if(l){for(s=this.el_=i,i=this.tag=Dt().createElement("video");s.children.length;)i.appendChild(s.firstChild);Pc(s,"video-js")||Ol(s,"video-js"),s.appendChild(i),o=this.playerElIngest_=s,Object.keys(s).forEach(function(L){try{i[L]=s[L]}catch(H){}})}if(i.setAttribute("tabindex","-1"),f.tabindex="-1",(qu||xo&&Vd)&&(i.setAttribute("role","application"),f.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in f&&delete f.width,"height"in f&&delete f.height,Object.getOwnPropertyNames(f).forEach(function(L){l&&"class"===L||s.setAttribute(L,f[L]),l&&i.setAttribute(L,f[L])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=s.player=this,this.addClass("vjs-paused"),!0!==pe().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=FS("vjs-styles-dimensions");var g=Qo(".vjs-styles-defaults"),y=Qo("head");y.insertBefore(this.styleEl_,g?g.nextSibling:y.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var T=i.getElementsByTagName("a"),S=0;S<T.length;S++){var M=T.item(S);Ol(M,"vjs-hidden"),M.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!o&&i.parentNode.insertBefore(s,i),Wv(i,s),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},t.crossOrigin=function(i){if(!i)return this.techGet_("crossOrigin");"anonymous"===i||"use-credentials"===i?this.techCall_("setCrossOrigin",i):Pn.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"')},t.width=function(i){return this.dimension("width",i)},t.height=function(i){return this.dimension("height",i)},t.dimension=function(i,s){var o=i+"_";if(void 0===s)return this[o]||0;if(""===s||"auto"===s)return this[o]=void 0,void this.updateStyleEl_();var l=parseFloat(s);isNaN(l)?Pn.error('Improper value "'+s+'" supplied for for '+i):(this[o]=l,this.updateStyleEl_())},t.fluid=function(i){var s=this;if(void 0===i)return!!this.fluid_;this.fluid_=!!i,Wu(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),function(e,t){Wu(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))}(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(i){if(void 0===i)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(i){if(void 0===i)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(!0!==pe().VIDEOJS_NO_DYNAMIC_STYLE){var l,f,y,T=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),S=T[1]/T[0];l=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/S:this.videoWidth()||300,f=void 0!==this.height_?this.height_:l*S,y=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(y),jS(this.styleEl_,"\n      ."+y+" {\n        width: "+l+"px;\n        height: "+f+"px;\n      }\n\n      ."+y+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*S+"%;\n      }\n    ")}else{var i="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(i>=0&&(o.width=i),s>=0&&(o.height=s))}},t.loadTech_=function(i,s){var o=this;this.tech_&&this.unloadTech_();var l=ti(i),f=i.charAt(0).toLowerCase()+i.slice(1);"Html5"!==l&&this.tag&&(sr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=l,this.isReady_=!1;var g=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(g=!1);var y={source:s,autoplay:g,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+f+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Zs.names.forEach(function(S){var M=Zs[S];y[M.getterName]=o[M.privateName]}),hr(y,this.options_[l]),hr(y,this.options_[f]),hr(y,this.options_[i.toLowerCase()]),this.tag&&(y.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(y.startTime=this.cache_.currentTime);var T=sr.getTech(i);if(!T)throw new Error("No Tech named '"+l+"' exists! '"+l+"' should be registered using videojs.registerTech()'");this.tech_=new T(y),this.tech_.ready(ir(this,this.handleTechReady_),!0),function(e,t){e.forEach(function(n){var i=t.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(s){return i.addCue(s)})}),t.textTracks()}(this.textTracksJson_||[],this.tech_),Bb.forEach(function(S){o.on(o.tech_,S,function(M){return o["handleTech"+ti(S)+"_"](M)})}),Object.keys(Vb).forEach(function(S){o.on(o.tech_,S,function(M){0===o.tech_.playbackRate()&&o.tech_.seeking()?o.queuedCallbacks_.push({callback:o["handleTech"+Vb[S]+"_"].bind(o),event:M}):o["handleTech"+Vb[S]+"_"](M)})}),this.on(this.tech_,"loadstart",function(S){return o.handleTechLoadStart_(S)}),this.on(this.tech_,"sourceset",function(S){return o.handleTechSourceset_(S)}),this.on(this.tech_,"waiting",function(S){return o.handleTechWaiting_(S)}),this.on(this.tech_,"ended",function(S){return o.handleTechEnded_(S)}),this.on(this.tech_,"seeking",function(S){return o.handleTechSeeking_(S)}),this.on(this.tech_,"play",function(S){return o.handleTechPlay_(S)}),this.on(this.tech_,"firstplay",function(S){return o.handleTechFirstPlay_(S)}),this.on(this.tech_,"pause",function(S){return o.handleTechPause_(S)}),this.on(this.tech_,"durationchange",function(S){return o.handleTechDurationChange_(S)}),this.on(this.tech_,"fullscreenchange",function(S,M){return o.handleTechFullscreenChange_(S,M)}),this.on(this.tech_,"fullscreenerror",function(S,M){return o.handleTechFullscreenError_(S,M)}),this.on(this.tech_,"enterpictureinpicture",function(S){return o.handleTechEnterPictureInPicture_(S)}),this.on(this.tech_,"leavepictureinpicture",function(S){return o.handleTechLeavePictureInPicture_(S)}),this.on(this.tech_,"error",function(S){return o.handleTechError_(S)}),this.on(this.tech_,"posterchange",function(S){return o.handleTechPosterChange_(S)}),this.on(this.tech_,"textdata",function(S){return o.handleTechTextData_(S)}),this.on(this.tech_,"ratechange",function(S){return o.handleTechRateChange_(S)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==l||!this.tag)&&Wv(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var i=this;Zs.names.forEach(function(s){var o=Zs[s];i[o.privateName]=i[o.getterName]()}),this.textTracksJson_=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(s){return s.track});return Array.prototype.map.call(t,function(s){var o=hi(s.track);return s.src&&(o.src=s.src),o}).concat(Array.prototype.filter.call(e.textTracks(),function(s){return-1===n.indexOf(s)}).map(hi))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(i){return void 0===i&&Pn.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(i){var s=this;if(this.tech_&&"string"==typeof i){var l,o=function(){var g=s.muted();s.muted(!0);var y=function(){s.muted(g)};s.playTerminatedQueue_.push(y);var T=s.play();if(Ff(T))return T.catch(function(S){throw y(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(S||""))})};if("any"!==i||this.muted()?l="muted"!==i||this.muted()?this.play():o():Ff(l=this.play())&&(l=l.catch(o)),Ff(l))return l.then(function(){s.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:i})})}},t.updateSourceCaches_=function(i){void 0===i&&(i="");var s=i,o="";"string"!=typeof s&&(s=i.src,o=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!o&&(o=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(l){return l.src===t});if(n.length)return n[0].type;for(var i=e.$$("source"),s=0;s<i.length;s++){var o=i[s];if(o.type&&o.src&&o.src===t)return o.type}return ly(t)}(this,s)),this.cache_.source=br({},i,{src:s,type:o});for(var l=this.cache_.sources.filter(function(M){return M.src&&M.src===s}),f=[],g=this.$$("source"),y=[],T=0;T<g.length;T++){var S=zu(g[T]);f.push(S),S.src&&S.src===s&&y.push(S.src)}y.length&&!l.length?this.cache_.sources=f:l.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},t.handleTechSourceset_=function(i){var s=this;if(!this.changingSrc_){var o=function(y){return s.updateSourceCaches_(y)},l=this.currentSource().src,f=i.src;l&&!/^blob:/.test(l)&&/^blob:/.test(f)&&(!this.lastSource_||this.lastSource_.tech!==f&&this.lastSource_.player!==l)&&(o=function(){}),o(f),i.src||this.tech_.any(["sourceset","loadstart"],function(g){if("sourceset"!==g.type){var y=s.techGet("currentSrc");s.lastSource_.tech=y,s.updateSourceCaches_(y)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},t.hasStarted=function(i){if(void 0===i)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime();this.on("timeupdate",function l(){s!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",l))})},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(Pn.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(i){!this.controls_||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,i):this.paused()?Ku(this.play()):this.pause())},t.handleTechDoubleClick_=function(i){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(o){return o.contains(i.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(i){i.cancelable&&i.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(i){var s=i.target.player;if(!s||s===this){var o=this.el(),l=Dt()[this.fsApi_.fullscreenElement]===o;!l&&o.matches?l=o.matches(":"+this.fsApi_.fullscreen):!l&&o.msMatchesSelector&&(l=o.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(l)}},t.handleTechFullscreenChange_=function(i,s){var o=this;s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){o.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))},t.handleTechFullscreenError_=function(i,s){this.trigger("fullscreenerror",s)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(i){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(i){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var i=this.tech_.error();this.error(i)},t.handleTechTextData_=function(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(i,s){this.ready(function(){if(i in l1)return function uC(r,e,t,n){return e[t](r.reduce(pb(t),n))}(this.middleware_,this.tech_,i,s);if(i in cC)return fb(this.middleware_,this.tech_,i,s);try{this.tech_&&this.tech_[i](s)}catch(o){throw Pn(o),o}},!0)},t.techGet_=function(i){if(this.tech_&&this.tech_.isReady_){if(i in lC)return function aC(r,e,t){return r.reduceRight(pb(t),e[t]())}(this.middleware_,this.tech_,i);if(i in cC)return fb(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(s){throw void 0===this.tech_[i]?(Pn("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",s),s):"TypeError"===s.name?(Pn("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(Pn(s),s)}}},t.play=function(){var i=this,s=this.options_.Promise||pe().Promise;return s?new s(function(o){i.play_(o)}):this.play_()},t.play_=function(i){var s=this;void 0===i&&(i=Ku),this.playCallbacks_.push(i);var o=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!o)return this.waitToPlay_=function(f){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!o&&(bg||Cs)&&this.load());var l=this.techGet_("play");null===l?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(l)},t.runPlayTerminatedQueue_=function(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(s){s()})},t.runPlayCallbacks_=function(i){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(o){o(i)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return!1!==this.techGet_("paused")},t.played=function(){return this.techGet_("played")||Nc(0,0)},t.scrubbing=function(i){if(void 0===i)return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(i){return void 0!==i?(i<0&&(i=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",i),void(this.cache_.initTime=0)):(this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(i){if(void 0===i)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(i=parseFloat(i))<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var i=this.techGet_("buffered");return(!i||!i.length)&&(i=Nc(0,0)),i},t.bufferedPercent=function(){return r1(this.buffered(),this.duration())},t.bufferedEnd=function(){var i=this.buffered(),s=this.duration(),o=i.end(i.length-1);return o>s&&(o=s),o},t.volume=function(i){var s;return void 0!==i?(s=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=s,this.techCall_("setVolume",s),void(s>0&&this.lastVolume_(s))):(s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s)},t.muted=function(i){if(void 0===i)return this.techGet_("muted")||!1;this.techCall_("setMuted",i)},t.defaultMuted=function(i){return void 0!==i?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(i){if(void 0===i||0===i)return this.cache_.lastVolume;this.cache_.lastVolume=i},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(i){if(void 0!==i){var s=this.isFullscreen_;return this.isFullscreen_=Boolean(i),this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},t.requestFullscreen=function(i){var s=this.options_.Promise||pe().Promise;if(s){var o=this;return new s(function(l,f){function g(){o.off("fullscreenerror",T),o.off("fullscreenchange",y)}function y(){g(),l()}function T(M,L){g(),f(L)}o.one("fullscreenchange",y),o.one("fullscreenerror",T);var S=o.requestFullscreenHelper_(i);S&&(S.then(g,g),S.then(l,f))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(i){var o,s=this;if(this.fsApi_.prefixed||(o=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==i&&(o=i)),this.fsApi_.requestFullscreen){var l=this.el_[this.fsApi_.requestFullscreen](o);return l&&l.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),l}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var i=this.options_.Promise||pe().Promise;if(i){var s=this;return new i(function(o,l){function f(){s.off("fullscreenerror",y),s.off("fullscreenchange",g)}function g(){f(),o()}function y(S,M){f(),l(M)}s.one("fullscreenchange",g),s.one("fullscreenerror",y);var T=s.exitFullscreenHelper_();T&&(T.then(f,f),T.then(o,l))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var i=this;if(this.fsApi_.requestFullscreen){var s=Dt()[this.fsApi_.exitFullscreen]();return s&&Ku(s.then(function(){return i.isFullscreen(!1)})),s}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Dt().documentElement.style.overflow,Ma(Dt(),"keydown",this.boundFullWindowOnEscKey_),Dt().documentElement.style.overflow="hidden",Ol(Dt().body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(i){bn().isEventKey(i,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,bi(Dt(),"keydown",this.boundFullWindowOnEscKey_),Dt().documentElement.style.overflow=this.docOrigOverflow,Tg(Dt().body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(i){if(void 0===i)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(i){return void 0!==i?(this.isInPictureInPicture_=!!i,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Dt()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Dt())return Dt().exitPictureInPicture()},t.handleKeyDown=function(i){var f,g,s=this.options_.userActions;s&&s.hotkeys&&(g=(f=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),f.isContentEditable||("input"===g?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(f.type):-1!==["textarea"].indexOf(g))||("function"==typeof s.hotkeys?s.hotkeys.call(this,i):this.handleHotkeys(i)))},t.handleHotkeys=function(i){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},o=s.fullscreenKey,f=s.muteKey,g=void 0===f?function(H){return bn().isEventKey(H,"m")}:f,y=s.playPauseKey,T=void 0===y?function(H){return bn().isEventKey(H,"k")||bn().isEventKey(H,"Space")}:y;if((void 0===o?function(H){return bn().isEventKey(H,"f")}:o).call(this,i)){i.preventDefault(),i.stopPropagation();var S=Tt.getComponent("FullscreenToggle");!1!==Dt()[this.fsApi_.fullscreenEnabled]&&S.prototype.handleClick.call(this,i)}else g.call(this,i)?(i.preventDefault(),i.stopPropagation(),Tt.getComponent("MuteToggle").prototype.handleClick.call(this,i)):T.call(this,i)&&(i.preventDefault(),i.stopPropagation(),Tt.getComponent("PlayToggle").prototype.handleClick.call(this,i))},t.canPlayType=function(i){for(var s,o=0,l=this.options_.techOrder;o<l.length;o++){var f=l[o],g=sr.getTech(f);if(g||(g=Tt.getComponent(f)),g){if(g.isSupported()&&(s=g.canPlayType(i)))return s}else Pn.error('The "'+f+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.selectSource=function(i){var S,s=this,o=this.options_.techOrder.map(function(T){return[T,sr.getTech(T)]}).filter(function(T){var S=T[0],M=T[1];return M?M.isSupported():(Pn.error('The "'+S+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),l=function(S,M,L){var H;return S.some(function($){return M.some(function(De){if(H=L($,De))return!0})}),H},y=function(S,M){var L=S[0];if(S[1].canPlaySource(M,s.options_[L.toLowerCase()]))return{source:M,tech:L}};return(this.options_.sourceOrder?l(i,o,(S=y,function(M,L){return S(L,M)})):l(o,i,y))||!1},t.handleSrc_=function(i,s){var o=this;if(void 0===i)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var l=g1(i);if(l.length){if(this.changingSrc_=!0,s||(this.cache_.sources=l),this.updateSourceCaches_(l[0]),sC(this,l[0],function(y,T){if(o.middleware_=T,s||(o.cache_.sources=l),o.updateSourceCaches_(y),o.src_(y))return l.length>1?o.handleSrc_(l.slice(1)):(o.changingSrc_=!1,o.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void o.triggerReady());!function oC(r,e){r.forEach(function(t){return t.setTech&&t.setTech(e)})}(T,o.tech_)}),this.options_.retryOnError&&l.length>1){var f=function(){o.error(null),o.handleSrc_(l.slice(1),!0)},g=function(){o.off("error",f)};this.one("error",f),this.one("playing",g),this.resetRetryOnError_=function(){o.off("error",f),o.off("playing",g)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},t.src=function(i){return this.handleSrc_(i,!1)},t.src_=function(i){var s=this,o=this.selectSource([i]);return!o||(function(e,t){return ti(e)===ti(t)}(o.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(o.tech,o.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1))},t.load=function(){this.techCall_("load")},t.reset=function(){var i=this,s=this.options_.Promise||pe().Promise;this.paused()||!s?this.doReset_():Ku(this.play().then(function(){return i.doReset_()}))},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Wu(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var i=this.controlBar||{},s=i.durationDisplay,o=i.remainingTimeDisplay;s&&s.updateContent(),o&&o.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var i=this.currentSource(),s=[];return 0!==Object.keys(i).length&&s.push(i),this.cache_.sources||s},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(i){return void 0!==i?(this.techCall_("setPreload",i),void(this.options_.preload=i)):this.techGet_("preload")},t.autoplay=function(i){if(void 0===i)return this.options_.autoplay||!1;var s;"string"==typeof i&&/(any|play|muted)/.test(i)||!0===i&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_("string"==typeof i?i:"play"),s=!1):this.options_.autoplay=!!i,s=void 0===s?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},t.playsinline=function(i){return void 0!==i?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},t.loop=function(i){return void 0!==i?(this.techCall_("setLoop",i),void(this.options_.loop=i)):this.techGet_("loop")},t.poster=function(i){if(void 0===i)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(i){if(void 0===i)return!!this.controls_;this.controls_!==(i=!!i)&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(i){if(void 0===i)return!!this.usingNativeControls_;this.usingNativeControls_!==(i=!!i)&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(i){var s=this;if(void 0===i)return this.error_||null;if(Vi("beforeerror").forEach(function(l){var f=l(s,i);Ml(f)&&!Array.isArray(f)||"string"==typeof f||"number"==typeof f||null===f?i=f:s.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&i&&4===i.code){var o=function(){this.error(i)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],o),void this.one("loadstart",function(){this.off(["click","touchstart"],o)})}if(null===i)return this.error_=i,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Ks(i),this.addClass("vjs-error"),Pn.error("(CODE:"+this.error_.code+" "+Ks.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Vi("error").forEach(function(l){return l(s,s.error_)})},t.reportUserActivity=function(i){this.userActivity_=!0},t.userActive=function(i){if(void 0===i)return this.userActive_;if((i=!!i)!==this.userActive_){if(this.userActive_=i,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var i,s,o,l=ir(this,this.reportUserActivity),y=function(L){l(),this.clearInterval(i)};this.on("mousedown",function(){l(),this.clearInterval(i),i=this.setInterval(l,250)}),this.on("mousemove",function(L){(L.screenX!==s||L.screenY!==o)&&(s=L.screenX,o=L.screenY,l())}),this.on("mouseup",y),this.on("mouseleave",y);var S,T=this.getChild("controlBar");T&&!Cs&&!zs&&(T.on("mouseenter",function(M){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),T.on("mouseleave",function(M){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",l),this.on("keyup",l),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(S);var M=this.options_.inactivityTimeout;M<=0||(S=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},M))}},250)},t.playbackRate=function(i){if(void 0===i)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",i)},t.defaultPlaybackRate=function(i){return void 0!==i?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(i){if(void 0===i)return!!this.isAudio_;this.isAudio_=!!i},t.enableAudioOnlyUI_=function(){var i=this;this.addClass("vjs-audio-only-mode");var s=this.children(),o=this.getChild("ControlBar"),l=o&&o.currentHeight();s.forEach(function(f){f!==o&&f.el_&&!f.hasClass("vjs-hidden")&&(f.hide(),i.audioOnlyCache_.hiddenChildren.push(f))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(l),this.trigger("audioonlymodechange")},t.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(i){return i.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},t.audioOnlyMode=function(i){var s=this;if("boolean"!=typeof i||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var o=this.options_.Promise||pe().Promise;if(o){if(i){var l=[];return this.isInPictureInPicture()&&l.push(this.exitPictureInPicture()),this.isFullscreen()&&l.push(this.exitFullscreen()),this.audioPosterMode()&&l.push(this.audioPosterMode(!1)),o.all(l).then(function(){return s.enableAudioOnlyUI_()})}return o.resolve().then(function(){return s.disableAudioOnlyUI_()})}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},t.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.audioPosterMode=function(i){var s=this;if("boolean"!=typeof i||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var o=this.options_.Promise||pe().Promise;return o?i?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){s.enablePosterModeUI_()}):o.resolve().then(function(){s.enablePosterModeUI_()}):o.resolve().then(function(){s.disablePosterModeUI_()}):i?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},t.addTextTrack=function(i,s,o){if(this.tech_)return this.tech_.addTextTrack(i,s,o)},t.addRemoteTextTrack=function(i,s){if(this.tech_)return this.tech_.addRemoteTextTrack(i,s)},t.removeRemoteTextTrack=function(i){void 0===i&&(i={});var o=i.track;if(o||(o=i),this.tech_)return this.tech_.removeRemoteTextTrack(o)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(i){if(void 0===i)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),Wu(this)&&this.trigger("languagechange"))},t.languages=function(){return br(e.prototype.options_.languages,this.languages_)},t.toJSON=function(){var i=br(this.options_),s=i.tracks;i.tracks=[];for(var o=0;o<s.length;o++){var l=s[o];(l=br(l)).player=void 0,i.tracks[o]=l}return i},t.createModal=function(i,s){var o=this;(s=s||{}).content=i||"";var l=new jf(this,s);return this.addChild(l),l.on("dispose",function(){o.removeChild(l)}),l.open(),l},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var i=this.currentBreakpoint(),s=this.currentWidth(),o=0;o<Hb.length;o++){var l=Hb[o];if(s<=this.breakpoints_[l]){if(i===l)return;i&&this.removeClass(Ty[i]),this.addClass(Ty[l]),this.breakpoint_=l;break}}},t.removeCurrentBreakpoint_=function(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},t.breakpoints=function(i){return void 0===i||(this.breakpoint_="",this.breakpoints_=hr({},O1,i),this.updateCurrentBreakpoint_()),hr(this.breakpoints_)},t.responsive=function(i){return void 0===i?this.responsive_:(i=Boolean(i))!==this.responsive_?(this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i):void 0},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return Ty[this.breakpoint_]||""},t.loadMedia=function(i,s){var o=this;if(i&&"object"==typeof i){this.reset(),this.cache_.media=br(i);var l=this.cache_.media,g=l.poster,y=l.src,T=l.textTracks;!l.artwork&&g&&(this.cache_.media.artwork=[{src:g,type:ly(g)}]),y&&this.src(y),g&&this.poster(g),Array.isArray(T)&&T.forEach(function(S){return o.addRemoteTextTrack(S,!1)}),this.ready(s)}},t.getMedia=function(){if(!this.cache_.media){var i=this.poster(),l={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(f){return{kind:f.kind,label:f.label,language:f.language,src:f.src}})};return i&&(l.poster=i,l.artwork=[{src:l.poster,type:ly(l.poster)}]),l}return br(this.cache_.media)},e.getTagSettings=function(i){var s={sources:[],tracks:[]},o=zu(i),l=o["data-setup"];if(Pc(i,"vjs-fill")&&(o.fill=!0),Pc(i,"vjs-fluid")&&(o.fluid=!0),null!==l){var f=rD()(l||"{}"),g=f[0],y=f[1];g&&Pn.error(g),hr(o,y)}if(hr(s,o),i.hasChildNodes())for(var T=i.childNodes,S=0,M=T.length;S<M;S++){var L=T[S],H=L.nodeName.toLowerCase();"source"===H?s.sources.push(zu(L)):"track"===H&&s.tracks.push(zu(L))}return s},t.flexNotSupported_=function(){var i=Dt().createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},t.debug=function(i){if(void 0===i)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(i){if(void 0===i)return this.cache_.playbackRates;!Array.isArray(i)||!i.every(function(s){return"number"==typeof s})||(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},e}(Tt);Zs.names.forEach(function(r){var e=Zs[r];Ti.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Ti.prototype.crossorigin=Ti.prototype.crossOrigin,Ti.players={};var Mg=pe().navigator;Ti.prototype.options_={techOrder:sr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Mg&&(Mg.languages&&Mg.languages[0]||Mg.userLanguage||Mg.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(r){Ti.prototype[r]=function(){return this.techGet_(r)}}),Bb.forEach(function(r){Ti.prototype["handleTech"+ti(r)+"_"]=function(){return this.trigger(r)}}),Tt.registerComponent("Player",Ti);var Ey="plugin",Xf="activePlugins_",th={},Pg=function(e){return th.hasOwnProperty(e)},wy=function(e){return Pg(e)?th[e]:void 0},jC=function(e,t){e[Xf]=e[Xf]||{},e[Xf][t]=!0},Og=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},UC=function(e,t){return t.prototype.name=e,function(){Og(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=xv(t,[this].concat(i));return this[e]=function(){return o},Og(this,o.getEventHash()),o}},Yu=function(){function r(t){if(this.constructor===r)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),ry(this),delete this.trigger,ob(this,this.constructor.defaultState),jC(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var e=r.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(n){return void 0===n&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},e.trigger=function(n,i){return void 0===i&&(i={}),qd(this.eventBusEl_,n,this.getEventHash(i))},e.handleStateChanged=function(n){},e.dispose=function(){var n=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[Xf][n]=!1,this.player=this.state=null,i[n]=UC(n,th[n])},r.isBasic=function(n){var i="string"==typeof n?wy(n):n;return"function"==typeof i&&!r.prototype.isPrototypeOf(i.prototype)},r.registerPlugin=function(n,i){if("string"!=typeof n)throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(Pg(n))Pn.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(Ti.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof i+".");return th[n]=i,n!==Ey&&(Ti.prototype[n]=r.isBasic(i)?function(e,t){var n=function(){Og(this,{name:e,plugin:t,instance:null},!0);var s=t.apply(this,arguments);return jC(this,e),Og(this,{name:e,plugin:t,instance:s}),s};return Object.keys(t).forEach(function(i){n[i]=t[i]}),n}(n,i):UC(n,i)),i},r.deregisterPlugin=function(n){if(n===Ey)throw new Error("Cannot de-register base plugin.");Pg(n)&&(delete th[n],delete Ti.prototype[n])},r.getPlugins=function(n){var i;return void 0===n&&(n=Object.keys(th)),n.forEach(function(s){var o=wy(s);o&&((i=i||{})[s]=o)}),i},r.getPluginVersion=function(n){var i=wy(n);return i&&i.VERSION||""},r}();Yu.getPlugin=wy,Yu.BASE_PLUGIN_NAME=Ey,Yu.registerPlugin(Ey,Yu),Ti.prototype.usingPlugin=function(r){return!!this[Xf]&&!0===this[Xf][r]},Ti.prototype.hasPlugin=function(r){return!!Pg(r)};var Sy=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Ne(r,e,t){var n=Ne.getPlayer(r);if(n)return e&&Pn.warn('Player "'+r+'" is already initialised. Options will not be applied.'),t&&n.ready(t),n;var i="string"==typeof r?Qo("#"+Sy(r)):r;if(!Gd(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Pn.warn("The element supplied is not included in the DOM"),!0===(e=e||{}).restoreEl&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Vi("beforesetup").forEach(function(o){var l=o(i,br(e));Ml(l)&&!Array.isArray(l)?e=br(e,l):Pn.error("please return an object in beforesetup hooks")});var s=Tt.getComponent("Player");return n=new s(i,e,t),Vi("setup").forEach(function(o){return o(n)}),n}if(Ne.hooks_=Ac,Ne.hooks=Vi,Ne.hook=function(e,t){Vi(e,t)},Ne.hookOnce=function(e,t){Vi(e,[].concat(t).map(function(n){return function s(){return ZD(e,s),n.apply(void 0,arguments)}}))},Ne.removeHook=ZD,!0!==pe().VIDEOJS_NO_DYNAMIC_STYLE&&Hd()){var Jf=Qo(".vjs-styles-defaults");if(!Jf){Jf=FS("vjs-styles-defaults");var $b=Qo("head");$b&&$b.insertBefore(Jf,$b.firstChild),jS(Jf,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}J0(1,Ne),Ne.VERSION="7.20.1",Ne.options=Ti.prototype.options_,Ne.getPlayers=function(){return Ti.players},Ne.getPlayer=function(r){var t,e=Ti.players;if("string"==typeof r){var n=Sy(r),i=e[n];if(i)return i;t=Qo("#"+n)}else t=r;if(Gd(t)){var o=t.player,l=t.playerId;if(o||e[l])return o||e[l]}},Ne.getAllPlayers=function(){return Object.keys(Ti.players).map(function(r){return Ti.players[r]}).filter(Boolean)},Ne.players=Ti.players,Ne.getComponent=Tt.getComponent,Ne.registerComponent=function(r,e){sr.isTech(e)&&Pn.warn("The "+r+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Tt.registerComponent.call(Tt,r,e)},Ne.getTech=sr.getTech,Ne.registerTech=sr.registerTech,Ne.use=function iC(r,e){Ll[r]=Ll[r]||[],Ll[r].push(e)},Object.defineProperty(Ne,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ne.middleware,"TERMINATOR",{value:Vf,writeable:!1,enumerable:!0}),Ne.browser=IS,Ne.TOUCH_ENABLED=lu,Ne.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},i={};for(var s in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),function aD(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&_f(r,e)}(n,e),e&&(n.super_=e),i)i.hasOwnProperty(s)&&(n.prototype[s]=i[s]);return n},Ne.mergeOptions=br,Ne.bind=ir,Ne.registerPlugin=Yu.registerPlugin,Ne.deregisterPlugin=Yu.deregisterPlugin,Ne.plugin=function(r,e){return Pn.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Yu.registerPlugin(r,e)},Ne.getPlugins=Yu.getPlugins,Ne.getPlugin=Yu.getPlugin,Ne.getPluginVersion=Yu.getPluginVersion,Ne.addLanguage=function(r,e){var t;return r=(""+r).toLowerCase(),(Ne.options.languages=br(Ne.options.languages,((t={})[r]=e,t)))[r]},Ne.log=Pn,Ne.createLogger=CS,Ne.createTimeRange=Ne.createTimeRanges=Nc,Ne.formatTime=Hf,Ne.setFormatTime=function mC(r){fy=r},Ne.resetFormatTime=function Qd(){fy=vb},Ne.parseUrl=Pa,Ne.isCrossOrigin=xg,Ne.EventTarget=Gi,Ne.on=Ma,Ne.one=Nf,Ne.off=bi,Ne.trigger=qd,Ne.xhr=Da(),Ne.TextTrack=Ig,Ne.AudioTrack=nC,Ne.VideoTrack=uy,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(r){Ne[r]=function(){return Pn.warn("videojs."+r+"() is deprecated; use videojs.dom."+r+"() instead"),X0[r].apply(null,arguments)}}),Ne.computedStyle=_g,Ne.dom=X0,Ne.url=JS,Ne.defineLazyProperty=Ub,Ne.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var du=Iv,ep=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},hu=function(e){return Ne.log.debug?Ne.log.debug.bind(Ne,"VHS:",e+" >"):function(){}},Fl=1/30,Qu=.1,qb=function(e,t){var i,n=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Ne.createTimeRanges(n)},tp=function(e,t){return qb(e,function(n,i){return n-Qu<=t&&i+Qu>=t})},Rg=function(e,t){return qb(e,function(n){return n-Fl>=t})},Ng=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},La=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},BC=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},VC=function(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var s=e.start(i),o=e.end(i);if(!(t>o)){if(t>s&&t<=o){n+=o-t;continue}n+=o-s}}return n},zb=Ne.createTimeRange,Wb=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach(function(i){n+=i.duration}),(t.preloadHints||[]).forEach(function(i){"PART"===i.type&&(n+=e.partTargetDuration)}),n},Kb=function(e){return(e.segments||[]).reduce(function(t,n,i){return n.parts?n.parts.forEach(function(s,o){t.push({duration:s.duration,segmentIndex:i,partIndex:o,part:s,segment:n})}):t.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),t},[])},HC=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},GC=function(e){var t=e.preloadSegment;if(t){var n=t.parts;return(t.preloadHints||[]).reduce(function(o,l){return o+("PART"===l.type?1:0)},0)+(n&&n.length?n.length:0)}},Zb=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=HC(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},Fg=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=function(e,t){var n=0,i=t-e.mediaSequence,s=e.segments[i];if(s){if(void 0!==s.start)return{result:s.start,precise:!0};if(void 0!==s.end)return{result:s.end-s.duration,precise:!0}}for(;i--;){if(void 0!==(s=e.segments[i]).end)return{result:n+s.end,precise:!0};if(n+=Wb(e,s),void 0!==s.start)return{result:n+s.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(i.precise)return i.result;var s=function(e,t){for(var i,n=0,s=t-e.mediaSequence;s<e.segments.length;s++){if(void 0!==(i=e.segments[s]).start)return{result:i.start-n,precise:!0};if(n+=Wb(e,i),void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t);return s.precise?s.result:i.result+n},np=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return pe()[1/0]}return Fg(e,t,n)},jg=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,s=e.endIndex,o=0;if(i>s){var l=[s,i];i=l[0],s=l[1]}if(i<0){for(var f=i;f<Math.min(0,s);f++)o+=t;i=0}for(var g=i;g<s;g++)o+=n[g].duration;return o},Qb=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return np(e);if(null===t)return null;var s=Fg(e,e.mediaSequence+e.segments.length,t=t||0);return n&&(s-=i="number"==typeof i?i:Zb(null,e)),Math.max(0,s)},zC=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Ug=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Cy=function(e){var t=zC(e);return!e.disabled&&!t},WC=function(e,t){return t.attributes&&t.attributes[e]},xy=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(i){return!!Cy(i)&&(i.attributes.BANDWIDTH||0)<n}).length},jc=function(e,t){return!(!e&&!t||!e&&t||e&&!t||!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri))},U1=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var s in n){for(var o in n[s])if(i=t(n[s][o]))break;if(i)break}return!!i},ip=function(e){if(!e||!e.playlists||!e.playlists.length)return U1(e,function(o){return o.playlists&&o.playlists.length||o.uri});for(var n=function(l){var f=e.playlists[l],g=f.attributes&&f.attributes.CODECS;return g&&g.split(",").every(function(T){return Gw(T)})||U1(e,function(T){return jc(f,T)})?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var s=n(i);if("continue"!==s&&"object"==typeof s)return s.v}return!0},Ao={liveEdgeDelay:Zb,duration:np,seekable:function(e,t,n){var s=t||0,o=Qb(e,t,!0,n);return null===o?zb():zb(s,o)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,s=e.startingPartIndex,o=e.startTime,l=e.experimentalExactManifestTimings,f=n-o,g=Kb(t),y=0,T=0;T<g.length;T++){var S=g[T];if(i===S.segmentIndex&&("number"!=typeof s||"number"!=typeof S.partIndex||s===S.partIndex)){y=T;break}}if(f<0){if(y>0)for(var M=y-1;M>=0;M--){var L=g[M];if(f+=L.duration,l){if(f<0)continue}else if(f+Fl<=0)continue;return{partIndex:L.partIndex,segmentIndex:L.segmentIndex,startTime:o-jg({defaultDuration:t.targetDuration,durationList:g,startIndex:y,endIndex:M})}}return{partIndex:g[0]&&g[0].partIndex||null,segmentIndex:g[0]&&g[0].segmentIndex||0,startTime:n}}if(y<0){for(var H=y;H<0;H++)if((f-=t.targetDuration)<0)return{partIndex:g[0]&&g[0].partIndex||null,segmentIndex:g[0]&&g[0].segmentIndex||0,startTime:n};y=0}for(var $=y;$<g.length;$++){var De=g[$];if(f-=De.duration,l){if(f>0)continue}else if(f-Fl>=0)continue;return{partIndex:De.partIndex,segmentIndex:De.segmentIndex,startTime:o+jg({defaultDuration:t.targetDuration,durationList:g,startIndex:y,endIndex:$})}}return{segmentIndex:g[g.length-1].segmentIndex,partIndex:g[g.length-1].partIndex,startTime:n}},isEnabled:Cy,isDisabled:function(e){return e.disabled},isBlacklisted:zC,isIncompatible:Ug,playlistEnd:Qb,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:WC,estimateSegmentRequestTime:function(e,t,n,i){return void 0===i&&(i=0),WC("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:xy,isAudioOnly:ip,playlistMatch:jc,segmentDurationWithParts:Wb},B1=Ne.log,Iy=function(e,t){return e+"-"+t},sp=function(e,t){!e.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var s in e.mediaGroups[n][i])t(e.mediaGroups[n][i][s],n,i,s)})},Ay=function(e){var t=e.playlist,n=e.uri;t.id=e.id,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},QC=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)e.playlists[n].uri||(e.playlists[n].uri="placeholder-uri-"+n);var s=ip(e);sp(e,function(o,l,f,g){var y="placeholder-uri-"+l+"-"+f+"-"+g;if(!o.playlists||!o.playlists.length){if(s&&"AUDIO"===l&&!o.uri)for(var T=0;T<e.playlists.length;T++){var S=e.playlists[T];if(S.attributes&&S.attributes.AUDIO&&S.attributes.AUDIO===f)return}o.playlists=[Aa({},o)]}o.playlists.forEach(function(M,L){var H=Iy(L,y);M.uri?M.resolvedUri=M.resolvedUri||du(e.uri,M.uri):(M.uri=0===L?y:H,M.resolvedUri=M.uri),M.id=M.id||H,M.attributes=M.attributes||{},e.playlists[M.id]=M,e.playlists[M.uri]=M})}),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Ay({playlist:n,id:Iy(t,n.uri)}),n.resolvedUri=du(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||B1.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){sp(e,function(t){t.uri&&(t.resolvedUri=du(e.uri,t.uri))})}(e)},Dy=Ne.mergeOptions,G1=function(e,t){if(!e)return t;var n=Dy(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=Dy(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},XC=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=du(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=du(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=du(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=du(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=du(t,n.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=du(t,n.uri))})},op=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},Xb=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},ky=function(e,t,n){void 0===n&&(n=Xb);var i=Dy(e,{}),s=i.playlists[t.id];if(!s||n(s,t))return null;t.segments=op(t);var o=Dy(s,t);if(o.preloadSegment&&!t.preloadSegment&&delete o.preloadSegment,s.segments){if(t.skip){t.segments=t.segments||[];for(var l=0;l<t.skip.skippedSegments;l++)t.segments.unshift({skipped:!0})}o.segments=function(e,t,n){var i=e.slice(),s=t.slice();n=n||0;for(var l,o=[],f=0;f<s.length;f++){var g=i[f+n],y=s[f];g?(l=g.map||l,o.push(G1(g,y))):(l&&!y.map&&(y.map=l),o.push(y))}return o}(s.segments,t.segments,t.mediaSequence-s.mediaSequence)}o.segments.forEach(function(g){XC(g,o.resolvedUri)});for(var f=0;f<i.playlists.length;f++)i.playlists[f].id===t.id&&(i.playlists[f]=o);return i.playlists[t.id]=o,i.playlists[t.uri]=o,sp(e,function(g,y,T,S){if(g.playlists)for(var M=0;M<g.playlists.length;M++)t.id===g.playlists[M].id&&(g.playlists[M]=o)}),i},My=function(e,t){var n=e.segments||[],i=n[n.length-1],s=i&&i.parts&&i.parts[i.parts.length-1],o=s&&s.duration||i&&i.duration;return t&&o?1e3*o:500*(e.partTargetDuration||e.targetDuration||10)},nh=function(r){function e(n,i,s){var o;if(void 0===s&&(s={}),o=r.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");o.logger_=hu("PlaylistLoader");var f=s.withCredentials,g=void 0!==f&&f,y=s.handleManifestRedirects,T=void 0!==y&&y;o.src=n,o.vhs_=i,o.withCredentials=g,o.handleManifestRedirects=T;var S=i.options_;return o.customTagParsers=S&&S.customTagParsers||[],o.customTagMappers=S&&S.customTagMappers||[],o.experimentalLLHLS=S&&S.experimentalLLHLS||!1,Ne.browser.IE_VERSION&&(o.experimentalLLHLS=!1),o.state="HAVE_NOTHING",o.handleMediaupdatetimeout_=o.handleMediaupdatetimeout_.bind(Tn(o)),o.on("mediaupdatetimeout",o.handleMediaupdatetimeout_),o}Mt(e,r);var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var i=this;if("HAVE_METADATA"===this.state){var s=this.media(),o=du(this.master.uri,s.uri);this.experimentalLLHLS&&(o=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,s=t.mediaSequence+t.segments.length;if(i){var o=i.parts||[],l=GC(t)-1;l>-1&&l!==o.length-1&&(n._HLS_part=l),(l>-1||o.length)&&s--}n._HLS_msn=s}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var f=new(pe().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(g){!n.hasOwnProperty(g)||f.searchParams.set(g,n[g])}),e=f.toString()}return e}(o,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:o,withCredentials:this.withCredentials},function(l,f){if(i.request){if(l)return i.playlistRequestError(i.request,i.media(),"HAVE_METADATA");i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}})}},t.playlistRequestError=function(i,s,o){var l=s.uri,f=s.id;this.request=null,o&&(this.state=o),this.error={playlist:this.master.playlists[f],status:i.status,message:"HLS playlist request error at URL: "+l+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(i){var s=this,o=i.url;return function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,s=e.customTagParsers,o=void 0===s?[]:s,l=e.customTagMappers,f=void 0===l?[]:l,g=e.experimentalLLHLS,y=new b0;t&&y.on("warn",t),n&&y.on("info",n),o.forEach(function(H){return y.addParser(H)}),f.forEach(function(H){return y.addTagMapper(H)}),y.push(i),y.end();var T=y.manifest;if(g||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(H){T.hasOwnProperty(H)&&delete T[H]}),T.segments&&T.segments.forEach(function(H){["parts","preloadHints"].forEach(function($){H.hasOwnProperty($)&&delete H[$]})})),!T.targetDuration){var S=10;T.segments&&T.segments.length&&(S=T.segments.reduce(function(H,$){return Math.max(H,$.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+S),T.targetDuration=S}var M=HC(T);if(M.length&&!T.partTargetDuration){var L=M.reduce(function(H,$){return Math.max(H,$.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+L),B1.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),T.partTargetDuration=L}return T}({onwarn:function(g){return s.logger_("m3u8-parser warn for "+o+": "+g.message)},oninfo:function(g){return s.logger_("m3u8-parser info for "+o+": "+g.message)},manifestString:i.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(i){var s=i.playlistString,o=i.playlistObject,l=i.url,f=i.id;this.request=null,this.state="HAVE_METADATA";var g=o||this.parseManifest_({url:l,manifestString:s});g.lastRequest=Date.now(),Ay({playlist:g,uri:l,id:f});var y=ky(this.master,g);this.targetDuration=g.partTargetDuration||g.targetDuration,this.pendingMedia_=null,y?(this.master=y,this.media_=this.master.playlists[f]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(My(this.media(),!!y)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),pe().clearTimeout(this.mediaUpdateTimeout),pe().clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i,s){var o=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(pe().clearTimeout(this.finalRenditionTimeout),s){var l=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=pe().setTimeout(this.media.bind(this,i,!1),l)}else{var f=this.state,g=!this.media_||i.id!==this.media_.id,y=this.master.playlists[i.id];if(y&&y.endList||i.endList&&i.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(g&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===f?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(My(i,!0)),g){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(T,S){if(o.request){if(i.lastRequest=Date.now(),i.resolvedUri=ep(o.handleManifestRedirects,i.resolvedUri,S),T)return o.playlistRequestError(o.request,i,f);o.haveMetadata({playlistString:S.responseText,url:i.uri,id:i.id}),o.trigger("HAVE_MASTER"===f?"loadedmetadata":"mediachange")}})}}},t.pause=function(){this.mediaUpdateTimeout&&(pe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},t.load=function(i){var s=this;this.mediaUpdateTimeout&&(pe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var o=this.media();if(i){var l=o?(o.partTargetDuration||o.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=pe().setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},l)}else this.started?this.trigger(o&&!o.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},t.updateMediaUpdateTimeout_=function(i){var s=this;this.mediaUpdateTimeout&&(pe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=pe().setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(i)},i))},t.start=function(){var i=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=pe().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){i.setupInitialPlaylist(i.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,o){if(i.request){if(i.request=null,s)return i.error={status:o.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:o.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.src=ep(i.handleManifestRedirects,i.src,o);var l=i.parseManifest_({manifestString:o.responseText,url:i.src});i.setupInitialPlaylist(l)}})},t.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},t.setupInitialPlaylist=function(i){if(this.state="HAVE_MASTER",i.playlists)return this.master=i,QC(this.master,this.srcUri()),i.playlists.forEach(function(o){o.segments=op(o),o.segments.forEach(function(l){XC(l,o.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var s=this.srcUri()||pe().location.href;this.master=function(e,t){var n=Iy(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:pe().location.href,resolvedUri:pe().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i}(0,s),this.haveMetadata({playlistObject:i,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(Ne.EventTarget),JC=Ne.xhr,ex=Ne.mergeOptions,Jb=function(e,t,n,i){var s="arraybuffer"===e.responseType?e.response:e.responseText;!t&&s&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=s.byteLength||s.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),!t&&!e.aborted&&200!==n.statusCode&&206!==n.statusCode&&0!==n.statusCode&&(t=new Error("XHR Failed with a response of: "+(e&&(s||e.responseText)))),i(t,e)},eT=function(){var e=function t(n,i){n=ex({timeout:45e3},n);var s=t.beforeRequest||Ne.Vhs.xhr.beforeRequest;if(s&&"function"==typeof s){var o=s(n);o&&(n=o)}var f=(!0===Ne.Vhs.xhr.original?JC:Ne.Vhs.xhr)(n,function(y,T){return Jb(f,y,T,i)}),g=f.abort;return f.abort=function(){return f.aborted=!0,g.apply(f,arguments)},f.uri=n.uri,f.requestTime=Date.now(),f};return e.original=!0,e},tT=function(e){var t={};return e.byterange&&(t.Range=function(e){return"bytes="+e.offset+"-"+("bigint"==typeof e.offset||"bigint"==typeof e.length?pe().BigInt(e.offset)+pe().BigInt(e.length)-pe().BigInt(1):e.offset+e.length-1)}(e.byterange)),t},z1=function(e,t){return e.start(t)+"-"+e.end(t)},W1=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Bg=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},tx=function(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];t[n]=mD(i)?{bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:i}),t},ap=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},fu=function(e){return e.resolvedUri},nx=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",l=0;l<t.length/n;l++)i+=t.slice(l*n,l*n+n).map(W1).join("")+" "+t.slice(l*n,l*n+n).map(Bg).join("")+"\n";return i},K1=Object.freeze({__proto__:null,createTransferableMessage:tx,initSegmentId:ap,segmentKeyId:fu,hexDump:nx,tagDump:function(e){return nx(e.bytes)},textRanges:function(e){var n,t="";for(n=0;n<e.length;n++)t+=z1(e,n)+" ";return t}}),nT=function r(e){var t=e.programTime,n=e.playlist,i=e.retryCount,s=void 0===i?2:i,o=e.seekTo,l=e.pauseAfterSeek,f=void 0===l||l,g=e.tech,y=e.callback;if(!y)throw new Error("seekToProgramTime: callback must be provided");if(void 0===t||!n||!o)return y({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!g.hasStarted_)return y({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return y({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var T=function(e,t){var n;try{n=new Date(e)}catch(T){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var s=0;s<t.segments.length-1&&(i=t.segments[s],!(n<t.segments[s+1].dateTimeObject));s++);var l=t.segments[t.segments.length-1],f=l.dateTimeObject,g=l.videoTimingInfo?function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds}(l.videoTimingInfo):l.duration+.25*l.duration;return n>new Date(f.getTime()+1e3*g)?null:(n>f&&(i=l),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Ao.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(t,n);if(!T)return y({message:t+" was not found in the stream"});var S=T.segment,M=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch(l){}var s=n.getTime();return(i.getTime()-s)/1e3}(S.dateTimeObject,t);if("estimate"===T.type)return 0===s?y({message:t+" is not buffered yet. Try again"}):(o(T.estimatedStart+M),void g.one("seeked",function(){r({programTime:t,playlist:n,retryCount:s-1,seekTo:o,pauseAfterSeek:f,tech:g,callback:y})}));var L=S.start+M;g.one("seeked",function(){return y(null,g.currentTime())}),f&&g.pause(),o(L)},Ny=function(e,t){if(4===e.readyState)return t()},ek=Ne.mergeOptions,Ly=function(e,t){if(!Xb(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],s=t.segments[n];if(i.uri!==s.uri)return!1;if(i.byterange||s.byterange){var o=i.byterange,l=s.byterange;if(o&&!l||!o&&l||o.offset!==l.offset||o.length!==l.length)return!1}}return!0},iT=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Fy=function(e,t){var n={};for(var i in e){var o=e[i].sidx;if(o){var l=Lv(o);if(!t[l])break;iT(t[l].sidxInfo,o)&&(n[l]=t[l])}}return n},sT=function(r){function e(n,i,s,o){var l;void 0===s&&(s={}),(l=r.call(this)||this).masterPlaylistLoader_=o||Tn(l),o||(l.isMaster_=!0);var g=s.withCredentials,y=void 0!==g&&g,T=s.handleManifestRedirects,S=void 0!==T&&T;if(l.vhs_=i,l.withCredentials=y,l.handleManifestRedirects=S,!n)throw new Error("A non-empty playlist URL or object is required");return l.on("minimumUpdatePeriod",function(){l.refreshXml_()}),l.on("mediaupdatetimeout",function(){l.refreshMedia_(l.media().id)}),l.state="HAVE_NOTHING",l.loadedPlaylists_={},l.logger_=hu("DashPlaylistLoader"),l.isMaster_?(l.masterPlaylistLoader_.srcUrl=n,l.masterPlaylistLoader_.sidxMapping_={}):l.childPlaylist_=n,l}Mt(e,r);var t=e.prototype;return t.requestErrored_=function(i,s,o){return!this.request||(this.request=null,i?(this.error="object"!=typeof i||i instanceof Error?{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2}:i,o&&(this.state=o),this.trigger("error"),!0):void 0)},t.addSidxSegments_=function(i,s,o){var l=this,f=i.sidx&&Lv(i.sidx);if(i.sidx&&f&&!this.masterPlaylistLoader_.sidxMapping_[f]){var g=ep(this.handleManifestRedirects,i.sidx.resolvedUri),y=function(S,M){if(!l.requestErrored_(S,M,s)){var H,L=l.masterPlaylistLoader_.sidxMapping_;try{H=jv()(un(M.response).subarray(8))}catch($){return void l.requestErrored_($,M,s)}return L[f]={sidxInfo:i.sidx,sidx:H},Nv(i,H,i.sidx.resolvedUri),o(!0)}};this.request=function(e,t,n){var s,i=[],o=!1,l=function(S,M,L,H){return M.abort(),o=!0,n(S,M,L,H)},f=function(S,M){if(!o){if(S)return l(S,M,"",i);var L=M.responseText.substring(i&&i.byteLength||0,M.responseText.length);if(i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if((t=t.filter(function(l){return l&&(l.byteLength||l.length)&&"string"!=typeof l})).length<=1)return un(t[0]);var i=t.reduce(function(l,f,g){return l+(f.byteLength||f.length)},0),s=new Uint8Array(i),o=0;return t.forEach(function(l){l=un(l),s.set(l,o),o+=l.byteLength}),s}(i,C0(L,!0)),s=s||Uv(i),i.length<10||s&&i.length<s+2)return Ny(M,function(){return l(S,M,"",i)});var H=pg(i);return"ts"===H&&i.length<188||!H&&i.length<376?Ny(M,function(){return l(S,M,"",i)}):l(null,M,H,i)}},y=t({uri:e,beforeSend:function(S){S.overrideMimeType("text/plain; charset=x-user-defined"),S.addEventListener("progress",function(M){return Jb(S,null,{statusCode:S.status},f)})}},function(T,S){return Jb(y,T,S,f)});return y}(g,this.vhs_.xhr,function(T,S,M,L){if(T)return y(T,S);if(!M||"mp4"!==M)return y({status:S.status,message:"Unsupported "+(M||"unknown")+" container type for sidx segment at URL: "+g,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},S);var H=i.sidx.byterange,$=H.offset,De=H.length;if(L.length>=De+$)return y(T,{response:L.subarray($,$+De),status:S.status,uri:S.uri});l.request=l.vhs_.xhr({uri:g,responseType:"arraybuffer",headers:tT({byterange:i.sidx.byterange})},y)})}else this.mediaRequest_=pe().setTimeout(function(){return o(!1)},0)},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},pe().clearTimeout(this.minimumUpdatePeriodTimeout_),pe().clearTimeout(this.mediaRequest_),pe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i){var s=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var o=this.state;if("string"==typeof i){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var l=!this.media_||i.id!==this.media_.id;if(l&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList)return this.state="HAVE_METADATA",this.media_=i,void(l&&(this.trigger("mediachanging"),this.trigger("mediachange")));!l||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,o,function(f){s.haveMetadata({startingState:o,playlist:i})}))},t.haveMetadata=function(i){var s=i.startingState,o=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[o.id]=o,this.mediaRequest_=null,this.refreshMedia_(o.id),this.trigger("HAVE_MASTER"===s?"loadedmetadata":"mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),pe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(pe().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},t.load=function(i){var s=this;pe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var o=this.media();if(i){var l=o?o.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=pe().setTimeout(function(){return s.load()},l)}else this.started?o&&!o.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},t.start=function(){var i=this;this.started=!0,this.isMaster_?this.requestMaster_(function(s,o){i.haveMaster_(),!i.hasPendingRequest()&&!i.media_&&i.media(i.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=pe().setTimeout(function(){return i.haveMaster_()},0)},t.requestMaster_=function(i){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(o,l){if(!s.requestErrored_(o,l)){var f=l.responseText!==s.masterPlaylistLoader_.masterXml_;return s.masterPlaylistLoader_.masterXml_=l.responseText,s.masterLoaded_=l.responseHeaders&&l.responseHeaders.date?Date.parse(l.responseHeaders.date):Date.now(),s.masterPlaylistLoader_.srcUrl=ep(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,l),f?(s.handleMaster_(),void s.syncClientServerClock_(function(){return i(l,f)})):i(l,f)}"HAVE_NOTHING"===s.state&&(s.started=!1)})},t.syncClientServerClock_=function(i){var s=this,o=function(e){return function(e){var t=di(e,"UTCTiming")[0];if(!t)return null;var n=Mi(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(V0(e))}(this.masterPlaylistLoader_.masterXml_);return null===o?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===o.method?(this.masterPlaylistLoader_.clientOffset_=o.value-Date.now(),i()):void(this.request=this.vhs_.xhr({uri:du(this.masterPlaylistLoader_.srcUrl,o.value),method:o.method,withCredentials:this.withCredentials},function(l,f){if(s.request){if(l)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),i();var g;g="HEAD"===o.method?f.responseHeaders&&f.responseHeaders.date?Date.parse(f.responseHeaders.date):s.masterLoaded_:Date.parse(f.responseText),s.masterPlaylistLoader_.clientOffset_=g-Date.now(),i()}}))},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,s=function(e){var n=e.srcUrl,l=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,i=n.manifestUri,s=void 0===i?"":i,o=n.NOW,l=void 0===o?Date.now():o,f=n.clientOffset,g=void 0===f?0:f,y=di(e,"Period");if(!y.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var T=di(e,"Location"),S=Mi(e),M=Fv([s],di(e,"BaseURL"));S.type=S.type||"static",S.sourceDuration=S.mediaPresentationDuration||0,S.NOW=l,S.clientOffset=g,T.length&&(S.locations=T.map(F0));var L=[];return y.forEach(function(H,$){var De=Mi(H),We=L[$-1];De.start=function(e){var t=e.attributes,n=e.priorPeriodAttributes;return"number"==typeof t.start?t.start:n&&"number"==typeof n.start&&"number"==typeof n.duration?n.start+n.duration:n||"static"!==e.mpdType?null:0}({attributes:De,priorPeriodAttributes:We?We.attributes:null,mpdType:S.type}),L.push({node:H,attributes:De})}),{locations:S.locations,representationInfo:Dl(L.map(B0(S,M)))}}(V0(e),t),i=function(e){return e.map(sS)}(n.representationInfo);return AD({dashPlaylists:i,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})}(e.masterXml,{manifestUri:n,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest});return QC(l,n),l}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(s=function(e,t,n){for(var i=!0,s=ek(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),o=0;o<t.playlists.length;o++){var l=t.playlists[o];if(l.sidx){var f=Lv(l.sidx);n&&n[f]&&n[f].sidx&&Nv(l,n[f].sidx,l.sidx.resolvedUri)}var g=ky(s,l,Ly);g&&(s=g,i=!1)}return sp(t,function(y,T,S,M){if(y.playlists&&y.playlists.length){var L=y.playlists[0].id,H=ky(s,y.playlists[0],Ly);H&&((s=H).mediaGroups[T][S][M].playlists[0]=s.playlists[L],i=!1)}}),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:s}(i,s,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=s||i;var o=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return o&&o!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=o),(!i||s&&s.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(s)},t.updateMinimumUpdatePeriodTimeout_=function(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(pe().clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var s=i.master&&i.master.minimumUpdatePeriod;0===s&&(i.media()?s=1e3*i.media().targetDuration:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),"number"!=typeof s||s<=0?s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout"):this.createMUPTimeout_(s)},t.createMUPTimeout_=function(i){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=pe().setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(i)},i)},t.refreshXml_=function(){var i=this;this.requestMaster_(function(s,o){!o||(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=function(e,t){var i=Fy(e.playlists,t);return sp(e,function(s,o,l,f){s.playlists&&s.playlists.length&&(i=ek(i,Fy(s.playlists,t)))}),i}(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(l){i.refreshMedia_(i.media().id)}))})},t.refreshMedia_=function(i){var s=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var o=this.masterPlaylistLoader_.master.playlists,l=!this.media_||this.media_!==o[i];l?this.media_=o[i]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function g(){s.media().endList||(s.mediaUpdateTimeout=pe().setTimeout(function(){s.trigger("mediaupdatetimeout"),g()},My(s.media(),Boolean(l))))}(),this.trigger("loadedplaylist")},e}(Ne.EventTarget),$i={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},oT=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},uT=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=oT(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},lT=function(e){return"var browserWorkerPolyFill = "+oT.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},cT=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},ax=lT(cT(function(){var r=function(){this.init=function(){var w={};this.on=function(A,I){w[A]||(w[A]=[]),w[A]=w[A].concat(I)},this.off=function(A,I){var k;return!!w[A]&&(k=w[A].indexOf(I),w[A]=w[A].slice(),w[A].splice(k,1),k>-1)},this.trigger=function(A){var I,k,N,F;if(I=w[A])if(2===arguments.length)for(N=I.length,k=0;k<N;++k)I[k].call(this,arguments[1]);else{for(F=[],k=arguments.length,k=1;k<arguments.length;++k)F.push(arguments[k]);for(N=I.length,k=0;k<N;++k)I[k].apply(this,F)}},this.dispose=function(){w={}}}};r.prototype.pipe=function(q){return this.on("data",function(w){q.push(w)}),this.on("done",function(w){q.flush(w)}),this.on("partialdone",function(w){q.partialFlush(w)}),this.on("endedtimeline",function(w){q.endTimeline(w)}),this.on("reset",function(w){q.reset(w)}),q},r.prototype.push=function(q){this.trigger("data",q)},r.prototype.flush=function(q){this.trigger("done",q)},r.prototype.partialFlush=function(q){this.trigger("partialdone",q)},r.prototype.endTimeline=function(q){this.trigger("endedtimeline",q)},r.prototype.reset=function(q){this.trigger("reset",q)};var o,l,f,g,y,T,S,M,L,H,$,De,We,et,Me,je,ze,Be,tt,_t,ft,nn,Pt,cn,Tr,Wr,Ri,Yi,ii,Oo,fr,kA,il,yh,Pp,Nm,q,w,e=r,t=Math.pow(2,32),i={getUint64:function(w){var I,A=new DataView(w.buffer,w.byteOffset,w.byteLength);return A.getBigUint64?(I=A.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(I):I:A.getUint32(0)*t+A.getUint32(4)},MAX_UINT32:t},s=i.MAX_UINT32;(function(){var q;if(Pt={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(q in Pt)Pt.hasOwnProperty(q)&&(Pt[q]=[q.charCodeAt(0),q.charCodeAt(1),q.charCodeAt(2),q.charCodeAt(3)]);cn=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Wr=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Tr=new Uint8Array([0,0,0,1]),Ri=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Yi=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ii={video:Ri,audio:Yi},kA=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),fr=new Uint8Array([0,0,0,0,0,0,0,0]),il=new Uint8Array([0,0,0,0,0,0,0,0]),yh=il,Pp=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Nm=il,Oo=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(w){var k,N,A=[],I=0;for(k=1;k<arguments.length;k++)A.push(arguments[k]);for(k=A.length;k--;)I+=A[k].byteLength;for(N=new Uint8Array(I+8),new DataView(N.buffer,N.byteOffset,N.byteLength).setUint32(0,N.byteLength),N.set(w,4),k=0,I=8;k<A.length;k++)N.set(A[k],I),I+=A[k].byteLength;return N},l=function(){return o(Pt.dinf,o(Pt.dref,kA))},f=function(w){return o(Pt.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,w.audioobjecttype<<3|w.samplingfrequencyindex>>>1,w.samplingfrequencyindex<<7|w.channelcount<<3,6,1,2]))},g=function(){return o(Pt.ftyp,cn,Tr,cn,Wr)},je=function(w){return o(Pt.hdlr,ii[w])},y=function(w){return o(Pt.mdat,w)},Me=function(w){var A=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,w.duration>>>24&255,w.duration>>>16&255,w.duration>>>8&255,255&w.duration,85,196,0,0]);return w.samplerate&&(A[12]=w.samplerate>>>24&255,A[13]=w.samplerate>>>16&255,A[14]=w.samplerate>>>8&255,A[15]=255&w.samplerate),o(Pt.mdhd,A)},et=function(w){return o(Pt.mdia,Me(w),je(w.type),S(w))},T=function(w){return o(Pt.mfhd,new Uint8Array([0,0,0,0,(4278190080&w)>>24,(16711680&w)>>16,(65280&w)>>8,255&w]))},S=function(w){return o(Pt.minf,"video"===w.type?o(Pt.vmhd,Oo):o(Pt.smhd,fr),l(),Be(w))},M=function(w,A){for(var I=[],k=A.length;k--;)I[k]=_t(A[k]);return o.apply(null,[Pt.moof,T(w)].concat(I))},L=function(w){for(var A=w.length,I=[];A--;)I[A]=De(w[A]);return o.apply(null,[Pt.moov,$(4294967295)].concat(I).concat(H(w)))},H=function(w){for(var A=w.length,I=[];A--;)I[A]=ft(w[A]);return o.apply(null,[Pt.mvex].concat(I))},$=function(w){var A=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&w)>>24,(16711680&w)>>16,(65280&w)>>8,255&w,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(Pt.mvhd,A)},ze=function(w){var k,N,A=w.samples||[],I=new Uint8Array(4+A.length);for(N=0;N<A.length;N++)I[N+4]=(k=A[N].flags).dependsOn<<4|k.isDependedOn<<2|k.hasRedundancy;return o(Pt.sdtp,I)},Be=function(w){return o(Pt.stbl,tt(w),o(Pt.stts,Nm),o(Pt.stsc,yh),o(Pt.stsz,Pp),o(Pt.stco,il))},tt=function(I){return o(Pt.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===I.type?q(I):w(I))},q=function(I){var ae,Ie,k=I.sps||[],N=I.pps||[],F=[],ee=[];for(ae=0;ae<k.length;ae++)F.push((65280&k[ae].byteLength)>>>8),F.push(255&k[ae].byteLength),F=F.concat(Array.prototype.slice.call(k[ae]));for(ae=0;ae<N.length;ae++)ee.push((65280&N[ae].byteLength)>>>8),ee.push(255&N[ae].byteLength),ee=ee.concat(Array.prototype.slice.call(N[ae]));if(Ie=[Pt.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&I.width)>>8,255&I.width,(65280&I.height)>>8,255&I.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(Pt.avcC,new Uint8Array([1,I.profileIdc,I.profileCompatibility,I.levelIdc,255].concat([k.length],F,[N.length],ee))),o(Pt.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],I.sarRatio){var be=I.sarRatio[0],Le=I.sarRatio[1];Ie.push(o(Pt.pasp,new Uint8Array([(4278190080&be)>>24,(16711680&be)>>16,(65280&be)>>8,255&be,(4278190080&Le)>>24,(16711680&Le)>>16,(65280&Le)>>8,255&Le])))}return o.apply(null,Ie)},w=function(I){return o(Pt.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&I.channelcount)>>8,255&I.channelcount,(65280&I.samplesize)>>8,255&I.samplesize,0,0,0,0,(65280&I.samplerate)>>8,255&I.samplerate,0,0]),f(I))},We=function(w){var A=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&w.id)>>24,(16711680&w.id)>>16,(65280&w.id)>>8,255&w.id,0,0,0,0,(4278190080&w.duration)>>24,(16711680&w.duration)>>16,(65280&w.duration)>>8,255&w.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&w.width)>>8,255&w.width,0,0,(65280&w.height)>>8,255&w.height,0,0]);return o(Pt.tkhd,A)},_t=function(w){var A,I,k,N,ee,ae;return A=o(Pt.tfhd,new Uint8Array([0,0,0,58,(4278190080&w.id)>>24,(16711680&w.id)>>16,(65280&w.id)>>8,255&w.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),ee=Math.floor(w.baseMediaDecodeTime/s),ae=Math.floor(w.baseMediaDecodeTime%s),I=o(Pt.tfdt,new Uint8Array([1,0,0,0,ee>>>24&255,ee>>>16&255,ee>>>8&255,255&ee,ae>>>24&255,ae>>>16&255,ae>>>8&255,255&ae])),"audio"===w.type?(k=nn(w,92),o(Pt.traf,A,I,k)):(N=ze(w),k=nn(w,N.length+92),o(Pt.traf,A,I,k,N))},De=function(w){return w.duration=w.duration||4294967295,o(Pt.trak,We(w),et(w))},ft=function(w){var A=new Uint8Array([0,0,0,0,(4278190080&w.id)>>24,(16711680&w.id)>>16,(65280&w.id)>>8,255&w.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==w.type&&(A[A.length-1]=0),o(Pt.trex,A)},function(){var q,w,A;A=function(k,N){var F=0,ee=0,ae=0,Ie=0;return k.length&&(void 0!==k[0].duration&&(F=1),void 0!==k[0].size&&(ee=2),void 0!==k[0].flags&&(ae=4),void 0!==k[0].compositionTimeOffset&&(Ie=8)),[0,0,F|ee|ae|Ie,1,(4278190080&k.length)>>>24,(16711680&k.length)>>>16,(65280&k.length)>>>8,255&k.length,(4278190080&N)>>>24,(16711680&N)>>>16,(65280&N)>>>8,255&N]},w=function(k,N){var F,ee,ae,Ie,be,Le;for(ae=A(Ie=k.samples||[],N+=20+16*Ie.length),(ee=new Uint8Array(ae.length+16*Ie.length)).set(ae),F=ae.length,Le=0;Le<Ie.length;Le++)ee[F++]=(4278190080&(be=Ie[Le]).duration)>>>24,ee[F++]=(16711680&be.duration)>>>16,ee[F++]=(65280&be.duration)>>>8,ee[F++]=255&be.duration,ee[F++]=(4278190080&be.size)>>>24,ee[F++]=(16711680&be.size)>>>16,ee[F++]=(65280&be.size)>>>8,ee[F++]=255&be.size,ee[F++]=be.flags.isLeading<<2|be.flags.dependsOn,ee[F++]=be.flags.isDependedOn<<6|be.flags.hasRedundancy<<4|be.flags.paddingValue<<1|be.flags.isNonSyncSample,ee[F++]=61440&be.flags.degradationPriority,ee[F++]=15&be.flags.degradationPriority,ee[F++]=(4278190080&be.compositionTimeOffset)>>>24,ee[F++]=(16711680&be.compositionTimeOffset)>>>16,ee[F++]=(65280&be.compositionTimeOffset)>>>8,ee[F++]=255&be.compositionTimeOffset;return o(Pt.trun,ee)},q=function(k,N){var F,ee,ae,Ie,be,Le;for(ae=A(Ie=k.samples||[],N+=20+8*Ie.length),(F=new Uint8Array(ae.length+8*Ie.length)).set(ae),ee=ae.length,Le=0;Le<Ie.length;Le++)F[ee++]=(4278190080&(be=Ie[Le]).duration)>>>24,F[ee++]=(16711680&be.duration)>>>16,F[ee++]=(65280&be.duration)>>>8,F[ee++]=255&be.duration,F[ee++]=(4278190080&be.size)>>>24,F[ee++]=(16711680&be.size)>>>16,F[ee++]=(65280&be.size)>>>8,F[ee++]=255&be.size;return o(Pt.trun,F)},nn=function(k,N){return"audio"===k.type?q(k,N):w(k,N)}}();var LR,jR,UR,MA,BR,WV,KV,ZV,Zc_mdat=y,Zc_moof=M,zV=function(w,A){var I={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return I.dataOffset=A,I.compositionTimeOffset=w.pts-w.dts,I.duration=w.duration,I.size=4*w.length,I.size+=w.byteLength,w.keyFrame&&(I.flags.dependsOn=2,I.flags.isNonSyncSample=0),I},Op=[33,16,5,32,164,27],NR=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],pr=function(w){for(var A=[];w--;)A.push(0);return A};jR=function(w){return 9e4*w},UR=function(w,A){return w*A},MA=function(w){return w/9e4},BR=function(w,A){return w/A},WV=function(w,A){return jR(BR(w,A))},KV=function(w,A){return UR(MA(w),A)},ZV=function(w,A,I){return MA(I?w:w-A)};var er_secondsToVideoTs=jR,er_videoTsToSeconds=MA,er_audioTsToVideoTs=WV,er_videoTsToAudioTs=KV,er_metadataTsToSeconds=ZV,PA_prefixWithSilence=function(w,A,I,k){var N,be,Le,ht,F=0,ee=0,ae=0,Ie=0;if(A.length&&(N=er_audioTsToVideoTs(w.baseMediaDecodeTime,w.samplerate),F=Math.ceil(9e4/(w.samplerate/1024)),I&&k&&(ee=N-Math.max(I,k),Ie=(ae=Math.floor(ee/F))*F),!(ae<1||Ie>45e3))){for((be=function(){if(!LR){var w={96e3:[Op,[227,64],pr(154),[56]],88200:[Op,[231],pr(170),[56]],64e3:[Op,[248,192],pr(240),[56]],48e3:[Op,[255,192],pr(268),[55,148,128],pr(54),[112]],44100:[Op,[255,192],pr(268),[55,163,128],pr(84),[112]],32e3:[Op,[255,192],pr(268),[55,234],pr(226),[112]],24e3:[Op,[255,192],pr(268),[55,255,128],pr(268),[111,112],pr(126),[224]],16e3:[Op,[255,192],pr(268),[55,255,128],pr(268),[111,255],pr(269),[223,108],pr(195),[1,192]],12e3:[NR,pr(268),[3,127,248],pr(268),[6,255,240],pr(268),[13,255,224],pr(268),[27,253,128],pr(259),[56]],11025:[NR,pr(268),[3,127,248],pr(268),[6,255,240],pr(268),[13,255,224],pr(268),[27,255,192],pr(268),[55,175,128],pr(108),[112]],8e3:[NR,pr(268),[3,121,16],pr(47),[7]]};LR=function(w){return Object.keys(w).reduce(function(A,I){return A[I]=new Uint8Array(w[I].reduce(function(k,N){return k.concat(N)},[])),A},{})}(w)}return LR}()[w.samplerate])||(be=A[0].data),Le=0;Le<ae;Le++)A.splice(0,0,{data:be,dts:(ht=A[0]).dts-F,pts:ht.pts-F});return w.baseMediaDecodeTime-=Math.floor(er_videoTsToAudioTs(Ie,w.samplerate)),Ie}},$l_clearDtsInfo=function(w){delete w.minSegmentDts,delete w.maxSegmentDts,delete w.minSegmentPts,delete w.maxSegmentPts},$l_calculateTrackBaseMediaDecodeTime=function(w,A){var I,N=w.minSegmentDts;return A||(N-=w.timelineStartInfo.dts),I=w.timelineStartInfo.baseMediaDecodeTime,I+=N,I=Math.max(0,I),"audio"===w.type&&(I*=w.samplerate/9e4,I=Math.floor(I)),I},$l_collectDtsInfo=function(w,A){"number"==typeof A.pts&&(void 0===w.timelineStartInfo.pts&&(w.timelineStartInfo.pts=A.pts),w.minSegmentPts=void 0===w.minSegmentPts?A.pts:Math.min(w.minSegmentPts,A.pts),w.maxSegmentPts=void 0===w.maxSegmentPts?A.pts:Math.max(w.maxSegmentPts,A.pts)),"number"==typeof A.dts&&(void 0===w.timelineStartInfo.dts&&(w.timelineStartInfo.dts=A.dts),w.minSegmentDts=void 0===w.minSegmentDts?A.dts:Math.min(w.minSegmentDts,A.dts),w.maxSegmentDts=void 0===w.maxSegmentDts?A.dts:Math.max(w.maxSegmentDts,A.dts))},_u=function q(w){w=w||{},q.prototype.init.call(this),this.parse708captions_="boolean"!=typeof w.parse708captions||w.parse708captions,this.captionPackets_=[],this.ccStreams_=[new fi(0,0),new fi(0,1),new fi(1,0),new fi(1,1)],this.parse708captions_&&(this.cc708Stream_=new Fr({captionServices:w.captionServices})),this.reset(),this.ccStreams_.forEach(function(A){A.on("data",this.trigger.bind(this,"data")),A.on("partialdone",this.trigger.bind(this,"partialdone")),A.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(_u.prototype=new e).push=function(q){var w,A,I;if("sei_rbsp"===q.nalUnitType&&(w=function(w){for(var A=0,I={payloadType:-1,payloadSize:0},k=0,N=0;A<w.byteLength&&128!==w[A];){for(;255===w[A];)k+=255,A++;for(k+=w[A++];255===w[A];)N+=255,A++;if(N+=w[A++],!I.payload&&4===k){if("GA94"===String.fromCharCode(w[A+3],w[A+4],w[A+5],w[A+6])){I.payloadType=k,I.payloadSize=N,I.payload=w.subarray(A,A+N);break}I.payload=void 0}A+=N,k=0,N=0}return I}(q.escapedRBSP)).payload&&4===w.payloadType&&(A=function(w){return 181!==w.payload[0]||49!=(w.payload[1]<<8|w.payload[2])||"GA94"!==String.fromCharCode(w.payload[3],w.payload[4],w.payload[5],w.payload[6])||3!==w.payload[7]?null:w.payload.subarray(8,w.payload.length-1)}(w))){if(q.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(q.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));I=function(w,A){var k,N,F,ee,I=[];if(!(64&A[0]))return I;for(N=31&A[0],k=0;k<N;k++)ee={type:3&A[2+(F=3*k)],pts:w},4&A[F+2]&&(ee.ccData=A[F+3]<<8|A[F+4],I.push(ee));return I}(q.pts,A),this.captionPackets_=this.captionPackets_.concat(I),this.latestDts_!==q.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=q.dts}},_u.prototype.flushCCStreams=function(q){this.ccStreams_.forEach(function(w){return"flush"===q?w.flush():w.partialFlush()},this)},_u.prototype.flushStream=function(q){this.captionPackets_.length?(this.captionPackets_.forEach(function(w,A){w.presortIndex=A}),this.captionPackets_.sort(function(w,A){return w.pts===A.pts?w.presortIndex-A.presortIndex:w.pts-A.pts}),this.captionPackets_.forEach(function(w){w.type<2?this.dispatchCea608Packet(w):this.dispatchCea708Packet(w)},this),this.captionPackets_.length=0,this.flushCCStreams(q)):this.flushCCStreams(q)},_u.prototype.flush=function(){return this.flushStream("flush")},_u.prototype.partialFlush=function(){return this.flushStream("partialFlush")},_u.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(q){q.reset()})},_u.prototype.dispatchCea608Packet=function(q){this.setsTextOrXDSActive(q)?this.activeCea608Channel_[q.type]=null:this.setsChannel1Active(q)?this.activeCea608Channel_[q.type]=0:this.setsChannel2Active(q)&&(this.activeCea608Channel_[q.type]=1),null!==this.activeCea608Channel_[q.type]&&this.ccStreams_[(q.type<<1)+this.activeCea608Channel_[q.type]].push(q)},_u.prototype.setsChannel1Active=function(q){return 4096==(30720&q.ccData)},_u.prototype.setsChannel2Active=function(q){return 6144==(30720&q.ccData)},_u.prototype.setsTextOrXDSActive=function(q){return 256==(28928&q.ccData)||4138==(30974&q.ccData)||6186==(30974&q.ccData)},_u.prototype.dispatchCea708Packet=function(q){this.parse708captions_&&this.cc708Stream_.push(q)};var R7={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},OA=function(w){return 32<=w&&w<=127||160<=w&&w<=255},_h=function(w){this.windowNum=w,this.reset()};_h.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},_h.prototype.getText=function(){return this.rows.join("\n")},_h.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},_h.prototype.newLine=function(q){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(q),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},_h.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},_h.prototype.addText=function(q){this.rows[this.rowIdx]+=q},_h.prototype.backspace=function(){if(!this.isEmpty()){var q=this.rows[this.rowIdx];this.rows[this.rowIdx]=q.substr(0,q.length-1)}};var RA=function(w,A,I){this.serviceNum=w,this.text="",this.currentWindow=new _h(-1),this.windows=[],this.stream=I,"string"==typeof A&&this.createTextDecoder(A)};RA.prototype.init=function(q,w){this.startPts=q;for(var A=0;A<8;A++)this.windows[A]=new _h(A),"function"==typeof w&&(this.windows[A].beforeRowOverflow=w)},RA.prototype.setCurrentWindow=function(q){this.currentWindow=this.windows[q]},RA.prototype.createTextDecoder=function(q){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(q)}catch(w){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+q+" encoding. "+w})}};var Fr=function q(w){w=w||{},q.prototype.init.call(this);var N,A=this,I=w.captionServices||{},k={};Object.keys(I).forEach(function(F){N=I[F],/^SERVICE/.test(F)&&(k[F]=N.encoding)}),this.serviceEncodings=k,this.current708Packet=null,this.services={},this.push=function(F){3===F.type?(A.new708Packet(),A.add708Bytes(F)):(null===A.current708Packet&&A.new708Packet(),A.add708Bytes(F))}};Fr.prototype=new e,Fr.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Fr.prototype.add708Bytes=function(q){var w=q.ccData,A=w>>>8,I=255&w;this.current708Packet.ptsVals.push(q.pts),this.current708Packet.data.push(A),this.current708Packet.data.push(I)},Fr.prototype.push708Packet=function(){var q=this.current708Packet,w=q.data,A=null,I=null,k=0,N=w[k++];for(q.seq=N>>6,q.sizeCode=63&N;k<w.length;k++)I=31&(N=w[k++]),7==(A=N>>5)&&I>0&&(A=N=w[k++]),this.pushServiceBlock(A,k,I),I>0&&(k+=I-1)},Fr.prototype.pushServiceBlock=function(q,w,A){var I,k=w,N=this.current708Packet.data,F=this.services[q];for(F||(F=this.initService(q,k));k<w+A&&k<N.length;k++)OA(I=N[k])?k=this.handleText(k,F):24===I?k=this.multiByteCharacter(k,F):16===I?k=this.extendedCommands(k,F):128<=I&&I<=135?k=this.setCurrentWindow(k,F):152<=I&&I<=159?k=this.defineWindow(k,F):136===I?k=this.clearWindows(k,F):140===I?k=this.deleteWindows(k,F):137===I?k=this.displayWindows(k,F):138===I?k=this.hideWindows(k,F):139===I?k=this.toggleWindows(k,F):151===I?k=this.setWindowAttributes(k,F):144===I?k=this.setPenAttributes(k,F):145===I?k=this.setPenColor(k,F):146===I?k=this.setPenLocation(k,F):143===I?F=this.reset(k,F):8===I?F.currentWindow.backspace():12===I?F.currentWindow.clearText():13===I?F.currentWindow.pendingNewLine=!0:14===I?F.currentWindow.clearText():141===I&&k++},Fr.prototype.extendedCommands=function(q,w){var I=this.current708Packet.data[++q];return OA(I)&&(q=this.handleText(q,w,{isExtended:!0})),q},Fr.prototype.getPts=function(q){return this.current708Packet.ptsVals[Math.floor(q/2)]},Fr.prototype.initService=function(q,w){var I,k,A=this;return(I="SERVICE"+q)in this.serviceEncodings&&(k=this.serviceEncodings[I]),this.services[q]=new RA(q,k,A),this.services[q].init(this.getPts(w),function(N){A.flushDisplayed(N,A.services[q])}),this.services[q]},Fr.prototype.handleText=function(q,w,A){var be,Le,I=A&&A.isExtended,N=this.current708Packet.data,F=I?4096:0,ee=N[q],Ie=w.currentWindow;return w.textDecoder_&&!I?(A&&A.isMultiByte?(Le=[ee,N[q+1]],q++):Le=[ee],be=w.textDecoder_.decode(new Uint8Array(Le))):be=function(w){var A=R7[w]||w;return 4096&w&&w===A?"":String.fromCharCode(A)}(F|ee),Ie.pendingNewLine&&!Ie.isEmpty()&&Ie.newLine(this.getPts(q)),Ie.pendingNewLine=!1,Ie.addText(be),q},Fr.prototype.multiByteCharacter=function(q,w){var A=this.current708Packet.data,k=A[q+2];return OA(A[q+1])&&OA(k)&&(q=this.handleText(++q,w,{isMultiByte:!0})),q},Fr.prototype.setCurrentWindow=function(q,w){return w.setCurrentWindow(7&this.current708Packet.data[q]),q},Fr.prototype.defineWindow=function(q,w){var A=this.current708Packet.data,I=A[q];w.setCurrentWindow(7&I);var N=w.currentWindow;return I=A[++q],N.visible=(32&I)>>5,N.rowLock=(16&I)>>4,N.columnLock=(8&I)>>3,N.priority=7&I,I=A[++q],N.relativePositioning=(128&I)>>7,N.anchorVertical=127&I,I=A[++q],N.anchorHorizontal=I,I=A[++q],N.anchorPoint=(240&I)>>4,N.rowCount=15&I,I=A[++q],N.columnCount=63&I,I=A[++q],N.windowStyle=(56&I)>>3,N.penStyle=7&I,N.virtualRowCount=N.rowCount+1,q},Fr.prototype.setWindowAttributes=function(q,w){var A=this.current708Packet.data,I=A[q],k=w.currentWindow.winAttr;return I=A[++q],k.fillOpacity=(192&I)>>6,k.fillRed=(48&I)>>4,k.fillGreen=(12&I)>>2,k.fillBlue=3&I,I=A[++q],k.borderType=(192&I)>>6,k.borderRed=(48&I)>>4,k.borderGreen=(12&I)>>2,k.borderBlue=3&I,I=A[++q],k.borderType+=(128&I)>>5,k.wordWrap=(64&I)>>6,k.printDirection=(48&I)>>4,k.scrollDirection=(12&I)>>2,k.justify=3&I,I=A[++q],k.effectSpeed=(240&I)>>4,k.effectDirection=(12&I)>>2,k.displayEffect=3&I,q},Fr.prototype.flushDisplayed=function(q,w){for(var A=[],I=0;I<8;I++)w.windows[I].visible&&!w.windows[I].isEmpty()&&A.push(w.windows[I].getText());w.endPts=q,w.text=A.join("\n\n"),this.pushCaption(w),w.startPts=q},Fr.prototype.pushCaption=function(q){""!==q.text&&(this.trigger("data",{startPts:q.startPts,endPts:q.endPts,text:q.text,stream:"cc708_"+q.serviceNum}),q.text="",q.startPts=q.endPts)},Fr.prototype.displayWindows=function(q,w){var I=this.current708Packet.data[++q],k=this.getPts(q);this.flushDisplayed(k,w);for(var N=0;N<8;N++)I&1<<N&&(w.windows[N].visible=1);return q},Fr.prototype.hideWindows=function(q,w){var I=this.current708Packet.data[++q],k=this.getPts(q);this.flushDisplayed(k,w);for(var N=0;N<8;N++)I&1<<N&&(w.windows[N].visible=0);return q},Fr.prototype.toggleWindows=function(q,w){var I=this.current708Packet.data[++q],k=this.getPts(q);this.flushDisplayed(k,w);for(var N=0;N<8;N++)I&1<<N&&(w.windows[N].visible^=1);return q},Fr.prototype.clearWindows=function(q,w){var I=this.current708Packet.data[++q],k=this.getPts(q);this.flushDisplayed(k,w);for(var N=0;N<8;N++)I&1<<N&&w.windows[N].clearText();return q},Fr.prototype.deleteWindows=function(q,w){var I=this.current708Packet.data[++q],k=this.getPts(q);this.flushDisplayed(k,w);for(var N=0;N<8;N++)I&1<<N&&w.windows[N].reset();return q},Fr.prototype.setPenAttributes=function(q,w){var A=this.current708Packet.data,I=A[q],k=w.currentWindow.penAttr;return I=A[++q],k.textTag=(240&I)>>4,k.offset=(12&I)>>2,k.penSize=3&I,I=A[++q],k.italics=(128&I)>>7,k.underline=(64&I)>>6,k.edgeType=(56&I)>>3,k.fontStyle=7&I,q},Fr.prototype.setPenColor=function(q,w){var A=this.current708Packet.data,I=A[q],k=w.currentWindow.penColor;return I=A[++q],k.fgOpacity=(192&I)>>6,k.fgRed=(48&I)>>4,k.fgGreen=(12&I)>>2,k.fgBlue=3&I,I=A[++q],k.bgOpacity=(192&I)>>6,k.bgRed=(48&I)>>4,k.bgGreen=(12&I)>>2,k.bgBlue=3&I,I=A[++q],k.edgeRed=(48&I)>>4,k.edgeGreen=(12&I)>>2,k.edgeBlue=3&I,q},Fr.prototype.setPenLocation=function(q,w){var A=this.current708Packet.data,I=A[q],k=w.currentWindow.penLoc;return w.currentWindow.pendingNewLine=!0,I=A[++q],k.row=15&I,I=A[++q],k.column=63&I,q},Fr.prototype.reset=function(q,w){var A=this.getPts(q);return this.flushDisplayed(A,w),this.initService(w.serviceNum,q)};var L7={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},NA=function(w){return null===w?"":(w=L7[w]||w,String.fromCharCode(w))},F7=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Lm=function(){for(var w=[],A=15;A--;)w.push("");return w},fi=function q(w,A){q.prototype.init.call(this),this.field_=w||0,this.dataChannel_=A||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(I){var k,N,F,ee,ae;if((k=32639&I.ccData)!==this.lastControlCode_){if(4096==(61440&k)?this.lastControlCode_=k:k!==this.PADDING_&&(this.lastControlCode_=null),F=k>>>8,ee=255&k,k!==this.PADDING_)if(k===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(k===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(I.pts),this.flushDisplayed(I.pts),N=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=N,this.startPts_=I.pts;else if(k===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(I.pts);else if(k===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(I.pts);else if(k===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(I.pts);else if(k===this.CARRIAGE_RETURN_)this.clearFormatting(I.pts),this.flushDisplayed(I.pts),this.shiftRowsUp_(),this.startPts_=I.pts;else if(k===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(k===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(I.pts),this.displayed_=Lm();else if(k===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Lm();else if(k===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(I.pts),this.displayed_=Lm()),this.mode_="paintOn",this.startPts_=I.pts;else if(this.isSpecialCharacter(F,ee))ae=NA((F=(3&F)<<8)|ee),this[this.mode_](I.pts,ae),this.column_++;else if(this.isExtCharacter(F,ee))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),ae=NA((F=(3&F)<<8)|ee),this[this.mode_](I.pts,ae),this.column_++;else if(this.isMidRowCode(F,ee))this.clearFormatting(I.pts),this[this.mode_](I.pts," "),this.column_++,14==(14&ee)&&this.addFormatting(I.pts,["i"]),1==(1&ee)&&this.addFormatting(I.pts,["u"]);else if(this.isOffsetControlCode(F,ee))this.column_+=3&ee;else if(this.isPAC(F,ee)){var Ie=F7.indexOf(7968&k);"rollUp"===this.mode_&&(Ie-this.rollUpRows_+1<0&&(Ie=this.rollUpRows_-1),this.setRollUp(I.pts,Ie)),Ie!==this.row_&&(this.clearFormatting(I.pts),this.row_=Ie),1&ee&&-1===this.formatting_.indexOf("u")&&this.addFormatting(I.pts,["u"]),16==(16&k)&&(this.column_=4*((14&k)>>1)),this.isColorPAC(ee)&&14==(14&ee)&&this.addFormatting(I.pts,["i"])}else this.isNormalChar(F)&&(0===ee&&(ee=null),ae=NA(F),ae+=NA(ee),this[this.mode_](I.pts,ae),this.column_+=ae.length)}else this.lastControlCode_=null}};fi.prototype=new e,fi.prototype.flushDisplayed=function(q){var w=this.displayed_.map(function(A,I){try{return A.trim()}catch(k){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+I+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");w.length&&this.trigger("data",{startPts:this.startPts_,endPts:q,text:w,stream:this.name_})},fi.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Lm(),this.nonDisplayed_=Lm(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},fi.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},fi.prototype.isSpecialCharacter=function(q,w){return q===this.EXT_&&w>=48&&w<=63},fi.prototype.isExtCharacter=function(q,w){return(q===this.EXT_+1||q===this.EXT_+2)&&w>=32&&w<=63},fi.prototype.isMidRowCode=function(q,w){return q===this.EXT_&&w>=32&&w<=47},fi.prototype.isOffsetControlCode=function(q,w){return q===this.OFFSET_&&w>=33&&w<=35},fi.prototype.isPAC=function(q,w){return q>=this.BASE_&&q<this.BASE_+8&&w>=64&&w<=127},fi.prototype.isColorPAC=function(q){return q>=64&&q<=79||q>=96&&q<=127},fi.prototype.isNormalChar=function(q){return q>=32&&q<=127},fi.prototype.setRollUp=function(q,w){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(q),this.nonDisplayed_=Lm(),this.displayed_=Lm()),void 0!==w&&w!==this.row_)for(var A=0;A<this.rollUpRows_;A++)this.displayed_[w-A]=this.displayed_[this.row_-A],this.displayed_[this.row_-A]="";void 0===w&&(w=this.row_),this.topRow_=w-this.rollUpRows_+1},fi.prototype.addFormatting=function(q,w){this.formatting_=this.formatting_.concat(w);var A=w.reduce(function(I,k){return I+"<"+k+">"},"");this[this.mode_](q,A)},fi.prototype.clearFormatting=function(q){if(this.formatting_.length){var w=this.formatting_.reverse().reduce(function(A,I){return A+"</"+I+">"},"");this.formatting_=[],this[this.mode_](q,w)}},fi.prototype.popOn=function(q,w){var A=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=A+=w},fi.prototype.rollUp=function(q,w){var A=this.displayed_[this.row_];this.displayed_[this.row_]=A+=w},fi.prototype.shiftRowsUp_=function(){var q;for(q=0;q<this.topRow_;q++)this.displayed_[q]="";for(q=this.row_+1;q<15;q++)this.displayed_[q]="";for(q=this.topRow_;q<this.row_;q++)this.displayed_[q]=this.displayed_[q+1];this.displayed_[this.row_]=""},fi.prototype.paintOn=function(q,w){var A=this.displayed_[this.row_];this.displayed_[this.row_]=A+=w};var FA={CaptionStream:_u,Cea608Stream:fi,Cea708Stream:Fr},io={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},VR=function(w,A){var I=1;for(w>A&&(I=-1);Math.abs(A-w)>4294967296;)w+=8589934592*I;return w},XV=function q(w){var A,I;q.prototype.init.call(this),this.type_=w||"shared",this.push=function(k){"shared"!==this.type_&&k.type!==this.type_||(void 0===I&&(I=k.dts),k.dts=VR(k.dts,I),k.pts=VR(k.pts,I),A=k.dts,this.trigger("data",k))},this.flush=function(){I=A,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){I=void 0,A=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};XV.prototype=new e;var BA,JV_TimestampRolloverStream=XV,JV_handleRollover=VR,e3=function(w,A,I){var k,N="";for(k=A;k<I;k++)N+="%"+("00"+w[k].toString(16)).slice(-2);return N},jA=function(w,A,I){return decodeURIComponent(e3(w,A,I))},B7=function(w,A,I){return unescape(e3(w,A,I))},UA=function(w){return w[0]<<21|w[1]<<14|w[2]<<7|w[3]},t3={TXXX:function(w){var A;if(3===w.data[0]){for(A=1;A<w.data.length;A++)if(0===w.data[A]){w.description=jA(w.data,1,A),w.value=jA(w.data,A+1,w.data.length).replace(/\0*$/,"");break}w.data=w.value}},WXXX:function(w){var A;if(3===w.data[0])for(A=1;A<w.data.length;A++)if(0===w.data[A]){w.description=jA(w.data,1,A),w.url=jA(w.data,A+1,w.data.length);break}},PRIV:function(w){var A;for(A=0;A<w.data.length;A++)if(0===w.data[A]){w.owner=B7(w.data,0,A);break}w.privateData=w.data.subarray(A+1),w.data=w.privateData}};BA=function(w){var F,A={descriptor:w&&w.descriptor},I=0,k=[],N=0;if(BA.prototype.init.call(this),this.dispatchType=io.METADATA_STREAM_TYPE.toString(16),A.descriptor)for(F=0;F<A.descriptor.length;F++)this.dispatchType+=("00"+A.descriptor[F].toString(16)).slice(-2);this.push=function(ee){var ae,Ie,be,Le,ht;if("timed-metadata"===ee.type){if(ee.dataAlignmentIndicator&&(N=0,k.length=0),0===k.length&&(ee.data.length<10||ee.data[0]!=="I".charCodeAt(0)||ee.data[1]!=="D".charCodeAt(0)||ee.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(k.push(ee),N+=ee.data.byteLength,1===k.length&&(I=UA(ee.data.subarray(6,10)),I+=10),!(N<I)){for(ae={data:new Uint8Array(I),frames:[],pts:k[0].pts,dts:k[0].dts},ht=0;ht<I;)ae.data.set(k[0].data.subarray(0,I-ht),ht),ht+=k[0].data.byteLength,N-=k[0].data.byteLength,k.shift();Ie=10,64&ae.data[5]&&(Ie+=4,Ie+=UA(ae.data.subarray(10,14)),I-=UA(ae.data.subarray(16,20)));do{if((be=UA(ae.data.subarray(Ie+4,Ie+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((Le={id:String.fromCharCode(ae.data[Ie],ae.data[Ie+1],ae.data[Ie+2],ae.data[Ie+3]),data:ae.data.subarray(Ie+10,Ie+be+10)}).key=Le.id,t3[Le.id]&&(t3[Le.id](Le),"com.apple.streaming.transportStreamTimestamp"===Le.owner)){var zt=Le.data,At=(1&zt[3])<<30|zt[4]<<22|zt[5]<<14|zt[6]<<6|zt[7]>>>2;At*=4,Le.timeStamp=At+=3&zt[7],void 0===ae.pts&&void 0===ae.dts&&(ae.pts=Le.timeStamp,ae.dts=Le.timeStamp),this.trigger("timestamp",Le)}ae.frames.push(Le),Ie+=10,Ie+=be}while(Ie<I);this.trigger("data",ae)}}}},BA.prototype=new e;var VA,hw,HA,V7=BA,H7=JV_TimestampRolloverStream;VA=function(){var w=new Uint8Array(188),A=0;VA.prototype.init.call(this),this.push=function(I){var F,k=0,N=188;for(A?((F=new Uint8Array(I.byteLength+A)).set(w.subarray(0,A)),F.set(I,A),A=0):F=I;N<F.byteLength;)71!==F[k]||71!==F[N]?(k++,N++):(this.trigger("data",F.subarray(k,N)),k+=188,N+=188);k<F.byteLength&&(w.set(F.subarray(k),0),A=F.byteLength-k)},this.flush=function(){188===A&&71===w[0]&&(this.trigger("data",w),A=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){A=0,this.trigger("reset")}},VA.prototype=new e,hw=function(){var w,A,I,k;hw.prototype.init.call(this),k=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,w=function(F,ee){var ae=0;ee.payloadUnitStartIndicator&&(ae+=F[ae]+1),"pat"===ee.type?A(F.subarray(ae),ee):I(F.subarray(ae),ee)},A=function(F,ee){ee.section_number=F[7],ee.last_section_number=F[8],k.pmtPid=(31&F[10])<<8|F[11],ee.pmtPid=k.pmtPid},I=function(F,ee){var Ie,Le;if(1&F[5]){for(k.programMapTable={video:null,audio:null,"timed-metadata":{}},Ie=3+((15&F[1])<<8|F[2])-4,Le=12+((15&F[10])<<8|F[11]);Le<Ie;){var ht=F[Le],Rt=(31&F[Le+1])<<8|F[Le+2];ht===io.H264_STREAM_TYPE&&null===k.programMapTable.video?k.programMapTable.video=Rt:ht===io.ADTS_STREAM_TYPE&&null===k.programMapTable.audio?k.programMapTable.audio=Rt:ht===io.METADATA_STREAM_TYPE&&(k.programMapTable["timed-metadata"][Rt]=ht),Le+=5+((15&F[Le+3])<<8|F[Le+4])}ee.programMapTable=k.programMapTable}},this.push=function(N){var F={},ee=4;if(F.payloadUnitStartIndicator=!!(64&N[1]),F.pid=31&N[1],F.pid<<=8,F.pid|=N[2],(48&N[3])>>>4>1&&(ee+=N[ee]+1),0===F.pid)F.type="pat",w(N.subarray(ee),F),this.trigger("data",F);else if(F.pid===this.pmtPid)for(F.type="pmt",w(N.subarray(ee),F),this.trigger("data",F);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([N,ee,F]):this.processPes_(N,ee,F)},this.processPes_=function(N,F,ee){ee.streamType=ee.pid===this.programMapTable.video?io.H264_STREAM_TYPE:ee.pid===this.programMapTable.audio?io.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][ee.pid],ee.type="pes",ee.data=N.subarray(F),this.trigger("data",ee)}},hw.prototype=new e,hw.STREAM_TYPES={h264:27,adts:15},HA=function(){var F,w=this,A=!1,I={data:[],size:0},k={data:[],size:0},N={data:[],size:0},ae=function(be,Le,ht){var ca,Rt=new Uint8Array(be.size),zt={type:Le},At=0,gn=0,ds=!1;if(be.data.length&&!(be.size<9)){for(zt.trackId=be.data[0].pid,At=0;At<be.data.length;At++)Rt.set((ca=be.data[At]).data,gn),gn+=ca.data.byteLength;(function(be,Le){var ht,Rt=be[0]<<16|be[1]<<8|be[2];Le.data=new Uint8Array,1===Rt&&(Le.packetLength=6+(be[4]<<8|be[5]),Le.dataAlignmentIndicator=0!=(4&be[6]),192&(ht=be[7])&&(Le.pts=(14&be[9])<<27|(255&be[10])<<20|(254&be[11])<<12|(255&be[12])<<5|(254&be[13])>>>3,Le.pts*=4,Le.pts+=(6&be[13])>>>1,Le.dts=Le.pts,64&ht&&(Le.dts=(14&be[14])<<27|(255&be[15])<<20|(254&be[16])<<12|(255&be[17])<<5|(254&be[18])>>>3,Le.dts*=4,Le.dts+=(6&be[18])>>>1)),Le.data=be.subarray(9+be[8]))})(Rt,zt),ds="video"===Le||zt.packetLength<=be.size,(ht||ds)&&(be.size=0,be.data.length=0),ds&&w.trigger("data",zt)}};HA.prototype.init.call(this),this.push=function(Ie){({pat:function(){},pes:function(){var Le,ht;switch(Ie.streamType){case io.H264_STREAM_TYPE:Le=I,ht="video";break;case io.ADTS_STREAM_TYPE:Le=k,ht="audio";break;case io.METADATA_STREAM_TYPE:Le=N,ht="timed-metadata";break;default:return}Ie.payloadUnitStartIndicator&&ae(Le,ht,!0),Le.data.push(Ie),Le.size+=Ie.data.byteLength},pmt:function(){var Le={type:"metadata",tracks:[]};null!==(F=Ie.programMapTable).video&&Le.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.video,codec:"avc",type:"video"}),null!==F.audio&&Le.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.audio,codec:"adts",type:"audio"}),A=!0,w.trigger("data",Le)}})[Ie.type]()},this.reset=function(){I.size=0,I.data.length=0,k.size=0,k.data.length=0,this.trigger("reset")},this.flushStreams_=function(){ae(I,"video"),ae(k,"audio"),ae(N,"timed-metadata")},this.flush=function(){if(!A&&F){var Ie={type:"metadata",tracks:[]};null!==F.video&&Ie.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.video,codec:"avc",type:"video"}),null!==F.audio&&Ie.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+F.audio,codec:"adts",type:"audio"}),w.trigger("data",Ie)}A=!1,this.flushStreams_(),this.trigger("done")}},HA.prototype=new e;var n3={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:VA,TransportParseStream:hw,ElementaryStream:HA,TimestampRolloverStream:H7,CaptionStream:FA.CaptionStream,Cea608Stream:FA.Cea608Stream,Cea708Stream:FA.Cea708Stream,MetadataStream:V7};for(var GR in io)io.hasOwnProperty(GR)&&(n3[GR]=io[GR]);var GA,bh=n3,r3=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];GA=function(w){var A,I=0;GA.prototype.init.call(this),this.skipWarn_=function(k,N){this.trigger("log",{level:"warn",message:"adts skiping bytes "+k+" to "+N+" in frame "+I+" outside syncword"})},this.push=function(k){var F,ee,ae,Ie,be,N=0;if(w||(I=0),"audio"===k.type){A&&A.length?(ae=A,(A=new Uint8Array(ae.byteLength+k.data.byteLength)).set(ae),A.set(k.data,ae.byteLength)):A=k.data;for(var Le;N+7<A.length;)if(255===A[N]&&240==(246&A[N+1])){if("number"==typeof Le&&(this.skipWarn_(Le,N),Le=null),ee=2*(1&~A[N+1]),be=9e4*(Ie=1024*(1+(3&A[N+6])))/r3[(60&A[N+2])>>>2],A.byteLength-N<(F=(3&A[N+3])<<11|A[N+4]<<3|(224&A[N+5])>>5))break;this.trigger("data",{pts:k.pts+I*be,dts:k.dts+I*be,sampleCount:Ie,audioobjecttype:1+(A[N+2]>>>6&3),channelcount:(1&A[N+2])<<2|(192&A[N+3])>>>6,samplerate:r3[(60&A[N+2])>>>2],samplingfrequencyindex:(60&A[N+2])>>>2,samplesize:16,data:A.subarray(N+7+ee,N+F)}),I++,N+=F}else"number"!=typeof Le&&(Le=N),N++;"number"==typeof Le&&(this.skipWarn_(Le,N),Le=null),A=A.subarray(N)}},this.flush=function(){I=0,this.trigger("done")},this.reset=function(){A=void 0,this.trigger("reset")},this.endTimeline=function(){A=void 0,this.trigger("endedtimeline")}},GA.prototype=new e;var s3,i3=GA;s3=function(w){var A=w.byteLength,I=0,k=0;this.length=function(){return 8*A},this.bitsAvailable=function(){return 8*A+k},this.loadWord=function(){var N=w.byteLength-A,F=new Uint8Array(4),ee=Math.min(4,A);if(0===ee)throw new Error("no bytes available");F.set(w.subarray(N,N+ee)),I=new DataView(F.buffer).getUint32(0),k=8*ee,A-=ee},this.skipBits=function(N){var F;k>N?(I<<=N,k-=N):(N-=k,N-=8*(F=Math.floor(N/8)),A-=F,this.loadWord(),I<<=N,k-=N)},this.readBits=function(N){var F=Math.min(k,N),ee=I>>>32-F;return(k-=F)>0?I<<=F:A>0&&this.loadWord(),(F=N-F)>0?ee<<F|this.readBits(F):ee},this.skipLeadingZeros=function(){var N;for(N=0;N<k;++N)if(0!=(I&2147483648>>>N))return I<<=N,k-=N,N;return this.loadWord(),N+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var N=this.skipLeadingZeros();return this.readBits(N+1)-1},this.readExpGolomb=function(){var N=this.readUnsignedExpGolomb();return 1&N?1+N>>>1:-1*(N>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var $A,fw,o3,$7=s3;fw=function(){var A,I,w=0;fw.prototype.init.call(this),this.push=function(k){var N;I?((N=new Uint8Array(I.byteLength+k.data.byteLength)).set(I),N.set(k.data,I.byteLength),I=N):I=k.data;for(var F=I.byteLength;w<F-3;w++)if(1===I[w+2]){A=w+5;break}for(;A<F;)switch(I[A]){case 0:if(0!==I[A-1]){A+=2;break}if(0!==I[A-2]){A++;break}w+3!==A-2&&this.trigger("data",I.subarray(w+3,A-2));do{A++}while(1!==I[A]&&A<F);w=A-2,A+=3;break;case 1:if(0!==I[A-1]||0!==I[A-2]){A+=3;break}this.trigger("data",I.subarray(w+3,A-2)),w=A-2,A+=3;break;default:A+=3}I=I.subarray(w),A-=w,w=0},this.reset=function(){I=null,w=0,this.trigger("reset")},this.flush=function(){I&&I.byteLength>3&&this.trigger("data",I.subarray(w+3)),I=null,w=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},fw.prototype=new e,o3={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},$A=function(){var A,I,k,N,F,ee,ae,w=new fw;$A.prototype.init.call(this),A=this,this.push=function(Ie){"video"===Ie.type&&(I=Ie.trackId,k=Ie.pts,N=Ie.dts,w.push(Ie))},w.on("data",function(Ie){var be={trackId:I,pts:k,dts:N,data:Ie,nalUnitTypeCode:31&Ie[0]};switch(be.nalUnitTypeCode){case 5:be.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:be.nalUnitType="sei_rbsp",be.escapedRBSP=F(Ie.subarray(1));break;case 7:be.nalUnitType="seq_parameter_set_rbsp",be.escapedRBSP=F(Ie.subarray(1)),be.config=ee(be.escapedRBSP);break;case 8:be.nalUnitType="pic_parameter_set_rbsp";break;case 9:be.nalUnitType="access_unit_delimiter_rbsp"}A.trigger("data",be)}),w.on("done",function(){A.trigger("done")}),w.on("partialdone",function(){A.trigger("partialdone")}),w.on("reset",function(){A.trigger("reset")}),w.on("endedtimeline",function(){A.trigger("endedtimeline")}),this.flush=function(){w.flush()},this.partialFlush=function(){w.partialFlush()},this.reset=function(){w.reset()},this.endTimeline=function(){w.endTimeline()},ae=function(be,Le){var zt,ht=8,Rt=8;for(zt=0;zt<be;zt++)0!==Rt&&(Rt=(ht+Le.readExpGolomb()+256)%256),ht=0===Rt?ht:Rt},F=function(be){for(var zt,At,Le=be.byteLength,ht=[],Rt=1;Rt<Le-2;)0===be[Rt]&&0===be[Rt+1]&&3===be[Rt+2]?(ht.push(Rt+2),Rt+=2):Rt++;if(0===ht.length)return be;zt=Le-ht.length,At=new Uint8Array(zt);var gn=0;for(Rt=0;Rt<zt;gn++,Rt++)gn===ht[0]&&(gn++,ht.shift()),At[Rt]=be[gn];return At},ee=function(be){var At,gn,ds,ca,Bm,ZR,C3,x3,I3,YR,A3,Vm,Le=0,ht=0,Rt=0,zt=0,Ni=[1,1];if(gn=(At=new $7(be)).readUnsignedByte(),ca=At.readUnsignedByte(),ds=At.readUnsignedByte(),At.skipUnsignedExpGolomb(),o3[gn]&&(3===(Bm=At.readUnsignedExpGolomb())&&At.skipBits(1),At.skipUnsignedExpGolomb(),At.skipUnsignedExpGolomb(),At.skipBits(1),At.readBoolean()))for(A3=3!==Bm?8:12,Vm=0;Vm<A3;Vm++)At.readBoolean()&&ae(Vm<6?16:64,At);if(At.skipUnsignedExpGolomb(),0===(ZR=At.readUnsignedExpGolomb()))At.readUnsignedExpGolomb();else if(1===ZR)for(At.skipBits(1),At.skipExpGolomb(),At.skipExpGolomb(),C3=At.readUnsignedExpGolomb(),Vm=0;Vm<C3;Vm++)At.skipExpGolomb();if(At.skipUnsignedExpGolomb(),At.skipBits(1),x3=At.readUnsignedExpGolomb(),I3=At.readUnsignedExpGolomb(),0===(YR=At.readBits(1))&&At.skipBits(1),At.skipBits(1),At.readBoolean()&&(Le=At.readUnsignedExpGolomb(),ht=At.readUnsignedExpGolomb(),Rt=At.readUnsignedExpGolomb(),zt=At.readUnsignedExpGolomb()),At.readBoolean()&&At.readBoolean())switch(At.readUnsignedByte()){case 1:Ni=[1,1];break;case 2:Ni=[12,11];break;case 3:Ni=[10,11];break;case 4:Ni=[16,11];break;case 5:Ni=[40,33];break;case 6:Ni=[24,11];break;case 7:Ni=[20,11];break;case 8:Ni=[32,11];break;case 9:Ni=[80,33];break;case 10:Ni=[18,11];break;case 11:Ni=[15,11];break;case 12:Ni=[64,33];break;case 13:Ni=[160,99];break;case 14:Ni=[4,3];break;case 15:Ni=[3,2];break;case 16:Ni=[2,1];break;case 255:Ni=[At.readUnsignedByte()<<8|At.readUnsignedByte(),At.readUnsignedByte()<<8|At.readUnsignedByte()]}return{profileIdc:gn,levelIdc:ds,profileCompatibility:ca,width:16*(x3+1)-2*Le-2*ht,height:(2-YR)*(I3+1)*16-2*Rt-2*zt,sarRatio:Ni}}},$A.prototype=new e;var zA,q7={H264Stream:$A,NalByteStream:fw},z7=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a3=function(w,A){var I=w[A+6]<<21|w[A+7]<<14|w[A+8]<<7|w[A+9];return I=I>=0?I:0,(16&w[A+5])>>4?I+20:I+10},W7=function q(w,A){return w.length-A<10||w[A]!=="I".charCodeAt(0)||w[A+1]!=="D".charCodeAt(0)||w[A+2]!=="3".charCodeAt(0)?A:q(w,A+=a3(w,A))},u3=function(w){return w[0]<<21|w[1]<<14|w[2]<<7|w[3]},Y7=function(w,A,I){return unescape(function(w,A,I){var k,N="";for(k=A;k<I;k++)N+="%"+("00"+w[k].toString(16)).slice(-2);return N}(w,A,I))},qA={isLikelyAacData:function(w){var A=W7(w,0);return w.length>=A+2&&255==(255&w[A])&&240==(240&w[A+1])&&16==(22&w[A+1])},parseId3TagSize:a3,parseAdtsSize:function(w,A){return 6144&w[A+3]|w[A+4]<<3|(224&w[A+5])>>5},parseType:function(w,A){return w[A]==="I".charCodeAt(0)&&w[A+1]==="D".charCodeAt(0)&&w[A+2]==="3".charCodeAt(0)?"timed-metadata":!0&w[A]&&240==(240&w[A+1])?"audio":null},parseSampleRate:function(w){for(var A=0;A+5<w.length;){if(255===w[A]&&240==(246&w[A+1]))return z7[(60&w[A+2])>>>2];A++}return null},parseAacTimestamp:function(w){var A,I,k;A=10,64&w[5]&&(A+=4,A+=u3(w.subarray(10,14)));do{if((I=u3(w.subarray(A+4,A+8)))<1)return null;if("PRIV"===String.fromCharCode(w[A],w[A+1],w[A+2],w[A+3])){k=w.subarray(A+10,A+I+10);for(var F=0;F<k.byteLength;F++)if(0===k[F]){if("com.apple.streaming.transportStreamTimestamp"===Y7(k,0,F)){var ae=k.subarray(F+1),Ie=(1&ae[3])<<30|ae[4]<<22|ae[5]<<14|ae[6]<<6|ae[7]>>>2;return(Ie*=4)+(3&ae[7])}break}}A+=10,A+=I}while(A<w.byteLength);return null}};zA=function(){var w=new Uint8Array,A=0;zA.prototype.init.call(this),this.setTimestamp=function(I){A=I},this.push=function(I){var ee,ae,Ie,k=0,N=0;for(w.length?(Ie=w.length,(w=new Uint8Array(I.byteLength+Ie)).set(w.subarray(0,Ie)),w.set(I,Ie)):w=I;w.length-N>=3;)if(w[N]!=="I".charCodeAt(0)||w[N+1]!=="D".charCodeAt(0)||w[N+2]!=="3".charCodeAt(0))if(255!=(255&w[N])||240!=(240&w[N+1]))N++;else{if(w.length-N<7||N+(k=qA.parseAdtsSize(w,N))>w.length)break;ae={type:"audio",data:w.subarray(N,N+k),pts:A,dts:A},this.trigger("data",ae),N+=k}else{if(w.length-N<10||N+(k=qA.parseId3TagSize(w,N))>w.length)break;ee={type:"timed-metadata",data:w.subarray(N,N+k)},this.trigger("data",ee),N+=k}w=w.length-N>0?w.subarray(N):new Uint8Array},this.reset=function(){w=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){w=new Uint8Array,this.trigger("endedtimeline")}},zA.prototype=new e;var pw,G_,WA,Fm,tK=zA,$R=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],qR=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],iK=q7.H264Stream,sK=qA.isLikelyAacData,aK=function(w,A){A.stream=w,this.trigger("log",A)},l3=function(w,A){for(var I=Object.keys(A),k=0;k<I.length;k++){var N=I[k];"headOfPipeline"===N||!A[N].on||A[N].on("log",aK.bind(w,N))}},c3=function(w,A){var I;if(w.length!==A.length)return!1;for(I=0;I<w.length;I++)if(w[I]!==A[I])return!1;return!0},zR=function(w,A,I,k,N,F){return{start:{dts:w,pts:w+(I-A)},end:{dts:w+(k-A),pts:w+(N-I)},prependedContentDuration:F,baseMediaDecodeTime:w}};G_=function(w,A){var k,I=[],N=0,F=0,ee=1/0;k=(A=A||{}).firstSequenceNumber||0,G_.prototype.init.call(this),this.push=function(ae){$l_collectDtsInfo(w,ae),w&&$R.forEach(function(Ie){w[Ie]=ae[Ie]}),I.push(ae)},this.setEarliestDts=function(ae){N=ae},this.setVideoBaseMediaDecodeTime=function(ae){ee=ae},this.setAudioAppendStart=function(ae){F=ae},this.flush=function(){var ae,Ie,be,Le,ht,Rt,zt;0!==I.length?(ae=function(w,A,I){return A.minSegmentDts>=I?w:(A.minSegmentDts=1/0,w.filter(function(k){return k.dts>=I&&(A.minSegmentDts=Math.min(A.minSegmentDts,k.dts),A.minSegmentPts=A.minSegmentDts,!0)}))}(I,w,N),w.baseMediaDecodeTime=$l_calculateTrackBaseMediaDecodeTime(w,A.keepOriginalTimestamps),zt=PA_prefixWithSilence(w,ae,F,ee),w.samples=function(w){var A,k=[];for(A=0;A<w.length;A++)k.push({size:w[A].data.byteLength,duration:1024});return k}(ae),be=Zc_mdat(function(w){var A,I,k=0,N=new Uint8Array(function(w){var A,k=0;for(A=0;A<w.length;A++)k+=w[A].data.byteLength;return k}(w));for(A=0;A<w.length;A++)N.set((I=w[A]).data,k),k+=I.data.byteLength;return N}(ae)),I=[],Ie=Zc_moof(k,[w]),Le=new Uint8Array(Ie.byteLength+be.byteLength),k++,Le.set(Ie),Le.set(be,Ie.byteLength),$l_clearDtsInfo(w),ht=Math.ceil(9216e4/w.samplerate),ae.length&&(Rt=ae.length*ht,this.trigger("segmentTimingInfo",zR(er_audioTsToVideoTs(w.baseMediaDecodeTime,w.samplerate),ae[0].dts,ae[0].pts,ae[0].dts+Rt,ae[0].pts+Rt,zt||0)),this.trigger("timingInfo",{start:ae[0].pts,end:ae[0].pts+Rt})),this.trigger("data",{track:w,boxes:Le}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){$l_clearDtsInfo(w),I=[],this.trigger("reset")}},G_.prototype=new e,pw=function(w,A){var I,F,ee,k=[],N=[];I=(A=A||{}).firstSequenceNumber||0,pw.prototype.init.call(this),delete w.minPTS,this.gopCache_=[],this.push=function(ae){$l_collectDtsInfo(w,ae),"seq_parameter_set_rbsp"===ae.nalUnitType&&!F&&(F=ae.config,w.sps=[ae.data],qR.forEach(function(Ie){w[Ie]=F[Ie]},this)),"pic_parameter_set_rbsp"===ae.nalUnitType&&!ee&&(ee=ae.data,w.pps=[ae.data]),k.push(ae)},this.flush=function(){for(var ae,Ie,be,Le,ht,Rt,At,gn,zt=0;k.length&&"access_unit_delimiter_rbsp"!==k[0].nalUnitType;)k.shift();if(0===k.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(ae=function(w){var A,I,k=[],N=[];for(N.byteLength=0,N.nalCount=0,N.duration=0,k.byteLength=0,A=0;A<w.length;A++)"access_unit_delimiter_rbsp"===(I=w[A]).nalUnitType?(k.length&&(k.duration=I.dts-k.dts,N.byteLength+=k.byteLength,N.nalCount+=k.length,N.duration+=k.duration,N.push(k)),(k=[I]).byteLength=I.data.byteLength,k.pts=I.pts,k.dts=I.dts):("slice_layer_without_partitioning_rbsp_idr"===I.nalUnitType&&(k.keyFrame=!0),k.duration=I.dts-k.dts,k.byteLength+=I.data.byteLength,k.push(I));return N.length&&(!k.duration||k.duration<=0)&&(k.duration=N[N.length-1].duration),N.byteLength+=k.byteLength,N.nalCount+=k.length,N.duration+=k.duration,N.push(k),N}(k),(be=function(w){var A,I,k=[],N=[];for(k.byteLength=0,k.nalCount=0,k.duration=0,k.pts=w[0].pts,k.dts=w[0].dts,N.byteLength=0,N.nalCount=0,N.duration=0,N.pts=w[0].pts,N.dts=w[0].dts,A=0;A<w.length;A++)(I=w[A]).keyFrame?(k.length&&(N.push(k),N.byteLength+=k.byteLength,N.nalCount+=k.nalCount,N.duration+=k.duration),(k=[I]).nalCount=I.length,k.byteLength=I.byteLength,k.pts=I.pts,k.dts=I.dts,k.duration=I.duration):(k.duration+=I.duration,k.nalCount+=I.length,k.byteLength+=I.byteLength,k.push(I));return N.length&&k.duration<=0&&(k.duration=N[N.length-1].duration),N.byteLength+=k.byteLength,N.nalCount+=k.nalCount,N.duration+=k.duration,N.push(k),N}(ae))[0][0].keyFrame||((Ie=this.getGopForFusion_(k[0],w))?(zt=Ie.duration,be.unshift(Ie),be.byteLength+=Ie.byteLength,be.nalCount+=Ie.nalCount,be.pts=Ie.pts,be.dts=Ie.dts,be.duration+=Ie.duration):be=function(w){var A;return!w[0][0].keyFrame&&w.length>1&&(A=w.shift(),w.byteLength-=A.byteLength,w.nalCount-=A.nalCount,w[0][0].dts=A.dts,w[0][0].pts=A.pts,w[0][0].duration+=A.duration),w}(be)),N.length){var ds;if(!(ds=A.alignGopsAtEnd?this.alignGopsAtEnd_(be):this.alignGopsAtStart_(be)))return this.gopCache_.unshift({gop:be.pop(),pps:w.pps,sps:w.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),k=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");$l_clearDtsInfo(w),be=ds}$l_collectDtsInfo(w,be),w.samples=function(w,A){var I,k,N,F,ae=A||0,Ie=[];for(I=0;I<w.length;I++)for(F=w[I],k=0;k<F.length;k++)ae+=(N=zV(F[k],ae)).size,Ie.push(N);return Ie}(be),ht=Zc_mdat(function(w){var A,I,k,N,F,ee,ae=0,ht=new Uint8Array(w.byteLength+4*w.nalCount),Rt=new DataView(ht.buffer);for(A=0;A<w.length;A++)for(N=w[A],I=0;I<N.length;I++)for(F=N[I],k=0;k<F.length;k++)Rt.setUint32(ae,(ee=F[k]).data.byteLength),ht.set(ee.data,ae+=4),ae+=ee.data.byteLength;return ht}(be)),w.baseMediaDecodeTime=$l_calculateTrackBaseMediaDecodeTime(w,A.keepOriginalTimestamps),this.trigger("processedGopsInfo",be.map(function(ca){return{pts:ca.pts,dts:ca.dts,byteLength:ca.byteLength}})),this.trigger("segmentTimingInfo",zR(w.baseMediaDecodeTime,(At=be[0]).dts,At.pts,(gn=be[be.length-1]).dts+gn.duration,gn.pts+gn.duration,zt)),this.trigger("timingInfo",{start:be[0].pts,end:be[be.length-1].pts+be[be.length-1].duration}),this.gopCache_.unshift({gop:be.pop(),pps:w.pps,sps:w.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),k=[],this.trigger("baseMediaDecodeTime",w.baseMediaDecodeTime),this.trigger("timelineStartInfo",w.timelineStartInfo),Le=Zc_moof(I,[w]),Rt=new Uint8Array(Le.byteLength+ht.byteLength),I++,Rt.set(Le),Rt.set(ht,Le.byteLength),this.trigger("data",{track:w,boxes:Rt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),k=[],this.gopCache_.length=0,N.length=0,this.trigger("reset")},this.resetStream_=function(){$l_clearDtsInfo(w),F=void 0,ee=void 0},this.getGopForFusion_=function(ae){var ht,Rt,zt,At,gn,Le=1/0;for(gn=0;gn<this.gopCache_.length;gn++)zt=(At=this.gopCache_[gn]).gop,w.pps&&c3(w.pps[0],At.pps[0])&&w.sps&&c3(w.sps[0],At.sps[0])&&(zt.dts<w.timelineStartInfo.dts||(ht=ae.dts-zt.dts-zt.duration)>=-1e4&&ht<=45e3&&(!Rt||Le>ht)&&(Rt=At,Le=ht));return Rt?Rt.gop:null},this.alignGopsAtStart_=function(ae){var Ie,be,Le,ht,Rt,zt,At,gn;for(Rt=ae.byteLength,zt=ae.nalCount,At=ae.duration,Ie=be=0;Ie<N.length&&be<ae.length&&(Le=N[Ie]).pts!==(ht=ae[be]).pts;)ht.pts>Le.pts?Ie++:(be++,Rt-=ht.byteLength,zt-=ht.nalCount,At-=ht.duration);return 0===be?ae:be===ae.length?null:((gn=ae.slice(be)).byteLength=Rt,gn.duration=At,gn.nalCount=zt,gn.pts=gn[0].pts,gn.dts=gn[0].dts,gn)},this.alignGopsAtEnd_=function(ae){var Ie,be,Le,ht,Rt,zt,At;for(Ie=N.length-1,be=ae.length-1,Rt=null,zt=!1;Ie>=0&&be>=0;){if((Le=N[Ie]).pts===(ht=ae[be]).pts){zt=!0;break}Le.pts>ht.pts?Ie--:(Ie===N.length-1&&(Rt=be),be--)}if(!zt&&null===Rt)return null;if(0===(At=zt?be:Rt))return ae;var gn=ae.slice(At),ds=gn.reduce(function(ca,Bm){return ca.byteLength+=Bm.byteLength,ca.duration+=Bm.duration,ca.nalCount+=Bm.nalCount,ca},{byteLength:0,duration:0,nalCount:0});return gn.byteLength=ds.byteLength,gn.duration=ds.duration,gn.nalCount=ds.nalCount,gn.pts=gn[0].pts,gn.dts=gn[0].dts,gn},this.alignGopsWith=function(ae){N=ae}},pw.prototype=new e,Fm=function(w,A){this.numberOfTracks=0,this.metadataStream=A,this.remuxTracks=void 0===(w=w||{}).remux||!!w.remux,this.keepOriginalTimestamps="boolean"==typeof w.keepOriginalTimestamps&&w.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Fm.prototype.init.call(this),this.push=function(I){return I.text?this.pendingCaptions.push(I):I.frames?this.pendingMetadata.push(I):(this.pendingTracks.push(I.track),this.pendingBytes+=I.boxes.byteLength,"video"===I.track.type&&(this.videoTrack=I.track,this.pendingBoxes.push(I.boxes)),void("audio"===I.track.type&&(this.audioTrack=I.track,this.pendingBoxes.unshift(I.boxes))))}},Fm.prototype=new e,Fm.prototype.flush=function(q){var I,k,N,ee,w=0,A={captions:[],captionStreams:{},metadata:[],info:{}},F=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==q&&"AudioSegmentStream"!==q)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(F=this.videoTrack.timelineStartInfo.pts,qR.forEach(function(ae){A.info[ae]=this.videoTrack[ae]},this)):this.audioTrack&&(F=this.audioTrack.timelineStartInfo.pts,$R.forEach(function(ae){A.info[ae]=this.audioTrack[ae]},this)),this.videoTrack||this.audioTrack){for(A.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,N=function(w){var k,A=g(),I=L(w);return(k=new Uint8Array(A.byteLength+I.byteLength)).set(A),k.set(I,A.byteLength),k}(this.pendingTracks),A.initSegment=new Uint8Array(N.byteLength),A.initSegment.set(N),A.data=new Uint8Array(this.pendingBytes),ee=0;ee<this.pendingBoxes.length;ee++)A.data.set(this.pendingBoxes[ee],w),w+=this.pendingBoxes[ee].byteLength;for(ee=0;ee<this.pendingCaptions.length;ee++)(I=this.pendingCaptions[ee]).startTime=er_metadataTsToSeconds(I.startPts,F,this.keepOriginalTimestamps),I.endTime=er_metadataTsToSeconds(I.endPts,F,this.keepOriginalTimestamps),A.captionStreams[I.stream]=!0,A.captions.push(I);for(ee=0;ee<this.pendingMetadata.length;ee++)(k=this.pendingMetadata[ee]).cueTime=er_metadataTsToSeconds(k.pts,F,this.keepOriginalTimestamps),A.metadata.push(k);for(A.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",A),ee=0;ee<A.captions.length;ee++)this.trigger("caption",I=A.captions[ee]);for(ee=0;ee<A.metadata.length;ee++)this.trigger("id3Frame",k=A.metadata[ee])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Fm.prototype.setRemux=function(q){this.remuxTracks=q},WA=function(w){var k,N,A=this,I=!0;WA.prototype.init.call(this),this.baseMediaDecodeTime=(w=w||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var F={};this.transmuxPipeline_=F,F.type="aac",F.metadataStream=new bh.MetadataStream,F.aacStream=new tK,F.audioTimestampRolloverStream=new bh.TimestampRolloverStream("audio"),F.timedMetadataTimestampRolloverStream=new bh.TimestampRolloverStream("timed-metadata"),F.adtsStream=new i3,F.coalesceStream=new Fm(w,F.metadataStream),F.headOfPipeline=F.aacStream,F.aacStream.pipe(F.audioTimestampRolloverStream).pipe(F.adtsStream),F.aacStream.pipe(F.timedMetadataTimestampRolloverStream).pipe(F.metadataStream).pipe(F.coalesceStream),F.metadataStream.on("timestamp",function(ee){F.aacStream.setTimestamp(ee.timeStamp)}),F.aacStream.on("data",function(ee){"timed-metadata"!==ee.type&&"audio"!==ee.type||F.audioSegmentStream||(N=N||{timelineStartInfo:{baseMediaDecodeTime:A.baseMediaDecodeTime},codec:"adts",type:"audio"},F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new G_(N,w),F.audioSegmentStream.on("log",A.getLogTrigger_("audioSegmentStream")),F.audioSegmentStream.on("timingInfo",A.trigger.bind(A,"audioTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream),A.trigger("trackinfo",{hasAudio:!!N,hasVideo:!!k}))}),F.coalesceStream.on("data",this.trigger.bind(this,"data")),F.coalesceStream.on("done",this.trigger.bind(this,"done")),l3(this,F)},this.setupTsPipeline=function(){var F={};this.transmuxPipeline_=F,F.type="ts",F.metadataStream=new bh.MetadataStream,F.packetStream=new bh.TransportPacketStream,F.parseStream=new bh.TransportParseStream,F.elementaryStream=new bh.ElementaryStream,F.timestampRolloverStream=new bh.TimestampRolloverStream,F.adtsStream=new i3,F.h264Stream=new iK,F.captionStream=new bh.CaptionStream(w),F.coalesceStream=new Fm(w,F.metadataStream),F.headOfPipeline=F.packetStream,F.packetStream.pipe(F.parseStream).pipe(F.elementaryStream).pipe(F.timestampRolloverStream),F.timestampRolloverStream.pipe(F.h264Stream),F.timestampRolloverStream.pipe(F.adtsStream),F.timestampRolloverStream.pipe(F.metadataStream).pipe(F.coalesceStream),F.h264Stream.pipe(F.captionStream).pipe(F.coalesceStream),F.elementaryStream.on("data",function(ee){var ae;if("metadata"===ee.type){for(ae=ee.tracks.length;ae--;)k||"video"!==ee.tracks[ae].type?!N&&"audio"===ee.tracks[ae].type&&((N=ee.tracks[ae]).timelineStartInfo.baseMediaDecodeTime=A.baseMediaDecodeTime):(k=ee.tracks[ae]).timelineStartInfo.baseMediaDecodeTime=A.baseMediaDecodeTime;k&&!F.videoSegmentStream&&(F.coalesceStream.numberOfTracks++,F.videoSegmentStream=new pw(k,w),F.videoSegmentStream.on("log",A.getLogTrigger_("videoSegmentStream")),F.videoSegmentStream.on("timelineStartInfo",function(Ie){N&&!w.keepOriginalTimestamps&&(N.timelineStartInfo=Ie,F.audioSegmentStream.setEarliestDts(Ie.dts-A.baseMediaDecodeTime))}),F.videoSegmentStream.on("processedGopsInfo",A.trigger.bind(A,"gopInfo")),F.videoSegmentStream.on("segmentTimingInfo",A.trigger.bind(A,"videoSegmentTimingInfo")),F.videoSegmentStream.on("baseMediaDecodeTime",function(Ie){N&&F.audioSegmentStream.setVideoBaseMediaDecodeTime(Ie)}),F.videoSegmentStream.on("timingInfo",A.trigger.bind(A,"videoTimingInfo")),F.h264Stream.pipe(F.videoSegmentStream).pipe(F.coalesceStream)),N&&!F.audioSegmentStream&&(F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new G_(N,w),F.audioSegmentStream.on("log",A.getLogTrigger_("audioSegmentStream")),F.audioSegmentStream.on("timingInfo",A.trigger.bind(A,"audioTimingInfo")),F.audioSegmentStream.on("segmentTimingInfo",A.trigger.bind(A,"audioSegmentTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream)),A.trigger("trackinfo",{hasAudio:!!N,hasVideo:!!k})}}),F.coalesceStream.on("data",this.trigger.bind(this,"data")),F.coalesceStream.on("id3Frame",function(ee){ee.dispatchType=F.metadataStream.dispatchType,A.trigger("id3Frame",ee)}),F.coalesceStream.on("caption",this.trigger.bind(this,"caption")),F.coalesceStream.on("done",this.trigger.bind(this,"done")),l3(this,F)},this.setBaseMediaDecodeTime=function(F){var ee=this.transmuxPipeline_;w.keepOriginalTimestamps||(this.baseMediaDecodeTime=F),N&&(N.timelineStartInfo.dts=void 0,N.timelineStartInfo.pts=void 0,$l_clearDtsInfo(N),ee.audioTimestampRolloverStream&&ee.audioTimestampRolloverStream.discontinuity()),k&&(ee.videoSegmentStream&&(ee.videoSegmentStream.gopCache_=[]),k.timelineStartInfo.dts=void 0,k.timelineStartInfo.pts=void 0,$l_clearDtsInfo(k),ee.captionStream.reset()),ee.timestampRolloverStream&&ee.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(F){N&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(F)},this.setRemux=function(F){var ee=this.transmuxPipeline_;w.remux=F,ee&&ee.coalesceStream&&ee.coalesceStream.setRemux(F)},this.alignGopsWith=function(F){k&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(F)},this.getLogTrigger_=function(F){var ee=this;return function(ae){ae.stream=F,ee.trigger("log",ae)}},this.push=function(F){if(I){var ee=sK(F);ee&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!ee&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),I=!1}this.transmuxPipeline_.headOfPipeline.push(F)},this.flush=function(){I=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},WA.prototype=new e;var v3,b3,WR,uK={Transmuxer:WA,VideoSegmentStream:pw,AudioSegmentStream:G_,AUDIO_PROPERTIES:$R,VIDEO_PROPERTIES:qR,generateSegmentTimingInfo:zR},KA_toUnsigned=function(w){return w>>>0},jm=function(w){var A="";return A+=String.fromCharCode(w[0]),A+=String.fromCharCode(w[1]),(A+=String.fromCharCode(w[2]))+String.fromCharCode(w[3])},hK=KA_toUnsigned,Kr=function q(w,A){var k,N,F,ee,ae,I=[];if(!A.length)return null;for(k=0;k<w.byteLength;)N=hK(w[k]<<24|w[k+1]<<16|w[k+2]<<8|w[k+3]),F=jm(w.subarray(k+4,k+8)),ee=N>1?k+N:w.byteLength,F===A[0]&&(1===A.length?I.push(w.subarray(k+8,ee)):(ae=q(w.subarray(k+8,ee),A.slice(1))).length&&(I=I.concat(ae))),k=ee;return I},pK=KA_toUnsigned,gK=i.getUint64,h3=function(w){return{isLeading:(12&w[0])>>>2,dependsOn:3&w[0],isDependedOn:(192&w[1])>>>6,hasRedundancy:(48&w[1])>>>4,paddingValue:(14&w[1])>>>1,isNonSyncSample:1&w[1],degradationPriority:w[2]<<8|w[3]}},g3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mw="undefined"!=typeof window?window:void 0!==g3?g3:"undefined"!=typeof self?self:{},bK=function(w){for(var N,F,A=w.byteLength,I=[],k=1;k<A-2;)0===w[k]&&0===w[k+1]&&3===w[k+2]?(I.push(k+2),k+=2):k++;if(0===I.length)return w;N=A-I.length,F=new Uint8Array(N);var ee=0;for(k=0;k<N;ee++,k++)ee===I[0]&&(ee++,I.shift()),F[k]=w[ee];return F},TK=FA.CaptionStream,EK=function(w,A){for(var I=w,k=0;k<A.length;k++){var N=A[k];if(I<N.size)return N;I-=N.size}return null},CK=function(w,A){var I=Kr(w,["moof","traf"]),k=Kr(w,["mdat"]),N={},F=[];return k.forEach(function(ee,ae){F.push({mdat:ee,traf:I[ae]})}),F.forEach(function(ee){var gn,ds,ae=ee.mdat,Ie=ee.traf,Le=function(w){var Le,A=new DataView(w.buffer,w.byteOffset,w.byteLength),I={version:w[0],flags:new Uint8Array(w.subarray(1,4)),trackId:A.getUint32(4)},k=1&I.flags[2],N=2&I.flags[2],F=8&I.flags[2],ee=16&I.flags[2],ae=32&I.flags[2],Ie=65536&I.flags[0],be=131072&I.flags[0];return Le=8,k&&(Le+=4,I.baseDataOffset=A.getUint32(12),Le+=4),N&&(I.sampleDescriptionIndex=A.getUint32(Le),Le+=4),F&&(I.defaultSampleDuration=A.getUint32(Le),Le+=4),ee&&(I.defaultSampleSize=A.getUint32(Le),Le+=4),ae&&(I.defaultSampleFlags=A.getUint32(Le)),Ie&&(I.durationIsEmpty=!0),!k&&be&&(I.baseDataOffsetIsMoof=!0),I}(Kr(Ie,["tfhd"])[0]),ht=Le.trackId,Rt=Kr(Ie,["tfdt"]),zt=Rt.length>0?function(w){var A={version:w[0],flags:new Uint8Array(w.subarray(1,4))};return A.baseMediaDecodeTime=1===A.version?gK(w.subarray(4)):pK(w[4]<<24|w[5]<<16|w[6]<<8|w[7]),A}(Rt[0]).baseMediaDecodeTime:0,At=Kr(Ie,["trun"]);A===ht&&At.length>0&&(gn=function(w,A,I){var k=A,N=I.defaultSampleDuration||0,F=I.defaultSampleSize||0,ee=I.trackId,ae=[];return w.forEach(function(Ie){var Le=function(w){var ht,A={version:w[0],flags:new Uint8Array(w.subarray(1,4)),samples:[]},I=new DataView(w.buffer,w.byteOffset,w.byteLength),k=1&A.flags[2],N=4&A.flags[2],F=1&A.flags[1],ee=2&A.flags[1],ae=4&A.flags[1],Ie=8&A.flags[1],be=I.getUint32(4),Le=8;for(k&&(A.dataOffset=I.getInt32(Le),Le+=4),N&&be&&(ht={flags:h3(w.subarray(Le,Le+4))},Le+=4,F&&(ht.duration=I.getUint32(Le),Le+=4),ee&&(ht.size=I.getUint32(Le),Le+=4),Ie&&(ht.compositionTimeOffset=1===A.version?I.getInt32(Le):I.getUint32(Le),Le+=4),A.samples.push(ht),be--);be--;)ht={},F&&(ht.duration=I.getUint32(Le),Le+=4),ee&&(ht.size=I.getUint32(Le),Le+=4),ae&&(ht.flags=h3(w.subarray(Le,Le+4)),Le+=4),Ie&&(ht.compositionTimeOffset=1===A.version?I.getInt32(Le):I.getUint32(Le),Le+=4),A.samples.push(ht);return A}(Ie).samples;Le.forEach(function(ht){void 0===ht.duration&&(ht.duration=N),void 0===ht.size&&(ht.size=F),ht.trackId=ee,ht.dts=k,void 0===ht.compositionTimeOffset&&(ht.compositionTimeOffset=0),"bigint"==typeof k?(ht.pts=k+mw.BigInt(ht.compositionTimeOffset),k+=mw.BigInt(ht.duration)):(ht.pts=k+ht.compositionTimeOffset,k+=ht.duration)}),ae=ae.concat(Le)}),ae}(At,zt,Le),ds=function(w,A,I){var F,ee,ae,Ie,k=new DataView(w.buffer,w.byteOffset,w.byteLength),N={logs:[],seiNals:[]};for(ee=0;ee+4<w.length;ee+=ae)if(ae=k.getUint32(ee),ee+=4,!(ae<=0))switch(31&w[ee]){case 6:var be=w.subarray(ee+1,ee+1+ae),Le=EK(ee,A);if(F={nalUnitType:"sei_rbsp",size:ae,data:be,escapedRBSP:bK(be),trackId:I},Le)F.pts=Le.pts,F.dts=Le.dts,Ie=Le;else{if(!Ie){N.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+ee+" for trackId "+I+". See mux.js#223."});break}F.pts=Ie.pts,F.dts=Ie.dts}N.seiNals.push(F)}return N}(ae,gn,ht),N[ht]||(N[ht]={seiNals:[],logs:[]}),N[ht].seiNals=N[ht].seiNals.concat(ds.seiNals),N[ht].logs=N[ht].logs.concat(ds.logs))}),N},AK=function(){var A,I,k,N,F,ee,w=!1;this.isInitialized=function(){return w},this.init=function(ae){A=new TK,w=!0,ee=!!ae&&ae.isPartial,A.on("data",function(Ie){Ie.startTime=Ie.startPts/N,Ie.endTime=Ie.endPts/N,F.captions.push(Ie),F.captionStreams[Ie.stream]=!0}),A.on("log",function(Ie){F.logs.push(Ie)})},this.isNewInit=function(ae,Ie){return!(ae&&0===ae.length||Ie&&"object"==typeof Ie&&0===Object.keys(Ie).length||k===ae[0]&&N===Ie[k])},this.parse=function(ae,Ie,be){var Le;if(!this.isInitialized())return null;if(!Ie||!be)return null;if(this.isNewInit(Ie,be))N=be[k=Ie[0]];else if(null===k||!N)return I.push(ae),null;for(;I.length>0;){var ht=I.shift();this.parse(ht,Ie,be)}return Le=function(w,A,I){if(null===A)return null;var N=CK(w,A)[A]||{};return{seiNals:N.seiNals,logs:N.logs,timescale:I}}(ae,k,N),Le&&Le.logs&&(F.logs=F.logs.concat(Le.logs)),null!==Le&&Le.seiNals?(this.pushNals(Le.seiNals),this.flushStream(),F):F.logs.length?{logs:F.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(ae){if(!this.isInitialized()||!ae||0===ae.length)return null;ae.forEach(function(Ie){A.push(Ie)})},this.flushStream=function(){if(!this.isInitialized())return null;ee?A.partialFlush():A.flush()},this.clearParsedCaptions=function(){F.captions=[],F.captionStreams={},F.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;A.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){I=[],k=null,N=null,F?this.clearParsedCaptions():F={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},ZA=KA_toUnsigned,vw=function(w){return("00"+w.toString(16)).slice(-2)},DK=i.getUint64;v3=function(w,A){var k=Kr(A,["moof","traf"]).reduce(function(N,F){var ht,Rt,ee=Kr(F,["tfhd"])[0],ae=ZA(ee[4]<<24|ee[5]<<16|ee[6]<<8|ee[7]),Ie=w[ae]||9e4,be=Kr(F,["tfdt"])[0],Le=new DataView(be.buffer,be.byteOffset,be.byteLength);return"bigint"==typeof(ht=1===be[0]?DK(be.subarray(4,12)):Le.getUint32(4))?Rt=ht/mw.BigInt(Ie):"number"==typeof ht&&!isNaN(ht)&&(Rt=ht/Ie),Rt<Number.MAX_SAFE_INTEGER&&(Rt=Number(Rt)),Rt<N&&(N=Rt),N},1/0);return"bigint"==typeof k||isFinite(k)?k:0},WR=function(w){var I=0===w[0]?12:20;return ZA(w[I]<<24|w[I+1]<<16|w[I+2]<<8|w[I+3])},b3=function(w){var A=Kr(w,["moov","trak"]),I=[];return A.forEach(function(k){var ee,ae,N={},F=Kr(k,["tkhd"])[0];F&&(ae=(ee=new DataView(F.buffer,F.byteOffset,F.byteLength)).getUint8(0),N.id=ee.getUint32(0===ae?12:20));var Ie=Kr(k,["mdia","hdlr"])[0];if(Ie){var be=jm(Ie.subarray(8,12));N.type="vide"===be?"video":"soun"===be?"audio":be}var Le=Kr(k,["mdia","minf","stbl","stsd"])[0];if(Le){var ht=Le.subarray(8);N.codec=jm(ht.subarray(4,8));var zt,Rt=Kr(ht,[N.codec])[0];Rt&&(/^[asm]vc[1-9]$/i.test(N.codec)?(zt=Rt.subarray(78),"avcC"===jm(zt.subarray(4,8))&&zt.length>11?(N.codec+=".",N.codec+=vw(zt[9]),N.codec+=vw(zt[10]),N.codec+=vw(zt[11])):N.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(N.codec)?(zt=Rt.subarray(28),"esds"===jm(zt.subarray(4,8))&&zt.length>20&&0!==zt[19]?(N.codec+="."+vw(zt[19]),N.codec+="."+vw(zt[20]>>>2&63).replace(/^0/,"")):N.codec="mp4a.40.2"):N.codec=N.codec.toLowerCase())}var gn=Kr(k,["mdia","mdhd"])[0];gn&&(N.timescale=WR(gn)),I.push(N)}),I};var T3_startTime=v3,T3_tracks=b3,E3=function(w){var A=31&w[1];return(A<<=8)|w[2]},YA=function(w){return!!(64&w[1])},QA=function(w){var A=0;return(48&w[3])>>>4>1&&(A+=w[4]+1),A},KR=function(w){switch(w){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},LK={parseType:function(w,A){var I=E3(w);return 0===I?"pat":I===A?"pmt":A?"pes":null},parsePat:function(w){var A=YA(w),I=4+QA(w);return A&&(I+=w[I]+1),(31&w[I+10])<<8|w[I+11]},parsePmt:function(w){var A={},I=YA(w),k=4+QA(w);if(I&&(k+=w[k]+1),1&w[k+5]){var F;F=3+((15&w[k+1])<<8|w[k+2])-4;for(var ae=12+((15&w[k+10])<<8|w[k+11]);ae<F;){var Ie=k+ae;A[(31&w[Ie+1])<<8|w[Ie+2]]=w[Ie],ae+=5+((15&w[Ie+3])<<8|w[Ie+4])}return A}},parsePayloadUnitStartIndicator:YA,parsePesType:function(w,A){switch(A[E3(w)]){case io.H264_STREAM_TYPE:return"video";case io.ADTS_STREAM_TYPE:return"audio";case io.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(w){if(!YA(w))return null;var I=4+QA(w);if(I>=w.byteLength)return null;var N,k=null;return 192&(N=w[I+7])&&((k={}).pts=(14&w[I+9])<<27|(255&w[I+10])<<20|(254&w[I+11])<<12|(255&w[I+12])<<5|(254&w[I+13])>>>3,k.pts*=4,k.pts+=(6&w[I+13])>>>1,k.dts=k.pts,64&N&&(k.dts=(14&w[I+14])<<27|(255&w[I+15])<<20|(254&w[I+16])<<12|(255&w[I+17])<<5|(254&w[I+18])>>>3,k.dts*=4,k.dts+=(6&w[I+18])>>>1)),k},videoPacketContainsKeyFrame:function(w){for(var A=4+QA(w),I=w.subarray(A),k=0,N=0,F=!1;N<I.byteLength-3;N++)if(1===I[N+2]){k=N+5;break}for(;k<I.byteLength;)switch(I[k]){case 0:if(0!==I[k-1]){k+=2;break}if(0!==I[k-2]){k++;break}N+3!==k-2&&"slice_layer_without_partitioning_rbsp_idr"===KR(31&I[N+3])&&(F=!0);do{k++}while(1!==I[k]&&k<I.length);N=k-2,k+=3;break;case 1:if(0!==I[k-1]||0!==I[k-2]){k+=3;break}"slice_layer_without_partitioning_rbsp_idr"===KR(31&I[N+3])&&(F=!0),N=k-2,k+=3;break;default:k+=3}return I=I.subarray(N),k-=N,N=0,I&&I.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===KR(31&I[N+3])&&(F=!0),F}},$_=JV_handleRollover,gr={};gr.ts=LK,gr.aac=qA;var Um=9e4,la=188,w3=function(w,A,I){for(var F,ae,Ie,be,k=0,N=la,Le=!1;N<=w.byteLength;)if(71!==w[k]||71!==w[N]&&N!==w.byteLength)k++,N++;else{if("pes"===(F=w.subarray(k,N),gr.ts.parseType(F,A.pid))&&(ae=gr.ts.parsePesType(F,A.table),Ie=gr.ts.parsePayloadUnitStartIndicator(F),"audio"===ae&&Ie&&(be=gr.ts.parsePesTime(F))&&(be.type="audio",I.audio.push(be),Le=!0)),Le)break;k+=la,N+=la}for(k=(N=w.byteLength)-la,Le=!1;k>=0;)if(71!==w[k]||71!==w[N]&&N!==w.byteLength)k--,N--;else{if("pes"===(F=w.subarray(k,N),gr.ts.parseType(F,A.pid))&&(ae=gr.ts.parsePesType(F,A.table),Ie=gr.ts.parsePayloadUnitStartIndicator(F),"audio"===ae&&Ie&&(be=gr.ts.parsePesTime(F))&&(be.type="audio",I.audio.push(be),Le=!0)),Le)break;k-=la,N-=la}},jK=function(w,A,I){for(var F,ae,Ie,be,Le,ht,Rt,k=0,N=la,zt=!1,At={data:[],size:0};N<w.byteLength;)if(71!==w[k]||71!==w[N])k++,N++;else{if("pes"===(F=w.subarray(k,N),gr.ts.parseType(F,A.pid))&&(ae=gr.ts.parsePesType(F,A.table),Ie=gr.ts.parsePayloadUnitStartIndicator(F),"video"===ae&&(Ie&&!zt&&(be=gr.ts.parsePesTime(F))&&(be.type="video",I.video.push(be),zt=!0),!I.firstKeyFrame))){if(Ie&&0!==At.size){for(Le=new Uint8Array(At.size),ht=0;At.data.length;)Rt=At.data.shift(),Le.set(Rt,ht),ht+=Rt.byteLength;if(gr.ts.videoPacketContainsKeyFrame(Le)){var gn=gr.ts.parsePesTime(Le);gn?(I.firstKeyFrame=gn,I.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}At.size=0}At.data.push(F),At.size+=F.byteLength}if(zt&&I.firstKeyFrame)break;k+=la,N+=la}for(k=(N=w.byteLength)-la,zt=!1;k>=0;)if(71!==w[k]||71!==w[N])k--,N--;else{if("pes"===(F=w.subarray(k,N),gr.ts.parseType(F,A.pid))&&(ae=gr.ts.parsePesType(F,A.table),Ie=gr.ts.parsePayloadUnitStartIndicator(F),"video"===ae&&Ie&&(be=gr.ts.parsePesTime(F))&&(be.type="video",I.video.push(be),zt=!0)),zt)break;k-=la,N-=la}},GK_inspect=function(w,A){var k;return k=gr.aac.isLikelyAacData(w)?function(w){for(var ae,A=!1,I=0,k=null,N=null,F=0,ee=0;w.length-ee>=3;){switch(gr.aac.parseType(w,ee)){case"timed-metadata":if(w.length-ee<10){A=!0;break}if((F=gr.aac.parseId3TagSize(w,ee))>w.length){A=!0;break}null===N&&(ae=w.subarray(ee,ee+F),N=gr.aac.parseAacTimestamp(ae)),ee+=F;break;case"audio":if(w.length-ee<7){A=!0;break}if((F=gr.aac.parseAdtsSize(w,ee))>w.length){A=!0;break}null===k&&(ae=w.subarray(ee,ee+F),k=gr.aac.parseSampleRate(ae)),I++,ee+=F;break;default:ee++}if(A)return null}if(null===k||null===N)return null;var be=Um/k;return{audio:[{type:"audio",dts:N,pts:N},{type:"audio",dts:N+1024*I*be,pts:N+1024*I*be}]}}(w):function(w){var A={pid:null,table:null},I={};for(var k in function(w,A){for(var N,I=0,k=la;k<w.byteLength;)if(71!==w[I]||71!==w[k])I++,k++;else{switch(N=w.subarray(I,k),gr.ts.parseType(N,A.pid)){case"pat":A.pid=gr.ts.parsePat(N);break;case"pmt":var ee=gr.ts.parsePmt(N);A.table=A.table||{},Object.keys(ee).forEach(function(ae){A.table[ae]=ee[ae]})}I+=la,k+=la}}(w,A),A.table)if(A.table.hasOwnProperty(k))switch(A.table[k]){case io.H264_STREAM_TYPE:I.video=[],jK(w,A,I),0===I.video.length&&delete I.video;break;case io.ADTS_STREAM_TYPE:I.audio=[],w3(w,A,I),0===I.audio.length&&delete I.audio}return I}(w),k&&(k.audio||k.video)?(function(w,A){if(w.audio&&w.audio.length){var I=A;(void 0===I||isNaN(I))&&(I=w.audio[0].dts),w.audio.forEach(function(F){F.dts=$_(F.dts,I),F.pts=$_(F.pts,I),F.dtsTime=F.dts/Um,F.ptsTime=F.pts/Um})}if(w.video&&w.video.length){var k=A;if((void 0===k||isNaN(k))&&(k=w.video[0].dts),w.video.forEach(function(F){F.dts=$_(F.dts,k),F.pts=$_(F.pts,k),F.dtsTime=F.dts/Um,F.ptsTime=F.pts/Um}),w.firstKeyFrame){var N=w.firstKeyFrame;N.dts=$_(N.dts,k),N.pts=$_(N.pts,k),N.dtsTime=N.dts/Um,N.ptsTime=N.pts/Um}}}(k,A),k):null},S3=function(){function q(A,I){this.options=I||{},this.self=A,this.init()}var w=q.prototype;return w.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new uK.Transmuxer(this.options),function(w,A){A.on("data",function(I){var k=I.initSegment;I.initSegment={data:k.buffer,byteOffset:k.byteOffset,byteLength:k.byteLength};var N=I.data;I.data=N.buffer,w.postMessage({action:"data",segment:I,byteOffset:N.byteOffset,byteLength:N.byteLength},[I.data])}),A.on("done",function(I){w.postMessage({action:"done"})}),A.on("gopInfo",function(I){w.postMessage({action:"gopInfo",gopInfo:I})}),A.on("videoSegmentTimingInfo",function(I){var k={start:{decode:er_videoTsToSeconds(I.start.dts),presentation:er_videoTsToSeconds(I.start.pts)},end:{decode:er_videoTsToSeconds(I.end.dts),presentation:er_videoTsToSeconds(I.end.pts)},baseMediaDecodeTime:er_videoTsToSeconds(I.baseMediaDecodeTime)};I.prependedContentDuration&&(k.prependedContentDuration=er_videoTsToSeconds(I.prependedContentDuration)),w.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:k})}),A.on("audioSegmentTimingInfo",function(I){var k={start:{decode:er_videoTsToSeconds(I.start.dts),presentation:er_videoTsToSeconds(I.start.pts)},end:{decode:er_videoTsToSeconds(I.end.dts),presentation:er_videoTsToSeconds(I.end.pts)},baseMediaDecodeTime:er_videoTsToSeconds(I.baseMediaDecodeTime)};I.prependedContentDuration&&(k.prependedContentDuration=er_videoTsToSeconds(I.prependedContentDuration)),w.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:k})}),A.on("id3Frame",function(I){w.postMessage({action:"id3Frame",id3Frame:I})}),A.on("caption",function(I){w.postMessage({action:"caption",caption:I})}),A.on("trackinfo",function(I){w.postMessage({action:"trackinfo",trackInfo:I})}),A.on("audioTimingInfo",function(I){w.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:er_videoTsToSeconds(I.start),end:er_videoTsToSeconds(I.end)}})}),A.on("videoTimingInfo",function(I){w.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:er_videoTsToSeconds(I.start),end:er_videoTsToSeconds(I.end)}})}),A.on("log",function(I){w.postMessage({action:"log",log:I})})}(this.self,this.transmuxer)},w.pushMp4Captions=function(I){this.captionParser||(this.captionParser=new AK,this.captionParser.init());var k=new Uint8Array(I.data,I.byteOffset,I.byteLength),N=this.captionParser.parse(k,I.trackIds,I.timescales);this.self.postMessage({action:"mp4Captions",captions:N&&N.captions||[],logs:N&&N.logs||[],data:k.buffer},[k.buffer])},w.probeMp4StartTime=function(I){var N=I.data,F=T3_startTime(I.timescales,N);this.self.postMessage({action:"probeMp4StartTime",startTime:F,data:N},[N.buffer])},w.probeMp4Tracks=function(I){var k=I.data,N=T3_tracks(k);this.self.postMessage({action:"probeMp4Tracks",tracks:N,data:k},[k.buffer])},w.probeTs=function(I){var k=I.data,N=I.baseStartTime,F="number"!=typeof N||isNaN(N)?void 0:9e4*N,ee=GK_inspect(k,F),ae=null;ee&&((ae={hasVideo:ee.video&&2===ee.video.length||!1,hasAudio:ee.audio&&2===ee.audio.length||!1}).hasVideo&&(ae.videoStart=ee.video[0].ptsTime),ae.hasAudio&&(ae.audioStart=ee.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:ae,data:k},[k.buffer])},w.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},w.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},w.push=function(I){var k=new Uint8Array(I.data,I.byteOffset,I.byteLength);this.transmuxer.push(k)},w.reset=function(){this.transmuxer.reset()},w.setTimestampOffset=function(I){this.transmuxer.setBaseMediaDecodeTime(Math.round(er_secondsToVideoTs(I.timestampOffset||0)))},w.setAudioAppendStart=function(I){this.transmuxer.setAudioAppendStart(Math.ceil(er_secondsToVideoTs(I.appendStart)))},w.setRemux=function(I){this.transmuxer.setRemux(I.remux)},w.flush=function(I){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},w.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},w.alignGopsWith=function(I){this.transmuxer.alignGopsWith(I.gopsToAlignWith.slice())},q}();self.onmessage=function(q){"init"===q.data.action&&q.data.options?this.messageHandlers=new S3(self,q.data.options):(this.messageHandlers||(this.messageHandlers=new S3(self)),q.data&&q.data.action&&"init"!==q.data.action&&this.messageHandlers[q.data.action]&&this.messageHandlers[q.data.action](q.data))}})),rk=uT(ax),dT=function(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,s=e.gopsToAlignWith,o=e.remux,l=e.onData,f=e.onTrackInfo,g=e.onAudioTimingInfo,y=e.onVideoTimingInfo,T=e.onVideoSegmentTimingInfo,S=e.onAudioSegmentTimingInfo,M=e.onId3,L=e.onCaptions,H=e.onDone,$=e.onEndedTimeline,De=e.onTransmuxerLog,We=e.isEndOfTimeline,et={buffer:[]},Me=We;if(t.onmessage=function(_t){t.currentTransmux===e&&("data"===_t.data.action&&function(e,t,n){var i=e.data.segment,s=i.type,o=i.initSegment,y=i.videoFrameDtsTime,T=i.videoFramePtsTime;t.buffer.push({captions:i.captions,captionStreams:i.captionStreams,metadata:i.metadata});var S=e.data.segment.boxes||{data:e.data.segment.data},M={type:s,data:new Uint8Array(S.data,S.data.byteOffset,S.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};void 0!==y&&(M.videoFrameDtsTime=y),void 0!==T&&(M.videoFramePtsTime=T),n(M)}(_t,et,l),"trackinfo"===_t.data.action&&f(_t.data.trackInfo),"gopInfo"===_t.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(_t,et),"audioTimingInfo"===_t.data.action&&g(_t.data.audioTimingInfo),"videoTimingInfo"===_t.data.action&&y(_t.data.videoTimingInfo),"videoSegmentTimingInfo"===_t.data.action&&T(_t.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===_t.data.action&&S(_t.data.audioSegmentTimingInfo),"id3Frame"===_t.data.action&&M([_t.data.id3Frame],_t.data.id3Frame.dispatchType),"caption"===_t.data.action&&L(_t.data.caption),"endedtimeline"===_t.data.action&&(Me=!1,$()),"log"===_t.data.action&&De(_t.data.log),"transmuxed"===_t.data.type&&(Me||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:et,callback:H}),hT(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(s)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),void 0!==o&&t.postMessage({action:"setRemux",remux:o}),n.byteLength){var ze=n instanceof ArrayBuffer?n:n.buffer,Be=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:ze,byteOffset:Be,byteLength:n.byteLength},[ze])}We&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},hT=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():dT(e.currentTransmux))},xs=function(e,t){e.postMessage({action:t}),hT(e)},fT_reset=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void xs(t,e);t.transmuxQueue.push(xs.bind(null,t,e))}("reset",e)},up=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,s=Aa({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",function g(y){y.data.action===n&&(t.removeEventListener("message",g),y.data.data&&(y.data.data=new Uint8Array(y.data.data,e.byteOffset||0,e.byteLength||y.data.data.byteLength),e.data&&(e.data=y.data.data)),i(y.data))}),e.data){var l=e.data instanceof ArrayBuffer;s.byteOffset=l?0:e.data.byteOffset,s.byteLength=e.data.byteLength,t.postMessage(s,[l?e.data:e.data.buffer])}else t.postMessage(s)},jy=function(e){e.forEach(function(t){t.abort()})},Gg=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:-101,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:-102,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},pT=function(e,t,n){return function(i,s){var o=s.response,l=Gg(i,s);if(l)return n(l,e);if(16!==o.byteLength)return n({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:2,xhr:s},e);for(var f=new DataView(o),g=new Uint32Array([f.getUint32(0),f.getUint32(4),f.getUint32(8),f.getUint32(12)]),y=0;y<t.length;y++)t[y].bytes=g;return n(null,e)}},gT=function(e,t){var n=pg(e.map.bytes);if("mp4"!==n)return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+(e.map.resolvedUri||e.map.uri),code:2});up({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(o){var l=o.tracks;return e.map.bytes=o.data,l.forEach(function(g){e.map.tracks=e.map.tracks||{},!e.map.tracks[g.type]&&(e.map.tracks[g.type]=g,"number"==typeof g.id&&g.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[g.id]=g.timescale))}),t(null)}})},yN=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,s=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,l=e.audioSegmentTimingInfoFn,f=e.id3Fn,g=e.captionsFn,y=e.isEndOfTimeline,T=e.endedTimelineFn,S=e.dataFn,M=e.doneFn,L=e.onTransmuxerLog,H=t.map&&t.map.tracks||{},$=Boolean(H.audio&&H.video),De=s.bind(null,t,"audio","start"),We=s.bind(null,t,"audio","end"),et=s.bind(null,t,"video","start"),Me=s.bind(null,t,"video","end");up({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(Be){t.bytes=n=Be.data;var tt=Be.result;tt&&(i(t,{hasAudio:tt.hasAudio,hasVideo:tt.hasVideo,isMuxed:$}),i=null,tt.hasAudio&&!$&&De(tt.audioStart),tt.hasVideo&&et(tt.videoStart),De=null,et=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void dT(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:$,onData:function(tt){tt.type="combined"===tt.type?"video":tt.type,S(t,tt)},onTrackInfo:function(tt){i&&($&&(tt.isMuxed=!0),i(t,tt))},onAudioTimingInfo:function(tt){De&&void 0!==tt.start&&(De(tt.start),De=null),We&&void 0!==tt.end&&We(tt.end)},onVideoTimingInfo:function(tt){et&&void 0!==tt.start&&(et(tt.start),et=null),Me&&void 0!==tt.end&&Me(tt.end)},onVideoSegmentTimingInfo:function(tt){o(tt)},onAudioSegmentTimingInfo:function(tt){l(tt)},onId3:function(tt,_t){f(t,tt,_t)},onCaptions:function(tt){g(t,[tt])},isEndOfTimeline:y,onEndedTimeline:function(){T()},onTransmuxerLog:L,onDone:function(tt){!M||(tt.type="combined"===tt.type?"video":tt.type,M(null,t,tt))}})}})},vT=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,s=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,l=e.audioSegmentTimingInfoFn,f=e.id3Fn,g=e.captionsFn,y=e.isEndOfTimeline,T=e.endedTimelineFn,S=e.dataFn,M=e.doneFn,L=e.onTransmuxerLog,H=new Uint8Array(n);if(function(e){return ws(e,["moof"]).length>0}(H)){t.isFmp4=!0;var $=t.map.tracks,De={isFmp4:!0,hasVideo:!!$.video,hasAudio:!!$.audio};$.audio&&$.audio.codec&&"enca"!==$.audio.codec&&(De.audioCodec=$.audio.codec),$.video&&$.video.codec&&"encv"!==$.video.codec&&(De.videoCodec=$.video.codec),$.video&&$.audio&&(De.isMuxed=!0),i(t,De);var We=function(Me){S(t,{data:H,type:De.hasAudio&&!De.isMuxed?"audio":"video"}),Me&&Me.length&&g(t,Me),M(null,t,{})};up({action:"probeMp4StartTime",timescales:t.map.timescales,data:H,transmuxer:t.transmuxer,callback:function(Me){var je=Me.data,ze=Me.startTime;n=je.buffer,t.bytes=H=je,De.hasAudio&&!De.isMuxed&&s(t,"audio","start",ze),De.hasVideo&&s(t,"video","start",ze),$.video&&je.byteLength&&t.transmuxer?up({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:H,timescales:t.map.timescales,trackIds:[$.video.id],callback:function(tt){n=tt.data.buffer,t.bytes=H=tt.data,tt.logs.forEach(function(_t){L(Ne.mergeOptions(_t,{stream:"mp4CaptionParser"}))}),We(tt.captions)}}):We()}})}else{if(t.transmuxer)return void 0===t.container&&(t.container=pg(H)),"ts"!==t.container&&"aac"!==t.container?(i(t,{hasAudio:!1,hasVideo:!1}),void M(null,t,{})):void yN({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:f,captionsFn:g,isEndOfTimeline:y,endedTimelineFn:T,dataFn:S,doneFn:M,onTransmuxerLog:L});M(null,t,{})}},cx=function(e,t){var f,n=e.id,i=e.key,s=e.encryptedBytes,o=e.decryptionWorker;o.addEventListener("message",function g(y){if(y.data.source===n){o.removeEventListener("message",g);var T=y.data.decrypted;t(new Uint8Array(T.bytes,T.byteOffset,T.byteLength))}}),f=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),o.postMessage(tx({source:n,encrypted:s,key:f,iv:i.iv}),[s.buffer,f.buffer])},yT=function(e){var t=e.xhr,n=e.xhrOptions,s=e.segment,o=e.abortFn,l=e.progressFn,f=e.trackInfoFn,g=e.timingInfoFn,y=e.videoSegmentTimingInfoFn,T=e.audioSegmentTimingInfoFn,S=e.id3Fn,M=e.captionsFn,L=e.isEndOfTimeline,H=e.endedTimelineFn,$=e.dataFn,et=[],Me=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,s=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,l=e.audioSegmentTimingInfoFn,f=e.id3Fn,g=e.captionsFn,y=e.isEndOfTimeline,T=e.endedTimelineFn,S=e.dataFn,M=e.doneFn,L=e.onTransmuxerLog,H=0,$=!1;return function(De,We){if(!$){if(De)return $=!0,jy(t),M(De,We);if((H+=1)===t.length){var et=function(){if(We.encryptedBytes)return function(e){var n=e.segment,i=e.trackInfoFn,s=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,l=e.audioSegmentTimingInfoFn,f=e.id3Fn,g=e.captionsFn,y=e.isEndOfTimeline,T=e.endedTimelineFn,S=e.dataFn,M=e.doneFn,L=e.onTransmuxerLog;cx({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:e.decryptionWorker},function(H){n.bytes=H,vT({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:f,captionsFn:g,isEndOfTimeline:y,endedTimelineFn:T,dataFn:S,doneFn:M,onTransmuxerLog:L})})}({decryptionWorker:n,segment:We,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:f,captionsFn:g,isEndOfTimeline:y,endedTimelineFn:T,dataFn:S,doneFn:M,onTransmuxerLog:L});vT({segment:We,bytes:We.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:l,id3Fn:f,captionsFn:g,isEndOfTimeline:y,endedTimelineFn:T,dataFn:S,doneFn:M,onTransmuxerLog:L})};if(We.endOfAllRequests=Date.now(),We.map&&We.map.encryptedBytes&&!We.map.bytes)return cx({decryptionWorker:n,id:We.requestId+"-init",encryptedBytes:We.map.encryptedBytes,key:We.map.key},function(Me){We.map.bytes=Me,gT(We,function(je){if(je)return jy(t),M(je,We);et()})});et()}}}}({activeXhrs:et,decryptionWorker:e.decryptionWorker,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:y,audioSegmentTimingInfoFn:T,id3Fn:S,captionsFn:M,isEndOfTimeline:L,endedTimelineFn:H,dataFn:$,doneFn:e.doneFn,onTransmuxerLog:e.onTransmuxerLog});if(s.key&&!s.key.bytes){var je=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&je.push(s.map.key);var tt=t(Ne.mergeOptions(n,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),pT(s,je,Me));et.push(tt)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){var Pt=t(Ne.mergeOptions(n,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),pT(s,[s.map.key],Me));et.push(Pt)}var cn=Ne.mergeOptions(n,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:tT(s.map)}),Tr=function(e){var t=e.segment,n=e.finishProcessingFn;return function(i,s){var o=Gg(i,s);if(o)return n(o,t);var l=new Uint8Array(s.response);if(t.map.key)return t.map.encryptedBytes=l,n(null,t);t.map.bytes=l,gT(t,function(f){if(f)return f.xhr=s,f.status=s.status,n(f,t);n(null,t)})}}({segment:s,finishProcessingFn:Me}),Wr=t(cn,Tr);et.push(Wr)}var Ri=Ne.mergeOptions(n,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:tT(s)}),ii=t(Ri,function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(s,o){var l=Gg(s,o);if(l)return n(l,t);var f="arraybuffer"!==i&&o.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(o.responseText.substring(t.lastReachedChar||0)):o.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(o),t.key?t.encryptedBytes=new Uint8Array(f):t.bytes=new Uint8Array(f),n(null,t)}}({segment:s,finishProcessingFn:Me,responseType:Ri.responseType}));ii.addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return function(i){if(!i.target.aborted)return t.stats=Ne.mergeOptions(t.stats,function(e){var t=e.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i}(i)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(i,t)}}({segment:s,progressFn:l,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:y,audioSegmentTimingInfoFn:T,id3Fn:S,captionsFn:M,isEndOfTimeline:L,endedTimelineFn:H,dataFn:$})),et.push(ii);var Oo={};return et.forEach(function(fr){fr.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(i){i.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:Oo,abortFn:o}))}),function(){return jy(et)}},_T=hu("CodecUtils"),fx=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},$g=function(e){var t={};return e.forEach(function(n){var i=n.mediaType,s=n.type,o=n.details;t[i]=t[i]||[],t[i].push(bf(""+s+o))}),Object.keys(t).forEach(function(n){if(t[n].length>1)return _T("multiple "+n+" codecs found as attributes: "+t[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[n]=null);t[n]=t[n][0]}),t},bT=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},qg=function(e,t){var n=t.attributes||{},i=$g(function(e){var t=e.attributes||{};if(t.CODECS)return ka(t.CODECS)}(t)||[]);if(fx(e,t)&&!i.audio&&!function(e,t){if(!fx(e,t))return!0;var i=e.mediaGroups.AUDIO[(t.attributes||{}).AUDIO];for(var s in i)if(!i[s].uri&&!i[s].playlists)return!0;return!1}(e,t)){var s=$g(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var s=n[i];if(s.default&&s.playlists)return ka(s.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);s.audio&&(i.audio=s.audio)}return i},zg=hu("PlaylistSelector"),TT=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Vy=function(e,t){if(!e)return"";var n=pe().getComputedStyle(e);return n?n[t]:""},lp=function(e,t){var n=e.slice();e.sort(function(i,s){var o=t(i,s);return 0===o?n.indexOf(i)-n.indexOf(s):o})},Hy=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||pe().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i||pe().Number.MAX_VALUE)},ET=function(e,t,n,i,s,o){if(e){var l={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:s},f=e.playlists;Ao.isAudioOnly(e)&&(f=o.getAudioTrackPlaylists_(),l.audioOnly=!0);var g=f.map(function(ft){var Pt=ft.attributes&&ft.attributes.RESOLUTION&&ft.attributes.RESOLUTION.width,cn=ft.attributes&&ft.attributes.RESOLUTION&&ft.attributes.RESOLUTION.height;return{bandwidth:ft.attributes&&ft.attributes.BANDWIDTH||pe().Number.MAX_VALUE,width:Pt,height:cn,playlist:ft}});lp(g,function(ft,nn){return ft.bandwidth-nn.bandwidth});var y=(g=g.filter(function(ft){return!Ao.isIncompatible(ft.playlist)})).filter(function(ft){return Ao.isEnabled(ft.playlist)});y.length||(y=g.filter(function(ft){return!Ao.isDisabled(ft.playlist)}));var T=y.filter(function(ft){return ft.bandwidth*$i.BANDWIDTH_VARIANCE<t}),S=T[T.length-1],M=T.filter(function(ft){return ft.bandwidth===S.bandwidth})[0];if(!1===s){var L=M||y[0]||g[0];if(L&&L.playlist){var H="sortedPlaylistReps";return M&&(H="bandwidthBestRep"),y[0]&&(H="enabledPlaylistReps"),zg("choosing "+TT(L)+" using "+H+" with options",l),L.playlist}return zg("could not choose a playlist with options",l),null}var $=T.filter(function(ft){return ft.width&&ft.height});lp($,function(ft,nn){return ft.width-nn.width});var De=$.filter(function(ft){return ft.width===n&&ft.height===i});S=De[De.length-1];var et,Me,je,ze,We=De.filter(function(ft){return ft.bandwidth===S.bandwidth})[0];if(We||(Me=(et=$.filter(function(ft){return ft.width>n||ft.height>i})).filter(function(ft){return ft.width===et[0].width&&ft.height===et[0].height}),S=Me[Me.length-1],je=Me.filter(function(ft){return ft.bandwidth===S.bandwidth})[0]),o.experimentalLeastPixelDiffSelector){var Be=$.map(function(ft){return ft.pixelDiff=Math.abs(ft.width-n)+Math.abs(ft.height-i),ft});lp(Be,function(ft,nn){return ft.pixelDiff===nn.pixelDiff?nn.bandwidth-ft.bandwidth:ft.pixelDiff-nn.pixelDiff}),ze=Be[0]}var tt=ze||je||We||M||y[0]||g[0];if(tt&&tt.playlist){var _t="sortedPlaylistReps";return ze?_t="leastPixelDiffRep":je?_t="resolutionPlusOneRep":We?_t="resolutionBestRep":M?_t="bandwidthBestRep":y[0]&&(_t="enabledPlaylistReps"),zg("choosing "+TT(tt)+" using "+_t+" with options",l),tt.playlist}return zg("could not choose a playlist with options",l),null}},wT=function(){var e=this.useDevicePixelRatio&&pe().devicePixelRatio||1;return ET(this.playlists.master,this.systemBandwidth,parseInt(Vy(this.tech_.el(),"width"),10)*e,parseInt(Vy(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Gy=function(e,t,n){var i,s;if(n&&n.cues)for(i=n.cues.length;i--;)(s=n.cues[i]).startTime>=e&&s.endTime<=t&&n.removeCue(s)},ST=function(e){return"number"==typeof e&&isFinite(e)},CT=1/60,cp=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,s=e.part,o=e.playlist,l=o.mediaSequence,f=o.id,g=o.segments,T=e.mediaIndex,S=e.partIndex,M=e.timeline,L=(void 0===g?[]:g).length-1,H="mediaIndex/partIndex increment";e.getMediaInfoForTime?H="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(H="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(H+=" with independent "+e.independent);var $="number"==typeof S,De=e.segment.uri?"segment":"pre-segment",We=$?GC({preloadSegment:i})-1:0;return De+" ["+(l+T)+"/"+(l+L)+"]"+($?" part ["+S+"/"+We+"]":"")+" segment start/end ["+i.start+" => "+i.end+"]"+($?" part start/end ["+s.start+" => "+s.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+M+"] selected by ["+H+"] playlist ["+f+"]"},IT=function(e){return e+"TimingInfo"},bx=function(e){var t=e.timelineChangeController,i=e.segmentTimeline,s=e.loaderType,o=e.audioDisabled;if(e.currentTimeline===i)return!1;if("audio"===s){var l=t.lastTimelineChange({type:"main"});return!l||l.to!==i}if("main"===s&&o){var f=t.pendingTimelineChange({type:"audio"});return!(f&&f.to===i)}return!1},qy=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+Fl},Tx=function(r){function e(n,i){var s;if(s=r.call(this)||this,!n)throw new TypeError("Initialization settings are required");if("function"!=typeof n.currentTime)throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=n.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=n.hasPlayed,s.currentTime_=n.currentTime,s.seekable_=n.seekable,s.seeking_=n.seeking,s.duration_=n.duration,s.mediaSource_=n.mediaSource,s.vhs_=n.vhs,s.loaderType_=n.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=n.segmentMetadataTrack,s.goalBufferLength_=n.goalBufferLength,s.sourceType_=n.sourceType,s.sourceUpdater_=n.sourceUpdater,s.inbandTextTracks_=n.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=n.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=n.parse708captions,s.useDtsForTimestampOffset_=n.useDtsForTimestampOffset,s.captionServices_=n.captionServices,s.experimentalExactManifestTimings=n.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=Ne.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=n.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=n.decrypter,s.syncController_=n.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=hu("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(Tn(s),"state",{get:function(){return this.state_},set:function(l){l!==this.state_&&(this.logger_(this.state_+" -> "+l),this.state_=l,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"main"===s.loaderType_&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"audio"===s.loaderType_&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}Mt(e,r);var t=e.prototype;return t.createTransmuxer_=function(){return function(e){var t=new rk;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&pe().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,pe().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(i){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==i:(this.state="READY",!0)},t.error=function(i){return void 0!==i&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&fT_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return Ne.createTimeRanges();if("main"===this.loaderType_){var o=i.hasVideo;if(o&&i.hasAudio&&!this.audioDisabled_&&!i.isMuxed)return this.sourceUpdater_.buffered();if(o)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(i,s){if(void 0===s&&(s=!1),!i)return null;var o=ap(i),l=this.initSegments_[o];return s&&!l&&i.bytes&&(this.initSegments_[o]=l={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),l||i},t.segmentKey=function(i,s){if(void 0===s&&(s=!1),!i)return null;var o=fu(i),l=this.keyCache_[o];this.cacheEncryptionKeys_&&s&&!l&&i.bytes&&(this.keyCache_[o]=l={resolvedUri:i.resolvedUri,bytes:i.bytes});var f={resolvedUri:(l||i).resolvedUri};return l&&(f.bytes=l.bytes),f},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(i,s){if(void 0===s&&(s={}),i){var o=this.playlist_,l=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=s,"INIT"===this.state&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(i));var f=null;if(o&&(o.id?f=o.id:o.uri&&(f=o.uri)),this.logger_("playlist update ["+f+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!o||o.uri!==i.uri)return null!==this.mediaIndex&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var g=i.mediaSequence-o.mediaSequence;if(this.logger_("live window shift ["+g+"]"),null!==this.mediaIndex)if(this.mediaIndex-=g,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var y=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!y.parts||!y.parts.length||!y.parts[this.partIndex])){var T=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=T}}l&&(l.mediaIndex-=g,l.mediaIndex<0?(l.mediaIndex=null,l.partIndex=null):(l.mediaIndex>=0&&(l.segment=i.segments[l.mediaIndex]),l.partIndex>=0&&l.segment.parts&&(l.part=l.segment.parts[l.partIndex]))),this.syncController_.saveExpiredSegmentInfo(o,i)}},t.pause=function(){this.checkBufferTimeout_&&(pe().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return null===this.checkBufferTimeout_},t.resetEverything=function(i){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&fT_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(i,s,o,l){if(void 0===o&&(o=function(){}),void 0===l&&(l=!1),s===1/0&&(s=this.duration_()),s<=i)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var f=1,g=function(){0==--f&&o()};for(var y in(l||!this.audioDisabled_)&&(f++,this.sourceUpdater_.removeAudio(i,s,g)),(l||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,i){for(var s=Math.ceil((t-i)*gg.ONE_SECOND_IN_TS),o=Math.ceil((n-i)*gg.ONE_SECOND_IN_TS),l=e.slice(),f=e.length;f--&&!(e[f].pts<=o););if(-1===f)return l;for(var g=f+1;g--&&!(e[g].pts<=s););return g=Math.max(g,0),l.splice(g,f-g+1),l}(this.gopBuffer_,i,s,this.timeMapping_),f++,this.sourceUpdater_.removeVideo(i,s,g)),this.inbandTextTracks_)Gy(i,s,this.inbandTextTracks_[y]);Gy(i,s,this.segmentMetadataTrack_),g()}else this.logger_("skipping remove because no source updater or starting media info")},t.monitorBuffer_=function(){this.checkBufferTimeout_&&pe().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=pe().setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&pe().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=pe().setTimeout(this.monitorBufferTick_.bind(this),500)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();!i||("number"==typeof i.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},t.isEndOfStream_=function(i,s,o){if(void 0===i&&(i=this.mediaIndex),void 0===s&&(s=this.playlist_),void 0===o&&(o=this.partIndex),!s||!this.mediaSource_)return!1;var l="number"==typeof i&&s.segments[i];return s.endList&&"open"===this.mediaSource_.readyState&&i+1===s.segments.length&&(!l||!l.parts||o+1===l.parts.length)},t.chooseNextRequest_=function(){var i=this.buffered_(),s=BC(i)||0,o=VC(i,this.currentTime_()),l=!this.hasPlayed_()&&o>=1,f=o>=this.goalBufferLength_(),g=this.playlist_.segments;if(!g.length||l||f)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var y={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(y.isSyncRequest)y.mediaIndex=function(e,t,n){t=t||[];for(var i=[],s=0,o=0;o<t.length;o++){var l=t[o];if(e===l.timeline&&(i.push(o),(s+=l.duration)>n))return o}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,g,s);else if(null!==this.mediaIndex){var T=g[this.mediaIndex],S="number"==typeof this.partIndex?this.partIndex:-1;y.startOfSegment=T.end?T.end:s,T.parts&&T.parts[S+1]?(y.mediaIndex=this.mediaIndex,y.partIndex=S+1):y.mediaIndex=this.mediaIndex+1}else{var M=Ao.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),L=M.segmentIndex,H=M.startTime,$=M.partIndex;y.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),y.mediaIndex=L,y.startOfSegment=H,y.partIndex=$}var De=g[y.mediaIndex],We=De&&"number"==typeof y.partIndex&&De.parts&&De.parts[y.partIndex];if(!De||"number"==typeof y.partIndex&&!We)return null;if("number"!=typeof y.partIndex&&De.parts&&(y.partIndex=0,We=De.parts[0]),!o&&We&&!We.independent)if(0===y.partIndex){var et=g[y.mediaIndex-1],Me=et.parts&&et.parts.length&&et.parts[et.parts.length-1];Me&&Me.independent&&(y.mediaIndex-=1,y.partIndex=et.parts.length-1,y.independent="previous segment")}else De.parts[y.partIndex-1].independent&&(y.partIndex-=1,y.independent="previous part");return y.mediaIndex>=g.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(y)},t.generateSegmentInfo_=function(i){var s=i.independent,o=i.playlist,l=i.mediaIndex,f=i.startOfSegment,g=i.isSyncRequest,y=i.partIndex,T=i.forceTimestampOffset,S=i.getMediaInfoForTime,M=o.segments[l],L="number"==typeof y&&M.parts[y],H={requestId:"segment-loader-"+Math.random(),uri:L&&L.resolvedUri||M.resolvedUri,mediaIndex:l,partIndex:L?y:null,isSyncRequest:g,startOfSegment:f,playlist:o,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:M.timeline,duration:L&&L.duration||M.duration,segment:M,part:L,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:S,independent:s},$=void 0!==T?T:this.isPendingTimestampOffset_;H.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:M.timeline,currentTimeline:this.currentTimeline_,startOfSegment:f,buffered:this.buffered_(),overrideCheck:$});var De=BC(this.sourceUpdater_.audioBuffered());return"number"==typeof De&&(H.audioAppendStart=De-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(H.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var s,i=Math.ceil((t-n+3)*gg.ONE_SECOND_IN_TS);for(s=0;s<e.length&&!(e[s].pts>i);s++);return e.slice(s)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),H},t.timestampOffsetForSegment_=function(i){return function(e){var t=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,s=e.buffered;return e.overrideCheck||t!==n?t<n?i:s.length?s.end(s.length-1):i:null}(i)},t.earlyAbortWhenNeeded_=function(i){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),o=i.bandwidth,l=this.pendingSegment_.duration,f=Ao.estimateSegmentRequestTime(l,o,this.playlist_,i.bytesReceived),g=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(f<=g)){var y=function(e){var n=e.currentTime,i=e.bandwidth,s=e.duration,o=e.segmentDuration,l=e.timeUntilRebuffer,f=e.currentTimeline,g=e.syncController,y=e.master.playlists.filter(function(H){return!Ao.isIncompatible(H)}),T=y.filter(Ao.isEnabled);T.length||(T=y.filter(function(H){return!Ao.isDisabled(H)}));var M=T.filter(Ao.hasAttribute.bind(null,"BANDWIDTH")).map(function(H){var De=g.getSyncPoint(H,s,f,n)?1:2;return{playlist:H,rebufferingImpact:Ao.estimateSegmentRequestTime(o,i,H)*De-l}}),L=M.filter(function(H){return H.rebufferingImpact<=0});return lp(L,function(H,$){return Hy($.playlist,H.playlist)}),L.length?L[0]:(lp(M,function(H,$){return H.rebufferingImpact-$.rebufferingImpact}),M[0]||null)}({master:this.vhs_.playlists.master,currentTime:s,bandwidth:o,duration:this.duration_(),segmentDuration:l,timeUntilRebuffer:g,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(y){var M=.5;g<=Fl&&(M=1),y.playlist&&y.playlist.uri!==this.playlist_.uri&&!(f-g-y.rebufferingImpact<M)&&(this.bandwidth=y.playlist.attributes.BANDWIDTH*$i.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(i){this.logger_("Aborting "+cp(i)),this.mediaRequestsAborted+=1},t.handleProgress_=function(i,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(i,s){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&(this.checkForIllegalMediaSwitch(s)||(function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++){var o=n[s];if(o!==i[s]||e[o]!==t[o])return!1}return!0}(this.currentMediaInfo_,s=s||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(i.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(i,s,o,l){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var f=this.pendingSegment_,g=IT(s);f[g]=f[g]||{},f[g][o]=l,this.logger_("timinginfo: "+s+" - "+o+" - "+l),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(i,s){var o=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(0===s.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,s));var f=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),g={};s.forEach(function(y){g[y.stream]=g[y.stream]||{startTime:1/0,captions:[],endTime:0};var T=g[y.stream];T.startTime=Math.min(T.startTime,y.startTime+f),T.endTime=Math.max(T.endTime,y.endTime+f),T.captions.push(y)}),Object.keys(g).forEach(function(y){var T=g[y],S=T.startTime,M=T.endTime,L=T.captions,H=o.inbandTextTracks_;o.logger_("adding cues from "+S+" -> "+M+" for "+y),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var s=t.textTracks().getTrackById(i);if(s)e[n]=s;else{var l=n,f=n,g=!1,y=(t.options_.vhs&&t.options_.vhs.captionServices||{})[i];y&&(l=y.label,f=y.language,g=y.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:g,label:l,language:f},!1).track}}}(H,o.vhs_.tech_,y),Gy(S,M,H[y]),function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var s=pe().WebKitDataCue||pe().VTTCue;n.forEach(function(o){t[o.stream].addCue(new s(o.startTime+i,o.endTime+i,o.text))})}}({captionArray:L,inbandTextTracks:H,timestampOffset:f})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(i,s,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,s,o));var f=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)})(this.inbandTextTracks_,o,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,s=e.videoDuration;if(n){var o=pe().WebKitDataCue||pe().VTTCue,l=t.metadataTrack_;if(l&&(n.forEach(function(M){var L=M.cueTime+i;"number"!=typeof L||pe().isNaN(L)||L<0||!(L<1/0)||M.frames.forEach(function(H){var $=new o(L,L,H.value||H.url||H.data||"");$.frame=H,$.value=H,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Ne.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Ne.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Ne.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}($),l.addCue($)})}),l.cues&&l.cues.length)){for(var f=l.cues,g=[],y=0;y<f.length;y++)f[y]&&g.push(f[y]);var T=g.reduce(function(M,L){var H=M[L.startTime]||[];return H.push(L),M[L.startTime]=H,M},{}),S=Object.keys(T).sort(function(M,L){return Number(M)-Number(L)});S.forEach(function(M,L){var H=T[M],$=Number(S[L+1])||s;H.forEach(function(De){De.endTime=$})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:f,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(s){return s()})},t.processLoadQueue_=function(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(s){return s()})},t.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var i=this.pendingSegment_;return!(!i||this.getCurrentMediaInfo_()&&bx({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.getCurrentMediaInfo_=function(i){return void 0===i&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(i){return void 0===i&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,s=this.getCurrentMediaInfo_();return!(!i||!s||s.hasVideo&&!i.videoTimingInfo||s.hasAudio&&!this.audioDisabled_&&!s.isMuxed&&!i.audioTimingInfo||bx({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(i,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,i,s));var o=this.pendingSegment_;if(this.setTimeMapping_(o.timeline),this.updateMediaSecondsLoaded_(o.part||o.segment),"closed"!==this.mediaSource_.readyState){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),o.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),o.isFmp4=i.isFmp4,o.timingInfo=o.timingInfo||{},o.isFmp4)this.trigger("fmp4"),o.timingInfo.start=o[IT(s.type)].start;else{var g,l=this.getCurrentMediaInfo_(),f="main"===this.loaderType_&&l&&l.hasVideo;f&&(g=o.videoTimingInfo.start),o.timingInfo.start=this.trueSegmentStart_({currentStart:o.timingInfo.start,playlist:o.playlist,mediaIndex:o.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:f,firstVideoFrameTimeForData:g,videoTimingInfo:o.videoTimingInfo,audioTimingInfo:o.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(o,s.type),this.updateSourceBufferTimestampOffset_(o),o.isSyncRequest){this.updateTimingInfoEnd_(o),this.syncController_.saveSegmentTimingInfo({segmentInfo:o,shouldSaveTimelineMapping:"main"===this.loaderType_});var y=this.chooseNextRequest_();if(y.mediaIndex!==o.mediaIndex||y.partIndex!==o.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}o.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(o,s)}}},t.updateAppendInitSegmentStatus=function(i,s){"main"===this.loaderType_&&"number"==typeof i.timestampOffset&&!i.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==i.playlist&&(this.appendInitSegment_[s]=!0)},t.getInitSegmentAndUpdateState_=function(i){var s=i.type,o=i.initSegment,l=i.map,f=i.playlist;if(l){var g=ap(l);if(this.activeInitSegmentId_===g)return null;o=this.initSegmentForMap(l,!0).bytes,this.activeInitSegmentId_=g}return o&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=f,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,o):null},t.handleQuotaExceededError_=function(i,s){var o=this,l=i.segmentInfo,f=i.type,g=i.bytes,y=this.sourceUpdater_.audioBuffered(),T=this.sourceUpdater_.videoBuffered();y.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+La(y).join(", ")),T.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+La(T).join(", "));var S=y.length?y.start(0):0,M=y.length?y.end(y.length-1):0,L=T.length?T.start(0):0,H=T.length?T.end(T.length-1):0;if(M-S<=1&&H-L<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+g.byteLength+", audio buffer: "+La(y).join(", ")+", video buffer: "+La(T).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:l,type:f,bytes:g}));var De=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+De),this.remove(0,De,function(){o.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),o.waitingOnRemove_=!1,o.quotaExceededErrorRetryTimeout_=pe().setTimeout(function(){o.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),o.quotaExceededErrorRetryTimeout_=null,o.processCallQueue_()},1e3)},!0)},t.handleAppendError_=function(i,s){var o=i.segmentInfo,l=i.type,f=i.bytes;if(s){if(22===s.code)return void this.handleQuotaExceededError_({segmentInfo:o,type:l,bytes:f});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(l+" append of "+f.length+"b failed for segment #"+o.mediaIndex+" in playlist "+o.playlist.id),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(i){var s=i.segmentInfo,o=i.type,l=i.initSegment,f=i.data,g=i.bytes;if(!g){var y=[f],T=f.byteLength;l&&(y.unshift(l),T+=l.byteLength),g=function(e){var n,t=0;return e.bytes&&(n=new Uint8Array(e.bytes),e.segments.forEach(function(i){n.set(i,t),t+=i.byteLength})),n}({bytes:T,segments:y})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:o,bytes:g},this.handleAppendError_.bind(this,{segmentInfo:s,type:o,bytes:g}))},t.handleSegmentTimingInfo_=function(i,s,o){if(this.pendingSegment_&&s===this.pendingSegment_.requestId){var l=this.pendingSegment_.segment,f=i+"TimingInfo";l[f]||(l[f]={}),l[f].transmuxerPrependedSeconds=o.prependedContentDuration||0,l[f].transmuxedPresentationStart=o.start.presentation,l[f].transmuxedDecodeStart=o.start.decode,l[f].transmuxedPresentationEnd=o.end.presentation,l[f].transmuxedDecodeEnd=o.end.decode,l[f].baseMediaDecodeTime=o.baseMediaDecodeTime}},t.appendData_=function(i,s){var o=s.type,l=s.data;if(l&&l.byteLength&&("audio"!==o||!this.audioDisabled_)){var f=this.getInitSegmentAndUpdateState_({type:o,initSegment:s.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:o,initSegment:f,data:l})}},t.loadSegment_=function(i){var s=this;this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),"number"==typeof i.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(i):this.loadQueue_.push(function(){var o=Aa({},i,{forceTimestampOffset:!0});Aa(i,s.generateSegmentInfo_(o)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(i)})},t.updateTransmuxerAndRequestSegment_=function(i){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var o=this.createSimplifiedSegmentObj_(i),y=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)||null!==this.mediaIndex&&i.timeline!==this.currentTimeline_&&i.timeline>0;this.logger_("Requesting "+cp(i)),o.map&&!o.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=yT({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:o,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:y,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(S){var M=S.message,L=S.level,H=S.stream;s.logger_(cp(i)+" logged from transmuxer stream "+H+" as a "+L+": "+M)}})},t.trimBackBuffer_=function(i){var s=function(e,t,n){var i=t-$i.BACK_BUFFER_LENGTH;return e.length&&(i=Math.max(i,e.start(0))),Math.min(t-n,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},t.createSimplifiedSegmentObj_=function(i){var s=i.segment,o=i.part,l={resolvedUri:o?o.resolvedUri:s.resolvedUri,byterange:o?o.byterange:s.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},f=i.playlist.segments[i.mediaIndex-1];if(f&&f.timeline===s.timeline&&(f.videoTimingInfo?l.baseStartTime=f.videoTimingInfo.transmuxedDecodeEnd:f.audioTimingInfo&&(l.baseStartTime=f.audioTimingInfo.transmuxedDecodeEnd)),s.key){var g=s.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);l.key=this.segmentKey(s.key),l.key.iv=g}return s.map&&(l.map=this.initSegmentForMap(s.map)),l},t.saveTransferStats_=function(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},t.saveBandwidthRelatedStats_=function(i,s){this.pendingSegment_.byteLength=s.bytesReceived,i<CT?this.logger_("Ignoring segment's bandwidth because its duration of "+i+" is less than the min to record "+CT):(this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime)},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},t.segmentRequestFinished_=function(i,s,o){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,s,o));else if(this.saveTransferStats_(s.stats),this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",-102===i.code)return;return this.pause(),-101===i.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(i),void this.trigger("error"))}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,s.stats),l.endOfAllRequests=s.endOfAllRequests,o.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,s=0;s<e.length&&!(e[s].pts>=i);s++);return e.slice(0,s).concat(t)}(this.gopBuffer_,o.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(l)}},t.setTimeMapping_=function(i){var s=this.syncController_.mappingForTimeline(i);null!==s&&(this.timeMapping_=s)},t.updateMediaSecondsLoaded_=function(i){this.mediaSecondsLoaded+="number"==typeof i.start&&"number"==typeof i.end?i.end-i.start:i.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(i){return null!==i&&("main"===this.loaderType_&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset())},t.trueSegmentStart_=function(i){var s=i.currentStart,l=i.mediaIndex,f=i.firstVideoFrameTimeForData;if(void 0!==s)return s;if(!i.useVideoTimingInfo)return i.audioTimingInfo.start;var M=i.playlist.segments[l-1];return 0!==l&&M&&void 0!==M.start&&M.end===f+i.currentVideoTimestampOffset?i.videoTimingInfo.start:f},t.waitForAppendsToComplete_=function(i){var s=this.getCurrentMediaInfo_(i);if(!s)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var g="main"===this.loaderType_&&s.hasVideo,y=!this.audioDisabled_&&s.hasAudio&&!s.isMuxed;if(i.waitingOnAppends=0,!i.hasAppendedData_)return!i.timingInfo&&"number"==typeof i.timestampOffset&&(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),void this.checkAppendsDone_(i);g&&i.waitingOnAppends++,y&&i.waitingOnAppends++,g&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),y&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},t.checkAppendsDone_=function(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,0===i.waitingOnAppends&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(i){var s=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),i);return!!s&&(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0)},t.updateSourceBufferTimestampOffset_=function(i){if(null!==i.timestampOffset&&"number"==typeof i.timingInfo.start&&!i.changedTimestampOffset&&"main"===this.loaderType_){var s=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),s=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},t.getSegmentStartTimeForTimestampOffsetCalculation_=function(i){var s=i.videoTimingInfo,o=i.audioTimingInfo,l=i.timingInfo;return this.useDtsForTimestampOffset_?s&&"number"==typeof s.transmuxedDecodeStart?s.transmuxedDecodeStart:o&&"number"==typeof o.transmuxedDecodeStart?o.transmuxedDecodeStart:l.start:l.start},t.updateTimingInfoEnd_=function(i){i.timingInfo=i.timingInfo||{};var s=this.getMediaInfo_(),l="main"===this.loaderType_&&s&&s.hasVideo&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;!l||(i.timingInfo.end="number"==typeof l.end?l.end:l.start+i.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=function(e,t){if("hls"!==t)return null;var n=function(e){var t=0;return["video","audio"].forEach(function(n){var i=e[n+"TimingInfo"];if(i){var l,s=i.start,o=i.end;"bigint"==typeof s||"bigint"==typeof o?l=pe().BigInt(o)-pe().BigInt(s):"number"==typeof s&&"number"==typeof o&&(l=o-s),void 0!==l&&l>t&&(t=l)}}),"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t}({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var i=e.playlist.targetDuration,s=qy({segmentDuration:n,maxDuration:2*i}),o=qy({segmentDuration:n,maxDuration:i});return s||o?{severity:s?"warn":"info",message:"Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+n+" when the reported duration is "+e.duration+" and the target duration is "+i+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(i,this.sourceType_);if(s&&("warn"===s.severity?Ne.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",!i.isSyncRequest||(this.trigger("syncinfoupdate"),i.hasAppendedData_)){this.logger_("Appended "+cp(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var o=i.segment,l=i.part,f=o.end&&this.currentTime_()-o.end>3*i.playlist.targetDuration,g=l&&l.end&&this.currentTime_()-l.end>3*i.playlist.partTargetDuration;if(f||g)return this.logger_("bad "+(f?"segment":"part")+" "+cp(i)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+cp(i))},t.recordThroughput_=function(i){if(i.duration<CT)this.logger_("Ignoring segment's throughput because its duration of "+i.duration+" is less than the min to record "+CT);else{var s=this.throughput.rate,o=Date.now()-i.endOfAllRequests+1,l=Math.floor(i.byteLength/o*8*1e3);this.throughput.rate+=(l-s)/++this.throughput.count}},t.addSegmentMetadataCue_=function(i){if(this.segmentMetadataTrack_){var s=i.segment,o=s.start,l=s.end;if(ST(o)&&ST(l)){Gy(o,l,this.segmentMetadataTrack_);var f=pe().WebKitDataCue||pe().VTTCue,g={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:o,end:l},T=new f(o,l,JSON.stringify(g));T.value=g,this.segmentMetadataTrack_.addCue(T)}}},e}(Ne.EventTarget);function Uc(){}var Ju,yk=function(e){return"string"!=typeof e?e:e.replace(/./,function(t){return t.toUpperCase()})},_k=["video","audio"],AT=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},Ex=function r(e,t){if(0!==t.queue.length){var n=0,i=t.queue[n];if("mediaSource"===i.type)return void(!t.updating()&&"closed"!==t.mediaSource.readyState&&(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),r("audio",t),r("video",t)));if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!AT(e,t)){if(i.type!==e){if(n=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(e,t.queue),null===n)return;i=t.queue[n]}if(t.queue.splice(n,1),t.queuePending[e]=i,i.action(e,t),!i.doneFn)return t.queuePending[e]=null,void r(e,t)}}},wx=function(e,t){var n=t[e+"Buffer"],i=yk(e);!n||(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},Fa=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},ea_appendBuffer=function(e,t,n){return function(i,s){var o=s[i+"Buffer"];if(Fa(s.mediaSource,o)){s.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{o.appendBuffer(e)}catch(l){s.logger_("Error with code "+l.code+" "+(22===l.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+i+"Buffer"),s.queuePending[i]=null,n(l)}}}},ea_remove=function(e,t){return function(n,i){var s=i[n+"Buffer"];if(Fa(i.mediaSource,s)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{s.remove(e,t)}catch(o){i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},ea_timestampOffset=function(e){return function(t,n){var i=n[t+"Buffer"];!Fa(n.mediaSource,i)||(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},ea_callback=function(e){return function(t,n){e()}},ea_endOfStream=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(n){Ne.log.warn("Failed to call media source endOfStream",n)}}}},ea_duration=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(n){Ne.log.warn("Failed to set media source duration",n)}}},ea_addSourceBuffer=function(e,t){return function(n){var i=yk(e),s=cg(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var o=n.mediaSource.addSourceBuffer(s);o.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),o.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=o}},ea_removeSourceBuffer=function(e){return function(t){var n=t[e+"Buffer"];if(wx(e,t),Fa(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(i){Ne.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},ea_changeType=function(e){return function(t,n){var i=n[t+"Buffer"],s=cg(e);!Fa(n.mediaSource,i)||n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),i.changeType(s),n.codecs[t]=e)}},Gr=function(e){var t=e.type,n=e.sourceUpdater;n.queue.push({type:t,action:e.action,doneFn:e.doneFn,name:e.name}),Ex(t,n)},Sx=function(e,t){return function(n){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}Ex(e,t)}},zy=function(r){function e(n){var i;return(i=r.call(this)||this).mediaSource=n,i.sourceopenListener_=function(){return Ex("mediaSource",Tn(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=hu("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=Sx("video",Tn(i)),i.onAudioUpdateEnd_=Sx("audio",Tn(i)),i.onVideoError_=function(s){i.videoError_=s},i.onAudioError_=function(s){i.audioError_=s},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}Mt(e,r);var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(i,s){Gr({type:"mediaSource",sourceUpdater:this,action:ea_addSourceBuffer(i,s),name:"addSourceBuffer"})},t.abort=function(i){Gr({type:i,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(Fa(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(i){Ne.log.warn("Failed to abort on "+e+"Buffer",i)}}}},name:"abort"})},t.removeSourceBuffer=function(i){this.canRemoveSourceBuffer()?Gr({type:"mediaSource",sourceUpdater:this,action:ea_removeSourceBuffer(i),name:"removeSourceBuffer"}):Ne.log.error("removeSourceBuffer is not supported!")},t.canRemoveSourceBuffer=function(){return!Ne.browser.IE_VERSION&&!Ne.browser.IS_FIREFOX&&pe().MediaSource&&pe().MediaSource.prototype&&"function"==typeof pe().MediaSource.prototype.removeSourceBuffer},e.canChangeType=function(){return pe().SourceBuffer&&pe().SourceBuffer.prototype&&"function"==typeof pe().SourceBuffer.prototype.changeType},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(i,s){this.canChangeType()?Gr({type:i,sourceUpdater:this,action:ea_changeType(s),name:"changeType"}):Ne.log.error("changeType is not supported!")},t.addOrChangeSourceBuffers=function(i){var s=this;if(!i||"object"!=typeof i||0===Object.keys(i).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(o){var l=i[o];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(o,l);s.canChangeType()&&s.changeType(o,l)})},t.appendBuffer=function(i,s){var o=this,l=i.segmentInfo,f=i.type,g=i.bytes;if(this.processedAppend_=!0,"audio"===f&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([i,s]),void this.logger_("delayed audio append of "+g.length+" until video append");if(Gr({type:f,sourceUpdater:this,action:ea_appendBuffer(g,l||{mediaIndex:-1},s),doneFn:s,name:"appendBuffer"}),"video"===f){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var T=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+T.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,T.forEach(function(S){o.appendBuffer.apply(o,S)})}},t.audioBuffered=function(){return Fa(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Ne.createTimeRange()},t.videoBuffered=function(){return Fa(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Ne.createTimeRange()},t.buffered=function(){var i=Fa(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=Fa(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!i?this.audioBuffered():i&&!s?this.videoBuffered():function(e,t){var n=null,i=null,s=0,o=[],l=[];if(!(e&&e.length&&t&&t.length))return Ne.createTimeRange();for(var f=e.length;f--;)o.push({time:e.start(f),type:"start"}),o.push({time:e.end(f),type:"end"});for(f=t.length;f--;)o.push({time:t.start(f),type:"start"}),o.push({time:t.end(f),type:"end"});for(o.sort(function(g,y){return g.time-y.time}),f=0;f<o.length;f++)"start"===o[f].type?2==++s&&(n=o[f].time):"end"===o[f].type&&1==--s&&(i=o[f].time),null!==n&&null!==i&&(l.push([n,i]),n=null,i=null);return Ne.createTimeRanges(l)}(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(i,s){void 0===s&&(s=Uc),Gr({type:"mediaSource",sourceUpdater:this,action:ea_duration(i),name:"duration",doneFn:s})},t.endOfStream=function(i,s){void 0===i&&(i=null),void 0===s&&(s=Uc),"string"!=typeof i&&(i=void 0),Gr({type:"mediaSource",sourceUpdater:this,action:ea_endOfStream(i),name:"endOfStream",doneFn:s})},t.removeAudio=function(i,s,o){void 0===o&&(o=Uc),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Gr({type:"audio",sourceUpdater:this,action:ea_remove(i,s),doneFn:o,name:"remove"}):o()},t.removeVideo=function(i,s,o){void 0===o&&(o=Uc),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Gr({type:"video",sourceUpdater:this,action:ea_remove(i,s),doneFn:o,name:"remove"}):o()},t.updating=function(){return!(!AT("audio",this)&&!AT("video",this))},t.audioTimestampOffset=function(i){return void 0!==i&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(Gr({type:"audio",sourceUpdater:this,action:ea_timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},t.videoTimestampOffset=function(i){return void 0!==i&&this.videoBuffer&&this.videoTimestampOffset!==i&&(Gr({type:"video",sourceUpdater:this,action:ea_timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},t.audioQueueCallback=function(i){!this.audioBuffer||Gr({type:"audio",sourceUpdater:this,action:ea_callback(i),name:"callback"})},t.videoQueueCallback=function(i){!this.videoBuffer||Gr({type:"video",sourceUpdater:this,action:ea_callback(i),name:"callback"})},t.dispose=function(){var i=this;this.trigger("dispose"),_k.forEach(function(s){i.abort(s),i.canRemoveSourceBuffer()?i.removeSourceBuffer(s):i[s+"QueueCallback"](function(){return wx(s,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(Ne.EventTarget),Cx=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},xx=new Uint8Array("\n\n".split("").map(function(r){return r.charCodeAt(0)})),DT=function(r){function e(n,i){var s;return void 0===i&&(i={}),(s=r.call(this,n,i)||this).mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=n.featuresNativeTextTracks,s.shouldSaveSegmentTimingInfo_=!1,s}Mt(e,r);var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Ne.createTimeRanges();var i=this.subtitlesTrack_.cues;return Ne.createTimeRanges([[i[0].startTime,i[i.length-1].startTime]])},t.initSegmentForMap=function(i,s){if(void 0===s&&(s=!1),!i)return null;var o=ap(i),l=this.initSegments_[o];if(s&&!l&&i.bytes){var g=new Uint8Array(xx.byteLength+i.bytes.byteLength);g.set(i.bytes),g.set(xx,i.bytes.byteLength),this.initSegments_[o]=l={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:g}}return l||i},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(i){return void 0===i||(this.subtitlesTrack_=i,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},t.remove=function(i,s){Gy(i,s,this.subtitlesTrack_)},t.fillBuffer_=function(){var i=this,s=this.chooseNextRequest_();if(s){if(null===this.syncController_.timestampOffsetForTimeline(s.timeline))return this.syncController_.one("timestampoffset",function(){i.state="READY",i.paused()||i.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(s)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(r.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},t.stopForError=function(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(i,s,o){var l=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(s.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(i)return-101===i.code&&this.handleTimeout_(),-102===i.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(i);var f=this.pendingSegment_;this.saveBandwidthRelatedStats_(f.duration,s.stats),this.state="APPENDING",this.trigger("appending");var g=f.segment;if(g.map&&(g.map.bytes=s.map.bytes),f.bytes=s.bytes,"function"!=typeof pe().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var y,T=function(){l.subtitlesTrack_.tech_.off("vttjsloaded",y),l.stopForError({message:"Error loading vtt.js"})};return y=function(){l.subtitlesTrack_.tech_.off("vttjserror",T),l.segmentRequestFinished_(i,s,o)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",y),void this.subtitlesTrack_.tech_.one("vttjserror",T)}g.requested=!0;try{this.parseVTTCues_(f)}catch(S){return void this.stopForError({message:S.message})}if(this.updateTimeMapping_(f,this.syncController_.timelines[f.timeline],this.playlist_),f.timingInfo=f.cues.length?{start:f.cues[0].startTime,end:f.cues[f.cues.length-1].endTime}:{start:f.startOfSegment,end:f.startOfSegment+f.duration},f.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");f.byteLength=f.bytes.byteLength,this.mediaSecondsLoaded+=g.duration,f.cues.forEach(function(S){l.subtitlesTrack_.addCue(l.featuresNativeTextTracks_?new(pe().VTTCue)(S.startTime,S.endTime,S.text):S)}),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],s=0,o=0;o<t.length;o++)t[n].startTime===t[o].startTime&&t[n].endTime===t[o].endTime&&t[n].text===t[o].text&&++s>1&&i.push(t[o]);i.length&&i.forEach(function(l){return e.removeCue(l)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(i){var s,o=!1;"function"==typeof pe().TextDecoder?s=new(pe().TextDecoder)("utf8"):(s=pe().WebVTT.StringDecoder(),o=!0);var l=new(pe().WebVTT.Parser)(pe(),pe().vttjs,s);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},l.oncue=i.cues.push.bind(i.cues),l.ontimestampmap=function(y){i.timestampmap=y},l.onparsingerror=function(y){Ne.log.warn("Error encountered when parsing cues: "+y.message)},i.segment.map){var f=i.segment.map.bytes;o&&(f=Cx(f)),l.parse(f)}var g=i.bytes;o&&(g=Cx(g)),l.parse(g),l.flush()},t.updateTimeMapping_=function(i,s,o){var l=i.segment;if(s){if(!i.cues.length)return void(l.empty=!0);var f=i.timestampmap,g=f.MPEGTS/gg.ONE_SECOND_IN_TS-f.LOCAL+s.mapping;i.cues.forEach(function(S){S.startTime+=g,S.endTime+=g}),o.syncInfo||(o.syncInfo={mediaSequence:o.mediaSequence+i.mediaIndex,time:Math.min(i.cues[0].startTime,i.cues[i.cues.length-1].startTime-l.duration)})}},e}(Tx),Ix=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var s=n[i];if(t>=s.adStartTime&&t<=s.adEndTime)return s}return null},kT=[{name:"VOD",run:function(e,t,n,i,s){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,n,i,s){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var o=null,l=null,f=Kb(t);s=s||0;for(var g=0;g<f.length;g++){var T=f[t.endList||0===s?g:f.length-(g+1)],S=T.segment,M=e.timelineToDatetimeMappings[S.timeline];if(M&&S.dateTimeObject){var H=S.dateTimeObject.getTime()/1e3+M;if(S.parts&&"number"==typeof T.partIndex)for(var $=0;$<T.partIndex;$++)H+=S.parts[$].duration;var De=Math.abs(s-H);if(null!==l&&(0===De||l<De))break;l=De,o={time:H,segmentIndex:T.segmentIndex,partIndex:T.partIndex}}}return o}},{name:"Segment",run:function(e,t,n,i,s){var o=null,l=null;s=s||0;for(var f=Kb(t),g=0;g<f.length;g++){var T=f[t.endList||0===s?g:f.length-(g+1)],S=T.segment,M=T.part&&T.part.start||S&&S.start;if(S.timeline===i&&void 0!==M){var L=Math.abs(s-M);if(null!==l&&l<L)break;(!o||null===l||l>=L)&&(l=L,o={time:M,segmentIndex:T.segmentIndex,partIndex:T.partIndex})}}return o}},{name:"Discontinuity",run:function(e,t,n,i,s){var o=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var l=null,f=0;f<t.discontinuityStarts.length;f++){var g=t.discontinuityStarts[f],T=e.discontinuities[t.discontinuitySequence+f+1];if(T){var S=Math.abs(s-T.time);if(null!==l&&l<S)break;(!o||null===l||l>=S)&&(l=S,o={time:T.time,segmentIndex:g,partIndex:null})}}return o}},{name:"Playlist",run:function(e,t,n,i,s){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],Ek=function(r){function e(n){var i;return(i=r.call(this)||this).timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=hu("SyncController"),i}Mt(e,r);var t=e.prototype;return t.getSyncPoint=function(i,s,o,l){var f=this.runStrategies_(i,s,o,l);return f.length?this.selectSyncPoint_(f,{key:"time",value:l}):null},t.getExpiredTime=function(i,s){if(!i||!i.segments)return null;var o=this.runStrategies_(i,s,i.discontinuitySequence,0);if(!o.length)return null;var l=this.selectSyncPoint_(o,{key:"segmentIndex",value:0});return l.segmentIndex>0&&(l.time*=-1),Math.abs(l.time+jg({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:l.segmentIndex,endIndex:0}))},t.runStrategies_=function(i,s,o,l){for(var f=[],g=0;g<kT.length;g++){var y=kT[g],T=y.run(this,i,s,o,l);T&&(T.strategy=y.name,f.push({strategy:y.name,syncPoint:T}))}return f},t.selectSyncPoint_=function(i,s){for(var o=i[0].syncPoint,l=Math.abs(i[0].syncPoint[s.key]-s.value),f=i[0].strategy,g=1;g<i.length;g++){var y=Math.abs(i[g].syncPoint[s.key]-s.value);y<l&&(l=y,o=i[g].syncPoint,f=i[g].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy ["+f+"]: [time:"+o.time+", segmentIndex:"+o.segmentIndex+("number"==typeof o.partIndex?",partIndex:"+o.partIndex:"")+"]"),o},t.saveExpiredSegmentInfo=function(i,s){var o=s.mediaSequence-i.mediaSequence;if(o>86400)Ne.log.warn("Not saving expired segment info. Media sequence gap "+o+" is too large.");else for(var l=o-1;l>=0;l--){var f=i.segments[l];if(f&&void 0!==f.start){s.syncInfo={mediaSequence:i.mediaSequence+l,time:f.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+", mediaSequence: "+s.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var s=i.segments[0],o=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-o}},t.saveSegmentTimingInfo=function(i){var s=i.segmentInfo,o=i.shouldSaveTimelineMapping,l=this.calculateSegmentTimeMapping_(s,s.timingInfo,o),f=s.segment;l&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:f.start}));var g=f.dateTimeObject;f.discontinuity&&o&&g&&(this.timelineToDatetimeMappings[f.timeline]=-g.getTime()/1e3)},t.timestampOffsetForTimeline=function(i){return void 0===this.timelines[i]?null:this.timelines[i].time},t.mappingForTimeline=function(i){return void 0===this.timelines[i]?null:this.timelines[i].mapping},t.calculateSegmentTimeMapping_=function(i,s,o){var y,T,l=i.segment,f=i.part,g=this.timelines[i.timeline];if("number"==typeof i.timestampOffset)g={time:i.startOfSegment,mapping:i.startOfSegment-s.start},o&&(this.timelines[i.timeline]=g,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": [time: "+g.time+"] [mapping: "+g.mapping+"]")),y=i.startOfSegment,T=s.end+g.mapping;else{if(!g)return!1;y=s.start+g.mapping,T=s.end+g.mapping}return f&&(f.start=y,f.end=T),(!l.start||y<l.start)&&(l.start=y),l.end=T,!0},t.saveDiscontinuitySyncInfo_=function(i){var s=i.playlist,o=i.segment;if(o.discontinuity)this.discontinuities[o.timeline]={time:o.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var l=0;l<s.discontinuityStarts.length;l++){var f=s.discontinuityStarts[l],g=s.discontinuitySequence+l+1,y=f-i.mediaIndex,T=Math.abs(y);if(!this.discontinuities[g]||this.discontinuities[g].accuracy>T){var S;S=y<0?o.start-jg({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:i.mediaIndex,endIndex:f}):o.end+jg({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:i.mediaIndex+1,endIndex:f}),this.discontinuities[g]={time:S,accuracy:T}}}},t.dispose=function(){this.trigger("dispose"),this.off()},e}(Ne.EventTarget),wk=function(r){function e(){var n;return(n=r.call(this)||this).pendingTimelineChanges_={},n.lastTimelineChanges_={},n}Mt(e,r);var t=e.prototype;return t.clearPendingTimelineChange=function(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(i){var s=i.type,o=i.from,l=i.to;return"number"==typeof o&&"number"==typeof l&&(this.pendingTimelineChanges_[s]={type:s,from:o,to:l},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},t.lastTimelineChange=function(i){var s=i.type,o=i.from,l=i.to;return"number"==typeof o&&"number"==typeof l&&(this.lastTimelineChanges_[s]={type:s,from:o,to:l},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(Ne.EventTarget),Sk=lT(cT(function(){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(Me,je,ze){return Me(ze={path:je,exports:{},require:function(tt,_t){return function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},ze.exports),ze.exports}var n=e(function(Me){function je(Be,tt){for(var _t=0;_t<tt.length;_t++){var ft=tt[_t];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(Be,ft.key,ft)}}Me.exports=function ze(Be,tt,_t){return tt&&je(Be.prototype,tt),_t&&je(Be,_t),Be},Me.exports.default=Me.exports,Me.exports.__esModule=!0}),i=e(function(Me){function je(ze,Be){return Me.exports=je=Object.setPrototypeOf||function(_t,ft){return _t.__proto__=ft,_t},Me.exports.default=Me.exports,Me.exports.__esModule=!0,je(ze,Be)}Me.exports=je,Me.exports.default=Me.exports,Me.exports.__esModule=!0}),s=e(function(Me){Me.exports=function je(ze,Be){ze.prototype=Object.create(Be.prototype),ze.prototype.constructor=ze,i(ze,Be)},Me.exports.default=Me.exports,Me.exports.__esModule=!0}),o=function(){function Me(){this.listeners={}}var je=Me.prototype;return je.on=function(Be,tt){this.listeners[Be]||(this.listeners[Be]=[]),this.listeners[Be].push(tt)},je.off=function(Be,tt){if(!this.listeners[Be])return!1;var _t=this.listeners[Be].indexOf(tt);return this.listeners[Be]=this.listeners[Be].slice(0),this.listeners[Be].splice(_t,1),_t>-1},je.trigger=function(Be){var tt=this.listeners[Be];if(tt)if(2===arguments.length)for(var _t=tt.length,ft=0;ft<_t;++ft)tt[ft].call(this,arguments[1]);else for(var nn=Array.prototype.slice.call(arguments,1),Pt=tt.length,cn=0;cn<Pt;++cn)tt[cn].apply(this,nn)},je.dispose=function(){this.listeners={}},je.pipe=function(Be){this.on("data",function(tt){Be.push(tt)})},Me}(),g=null,y=function(){function Me(ze){g||(g=function(){var ft,nn,Pt,Wr,Ri,ii,Oo,fr,je=[[[],[],[],[],[]],[[],[],[],[],[]]],ze=je[0],Be=je[1],tt=ze[4],_t=Be[4],cn=[],Tr=[];for(ft=0;ft<256;ft++)Tr[(cn[ft]=ft<<1^283*(ft>>7))^ft]=ft;for(nn=Pt=0;!tt[nn];nn^=Wr||1,Pt=Tr[Pt]||1)for(tt[nn]=ii=(ii=Pt^Pt<<1^Pt<<2^Pt<<3^Pt<<4)>>8^255&ii^99,_t[ii]=nn,fr=16843009*cn[Ri=cn[Wr=cn[nn]]]^65537*Ri^257*Wr^16843008*nn,Oo=257*cn[ii]^16843008*ii,ft=0;ft<4;ft++)ze[ft][nn]=Oo=Oo<<24^Oo>>>8,Be[ft][ii]=fr=fr<<24^fr>>>8;for(ft=0;ft<5;ft++)ze[ft]=ze[ft].slice(0),Be[ft]=Be[ft].slice(0);return je}()),this._tables=[[g[0][0].slice(),g[0][1].slice(),g[0][2].slice(),g[0][3].slice(),g[0][4].slice()],[g[1][0].slice(),g[1][1].slice(),g[1][2].slice(),g[1][3].slice(),g[1][4].slice()]];var Be,tt,_t,ft=this._tables[0][4],nn=this._tables[1],Pt=ze.length,cn=1;if(4!==Pt&&6!==Pt&&8!==Pt)throw new Error("Invalid aes key size");var Tr=ze.slice(0),Wr=[];for(this._key=[Tr,Wr],Be=Pt;Be<4*Pt+28;Be++)_t=Tr[Be-1],(Be%Pt==0||8===Pt&&Be%Pt==4)&&(_t=ft[_t>>>24]<<24^ft[_t>>16&255]<<16^ft[_t>>8&255]<<8^ft[255&_t],Be%Pt==0&&(_t=_t<<8^_t>>>24^cn<<24,cn=cn<<1^283*(cn>>7))),Tr[Be]=Tr[Be-Pt]^_t;for(tt=0;Be;tt++,Be--)_t=Tr[3&tt?Be:Be-4],Wr[tt]=Be<=4||tt<4?_t:nn[0][ft[_t>>>24]]^nn[1][ft[_t>>16&255]]^nn[2][ft[_t>>8&255]]^nn[3][ft[255&_t]]}return Me.prototype.decrypt=function(Be,tt,_t,ft,nn,Pt){var ii,Oo,fr,il,cn=this._key[1],Tr=Be^cn[0],Wr=ft^cn[1],Ri=_t^cn[2],Yi=tt^cn[3],kA=cn.length/4-2,yh=4,Pp=this._tables[1],Nm=Pp[0],Zc=Pp[1],U_=Pp[2],B_=Pp[3],V_=Pp[4];for(il=0;il<kA;il++)ii=Nm[Tr>>>24]^Zc[Wr>>16&255]^U_[Ri>>8&255]^B_[255&Yi]^cn[yh],Oo=Nm[Wr>>>24]^Zc[Ri>>16&255]^U_[Yi>>8&255]^B_[255&Tr]^cn[yh+1],fr=Nm[Ri>>>24]^Zc[Yi>>16&255]^U_[Tr>>8&255]^B_[255&Wr]^cn[yh+2],Yi=Nm[Yi>>>24]^Zc[Tr>>16&255]^U_[Wr>>8&255]^B_[255&Ri]^cn[yh+3],yh+=4,Tr=ii,Wr=Oo,Ri=fr;for(il=0;il<4;il++)nn[(3&-il)+Pt]=V_[Tr>>>24]<<24^V_[Wr>>16&255]<<16^V_[Ri>>8&255]<<8^V_[255&Yi]^cn[yh++],ii=Tr,Tr=Wr,Wr=Ri,Ri=Yi,Yi=ii},Me}(),T=function(Me){function je(){var Be;return(Be=Me.call(this,o)||this).jobs=[],Be.delay=1,Be.timeout_=null,Be}s(je,Me);var ze=je.prototype;return ze.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},ze.push=function(tt){this.jobs.push(tt),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},je}(o),S=function(je){return je<<24|(65280&je)<<8|(16711680&je)>>8|je>>>24},L=function(){function Me(ze,Be,tt,_t){var ft=Me.STEP,nn=new Int32Array(ze.buffer),Pt=new Uint8Array(ze.byteLength),cn=0;for(this.asyncStream_=new T,this.asyncStream_.push(this.decryptChunk_(nn.subarray(cn,cn+ft),Be,tt,Pt)),cn=ft;cn<nn.length;cn+=ft)tt=new Uint32Array([S(nn[cn-4]),S(nn[cn-3]),S(nn[cn-2]),S(nn[cn-1])]),this.asyncStream_.push(this.decryptChunk_(nn.subarray(cn,cn+ft),Be,tt,Pt));this.asyncStream_.push(function(){_t(null,function l(Me){return Me.subarray(0,Me.byteLength-Me[Me.byteLength-1])}(Pt))})}return Me.prototype.decryptChunk_=function(Be,tt,_t,ft){return function(){var nn=function(je,ze,Be){var Pt,cn,Tr,Wr,Ri,Yi,ii,Oo,fr,tt=new Int32Array(je.buffer,je.byteOffset,je.byteLength>>2),_t=new y(Array.prototype.slice.call(ze)),ft=new Uint8Array(je.byteLength),nn=new Int32Array(ft.buffer);for(Pt=Be[0],cn=Be[1],Tr=Be[2],Wr=Be[3],fr=0;fr<tt.length;fr+=4)Ri=S(tt[fr]),Yi=S(tt[fr+1]),ii=S(tt[fr+2]),Oo=S(tt[fr+3]),_t.decrypt(Ri,Yi,ii,Oo,nn,fr),nn[fr]=S(nn[fr]^Pt),nn[fr+1]=S(nn[fr+1]^cn),nn[fr+2]=S(nn[fr+2]^Tr),nn[fr+3]=S(nn[fr+3]^Wr),Pt=Ri,cn=Yi,Tr=ii,Wr=Oo;return ft}(Be,tt,_t);ft.set(nn,Be.byteOffset)}},n(Me,null,[{key:"STEP",get:function(){return 32e3}}]),Me}(),We=("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{}).BigInt||Number;We("0x1"),We("0x100"),We("0x10000"),We("0x1000000"),We("0x100000000"),We("0x10000000000"),We("0x1000000000000"),We("0x100000000000000"),We("0x10000000000000000");self.onmessage=function(Me){var je=Me.data,ze=new Uint8Array(je.encrypted.bytes,je.encrypted.byteOffset,je.encrypted.byteLength),Be=new Uint32Array(je.key.bytes,je.key.byteOffset,je.key.byteLength/4),tt=new Uint32Array(je.iv.bytes,je.iv.byteOffset,je.iv.byteLength/4);new L(ze,Be,tt,function(_t,ft){self.postMessage(function(je){var ze={};return Object.keys(je).forEach(function(Be){var tt=je[Be];ze[Be]=function(je){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(je):je&&je.buffer instanceof ArrayBuffer}(tt)?{bytes:tt.buffer,byteOffset:tt.byteOffset,byteLength:tt.byteLength}:tt}),ze}({source:je.source,decrypted:ft}),[ft.buffer])})}})),MT=uT(Sk),sh=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Wg=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Wy=function(e,t){t.activePlaylistLoader=e,e.load()},Ky={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e],s=t.blacklistCurrentPlaylist;Wg(t.segmentLoaders[e],i);var o=i.activeTrack(),l=i.activeGroup(),f=(l.filter(function(T){return T.default})[0]||l[0]).id,g=i.tracks[f];if(o!==g){for(var y in Ne.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[y].enabled=i.tracks[y]===g;i.onTrackChanged()}else s({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];Ne.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Wg(n,i);var s=i.activeTrack();s&&(s.mode="disabled"),i.onTrackChanged()}}},Dx={AUDIO:function(e,t,n){if(t){var i=n.tech,s=n.requestOptions,o=n.segmentLoaders[e];t.on("loadedmetadata",function(){var l=t.media();o.playlist(l,s),(!i.paused()||l.endList&&"none"!==i.preload())&&o.load()}),t.on("loadedplaylist",function(){o.playlist(t.media(),s),i.paused()||o.load()}),t.on("error",Ky[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,s=n.requestOptions,o=n.segmentLoaders[e],l=n.mediaTypes[e];t.on("loadedmetadata",function(){var f=t.media();o.playlist(f,s),o.track(l.activeTrack()),(!i.paused()||f.endList&&"none"!==i.preload())&&o.load()}),t.on("loadedplaylist",function(){o.playlist(t.media(),s),i.paused()||o.load()}),t.on("error",Ky[e](e,n))}},kx={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,f=t.mediaTypes[e],g=f.groups,y=f.tracks,T=f.logger_,S=t.masterPlaylistLoader,M=ip(S.master);for(var L in(!l[e]||0===Object.keys(l[e]).length)&&(l[e]={main:{default:{default:!0}}},M&&(l[e].main.default.playlists=S.master.playlists)),l[e])for(var H in g[L]||(g[L]=[]),l[e][L]){var $=l[e][L][H],De=void 0;if(M?(T("AUDIO group '"+L+"' label '"+H+"' is a master playlist"),$.isMasterPlaylist=!0,De=null):De="vhs-json"===i&&$.playlists?new nh($.playlists[0],n,o):$.resolvedUri?new nh($.resolvedUri,n,o):$.playlists&&"dash"===i?new sT($.playlists[0],n,o,S):null,$=Ne.mergeOptions({id:H,playlistLoader:De},$),Dx[e](e,$.playlistLoader,t),g[L].push($),void 0===y[H]){var We=new Ne.AudioTrack({id:H,kind:sh($),enabled:!1,language:$.language,default:$.default,label:H});y[H]=We}}s.on("error",Ky[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,s=t.sourceType,o=t.segmentLoaders[e],l=t.requestOptions,f=t.master.mediaGroups,g=t.mediaTypes[e],y=g.groups,T=g.tracks,S=t.masterPlaylistLoader;for(var M in f[e])for(var L in y[M]||(y[M]=[]),f[e][M])if(!f[e][M][L].forced){var H=f[e][M][L],$=void 0;if("hls"===s)$=new nh(H.resolvedUri,i,l);else if("dash"===s){if(!H.playlists.filter(function(et){return et.excludeUntil!==1/0}).length)return;$=new sT(H.playlists[0],i,l,S)}else"vhs-json"===s&&($=new nh(H.playlists?H.playlists[0]:H.resolvedUri,i,l));if(H=Ne.mergeOptions({id:L,playlistLoader:$},H),Dx[e](e,H.playlistLoader,t),y[M].push(H),void 0===T[L]){var We=n.addRemoteTextTrack({id:L,kind:"subtitles",default:H.default&&H.autoselect,language:H.language,label:L},!1).track;T[L]=We}}o.on("error",Ky[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,s=t.mediaTypes[e],o=s.groups,l=s.tracks;for(var f in i[e])for(var g in o[f]||(o[f]=[]),i[e][f]){var y=i[e][f][g];if(/^(?:CC|SERVICE)/.test(y.instreamId)){var T=n.options_.vhs&&n.options_.vhs.captionServices||{},S={label:g,language:y.language,instreamId:y.instreamId,default:y.default&&y.autoselect};if(T[S.instreamId]&&(S=Ne.mergeOptions(S,T[S.instreamId])),void 0===S.default&&delete S.default,o[f].push(Ne.mergeOptions({id:g},y)),void 0===l[g]){var M=n.addRemoteTextTrack({id:S.instreamId,kind:"captions",default:S.default,language:S.language,label:S.label},!1).track;l[g]=M}}}}},Ik=function r(e,t){for(var n=0;n<e.length;n++)if(jc(t,e[n])||e[n].playlists&&r(e[n].playlists,t))return!0;return!1},kN={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},OT=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],RT=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Mk=function(r){function e(n){var i;i=r.call(this)||this;var s=n.src,o=n.handleManifestRedirects,l=n.withCredentials,f=n.tech,g=n.bandwidth,y=n.externVhs,T=n.useCueTags,S=n.blacklistDuration,M=n.enableLowInitialPlaylist,L=n.sourceType,H=n.cacheEncryptionKeys,$=n.experimentalBufferBasedABR,De=n.experimentalLeastPixelDiffSelector,We=n.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var et=n.maxPlaylistRetries;null==et&&(et=1/0),Ju=y,i.experimentalBufferBasedABR=Boolean($),i.experimentalLeastPixelDiffSelector=Boolean(De),i.withCredentials=l,i.tech_=f,i.vhs_=f.vhs,i.sourceType_=L,i.useCueTags_=T,i.blacklistDuration=S,i.maxPlaylistRetries=et,i.enableLowInitialPlaylist=M,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:l,handleManifestRedirects:o,maxPlaylistRetries:et,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Uc,activeTrack:Uc,getActiveGroup:Uc,onGroupChanged:Uc,onTrackChanged:Uc,lastTrack_:null,logger_:hu("MediaGroups["+t+"]")}}),e}(),i.mediaSource=new(pe().MediaSource),i.handleDurationChange_=i.handleDurationChange_.bind(Tn(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Tn(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Tn(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Ne.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new Ek(n),i.segmentMetadataTrack_=f.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new MT,i.sourceUpdater_=new zy(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new wk;var Me={vhs:i.vhs_,parse708captions:n.parse708captions,useDtsForTimestampOffset:n.useDtsForTimestampOffset,captionServices:We,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:g,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:H,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};i.masterPlaylistLoader_="dash"===i.sourceType_?new sT(s,i.vhs_,i.requestOptions_):new nh(s,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Tx(Ne.mergeOptions(Me,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new Tx(Ne.mergeOptions(Me,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new DT(Ne.mergeOptions(Me,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),n),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),OT.forEach(function(ze){i[ze+"_"]=RT.bind(Tn(i),ze)}),i.logger_=hu("MPC"),i.triggeredFmp4Usage=!1,"none"===i.tech_.preload()?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var je="none"===i.tech_.preload()?"play":"loadstart";return i.tech_.one(je,function(){var ze=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-ze,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}Mt(e,r);var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var i=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return-1===i||-1===s?-1:i+s},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(){var i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,"abr")},t.switchMedia_=function(i,s,o){var l=this.media(),f=l&&(l.id||l.uri),g=i.id||i.uri;f&&f!==g&&(this.logger_("switch media "+f+" -> "+g+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(i,o)},t.startABRTimer_=function(){var i=this;this.stopABRTimer_(),this.abrTimer_=pe().setInterval(function(){return i.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(pe().clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var i=this.master(),s=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return s;var f,o=i.mediaGroups.AUDIO,l=Object.keys(o);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)f=this.mediaTypes_.AUDIO.activeTrack();else{var g=o.main||l.length&&o[l[0]];for(var y in g)if(g[y].default){f={label:y};break}}if(!f)return s;var T=[];for(var S in o)if(o[S][f.label]){var M=o[S][f.label];if(M.playlists&&M.playlists.length)T.push.apply(T,M.playlists);else if(M.uri)T.push(M);else if(i.playlists.length)for(var L=0;L<i.playlists.length;L++){var H=i.playlists[L];H.attributes&&H.attributes.AUDIO&&H.attributes.AUDIO===S&&T.push(H)}}return T.length?T:s},t.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=i.masterPlaylistLoader_.media(),o=1.5*s.targetDuration*1e3;i.requestOptions_.timeout=xy(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?0:o,s.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(L){kx[L](L,e)});var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,s=e.vhs,o=e.segmentLoaders,l=o.AUDIO,f=o.main;["AUDIO","SUBTITLES"].forEach(function(L){t[L].activeGroup=function(e,t){return function(n){var s=t.mediaTypes[e].groups,o=t.masterPlaylistLoader.media();if(!o)return null;var l=null;o.attributes[e]&&(l=s[o.attributes[e]]);var f=Object.keys(s);if(!l)if("AUDIO"===e&&f.length>1&&ip(t.master))for(var g=0;g<f.length;g++){var y=s[f[g]];if(Ik(y,o)){l=y;break}}else s.main?l=s.main:1===f.length&&(l=s[f[0]]);return void 0===n?l:null!==n&&l&&l.filter(function(T){return T.id===n.id})[0]||null}}(L,e),t[L].activeTrack=kN[L](L,e),t[L].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],s=n.main,o=t.mediaTypes[e],l=o.activeTrack(),f=o.getActiveGroup(),g=o.activePlaylistLoader,y=o.lastGroup_;if((!f||!y||f.id!==y.id)&&(o.lastGroup_=f,o.lastTrack_=l,Wg(i,o),f&&!f.isMasterPlaylist)){if(!f.playlistLoader)return void(g&&s.resetEverything());i.resyncLoader(),Wy(f.playlistLoader,o)}}}(L,e),t[L].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(L,e),t[L].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,i=t.segmentLoaders,s=i[e],o=i.main,l=t.mediaTypes[e],f=l.activeTrack(),g=l.getActiveGroup(),y=l.activePlaylistLoader,T=l.lastTrack_;if((!T||!f||T.id!==f.id)&&(l.lastGroup_=g,l.lastTrack_=f,Wg(s,l),g)){if(g.isMasterPlaylist){if(!f||!T||f.id===T.id)return;var S=t.vhs.masterPlaylistController_,M=S.selectPlaylist();if(S.media()===M)return;return l.logger_("track change. Switching master audio from "+T.id+" to "+f.id),n.pause(),o.resetEverything(),void S.fastQualityChange_(M)}if("AUDIO"===e){if(!g.playlistLoader)return o.setAudio(!0),void o.resetEverything();s.setAudio(!0),o.setAudio(!1)}if(y===g.playlistLoader)return void Wy(g.playlistLoader,l);s.track&&s.track(f),s.resetEverything(),Wy(g.playlistLoader,l)}}}(L,e),t[L].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var i=n[e].activeTrack();return i?n[e].activeGroup(i):null}}(L,e)});var g=t.AUDIO.activeGroup();if(g){var y=(g.filter(function(L){return L.default})[0]||g[0]).id;t.AUDIO.tracks[y].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(f.setAudio(!1),l.setAudio(!0)):f.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(L){return t[L].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(L){return t[L].onGroupChanging()})});var S=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};for(var M in i.audioTracks().addEventListener("change",S),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),s.on("dispose",function(){i.audioTracks().removeEventListener("change",S),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[M])}({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),s),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var s=i.masterPlaylistLoader_.media();if(!s){var o;if(i.excludeUnsupportedVariants_(),i.enableLowInitialPlaylist&&(o=i.selectInitialPlaylist()),o||(o=i.selectPlaylist()),!o||!i.shouldSwitchToMedia_(o))return;if(i.initialMedia_=o,i.switchMedia_(i.initialMedia_,"initial"),"vhs-json"!==i.sourceType_||!i.initialMedia_.segments)return;s=i.initialMedia_}i.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=i.masterPlaylistLoader_.media(),o=1.5*s.targetDuration*1e3;i.requestOptions_.timeout=xy(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?0:o,i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=i.masterPlaylistLoader_.media();"playlist-unchanged"!==s.lastExcludeReason_&&i.stuckAtPlaylistEnd_(s)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(i,s){var o=i.mediaGroups||{},l=!0,f=Object.keys(o.AUDIO);for(var g in o.AUDIO)for(var y in o.AUDIO[g])o.AUDIO[g][y].uri||(l=!1);l&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(o.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Ju.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),f.length&&Object.keys(o.AUDIO[f[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(i){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,o=this.tech_.currentTime(),l=this.bufferLowWaterLine(),f=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,s=e.nextPlaylist,o=e.bufferLowWaterLine,l=e.bufferHighWaterLine,f=e.duration,g=e.experimentalBufferBasedABR,y=e.log;if(!s)return Ne.log.warn("We received no playlist to switch to. Please check your stream."),!1;var T="allowing switch "+(t&&t.id||"null")+" -> "+s.id;if(!t)return y(T+" as current playlist is not set"),!0;if(s.id===t.id)return!1;var S=Boolean(tp(n,i).length);if(!t.endList)return S||"number"!=typeof t.partTargetDuration?(y(T+" as current playlist is live"),!0):(y("not "+T+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var M=VC(n,i),L=g?$i.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:$i.MAX_BUFFER_LOW_WATER_LINE;if(f<L)return y(T+" as duration < max low water line ("+f+" < "+L+")"),!0;var H=s.attributes.BANDWIDTH,$=t.attributes.BANDWIDTH;if(H<$&&(!g||M<l)){var De=T+" as next bandwidth < current bandwidth ("+H+" < "+$+")";return g&&(De+=" and forwardBuffer < bufferHighWaterLine ("+M+" < "+l+")"),y(De),!0}if((!g||H>$)&&M>=o){var We=T+" as forwardBuffer >= bufferLowWaterLine ("+M+" >= "+o+")";return g&&(We+=" and next bandwidth > current bandwidth ("+H+" > "+$+")"),y(We),!0}return y("not "+T+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:o,currentPlaylist:s,nextPlaylist:i,bufferLowWaterLine:l,bufferHighWaterLine:f,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var i=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var o=i.selectPlaylist();i.shouldSwitchToMedia_(o)&&i.switchMedia_(o,"bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(o){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var s=function(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var l=i.getCodecsOrExclude_();!l||i.sourceUpdater_.addOrChangeSourceBuffers(l)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(i){void 0===i&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},t.fastQualityChange_=function(i){var s=this;void 0===i&&(i=this.selectPlaylist()),i!==this.masterPlaylistLoader_.media()?(this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){s.tech_.setCurrentTime(Ne.browser.IE_VERSION||Ne.browser.IS_EDGE?s.tech_.currentTime()+.04:s.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0))return this.tech_.setCurrentTime(i.end(i.length-1))}},t.setupFirstPlay=function(){var i=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var o=this.seekable();if(!o.length)return!1;if(Ne.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(o.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(o.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();void 0!==i&&"function"==typeof i.then&&i.then(null,function(s){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(i&&i.length){var s=this.duration();i[i.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();i=!s||s.hasVideo?i&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}!i||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(i){if(!this.seekable().length)return!1;var o=this.syncController_.getExpiredTime(i,this.duration());if(null===o)return!1;var l=Ju.Playlist.playlistEnd(i,o),f=this.tech_.currentTime(),g=this.tech_.buffered();if(!g.length)return l-f<=Qu;var y=g.end(g.length-1);return y-f<=Qu&&l-y<=Qu},t.blacklistCurrentPlaylist=function(i,s){void 0===i&&(i={});var o=i.playlist||this.masterPlaylistLoader_.media();if(s=s||i.blacklistDuration||this.blacklistDuration,!o)return this.error=i,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));o.playlistErrors_++;var T,l=this.masterPlaylistLoader_.master.playlists,f=l.filter(Cy),g=1===f.length&&f[0]===o;if(1===l.length&&s!==1/0)return Ne.log.warn("Problem encountered with playlist "+o.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(g);if(g){var y=!1;l.forEach(function(De){if(De!==o){var We=De.excludeUntil;void 0!==We&&We!==1/0&&(y=!0,delete De.excludeUntil)}}),y&&(Ne.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}T=o.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*s,o.excludeUntil=T,i.reason&&(o.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var S=this.selectPlaylist();if(!S)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(i.internal?this.logger_:Ne.log.warn)((i.internal?"Internal problem":"Problem")+" encountered with playlist "+o.id+"."+(i.message?" "+i.message:"")+" Switching to playlist "+S.id+"."),S.attributes.AUDIO!==o.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),S.attributes.SUBTITLES!==o.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var H=S.targetDuration/2*1e3||5e3,$="number"==typeof S.lastRequest&&Date.now()-S.lastRequest<=H;return this.switchMedia_(S,"exclude",g||$)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(i,s){var o=this,l=[],f="all"===i;(f||"main"===i)&&l.push(this.masterPlaylistLoader_);var g=[];(f||"audio"===i)&&g.push("AUDIO"),(f||"subtitle"===i)&&(g.push("CLOSED-CAPTIONS"),g.push("SUBTITLES")),g.forEach(function(y){var T=o.mediaTypes_[y]&&o.mediaTypes_[y].activePlaylistLoader;T&&l.push(T)}),["main","audio","subtitle"].forEach(function(y){var T=o[y+"SegmentLoader_"];T&&(i===y||"all"===i)&&l.push(T)}),l.forEach(function(y){return s.forEach(function(T){"function"==typeof y[T]&&y[T]()})})},t.setCurrentTime=function(i){var s=tp(this.tech_.buffered(),i);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?s&&s.length?i:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:Ju.Playlist.duration(i):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var i;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var o=this.syncController_.getExpiredTime(s,this.duration());if(null!==o){var g,y,l=this.masterPlaylistLoader_.master,f=Ju.Playlist.seekable(s,o,Ju.Playlist.liveEdgeDelay(l,s));0===f.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(o=this.syncController_.getExpiredTime(s,this.duration()))||0===(i=Ju.Playlist.seekable(s,o,Ju.Playlist.liveEdgeDelay(l,s))).length)||(this.seekable_&&this.seekable_.length&&(g=this.seekable_.end(0),y=this.seekable_.start(0)),this.seekable_=i?i.start(0)>f.end(0)||f.start(0)>i.end(0)?f:Ne.createTimeRanges([[i.start(0)>f.start(0)?i.start(0):f.start(0),i.end(0)<f.end(0)?i.end(0):f.end(0)]]):f,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==g||this.seekable_.start(0)!==y)&&(this.logger_("seekable updated ["+Ng(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},t.updateDuration=function(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,i),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(i){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1))}else{var o=this.tech_.buffered(),l=Ju.Playlist.duration(this.masterPlaylistLoader_.media());o.length>0&&(l=Math.max(l,o.end(o.length-1))),this.mediaSource.duration!==l&&this.sourceUpdater_.setDuration(l)}},t.dispose=function(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var o=i.mediaTypes_[s].groups;for(var l in o)o[l].forEach(function(f){f.playlistLoader&&f.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),o=!i||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!s||!o)},t.getCodecsOrExclude_=function(){var i=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};s.video=s.main;var o=qg(this.master(),this.media()),l={},f=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(l.video=o.video||s.main.videoCodec||"avc1.4d400d"),s.main.isMuxed&&(l.video+=","+(o.audio||s.main.audioCodec||hD)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||f)&&(l.audio=o.audio||s.main.audioCodec||s.audio.audioCodec||hD,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),l.audio||l.video){var T,y={};if(["video","audio"].forEach(function(H){if(l.hasOwnProperty(H)&&!function($,De){return $?Mv(De):Pv(De)}(s[H].isFmp4,l[H])){var $=s[H].isFmp4?"browser":"muxer";y[$]=y[$]||[],y[$].push(l[H]),"audio"===H&&(T=$)}}),f&&T&&this.media().attributes.AUDIO){var S=this.media().attributes.AUDIO;this.master().playlists.forEach(function(H){(H.attributes&&H.attributes.AUDIO)===S&&H!==i.media()&&(H.excludeUntil=1/0)}),this.logger_("excluding audio group "+S+" as "+T+' does not support codec(s): "'+l.audio+'"')}if(!Object.keys(y).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var L=[];if(["video","audio"].forEach(function(H){var $=(ka(i.sourceUpdater_.codecs[H]||"")[0]||{}).type,De=(ka(l[H]||"")[0]||{}).type;$&&De&&$.toLowerCase()!==De.toLowerCase()&&L.push('"'+i.sourceUpdater_.codecs[H]+'" -> "'+l[H]+'"')}),L.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+L.join(", ")+".",blacklistDuration:1/0,internal:!0})}return l}var M=Object.keys(y).reduce(function(H,$){return H&&(H+=", "),H+($+' does not support codec(s): "')+y[$].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:M,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},t.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var s=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},t.excludeUnsupportedVariants_=function(){var i=this,s=this.master().playlists,o=[];Object.keys(s).forEach(function(l){var f=s[l];if(-1===o.indexOf(f.id)){o.push(f.id);var g=qg(i.master,f),y=[];g.audio&&!Pv(g.audio)&&!Mv(g.audio)&&y.push("audio codec "+g.audio),g.video&&!Pv(g.video)&&!Mv(g.video)&&y.push("video codec "+g.video),g.text&&"stpp.ttml.im1t"===g.text&&y.push("text codec "+g.text),y.length&&(f.excludeUntil=1/0,i.logger_("excluding "+f.id+" for unsupported: "+y.join(", ")))}})},t.excludeIncompatibleVariants_=function(i){var s=this,o=[],l=this.master().playlists,f=$g(ka(i)),g=bT(f),y=f.video&&ka(f.video)[0]||null,T=f.audio&&ka(f.audio)[0]||null;Object.keys(l).forEach(function(S){var M=l[S];if(-1===o.indexOf(M.id)&&M.excludeUntil!==1/0){o.push(M.id);var L=[],H=qg(s.masterPlaylistLoader_.master,M),$=bT(H);if(H.audio||H.video){if($!==g&&L.push('codec count "'+$+'" !== "'+g+'"'),!s.sourceUpdater_.canChangeType()){var De=H.video&&ka(H.video)[0]||null,We=H.audio&&ka(H.audio)[0]||null;De&&y&&De.type.toLowerCase()!==y.type.toLowerCase()&&L.push('video codec "'+De.type+'" !== "'+y.type+'"'),We&&T&&We.type.toLowerCase()!==T.type.toLowerCase()&&L.push('audio codec "'+We.type+'" !== "'+T.type+'"')}L.length&&(M.excludeUntil=1/0,s.logger_("blacklisting "+M.id+": "+L.join(" && ")))}}})},t.updateAdCues_=function(i){var s=0,o=this.seekable();o.length&&(s=o.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var s,i=n,o=0;o<e.segments.length;o++){var l=e.segments[o];if(s||(s=Ix(t,i+l.duration/2)),s){if("cueIn"in l){s.endTime=i,s.adEndTime=i,i+=l.duration,s=null;continue}if(i<s.endTime){i+=l.duration;continue}s.endTime+=l.duration}else if("cueOut"in l&&((s=new(pe().VTTCue)(i,i+l.duration,l.cueOut)).adStartTime=i,s.adEndTime=i+parseFloat(l.cueOut),t.addCue(s)),"cueOutCont"in l){var f=l.cueOutCont.split("/").map(parseFloat),g=f[0],y=f[1];(s=new(pe().VTTCue)(i,i+l.duration,"")).adStartTime=i-g,s.adEndTime=s.adStartTime+y,t.addCue(s)}i+=l.duration}}(i,this.cueTagsTrack_,s)},t.goalBufferLength=function(){var i=this.tech_.currentTime(),s=$i.GOAL_BUFFER_LENGTH,o=$i.GOAL_BUFFER_LENGTH_RATE,l=Math.max(s,$i.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+i*o,l)},t.bufferLowWaterLine=function(){var i=this.tech_.currentTime(),s=$i.BUFFER_LOW_WATER_LINE,o=$i.BUFFER_LOW_WATER_LINE_RATE,l=Math.max(s,$i.MAX_BUFFER_LOW_WATER_LINE),f=Math.max(s,$i.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+i*o,this.experimentalBufferBasedABR?f:l)},t.bufferHighWaterLine=function(){return $i.BUFFER_HIGH_WATER_LINE},e}(Ne.EventTarget),Rx=function(e,t,n){var i=e.masterPlaylistController_,l=i[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(i);if(t.attributes){var f=t.attributes.RESOLUTION;this.width=f&&f.width,this.height=f&&f.height,this.bandwidth=t.attributes.BANDWIDTH}this.codecs=qg(i.master(),t),this.playlist=t,this.id=n,this.enabled=function(e,t,n){return function(i){var s=e.master.playlists[t],o=Ug(s),l=Cy(s);return void 0===i?l:(i?delete s.disabled:s.disabled=!0,i!==l&&!o&&(n(),e.trigger(i?"renditionenabled":"renditiondisabled")),i)}}(e.playlists,t.id,l)},Nx=["seeking","seeked","pause","playing","error"],MN=function(){function r(t){var n=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=hu("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},s=function(){return n.monitorCurrentTime_()},o=function(){return n.techWaiting_()},l=function(){return n.cancelTimer_()},f=this.masterPlaylistController_,g=["main","subtitle","audio"],y={};g.forEach(function(S){y[S]={reset:function(){return n.resetSegmentDownloads_(S)},updateend:function(){return n.checkSegmentDownloads_(S)}},f[S+"SegmentLoader_"].on("appendsdone",y[S].updateend),f[S+"SegmentLoader_"].on("playlistupdate",y[S].reset),n.tech_.on(["seeked","seeking"],y[S].reset)});var T=function(M){["main","audio"].forEach(function(L){f[L+"SegmentLoader_"][M]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),T("off"))},this.clearSeekingAppendCheck_=function(){return T("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),T("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",o),this.tech_.on(Nx,l),this.tech_.on("canplay",s),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",o),n.tech_.off(Nx,l),n.tech_.off("canplay",s),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),g.forEach(function(S){f[S+"SegmentLoader_"].off("appendsdone",y[S].updateend),f[S+"SegmentLoader_"].off("playlistupdate",y[S].reset),n.tech_.off(["seeked","seeking"],y[S].reset)}),n.checkCurrentTimeTimeout_&&pe().clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var e=r.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&pe().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=pe().setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(n){var i=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=i.buffered_()},e.checkSegmentDownloads_=function(n){var i=this.masterPlaylistController_,s=i[n+"SegmentLoader_"],o=s.buffered_(),l=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[n+"Buffered_"],o);this[n+"Buffered_"]=o,l?this.resetSegmentDownloads_(n):(this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:La(o)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),"subtitle"!==n&&i.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0)))},e.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var n=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===n&&(!i.length||n+Qu>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var l,i=this.seekable(),s=this.tech_.currentTime();if(this.afterSeekableWindow_(i,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(l=i.end(i.length-1)),this.beforeSeekableWindow_(i,s)){var g=i.start(0);l=g+(g===i.end(0)?0:Qu)}if(void 0!==l)return this.logger_("Trying to seek outside of seekable at time "+s+" with seekable range "+Ng(i)+". Seeking to "+l+"."),this.tech_.setCurrentTime(l),!0;for(var y=this.masterPlaylistController_.sourceUpdater_,T=this.tech_.buffered(),S=y.audioBuffer?y.audioBuffered():null,M=y.videoBuffer?y.videoBuffered():null,L=this.media(),H=L.partTargetDuration?L.partTargetDuration:2*(L.targetDuration-Fl),$=[S,M],De=0;De<$.length;De++)if($[De]&&VC($[De],s)<H)return!1;var et=Rg(T,s);return 0!==et.length&&(l=et.start(0)+Qu,this.logger_("Buffered region starts ("+et.start(0)+")  just beyond seek point ("+s+"). Seeking to "+l+"."),this.tech_.setCurrentTime(l),!0)},e.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),i=this.tech_.buffered(),s=tp(i,n);if(s.length&&n+3<=s.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region ["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},e.techWaiting_=function(){var n=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(n,i)){var s=n.end(n.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to live point (seekable end) "+s),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var o=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,l=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:o.audioBuffered(),videoBuffered:o.videoBuffered(),currentTime:i}))return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var g=Rg(l,i);if(g.length>0){var y=g.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+y+", seeking to "+g.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*y,i),!0}return!1},e.afterSeekableWindow_=function(n,i,s,o){if(void 0===o&&(o=!1),!n.length)return!1;var l=n.end(n.length-1)+Qu;return!s.endList&&o&&(l=n.end(n.length-1)+3*s.targetDuration),i>l},e.beforeSeekableWindow_=function(n,i){return!!(n.length&&n.start(0)>0&&i<n.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(n){var i=n.videoBuffered,s=n.audioBuffered,o=n.currentTime;if(i){var l;if(i.length&&s.length){var f=tp(i,o-3),g=tp(i,o),y=tp(s,o);y.length&&!g.length&&f.length&&(l={start:f.end(0),end:y.end(0)})}else Rg(i,o).length||(l=this.gapFromVideoUnderflow_(i,o));return!!l&&(this.logger_("Encountered a gap in video from "+l.start+" to "+l.end+". Seeking to current time "+o),!0)}},e.skipTheGap_=function(n){var i=this.tech_.buffered(),s=this.tech_.currentTime(),o=Rg(i,s);this.cancelTimer_(),0!==o.length&&s===n&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",n,"nextRange start:",o.start(0)),this.tech_.setCurrentTime(o.start(0)+Fl),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(n,i){for(var s=function(e){if(e.length<2)return Ne.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),s=e.start(n);t.push([i,s])}return Ne.createTimeRanges(t)}(n),o=0;o<s.length;o++){var l=s.start(o),f=s.end(o);if(i-l<4&&i-l>2)return{start:l,end:f}}return null},r}(),PN={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Lx=function r(e,t){var n=0,i=0,s=Ne.mergeOptions(PN,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){i&&e.currentTime(i)},l=function(S){null!=S&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",o),e.src(S),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},f=function(){return Date.now()-n<1e3*s.errorInterval?(e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void e.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(n=Date.now(),s.getSource.call(e,l)):void Ne.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},g=function T(){e.off("loadedmetadata",o),e.off("error",f),e.off("dispose",T)};e.on("error",f),e.on("dispose",g),e.reloadSourceOnError=function(S){g(),r(e,S)}},Is={PlaylistLoader:nh,Playlist:Ao,utils:K1,STANDARD_PLAYLIST_SELECTOR:wT,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Ao.isEnabled);return lp(t,function(i,s){return Hy(i,s)}),t.filter(function(i){return!!qg(e.playlists.master,i).video})[0]||null},lastBandwidthSelector:wT,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&pe().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),ET(this.playlists.master,t,parseInt(Vy(this.tech_.el(),"width"),10)*i,parseInt(Vy(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Hy,comparePlaylistResolution:function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||pe().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||pe().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:eT()};Object.keys($i).forEach(function(r){Object.defineProperty(Is,r,{get:function(){return Ne.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),$i[r]},set:function(t){Ne.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Ne.log.warn("value of Vhs."+r+" must be greater than or equal to 0"):$i[r]=t}})});var Nk="videojs-vhs",jx=function(e,t){for(var n=t.media(),i=-1,s=0;s<e.length;s++)if(e[s].id===n.id){i=s;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};Is.canPlaySource=function(){return Ne.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var NT=function(){if(!pe().localStorage)return null;var e=pe().localStorage.getItem(Nk);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}};Is.supportsNativeHls=function(){if(!Dt()||!Dt().createElement)return!1;var r=Dt().createElement("video");return!!Ne.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(r.canPlayType(t))})}(),Is.supportsNativeDash=!!(Dt()&&Dt().createElement&&Ne.getTech("Html5").isSupported())&&/maybe|probably/i.test(Dt().createElement("video").canPlayType("application/dash+xml")),Is.supportsTypeNatively=function(r){return"hls"===r?Is.supportsNativeHls:"dash"===r&&Is.supportsNativeDash},Is.isSupported=function(){return Ne.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Kg=function(r){function e(n,i,s){var o;if(o=r.call(this,i,Ne.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&Ne.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof s.initialBandwidth&&(o.options_.bandwidth=s.initialBandwidth),o.logger_=hu("VhsHandler"),i.options_&&i.options_.playerId){var l=Ne(i.options_.playerId);l.hasOwnProperty("hls")||Object.defineProperty(l,"hls",{get:function(){return Ne.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Tn(o)},configurable:!0}),l.hasOwnProperty("vhs")||Object.defineProperty(l,"vhs",{get:function(){return Ne.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Tn(o)},configurable:!0}),l.hasOwnProperty("dash")||Object.defineProperty(l,"dash",{get:function(){return Ne.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Tn(o)},configurable:!0}),o.player_=l}if(o.tech_=i,o.source_=n,o.stats={},o.ignoreNextSeekingEvent_=!1,o.setOptions_(),o.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(o.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return o.on(Dt(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(f){var g=Dt().fullscreenElement||Dt().webkitFullscreenElement||Dt().mozFullScreenElement||Dt().msFullscreenElement;g&&g.contains(o.tech_.el())?o.masterPlaylistController_.fastQualityChange_():o.masterPlaylistController_.checkABR_()}),o.on(o.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),o.on(o.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),o.on(o.tech_,"play",o.play),o}Mt(e,r);var t=e.prototype;return t.setOptions_=function(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var s=NT();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=$i.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===$i.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(o){void 0!==i.source_[o]&&(i.options_[o]=i.source_[o])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(i,s){var o=this;if(i){this.setOptions_(),this.options_.src=function(e){return 0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Is,this.options_.sourceType=E0(s),this.options_.seekTo=function(g){o.tech_.setCurrentTime(g)},this.options_.smoothQualityChange&&Ne.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Mk(this.options_);var l=Ne.mergeOptions({liveRangeSafeTimeDelta:Qu},this.options_,{seekable:function(){return o.seekable()},media:function(){return o.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new MN(l),this.masterPlaylistController_.on("error",function(){var g=Ne.players[o.tech_.options_.playerId],y=o.masterPlaylistController_.error;"object"!=typeof y||y.code?"string"==typeof y&&(y={message:y,code:3}):y.code=3,g.error(y)});var f=this.options_.experimentalBufferBasedABR?Is.movingAverageBandwidthSelector(.55):Is.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):f.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Is.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(y){this.masterPlaylistController_.selectPlaylist=y.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(y){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=y,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var y=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,T=pe().navigator.connection||pe().navigator.mozConnection||pe().navigator.webkitConnection,S=1e7;if(this.options_.useNetworkInformationApi&&T){var M=1e3*T.downlink*1e3;y=M>=S&&y>=S?Math.max(y,M):M}return y},set:function(y){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=y,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){Ne.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return o.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return o.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return o.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return o.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return o.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return o.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return o.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return o.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return o.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return o.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return o.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return o.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return o.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return La(o.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return o.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return o.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return o.tech_.name_},enumerable:!0},duration:{get:function(){return o.tech_.duration()},enumerable:!0},master:{get:function(){return o.playlists.master},enumerable:!0},playerDimensions:{get:function(){return o.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return La(o.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return o.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){o.options_.useBandwidthFromLocalStorage&&function(e){if(!pe().localStorage)return!1;var t=NT();t=t?Ne.mergeOptions(t,e):e;try{pe().localStorage.setItem(Nk,JSON.stringify(t))}catch(n){return!1}}({bandwidth:o.bandwidth,throughput:Math.round(o.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),n=ip(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter(function(i){return!Ug(i)}).map(function(i,s){return new Rx(e,i,i.id)}):[]}}(o)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){o.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=pe().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.createKeySessions_=function(){var i=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,s=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var l=function(e,t){return e.reduce(function(n,i){if(!i.contentProtection)return n;var s=t.reduce(function(o,l){var f=i.contentProtection[l];return f&&f.pssh&&(o[l]={pssh:f.pssh}),o},{});return Object.keys(s).length&&n.push(s),n},[])}(i?s.concat([i]):s,Object.keys(n)),f=[],g=[];return l.forEach(function(y){g.push(new Promise(function(T,S){t.tech_.one("keysessioncreated",T)})),f.push(new Promise(function(T,S){t.eme.initializeMediaKeys({keySystems:y},function(M){M?S(M):T()})}))}),Promise.race([Promise.all(f),Promise.race(g)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(o){i.logger_("error while creating EME key session",o),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})},t.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},t.setupEme_=function(){var i=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,o=function(e){var t=e.player,o=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=$g(ka(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var s=cg(i.video),o=cg(i.audio),l={};for(var f in e)l[f]={},o&&(l[f].audioContentType=o),s&&(l[f].videoContentType=s),t.contentProtection&&t.contentProtection[f]&&t.contentProtection[f].pssh&&(l[f].pssh=t.contentProtection[f].pssh),"string"==typeof e[f]&&(l[f].url=e[f]);return Ne.mergeOptions(e,l)}(e.sourceKeySystems,e.media,e.audioMedia);return!(!o||(t.currentSource().keySystems=o,o&&!t.eme&&(Ne.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});this.player_.tech_.on("keystatuschange",function(l){"output-restricted"===l.status&&i.masterPlaylistController_.blacklistCurrentPlaylist({playlist:i.masterPlaylistController_.media(),message:"DRM keystatus changed to "+l.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==Ne.browser.IE_VERSION&&o?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},t.setupQualityLevels_=function(){var i=this,s=Ne.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(e,t){t.representations().forEach(function(n){e.addQualityLevel(n)}),jx(e,t.playlists)}(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){jx(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":"2.14.2","mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return zy.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(i){this.masterPlaylistController_.setCurrentTime(i)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&pe().URL.revokeObjectURL&&(pe().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),r.prototype.dispose.call(this)},t.convertToProgramTime=function(i,s){return function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,s=e.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return s({message:"getProgramTime: playlist and time must be provided"});var o=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,s=0;s<t.segments.length&&!(e<=(n=(i=t.segments[s]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));s++);var o=t.segments[t.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*o.duration)return null;i=o}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!o)return s({message:"valid programTime was not found"});if("estimate"===o.type)return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});var l={mediaSeconds:i},f=function(e,t){if(!t.dateTimeObject)return null;var o=e-(t.videoTimingInfo.transmuxedPresentationStart+t.videoTimingInfo.transmuxerPrependedSeconds);return new Date(t.dateTimeObject.getTime()+1e3*o)}(i,o.segment);return f&&(l.programDateTime=f.toISOString()),s(null,l)}({playlist:this.masterPlaylistController_.media(),time:i,callback:s})},t.seekToProgramTime=function(i,s,o,l){return void 0===o&&(o=!0),void 0===l&&(l=2),nT({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:l,pauseAfterSeek:o,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},e}(Ne.getComponent("Component")),dp={name:"videojs-http-streaming",VERSION:"2.14.2",canHandleSource:function(e,t){void 0===t&&(t={});var n=Ne.mergeOptions(Ne.options,t);return dp.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var i=Ne.mergeOptions(Ne.options,n);return t.vhs=new Kg(e,t,i),Ne.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Ne.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=eT(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var n=Ne.mergeOptions(Ne.options,t),i=n.vhs,s=(i=void 0===i?{}:i).overrideNative,o=void 0===s?!Ne.browser.IS_ANY_SAFARI:s,l=n.hls,f=(l=void 0===l?{}:l).overrideNative,g=void 0!==f&&f,y=E0(e);return y&&(!Is.supportsTypeNatively(y)||g||o)?"maybe":""}};Mv("avc1.4d400d,mp4a.40.2")&&Ne.getTech("Html5").registerSourceHandler(dp,0),Ne.VhsHandler=Kg,Object.defineProperty(Ne,"HlsHandler",{get:function(){return Ne.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Kg},configurable:!0}),Ne.VhsSourceHandler=dp,Object.defineProperty(Ne,"HlsSourceHandler",{get:function(){return Ne.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),dp},configurable:!0}),Ne.Vhs=Is,Object.defineProperty(Ne,"Hls",{get:function(){return Ne.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Is},configurable:!0}),Ne.use||(Ne.registerComponent("Hls",Is),Ne.registerComponent("Vhs",Is)),Ne.options.vhs=Ne.options.vhs||{},Ne.options.hls=Ne.options.hls||{},Ne.getPlugin&&Ne.getPlugin("reloadSourceOnError")||(Ne.registerPlugin||Ne.plugin)("reloadSourceOnError",function(e){Lx(this,e)});const FN=Ne;var nt=B(5861),jN=B(930),Qy=B(4986),$r=B(5813);function jT(){return(0,ei.e)((r,e)=>{let t,n=!1;r.subscribe((0,Jr.x)(e,i=>{const s=t;t=i,n&&e.next([s,i]),n=!0}))})}function Vx(r,e){return r===e}var Kt,As=B(2011),Hx=(B(8775),B(3942)),pu=B(9681),ah=B(4859),el=B(1877),vn=B(2090),Gx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},gu={},UT=UT||{},wn=Gx||self;function BT(){}function VT(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Zg(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var $x="closure_uid_"+(1e9*Math.random()>>>0),BN=0;function VN(r,e,t){return r.call.apply(r.bind,arguments)}function HN(r,e,t){if(!r)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),r.apply(e,i)}}return function(){return r.apply(e,arguments)}}function us(r,e,t){return(us=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?VN:HN).apply(null,arguments)}function HT(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),r.apply(this,n)}}function Ds(r,e){function t(){}t.prototype=e.prototype,r.Z=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.Vb=function(n,i,s){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[i].apply(n,o)}}function uh(){this.s=this.s,this.o=this.o}var a={};uh.prototype.s=!1,uh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var r=function UN(r){return Object.prototype.hasOwnProperty.call(r,$x)&&r[$x]||(r[$x]=++BN)}(this);delete a[r]}},uh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const u=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1},c=Array.prototype.forEach?function(r,e,t){Array.prototype.forEach.call(r,e,t)}:function(r,e,t){const n=r.length,i="string"==typeof r?r.split(""):r;for(let s=0;s<n;s++)s in i&&e.call(t,i[s],s,r)};function p(r){return Array.prototype.concat.apply([],arguments)}function v(r){const e=r.length;if(0<e){const t=Array(e);for(let n=0;n<e;n++)t[n]=r[n];return t}return[]}function E(r){return/^[\s\xa0]*$/.test(r)}var G,x=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function D(r,e){return-1!=r.indexOf(e)}function U(r,e){return r<e?-1:r>e?1:0}e:{var te=wn.navigator;if(te){var Te=te.userAgent;if(Te){G=Te;break e}}G=""}function Ge(r,e,t){for(const n in r)e.call(t,r[n],n,r)}function ct(r){const e={};for(const t in r)e[t]=r[t];return e}var Ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ot(r,e){let t,n;for(let i=1;i<arguments.length;i++){for(t in n=arguments[i],n)r[t]=n[t];for(let s=0;s<Ct.length;s++)t=Ct[s],Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}}function qt(r){return qt[" "](r),r}qt[" "]=BT;var hp,ln=D(G,"Opera"),In=D(G,"Trident")||D(G,"MSIE"),Kn=D(G,"Edge"),Ys=Kn||In,Bc=D(G,"Gecko")&&!(D(G.toLowerCase(),"webkit")&&!D(G,"Edge"))&&!(D(G,"Trident")||D(G,"MSIE"))&&!D(G,"Edge"),GT=D(G.toLowerCase(),"webkit")&&!D(G,"Edge");function Xy(){var r=wn.document;return r?r.documentMode:void 0}e:{var Yg="",Qg=function(){var r=G;return Bc?/rv:([^\);]+)(\)|;)/.exec(r):Kn?/Edge\/([\d\.]+)/.exec(r):In?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):GT?/WebKit\/(\S+)/.exec(r):ln?/(?:Version)[ \/]?(\S+)/.exec(r):void 0}();if(Qg&&(Yg=Qg?Qg[1]:""),In){var Xg=Xy();if(null!=Xg&&Xg>parseFloat(Yg)){hp=String(Xg);break e}}hp=Yg}var $T={};var j3=wn.document&&In&&(Xy()||parseInt(hp,10))||void 0,U3=function(){if(!wn.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{wn.addEventListener("test",BT,e),wn.removeEventListener("test",BT,e)}catch(t){}return r}();function Do(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}function zT(r,e){if(Do.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,n=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Bc){e:{try{qt(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:B3[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&zT.Z.h.call(this)}}Do.prototype.h=function(){this.defaultPrevented=!0},Ds(zT,Do);var B3={2:"touch",3:"pen",4:"mouse"};zT.prototype.h=function(){zT.Z.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var WT="closure_listenable_"+(1e6*Math.random()|0),V3=0;function H3(r,e,t,n,i){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!n,this.ia=i,this.key=++V3,this.ca=this.fa=!1}function qx(r){r.ca=!0,r.listener=null,r.proxy=null,r.src=null,r.ia=null}function zx(r){this.src=r,this.g={},this.h=0}function Vk(r,e){var t=e.type;if(t in r.g){var s,n=r.g[t],i=u(n,e);(s=0<=i)&&Array.prototype.splice.call(n,i,1),s&&(qx(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Hk(r,e,t,n){for(var i=0;i<r.length;++i){var s=r[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==n)return i}return-1}zx.prototype.add=function(r,e,t,n,i){var s=r.toString();(r=this.g[s])||(r=this.g[s]=[],this.h++);var o=Hk(r,e,n,i);return-1<o?(e=r[o],t||(e.fa=!1)):((e=new H3(e,this.src,s,!!n,i)).fa=t,r.push(e)),e};var Gk="closure_lm_"+(1e6*Math.random()|0),$k={};function qN(r,e,t,n,i){if(n&&n.once)return WN(r,e,t,n,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)qN(r,e[s],t,n,i);return null}return t=Kk(t),r&&r[WT]?r.N(e,t,Zg(n)?!!n.capture:!!n,i):zN(r,e,t,!1,n,i)}function zN(r,e,t,n,i,s){if(!e)throw Error("Invalid event type");var o=Zg(i)?!!i.capture:!!i,l=zk(r);if(l||(r[Gk]=l=new zx(r)),(t=l.add(e,t,n,o,s)).proxy)return t;if(n=function G3(){var e=$3;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=n,n.src=r,n.listener=t,r.addEventListener)U3||(i=o),void 0===i&&(i=!1),r.addEventListener(e.toString(),n,i);else if(r.attachEvent)r.attachEvent(ZN(e.toString()),n);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(n)}return t}function WN(r,e,t,n,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)WN(r,e[s],t,n,i);return null}return t=Kk(t),r&&r[WT]?r.O(e,t,Zg(n)?!!n.capture:!!n,i):zN(r,e,t,!0,n,i)}function KN(r,e,t,n,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)KN(r,e[s],t,n,i);else n=Zg(n)?!!n.capture:!!n,t=Kk(t),r&&r[WT]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Hk(s=r.g[e],t,n,i))&&(qx(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete r.g[e],r.h--))):r&&(r=zk(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Hk(e,t,n,i)),(t=-1<r?e[r]:null)&&qk(t))}function qk(r){if("number"!=typeof r&&r&&!r.ca){var e=r.src;if(e&&e[WT])Vk(e.i,r);else{var t=r.type,n=r.proxy;e.removeEventListener?e.removeEventListener(t,n,r.capture):e.detachEvent?e.detachEvent(ZN(t),n):e.addListener&&e.removeListener&&e.removeListener(n),(t=zk(e))?(Vk(t,r),0==t.h&&(t.src=null,e[Gk]=null)):qx(r)}}}function ZN(r){return r in $k?$k[r]:$k[r]="on"+r}function $3(r,e){if(r.ca)r=!0;else{e=new zT(e,this);var t=r.listener,n=r.ia||r.src;r.fa&&qk(r),r=t.call(n,e)}return r}function zk(r){return(r=r[Gk])instanceof zx?r:null}var Wk="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kk(r){return"function"==typeof r?r:(r[Wk]||(r[Wk]=function(e){return r.handleEvent(e)}),r[Wk])}function ks(){uh.call(this),this.i=new zx(this),this.P=this,this.I=null}function Qs(r,e){var t,n=r.I;if(n)for(t=[];n;n=n.I)t.push(n);if(r=r.P,n=e.type||e,"string"==typeof e)e=new Do(e,r);else if(e instanceof Do)e.target=e.target||r;else{var i=e;Ot(e=new Do(n,r),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=Wx(o,n,!0,e)&&i}if(i=Wx(o=e.g=r,n,!0,e)&&i,i=Wx(o,n,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Wx(o=e.g=t[s],n,!1,e)&&i}function Wx(r,e,t,n){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==t){var l=o.listener,f=o.ia||o.src;o.fa&&Vk(r.i,o),i=!1!==l.call(f,n)&&i}}return i&&!n.defaultPrevented}Ds(ks,uh),ks.prototype[WT]=!0,ks.prototype.removeEventListener=function(r,e,t,n){KN(this,r,e,t,n)},ks.prototype.M=function(){if(ks.Z.M.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],n=0;n<t.length;n++)qx(t[n]);delete r.g[e],r.h--}}this.I=null},ks.prototype.N=function(r,e,t,n){return this.i.add(String(r),e,!1,t,n)},ks.prototype.O=function(r,e,t,n){return this.i.add(String(r),e,!0,t,n)};var Zk=wn.JSON.stringify;function q3(){var r=QN;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Qk,YN=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new W3,r=>r.reset());class W3{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function K3(r){wn.setTimeout(()=>{throw r},0)}function Yk(r,e){Qk||function Z3(){var r=wn.Promise.resolve(void 0);Qk=function(){r.then(Y3)}}(),Xk||(Qk(),Xk=!0),QN.add(r,e)}var Xk=!1,QN=new class z3{constructor(){this.h=this.g=null}add(e,t){const n=YN.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Y3(){for(var r;r=q3();){try{r.h.call(r.g)}catch(t){K3(t)}var e=YN;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Xk=!1}function Kx(r,e){ks.call(this),this.h=r||1,this.g=e||wn,this.j=us(this.kb,this),this.l=Date.now()}function Jk(r){r.da=!1,r.S&&(r.g.clearTimeout(r.S),r.S=null)}function eM(r,e,t){if("function"==typeof r)t&&(r=us(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=us(r.handleEvent,r)}return 2147483647<Number(e)?-1:wn.setTimeout(r,e||0)}function XN(r){r.g=eM(()=>{r.g=null,r.i&&(r.i=!1,XN(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Ds(Kx,ks),(Kt=Kx.prototype).da=!1,Kt.S=null,Kt.kb=function(){if(this.da){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-r):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qs(this,"tick"),this.da&&(Jk(this),this.start()))}},Kt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kt.M=function(){Kx.Z.M.call(this),Jk(this),delete this.g};class Q3 extends uh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:XN(this)}M(){super.M(),this.g&&(wn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function KT(r){uh.call(this),this.h=r,this.g={}}Ds(KT,uh);var JN=[];function eL(r,e,t,n){Array.isArray(t)||(t&&(JN[0]=t.toString()),t=JN);for(var i=0;i<t.length;i++){var s=qN(e,t[i],n||r.handleEvent,!1,r.h||r);if(!s)break;r.g[s.key]=s}}function tL(r){Ge(r.g,function(e,t){this.g.hasOwnProperty(t)&&qk(e)},r),r.g={}}function Zx(){this.g=!0}function Jy(r,e,t,n){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function t4(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var n=t[r];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Zk(t)}catch(l){return e}}(r,t)+(n?" "+n:"")})}KT.prototype.M=function(){KT.Z.M.call(this),tL(this)},KT.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zx.prototype.Aa=function(){this.g=!1},Zx.prototype.info=function(){};var em={},nL=null;function Yx(){return nL=nL||new ks}function rL(r){Do.call(this,em.Ma,r)}function ZT(r){const e=Yx();Qs(e,new rL(e,r))}function iL(r,e){Do.call(this,em.STAT_EVENT,r),this.stat=e}function ta(r){const e=Yx();Qs(e,new iL(e,r))}function sL(r,e){Do.call(this,em.Na,r),this.size=e}function YT(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return wn.setTimeout(function(){r()},e)}em.Ma="serverreachability",Ds(rL,Do),em.STAT_EVENT="statevent",Ds(iL,Do),em.Na="timingevent",Ds(sL,Do);var Qx={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},oL={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function tM(){}function uL(){}tM.prototype.h=null;var iM,QT={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function nM(){Do.call(this,"d")}function rM(){Do.call(this,"c")}function Xx(){}function XT(r,e,t,n){this.l=r,this.j=e,this.m=t,this.X=n||1,this.V=new KT(this),this.P=n4,this.W=new Kx(r=Ys?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new lL}function lL(){this.i=null,this.g="",this.h=!1}Ds(nM,Do),Ds(rM,Do),Ds(Xx,tM),Xx.prototype.g=function(){return new XMLHttpRequest},Xx.prototype.i=function(){return{}},iM=new Xx;var n4=45e3,sM={},Jx={};function oM(r,e,t){r.K=1,r.v=iI(lh(e)),r.s=t,r.U=!0,cL(r,null)}function cL(r,e){r.F=Date.now(),JT(r),r.A=lh(r.v);var t=r.A,n=r.X;Array.isArray(n)||(n=[String(n)]),_L(t.h,"t",n),r.C=0,t=r.l.H,r.h=new lL,r.g=HL(r.l,t?e:null,!r.s),0<r.O&&(r.L=new Q3(us(r.Ia,r,r.g),r.O)),eL(r.V,r.g,"readystatechange",r.gb),e=r.H?ct(r.H):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.s,e)):(r.u="GET",r.g.ea(r.A,r.u,null,e)),ZT(1),function X3(r,e,t,n,i,s){r.info(function(){if(r.g)if(s)for(var o="",l=s.split("&"),f=0;f<l.length;f++){var g=l[f].split("=");if(1<g.length){var y=g[0];g=g[1];var T=y.split("_");o=2<=T.length&&"type"==T[1]?o+(y+"=")+g+"&":o+(y+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(r.j,r.u,r.A,r.m,r.X,r.s)}function dL(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Ba}function hL(r,e,t){let i,n=!0;for(;!r.I&&r.C<t.length;){if(i=r4(r,t),i==Jx){4==e&&(r.o=4,ta(14),n=!1),Jy(r.j,r.m,null,"[Incomplete Response]");break}if(i==sM){r.o=4,ta(15),Jy(r.j,r.m,t,"[Invalid Chunk]"),n=!1;break}Jy(r.j,r.m,i,null),aM(r,i)}dL(r)&&i!=Jx&&i!=sM&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,ta(16),n=!1),r.i=r.i&&n,n?0<t.length&&!r.aa&&(r.aa=!0,(e=r.l).g==r&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),yM(e),e.L=!0,ta(11))):(Jy(r.j,r.m,t,"[Invalid Chunked Response]"),tm(r),eE(r))}function r4(r,e){var t=r.C,n=e.indexOf("\n",t);return-1==n?Jx:(t=Number(e.substring(t,n)),isNaN(t)?sM:(n+=1)+t>e.length?Jx:(e=e.substr(n,t),r.C=n+t,e))}function JT(r){r.Y=Date.now()+r.P,fL(r,r.P)}function fL(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=YT(us(r.eb,r),e)}function eI(r){r.B&&(wn.clearTimeout(r.B),r.B=null)}function eE(r){0==r.l.G||r.I||jL(r.l,r)}function tm(r){eI(r);var e=r.L;e&&"function"==typeof e.na&&e.na(),r.L=null,Jk(r.W),tL(r.V),r.g&&(e=r.g,r.g=null,e.abort(),e.na())}function aM(r,e){try{var t=r.l;if(0!=t.G&&(t.g==r||cM(t.i,r)))if(t.I=r.N,!r.J&&cM(t.i,r)&&3==t.G){try{var n=t.Ca.g.parse(e)}catch(g){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=YT(us(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<r.F))break e;cI(t),uI(t)}vM(t),ta(18)}if(1>=EL(t.i)&&t.ka){try{t.ka()}catch(g){}t.ka=void 0}}else im(t,11)}else if((r.J||t.g==r)&&cI(t),!E(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(t.U=g[0],g=g[1],2==t.G)if("c"==g[0]){t.J=g[1],t.la=g[2];const y=g[3];null!=y&&(t.ma=y,t.h.info("VER="+t.ma));const T=g[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const S=g[5];null!=S&&"number"==typeof S&&0<S&&(t.K=n=1.5*S,t.h.info("backChannelRequestTimeoutMs_="+n)),n=t;const M=r.g;if(M){const L=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(L){var s=n.i;!s.g&&(D(L,"spdy")||D(L,"quic")||D(L,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(dM(s,s.h),s.h=null))}if(n.D){const H=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(n.sa=H,ni(n.F,n.D,H))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-r.F,t.h.info("Handshake RTT: "+t.O+"ms"));var o=r;if((n=t).oa=VL(n,n.H?n.la:null,n.W),o.J){wL(n.i,o);var l=o,f=n.K;f&&l.setTimeout(f),l.B&&(eI(l),JT(l)),n.g=o}else LL(n);0<t.l.length&&lI(t)}else"stop"!=g[0]&&"close"!=g[0]||im(t,7);else 3==t.G&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?im(t,7):gM(t):"noop"!=g[0]&&t.j&&t.j.wa(g),t.A=0)}ZT(4)}catch(g){}}function uM(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(VT(r)||"string"==typeof r)c(r,e,void 0);else{if(r.T&&"function"==typeof r.T)var t=r.T();else if(r.R&&"function"==typeof r.R)t=void 0;else if(VT(r)||"string"==typeof r){t=[];for(var n=r.length,i=0;i<n;i++)t.push(i)}else for(i in t=[],n=0,r)t[n++]=i;n=function i4(r){if(r.R&&"function"==typeof r.R)return r.R();if("string"==typeof r)return r.split("");if(VT(r)){for(var e=[],t=r.length,n=0;n<t;n++)e.push(r[n]);return e}for(n in e=[],t=0,r)e[t++]=r[n];return e}(r),i=n.length;for(var s=0;s<i;s++)e.call(void 0,n[s],t&&t[s],r)}}function e_(r,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var n=0;n<t;n+=2)this.set(arguments[n],arguments[n+1])}else if(r)if(r instanceof e_)for(t=r.T(),n=0;n<t.length;n++)this.set(t[n],r.get(t[n]));else for(n in r)this.set(n,r[n])}function lM(r){if(r.i!=r.g.length){for(var e=0,t=0;e<r.g.length;){var n=r.g[e];nm(r.h,n)&&(r.g[t++]=n),e++}r.g.length=t}if(r.i!=r.g.length){var i={};for(t=e=0;e<r.g.length;)nm(i,n=r.g[e])||(r.g[t++]=n,i[n]=1),e++;r.g.length=t}}function nm(r,e){return Object.prototype.hasOwnProperty.call(r,e)}(Kt=XT.prototype).setTimeout=function(r){this.P=r},Kt.gb=function(r){r=r.target;const e=this.L;e&&3==ch(r)?e.l():this.Ia(r)},Kt.Ia=function(r){try{if(r==this.g)e:{const y=ch(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>y)&&(3!=y||Ys||this.g&&(this.h.h||this.g.ga()||ML(this.g)))){this.I||4!=y||7==e||ZT(8==e||0>=T?3:2),eI(this);var t=this.g.ba();this.N=t;t:if(dL(this)){var n=ML(this.g);r="";var i=n.length,s=4==ch(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tm(this),eE(this);var o="";break t}this.h.i=new wn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,r+=this.h.i.decode(n[e],{stream:s&&e==i-1});n.splice(0,i),this.h.g+=r,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==t,function J3(r,e,t,n,i,s,o){r.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,y,t),this.i){if(this.$&&!this.J){t:{if(this.g){var l,f=this.g;if((l=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(l)){var g=l;break t}}g=null}if(!(t=g)){this.i=!1,this.o=3,ta(12),tm(this),eE(this);break e}Jy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,aM(this,t)}this.U?(hL(this,y,o),Ys&&this.i&&3==y&&(eL(this.V,this.W,"tick",this.fb),this.W.start())):(Jy(this.j,this.m,o,null),aM(this,o)),4==y&&tm(this),this.i&&!this.I&&(4==y?jL(this.l,this):(this.i=!1,JT(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,ta(12)):(this.o=0,ta(13)),tm(this),eE(this)}}}catch(y){}},Kt.fb=function(){if(this.g){var r=ch(this.g),e=this.g.ga();this.C<e.length&&(eI(this),hL(this,r,e),this.i&&4!=r&&JT(this))}},Kt.cancel=function(){this.I=!0,tm(this)},Kt.eb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function e4(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ZT(3),ta(17)),tm(this),this.o=2,eE(this)):fL(this,this.Y-r)},(Kt=e_.prototype).R=function(){lM(this);for(var r=[],e=0;e<this.g.length;e++)r.push(this.h[this.g[e]]);return r},Kt.T=function(){return lM(this),this.g.concat()},Kt.get=function(r,e){return nm(this.h,r)?this.h[r]:e},Kt.set=function(r,e){nm(this.h,r)||(this.i++,this.g.push(r)),this.h[r]=e},Kt.forEach=function(r,e){for(var t=this.T(),n=0;n<t.length;n++){var i=t[n],s=this.get(i);r.call(e,s,i,this)}};var pL=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rm(r,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,r instanceof rm){this.g=void 0!==e?e:r.g,tI(this,r.j),this.s=r.s,nI(this,r.i),rI(this,r.m),this.l=r.l,e=r.h;var t=new rE;t.i=e.i,e.g&&(t.g=new e_(e.g),t.h=e.h),gL(this,t),this.o=r.o}else r&&(t=String(r).match(pL))?(this.g=!!e,tI(this,t[1]||"",!0),this.s=tE(t[2]||""),nI(this,t[3]||"",!0),rI(this,t[4]),this.l=tE(t[5]||"",!0),gL(this,t[6]||"",!0),this.o=tE(t[7]||"")):(this.g=!!e,this.h=new rE(null,this.g))}function lh(r){return new rm(r)}function tI(r,e,t){r.j=t?tE(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function nI(r,e,t){r.i=t?tE(e,!0):e}function rI(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function gL(r,e,t){e instanceof rE?(r.h=e,function f4(r,e){e&&!r.j&&(fp(r),r.i=null,r.g.forEach(function(t,n){var i=n.toLowerCase();n!=i&&(vL(this,n),_L(this,i,t))},r)),r.j=e}(r.h,r.g)):(t||(e=nE(e,d4)),r.h=new rE(e,r.g))}function ni(r,e,t){r.h.set(e,t)}function iI(r){return ni(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function tE(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function nE(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,u4),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function u4(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}rm.prototype.toString=function(){var r=[],e=this.j;e&&r.push(nE(e,mL,!0),":");var t=this.i;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(nE(e,mL,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&r.push("/"),r.push(nE(t,"/"==t.charAt(0)?c4:l4,!0))),(t=this.h.toString())&&r.push("?",t),(t=this.o)&&r.push("#",nE(t,h4)),r.join("")};var mL=/[#\/\?@]/g,l4=/[#\?:]/g,c4=/[#\?]/g,d4=/[#\?@]/g,h4=/#/g;function rE(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function fp(r){r.g||(r.g=new e_,r.h=0,r.i&&function s4(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var n=r[t].indexOf("="),i=null;if(0<=n){var s=r[t].substring(0,n);i=r[t].substring(n+1)}else s=r[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function vL(r,e){fp(r),e=t_(r,e),nm(r.g.h,e)&&(r.i=null,r.h-=r.g.get(e).length,nm((r=r.g).h,e)&&(delete r.h[e],r.i--,r.g.length>2*r.i&&lM(r)))}function yL(r,e){return fp(r),e=t_(r,e),nm(r.g.h,e)}function _L(r,e,t){vL(r,e),0<t.length&&(r.i=null,r.g.set(t_(r,e),v(t)),r.h+=t.length)}function t_(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function bL(r){this.l=r||g4,r=wn.PerformanceNavigationTiming?0<(r=wn.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(wn.g&&wn.g.Ea&&wn.g.Ea()&&wn.g.Ea().Zb),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Kt=rE.prototype).add=function(r,e){fp(this),this.i=null,r=t_(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Kt.forEach=function(r,e){fp(this),this.g.forEach(function(t,n){c(t,function(i){r.call(e,i,n,this)},this)},this)},Kt.T=function(){fp(this);for(var r=this.g.R(),e=this.g.T(),t=[],n=0;n<e.length;n++)for(var i=r[n],s=0;s<i.length;s++)t.push(e[n]);return t},Kt.R=function(r){fp(this);var e=[];if("string"==typeof r)yL(this,r)&&(e=p(e,this.g.get(t_(this,r))));else{r=this.g.R();for(var t=0;t<r.length;t++)e=p(e,r[t])}return e},Kt.set=function(r,e){return fp(this),this.i=null,yL(this,r=t_(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Kt.get=function(r,e){return r&&0<(r=this.R(r)).length?String(r[0]):e},Kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var r=[],e=this.g.T(),t=0;t<e.length;t++){var n=e[t],i=encodeURIComponent(String(n));n=this.R(n);for(var s=0;s<n.length;s++){var o=i;""!==n[s]&&(o+="="+encodeURIComponent(String(n[s]))),r.push(o)}}return this.i=r.join("&")};var g4=10;function TL(r){return!!r.h||!!r.g&&r.g.size>=r.j}function EL(r){return r.h?1:r.g?r.g.size:0}function cM(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function dM(r,e){r.g?r.g.add(e):r.h=e}function wL(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function SL(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.D);return e}return v(r.i)}function hM(){}function m4(){this.g=new hM}function v4(r,e,t){const n=t||"";try{uM(r,function(i,s){let o=i;Zg(i)&&(o=Zk(i)),e.push(n+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function sI(r,e,t,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch(s){}}function iE(r){this.l=r.$b||null,this.j=r.ib||!1}function oI(r,e){ks.call(this),this.D=r,this.u=e,this.m=void 0,this.readyState=fM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bL.prototype.cancel=function(){if(this.i=SL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},hM.prototype.stringify=function(r){return wn.JSON.stringify(r,void 0)},hM.prototype.parse=function(r){return wn.JSON.parse(r,void 0)},Ds(iE,tM),iE.prototype.g=function(){return new oI(this.l,this.j)},iE.prototype.i=function(r){return function(){return r}}({}),Ds(oI,ks);var fM=0;function CL(r){r.j.read().then(r.Sa.bind(r)).catch(r.ha.bind(r))}function sE(r){r.readyState=4,r.l=null,r.j=null,r.A=null,oE(r)}function oE(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Kt=oI.prototype).open=function(r,e){if(this.readyState!=fM)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,oE(this)},Kt.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.D||wn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sE(this)),this.readyState=fM},Kt.Va=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,oE(this)),this.g&&(this.readyState=3,oE(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==wn.ReadableStream&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;CL(this)}else r.text().then(this.Ua.bind(this),this.ha.bind(this))},Kt.Sa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?sE(this):oE(this),3==this.readyState&&CL(this)}},Kt.Ua=function(r){this.g&&(this.response=this.responseText=r,sE(this))},Kt.Ta=function(r){this.g&&(this.response=r,sE(this))},Kt.ha=function(){this.g&&sE(this)},Kt.setRequestHeader=function(r,e){this.v.append(r,e)},Kt.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Kt.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(oI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var _4=wn.JSON.parse;function qi(r){ks.call(this),this.headers=new e_,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xL,this.K=this.L=!1}Ds(qi,ks);var xL="",b4=/^https?$/i,T4=["POST","PUT"];function w4(r){return"content-type"==r.toLowerCase()}function IL(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,AL(r),aI(r)}function AL(r){r.D||(r.D=!0,Qs(r,"complete"),Qs(r,"error"))}function DL(r){if(r.h&&void 0!==UT&&(!r.C[1]||4!=ch(r)||2!=r.ba()))if(r.v&&4==ch(r))eM(r.Fa,0,r);else if(Qs(r,"readystatechange"),4==ch(r)){r.h=!1;try{const l=r.ba();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var n;if(n=0===l){var i=String(r.H).match(pL)[1]||null;if(!i&&wn.self&&wn.self.location){var s=wn.self.location.protocol;i=s.substr(0,s.length-1)}n=!b4.test(i?i.toLowerCase():"")}t=n}if(t)Qs(r,"complete"),Qs(r,"success");else{r.m=6;try{var o=2<ch(r)?r.g.statusText:""}catch(f){o=""}r.j=o+" ["+r.ba()+"]",AL(r)}}finally{aI(r)}}}function aI(r,e){if(r.g){kL(r);const t=r.g,n=r.C[0]?BT:null;r.g=null,r.C=null,e||Qs(r,"ready");try{t.onreadystatechange=n}catch(i){}}}function kL(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(wn.clearTimeout(r.A),r.A=null)}function ch(r){return r.g?r.g.readyState:0}function ML(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case xL:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(e){return null}}function pM(r,e,t){e:{for(n in t){var n=!1;break e}n=!0}n||(t=function S4(r){let e="";return Ge(r,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ni(r,e,t))}function aE(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function PL(r){this.za=0,this.l=[],this.h=new Zx,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=aE("failFast",!1,r),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=aE("baseRetryDelayMs",5e3,r),this.$a=aE("retryDelaySeedMs",1e4,r),this.Ya=aE("forwardChannelMaxRetries",2,r),this.ra=aE("forwardChannelRequestTimeoutMs",2e4,r),this.qa=r&&r.xmlHttpFactory||void 0,this.Ba=r&&r.Yb||!1,this.K=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.J="",this.i=new bL(r&&r.concurrentRequestLimit),this.Ca=new m4,this.ja=r&&r.fastHandshake||!1,this.Ra=r&&r.Wb||!1,r&&r.Aa&&this.h.Aa(),r&&r.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&r&&r.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!r||!1!==r.Xb}function gM(r){if(OL(r),3==r.G){var e=r.V++,t=lh(r.F);ni(t,"SID",r.J),ni(t,"RID",e),ni(t,"TYPE","terminate"),uE(r,t),(e=new XT(r,r.h,e,void 0)).K=2,e.v=iI(lh(t)),t=!1,wn.navigator&&wn.navigator.sendBeacon&&(t=wn.navigator.sendBeacon(e.v.toString(),"")),!t&&wn.Image&&((new Image).src=e.v,t=!0),t||(e.g=HL(e.l,null),e.g.ea(e.v)),e.F=Date.now(),JT(e)}BL(r)}function uI(r){r.g&&(yM(r),r.g.cancel(),r.g=null)}function OL(r){uI(r),r.u&&(wn.clearTimeout(r.u),r.u=null),cI(r),r.i.cancel(),r.m&&("number"==typeof r.m&&wn.clearTimeout(r.m),r.m=null)}function mM(r,e){r.l.push(new class{constructor(r,e){this.h=r,this.g=e}}(r.Za++,e)),3==r.G&&lI(r)}function lI(r){TL(r.i)||r.m||(r.m=!0,Yk(r.Ha,r),r.C=0)}function RL(r,e){var t;t=e?e.m:r.V++;const n=lh(r.F);ni(n,"SID",r.J),ni(n,"RID",t),ni(n,"AID",r.U),uE(r,n),r.o&&r.s&&pM(n,r.o,r.s),t=new XT(r,r.h,t,r.C+1),null===r.o&&(t.H=r.s),e&&(r.l=e.D.concat(r.l)),e=NL(r,t,1e3),t.setTimeout(Math.round(.5*r.ra)+Math.round(.5*r.ra*Math.random())),dM(r.i,t),oM(t,n,e)}function uE(r,e){r.j&&uM({},function(t,n){ni(e,n,t)})}function NL(r,e,t){t=Math.min(r.l.length,t);var n=r.j?us(r.j.Oa,r.j,r):null;e:{var i=r.l;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let l=!0;for(let f=0;f<t;f++){let g=i[f].h;const y=i[f].g;if(g-=s,0>g)s=Math.max(0,i[f].h-100),l=!1;else try{v4(y,o,"req"+g+"_")}catch(T){n&&n(y)}}if(l){n=o.join("&");break e}}}return r=r.l.splice(0,t),e.D=r,n}function LL(r){r.g||r.u||(r.Y=1,Yk(r.Ga,r),r.A=0)}function vM(r){return!(r.g||r.u||3<=r.A||(r.Y++,r.u=YT(us(r.Ga,r),UL(r,r.A)),r.A++,0))}function yM(r){null!=r.B&&(wn.clearTimeout(r.B),r.B=null)}function FL(r){r.g=new XT(r,r.h,"rpc",r.Y),null===r.o&&(r.g.H=r.s),r.g.O=0;var e=lh(r.oa);ni(e,"RID","rpc"),ni(e,"SID",r.J),ni(e,"CI",r.N?"0":"1"),ni(e,"AID",r.U),uE(r,e),ni(e,"TYPE","xmlhttp"),r.o&&r.s&&pM(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.la,t.K=1,t.v=iI(lh(e)),t.s=null,t.U=!0,cL(t,r)}function cI(r){null!=r.v&&(wn.clearTimeout(r.v),r.v=null)}function jL(r,e){var t=null;if(r.g==e){cI(r),yM(r),r.g=null;var n=2}else{if(!cM(r.i,e))return;t=e.D,wL(r.i,e),n=1}if(r.I=e.N,0!=r.G)if(e.i)if(1==n){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=r.C;Qs(n=Yx(),new sL(n,t,e,i)),lI(r)}else LL(r);else if(3==(i=e.o)||0==i&&0<r.I||!(1==n&&function C4(r,e){return!(EL(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.l=e.D.concat(r.l),0):1==r.G||2==r.G||r.C>=(r.Xa?0:r.Ya)||(r.m=YT(us(r.Ha,r,e),UL(r,r.C)),r.C++,0)))}(r,e)||2==n&&vM(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),i){case 1:im(r,5);break;case 4:im(r,10);break;case 3:im(r,6);break;default:im(r,2)}}function UL(r,e){let t=r.Pa+Math.floor(Math.random()*r.$a);return r.j||(t*=2),t*e}function im(r,e){if(r.h.info("Error code "+e),2==e){var t=null;r.j&&(t=null);var n=us(r.jb,r);t||(t=new rm("//www.google.com/images/cleardot.gif"),wn.location&&"http"==wn.location.protocol||tI(t,"https"),iI(t)),function y4(r,e){const t=new Zx;if(wn.Image){const n=new Image;n.onload=HT(sI,t,n,"TestLoadImage: loaded",!0,e),n.onerror=HT(sI,t,n,"TestLoadImage: error",!1,e),n.onabort=HT(sI,t,n,"TestLoadImage: abort",!1,e),n.ontimeout=HT(sI,t,n,"TestLoadImage: timeout",!1,e),wn.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=r}else e(!1)}(t.toString(),n)}else ta(2);r.G=0,r.j&&r.j.va(e),BL(r),OL(r)}function BL(r){r.G=0,r.I=-1,r.j&&((0!=SL(r.i).length||0!=r.l.length)&&(r.i.i.length=0,v(r.l),r.l.length=0),r.j.ua())}function VL(r,e,t){let n=function o4(r){return r instanceof rm?lh(r):new rm(r,void 0)}(t);if(""!=n.i)e&&nI(n,e+"."+n.i),rI(n,n.m);else{const i=wn.location;n=function a4(r,e,t,n){var i=new rm(null,void 0);return r&&tI(i,r),e&&nI(i,e),t&&rI(i,t),n&&(i.l=n),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return r.aa&&Ge(r.aa,function(i,s){ni(n,s,i)}),t=r.sa,(e=r.D)&&t&&ni(n,e,t),ni(n,"VER",r.ma),uE(r,n),n}function HL(r,e,t){if(e&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qi(t&&r.Ba&&!r.qa?new iE({ib:!0}):r.qa)).L=r.H,e}function GL(){}function dI(){if(In&&!(10<=Number(j3)))throw Error("Environmental error: no available transport.")}function mu(r,e){ks.call(this),this.g=new PL(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(r?r["X-WebChannel-Client-Profile"]=e.ya:r={"X-WebChannel-Client-Profile":e.ya}),this.g.P=r,(r=e&&e.httpHeadersOverwriteParam)&&!E(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!E(e)&&(this.g.D=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new n_(this)}function $L(r){nM.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function qL(){rM.call(this),this.status=1}function n_(r){this.g=r}(Kt=qi.prototype).ea=function(r,e,t,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);e=e?e.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():iM.g(),this.C=function aL(r){return r.h||(r.h=r.i())}(this.u?this.u:iM),this.g.onreadystatechange=us(this.Fa,this);try{this.F=!0,this.g.open(e,String(r),!0),this.F=!1}catch(s){return void IL(this,s)}r=t||"";const i=new e_(this.headers);n&&uM(n,function(s,o){i.set(o,s)}),n=function d(r){e:{var e=w4;const t=r.length,n="string"==typeof r?r.split(""):r;for(let i=0;i<t;i++)if(i in n&&e.call(void 0,n[i],i,r)){e=i;break e}e=-1}return 0>e?null:"string"==typeof r?r.charAt(e):r[e]}(i.T()),t=wn.FormData&&r instanceof wn.FormData,!(0<=u(T4,e))||n||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kL(this),0<this.B&&((this.K=function E4(r){return In&&function qT(){return function vt(r){var e=$T;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=r(9)}(function(){let r=0;const e=x(String(hp)).split("."),t=x("9").split("."),n=Math.max(e.length,t.length);for(let o=0;0==r&&o<n;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;r=U(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||U(0==i[2].length,0==s[2].length)||U(i[2],s[2]),i=i[3],s=s[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=us(this.pa,this)):this.A=eM(this.pa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(s){IL(this,s)}},Kt.pa=function(){void 0!==UT&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qs(this,"timeout"),this.abort(8))},Kt.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,Qs(this,"complete"),Qs(this,"abort"),aI(this))},Kt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),aI(this,!0)),qi.Z.M.call(this)},Kt.Fa=function(){this.s||(this.F||this.v||this.l?DL(this):this.cb())},Kt.cb=function(){DL(this)},Kt.ba=function(){try{return 2<ch(this)?this.g.status:-1}catch(r){return-1}},Kt.ga=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},Kt.Qa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),_4(e)}},Kt.Da=function(){return this.m},Kt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Kt=PL.prototype).ma=8,Kt.G=1,Kt.hb=function(r){try{this.h.info("Origin Trials invoked: "+r)}catch(e){}},Kt.Ha=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.V=Math.floor(1e5*Math.random()),r=this.V++;const i=new XT(this,this.h,r,void 0);let s=this.s;if(this.P&&(s?(s=ct(s),Ot(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var n=this.l[t];if(void 0===(n="__data__"in n.g&&"string"==typeof(n=n.g.__data__)?n.length:void 0))break;if(4096<(e+=n)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=NL(this,i,e),ni(t=lh(this.F),"RID",r),ni(t,"CVER",22),this.D&&ni(t,"X-HTTP-Session-Id",this.D),uE(this,t),this.o&&s&&pM(t,this.o,s),dM(this.i,i),this.Ra&&ni(t,"TYPE","init"),this.ja?(ni(t,"$req",e),ni(t,"SID","null"),i.$=!0,oM(i,t,null)):oM(i,t,e),this.G=2}}else 3==this.G&&(r?RL(this,r):0==this.l.length||TL(this.i)||RL(this))},Kt.Ga=function(){if(this.u=null,FL(this),this.$&&!(this.L||null==this.g||0>=this.O)){var r=2*this.O;this.h.info("BP detection timer enabled: "+r),this.B=YT(us(this.bb,this),r)}},Kt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ta(10),uI(this),FL(this))},Kt.ab=function(){null!=this.v&&(this.v=null,uI(this),vM(this),ta(19))},Kt.jb=function(r){r?(this.h.info("Successfully pinged google.com"),ta(2)):(this.h.info("Failed to ping google.com"),ta(1))},(Kt=GL.prototype).xa=function(){},Kt.wa=function(){},Kt.va=function(){},Kt.ua=function(){},Kt.Oa=function(){},dI.prototype.g=function(r,e){return new mu(r,e)},Ds(mu,ks),mu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var r=this.g,e=this.l,t=this.h||void 0;r.Wa&&(r.h.info("Origin Trials enabled."),Yk(us(r.hb,r,e))),ta(0),r.W=e,r.aa=t||{},r.N=r.X,r.F=VL(r,null,r.W),lI(r)},mu.prototype.close=function(){gM(this.g)},mu.prototype.u=function(r){if("string"==typeof r){var e={};e.__data__=r,mM(this.g,e)}else this.v?((e={}).__data__=Zk(r),mM(this.g,e)):mM(this.g,r)},mu.prototype.M=function(){this.g.j=null,delete this.j,gM(this.g),delete this.g,mu.Z.M.call(this)},Ds($L,nM),Ds(qL,rM),Ds(n_,GL),n_.prototype.xa=function(){Qs(this.g,"a")},n_.prototype.wa=function(r){Qs(this.g,new $L(r))},n_.prototype.va=function(r){Qs(this.g,new qL(r))},n_.prototype.ua=function(){Qs(this.g,"b")},dI.prototype.createWebChannel=dI.prototype.g,mu.prototype.send=mu.prototype.u,mu.prototype.open=mu.prototype.m,mu.prototype.close=mu.prototype.close,Qx.NO_ERROR=0,Qx.TIMEOUT=8,Qx.HTTP_ERROR=6,oL.COMPLETE="complete",uL.EventType=QT,QT.OPEN="a",QT.CLOSE="b",QT.ERROR="c",QT.MESSAGE="d",ks.prototype.listen=ks.prototype.N,qi.prototype.listenOnce=qi.prototype.O,qi.prototype.getLastError=qi.prototype.La,qi.prototype.getLastErrorCode=qi.prototype.Da,qi.prototype.getStatus=qi.prototype.ba,qi.prototype.getResponseJson=qi.prototype.Qa,qi.prototype.getResponseText=qi.prototype.ga,qi.prototype.send=qi.prototype.ea;var x4=gu.createWebChannelTransport=function(){return new dI},I4=gu.getStatEventTarget=function(){return Yx()},_M=gu.ErrorCode=Qx,A4=gu.EventType=oL,D4=gu.Event=em,zL=gu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},k4=gu.FetchXmlHttpFactory=iE,hI=gu.WebChannel=uL,M4=gu.XhrIo=qi;const WL="@firebase/firestore";class Xs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xs.UNAUTHENTICATED=new Xs(null),Xs.GOOGLE_CREDENTIALS=new Xs("google-credentials-uid"),Xs.FIRST_PARTY=new Xs("first-party-uid"),Xs.MOCK_USER=new Xs("mock-user");let r_="9.8.0";const pp=new el.Yd("@firebase/firestore");function bM(){return pp.logLevel}function It(r,...e){if(pp.logLevel<=el.in.DEBUG){const t=e.map(TM);pp.debug(`Firestore (${r_}): ${r}`,...t)}}function zi(r,...e){if(pp.logLevel<=el.in.ERROR){const t=e.map(TM);pp.error(`Firestore (${r_}): ${r}`,...t)}}function lE(r,...e){if(pp.logLevel<=el.in.WARN){const t=e.map(TM);pp.warn(`Firestore (${r_}): ${r}`,...t)}}function TM(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch(t){return r}}function Xt(r="Unexpected state"){const e=`FIRESTORE (${r_}) INTERNAL ASSERTION FAILED: `+r;throw zi(e),new Error(e)}function En(r,e){r||Xt()}function Bt(r,e){return r}const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends vn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ms{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class KL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xs.UNAUTHENTICATED))}shutdown(){}}class N4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class L4{constructor(e){this.t=e,this.currentUser=Xs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let o=new Ms;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ms,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const g=o;e.enqueueRetryable((0,nt.Z)(function*(){yield g.promise,yield s(n.currentUser)}))},f=g=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ms)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(En("string"==typeof n.accessToken),new KL(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return En(null===e||"string"==typeof e),new Xs(e)}}class F4{constructor(e,t,n){this.type="FirstParty",this.user=Xs.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class j4{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new F4(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U4{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=s=>{null!=s.error&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(En("string"==typeof t.token),this.p=t.token,new ZL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.I(n),this.T=n=>t.writeSequenceNumber(n))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function B4(r){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}vu.A=-1;class YL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=B4(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%e.length))}return n}}function Mn(r,e){return r<e?-1:r>e?1:0}function i_(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}function QL(r){return r+"\0"}class Pi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Et(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pi.fromMillis(Date.now())}static fromDate(e){return Pi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Pi(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mn(this.nanoseconds,e.nanoseconds):Mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mn(e)}static min(){return new mn(new Pi(0,0))}static max(){return new mn(new Pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function XL(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function sm(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function JL(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class cE{constructor(e,t,n){void 0===t?t=0:t>e.length&&Xt(),void 0===n?n=e.length-t:n>e.length-t&&Xt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===cE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cE?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gn extends cE{construct(e,t,n){return new Gn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Et(st.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new Gn(t)}static emptyPath(){return new Gn([])}}const V4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ls extends cE{construct(e,t,n){return new ls(e,t,n)}static isValidIdentifier(e){return V4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ls.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ls(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(0===n.length)throw new Et(st.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if("\\"===l){if(i+1===e.length)throw new Et(st.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Et(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,i+=2}else"`"===l?(o=!o,i++):"."!==l||o?(n+=l,i++):(s(),i++)}if(s(),o)throw new Et(st.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ls(t)}static emptyPath(){return new ls([])}}class s_{constructor(e){this.fields=e,e.sort(ls.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return i_(this.fields,e.fields,(t,n)=>t.isEqual(n))}}class cs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new cs(t)}static fromUint8Array(e){const t=function(n){let i="";for(let s=0;s<n.length;++s)i+=String.fromCharCode(n[s]);return i}(e);return new cs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cs.EMPTY_BYTE_STRING=new cs("");const G4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gp(r){if(En(!!r),"string"==typeof r){let e=0;const t=G4.exec(r);if(En(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ei(r.seconds),nanos:Ei(r.nanos)}}function Ei(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function om(r){return"string"==typeof r?cs.fromBase64String(r):cs.fromUint8Array(r)}function EM(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function eF(r){const e=r.mapValue.fields.__previous_value__;return EM(e)?eF(e):e}function dE(r){const e=gp(r.mapValue.fields.__local_write_time__.timestampValue);return new Pi(e.seconds,e.nanos)}class $4{constructor(e,t,n,i,s,o,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.useFetchStreams=f}}class dh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new dh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof dh&&e.projectId===this.projectId&&e.database===this.database}}function hE(r){return null==r}function fE(r){return 0===r&&1/r==-1/0}function tF(r){return"number"==typeof r&&Number.isInteger(r)&&!fE(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}class Ft{constructor(e){this.path=e}static fromPath(e){return new Ft(Gn.fromString(e))}static fromName(e){return new Ft(Gn.fromString(e).popFirst(5))}static empty(){return new Ft(Gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ft(new Gn(e.slice()))}}const mp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fI={nullValue:"NULL_VALUE"};function am(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?EM(r)?4:sF(r)?9007199254740991:10:Xt()}function Vc(r,e){if(r===e)return!0;const t=am(r);if(t!==am(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return dE(r).isEqual(dE(e));case 3:return function(n,i){if("string"==typeof n.timestampValue&&"string"==typeof i.timestampValue&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const s=gp(n.timestampValue),o=gp(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return i=e,om(r.bytesValue).isEqual(om(i.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(n,i){return Ei(n.geoPointValue.latitude)===Ei(i.geoPointValue.latitude)&&Ei(n.geoPointValue.longitude)===Ei(i.geoPointValue.longitude)}(r,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Ei(n.integerValue)===Ei(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const s=Ei(n.doubleValue),o=Ei(i.doubleValue);return s===o?fE(s)===fE(o):isNaN(s)&&isNaN(o)}return!1}(r,e);case 9:return i_(r.arrayValue.values||[],e.arrayValue.values||[],Vc);case 10:return function(n,i){const s=n.mapValue.fields||{},o=i.mapValue.fields||{};if(XL(s)!==XL(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===o[l]||!Vc(s[l],o[l])))return!1;return!0}(r,e);default:return Xt()}var i}function pE(r,e){return void 0!==(r.values||[]).find(t=>Vc(t,e))}function vp(r,e){if(r===e)return 0;const t=am(r),n=am(e);if(t!==n)return Mn(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mn(r.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Ei(i.integerValue||i.doubleValue),l=Ei(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(r,e);case 3:return nF(r.timestampValue,e.timestampValue);case 4:return nF(dE(r),dE(e));case 5:return Mn(r.stringValue,e.stringValue);case 6:return function(i,s){const o=om(i),l=om(s);return o.compareTo(l)}(r.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),l=s.split("/");for(let f=0;f<o.length&&f<l.length;f++){const g=Mn(o[f],l[f]);if(0!==g)return g}return Mn(o.length,l.length)}(r.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Mn(Ei(i.latitude),Ei(s.latitude));return 0!==o?o:Mn(Ei(i.longitude),Ei(s.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],l=s.values||[];for(let f=0;f<o.length&&f<l.length;++f){const g=vp(o[f],l[f]);if(g)return g}return Mn(o.length,l.length)}(r.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===mp.mapValue&&s===mp.mapValue)return 0;if(i===mp.mapValue)return 1;if(s===mp.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),f=s.fields||{},g=Object.keys(f);l.sort(),g.sort();for(let y=0;y<l.length&&y<g.length;++y){const T=Mn(l[y],g[y]);if(0!==T)return T;const S=vp(o[l[y]],f[g[y]]);if(0!==S)return S}return Mn(l.length,g.length)}(r.mapValue,e.mapValue);default:throw Xt()}}function nF(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Mn(r,e);const t=gp(r),n=gp(e),i=Mn(t.seconds,n.seconds);return 0!==i?i:Mn(t.nanos,n.nanos)}function o_(r){return wM(r)}function wM(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const i=gp(n);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?om(r.bytesValue).toBase64():"referenceValue"in r?Ft.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=wM(o);return i+"]"}(r.arrayValue):"mapValue"in r?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${wM(n.fields[l])}`;return s+"}"}(r.mapValue):Xt();var e}function um(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function SM(r){return!!r&&"integerValue"in r}function gE(r){return!!r&&"arrayValue"in r}function rF(r){return!!r&&"nullValue"in r}function iF(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function pI(r){return!!r&&"mapValue"in r}function mE(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return sm(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=mE(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mE(r.arrayValue.values[t]);return e}return Object.assign({},r)}function sF(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function q4(r){return"nullValue"in r?fI:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?um(dh.empty(),Ft.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Xt()}function z4(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?um(dh.empty(),Ft.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?mp:Xt()}function oF(r,e){const t=vp(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function aF(r,e){const t=vp(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class ko{constructor(e){this.value=e}static empty(){return new ko({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!pI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mE(t)}setAll(e){let t=ls.emptyPath(),n={},i=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const f=this.getFieldsMap(t);this.applyChanges(f,n,i),n={},i=[],t=l.popLast()}o?n[l.lastSegment()]=mE(o):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());pI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];pI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){sm(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new ko(mE(this.value))}}function uF(r){const e=[];return sm(r.fields,(t,n)=>{const i=new ls([t]);if(pI(n)){const s=uF(n.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new s_(e)}class qr{constructor(e,t,n,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new qr(e,0,mn.min(),mn.min(),ko.empty(),0)}static newFoundDocument(e,t,n){return new qr(e,1,t,mn.min(),n,0)}static newNoDocument(e,t){return new qr(e,2,t,mn.min(),ko.empty(),0)}static newUnknownDocument(e,t){return new qr(e,3,t,mn.min(),ko.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ko.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ko.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gI{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function CM(r){return r.fields.find(e=>2===e.kind)}function lm(r){return r.fields.filter(e=>2!==e.kind)}gI.UNKNOWN_ID=-1;class mI{constructor(e,t){this.fieldPath=e,this.kind=t}}class vE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vE(0,jl.min())}}function lF(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=mn.fromTimestamp(1e9===n?new Pi(t+1,0):new Pi(t,n));return new jl(i,Ft.empty(),e)}function W4(r){return new jl(r.readTime,r.key,-1)}class jl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new jl(mn.min(),Ft.empty(),-1)}static max(){return new jl(mn.max(),Ft.empty(),-1)}}function cF(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ft.comparator(r.documentKey,e.documentKey),0!==t?t:Mn(r.largestBatchId,e.largestBatchId))}class Oi{constructor(e,t){this.comparator=e,this.root=t||Js.EMPTY}insert(e,t){return new Oi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Js.BLACK,null,null))}remove(e){return new Oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vI(this.root,e,this.comparator,!1)}getReverseIterator(){return new vI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vI(this.root,e,this.comparator,!0)}}class vI{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Js{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:Js.RED,this.left=null!=i?i:Js.EMPTY,this.right=null!=s?s:Js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Js(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Js.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xt();const e=this.left.check();if(e!==this.right.check())throw Xt();return e+(this.isRed()?0:1)}}Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1,Js.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt()}get value(){throw Xt()}get color(){throw Xt()}get left(){throw Xt()}get right(){throw Xt()}copy(r,e,t,n,i){return this}insert(r,e,t){return new Js(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lr{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dF(this.data.getIterator())}getIteratorFrom(e){return new dF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Lr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lr(this.comparator);return t.data=e,t}}class dF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function a_(r){return r.hasNext()?r.getNext():void 0}class K4{constructor(e,t=null,n=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.P=null}}function hF(r,e=null,t=[],n=[],i=null,s=null,o=null){return new K4(r,e,t,n,i,s,o)}function cm(r){const e=Bt(r);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>{return(i=n).field.canonicalString()+i.op.toString()+o_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(n=>{return(i=n).field.canonicalString()+i.dir;var i}).join(","),hE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>o_(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>o_(n)).join(",")),e.P=t}return e.P}function yE(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!rH(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if((t=r.filters[i]).op!==(n=e.filters[i]).op||!t.field.isEqual(n.field)||!Vc(t.value,n.value))return!1;var t,n;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!vF(r.startAt,e.startAt)&&vF(r.endAt,e.endAt)}function yI(r){return Ft.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function _I(r,e){return r.filters.filter(t=>t instanceof eo&&t.field.isEqual(e))}function fF(r,e,t){let n=fI,i=!0;for(const s of _I(r,e)){let o=fI,l=!0;switch(s.op){case"<":case"<=":o=q4(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=fI}oF({value:n,inclusive:i},{value:o,inclusive:l})<0&&(n=o,i=l)}if(null!==t)for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const o=t.position[s];oF({value:n,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(n=o,i=t.inclusive);break}return{value:n,inclusive:i}}function pF(r,e,t){let n=mp,i=!0;for(const s of _I(r,e)){let o=mp,l=!0;switch(s.op){case">=":case">":o=z4(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=mp}aF({value:n,inclusive:i},{value:o,inclusive:l})>0&&(n=o,i=l)}if(null!==t)for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const o=t.position[s];aF({value:n,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(n=o,i=t.inclusive);break}return{value:n,inclusive:i}}class eo extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new Y4(e,t,n):"array-contains"===t?new J4(e,n):"in"===t?new eH(e,n):"not-in"===t?new tH(e,n):"array-contains-any"===t?new nH(e,n):new eo(e,t,n)}static V(e,t,n){return"in"===t?new Q4(e,n):new X4(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(vp(t,this.value)):null!==t&&am(this.value)===am(t)&&this.v(vp(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Y4 extends eo{constructor(e,t,n){super(e,t,n),this.key=Ft.fromName(n.referenceValue)}matches(e){const t=Ft.comparator(e.key,this.key);return this.v(t)}}class Q4 extends eo{constructor(e,t){super(e,"in",t),this.keys=gF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class X4 extends eo{constructor(e,t){super(e,"not-in",t),this.keys=gF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gF(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(n=>Ft.fromName(n.referenceValue))}class J4 extends eo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gE(t)&&pE(t.arrayValue,this.value)}}class eH extends eo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pE(this.value.arrayValue,t)}}class tH extends eo{constructor(e,t){super(e,"not-in",t)}matches(e){if(pE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pE(this.value.arrayValue,t)}}class nH extends eo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>pE(this.value.arrayValue,n))}}class yp{constructor(e,t){this.position=e,this.inclusive=t}}class u_{constructor(e,t="asc"){this.field=e,this.dir=t}}function rH(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}function mF(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],o=r.position[i];if(n=s.field.isKeyField()?Ft.comparator(Ft.fromName(o.referenceValue),t.key):vp(o,t.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function vF(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Vc(r.position[t],e.position[t]))return!1;return!0}class hh{constructor(e,t=null,n=[],i=[],s=null,o="F",l=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=f,this.D=null,this.C=null}}function yF(r,e,t,n,i,s,o,l){return new hh(r,e,t,n,i,s,o,l)}function l_(r){return new hh(r)}function xM(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function IM(r){for(const e of r.filters)if(e.S())return e.field;return null}function AM(r){return null!==r.collectionGroup}function c_(r){const e=Bt(r);if(null===e.D){e.D=[];const t=IM(e),n=xM(e);if(null!==t&&null===n)t.isKeyField()||e.D.push(new u_(t)),e.D.push(new u_(ls.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new u_(ls.keyField(),s))}}}return e.D}function tl(r){const e=Bt(r);if(!e.C)if("F"===e.limitType)e.C=hF(e.path,e.collectionGroup,c_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of c_(e))t.push(new u_(s.field,"desc"===s.dir?"asc":"desc"));const n=e.endAt?new yp(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new yp(e.startAt.position,e.startAt.inclusive):null;e.C=hF(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e.C}function _F(r,e,t){return new hh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function _E(r,e){return yE(tl(r),tl(e))&&r.limitType===e.limitType}function bF(r){return`${cm(tl(r))}|lt:${r.limitType}`}function DM(r){return`Query(target=${function Z4(r){let e=r.path.canonicalString();return null!==r.collectionGroup&&(e+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(e+=`, filters: [${r.filters.map(t=>{return`${(n=t).field.canonicalString()} ${n.op} ${o_(n.value)}`;var n}).join(", ")}]`),hE(r.limit)||(e+=", limit: "+r.limit),r.orderBy.length>0&&(e+=`, orderBy: [${r.orderBy.map(t=>{return`${(n=t).field.canonicalString()} (${n.dir})`;var n}).join(", ")}]`),r.startAt&&(e+=", startAt: ",e+=r.startAt.inclusive?"b:":"a:",e+=r.startAt.position.map(t=>o_(t)).join(",")),r.endAt&&(e+=", endAt: ",e+=r.endAt.inclusive?"a:":"b:",e+=r.endAt.position.map(t=>o_(t)).join(",")),`Target(${e})`}(tl(r))}; limitType=${r.limitType})`}function kM(r,e){return e.isFoundDocument()&&function(t,n){const i=n.key.path;return null!==t.collectionGroup?n.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ft.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(r,e)&&function(t,n){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===n.data.field(i.field))return!1;return!0}(r,e)&&function(t,n){for(const i of t.filters)if(!i.matches(n))return!1;return!0}(r,e)&&(n=e,!((t=r).startAt&&!function(i,s,o){const l=mF(i,s,o);return i.inclusive?l<=0:l<0}(t.startAt,c_(t),n)||t.endAt&&!function(i,s,o){const l=mF(i,s,o);return i.inclusive?l>=0:l>0}(t.endAt,c_(t),n)));var t,n}function TF(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function EF(r){return(e,t)=>{let n=!1;for(const i of c_(r)){const s=sH(i,e,t);if(0!==s)return s;n=n||i.field.isKeyField()}return 0}}function sH(r,e,t){const n=r.field.isKeyField()?Ft.comparator(e.key,t.key):function(i,s,o){const l=s.data.field(i),f=o.data.field(i);return null!==l&&null!==f?vp(l,f):Xt()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Xt()}}function wF(r,e){if(r.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fE(e)?"-0":e}}function SF(r){return{integerValue:""+r}}function CF(r,e){return tF(e)?SF(e):wF(r,e)}class bI{constructor(){this._=void 0}}function oH(r,e,t){return r instanceof d_?function(n,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):r instanceof dm?IF(r,e):r instanceof hm?AF(r,e):function(n,i){const s=xF(n,i),o=DF(s)+DF(n.k);return SM(s)&&SM(n.k)?SF(o):wF(n.M,o)}(r,e)}function aH(r,e,t){return r instanceof dm?IF(r,e):r instanceof hm?AF(r,e):t}function xF(r,e){return r instanceof h_?SM(t=e)||(n=t)&&"doubleValue"in n?e:{integerValue:0}:null;var n,t}class d_ extends bI{}class dm extends bI{constructor(e){super(),this.elements=e}}function IF(r,e){const t=kF(e);for(const n of r.elements)t.some(i=>Vc(i,n))||t.push(n);return{arrayValue:{values:t}}}class hm extends bI{constructor(e){super(),this.elements=e}}function AF(r,e){let t=kF(e);for(const n of r.elements)t=t.filter(i=>!Vc(i,n));return{arrayValue:{values:t}}}class h_ extends bI{constructor(e,t){super(),this.M=e,this.k=t}}function DF(r){return Ei(r.integerValue||r.doubleValue)}function kF(r){return gE(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class bE{constructor(e,t){this.field=e,this.transform=t}}class lH{constructor(e,t){this.version=e,this.transformResults=t}}class Wi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function TI(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class EI{}function cH(r,e,t){r instanceof TE?function(n,i,s){const o=n.value.clone(),l=RF(n.fieldTransforms,i,s.transformResults);o.setAll(l),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(r,e,t):r instanceof fm?function(n,i,s){if(!TI(n.precondition,i))return void i.convertToUnknownDocument(s.version);const o=RF(n.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(OF(n)),l.setAll(o),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function MM(r,e,t){var i;r instanceof TE?function(n,i,s){if(!TI(n.precondition,i))return;const o=n.value.clone(),l=NF(n.fieldTransforms,s,i);o.setAll(l),i.convertToFoundDocument(PF(i),o).setHasLocalMutations()}(r,e,t):r instanceof fm?function(n,i,s){if(!TI(n.precondition,i))return;const o=NF(n.fieldTransforms,s,i),l=i.data;l.setAll(OF(n)),l.setAll(o),i.convertToFoundDocument(PF(i),l).setHasLocalMutations()}(r,e,t):TI(r.precondition,i=e)&&i.convertToNoDocument(mn.min())}function dH(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=xF(n.transform,i||null);null!=s&&(null==t&&(t=ko.empty()),t.set(n.field,s))}return t||null}function MF(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(n=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===n||t&&n&&i_(t,n,(i,s)=>function uH(r,e){return r.field.isEqual(e.field)&&(n=e.transform,(t=r.transform)instanceof dm&&n instanceof dm||t instanceof hm&&n instanceof hm?i_(t.elements,n.elements,Vc):t instanceof h_&&n instanceof h_?Vc(t.k,n.k):t instanceof d_&&n instanceof d_);var t,n}(i,s))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,n}function PF(r){return r.isFoundDocument()?r.version:mn.min()}class TE extends EI{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}}class fm extends EI{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}}function OF(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function RF(r,e,t){const n=new Map;En(r.length===t.length);for(let i=0;i<t.length;i++){const s=r[i],o=s.transform,l=e.data.field(s.field);n.set(s.field,aH(o,l,t[i]))}return n}function NF(r,e,t){const n=new Map;for(const i of r){const s=i.transform,o=t.data.field(i.field);n.set(i.field,oH(s,o,e))}return n}class EE extends EI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class PM extends EI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class hH{constructor(e){this.count=e}}var Ki,$n;function LF(r){switch(r){default:return Xt();case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0}}function FF(r){if(void 0===r)return zi("GRPC error has no .code"),st.UNKNOWN;switch(r){case Ki.OK:return st.OK;case Ki.CANCELLED:return st.CANCELLED;case Ki.UNKNOWN:return st.UNKNOWN;case Ki.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case Ki.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case Ki.INTERNAL:return st.INTERNAL;case Ki.UNAVAILABLE:return st.UNAVAILABLE;case Ki.UNAUTHENTICATED:return st.UNAUTHENTICATED;case Ki.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case Ki.NOT_FOUND:return st.NOT_FOUND;case Ki.ALREADY_EXISTS:return st.ALREADY_EXISTS;case Ki.PERMISSION_DENIED:return st.PERMISSION_DENIED;case Ki.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case Ki.ABORTED:return st.ABORTED;case Ki.OUT_OF_RANGE:return st.OUT_OF_RANGE;case Ki.UNIMPLEMENTED:return st.UNIMPLEMENTED;case Ki.DATA_LOSS:return st.DATA_LOSS;default:return Xt()}}($n=Ki||(Ki={}))[$n.OK=0]="OK",$n[$n.CANCELLED=1]="CANCELLED",$n[$n.UNKNOWN=2]="UNKNOWN",$n[$n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$n[$n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$n[$n.NOT_FOUND=5]="NOT_FOUND",$n[$n.ALREADY_EXISTS=6]="ALREADY_EXISTS",$n[$n.PERMISSION_DENIED=7]="PERMISSION_DENIED",$n[$n.UNAUTHENTICATED=16]="UNAUTHENTICATED",$n[$n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$n[$n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$n[$n.ABORTED=10]="ABORTED",$n[$n.OUT_OF_RANGE=11]="OUT_OF_RANGE",$n[$n.UNIMPLEMENTED=12]="UNIMPLEMENTED",$n[$n.INTERNAL=13]="INTERNAL",$n[$n.UNAVAILABLE=14]="UNAVAILABLE",$n[$n.DATA_LOSS=15]="DATA_LOSS";class _p{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,s]of n)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sm(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return JL(this.inner)}size(){return this.innerSize}}const fH=new Oi(Ft.comparator);function nl(){return fH}const pH=new Oi(Ft.comparator);function OM(...r){let e=pH;for(const t of r)e=e.insert(t.key,t);return e}function wE(){return new _p(r=>r.toString(),(r,e)=>r.isEqual(e))}const gH=new Oi(Ft.comparator),mH=new Lr(Ft.comparator);function or(...r){let e=mH;for(const t of r)e=e.add(t);return e}const vH=new Lr(Mn);function wI(){return vH}class SE{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,CE.createSynthesizedTargetChangeForCurrentChange(e,t)),new SE(mn.min(),n,wI(),nl(),or())}}class CE{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new CE(cs.EMPTY_BYTE_STRING,t,or(),or(),or())}}class SI{constructor(e,t,n,i){this.O=e,this.removedTargetIds=t,this.key=n,this.F=i}}class jF{constructor(e,t){this.targetId=e,this.$=t}}class UF{constructor(e,t,n=cs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class BF{constructor(){this.B=0,this.L=HF(),this.U=cs.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=or(),t=or(),n=or();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Xt()}}),new CE(this.U,this.q,e,t,n)}J(){this.K=!1,this.L=HF()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class yH{constructor(e){this.nt=e,this.st=new Map,this.it=nl(),this.rt=VF(),this.ot=new Lr(Mn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:Xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((n,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,n=e.$.count,i=this.wt(t);if(i){const s=i.target;if(yI(s))if(0===n){const o=new Ft(s.path);this.ct(t,o,qr.newNoDocument(o,mn.min()))}else En(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,o)=>{const l=this.wt(o);if(l){if(s.current&&yI(l.target)){const f=new Ft(l.target.path);null!==this.it.get(f)||this.It(o,f)||this.ct(o,f,qr.newNoDocument(f,e))}s.j&&(t.set(o,s.H()),s.J())}});let n=or();this.rt.forEach((s,o)=>{let l=!0;o.forEachWhile(f=>{const g=this.wt(f);return!g||2===g.purpose||(l=!1,!1)}),l&&(n=n.add(s))}),this.it.forEach((s,o)=>o.setReadTime(e));const i=new SE(e,t,this.ot,this.it,n);return this.it=nl(),this.rt=VF(),this.ot=new Lr(Mn),i}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new BF,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Lr(Mn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||It("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new BF),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function VF(){return new Oi(Ft.comparator)}function HF(){return new Oi(Ft.comparator)}const _H={asc:"ASCENDING",desc:"DESCENDING"},bH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class TH{constructor(e,t){this.databaseId=e,this.N=t}}function xE(r,e){return r.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GF(r,e){return r.N?e.toBase64():e.toUint8Array()}function EH(r,e){return xE(r,e.toTimestamp())}function Ps(r){return En(!!r),mn.fromTimestamp(function(e){const t=gp(e);return new Pi(t.seconds,t.nanos)}(r))}function RM(r,e){return(t=r,new Gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $F(r){const e=Gn.fromString(r);return En(JF(e)),e}function IE(r,e){return RM(r.databaseId,e.path)}function Hc(r,e){const t=$F(e);if(t.get(1)!==r.databaseId.projectId)throw new Et(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Et(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ft(zF(t))}function NM(r,e){return RM(r.databaseId,e)}function qF(r){const e=$F(r);return 4===e.length?Gn.emptyPath():zF(e)}function AE(r){return new Gn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function zF(r){return En(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function WF(r,e,t){return{name:IE(r,e),fields:t.value.mapValue.fields}}function KF(r,e,t){const n=Hc(r,e.name),i=Ps(e.updateTime),s=new ko({mapValue:{fields:e.fields}}),o=qr.newFoundDocument(n,i,s);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function DE(r,e){let t;if(e instanceof TE)t={update:WF(r,e.key,e.value)};else if(e instanceof EE)t={delete:IE(r,e.key)};else if(e instanceof fm)t={update:WF(r,e.key,e.data),updateMask:MH(e.fieldMask)};else{if(!(e instanceof PM))return Xt();t={verify:IE(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(i,s){const o=s.transform;if(o instanceof d_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof dm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof hm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof h_)return{fieldPath:s.field.canonicalString(),increment:o.k};throw Xt()}(0,n))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:EH(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Xt()),t;var i}function LM(r,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Wi.updateTime(Ps(i.updateTime)):void 0!==i.exists?Wi.exists(i.exists):Wi.none():Wi.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let l=null;"setToServerValue"in o?(En("REQUEST_TIME"===o.setToServerValue),l=new d_):"appendMissingElements"in o?l=new dm(o.appendMissingElements.values||[]):"removeAllFromArray"in o?l=new hm(o.removeAllFromArray.values||[]):"increment"in o?l=new h_(s,o.increment):Xt();const f=ls.fromServerFormat(o.fieldPath);return new bE(f,l)}(r,i)):[];var i;if(e.update){const i=Hc(r,e.update.name),s=new ko({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new s_((e.updateMask.fieldPaths||[]).map(g=>ls.fromServerFormat(g)));return new fm(i,s,o,t,n)}return new TE(i,s,t,n)}if(e.delete){const i=Hc(r,e.delete);return new EE(i,t)}if(e.verify){const i=Hc(r,e.verify);return new PM(i,t)}return Xt()}function ZF(r,e){return{documents:[NM(r,e.path)]}}function YF(r,e){const t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(t.parent=NM(r,n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=NM(r,n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(f){if(0===f.length)return;const g=f.map(y=>function(T){if("=="===T.op){if(iF(T.value))return{unaryFilter:{field:f_(T.field),op:"IS_NAN"}};if(rF(T.value))return{unaryFilter:{field:f_(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(iF(T.value))return{unaryFilter:{field:f_(T.field),op:"IS_NOT_NAN"}};if(rF(T.value))return{unaryFilter:{field:f_(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:f_(T.field),op:AH(T.op),value:T.value}}}(y));return 1===g.length?g[0]:{compositeFilter:{op:"AND",filters:g}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(g=>{return{field:f_((y=g).field),direction:IH(y.dir)};var y})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(g=e.limit,r.N||hE(g)?g:{value:g});var g,l,f;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function QF(r){let e=qF(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){En(1===n);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];t.where&&(s=XF(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new u_(p_((T=y).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let l=null;t.limit&&(l=function(y){let T;return T="object"==typeof y?y.value:y,hE(T)?null:T}(t.limit));let f=null;var y;t.startAt&&(f=new yp((y=t.startAt).values||[],!!y.before));let g=null;return t.endAt&&(g=function(y){return new yp(y.values||[],!y.before)}(t.endAt)),yF(e,i,o,s,l,"F",f,g)}function XF(r){return r?void 0!==r.unaryFilter?[kH(r)]:void 0!==r.fieldFilter?[DH(r)]:void 0!==r.compositeFilter?r.compositeFilter.filters.map(e=>XF(e)).reduce((e,t)=>e.concat(t)):Xt():[]}function IH(r){return _H[r]}function AH(r){return bH[r]}function f_(r){return{fieldPath:r.canonicalString()}}function p_(r){return ls.fromServerFormat(r.fieldPath)}function DH(r){return eo.create(p_(r.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xt()}}(r.fieldFilter.op),r.fieldFilter.value)}function kH(r){switch(r.unaryFilter.op){case"IS_NAN":const e=p_(r.unaryFilter.field);return eo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=p_(r.unaryFilter.field);return eo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=p_(r.unaryFilter.field);return eo.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=p_(r.unaryFilter.field);return eo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xt()}}function MH(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function JF(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}function na(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ej(e)),e=PH(r.get(t),e);return ej(e)}function PH(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function ej(r){return r+"\x01\x01"}function Gc(r){const e=r.length;if(En(e>=2),2===e)return En("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Gn.emptyPath();const t=e-2,n=[];let i="";for(let s=0;s<e;){const o=r.indexOf("\x01",s);switch((o<0||o>t)&&Xt(),r.charAt(o+1)){case"\x01":const l=r.substring(s,o);let f;0===i.length?f=l:(i+=l,f=i,i=""),n.push(f);break;case"\x10":i+=r.substring(s,o),i+="\0";break;case"\x11":i+=r.substring(s,o+1);break;default:Xt()}s=o+2}return new Gn(n)}const tj=["userId","batchId"];function CI(r,e){return[r,na(e)]}function nj(r,e,t){return[r,na(e),t]}const OH={},RH=["prefixPath","collectionGroup","readTime","documentId"],NH=["prefixPath","collectionGroup","documentId"],LH=["collectionGroup","readTime","prefixPath","documentId"],FH=["canonicalId","targetId"],jH=["targetId","path"],UH=["path","targetId"],BH=["collectionId","parent"],VH=["indexId","uid"],HH=["uid","sequenceNumber"],GH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$H=["indexId","uid","orderedDocumentKey"],qH=["userId","collectionPath","documentId"],zH=["userId","collectionPath","largestBatchId"],WH=["userId","collectionGroup","largestBatchId"],rj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KH=[...rj,"documentOverlays"],ij=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZH=[...ij,"indexConfiguration","indexState","indexEntries"],sj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ut{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ut((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ut?t:ut.resolve(t)}catch(t){return ut.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ut.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ut.reject(t)}static resolve(e){return new ut((t,n)=>{t(e)})}static reject(e){return new ut((t,n)=>{n(e)})}static waitFor(e){return new ut((t,n)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&t()},f=>n(f))}),o=!0,s===i&&t()})}static or(e){let t=ut.resolve(!1);for(const n of e)t=t.next(i=>i?ut.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}}class xI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ms,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new kE(e,t.error)):this.At.resolve()},this.transaction.onerror=n=>{const i=FM(n.target.error);this.At.reject(new kE(e,i))}}static open(e,t,n,i){try{return new xI(t,e.transaction(i,n))}catch(s){throw new kE(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(It("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QH(t)}}class Ul{constructor(e,t,n){this.name=e,this.version=t,this.Pt=n,12.2===Ul.Vt((0,vn.z$)())&&zi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return It("SimpleDb","Removing database:",e),gm(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,vn.hl)())return!1;if(Ul.St())return!0;const e=(0,vn.z$)(),t=Ul.Vt(e),n=0<t&&t<10,i=Ul.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Nt(e){var t=this;return(0,nt.Z)(function*(){return t.db||(It("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{n(o.target.result)},s.onblocked=()=>{i(new kE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;i("VersionError"===l.name?new Et(st.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===l.name?new Et(st.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l):new kE(e,l))},s.onupgradeneeded=o=>{It("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.Pt.kt(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{It("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=n=>t.Mt(n)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,i){var s=this;return(0,nt.Z)(function*(){const o="readonly"===t;let l=0;for(;;){++l;try{s.db=yield s.Nt(e);const f=xI.open(s.db,e,o?"readonly":"readwrite",n),g=i(f).next(y=>(f.bt(),y)).catch(y=>(f.abort(y),ut.reject(y))).toPromise();return g.catch(()=>{}),yield f.Rt,g}catch(f){const g="FirebaseError"!==f.name&&l<3;if(It("SimpleDb","Transaction failed with error:",f.message,"Retrying:",g),s.close(),!g)return Promise.reject(f)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class YH{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return gm(this.Ft.delete())}}class kE extends Et{constructor(e,t){super(st.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pm(r){return"IndexedDbTransactionError"===r.name}class QH{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(It("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(It("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),gm(n)}add(e){return It("SimpleDb","ADD",this.store.name,e,e),gm(this.store.add(e))}get(e){return gm(this.store.get(e)).next(t=>(void 0===t&&(t=null),It("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return It("SimpleDb","DELETE",this.store.name,e),gm(this.store.delete(e))}count(){return It("SimpleDb","COUNT",this.store.name),gm(this.store.count())}qt(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const i=this.cursor(n),s=[];return this.Kt(i,(o,l)=>{s.push(l)}).next(()=>s)}{const i=this.store.getAll(n.range);return new ut((s,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{s(l.target.result)}})}}Gt(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ut((i,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{i(o.target.result)}})}Qt(e,t){It("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.jt=!1;const i=this.cursor(n);return this.Kt(i,(s,o,l)=>l.delete())}Wt(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new ut((n,i)=>{t.onerror=s=>{const o=FM(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}Kt(e,t){const n=[];return new ut((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const f=new YH(l),g=t(l.primaryKey,l.value,f);if(g instanceof ut){const y=g.catch(T=>(f.done(),ut.reject(T)));n.push(y)}f.isDone?i():null===f.Lt?l.continue():l.continue(f.Lt)}}).next(()=>ut.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gm(r){return new ut((e,t)=>{r.onsuccess=n=>{e(n.target.result)},r.onerror=n=>{const i=FM(n.target.error);t(i)}})}let aj=!1;function FM(r){const e=Ul.Vt((0,vn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aj||(aj=!0,setTimeout(()=>{throw n},0)),n}}return r}class uj extends oj{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Os(r,e){const t=Bt(r);return Ul.xt(t.Ht,e)}class jM{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cH(s,e,n[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&MM(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&MM(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(mn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),or())}isEqual(e){return this.batchId===e.batchId&&i_(this.mutations,e.mutations,(t,n)=>MF(t,n))&&i_(this.baseMutations,e.baseMutations,(t,n)=>MF(t,n))}}class UM{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){En(e.mutations.length===n.length);let i=gH;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,n[o].version);return new UM(e,t,n,i)}}class BM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bp{constructor(e,t,n,i,s=mn.min(),o=mn.min(),l=cs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l}withSequenceNumber(e){return new bp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new bp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new bp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lj{constructor(e){this.Jt=e}}function cj(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:II(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document={name:IE(i=r.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:xE(i,s.version.toTimestamp())};else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:mm(e.version)};else{if(!e.isUnknownDocument())return Xt();n.unknownDocument={path:t.path.toArray(),version:mm(e.version)}}var i,s;return n}function II(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function mm(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vm(r){const e=new Pi(r.seconds,r.nanoseconds);return mn.fromTimestamp(e)}function g_(r,e){const t=(e.baseMutations||[]).map(s=>LM(r.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const n=e.mutations.map(s=>LM(r.Jt,s)),i=Pi.fromMillis(e.localWriteTimeMs);return new jM(e.batchId,i,t,n)}function ME(r){const e=vm(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?vm(r.lastLimboFreeSnapshotVersion):mn.min();let n;var i;return void 0!==r.query.documents?(En(1===(i=r.query).documents.length),n=tl(l_(qF(i.documents[0])))):n=tl(QF(r.query)),new bp(n,r.targetId,0,r.lastListenSequenceNumber,e,t,cs.fromBase64String(r.resumeToken))}function dj(r,e){const t=mm(e.snapshotVersion),n=mm(e.lastLimboFreeSnapshotVersion);let i;i=yI(e.target)?ZF(r.Jt,e.target):YF(r.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cm(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function VM(r){const e=QF({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?_F(e,e.limit,"L"):e}function HM(r,e){return new BM(e.largestBatchId,LM(r.Jt,e.overlayMutation))}function hj(r,e){const t=e.path.lastSegment();return[r,na(e.path.popLast()),t]}class JH{getBundleMetadata(e,t){return fj(e).get(t).next(n=>{if(n)return{id:(i=n).bundleId,createTime:vm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return fj(e).put({bundleId:(n=t).id,createTime:mm(Ps(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return pj(e).get(t).next(n=>{if(n)return{name:(i=n).name,query:VM(i.bundledQuery),readTime:vm(i.readTime)};var i})}saveNamedQuery(e,t){return pj(e).put({name:(n=t).name,readTime:mm(Ps(n.readTime)),bundledQuery:n.bundledQuery});var n}}function fj(r){return Os(r,"bundles")}function pj(r){return Os(r,"namedQueries")}class GM{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new GM(e,t.uid||"")}getOverlay(e,t){return PE(e).get(hj(this.userId,t)).next(n=>n?HM(this.M,n):null)}saveOverlays(e,t,n){const i=[];return n.forEach((s,o)=>{const l=new BM(t,o);i.push(this.Xt(e,l))}),ut.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach(o=>i.add(na(o.getCollectionPath())));const s=[];return i.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(PE(e).Qt("collectionPathOverlayIndex",l))}),ut.waitFor(s)}getOverlaysForCollection(e,t,n){const i=wE(),s=na(t),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return PE(e).qt("collectionPathOverlayIndex",o).next(l=>{for(const f of l){const g=HM(this.M,f);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,n,i){const s=wE();let o;const l=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return PE(e).Wt({index:"collectionGroupOverlayIndex",range:l},(f,g,y)=>{const T=HM(this.M,g);s.size()<i||T.largestBatchId===o?(s.set(T.getKey(),T),o=T.largestBatchId):y.done()}).next(()=>s)}Xt(e,t){return PE(e).put(function(n,i,s){const[o,l,f]=hj(i,s.mutation.key);return{userId:i,collectionPath:l,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:DE(n.Jt,s.mutation)}}(this.M,this.userId,t))}}function PE(r){return Os(r,"documentOverlays")}class ym{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ei(e.integerValue));else if("doubleValue"in e){const n=Ei(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),fE(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(om(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?sF(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const i of Object.keys(n))this.re(i,t),this.te(n[i],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const i of n)this.te(i,t)}ae(e,t){this.ne(t,37),Ft.fromName(e).path.forEach(n=>{this.ne(t,60),this.le(n,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function e6(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function gj(r){const e=64-function(t){let n=0;for(let i=0;i<8;++i){const s=e6(255&t[i]);if(n+=s,8!==s)break}return n}(r);return Math.ceil(e/8)}ym.fe=new ym;class t6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this._e(n.value),n=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.ge(n.value),n=t.next();this.ye()}pe(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this._e(n);else if(n<2048)this._e(960|n>>>6),this._e(128|63&n);else if(t<"\ud800"||"\udbff"<t)this._e(480|n>>>12),this._e(128|63&n>>>6),this._e(128|63&n);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.ge(n);else if(n<2048)this.ge(960|n>>>6),this.ge(128|63&n);else if(t<"\ud800"||"\udbff"<t)this.ge(480|n>>>12),this.ge(128|63&n>>>6),this.ge(128|63&n);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),n=gj(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),n=gj(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class n6{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class r6{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class OE{constructor(){this.De=new t6,this.Ce=new n6(this.De),this.xe=new r6(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class _m{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new _m(this.indexId,this.documentKey,this.arrayValue,n)}}function bm(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=mj(r.arrayValue,e.arrayValue),0!==t?t:(t=mj(r.directionalValue,e.directionalValue),0!==t?t:Ft.comparator(r.documentKey,e.documentKey)))}function mj(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(0!==n)return n}return r.length-e.length}class i6{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const n=t;n.S()?this.Fe=n:this.Oe.push(n)}}$e(e){const t=CM(e);if(void 0!==t&&!this.Be(t))return!1;const n=lm(e);let i=0,s=0;for(;i<n.length&&this.Be(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Fe){const o=n[i];if(!this.Le(this.Fe,o)||!this.Ue(this.Me[s++],o))return!1;++i}for(;i<n.length;++i){const o=n[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],o))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class s6{constructor(){this.qe=new $M}addToCollectionParentIndex(e,t){return this.qe.add(t),ut.resolve()}getCollectionParents(e,t){return ut.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ut.resolve()}deleteFieldIndex(e,t){return ut.resolve()}getDocumentsMatchingTarget(e,t){return ut.resolve(null)}getIndexType(e,t){return ut.resolve(0)}getFieldIndexes(e,t){return ut.resolve([])}getNextCollectionGroupToUpdate(e){return ut.resolve(null)}getMinOffset(e,t){return ut.resolve(jl.min())}updateCollectionGroup(e,t,n){return ut.resolve()}updateIndexEntries(e,t){return ut.resolve()}}class $M{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Lr(Gn.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Lr(Gn.comparator)).toArray()}}const AI=new Uint8Array(0);class o6{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new $M,this.Ge=new _p(n=>cm(n),(n,i)=>yE(n,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const s={collectionId:n,parent:na(i)};return vj(e).put(s)}return ut.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[QL(t),""],!1,!0);return vj(e).qt(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;n.push(Gc(o.parent))}return n})}addFieldIndex(e,t){const n=DI(e),i={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])};var s;return delete i.indexId,n.add(i).next()}deleteFieldIndex(e,t){const n=DI(e),i=kI(e),s=RE(e);return n.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=RE(e);let i=!0;const s=new Map;return ut.forEach(this.Qe(t),o=>this.je(e,o).next(l=>{i&&(i=!!l),s.set(o,l)})).next(()=>{if(i){let o=or();const l=[];return ut.forEach(s,(f,g)=>{var y;It("IndexedDbIndexManager",`Using index ${y=f,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${cm(t)}`);const T=function(et,Me){const je=CM(Me);if(void 0===je)return null;for(const ze of _I(et,je.fieldPath))switch(ze.op){case"array-contains-any":return ze.value.arrayValue.values||[];case"array-contains":return[ze.value]}return null}(g,f),S=function(et,Me){const je=new Map;for(const ze of lm(Me))for(const Be of _I(et,ze.fieldPath))switch(Be.op){case"==":case"in":je.set(ze.fieldPath.canonicalString(),Be.value);break;case"not-in":case"!=":return je.set(ze.fieldPath.canonicalString(),Be.value),Array.from(je.values())}return null}(g,f),M=function(et,Me){const je=[];let ze=!0;for(const Be of lm(Me)){const tt=0===Be.kind?fF(et,Be.fieldPath,et.startAt):pF(et,Be.fieldPath,et.startAt);je.push(tt.value),ze&&(ze=tt.inclusive)}return new yp(je,ze)}(g,f),L=function(et,Me){const je=[];let ze=!0;for(const Be of lm(Me)){const tt=0===Be.kind?pF(et,Be.fieldPath,et.endAt):fF(et,Be.fieldPath,et.endAt);je.push(tt.value),ze&&(ze=tt.inclusive)}return new yp(je,ze)}(g,f),H=this.We(f,g,M),$=this.We(f,g,L),De=this.ze(f,g,S),We=this.He(f.indexId,T,H,M.inclusive,$,L.inclusive,De);return ut.forEach(We,et=>n.Gt(et,t.limit).next(Me=>{Me.forEach(je=>{const ze=Ft.fromSegments(je.documentKey);o.has(ze)||(o=o.add(ze),l.push(ze))})}))}).next(()=>l)}return ut.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,n,i,s,o,l){const f=(null!=t?t.length:1)*Math.max(n.length,s.length),g=f/(null!=t?t.length:1),y=[];for(let T=0;T<f;++T){const S=t?this.Je(t[T/g]):AI,M=this.Ye(e,S,n[T%g],i),L=this.Xe(e,S,s[T%g],o),H=l.map($=>this.Ye(e,S,$,!0));y.push(...this.createRange(M,L,H))}return y}Ye(e,t,n,i){const s=new _m(e,Ft.empty(),t,n);return i?s:s.ke()}Xe(e,t,n,i){const s=new _m(e,Ft.empty(),t,n);return i?s.ke():s}je(e,t){const n=new i6(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const l of s)n.$e(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,t){let n=2;return ut.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?0!==n&&s.fields.length<function(o){let l=new Lr(ls.comparator),f=!1;for(const g of o.filters){const y=g;y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:l=l.add(y.field))}for(const g of o.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(f?1:0)}(i)&&(n=1):n=0})).next(()=>n)}Ze(e,t){const n=new OE;for(const i of lm(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=n.Ne(i.kind);ym.fe.Zt(s,o)}return n.Se()}Je(e){const t=new OE;return ym.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const n=new OE;return ym.fe.Zt(um(this.databaseId,t),n.Ne(function(i){const s=lm(i);return 0===s.length?0:s[s.length-1].kind}(e))),n.Se()}ze(e,t,n){if(null===n)return[];let i=[];i.push(new OE);let s=0;for(const o of lm(e)){const l=n[s++];for(const f of i)if(this.en(t,o.fieldPath)&&gE(l))i=this.nn(i,o,l);else{const g=f.Ne(o.kind);ym.fe.Zt(l,g)}}return this.sn(i)}We(e,t,n){return this.ze(e,t,n.position)}sn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Se();return t}nn(e,t,n){const i=[...e],s=[];for(const o of n.arrayValue.values||[])for(const l of i){const f=new OE;f.seed(l.Se()),ym.fe.Zt(o,f.Ne(t.kind)),s.push(f)}return s}en(e,t){return!!e.filters.find(n=>n instanceof eo&&n.field.isEqual(t)&&("in"===n.op||"not-in"===n.op))}getFieldIndexes(e,t){const n=DI(e),i=kI(e);return(t?n.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.qt()).next(s=>{const o=[];return ut.forEach(s,l=>i.get([l.indexId,this.uid]).next(f=>{o.push(function(g,y){const T=y?new vE(y.sequenceNumber,new jl(vm(y.readTime),new Ft(Gc(y.documentKey)),y.largestBatchId)):vE.empty(),S=g.fields.map(([M,L])=>new mI(ls.fromServerFormat(M),L));return new gI(g.indexId,g.collectionGroup,S,T)}(l,f))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Mn(n.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const i=DI(e),s=kI(e);return this.rn(e).next(o=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(l=>ut.forEach(l,f=>{return s.put({indexId:f.indexId,uid:this.user.uid||"",sequenceNumber:o,readTime:mm((S=n).readTime),documentKey:na(S.documentKey.path),largestBatchId:S.largestBatchId});var S})))}updateIndexEntries(e,t){const n=new Map;return ut.forEach(t,(i,s)=>{const o=n.get(i.collectionGroup);return(o?ut.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(n.set(i.collectionGroup,l),ut.forEach(l,f=>this.on(e,i,f).next(g=>{const y=this.un(s,f);return g.isEqual(y)?ut.resolve():this.an(e,s,f,g,y)}))))})}cn(e,t,n,i){return RE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}hn(e,t,n,i){return RE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}on(e,t,n){const i=RE(e);let s=new Lr(bm);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(o,l)=>{s=s.add(new _m(n.indexId,t,l.arrayValue,l.directionalValue))}).next(()=>s)}un(e,t){let n=new Lr(bm);const i=this.Ze(t,e);if(null==i)return n;const s=CM(t);if(null!=s){const o=e.data.field(s.fieldPath);if(gE(o))for(const l of o.arrayValue.values||[])n=n.add(new _m(t.indexId,e.key,this.Je(l),i))}else n=n.add(new _m(t.indexId,e.key,AI,i));return n}an(e,t,n,i,s){It("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,f,g,y,T){const S=l.getIterator(),M=f.getIterator();let L=a_(S),H=a_(M);for(;L||H;){let $=!1,De=!1;if(L&&H){const We=g(L,H);We<0?De=!0:We>0&&($=!0)}else null!=L?De=!0:$=!0;$?(y(H),H=a_(M)):De?(T(L),L=a_(S)):(L=a_(S),H=a_(M))}}(i,s,bm,l=>{o.push(this.cn(e,t,n,l))},l=>{o.push(this.hn(e,t,n,l))}),ut.waitFor(o)}rn(e){let t=1;return kI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((o,l)=>bm(o,l)).filter((o,l,f)=>!l||0!==bm(o,f[l-1]));const i=[];i.push(e);for(const o of n){const l=bm(o,e),f=bm(o,t);if(0===l)i[0]=e.ke();else if(l>0&&f<0)i.push(o),i.push(o.ke());else if(f>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2)s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,AI,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,AI,[]]));return s}getMinOffset(e,t){let n;return ut.forEach(this.Qe(t),i=>this.je(e,i).next(s=>{s?(!n||cF(s.indexState.offset,n)<0)&&(n=s.indexState.offset):n=jl.min()})).next(()=>n)}}function vj(r){return Os(r,"collectionParents")}function RE(r){return Os(r,"indexEntries")}function DI(r){return Os(r,"indexConfiguration")}function kI(r){return Os(r,"indexState")}const yj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ja{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ja(e,ja.DEFAULT_COLLECTION_PERCENTILE,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _j(r,e,t){const n=r.store("mutations"),i=r.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let l=0;const f=n.Wt({range:o},(y,T,S)=>(l++,S.delete()));s.push(f.next(()=>{En(1===l)}));const g=[];for(const y of t.mutations){const T=nj(e,y.key.path,t.batchId);s.push(i.delete(T)),g.push(y.key)}return ut.waitFor(s).next(()=>g)}function MI(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Xt();e=r.noDocument}return JSON.stringify(e).length}ja.DEFAULT_COLLECTION_PERCENTILE=10,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ja.DEFAULT=new ja(41943040,ja.DEFAULT_COLLECTION_PERCENTILE,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ja.DISABLED=new ja(-1,0,0);class qM{constructor(e,t,n,i){this.userId=e,this.M=t,this.indexManager=n,this.referenceDelegate=i,this.ln={}}static Yt(e,t,n,i){En(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new qM(s,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tp(e).Wt({index:"userMutationsIndex",range:n},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,n,i){const s=m_(e),o=Tp(e);return o.add({}).next(l=>{En("number"==typeof l);const f=new jM(l,t,n,i),g=function(S,M,L){const H=L.baseMutations.map(De=>DE(S.Jt,De)),$=L.mutations.map(De=>DE(S.Jt,De));return{userId:M,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:H,mutations:$}}(this.M,this.userId,f),y=[];let T=new Lr((S,M)=>Mn(S.canonicalString(),M.canonicalString()));for(const S of i){const M=nj(this.userId,S.key.path,l);T=T.add(S.key.path.popLast()),y.push(o.put(g)),y.push(s.put(M,OH))}return T.forEach(S=>{y.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.ln[l]=f.keys()}),ut.waitFor(y).next(()=>f)})}lookupMutationBatch(e,t){return Tp(e).get(t).next(n=>n?(En(n.userId===this.userId),g_(this.M,n)):null)}fn(e,t){return this.ln[t]?ut.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const i=n.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Tp(e).Wt({index:"userMutationsIndex",range:i},(o,l,f)=>{l.userId===this.userId&&(En(l.batchId>=n),s=g_(this.M,l)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Tp(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tp(e).qt("userMutationsIndex",t).next(n=>n.map(i=>g_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=CI(this.userId,t.path),i=IDBKeyRange.lowerBound(n),s=[];return m_(e).Wt({range:i},(o,l,f)=>{const[g,y,T]=o,S=Gc(y);if(g===this.userId&&t.path.isEqual(S))return Tp(e).get(T).next(M=>{if(!M)throw Xt();En(M.userId===this.userId),s.push(g_(this.M,M))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lr(Mn);const i=[];return t.forEach(s=>{const o=CI(this.userId,s.path),l=IDBKeyRange.lowerBound(o),f=m_(e).Wt({range:l},(g,y,T)=>{const[S,M,L]=g,H=Gc(M);S===this.userId&&s.path.isEqual(H)?n=n.add(L):T.done()});i.push(f)}),ut.waitFor(i).next(()=>this.dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,s=CI(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new Lr(Mn);return m_(e).Wt({range:o},(f,g,y)=>{const[T,S,M]=f,L=Gc(S);T===this.userId&&n.isPrefixOf(L)?L.length===i&&(l=l.add(M)):y.done()}).next(()=>this.dn(e,l))}dn(e,t){const n=[],i=[];return t.forEach(s=>{i.push(Tp(e).get(s).next(o=>{if(null===o)throw Xt();En(o.userId===this.userId),n.push(g_(this.M,o))}))}),ut.waitFor(i).next(()=>n)}removeMutationBatch(e,t){return _j(e.Ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ut.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ut.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return m_(e).Wt({range:n},(s,o,l)=>{if(s[0]===this.userId){const f=Gc(s[1]);i.push(f)}else l.done()}).next(()=>{En(0===i.length)})})}containsKey(e,t){return bj(e,this.userId,t)}wn(e){return Tj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bj(r,e,t){const n=CI(e,t.path),i=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return m_(r).Wt({range:s,jt:!0},(l,f,g)=>{const[y,T,S]=l;y===e&&T===i&&(o=!0),g.done()}).next(()=>o)}function Tp(r){return Os(r,"mutations")}function m_(r){return Os(r,"documentMutations")}function Tj(r){return Os(r,"mutationQueues")}class Tm{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Tm(0)}static yn(){return new Tm(-1)}}class a6{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const n=new Tm(t.highestTargetId);return t.highestTargetId=n.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>mn.fromTimestamp(new Pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(n=>(n.targetCount+=1,this.En(t,n),this.In(e,n))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>v_(e).delete(t.targetId)).next(()=>this.pn(e)).next(n=>(En(n.targetCount>0),n.targetCount-=1,this.In(e,n)))}removeTargets(e,t,n){let i=0;const s=[];return v_(e).Wt((o,l)=>{const f=ME(l);f.sequenceNumber<=t&&null===n.get(f.targetId)&&(i++,s.push(this.removeTargetData(e,f)))}).next(()=>ut.waitFor(s)).next(()=>i)}forEachTarget(e,t){return v_(e).Wt((n,i)=>{const s=ME(i);t(s)})}pn(e){return Ej(e).get("targetGlobalKey").next(t=>(En(null!==t),t))}In(e,t){return Ej(e).put("targetGlobalKey",t)}Tn(e,t){return v_(e).put(dj(this.M,t))}En(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const n=cm(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return v_(e).Wt({range:i,index:"queryTargetsIndex"},(o,l,f)=>{const g=ME(l);yE(t,g.target)&&(s=g,f.done())}).next(()=>s)}addMatchingKeys(e,t,n){const i=[],s=Ep(e);return t.forEach(o=>{const l=na(o.path);i.push(s.put({targetId:n,path:l})),i.push(this.referenceDelegate.addReference(e,n,o))}),ut.waitFor(i)}removeMatchingKeys(e,t,n){const i=Ep(e);return ut.forEach(t,s=>{const o=na(s.path);return ut.waitFor([i.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,t){const n=Ep(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ep(e);let s=or();return i.Wt({range:n,jt:!0},(o,l,f)=>{const g=Gc(o[1]),y=new Ft(g);s=s.add(y)}).next(()=>s)}containsKey(e,t){const n=na(t.path),i=IDBKeyRange.bound([n],[QL(n)],!1,!0);let s=0;return Ep(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([o,l],f,g)=>{0!==o&&(s++,g.done())}).next(()=>s>0)}Et(e,t){return v_(e).get(t).next(n=>n?ME(n):null)}}function v_(r){return Os(r,"targets")}function Ej(r){return Os(r,"targetGlobal")}function Ep(r){return Os(r,"targetDocuments")}function Em(r){return zM.apply(this,arguments)}function zM(){return zM=(0,nt.Z)(function*(r){if(r.code!==st.FAILED_PRECONDITION||r.message!==sj)throw r;It("LocalStore","Unexpectedly lost primary lease")}),zM.apply(this,arguments)}function wj([r,e],[t,n]){const i=Mn(r,t);return 0===i?Mn(e,n):i}class u6{constructor(e){this.An=e,this.buffer=new Lr(wj),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();wj(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class l6{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const n=this.Vn?3e5:6e4;It("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,nt.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){pm(i)?It("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Em(i)}yield t.Sn(e)}))}}class c6{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(0===t)return ut.resolve(vu.A);const n=new u6(t);return this.Dn.forEachTarget(e,i=>n.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>n.Pn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Dn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector","Garbage collection skipped; disabled"),ut.resolve(yj)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yj):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let n,i,s,o,l,f,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,o=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(n=T,l=Date.now(),this.removeTargets(e,n,t))).next(T=>(s=T,f=Date.now(),this.removeOrphanedDocuments(e,n))).next(T=>(g=Date.now(),bM()<=el.in.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-y}ms\n\tDetermined least recently used ${i} in `+(l-o)+`ms\n\tRemoved ${s} targets in `+(f-l)+`ms\n\tRemoved ${T} documents in `+(g-f)+`ms\nTotal Duration: ${g-y}ms`),ut.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:T})))}}class d6{constructor(e,t){this.db=e,this.garbageCollector=new c6(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}kn(e){let t=0;return this.xn(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(n,i)=>t(i))}addReference(e,t,n){return PI(e,n)}removeReference(e,t,n){return PI(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return PI(e,t)}On(e,t){return function(n,i){let s=!1;return Tj(n).zt(o=>bj(n,o,i).next(l=>(l&&(s=!0),ut.resolve(!l)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Mn(e,(o,l)=>{if(l<=t){const f=this.On(e,o).next(g=>{if(!g)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,mn.min()),Ep(e).delete([0,na(o.path)])))});i.push(f)}}).next(()=>ut.waitFor(i)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return PI(e,t)}Mn(e,t){const n=Ep(e);let i,s=vu.A;return n.Wt({index:"documentTargetsIndex"},([o,l],{path:f,sequenceNumber:g})=>{0===o?(s!==vu.A&&t(new Ft(Gc(i)),s),s=g,i=f):s=vu.A}).next(()=>{s!==vu.A&&t(new Ft(Gc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PI(r,e){return Ep(r).put((n=r.currentSequenceNumber,{targetId:0,path:na(e.path),sequenceNumber:n}));var n}class Sj{constructor(){this.changes=new _p(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ut.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class h6{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return wm(e).put(n)}removeEntry(e,t,n){return wm(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],II(s),o[o.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Fn(e,n)))}getEntry(e,t){let n=qr.newInvalidDocument(t);return wm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(NE(t))},(i,s)=>{n=this.$n(t,s)}).next(()=>n)}Bn(e,t){let n={size:0,document:qr.newInvalidDocument(t)};return wm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(NE(t))},(i,s)=>{n={document:this.$n(t,s),size:MI(s)}}).next(()=>n)}getEntries(e,t){let n=nl();return this.Ln(e,t,(i,s)=>{const o=this.$n(i,s);n=n.insert(i,o)}).next(()=>n)}Un(e,t){let n=nl(),i=new Oi(Ft.comparator);return this.Ln(e,t,(s,o)=>{const l=this.$n(s,o);n=n.insert(s,l),i=i.insert(s,MI(o))}).next(()=>({documents:n,qn:i}))}Ln(e,t,n){if(t.isEmpty())return ut.resolve();let i=new Lr(Ij);t.forEach(f=>i=i.add(f));const s=IDBKeyRange.bound(NE(i.first()),NE(i.last())),o=i.getIterator();let l=o.getNext();return wm(e).Wt({index:"documentKeyIndex",range:s},(f,g,y)=>{const T=Ft.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;l&&Ij(l,T)<0;)n(l,null),l=o.getNext();l&&l.isEqual(T)&&(n(l,g),l=o.hasNext()?o.getNext():null),l?y.Ut(NE(l)):y.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getAllFromCollection(e,t,n){const i=[t.popLast().toArray(),t.lastSegment(),II(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wm(e).qt(IDBKeyRange.bound(i,s,!0)).next(o=>{let l=nl();for(const f of o){const g=this.$n(Ft.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);l=l.insert(g.key,g)}return l})}getAllFromCollectionGroup(e,t,n,i){let s=nl();const o=xj(t,n),l=xj(t,jl.max());return wm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(f,g,y)=>{const T=this.$n(Ft.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);s=s.insert(T.key,T),s.size===i&&y.done()}).next(()=>s)}newChangeBuffer(e){return new f6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Cj(e).get("remoteDocumentGlobalKey").next(t=>(En(!!t),t))}Fn(e,t){return Cj(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const n=function XH(r,e){let t;if(e.document)t=KF(r.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Ft.fromSegments(e.noDocument.path),i=vm(e.noDocument.readTime);t=qr.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xt();{const n=Ft.fromSegments(e.unknownDocument.path),i=vm(e.unknownDocument.version);t=qr.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime(function(n){const i=new Pi(n[0],n[1]);return mn.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(mn.min()))return n}return qr.newInvalidDocument(e)}}class f6 extends Sj{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new _p(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const t=[];let n=0,i=new Lr((s,o)=>Mn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.Gn.get(s);if(t.push(this.Kn.removeEntry(e,s,l.readTime)),o.isValidDocument()){const f=cj(this.Kn.M,o);i=i.add(s.path.popLast()),n+=MI(f)-l.size,t.push(this.Kn.addEntry(e,s,f))}else if(n-=l.size,this.trackRemovals){const f=cj(this.Kn.M,o.convertToNoDocument(mn.min()));t.push(this.Kn.addEntry(e,s,f))}}),i.forEach(s=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Kn.updateMetadata(e,n)),ut.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(n=>(this.Gn.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:n,qn:i})=>(i.forEach((s,o)=>{this.Gn.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function Cj(r){return Os(r,"remoteDocumentGlobal")}function wm(r){return Os(r,"remoteDocumentsV14")}function NE(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xj(r,e){const t=e.documentKey.path.toArray();return[r,II(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ij(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<n.length-2;++s)if(i=Mn(t[s],n[s]),i)return i;return i=Mn(t.length,n.length),i||(i=Mn(t[t.length-2],n[n.length-2]),i||Mn(t[t.length-1],n[n.length-1]))}class p6{constructor(e){this.M=e}kt(e,t,n,i){const s=new xI("createOrUpgrade",t);var l;n<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tj,{unique:!0}),l.createObjectStore("documentMutations"),Aj(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=ut.resolve();return n<3&&i>=3&&(0!==n&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Aj(e)),o=o.next(()=>function(l){const f=l.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mn.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",g)}(s))),n<4&&i>=4&&(0!==n&&(o=o.next(()=>function(l,f){return f.store("mutations").qt().next(g=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tj,{unique:!0});const y=f.store("mutations"),T=g.map(S=>y.put(S));return ut.waitFor(T)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&i>=5&&(o=o.next(()=>this.Qn(s))),n<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.jn(s)))),n<7&&i>=7&&(o=o.next(()=>this.Wn(s))),n<8&&i>=8&&(o=o.next(()=>this.zn(e,s))),n<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&i>=10&&(o=o.next(()=>this.Hn(s))),n<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&i>=12&&(o=o.next(()=>{!function(l){const f=l.createObjectStore("documentOverlays",{keyPath:qH});f.createIndex("collectionPathOverlayIndex",zH,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",WH,{unique:!1})}(e)})),n<13&&i>=13&&(o=o.next(()=>function(l){const f=l.createObjectStore("remoteDocumentsV14",{keyPath:RH});f.createIndex("documentKeyIndex",NH),f.createIndex("collectionGroupIndex",LH)}(e)).next(()=>this.Jn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&i>=14&&(o=o.next(()=>{!function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:VH}).createIndex("sequenceNumberIndex",HH,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:GH}).createIndex("documentKeyIndex",$H,{unique:!1})}(e)})),o}jn(e){let t=0;return e.store("remoteDocuments").Wt((n,i)=>{t+=MI(i)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Qn(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.qt().next(i=>ut.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",o).next(l=>ut.forEach(l,f=>{En(f.userId===s.userId);const g=g_(this.M,f);return _j(e,s.userId,g).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return n.Wt((o,l)=>{const f=new Gn(o),g=[0,na(f)];s.push(t.get(g).next(y=>y?ut.resolve():t.put({targetId:0,path:na(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ut.waitFor(s))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:BH});const n=t.store("collectionParents"),i=new $M,s=o=>{if(i.add(o)){const l=o.lastSegment(),f=o.popLast();return n.put({collectionId:l,parent:na(f)})}};return t.store("remoteDocuments").Wt({jt:!0},(o,l)=>{const f=new Gn(o);return s(f.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([o,l,f],g)=>{const y=Gc(l);return s(y.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((n,i)=>{const s=ME(i),o=dj(this.M,s);return t.put(o)})}Jn(e,t){const n=t.store("remoteDocuments"),i=[];return n.Wt((s,o)=>{const l=t.store("remoteDocumentsV14"),f=(g=o,g.document?new Ft(Gn.fromString(g.document.name).popFirst(5)):g.noDocument?Ft.fromSegments(g.noDocument.path):g.unknownDocument?Ft.fromSegments(g.unknownDocument.path):Xt()).path.toArray();var g;const y={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(y))}).next(()=>ut.waitFor(i))}}function Aj(r){r.createObjectStore("targetDocuments",{keyPath:jH}).createIndex("documentTargetsIndex",UH,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FH,{unique:!0}),r.createObjectStore("targetGlobal")}const WM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class KM{constructor(e,t,n,i,s,o,l,f,g,y,T=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Yn=s,this.window=o,this.document=l,this.Xn=g,this.Zn=y,this.ts=T,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=S=>Promise.resolve(),!KM.vt())throw new Et(st.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new d6(this,i),this.hs=t+"main",this.M=new lj(f),this.ls=new Ul(this.hs,this.ts,new p6(this.M)),this.fs=new a6(this.referenceDelegate,this.M),this.ds=new h6(this.M),this._s=new JH,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===y&&zi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Et(st.FAILED_PRECONDITION,WM);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new vu(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var n=(0,nt.Z)(function*(i){if(t.started)return e(i)});return function(i){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,nt.Z)(function*(n){null===n.newVersion&&(yield e())});return function(n){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,nt.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>OI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(pm(e))return It("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return It("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return LE(e).get("owner").next(t=>ut.resolve(this.Ps(t)))}Vs(e){return OI(e).delete(this.clientId)}vs(){var e=this;return(0,nt.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Os(n,"clientMetadata");return i.qt().next(s=>{const o=e.Ds(s,18e5),l=s.filter(f=>-1===o.indexOf(f));return ut.forEach(l,f=>i.delete(f.clientId)).next(()=>l)})}).catch(()=>[]);if(e.ws)for(const n of t)e.ws.removeItem(e.Cs(n.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ut.resolve(!0):LE(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Et(st.FAILED_PRECONDITION,WM);return!1}}return!(!this.networkEnabled||!this.inForeground)||OI(e).qt().next(n=>void 0===this.Ds(n,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||o&&l)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&It("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,nt.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new uj(t,vu.A);return e.Rs(n).next(()=>e.Vs(n))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(n=>this.Ss(n.updateTimeMs,t)&&!this.xs(n.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>OI(e).qt().next(t=>this.Ds(t,18e5).map(n=>n.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return qM.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new o6(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return GM.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,n){It("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=14===(o=this.ts)?ZH:13===o?ij:12===o?KH:11===o?rj:void Xt();var o;let l;return this.ls.runTransaction(e,i,s,f=>(l=new uj(f,this.es?this.es.next():vu.A),"readwrite-primary"===t?this.Es(l).next(g=>!!g||this.As(l)).next(g=>{if(!g)throw zi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Et(st.FAILED_PRECONDITION,sj);return n(l)}).next(g=>this.bs(l).next(()=>g)):this.$s(l).next(()=>n(l)))).then(f=>(l.raiseOnCommittedEvent(),f))}$s(e){return LE(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Et(st.FAILED_PRECONDITION,WM)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return LE(e).put("owner",t)}static vt(){return Ul.vt()}Rs(e){const t=LE(e);return t.get("owner").next(n=>this.Ps(n)?(It("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ut.resolve())}Ss(e,t){const n=Date.now();return!(e<n-t||e>n&&(zi(`Detected an update time that is in the future: ${e} > ${n}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,vn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return It("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return zi("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){zi("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function LE(r){return Os(r,"owner")}function OI(r){return Os(r,"clientMetadata")}function ZM(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class g6{constructor(e,t,n){this.ds=e,this.Bs=t,this.indexManager=n}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Us(e,t,n))}Us(e,t,n){return this.ds.getEntry(e,t).next(i=>{for(const s of n)s.applyToLocalView(i);return i})}qs(e,t){e.forEach((n,i)=>{for(const s of t)s.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(n=>this.Gs(e,n).next(()=>n))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(n=>this.qs(t,n))}Qs(e,t,n){return Ft.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):AM(t)?this.Ws(e,t,n):this.zs(e,t,n);var i}js(e,t){return this.Ls(e,new Ft(t)).next(n=>{let i=OM();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}Ws(e,t,n){const i=t.collectionGroup;let s=OM();return this.indexManager.getCollectionParents(e,i).next(o=>ut.forEach(o,l=>{const f=(g=t,y=l.child(i),new hh(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,y;return this.zs(e,f,n).next(g=>{g.forEach((y,T)=>{s=s.insert(y,T)})})}).next(()=>s))}zs(e,t,n){let i;return this.ds.getAllFromCollection(e,t.path,n).next(s=>(i=s,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const o of s)for(const l of o.mutations){const f=l.key;let g=i.get(f);null==g&&(g=qr.newInvalidDocument(f),i=i.insert(f,g)),MM(l,g,o.localWriteTime),g.isFoundDocument()||(i=i.remove(f))}}).next(()=>(i.forEach((s,o)=>{kM(t,o)||(i=i.remove(s))}),i))}}class YM{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Hs=n,this.Js=i}static Ys(e,t){let n=or(),i=or();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new YM(e,t.fromCache,n,i)}}class Dj{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,n,i){return this.ti(e,t).next(s=>s||this.ei(e,t,i,n)).next(s=>s||this.ni(e,t))}ti(e,t){return ut.resolve(null)}ei(e,t,n,i){return function iH(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(mn.min())?this.ni(e,t):this.Zs.Ks(e,n).next(s=>{const o=this.si(t,s);return this.ii(t,o,n,i)?this.ni(e,t):(bM()<=el.in.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),DM(t)),this.ri(e,o,t,lF(i,-1)))})}si(e,t){let n=new Lr(EF(e));return t.forEach((i,s)=>{kM(e,s)&&(n=n.add(s))}),n}ii(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ni(e,t){return bM()<=el.in.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",DM(t)),this.Zs.Qs(e,t,jl.min())}ri(e,t,n,i){return this.Zs.Qs(e,n,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class m6{constructor(e,t,n,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Oi(Mn),this.ai=new _p(s=>cm(s),yE),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(n)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new g6(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function kj(r,e,t,n){return new m6(r,e,t,n)}function Mj(r,e){return QM.apply(this,arguments)}function QM(){return QM=(0,nt.Z)(function*(r,e){const t=Bt(r);return yield t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.Bs.getAllMutationBatches(n).next(s=>(i=s,t.li(e),t.Bs.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let f=or();for(const g of i){o.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}for(const g of s){l.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}return t.fi.Ks(n,f).next(g=>({di:g,removedBatchIds:o,addedBatchIds:l}))})})}),QM.apply(this,arguments)}function v6(r,e){const t=Bt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.hi.newChangeBuffer({trackRemovals:!0});return function(o,l,f,g){const y=f.batch,T=y.keys();let S=ut.resolve();return T.forEach(M=>{S=S.next(()=>g.getEntry(l,M)).next(L=>{const H=f.docVersions.get(M);En(null!==H),L.version.compareTo(H)<0&&(y.applyToRemoteDocument(L,f),L.isValidDocument()&&(L.setReadTime(f.commitVersion),g.addEntry(L)))})}),S.next(()=>o.Bs.removeMutationBatch(l,y))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.Bs.performConsistencyCheck(n)).next(()=>t.fi.Ks(n,i))})}function Pj(r){const e=Bt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function y6(r,e){const t=Bt(r),n=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const l=[];e.targetChanges.forEach((g,y)=>{const T=i.get(y);if(!T)return;l.push(t.fs.removeMatchingKeys(s,g.removedDocuments,y).next(()=>t.fs.addMatchingKeys(s,g.addedDocuments,y)));let S=T.withSequenceNumber(s.currentSequenceNumber);var M,L,H;e.targetMismatches.has(y)?S=S.withResumeToken(cs.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,n)),i=i.insert(y,S),L=S,H=g,(0===(M=T).resumeToken.approximateByteSize()||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&l.push(t.fs.updateTargetData(s,S))});let f=nl();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),l.push(Oj(s,o,e.documentUpdates).next(g=>{f=g})),!n.isEqual(mn.min())){const g=t.fs.getLastRemoteSnapshotVersion(s).next(y=>t.fs.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(g)}return ut.waitFor(l).next(()=>o.apply(s)).next(()=>t.fi.Gs(s,f)).next(()=>f)}).then(s=>(t.ui=i,s))}function Oj(r,e,t){let n=or();return t.forEach(i=>n=n.add(i)),e.getEntries(r,n).next(i=>{let s=nl();return t.forEach((o,l)=>{const f=i.get(o);l.isNoDocument()&&l.version.isEqual(mn.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!f.isValidDocument()||l.version.compareTo(f.version)>0||0===l.version.compareTo(f.version)&&f.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):It("LocalStore","Ignoring outdated watch update for ",o,". Current version:",f.version," Watch version:",l.version)}),s})}function _6(r,e){const t=Bt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(n,e)))}function y_(r,e){const t=Bt(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.fs.getTargetData(n,e).next(s=>s?(i=s,ut.resolve(i)):t.fs.allocateTargetId(n).next(o=>(i=new bp(e,o,0,n.currentSequenceNumber),t.fs.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.ui.get(n.targetId);return(null===i||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(n.targetId,n),t.ai.set(e,n.targetId)),n})}function __(r,e,t){return XM.apply(this,arguments)}function XM(){return XM=(0,nt.Z)(function*(r,e,t){const n=Bt(r),i=n.ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!pm(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.ui=n.ui.remove(e),n.ai.delete(i.target)}),XM.apply(this,arguments)}function RI(r,e,t){const n=Bt(r);let i=mn.min(),s=or();return n.persistence.runTransaction("Execute query","readonly",o=>function(l,f,g){const y=Bt(l),T=y.ai.get(g);return void 0!==T?ut.resolve(y.ui.get(T)):y.fs.getTargetData(f,g)}(n,o,tl(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.fs.getMatchingKeysForTargetId(o,l.targetId).next(f=>{s=f})}).next(()=>n.oi.Qs(o,e,t?i:mn.min(),t?s:or())).next(l=>(Lj(n,TF(e),l),{documents:l,_i:s})))}function Rj(r,e){const t=Bt(r),n=Bt(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>n.Et(s,e).next(o=>o?o.target:null))}function Nj(r,e){const t=Bt(r),n=t.ci.get(e)||mn.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,lF(n,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Lj(t,e,i),i))}function Lj(r,e,t){let n=mn.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.ci.set(e,n)}function JM(){return JM=(0,nt.Z)(function*(r,e,t,n){const i=Bt(r);let s=or(),o=nl();for(const g of t){const y=e.wi(g.metadata.name);g.document&&(s=s.add(y));const T=e.mi(g);T.setReadTime(e.gi(g.metadata.readTime)),o=o.insert(y,T)}const l=i.hi.newChangeBuffer({trackRemovals:!0}),f=yield y_(i,(g=n,tl(l_(Gn.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",g=>Oj(g,l,o).next(y=>(l.apply(g),y)).next(y=>i.fs.removeMatchingKeysForTargetId(g,f.targetId).next(()=>i.fs.addMatchingKeys(g,s,f.targetId)).next(()=>i.fi.Gs(g,y)).next(()=>y)))}),JM.apply(this,arguments)}function T6(r,e){return eP.apply(this,arguments)}function eP(){return eP=(0,nt.Z)(function*(r,e,t=or()){const n=yield y_(r,tl(VM(e.bundledQuery))),i=Bt(r);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ps(e.readTime);if(n.snapshotVersion.compareTo(o)>=0)return i._s.saveNamedQuery(s,e);const l=n.withResumeToken(cs.EMPTY_BYTE_STRING,o);return i.ui=i.ui.insert(l.targetId,l),i.fs.updateTargetData(s,l).next(()=>i.fs.removeMatchingKeysForTargetId(s,n.targetId)).next(()=>i.fs.addMatchingKeys(s,t,n.targetId)).next(()=>i._s.saveNamedQuery(s,e))})}),eP.apply(this,arguments)}class E6{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ut.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Ps(n.createTime)}),ut.resolve()}getNamedQuery(e,t){return ut.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(n=t).name,query:VM(n.bundledQuery),readTime:Ps(n.readTime)}),ut.resolve();var n}}class w6{constructor(){this.overlays=new Oi(Ft.comparator),this.Ii=new Map}getOverlay(e,t){return ut.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.Xt(e,t,s)}),ut.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Ii.get(n);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(n)),ut.resolve()}getOverlaysForCollection(e,t,n){const i=wE(),s=t.length+1,o=new Ft(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const f=l.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===s&&f.largestBatchId>n&&i.set(f.getKey(),f)}return ut.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Oi((g,y)=>g-y);const o=this.overlays.getIterator();for(;o.hasNext();){const g=o.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>n){let y=s.get(g.largestBatchId);null===y&&(y=wE(),s=s.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const l=wE(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,y)=>l.set(g,y)),!(l.size()>=i)););return ut.resolve(l)}Xt(e,t,n){if(null===n)return;const i=this.overlays.get(n.key);if(null!==i){const o=this.Ii.get(i.largestBatchId).delete(n.key);this.Ii.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new BM(t,n));let s=this.Ii.get(t);void 0===s&&(s=or(),this.Ii.set(t,s)),this.Ii.set(t,s.add(n.key))}}class tP{constructor(){this.Ti=new Lr(Rs.Ei),this.Ai=new Lr(Rs.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const n=new Rs(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}bi(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Pi(new Rs(e,t))}Vi(e,t){e.forEach(n=>this.removeReference(n,t))}vi(e){const t=new Ft(new Gn([])),n=new Rs(t,e),i=new Rs(t,e+1),s=[];return this.Ai.forEachInRange([n,i],o=>{this.Pi(o),s.push(o.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ft(new Gn([])),n=new Rs(t,e),i=new Rs(t,e+1);let s=or();return this.Ai.forEachInRange([n,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Rs(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Rs{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ft.comparator(e.key,t.key)||Mn(e.Ci,t.Ci)}static Ri(e,t){return Mn(e.Ci,t.Ci)||Ft.comparator(e.key,t.key)}}class S6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Lr(Rs.Ei)}checkEmpty(e){return ut.resolve(0===this.Bs.length)}addMutationBatch(e,t,n,i){const s=this.xi;this.xi++;const o=new jM(s,t,n,i);this.Bs.push(o);for(const l of i)this.Ni=this.Ni.add(new Rs(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ut.resolve(o)}lookupMutationBatch(e,t){return ut.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),s=i<0?0:i;return ut.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return ut.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ut.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Rs(t,0),i=new Rs(t,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([n,i],o=>{const l=this.ki(o.Ci);s.push(l)}),ut.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lr(Mn);return t.forEach(i=>{const s=new Rs(i,0),o=new Rs(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,o],l=>{n=n.add(l.Ci)})}),ut.resolve(this.Oi(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;Ft.isDocumentKey(s)||(s=s.child(""));const o=new Rs(new Ft(s),0);let l=new Lr(Mn);return this.Ni.forEachWhile(f=>{const g=f.key.path;return!!n.isPrefixOf(g)&&(g.length===i&&(l=l.add(f.Ci)),!0)},o),ut.resolve(this.Oi(l))}Oi(e){const t=[];return e.forEach(n=>{const i=this.ki(n);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){En(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let n=this.Ni;return ut.forEach(t.mutations,i=>{const s=new Rs(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=n})}_n(e){}containsKey(e,t){const n=new Rs(t,0),i=this.Ni.firstAfterOrEqual(n);return ut.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ut.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class C6{constructor(e){this.$i=e,this.docs=new Oi(Ft.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,o=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ut.resolve(n?n.document.mutableCopy():qr.newInvalidDocument(t))}getEntries(e,t){let n=nl();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():qr.newInvalidDocument(i))}),ut.resolve(n)}getAllFromCollection(e,t,n){let i=nl();const s=new Ft(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:l,value:{document:f}}=o.getNext();if(!t.isPrefixOf(l.path))break;l.path.length>t.length+1||cF(W4(f),n)<=0||(i=i.insert(f.key,f.mutableCopy()))}return ut.resolve(i)}getAllFromCollectionGroup(e,t,n,i){Xt()}Bi(e,t){return ut.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new x6(this)}getSize(e){return ut.resolve(this.size)}}class x6 extends Sj{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(n)}),ut.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class I6{constructor(e){this.persistence=e,this.Li=new _p(t=>cm(t),yE),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.Ui=0,this.qi=new tP,this.targetCount=0,this.Ki=Tm.gn()}forEachTarget(e,t){return this.Li.forEach((n,i)=>t(i)),ut.resolve()}getLastRemoteSnapshotVersion(e){return ut.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ut.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ut.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),ut.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Tm(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ut.resolve()}updateTargetData(e,t){return this.Tn(t),ut.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ut.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Li.forEach((o,l)=>{l.sequenceNumber<=t&&null===n.get(l.targetId)&&(this.Li.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ut.waitFor(s).next(()=>i)}getTargetCount(e){return ut.resolve(this.targetCount)}getTargetData(e,t){const n=this.Li.get(t)||null;return ut.resolve(n)}addMatchingKeys(e,t,n){return this.qi.bi(t,n),ut.resolve()}removeMatchingKeys(e,t,n){this.qi.Vi(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ut.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ut.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qi.Di(t);return ut.resolve(n)}containsKey(e,t){return ut.resolve(this.qi.containsKey(t))}}class A6{constructor(e,t){this.Gi={},this.overlays={},this.es=new vu(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new I6(this),this.indexManager=new s6,this.ds=new C6(n=>this.referenceDelegate.Qi(n)),this.M=new lj(t),this._s=new E6(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Gi[e.toKey()];return n||(n=new S6(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,n){It("MemoryPersistence","Starting transaction:",e);const i=new D6(this.es.next());return this.referenceDelegate.ji(),n(i).next(s=>this.referenceDelegate.Wi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zi(e,t){return ut.or(Object.values(this.Gi).map(n=>()=>n.containsKey(e,t)))}}class D6 extends oj{constructor(e){super(),this.currentSequenceNumber=e}}class nP{constructor(e){this.persistence=e,this.Hi=new tP,this.Ji=null}static Yi(e){return new nP(e)}get Xi(){if(this.Ji)return this.Ji;throw Xt()}addReference(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),ut.resolve()}removeReference(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),ut.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ut.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xi.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ut.forEach(this.Xi,n=>{const i=Ft.fromPath(n);return this.Zi(e,i).next(s=>{s||t.removeEntry(i,mn.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(n=>{n?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ut.or([()=>ut.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Fj(r,e){return`firestore_clients_${r}_${e}`}function jj(r,e,t){let n=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function rP(r,e){return`firestore_targets_${r}_${e}`}class NI{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static tr(e,t,n){const i=JSON.parse(n);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Et(i.error.code,i.error.message))),o?new NI(e,t,i.state,s):(zi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class FE{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static tr(e,t){const n=JSON.parse(t);let i,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(i=new Et(n.error.code,n.error.message))),s?new FE(e,n.state,i):(zi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class LI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const n=JSON.parse(t);let i="object"==typeof n&&n.activeTargetIds instanceof Array,s=wI();for(let o=0;i&&o<n.activeTargetIds.length;++o)i=tF(n.activeTargetIds[o]),s=s.add(n.activeTargetIds[o]);return i?new LI(e,s):(zi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class iP{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new iP(t.clientId,t.onlineState):(zi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sP{constructor(){this.activeTargetIds=wI()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oP{constructor(e,t,n,i,s){this.window=e,this.Yn=t,this.persistenceKey=n,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Oi(Mn),this.started=!1,this.cr=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=Fj(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new sP),this.dr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,nt.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const s=e.getItem(Fj(e.persistenceKey,i));if(s){const o=LI.tr(i,s);o&&(e.ar=e.ar.insert(o.clientId,o))}}e.yr();const n=e.storage.getItem(e.mr);if(n){const i=e.pr(n);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,n){this.Er(e,t,n),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(rP(this.persistenceKey,e));if(n){const i=FE.tr(e,n);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rP(this.persistenceKey,e))}updateQueryState(e,t,n){this.br(e,t,n)}handleUserChange(e,t,n){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return It("SharedClientState","READ",e,t),t}setItem(e,t){It("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){It("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const n=e;if(n.storageArea===this.storage){if(It("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void zi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,nt.Z)(function*(){if(t.started){if(null!==n.key)if(t.dr.test(n.key)){if(null==n.newValue){const i=t.vr(n.key);return t.Sr(i,null)}{const i=t.Dr(n.key,n.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(n.key)){if(null!==n.newValue){const i=t.Cr(n.key,n.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(n.key)){if(null!==n.newValue){const i=t.kr(n.key,n.newValue);if(i)return t.Mr(i)}}else if(n.key===t.mr){if(null!==n.newValue){const i=t.pr(n.newValue);if(i)return t.Ir(i)}}else if(n.key===t.lr){const i=function(s){let o=vu.A;if(null!=s)try{const l=JSON.parse(s);En("number"==typeof l),o=l}catch(l){zi("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(n.newValue);i!==vu.A&&t.sequenceNumberHandler(i)}else if(n.key===t.gr){const i=t.Or(n.newValue);yield Promise.all(i.map(s=>t.syncEngine.Fr(s)))}}else t.cr.push(n)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,n){const i=new NI(this.currentUser,e,t,n),s=jj(this.persistenceKey,this.currentUser,e);this.setItem(s,i.er())}Ar(e){const t=jj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,n){const i=rP(this.persistenceKey,e),s=new FE(e,t,n);this.setItem(i,s.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const n=this.vr(e);return LI.tr(n,t)}Cr(e,t){const n=this._r.exec(e),i=Number(n[1]);return NI.tr(new Xs(void 0!==n[2]?n[2]:null),i,t)}kr(e,t){const n=this.wr.exec(e),i=Number(n[1]);return FE.tr(i,t)}pr(e){return iP.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,nt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);It("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const n=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),s=this.Tr(n),o=[],l=[];return s.forEach(f=>{i.has(f)||o.push(f)}),i.forEach(f=>{s.has(f)||l.push(f)}),this.syncEngine.Lr(o,l).then(()=>{this.ar=n})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=wI();return e.forEach((n,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Uj{constructor(){this.Ur=new sP,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,n){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new sP,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class k6{Kr(e){}shutdown(){}}class Bj{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const M6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class P6{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class O6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,n,i,s){const o=this.ho(e,t);It("RestConnection","Sending: ",o,n);const l={};return this.lo(l,i,s),this.fo(e,o,l,n).then(f=>(It("RestConnection","Received: ",f),f),f=>{throw lE("RestConnection",`${e} failed with error: `,f,"url: ",o,"request:",n),f})}_o(e,t,n,i,s){return this.co(e,t,n,i,s)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+r_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.uo}/v1/${t}:${M6[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,i){return new Promise((s,o)=>{const l=new M4;l.listenOnce(A4.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _M.NO_ERROR:const g=l.getResponseJson();It("Connection","XHR received:",JSON.stringify(g)),s(g);break;case _M.TIMEOUT:It("Connection",'RPC "'+e+'" timed out'),o(new Et(st.DEADLINE_EXCEEDED,"Request time out"));break;case _M.HTTP_ERROR:const y=l.getStatus();if(It("Connection",'RPC "'+e+'" failed with status:',y,"response text:",l.getResponseText()),y>0){const T=l.getResponseJson().error;if(T&&T.status&&T.message){const S=function(M){const L=M.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(L)>=0?L:st.UNKNOWN}(T.status);o(new Et(S,T.message))}else o(new Et(st.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Et(st.UNAVAILABLE,"Connection failed."));break;default:Xt()}}finally{It("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(i);l.send(t,"POST",f,n,15)})}wo(e,t,n){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=x4(),o=I4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new k4({})),this.lo(l.initMessageHeaders,t,n),(0,vn.uI)()||(0,vn.b$)()||(0,vn.d)()||(0,vn.w1)()||(0,vn.Mn)()||(0,vn.ru)()||(l.httpHeadersOverwriteParam="$httpHeaders");const f=i.join("");It("Connection","Creating WebChannel: "+f,l);const g=s.createWebChannel(f,l);let y=!1,T=!1;const S=new P6({Jr:L=>{T?It("Connection","Not sending because WebChannel is closed:",L):(y||(It("Connection","Opening WebChannel transport."),g.open(),y=!0),It("Connection","WebChannel sending:",L),g.send(L))},Yr:()=>g.close()}),M=(L,H,$)=>{L.listen(H,De=>{try{$(De)}catch(We){setTimeout(()=>{throw We},0)}})};return M(g,hI.EventType.OPEN,()=>{T||It("Connection","WebChannel transport opened.")}),M(g,hI.EventType.CLOSE,()=>{T||(T=!0,It("Connection","WebChannel transport closed"),S.ro())}),M(g,hI.EventType.ERROR,L=>{T||(T=!0,lE("Connection","WebChannel transport errored:",L),S.ro(new Et(st.UNAVAILABLE,"The operation could not be completed")))}),M(g,hI.EventType.MESSAGE,L=>{var H;if(!T){const $=L.data[0];En(!!$);const De=$,We=De.error||(null===(H=De[0])||void 0===H?void 0:H.error);if(We){It("Connection","WebChannel received error:",We);const et=We.status;let Me=function(ze){const Be=Ki[ze];if(void 0!==Be)return FF(Be)}(et),je=We.message;void 0===Me&&(Me=st.INTERNAL,je="Unknown error status: "+et+" with message "+We.message),T=!0,S.ro(new Et(Me,je)),g.close()}else It("Connection","WebChannel received:",$),S.oo($)}}),M(o,D4.STAT_EVENT,L=>{L.stat===zL.PROXY?It("Connection","Detected buffering proxy"):L.stat===zL.NOPROXY&&It("Connection","Detected no buffering proxy")}),setTimeout(()=>{S.io()},0),S}}function Vj(){return"undefined"!=typeof window?window:null}function FI(){return"undefined"!=typeof document?document:null}function jE(r){return new TH(r,!0)}class aP{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Yn=e,this.timerId=t,this.mo=n,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-n);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Hj{constructor(e,t,n,i,s,o,l,f){this.Yn=e,this.Vo=n,this.vo=i,this.So=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=f,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new aP(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,nt.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,nt.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var n=this;return(0,nt.Z)(function*(){n.Uo(),n.qo(),n.No.cancel(),n.Do++,4!==e?n.No.reset():t&&t.code===st.RESOURCE_EXHAUSTED?(zi(t.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),n.No.Ao()):t&&t.code===st.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Ko(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Do===t&&this.Qo(n,i)},n=>{e(()=>{const i=new Et(st.UNKNOWN,"Fetching auth token failed: "+n.message);return this.jo(i)})})}Qo(e,t){const n=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{n(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{n(()=>this.jo(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,nt.Z)(function*(){e.state=0,e.start()}))}jo(e){return It("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R6 extends Hj{constructor(e,t,n,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,o),this.M=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function SH(r,e){let t;if("targetChange"in e){const n="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:Xt(),i=e.targetChange.targetIds||[],s=function(f,g){return f.N?(En(void 0===g||"string"==typeof g),cs.fromBase64String(g||"")):(En(void 0===g||g instanceof Uint8Array),cs.fromUint8Array(g||new Uint8Array))}(r,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(f){const g=void 0===f.code?st.UNKNOWN:FF(f.code);return new Et(g,f.message||"")}(o);t=new UF(n,i,s,l||null)}else if("documentChange"in e){const n=e.documentChange,i=Hc(r,n.document.name),s=Ps(n.document.updateTime),o=new ko({mapValue:{fields:n.document.fields}}),l=qr.newFoundDocument(i,s,o);t=new SI(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const n=e.documentDelete,i=Hc(r,n.document),s=n.readTime?Ps(n.readTime):mn.min(),o=qr.newNoDocument(i,s);t=new SI([],n.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const n=e.documentRemove,i=Hc(r,n.document);t=new SI([],n.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Xt();{const n=e.filter,s=new hH(n.count||0);t=new jF(n.targetId,s)}}var f;return t}(this.M,e),n=function(i){if(!("targetChange"in i))return mn.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?mn.min():s.readTime?Ps(s.readTime):mn.min()}(e);return this.listener.zo(t,n)}Ho(e){const t={};t.database=AE(this.M),t.addTarget=function(i,s){let o;const l=s.target;return o=yI(l)?{documents:ZF(i,l)}:{query:YF(i,l)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=GF(i,s.resumeToken):s.snapshotVersion.compareTo(mn.min())>0&&(o.readTime=xE(i,s.snapshotVersion.toTimestamp())),o}(this.M,e);const n=function xH(r,e){const t=function(n,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);n&&(t.labels=n),this.Lo(t)}Jo(e){const t={};t.database=AE(this.M),t.removeTarget=e,this.Lo(t)}}class N6 extends Hj{constructor(e,t,n,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,o),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(En(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function CH(r,e){return r&&r.length>0?(En(void 0!==e),r.map(t=>function(n,i){let s=Ps(n.updateTime?n.updateTime:i);return s.isEqual(mn.min())&&(s=Ps(i)),new lH(s,n.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),n=Ps(e.commitTime);return this.listener.tu(n,t)}return En(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=AE(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>DE(this.M,n))};this.Lo(t)}}class L6 extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=n,this.M=i,this.su=!1}iu(){if(this.su)throw new Et(st.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So.co(e,t,n,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Et(st.UNKNOWN,i.toString())})}_o(e,t,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So._o(e,t,n,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Et(st.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class F6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(zi(t),this.uu=!1):It("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class j6{constructor(e,t,n,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(l=>{n.enqueueAndForget((0,nt.Z)(function*(){var f;wp(o)&&(It("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,nt.Z)(function*(g){const y=Bt(g);y.wu.add(4),yield b_(y),y.yu.set("Unknown"),y.wu.delete(4),yield UE(y)}),function(g){return f.apply(this,arguments)})(o))}))}),this.yu=new F6(n,i)}}function UE(r){return uP.apply(this,arguments)}function uP(){return uP=(0,nt.Z)(function*(r){if(wp(r))for(const e of r.mu)yield e(!0)}),uP.apply(this,arguments)}function b_(r){return lP.apply(this,arguments)}function lP(){return lP=(0,nt.Z)(function*(r){for(const e of r.mu)yield e(!1)}),lP.apply(this,arguments)}function jI(r,e){const t=Bt(r);t._u.has(e.targetId)||(t._u.set(e.targetId,e),hP(t)?dP(t):E_(t).Mo()&&cP(t,e))}function BE(r,e){const t=Bt(r),n=E_(t);t._u.delete(e),n.Mo()&&Gj(t,e),0===t._u.size&&(n.Mo()?n.$o():wp(t)&&t.yu.set("Unknown"))}function cP(r,e){r.pu.Z(e.targetId),E_(r).Ho(e)}function Gj(r,e){r.pu.Z(e),E_(r).Jo(e)}function dP(r){r.pu=new yH({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r._u.get(e)||null}),E_(r).start(),r.yu.au()}function hP(r){return wp(r)&&!E_(r).ko()&&r._u.size>0}function wp(r){return 0===Bt(r).wu.size}function $j(r){r.pu=void 0}function U6(r){return fP.apply(this,arguments)}function fP(){return fP=(0,nt.Z)(function*(r){r._u.forEach((e,t)=>{cP(r,e)})}),fP.apply(this,arguments)}function B6(r,e){return pP.apply(this,arguments)}function pP(){return pP=(0,nt.Z)(function*(r,e){$j(r),hP(r)?(r.yu.lu(e),dP(r)):r.yu.set("Unknown")}),pP.apply(this,arguments)}function V6(r,e,t){return gP.apply(this,arguments)}function gP(){return gP=(0,nt.Z)(function*(r,e,t){if(r.yu.set("Online"),e instanceof UF&&2===e.state&&e.cause)try{yield(n=(0,nt.Z)(function*(i,s){const o=s.cause;for(const l of s.targetIds)i._u.has(l)&&(yield i.remoteSyncer.rejectListen(l,o),i._u.delete(l),i.pu.removeTarget(l))}),function(i,s){return n.apply(this,arguments)})(r,e)}catch(n){It("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield UI(r,n)}else if(e instanceof SI?r.pu.ut(e):e instanceof jF?r.pu._t(e):r.pu.ht(e),!t.isEqual(mn.min()))try{const n=yield Pj(r.localStore);t.compareTo(n)>=0&&(yield function(i,s){const o=i.pu.yt(s);return o.targetChanges.forEach((l,f)=>{if(l.resumeToken.approximateByteSize()>0){const g=i._u.get(f);g&&i._u.set(f,g.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach(l=>{const f=i._u.get(l);if(!f)return;i._u.set(l,f.withResumeToken(cs.EMPTY_BYTE_STRING,f.snapshotVersion)),Gj(i,l);const g=new bp(f.target,l,1,f.sequenceNumber);cP(i,g)}),i.remoteSyncer.applyRemoteEvent(o)}(r,t))}catch(n){It("RemoteStore","Failed to raise snapshot:",n),yield UI(r,n)}var n}),gP.apply(this,arguments)}function UI(r,e,t){return mP.apply(this,arguments)}function mP(){return mP=(0,nt.Z)(function*(r,e,t){if(!pm(e))throw e;r.wu.add(1),yield b_(r),r.yu.set("Offline"),t||(t=()=>Pj(r.localStore)),r.asyncQueue.enqueueRetryable((0,nt.Z)(function*(){It("RemoteStore","Retrying IndexedDB access"),yield t(),r.wu.delete(1),yield UE(r)}))}),mP.apply(this,arguments)}function qj(r,e){return e().catch(t=>UI(r,t,e))}function T_(r){return vP.apply(this,arguments)}function vP(){return vP=(0,nt.Z)(function*(r){const e=Bt(r),t=Sp(e);let n=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;H6(e);)try{const i=yield _6(e.localStore,n);if(null===i){0===e.du.length&&t.$o();break}n=i.batchId,G6(e,i)}catch(i){yield UI(e,i)}zj(e)&&Wj(e)}),vP.apply(this,arguments)}function H6(r){return wp(r)&&r.du.length<10}function G6(r,e){r.du.push(e);const t=Sp(r);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function zj(r){return wp(r)&&!Sp(r).ko()&&r.du.length>0}function Wj(r){Sp(r).start()}function $6(r){return yP.apply(this,arguments)}function yP(){return yP=(0,nt.Z)(function*(r){Sp(r).nu()}),yP.apply(this,arguments)}function q6(r){return _P.apply(this,arguments)}function _P(){return _P=(0,nt.Z)(function*(r){const e=Sp(r);for(const t of r.du)e.Zo(t.mutations)}),_P.apply(this,arguments)}function z6(r,e,t){return bP.apply(this,arguments)}function bP(){return bP=(0,nt.Z)(function*(r,e,t){const n=r.du.shift(),i=UM.from(n,e,t);yield qj(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),yield T_(r)}),bP.apply(this,arguments)}function W6(r,e){return TP.apply(this,arguments)}function TP(){return TP=(0,nt.Z)(function*(r,e){var t;e&&Sp(r).Xo&&(yield(t=(0,nt.Z)(function*(n,i){if(LF(s=i.code)&&s!==st.ABORTED){const o=n.du.shift();Sp(n).Fo(),yield qj(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield T_(n)}var s}),function(n,i){return t.apply(this,arguments)})(r,e)),zj(r)&&Wj(r)}),TP.apply(this,arguments)}function Kj(r,e){return EP.apply(this,arguments)}function EP(){return EP=(0,nt.Z)(function*(r,e){const t=Bt(r);t.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const n=wp(t);t.wu.add(3),yield b_(t),n&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield UE(t)}),EP.apply(this,arguments)}function wP(r,e){return SP.apply(this,arguments)}function SP(){return SP=(0,nt.Z)(function*(r,e){const t=Bt(r);e?(t.wu.delete(2),yield UE(t)):e||(t.wu.add(2),yield b_(t),t.yu.set("Unknown"))}),SP.apply(this,arguments)}function E_(r){return r.Iu||(r.Iu=function(e,t,n){const i=Bt(e);return i.iu(),new R6(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,n)}(r.datastore,r.asyncQueue,{Xr:U6.bind(null,r),eo:B6.bind(null,r),zo:V6.bind(null,r)}),r.mu.push(function(){var e=(0,nt.Z)(function*(t){t?(r.Iu.Fo(),hP(r)?dP(r):r.yu.set("Unknown")):(yield r.Iu.stop(),$j(r))});return function(t){return e.apply(this,arguments)}}())),r.Iu}function Sp(r){return r.Tu||(r.Tu=function(e,t,n){const i=Bt(e);return i.iu(),new N6(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,n)}(r.datastore,r.asyncQueue,{Xr:$6.bind(null,r),eo:W6.bind(null,r),eu:q6.bind(null,r),tu:z6.bind(null,r)}),r.mu.push(function(){var e=(0,nt.Z)(function*(t){t?(r.Tu.Fo(),yield T_(r)):(yield r.Tu.stop(),r.du.length>0&&(It("RemoteStore",`Stopping write stream with ${r.du.length} pending writes`),r.du=[]))});return function(t){return e.apply(this,arguments)}}())),r.Tu}class CP{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,n,i,s){const o=Date.now()+n,l=new CP(e,t,o,i,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Et(st.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w_(r,e){if(zi("AsyncQueue",`${e}: ${r}`),pm(r))return new Et(st.UNAVAILABLE,`${e}: ${r}`);throw r}class S_{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ft.comparator(t.key,n.key):(t,n)=>Ft.comparator(t.key,n.key),this.keyedMap=OM(),this.sortedSet=new Oi(this.comparator)}static emptySet(e){return new S_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof S_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new S_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Zj{constructor(){this.Eu=new Oi(Ft.comparator)}track(e){const t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Xt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,n)=>{e.push(n)}),e}}class C_{constructor(e,t,n,i,s,o,l,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=f}static fromInitialDocuments(e,t,n,i){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new C_(e,t,S_.emptySet(t),s,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_E(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class K6{constructor(){this.Ru=void 0,this.listeners=[]}}class Z6{constructor(){this.queries=new _p(e=>bF(e),_E),this.onlineState="Unknown",this.bu=new Set}}function xP(r,e){return IP.apply(this,arguments)}function IP(){return IP=(0,nt.Z)(function*(r,e){const t=Bt(r),n=e.query;let i=!1,s=t.queries.get(n);if(s||(i=!0,s=new K6),i)try{s.Ru=yield t.onListen(n)}catch(o){const l=w_(o,`Initialization of query '${DM(e.query)}' failed`);return void e.onError(l)}t.queries.set(n,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.Vu(s.Ru)&&kP(t)}),IP.apply(this,arguments)}function AP(r,e){return DP.apply(this,arguments)}function DP(){return DP=(0,nt.Z)(function*(r,e){const t=Bt(r),n=e.query;let i=!1;const s=t.queries.get(n);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(n),t.onUnlisten(n)}),DP.apply(this,arguments)}function Y6(r,e){const t=Bt(r);let n=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const l of o.listeners)l.Vu(i)&&(n=!0);o.Ru=i}}n&&kP(t)}function Q6(r,e,t){const n=Bt(r),i=n.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);n.queries.delete(e)}function kP(r){r.bu.forEach(e=>{e.next()})}class MP{constructor(e,t,n){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=n||{}}Vu(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)3!==i.type&&n.push(i);e=new C_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=C_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class X6{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Yj{constructor(e){this.M=e}wi(e){return Hc(this.M,e)}mi(e){return e.metadata.exists?KF(this.M,e.document,!1):qr.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Ps(e)}}class J6{constructor(e,t,n){this.Ou=e,this.localStore=t,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qj(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=Gn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,n=new Yj(this.M);for(const i of e)if(i.metadata.queries){const s=n.wi(i.metadata.name);for(const o of i.metadata.queries){const l=(t.get(o)||or()).add(s);t.set(o,l)}}return t}complete(){var e=this;return(0,nt.Z)(function*(){const t=yield function b6(r,e,t,n){return JM.apply(this,arguments)}(e.localStore,new Yj(e.M),e.documents,e.Ou.id),n=e.$u(e.documents);for(const i of e.queries)yield T6(e.localStore,i,n.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Qj(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Xj{constructor(e){this.key=e}}class Jj{constructor(e){this.key=e}}class eU{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=or(),this.mutatedKeys=or(),this.Gu=EF(e),this.Qu=new S_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const n=t?t.zu:new Zj,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,l=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,g="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,T)=>{const S=i.get(y),M=kM(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),H=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let $=!1;S&&M?S.data.isEqual(M.data)?L!==H&&(n.track({type:3,doc:M}),$=!0):this.Hu(S,M)||(n.track({type:2,doc:M}),$=!0,(f&&this.Gu(M,f)>0||g&&this.Gu(M,g)<0)&&(l=!0)):!S&&M?(n.track({type:0,doc:M}),$=!0):S&&!M&&(n.track({type:1,doc:S}),$=!0,(f||g)&&(l=!0)),$&&(M?(o=o.add(M),s=H?s.add(y):s.delete(y)):(o=o.delete(y),s=s.delete(y)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const y="F"===this.query.limitType?o.last():o.first();o=o.delete(y.key),s=s.delete(y.key),n.track({type:1,doc:y})}return{Qu:o,zu:n,ii:l,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((g,y)=>function(T,S){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt()}};return M(T)-M(S)}(g.type,y.type)||this.Gu(g.doc,y.doc)),this.Ju(n);const o=t?this.Yu():[],l=0===this.Ku.size&&this.current?1:0,f=l!==this.qu;return this.qu=l,0!==s.length||f?{snapshot:new C_(this.query,e.Qu,i,s,e.mutatedKeys,0===l,f,!1),Xu:o}:{Xu:o}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Zj,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=or(),this.Qu.forEach(n=>{this.Zu(n.key)&&(this.Ku=this.Ku.add(n.key))});const t=[];return e.forEach(n=>{this.Ku.has(n)||t.push(new Jj(n))}),this.Ku.forEach(n=>{e.has(n)||t.push(new Xj(n))}),t}ta(e){this.Uu=e._i,this.Ku=or();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return C_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class e8{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class t8{constructor(e){this.key=e,this.na=!1}}class n8{constructor(e,t,n,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new _p(l=>bF(l),_E),this.ra=new Map,this.oa=new Set,this.ua=new Oi(Ft.comparator),this.aa=new Map,this.ca=new tP,this.ha={},this.la=new Map,this.fa=Tm.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function r8(r,e){return PP.apply(this,arguments)}function PP(){return PP=(0,nt.Z)(function*(r,e){const t=tO(r);let n,i;const s=t.ia.get(e);if(s)n=s.targetId,t.sharedClientState.addLocalQueryTarget(n),i=s.view.ea();else{const o=yield y_(t.localStore,tl(e));t.isPrimaryClient&&jI(t.remoteStore,o);const l=t.sharedClientState.addLocalQueryTarget(o.targetId);n=o.targetId,i=yield OP(t,e,n,"current"===l)}return i}),PP.apply(this,arguments)}function OP(r,e,t,n){return RP.apply(this,arguments)}function RP(){return RP=(0,nt.Z)(function*(r,e,t,n){r._a=(y,T,S)=>{return(M=(0,nt.Z)(function*(L,H,$,De){let We=H.view.Wu($);We.ii&&(We=yield RI(L.localStore,H.query,!1).then(({documents:je})=>H.view.Wu(je,We)));const et=De&&De.targetChanges.get(H.targetId),Me=H.view.applyChanges(We,L.isPrimaryClient,et);return $P(L,H.targetId,Me.Xu),Me.snapshot}),function(L,H,$,De){return M.apply(this,arguments)})(r,y,T,S);var M};const i=yield RI(r.localStore,e,!0),s=new eU(e,i._i),o=s.Wu(i.documents),l=CE.createSynthesizedTargetChangeForCurrentChange(t,n&&"Offline"!==r.onlineState),f=s.applyChanges(o,r.isPrimaryClient,l);$P(r,t,f.Xu);const g=new e8(e,t,s);return r.ia.set(e,g),r.ra.has(t)?r.ra.get(t).push(e):r.ra.set(t,[e]),f.snapshot}),RP.apply(this,arguments)}function i8(r,e){return NP.apply(this,arguments)}function NP(){return NP=(0,nt.Z)(function*(r,e){const t=Bt(r),n=t.ia.get(e),i=t.ra.get(n.targetId);if(i.length>1)return t.ra.set(n.targetId,i.filter(s=>!_E(s,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(n.targetId),t.sharedClientState.isActiveQueryTarget(n.targetId)||(yield __(t.localStore,n.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(n.targetId),BE(t.remoteStore,n.targetId),x_(t,n.targetId)}).catch(Em))):(x_(t,n.targetId),yield __(t.localStore,n.targetId,!0))}),NP.apply(this,arguments)}function LP(){return LP=(0,nt.Z)(function*(r,e,t){const n=nO(r);try{const i=yield function(s,o){const l=Bt(s),f=Pi.now(),g=o.reduce((T,S)=>T.add(S.key),or());let y;return l.persistence.runTransaction("Locally write mutations","readwrite",T=>l.fi.Ks(T,g).next(S=>{y=S;const M=[];for(const L of o){const H=dH(L,y.get(L.key));null!=H&&M.push(new fm(L.key,H,uF(H.value.mapValue),Wi.exists(!0)))}return l.Bs.addMutationBatch(T,f,M,o)})).then(T=>(T.applyToLocalDocumentSet(y),{batchId:T.batchId,changes:y}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let f=s.ha[s.currentUser.toKey()];f||(f=new Oi(Mn)),f=f.insert(o,l),s.ha[s.currentUser.toKey()]=f}(n,i.batchId,t),yield fh(n,i.changes),yield T_(n.remoteStore)}catch(i){const s=w_(i,"Failed to persist write");t.reject(s)}}),LP.apply(this,arguments)}function tU(r,e){return FP.apply(this,arguments)}function FP(){return FP=(0,nt.Z)(function*(r,e){const t=Bt(r);try{const n=yield y6(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.aa.get(s);o&&(En(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.na=!0:i.modifiedDocuments.size>0?En(o.na):i.removedDocuments.size>0&&(En(o.na),o.na=!1))}),yield fh(t,n,e)}catch(n){yield Em(n)}}),FP.apply(this,arguments)}function nU(r,e,t){const n=Bt(r);if(n.isPrimaryClient&&0===t||!n.isPrimaryClient&&1===t){const i=[];n.ia.forEach((s,o)=>{const l=o.view.Pu(e);l.snapshot&&i.push(l.snapshot)}),function(s,o){const l=Bt(s);l.onlineState=o;let f=!1;l.queries.forEach((g,y)=>{for(const T of y.listeners)T.Pu(o)&&(f=!0)}),f&&kP(l)}(n.eventManager,e),i.length&&n.sa.zo(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}function o8(r,e,t){return jP.apply(this,arguments)}function jP(){return jP=(0,nt.Z)(function*(r,e,t){const n=Bt(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.aa.get(e),s=i&&i.key;if(s){let o=new Oi(Ft.comparator);o=o.insert(s,qr.newNoDocument(s,mn.min()));const l=or().add(s),f=new SE(mn.min(),new Map,new Lr(Mn),o,l);yield tU(n,f),n.ua=n.ua.remove(s),n.aa.delete(e),qP(n)}else yield __(n.localStore,e,!1).then(()=>x_(n,e,t)).catch(Em)}),jP.apply(this,arguments)}function a8(r,e){return UP.apply(this,arguments)}function UP(){return UP=(0,nt.Z)(function*(r,e){const t=Bt(r),n=e.batch.batchId;try{const i=yield v6(t.localStore,e);GP(t,n,null),HP(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),yield fh(t,i)}catch(i){yield Em(i)}}),UP.apply(this,arguments)}function u8(r,e,t){return BP.apply(this,arguments)}function BP(){return BP=(0,nt.Z)(function*(r,e,t){const n=Bt(r);try{const i=yield function(s,o){const l=Bt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return l.Bs.lookupMutationBatch(f,o).next(y=>(En(null!==y),g=y.keys(),l.Bs.removeMutationBatch(f,y))).next(()=>l.Bs.performConsistencyCheck(f)).next(()=>l.fi.Ks(f,g))})}(n.localStore,e);GP(n,e,t),HP(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),yield fh(n,i)}catch(i){yield Em(i)}}),BP.apply(this,arguments)}function VP(){return VP=(0,nt.Z)(function*(r,e){const t=Bt(r);wp(t.remoteStore)||It("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=yield function(s){const o=Bt(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.Bs.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===n)return void e.resolve();const i=t.la.get(n)||[];i.push(e),t.la.set(n,i)}catch(n){const i=w_(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),VP.apply(this,arguments)}function HP(r,e){(r.la.get(e)||[]).forEach(t=>{t.resolve()}),r.la.delete(e)}function GP(r,e,t){const n=Bt(r);let i=n.ha[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.ha[n.currentUser.toKey()]=i}}function x_(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.ra.get(e))r.ia.delete(n),t&&r.sa.wa(n,t);r.ra.delete(e),r.isPrimaryClient&&r.ca.vi(e).forEach(n=>{r.ca.containsKey(n)||rU(r,n)})}function rU(r,e){r.oa.delete(e.path.canonicalString());const t=r.ua.get(e);null!==t&&(BE(r.remoteStore,t),r.ua=r.ua.remove(e),r.aa.delete(t),qP(r))}function $P(r,e,t){for(const n of t)n instanceof Xj?(r.ca.addReference(n.key,e),c8(r,n)):n instanceof Jj?(It("SyncEngine","Document no longer in limbo: "+n.key),r.ca.removeReference(n.key,e),r.ca.containsKey(n.key)||rU(r,n.key)):Xt()}function c8(r,e){const t=e.key,n=t.path.canonicalString();r.ua.get(t)||r.oa.has(n)||(It("SyncEngine","New document in limbo: "+t),r.oa.add(n),qP(r))}function qP(r){for(;r.oa.size>0&&r.ua.size<r.maxConcurrentLimboResolutions;){const e=r.oa.values().next().value;r.oa.delete(e);const t=new Ft(Gn.fromString(e)),n=r.fa.next();r.aa.set(n,new t8(t)),r.ua=r.ua.insert(t,n),jI(r.remoteStore,new bp(tl(l_(t.path)),n,2,vu.A))}}function fh(r,e,t){return zP.apply(this,arguments)}function zP(){return zP=(0,nt.Z)(function*(r,e,t){const n=Bt(r),i=[],s=[],o=[];var l;n.ia.isEmpty()||(n.ia.forEach((l,f)=>{o.push(n._a(f,e,t).then(g=>{if(g){n.isPrimaryClient&&n.sharedClientState.updateQueryState(f.targetId,g.fromCache?"not-current":"current"),i.push(g);const y=YM.Ys(f.targetId,g);s.push(y)}}))}),yield Promise.all(o),n.sa.zo(i),yield(l=(0,nt.Z)(function*(f,g){const y=Bt(f);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ut.forEach(g,S=>ut.forEach(S.Hs,M=>y.persistence.referenceDelegate.addReference(T,S.targetId,M)).next(()=>ut.forEach(S.Js,M=>y.persistence.referenceDelegate.removeReference(T,S.targetId,M)))))}catch(T){if(!pm(T))throw T;It("LocalStore","Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const M=y.ui.get(S),H=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion);y.ui=y.ui.insert(S,H)}}}),function(f,g){return l.apply(this,arguments)})(n.localStore,s))}),zP.apply(this,arguments)}function d8(r,e){return WP.apply(this,arguments)}function WP(){return WP=(0,nt.Z)(function*(r,e){const t=Bt(r);if(!t.currentUser.isEqual(e)){It("SyncEngine","User change. New user:",e.toKey());const n=yield Mj(t.localStore,e);t.currentUser=e,(i=t).la.forEach(o=>{o.forEach(l=>{l.reject(new Et(st.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),yield fh(t,n.di)}var i}),WP.apply(this,arguments)}function h8(r,e){const t=Bt(r),n=t.aa.get(e);if(n&&n.na)return or().add(n.key);{let i=or();const s=t.ra.get(e);if(!s)return i;for(const o of s){const l=t.ia.get(o);i=i.unionWith(l.view.ju)}return i}}function f8(r,e){return KP.apply(this,arguments)}function KP(){return KP=(0,nt.Z)(function*(r,e){const t=Bt(r),n=yield RI(t.localStore,e.query,!0),i=e.view.ta(n);return t.isPrimaryClient&&$P(t,e.targetId,i.Xu),i}),KP.apply(this,arguments)}function p8(r,e){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,nt.Z)(function*(r,e){const t=Bt(r);return Nj(t.localStore,e).then(n=>fh(t,n))}),ZP.apply(this,arguments)}function g8(r,e,t,n){return YP.apply(this,arguments)}function YP(){return YP=(0,nt.Z)(function*(r,e,t,n){const i=Bt(r),s=yield function(o,l){const f=Bt(o),g=Bt(f.Bs);return f.persistence.runTransaction("Lookup mutation documents","readonly",y=>g.fn(y,l).next(T=>T?f.fi.Ks(y,T):ut.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield T_(i.remoteStore):"acknowledged"===t||"rejected"===t?(GP(i,e,n||null),HP(i,e),l=e,Bt(Bt(i.localStore).Bs)._n(l)):Xt(),yield fh(i,s)):It("SyncEngine","Cannot apply mutation batch with id: "+e)}),YP.apply(this,arguments)}function QP(){return QP=(0,nt.Z)(function*(r,e){const t=Bt(r);if(tO(t),nO(t),!0===e&&!0!==t.da){const n=t.sharedClientState.getAllActiveQueryTargets(),i=yield iU(t,n.toArray());t.da=!0,yield wP(t.remoteStore,!0);for(const s of i)jI(t.remoteStore,s)}else if(!1===e&&!1!==t.da){const n=[];let i=Promise.resolve();t.ra.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?n.push(o):i=i.then(()=>(x_(t,o),__(t.localStore,o,!0))),BE(t.remoteStore,o)}),yield i,yield iU(t,n),function(s){const o=Bt(s);o.aa.forEach((l,f)=>{BE(o.remoteStore,f)}),o.ca.Si(),o.aa=new Map,o.ua=new Oi(Ft.comparator)}(t),t.da=!1,yield wP(t.remoteStore,!1)}}),QP.apply(this,arguments)}function iU(r,e,t){return XP.apply(this,arguments)}function XP(){return XP=(0,nt.Z)(function*(r,e,t){const n=Bt(r),i=[],s=[];for(const o of e){let l;const f=n.ra.get(o);if(f&&0!==f.length){l=yield y_(n.localStore,tl(f[0]));for(const g of f){const y=n.ia.get(g),T=yield f8(n,y);T.snapshot&&s.push(T.snapshot)}}else{const g=yield Rj(n.localStore,o);l=yield y_(n.localStore,g),yield OP(n,sU(g),o,!1)}i.push(l)}return n.sa.zo(s),i}),XP.apply(this,arguments)}function sU(r){return yF(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function v8(r){const e=Bt(r);return Bt(Bt(e.localStore).persistence).Fs()}function y8(r,e,t,n){return JP.apply(this,arguments)}function JP(){return JP=(0,nt.Z)(function*(r,e,t,n){const i=Bt(r);if(i.da)return void It("SyncEngine","Ignoring unexpected query state notification.");const s=i.ra.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield Nj(i.localStore,TF(s[0])),l=SE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield fh(i,o,l);break}case"rejected":yield __(i.localStore,e,!0),x_(i,e,n);break;default:Xt()}}),JP.apply(this,arguments)}function _8(r,e,t){return eO.apply(this,arguments)}function eO(){return eO=(0,nt.Z)(function*(r,e,t){const n=tO(r);if(n.da){for(const i of e){if(n.ra.has(i)){It("SyncEngine","Adding an already active target "+i);continue}const s=yield Rj(n.localStore,i),o=yield y_(n.localStore,s);yield OP(n,sU(s),o.targetId,!1),jI(n.remoteStore,o)}for(const i of t)n.ra.has(i)&&(yield __(n.localStore,i,!1).then(()=>{BE(n.remoteStore,i),x_(n,i)}).catch(Em))}}),eO.apply(this,arguments)}function tO(r){const e=Bt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=tU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o8.bind(null,e),e.sa.zo=Y6.bind(null,e.eventManager),e.sa.wa=Q6.bind(null,e.eventManager),e}function nO(r){const e=Bt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u8.bind(null,e),e}class oU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,nt.Z)(function*(){t.M=jE(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return kj(this.persistence,new Dj,e.initialUser,this.M)}ya(e){return new A6(nP.Yi,this.M)}ga(e){return new Uj}terminate(){var e=this;return(0,nt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aU extends oU{constructor(e,t,n){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,nt.Z)(function*(){yield t().call(n,e),yield n.Ta.initialize(n,e),yield nO(n.Ta.syncEngine),yield T_(n.Ta.remoteStore),yield n.persistence.Ts(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ia(e){return kj(this.persistence,new Dj,e.initialUser,this.M)}pa(e){return new l6(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=ZM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ja.withCacheSize(this.cacheSizeBytes):ja.DEFAULT;return new KM(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Vj(),FI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Uj}}class T8 extends aU{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,nt.Z)(function*(){yield t().call(n,e);const i=n.Ta.syncEngine;n.sharedClientState instanceof oP&&(n.sharedClientState.syncEngine={$r:g8.bind(null,i),Br:y8.bind(null,i),Lr:_8.bind(null,i),Fs:v8.bind(null,i),Fr:p8.bind(null,i)},yield n.sharedClientState.start()),yield n.persistence.Ts(function(){var s=(0,nt.Z)(function*(o){yield function m8(r,e){return QP.apply(this,arguments)}(n.Ta.syncEngine,o),n.gcScheduler&&(o&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):o||n.gcScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}ga(e){const t=Vj();if(!oP.vt(t))throw new Et(st.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ZM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new oP(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class rO{initialize(e,t){var n=this;return(0,nt.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=i=>nU(n.syncEngine,i,1),n.remoteStore.remoteSyncer.handleCredentialChange=d8.bind(null,n.syncEngine),yield wP(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Z6}createDatastore(e){const t=jE(e.databaseInfo.databaseId),n=new O6(e.databaseInfo);return new L6(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,s=l=>nU(this.syncEngine,l,0),o=Bj.vt()?new Bj:new k6,new j6(t,n,i,s,o);var t,n,i,s,o}createSyncEngine(e,t){return function(n,i,s,o,l,f,g){const y=new n8(n,i,s,o,l,f);return g&&(y.da=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return function(){var e=(0,nt.Z)(function*(t){const n=Bt(t);It("RemoteStore","RemoteStore shutting down."),n.wu.add(5),yield b_(n),n.gu.shutdown(),n.yu.set("Unknown")});return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}function uU(r,e=10240){let t=0;return{read:()=>(0,nt.Z)(function*(){if(t<r.byteLength){const n={value:r.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}})(),cancel:()=>(0,nt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class BI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class E8{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ms,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(n=>{n&&n.Mu()?this.metadata.resolve(n.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==n?void 0:n.payload)}`))},n=>this.metadata.reject(n))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,nt.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,nt.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,nt.Z)(function*(){const t=yield e.Va();if(null===t)return null;const n=e.ba.decode(t),i=Number(n);isNaN(i)&&e.va(`length string (${n}) is not valid number`);const s=yield e.Sa(i);return new X6(JSON.parse(s),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,nt.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}Sa(e){var t=this;return(0,nt.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const n=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,nt.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class w8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,nt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Et(st.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(i=(0,nt.Z)(function*(s,o){const l=Bt(s),f=AE(l.M)+"/documents",g={documents:o.map(M=>IE(l.M,M))},y=yield l._o("BatchGetDocuments",f,g),T=new Map;y.forEach(M=>{const L=function wH(r,e){return"found"in e?function(t,n){En(!!n.found);const i=Hc(t,n.found.name),s=Ps(n.found.updateTime),o=new ko({mapValue:{fields:n.found.fields}});return qr.newFoundDocument(i,s,o)}(r,e):"missing"in e?function(t,n){En(!!n.missing),En(!!n.readTime);const i=Hc(t,n.missing),s=Ps(n.readTime);return qr.newNoDocument(i,s)}(r,e):Xt()}(l.M,M);T.set(L.key.toString(),L)});const S=[];return o.forEach(M=>{const L=T.get(M.toString());En(!!L),S.push(L)}),S}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return n.forEach(i=>t.recordVersion(i)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new EE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,nt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=Ft.fromPath(i);e.mutations.push(new PM(s,e.precondition(s)))}),yield(n=(0,nt.Z)(function*(i,s){const o=Bt(i),l=AE(o.M)+"/documents",f={writes:s.map(g=>DE(o.M,g))};yield o.co("Commit",l,f)}),function(i,s){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xt();t=mn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Et(st.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Wi.updateTime(t):Wi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mn.min()))throw new Et(st.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wi.updateTime(t)}return Wi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class S8{constructor(e,t,n,i,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=s,this.xa=n.maxAttempts,this.No=new aP(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,nt.Z)(function*(){const t=new w8(e.datastore),n=e.ka(t);n&&n.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ma(s)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!hE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!LF(t)}return!1}}class C8{constructor(e,t,n,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Xs.UNAUTHENTICATED,this.clientId=YL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var o=(0,nt.Z)(function*(l){It("FirestoreClient","Received user=",l.uid),yield s.authCredentialListener(l),s.user=l});return function(l){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(n,o=>(It("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,nt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Et(st.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,nt.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=w_(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function lU(r,e){return iO.apply(this,arguments)}function iO(){return iO=(0,nt.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(function(){var i=(0,nt.Z)(function*(s){n.isEqual(s)||(yield Mj(e.localStore,s),n=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r.offlineComponents=e}),iO.apply(this,arguments)}function cU(r,e){return sO.apply(this,arguments)}function sO(){return sO=(0,nt.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield oO(r);It("FirestoreClient","Initializing OnlineComponentProvider");const n=yield r.getConfiguration();yield e.initialize(t,n),r.setCredentialChangeListener(i=>Kj(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,s)=>Kj(e.remoteStore,s)),r.onlineComponents=e}),sO.apply(this,arguments)}function oO(r){return aO.apply(this,arguments)}function aO(){return aO=(0,nt.Z)(function*(r){return r.offlineComponents||(It("FirestoreClient","Using default OfflineComponentProvider"),yield lU(r,new oU)),r.offlineComponents}),aO.apply(this,arguments)}function VI(r){return uO.apply(this,arguments)}function uO(){return uO=(0,nt.Z)(function*(r){return r.onlineComponents||(It("FirestoreClient","Using default OnlineComponentProvider"),yield cU(r,new rO)),r.onlineComponents}),uO.apply(this,arguments)}function dU(r){return oO(r).then(e=>e.persistence)}function lO(r){return oO(r).then(e=>e.localStore)}function hU(r){return VI(r).then(e=>e.remoteStore)}function cO(r){return VI(r).then(e=>e.syncEngine)}function I_(r){return dO.apply(this,arguments)}function dO(){return dO=(0,nt.Z)(function*(r){const e=yield VI(r),t=e.eventManager;return t.onListen=r8.bind(null,e.syncEngine),t.onUnlisten=i8.bind(null,e.syncEngine),t}),dO.apply(this,arguments)}function fU(r,e,t={}){const n=new Ms;return r.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return function(i,s,o,l,f){const g=new BI({next:T=>{s.enqueueAndForget(()=>AP(i,y));const S=T.docs.has(o);!S&&T.fromCache?f.reject(new Et(st.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&l&&"server"===l.source?f.reject(new Et(st.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),y=new MP(l_(o.path),g,{includeMetadataChanges:!0,ku:!0});return xP(i,y)}(yield I_(r),r.asyncQueue,e,t,n)})),n.promise}function pU(r,e,t={}){const n=new Ms;return r.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return function(i,s,o,l,f){const g=new BI({next:T=>{s.enqueueAndForget(()=>AP(i,y)),T.fromCache&&"server"===l.source?f.reject(new Et(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),y=new MP(o,g,{includeMetadataChanges:!0,ku:!0});return xP(i,y)}(yield I_(r),r.asyncQueue,e,t,n)})),n.promise}const gU=new Map;function hO(r,e,t){if(!t)throw new Et(st.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function mU(r,e,t,n){if(!0===e&&!0===n)throw new Et(st.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function vU(r){if(!Ft.isDocumentKey(r))throw new Et(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function yU(r){if(Ft.isDocumentKey(r))throw new Et(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function HI(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Xt()}function Un(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Et(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=HI(r);throw new Et(st.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function _U(r,e){if(e<=0)throw new Et(st.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class bU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Et(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Et(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VE{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bU({}),this._settingsFrozen=!1,e instanceof dh?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Et(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dh(i.options.projectId)}(e))}get app(){if(!this._app)throw new Et(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Et(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new R4;switch(t.type){case"gapi":const n=t.client;return En(!("object"!=typeof n||null===n||!n.auth||!n.auth.getAuthHeaderValueForFirstParty)),new j4(n,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Et(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gU.get(e);t&&(It("ComponentProvider","Removing Datastore"),gU.delete(e),t.terminate())}(this),Promise.resolve()}}class zr{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class Mo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class $c extends Mo{constructor(e,t,n){super(e,t,l_(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new Ft(e))}withConverter(e){return new $c(this.firestore,e,this._path)}}function TU(r,e,...t){if(r=(0,vn.m9)(r),hO("collection","path",e),r instanceof VE){const n=Gn.fromString(e,...t);return yU(n),new $c(r,null,n)}{if(!(r instanceof zr||r instanceof $c))throw new Et(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Gn.fromString(e,...t));return yU(n),new $c(r.firestore,null,n)}}function GI(r,e,...t){if(r=(0,vn.m9)(r),1===arguments.length&&(e=YL.R()),hO("doc","path",e),r instanceof VE){const n=Gn.fromString(e,...t);return vU(n),new zr(r,null,new Ft(n))}{if(!(r instanceof zr||r instanceof $c))throw new Et(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Gn.fromString(e,...t));return vU(n),new zr(r.firestore,r instanceof $c?r.converter:null,new Ft(n))}}function EU(r,e){return r=(0,vn.m9)(r),e=(0,vn.m9)(e),(r instanceof zr||r instanceof $c)&&(e instanceof zr||e instanceof $c)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function wU(r,e){return r=(0,vn.m9)(r),e=(0,vn.m9)(e),r instanceof Mo&&e instanceof Mo&&r.firestore===e.firestore&&_E(r._query,e._query)&&r.converter===e.converter}class L8{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new aP(this,"async_queue_retry"),this.Qa=()=>{const t=FI();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=FI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=FI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Ms;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,nt.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!pm(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(n=>{throw this.Ua=n,this.qa=!1,zi("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(n)),n}).then(n=>(this.qa=!1,n))));return this.Fa=t,t}enqueueAfterDelay(e,t,n){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=CP.createAndSchedule(this,e,t,n,s=>this.Ha(s));return this.La.push(i),i}ja(){this.Ua&&Xt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,nt.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function fO(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of["next","error","complete"])if(i in n&&"function"==typeof n[i])return!0;return!1}(r)}class F8{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ms,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ri extends VE{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new L8,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||SU(this),this._firestoreClient.terminate()}}function Zi(r){return r._firestoreClient||SU(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function SU(r){var e;const t=r._freezeSettings(),n=(s=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new $4(r._databaseId,s,r._persistenceKey,(l=t).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams));var s,l;r._firestoreClient=new C8(r._authCredentials,r._appCheckCredentials,r._queue,n)}function CU(r,e,t){const n=new Ms;return r.asyncQueue.enqueue((0,nt.Z)(function*(){try{yield lU(r,t),yield cU(r,e),n.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===st.FAILED_PRECONDITION||s.code===st.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),n.reject(i)}var s})).then(()=>n.promise)}function xU(r){if(r._initialized||r._terminated)throw new Et(st.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ph{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Et(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qc(cs.fromBase64String(e))}catch(t){throw new Et(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qc(cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sm{constructor(e){this._methodName=e}}class $I{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mn(this._lat,e._lat)||Mn(this._long,e._long)}}const W8=/^__.*__$/;class K8{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new fm(e,this.data,this.fieldMask,t,this.fieldTransforms):new TE(e,this.data,t,this.fieldTransforms)}}class IU{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new fm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AU(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt()}}class qI{constructor(e,t,n,i,s,o){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=i,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new qI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:n,ic:!1});return i.rc(e),i}oc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:n,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return KI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(AU(this.ec)&&W8.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Z8{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||jE(e)}lc(e,t,n,i=!1){return new qI({ec:e,methodName:t,hc:n,path:ls.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cm(r){const e=r._freezeSettings(),t=jE(r._databaseId);return new Z8(r._databaseId,!!e.ignoreUndefinedProperties,t)}function zI(r,e,t,n,i,s={}){const o=r.lc(s.merge||s.mergeFields?2:0,e,t,i);vO("Data must be an object, but it was:",o,n);const l=MU(n,o);let f,g;if(s.merge)f=new s_(o.fieldMask),g=o.fieldTransforms;else if(s.mergeFields){const y=[];for(const T of s.mergeFields){const S=yO(e,T,t);if(!o.contains(S))throw new Et(st.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);OU(y,S)||y.push(S)}f=new s_(y),g=o.fieldTransforms.filter(T=>f.covers(T.field))}else f=null,g=o.fieldTransforms;return new K8(new ko(l),f,g)}class HE extends Sm{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof HE}}function DU(r,e,t){return new qI({ec:3,hc:e.settings.hc,methodName:r._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class pO extends Sm{_toFieldTransform(e){return new bE(e.path,new d_)}isEqual(e){return e instanceof pO}}class Y8 extends Sm{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=DU(this,e,!0),n=this.fc.map(s=>xm(s,t)),i=new dm(n);return new bE(e.path,i)}isEqual(e){return this===e}}class Q8 extends Sm{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=DU(this,e,!0),n=this.fc.map(s=>xm(s,t)),i=new hm(n);return new bE(e.path,i)}isEqual(e){return this===e}}class X8 extends Sm{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new h_(e.M,CF(e.M,this.dc));return new bE(e.path,t)}isEqual(e){return this===e}}function gO(r,e,t,n){const i=r.lc(1,e,t);vO("Data must be an object, but it was:",i,n);const s=[],o=ko.empty();sm(n,(f,g)=>{const y=WI(e,f,t);g=(0,vn.m9)(g);const T=i.oc(y);if(g instanceof HE)s.push(y);else{const S=xm(g,T);null!=S&&(s.push(y),o.set(y,S))}});const l=new s_(s);return new IU(o,l,i.fieldTransforms)}function mO(r,e,t,n,i,s){const o=r.lc(1,e,t),l=[yO(e,n,t)],f=[i];if(s.length%2!=0)throw new Et(st.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<s.length;S+=2)l.push(yO(e,s[S])),f.push(s[S+1]);const g=[],y=ko.empty();for(let S=l.length-1;S>=0;--S)if(!OU(g,l[S])){const M=l[S];let L=f[S];L=(0,vn.m9)(L);const H=o.oc(M);if(L instanceof HE)g.push(M);else{const $=xm(L,H);null!=$&&(g.push(M),y.set(M,$))}}const T=new s_(g);return new IU(y,T,o.fieldTransforms)}function kU(r,e,t,n=!1){return xm(t,r.lc(n?4:3,e))}function xm(r,e){if(PU(r=(0,vn.m9)(r)))return vO("Unsupported field value:",e,r),MU(r,e);if(r instanceof Sm)return function(t,n){if(!AU(n.ec))throw n.ac(`${t._methodName}() can only be used with update() and set()`);if(!n.path)throw n.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,n){const i=[];let s=0;for(const o of t){let l=xm(o,n.uc(s));null==l&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(r,e)}return function(t,n){if(null===(t=(0,vn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return CF(n.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Pi.fromDate(t);return{timestampValue:xE(n.M,i)}}if(t instanceof Pi){const i=new Pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xE(n.M,i)}}if(t instanceof $I)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qc)return{bytesValue:GF(n.M,t._byteString)};if(t instanceof zr){const i=n.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw n.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:RM(t.firestore._databaseId||n.databaseId,t._key.path)}}throw n.ac(`Unsupported field value: ${HI(t)}`)}(r,e)}function MU(r,e){const t={};return JL(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sm(r,(n,i)=>{const s=xm(i,e.sc(n));null!=s&&(t[n]=s)}),{mapValue:{fields:t}}}function PU(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Pi||r instanceof $I||r instanceof qc||r instanceof zr||r instanceof Sm)}function vO(r,e,t){if(!PU(t)||"object"!=typeof(n=t)||null===n||Object.getPrototypeOf(n)!==Object.prototype&&null!==Object.getPrototypeOf(n)){const n=HI(t);throw e.ac("an object"===n?r+" a custom object":r+" "+n)}var n}function yO(r,e,t){if((e=(0,vn.m9)(e))instanceof ph)return e._internalPath;if("string"==typeof e)return WI(r,e);throw KI("Field path arguments must be of type string or ",r,!1,void 0,t)}const J8=new RegExp("[~\\*/\\[\\]]");function WI(r,e,t){if(e.search(J8)>=0)throw KI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ph(...e.split("."))._internalPath}catch(n){throw KI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function KI(r,e,t,n,i){const s=n&&!n.isEmpty(),o=void 0!==i;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let f="";return(s||o)&&(f+=" (found",s&&(f+=` in field ${n}`),o&&(f+=` in document ${i}`),f+=")"),new Et(st.INVALID_ARGUMENT,l+r+f)}function OU(r,e){return r.some(t=>t.isEqual(e))}class GE{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eG extends GE{data(){return super.data()}}function ZI(r,e){return"string"==typeof e?WI(r,e):e instanceof ph?e._internalPath:e._delegate._internalPath}class Im{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gh extends GE{constructor(e,t,n,i,s,o){super(e,t,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $E(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ZI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class $E extends gh{data(e={}){return super.data(e)}}class Cp{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Im(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new $E(this._firestore,this._userDataWriter,n.key,n,new Im(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let s=0;return n._snapshot.docChanges.map(o=>({type:"added",doc:new $E(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Im(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter),oldIndex:-1,newIndex:s++}))}{let s=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const l=new $E(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Im(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let f=-1,g=-1;return 0!==o.type&&(f=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),g=s.indexOf(o.doc.key)),{type:tG(o.type),doc:l,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tG(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt()}}function RU(r,e){return r instanceof gh&&e instanceof gh?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Cp&&e instanceof Cp&&r._firestore===e._firestore&&wU(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function NU(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Et(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qE{}function xp(r,...e){for(const t of e)r=t._apply(r);return r}class nG extends qE{constructor(e,t,n){super(),this._c=e,this.wc=t,this.mc=n,this.type="where"}_apply(e){const t=Cm(e.firestore),n=function(i,s,o,l,f,g,y){let T;if(f.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new Et(st.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){VU(y,g);const M=[];for(const L of y)M.push(BU(l,i,L));T={arrayValue:{values:M}}}else T=BU(l,i,y)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||VU(y,g),T=kU(o,"where",y,"in"===g||"not-in"===g);const S=eo.create(f,g,T);return function(M,L){if(L.S()){const $=IM(M);if(null!==$&&!$.isEqual(L.field))throw new Et(st.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${$.toString()}' and '${L.field.toString()}'`);const De=xM(M);null!==De&&HU(0,L.field,De)}const H=function($,De){for(const We of $.filters)if(De.indexOf(We.op)>=0)return We.op;return null}(M,function($){switch($){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(L.op));if(null!==H)throw new Et(st.INVALID_ARGUMENT,H===L.op?`Invalid query. You cannot use more than one '${L.op.toString()}' filter.`:`Invalid query. You cannot use '${L.op.toString()}' filters with '${H.toString()}' filters.`)}(i,S),S}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Mo(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new hh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class iG extends qE{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(n,i,s){if(null!==n.startAt)throw new Et(st.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==n.endAt)throw new Et(st.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new u_(i,s);return function(l,f){if(null===xM(l)){const g=IM(l);null!==g&&HU(0,g,f.field)}}(n,o),o}(e._query,this._c,this.gc);return new Mo(e.firestore,e.converter,function(n,i){const s=n.explicitOrderBy.concat([i]);return new hh(n.path,n.collectionGroup,s,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,t))}}class LU extends qE{constructor(e,t,n){super(),this.type=e,this.yc=t,this.Ic=n}_apply(e){return new Mo(e.firestore,e.converter,_F(e._query,this.yc,this.Ic))}}class FU extends qE{constructor(e,t,n){super(),this.type=e,this.Tc=t,this.Ec=n}_apply(e){const t=UU(e,this.type,this.Tc,this.Ec);return new Mo(e.firestore,e.converter,(i=t,new hh((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,i,n.endAt)));var n,i}}class jU extends qE{constructor(e,t,n){super(),this.type=e,this.Tc=t,this.Ec=n}_apply(e){const t=UU(e,this.type,this.Tc,this.Ec);return new Mo(e.firestore,e.converter,(i=t,new hh((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,i)));var n,i}}function UU(r,e,t,n){if(t[0]=(0,vn.m9)(t[0]),t[0]instanceof GE)return function(i,s,o,l,f){if(!l)throw new Et(st.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const g=[];for(const y of c_(i))if(y.field.isKeyField())g.push(um(s,l.key));else{const T=l.data.field(y.field);if(EM(T))throw new Et(st.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const S=y.field.canonicalString();throw new Et(st.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}g.push(T)}return new yp(g,f)}(r._query,r.firestore._databaseId,e,t[0]._document,n);{const i=Cm(r.firestore);return function(s,o,l,f,g,y){const T=s.explicitOrderBy;if(g.length>T.length)throw new Et(st.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let M=0;M<g.length;M++){const L=g[M];if(T[M].field.isKeyField()){if("string"!=typeof L)throw new Et(st.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof L}`);if(!AM(s)&&-1!==L.indexOf("/"))throw new Et(st.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${L}' contains a slash.`);const H=s.path.child(Gn.fromString(L));if(!Ft.isDocumentKey(H))throw new Et(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${H}' is not because it contains an odd number of segments.`);const $=new Ft(H);S.push(um(o,$))}else{const H=kU(l,f,L);S.push(H)}}return new yp(S,y)}(r._query,r.firestore._databaseId,i,e,t,n)}}function BU(r,e,t){if("string"==typeof(t=(0,vn.m9)(t))){if(""===t)throw new Et(st.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AM(e)&&-1!==t.indexOf("/"))throw new Et(st.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Gn.fromString(t));if(!Ft.isDocumentKey(n))throw new Et(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return um(r,new Ft(n))}if(t instanceof zr)return um(r,t._key);throw new Et(st.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${HI(t)}.`)}function VU(r,e){if(!Array.isArray(r)||0===r.length)throw new Et(st.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(r.length>10)throw new Et(st.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function HU(r,e,t){if(!t.isEqual(e))throw new Et(st.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const hG={maxAttempts:5};class _O{convertValue(e,t="none"){switch(am(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(om(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xt()}}convertObject(e,t){const n={};return sm(e.fields,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertGeoPoint(e){return new $I(Ei(e.latitude),Ei(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=eF(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dE(e));default:return null}}convertTimestamp(e){const t=gp(e);return new Pi(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Gn.fromString(e);En(JF(n));const i=new dh(n.get(1),n.get(3)),s=new Ft(n.popFirst(5));return i.isEqual(t)||zi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function YI(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class fG extends _O{constructor(e){super(),this.firestore=e}convertBytes(e){return new qc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}class GU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cm(e)}set(e,t,n){this._verifyNotCommitted();const i=Ip(e,this._firestore),s=YI(i.converter,t,n),o=zI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,n);return this._mutations.push(o.toMutation(i._key,Wi.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=Ip(e,this._firestore);let o;return o="string"==typeof(t=(0,vn.m9)(t))||t instanceof ph?mO(this._dataReader,"WriteBatch.update",s._key,t,n,i):gO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Wi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ip(e,this._firestore);return this._mutations=this._mutations.concat(new EE(t._key,Wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(st.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ip(r,e){if((r=(0,vn.m9)(r)).firestore!==e)throw new Et(st.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class Am extends _O{constructor(e){super(),this.firestore=e}convertBytes(e){return new qc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}function $U(r,e,t){r=Un(r,zr);const n=Un(r.firestore,ri),i=YI(r.converter,e,t);return A_(n,[zI(Cm(n),"setDoc",r._key,i,null!==r.converter,t).toMutation(r._key,Wi.none())])}function qU(r,e,t,...n){r=Un(r,zr);const i=Un(r.firestore,ri),s=Cm(i);let o;return o="string"==typeof(e=(0,vn.m9)(e))||e instanceof ph?mO(s,"updateDoc",r._key,e,t,n):gO(s,"updateDoc",r._key,e),A_(i,[o.toMutation(r._key,Wi.exists(!0))])}function zU(r,...e){var t,n,i;r=(0,vn.m9)(r);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||fO(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges};if(fO(e[o])){const T=e[o];e[o]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[o+1]=null===(n=T.error)||void 0===n?void 0:n.bind(T),e[o+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let f,g,y;if(r instanceof zr)g=Un(r.firestore,ri),y=l_(r._key.path),f={next:T=>{e[o]&&e[o](bO(g,r,T))},error:e[o+1],complete:e[o+2]};else{const T=Un(r,Mo);g=Un(T.firestore,ri),y=T._query;const S=new Am(g);f={next:M=>{e[o]&&e[o](new Cp(g,S,T,M))},error:e[o+1],complete:e[o+2]},NU(r._query)}return function(T,S,M,L){const H=new BI(L),$=new MP(S,H,M);return T.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return xP(yield I_(T),$)})),()=>{H.Aa(),T.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return AP(yield I_(T),$)}))}}(Zi(g),y,l,f)}function A_(r,e){return function(t,n){const i=new Ms;return t.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return function s8(r,e,t){return LP.apply(this,arguments)}(yield cO(t),n,i)})),i.promise}(Zi(r),e)}function bO(r,e,t){const n=t.docs.get(e._key),i=new Am(r);return new gh(r,i,e._key,n,new Im(t.hasPendingWrites,t.fromCache),e.converter)}class wG extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cm(e)}get(e){const t=Ip(e,this._firestore),n=new fG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Xt();const s=i[0];if(s.isFoundDocument())return new GE(this._firestore,n,s.key,s,t.converter);if(s.isNoDocument())return new GE(this._firestore,n,t._key,null,t.converter);throw Xt()})}set(e,t,n){const i=Ip(e,this._firestore),s=YI(i.converter,t,n),o=zI(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,n);return this._transaction.set(i._key,o),this}update(e,t,n,...i){const s=Ip(e,this._firestore);let o;return o="string"==typeof(t=(0,vn.m9)(t))||t instanceof ph?mO(this._dataReader,"Transaction.update",s._key,t,n,i):gO(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=Ip(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ip(e,this._firestore),n=new Am(this._firestore);return super.get(e).then(i=>new gh(this._firestore,n,t._key,i._document,new Im(!1,!1),t.converter))}}function TO(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Et("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function KU(){if("undefined"==typeof Uint8Array)throw new Et("unimplemented","Uint8Arrays are not available in this environment.")}function ZU(){if(!function H4(){return"undefined"!=typeof atob}())throw new Et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){r_=pu.SDK_VERSION,(0,pu._registerComponent)(new ah.wA("firestore",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=new ri(i,new L4(t.getProvider("auth-internal")),new U4(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),s._setSettings(n),s},"PUBLIC")),(0,pu.registerVersion)(WL,"3.4.9",r),(0,pu.registerVersion)(WL,"3.4.9","esm2017")}();class zE{constructor(e){this._delegate=e}static fromBase64String(e){return ZU(),new zE(qc.fromBase64String(e))}static fromUint8Array(e){return KU(),new zE(qc.fromUint8Array(e))}toBase64(){return ZU(),this._delegate.toBase64()}toUint8Array(){return KU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function EO(r){return function PG(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(r,["next","error","complete"])}class OG{enableIndexedDbPersistence(e,t){return function U8(r,e){xU(r=Un(r,ri));const t=Zi(r),n=r._freezeSettings(),i=new rO;return CU(t,i,new aU(i,n.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function B8(r){xU(r=Un(r,ri));const e=Zi(r),t=r._freezeSettings(),n=new rO;return CU(e,n,new T8(n,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function V8(r){if(r._initialized&&!r._terminated)throw new Et(st.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ms;return r._queue.enqueueAndForgetEvenWhileRestricted((0,nt.Z)(function*(){try{yield(t=(0,nt.Z)(function*(n){if(!Ul.vt())return Promise.resolve();const i=n+"main";yield Ul.delete(i)}),function(n){return t.apply(this,arguments)})(ZM(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class YU{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof dh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&lE("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function R8(r,e,t,n={}){var i;const s=(r=Un(r,VE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&lE("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),n.mockUserToken){let o,l;if("string"==typeof n.mockUserToken)o=n.mockUserToken,l=Xs.MOCK_USER;else{o=(0,vn.Sg)(n.mockUserToken,null===(i=r._app)||void 0===i?void 0:i.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new Et(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Xs(f)}r._authCredentials=new N4(new KL(o,l))}}(this._delegate,e,t,n)}enableNetwork(){return function G8(r){return function x8(r){return r.asyncQueue.enqueue((0,nt.Z)(function*(){const e=yield dU(r),t=yield hU(r);return e.setNetworkEnabled(!0),function(n){const i=Bt(n);return i.wu.delete(0),UE(i)}(t)}))}(Zi(r=Un(r,ri)))}(this._delegate)}disableNetwork(){return function $8(r){return function I8(r){return r.asyncQueue.enqueue((0,nt.Z)(function*(){const e=yield dU(r),t=yield hU(r);return e.setNetworkEnabled(!1),(n=(0,nt.Z)(function*(i){const s=Bt(i);s.wu.add(0),yield b_(s),s.yu.set("Offline")}),function(i){return n.apply(this,arguments)})(t);var n}))}(Zi(r=Un(r,ri)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,mU("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function H8(r){return function(e){const t=new Ms;return e.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return function l8(r,e){return VP.apply(this,arguments)}(yield cO(e),t)})),t.promise}(Zi(r=Un(r,ri)))}(this._delegate)}onSnapshotsInSync(e){return function EG(r,e){return function k8(r,e){const t=new BI(e);return r.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return n=yield I_(r),i=t,Bt(n).bu.add(i),void i.next();var n,i})),()=>{t.Aa(),r.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return n=yield I_(r),i=t,void Bt(n).bu.delete(i);var n,i}))}}(Zi(r=Un(r,ri)),fO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new D_(this,TU(this._delegate,e))}catch(t){throw ra(t,"collection()","Firestore.collection()")}}doc(e){try{return new rl(this,GI(this._delegate,e))}catch(t){throw ra(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ia(this,function N8(r,e){if(r=Un(r,VE),hO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Et(st.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mo(r,null,(t=e,new hh(Gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ra(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function SG(r,e,t){r=Un(r,ri);const n=Object.assign(Object.assign({},hG),t);return function(i){if(i.maxAttempts<1)throw new Et(st.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function M8(r,e,t){const n=new Ms;return r.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){const i=yield(s=r,VI(s).then(o=>o.datastore));var s;new S8(r.asyncQueue,i,t,e,n).run()})),n.promise}(Zi(r),i=>e(new wG(r,i)),n)}(this._delegate,t=>e(new QU(this,t)))}batch(){return Zi(this._delegate),new XU(new GU(this._delegate,e=>A_(this._delegate,e)))}loadBundle(e){return function q8(r,e){const t=Zi(r=Un(r,ri)),n=new F8;return function P8(r,e,t,n){const i=function(s,o){let l;return l="string"==typeof s?(new TextEncoder).encode(s):s,f=function(f,g){if(f instanceof Uint8Array)return uU(f,g);if(f instanceof ArrayBuffer)return uU(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new E8(f,o);var f}(t,jE(e));r.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){!function b8(r,e,t){const n=Bt(r);var i;(i=(0,nt.Z)(function*(s,o,l){try{const f=yield o.getMetadata();if(yield function(S,M){const L=Bt(S),H=Ps(M.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",$=>L._s.getBundleMetadata($,M.id)).then($=>!!$&&$.createTime.compareTo(H)>=0)}(s.localStore,f))return yield o.close(),l._completeWith({taskState:"Success",documentsLoaded:(S=f).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);l._updateProgress(Qj(f));const g=new J6(f,s.localStore,o.M);let y=yield o.ma();for(;y;){const S=yield g.Fu(y);S&&l._updateProgress(S),y=yield o.ma()}const T=yield g.complete();return yield fh(s,T.Lu,void 0),yield function(S,M){const L=Bt(S);return L.persistence.runTransaction("Save bundle","readwrite",H=>L._s.saveBundleMetadata(H,M))}(s.localStore,f),l._completeWith(T.progress),Promise.resolve(T.Bu)}catch(f){return lE("SyncEngine",`Loading bundle failed with ${f}`),l._failWith(f),Promise.resolve(new Set)}var S}),function(s,o,l){return i.apply(this,arguments)})(n,e,t).then(i=>{n.sharedClientState.notifyBundleLoaded(i)})}(yield cO(r),i,n)}))}(t,r._databaseId,e,n),n}(this._delegate,e)}namedQuery(e){return function z8(r,e){return function O8(r,e){return r.asyncQueue.enqueue((0,nt.Z)(function*(){return function(t,n){const i=Bt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i._s.getNamedQuery(s,n))}(yield lO(r),e)}))}(Zi(r=Un(r,ri)),e).then(t=>t?new Mo(r,null,t.query):null)}(this._delegate,e).then(t=>t?new ia(this,t):null)}}class QI extends _O{constructor(e){super(),this.firestore=e}convertBytes(e){return new zE(new qc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return rl.forKey(t,this.firestore,null)}}class QU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new QI(e)}get(e){const t=km(e);return this._delegate.get(t).then(n=>new WE(this._firestore,new gh(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const i=km(e);return n?(TO("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=km(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=km(e);return this._delegate.delete(t),this}}class XU{constructor(e){this._delegate=e}set(e,t,n){const i=km(e);return n?(TO("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=km(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=km(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dm{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new $E(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new KE(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Dm.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let s=i.get(t);return s||(s=new Dm(e,new QI(e),t),i.set(t,s)),s}}Dm.INSTANCES=new WeakMap;class rl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QI(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Et("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new rl(t,new zr(t._delegate,n,new Ft(e)))}static forKey(e,t,n){return new rl(t,new zr(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new D_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new D_(this.firestore,TU(this._delegate,e))}catch(t){throw ra(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,vn.m9)(e))instanceof zr&&EU(this._delegate,e)}set(e,t){t=TO("DocumentReference.set",t);try{return t?$U(this._delegate,e,t):$U(this._delegate,e)}catch(n){throw ra(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?qU(this._delegate,e):qU(this._delegate,e,t,...n)}catch(i){throw ra(i,"updateDoc()","DocumentReference.update()")}}delete(){return function bG(r){return A_(Un(r.firestore,ri),[new EE(r._key,Wi.none())])}(this._delegate)}onSnapshot(...e){const t=JU(e),n=e2(e,i=>new WE(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zU(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function gG(r){r=Un(r,zr);const e=Un(r.firestore,ri),t=Zi(e),n=new Am(e);return function A8(r,e){const t=new Ms;return r.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return(n=(0,nt.Z)(function*(i,s,o){try{const l=yield function(f,g){const y=Bt(f);return y.persistence.runTransaction("read document","readonly",T=>y.fi.Ls(T,g))}(i,s);l.isFoundDocument()?o.resolve(l):l.isNoDocument()?o.resolve(null):o.reject(new Et(st.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const f=w_(l,`Failed to get document '${s} from cache`);o.reject(f)}}),function(i,s,o){return n.apply(this,arguments)})(yield lO(r),e,t);var n})),t.promise}(t,r._key).then(i=>new gh(e,n,r._key,i,new Im(null!==i&&i.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function mG(r){r=Un(r,zr);const e=Un(r.firestore,ri);return fU(Zi(e),r._key,{source:"server"}).then(t=>bO(e,r,t))}(this._delegate):function pG(r){r=Un(r,zr);const e=Un(r.firestore,ri);return fU(Zi(e),r._key).then(t=>bO(e,r,t))}(this._delegate),t.then(n=>new WE(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new rl(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}function ra(r,e,t){return r.message=r.message.replace(e,t),r}function JU(r){for(const e of r)if("object"==typeof e&&!EO(e))return e;return{}}function e2(r,e){var t,n;let i;return i=EO(r[0])?r[0]:EO(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(n=i.complete)||void 0===n?void 0:n.bind(i)}}class WE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new rl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return RU(this._delegate,e._delegate)}}class KE extends WE{data(e){const t=this._delegate.data(e);return function O4(r,e){r||Xt()}(void 0!==t),t}}class ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QI(e)}where(e,t,n){try{return new ia(this.firestore,xp(this._delegate,function rG(r,e,t){const n=e,i=ZI("where",r);return new nG(i,n,t)}(e,t,n)))}catch(i){throw ra(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ia(this.firestore,xp(this._delegate,function sG(r,e="asc"){const t=e,n=ZI("orderBy",r);return new iG(n,t)}(e,t)))}catch(n){throw ra(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ia(this.firestore,xp(this._delegate,function oG(r){return _U("limit",r),new LU("limit",r,"F")}(e)))}catch(t){throw ra(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ia(this.firestore,xp(this._delegate,function aG(r){return _U("limitToLast",r),new LU("limitToLast",r,"L")}(e)))}catch(t){throw ra(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ia(this.firestore,xp(this._delegate,function uG(...r){return new FU("startAt",r,!0)}(...e)))}catch(t){throw ra(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ia(this.firestore,xp(this._delegate,function lG(...r){return new FU("startAfter",r,!1)}(...e)))}catch(t){throw ra(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ia(this.firestore,xp(this._delegate,function cG(...r){return new jU("endBefore",r,!1)}(...e)))}catch(t){throw ra(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ia(this.firestore,xp(this._delegate,function dG(...r){return new jU("endAt",r,!0)}(...e)))}catch(t){throw ra(t,"endAt()","Query.endAt()")}}isEqual(e){return wU(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yG(r){r=Un(r,Mo);const e=Un(r.firestore,ri),t=Zi(e),n=new Am(e);return function D8(r,e){const t=new Ms;return r.asyncQueue.enqueueAndForget((0,nt.Z)(function*(){return(n=(0,nt.Z)(function*(i,s,o){try{const l=yield RI(i,s,!0),f=new eU(s,l._i),g=f.Wu(l.documents),y=f.applyChanges(g,!1);o.resolve(y.snapshot)}catch(l){const f=w_(l,`Failed to execute query '${s} against cache`);o.reject(f)}}),function(i,s,o){return n.apply(this,arguments)})(yield lO(r),e,t);var n})),t.promise}(t,r._query).then(i=>new Cp(e,n,r,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function _G(r){r=Un(r,Mo);const e=Un(r.firestore,ri),t=Zi(e),n=new Am(e);return pU(t,r._query,{source:"server"}).then(i=>new Cp(e,n,r,i))}(this._delegate):function vG(r){r=Un(r,Mo);const e=Un(r.firestore,ri),t=Zi(e),n=new Am(e);return NU(r._query),pU(t,r._query).then(i=>new Cp(e,n,r,i))}(this._delegate),t.then(n=>new wO(this.firestore,new Cp(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=JU(e),n=e2(e,i=>new wO(this.firestore,new Cp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zU(this._delegate,t,n)}withConverter(e){return new ia(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}class NG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new KE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ia(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new KE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new NG(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new KE(this._firestore,n))})}isEqual(e){return RU(this._delegate,e._delegate)}}class D_ extends ia{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new rl(this.firestore,e):null}doc(e){try{return new rl(this.firestore,void 0===e?GI(this._delegate):GI(this._delegate,e))}catch(t){throw ra(t,"doc()","CollectionReference.doc()")}}add(e){return function TG(r,e){const t=Un(r.firestore,ri),n=GI(r),i=YI(r.converter,e);return A_(t,[zI(Cm(r.firestore),"addDoc",n._key,i,null!==r.converter,{}).toMutation(n._key,Wi.exists(!1))]).then(()=>n)}(this._delegate,e).then(t=>new rl(this.firestore,t))}isEqual(e){return EU(this._delegate,e._delegate)}withConverter(e){return new D_(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}function km(r){return Un(r,zr)}class SO{constructor(...e){this._delegate=new ph(...e)}static documentId(){return new SO(ls.keyField().canonicalString())}isEqual(e){return(e=(0,vn.m9)(e))instanceof ph&&this._delegate._internalPath.isEqual(e._internalPath)}}class Mm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xG(){return new pO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Mm(e)}static delete(){const e=function CG(){return new HE("deleteField")}();return e._methodName="FieldValue.delete",new Mm(e)}static arrayUnion(...e){const t=function IG(...r){return new Y8("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Mm(t)}static arrayRemove(...e){const t=function AG(...r){return new Q8("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Mm(t)}static increment(e){const t=function DG(r){return new X8("increment",r)}(e);return t._methodName="FieldValue.increment",new Mm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LG={Firestore:YU,GeoPoint:$I,Timestamp:Pi,Blob:zE,Transaction:QU,WriteBatch:XU,DocumentReference:rl,DocumentSnapshot:WE,Query:ia,QueryDocumentSnapshot:KE,QuerySnapshot:wO,CollectionReference:D_,FieldPath:SO,FieldValue:Mm,setLogLevel:function RG(r){!function P4(r){pp.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function jG(r){(function FG(r,e){r.INTERNAL.registerComponent(new ah.wA("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(n,i)},"PUBLIC").setServiceProps(Object.assign({},LG)))})(r,(e,t)=>new YU(e,t,new OG)),r.registerVersion("@firebase/firestore-compat","0.1.18")}(Hx.Z);var UG=B(6451),XI=B(5363),BG=B(6063);class VG extends Ui.x{constructor(e=1/0,t=1/0,n=BG.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(n.push(e),!i&&n.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:n,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=n?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<n.length&&n.splice(0,n.length-s),!i){const o=t.now();let l=0;for(let f=1;f<n.length&&n[f]<=o;f+=2)l=f;l&&n.splice(0,l+1)}}}var HG=B(3099);function t2(r,e,t){let n,i=!1;return r&&"object"==typeof r?({bufferSize:n=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=r):n=null!=r?r:1/0,(0,HG.B)({connector:()=>new VG(n,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function n2(r,e){return(0,Qa.m)(e)?_r(()=>r,e):_r(()=>r)}var CO=B(9468);B(5867);const i2=new Map,WG={activated:!1,tokenObservers:[]},KG={initialized:!1,enabled:!1};function Ns(r){return i2.get(r)||WG}function Bl(r,e){i2.set(r,e)}function eA(){return KG}class JG{constructor(e,t,n,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,nt.Z)(function*(){t.stop();try{t.pending=new vn.BH,yield function e$(r){return new Promise(e=>{setTimeout(e,r)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new vn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(n){t.retryPolicy(n)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const sa=new vn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function o2(r){if(!Ns(r).activated)throw sa.create("use-before-activation",{appName:r.name})}function DO(r,e){return kO.apply(this,arguments)}function kO(){return kO=(0,nt.Z)(function*({url:r,body:e},t){const n={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(n["X-Firebase-Client"]=T)}const s={method:"POST",body:JSON.stringify(e),headers:n};let o,l;try{o=yield fetch(r,s)}catch(T){throw sa.create("fetch-network-error",{originalErrorMessage:T.message})}if(200!==o.status)throw sa.create("fetch-status-error",{httpStatus:o.status});try{l=yield o.json()}catch(T){throw sa.create("fetch-parse-error",{originalErrorMessage:T.message})}const f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw sa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const g=1e3*Number(f[1]),y=Date.now();return{token:l.token,expireTimeMillis:y+g,issuedAtTimeMillis:y}}),kO.apply(this,arguments)}function s$(r,e){const{projectId:t,appId:n,apiKey:i}=r.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${n}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ZE="firebase-app-check-store";let rA=null;function u2(){return rA||(rA=new Promise((r,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=n=>{r(n.target.result)},t.onerror=n=>{var i;e(sa.create("storage-open",{originalErrorMessage:null===(i=n.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=n=>{0===n.oldVersion&&n.target.result.createObjectStore(ZE,{keyPath:"compositeKey"})}}catch(t){e(sa.create("storage-open",{originalErrorMessage:t.message}))}}),rA)}function MO(){return MO=(0,nt.Z)(function*(r,e){const n=(yield u2()).transaction(ZE,"readwrite"),s=n.objectStore(ZE).put({compositeKey:r,value:e});return new Promise((o,l)=>{s.onsuccess=f=>{o()},n.onerror=f=>{var g;l(sa.create("storage-set",{originalErrorMessage:null===(g=f.target.error)||void 0===g?void 0:g.message}))}})}),MO.apply(this,arguments)}const YE=new el.Yd("@firebase/app-check");function h2(r,e){return(0,vn.hl)()?function l$(r,e){return function l2(r,e){return MO.apply(this,arguments)}(function d2(r){return`${r.options.appId}-${r.name}`}(r),e)}(r,e).catch(t=>{YE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function f2(){return eA().enabled}function p2(){return NO.apply(this,arguments)}function NO(){return NO=(0,nt.Z)(function*(){const r=eA();if(r.enabled&&r.token)return r.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),NO.apply(this,arguments)}const g$={error:"UNKNOWN_ERROR"};function m$(r){return vn.US.encodeString(JSON.stringify(r),!1)}function iA(r){return LO.apply(this,arguments)}function LO(){return LO=(0,nt.Z)(function*(r,e=!1){const t=r.app;o2(t);const n=Ns(t);let s,i=n.token;if(!i){const f=yield n.cachedTokenPromise;f&&sA(f)&&(i=f)}if(!e&&i&&sA(i))return{token:i.token};let l,o=!1;if(f2()){n.exchangeTokenPromise||(n.exchangeTokenPromise=DO(s$(t,yield p2()),r.heartbeatServiceProvider).then(g=>(n.exchangeTokenPromise=void 0,g)),o=!0);const f=yield n.exchangeTokenPromise;return yield h2(t,f),Bl(t,Object.assign(Object.assign({},n),{token:f})),{token:f.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().then(f=>(n.exchangeTokenPromise=void 0,f)),o=!0),i=yield n.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?YE.warn(f.message):YE.error(f),s=f}return i?(l={token:i.token},Bl(t,Object.assign(Object.assign({},n),{token:i})),yield h2(t,i)):l=y$(s),o&&m2(t,l),l}),LO.apply(this,arguments)}function jO(r,e){const t=Ns(r),n=t.tokenObservers.filter(i=>i.next!==e);0===n.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Bl(r,Object.assign(Object.assign({},t),{tokenObservers:n}))}function g2(r){const{app:e}=r,t=Ns(e);let n=t.tokenRefresher;n||(n=function v$(r){const{app:e}=r;return new JG((0,nt.Z)(function*(){let n;if(n=Ns(e).token?yield iA(r,!0):yield iA(r),n.error)throw n.error}),()=>!0,()=>{const t=Ns(e);if(t.token){let n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,t.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(r),Bl(e,Object.assign(Object.assign({},t),{tokenRefresher:n}))),!n.isRunning()&&t.isTokenAutoRefreshEnabled&&n.start()}function m2(r,e){const t=Ns(r).tokenObservers;for(const n of t)try{"EXTERNAL"===n.type&&null!=e.error?n.error(e.error):n.next(e)}catch(i){}}function sA(r){return r.expireTimeMillis-Date.now()>0}function y$(r){return{token:m$(g$),error:r}}class _${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ns(this.app);for(const t of e)jO(this.app,t.next);return Promise.resolve()}}const S2="app-check-internal";!function O$(){(0,pu._registerComponent)(new ah.wA("app-check",r=>function b$(r,e){return new _$(r,e)}(r.getProvider("app").getImmediate(),r.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,e,t)=>{r.getProvider(S2).initialize()})),(0,pu._registerComponent)(new ah.wA(S2,r=>function T$(r){return{getToken:e=>iA(r,e),addTokenListener:e=>function FO(r,e,t,n){const{app:i}=r,s=Ns(i),o={next:t,error:n,type:e};if(Bl(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&sA(s.token)){const l=s.token;Promise.resolve().then(()=>{t({token:l.token}),g2(r)}).catch(()=>{})}s.cachedTokenPromise.then(()=>g2(r))}(r,"INTERNAL",e),removeTokenListener:e=>jO(r.app,e)}}(r.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,pu.registerVersion)("@firebase/app-check","0.5.8")}();class aA{constructor(){return(0,$r.vb)("app-check")}}"undefined"!=typeof window&&window;var QE=B(127);const x2=new h.OlP("angularfire2.auth.use-emulator"),I2=new h.OlP("angularfire2.auth.settings"),A2=new h.OlP("angularfire2.auth.tenant-id"),D2=new h.OlP("angularfire2.auth.langugage-code"),k2=new h.OlP("angularfire2.auth.use-device-language"),M2=new h.OlP("angularfire.auth.persistence"),P2=(r,e,t,n,i,s,o,l)=>(0,As.cc)(`${r.name}.auth`,"AngularFireAuth",r.name,()=>{const f=e.runOutsideAngular(()=>r.auth());if(t&&f.useEmulator(...t),n&&(f.tenantId=n),f.languageCode=i,s&&f.useDeviceLanguage(),o)for(const[g,y]of Object.entries(o))f.settings[g]=y;return l&&f.setPersistence(l),f},[t,n,i,s,o,l]);let k_=(()=>{class r{constructor(t,n,i,s,o,l,f,g,y,T,S,M){const L=new Ui.x,H=Zt(void 0).pipe((0,XI.Q)(o.outsideAngular),_r(()=>s.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,8775)))),(0,an.U)(()=>(0,As.on)(t,s,n)),(0,an.U)($=>P2($,s,l,g,y,T,f,S)),t2({bufferSize:1,refCount:!1}));if(wu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Zt(null);else{H.pipe(Ou()).subscribe();const De=H.pipe(_r(Me=>Me.getRedirectResult().then(je=>je,()=>null)),$r.iC,t2({bufferSize:1,refCount:!1})),We=H.pipe(_r(Me=>new Ar.y(je=>({unsubscribe:s.runOutsideAngular(()=>Me.onAuthStateChanged(ze=>je.next(ze),ze=>je.error(ze),()=>je.complete()))})))),et=H.pipe(_r(Me=>new Ar.y(je=>({unsubscribe:s.runOutsideAngular(()=>Me.onIdTokenChanged(ze=>je.next(ze),ze=>je.error(ze),()=>je.complete()))}))));this.authState=De.pipe(n2(We),(0,CO.R)(o.outsideAngular),(0,XI.Q)(o.insideAngular)),this.user=De.pipe(n2(et),(0,CO.R)(o.outsideAngular),(0,XI.Q)(o.insideAngular)),this.idToken=this.user.pipe(_r(Me=>Me?(0,jn.D)(Me.getIdToken()):Zt(null))),this.idTokenResult=this.user.pipe(_r(Me=>Me?(0,jn.D)(Me.getIdTokenResult()):Zt(null))),this.credential=(0,UG.T)(De,L,this.authState.pipe(ui(Me=>!Me))).pipe((0,an.U)(Me=>(null==Me?void 0:Me.user)?Me:null),(0,CO.R)(o.outsideAngular),(0,XI.Q)(o.insideAngular))}return(0,As.pX)(this,H,s,{spy:{apply:($,De,We)=>{($.startsWith("signIn")||$.startsWith("createUser"))&&We.then(et=>L.next(et))}}})}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(As.Dh),h.LFG(As.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG($r.HU),h.LFG(x2,8),h.LFG(I2,8),h.LFG(A2,8),h.LFG(D2,8),h.LFG(k2,8),h.LFG(M2,8),h.LFG(aA,8))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),U$=(()=>{class r{constructor(){QE.Z.registerVersion("angularfire",$r.q4.full,"auth-compat")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({providers:[k_]}),r})();function O2(r,e){return function B$(r,e=Qy.z){return new Ar.y(t=>{let n;return null!=e?e.schedule(()=>{n=r.onSnapshot({includeMetadataChanges:!0},t)}):n=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=n&&n()}})}(r,e)}function GO(r,e){return O2(r,e).pipe((0,an.U)(t=>({payload:t,type:"query"})))}function uA(r,e){return GO(r,e).pipe(tu(void 0),jT(),(0,an.U)(([t,n])=>{const i=n.payload.docChanges(),s=i.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(n.payload.metadata)&&n.payload.docs.forEach((o,l)=>{const f=i.find(y=>y.doc.ref.isEqual(o.ref)),g=null==t?void 0:t.payload.docs.find(y=>y.ref.isEqual(o.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(o.metadata)||!f&&g&&JSON.stringify(g.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:o}})}),s}))}function R2(r,e,t){return uA(r,t).pipe(_o((n,i)=>function H$(r,e,t){return e.forEach(n=>{t.indexOf(n.type)>-1&&(r=function G$(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return $O(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $O(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $O(r,e.oldIndex,1)}return r}(r,n))}),r}(n,i.map(s=>s.payload),e),[]),function Uk(r,e=yo.y){return r=null!=r?r:Vx,(0,ei.e)((t,n)=>{let i,s=!0;t.subscribe((0,Jr.x)(n,o=>{const l=e(o);(s||!r(i,l))&&(s=!1,i=l,n.next(o))}))})}(),(0,an.U)(n=>n.map(i=>({type:i.type,payload:i}))))}function $O(r,e,t,...n){const i=r.slice();return i.splice(e,t,...n),i}function N2(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class L2{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=uA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,an.U)(n=>n.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(tu(void 0),jT(),ui(([n,i])=>i.length>0||!n),(0,an.U)(([n,i])=>i),$r.iC)}auditTrail(e){return this.stateChanges(e).pipe(_o((t,n)=>[...t,...n],[]))}snapshotChanges(e){const t=N2(e);return R2(this.query,t,this.afs.schedulers.outsideAngular).pipe($r.iC)}valueChanges(e={}){return GO(this.query,this.afs.schedulers.outsideAngular).pipe((0,an.U)(t=>t.payload.docs.map(n=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data())),$r.iC)}get(e){return(0,jn.D)(this.query.get(e)).pipe($r.iC)}add(e){return this.ref.add(e)}doc(e){return new F2(this.ref.doc(e),this.afs)}}class F2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:i,query:s}=B2(n,t);return new L2(i,s,this.afs)}snapshotChanges(){return function V$(r,e){return O2(r,e).pipe(tu(void 0),jT(),(0,an.U)(([t,n])=>n.exists?(null==t?void 0:t.exists)?{payload:n,type:"modified"}:{payload:n,type:"added"}:{payload:n,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($r.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,an.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,jn.D)(this.ref.get(e)).pipe($r.iC)}}class $${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?uA(this.query,this.afs.schedulers.outsideAngular).pipe((0,an.U)(t=>t.filter(n=>e.indexOf(n.type)>-1)),ui(t=>t.length>0),$r.iC):uA(this.query,this.afs.schedulers.outsideAngular).pipe($r.iC)}auditTrail(e){return this.stateChanges(e).pipe(_o((t,n)=>[...t,...n],[]))}snapshotChanges(e){const t=N2(e);return R2(this.query,t,this.afs.schedulers.outsideAngular).pipe($r.iC)}valueChanges(e={}){return GO(this.query,this.afs.schedulers.outsideAngular).pipe((0,an.U)(n=>n.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),$r.iC)}get(e){return(0,jn.D)(this.query.get(e)).pipe($r.iC)}}const j2=new h.OlP("angularfire2.enableFirestorePersistence"),U2=new h.OlP("angularfire2.firestore.persistenceSettings"),q$=new h.OlP("angularfire2.firestore.settings"),z$=new h.OlP("angularfire2.firestore.use-emulator");function B2(r,e=(t=>t)){return{query:e(r),ref:r}}let qO=(()=>{class r{constructor(t,n,i,s,o,l,f,g,y,T,S,M,L,H,$,De,We){this.schedulers=f;const et=(0,As.on)(t,l,n),Me=y;T&&P2(et,l,S,L,H,$,M,De),[this.firestore,this.persistenceEnabled$]=(0,As.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const je=l.runOutsideAngular(()=>et.firestore());if(s&&je.settings(s),Me&&je.useEmulator(...Me),i&&!wu(o)){const ze=()=>{try{return(0,jn.D)(je.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(Be){return"undefined"!=typeof console&&console.warn(Be),Zt(!1)}};return[je,l.runOutsideAngular(ze)]}return[je,Zt(!1)]},[s,Me,i])}collection(t,n){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=B2(i,n),l=this.schedulers.ngZone.run(()=>s);return new L2(l,o,this)}collectionGroup(t,n){const i=n||(o=>o),s=this.firestore.collectionGroup(t);return new $$(i(s),this)}doc(t){let n;n="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>n);return new F2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(As.Dh),h.LFG(As.xv,8),h.LFG(j2,8),h.LFG(q$,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG($r.HU),h.LFG(U2,8),h.LFG(z$,8),h.LFG(k_,8),h.LFG(x2,8),h.LFG(I2,8),h.LFG(A2,8),h.LFG(D2,8),h.LFG(k2,8),h.LFG(M2,8),h.LFG(aA,8))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),V2=(()=>{class r{constructor(){QE.Z.registerVersion("angularfire",$r.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:j2,useValue:!0},{provide:U2,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({providers:[qO]}),r})();var W$=B(5032);function H2(r,e){return e?t=>Ja(e.pipe((0,vs.q)(1),function K$(){return(0,ei.e)((r,e)=>{r.subscribe((0,Jr.x)(e,W$.Z))})}()),t.pipe(H2(r))):(0,kr.z)((t,n)=>r(t,n).pipe((0,vs.q)(1),function Z$(r){return(0,an.U)(()=>r)}(t)))}var Y$=B(3532);let M_=(()=>{class r{constructor(t,n,i,s){this.auth=t,this.db=n,this.route=i,this.router=s,this.redirect=!1,this.currentUser=null,this.userCollection=this.db.collection("users"),this.isAuthenticated$=t.user.pipe((0,an.U)(o=>!!o)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function J$(r,e=Qy.z){const t=function X$(r=0,e,t=Qy.P){let n=-1;return null!=e&&((0,Y$.K)(e)?t=e:n=e),new Ar.y(i=>{let s=function Q$(r){return r instanceof Date&&!isNaN(r)}(r)?+r-t.now():r;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=n?this.schedule(void 0,n):i.complete())},s)})}(r,e);return H2(()=>t)}(1e3)),this.router.events.pipe(ui(o=>o instanceof bo),(0,an.U)(o=>this.route.firstChild),_r(o=>{var l;return null!==(l=null==o?void 0:o.data)&&void 0!==l?l:Zt({})})).subscribe(o=>{var l;this.redirect=null!==(l=o.authOnly)&&void 0!==l&&l}),this.auth.user.subscribe(o=>this.currentUser=o)}getUser(){return this.auth.user}createUser(t,n){return(0,jn.D)(this.auth.createUserWithEmailAndPassword(t.email,n)).pipe(ys(o=>{throw console.log(o),o}),(0,vs.q)(1),Vs(o=>{if(null==o)throw Error("User credentials conn't be null !!\u{1f480}");return(0,jn.D)(this.userCollection.doc(o.user.uid).set(t)).pipe((0,kr.z)(()=>(0,jn.D)(o.user.updateProfile({displayName:t.name}))))})).pipe((0,an.U)(o=>t),(0,vs.q)(1))}login(t,n){var i=this;return(0,nt.Z)(function*(){yield i.auth.signInWithEmailAndPassword(t,n)})()}logout(){var t=this;return(0,nt.Z)(function*(){yield t.auth.signOut(),t.redirect&&(yield t.router.navigateByUrl("/"))})()}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(k_),h.LFG(qO),h.LFG(ru),h.LFG(Or))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const G2="firebasestorage.googleapis.com",$2="storageBucket";class wi extends vn.ZR{constructor(e,t){super(zO(e),`Firebase Storage: ${t} (${zO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wi.prototype)}_codeEquals(e){return zO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function zO(r){return"storage/"+r}function WO(){return new wi("unknown","An unknown error occurred, please check the error payload for server response.")}function q2(){return new wi("canceled","User canceled the upload/download.")}function z2(){return new wi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function P_(r){return new wi("invalid-argument",r)}function W2(){return new wi("app-deleted","The Firebase app was deleted.")}function K2(r){return new wi("invalid-root-operation","The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function XE(r,e){return new wi("invalid-format","String does not match format '"+r+"': "+e)}function JE(r){throw new wi("internal-error","Internal error: "+r)}class Po{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Po.makeFromUrl(e,t)}catch(i){return new Po(e,"")}if(""===n.path)return n;throw function cq(r){return new wi("invalid-default-bucket","Invalid default bucket '"+r+"'.")}(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)",l=new RegExp("^gs://"+i+"(/(.*))?$","i");function g(Me){Me.path_=decodeURIComponent(Me.path)}const T=t.replace(/[.]/g,"\\."),et=[{regex:l,indices:{bucket:1,path:3},postModify:function s(Me){"/"===Me.path.charAt(Me.path.length-1)&&(Me.path_=Me.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:g},{regex:new RegExp(`^https?://${t===G2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let Me=0;Me<et.length;Me++){const je=et[Me],ze=je.regex.exec(e);if(ze){let tt=ze[je.indices.path];tt||(tt=""),n=new Po(ze[je.indices.bucket],tt),je.postModify(n);break}}if(null==n)throw function lq(r){return new wi("invalid-url","Invalid URL '"+r+"'.")}(e);return n}}class pq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function lA(r){return"string"==typeof r||r instanceof String}function Z2(r){return KO()&&r instanceof Blob}function KO(){return"undefined"!=typeof Blob}function ZO(r,e,t,n){if(n<e)throw P_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw P_(`Invalid value for '${r}'. Expected ${t} or less.`)}function mh(r,e,t){let n=e;return null==t&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function Y2(r){const e=encodeURIComponent;let t="?";for(const n in r)r.hasOwnProperty(n)&&(t=t+(e(n)+"=")+e(r[n])+"&");return t=t.slice(0,-1),t}var Ap=(()=>(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"}(Ap||(Ap={})),Ap))();class bq{constructor(e,t,n,i,s,o,l,f,g,y,T){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=f,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,M)=>{this.resolve_=S,this.reject_=M,this.start_()})}start_(){const t=(n,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(l,l.getResponse());!function vq(r){return void 0!==r}(f)?s():s(f)}catch(f){o(f)}else if(null!==l){const f=WO();f.serverResponse=l.getErrorText(),o(this.errorCallback_?this.errorCallback_(l,f):f)}else o(i.canceled?this.appDelete_?W2():q2():function uq(){return new wi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new cA(!1,null,!0)):this.backoffId_=function gq(r,e,t){let n=1,i=null,s=null,o=!1,l=0;function f(){return 2===l}let g=!1;function y(...$){g||(g=!0,e.apply(null,$))}function T($){i=setTimeout(()=>{i=null,r(M,f())},$)}function S(){s&&clearTimeout(s)}function M($,...De){if(g)return void S();if($)return S(),void y.call(null,$,...De);if(f()||o)return S(),void y.call(null,$,...De);let et;n<64&&(n*=2),1===l?(l=2,et=0):et=1e3*(n+Math.random()),T(et)}let L=!1;function H($){L||(L=!0,S(),!g&&(null!==i?($||(l=2),clearTimeout(i),T(0)):$||(l=1)))}return T(0),s=setTimeout(()=>{o=!0,H(!0)},t),H}((n,i)=>{if(i)return void n(!1,new cA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{null!==this.progressCallback_&&this.progressCallback_(l.loaded,l.lengthComputable?l.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Ap.NO_ERROR,f=s.getStatus();if(!l||this.isRetryStatusCode_(f)){const y=s.getErrorCode()===Ap.ABORT;return void n(!1,new cA(!1,null,y))}const g=-1!==this.successCodes_.indexOf(f);n(!0,new cA(g,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function mq(r){r(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class cA{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Iq(...r){const e=function xq(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}if(KO())return new Blob(r);throw new wi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const yu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YO{constructor(e,t){this.data=e,this.contentType=t||null}}function QO(r,e){switch(r){case yu.RAW:return new YO(Q2(e));case yu.BASE64:case yu.BASE64URL:return new YO(X2(r,e));case yu.DATA_URL:return new YO(function Mq(r){const e=new J2(r);return e.base64?X2(yu.BASE64,e.rest):function kq(r){let e;try{e=decodeURIComponent(r)}catch(t){throw XE(yu.DATA_URL,"Malformed data URL.")}return Q2(e)}(e.rest)}(e),function Pq(r){return new J2(r).contentType}(e))}throw WO()}function Q2(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);n<=127?e.push(n):n<=2047?e.push(192|n>>6,128|63&n):55296==(64512&n)?t<r.length-1&&56320==(64512&r.charCodeAt(t+1))?(n=65536|(1023&n)<<10|1023&r.charCodeAt(++t),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)):e.push(239,191,189):56320==(64512&n)?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(e)}function X2(r,e){switch(r){case yu.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw XE(r,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case yu.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw XE(r,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Dq(r){return atob(r)}(e)}catch(i){throw XE(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class J2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw XE(yu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function Oq(r,e){return r.length>=e.length&&r.substring(r.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class zc{constructor(e,t){let n=0,i="";Z2(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Z2(this.data_)){const i=function Aq(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}(this.data_,e,t);return null===i?null:new zc(i)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new zc(n,!0)}}static getBlob(...e){if(KO()){const t=e.map(n=>n instanceof zc?n.data_:n);return new zc(Iq.apply(null,t))}{const t=e.map(o=>lA(o)?QO(yu.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const i=new Uint8Array(n);let s=0;return t.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new zc(i,!0)}}uploadData(){return this.data_}}function XO(r){let e;try{e=JSON.parse(r)}catch(t){return null}return function _q(r){return"object"==typeof r&&!Array.isArray(r)}(e)?e:null}function eB(r){const e=r.lastIndexOf("/",r.length-2);return-1===e?r:r.slice(e+1)}function Lq(r,e){return e}class oa{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||Lq}}let dA=null;function ew(){if(dA)return dA;const r=[];r.push(new oa("bucket")),r.push(new oa("generation")),r.push(new oa("metageneration")),r.push(new oa("name","fullPath",!0));const t=new oa("name");t.xform=function e(s,o){return function Fq(r){return!lA(r)||r.length<2?r:eB(r)}(o)},r.push(t);const i=new oa("size");return i.xform=function n(s,o){return void 0!==o?Number(o):o},r.push(i),r.push(new oa("timeCreated")),r.push(new oa("updated")),r.push(new oa("md5Hash",null,!0)),r.push(new oa("cacheControl",null,!0)),r.push(new oa("contentDisposition",null,!0)),r.push(new oa("contentEncoding",null,!0)),r.push(new oa("contentLanguage",null,!0)),r.push(new oa("contentType",null,!0)),r.push(new oa("metadata","customMetadata",!0)),dA=r,dA}function tB(r,e,t){const n=XO(e);return null===n?null:function Uq(r,e,t){const n={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];n[o.local]=o.xform(n,e[o.server])}return function jq(r,e){Object.defineProperty(r,"ref",{get:function t(){const s=new Po(r.bucket,r.fullPath);return e._makeStorageReference(s)}})}(n,r),n}(r,n,t)}function JO(r,e){const t={},n=e.length;for(let i=0;i<n;i++){const s=e[i];s.writable&&(t[s.server]=r[s.local])}return JSON.stringify(t)}const nB="prefixes";class Wc{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kc(r){if(!r)throw WO()}function hA(r,e){return function t(n,i){const s=tB(r,i,e);return Kc(null!==s),s}}function O_(r){return function e(t,n){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function oq(){return new wi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function sq(){return new wi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function iq(r){return new wi("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===t.getStatus()?function aq(r){return new wi("unauthorized","User does not have permission to access '"+r+"'.")}(r.path):n,i.serverResponse=n.serverResponse,i}}function tw(r){const e=O_(r);return function t(n,i){let s=e(n,i);return 404===n.getStatus()&&(s=function rq(r){return new wi("object-not-found","Object '"+r+"' does not exist.")}(r.path)),s.serverResponse=i.serverResponse,s}}function iB(r,e,t){const i=mh(e.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,l=new Wc(i,"GET",hA(r,t),o);return l.errorHandler=tw(e),l}function qq(r,e,t,n,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),n&&(s.pageToken=n),i&&(s.maxResults=i);const l=mh(e.bucketOnlyServerUrl(),r.host,r._protocol),g=r.maxOperationRetryTime,y=new Wc(l,"GET",function Gq(r,e){return function t(n,i){const s=function Hq(r,e,t){const n=XO(t);return null===n?null:function Vq(r,e,t){const n={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[nB])for(const i of t[nB]){const s=i.replace(/\/$/,""),o=r._makeStorageReference(new Po(e,s));n.prefixes.push(o)}if(t.items)for(const i of t.items){const s=r._makeStorageReference(new Po(e,i.name));n.items.push(s)}return n}(r,e,n)}(r,e,i);return Kc(null!==s),s}}(r,e.bucket),g);return y.urlParams=s,y.errorHandler=O_(e),y}function oB(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=function Zq(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}(null,e)),n}class fA{constructor(e,t,n,i){this.current=e,this.total=t,this.finalized=!!n,this.metadata=i||null}}function eR(r,e){let t=null;try{t=r.getResponseHeader("X-Goog-Upload-Status")}catch(i){Kc(!1)}return Kc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Jq={STATE_CHANGED:"state_changed"},aa={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tR(r){switch(r){case"running":case"pausing":case"canceling":return aa.RUNNING;case"paused":return aa.PAUSED;case"success":return aa.SUCCESS;case"canceled":return aa.CANCELED;default:return aa.ERROR}}class e5{constructor(e,t,n){if(function yq(r){return"function"==typeof r}(e)||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function R_(r){return(...e)=>{Promise.resolve().then(()=>r(...e))}}class n5 extends class t5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ap.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ap.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ap.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw JE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw JE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw JE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw JE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw JE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Vl(){return new n5}class cB{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=ew(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function Yq(r,e,t,n,i){const s=e.bucketOnlyServerUrl(),o=oB(e,n,i),l={name:o.fullPath},f=mh(s,r.host,r._protocol),y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},T=JO(o,t),L=new Wc(f,"POST",function M(H){let $;eR(H);try{$=H.getResponseHeader("X-Goog-Upload-URL")}catch(De){Kc(!1)}return Kc(lA($)),$},r.maxUploadRetryTime);return L.urlParams=l,L.headers=y,L.body=T,L.errorHandler=O_(e),L}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,Vl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const i=function Qq(r,e,t,n){const f=new Wc(t,"POST",function s(g){const y=eR(g,["active","final"]);let T=null;try{T=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch(M){Kc(!1)}T||Kc(!1);const S=Number(T);return Kc(!isNaN(S)),new fA(S,n.size(),"final"===y)},r.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=O_(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Vl,t,n);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new fA(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Xq(r,e,t,n,i,s,o,l){const f=new fA(0,0);if(o?(f.current=o.current,f.total=o.total):(f.current=0,f.total=n.size()),n.size()!==f.total)throw function hq(){return new wi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const g=f.total-f.current;let y=g;i>0&&(y=Math.min(y,i));const T=f.current,L={"X-Goog-Upload-Command":y===g?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},H=n.slice(T,T+y);if(null===H)throw z2();const et=new Wc(t,"POST",function $(Me,je){const ze=eR(Me,["active","final"]),Be=f.current+y,tt=n.size();let _t;return _t="final"===ze?hA(e,s)(Me,je):null,new fA(Be,tt,"final"===ze,_t)},e.maxUploadRetryTime);return et.headers=L,et.body=H.uploadData(),et.progressCallback=l||null,et.errorHandler=O_(r),et}(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const l=this._ref.storage._makeRequest(o,Vl,i,s);this._request=l,l.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=iB(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,Vl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=function aB(r,e,t,n,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},f=function l(){let et="";for(let Me=0;Me<2;Me++)et+=Math.random().toString().slice(2);return et}();o["Content-Type"]="multipart/related; boundary="+f;const g=oB(e,n,i),y=JO(g,t),M=zc.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+y+"\r\n--"+f+"\r\nContent-Type: "+g.contentType+"\r\n\r\n",n,"\r\n--"+f+"--");if(null===M)throw z2();const L={name:g.fullPath},H=mh(s,r.host,r._protocol),De=r.maxUploadRetryTime,We=new Wc(H,"POST",hA(r,t),De);return We.urlParams=L,We.headers=o,We.body=M.uploadData(),We.errorHandler=O_(e),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,Vl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=q2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=tR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,i){const s=new e5(t||void 0,n||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(tR(this._state)){case aa.SUCCESS:R_(this._resolve.bind(null,this.snapshot))();break;case aa.CANCELED:case aa.ERROR:R_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(tR(this._state)){case aa.RUNNING:case aa.PAUSED:e.next&&R_(e.next.bind(e,this.snapshot))();break;case aa.SUCCESS:e.complete&&R_(e.complete.bind(e))();break;default:e.error&&R_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Pm{constructor(e,t){this._service=e,this._location=t instanceof Po?t:Po.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pm(e,t)}get root(){const e=new Po(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eB(this._location.path)}get storage(){return this._service}get parent(){const e=function Rq(r){if(0===r.length)return null;const e=r.lastIndexOf("/");return-1===e?"":r.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Po(this._location.bucket,e);return new Pm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw K2(e)}}function hB(r,e,t){return nR.apply(this,arguments)}function nR(){return nR=(0,nt.Z)(function*(r,e,t){const i=yield fB(r,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield hB(r,e,i.nextPageToken))}),nR.apply(this,arguments)}function fB(r,e){null!=e&&"number"==typeof e.maxResults&&ZO("options.maxResults",1,1e3,e.maxResults);const t=e||{},n=qq(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(n,Vl)}function p5(r){r._throwIfRoot("getDownloadURL");const e=function zq(r,e,t){const i=mh(e.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,l=new Wc(i,"GET",function $q(r,e){return function t(n,i){const s=tB(r,i,e);return Kc(null!==s),function Bq(r,e,t,n){const i=XO(e);if(null===i||!lA(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(g=>{const T=r.fullPath;return mh("/b/"+o(r.bucket)+"/o/"+o(T),t,n)+Y2({alt:"media",token:g})})[0]}(s,i,r.host,r._protocol)}}(r,t),o);return l.errorHandler=tw(e),l}(r.storage,r._location,ew());return r.storage.makeRequestWithTokens(e,Vl).then(t=>{if(null===t)throw function fq(){return new wi("no-download-url","The given file does not have any download URLs.")}();return t})}function pB(r,e){const t=function Nq(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return 0===r.length?t:r+"/"+t}(r._location.path,e),n=new Po(r._location.bucket,t);return new Pm(r.storage,n)}function gB(r,e){if(r instanceof rR){const t=r;if(null==t._bucket)throw function dq(){return new wi("no-default-bucket","No default bucket found. Did you set the '"+$2+"' property when initializing the app?")}();const n=new Pm(t,t._bucket);return null!=e?gB(n,e):n}return void 0!==e?pB(r,e):r}function y5(r,e){if(e&&function m5(r){return/^[A-Za-z]+:\/\//.test(r)}(e)){if(r instanceof rR)return function v5(r,e){return new Pm(r,e)}(r,e);throw P_("To use ref(service, url), the first argument must be a Storage instance.")}return gB(r,e)}function mB(r,e){const t=null==e?void 0:e[$2];return null==t?null:Po.makeFromBucketSpec(t,r)}class rR{constructor(e,t,n,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=G2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Po.makeFromBucketSpec(i,this._host):mB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Po.makeFromBucketSpec(this._url,e):mB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ZO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ZO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,nt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const n=yield t.getToken();if(null!==n)return n.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,nt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pm(this,e)}_makeRequest(e,t,n,i){if(this._deleted)return new pq(W2());{const s=function Cq(r,e,t,n,i,s){const o=Y2(r.urlParams),l=r.url+o,f=Object.assign({},r.headers);return function wq(r,e){e&&(r["X-Firebase-GMPID"]=e)}(f,e),function Tq(r,e){null!==e&&e.length>0&&(r.Authorization="Firebase "+e)}(f,t),function Eq(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(f,s),function Sq(r,e){null!==e&&(r["X-Firebase-AppCheck"]=e)}(f,n),new bq(l,r.method,f,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i)}(e,this._appId,n,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var n=this;return(0,nt.Z)(function*(){const[i,s]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(e,t,i,s).getPromise()})()}}const vB="@firebase/storage";function bB(r,e){return y5(r=(0,vn.m9)(r),e)}function D5(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new rR(t,n,i,e,pu.SDK_VERSION)}!function k5(){(0,pu._registerComponent)(new ah.wA("storage",D5,"PUBLIC").setMultipleInstances(!0)),(0,pu.registerVersion)(vB,"0.9.6",""),(0,pu.registerVersion)(vB,"0.9.6","esm2017")}();class pA{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class TB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new pA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(n=>{if(e)return e(new pA(n,this,this._ref))},t)}on(e,t,n,i){let s;return t&&(s="function"==typeof t?o=>t(new pA(o,this,this._ref)):{next:t.next?o=>t.next(new pA(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,n||void 0,i||void 0)}}class EB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new vh(e,this._service))}get items(){return this._delegate.items.map(e=>new vh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class vh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function I5(r,e){return pB(r,e)}(this._delegate,e);return new vh(t,this.storage)}get root(){return new vh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new vh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new TB(function b5(r,e,t){return function l5(r,e,t){return r._throwIfRoot("uploadBytesResumable"),new cB(r,new zc(e),t)}(r=(0,vn.m9)(r),e,t)}(this._delegate,e,t),this)}putString(e,t=yu.RAW,n){this._throwIfRoot("putString");const i=QO(t,e),s=Object.assign({},n);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new TB(new cB(this._delegate,new zc(i.data,!0),s),this)}listAll(){return function S5(r){return function d5(r){const e={prefixes:[],items:[]};return hB(r,e).then(()=>e)}(r=(0,vn.m9)(r))}(this._delegate).then(e=>new EB(e,this.storage))}list(e){return function w5(r,e){return fB(r=(0,vn.m9)(r),e)}(this._delegate,e||void 0).then(t=>new EB(t,this.storage))}getMetadata(){return function T5(r){return function h5(r){r._throwIfRoot("getMetadata");const e=iB(r.storage,r._location,ew());return r.storage.makeRequestWithTokens(e,Vl)}(r=(0,vn.m9)(r))}(this._delegate)}updateMetadata(e){return function E5(r,e){return function f5(r,e){r._throwIfRoot("updateMetadata");const t=function Wq(r,e,t,n){const s=mh(e.fullServerUrl(),r.host,r._protocol),l=JO(t,n),g=r.maxOperationRetryTime,y=new Wc(s,"PATCH",hA(r,n),g);return y.headers={"Content-Type":"application/json; charset=utf-8"},y.body=l,y.errorHandler=tw(e),y}(r.storage,r._location,e,ew());return r.storage.makeRequestWithTokens(t,Vl)}(r=(0,vn.m9)(r),e)}(this._delegate,e)}getDownloadURL(){return function C5(r){return p5(r=(0,vn.m9)(r))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function x5(r){return function g5(r){r._throwIfRoot("deleteObject");const e=function Kq(r,e){const n=mh(e.fullServerUrl(),r.host,r._protocol),l=new Wc(n,"DELETE",function o(f,g){},r.maxOperationRetryTime);return l.successCodes=[200,204],l.errorHandler=tw(e),l}(r.storage,r._location);return r.storage.makeRequestWithTokens(e,Vl)}(r=(0,vn.m9)(r))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw K2(e)}}class wB{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(SB(e))throw P_("ref() expected a child path but got a URL, use refFromURL instead.");return new vh(bB(this._delegate,e),this)}refFromURL(e){if(!SB(e))throw P_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Po.makeFromUrl(e,this._delegate.host)}catch(t){throw P_("refFromUrl() expected a valid full URL but got an invalid one.")}return new vh(bB(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){!function A5(r,e,t,n={}){!function _5(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken="string"==typeof i?i:(0,vn.Sg)(i,r.app.options.projectId))}(r,e,t,n)}(this._delegate,e,t,n)}}function SB(r){return/^[A-Za-z]+:\/\//.test(r)}function R5(r,{instanceIdentifier:e}){const t=r.getProvider("app-compat").getImmediate(),n=r.getProvider("storage").getImmediate({identifier:e});return new wB(t,n)}function CB(r){const e=function L5(r){return new Ar.y(e=>{const t=o=>e.next(o);t(r.snapshot);const s=r.on("state_changed",t);return r.then(o=>{t(o),e.complete()},o=>{t(r.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function eq(r,e=Qy.z){return(0,ei.e)((t,n)=>{let i=null,s=null,o=null;const l=()=>{if(i){i.unsubscribe(),i=null;const g=s;s=null,n.next(g)}};function f(){const g=o+r,y=e.now();if(y<g)return i=this.schedule(void 0,g-y),void n.add(i);l()}t.subscribe((0,Jr.x)(n,g=>{s=g,o=e.now(),i||(i=e.schedule(f,r),n.add(i))},()=>{l(),n.complete()},void 0,()=>{s=i=null}))})}(0))}(r);return{task:r,then:r.then.bind(r),catch:r.catch.bind(r),pause:r.pause.bind(r),cancel:r.cancel.bind(r),resume:r.resume.bind(r),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,an.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gA(r){return{getDownloadURL:()=>Zt(void 0).pipe($r.fc,_r(()=>r.getDownloadURL()),$r.iC),getMetadata:()=>Zt(void 0).pipe($r.fc,_r(()=>r.getMetadata()),$r.iC),delete:()=>(0,jn.D)(r.delete()),child:e=>gA(r.child(e)),updateMetadata:e=>(0,jn.D)(r.updateMetadata(e)),put:(e,t)=>CB(r.put(e,t)),putString:(e,t,n)=>CB(r.putString(e,t,n)),list:e=>(0,jn.D)(r.list(e)),listAll:()=>(0,jn.D)(r.listAll())}}!function N5(r){const e={TaskState:aa,TaskEvent:Jq,StringFormat:yu,Storage:wB,Reference:vh};r.INTERNAL.registerComponent(new ah.wA("storage-compat",R5,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),r.registerVersion("@firebase/storage-compat","0.1.14")}(Hx.Z);const F5=new h.OlP("angularfire2.storageBucket"),j5=new h.OlP("angularfire2.storage.maxUploadRetryTime"),U5=new h.OlP("angularfire2.storage.maxOperationRetryTime"),B5=new h.OlP("angularfire2.storage.use-emulator");let xB=(()=>{class r{constructor(t,n,i,s,o,l,f,g,y,T){const S=(0,As.on)(t,o,n);this.storage=(0,As.cc)(`${S.name}.storage.${i}`,"AngularFireStorage",S.name,()=>{const M=o.runOutsideAngular(()=>S.storage(i||void 0)),L=y;return L&&M.useEmulator(...L),f&&M.setMaxUploadRetryTime(f),g&&M.setMaxOperationRetryTime(g),M},[f,g])}ref(t){return gA(this.storage.ref(t))}refFromURL(t){return gA(this.storage.refFromURL(t))}upload(t,n,i){return gA(this.storage.ref(t)).put(n,i)}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(As.Dh),h.LFG(As.xv,8),h.LFG(F5,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG($r.HU),h.LFG(j5,8),h.LFG(U5,8),h.LFG(B5,8),h.LFG(aA,8))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),nw=(()=>{class r{constructor(t,n,i,s){this.db=t,this.auth=n,this.storage=i,this.router=s,this.pageClips=[],this.hasPendingRequest=!1,this.clipsCollection=t.collection("clips")}createClip(t){return this.clipsCollection.add(t)}getUserClips(t){var n=this;return(0,nt.Z)(function*(){var i;return(yield n.clipsCollection.ref.where("uid","==",null===(i=n.auth.currentUser)||void 0===i?void 0:i.uid).orderBy("timestamp","1"===t?"desc":"asc").get()).docs})()}updateClip(t){return Zt(this.clipsCollection.doc(t.id).set(t))}deleteClip(t){var n=this;return(0,nt.Z)(function*(){yield n.storage.ref(`${t.clipPath}`).delete(),yield n.storage.ref(`${t.screenshotPath}`).delete(),yield n.clipsCollection.doc(t.id).delete()})()}getClips(){var t=this;return(0,nt.Z)(function*(){if(t.hasPendingRequest)return;t.hasPendingRequest=!0;let n=t.clipsCollection.ref.orderBy("timestamp","desc").limit(6);const{length:i}=t.pageClips;if(i){const o=t.pageClips[i-1].id,l=yield function Bx(r,e){const t="object"==typeof e;return new Promise((n,i)=>{const s=new jN.Hp({next:o=>{n(o),s.unsubscribe()},error:i,complete:()=>{t?n(e.defaultValue):i(new Uo)}});r.subscribe(s)})}(t.clipsCollection.doc(o).get());n=n.startAfter(l)}(yield n.get()).forEach(o=>{t.pageClips.push(Object.assign({id:o.id},o.data()))}),t.hasPendingRequest=!1})()}resolve(t,n){return this.clipsCollection.doc(t.params.id).get().pipe((0,an.U)(s=>s.data()||(this.router.navigate(["/"]),null)))}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(qO),h.LFG(M_),h.LFG(xB),h.LFG(Or))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),IB=(()=>{class r{constructor(t){this.datePipe=t}transform(t){if(!t)return"";const n=t.toDate();return this.datePipe.transform(n,"mediumDate")}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(Jc,16))},r.\u0275pipe=h.Yjl({name:"fTimestamp",type:r,pure:!0}),r})();const V5=function(r){return["/","clip",r]};function H5(r,e){if(1&r&&(h.TgZ(0,"a",2),h._UZ(1,"img",3),h.TgZ(2,"div",4)(3,"div",5)(4,"div",6),h.O4$(),h.TgZ(5,"svg",7),h._UZ(6,"path",8),h.qZA()()()(),h.kcU(),h.TgZ(7,"div",9)(8,"h2",10),h._uU(9),h.qZA(),h.TgZ(10,"p",11),h._uU(11),h.TgZ(12,"span",12),h._uU(13),h.ALo(14,"fTimestamp"),h.qZA()()()()),2&r){const t=e.$implicit;h.Q6J("routerLink",h.VKq(7,V5,t.id)),h.xp6(1),h.Q6J("src",t.screenshotUrl,h.LSH),h.xp6(8),h.hij(" ",t.title," "),h.xp6(2),h.hij(" ",t.displayName," \xb7 "),h.xp6(2),h.Oqu(h.lcZ(14,5,t.timestamp))}}let AB=(()=>{class r{constructor(t){this.clipService=t,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:n,offsetHeight:i}=document.documentElement,{innerHeight:s}=window;Math.round(n)+s===i&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}get pageClips(){return this.clipService.pageClips}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(nw))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[h._Bn([Jc])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(t,n){1&t&&(h.TgZ(0,"div",0),h.YNc(1,H5,15,9,"a",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",n.pageClips))},directives:[Ir,Vu],pipes:[IB],styles:[""]}),r})();const G5=["videoPlayer"],$5=[{path:"",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(t,n){1&t&&(h.TgZ(0,"section",0)(1,"video",1),h._UZ(2,"source",2),h.qZA(),h._UZ(3,"div",3),h.TgZ(4,"div",4),h._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),h.qZA(),h.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),h._uU(13,"Clip it and ship it!"),h.qZA(),h.TgZ(14,"p"),h._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),h.qZA()()()(),h.TgZ(16,"section",9)(17,"h1",10),h._uU(18,"Latest"),h.qZA(),h._UZ(19,"app-clips-list"),h.qZA())},directives:[AB],styles:[""]}),r})()},{path:"about",component:lg},{path:"clip/:id",component:(()=>{class r{constructor(t){this.route=t}ngOnInit(){var t;this.player=FN(null===(t=this.target)||void 0===t?void 0:t.nativeElement),this.route.data.subscribe(n=>{var i;this.clip=n.clip,null===(i=this.player)||void 0===i||i.src({src:this.clip.url,type:"video/mp4"})})}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(ru))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-clip"]],viewQuery:function(t,n){if(1&t&&h.Gf(G5,7),2&t){let i;h.iGM(i=h.CRH())&&(n.target=i.first)}},features:[h._Bn([Jc])],decls:16,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-video","overflow-hidden"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(t,n){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),h._uU(3),h.qZA(),h.TgZ(4,"div",3),h._uU(5),h.TgZ(6,"span"),h._uU(7),h.ALo(8,"fTimestamp"),h.qZA()(),h.TgZ(9,"div",4),h._UZ(10,"video",5,6),h.qZA()()(),h.TgZ(12,"div",7)(13,"h2",8),h._uU(14,"More Clips"),h.qZA(),h._UZ(15,"app-clips-list",9),h.qZA()),2&t&&(h.xp6(3),h.Oqu(null==n.clip?null:n.clip.title),h.xp6(2),h.hij(" ",null==n.clip?null:n.clip.displayName," "),h.xp6(2),h.Oqu(h.lcZ(8,4,null==n.clip?null:n.clip.timestamp)),h.xp6(8),h.Q6J("scrollable",!1))},directives:[AB],pipes:[IB],styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0em}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer{width:auto}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2}),r})(),resolve:{clip:nw}},{path:"**",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-not-found"]],decls:15,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"]],template:function(t,n){1&t&&(h.TgZ(0,"div",0)(1,"span",1),h._uU(2,"404"),h.qZA(),h._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),h.qZA())},styles:[""]}),r})()}];let q5=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[[Ev.forRoot($5)],Ev]}),r})(),N_=(()=>{class r{constructor(){this.modalsBag=[]}register(t){if(this.modalsBag.some(n=>n.Id==t))throw Error(`Dublicate modal key !! \u{1f480}\u{1f480} ... the key ${t} already exists \u{1f914}`);this.modalsBag.push({Id:t,visible:!1})}unRegister(t){this.modalsBag=this.modalsBag.filter(n=>n.Id!=t)}isModalOpen(t){var n,i;return null!==(i=null===(n=this.modalsBag.find(s=>s.Id==t))||void 0===n?void 0:n.visible)&&void 0!==i&&i}toggleModal(t){var n;let i=this.modalsBag.find(s=>s.Id==t);i&&(i.visible=null!==(n=!(null==i?void 0:i.visible))&&void 0!==n&&n)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function z5(r,e){if(1&r){const t=h.EpF();h.TgZ(0,"li")(1,"a",14),h.NdJ("click",function(i){return h.CHM(t),h.oxw().openModal(i)}),h._uU(2,"Login / Register"),h.qZA()()}}const iR=function(){return{exact:!0}},W5=function(){return{sort:"1"}};function K5(r,e){if(1&r){const t=h.EpF();h.TgZ(0,"li")(1,"a",15),h._uU(2,"Manage"),h.qZA()(),h.TgZ(3,"li")(4,"a",16),h._uU(5,"Upload"),h.qZA()(),h.TgZ(6,"li")(7,"a",14),h.NdJ("click",function(i){return h.CHM(t),h.oxw().logout(i)}),h._uU(8,"Logout"),h.qZA()()}2&r&&(h.xp6(1),h.Q6J("routerLinkActiveOptions",h.DdM(3,iR))("queryParams",h.DdM(4,W5)),h.xp6(3),h.Q6J("routerLinkActiveOptions",h.DdM(5,iR)))}let Z5=(()=>{class r{constructor(t,n,i){this.modalService=t,this.authService=n,this.router=i}ngOnInit(){}openModal(t){t.preventDefault(),this.modalService.toggleModal("auth-modal")}logout(t){var n=this;return(0,nt.Z)(function*(){t.preventDefault(),yield n.authService.logout()})()}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(N_),h.Y36(M_),h.Y36(Or))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-nav"]],decls:24,vars:6,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authenticatedLinks",""],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"]],template:function(t,n){if(1&t&&(h.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),h._uU(3,"Clipz"),h.qZA(),h.TgZ(4,"div",3)(5,"ul",4),h.YNc(6,z5,3,0,"li",5),h.ALo(7,"async"),h.YNc(8,K5,9,6,"ng-template",null,6,h.W1O),h.TgZ(10,"li")(11,"a",7),h._uU(12,"About"),h.qZA()()(),h.TgZ(13,"ul",8)(14,"li")(15,"a",9),h._UZ(16,"img",10),h.TgZ(17,"span",11),h._uU(18,"English"),h.qZA()()(),h.TgZ(19,"li",12)(20,"a",9),h._UZ(21,"img",13),h.TgZ(22,"span",11),h._uU(23,"French"),h.qZA()()()()()()()),2&t){const i=h.MAs(9);h.xp6(6),h.Q6J("ngIf",!h.lcZ(7,3,n.authService.isAuthenticatedWithDelay$))("ngIfElse",i),h.xp6(5),h.Q6J("routerLinkActiveOptions",h.DdM(5,iR))}},directives:[Vu,cr,Sw],pipes:[Sh],styles:[""]}),r})();const Y5=[[["","heading",""]],"*"],Q5=function(r){return{hidden:r}},X5=["[heading]","*"];let DB=(()=>{class r{constructor(t,n){this.modalService=t,this.element=n,this._modalId=""}set modalId(t){this.modalService.register(t),this._modalId=t}get modalId(){return this._modalId}closeModal(){this.modalService.toggleModal(this.modalId)}isModalOpen(){return this.modalService.isModalOpen(this.modalId)}ngOnInit(){document.body.appendChild(this.element.nativeElement)}ngOnDestroy(){this.modalService.unRegister(this.modalId),document.body.removeChild(this.element.nativeElement)}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(N_),h.Y36(h.SBq))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-modal"]],inputs:{modalId:"modalId"},ngContentSelectors:X5,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,n){1&t&&(h.F$t(Y5),h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h.NdJ("click",function(){return n.closeModal()}),h._UZ(3,"div",3),h.qZA(),h.TgZ(4,"span",4),h._uU(5,"\u200b"),h.qZA(),h.TgZ(6,"div",5)(7,"div",6)(8,"div",7),h.Hsn(9),h.TgZ(10,"div",8),h.NdJ("click",function(){return n.closeModal()}),h._uU(11," \u2715 "),h.qZA()(),h.Hsn(12,1),h.qZA()()()()),2&t&&h.Q6J("ngClass",h.VKq(1,Q5,!n.isModalOpen()))},directives:[ns],styles:[""]}),r})();function J5(r,e){1&r&&h.Hsn(0,0,["*ngIf","isActive"])}const ez=["*"];let kB=(()=>{class r{constructor(){this.title="",this.isActive=!1}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-tab"]],inputs:{title:"title",isActive:"isActive"},ngContentSelectors:ez,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,n){1&t&&(h.F$t(),h.YNc(0,J5,1,0,"ng-content",0)),2&t&&h.Q6J("ngIf",n.isActive)},directives:[cr],styles:[""]}),r})();const tz=function(r,e){return{"hover:text-indigo-400":r,"hover:text-white text-white bg-indigo-400":e}};function nz(r,e){if(1&r){const t=h.EpF();h.TgZ(0,"li",2)(1,"a",3),h.NdJ("click",function(){const s=h.CHM(t).$implicit;return h.oxw().selectTab(s)}),h._uU(2),h.qZA()()}if(2&r){const t=e.$implicit;h.xp6(1),h.Q6J("ngClass",h.WLB(2,tz,!t.isActive,t.isActive)),h.xp6(1),h.Oqu(t.title)}}const rz=["*"];let iz=(()=>{class r{constructor(){this.tabs=new h.n_E}ngAfterContentInit(){const t=this.tabs.filter(n=>n.isActive);(null==t?void 0:t.length)||this.selectTab(this.tabs.first),(null==t?void 0:t.length)>1&&this.selectTab(t[0])}selectTab(t){return this.tabs.forEach(n=>{n.isActive=!1}),t.isActive=!0,!1}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-tabs-container"]],contentQueries:function(t,n,i){if(1&t&&h.Suo(i,kB,4),2&t){let s;h.iGM(s=h.CRH())&&(n.tabs=s)}},ngContentSelectors:rz,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,n){1&t&&(h.F$t(),h.TgZ(0,"ul",0),h.YNc(1,nz,3,5,"li",1),h.qZA(),h.Hsn(2)),2&t&&(h.xp6(1),h.Q6J("ngForOf",n.tabs))},directives:[Ir,ns],styles:[""]}),r})(),sz=(()=>{class r{}return r.emailPattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,r})();const oz=["*"];let mA=(()=>{class r{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:oz,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,n){1&t&&(h.F$t(),h.TgZ(0,"div",0),h.Hsn(1),h.qZA()),2&t&&h.Q6J("ngClass",n.bgColor)},directives:[ns],styles:[""]}),r})();function sR(...r){const e=(0,ml.jO)(r),{args:t,keys:n}=Dr(r),i=new Ar.y(s=>{const{length:o}=t;if(!o)return void s.complete();const l=new Array(o);let f=o,g=o;for(let y=0;y<o;y++){let T=!1;(0,gd.Xf)(t[y]).subscribe((0,Jr.x)(s,S=>{T||(T=!0,g--),l[y]=S},()=>f--,void 0,()=>{(!f||!T)&&(g||s.next(n?pd(n,l):l),s.complete())}))}});return e?i.pipe(fd(e)):i}let MB=(()=>{class r{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.Qsj),h.Y36(h.SBq))},r.\u0275dir=h.lG2({type:r}),r})(),Om=(()=>{class r extends MB{}return r.\u0275fac=function(){let e;return function(n){return(e||(e=h.n5z(r)))(n||r)}}(),r.\u0275dir=h.lG2({type:r,features:[h.qOj]}),r})();const Hl=new h.OlP("NgValueAccessor"),uz={provide:Hl,useExisting:(0,h.Gpc)(()=>rw),multi:!0},cz=new h.OlP("CompositionEventMode");let rw=(()=>{class r extends MB{constructor(t,n,i){super(t,n),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function lz(){const r=V()?V().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(cz,8))},r.\u0275dir=h.lG2({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&h.NdJ("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[h._Bn([uz]),h.qOj]}),r})();function Dp(r){return null==r||0===r.length}function OB(r){return null!=r&&"number"==typeof r.length}const to=new h.OlP("NgValidators"),kp=new h.OlP("NgAsyncValidators"),dz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class no{static min(e){return function RB(r){return e=>{if(Dp(e.value)||Dp(r))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<r?{min:{min:r,actual:e.value}}:null}}(e)}static max(e){return function NB(r){return e=>{if(Dp(e.value)||Dp(r))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>r?{max:{max:r,actual:e.value}}:null}}(e)}static required(e){return LB(e)}static requiredTrue(e){return function FB(r){return!0===r.value?null:{required:!0}}(e)}static email(e){return function jB(r){return Dp(r.value)||dz.test(r.value)?null:{email:!0}}(e)}static minLength(e){return function UB(r){return e=>Dp(e.value)||!OB(e.value)?null:e.value.length<r?{minlength:{requiredLength:r,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function BB(r){return e=>OB(e.value)&&e.value.length>r?{maxlength:{requiredLength:r,actualLength:e.value.length}}:null}(e)}static pattern(e){return VB(e)}static nullValidator(e){return null}static compose(e){return WB(e)}static composeAsync(e){return KB(e)}}function LB(r){return Dp(r.value)?{required:!0}:null}function VB(r){if(!r)return vA;let e,t;return"string"==typeof r?(t="","^"!==r.charAt(0)&&(t+="^"),t+=r,"$"!==r.charAt(r.length-1)&&(t+="$"),e=new RegExp(t)):(t=r.toString(),e=r),n=>{if(Dp(n.value))return null;const i=n.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function vA(r){return null}function HB(r){return null!=r}function GB(r){const e=(0,h.QGY)(r)?(0,jn.D)(r):r;return(0,h.CqO)(e),e}function $B(r){let e={};return r.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function qB(r,e){return e.map(t=>t(r))}function zB(r){return r.map(e=>function hz(r){return!r.validate}(e)?e:t=>e.validate(t))}function WB(r){if(!r)return null;const e=r.filter(HB);return 0==e.length?null:function(t){return $B(qB(t,e))}}function oR(r){return null!=r?WB(zB(r)):null}function KB(r){if(!r)return null;const e=r.filter(HB);return 0==e.length?null:function(t){return sR(qB(t,e).map(GB)).pipe((0,an.U)($B))}}function aR(r){return null!=r?KB(zB(r)):null}function ZB(r,e){return null===r?[e]:Array.isArray(r)?[...r,e]:[r,e]}function YB(r){return r._rawValidators}function QB(r){return r._rawAsyncValidators}function uR(r){return r?Array.isArray(r)?r:[r]:[]}function yA(r,e){return Array.isArray(r)?r.includes(e):r===e}function XB(r,e){const t=uR(e);return uR(r).forEach(i=>{yA(t,i)||t.push(i)}),t}function JB(r,e){return uR(e).filter(t=>!yA(r,t))}class eV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=aR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Mp extends eV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ua extends eV{get formDirective(){return null}get path(){return null}}class tV{constructor(e){this._cd=e}is(e){var t,n,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===i?void 0:i[e])}}let lR=(()=>{class r extends tV{constructor(t){super(t)}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(Mp,2))},r.\u0275dir=h.lG2({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&h.ekj("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[h.qOj]}),r})(),iw=(()=>{class r extends tV{constructor(t){super(t)}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(ua,10))},r.\u0275dir=h.lG2({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,n){2&t&&h.ekj("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[h.qOj]}),r})();function sw(r,e){hR(r,e),e.valueAccessor.writeValue(r.value),function bz(r,e){e.valueAccessor.registerOnChange(t=>{r._pendingValue=t,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&rV(r,e)})}(r,e),function Ez(r,e){const t=(n,i)=>{e.valueAccessor.writeValue(n),i&&e.viewToModelUpdate(n)};r.registerOnChange(t),e._registerOnDestroy(()=>{r._unregisterOnChange(t)})}(r,e),function Tz(r,e){e.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&rV(r,e),"submit"!==r.updateOn&&r.markAsTouched()})}(r,e),function _z(r,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(t),e._registerOnDestroy(()=>{r._unregisterOnDisabledChange(t)})}}(r,e)}function TA(r,e,t=!0){const n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),wA(r,e),r&&(e._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function EA(r,e){r.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hR(r,e){const t=YB(r);null!==e.validator?r.setValidators(ZB(t,e.validator)):"function"==typeof t&&r.setValidators([t]);const n=QB(r);null!==e.asyncValidator?r.setAsyncValidators(ZB(n,e.asyncValidator)):"function"==typeof n&&r.setAsyncValidators([n]);const i=()=>r.updateValueAndValidity();EA(e._rawValidators,i),EA(e._rawAsyncValidators,i)}function wA(r,e){let t=!1;if(null!==r){if(null!==e.validator){const i=YB(r);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,r.setValidators(s))}}if(null!==e.asyncValidator){const i=QB(r);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,r.setAsyncValidators(s))}}}const n=()=>{};return EA(e._rawValidators,n),EA(e._rawAsyncValidators,n),t}function rV(r,e){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function iV(r,e){hR(r,e)}function fR(r,e){if(!r.hasOwnProperty("model"))return!1;const t=r.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function oV(r,e){r._syncPendingControls(),e.forEach(t=>{const n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function pR(r,e){if(!e)return null;let t,n,i;return Array.isArray(e),e.forEach(s=>{s.constructor===rw?t=s:function Cz(r){return Object.getPrototypeOf(r.constructor)===Om}(s)?n=s:i=s}),i||n||t||null}function gR(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const ow="VALID",SA="INVALID",L_="PENDING",aw="DISABLED";function vR(r){return(CA(r)?r.validators:r)||null}function aV(r){return Array.isArray(r)?oR(r):r||null}function yR(r,e){return(CA(e)?e.asyncValidators:r)||null}function uV(r){return Array.isArray(r)?aR(r):r||null}function CA(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}const lV=r=>r instanceof Gl,_R=r=>r instanceof F_;function cV(r){return lV(r)?r.value:r.getRawValue()}function dV(r,e){const t=_R(r),n=r.controls;if(!(t?Object.keys(n):n).length)throw new h.vHH(1e3,"");if(!n[e])throw new h.vHH(1001,"")}function hV(r,e){_R(r),r._forEachChild((n,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class bR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=aV(this._rawValidators),this._composedAsyncValidatorFn=uV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ow}get invalid(){return this.status===SA}get pending(){return this.status==L_}get disabled(){return this.status===aw}get enabled(){return this.status!==aw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=aV(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=uV(e)}addValidators(e){this.setValidators(XB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(JB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(JB(e,this._rawAsyncValidators))}hasValidator(e){return yA(this._rawValidators,e)}hasAsyncValidator(e){return yA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=L_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=aw,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ow,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ow||this.status===L_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aw:ow}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=L_,this._hasOwnPendingAsyncValidator=!0;const t=GB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function xz(r,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let n=r;return e.forEach(i=>{n=_R(n)?n.controls.hasOwnProperty(i)?n.controls[i]:null:(r=>r instanceof Az)(n)&&n.at(i)||null}),n}(this,e,".")}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?aw:this.errors?SA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(L_)?L_:this._anyControlsHaveStatus(SA)?SA:ow}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Gl extends bR{constructor(e=null,t,n){super(vR(t),yR(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),CA(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class F_ extends bR{constructor(e,t,n){super(vR(t),yR(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hV(this,e),Object.keys(e).forEach(n=>{dV(this,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=cV(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>!!n._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((i,s)=>{n=t(n,i,s)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Az extends bR{constructor(e,t,n){super(vR(t),yR(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){hV(this,e),e.forEach((n,i)=>{dV(this,i),this.at(i).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((n,i)=>{this.at(i)&&this.at(i).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>cV(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,n)=>!!n._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Dz={provide:ua,useExisting:(0,h.Gpc)(()=>xA)},uw=(()=>Promise.resolve(null))();let xA=(()=>{class r extends ua{constructor(t,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new F_({},oR(t),aR(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){uw.then(()=>{const n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),sw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){uw.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){uw.then(()=>{const n=this._findContainer(t.path),i=new F_({});iV(i,t),n.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){uw.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){uw.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,oV(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(to,10),h.Y36(kp,10))},r.\u0275dir=h.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,n){1&t&&h.NdJ("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Dz]),h.qOj]}),r})();const Mz={provide:Mp,useExisting:(0,h.Gpc)(()=>TR)},gV=(()=>Promise.resolve(null))();let TR=(()=>{class r extends Mp{constructor(t,n,i,s,o){super(),this._changeDetectorRef=o,this.control=new Gl,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=pR(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),fR(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){gV.then(()=>{var n;this.control.setValue(t,{emitViewToModelChange:!1}),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()})}_updateDisabled(t){const n=t.isDisabled.currentValue,i=""===n||n&&"false"!==n;gV.then(()=>{var s;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function bA(r,e){return[...e.path,r]}(t,this._parent):[t]}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(ua,9),h.Y36(to,10),h.Y36(kp,10),h.Y36(Hl,10),h.Y36(h.sBO,8))},r.\u0275dir=h.lG2({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Mz]),h.qOj,h.TTD]}),r})(),lw=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=h.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),vV=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({}),r})();const ER=new h.OlP("NgModelWithFormControlWarning"),Lz={provide:Mp,useExisting:(0,h.Gpc)(()=>wR)};let wR=(()=>{class r extends Mp{constructor(t,n,i,s){super(),this._ngModelWarningConfig=s,this.update=new h.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=pR(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const n=t.form.previousValue;n&&TA(n,this,!1),sw(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}fR(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&TA(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(t){return new(t||r)(h.Y36(to,10),h.Y36(kp,10),h.Y36(Hl,10),h.Y36(ER,8))},r.\u0275dir=h.lG2({type:r,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[h._Bn([Lz]),h.qOj,h.TTD]}),r})();const Fz={provide:ua,useExisting:(0,h.Gpc)(()=>j_)};let j_=(()=>{class r extends ua{constructor(t,n){super(),this.validators=t,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const n=this.form.get(t.path);return sw(n,t),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){TA(t.control||null,t,!1),gR(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this.submitted=!0,oV(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const n=t.control,i=this.form.get(t.path);n!==i&&(TA(n||null,t),lV(i)&&(sw(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const n=this.form.get(t.path);iV(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const n=this.form.get(t.path);n&&function wz(r,e){return wA(r,e)}(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hR(this.form,this),this._oldForm&&wA(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(to,10),h.Y36(kp,10))},r.\u0275dir=h.lG2({type:r,selectors:[["","formGroup",""]],hostBindings:function(t,n){1&t&&h.NdJ("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Fz]),h.qOj,h.TTD]}),r})();const Vz={provide:Hl,useExisting:(0,h.Gpc)(()=>xR),multi:!0};function EV(r,e){return null==r?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${r}: ${e}`.slice(0,50))}let xR=(()=>{class r extends Om{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=EV(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){const n=function Hz(r){return r.split(":")[0]}(t);return this._optionMap.has(n)?this._optionMap.get(n):t}}return r.\u0275fac=function(){let e;return function(n){return(e||(e=h.n5z(r)))(n||r)}}(),r.\u0275dir=h.lG2({type:r,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,n){1&t&&h.NdJ("change",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Vz]),h.qOj]}),r})(),wV=(()=>{class r{constructor(t,n,i){this._element=t,this._renderer=n,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(EV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(xR,9))},r.\u0275dir=h.lG2({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),r})();const Gz={provide:Hl,useExisting:(0,h.Gpc)(()=>IR),multi:!0};function SV(r,e){return null==r?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${r}: ${e}`.slice(0,50))}let IR=(()=>{class r extends Om{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let n;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));n=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else n=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{const i=[],s=n.selectedOptions;if(void 0!==s){const o=s;for(let l=0;l<o.length;l++){const g=this._getOptionValue(o[l].value);i.push(g)}}else{const o=n.options;for(let l=0;l<o.length;l++){const f=o[l];if(f.selected){const g=this._getOptionValue(f.value);i.push(g)}}}this.value=i,t(i)}}_registerOption(t){const n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){const n=function $z(r){return r.split(":")[0]}(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}}return r.\u0275fac=function(){let e;return function(n){return(e||(e=h.n5z(r)))(n||r)}}(),r.\u0275dir=h.lG2({type:r,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,n){1&t&&h.NdJ("change",function(s){return n.onChange(s.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Gz]),h.qOj]}),r})(),CV=(()=>{class r{constructor(t,n,i){this._element=t,this._renderer=n,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(SV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(SV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(IR,9))},r.\u0275dir=h.lG2({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),r})(),Rm=(()=>{class r{constructor(){this._validator=vA}ngOnChanges(t){if(this.inputName in t){const n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):vA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=h.lG2({type:r,features:[h.TTD]}),r})();const Kz={provide:to,useExisting:(0,h.Gpc)(()=>IA),multi:!0};let IA=(()=>{class r extends Rm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function qz(r){return null!=r&&!1!==r&&"false"!=`${r}`}(t),this.createValidator=t=>LB}enabled(t){return t}}return r.\u0275fac=function(){let e;return function(n){return(e||(e=h.n5z(r)))(n||r)}}(),r.\u0275dir=h.lG2({type:r,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,n){2&t&&h.uIk("required",n._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Kz]),h.qOj]}),r})();const Jz={provide:to,useExisting:(0,h.Gpc)(()=>AR),multi:!0};let AR=(()=>{class r extends Rm{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>VB(t)}}return r.\u0275fac=function(){let e;return function(n){return(e||(e=h.n5z(r)))(n||r)}}(),r.\u0275dir=h.lG2({type:r,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,n){2&t&&h.uIk("pattern",n._enabled?n.pattern:null)},inputs:{pattern:"pattern"},features:[h._Bn([Jz]),h.qOj]}),r})(),RV=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[[vV]]}),r})(),eW=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[RV]}),r})(),DR=(()=>{class r{static withConfig(t){return{ngModule:r,providers:[{provide:ER,useValue:t.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[RV]}),r})();function tW(r,e){if(1&r&&(h.TgZ(0,"app-alert",11),h._uU(1),h.qZA()),2&r){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(1),h.Oqu(t.alertMessage)}}function nW(r,e){1&r&&(h.TgZ(0,"p",12),h._uU(1," Field is required !! "),h.qZA())}function rW(r,e){1&r&&(h.TgZ(0,"p",12),h._uU(1," You must enter a valid email !! "),h.qZA())}function iW(r,e){1&r&&(h.TgZ(0,"p",12),h._uU(1," Field is required !! "),h.qZA())}let sW=(()=>{class r{constructor(t,n){this.auth=t,this.modalService=n,this.constatns=sz,this.showAlert=!1,this.alertColor="blue",this.alertMessage="",this.credentials={email:"",password:""}}ngOnInit(){}login(){var t=this;return(0,nt.Z)(function*(){var n;try{t.showAlert=!0,t.alertColor="orange",t.alertMessage="Please wait ... \u{1f607}";const{email:i,password:s}=t.credentials;yield t.auth.login(i,s),t.showAlert=!1,t.modalService.toggleModal("auth-modal")}catch(i){t.showAlert=!0,t.alertColor="red",t.alertMessage=null!==(n=i.message)&&void 0!==n?n:"somthing went wrong !! \u{1f616}\u{1f613}",console.error(i)}})()}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(M_),h.Y36(N_))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-login"]],decls:18,vars:8,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","pattern","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,n){if(1&t&&(h.YNc(0,tW,2,2,"app-alert",0),h.TgZ(1,"form",1,2),h.NdJ("ngSubmit",function(){return n.login()}),h.TgZ(3,"div",3)(4,"label",4),h._uU(5,"Email"),h.qZA(),h.TgZ(6,"input",5,6),h.NdJ("ngModelChange",function(s){return n.credentials.email=s}),h.qZA(),h.YNc(8,nW,2,0,"p",7),h.YNc(9,rW,2,0,"p",7),h.qZA(),h.TgZ(10,"div",3)(11,"label",4),h._uU(12,"Password"),h.qZA(),h.TgZ(13,"input",8,9),h.NdJ("ngModelChange",function(s){return n.credentials.password=s}),h.qZA(),h.YNc(15,iW,2,0,"p",7),h.qZA(),h.TgZ(16,"button",10),h._uU(17," Submit "),h.qZA()()),2&t){const i=h.MAs(2),s=h.MAs(7),o=h.MAs(14);h.Q6J("ngIf",n.showAlert),h.xp6(6),h.Q6J("ngModel",n.credentials.email)("pattern",n.constatns.emailPattern),h.xp6(2),h.Q6J("ngIf",s.dirty&&(null==s.errors?null:s.errors.required)),h.xp6(1),h.Q6J("ngIf",s.dirty&&(null==s.errors?null:s.errors.required)),h.xp6(4),h.Q6J("ngModel",n.credentials.password),h.xp6(2),h.Q6J("ngIf",o.dirty&&(null==o.errors?null:o.errors.required)),h.xp6(1),h.Q6J("disabled",i.invalid)}},directives:[cr,mA,lw,iw,xA,rw,IA,lR,TR,AR],styles:[""]}),r})();class oW{static match(e,t,n=""){return i=>{const s=i.get(e),o=i.get(t);return s&&o?(s.value!==o.value&&o.setErrors({noMatch:n}),null):(console.error("Form control can not be found in the form group !!"),{controlNotFound:!1})}}}let NV=(()=>{class r{constructor(t){this.auth=t,this.validate=n=>this.auth.fetchSignInMethodsForEmail(n.value).then(i=>i.length?{emailTaken:!0}:null)}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(k_))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})();var aW=B(655);const AA=new h.OlP("ngx-mask config"),LV=new h.OlP("new ngx-mask config"),FV=new h.OlP("initial ngx-mask config"),uW={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new h.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},lW=["Hh:m0:s0","Hh:m0","m0:s0"],cW=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let jV=(()=>{class r{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(n,i,s,o)=>{var l,f;let g=[],y="";if(Array.isArray(s)){const H=new RegExp(s.map($=>"[\\^$.|?*+()".indexOf($)>=0?`\\${$}`:$).join("|"));g=n.split(H),y=null!==(f=null===(l=n.match(H))||void 0===l?void 0:l[0])&&void 0!==f?f:""}else g=n.split(s),y=s;const T=g.length>1?`${y}${g[1]}`:"";let S=g[0];const M=this.separatorLimit.replace(/\s/g,"");M&&+M&&(S="-"===S[0]?`-${S.slice(1,S.length).slice(0,M.length)}`:S.slice(0,M.length));const L=/(\d+)(\d{3})/;for(;i&&L.test(S);)S=S.replace(L,"$1"+i+"$2");return void 0===o?S+T:0===o?S:S+T.substr(0,o+1)},this.percentage=n=>Number(n)>=0&&Number(n)<=100,this.getPrecision=n=>{const i=n.split(".");return i.length>1?Number(i[i.length-1]):1/0},this.checkAndRemoveSuffix=n=>{var i,s,o;for(let l=(null===(i=this.suffix)||void 0===i?void 0:i.length)-1;l>=0;l--){const f=this.suffix.substr(l,null===(s=this.suffix)||void 0===s?void 0:s.length);if(n.includes(f)&&(l-1<0||!n.includes(this.suffix.substr(l-1,null===(o=this.suffix)||void 0===o?void 0:o.length))))return n.replace(f,"")}return n},this.checkInputPrecision=(n,i,s)=>{if(i<1/0){if(Array.isArray(s)){const f=s.find(g=>g!==this.thousandSeparator);s=f||s[0]}const o=new RegExp(this._charToRegExpExpression(s)+`\\d{${i}}.*$`),l=n.match(o);l&&l[0].length-1>i&&(n=n.substring(0,n.length-(l[0].length-1-i))),0===i&&this._compareOrIncludes(n[n.length-1],s,this.thousandSeparator)&&(n=n.substring(0,n.length-1))}return n},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,n){const[i,s]=n;return this.customPattern=s,this.applyMask(t,i)}applyMask(t,n,i=0,s=!1,o=!1,l=(()=>{})){var f,g;if(!n||"string"!=typeof t)return"";let y=0,T="",S=!1,M=!1,L=1,H=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const $=t.toString().split("");"IP"===n&&(this.ipError=$.filter(ze=>"."===ze).length<3&&$.length<7,n="099.099.099.099");const De=[];for(let ze=0;ze<t.length;ze++)(null===(f=t[ze])||void 0===f?void 0:f.match("\\d"))&&De.push(t[ze]);if("CPF_CNPJ"===n&&(this.cpfCnpjError=11!==De.length&&14!==De.length,n=De.length>11?"00.000.000/0000-00":"000.000.000-00"),n.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const ze=this.getPrecision(n);t=this.checkInputPrecision(t,ze,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),T=this.percentage(t)?t:t.substring(0,t.length-1)}else if(n.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!o?t.slice(1,t.length):t,o&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const ze=this._charToRegExpExpression(this.thousandSeparator);let Be='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(ze,"");if(Array.isArray(this.decimalMarker))for(const cn of this.decimalMarker)Be=Be.replace(this._charToRegExpExpression(cn),"");else Be=Be.replace(this._charToRegExpExpression(this.decimalMarker),"");const tt=new RegExp("["+Be+"]");(t.match(tt)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const _t=this.getPrecision(n),ft=(t=this.checkInputPrecision(t,_t,this.decimalMarker)).replace(new RegExp(ze,"g"),"");T=this._formatWithSeparators(ft,this.thousandSeparator,this.decimalMarker,_t);const nn=T.indexOf(",")-t.indexOf(","),Pt=T.length-t.length;if(Pt>0&&","!==T[i]){M=!0;let cn=0;do{this._shift.add(i+cn),cn++}while(cn<Pt)}else 0!==nn&&i>0&&!(T.indexOf(",")>=i&&i>3)||!(T.indexOf(".")>=i&&i>3)&&Pt<=0?(this._shift.clear(),M=!0,L=Pt,this._shift.add(i+=Pt)):this._shift.clear()}else for(let ze=0,Be=$[0];ze<$.length&&y!==n.length;ze++,Be=$[ze])if(this._checkSymbolMask(Be,n[y])&&"?"===n[y+1])T+=Be,y+=2;else if("*"===n[y+1]&&S&&this._checkSymbolMask(Be,n[y+2]))T+=Be,y+=3,S=!1;else if(this._checkSymbolMask(Be,n[y])&&"*"===n[y+1])T+=Be,S=!0;else if("?"===n[y+1]&&this._checkSymbolMask(Be,n[y+2]))T+=Be,y+=3;else if(this._checkSymbolMask(Be,n[y])){if("H"===n[y]&&Number(Be)>2){y+=1,this._shiftStep(n,y,$.length),ze--,this.leadZeroDateTime&&(T+="0");continue}if("h"===n[y]&&"2"===T&&Number(Be)>3){y+=1,ze--;continue}if("m"===n[y]&&Number(Be)>5){y+=1,this._shiftStep(n,y,$.length),ze--,this.leadZeroDateTime&&(T+="0");continue}if("s"===n[y]&&Number(Be)>5){y+=1,this._shiftStep(n,y,$.length),ze--,this.leadZeroDateTime&&(T+="0");continue}const tt=31;if("d"===n[y]&&(Number(Be)>3&&this.leadZeroDateTime||Number(t.slice(y,y+2))>tt||"/"===t[y+1])){y+=1,this._shiftStep(n,y,$.length),ze--,this.leadZeroDateTime&&(T+="0");continue}if("M"===n[y]){const ft=0===y&&(Number(Be)>2||Number(t.slice(y,y+2))>12||"/"===t[y+1]),nn=t.slice(y-3,y-1).includes("/")&&("/"===t[y-2]&&Number(t.slice(y-1,y+1))>12&&"/"!==t[y]||"/"===t[y]||"/"===t[y-3]&&Number(t.slice(y-2,y))>12&&"/"!==t[y-1]||"/"===t[y-1]),Pt=Number(t.slice(y-3,y-1))<=tt&&!t.slice(y-3,y-1).includes("/")&&"/"===t[y-1]&&(Number(t.slice(y,y+2))>12||"/"===t[y+1]),cn=Number(t.slice(y-3,y-1))>tt&&!t.slice(y-3,y-1).includes("/")&&!t.slice(y-2,y).includes("/")&&Number(t.slice(y-2,y))>12,Tr=Number(t.slice(y-3,y-1))<=tt&&!t.slice(y-3,y-1).includes("/")&&"/"!==t[y-1]&&Number(t.slice(y-1,y+1))>12;if(Number(Be)>1&&this.leadZeroDateTime||ft||nn||Pt||cn||Tr){y+=1,this._shiftStep(n,y,$.length),ze--,this.leadZeroDateTime&&(T+="0");continue}}T+=Be,y++}else" "===Be&&" "===n[y]?(T+=Be,y++):-1!==this.maskSpecialCharacters.indexOf(n[y])?(T+=n[y],y++,this._shiftStep(n,y,$.length),ze--):this.maskSpecialCharacters.indexOf(Be)>-1&&this.maskAvailablePatterns[n[y]]&&(null===(g=this.maskAvailablePatterns[n[y]])||void 0===g?void 0:g.optional)?(!!$[y]&&"099.099.099.099"!==n&&"000.000.000-00"!==n&&"00.000.000/0000-00"!==n&&!n.match(/^9+\.0+$/)&&(T+=$[y]),y++,ze--):"*"===this.maskExpression[y+1]&&this._findSpecialChar(this.maskExpression[y+2])&&this._findSpecialChar(Be)===this.maskExpression[y+2]&&S||"?"===this.maskExpression[y+1]&&this._findSpecialChar(this.maskExpression[y+2])&&this._findSpecialChar(Be)===this.maskExpression[y+2]&&S?(y+=3,T+=Be):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(Be)<0&&Be!==this.placeHolderCharacter&&(H=!0);T.length+1===n.length&&-1!==this.maskSpecialCharacters.indexOf(n[n.length-1])&&(T+=n[n.length-1]);let We=i+1;for(;this._shift.has(We);)L++,We++;let et=s&&!n.startsWith("separator")?y:this._shift.has(i)?L:0;H&&et--,l(et,M),L<0&&this._shift.clear();let Me=!1;o&&(Me=$.every(ze=>this.maskSpecialCharacters.includes(ze)));let je=`${this.prefix}${Me?"":T}${this.suffix}`;return 0===T.length&&(je=`${this.prefix}${T}`),je}_findSpecialChar(t){return this.maskSpecialCharacters.find(n=>n===t)}_checkSymbolMask(t,n){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[n]&&this.maskAvailablePatterns[n].pattern&&this.maskAvailablePatterns[n].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((n,i)=>n.match("^-?\\d")||n.match("\\s")||"."===n||","===n||"-"===n&&0===i&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,n,i){const s=/[*?]/g.test(t.slice(0,n))?i:n;this._shift.add(s+this.prefix.length||0)}_compareOrIncludes(t,n,i){return Array.isArray(n)?n.filter(s=>s!==i).includes(t):t===n}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(AA))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})(),UV=(()=>{class r extends jV{constructor(t,n,i,s){super(n),this.document=t,this._config=n,this._elementRef=i,this._renderer=s,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=o=>{}}applyMask(t,n,i=0,s=!1,o=!1,l=(()=>{})){if(!n)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const f=t&&"number"==typeof this.selStart?t[this.selStart]:"";let g="";if(this.hiddenInput&&!this.writingValue){let M=this.actualValue.split("");""!==t&&M.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>M.length?M.splice(this.selStart,0,f):t.length<M.length&&(M.length-t.length==1?M.splice(this.selStart-1,1):M.splice(this.selStart,this.selEnd-this.selStart))):M=[],this.showMaskTyped&&(t=this.removeMask(t)),g=this.actualValue.length&&M.length<=t.length?this.shiftTypedSymbols(M.join("")):t}g=Boolean(g)&&g.length?g:t;const y=super.applyMask(g,n,i,s,o,l);if(this.actualValue=this.getActualValue(y),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(M=>!this._compareOrIncludes(M,this.decimalMarker,this.thousandSeparator))),this.formControlResult(y),!this.showMaskTyped)return this.hiddenInput&&y&&y.length?this.hideInput(y,this.maskExpression):y;const T=y.length,S=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const M=this._numberSkipedSymbols(y);return y+S.slice(T+M)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?y+S:y+S.slice(T)}_numberSkipedSymbols(t){const n=/(^|\D)(\d\D)/g;let i=n.exec(t),s=0;for(;null!=i;)s+=1,i=n.exec(t);return s}applyValueChanges(t,n,i,s=(()=>{})){const o=this._elementRef.nativeElement;o.value=this.applyMask(o.value,this.maskExpression,t,n,i,s),o!==this._getActiveElement()&&this.clearIfNotMatchFn()}hideInput(t,n){return t.split("").map((i,s)=>{var o,l;return this.maskAvailablePatterns&&this.maskAvailablePatterns[n[s]]&&(null===(o=this.maskAvailablePatterns[n[s]])||void 0===o?void 0:o.symbol)?null===(l=this.maskAvailablePatterns[n[s]])||void 0===l?void 0:l.symbol:i}).join("")}getActualValue(t){const n=t.split("").filter((i,s)=>this._checkSymbolMask(i,this.maskExpression[s])||this.maskSpecialCharacters.includes(this.maskExpression[s])&&i===this.maskExpression[s]);return n.join("")===t?n.join(""):t}shiftTypedSymbols(t){let n="";return(t&&t.split("").map((s,o)=>{if(this.maskSpecialCharacters.includes(t[o+1])&&t[o+1]!==this.maskExpression[o+1])return n=s,t[o+1];if(n.length){const l=n;return n="",l}return s})||[]).join("")}numberToString(t){return t||0===t?Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(t)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,n]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,n))}checkSpecialCharAmount(t){return t.split("").filter(i=>this._findSpecialChar(i)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var n;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const i=[];for(let s=0;s<t.length;s++)(null===(n=t[s])||void 0===n?void 0:n.match("\\d"))&&i.push(t[s]);return i.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:i.length>3&&i.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:i.length>6&&i.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var n;const i=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,s=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return i;const o=[];for(let l=0;l<t.length;l++)(null===(n=t[l])||void 0===n?void 0:n.match("\\d"))&&o.push(t[l]);return o.length<=3?i.slice(o.length,i.length):o.length>3&&o.length<=6?i.slice(o.length+1,i.length):o.length>6&&o.length<=9?i.slice(o.length+2,i.length):o.length>9&&o.length<11?i.slice(o.length+3,i.length):11===o.length?"":12===o.length?s.slice(17===t.length?16:15,s.length):o.length>12&&o.length<=14?s.slice(o.length+4,s.length):""}_getActiveElement(t=this.document){var n;const i=null===(n=null==t?void 0:t.activeElement)||void 0===n?void 0:n.shadowRoot;return(null==i?void 0:i.activeElement)?this._getActiveElement(i):t.activeElement}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const n=Number(t);return Number.isNaN(n)?t:n}_removeMask(t,n){return t&&t.replace(this._regExpForRemove(n),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(n=>`\\${n}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const n=this._retrieveSeparatorPrecision(this.maskExpression);let i=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(i=i.replace(this.decimalMarker,".")),this.isNumberValue?n?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,i):Number(i):i}_retrieveSeparatorPrecision(t){const n=t.match(new RegExp("^separator\\.([^d]*)"));return n?Number(n[1]):null}_checkPrecision(t,n){return t.indexOf("2")>0?Number(n).toFixed(2):Number(n)}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(me),h.LFG(AA),h.LFG(h.SBq),h.LFG(h.Qsj))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac}),r})(),dW=(()=>{class r{constructor(t,n,i){this.document=t,this._maskService=n,this._config=i,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new h.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=s=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:n,specialCharacters:i,patterns:s,prefix:o,suffix:l,thousandSeparator:f,decimalMarker:g,dropSpecialCharacters:y,hiddenInput:T,showMaskTyped:S,placeHolderCharacter:M,shownMaskExpression:L,showTemplate:H,clearIfNotMatch:$,validation:De,separatorLimit:We,allowNegativeNumbers:et,leadZeroDateTime:Me,triggerOnMaskChange:je}=t;if(n&&(n.currentValue!==n.previousValue&&!n.firstChange&&(this._maskService.maskChanged=!0),n.currentValue&&n.currentValue.split("||").length>1?(this._maskExpressionArray=n.currentValue.split("||").sort((ze,Be)=>ze.length-Be.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=n.currentValue||"",this._maskService.maskExpression=this._maskValue)),i){if(!i.currentValue||!Array.isArray(i.currentValue))return;this._maskService.maskSpecialCharacters=i.currentValue||[]}s&&s.currentValue&&(this._maskService.maskAvailablePatterns=s.currentValue),o&&(this._maskService.prefix=o.currentValue),l&&(this._maskService.suffix=l.currentValue),f&&(this._maskService.thousandSeparator=f.currentValue),g&&(this._maskService.decimalMarker=g.currentValue),y&&(this._maskService.dropSpecialCharacters=y.currentValue),T&&(this._maskService.hiddenInput=T.currentValue),S&&(this._maskService.showMaskTyped=S.currentValue),M&&(this._maskService.placeHolderCharacter=M.currentValue),L&&(this._maskService.shownMaskExpression=L.currentValue),H&&(this._maskService.showTemplate=H.currentValue),$&&(this._maskService.clearIfNotMatch=$.currentValue),De&&(this._maskService.validation=De.currentValue),We&&(this._maskService.separatorLimit=We.currentValue),et&&(this._maskService.allowNegativeNumbers=et.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(ze=>"-"!==ze))),Me&&(this._maskService.leadZeroDateTime=Me.currentValue),je&&(this._maskService.triggerOnMaskChange=je.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||cW.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(lW.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let n=0;for(const i in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[i].optional&&(this._maskValue.indexOf(i)!==this._maskValue.lastIndexOf(i)?n+=this._maskValue.split("").filter(o=>o===i).join("").length:-1!==this._maskValue.indexOf(i)&&n++,-1!==this._maskValue.indexOf(i)&&t.toString().length>=this._maskValue.indexOf(i)||n===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const i=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-n:this._maskValue.length-n;if(t.toString().length<i)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){(""===t||null==t)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const n=t.target;if(this._inputValue=n.value,this._setMask(),!this._maskValue)return void this.onChange(n.value);const i=1===n.selectionStart?n.selectionStart+this._maskService.prefix.length:n.selectionStart;let s=0,o=!1;if(this._maskService.applyValueChanges(i,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(f,g)=>{this._justPasted=!1,s=f,o=g}),this._getActiveElement()!==n)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let l=this._position?this._inputValue.length+i+s:i+("Backspace"!==this._code||o?s:0);l>this._getActualInputLength()&&(l=this._getActualInputLength()),l<0&&(l=0),n.setSelectionRange(l,l),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const n=t.target;null!==n&&null!==n.selectionStart&&n.selectionStart===n.selectionEnd&&n.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),n.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===n.value?(n.focus(),n.setSelectionRange(0,0)):n.selectionStart>this._maskService.actualValue.length&&n.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const o=n.value&&n.value!==this._maskService.prefix?n.value:this._maskService.prefix+this._maskService.maskIsShown;n.value!==o&&(n.value=o),(n.selectionStart||n.selectionEnd)<=this._maskService.prefix.length?n.selectionStart=this._maskService.prefix.length:n.selectionEnd>this._getActualInputLength()&&(n.selectionEnd=this._getActualInputLength())}onKeyDown(t){var n;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const i=t.target;if(this._inputValue=i.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===i.value.length&&(i.selectionStart=i.selectionEnd),8===t.keyCode&&0!==i.selectionStart)if(this.specialCharacters=(null===(n=this.specialCharacters)||void 0===n?void 0:n.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&i.selectionStart<=this.prefix.length)i.setSelectionRange(this.prefix.length,i.selectionEnd);else if(this._inputValue.length!==i.selectionStart&&1!==i.selectionStart)for(;this.specialCharacters.includes(this._inputValue[i.selectionStart-1].toString())&&(this.prefix.length>=1&&i.selectionStart>this.prefix.length||0===this.prefix.length);)i.setSelectionRange(i.selectionStart-1,i.selectionEnd);this.checkSelectionOnDeletion(i),this._maskService.prefix.length&&i.selectionStart<=this._maskService.prefix.length&&i.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const s=i.selectionStart;8===t.keyCode&&!i.readOnly&&0===s&&i.selectionEnd===i.value.length&&0!==i.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<i.selectionStart?i.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(i.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=i.selectionStart,this._maskService.selEnd=i.selectionEnd}writeValue(t){return(0,aW.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),("number"==typeof t||this._maskValue.startsWith("separator"))&&(t=this._maskService.numberToString(t),Array.isArray(this.decimalMarker)||(t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t),this._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){var n;const i=null===(n=null==t?void 0:t.activeElement)||void 0===n?void 0:n.shadowRoot;return(null==i?void 0:i.activeElement)?this._getActiveElement(i):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((n,i,s)=>{if(this._start="{"===i?s:this._start,"}"!==i)return this._maskService._findSpecialChar(i)?n+i:n;this._end=s;const o=Number(t.slice(this._start+1,this._end));return n+new Array(o+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const n=this._maskValue.split("").filter(i=>":"!==i).length;return t&&(0==+t[t.length-1]&&t.length<n||t.length<=n-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var n,i;const s=(null===(n=this._maskService.removeMask(this._inputValue))||void 0===n?void 0:n.length)<=(null===(i=this._maskService.removeMask(t))||void 0===i?void 0:i.length);if(this._inputValue&&s)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,s;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(me),h.Y36(UV),h.Y36(AA))},r.\u0275dir=h.lG2({type:r,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,n){1&t&&h.NdJ("paste",function(){return n.onPaste()})("ngModelChange",function(s){return n.onModelChange(s)})("input",function(s){return n.onInput(s)})("blur",function(){return n.onBlur()})("click",function(s){return n.onClick(s)})("keydown",function(s){return n.onKeyDown(s)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[h._Bn([{provide:Hl,useExisting:(0,h.Gpc)(()=>r),multi:!0},{provide:to,useExisting:(0,h.Gpc)(()=>r),multi:!0},UV]),h.TTD]}),r})();function hW(r,e){return Object.assign(Object.assign({},r),e instanceof Function?e():e)}let fW=(()=>{class r{static forRoot(t){return{ngModule:r,providers:[{provide:LV,useValue:t},{provide:FV,useValue:uW},{provide:AA,useFactory:hW,deps:[FV,LV]},jV]}}static forChild(){return{ngModule:r}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({}),r})();const BV="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function pW(r,e){1&r&&(h.TgZ(0,"p",3),h._uU(1," Field is required !! "),h.qZA())}function gW(r,e){if(1&r&&(h.TgZ(0,"p",3),h._uU(1),h.qZA()),2&r){const t=h.oxw(2);h.xp6(1),h.AsE(" The value you inputted is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," characters long. It must be at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," !! ")}}function mW(r,e){1&r&&(h.TgZ(0,"p",3),h._uU(1," You must enter a valid email !! "),h.qZA())}function vW(r,e){1&r&&(h.TgZ(0,"p",3),h._uU(1," Value too low !! "),h.qZA())}function yW(r,e){1&r&&(h.TgZ(0,"p",3),h._uU(1," Value too high !! "),h.qZA())}function _W(r,e){1&r&&(h.TgZ(0,"p",3),h._uU(1," Password must be at least 8 characters, contain at least 1 uppercase letter, 1 lowercase letter, and 1 number, Can contain special characters !! "),h.qZA())}function bW(r,e){if(1&r&&(h.TgZ(0,"p",3),h._uU(1),h.qZA()),2&r){const t=h.oxw(2);h.xp6(1),h.hij(" ",null==t.control.errors?null:t.control.errors.noMatch," ")}}function TW(r,e){if(1&r&&(h.ynx(0),h.YNc(1,pW,2,0,"p",2),h.YNc(2,gW,2,2,"p",2),h.YNc(3,mW,2,0,"p",2),h.YNc(4,vW,2,0,"p",2),h.YNc(5,yW,2,0,"p",2),h.YNc(6,_W,2,0,"p",2),h.YNc(7,bW,2,1,"p",2),h.Hsn(8),h.BQk()),2&r){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch)}}BV.KeyboardEvent||(BV.KeyboardEvent=function(r,e){});const EW=[[["","validators",""]]],wW=["[validators]"];let kR=(()=>{class r{constructor(){this.control=new Gl,this.placeholder="",this.type="text",this.format=""}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-input"]],inputs:{control:"control",placeholder:"placeholder",type:"type",format:"format"},ngContentSelectors:wW,decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"type","placeholder","formControl","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,n){1&t&&(h.F$t(EW),h._UZ(0,"input",0),h.YNc(1,TW,9,7,"ng-container",1)),2&t&&(h.Q6J("type",n.type)("placeholder",n.placeholder)("formControl",n.control)("mask",n.format)("dropSpecialCharacters",!1),h.xp6(1),h.Q6J("ngIf",n.control.dirty||n.control.touched))},directives:[rw,dW,lR,wR,cr],styles:[""]}),r})();function SW(r,e){if(1&r&&(h.TgZ(0,"app-alert",13),h._uU(1),h.qZA()),2&r){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(1),h.Oqu(t.alertMessage)}}function CW(r,e){1&r&&(h.TgZ(0,"p",14),h._uU(1," The email is taken, Please use another email. "),h.qZA())}const xW=function(r,e){return{"opacity-50":r,"hover:bg-indigo-500":e}};let IW=(()=>{class r{constructor(t,n){this.authService=t,this.emailTaken=n,this.showAlert=!1,this.alertMessage="",this.alertColor="orange",this.inSubmission=!1,this.name=new Gl("",[no.required,no.minLength(3)]),this.email=new Gl("",[no.required,no.email],[this.emailTaken.validate]),this.age=new Gl("",[no.required,no.min(18),no.max(120)]),this.password=new Gl("",[no.required,no.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/)]),this.confirm_password=new Gl("",[no.required]),this.phoneNumber=new Gl("",[no.required,no.minLength(15),no.maxLength(15)]),this.registerForm=new F_({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[oW.match("password","confirm_password","Confirm password doesn't match the entered password \u{1f914}\u{1f914}")])}ngOnInit(){}register(){this.inSubmission=!0,this.showAlert=!0,this.alertMessage="Please wait you account is being created. \u{1f607}";const t=this.registerForm.value.password,n={name:this.registerForm.value.name,email:this.registerForm.value.email,age:+this.registerForm.value.age,phoneNumber:this.registerForm.value.phoneNumber};try{this.authService.createUser(n,t).subscribe({next:i=>{this.alertMessage="Success! Your account has been created. \u{1f44c}\u{1f44c}",this.alertColor="green"},error:i=>{console.error(i),this.alertMessage=i.message,this.alertColor="red",this.inSubmission=!1},complete:()=>{this.inSubmission=!1}})}catch(i){return console.error(i),this.alertMessage=i.message,void(this.alertColor="red")}}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(M_),h.Y36(NV))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-register"]],features:[h._Bn([NV])],decls:30,vars:14,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","text","placeholder","Enter Name",3,"control"],["placeholder","Enter Email",3,"control"],["validators",""],["class","text-red-400",4,"ngIf"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Enter Confirm Password",3,"control"],["type","text","placeholder","Enter phone number","format","(000)0-00000000",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition",3,"ngClass","disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,n){1&t&&(h.YNc(0,SW,2,2,"app-alert",0),h.TgZ(1,"form",1),h.NdJ("ngSubmit",function(){return n.register()}),h.TgZ(2,"div",2)(3,"label",3),h._uU(4,"Name"),h.qZA(),h._UZ(5,"app-input",4),h.qZA(),h.TgZ(6,"div",2)(7,"label",3),h._uU(8,"Email"),h.qZA(),h.TgZ(9,"app-input",5),h.ynx(10,6),h.YNc(11,CW,2,0,"p",7),h.BQk(),h.qZA()(),h.TgZ(12,"div",2)(13,"label",3),h._uU(14,"Age"),h.qZA(),h._UZ(15,"app-input",8),h.qZA(),h.TgZ(16,"div",2)(17,"label",3),h._uU(18,"Password"),h.qZA(),h._UZ(19,"app-input",9),h.qZA(),h.TgZ(20,"div",2)(21,"label",3),h._uU(22,"Confirm Password"),h.qZA(),h._UZ(23,"app-input",10),h.qZA(),h.TgZ(24,"div",2)(25,"label",3),h._uU(26,"Phone Number"),h.qZA(),h._UZ(27,"app-input",11),h.qZA(),h.TgZ(28,"button",12),h._uU(29," Submit "),h.qZA()()),2&t&&(h.Q6J("ngIf",n.showAlert),h.xp6(1),h.Q6J("formGroup",n.registerForm),h.xp6(4),h.Q6J("control",n.name),h.xp6(4),h.Q6J("control",n.email),h.xp6(2),h.Q6J("ngIf",null==n.email.errors?null:n.email.errors.emailTaken),h.xp6(4),h.Q6J("control",n.age),h.xp6(4),h.Q6J("control",n.password),h.xp6(4),h.Q6J("control",n.confirm_password),h.xp6(4),h.Q6J("control",n.phoneNumber),h.xp6(1),h.Q6J("ngClass",h.WLB(11,xW,n.registerForm.invalid,n.registerForm.valid))("disabled",n.registerForm.invalid||n.inSubmission))},directives:[cr,mA,lw,iw,j_,kR,ns],styles:[""]}),r})(),AW=(()=>{class r{constructor(t){this.modalService=t}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(N_))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalId","auth-modal"],["heading","",1,"text-2xl","font-bold"],["title","Login"],["title","Register"]],template:function(t,n){1&t&&(h.TgZ(0,"app-modal",0)(1,"p",1),h._uU(2,"Your Account"),h.qZA(),h.TgZ(3,"app-tabs-container")(4,"app-tab",2),h._UZ(5,"app-login"),h.qZA(),h.TgZ(6,"app-tab",3),h._UZ(7,"app-register"),h.qZA()()())},directives:[DB,iz,kB,sW,IW],styles:[""]}),r})();function DW(r,e){1&r&&h._UZ(0,"app-auth-modal")}let kW=(()=>{class r{constructor(t){this.authService=t,this.title="clips"}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(M_))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,n){1&t&&(h._UZ(0,"app-nav")(1,"router-outlet"),h.YNc(2,DW,1,0,"app-auth-modal",0),h.ALo(3,"async")),2&t&&(h.xp6(2),h.Q6J("ngIf",!h.lcZ(3,1,n.authService.isAuthenticatedWithDelay$)))},directives:[Z5,Ad,cr,AW],pipes:[Sh],styles:[""]}),r})(),VV=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({providers:[],imports:[[ul,DR,fW.forRoot()]]}),r})(),MW=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[[ul,VV,DR,eW]]}),r})();const MR_firebaseConfig={apiKey:"AIzaSyCM2m0Tp1mHtZ366u5F5zI1f5rdnDRnNak",authDomain:"clibs-8ef23.firebaseapp.com",projectId:"clibs-8ef23",storageBucket:"clibs-8ef23.appspot.com",messagingSenderId:"687873988109",appId:"1:687873988109:web:e620587fa5d4c544c82744"};function PW(r,e){if(1&r&&(h.TgZ(0,"app-alert",9)(1,"p"),h._uU(2),h.qZA()()),2&r){const t=h.oxw();h.Q6J("color",t.alertMessageColor),h.xp6(2),h.Oqu(t.alertMessage)}}let OW=(()=>{class r{constructor(t,n){this.clipService=t,this.modalService=n,this.clip=null,this.clipUpdated=new h.vpe,this.alertMessageColor="red",this.alertMessage="",this.titleControl=new Gl("",[no.required,no.minLength(3)]),this.clipFormGroup=new F_({title:this.titleControl})}ngOnChanges(t){!this.clip||this.titleControl.setValue(this.clip.title)}ngOnInit(){}get showAlertMessage(){return!!this.alertMessage}updateClip(){this.clip.title=this.titleControl.value,this.clipFormGroup.disable(),this.alertMessage="Please wait! Your clip is being updated ...",this.alertMessageColor="blue",this.clipService.updateClip(this.clip).subscribe({next:()=>{this.alertMessage="Success! Your clip is updated \u{1f973}",this.alertMessageColor="green",setTimeout(()=>{this.modalService.toggleModal("edit-clip")},1e3),this.clipUpdated.emit(this.clip)},error:t=>{this.alertMessage="Update is failed, Please try again later, Or if you curious check the cosole error ... \u{1f914}",console.error(t),this.alertMessageColor="red"}}),this.clipFormGroup.enable()}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(nw),h.Y36(N_))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-edit"]],inputs:{clip:"clip"},outputs:{clipUpdated:"clipUpdated"},features:[h.TTD],decls:12,vars:3,consts:[["modalId","edit-clip"],["heading","",1,"text-2xl","font-bold"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none"],[3,"color"]],template:function(t,n){1&t&&(h.TgZ(0,"app-modal",0)(1,"p",1),h._uU(2,"Edit Video"),h.qZA(),h.YNc(3,PW,3,2,"app-alert",2),h.TgZ(4,"form",3),h.NdJ("ngSubmit",function(){return n.updateClip()}),h.TgZ(5,"div",4)(6,"label",5),h._uU(7,"Title"),h.qZA(),h._UZ(8,"app-input",6),h.qZA(),h.TgZ(9,"div",7)(10,"button",8),h._uU(11," Update "),h.qZA()()()()),2&t&&(h.xp6(3),h.Q6J("ngIf",n.showAlertMessage),h.xp6(1),h.Q6J("formGroup",n.clipFormGroup),h.xp6(4),h.Q6J("control",n.titleControl))},directives:[DB,cr,mA,lw,iw,j_,kR],styles:[""]}),r})();const HV=function(r){return["/","clip",r]};function RW(r,e){if(1&r){const t=h.EpF();h.TgZ(0,"div",10)(1,"a",11),h._UZ(2,"img",12),h.qZA(),h.TgZ(3,"div",13)(4,"a",14),h._uU(5),h.qZA(),h.TgZ(6,"a",15),h.NdJ("click",function(i){const o=h.CHM(t).$implicit;return h.oxw().copyToClilpboard(i,o.id)}),h._uU(7," Copy Link "),h.qZA()(),h.TgZ(8,"div",16)(9,"a",17),h.NdJ("click",function(i){const o=h.CHM(t).$implicit;return h.oxw().openModal(i,o)}),h.TgZ(10,"span",18),h._uU(11,"build"),h.qZA()(),h.TgZ(12,"a",19),h.NdJ("click",function(i){const o=h.CHM(t).$implicit;return h.oxw().deleteClip(i,o)}),h.TgZ(13,"span",18),h._uU(14,"delete"),h.qZA()()()()}if(2&r){const t=e.$implicit;h.xp6(1),h.Q6J("routerLink",h.VKq(4,HV,t.id)),h.xp6(1),h.Q6J("src",t.screenshotUrl,h.LSH),h.xp6(2),h.Q6J("routerLink",h.VKq(6,HV,t.id)),h.xp6(1),h.hij(" ",t.title," ")}}let NW=(()=>{class r{constructor(t,n,i,s){this.router=t,this.activatedRoute=n,this.clipService=i,this.modalService=s,this.orderBy="1",this.clips=[],this.currentClip=null,this.sort$=new ms("1")}ngOnInit(){this.activatedRoute.queryParams.subscribe(t=>{this.orderBy="2"===t.sort?t.sort:"1",this.getUserClips()})}sort(t){const{value:n}=t.target;this.router.navigateByUrl(`/manage?sort=${n}`),this.sort$.next(n)}getUserClips(){this.clips=[],this.sort$.subscribe(t=>{this.clipService.getUserClips(t).then(n=>{n.forEach(i=>{this.clips.push(Object.assign(Object.assign({},i.data()),{id:i.id}))})})})}openModal(t,n){t.preventDefault(),this.currentClip=n,this.modalService.toggleModal("edit-clip")}onClipUpdated(t){}deleteClip(t,n){var i=this;return(0,nt.Z)(function*(){t.preventDefault();try{yield i.clipService.deleteClip(n),i.clips.forEach((s,o)=>{s.id==n.id&&i.clips.splice(o,1)})}catch(s){console.error(s)}})()}copyToClilpboard(t,n){return(0,nt.Z)(function*(){t.preventDefault();const i=`${location.origin}/clip/${n}`;yield navigator.clipboard.writeText(i),alert("Link Copied \u{1f44c}")})()}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(Or),h.Y36(ru),h.Y36(nw),h.Y36(N_))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-manage"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"clip","clipUpdated"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],[3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"p-6","text-2xl"],[1,"font-bold","mb-2",3,"routerLink"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded",3,"click"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],[1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400",3,"click"],[1,"material-icons","text-base"],[1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,n){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"a",2),h._uU(3,"Upload Videos"),h.qZA(),h.TgZ(4,"select",3),h.NdJ("change",function(s){return n.sort(s)}),h.TgZ(5,"option",4),h._uU(6,"Recent Uploads"),h.qZA(),h.TgZ(7,"option",5),h._uU(8,"Oldest Uploads"),h.qZA()()()(),h.TgZ(9,"div",6)(10,"div",7),h.YNc(11,RW,15,8,"div",8),h.qZA()(),h.TgZ(12,"app-edit",9),h.NdJ("clipUpdated",function(s){return n.onClipUpdated(s)}),h.qZA()),2&t&&(h.xp6(5),h.Q6J("selected","1"==n.orderBy),h.xp6(2),h.Q6J("selected","2"==n.orderBy),h.xp6(4),h.Q6J("ngForOf",n.clips),h.xp6(1),h.Q6J("clip",n.currentClip))},directives:[Vu,wV,CV,Ir,OW],styles:[""]}),r})();var DA,LW=new Uint8Array(16);function FW(){if(!DA&&!(DA="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return DA(LW)}const jW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,BW=function UW(r){return"string"==typeof r&&jW.test(r)};for(var ro=[],PR=0;PR<256;++PR)ro.push((PR+256).toString(16).substr(1));const $W=function GW(r,e,t){var n=(r=r||{}).random||(r.rng||FW)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return function VW(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(ro[r[e+0]]+ro[r[e+1]]+ro[r[e+2]]+ro[r[e+3]]+"-"+ro[r[e+4]]+ro[r[e+5]]+"-"+ro[r[e+6]]+ro[r[e+7]]+"-"+ro[r[e+8]]+ro[r[e+9]]+"-"+ro[r[e+10]]+ro[r[e+11]]+ro[r[e+12]]+ro[r[e+13]]+ro[r[e+14]]+ro[r[e+15]]).toLowerCase();if(!BW(t))throw TypeError("Stringified UUID is invalid");return t}(n)};var GV=B(260);let qW=(()=>{class r{constructor(){this.isReady=!1,this.isRunning=!1,this.ffmpeg=(0,GV.createFFmpeg)({log:!0})}init(){var t=this;return(0,nt.Z)(function*(){t.isReady||(yield t.ffmpeg.load(),t.isReady=!0)})()}getScreenshots(t){var n=this;return(0,nt.Z)(function*(){n.isRunning=!0;const i=yield(0,GV.fetchFile)(t);n.ffmpeg.FS("writeFile",t.name,i);const s=[1,2,3],o=[];s.forEach(f=>{o.push("-i",t.name,"-ss",`00:00:0${f}`,"-frames:v","1","-filter:v","scale=510:-1",`output_0${f}.png`)}),yield n.ffmpeg.run(...o);const l=[];return s.forEach(f=>{const g=n.ffmpeg.FS("readFile",`output_0${f}.png`),y=new Blob([g.buffer],{type:"image/png"}),T=URL.createObjectURL(y);l.push(T)}),n.isRunning=!1,l})()}blobFromURL(t){return(0,nt.Z)(function*(){return yield(yield fetch(t)).blob()})()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),zW=(()=>{class r{hadleEvent(t){t.preventDefault(),t.stopPropagation()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=h.lG2({type:r,selectors:[["","app-event-bloker",""]],hostBindings:function(t,n){1&t&&h.NdJ("drop",function(s){return n.hadleEvent(s)})("dragover",function(s){return n.hadleEvent(s)})}}),r})(),WW=(()=>{class r{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustUrl(t)}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(Vh,16))},r.\u0275pipe=h.Yjl({name:"safeURL",type:r,pure:!0}),r})();function KW(r,e){1&r&&(h.TgZ(0,"span",9),h._uU(1," autorenew "),h.qZA())}const ZW=function(r){return{"bg-indigo-400 border-indigo-400 border-solid":r}};function YW(r,e){if(1&r){const t=h.EpF();h.ynx(0),h.TgZ(1,"input",6),h.NdJ("change",function(i){return h.CHM(t),h.oxw(2).storeFile(i)}),h.qZA(),h.TgZ(2,"div",7),h.NdJ("dragend",function(){return h.CHM(t),h.oxw(2).isDragover=!1})("dragover",function(){return h.CHM(t),h.oxw(2).isDragover=!0})("dragenter",function(){return h.CHM(t),h.oxw(2).isDragover=!0})("dragleave",function(){return h.CHM(t),h.oxw(2).isDragover=!1})("mouseleave",function(){return h.CHM(t),h.oxw(2).isDragover=!1})("drop",function(i){return h.CHM(t),h.oxw(2).storeFile(i)}),h.TgZ(3,"h5"),h._uU(4,"Drop your file here (mp4 only!)"),h.qZA(),h.YNc(5,KW,2,0,"span",8),h.qZA(),h.BQk()}if(2&r){const t=h.oxw(2);h.xp6(2),h.Q6J("ngClass",h.VKq(2,ZW,t.isDragover)),h.xp6(3),h.Q6J("ngIf",t.isRunning)}}function QW(r,e){if(1&r&&(h.ynx(0),h.YNc(1,YW,6,4,"ng-container",3),h.BQk()),2&r){const t=h.oxw(),n=h.MAs(6);h.xp6(1),h.Q6J("ngIf",!t.nextStep)("ngIfElse",n)}}function XW(r,e){if(1&r&&(h.TgZ(0,"p"),h._uU(1),h.ALo(2,"percent"),h.qZA()),2&r){const t=h.oxw(3);h.xp6(1),h.Oqu(h.lcZ(2,1,t.percentage))}}function JW(r,e){if(1&r&&(h.TgZ(0,"app-alert",20)(1,"p"),h._uU(2),h.qZA(),h.YNc(3,XW,3,3,"p",21),h.qZA()),2&r){const t=h.oxw(2);h.Q6J("color",t.alertMessageColor),h.xp6(2),h.Oqu(t.alertMessage),h.xp6(1),h.Q6J("ngIf",t.showPercentage)}}const e7=function(r,e){return{"border-green-400":r,"border-transparent":e}};function t7(r,e){if(1&r){const t=h.EpF();h.TgZ(0,"div",22)(1,"img",23),h.NdJ("click",function(){const s=h.CHM(t).$implicit;return h.oxw(2).imageSelected(s)}),h.ALo(2,"safeURL"),h.qZA()()}if(2&r){const t=e.$implicit,n=h.oxw(2);h.Q6J("ngClass",h.WLB(4,e7,t==n.selectedScreenshot,t!=n.selectedScreenshot)),h.xp6(1),h.Q6J("src",h.lcZ(2,2,t),h.LSH)}}const n7=function(r,e){return{"opacity-50":r,"hover:bg-indigo-700":e}};function r7(r,e){if(1&r){const t=h.EpF();h.YNc(0,JW,4,3,"app-alert",10),h.TgZ(1,"form",11),h.NdJ("ngSubmit",function(){return h.CHM(t),h.oxw().uploadFile()}),h.TgZ(2,"h2",12),h._uU(3,"Select a Thumbnail"),h.qZA(),h.TgZ(4,"div",13),h.YNc(5,t7,3,7,"div",14),h.qZA(),h.TgZ(6,"div",15)(7,"label",16),h._uU(8,"Title"),h.qZA(),h._UZ(9,"app-input",17),h.qZA(),h.TgZ(10,"div",18)(11,"button",19),h._uU(12," Publish "),h.qZA()()()}if(2&r){const t=h.oxw();h.Q6J("ngIf",t.showAlertMessage),h.xp6(1),h.Q6J("formGroup",t.uploadForm),h.xp6(4),h.Q6J("ngForOf",t.screenshots),h.xp6(4),h.Q6J("control",t.titleControl),h.xp6(2),h.Q6J("disabled",t.isUploading)("ngClass",h.WLB(6,n7,t.isUploading,!t.isUploading))}}function i7(r,e){1&r&&(h.TgZ(0,"span",9),h._uU(1," settings "),h.qZA())}let s7=(()=>{class r{constructor(t,n,i,s,o){this.storage=t,this.authService=n,this.clilpService=i,this.router=s,this.ffmpegService=o,this.isUploading=!1,this.isDragover=!1,this.file=null,this.nextStep=!1,this.alertMessageColor="red",this.alertMessage="",this.percentage=0,this.user=null,this.screenshots=[],this.selectedScreenshot="",this.titleControl=new Gl("",[no.required,no.minLength(3)]),this.uploadForm=new F_({title:this.titleControl}),this.authService.getUser().subscribe(l=>{this.user=l}),this.ffmpegService.init()}get showAlertMessage(){return!!this.alertMessage}get showPercentage(){return!!this.percentage}ngOnInit(){}storeFile(t){var n=this;return(0,nt.Z)(function*(){var i,s,o,l;n.ffmpegService.isRunning||(n.file=t.dataTransfer?null!==(s=null===(i=t.dataTransfer)||void 0===i?void 0:i.files.item(0))&&void 0!==s?s:null:null!==(l=null===(o=t.target.files)||void 0===o?void 0:o.item(0))&&void 0!==l?l:null,n.file&&"video/mp4"===n.file.type&&(n.screenshots=yield n.ffmpegService.getScreenshots(n.file),n.selectedScreenshot=n.screenshots[0],n.titleControl.setValue(n.file.name.replace(/\.[^/.]+$/,"")),n.nextStep=!0))})()}uploadFile(){var t=this;return(0,nt.Z)(function*(){var n,i,s;t.uploadForm.disable(),t.isUploading=!0;const o=$W(),f=`clips/${o}.mp4`,g=yield t.ffmpegService.blobFromURL(t.selectedScreenshot),y=`screenshots/${o}.png`;t.alertMessage="Please wait! Your file is being uploaded ...",t.alertMessageColor="blue",t.uploadFileTask=t.storage.upload(f,t.file);const T=t.storage.ref(f);t.uploadScreenshotTask=t.storage.upload(y,g);const S=t.storage.ref(y);var M;Za([null===(n=t.uploadFileTask)||void 0===n?void 0:n.percentageChanges(),null===(i=t.uploadScreenshotTask)||void 0===i?void 0:i.percentageChanges()]).subscribe(M=>{const[L,H]=M;L&&H&&(t.percentage=(L+H)/200)}),sR([null===(s=t.uploadFileTask)||void 0===s?void 0:s.snapshotChanges(),t.uploadScreenshotTask.snapshotChanges()]).pipe(_r(()=>sR([T.getDownloadURL(),S.getDownloadURL()]))).subscribe({next:(M=(0,nt.Z)(function*(L){var H,$,De;const[We,et]=L,Me={uid:null===(H=t.user)||void 0===H?void 0:H.uid,displayName:null===($=t.user)||void 0===$?void 0:$.displayName,clipPath:f,screenshotPath:y,fileName:null===(De=t.file)||void 0===De?void 0:De.name,title:t.titleControl.value,url:We,screenshotUrl:et,timestamp:QE.Z.firestore.FieldValue.serverTimestamp()},je=yield t.clilpService.createClip(Me);t.alertMessage="Success! Your clip is now ready to share \u{1f973}",t.alertMessageColor="green",t.redirectToClipPage(je.id)}),function(H){return M.apply(this,arguments)}),error:M=>{t.alertMessage="Upload is failed, Please try again later, Or if you curious check the cosole error ... \u{1f914}",console.error(M),t.alertMessageColor="red",t.uploadForm.enable()},complete:()=>{t.isUploading=!1,t.percentage=0}})})()}ngOnDestroy(){var t;null===(t=this.uploadFileTask)||void 0===t||t.cancel()}redirectToClipPage(t){setTimeout(()=>{this.router.navigate(["clip",t])},1e3)}imageSelected(t){this.selectedScreenshot=t}get isReady(){return this.ffmpegService.isReady}get isRunning(){return this.ffmpegService.isRunning}}return r.\u0275fac=function(t){return new(t||r)(h.Y36(xB),h.Y36(M_),h.Y36(nw),h.Y36(Or),h.Y36(qW))},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-upload"]],decls:9,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],[4,"ngIf","ngIfElse"],["uploadFormContainer",""],["loadingContainer",""],["type","file",1,"mb-4",3,"change"],["app-event-bloker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragend","dragover","dragenter","dragleave","mouseleave","drop"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf"],[1,"material-icons","text-center","text-6xl","p-8","animate-spin"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","border-8 cursor-pointer",3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"],[4,"ngIf"],[1,"border-8","cursor-pointer",3,"ngClass"],[3,"src","click"]],template:function(t,n){if(1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"div",2),h._uU(3,"Upload Video"),h.qZA(),h.YNc(4,QW,2,2,"ng-container",3),h.YNc(5,r7,13,9,"ng-template",null,4,h.W1O),h.YNc(7,i7,2,0,"ng-template",null,5,h.W1O),h.qZA()()),2&t){const i=h.MAs(8);h.xp6(4),h.Q6J("ngIf",n.isReady)("ngIfElse",i)}},directives:[cr,zW,ns,mA,lw,iw,j_,Ir,kR],pipes:[pi,WW],styles:[""]}),r})();var o7=B(9635);const OR=(0,an.U)(r=>!!r);let RR=(()=>{class r{constructor(t,n){this.router=t,this.auth=n,this.canActivate=(i,s)=>{const o=i.data.authGuardPipe||(()=>OR);return this.auth.user.pipe((0,vs.q)(1),o(i,s),(0,an.U)(l=>"boolean"==typeof l?l:Array.isArray(l)?this.router.createUrlTree(l):this.router.parseUrl(l)))}}}return r.\u0275fac=function(t){return new(t||r)(h.LFG(Or),h.LFG(k_))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})();const $V=()=>(0,o7.z)(OR,(0,an.U)(e=>e||"/")),l7=[{path:"manage-clips",redirectTo:"manage"},{path:"manage",component:NW,canActivate:[RR],data:{authOnly:!0,authGuardPipe:$V}},{path:"upload",component:s7,canActivate:[RR],data:{authOnly:!0,authGuardPipe:$V}}];let c7=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[[Ev.forChild(l7)],Ev]}),r})(),d7=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[[ul,c7,VV,DR]]}),r})(),h7=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=h.oAB({type:r,bootstrap:[kW]}),r.\u0275inj=h.cJS({providers:[],imports:[[fl,MW,As.hO.initializeApp(MR_firebaseConfig),U$,V2,d7,q5,V2]]}),r})();(0,h.G48)(),QE.Z.initializeApp(MR_firebaseConfig);let qV=!1;QE.Z.auth().onAuthStateChanged(()=>{qV||tc().bootstrapModule(h7).catch(r=>console.error(r)),qV=!0})},3992:(Ze,_e,B)=>{"use strict";var h=B(9226);Ze.exports=function(ie,ce){return void 0===ce&&(ce=!1),function(me,fe,ve){if(me)ie(me);else if(fe.statusCode>=400&&fe.statusCode<=599){var J=ve;if(ce)if(h.TextDecoder){var ue=function V(de){return void 0===de&&(de=""),de.toLowerCase().split(";").reduce(function(ie,ce){var me=ce.split("="),ve=me[1];return"charset"===me[0].trim()?ve.trim():ie},"utf-8")}(fe.headers&&fe.headers["content-type"]);try{J=new TextDecoder(ue).decode(ve)}catch(re){}}else J=String.fromCharCode.apply(null,new Uint8Array(ve));ie({cause:J})}else ie(null,ve)}}},745:(Ze,_e,B)=>{"use strict";var h=B(9226),ne=B(7154),V=B(2703);function me(re,rt,Ye){var Je=re;return V(rt)?(Ye=rt,"string"==typeof re&&(Je={uri:re})):Je=ne({},rt,{uri:re}),Je.callback=Ye,Je}function fe(re,rt,Ye){return ve(rt=me(re,rt,Ye))}function ve(re){if(void 0===re.callback)throw new Error("callback argument missing");var rt=!1,Ye=function(we,X,se){rt||(rt=!0,re.callback(we,X,se))};function wt(){var oe=void 0;if(oe=Xe.response?Xe.response:Xe.responseText||function J(re){try{if("document"===re.responseType)return re.responseXML;if(""===re.responseType&&(!re.responseXML||"parsererror"!==re.responseXML.documentElement.nodeName))return re.responseXML}catch(Ye){}return null}(Xe),z)try{oe=JSON.parse(oe)}catch(we){}return oe}function Ee(oe){return clearTimeout(Y),oe instanceof Error||(oe=new Error(""+(oe||"Unknown XMLHttpRequest Error"))),oe.statusCode=0,Ye(oe,he)}function Oe(){if(!Qe){var oe;clearTimeout(Y);var we=he,X=null;return 0!==(oe=re.useXDR&&void 0===Xe.status?200:1223===Xe.status?204:Xe.status)?(we={body:wt(),statusCode:oe,method:Ve,headers:{},url:Pe,rawRequest:Xe},Xe.getAllResponseHeaders&&(we.headers=function(rt){var Ye={};return rt&&rt.trim().split("\n").forEach(function(Je){var wt=Je.indexOf(":"),Ee=Je.slice(0,wt).trim().toLowerCase(),Oe=Je.slice(wt+1).trim();void 0===Ye[Ee]?Ye[Ee]=Oe:Array.isArray(Ye[Ee])?Ye[Ee].push(Oe):Ye[Ee]=[Ye[Ee],Oe]}),Ye}(Xe.getAllResponseHeaders()))):X=new Error("Internal XMLHttpRequest Error"),Ye(X,we,we.body)}}var Xe=re.xhr||null;Xe||(Xe=re.cors||re.useXDR?new fe.XDomainRequest:new fe.XMLHttpRequest);var lt,Qe,Y,Pe=Xe.url=re.uri||re.url,Ve=Xe.method=re.method||"GET",ot=re.body||re.data,gt=Xe.headers=re.headers||{},R=!!re.sync,z=!1,he={body:void 0,headers:{},statusCode:0,method:Ve,url:Pe,rawRequest:Xe};if("json"in re&&!1!==re.json&&(z=!0,gt.accept||gt.Accept||(gt.Accept="application/json"),"GET"!==Ve&&"HEAD"!==Ve&&(gt["content-type"]||gt["Content-Type"]||(gt["Content-Type"]="application/json"),ot=JSON.stringify(!0===re.json?ot:re.json))),Xe.onreadystatechange=function Je(){4===Xe.readyState&&setTimeout(Oe,0)},Xe.onload=Oe,Xe.onerror=Ee,Xe.onprogress=function(){},Xe.onabort=function(){Qe=!0},Xe.ontimeout=Ee,Xe.open(Ve,Pe,!R,re.username,re.password),R||(Xe.withCredentials=!!re.withCredentials),!R&&re.timeout>0&&(Y=setTimeout(function(){if(!Qe){Qe=!0,Xe.abort("timeout");var oe=new Error("XMLHttpRequest timeout");oe.code="ETIMEDOUT",Ee(oe)}},re.timeout)),Xe.setRequestHeader)for(lt in gt)gt.hasOwnProperty(lt)&&Xe.setRequestHeader(lt,gt[lt]);else if(re.headers&&!function ce(re){for(var rt in re)if(re.hasOwnProperty(rt))return!1;return!0}(re.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in re&&(Xe.responseType=re.responseType),"beforeSend"in re&&"function"==typeof re.beforeSend&&re.beforeSend(Xe),Xe.send(ot||null),Xe}fe.httpHandler=B(3992),Ze.exports=fe,Ze.exports.default=fe,fe.XMLHttpRequest=h.XMLHttpRequest||function ue(){},fe.XDomainRequest="withCredentials"in new fe.XMLHttpRequest?fe.XMLHttpRequest:h.XDomainRequest,function ie(re,rt){for(var Ye=0;Ye<re.length;Ye++)rt(re[Ye])}(["get","put","post","patch","head","delete"],function(re){fe["delete"===re?"del":re]=function(rt,Ye,Je){return(Ye=me(rt,Ye,Je)).method=re.toUpperCase(),ve(Ye)}})},9401:(Ze,_e)=>{"use strict";function B(V,de){return void 0===de&&(de=Object),de&&"function"==typeof de.freeze?de.freeze(V):V}var h=B({HTML:"text/html",isHTML:function(V){return V===h.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ne=B({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(V){return V===ne.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});_e.freeze=B,_e.MIME_TYPE=h,_e.NAMESPACE=ne},1991:(Ze,_e,B)=>{var ne=B(9401),V=B(6853),de=B(4436),ie=B(8702),ce=V.DOMImplementation,me=ne.NAMESPACE,fe=ie.ParseError,ve=ie.XMLReader;function J(Ee){this.options=Ee||{locator:{}}}function re(){this.cdata=!1}function rt(Ee,Oe){Oe.lineNumber=Ee.lineNumber,Oe.columnNumber=Ee.columnNumber}function Ye(Ee){if(Ee)return"\n@"+(Ee.systemId||"")+"#[line:"+Ee.lineNumber+",col:"+Ee.columnNumber+"]"}function Je(Ee,Oe,Xe){return"string"==typeof Ee?Ee.substr(Oe,Xe):Ee.length>=Oe+Xe||Oe?new java.lang.String(Ee,Oe,Xe)+"":Ee}function wt(Ee,Oe){Ee.currentElement?Ee.currentElement.appendChild(Oe):Ee.doc.appendChild(Oe)}J.prototype.parseFromString=function(Ee,Oe){var Xe=this.options,lt=new ve,Qe=Xe.domBuilder||new re,Pe=Xe.errorHandler,Ve=Xe.locator,ot=Xe.xmlns||{},gt=/\/x?html?$/.test(Oe),R=gt?de.HTML_ENTITIES:de.XML_ENTITIES;return Ve&&Qe.setDocumentLocator(Ve),lt.errorHandler=function ue(Ee,Oe,Xe){if(!Ee){if(Oe instanceof re)return Oe;Ee=Oe}var lt={},Qe=Ee instanceof Function;function Pe(Ve){var ot=Ee[Ve];!ot&&Qe&&(ot=2==Ee.length?function(gt){Ee(Ve,gt)}:Ee),lt[Ve]=ot&&function(gt){ot("[xmldom "+Ve+"]\t"+gt+Ye(Xe))}||function(){}}return Xe=Xe||{},Pe("warning"),Pe("error"),Pe("fatalError"),lt}(Pe,Qe,Ve),lt.domBuilder=Xe.domBuilder||Qe,gt&&(ot[""]=me.HTML),ot.xml=ot.xml||me.XML,Ee&&"string"==typeof Ee?lt.parse(Ee,ot,R):lt.errorHandler.error("invalid doc source"),Qe.doc},re.prototype={startDocument:function(){this.doc=(new ce).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(Ee,Oe,Xe,lt){var Qe=this.doc,Pe=Qe.createElementNS(Ee,Xe||Oe),Ve=lt.length;wt(this,Pe),this.currentElement=Pe,this.locator&&rt(this.locator,Pe);for(var ot=0;ot<Ve;ot++){Ee=lt.getURI(ot);var gt=lt.getValue(ot),R=(Xe=lt.getQName(ot),Qe.createAttributeNS(Ee,Xe));this.locator&&rt(lt.getLocator(ot),R),R.value=R.nodeValue=gt,Pe.setAttributeNode(R)}},endElement:function(Ee,Oe,Xe){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(Ee,Oe){},endPrefixMapping:function(Ee){},processingInstruction:function(Ee,Oe){var Xe=this.doc.createProcessingInstruction(Ee,Oe);this.locator&&rt(this.locator,Xe),wt(this,Xe)},ignorableWhitespace:function(Ee,Oe,Xe){},characters:function(Ee,Oe,Xe){if(Ee=Je.apply(this,arguments)){if(this.cdata)var lt=this.doc.createCDATASection(Ee);else lt=this.doc.createTextNode(Ee);this.currentElement?this.currentElement.appendChild(lt):/^\s*$/.test(Ee)&&this.doc.appendChild(lt),this.locator&&rt(this.locator,lt)}},skippedEntity:function(Ee){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(Ee){(this.locator=Ee)&&(Ee.lineNumber=0)},comment:function(Ee,Oe,Xe){Ee=Je.apply(this,arguments);var lt=this.doc.createComment(Ee);this.locator&&rt(this.locator,lt),wt(this,lt)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(Ee,Oe,Xe){var lt=this.doc.implementation;if(lt&&lt.createDocumentType){var Qe=lt.createDocumentType(Ee,Oe,Xe);this.locator&&rt(this.locator,Qe),wt(this,Qe),this.doc.doctype=Qe}},warning:function(Ee){console.warn("[xmldom warning]\t"+Ee,Ye(this.locator))},error:function(Ee){console.error("[xmldom error]\t"+Ee,Ye(this.locator))},fatalError:function(Ee){throw new fe(Ee,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(Ee){re.prototype[Ee]=function(){return null}}),_e.DOMParser=J},6853:(Ze,_e,B)=>{var ne=B(9401).NAMESPACE;function V(K){return""!==K}function ie(K,Q){return K.hasOwnProperty(Q)||(K[Q]=!0),K}function ce(K){if(!K)return[];var Q=function de(K){return K?K.split(/[\t\n\f\r ]+/).filter(V):[]}(K);return Object.keys(Q.reduce(ie,{}))}function fe(K,Q){for(var Se in K)Q[Se]=K[Se]}function ve(K,Q){var Se=K.prototype;if(!(Se instanceof Q)){let bt=function(){};bt.prototype=Q.prototype,bt=new bt,fe(Se,bt),K.prototype=Se=bt}Se.constructor!=K&&("function"!=typeof K&&console.error("unknown Class:"+K),Se.constructor=K)}var J={},ue=J.ELEMENT_NODE=1,re=J.ATTRIBUTE_NODE=2,rt=J.TEXT_NODE=3,Ye=J.CDATA_SECTION_NODE=4,Je=J.ENTITY_REFERENCE_NODE=5,wt=J.ENTITY_NODE=6,Ee=J.PROCESSING_INSTRUCTION_NODE=7,Oe=J.COMMENT_NODE=8,Xe=J.DOCUMENT_NODE=9,lt=J.DOCUMENT_TYPE_NODE=10,Qe=J.DOCUMENT_FRAGMENT_NODE=11,Pe=J.NOTATION_NODE=12,Ve={},ot={},z=(Ve.INDEX_SIZE_ERR=(ot[1]="Index size error",1),Ve.DOMSTRING_SIZE_ERR=(ot[2]="DOMString size error",2),Ve.HIERARCHY_REQUEST_ERR=(ot[3]="Hierarchy request error",3)),X=(Ve.WRONG_DOCUMENT_ERR=(ot[4]="Wrong document",4),Ve.INVALID_CHARACTER_ERR=(ot[5]="Invalid character",5),Ve.NO_DATA_ALLOWED_ERR=(ot[6]="No data allowed",6),Ve.NO_MODIFICATION_ALLOWED_ERR=(ot[7]="No modification allowed",7),Ve.NOT_FOUND_ERR=(ot[8]="Not found",8)),ye=(Ve.NOT_SUPPORTED_ERR=(ot[9]="Not supported",9),Ve.INUSE_ATTRIBUTE_ERR=(ot[10]="Attribute in use",10));function kt(K,Q){if(Q instanceof Error)var Se=Q;else Se=this,Error.call(this,ot[K]),this.message=ot[K],Error.captureStackTrace&&Error.captureStackTrace(this,kt);return Se.code=K,Q&&(this.message=this.message+": "+Q),Se}function St(){}function Ut(K,Q){this._node=K,this._refresh=Q,rn(this)}function rn(K){var Q=K._node._inc||K._node.ownerDocument._inc;if(K._inc!=Q){var Se=K._refresh(K._node);yt(K,"length",Se.length),fe(Se,K),K._inc=Q}}function Qt(){}function Bn(K,Q){for(var Se=K.length;Se--;)if(K[Se]===Q)return Se}function Vn(K,Q,Se,qe){if(qe?Q[Bn(Q,qe)]=Se:Q[Q.length++]=Se,K){Se.ownerElement=K;var bt=K.ownerDocument;bt&&(qe&&Zr(bt,K,qe),function Vt(K,Q,Se){K&&K._inc++,Se.namespaceURI===ne.XMLNS&&(Q._nsMap[Se.prefix?Se.localName:""]=Se.value)}(bt,K,Se))}}function Zn(K,Q,Se){var qe=Bn(Q,Se);if(!(qe>=0))throw kt(X,new Error(K.tagName+"@"+Se));for(var bt=Q.length-1;qe<bt;)Q[qe]=Q[++qe];if(Q.length=bt,K){var fn=K.ownerDocument;fn&&(Zr(fn,K,Se),Se.ownerElement=null)}}function ar(){}function Ln(){}function Qi(K){return("<"==K?"&lt;":">"==K&&"&gt;")||"&"==K&&"&amp;"||'"'==K&&"&quot;"||"&#"+K.charCodeAt()+";"}function On(K,Q){if(Q(K))return!0;if(K=K.firstChild)do{if(On(K,Q))return!0}while(K=K.nextSibling)}function Er(){}function Zr(K,Q,Se,qe){K&&K._inc++,Se.namespaceURI===ne.XMLNS&&delete Q._nsMap[Se.prefix?Se.localName:""]}function qn(K,Q,Se){if(K&&K._inc){K._inc++;var qe=Q.childNodes;if(Se)qe[qe.length++]=Se;else{for(var bt=Q.firstChild,fn=0;bt;)qe[fn++]=bt,bt=bt.nextSibling;qe.length=fn}}}function zn(K,Q){var Se=Q.previousSibling,qe=Q.nextSibling;return Se?Se.nextSibling=qe:K.firstChild=qe,qe?qe.previousSibling=Se:K.lastChild=Se,qn(K.ownerDocument,K),Q}function Xi(K,Q,Se){var qe=Q.parentNode;if(qe&&qe.removeChild(Q),Q.nodeType===Qe){var bt=Q.firstChild;if(null==bt)return Q;var fn=Q.lastChild}else bt=fn=Q;var ur=Se?Se.previousSibling:K.lastChild;bt.previousSibling=ur,fn.nextSibling=Se,ur?ur.nextSibling=bt:K.firstChild=bt,null==Se?K.lastChild=fn:Se.previousSibling=fn;do{bt.parentNode=K}while(bt!==fn&&(bt=bt.nextSibling));return qn(K.ownerDocument||K,K),Q.nodeType==Qe&&(Q.firstChild=Q.lastChild=null),Q}function xn(){this._nsMap={}}function Yn(){}function si(){}function so(){}function Dn(){}function Wt(){}function sn(){}function Yr(){}function Si(){}function Sn(){}function hs(){}function jr(){}function Qr(){}function ge(K,Q){var Se=[],qe=9==this.nodeType&&this.documentElement||this,bt=qe.prefix,fn=qe.namespaceURI;if(fn&&null==bt&&null==(bt=qe.lookupPrefix(fn)))var ur=[{namespace:fn,prefix:null}];return dt(this,Se,K,Q,ur),Se.join("")}function xe(K,Q,Se){var qe=K.prefix||"",bt=K.namespaceURI;if(!bt||"xml"===qe&&bt===ne.XML||bt===ne.XMLNS)return!1;for(var fn=Se.length;fn--;){var ur=Se[fn];if(ur.prefix===qe)return ur.namespace!==bt}return!0}function Ae(K,Q,Se){K.push(" ",Q,'="',Se.replace(/[<&"]/g,Qi),'"')}function dt(K,Q,Se,qe,bt){if(bt||(bt=[]),qe){if(!(K=qe(K)))return;if("string"==typeof K)return void Q.push(K)}switch(K.nodeType){case ue:var fn=K.attributes,ur=fn.length,vr=K.firstChild,Ci=K.tagName,Ls=Ci;if(!(Se=ne.isHTML(K.namespaceURI)||Se)&&!K.prefix&&K.namespaceURI){for(var Li,Hn=0;Hn<fn.length;Hn++)if("xmlns"===fn.item(Hn).name){Li=fn.item(Hn).value;break}if(!Li)for(var mr=bt.length-1;mr>=0;mr--)if(""===(oi=bt[mr]).prefix&&oi.namespace===K.namespaceURI){Li=oi.namespace;break}if(Li!==K.namespaceURI)for(mr=bt.length-1;mr>=0;mr--){var oi;if((oi=bt[mr]).namespace===K.namespaceURI){oi.prefix&&(Ls=oi.prefix+":"+Ci);break}}}Q.push("<",Ls);for(var Qn=0;Qn<ur;Qn++)"xmlns"==(tr=fn.item(Qn)).prefix?bt.push({prefix:tr.localName,namespace:tr.value}):"xmlns"==tr.nodeName&&bt.push({prefix:"",namespace:tr.value});for(Qn=0;Qn<ur;Qn++){var tr,oo,Ji;xe(tr=fn.item(Qn),0,bt)&&(Ae(Q,(oo=tr.prefix||"")?"xmlns:"+oo:"xmlns",Ji=tr.namespaceURI),bt.push({prefix:oo,namespace:Ji})),dt(tr,Q,Se,qe,bt)}if(Ci===Ls&&xe(K,0,bt)&&(Ae(Q,(oo=K.prefix||"")?"xmlns:"+oo:"xmlns",Ji=K.namespaceURI),bt.push({prefix:oo,namespace:Ji})),vr||Se&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ci)){if(Q.push(">"),Se&&/^script$/i.test(Ci))for(;vr;)vr.data?Q.push(vr.data):dt(vr,Q,Se,qe,bt.slice()),vr=vr.nextSibling;else for(;vr;)dt(vr,Q,Se,qe,bt.slice()),vr=vr.nextSibling;Q.push("</",Ls,">")}else Q.push("/>");return;case Xe:case Qe:for(vr=K.firstChild;vr;)dt(vr,Q,Se,qe,bt.slice()),vr=vr.nextSibling;return;case re:return Ae(Q,K.name,K.value);case rt:return Q.push(K.data.replace(/[<&]/g,Qi).replace(/]]>/g,"]]&gt;"));case Ye:return Q.push("<![CDATA[",K.data,"]]>");case Oe:return Q.push("\x3c!--",K.data,"--\x3e");case lt:var Fs=K.publicId,lr=K.systemId;if(Q.push("<!DOCTYPE ",K.name),Fs)Q.push(" PUBLIC ",Fs),lr&&"."!=lr&&Q.push(" ",lr),Q.push(">");else if(lr&&"."!=lr)Q.push(" SYSTEM ",lr,">");else{var Ro=K.internalSubset;Ro&&Q.push(" [",Ro,"]"),Q.push(">")}return;case Ee:return Q.push("<?",K.target," ",K.data,"?>");case Je:return Q.push("&",K.nodeName,";");default:Q.push("??",K.nodeName)}}function Ce(K,Q,Se){var qe;switch(Q.nodeType){case ue:(qe=Q.cloneNode(!1)).ownerDocument=K;case Qe:break;case re:Se=!0}if(qe||(qe=Q.cloneNode(!1)),qe.ownerDocument=K,qe.parentNode=null,Se)for(var bt=Q.firstChild;bt;)qe.appendChild(Ce(K,bt,Se)),bt=bt.nextSibling;return qe}function $e(K,Q,Se){var qe=new Q.constructor;for(var bt in Q){var fn=Q[bt];"object"!=typeof fn&&fn!=qe[bt]&&(qe[bt]=fn)}switch(Q.childNodes&&(qe.childNodes=new St),qe.ownerDocument=K,qe.nodeType){case ue:var ur=Q.attributes,Ci=qe.attributes=new Qt,Ls=ur.length;Ci._ownerElement=qe;for(var Li=0;Li<Ls;Li++)qe.setAttributeNode($e(K,ur.item(Li),!0));break;case re:Se=!0}if(Se)for(var Hn=Q.firstChild;Hn;)qe.appendChild($e(K,Hn,Se)),Hn=Hn.nextSibling;return qe}function yt(K,Q,Se){K[Q]=Se}Ve.INVALID_STATE_ERR=(ot[11]="Invalid state",11),Ve.SYNTAX_ERR=(ot[12]="Syntax error",12),Ve.INVALID_MODIFICATION_ERR=(ot[13]="Invalid modification",13),Ve.NAMESPACE_ERR=(ot[14]="Invalid namespace",14),Ve.INVALID_ACCESS_ERR=(ot[15]="Invalid access",15),kt.prototype=Error.prototype,fe(Ve,kt),St.prototype={length:0,item:function(K){return this[K]||null},toString:function(K,Q){for(var Se=[],qe=0;qe<this.length;qe++)dt(this[qe],Se,K,Q);return Se.join("")}},Ut.prototype.item=function(K){return rn(this),this[K]},ve(Ut,St),Qt.prototype={length:0,item:St.prototype.item,getNamedItem:function(K){for(var Q=this.length;Q--;){var Se=this[Q];if(Se.nodeName==K)return Se}},setNamedItem:function(K){var Q=K.ownerElement;if(Q&&Q!=this._ownerElement)throw new kt(ye);var Se=this.getNamedItem(K.nodeName);return Vn(this._ownerElement,this,K,Se),Se},setNamedItemNS:function(K){var Se,Q=K.ownerElement;if(Q&&Q!=this._ownerElement)throw new kt(ye);return Se=this.getNamedItemNS(K.namespaceURI,K.localName),Vn(this._ownerElement,this,K,Se),Se},removeNamedItem:function(K){var Q=this.getNamedItem(K);return Zn(this._ownerElement,this,Q),Q},removeNamedItemNS:function(K,Q){var Se=this.getNamedItemNS(K,Q);return Zn(this._ownerElement,this,Se),Se},getNamedItemNS:function(K,Q){for(var Se=this.length;Se--;){var qe=this[Se];if(qe.localName==Q&&qe.namespaceURI==K)return qe}return null}},ar.prototype={hasFeature:function(K,Q){return!0},createDocument:function(K,Q,Se){var qe=new Er;if(qe.implementation=this,qe.childNodes=new St,qe.doctype=Se||null,Se&&qe.appendChild(Se),Q){var bt=qe.createElementNS(K,Q);qe.appendChild(bt)}return qe},createDocumentType:function(K,Q,Se){var qe=new sn;return qe.name=K,qe.nodeName=K,qe.publicId=Q||"",qe.systemId=Se||"",qe}},Ln.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(K,Q){return Xi(this,K,Q)},replaceChild:function(K,Q){this.insertBefore(K,Q),Q&&this.removeChild(Q)},removeChild:function(K){return zn(this,K)},appendChild:function(K){return this.insertBefore(K,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(K){return $e(this.ownerDocument||this,this,K)},normalize:function(){for(var K=this.firstChild;K;){var Q=K.nextSibling;Q&&Q.nodeType==rt&&K.nodeType==rt?(this.removeChild(Q),K.appendData(Q.data)):(K.normalize(),K=Q)}},isSupported:function(K,Q){return this.ownerDocument.implementation.hasFeature(K,Q)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(K){for(var Q=this;Q;){var Se=Q._nsMap;if(Se)for(var qe in Se)if(Se[qe]==K)return qe;Q=Q.nodeType==re?Q.ownerDocument:Q.parentNode}return null},lookupNamespaceURI:function(K){for(var Q=this;Q;){var Se=Q._nsMap;if(Se&&K in Se)return Se[K];Q=Q.nodeType==re?Q.ownerDocument:Q.parentNode}return null},isDefaultNamespace:function(K){return null==this.lookupPrefix(K)}},fe(J,Ln),fe(J,Ln.prototype),Er.prototype={nodeName:"#document",nodeType:Xe,doctype:null,documentElement:null,_inc:1,insertBefore:function(K,Q){if(K.nodeType==Qe){for(var Se=K.firstChild;Se;){var qe=Se.nextSibling;this.insertBefore(Se,Q),Se=qe}return K}return null==this.documentElement&&K.nodeType==ue&&(this.documentElement=K),Xi(this,K,Q),K.ownerDocument=this,K},removeChild:function(K){return this.documentElement==K&&(this.documentElement=null),zn(this,K)},importNode:function(K,Q){return Ce(this,K,Q)},getElementById:function(K){var Q=null;return On(this.documentElement,function(Se){if(Se.nodeType==ue&&Se.getAttribute("id")==K)return Q=Se,!0}),Q},getElementsByClassName:function(K){var Q=ce(K);return new Ut(this,function(Se){var qe=[];return Q.length>0&&On(Se.documentElement,function(bt){if(bt!==Se&&bt.nodeType===ue){var fn=bt.getAttribute("class");if(fn){var ur=K===fn;if(!ur){var Ci=ce(fn);ur=Q.every(function me(K){return function(Q){return K&&-1!==K.indexOf(Q)}}(Ci))}ur&&qe.push(bt)}}}),qe})},createElement:function(K){var Q=new xn;return Q.ownerDocument=this,Q.nodeName=K,Q.tagName=K,Q.localName=K,Q.childNodes=new St,(Q.attributes=new Qt)._ownerElement=Q,Q},createDocumentFragment:function(){var K=new hs;return K.ownerDocument=this,K.childNodes=new St,K},createTextNode:function(K){var Q=new so;return Q.ownerDocument=this,Q.appendData(K),Q},createComment:function(K){var Q=new Dn;return Q.ownerDocument=this,Q.appendData(K),Q},createCDATASection:function(K){var Q=new Wt;return Q.ownerDocument=this,Q.appendData(K),Q},createProcessingInstruction:function(K,Q){var Se=new jr;return Se.ownerDocument=this,Se.tagName=Se.target=K,Se.nodeValue=Se.data=Q,Se},createAttribute:function(K){var Q=new Yn;return Q.ownerDocument=this,Q.name=K,Q.nodeName=K,Q.localName=K,Q.specified=!0,Q},createEntityReference:function(K){var Q=new Sn;return Q.ownerDocument=this,Q.nodeName=K,Q},createElementNS:function(K,Q){var Se=new xn,qe=Q.split(":"),bt=Se.attributes=new Qt;return Se.childNodes=new St,Se.ownerDocument=this,Se.nodeName=Q,Se.tagName=Q,Se.namespaceURI=K,2==qe.length?(Se.prefix=qe[0],Se.localName=qe[1]):Se.localName=Q,bt._ownerElement=Se,Se},createAttributeNS:function(K,Q){var Se=new Yn,qe=Q.split(":");return Se.ownerDocument=this,Se.nodeName=Q,Se.name=Q,Se.namespaceURI=K,Se.specified=!0,2==qe.length?(Se.prefix=qe[0],Se.localName=qe[1]):Se.localName=Q,Se}},ve(Er,Ln),Er.prototype.getElementsByTagName=(xn.prototype={nodeType:ue,hasAttribute:function(K){return null!=this.getAttributeNode(K)},getAttribute:function(K){var Q=this.getAttributeNode(K);return Q&&Q.value||""},getAttributeNode:function(K){return this.attributes.getNamedItem(K)},setAttribute:function(K,Q){var Se=this.ownerDocument.createAttribute(K);Se.value=Se.nodeValue=""+Q,this.setAttributeNode(Se)},removeAttribute:function(K){var Q=this.getAttributeNode(K);Q&&this.removeAttributeNode(Q)},appendChild:function(K){return K.nodeType===Qe?this.insertBefore(K,null):function An(K,Q){var Se=Q.parentNode;if(Se){var qe=K.lastChild;Se.removeChild(Q),qe=K.lastChild}return qe=K.lastChild,Q.parentNode=K,Q.previousSibling=qe,Q.nextSibling=null,qe?qe.nextSibling=Q:K.firstChild=Q,K.lastChild=Q,qn(K.ownerDocument,K,Q),Q}(this,K)},setAttributeNode:function(K){return this.attributes.setNamedItem(K)},setAttributeNodeNS:function(K){return this.attributes.setNamedItemNS(K)},removeAttributeNode:function(K){return this.attributes.removeNamedItem(K.nodeName)},removeAttributeNS:function(K,Q){var Se=this.getAttributeNodeNS(K,Q);Se&&this.removeAttributeNode(Se)},hasAttributeNS:function(K,Q){return null!=this.getAttributeNodeNS(K,Q)},getAttributeNS:function(K,Q){var Se=this.getAttributeNodeNS(K,Q);return Se&&Se.value||""},setAttributeNS:function(K,Q,Se){var qe=this.ownerDocument.createAttributeNS(K,Q);qe.value=qe.nodeValue=""+Se,this.setAttributeNode(qe)},getAttributeNodeNS:function(K,Q){return this.attributes.getNamedItemNS(K,Q)},getElementsByTagName:function(K){return new Ut(this,function(Q){var Se=[];return On(Q,function(qe){qe!==Q&&qe.nodeType==ue&&("*"===K||qe.tagName==K)&&Se.push(qe)}),Se})},getElementsByTagNameNS:function(K,Q){return new Ut(this,function(Se){var qe=[];return On(Se,function(bt){bt!==Se&&bt.nodeType===ue&&("*"===K||bt.namespaceURI===K)&&("*"===Q||bt.localName==Q)&&qe.push(bt)}),qe})}}).getElementsByTagName,Er.prototype.getElementsByTagNameNS=xn.prototype.getElementsByTagNameNS,ve(xn,Ln),Yn.prototype.nodeType=re,ve(Yn,Ln),si.prototype={data:"",substringData:function(K,Q){return this.data.substring(K,K+Q)},appendData:function(K){this.nodeValue=this.data=K=this.data+K,this.length=K.length},insertData:function(K,Q){this.replaceData(K,0,Q)},appendChild:function(K){throw new Error(ot[z])},deleteData:function(K,Q){this.replaceData(K,Q,"")},replaceData:function(K,Q,Se){var qe=this.data.substring(0,K),bt=this.data.substring(K+Q);this.nodeValue=this.data=Se=qe+Se+bt,this.length=Se.length}},ve(si,Ln),so.prototype={nodeName:"#text",nodeType:rt,splitText:function(K){var Q=this.data,Se=Q.substring(K);Q=Q.substring(0,K),this.data=this.nodeValue=Q,this.length=Q.length;var qe=this.ownerDocument.createTextNode(Se);return this.parentNode&&this.parentNode.insertBefore(qe,this.nextSibling),qe}},ve(so,si),Dn.prototype={nodeName:"#comment",nodeType:Oe},ve(Dn,si),Wt.prototype={nodeName:"#cdata-section",nodeType:Ye},ve(Wt,si),sn.prototype.nodeType=lt,ve(sn,Ln),Yr.prototype.nodeType=Pe,ve(Yr,Ln),Si.prototype.nodeType=wt,ve(Si,Ln),Sn.prototype.nodeType=Je,ve(Sn,Ln),hs.prototype.nodeName="#document-fragment",hs.prototype.nodeType=Qe,ve(hs,Ln),jr.prototype.nodeType=Ee,ve(jr,Ln),Qr.prototype.serializeToString=function(K,Q,Se){return ge.call(K,Q,Se)},Ln.prototype.toString=ge;try{if(Object.defineProperty){let K=function(Q){switch(Q.nodeType){case ue:case Qe:var Se=[];for(Q=Q.firstChild;Q;)7!==Q.nodeType&&8!==Q.nodeType&&Se.push(K(Q)),Q=Q.nextSibling;return Se.join("");default:return Q.nodeValue}};Object.defineProperty(Ut.prototype,"length",{get:function(){return rn(this),this.$$length}}),Object.defineProperty(Ln.prototype,"textContent",{get:function(){return K(this)},set:function(Q){switch(this.nodeType){case ue:case Qe:for(;this.firstChild;)this.removeChild(this.firstChild);(Q||String(Q))&&this.appendChild(this.ownerDocument.createTextNode(Q));break;default:this.data=Q,this.value=Q,this.nodeValue=Q}}}),yt=function(Q,Se,qe){Q["$$"+Se]=qe}}}catch(K){}_e.DocumentType=sn,_e.DOMException=kt,_e.DOMImplementation=ar,_e.Element=xn,_e.Node=Ln,_e.NodeList=St,_e.XMLSerializer=Qr},4436:(Ze,_e,B)=>{var h=B(9401).freeze;_e.XML_ENTITIES=h({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),_e.HTML_ENTITIES=h({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),_e.entityMap=_e.HTML_ENTITIES},978:(Ze,_e,B)=>{B(6853);_e.DOMParser=B(1991).DOMParser},8702:(Ze,_e,B)=>{var h=B(9401).NAMESPACE,ne=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,V=new RegExp("[\\-\\.0-9"+ne.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),de=new RegExp("^"+ne.source+V.source+"*(?::"+ne.source+V.source+"*)?$");function rt(R,z){this.message=R,this.locator=z,Error.captureStackTrace&&Error.captureStackTrace(this,rt)}function Ye(){}function wt(R,z){return z.lineNumber=R.lineNumber,z.columnNumber=R.columnNumber,z}function Ee(R,z,Y,he,oe,we){function X(Nt,kt,St){Y.attributeNames.hasOwnProperty(Nt)&&we.fatalError("Attribute "+Nt+" redefined"),Y.addValue(Nt,kt,St)}for(var se,He=++z,Re=0;;){var Fe=R.charAt(He);switch(Fe){case"=":if(1===Re)se=R.slice(z,He),Re=3;else{if(2!==Re)throw new Error("attribute equal must after attrName");Re=3}break;case"'":case'"':if(3===Re||1===Re){if(1===Re&&(we.warning('attribute value must after "="'),se=R.slice(z,He)),!((He=R.indexOf(Fe,z=He+1))>0))throw new Error("attribute value no end '"+Fe+"' match");X(se,ye=R.slice(z,He).replace(/&#?\w+;/g,oe),z-1),Re=5}else{if(4!=Re)throw new Error('attribute value must after "="');X(se,ye=R.slice(z,He).replace(/&#?\w+;/g,oe),z),we.warning('attribute "'+se+'" missed start quot('+Fe+")!!"),z=He+1,Re=5}break;case"/":switch(Re){case 0:Y.setTagName(R.slice(z,He));case 5:case 6:case 7:Re=7,Y.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return we.error("unexpected end of input"),0==Re&&Y.setTagName(R.slice(z,He)),He;case">":switch(Re){case 0:Y.setTagName(R.slice(z,He));case 5:case 6:case 7:break;case 4:case 1:"/"===(ye=R.slice(z,He)).slice(-1)&&(Y.closed=!0,ye=ye.slice(0,-1));case 2:2===Re&&(ye=se),4==Re?(we.warning('attribute "'+ye+'" missed quot(")!'),X(se,ye.replace(/&#?\w+;/g,oe),z)):((!h.isHTML(he[""])||!ye.match(/^(?:disabled|checked|selected)$/i))&&we.warning('attribute "'+ye+'" missed value!! "'+ye+'" instead!!'),X(ye,ye,z));break;case 3:throw new Error("attribute value missed!!")}return He;case"\x80":Fe=" ";default:if(Fe<=" ")switch(Re){case 0:Y.setTagName(R.slice(z,He)),Re=6;break;case 1:se=R.slice(z,He),Re=2;break;case 4:var ye=R.slice(z,He).replace(/&#?\w+;/g,oe);we.warning('attribute "'+ye+'" missed quot(")!!'),X(se,ye,z);case 5:Re=6}else switch(Re){case 2:(!h.isHTML(he[""])||!se.match(/^(?:disabled|checked|selected)$/i))&&we.warning('attribute "'+se+'" missed value!! "'+se+'" instead2!!'),X(se,se,z),z=He,Re=1;break;case 5:we.warning('attribute space is required"'+se+'"!!');case 6:Re=1,z=He;break;case 3:Re=4,z=He;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}He++}}function Oe(R,z,Y){for(var he=R.tagName,oe=null,Fe=R.length;Fe--;){var we=R[Fe],X=we.qName,se=we.value;if((pt=X.indexOf(":"))>0)var ye=we.prefix=X.slice(0,pt),He=X.slice(pt+1),Re="xmlns"===ye&&He;else He=X,ye=null,Re="xmlns"===X&&"";we.localName=He,!1!==Re&&(null==oe&&(oe={},Qe(Y,Y={})),Y[Re]=oe[Re]=se,we.uri=h.XMLNS,z.startPrefixMapping(Re,se))}for(Fe=R.length;Fe--;)(ye=(we=R[Fe]).prefix)&&("xml"===ye&&(we.uri=h.XML),"xmlns"!==ye&&(we.uri=Y[ye||""]));var pt;(pt=he.indexOf(":"))>0?(ye=R.prefix=he.slice(0,pt),He=R.localName=he.slice(pt+1)):(ye=null,He=R.localName=he);var Nt=R.uri=Y[ye||""];if(z.startElement(Nt,He,he,R),!R.closed)return R.currentNSMap=Y,R.localNSMap=oe,!0;if(z.endElement(Nt,He,he),oe)for(ye in oe)z.endPrefixMapping(ye)}function Xe(R,z,Y,he,oe){if(/^(?:script|textarea)$/i.test(Y)){var we=R.indexOf("</"+Y+">",z),X=R.substring(z+1,we);if(/[&<]/.test(X))return/^script$/i.test(Y)?(oe.characters(X,0,X.length),we):(X=X.replace(/&#?\w+;/g,he),oe.characters(X,0,X.length),we)}return z+1}function lt(R,z,Y,he){var oe=he[Y];return null==oe&&((oe=R.lastIndexOf("</"+Y+">"))<z&&(oe=R.lastIndexOf("</"+Y)),he[Y]=oe),oe<z}function Qe(R,z){for(var Y in R)z[Y]=R[Y]}function Pe(R,z,Y,he){if("-"===R.charAt(z+2))return"-"===R.charAt(z+3)?(we=R.indexOf("--\x3e",z+4))>z?(Y.comment(R,z+4,we-z-4),we+3):(he.error("Unclosed comment"),-1):-1;if("CDATA["==R.substr(z+3,6)){var we=R.indexOf("]]>",z+9);return Y.startCDATA(),Y.characters(R,z+9,we-z-9),Y.endCDATA(),we+3}var X=function gt(R,z){var Y,he=[],oe=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(oe.lastIndex=z,oe.exec(R);Y=oe.exec(R);)if(he.push(Y),Y[1])return he}(R,z),se=X.length;if(se>1&&/!doctype/i.test(X[0][0])){var ye=X[1][0],He=!1,Re=!1;se>3&&(/^public$/i.test(X[2][0])?(He=X[3][0],Re=se>4&&X[4][0]):/^system$/i.test(X[2][0])&&(Re=X[3][0]));var Fe=X[se-1];return Y.startDTD(ye,He,Re),Y.endDTD(),Fe.index+Fe[0].length}return-1}function Ve(R,z,Y){var he=R.indexOf("?>",z);if(he){var oe=R.substring(z,he).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return oe?(Y.processingInstruction(oe[1],oe[2]),he+2):-1}return-1}function ot(){this.attributeNames={}}(rt.prototype=new Error).name=rt.name,Ye.prototype={parse:function(R,z,Y){var he=this.domBuilder;he.startDocument(),Qe(z,z={}),function Je(R,z,Y,he,oe){function X(An){var xn=An.slice(1,-1);return xn in Y?Y[xn]:"#"===xn.charAt(0)?function we(An){return An>65535?(An-=65536,String.fromCharCode(55296+(An>>10),56320+(1023&An))):String.fromCharCode(An)}(parseInt(xn.substr(1).replace("x","0x"))):(oe.error("entity not found:"+An),An)}function se(An){if(An>St){var xn=R.substring(St,An).replace(/&#?\w+;/g,X);pt&&ye(St),he.characters(xn,0,An-St),St=An}}function ye(An,xn){for(;An>=Re&&(xn=Fe.exec(R));)Re=(He=xn.index)+xn[0].length,pt.lineNumber++;pt.columnNumber=An-He+1}for(var He=0,Re=0,Fe=/.*(?:\r\n?|\n)|.*$/g,pt=he.locator,Nt=[{currentNSMap:z}],kt={},St=0;;){try{var Ut=R.indexOf("<",St);if(Ut<0){if(!R.substr(St).match(/^\s*$/)){var rn=he.doc,Qt=rn.createTextNode(R.substr(St));rn.appendChild(Qt),he.currentElement=Qt}return}switch(Ut>St&&se(Ut),R.charAt(Ut+1)){case"/":var Vt=R.indexOf(">",Ut+3),Bn=R.substring(Ut+2,Vt).replace(/[ \t\n\r]+$/g,""),Vn=Nt.pop();Vt<0?(Bn=R.substring(Ut+2).replace(/[\s<].*/,""),oe.error("end tag name: "+Bn+" is not complete:"+Vn.tagName),Vt=Ut+1+Bn.length):Bn.match(/\s</)&&(Bn=Bn.replace(/[\s<].*/,""),oe.error("end tag name: "+Bn+" maybe not complete"),Vt=Ut+1+Bn.length);var Zn=Vn.localNSMap,ar=Vn.tagName==Bn;if(ar||Vn.tagName&&Vn.tagName.toLowerCase()==Bn.toLowerCase()){if(he.endElement(Vn.uri,Vn.localName,Bn),Zn)for(var Qi in Zn)he.endPrefixMapping(Qi);ar||oe.fatalError("end tag name: "+Bn+" is not match the current start tagName:"+Vn.tagName)}else Nt.push(Vn);Vt++;break;case"?":pt&&ye(Ut),Vt=Ve(R,Ut,he);break;case"!":pt&&ye(Ut),Vt=Pe(R,Ut,he,oe);break;default:pt&&ye(Ut);var On=new ot,Er=Nt[Nt.length-1].currentNSMap,Zr=(Vt=Ee(R,Ut,On,Er,X,oe),On.length);if(!On.closed&&lt(R,Vt,On.tagName,kt)&&(On.closed=!0,Y.nbsp||oe.warning("unclosed xml attribute")),pt&&Zr){for(var qn=wt(pt,{}),zn=0;zn<Zr;zn++){var Xi=On[zn];ye(Xi.offset),Xi.locator=wt(pt,{})}he.locator=qn,Oe(On,he,Er)&&Nt.push(On),he.locator=pt}else Oe(On,he,Er)&&Nt.push(On);h.isHTML(On.uri)&&!On.closed?Vt=Xe(R,Vt,On.tagName,X,he):Vt++}}catch(An){if(An instanceof rt)throw An;oe.error("element parse error: "+An),Vt=-1}Vt>St?St=Vt:se(Math.max(Ut,St)+1)}}(R,z,Y,he,this.errorHandler),he.endDocument()}},ot.prototype={setTagName:function(R){if(!de.test(R))throw new Error("invalid tagName:"+R);this.tagName=R},addValue:function(R,z,Y){if(!de.test(R))throw new Error("invalid attribute:"+R);this.attributeNames[R]=this.length,this[this.length++]={qName:R,value:z,offset:Y}},length:0,getLocalName:function(R){return this[R].localName},getLocator:function(R){return this[R].locator},getQName:function(R){return this[R].qName},getURI:function(R){return this[R].uri},getValue:function(R){return this[R].value}},_e.XMLReader=Ye,_e.ParseError=rt},5867:(Ze,_e,B)=>{"use strict";B.d(_e,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=B(9681);(0,h.registerVersion)("firebase","9.8.2","app")},127:(Ze,_e,B)=>{"use strict";B.d(_e,{Z:()=>h.Z});var h=B(3942);h.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Ze,_e,B)=>{"use strict";B.r(_e);var h=B(5861),ne=B(3942),V=B(2090),de=B(9681),ie=B(655),ce=B(1877),me=B(4859);const Je=function rt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},wt=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ee=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new ce.Yd("@firebase/auth");function lt(b,...m){Xe.logLevel<=ce.in.ERROR&&Xe.error(`Auth (${de.SDK_VERSION}): ${b}`,...m)}function Qe(b,...m){throw gt(b,...m)}function Pe(b,...m){return gt(b,...m)}function Ve(b,m,_){const C=Object.assign(Object.assign({},wt()),{[m]:_});return new V.LL("auth","Firebase",C).create(m,{appName:b.name})}function ot(b,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Qe(b,"argument-error"),Ve(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gt(b,...m){if("string"!=typeof b){const _=m[0],C=[...m.slice(1)];return C[0]&&(C[0].appName=b.name),b._errorFactory.create(_,...C)}return Ee.create(b,...m)}function R(b,m,..._){if(!b)throw gt(m,..._)}function z(b){const m="INTERNAL ASSERTION FAILED: "+b;throw lt(m),new Error(m)}function Y(b,m){b||z(m)}const he=new Map;function oe(b){Y(b instanceof Function,"Expected a class definition");let m=he.get(b);return m?(Y(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,he.set(b,m),m)}function se(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ye(){return"http:"===He()||"https:"===He()}function He(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class pt{constructor(m,_){this.shortDelay=m,this.longDelay=_,Y(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Re(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ye()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nt(b,m){Y(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class kt{static initialize(m,_,C){this.fetchImpl=m,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const St={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ut=new pt(3e4,6e4);function rn(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function Qt(b,m,_,C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,h.Z)(function*(b,m,_,C,j={}){return Vn(b,j,(0,h.Z)(function*(){let Z={},ke={};C&&("GET"===m?ke=C:Z={body:JSON.stringify(C)});const it=(0,V.xO)(Object.assign({key:b.config.apiKey},ke)).slice(1),xt=yield b._getAdditionalHeaders();return xt["Content-Type"]="application/json",b.languageCode&&(xt["X-Firebase-Locale"]=b.languageCode),kt.fetch()(Qi(b,b.config.apiHost,_,it),Object.assign({method:m,headers:xt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function Vn(b,m,_){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(b,m,_){b._canInitEmulator=!1;const C=Object.assign(Object.assign({},St),m);try{const j=new On(b),Z=yield Promise.race([_(),j.promise]);j.clearNetworkTimeout();const ke=yield Z.json();if("needConfirmation"in ke)throw Er(b,"account-exists-with-different-credential",ke);if(Z.ok&&!("errorMessage"in ke))return ke;{const it=Z.ok?ke.errorMessage:ke.error.message,[xt,$t]=it.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xt)throw Er(b,"credential-already-in-use",ke);if("EMAIL_EXISTS"===xt)throw Er(b,"email-already-in-use",ke);if("USER_DISABLED"===xt)throw Er(b,"user-disabled",ke);const on=C[xt]||xt.toLowerCase().replace(/[_\s]+/g,"-");if($t)throw Ve(b,on,$t);Qe(b,on)}}catch(j){if(j instanceof V.ZR)throw j;Qe(b,"network-request-failed")}})).apply(this,arguments)}function ar(b,m,_,C){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(b,m,_,C,j={}){const Z=yield Qt(b,m,_,C,j);return"mfaPendingCredential"in Z&&Qe(b,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function Qi(b,m,_,C){const j=`${m}${_}?${C}`;return b.config.emulator?Nt(b.config,j):`${b.config.apiScheme}://${j}`}class On{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Pe(this.auth,"network-request-failed")),Ut.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Er(b,m,_){const C={appName:b.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const j=Pe(b,m,C);return j.customData._tokenResponse=_,j}function Zr(){return(Zr=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function qn(b,m){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Xi(b,m){return An.apply(this,arguments)}function An(){return(An=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function xn(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function so(){return(so=(0,h.Z)(function*(b,m=!1){const _=(0,V.m9)(b),C=yield _.getIdToken(m),j=Wt(C);R(j&&j.exp&&j.auth_time&&j.iat,_.auth,"internal-error");const Z="object"==typeof j.firebase?j.firebase:void 0,ke=null==Z?void 0:Z.sign_in_provider;return{claims:j,token:C,authTime:xn(Dn(j.auth_time)),issuedAtTime:xn(Dn(j.iat)),expirationTime:xn(Dn(j.exp)),signInProvider:ke||null,signInSecondFactor:(null==Z?void 0:Z.sign_in_second_factor)||null}})).apply(this,arguments)}function Dn(b){return 1e3*Number(b)}function Wt(b){const[m,_,C]=b.split(".");if(void 0===m||void 0===_||void 0===C)return lt("JWT malformed, contained fewer than 3 sections"),null;try{const j=(0,V.tV)(_);return j?JSON.parse(j):(lt("Failed to decode base64 JWT payload"),null)}catch(j){return lt("Caught error parsing JWT payload as JSON",j),null}}function Yr(b,m){return Si.apply(this,arguments)}function Si(){return(Si=(0,h.Z)(function*(b,m,_=!1){if(_)return m;try{return yield m}catch(C){throw C instanceof V.ZR&&Sn(C)&&b.auth.currentUser===b&&(yield b.auth.signOut()),C}})).apply(this,arguments)}function Sn({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class hs{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const j=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,j)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(m);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),C)}iteration(){var m=this;return(0,h.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class jr{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=xn(this.lastLoginAt),this.creationTime=xn(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qr(b){return ge.apply(this,arguments)}function ge(){return(ge=(0,h.Z)(function*(b){var m;const _=b.auth,C=yield b.getIdToken(),j=yield Yr(b,Xi(_,{idToken:C}));R(null==j?void 0:j.users.length,_,"internal-error");const Z=j.users[0];b._notifyReloadListener(Z);const ke=(null===(m=Z.providerUserInfo)||void 0===m?void 0:m.length)?Ce(Z.providerUserInfo):[],it=dt(b.providerData,ke),on=!!b.isAnonymous&&!(b.email&&Z.passwordHash||(null==it?void 0:it.length)),tn={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:it,metadata:new jr(Z.createdAt,Z.lastLoginAt),isAnonymous:on};Object.assign(b,tn)})).apply(this,arguments)}function Ae(){return(Ae=(0,h.Z)(function*(b){const m=(0,V.m9)(b);yield Qr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function dt(b,m){return[...b.filter(C=>!m.some(j=>j.providerId===C.providerId)),...m]}function Ce(b){return b.map(m=>{var{providerId:_}=m,C=(0,ie._T)(m,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function yt(){return(yt=(0,h.Z)(function*(b,m){const _=yield Vn(b,{},(0,h.Z)(function*(){const C=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:j,apiKey:Z}=b.config,ke=Qi(b,j,"/v1/token",`key=${Z}`),it=yield b._getAdditionalHeaders();return it["Content-Type"]="application/x-www-form-urlencoded",kt.fetch()(ke,{method:"POST",headers:it,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Gt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){R(m.idToken,"internal-error"),R(void 0!==m.idToken,"internal-error"),R(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function sn(b){const m=Wt(b);return R(m,"internal-error"),R(void 0!==m.exp,"internal-error"),R(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var C=this;return(0,h.Z)(function*(){return R(!C.accessToken||C.refreshToken,m,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(m,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var C=this;return(0,h.Z)(function*(){const{accessToken:j,refreshToken:Z,expiresIn:ke}=yield function $e(b,m){return yt.apply(this,arguments)}(m,_);C.updateTokensAndExpiration(j,Z,Number(ke))})()}updateTokensAndExpiration(m,_,C){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(m,_){const{refreshToken:C,accessToken:j,expirationTime:Z}=_,ke=new Gt;return C&&(R("string"==typeof C,"internal-error",{appName:m}),ke.refreshToken=C),j&&(R("string"==typeof j,"internal-error",{appName:m}),ke.accessToken=j),Z&&(R("number"==typeof Z,"internal-error",{appName:m}),ke.expirationTime=Z),ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Gt,this.toJSON())}_performRefresh(){return z("not implemented")}}function K(b,m){R("string"==typeof b||void 0===b,"internal-error",{appName:m})}class Q{constructor(m){var{uid:_,auth:C,stsTokenManager:j}=m,Z=(0,ie._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=j,this.accessToken=j.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new jr(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,h.Z)(function*(){const C=yield Yr(_,_.stsTokenManager.getToken(_.auth,m));return R(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(m){return function si(b){return so.apply(this,arguments)}(this,m)}reload(){return function xe(b){return Ae.apply(this,arguments)}(this)}_assign(m){this!==m&&(R(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Q(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var C=this;return(0,h.Z)(function*(){let j=!1;m.idToken&&m.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(m),j=!0),_&&(yield Qr(C)),yield C.auth._persistUserIfCurrent(C),j&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var m=this;return(0,h.Z)(function*(){const _=yield m.getIdToken();return yield Yr(m,function Vt(b,m){return Zr.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var C,j,Z,ke,it,xt,$t,on;const tn=null!==(C=_.displayName)&&void 0!==C?C:void 0,Pr=null!==(j=_.email)&&void 0!==j?j:void 0,Ts=null!==(Z=_.phoneNumber)&&void 0!==Z?Z:void 0,Tc=null!==(ke=_.photoURL)&&void 0!==ke?ke:void 0,sg=null!==(it=_.tenantId)&&void 0!==it?it:void 0,yv=null!==(xt=_._redirectEventId)&&void 0!==xt?xt:void 0,Il=null!==($t=_.createdAt)&&void 0!==$t?$t:void 0,Rd=null!==(on=_.lastLoginAt)&&void 0!==on?on:void 0,{uid:vf,emailVerified:_v,isAnonymous:Or,providerData:og,stsTokenManager:ag}=_;R(vf&&ag,m,"internal-error");const ug=Gt.fromJSON(this.name,ag);R("string"==typeof vf,m,"internal-error"),K(tn,m.name),K(Pr,m.name),R("boolean"==typeof _v,m,"internal-error"),R("boolean"==typeof Or,m,"internal-error"),K(Ts,m.name),K(Tc,m.name),K(sg,m.name),K(yv,m.name),K(Il,m.name),K(Rd,m.name);const Vu=new Q({uid:vf,auth:m,email:Pr,emailVerified:_v,displayName:tn,isAnonymous:Or,photoURL:Tc,phoneNumber:Ts,tenantId:sg,stsTokenManager:ug,createdAt:Il,lastLoginAt:Rd});return og&&Array.isArray(og)&&(Vu.providerData=og.map(Ec=>Object.assign({},Ec))),yv&&(Vu._redirectEventId=yv),Vu}static _fromIdTokenResponse(m,_,C=!1){return(0,h.Z)(function*(){const j=new Gt;j.updateFromServerResponse(_);const Z=new Q({uid:_.localId,auth:m,stsTokenManager:j,isAnonymous:C});return yield Qr(Z),Z})()}}const qe=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,C){var j=this;return(0,h.Z)(function*(){j.storage[_]=C})()}_get(_){var C=this;return(0,h.Z)(function*(){const j=C.storage[_];return void 0===j?null:j})()}_remove(_){var C=this;return(0,h.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return b.type="NONE",b})();function bt(b,m,_){return`firebase:${b}:${m}:${_}`}class fn{constructor(m,_,C){this.persistence=m,this.auth=_,this.userKey=C;const{config:j,name:Z}=this.auth;this.fullUserKey=bt(this.userKey,j.apiKey,Z),this.fullPersistenceKey=bt("persistence",j.apiKey,Z),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,h.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?Q._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,h.Z)(function*(){if(_.persistence===m)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,C="authUser"){return(0,h.Z)(function*(){if(!_.length)return new fn(oe(qe),m,C);const j=(yield Promise.all(_.map(function(){var $t=(0,h.Z)(function*(on){if(yield on._isAvailable())return on});return function(on){return $t.apply(this,arguments)}}()))).filter($t=>$t);let Z=j[0]||oe(qe);const ke=bt(C,m.config.apiKey,m.name);let it=null;for(const $t of _)try{const on=yield $t._get(ke);if(on){const tn=Q._fromJSON(m,on);$t!==Z&&(it=tn),Z=$t;break}}catch(on){}const xt=j.filter($t=>$t._shouldAllowMigration);return Z._shouldAllowMigration&&xt.length?(Z=xt[0],it&&(yield Z._set(ke,it.toJSON())),yield Promise.all(_.map(function(){var $t=(0,h.Z)(function*(on){if(on!==Z)try{yield on._remove(ke)}catch(tn){}});return function(on){return $t.apply(this,arguments)}}())),new fn(Z,m,C)):new fn(Z,m,C)})()}}function ur(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Hn(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Ci(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(oi(m))return"Blackberry";if(Qn(m))return"Webos";if(Ls(m))return"Safari";if((m.includes("chrome/")||Li(m))&&!m.includes("edge/"))return"Chrome";if(mr(m))return"Android";{const C=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function Ci(b=(0,V.z$)()){return/firefox\//i.test(b)}function Ls(b=(0,V.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Li(b=(0,V.z$)()){return/crios\//i.test(b)}function Hn(b=(0,V.z$)()){return/iemobile/i.test(b)}function mr(b=(0,V.z$)()){return/android/i.test(b)}function oi(b=(0,V.z$)()){return/blackberry/i.test(b)}function Qn(b=(0,V.z$)()){return/webos/i.test(b)}function tr(b=(0,V.z$)()){return/iphone|ipad|ipod/i.test(b)}function Fs(b=(0,V.z$)()){return tr(b)||mr(b)||Qn(b)||oi(b)||/windows phone/i.test(b)||Hn(b)}function Ro(b,m=[]){let _;switch(b){case"Browser":_=ur((0,V.z$)());break;case"Worker":_=`${ur((0,V.z$)())}-${b}`;break;default:_=b}const C=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${de.SDK_VERSION}/${C}`}class es{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const C=Z=>new Promise((ke,it)=>{try{ke(m(Z))}catch(xt){it(xt)}});C.onAbort=_,this.queue.push(C);const j=this.queue.length-1;return()=>{this.queue[j]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,h.Z)(function*(){if(_.auth.currentUser===m)return;const C=[];try{for(const j of _.queue)yield j(m),j.onAbort&&C.push(j.onAbort)}catch(j){C.reverse();for(const Z of C)try{Z()}catch(ke){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:j.message})}})()}}class jt{constructor(m,_,C){this.app=m,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wn(this),this.idTokenSubscription=new Wn(this),this.beforeStateQueue=new es(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ee,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(m,_){var C=this;return _&&(this._popupRedirectResolver=oe(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var j,Z;if(!C._deleted&&(C.persistenceManager=yield fn.create(C,m),!C._deleted)){if(null===(j=C._popupRedirectResolver)||void 0===j?void 0:j._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(ke){}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(Z=C.currentUser)||void 0===Z?void 0:Z.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,h.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,h.Z)(function*(){var C;const j=yield _.assertedPersistence.getCurrentUser();let Z=j,ke=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const it=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,xt=null==Z?void 0:Z._redirectEventId,$t=yield _.tryRedirectSignIn(m);(!it||it===xt)&&(null==$t?void 0:$t.user)&&(Z=$t.user,ke=!0)}if(!Z)return _.directlySetCurrentUser(null);if(!Z._redirectEventId){if(ke)try{yield _.beforeStateQueue.runMiddleware(Z)}catch(it){Z=j,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(it))}return Z?_.reloadAndSetCurrentUserOrClear(Z):_.directlySetCurrentUser(null)}return R(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===Z._redirectEventId?_.directlySetCurrentUser(Z):_.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(m){var _=this;return(0,h.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(j){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,h.Z)(function*(){try{yield Qr(m)}catch(C){if("auth/network-request-failed"!==C.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Fe(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,h.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,h.Z)(function*(){const C=m?(0,V.m9)(m):null;return C&&R(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(m,_=!1){var C=this;return(0,h.Z)(function*(){if(!C._deleted)return m&&R(C.tenantId===m.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(m)),C.queue((0,h.Z)(function*(){yield C.directlySetCurrentUser(m),C.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,h.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(oe(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,C){return this.registerStateListener(this.authStateSubscription,m,_,C)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,C){return this.registerStateListener(this.idTokenSubscription,m,_,C)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var C=this;return(0,h.Z)(function*(){const j=yield C.getOrInitRedirectPersistenceManager(_);return null===m?j.removeCurrentUser():j.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const C=m&&oe(m)||_._popupRedirectResolver;R(C,_,"argument-error"),_.redirectPersistenceManager=yield fn.create(_,[oe(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,h.Z)(function*(){var C,j;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===m?_._currentUser:(null===(j=_.redirectUser)||void 0===j?void 0:j._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,h.Z)(function*(){if(m===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,C,j){if(this._deleted)return()=>{};const Z="function"==typeof _?_:_.next.bind(_),ke=this._isInitialized?Promise.resolve():this._initializationPromise;return R(ke,this,"internal-error"),ke.then(()=>Z(this.currentUser)),"function"==typeof _?m.addObserver(_,C,j):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Ro(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,h.Z)(function*(){var _;const C={"X-Client-Version":m.clientVersion};m.app.options.appId&&(C["X-Firebase-gmpid"]=m.app.options.appId);const j=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return j&&(C["X-Firebase-Client"]=j),C})()}}function Jt(b){return(0,V.m9)(b)}class Wn{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ao(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function uo(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class js{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return z("not implemented")}_getIdTokenResponse(m){return z("not implemented")}_linkToIdToken(m,_){return z("not implemented")}_getReauthenticationResolver(m){return z("not implemented")}}function xr(b,m){return yn.apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:resetPassword",rn(b,m))})).apply(this,arguments)}function sl(b,m){return ns.apply(this,arguments)}function ns(){return(ns=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ql(b,m){return da.apply(this,arguments)}function da(){return(da=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:update",rn(b,m))})).apply(this,arguments)}function Ua(){return(Ua=(0,h.Z)(function*(b,m){return ar(b,"POST","/v1/accounts:signInWithPassword",rn(b,m))})).apply(this,arguments)}function ha(b,m){return cr.apply(this,arguments)}function cr(){return(cr=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:sendOobCode",rn(b,m))})).apply(this,arguments)}function Xn(b,m){return zl.apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(b,m){return ha(b,m)})).apply(this,arguments)}function ol(b,m){return rs.apply(this,arguments)}function rs(){return(rs=(0,h.Z)(function*(b,m){return ha(b,m)})).apply(this,arguments)}function lo(b,m){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,h.Z)(function*(b,m){return ha(b,m)})).apply(this,arguments)}function Th(b,m){return co.apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(b,m){return ha(b,m)})).apply(this,arguments)}function Qc(){return(Qc=(0,h.Z)(function*(b,m){return ar(b,"POST","/v1/accounts:signInWithEmailLink",rn(b,m))})).apply(this,arguments)}function Eh(){return(Eh=(0,h.Z)(function*(b,m){return ar(b,"POST","/v1/accounts:signInWithEmailLink",rn(b,m))})).apply(this,arguments)}class xi extends js{constructor(m,_,C,j=null){super("password",C),this._email=m,this._password=_,this._tenantId=j}static _fromEmailAndPassword(m,_){return new xi(m,_,"password")}static _fromEmailAndCode(m,_,C=null){return new xi(m,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return function Ir(b,m){return Ua.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ho(b,m){return Qc.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Qe(m,"internal-error")}})()}_linkToIdToken(m,_){var C=this;return(0,h.Z)(function*(){switch(C.signInMethod){case"password":return sl(m,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Hm(b,m){return Eh.apply(this,arguments)}(m,{idToken:_,email:C._email,oobCode:C._password});default:Qe(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function fa(b,m){return wh.apply(this,arguments)}function wh(){return(wh=(0,h.Z)(function*(b,m){return ar(b,"POST","/v1/accounts:signInWithIdp",rn(b,m))})).apply(this,arguments)}class No extends js{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new No(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Qe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:j}=_,Z=(0,ie._T)(_,["providerId","signInMethod"]);if(!C||!j)return null;const ke=new No(C,j);return ke.idToken=Z.idToken||void 0,ke.accessToken=Z.accessToken||void 0,ke.secret=Z.secret,ke.nonce=Z.nonce,ke.pendingToken=Z.pendingToken||null,ke}_getIdTokenResponse(m){return fa(m,this.buildRequest())}_linkToIdToken(m,_){const C=this.buildRequest();return C.idToken=_,fa(m,C)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,fa(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function Sh(b,m){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:sendVerificationCode",rn(b,m))})).apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(b,m){return ar(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,m))})).apply(this,arguments)}function xh(){return(xh=(0,h.Z)(function*(b,m){const _=yield ar(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,m));if(_.temporaryProof)throw Er(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Jc={USER_NOT_FOUND:"user-not-found"};function Ih(){return(Ih=(0,h.Z)(function*(b,m){return ar(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Jc)})).apply(this,arguments)}class bu extends js{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new bu({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new bu({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Xc(b,m){return pa.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function $m(b,m){return xh.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function qm(b,m){return Ih.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:C,verificationCode:j}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:C,code:j}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:C,phoneNumber:j,temporaryProof:Z}=m;return C||_||j||Z?new bu({verificationId:_,verificationCode:C,phoneNumber:j,temporaryProof:Z}):null}}class Kl{constructor(m){var _,C,j,Z,ke,it;const xt=(0,V.zd)((0,V.pd)(m)),$t=null!==(_=xt.apiKey)&&void 0!==_?_:null,on=null!==(C=xt.oobCode)&&void 0!==C?C:null,tn=function Rp(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(j=xt.mode)&&void 0!==j?j:null);R($t&&on&&tn,"argument-error"),this.apiKey=$t,this.operation=tn,this.code=on,this.continueUrl=null!==(Z=xt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(ke=xt.languageCode)&&void 0!==ke?ke:null,this.tenantId=null!==(it=xt.tenantId)&&void 0!==it?it:null}static parseLink(m){const _=function al(b){const m=(0,V.zd)((0,V.pd)(b)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,C=(0,V.zd)((0,V.pd)(b)).deep_link_id;return(C?(0,V.zd)((0,V.pd)(C)).link:null)||C||_||m||b}(m);try{return new Kl(_)}catch(C){return null}}}let Dh=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,C){return xi._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const j=Kl.parseLink(C);return R(j,"argument-error"),xi._fromEmailAndCode(_,j.code,j.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class pi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ba extends pi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class fo extends Ba{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return R("providerId"in _&&"signInMethod"in _,"argument-error"),No._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return R(m.idToken||m.accessToken,"argument-error"),No._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return fo.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return fo.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:j,pendingToken:Z,nonce:ke,providerId:it}=m;if(!C&&!j&&!_&&!Z||!it)return null;try{return new fo(it)._credential({idToken:_,accessToken:C,nonce:ke,pendingToken:Z})}catch(xt){return null}}}let Tu=(()=>{class b extends Ba{constructor(){super("facebook.com")}static credential(_){return No._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(C){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),kh=(()=>{class b extends Ba{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return No._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:j}=_;if(!C&&!j)return null;try{return b.credential(C,j)}catch(Z){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Np=(()=>{class b extends Ba{constructor(){super("github.com")}static credential(_){return No._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(C){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Va extends js{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return fa(m,this.buildRequest())}_linkToIdToken(m,_){const C=this.buildRequest();return C.idToken=_,fa(m,C)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,fa(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:j,pendingToken:Z}=_;return C&&j&&Z&&C===j?new Va(C,Z):null}static _create(m,_){return new Va(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fi extends pi{constructor(m){R(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Fi.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Fi.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Va.fromJSON(m);return R(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:C}=m;if(!_||!C)return null;try{return Va._create(C,_)}catch(j){return null}}}let Mh=(()=>{class b extends Ba{constructor(){super("twitter.com")}static credential(_,C){return No._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:j}=_;if(!C||!j)return null;try{return b.credential(C,j)}catch(Z){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ji(b,m){return wu.apply(this,arguments)}function wu(){return(wu=(0,h.Z)(function*(b,m){return ar(b,"POST","/v1/accounts:signUp",rn(b,m))})).apply(this,arguments)}class fs{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,C,j=!1){return(0,h.Z)(function*(){const Z=yield Q._fromIdTokenResponse(m,C,j),ke=ed(C);return new fs({user:Z,providerId:ke,_tokenResponse:C,operationType:_})})()}static _forOperation(m,_,C){return(0,h.Z)(function*(){yield m._updateTokensIfNecessary(C,!0);const j=ed(C);return new fs({user:m,providerId:j,_tokenResponse:C,operationType:_})})()}}function ed(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function td(){return(td=(0,h.Z)(function*(b){var m;const _=Jt(b);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new fs({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield ji(_,{returnSecureToken:!0}),j=yield fs._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(j.user),j})).apply(this,arguments)}class Su extends V.ZR{constructor(m,_,C,j){var Z;super(_.code,_.message),this.operationType=C,this.user=j,Object.setPrototypeOf(this,Su.prototype),this.customData={appName:m.name,tenantId:null!==(Z=m.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(m,_,C,j){return new Su(m,_,C,j)}}function nd(b,m,_,C){return("reauthenticate"===m?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?Su._fromErrorAndOperation(b,Z,m,C):Z})}function po(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function Jn(){return(Jn=(0,h.Z)(function*(b,m){const _=(0,V.m9)(b);yield Fn(!0,_,m);const{providerUserInfo:C}=yield qn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),j=po(C||[]);return _.providerData=_.providerData.filter(Z=>j.has(Z.providerId)),j.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ll(b,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(b,m,_=!1){const C=yield Yr(b,m._linkToIdToken(b.auth,yield b.getIdToken()),_);return fs._forOperation(b,"link",C)})).apply(this,arguments)}function Fn(b,m,_){return cl.apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(b,m,_){yield Qr(m);const j=!1===b?"provider-already-linked":"no-such-provider";R(po(m.providerData).has(_)===b,m.auth,j)})).apply(this,arguments)}function Zl(b,m){return ga.apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(b,m,_=!1){const{auth:C}=b,j="reauthenticate";try{const Z=yield Yr(b,nd(C,j,m,b),_);R(Z.idToken,C,"internal-error");const ke=Wt(Z.idToken);R(ke,C,"internal-error");const{sub:it}=ke;return R(b.uid===it,C,"user-mismatch"),fs._forOperation(b,j,Z)}catch(Z){throw"auth/user-not-found"===(null==Z?void 0:Z.code)&&Qe(C,"user-mismatch"),Z}})).apply(this,arguments)}function gi(b,m){return rd.apply(this,arguments)}function rd(){return(rd=(0,h.Z)(function*(b,m,_=!1){const C="signIn",j=yield nd(b,C,m),Z=yield fs._fromIdTokenResponse(b,C,j);return _||(yield b._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function yr(b,m){return go.apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(b,m){return gi(Jt(b),m)})).apply(this,arguments)}function mi(b,m){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(b,m){const _=(0,V.m9)(b);return yield Fn(!1,_,m.providerId),ll(_,m)})).apply(this,arguments)}function Lo(b,m){return dl.apply(this,arguments)}function dl(){return(dl=(0,h.Z)(function*(b,m){return Zl((0,V.m9)(b),m)})).apply(this,arguments)}function Us(b,m){return mo.apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(b,m){return ar(b,"POST","/v1/accounts:signInWithCustomToken",rn(b,m))})).apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(b,m){const _=Jt(b),C=yield Us(_,{token:m,returnSecureToken:!0}),j=yield fs._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(j.user),j})).apply(this,arguments)}class ma{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?id._fromServerResponse(m,_):Qe(m,"internal-error")}}class id extends ma{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new id(_)}}function hl(b,m,_){var C;R((null===(C=_.url)||void 0===C?void 0:C.length)>0,b,"invalid-continue-uri"),R(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(R(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(R(_.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Yl(){return(Yl=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b),j={requestType:"PASSWORD_RESET",email:m};_&&hl(C,j,_),yield ol(C,j)})).apply(this,arguments)}function od(){return(od=(0,h.Z)(function*(b,m,_){yield xr((0,V.m9)(b),{oobCode:m,newPassword:_})})).apply(this,arguments)}function mt(){return(mt=(0,h.Z)(function*(b,m){yield ql((0,V.m9)(b),{oobCode:m})})).apply(this,arguments)}function kn(b,m){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,h.Z)(function*(b,m){const _=(0,V.m9)(b),C=yield xr(_,{oobCode:m}),j=C.requestType;switch(R(j,_,"internal-error"),j){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":R(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":R(C.mfaInfo,_,"internal-error");default:R(C.email,_,"internal-error")}let Z=null;return C.mfaInfo&&(Z=ma._fromServerResponse(Jt(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:Z},operation:j}})).apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(b,m){const{data:_}=yield kn((0,V.m9)(b),m);return _.email})).apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(b,m,_){const C=Jt(b),j=yield ji(C,{returnSecureToken:!0,email:m,password:_}),Z=yield fs._fromIdTokenResponse(C,"signIn",j);return yield C._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b),j={requestType:"EMAIL_SIGNIN",email:m};R(_.handleCodeInApp,C,"argument-error"),_&&hl(C,j,_),yield lo(C,j)})).apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b),j=Dh.credentialWithLink(m,_||se());return R(j._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),yr(C,j)})).apply(this,arguments)}function Ii(b,m){return gs.apply(this,arguments)}function gs(){return(gs=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:createAuthUri",rn(b,m))})).apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(b,m){const C={identifier:m,continueUri:ye()?se():"http://localhost"},{signinMethods:j}=yield Ii((0,V.m9)(b),C);return j||[]})).apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(b,m){const _=(0,V.m9)(b),j={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&hl(_.auth,j,m);const{email:Z}=yield Xn(_.auth,j);Z!==b.email&&(yield b.reload())})).apply(this,arguments)}function tc(){return(tc=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};_&&hl(C.auth,Z,_);const{email:ke}=yield Th(C.auth,Z);ke!==b.email&&(yield b.reload())})).apply(this,arguments)}function dd(b,m){return fl.apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(b,m){return Qt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function rc(){return(rc=(0,h.Z)(function*(b,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const C=(0,V.m9)(b),Z={idToken:yield C.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},ke=yield Yr(C,dd(C.auth,Z));C.displayName=ke.displayName||null,C.photoURL=ke.photoUrl||null;const it=C.providerData.find(({providerId:xt})=>"password"===xt);it&&(it.displayName=C.displayName,it.photoURL=C.photoURL),yield C._updateTokensIfNecessary(ke)})).apply(this,arguments)}function ic(b,m,_){return qa.apply(this,arguments)}function qa(){return(qa=(0,h.Z)(function*(b,m,_){const{auth:C}=b,Z={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(Z.email=m),_&&(Z.password=_);const ke=yield Yr(b,sl(C,Z));yield b._updateTokensIfNecessary(ke,!0)})).apply(this,arguments)}class Au{constructor(m,_,C={}){this.isNewUser=m,this.providerId=_,this.profile=C}}class Fh extends Au{constructor(m,_,C,j){super(m,_,C),this.username=j}}class sc extends Au{constructor(m,_){super(m,"facebook.com",_)}}class is extends Fh{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Fp extends Au{constructor(m,_){super(m,"google.com",_)}}class hd extends Fh{constructor(m,_,C){super(m,"twitter.com",_,C)}}function ai(b){const{user:m,_tokenResponse:_}=b;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Lh(b){var m,_;if(!b)return null;const{providerId:C}=b,j=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},Z=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!C&&(null==b?void 0:b.idToken)){const ke=null===(_=null===(m=Wt(b.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(ke)return new Au(Z,"anonymous"!==ke&&"custom"!==ke?ke:null)}if(!C)return null;switch(C){case"facebook.com":return new sc(Z,j);case"github.com":return new is(Z,j);case"google.com":return new Fp(Z,j);case"twitter.com":return new hd(Z,j,b.screenName||null);case"custom":case"anonymous":return new Au(Z,null);default:return new Au(Z,C,j)}}(_)}class jo{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new jo("enroll",m)}static _fromMfaPendingCredential(m){return new jo("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,C;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return jo._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(C=m.multiFactorSession)||void 0===C?void 0:C.idToken)return jo._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Wa{constructor(m,_,C){this.session=m,this.hints=_,this.signInResolver=C}static _fromError(m,_){const C=Jt(m),j=_.customData._serverResponse,Z=(j.mfaInfo||[]).map(it=>ma._fromServerResponse(C,it));R(j.mfaPendingCredential,C,"internal-error");const ke=jo._fromMfaPendingCredential(j.mfaPendingCredential);return new Wa(ke,Z,function(){var it=(0,h.Z)(function*(xt){const $t=yield xt._process(C,ke);delete j.mfaInfo,delete j.mfaPendingCredential;const on=Object.assign(Object.assign({},j),{idToken:$t.idToken,refreshToken:$t.refreshToken});switch(_.operationType){case"signIn":const tn=yield fs._fromIdTokenResponse(C,_.operationType,on);return yield C._updateCurrentUser(tn.user),tn;case"reauthenticate":return R(_.user,C,"internal-error"),fs._forOperation(_.user,_.operationType,on);default:Qe(C,"internal-error")}});return function(xt){return it.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,h.Z)(function*(){return _.signInResolver(m)})()}}function Bh(b,m){return Qt(b,"POST","/v2/accounts/mfaEnrollment:start",rn(b,m))}class Du{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>ma._fromServerResponse(m.auth,C)))})}static _fromUser(m){return new Du(m)}getSession(){var m=this;return(0,h.Z)(function*(){return jo._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var C=this;return(0,h.Z)(function*(){const j=m,Z=yield C.getSession(),ke=yield Yr(C.user,j._process(C.user.auth,Z,_));return yield C.user._updateTokensIfNecessary(ke),C.user.reload()})()}unenroll(m){var _=this;return(0,h.Z)(function*(){const C="string"==typeof m?m:m.uid,j=yield _.user.getIdToken(),Z=yield Yr(_.user,function Ka(b,m){return Qt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(b,m))}(_.user.auth,{idToken:j,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ke})=>ke!==C),yield _.user._updateTokensIfNecessary(Z);try{yield _.user.reload()}catch(ke){if("auth/user-token-expired"!==ke.code)throw ke}})()}}const oc=new WeakMap,vo="__sak";class gl{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(vo,"1"),this.storage.removeItem(vo),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ui=(()=>{class b extends gl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ym(){const b=(0,V.z$)();return Ls(b)||tr(b)}()&&function lr(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Fs(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const j=this.storage.getItem(C),Z=this.localCache[C];j!==Z&&_(C,Z,j)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((it,xt,$t)=>{this.notifyListeners(it,$t)});const j=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const it=this.storage.getItem(j);if(_.newValue!==it)null!==_.newValue?this.storage.setItem(j,_.newValue):this.storage.removeItem(j);else if(this.localCache[j]===_.newValue&&!C)return}const Z=()=>{const it=this.storage.getItem(j);!C&&this.localCache[j]===it||this.notifyListeners(j,it)},ke=this.storage.getItem(j);!function vr(){return(0,V.w1)()&&10===document.documentMode}()||ke===_.newValue||_.newValue===_.oldValue?Z():setTimeout(Z,10)}notifyListeners(_,C){this.localCache[_]=C;const j=this.listeners[_];if(j)for(const Z of Array.from(j))Z(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,j)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:j}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var j=()=>super._set,Z=this;return(0,h.Z)(function*(){yield j().call(Z,_,C),Z.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,j=this;return(0,h.Z)(function*(){const Z=yield C().call(j,_);return j.localCache[_]=JSON.stringify(Z),Z})()}_remove(_){var C=()=>super._remove,j=this;return(0,h.Z)(function*(){yield C().call(j,_),delete j.localCache[_]})()}}return b.type="LOCAL",b})(),Ar=(()=>{class b extends gl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return b.type="SESSION",b})();let Hh=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(Z=>Z.isListeningto(_));if(C)return C;const j=new b(_);return this.receivers.push(j),j}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,h.Z)(function*(){const j=_,{eventId:Z,eventType:ke,data:it}=j.data,xt=C.handlersMap[ke];if(!(null==xt?void 0:xt.size))return;j.ports[0].postMessage({status:"ack",eventId:Z,eventType:ke});const $t=Array.from(xt).map(function(){var tn=(0,h.Z)(function*(Pr){return Pr(j.origin,it)});return function(Pr){return tn.apply(this,arguments)}}()),on=yield function vl(b){return Promise.all(b.map(function(){var m=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return m.apply(this,arguments)}}()))}($t);j.ports[0].postMessage({status:"done",eventId:Z,eventType:ke,response:on})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function ku(b="",m=10){let _="";for(let C=0;C<m;C++)_+=Math.floor(10*Math.random());return b+_}class ya{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,C=50){var j=this;return(0,h.Z)(function*(){const Z="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let ke,it;return new Promise((xt,$t)=>{const on=ku("",20);Z.port1.start();const tn=setTimeout(()=>{$t(new Error("unsupported_event"))},C);it={messageChannel:Z,onMessage(Pr){const Ts=Pr;if(Ts.data.eventId===on)switch(Ts.data.status){case"ack":clearTimeout(tn),ke=setTimeout(()=>{$t(new Error("timeout"))},3e3);break;case"done":clearTimeout(ke),xt(Ts.data.response);break;default:clearTimeout(tn),clearTimeout(ke),$t(new Error("invalid_response"))}}},j.handlers.add(it),Z.port1.addEventListener("message",it.onMessage),j.target.postMessage({eventType:m,eventId:on,data:_},[Z.port2])}).finally(()=>{it&&j.removeMessageHandler(it)})})()}}function Dr(){return window}function yo(){return void 0!==Dr().WorkerGlobalScope&&"function"==typeof Dr().importScripts}function Gh(){return(Gh=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const pd="firebaseLocalStorageDb",ba="firebaseLocalStorage",Za="fbase_key";class Ya{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function vi(b,m){return b.transaction([ba],m?"readwrite":"readonly").objectStore(ba)}function Xa(){const b=indexedDB.open(pd,1);return new Promise((m,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const C=b.result;try{C.createObjectStore(ba,{keyPath:Za})}catch(j){_(j)}}),b.addEventListener("success",(0,h.Z)(function*(){const C=b.result;C.objectStoreNames.contains(ba)?m(C):(C.close(),yield function Qa(){const b=indexedDB.deleteDatabase(pd);return new Ya(b).toPromise()}(),m(yield Xa()))}))})}function Mu(b,m,_){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(b,m,_){const C=vi(b,!0).put({[Za]:m,value:_});return new Ya(C).toPromise()})).apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(b,m){const _=vi(b,!1).get(m),C=yield new Ya(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Ja(b,m){const _=vi(b,!0).delete(m);return new Ya(_).toPromise()}const eu=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield Xa()),_.db})()}_withRetries(_){var C=this;return(0,h.Z)(function*(){let j=0;for(;;)try{const Z=yield C._openDb();return yield _(Z)}catch(Z){if(j++>3)throw Z;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return yo()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=Hh._getInstance(function fd(){return yo()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,h.Z)(function*(j,Z){return{keyProcessed:(yield _._poll()).includes(Z.key)}});return function(j,Z){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,h.Z)(function*(j,Z){return["keyChanged"]});return function(j,Z){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var C,j;if(_.activeServiceWorker=yield function an(){return Gh.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ya(_.activeServiceWorker);const Z=yield _.sender._send("ping",{},800);!Z||(null===(C=Z[0])||void 0===C?void 0:C.fulfilled)&&(null===(j=Z[0])||void 0===j?void 0:j.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,h.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function $h(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(j){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Xa();return yield Mu(_,vo,"1"),yield Ja(_,vo),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,h.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var j=this;return(0,h.Z)(function*(){return j._withPendingWrite((0,h.Z)(function*(){return yield j._withRetries(Z=>Mu(Z,_,C)),j.localCache[_]=C,j.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,h.Z)(function*(){const j=yield C._withRetries(Z=>function Pu(b,m){return Ta.apply(this,arguments)}(Z,_));return C.localCache[_]=j,j})()}_remove(_){var C=this;return(0,h.Z)(function*(){return C._withPendingWrite((0,h.Z)(function*(){return yield C._withRetries(j=>Ja(j,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const C=yield _._withRetries(ke=>{const it=vi(ke,!1).getAll();return new Ya(it).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const j=[],Z=new Set;for(const{fbase_key:ke,value:it}of C)Z.add(ke),JSON.stringify(_.localCache[ke])!==JSON.stringify(it)&&(_.notifyListeners(ke,it),j.push(ke));for(const ke of Object.keys(_.localCache))_.localCache[ke]&&!Z.has(ke)&&(_.notifyListeners(ke,null),j.push(ke));return j})()}notifyListeners(_,C){this.localCache[_]=C;const j=this.listeners[_];if(j)for(const Z of Array.from(j))Z(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function ei(b,m){return Qt(b,"POST","/v2/accounts/mfaSignIn:start",rn(b,m))}function _r(){return(_r=(0,h.Z)(function*(b){return(yield Qt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tu(b){return new Promise((m,_)=>{const C=document.createElement("script");C.setAttribute("src",b),C.onload=m,C.onerror=j=>{const Z=Pe("internal-error");Z.customData=j,_(Z)},C.type="text/javascript",C.charset="UTF-8",function vs(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(C)})}function Vo(b){return`__${b}${Math.floor(1e6*Math.random())}`}const ys=1e12;class kr{constructor(m){this.auth=m,this.counter=ys,this._widgets=new Map}render(m,_){const C=this.counter;return this._widgets.set(C,new Vs(m,this.auth.name,_||{})),this.counter++,C}reset(m){var _;const C=m||ys;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(m){var _;return(null===(_=this._widgets.get(m||ys))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,h.Z)(function*(){var C;return null===(C=_._widgets.get(m||ys))||void 0===C||C.execute(),""})()}}class Vs{constructor(m,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const j="string"==typeof m?document.getElementById(m):m;R(j,"argument-error",{appName:_}),this.container=j,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ac(b){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<b;C++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vd=Vo("rcb"),wr=new pt(3e4,6e4);class z_{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Dr().grecaptcha}load(m,_=""){return R(function Ou(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Dr().grecaptcha):new Promise((C,j)=>{const Z=Dr().setTimeout(()=>{j(Pe(m,"network-request-failed"))},wr.get());Dr()[vd]=()=>{Dr().clearTimeout(Z),delete Dr()[vd];const it=Dr().grecaptcha;if(!it)return void j(Pe(m,"internal-error"));const xt=it.render;it.render=($t,on)=>{const tn=xt($t,on);return this.counter++,tn},this.hostLanguage=_,C(it)},tu(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:vd,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(Z),j(Pe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!Dr().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ss{load(m){return(0,h.Z)(function*(){return new kr(m)})()}clearedOneInstance(){}}const qh="recaptcha",wa={theme:"light",type:"image"};class zh{constructor(m,_=Object.assign({},wa),C){this.parameters=_,this.type=qh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jt(C),this.isInvisible="invisible"===this.parameters.size,R("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const j="string"==typeof m?document.getElementById(m):m;R(j,this.auth,"argument-error"),this.container=j,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ss:new z_,this.validateStartingState()}verify(){var m=this;return(0,h.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),C=m.getAssertedRecaptcha();return C.getResponse(_)||new Promise(Z=>{const ke=it=>{!it||(m.tokenChangeListeners.delete(ke),Z(it))};m.tokenChangeListeners.add(ke),m.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){R(!this.parameters.sitekey,this.auth,"argument-error"),R(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),R("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof m)m(_);else if("string"==typeof m){const C=Dr()[m];"function"==typeof C&&C(_)}}}assertNotDestroyed(){R(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,h.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,h.Z)(function*(){R(ye()&&!yo(),m.auth,"internal-error"),yield function bo(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ea(b){return _r.apply(this,arguments)}(m.auth);R(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return R(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yd{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=bu._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function _l(){return(_l=(0,h.Z)(function*(b,m,_){const C=Jt(b),j=yield Bi(C,m,(0,V.m9)(_));return new yd(j,Z=>yr(C,Z))})).apply(this,arguments)}function Wh(){return(Wh=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b);yield Fn(!1,C,"phone");const j=yield Bi(C.auth,m,(0,V.m9)(_));return new yd(j,Z=>mi(C,Z))})).apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b),j=yield Bi(C.auth,m,(0,V.m9)(_));return new yd(j,Z=>Lo(C,Z))})).apply(this,arguments)}function Bi(b,m,_){return bl.apply(this,arguments)}function bl(){return(bl=(0,h.Z)(function*(b,m,_){var C;const j=yield _.verify();try{let Z;if(R("string"==typeof j,b,"argument-error"),R(_.type===qh,b,"argument-error"),Z="string"==typeof m?{phoneNumber:m}:m,"session"in Z){const ke=Z.session;if("phoneNumber"in Z)return R("enroll"===ke.type,b,"internal-error"),(yield Bh(b,{idToken:ke.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:j}})).phoneSessionInfo.sessionInfo;{R("signin"===ke.type,b,"internal-error");const it=(null===(C=Z.multiFactorHint)||void 0===C?void 0:C.uid)||Z.multiFactorUid;return R(it,b,"missing-multi-factor-info"),(yield ei(b,{mfaPendingCredential:ke.credential,mfaEnrollmentId:it,phoneSignInInfo:{recaptchaToken:j}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ke}=yield Sh(b,{phoneNumber:Z.phoneNumber,recaptchaToken:j});return ke}}finally{_._reset()}})).apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(b,m){yield ll((0,V.m9)(b),m)})).apply(this,arguments)}let Sa=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Jt(_)}verifyPhoneNumber(_,C){return Bi(this.auth,_,(0,V.m9)(C))}static credential(_,C){return bu._fromVerification(_,C)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:j}=_;return C&&j?bu._fromTokenResponse(C,j):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Go(b,m){return m?oe(m):(R(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Nu extends js{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return fa(m,this._buildIdpRequest())}_linkToIdToken(m,_){return fa(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return fa(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Cn(b){return gi(b.auth,new Nu(b),b.bypassAuthState)}function Kh(b){const{auth:m,user:_}=b;return R(_,m,"internal-error"),Zl(_,new Nu(b),b.bypassAuthState)}function Lu(b){return Di.apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(b){const{auth:m,user:_}=b;return R(_,m,"internal-error"),ll(_,new Nu(b),b.bypassAuthState)})).apply(this,arguments)}class Tl{constructor(m,_,C,j,Z=!1){this.auth=m,this.resolver=C,this.user=j,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,h.Z)(function*(C,j){m.pendingPromise={resolve:C,reject:j};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(Z){m.reject(Z)}});return function(C,j){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,h.Z)(function*(){const{urlResponse:C,sessionId:j,postBody:Z,tenantId:ke,error:it,type:xt}=m;if(it)return void _.reject(it);const $t={auth:_.auth,requestUri:C,sessionId:j,tenantId:ke||void 0,postBody:Z||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(xt)($t))}catch(on){_.reject(on)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Cn;case"linkViaPopup":case"linkViaRedirect":return Lu;case"reauthViaPopup":case"reauthViaRedirect":return Kh;default:Qe(this.auth,"internal-error")}}resolve(m){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fu=new pt(2e3,1e4);function $o(){return($o=(0,h.Z)(function*(b,m,_){const C=Jt(b);ot(b,m,pi);const j=Go(C,_);return new Yh(C,"signInViaPopup",m,j).executeNotNull()})).apply(this,arguments)}function lc(){return(lc=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b);ot(C.auth,m,pi);const j=Go(C.auth,_);return new Yh(C.auth,"reauthViaPopup",m,j,C).executeNotNull()})).apply(this,arguments)}function To(){return(To=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b);ot(C.auth,m,pi);const j=Go(C.auth,_);return new Yh(C.auth,"linkViaPopup",m,j,C).executeNotNull()})).apply(this,arguments)}let Yh=(()=>{class b extends Tl{constructor(_,C,j,Z,ke){super(_,C,Z,ke),this.provider=j,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const C=yield _.execute();return R(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,h.Z)(function*(){Y(1===_.filter.length,"Popup operations only handle one event");const C=ku();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(j=>{_.reject(j)}),_.resolver._isIframeWebStorageSupported(_.auth,j=>{j||_.reject(Pe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,j;this.pollId=(null===(j=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===j?void 0:j.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Fu.get())};_()}}return b.currentPopupAction=null,b})();const yi=new Map;class _d extends Tl{constructor(m,_,C=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,h.Z)(function*(){let C=yi.get(_.auth._key());if(!C){try{const Z=(yield function Bp(b,m){return Ca.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;C=()=>Promise.resolve(Z)}catch(j){C=()=>Promise.reject(j)}yi.set(_.auth._key(),C)}return _.bypassAuthState||yi.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,C=this;return(0,h.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(C,m);if("unknown"!==m.type){if(m.eventId){const j=yield C.auth._redirectUserForId(m.eventId);if(j)return C.user=j,_().call(C,m);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Ca(){return(Ca=(0,h.Z)(function*(b,m){const _=le(m),C=W(b);if(!(yield C._isAvailable()))return!1;const j="true"===(yield C._get(_));return yield C._remove(_),j})).apply(this,arguments)}function ju(b,m){return El.apply(this,arguments)}function El(){return(El=(0,h.Z)(function*(b,m){return W(b)._set(le(m),"true")})).apply(this,arguments)}function O(b,m){yi.set(b._key(),m)}function W(b){return oe(b._redirectPersistence)}function le(b){return bt("pendingRedirect",b.config.apiKey,b.name)}function at(){return(at=(0,h.Z)(function*(b,m,_){const C=Jt(b);ot(b,m,pi);const j=Go(C,_);return yield ju(j,C),j._openRedirect(C,m,"signInViaRedirect")})).apply(this,arguments)}function en(){return(en=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b);ot(C.auth,m,pi);const j=Go(C.auth,_);yield ju(j,C.auth);const Z=yield ki(C);return j._openRedirect(C.auth,m,"reauthViaRedirect",Z)})).apply(this,arguments)}function Hr(){return(Hr=(0,h.Z)(function*(b,m,_){const C=(0,V.m9)(b);ot(C.auth,m,pi);const j=Go(C.auth,_);yield Fn(!1,C,m.providerId),yield ju(j,C.auth);const Z=yield ki(C);return j._openRedirect(C.auth,m,"linkViaRedirect",Z)})).apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(b,m){return yield Jt(b)._initializationPromise,Eo(b,m,!1)})).apply(this,arguments)}function Eo(b,m){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(b,m,_=!1){const C=Jt(b),j=Go(C,m),ke=yield new _d(C,j,_).execute();return ke&&!_&&(delete ke.user._redirectEventId,yield C._persistUserIfCurrent(ke.user),yield C._setRedirectUser(null,m)),ke})).apply(this,arguments)}function ki(b){return zo.apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(b){const m=ku(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class bd{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(m,C)&&(_=!0,this.sendToConsumer(m,C),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Xh(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Td(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var C;if(m.error&&!Td(m)){const j=(null===(C=m.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Pe(this.auth,j))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const C=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&C}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qh(m))}saveEventToCache(m){this.cachedEventUids.add(Qh(m)),this.lastProcessedEventTime=Date.now()}}function Qh(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function Td({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Vp(b){return Hp.apply(this,arguments)}function Hp(){return(Hp=(0,h.Z)(function*(b,m={}){return Qt(b,"GET","/v1/projects",m)})).apply(this,arguments)}const Jh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cc=/^https?/;function Gp(){return(Gp=(0,h.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield Vp(b);for(const _ of m)try{if(bw(_))return}catch(C){}Qe(b,"unauthorized-domain")})).apply(this,arguments)}function bw(b){const m=se(),{protocol:_,hostname:C}=new URL(m);if(b.startsWith("chrome-extension://")){const ke=new URL(b);return""===ke.hostname&&""===C?"chrome-extension:"===_&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&ke.hostname===C}if(!cc.test(_))return!1;if(Jh.test(b))return C===b;const j=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+j+"|"+j+")$","i").test(C)}const Xm=new pt(3e4,6e4);function $p(){const b=Dr().___jsl;if(null==b?void 0:b.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let dc=null;function nu(b){return dc=dc||function Jm(b){return new Promise((m,_)=>{var C,j,Z;function ke(){$p(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{$p(),_(Pe(b,"network-request-failed"))},timeout:Xm.get()})}if(null===(j=null===(C=Dr().gapi)||void 0===C?void 0:C.iframes)||void 0===j?void 0:j.Iframe)m(gapi.iframes.getContext());else{if(!(null===(Z=Dr().gapi)||void 0===Z?void 0:Z.load)){const it=Vo("iframefcb");return Dr()[it]=()=>{gapi.load?ke():_(Pe(b,"network-request-failed"))},tu(`https://apis.google.com/js/api.js?onload=${it}`).catch(xt=>_(xt))}ke()}}).catch(m=>{throw dc=null,m})}(b),dc}const hc=new pt(5e3,15e3),fc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ru=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ev(b){const m=b.config;R(m.authDomain,b,"auth-domain-config-required");const _=m.emulator?Nt(m,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,C={apiKey:m.apiKey,appName:b.name,v:de.SDK_VERSION},j=ru.get(b.config.apiHost);j&&(C.eid=j);const Z=b._getFrameworks();return Z.length&&(C.fw=Z.join(",")),`${_}?${(0,V.xO)(C).slice(1)}`}function iu(){return iu=(0,h.Z)(function*(b){const m=yield nu(b),_=Dr().gapi;return R(_,b,"internal-error"),m.open({where:document.body,url:ev(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fc,dontclear:!0},C=>new Promise(function(){var j=(0,h.Z)(function*(Z,ke){yield C.restyle({setHideOnLeave:!1});const it=Pe(b,"network-request-failed"),xt=Dr().setTimeout(()=>{ke(it)},hc.get());function $t(){Dr().clearTimeout(xt),Z(C)}C.ping($t).then($t,()=>{ke(it)})});return function(Z,ke){return j.apply(this,arguments)}}()))}),iu.apply(this,arguments)}const tf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tv{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function _s(b,m,_,C,j,Z){R(b.config.authDomain,b,"auth-domain-config-required"),R(b.config.apiKey,b,"invalid-api-key");const ke={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:C,v:de.SDK_VERSION,eventId:j};if(m instanceof pi){m.setDefaultLanguage(b.languageCode),ke.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(ke.customParameters=JSON.stringify(m.getCustomParameters()));for(const[xt,$t]of Object.entries(Z||{}))ke[xt]=$t}if(m instanceof Ba){const xt=m.getScopes().filter($t=>""!==$t);xt.length>0&&(ke.scopes=xt.join(","))}b.tenantId&&(ke.tid=b.tenantId);const it=ke;for(const xt of Object.keys(it))void 0===it[xt]&&delete it[xt];return`${function Ia({config:b}){return b.emulator?Nt(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,V.xO)(it).slice(1)}`}const pc="webStorageSupport";class Cd extends class Y_{constructor(m){this.factorId=m}_process(m,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,C);case"signin":return this._finalizeSignIn(m,_.credential);default:return z("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Cd(m)}_finalizeEnroll(m,_,C){return function Zm(b,m){return Qt(b,"POST","/v2/accounts/mfaEnrollment:finalize",rn(b,m))}(m,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function md(b,m){return Qt(b,"POST","/v2/accounts/mfaSignIn:finalize",rn(b,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Q_=(()=>{class b{constructor(){}static assertion(_){return Cd._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var Wp="@firebase/auth";class iv{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(C=>{var j;m((null===(j=C)||void 0===j?void 0:j.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wl(){return window}function wo(){return(wo=(0,h.Z)(function*(b,m,_){var C;const{BuildInfo:j}=wl();Y(m.sessionId,"AuthEvent did not contain a session ID");const Z=yield Ew(m.sessionId),ke={};return tr()?ke.ibi=j.packageName:mr()?ke.apn=j.packageName:Qe(b,"operation-not-supported-in-this-environment"),j.displayName&&(ke.appDisplayName=j.displayName),ke.sessionId=Z,_s(b,_,m.type,void 0,null!==(C=m.eventId)&&void 0!==C?C:void 0,ke)})).apply(this,arguments)}function af(){return(af=(0,h.Z)(function*(b){const{BuildInfo:m}=wl(),_={};tr()?_.iosBundleId=m.packageName:mr()?_.androidPackageName=m.packageName:Qe(b,"operation-not-supported-in-this-environment"),yield Vp(b,_)})).apply(this,arguments)}function sv(){return(sv=(0,h.Z)(function*(b,m,_){const{cordova:C}=wl();let j=()=>{};try{yield new Promise((Z,ke)=>{let it=null;function xt(){var tn;Z();const Pr=null===(tn=C.plugins.browsertab)||void 0===tn?void 0:tn.close;"function"==typeof Pr&&Pr(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function $t(){it||(it=window.setTimeout(()=>{ke(Pe(b,"redirect-cancelled-by-user"))},2e3))}function on(){"visible"===(null==document?void 0:document.visibilityState)&&$t()}m.addPassiveListener(xt),document.addEventListener("resume",$t,!1),mr()&&document.addEventListener("visibilitychange",on,!1),j=()=>{m.removePassiveListener(xt),document.removeEventListener("resume",$t,!1),document.removeEventListener("visibilitychange",on,!1),it&&window.clearTimeout(it)}})}finally{j()}})).apply(this,arguments)}function Ew(b){return Id.apply(this,arguments)}function Id(){return(Id=(0,h.Z)(function*(b){const m=Zp(b),_=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(_)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Zp(b){if(Y(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const m=new ArrayBuffer(b.length),_=new Uint8Array(m);for(let C=0;C<b.length;C++)_[C]=b.charCodeAt(C);return _}!function X_(b){(0,de._registerComponent)(new me.wA("auth",(m,{options:_})=>{const C=m.getProvider("app").getImmediate(),j=m.getProvider("heartbeat"),{apiKey:Z,authDomain:ke}=C.options;return((it,xt)=>{R(Z&&!Z.includes(":"),"invalid-api-key",{appName:it.name}),R(!(null==ke?void 0:ke.includes(":")),"argument-error",{appName:it.name});const $t={apiKey:Z,authDomain:ke,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ro(b)},on=new jt(it,xt,$t);return function X(b,m){const _=(null==m?void 0:m.persistence)||[],C=(Array.isArray(_)?_:[_]).map(oe);(null==m?void 0:m.errorMap)&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(C,null==m?void 0:m.popupRedirectResolver)}(on,_),on})(C,j)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,C)=>{m.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new me.wA("auth-internal",m=>{const _=Jt(m.getProvider("auth").getImmediate());return new iv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(Wp,"0.20.2",function sf(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,de.registerVersion)(Wp,"0.20.2","esm2017")}("Browser");class lf extends bd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(m)),super.onEvent(m)}initialized(){var m=this;return(0,h.Z)(function*(){yield m.initPromise})()}}function vc(b){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,h.Z)(function*(b){const m=yield Dd()._get(yc(b));return m&&(yield Dd()._remove(yc(b))),m})).apply(this,arguments)}function av(){const b=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const C=Math.floor(Math.random()*m.length);b.push(m.charAt(C))}return b.join("")}function Dd(){return oe(Ui)}function yc(b){return bt("authEvent",b.config.apiKey,b.name)}function os(b){if(!(null==b?void 0:b.includes("?")))return{};const[m,..._]=b.split("?");return(0,V.zd)(_.join("?"))}function Sl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Pe("no-auth-event")}}function Uu(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function hv(b=(0,V.z$)()){return!("file:"!==Uu()&&"ionic:"!==Uu()&&"capacitor:"!==Uu()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xp(){try{const b=self.localStorage,m=ku();if(b)return b.setItem(m,"1"),b.removeItem(m),!function hf(b=(0,V.z$)()){return function _c(){return(0,V.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ci(b=(0,V.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,V.hl)()}catch(b){return ff()&&(0,V.hl)()}return!1}function ff(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function _i(){return(function dv(){return"http:"===Uu()||"https:"===Uu()}()||(0,V.ru)()||hv())&&!function Qp(){return(0,V.b$)()||(0,V.UG)()}()&&Xp()&&!ff()}function bc(){return hv()&&"undefined"!=typeof document}function Md(){return(Md=(0,h.Z)(function*(){return!!bc()&&new Promise(b=>{const m=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),b(!0)})})})).apply(this,arguments)}const as={LOCAL:"local",NONE:"none",SESSION:"session"},Bu=R,eg="persistence";function Cl(b){return tg.apply(this,arguments)}function tg(){return(tg=(0,h.Z)(function*(b){yield b._initializationPromise;const m=pf(),_=bt(eg,b.config.apiKey,b.name);m&&m.setItem(_,b._getPersistence())})).apply(this,arguments)}function pf(){var b;try{return(null===(b=function s0(){return"undefined"!=typeof window?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(m){return null}}const a0=R;class So{constructor(){this.browserResolver=oe(class nv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ar,this._completeRedirectFn=Eo,this._overrideRedirectResult=O}_openPopup(m,_,C,j){var Z=this;return(0,h.Z)(function*(){var ke;Y(null===(ke=Z.eventManagers[m._key()])||void 0===ke?void 0:ke.manager,"_initialize() not called before _openPopup()");const it=_s(m,_,C,se(),j);return function Sd(b,m,_,C=500,j=600){const Z=Math.max((window.screen.availHeight-j)/2,0).toString(),ke=Math.max((window.screen.availWidth-C)/2,0).toString();let it="";const xt=Object.assign(Object.assign({},tf),{width:C.toString(),height:j.toString(),top:Z,left:ke}),$t=(0,V.z$)().toLowerCase();_&&(it=Li($t)?"_blank":_),Ci($t)&&(m=m||"http://localhost",xt.scrollbars="yes");const on=Object.entries(xt).reduce((Pr,[Ts,Tc])=>`${Pr}${Ts}=${Tc},`,"");if(function Ji(b=(0,V.z$)()){var m;return tr(b)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}($t)&&"_self"!==it)return function W_(b,m){const _=document.createElement("a");_.href=b,_.target=m;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(m||"",it),new tv(null);const tn=window.open(m||"",it,on);R(tn,b,"popup-blocked");try{tn.focus()}catch(Pr){}return new tv(tn)}(m,it,ku())})()}_openRedirect(m,_,C,j){var Z=this;return(0,h.Z)(function*(){return yield Z._originValidation(m),function _a(b){Dr().location.href=b}(_s(m,_,C,se(),j)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:j,promise:Z}=this.eventManagers[_];return j?Promise.resolve(j):(Y(Z,"If manager is not set, promise should be"),Z)}const C=this.initAndGetManager(m);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(m){var _=this;return(0,h.Z)(function*(){const C=yield function Tw(b){return iu.apply(this,arguments)}(m),j=new bd(m);return C.register("authEvent",Z=>(R(null==Z?void 0:Z.authEvent,m,"invalid-auth-event"),{status:j.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:j},_.iframes[m._key()]=C,j})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(pc,{type:pc},j=>{var Z;const ke=null===(Z=null==j?void 0:j[0])||void 0===Z?void 0:Z[pc];void 0!==ke&&_(!!ke),Qe(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ed(b){return Gp.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return Fs()||Ls()||tr()}}),this.cordovaResolver=oe(class lv{constructor(){this._redirectPersistence=Ar,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Eo,this._overrideRedirectResult=O}_initialize(m){var _=this;return(0,h.Z)(function*(){const C=m._key();let j=_.eventManagers.get(C);return j||(j=new lf(m),_.eventManagers.set(C,j),_.attachCallbackListeners(m,j)),j})()}_openPopup(m){Qe(m,"operation-not-supported-in-this-environment")}_openRedirect(m,_,C,j){var Z=this;return(0,h.Z)(function*(){!function mc(b){var m,_,C,j,Z,ke,it,xt,$t,on;const tn=wl();R("function"==typeof(null===(m=null==tn?void 0:tn.universalLinks)||void 0===m?void 0:m.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),R(void 0!==(null===(_=null==tn?void 0:tn.BuildInfo)||void 0===_?void 0:_.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),R("function"==typeof(null===(Z=null===(j=null===(C=null==tn?void 0:tn.cordova)||void 0===C?void 0:C.plugins)||void 0===j?void 0:j.browsertab)||void 0===Z?void 0:Z.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),R("function"==typeof(null===(xt=null===(it=null===(ke=null==tn?void 0:tn.cordova)||void 0===ke?void 0:ke.plugins)||void 0===it?void 0:it.browsertab)||void 0===xt?void 0:xt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),R("function"==typeof(null===(on=null===($t=null==tn?void 0:tn.cordova)||void 0===$t?void 0:$t.InAppBrowser)||void 0===on?void 0:on.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const ke=yield Z._initialize(m);yield ke.initialized(),ke.resetRedirect(),function P(){yi.clear()}(),yield Z._originValidation(m);const it=function cf(b,m,_=null){return{type:m,eventId:_,urlResponse:null,sessionId:av(),postBody:null,tenantId:b.tenantId,error:Pe(b,"no-auth-event")}}(m,C,j);yield function ov(b,m){return Dd()._set(yc(b),m)}(m,it);const xt=yield function Kp(b,m,_){return wo.apply(this,arguments)}(m,it,_),$t=yield function uf(b){const{cordova:m}=wl();return new Promise(_=>{m.plugins.browsertab.isAvailable(C=>{let j=null;C?m.plugins.browsertab.openUrl(b):j=m.InAppBrowser.open(b,function oo(b=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(j)})})}(xt);return function ou(b,m,_){return sv.apply(this,arguments)}(m,ke,$t)})()}_isIframeWebStorageSupported(m,_){throw new Error("Method not implemented.")}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function xd(b){return af.apply(this,arguments)}(m)),this.originValidationPromises[_]}attachCallbackListeners(m,_){const{universalLinks:C,handleOpenURL:j,BuildInfo:Z}=wl(),ke=setTimeout((0,h.Z)(function*(){yield vc(m),_.onEvent(Sl())}),500),it=function(){var on=(0,h.Z)(function*(tn){clearTimeout(ke);const Pr=yield vc(m);let Ts=null;Pr&&(null==tn?void 0:tn.url)&&(Ts=function e0(b,m){var _,C;const j=function kd(b){const m=os(b),_=m.link?decodeURIComponent(m.link):void 0,C=os(_).link,j=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return os(j).link||j||C||_||b}(m);if(j.includes("/__/auth/callback")){const Z=os(j),ke=Z.firebaseError?function uv(b){try{return JSON.parse(b)}catch(m){return null}}(decodeURIComponent(Z.firebaseError)):null,it=null===(C=null===(_=null==ke?void 0:ke.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],xt=it?Pe(it):null;return xt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:xt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:j,postBody:null}}return null}(Pr,tn.url)),_.onEvent(Ts||Sl())});return function(Pr){return on.apply(this,arguments)}}();void 0!==C&&"function"==typeof C.subscribe&&C.subscribe(null,it);const xt=j,$t=`${Z.packageName.toLowerCase()}://`;wl().handleOpenURL=function(){var on=(0,h.Z)(function*(tn){if(tn.toLowerCase().startsWith($t)&&it({url:tn}),"function"==typeof xt)try{xt(tn)}catch(Pr){console.error(Pr)}});return function(tn){return on.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ar,this._completeRedirectFn=Eo,this._overrideRedirectResult=O}_initialize(m){var _=this;return(0,h.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,_,C,j){var Z=this;return(0,h.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(m,_,C,j)})()}_openRedirect(m,_,C,j){var Z=this;return(0,h.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(m,_,C,j)})()}_isIframeWebStorageSupported(m,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,_)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return bc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return a0(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,h.Z)(function*(){if(m.underlyingResolver)return;const _=yield function Jp(){return Md.apply(this,arguments)}();m.underlyingResolver=_?m.cordovaResolver:m.browserResolver})()}}function gf(b){return b.unwrap()}function l0(b){return fv(b)}function fv(b){const{_tokenResponse:m}=b instanceof V.ZR?b.customData:b;if(!m)return null;if(!(b instanceof V.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Sa.credentialFromResult(b);const _=m.providerId;if(!_||"password"===_)return null;let C;switch(_){case"google.com":C=kh;break;case"facebook.com":C=Tu;break;case"github.com":C=Np;break;case"twitter.com":C=Mh;break;default:const{oauthIdToken:j,oauthAccessToken:Z,oauthTokenSecret:ke,pendingToken:it,nonce:xt}=m;return Z||ke||j||it?it?_.startsWith("saml.")?Va._create(_,it):No._fromParams({providerId:_,signInMethod:_,pendingToken:it,idToken:j,accessToken:Z}):new fo(_).credential({idToken:j,accessToken:Z,rawNonce:xt}):null}return b instanceof V.ZR?C.credentialFromError(b):C.credentialFromResult(b)}function bs(b,m){return m.catch(_=>{throw _ instanceof V.ZR&&function mf(b,m){var _;const C=null===(_=m.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===m.code)m.resolver=new c0(b,function Xr(b,m){var _;const C=(0,V.m9)(b),j=m;return R(m.customData.operationType,C,"argument-error"),R(null===(_=j.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Wa._fromError(C,j)}(b,m));else if(C){const j=fv(m),Z=m;j&&(Z.credential=j,Z.tenantId=C.tenantId||void 0,Z.email=C.email||void 0,Z.phoneNumber=C.phoneNumber||void 0)}}(b,_),_}).then(_=>{const j=_.user;return{operationType:_.operationType,credential:l0(_),additionalUserInfo:ai(_),user:Wo.getOrCreate(j)}})}function ng(b,m){return rg.apply(this,arguments)}function rg(){return(rg=(0,h.Z)(function*(b,m){const _=yield m;return{verificationId:_.verificationId,confirm:C=>bs(b,_.confirm(C))}})).apply(this,arguments)}class c0{constructor(m,_){this.resolver=_,this.auth=function u0(b){return b.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return bs(gf(this.auth),this.resolver.resolveSignIn(m))}}class Wo{constructor(m){this._delegate=m,this.multiFactor=function Vh(b){const m=(0,V.m9)(b);return oc.has(m)||oc.set(m,Du._fromUser(m)),oc.get(m)}(m)}static getOrCreate(m){return Wo.USER_MAP.has(m)||Wo.USER_MAP.set(m,new Wo(m)),Wo.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var _=this;return(0,h.Z)(function*(){return bs(_.auth,mi(_._delegate,m))})()}linkWithPhoneNumber(m,_){var C=this;return(0,h.Z)(function*(){return ng(C.auth,function uc(b,m,_){return Wh.apply(this,arguments)}(C._delegate,m,_))})()}linkWithPopup(m){var _=this;return(0,h.Z)(function*(){return bs(_.auth,function Zh(b,m,_){return To.apply(this,arguments)}(_._delegate,m,So))})()}linkWithRedirect(m){var _=this;return(0,h.Z)(function*(){return yield Cl(Jt(_.auth)),function Rn(b,m,_){return function pn(b,m,_){return Hr.apply(this,arguments)}(b,m,_)}(_._delegate,m,So)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var _=this;return(0,h.Z)(function*(){return bs(_.auth,Lo(_._delegate,m))})()}reauthenticateWithPhoneNumber(m,_){return ng(this.auth,function Up(b,m,_){return Ai.apply(this,arguments)}(this._delegate,m,_))}reauthenticateWithPopup(m){return bs(this.auth,function Hs(b,m,_){return lc.apply(this,arguments)}(this._delegate,m,So))}reauthenticateWithRedirect(m){var _=this;return(0,h.Z)(function*(){return yield Cl(Jt(_.auth)),function Ht(b,m,_){return function Yt(b,m,_){return en.apply(this,arguments)}(b,m,_)}(_._delegate,m,So)})()}sendEmailVerification(m){return function Bs(b,m){return cd.apply(this,arguments)}(this._delegate,m)}unlink(m){var _=this;return(0,h.Z)(function*(){return yield function Lp(b,m){return Jn.apply(this,arguments)}(_._delegate,m),_})()}updateEmail(m){return function Rh(b,m){return ic((0,V.m9)(b),m,null)}(this._delegate,m)}updatePassword(m){return function Nh(b,m){return ic((0,V.m9)(b),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function Ru(b,m){return Ho.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function nc(b,m){return rc.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,_){return function ec(b,m,_){return tc.apply(this,arguments)}(this._delegate,m,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wo.USER_MAP=new WeakMap;const Od=R;let pv=(()=>{class b{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=_.options;Od(j,"invalid-api-key",{appName:_.name}),Od(j,"invalid-api-key",{appName:_.name});const Z="undefined"!=typeof window?So:void 0;this._delegate=C.initialize({options:{persistence:d0(j,_.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function ts(b,m,_){const C=Jt(b);R(C._canInitEmulator,C,"emulator-config-failed"),R(/^https?:\/\//.test(m),C,"invalid-emulator-scheme");const j=!!(null==_?void 0:_.disableWarnings),Z=ao(m),{host:ke,port:it}=function Ur(b){const m=ao(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",j=/^(\[[^\]]+\])(:|$)/.exec(C);if(j){const Z=j[1];return{host:Z,port:uo(C.substr(Z.length+1))}}{const[Z,ke]=C.split(":");return{host:Z,port:uo(ke)}}}(m);C.config.emulator={url:`${Z}//${ke}${null===it?"":`:${it}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:ke,port:it,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:j})}),j||function nr(){function b(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,_,C)}applyActionCode(_){return function xu(b,m){return mt.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return kn(this._delegate,_)}confirmPasswordReset(_,C){return function Ql(b,m,_){return od.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var j=this;return(0,h.Z)(function*(){return bs(j._delegate,function $a(b,m,_){return ps.apply(this,arguments)}(j._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Jl(b,m){return va.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Oh(b,m){const _=Kl.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,h.Z)(function*(){Od(_i(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function li(b,m){return qo.apply(this,arguments)}(_._delegate,So);return C?bs(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function cv(b,m){Jt(b)._logFramework(m)}(this._delegate,_)}onAuthStateChanged(_,C,j){const{next:Z,error:ke,complete:it}=gv(_,C,j);return this._delegate.onAuthStateChanged(Z,ke,it)}onIdTokenChanged(_,C,j){const{next:Z,error:ke,complete:it}=gv(_,C,j);return this._delegate.onIdTokenChanged(Z,ke,it)}sendSignInLinkToEmail(_,C){return function ud(b,m,_){return ld.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function sd(b,m,_){return Yl.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,h.Z)(function*(){let j;switch(function o0(b,m){Bu(Object.values(as).includes(m),b,"invalid-persistence-type"),(0,V.b$)()?Bu(m!==as.SESSION,b,"unsupported-persistence-type"):(0,V.UG)()?Bu(m===as.NONE,b,"unsupported-persistence-type"):ff()?Bu(m===as.NONE||m===as.LOCAL&&(0,V.hl)(),b,"unsupported-persistence-type"):Bu(m===as.NONE||Xp(),b,"unsupported-persistence-type")}(C._delegate,_),_){case as.SESSION:j=Ar;break;case as.LOCAL:j=(yield oe(eu)._isAvailable())?eu:Ui;break;case as.NONE:j=qe;break;default:return Qe("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return bs(this._delegate,function Ph(b){return td.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return bs(this._delegate,yr(this._delegate,_))}signInWithCustomToken(_){return bs(this._delegate,function Cu(b,m){return dn.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return bs(this._delegate,function ad(b,m,_){return yr((0,V.m9)(b),Dh.credential(m,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return bs(this._delegate,function zm(b,m,_){return Fo.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return ng(this._delegate,function Vr(b,m,_){return _l.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,h.Z)(function*(){return Od(_i(),C._delegate,"operation-not-supported-in-this-environment"),bs(C._delegate,function Qm(b,m,_){return $o.apply(this,arguments)}(C._delegate,_,So))})()}signInWithRedirect(_){var C=this;return(0,h.Z)(function*(){return Od(_i(),C._delegate,"operation-not-supported-in-this-environment"),yield Cl(C._delegate),function Ue(b,m,_){return function Ke(b,m,_){return at.apply(this,arguments)}(b,m,_)}(C._delegate,_,So)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function dr(b,m){return Xl.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=as,b})();function gv(b,m,_){let C=b;"function"!=typeof b&&({next:C,error:m,complete:_}=b);const j=C;return{next:ke=>j(ke&&Wo.getOrCreate(ke)),error:m,complete:_}}function d0(b,m){const _=function Pd(b,m){const _=pf();if(!_)return[];const C=bt(eg,b,m);switch(_.getItem(C)){case as.NONE:return[qe];case as.LOCAL:return[eu,Ar];case as.SESSION:return[Ar];default:return[]}}(b,m);if("undefined"!=typeof self&&!_.includes(eu)&&_.push(eu),"undefined"!=typeof window)for(const C of[Ui,Ar])_.includes(C)||_.push(C);return _.includes(qe)||_.push(qe),_}class ig{constructor(){this.providerId="phone",this._delegate=new Sa(gf(ne.Z.auth()))}static credential(m,_){return Sa.credential(m,_)}verifyPhoneNumber(m,_){return this._delegate.verifyPhoneNumber(m,_)}unwrap(){return this._delegate}}ig.PHONE_SIGN_IN_METHOD=Sa.PHONE_SIGN_IN_METHOD,ig.PROVIDER_ID=Sa.PROVIDER_ID;const mv=R;class ww{constructor(m,_,C=ne.Z.app()){var j;mv(null===(j=C.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new zh(m,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xl(b){b.INTERNAL.registerComponent(new me.wA("auth-compat",m=>{const _=m.getProvider("app-compat").getImmediate(),C=m.getProvider("auth");return new pv(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Dh,FacebookAuthProvider:Tu,GithubAuthProvider:Np,GoogleAuthProvider:kh,OAuthProvider:fo,SAMLAuthProvider:Fi,PhoneAuthProvider:ig,PhoneMultiFactorGenerator:Q_,RecaptchaVerifier:ww,TwitterAuthProvider:Mh,Auth:pv,AuthCredential:js,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.15")}(ne.Z)},1421:(Ze,_e,B)=>{var V,h="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},ne=B(5893);"undefined"!=typeof document?V=document:(V=h["__GLOBAL_DOCUMENT_CACHE@4"])||(V=h["__GLOBAL_DOCUMENT_CACHE@4"]=ne),Ze.exports=V},9226:Ze=>{var _e;_e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ze.exports=_e},2703:Ze=>{Ze.exports=function B(h){if(!h)return!1;var ne=_e.call(h);return"[object Function]"===ne||"function"==typeof h&&"[object RegExp]"!==ne||"undefined"!=typeof window&&(h===window.setTimeout||h===window.alert||h===window.confirm||h===window.prompt)};var _e=Object.prototype.toString},1234:(Ze,_e)=>{function B(ce){if(ce&&"object"==typeof ce){var me=ce.which||ce.keyCode||ce.charCode;me&&(ce=me)}if("number"==typeof ce)return de[ce];var ve,fe=String(ce);return(ve=h[fe.toLowerCase()])?ve:(ve=ne[fe.toLowerCase()])||(1===fe.length?fe.charCodeAt(0):void 0)}B.isEventKey=function(me,fe){if(me&&"object"==typeof me){var ve=me.which||me.keyCode||me.charCode;if(null==ve)return!1;if("string"==typeof fe){var J;if(J=h[fe.toLowerCase()])return J===ve;if(J=ne[fe.toLowerCase()])return J===ve}else if("number"==typeof fe)return fe===ve;return!1}};var h=(_e=Ze.exports=B).code=_e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},ne=_e.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(V=97;V<123;V++)h[String.fromCharCode(V)]=V-32;for(var V=48;V<58;V++)h[V-48]=V;for(V=1;V<13;V++)h["f"+V]=V+111;for(V=0;V<10;V++)h["numpad "+V]=V+96;var de=_e.names=_e.title={};for(V in h)de[h[V]]=V;for(var ie in ne)h[ie]=ne[ie]},7459:(Ze,_e,B)=>{var h=B(3357).getUint64;Ze.exports=function(V){var de=new DataView(V.buffer,V.byteOffset,V.byteLength),ie={version:V[0],flags:new Uint8Array(V.subarray(1,4)),references:[],referenceId:de.getUint32(4),timescale:de.getUint32(8)},ce=12;0===ie.version?(ie.earliestPresentationTime=de.getUint32(ce),ie.firstOffset=de.getUint32(ce+4),ce+=8):(ie.earliestPresentationTime=h(V.subarray(ce)),ie.firstOffset=h(V.subarray(ce+8)),ce+=16);var me=de.getUint16(ce+=2);for(ce+=2;me>0;ce+=12,me--)ie.references.push({referenceType:(128&V[ce])>>>7,referencedSize:2147483647&de.getUint32(ce),subsegmentDuration:de.getUint32(ce+4),startsWithSap:!!(128&V[ce+8]),sapType:(112&V[ce+8])>>>4,sapDeltaTime:268435455&de.getUint32(ce+8)});return ie}},6277:Ze=>{var B,h,ne,V,de,ie,ce;de=function(me,fe){return B(V(me,fe))},ie=function(me,fe){return h(ne(me),fe)},ce=function(me,fe,ve){return ne(ve?me:me-fe)},Ze.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:B=function(me){return 9e4*me},secondsToAudioTs:h=function(me,fe){return me*fe},videoTsToSeconds:ne=function(me){return me/9e4},audioTsToSeconds:V=function(me,fe){return me/fe},audioTsToVideoTs:de,videoTsToAudioTs:ie,metadataTsToSeconds:ce}},3357:Ze=>{var _e=Math.pow(2,32);Ze.exports={getUint64:function(h){var V,ne=new DataView(h.buffer,h.byteOffset,h.byteLength);return ne.getBigUint64?(V=ne.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(V):V:ne.getUint32(0)*_e+ne.getUint32(4)},MAX_UINT32:_e}},7854:Ze=>{var _e=function(B){"use strict";var V,h=Object.prototype,ne=h.hasOwnProperty,de="function"==typeof Symbol?Symbol:{},ie=de.iterator||"@@iterator",ce=de.asyncIterator||"@@asyncIterator",me=de.toStringTag||"@@toStringTag";function fe(X,se,ye){return Object.defineProperty(X,se,{value:ye,enumerable:!0,configurable:!0,writable:!0}),X[se]}try{fe({},"")}catch(X){fe=function(se,ye,He){return se[ye]=He}}function ve(X,se,ye,He){var Fe=Object.create((se&&se.prototype instanceof wt?se:wt).prototype),pt=new he(He||[]);return Fe._invoke=function gt(X,se,ye){var He=ue;return function(Fe,pt){if(He===rt)throw new Error("Generator is already running");if(He===Ye){if("throw"===Fe)throw pt;return we()}for(ye.method=Fe,ye.arg=pt;;){var Nt=ye.delegate;if(Nt){var kt=R(Nt,ye);if(kt){if(kt===Je)continue;return kt}}if("next"===ye.method)ye.sent=ye._sent=ye.arg;else if("throw"===ye.method){if(He===ue)throw He=Ye,ye.arg;ye.dispatchException(ye.arg)}else"return"===ye.method&&ye.abrupt("return",ye.arg);He=rt;var St=J(X,se,ye);if("normal"===St.type){if(He=ye.done?Ye:re,St.arg===Je)continue;return{value:St.arg,done:ye.done}}"throw"===St.type&&(He=Ye,ye.method="throw",ye.arg=St.arg)}}}(X,ye,pt),Fe}function J(X,se,ye){try{return{type:"normal",arg:X.call(se,ye)}}catch(He){return{type:"throw",arg:He}}}B.wrap=ve;var ue="suspendedStart",re="suspendedYield",rt="executing",Ye="completed",Je={};function wt(){}function Ee(){}function Oe(){}var Xe={};fe(Xe,ie,function(){return this});var lt=Object.getPrototypeOf,Qe=lt&&lt(lt(oe([])));Qe&&Qe!==h&&ne.call(Qe,ie)&&(Xe=Qe);var Pe=Oe.prototype=wt.prototype=Object.create(Xe);function Ve(X){["next","throw","return"].forEach(function(se){fe(X,se,function(ye){return this._invoke(se,ye)})})}function ot(X,se){function ye(Fe,pt,Nt,kt){var St=J(X[Fe],X,pt);if("throw"!==St.type){var Ut=St.arg,rn=Ut.value;return rn&&"object"==typeof rn&&ne.call(rn,"__await")?se.resolve(rn.__await).then(function(Qt){ye("next",Qt,Nt,kt)},function(Qt){ye("throw",Qt,Nt,kt)}):se.resolve(rn).then(function(Qt){Ut.value=Qt,Nt(Ut)},function(Qt){return ye("throw",Qt,Nt,kt)})}kt(St.arg)}var He;this._invoke=function Re(Fe,pt){function Nt(){return new se(function(kt,St){ye(Fe,pt,kt,St)})}return He=He?He.then(Nt,Nt):Nt()}}function R(X,se){var ye=X.iterator[se.method];if(ye===V){if(se.delegate=null,"throw"===se.method){if(X.iterator.return&&(se.method="return",se.arg=V,R(X,se),"throw"===se.method))return Je;se.method="throw",se.arg=new TypeError("The iterator does not provide a 'throw' method")}return Je}var He=J(ye,X.iterator,se.arg);if("throw"===He.type)return se.method="throw",se.arg=He.arg,se.delegate=null,Je;var Re=He.arg;return Re?Re.done?(se[X.resultName]=Re.value,se.next=X.nextLoc,"return"!==se.method&&(se.method="next",se.arg=V),se.delegate=null,Je):Re:(se.method="throw",se.arg=new TypeError("iterator result is not an object"),se.delegate=null,Je)}function z(X){var se={tryLoc:X[0]};1 in X&&(se.catchLoc=X[1]),2 in X&&(se.finallyLoc=X[2],se.afterLoc=X[3]),this.tryEntries.push(se)}function Y(X){var se=X.completion||{};se.type="normal",delete se.arg,X.completion=se}function he(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(z,this),this.reset(!0)}function oe(X){if(X){var se=X[ie];if(se)return se.call(X);if("function"==typeof X.next)return X;if(!isNaN(X.length)){var ye=-1,He=function Re(){for(;++ye<X.length;)if(ne.call(X,ye))return Re.value=X[ye],Re.done=!1,Re;return Re.value=V,Re.done=!0,Re};return He.next=He}}return{next:we}}function we(){return{value:V,done:!0}}return Ee.prototype=Oe,fe(Pe,"constructor",Oe),fe(Oe,"constructor",Ee),Ee.displayName=fe(Oe,me,"GeneratorFunction"),B.isGeneratorFunction=function(X){var se="function"==typeof X&&X.constructor;return!!se&&(se===Ee||"GeneratorFunction"===(se.displayName||se.name))},B.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,Oe):(X.__proto__=Oe,fe(X,me,"GeneratorFunction")),X.prototype=Object.create(Pe),X},B.awrap=function(X){return{__await:X}},Ve(ot.prototype),fe(ot.prototype,ce,function(){return this}),B.AsyncIterator=ot,B.async=function(X,se,ye,He,Re){void 0===Re&&(Re=Promise);var Fe=new ot(ve(X,se,ye,He),Re);return B.isGeneratorFunction(se)?Fe:Fe.next().then(function(pt){return pt.done?pt.value:Fe.next()})},Ve(Pe),fe(Pe,me,"Generator"),fe(Pe,ie,function(){return this}),fe(Pe,"toString",function(){return"[object Generator]"}),B.keys=function(X){var se=[];for(var ye in X)se.push(ye);return se.reverse(),function He(){for(;se.length;){var Re=se.pop();if(Re in X)return He.value=Re,He.done=!1,He}return He.done=!0,He}},B.values=oe,he.prototype={constructor:he,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=V,this.done=!1,this.delegate=null,this.method="next",this.arg=V,this.tryEntries.forEach(Y),!X)for(var se in this)"t"===se.charAt(0)&&ne.call(this,se)&&!isNaN(+se.slice(1))&&(this[se]=V)},stop:function(){this.done=!0;var se=this.tryEntries[0].completion;if("throw"===se.type)throw se.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var se=this;function ye(kt,St){return Fe.type="throw",Fe.arg=X,se.next=kt,St&&(se.method="next",se.arg=V),!!St}for(var He=this.tryEntries.length-1;He>=0;--He){var Re=this.tryEntries[He],Fe=Re.completion;if("root"===Re.tryLoc)return ye("end");if(Re.tryLoc<=this.prev){var pt=ne.call(Re,"catchLoc"),Nt=ne.call(Re,"finallyLoc");if(pt&&Nt){if(this.prev<Re.catchLoc)return ye(Re.catchLoc,!0);if(this.prev<Re.finallyLoc)return ye(Re.finallyLoc)}else if(pt){if(this.prev<Re.catchLoc)return ye(Re.catchLoc,!0)}else{if(!Nt)throw new Error("try statement without catch or finally");if(this.prev<Re.finallyLoc)return ye(Re.finallyLoc)}}}},abrupt:function(X,se){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var He=this.tryEntries[ye];if(He.tryLoc<=this.prev&&ne.call(He,"finallyLoc")&&this.prev<He.finallyLoc){var Re=He;break}}Re&&("break"===X||"continue"===X)&&Re.tryLoc<=se&&se<=Re.finallyLoc&&(Re=null);var Fe=Re?Re.completion:{};return Fe.type=X,Fe.arg=se,Re?(this.method="next",this.next=Re.finallyLoc,Je):this.complete(Fe)},complete:function(X,se){if("throw"===X.type)throw X.arg;return"break"===X.type||"continue"===X.type?this.next=X.arg:"return"===X.type?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):"normal"===X.type&&se&&(this.next=se),Je},finish:function(X){for(var se=this.tryEntries.length-1;se>=0;--se){var ye=this.tryEntries[se];if(ye.finallyLoc===X)return this.complete(ye.completion,ye.afterLoc),Y(ye),Je}},catch:function(X){for(var se=this.tryEntries.length-1;se>=0;--se){var ye=this.tryEntries[se];if(ye.tryLoc===X){var He=ye.completion;if("throw"===He.type){var Re=He.arg;Y(ye)}return Re}}throw new Error("illegal catch attempt")},delegateYield:function(X,se,ye){return this.delegate={iterator:oe(X),resultName:se,nextLoc:ye},"next"===this.method&&(this.arg=V),Je}},B}(Ze.exports);try{regeneratorRuntime=_e}catch(B){"object"==typeof globalThis?globalThis.regeneratorRuntime=_e:Function("r","regeneratorRuntime = r")(_e)}},5555:function(Ze,_e,B){var h,ne;h=function(){return function V(){var de=arguments.length;if(0===de)throw new Error("resolveUrl requires at least one argument; got none.");var ie=document.createElement("base");if(ie.href=arguments[0],1===de)return ie.href;var ce=document.getElementsByTagName("head")[0];ce.insertBefore(ie,ce.firstChild);for(var fe,me=document.createElement("a"),ve=1;ve<de;ve++)me.href=arguments[ve],ie.href=fe=me.href;return ce.removeChild(ie),fe}},void 0!==(ne=h.call(_e,B,_e,Ze))&&(Ze.exports=ne)},9751:(Ze,_e,B)=>{"use strict";B.d(_e,{y:()=>fe});var h=B(930),ne=B(727),V=B(8822),de=B(9635),ie=B(2416),ce=B(576),me=B(2806);let fe=(()=>{class re{constructor(Ye){Ye&&(this._subscribe=Ye)}lift(Ye){const Je=new re;return Je.source=this,Je.operator=Ye,Je}subscribe(Ye,Je,wt){const Ee=function ue(re){return re&&re instanceof h.Lv||function J(re){return re&&(0,ce.m)(re.next)&&(0,ce.m)(re.error)&&(0,ce.m)(re.complete)}(re)&&(0,ne.Nn)(re)}(Ye)?Ye:new h.Hp(Ye,Je,wt);return(0,me.x)(()=>{const{operator:Oe,source:Xe}=this;Ee.add(Oe?Oe.call(Ee,Xe):Xe?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Ye){try{return this._subscribe(Ye)}catch(Je){Ye.error(Je)}}forEach(Ye,Je){return new(Je=ve(Je))((wt,Ee)=>{const Oe=new h.Hp({next:Xe=>{try{Ye(Xe)}catch(lt){Ee(lt),Oe.unsubscribe()}},error:Ee,complete:wt});this.subscribe(Oe)})}_subscribe(Ye){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Ye)}[V.L](){return this}pipe(...Ye){return(0,de.U)(Ye)(this)}toPromise(Ye){return new(Ye=ve(Ye))((Je,wt)=>{let Ee;this.subscribe(Oe=>Ee=Oe,Oe=>wt(Oe),()=>Je(Ee))})}}return re.create=rt=>new re(rt),re})();function ve(re){var rt;return null!==(rt=null!=re?re:ie.v.Promise)&&void 0!==rt?rt:Promise}},7579:(Ze,_e,B)=>{"use strict";B.d(_e,{x:()=>me});var h=B(9751),ne=B(727);const de=(0,B(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=B(8737),ce=B(2806);let me=(()=>{class ve extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const re=new fe(this,this);return re.operator=ue,re}_throwIfClosed(){if(this.closed)throw new de}next(ue){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(ue)}})}error(ue){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:re}=this;for(;re.length;)re.shift().error(ue)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:re,isStopped:rt,observers:Ye}=this;return re||rt?ne.Lc:(this.currentObservers=null,Ye.push(ue),new ne.w0(()=>{this.currentObservers=null,(0,ie.P)(Ye,ue)}))}_checkFinalizedStatuses(ue){const{hasError:re,thrownError:rt,isStopped:Ye}=this;re?ue.error(rt):Ye&&ue.complete()}asObservable(){const ue=new h.y;return ue.source=this,ue}}return ve.create=(J,ue)=>new fe(J,ue),ve})();class fe extends me{constructor(J,ue){super(),this.destination=J,this.source=ue}next(J){var ue,re;null===(re=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===re||re.call(ue,J)}error(J){var ue,re;null===(re=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===re||re.call(ue,J)}complete(){var J,ue;null===(ue=null===(J=this.destination)||void 0===J?void 0:J.complete)||void 0===ue||ue.call(J)}_subscribe(J){var ue,re;return null!==(re=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(J))&&void 0!==re?re:ne.Lc}}},930:(Ze,_e,B)=>{"use strict";B.d(_e,{Hp:()=>wt,Lv:()=>re});var h=B(576),ne=B(727),V=B(2416),de=B(7849),ie=B(5032);const ce=ve("C",void 0,void 0);function ve(Qe,Pe,Ve){return{kind:Qe,value:Pe,error:Ve}}var J=B(3410),ue=B(2806);class re extends ne.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,ne.Nn)(Pe)&&Pe.add(this)):this.destination=lt}static create(Pe,Ve,ot){return new wt(Pe,Ve,ot)}next(Pe){this.isStopped?Xe(function fe(Qe){return ve("N",Qe,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Xe(function me(Qe){return ve("E",void 0,Qe)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Xe(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const rt=Function.prototype.bind;function Ye(Qe,Pe){return rt.call(Qe,Pe)}class Je{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Ve}=this;if(Ve.next)try{Ve.next(Pe)}catch(ot){Ee(ot)}}error(Pe){const{partialObserver:Ve}=this;if(Ve.error)try{Ve.error(Pe)}catch(ot){Ee(ot)}else Ee(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Ve){Ee(Ve)}}}class wt extends re{constructor(Pe,Ve,ot){let gt;if(super(),(0,h.m)(Pe)||!Pe)gt={next:null!=Pe?Pe:void 0,error:null!=Ve?Ve:void 0,complete:null!=ot?ot:void 0};else{let R;this&&V.v.useDeprecatedNextContext?(R=Object.create(Pe),R.unsubscribe=()=>this.unsubscribe(),gt={next:Pe.next&&Ye(Pe.next,R),error:Pe.error&&Ye(Pe.error,R),complete:Pe.complete&&Ye(Pe.complete,R)}):gt=Pe}this.destination=new Je(gt)}}function Ee(Qe){V.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(Qe):(0,de.h)(Qe)}function Xe(Qe,Pe){const{onStoppedNotification:Ve}=V.v;Ve&&J.z.setTimeout(()=>Ve(Qe,Pe))}const lt={closed:!0,next:ie.Z,error:function Oe(Qe){throw Qe},complete:ie.Z}},727:(Ze,_e,B)=>{"use strict";B.d(_e,{Lc:()=>ce,w0:()=>ie,Nn:()=>me});var h=B(576);const V=(0,B(3888).d)(ve=>function(ue){ve(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((re,rt)=>`${rt+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var de=B(8737);class ie{constructor(J){this.initialTeardown=J,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let J;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const Ye of ue)Ye.remove(this);else ue.remove(this);const{initialTeardown:re}=this;if((0,h.m)(re))try{re()}catch(Ye){J=Ye instanceof V?Ye.errors:[Ye]}const{_finalizers:rt}=this;if(rt){this._finalizers=null;for(const Ye of rt)try{fe(Ye)}catch(Je){J=null!=J?J:[],Je instanceof V?J=[...J,...Je.errors]:J.push(Je)}}if(J)throw new V(J)}}add(J){var ue;if(J&&J!==this)if(this.closed)fe(J);else{if(J instanceof ie){if(J.closed||J._hasParent(this))return;J._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(J)}}_hasParent(J){const{_parentage:ue}=this;return ue===J||Array.isArray(ue)&&ue.includes(J)}_addParent(J){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(J),ue):ue?[ue,J]:J}_removeParent(J){const{_parentage:ue}=this;ue===J?this._parentage=null:Array.isArray(ue)&&(0,de.P)(ue,J)}remove(J){const{_finalizers:ue}=this;ue&&(0,de.P)(ue,J),J instanceof ie&&J._removeParent(this)}}ie.EMPTY=(()=>{const ve=new ie;return ve.closed=!0,ve})();const ce=ie.EMPTY;function me(ve){return ve instanceof ie||ve&&"closed"in ve&&(0,h.m)(ve.remove)&&(0,h.m)(ve.add)&&(0,h.m)(ve.unsubscribe)}function fe(ve){(0,h.m)(ve)?ve():ve.unsubscribe()}},2416:(Ze,_e,B)=>{"use strict";B.d(_e,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ze,_e,B)=>{"use strict";B.d(_e,{E:()=>ne});const ne=new(B(9751).y)(ie=>ie.complete())},8996:(Ze,_e,B)=>{"use strict";B.d(_e,{D:()=>Pe});var h=B(8421),ne=B(5363),V=B(9468),ce=B(9751),fe=B(2202),ve=B(576),J=B(9672);function re(Ve,ot){if(!Ve)throw new Error("Iterable cannot be null");return new ce.y(gt=>{(0,J.f)(gt,ot,()=>{const R=Ve[Symbol.asyncIterator]();(0,J.f)(gt,ot,()=>{R.next().then(z=>{z.done?gt.complete():gt.next(z.value)})},0,!0)})})}var rt=B(3670),Ye=B(8239),Je=B(1144),wt=B(6495),Ee=B(2206),Oe=B(4532),Xe=B(3260);function Pe(Ve,ot){return ot?function Qe(Ve,ot){if(null!=Ve){if((0,rt.c)(Ve))return function de(Ve,ot){return(0,h.Xf)(Ve).pipe((0,V.R)(ot),(0,ne.Q)(ot))}(Ve,ot);if((0,Je.z)(Ve))return function me(Ve,ot){return new ce.y(gt=>{let R=0;return ot.schedule(function(){R===Ve.length?gt.complete():(gt.next(Ve[R++]),gt.closed||this.schedule())})})}(Ve,ot);if((0,Ye.t)(Ve))return function ie(Ve,ot){return(0,h.Xf)(Ve).pipe((0,V.R)(ot),(0,ne.Q)(ot))}(Ve,ot);if((0,Ee.D)(Ve))return re(Ve,ot);if((0,wt.T)(Ve))return function ue(Ve,ot){return new ce.y(gt=>{let R;return(0,J.f)(gt,ot,()=>{R=Ve[fe.h](),(0,J.f)(gt,ot,()=>{let z,Y;try{({value:z,done:Y}=R.next())}catch(he){return void gt.error(he)}Y?gt.complete():gt.next(z)},0,!0)}),()=>(0,ve.m)(null==R?void 0:R.return)&&R.return()})}(Ve,ot);if((0,Xe.L)(Ve))return function lt(Ve,ot){return re((0,Xe.Q)(Ve),ot)}(Ve,ot)}throw(0,Oe.z)(Ve)}(Ve,ot):(0,h.Xf)(Ve)}},8421:(Ze,_e,B)=>{"use strict";B.d(_e,{Xf:()=>rt});var h=B(655),ne=B(1144),V=B(8239),de=B(9751),ie=B(3670),ce=B(2206),me=B(4532),fe=B(6495),ve=B(3260),J=B(576),ue=B(7849),re=B(8822);function rt(Qe){if(Qe instanceof de.y)return Qe;if(null!=Qe){if((0,ie.c)(Qe))return function Ye(Qe){return new de.y(Pe=>{const Ve=Qe[re.L]();if((0,J.m)(Ve.subscribe))return Ve.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Qe);if((0,ne.z)(Qe))return function Je(Qe){return new de.y(Pe=>{for(let Ve=0;Ve<Qe.length&&!Pe.closed;Ve++)Pe.next(Qe[Ve]);Pe.complete()})}(Qe);if((0,V.t)(Qe))return function wt(Qe){return new de.y(Pe=>{Qe.then(Ve=>{Pe.closed||(Pe.next(Ve),Pe.complete())},Ve=>Pe.error(Ve)).then(null,ue.h)})}(Qe);if((0,ce.D)(Qe))return Oe(Qe);if((0,fe.T)(Qe))return function Ee(Qe){return new de.y(Pe=>{for(const Ve of Qe)if(Pe.next(Ve),Pe.closed)return;Pe.complete()})}(Qe);if((0,ve.L)(Qe))return function Xe(Qe){return Oe((0,ve.Q)(Qe))}(Qe)}throw(0,me.z)(Qe)}function Oe(Qe){return new de.y(Pe=>{(function lt(Qe,Pe){var Ve,ot,gt,R;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ve=(0,h.KL)(Qe);!(ot=yield Ve.next()).done;)if(Pe.next(ot.value),Pe.closed)return}catch(z){gt={error:z}}finally{try{ot&&!ot.done&&(R=Ve.return)&&(yield R.call(Ve))}finally{if(gt)throw gt.error}}Pe.complete()})})(Qe,Pe).catch(Ve=>Pe.error(Ve))})}},6451:(Ze,_e,B)=>{"use strict";B.d(_e,{T:()=>ce});var h=B(8189),ne=B(8421),V=B(515),de=B(3269),ie=B(8996);function ce(...me){const fe=(0,de.yG)(me),ve=(0,de._6)(me,1/0),J=me;return J.length?1===J.length?(0,ne.Xf)(J[0]):(0,h.J)(ve)((0,ie.D)(J,fe)):V.E}},5403:(Ze,_e,B)=>{"use strict";B.d(_e,{x:()=>ne});var h=B(930);function ne(de,ie,ce,me,fe){return new V(de,ie,ce,me,fe)}class V extends h.Lv{constructor(ie,ce,me,fe,ve,J){super(ie),this.onFinalize=ve,this.shouldUnsubscribe=J,this._next=ce?function(ue){try{ce(ue)}catch(re){ie.error(re)}}:super._next,this._error=fe?function(ue){try{fe(ue)}catch(re){ie.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(ue){ie.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Ze,_e,B)=>{"use strict";B.d(_e,{U:()=>V});var h=B(4482),ne=B(5403);function V(de,ie){return(0,h.e)((ce,me)=>{let fe=0;ce.subscribe((0,ne.x)(me,ve=>{me.next(de.call(ie,ve,fe++))}))})}},8189:(Ze,_e,B)=>{"use strict";B.d(_e,{J:()=>V});var h=B(5577),ne=B(4671);function V(de=1/0){return(0,h.z)(ne.y,de)}},5577:(Ze,_e,B)=>{"use strict";B.d(_e,{z:()=>fe});var h=B(4004),ne=B(8421),V=B(4482),de=B(9672),ie=B(5403),me=B(576);function fe(ve,J,ue=1/0){return(0,me.m)(J)?fe((re,rt)=>(0,h.U)((Ye,Je)=>J(re,Ye,rt,Je))((0,ne.Xf)(ve(re,rt))),ue):("number"==typeof J&&(ue=J),(0,V.e)((re,rt)=>function ce(ve,J,ue,re,rt,Ye,Je,wt){const Ee=[];let Oe=0,Xe=0,lt=!1;const Qe=()=>{lt&&!Ee.length&&!Oe&&J.complete()},Pe=ot=>Oe<re?Ve(ot):Ee.push(ot),Ve=ot=>{Ye&&J.next(ot),Oe++;let gt=!1;(0,ne.Xf)(ue(ot,Xe++)).subscribe((0,ie.x)(J,R=>{null==rt||rt(R),Ye?Pe(R):J.next(R)},()=>{gt=!0},void 0,()=>{if(gt)try{for(Oe--;Ee.length&&Oe<re;){const R=Ee.shift();Je?(0,de.f)(J,Je,()=>Ve(R)):Ve(R)}Qe()}catch(R){J.error(R)}}))};return ve.subscribe((0,ie.x)(J,Pe,()=>{lt=!0,Qe()})),()=>{null==wt||wt()}}(re,rt,ve,ue)))}},5363:(Ze,_e,B)=>{"use strict";B.d(_e,{Q:()=>de});var h=B(9672),ne=B(4482),V=B(5403);function de(ie,ce=0){return(0,ne.e)((me,fe)=>{me.subscribe((0,V.x)(fe,ve=>(0,h.f)(fe,ie,()=>fe.next(ve),ce),()=>(0,h.f)(fe,ie,()=>fe.complete(),ce),ve=>(0,h.f)(fe,ie,()=>fe.error(ve),ce)))})}},3099:(Ze,_e,B)=>{"use strict";B.d(_e,{B:()=>ce});var h=B(8996),ne=B(5698),V=B(7579),de=B(930),ie=B(4482);function ce(fe={}){const{connector:ve=(()=>new V.x),resetOnError:J=!0,resetOnComplete:ue=!0,resetOnRefCountZero:re=!0}=fe;return rt=>{let Ye=null,Je=null,wt=null,Ee=0,Oe=!1,Xe=!1;const lt=()=>{null==Je||Je.unsubscribe(),Je=null},Qe=()=>{lt(),Ye=wt=null,Oe=Xe=!1},Pe=()=>{const Ve=Ye;Qe(),null==Ve||Ve.unsubscribe()};return(0,ie.e)((Ve,ot)=>{Ee++,!Xe&&!Oe&&lt();const gt=wt=null!=wt?wt:ve();ot.add(()=>{Ee--,0===Ee&&!Xe&&!Oe&&(Je=me(Pe,re))}),gt.subscribe(ot),Ye||(Ye=new de.Hp({next:R=>gt.next(R),error:R=>{Xe=!0,lt(),Je=me(Qe,J,R),gt.error(R)},complete:()=>{Oe=!0,lt(),Je=me(Qe,ue),gt.complete()}}),(0,h.D)(Ve).subscribe(Ye))})(rt)}}function me(fe,ve,...J){return!0===ve?(fe(),null):!1===ve?null:ve(...J).pipe((0,ne.q)(1)).subscribe(()=>fe())}},9468:(Ze,_e,B)=>{"use strict";B.d(_e,{R:()=>ne});var h=B(4482);function ne(V,de=0){return(0,h.e)((ie,ce)=>{ce.add(V.schedule(()=>ie.subscribe(ce),de))})}},5698:(Ze,_e,B)=>{"use strict";B.d(_e,{q:()=>de});var h=B(515),ne=B(4482),V=B(5403);function de(ie){return ie<=0?()=>h.E:(0,ne.e)((ce,me)=>{let fe=0;ce.subscribe((0,V.x)(me,ve=>{++fe<=ie&&(me.next(ve),ie<=fe&&me.complete())}))})}},8505:(Ze,_e,B)=>{"use strict";B.d(_e,{b:()=>ie});var h=B(576),ne=B(4482),V=B(5403),de=B(4671);function ie(ce,me,fe){const ve=(0,h.m)(ce)||me||fe?{next:ce,error:me,complete:fe}:ce;return ve?(0,ne.e)((J,ue)=>{var re;null===(re=ve.subscribe)||void 0===re||re.call(ve);let rt=!0;J.subscribe((0,V.x)(ue,Ye=>{var Je;null===(Je=ve.next)||void 0===Je||Je.call(ve,Ye),ue.next(Ye)},()=>{var Ye;rt=!1,null===(Ye=ve.complete)||void 0===Ye||Ye.call(ve),ue.complete()},Ye=>{var Je;rt=!1,null===(Je=ve.error)||void 0===Je||Je.call(ve,Ye),ue.error(Ye)},()=>{var Ye,Je;rt&&(null===(Ye=ve.unsubscribe)||void 0===Ye||Ye.call(ve)),null===(Je=ve.finalize)||void 0===Je||Je.call(ve)}))}):de.y}},4408:(Ze,_e,B)=>{"use strict";B.d(_e,{o:()=>ie});var h=B(727);class ne extends h.w0{constructor(me,fe){super()}schedule(me,fe=0){return this}}const V={setInterval(ce,me,...fe){const{delegate:ve}=V;return(null==ve?void 0:ve.setInterval)?ve.setInterval(ce,me,...fe):setInterval(ce,me,...fe)},clearInterval(ce){const{delegate:me}=V;return((null==me?void 0:me.clearInterval)||clearInterval)(ce)},delegate:void 0};var de=B(8737);class ie extends ne{constructor(me,fe){super(me,fe),this.scheduler=me,this.work=fe,this.pending=!1}schedule(me,fe=0){if(this.closed)return this;this.state=me;const ve=this.id,J=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(J,ve,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(J,this.id,fe),this}requestAsyncId(me,fe,ve=0){return V.setInterval(me.flush.bind(me,this),ve)}recycleAsyncId(me,fe,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return fe;V.clearInterval(fe)}execute(me,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(me,fe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,fe){let J,ve=!1;try{this.work(me)}catch(ue){ve=!0,J=ue||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),J}unsubscribe(){if(!this.closed){const{id:me,scheduler:fe}=this,{actions:ve}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(ve,this),null!=me&&(this.id=this.recycleAsyncId(fe,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ze,_e,B)=>{"use strict";B.d(_e,{v:()=>V});var h=B(6063);class ne{constructor(ie,ce=ne.now){this.schedulerActionCtor=ie,this.now=ce}schedule(ie,ce=0,me){return new this.schedulerActionCtor(this,ie).schedule(me,ce)}}ne.now=h.l.now;class V extends ne{constructor(ie,ce=ne.now){super(ie,ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:ce}=this;if(this._active)return void ce.push(ie);let me;this._active=!0;do{if(me=ie.execute(ie.state,ie.delay))break}while(ie=ce.shift());if(this._active=!1,me){for(;ie=ce.shift();)ie.unsubscribe();throw me}}}},4986:(Ze,_e,B)=>{"use strict";B.d(_e,{P:()=>de,z:()=>V});var h=B(4408);const V=new(B(7565).v)(h.o),de=V},6063:(Ze,_e,B)=>{"use strict";B.d(_e,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Ze,_e,B)=>{"use strict";B.d(_e,{z:()=>h});const h={setTimeout(ne,V,...de){const{delegate:ie}=h;return(null==ie?void 0:ie.setTimeout)?ie.setTimeout(ne,V,...de):setTimeout(ne,V,...de)},clearTimeout(ne){const{delegate:V}=h;return((null==V?void 0:V.clearTimeout)||clearTimeout)(ne)},delegate:void 0}},2202:(Ze,_e,B)=>{"use strict";B.d(_e,{h:()=>ne});const ne=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ze,_e,B)=>{"use strict";B.d(_e,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ze,_e,B)=>{"use strict";B.d(_e,{_6:()=>ce,jO:()=>de,yG:()=>ie});var h=B(576),ne=B(3532);function V(me){return me[me.length-1]}function de(me){return(0,h.m)(V(me))?me.pop():void 0}function ie(me){return(0,ne.K)(V(me))?me.pop():void 0}function ce(me,fe){return"number"==typeof V(me)?me.pop():fe}},8737:(Ze,_e,B)=>{"use strict";function h(ne,V){if(ne){const de=ne.indexOf(V);0<=de&&ne.splice(de,1)}}B.d(_e,{P:()=>h})},3888:(Ze,_e,B)=>{"use strict";function h(ne){const de=ne(ie=>{Error.call(ie),ie.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}B.d(_e,{d:()=>h})},2806:(Ze,_e,B)=>{"use strict";B.d(_e,{O:()=>de,x:()=>V});var h=B(2416);let ne=null;function V(ie){if(h.v.useDeprecatedSynchronousErrorHandling){const ce=!ne;if(ce&&(ne={errorThrown:!1,error:null}),ie(),ce){const{errorThrown:me,error:fe}=ne;if(ne=null,me)throw fe}}else ie()}function de(ie){h.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=ie)}},9672:(Ze,_e,B)=>{"use strict";function h(ne,V,de,ie=0,ce=!1){const me=V.schedule(function(){de(),ce?ne.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(ne.add(me),!ce)return me}B.d(_e,{f:()=>h})},4671:(Ze,_e,B)=>{"use strict";function h(ne){return ne}B.d(_e,{y:()=>h})},1144:(Ze,_e,B)=>{"use strict";B.d(_e,{z:()=>h});const h=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(Ze,_e,B)=>{"use strict";B.d(_e,{D:()=>ne});var h=B(576);function ne(V){return Symbol.asyncIterator&&(0,h.m)(null==V?void 0:V[Symbol.asyncIterator])}},576:(Ze,_e,B)=>{"use strict";function h(ne){return"function"==typeof ne}B.d(_e,{m:()=>h})},3670:(Ze,_e,B)=>{"use strict";B.d(_e,{c:()=>V});var h=B(8822),ne=B(576);function V(de){return(0,ne.m)(de[h.L])}},6495:(Ze,_e,B)=>{"use strict";B.d(_e,{T:()=>V});var h=B(2202),ne=B(576);function V(de){return(0,ne.m)(null==de?void 0:de[h.h])}},8239:(Ze,_e,B)=>{"use strict";B.d(_e,{t:()=>ne});var h=B(576);function ne(V){return(0,h.m)(null==V?void 0:V.then)}},3260:(Ze,_e,B)=>{"use strict";B.d(_e,{L:()=>de,Q:()=>V});var h=B(655),ne=B(576);function V(ie){return(0,h.FC)(this,arguments,function*(){const me=ie.getReader();try{for(;;){const{value:fe,done:ve}=yield(0,h.qq)(me.read());if(ve)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(fe)}}finally{me.releaseLock()}})}function de(ie){return(0,ne.m)(null==ie?void 0:ie.getReader)}},3532:(Ze,_e,B)=>{"use strict";B.d(_e,{K:()=>ne});var h=B(576);function ne(V){return V&&(0,h.m)(V.schedule)}},4482:(Ze,_e,B)=>{"use strict";B.d(_e,{A:()=>ne,e:()=>V});var h=B(576);function ne(de){return(0,h.m)(null==de?void 0:de.lift)}function V(de){return ie=>{if(ne(ie))return ie.lift(function(ce){try{return de(ce,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ze,_e,B)=>{"use strict";function h(){}B.d(_e,{Z:()=>h})},9635:(Ze,_e,B)=>{"use strict";B.d(_e,{U:()=>V,z:()=>ne});var h=B(4671);function ne(...de){return V(de)}function V(de){return 0===de.length?h.y:1===de.length?de[0]:function(ce){return de.reduce((me,fe)=>fe(me),ce)}}},7849:(Ze,_e,B)=>{"use strict";B.d(_e,{h:()=>V});var h=B(2416),ne=B(3410);function V(de){ne.z.setTimeout(()=>{const{onUnhandledError:ie}=h.v;if(!ie)throw de;ie(de)})}},4532:(Ze,_e,B)=>{"use strict";function h(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(_e,{z:()=>h})},8099:Ze=>{Ze.exports=function _e(B,h){var ne,V=null;try{ne=JSON.parse(B,h)}catch(de){V=de}return[V,ne]}},3871:function(Ze){var B,h,ne,V,de;B=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,h=/^(?=([^\/?#]*))\1([^]*)$/,ne=/(?:\/|^)\.(?=\/)/g,V=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Ze.exports=de={buildAbsoluteURL:function(ie,ce,me){if(me=me||{},ie=ie.trim(),!(ce=ce.trim())){if(!me.alwaysNormalize)return ie;var fe=de.parseURL(ie);if(!fe)throw new Error("Error trying to parse base URL.");return fe.path=de.normalizePath(fe.path),de.buildURLFromParts(fe)}var ve=de.parseURL(ce);if(!ve)throw new Error("Error trying to parse relative URL.");if(ve.scheme)return me.alwaysNormalize?(ve.path=de.normalizePath(ve.path),de.buildURLFromParts(ve)):ce;var J=de.parseURL(ie);if(!J)throw new Error("Error trying to parse base URL.");if(!J.netLoc&&J.path&&"/"!==J.path[0]){var ue=h.exec(J.path);J.netLoc=ue[1],J.path=ue[2]}J.netLoc&&!J.path&&(J.path="/");var re={scheme:J.scheme,netLoc:ve.netLoc,path:null,params:ve.params,query:ve.query,fragment:ve.fragment};if(!ve.netLoc&&(re.netLoc=J.netLoc,"/"!==ve.path[0]))if(ve.path){var rt=J.path,Ye=rt.substring(0,rt.lastIndexOf("/")+1)+ve.path;re.path=de.normalizePath(Ye)}else re.path=J.path,ve.params||(re.params=J.params,ve.query||(re.query=J.query));return null===re.path&&(re.path=me.alwaysNormalize?de.normalizePath(ve.path):ve.path),de.buildURLFromParts(re)},parseURL:function(ie){var ce=B.exec(ie);return ce?{scheme:ce[1]||"",netLoc:ce[2]||"",path:ce[3]||"",params:ce[4]||"",query:ce[5]||"",fragment:ce[6]||""}:null},normalizePath:function(ie){for(ie=ie.split("").reverse().join("").replace(ne,"");ie.length!==(ie=ie.replace(V,"")).length;);return ie.split("").reverse().join("")},buildURLFromParts:function(ie){return ie.scheme+ie.netLoc+ie.path+ie.params+ie.query+ie.fragment}}},3629:(Ze,_e,B)=>{var h=B(9226),ne=Ze.exports={WebVTT:B(8318),VTTCue:B(5713),VTTRegion:B(3872)};h.vttjs=ne,h.WebVTT=ne.WebVTT;var V=ne.VTTCue,de=ne.VTTRegion,ie=h.VTTCue,ce=h.VTTRegion;ne.shim=function(){h.VTTCue=V,h.VTTRegion=de},ne.restore=function(){h.VTTCue=ie,h.VTTRegion=ce},h.VTTCue||ne.shim()},8318:(Ze,_e,B)=>{var h=B(1421),ne=Object.create||function(){function R(){}return function(z){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return R.prototype=z,new R}}();function V(R,z){this.name="ParsingError",this.code=R.code,this.message=z||R.message}function de(R){function z(he,oe,we,X){return 3600*(0|he)+60*(0|oe)+(0|we)+(0|X)/1e3}var Y=R.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Y?Y[3]?z(Y[1],Y[2],Y[3].replace(":",""),Y[4]):Y[1]>59?z(Y[1],Y[2],0,Y[4]):z(0,Y[1],Y[2],Y[4]):null}function ie(){this.values=ne(null)}function ce(R,z,Y,he){var oe=he?R.split(he):[R];for(var we in oe)if("string"==typeof oe[we]){var X=oe[we].split(Y);2===X.length&&z(X[0],X[1])}}function me(R,z,Y){var he=R;function oe(){var se=de(R);if(null===se)throw new V(V.Errors.BadTimeStamp,"Malformed timestamp: "+he);return R=R.replace(/^[^\sa-zA-Z-]+/,""),se}function X(){R=R.replace(/^\s+/,"")}if(X(),z.startTime=oe(),X(),"--\x3e"!==R.substr(0,3))throw new V(V.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+he);R=R.substr(3),X(),z.endTime=oe(),X(),function we(se,ye){var He=new ie;ce(se,function(Re,Fe){switch(Re){case"region":for(var pt=Y.length-1;pt>=0;pt--)if(Y[pt].id===Fe){He.set(Re,Y[pt].region);break}break;case"vertical":He.alt(Re,Fe,["rl","lr"]);break;case"line":var Nt=Fe.split(","),kt=Nt[0];He.integer(Re,kt),He.percent(Re,kt)&&He.set("snapToLines",!1),He.alt(Re,kt,["auto"]),2===Nt.length&&He.alt("lineAlign",Nt[1],["start","center","end"]);break;case"position":Nt=Fe.split(","),He.percent(Re,Nt[0]),2===Nt.length&&He.alt("positionAlign",Nt[1],["start","center","end"]);break;case"size":He.percent(Re,Fe);break;case"align":He.alt(Re,Fe,["start","center","end","left","right"])}},/:/,/\s/),ye.region=He.get("region",null),ye.vertical=He.get("vertical","");try{ye.line=He.get("line","auto")}catch(Re){}ye.lineAlign=He.get("lineAlign","start"),ye.snapToLines=He.get("snapToLines",!0),ye.size=He.get("size",100);try{ye.align=He.get("align","center")}catch(Re){ye.align=He.get("align","middle")}try{ye.position=He.get("position","auto")}catch(Re){ye.position=He.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},ye.align)}ye.positionAlign=He.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},ye.align)}(R,z)}(V.prototype=ne(Error.prototype)).constructor=V,V.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ie.prototype={set:function(R,z){!this.get(R)&&""!==z&&(this.values[R]=z)},get:function(R,z,Y){return Y?this.has(R)?this.values[R]:z[Y]:this.has(R)?this.values[R]:z},has:function(R){return R in this.values},alt:function(R,z,Y){for(var he=0;he<Y.length;++he)if(z===Y[he]){this.set(R,z);break}},integer:function(R,z){/^-?\d+$/.test(z)&&this.set(R,parseInt(z,10))},percent:function(R,z){return!!(z.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(z=parseFloat(z),z>=0&&z<=100))&&(this.set(R,z),!0)}};var fe=h.createElement&&h.createElement("textarea"),ve={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},J={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},ue={v:"title",lang:"lang"},re={rt:"ruby"};function rt(R,z){function Y(){if(!z)return null;var St=z.match(/^([^<]*)(<[^>]*>?)?/);return function kt(Ut){return z=z.substr(Ut.length),Ut}(St[1]?St[1]:St[2])}function he(kt){return fe.innerHTML=kt,kt=fe.textContent,fe.textContent="",kt}function we(kt,St){var Ut=ve[kt];if(!Ut)return null;var rn=R.document.createElement(Ut),Qt=ue[kt];return Qt&&St&&(rn[Qt]=St.trim()),rn}for(var ye,X=R.document.createElement("div"),se=X,He=[];null!==(ye=Y());)if("<"!==ye[0])se.appendChild(R.document.createTextNode(he(ye)));else{if("/"===ye[1]){He.length&&He[He.length-1]===ye.substr(2).replace(">","")&&(He.pop(),se=se.parentNode);continue}var Fe,Re=de(ye.substr(1,ye.length-2));if(Re){Fe=R.document.createProcessingInstruction("timestamp",Re),se.appendChild(Fe);continue}var pt=ye.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!pt||!(Fe=we(pt[1],pt[3]))||re[(St=Fe).localName]&&re[St.localName]!==se.localName)continue;if(pt[2]){var Nt=pt[2].split(".");Nt.forEach(function(kt){var St=/^bg_/.test(kt),Ut=St?kt.slice(3):kt;J.hasOwnProperty(Ut)&&(Fe.style[St?"background-color":"color"]=J[Ut])}),Fe.className=Nt.join(" ")}He.push(pt[1]),se.appendChild(Fe),se=Fe}var St;return X}var Ye=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Je(R){for(var z=0;z<Ye.length;z++){var Y=Ye[z];if(R>=Y[0]&&R<=Y[1])return!0}return!1}function wt(R){var z=[],Y="";if(!R||!R.childNodes)return"ltr";function oe(se,ye){for(var He=ye.childNodes.length-1;He>=0;He--)se.push(ye.childNodes[He])}function we(se){if(!se||!se.length)return null;var ye=se.pop(),He=ye.textContent||ye.innerText;if(He){var Re=He.match(/^.*(\n|\r)/);return Re?(se.length=0,Re[0]):He}return"ruby"===ye.tagName?we(se):ye.childNodes?(oe(se,ye),we(se)):void 0}for(oe(z,R);Y=we(z);)for(var X=0;X<Y.length;X++)if(Je(Y.charCodeAt(X)))return"rtl";return"ltr"}function Oe(){}function Xe(R,z,Y){Oe.call(this),this.cue=z,this.cueDiv=rt(R,z.text);var he={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===z.vertical?"horizontal-tb":"lr"===z.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(he,this.cueDiv),this.div=R.document.createElement("div"),he={direction:wt(this.cueDiv),writingMode:""===z.vertical?"horizontal-tb":"lr"===z.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===z.align?"center":z.align,font:Y.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(he),this.div.appendChild(this.cueDiv);var oe=0;switch(z.positionAlign){case"start":oe=z.position;break;case"center":oe=z.position-z.size/2;break;case"end":oe=z.position-z.size}this.applyStyles(""===z.vertical?{left:this.formatStyle(oe,"%"),width:this.formatStyle(z.size,"%")}:{top:this.formatStyle(oe,"%"),height:this.formatStyle(z.size,"%")}),this.move=function(we){this.applyStyles({top:this.formatStyle(we.top,"px"),bottom:this.formatStyle(we.bottom,"px"),left:this.formatStyle(we.left,"px"),right:this.formatStyle(we.right,"px"),height:this.formatStyle(we.height,"px"),width:this.formatStyle(we.width,"px")})}}function lt(R){var z,Y,he,oe;if(R.div){Y=R.div.offsetHeight,he=R.div.offsetWidth,oe=R.div.offsetTop;var we=(we=R.div.childNodes)&&(we=we[0])&&we.getClientRects&&we.getClientRects();R=R.div.getBoundingClientRect(),z=we?Math.max(we[0]&&we[0].height||0,R.height/we.length):0}this.left=R.left,this.right=R.right,this.top=R.top||oe,this.height=R.height||Y,this.bottom=R.bottom||oe+(R.height||Y),this.width=R.width||he,this.lineHeight=void 0!==z?z:R.lineHeight}function Qe(R,z,Y,he){var we=new lt(z),X=z.cue,se=function Ee(R){if("number"==typeof R.line&&(R.snapToLines||R.line>=0&&R.line<=100))return R.line;if(!R.track||!R.track.textTrackList||!R.track.textTrackList.mediaElement)return-1;for(var z=R.track,Y=z.textTrackList,he=0,oe=0;oe<Y.length&&Y[oe]!==z;oe++)"showing"===Y[oe].mode&&he++;return-1*++he}(X),ye=[];if(X.snapToLines){var He;switch(X.vertical){case"":ye=["+y","-y"],He="height";break;case"rl":ye=["+x","-x"],He="width";break;case"lr":ye=["-x","+x"],He="width"}var Re=we.lineHeight,Fe=Re*Math.round(se),pt=Y[He]+Re,Nt=ye[0];Math.abs(Fe)>pt&&(Fe=Fe<0?-1:1,Fe*=Math.ceil(pt/Re)*Re),se<0&&(Fe+=""===X.vertical?Y.height:Y.width,ye=ye.reverse()),we.move(Nt,Fe)}else{var kt=we.lineHeight/Y.height*100;switch(X.lineAlign){case"center":se-=kt/2;break;case"end":se-=kt}switch(X.vertical){case"":z.applyStyles({top:z.formatStyle(se,"%")});break;case"rl":z.applyStyles({left:z.formatStyle(se,"%")});break;case"lr":z.applyStyles({right:z.formatStyle(se,"%")})}ye=["+y","-x","+x","-y"],we=new lt(z)}var St=function oe(Ut,rn){for(var Qt,Bn=new lt(Ut),Vn=1,Zn=0;Zn<rn.length;Zn++){for(;Ut.overlapsOppositeAxis(Y,rn[Zn])||Ut.within(Y)&&Ut.overlapsAny(he);)Ut.move(rn[Zn]);if(Ut.within(Y))return Ut;var ar=Ut.intersectPercentage(Y);Vn>ar&&(Qt=new lt(Ut),Vn=ar),Ut=new lt(Bn)}return Qt||Bn}(we,ye);z.move(St.toCSSCompatValues(Y))}function Pe(){}Oe.prototype.applyStyles=function(R,z){for(var Y in z=z||this.div,R)R.hasOwnProperty(Y)&&(z.style[Y]=R[Y])},Oe.prototype.formatStyle=function(R,z){return 0===R?0:R+z},(Xe.prototype=ne(Oe.prototype)).constructor=Xe,lt.prototype.move=function(R,z){switch(z=void 0!==z?z:this.lineHeight,R){case"+x":this.left+=z,this.right+=z;break;case"-x":this.left-=z,this.right-=z;break;case"+y":this.top+=z,this.bottom+=z;break;case"-y":this.top-=z,this.bottom-=z}},lt.prototype.overlaps=function(R){return this.left<R.right&&this.right>R.left&&this.top<R.bottom&&this.bottom>R.top},lt.prototype.overlapsAny=function(R){for(var z=0;z<R.length;z++)if(this.overlaps(R[z]))return!0;return!1},lt.prototype.within=function(R){return this.top>=R.top&&this.bottom<=R.bottom&&this.left>=R.left&&this.right<=R.right},lt.prototype.overlapsOppositeAxis=function(R,z){switch(z){case"+x":return this.left<R.left;case"-x":return this.right>R.right;case"+y":return this.top<R.top;case"-y":return this.bottom>R.bottom}},lt.prototype.intersectPercentage=function(R){return Math.max(0,Math.min(this.right,R.right)-Math.max(this.left,R.left))*Math.max(0,Math.min(this.bottom,R.bottom)-Math.max(this.top,R.top))/(this.height*this.width)},lt.prototype.toCSSCompatValues=function(R){return{top:this.top-R.top,bottom:R.bottom-this.bottom,left:this.left-R.left,right:R.right-this.right,height:this.height,width:this.width}},lt.getSimpleBoxPosition=function(R){var z=R.div?R.div.offsetHeight:R.tagName?R.offsetHeight:0,Y=R.div?R.div.offsetWidth:R.tagName?R.offsetWidth:0,he=R.div?R.div.offsetTop:R.tagName?R.offsetTop:0;return{left:(R=R.div?R.div.getBoundingClientRect():R.tagName?R.getBoundingClientRect():R).left,right:R.right,top:R.top||he,height:R.height||z,bottom:R.bottom||he+(R.height||z),width:R.width||Y}},Pe.StringDecoder=function(){return{decode:function(R){if(!R)return"";if("string"!=typeof R)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(R))}}},Pe.convertCueToDOMTree=function(R,z){return R&&z?rt(R,z):null},Pe.processCues=function(R,z,Y){if(!R||!z||!Y)return null;for(;Y.firstChild;)Y.removeChild(Y.firstChild);var he=R.document.createElement("div");if(he.style.position="absolute",he.style.left="0",he.style.right="0",he.style.top="0",he.style.bottom="0",he.style.margin="1.5%",Y.appendChild(he),function oe(Re){for(var Fe=0;Fe<Re.length;Fe++)if(Re[Fe].hasBeenReset||!Re[Fe].displayState)return!0;return!1}(z)){var X=[],se=lt.getSimpleBoxPosition(he),He={font:Math.round(.05*se.height*100)/100+"px sans-serif"};!function(){for(var Re,Fe,pt=0;pt<z.length;pt++)Re=new Xe(R,Fe=z[pt],He),he.appendChild(Re.div),Qe(0,Re,se,X),Fe.displayState=Re.div,X.push(lt.getSimpleBoxPosition(Re))}()}else for(var we=0;we<z.length;we++)he.appendChild(z[we].displayState)},(Pe.Parser=function(R,z,Y){Y||(Y=z,z={}),z||(z={}),this.window=R,this.vttjs=z,this.state="INITIAL",this.buffer="",this.decoder=Y||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(R){if(!(R instanceof V))throw R;this.onparsingerror&&this.onparsingerror(R)},parse:function(R){var Re,z=this;function Y(){for(var Re=z.buffer,Fe=0;Fe<Re.length&&"\r"!==Re[Fe]&&"\n"!==Re[Fe];)++Fe;var pt=Re.substr(0,Fe);return"\r"===Re[Fe]&&++Fe,"\n"===Re[Fe]&&++Fe,z.buffer=Re.substr(Fe),pt}R&&(z.buffer+=z.decoder.decode(R,{stream:!0}));try{var X;if("INITIAL"===z.state){if(!/\r\n|\n/.test(z.buffer))return this;var se=(X=Y()).match(/^WEBVTT([ \t].*)?$/);if(!se||!se[0])throw new V(V.Errors.BadSignature);z.state="HEADER"}for(var ye=!1;z.buffer;){if(!/\r\n|\n/.test(z.buffer))return this;switch(ye?ye=!1:X=Y(),z.state){case"HEADER":/:/.test(X)?(Re=X).match(/X-TIMESTAMP-MAP/)?ce(Re,function(Fe,pt){"X-TIMESTAMP-MAP"===Fe&&function oe(Re){var Fe=new ie;ce(Re,function(pt,Nt){switch(pt){case"MPEGT":Fe.integer(pt+"S",Nt);break;case"LOCA":Fe.set(pt+"L",de(Nt))}},/[^\d]:/,/,/),z.ontimestampmap&&z.ontimestampmap({MPEGTS:Fe.get("MPEGTS"),LOCAL:Fe.get("LOCAL")})}(pt)},/=/):ce(Re,function(Fe,pt){"Region"===Fe&&function he(Re){var Fe=new ie;if(ce(Re,function(Nt,kt){switch(Nt){case"id":Fe.set(Nt,kt);break;case"width":Fe.percent(Nt,kt);break;case"lines":Fe.integer(Nt,kt);break;case"regionanchor":case"viewportanchor":var St=kt.split(",");if(2!==St.length)break;var Ut=new ie;if(Ut.percent("x",St[0]),Ut.percent("y",St[1]),!Ut.has("x")||!Ut.has("y"))break;Fe.set(Nt+"X",Ut.get("x")),Fe.set(Nt+"Y",Ut.get("y"));break;case"scroll":Fe.alt(Nt,kt,["up"])}},/=/,/\s/),Fe.has("id")){var pt=new(z.vttjs.VTTRegion||z.window.VTTRegion);pt.width=Fe.get("width",100),pt.lines=Fe.get("lines",3),pt.regionAnchorX=Fe.get("regionanchorX",0),pt.regionAnchorY=Fe.get("regionanchorY",100),pt.viewportAnchorX=Fe.get("viewportanchorX",0),pt.viewportAnchorY=Fe.get("viewportanchorY",100),pt.scroll=Fe.get("scroll",""),z.onregion&&z.onregion(pt),z.regionList.push({id:Fe.get("id"),region:pt})}}(pt)},/:/):X||(z.state="ID");continue;case"NOTE":X||(z.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(X)){z.state="NOTE";break}if(!X)continue;z.cue=new(z.vttjs.VTTCue||z.window.VTTCue)(0,0,"");try{z.cue.align="center"}catch(Re){z.cue.align="middle"}if(z.state="CUE",-1===X.indexOf("--\x3e")){z.cue.id=X;continue}case"CUE":try{me(X,z.cue,z.regionList)}catch(Re){z.reportOrThrowError(Re),z.cue=null,z.state="BADCUE";continue}z.state="CUETEXT";continue;case"CUETEXT":var He=-1!==X.indexOf("--\x3e");if(!X||He&&(ye=!0)){z.oncue&&z.oncue(z.cue),z.cue=null,z.state="ID";continue}z.cue.text&&(z.cue.text+="\n"),z.cue.text+=X.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":X||(z.state="ID");continue}}}catch(Re){z.reportOrThrowError(Re),"CUETEXT"===z.state&&z.cue&&z.oncue&&z.oncue(z.cue),z.cue=null,z.state="INITIAL"===z.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var R=this;try{if(R.buffer+=R.decoder.decode(),(R.cue||"HEADER"===R.state)&&(R.buffer+="\n\n",R.parse()),"INITIAL"===R.state)throw new V(V.Errors.BadSignature)}catch(z){R.reportOrThrowError(z)}return R.onflush&&R.onflush(),this}},Ze.exports=Pe},5713:Ze=>{var B={"":1,lr:1,rl:1},h={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function V(ie){return"string"==typeof ie&&!!h[ie.toLowerCase()]&&ie.toLowerCase()}function de(ie,ce,me){this.hasBeenReset=!1;var fe="",ve=!1,J=ie,ue=ce,re=me,rt=null,Ye="",Je=!0,wt="auto",Ee="start",Oe="auto",Xe="auto",lt=100,Qe="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return fe},set:function(Pe){fe=""+Pe}},pauseOnExit:{enumerable:!0,get:function(){return ve},set:function(Pe){ve=!!Pe}},startTime:{enumerable:!0,get:function(){return J},set:function(Pe){if("number"!=typeof Pe)throw new TypeError("Start time must be set to a number.");J=Pe,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return ue},set:function(Pe){if("number"!=typeof Pe)throw new TypeError("End time must be set to a number.");ue=Pe,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return re},set:function(Pe){re=""+Pe,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return rt},set:function(Pe){rt=Pe,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Ye},set:function(Pe){var Ve=function ne(ie){return"string"==typeof ie&&!!B[ie.toLowerCase()]&&ie.toLowerCase()}(Pe);if(!1===Ve)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Ye=Ve,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Je},set:function(Pe){Je=!!Pe,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return wt},set:function(Pe){if("number"!=typeof Pe&&"auto"!==Pe)throw new SyntaxError("Line: an invalid number or illegal string was specified.");wt=Pe,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Ee},set:function(Pe){var Ve=V(Pe);Ve?(Ee=Ve,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Oe},set:function(Pe){if(Pe<0||Pe>100)throw new Error("Position must be between 0 and 100.");Oe=Pe,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Xe},set:function(Pe){var Ve=V(Pe);Ve?(Xe=Ve,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return lt},set:function(Pe){if(Pe<0||Pe>100)throw new Error("Size must be between 0 and 100.");lt=Pe,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Qe},set:function(Pe){var Ve=V(Pe);if(!Ve)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Qe=Ve,this.hasBeenReset=!0}}}),this.displayState=void 0}de.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Ze.exports=de},3872:Ze=>{var _e={"":!0,up:!0};function h(V){return"number"==typeof V&&V>=0&&V<=100}Ze.exports=function ne(){var V=100,de=3,ie=0,ce=100,me=0,fe=100,ve="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return V},set:function(J){if(!h(J))throw new Error("Width must be between 0 and 100.");V=J}},lines:{enumerable:!0,get:function(){return de},set:function(J){if("number"!=typeof J)throw new TypeError("Lines must be set to a number.");de=J}},regionAnchorY:{enumerable:!0,get:function(){return ce},set:function(J){if(!h(J))throw new Error("RegionAnchorX must be between 0 and 100.");ce=J}},regionAnchorX:{enumerable:!0,get:function(){return ie},set:function(J){if(!h(J))throw new Error("RegionAnchorY must be between 0 and 100.");ie=J}},viewportAnchorY:{enumerable:!0,get:function(){return fe},set:function(J){if(!h(J))throw new Error("ViewportAnchorY must be between 0 and 100.");fe=J}},viewportAnchorX:{enumerable:!0,get:function(){return me},set:function(J){if(!h(J))throw new Error("ViewportAnchorX must be between 0 and 100.");me=J}},scroll:{enumerable:!0,get:function(){return ve},set:function(J){var ue=function B(V){return"string"==typeof V&&!!_e[V.toLowerCase()]&&V.toLowerCase()}(J);!1===ue?console.warn("Scroll: an invalid or illegal string was specified."):ve=ue}}})}},8926:Ze=>{function _e(h,ne,V,de,ie,ce,me){try{var fe=h[ce](me),ve=fe.value}catch(J){return void V(J)}fe.done?ne(ve):Promise.resolve(ve).then(de,ie)}Ze.exports=function B(h){return function(){var ne=this,V=arguments;return new Promise(function(de,ie){var ce=h.apply(ne,V);function me(ve){_e(ce,de,ie,me,fe,"next",ve)}function fe(ve){_e(ce,de,ie,me,fe,"throw",ve)}me(void 0)})}},Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},7154:Ze=>{function _e(){return Ze.exports=_e=Object.assign||function(B){for(var h=1;h<arguments.length;h++){var ne=arguments[h];for(var V in ne)Object.prototype.hasOwnProperty.call(ne,V)&&(B[V]=ne[V])}return B},Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports,_e.apply(this,arguments)}Ze.exports=_e,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},655:(Ze,_e,B)=>{"use strict";function de(Y,he){var oe={};for(var we in Y)Object.prototype.hasOwnProperty.call(Y,we)&&he.indexOf(we)<0&&(oe[we]=Y[we]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var X=0;for(we=Object.getOwnPropertySymbols(Y);X<we.length;X++)he.indexOf(we[X])<0&&Object.prototype.propertyIsEnumerable.call(Y,we[X])&&(oe[we[X]]=Y[we[X]])}return oe}function fe(Y,he,oe,we){return new(oe||(oe=Promise))(function(se,ye){function He(pt){try{Fe(we.next(pt))}catch(Nt){ye(Nt)}}function Re(pt){try{Fe(we.throw(pt))}catch(Nt){ye(Nt)}}function Fe(pt){pt.done?se(pt.value):function X(se){return se instanceof oe?se:new oe(function(ye){ye(se)})}(pt.value).then(He,Re)}Fe((we=we.apply(Y,he||[])).next())})}function Ee(Y){return this instanceof Ee?(this.v=Y,this):new Ee(Y)}function Oe(Y,he,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,we=oe.apply(Y,he||[]),se=[];return X={},ye("next"),ye("throw"),ye("return"),X[Symbol.asyncIterator]=function(){return this},X;function ye(kt){we[kt]&&(X[kt]=function(St){return new Promise(function(Ut,rn){se.push([kt,St,Ut,rn])>1||He(kt,St)})})}function He(kt,St){try{!function Re(kt){kt.value instanceof Ee?Promise.resolve(kt.value.v).then(Fe,pt):Nt(se[0][2],kt)}(we[kt](St))}catch(Ut){Nt(se[0][3],Ut)}}function Fe(kt){He("next",kt)}function pt(kt){He("throw",kt)}function Nt(kt,St){kt(St),se.shift(),se.length&&He(se[0][0],se[0][1])}}function lt(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,he=Y[Symbol.asyncIterator];return he?he.call(Y):(Y=function re(Y){var he="function"==typeof Symbol&&Symbol.iterator,oe=he&&Y[he],we=0;if(oe)return oe.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&we>=Y.length&&(Y=void 0),{value:Y&&Y[we++],done:!Y}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),oe={},we("next"),we("throw"),we("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function we(se){oe[se]=Y[se]&&function(ye){return new Promise(function(He,Re){!function X(se,ye,He,Re){Promise.resolve(Re).then(function(Fe){se({value:Fe,done:He})},ye)}(He,Re,(ye=Y[se](ye)).done,ye.value)})}}}B.d(_e,{FC:()=>Oe,KL:()=>lt,_T:()=>de,mG:()=>fe,qq:()=>Ee})},5893:()=>{},5e3:(Ze,_e,B)=>{"use strict";B.d(_e,{$8M:()=>tu,$Z:()=>qd,AFp:()=>yx,ALo:()=>ex,AaK:()=>fe,AsE:()=>Vf,BQk:()=>zd,CHM:()=>Iu,CRH:()=>ax,CZH:()=>ih,CqO:()=>ib,DdM:()=>KC,EJc:()=>vk,EiD:()=>uv,EpF:()=>US,F$t:()=>ti,F4k:()=>Cg,FYo:()=>zb,FiY:()=>ki,G48:()=>Nx,Gf:()=>lT,GfV:()=>Zb,Gpc:()=>ue,Hsn:()=>VS,JOm:()=>Z,JVY:()=>nv,L6k:()=>zp,LAX:()=>Cd,LFG:()=>Yt,LSH:()=>Sl,Lbi:()=>cp,MAs:()=>Wv,NdJ:()=>ty,O4$:()=>jh,OlP:()=>wr,Oqu:()=>Ll,PXZ:()=>Ky,Q6J:()=>Nf,QGY:()=>Sg,Qsj:()=>Wb,R0b:()=>Gr,RDi:()=>nd,Rgc:()=>Vg,SBq:()=>Lg,Sil:()=>AT,Suo:()=>cT,TTD:()=>fo,TgZ:()=>Io,VKq:()=>ZC,VLi:()=>Sk,W1O:()=>hT,WLB:()=>YC,X6Q:()=>Pk,XFs:()=>Vt,Xpm:()=>K,Y36:()=>bi,YKP:()=>xy,YNc:()=>Nn,Yjl:()=>Li,Yz7:()=>St,ZZ4:()=>el,_Bn:()=>Fl,_UZ:()=>cu,_Vd:()=>Ng,_c5:()=>VT,_uU:()=>sr,aQg:()=>gu,c2e:()=>bx,cJS:()=>rn,cg1:()=>yb,dDg:()=>kT,deG:()=>jp,dqk:()=>Sn,eBb:()=>Y_,eFA:()=>kx,ekj:()=>cb,g9A:()=>_x,h0i:()=>rp,hGG:()=>Zg,hij:()=>Bf,iGM:()=>uT,ifc:()=>Dn,ip1:()=>vx,kL8:()=>_C,kcU:()=>Wm,lG2:()=>Ls,lcZ:()=>eT,mCW:()=>gc,n5z:()=>_r,n_E:()=>Py,oAB:()=>fn,oxw:()=>ob,pB0:()=>Q_,q3G:()=>Mr,q4F:()=>$C,qLn:()=>mf,qOj:()=>Df,qZA:()=>ir,qzn:()=>Ia,sBO:()=>Ok,sIi:()=>Pl,s_b:()=>Ry,soG:()=>qy,tBr:()=>Gs,tb:()=>IT,tp0:()=>xa,uIk:()=>zv,vHH:()=>Je,vpe:()=>fu,wAp:()=>hn,xp6:()=>jw,yhl:()=>pc,ynx:()=>Rc,z2F:()=>OT,z3N:()=>_s,zSh:()=>hS,zs3:()=>Hu});var h=B(7579),ne=B(727),V=B(9751),de=B(6451),ie=B(3099);function ce(a){for(let u in a)if(a[u]===ce)return u;throw Error("Could not find renamed property on target object.")}function me(a,u){for(const c in u)u.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=u[c])}function fe(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(fe).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const u=a.toString();if(null==u)return""+u;const c=u.indexOf("\n");return-1===c?u:u.substring(0,c)}function ve(a,u){return null==a||""===a?null===u?"":u:null==u||""===u?a:a+" "+u}const J=ce({__forward_ref__:ce});function ue(a){return a.__forward_ref__=ue,a.toString=function(){return fe(this())},a}function re(a){return rt(a)?a():a}function rt(a){return"function"==typeof a&&a.hasOwnProperty(J)&&a.__forward_ref__===ue}class Je extends Error{constructor(u,c){super(function wt(a,u){return`NG0${Math.abs(a)}${u?": "+u:""}`}(u,c)),this.code=u}}function Ee(a){return"string"==typeof a?a:null==a?"":String(a)}function Oe(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Ee(a)}function Pe(a,u){const c=u?` in ${u}`:"";throw new Je(-201,`No provider for ${Oe(a)} found${c}`)}function Re(a,u){null==a&&function Fe(a,u,c,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${c} ${d} ${u} <=Actual]`))}(u,a,null,"!=")}function St(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function rn(a){return{providers:a.providers||[],imports:a.imports||[]}}function Qt(a){return Bn(a,Ln)||Bn(a,On)}function Bn(a,u){return a.hasOwnProperty(u)?a[u]:null}function ar(a){return a&&(a.hasOwnProperty(Qi)||a.hasOwnProperty(Er))?a[Qi]:null}const Ln=ce({\u0275prov:ce}),Qi=ce({\u0275inj:ce}),On=ce({ngInjectableDef:ce}),Er=ce({ngInjectorDef:ce});var Vt=(()=>((Vt=Vt||{})[Vt.Default=0]="Default",Vt[Vt.Host=1]="Host",Vt[Vt.Self=2]="Self",Vt[Vt.SkipSelf=4]="SkipSelf",Vt[Vt.Optional=8]="Optional",Vt))();let Zr;function zn(a){const u=Zr;return Zr=a,u}function Xi(a,u,c){const d=Qt(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&Vt.Optional?null:void 0!==u?u:void Pe(fe(a),"Injector")}function xn(a){return{toString:a}.toString()}var Yn=(()=>((Yn=Yn||{})[Yn.OnPush=0]="OnPush",Yn[Yn.Default=1]="Default",Yn))(),Dn=(()=>{return(a=Dn||(Dn={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Dn;var a})();const Wt="undefined"!=typeof globalThis&&globalThis,sn="undefined"!=typeof window&&window,Yr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Sn=Wt||"undefined"!=typeof global&&global||sn||Yr,Qr={},ge=[],xe=ce({\u0275cmp:ce}),Ae=ce({\u0275dir:ce}),dt=ce({\u0275pipe:ce}),Ce=ce({\u0275mod:ce}),$e=ce({\u0275fac:ce}),yt=ce({__NG_ELEMENT_ID__:ce});let Gt=0;function K(a){return xn(()=>{const c={},d={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Yn.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||ge,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Dn.Emulated,id:"c",styles:a.styles||ge,_:null,setInput:null,schemas:a.schemas||null,tView:null},p=a.directives,v=a.features,E=a.pipes;return d.id+=Gt++,d.inputs=Ci(a.inputs,c),d.outputs=Ci(a.outputs),v&&v.forEach(x=>x(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(Se):null,d.pipeDefs=E?()=>("function"==typeof E?E():E).map(qe):null,d})}function Se(a){return Hn(a)||function mr(a){return a[Ae]||null}(a)}function qe(a){return function oi(a){return a[dt]||null}(a)}const bt={};function fn(a){return xn(()=>{const u={type:a.type,bootstrap:a.bootstrap||ge,declarations:a.declarations||ge,imports:a.imports||ge,exports:a.exports||ge,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(bt[a.id]=a.type),u})}function Ci(a,u){if(null==a)return Qr;const c={};for(const d in a)if(a.hasOwnProperty(d)){let p=a[d],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),c[p]=d,u&&(u[p]=v)}return c}const Ls=K;function Li(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function Hn(a){return a[xe]||null}function Qn(a,u){const c=a[Ce]||null;if(!c&&!0===u)throw new Error(`Type ${fe(a)} does not have '\u0275mod' property.`);return c}function rs(a){return Array.isArray(a)&&"object"==typeof a[1]}function lo(a){return Array.isArray(a)&&!0===a[1]}function Wl(a){return 0!=(8&a.flags)}function Th(a){return 2==(2&a.flags)}function co(a){return 1==(1&a.flags)}function ho(a){return null!==a.template}function Qc(a){return 0!=(512&a[2])}function pi(a,u){return a.hasOwnProperty($e)?a[$e]:null}class Ba{constructor(u,c,d){this.previousValue=u,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function fo(){return Tu}function Tu(a){return a.type.prototype.ngOnChanges&&(a.setInput=Np),kh}function kh(){const a=Va(this),u=null==a?void 0:a.current;if(u){const c=a.previous;if(c===Qr)a.previous=u;else for(let d in u)c[d]=u[d];a.current=null,this.ngOnChanges(u)}}function Np(a,u,c,d){const p=Va(a)||function Eu(a,u){return a[ul]=u}(a,{previous:Qr,current:null}),v=p.current||(p.current={}),E=p.previous,x=this.declaredInputs[c],D=E[x];v[x]=new Ba(D&&D.currentValue,u,E===Qr),a[d]=u}fo.ngInherit=!0;const ul="__ngSimpleChanges__";function Va(a){return a[ul]||null}let Su;function nd(a){Su=a}function Jn(a){return!!a.listen}const ll={createRenderer:(a,u)=>function po(){return void 0!==Su?Su:"undefined"!=typeof document?document:void 0}()};function Fn(a){for(;Array.isArray(a);)a=a[0];return a}function ga(a,u){return Fn(u[a])}function gi(a,u){return Fn(u[a.index])}function yr(a,u){return a.data[u]}function go(a,u){return a[u]}function mi(a,u){const c=u[a];return rs(c)?c:c[0]}function Ga(a){return 4==(4&a[2])}function Lo(a){return 128==(128&a[2])}function Us(a,u){return null==u?null:a[u]}function mo(a){a[18]=0}function Cu(a,u){a[5]+=u;let c=a,d=a[3];for(;null!==d&&(1===u&&1===c[5]||-1===u&&0===c[5]);)d[5]+=u,c=d,d=d[3]}const dn={lFrame:Au(null),bindingsEnabled:!0};function Ql(){return dn.bindingsEnabled}function mt(){return dn.lFrame.lView}function kn(){return dn.lFrame.tView}function Iu(a){return dn.lFrame.contextLView=a,a[8]}function dr(){let a=Xl();for(;null!==a&&64===a.type;)a=a.parent;return a}function Xl(){return dn.lFrame.currentTNode}function ps(a,u){const c=dn.lFrame;c.currentTNode=a,c.isParent=u}function ad(){return dn.lFrame.isParent}function ud(){dn.lFrame.isParent=!1}function Ii(){const a=dn.lFrame;let u=a.bindingRootIndex;return-1===u&&(u=a.bindingRootIndex=a.tView.bindingStartIndex),u}function va(){return dn.lFrame.bindingIndex++}function Bs(a){const u=dn.lFrame,c=u.bindingIndex;return u.bindingIndex=u.bindingIndex+a,c}function tc(a,u){const c=dn.lFrame;c.bindingIndex=c.bindingRootIndex=a,fl(u)}function fl(a){dn.lFrame.currentDirectiveIndex=a}function rc(){return dn.lFrame.currentQueryIndex}function Rh(a){dn.lFrame.currentQueryIndex=a}function Nh(a){const u=a[1];return 2===u.type?u.declTNode:1===u.type?a[6]:null}function ic(a,u,c){if(c&Vt.SkipSelf){let p=u,v=a;for(;!(p=p.parent,null!==p||c&Vt.Host||(p=Nh(v),null===p||(v=v[15],10&p.type))););if(null===p)return!1;u=p,a=v}const d=dn.lFrame=Lh();return d.currentTNode=u,d.lView=a,!0}function qa(a){const u=Lh(),c=a[1];dn.lFrame=u,u.currentTNode=c.firstChild,u.lView=a,u.tView=c,u.contextLView=a,u.bindingIndex=c.bindingStartIndex,u.inI18n=!1}function Lh(){const a=dn.lFrame,u=null===a?null:a.child;return null===u?Au(a):u}function Au(a){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=u),u}function Fh(){const a=dn.lFrame;return dn.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const sc=Fh;function is(){const a=Fh();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function ai(){return dn.lFrame.selectedIndex}function za(a){dn.lFrame.selectedIndex=a}function Br(){const a=dn.lFrame;return yr(a.tView,a.selectedIndex)}function jh(){dn.lFrame.currentNamespace="svg"}function Wm(){!function Uh(){dn.lFrame.currentNamespace=null}()}function pl(a,u){for(let c=u.directiveStart,d=u.directiveEnd;c<d;c++){const v=a.data[c].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:x,ngAfterViewInit:D,ngAfterViewChecked:U,ngOnDestroy:G}=v;E&&(a.contentHooks||(a.contentHooks=[])).push(-c,E),x&&((a.contentHooks||(a.contentHooks=[])).push(c,x),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(c,x)),D&&(a.viewHooks||(a.viewHooks=[])).push(-c,D),U&&((a.viewHooks||(a.viewHooks=[])).push(c,U),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(c,U)),null!=G&&(a.destroyHooks||(a.destroyHooks=[])).push(c,G)}}function jo(a,u,c){Bh(a,u,3,c)}function Wa(a,u,c,d){(3&a[2])===c&&Bh(a,u,c,d)}function Xr(a,u){let c=a[2];(3&c)===u&&(c&=2047,c+=1,a[2]=c)}function Bh(a,u,c,d){const v=null!=d?d:-1,E=u.length-1;let x=0;for(let D=void 0!==d?65535&a[18]:0;D<E;D++)if("number"==typeof u[D+1]){if(x=u[D],null!=d&&x>=d)break}else u[D]<0&&(a[18]+=65536),(x<v||-1==v)&&(Zm(a,c,u,D),a[18]=(4294901760&a[18])+D+2),D++}function Zm(a,u,c,d){const p=c[d]<0,v=c[d+1],x=a[p?-c[d]:c[d]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===u){a[2]+=2048;try{v.call(x)}finally{}}}else try{v.call(x)}finally{}}class Du{constructor(u,c,d){this.factory=u,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Ui(a,u,c){const d=Jn(a);let p=0;for(;p<c.length;){const v=c[p];if("number"==typeof v){if(0!==v)break;p++;const E=c[p++],x=c[p++],D=c[p++];d?a.setAttribute(u,x,D,E):u.setAttributeNS(E,x,D)}else{const E=v,x=c[++p];Ar(E)?d&&a.setProperty(u,E,x):d?a.setAttribute(u,E,x):u.setAttribute(E,x),p++}}return p}function ms(a){return 3===a||4===a||6===a}function Ar(a){return 64===a.charCodeAt(0)}function vl(a,u){if(null!==u&&0!==u.length)if(null===a||0===a.length)a=u.slice();else{let c=-1;for(let d=0;d<u.length;d++){const p=u[d];"number"==typeof p?c=p:0===c||Hh(a,c,p,null,-1===c||2===c?u[++d]:null)}}return a}function Hh(a,u,c,d,p){let v=0,E=a.length;if(-1===u)E=-1;else for(;v<a.length;){const x=a[v++];if("number"==typeof x){if(x===u){E=-1;break}if(x>u){E=v-1;break}}}for(;v<a.length;){const x=a[v];if("number"==typeof x)break;if(x===c){if(null===d)return void(null!==p&&(a[v+1]=p));if(d===a[v+1])return void(a[v+2]=p)}v++,null!==d&&v++,null!==p&&v++}-1!==E&&(a.splice(E,0,u),v=E+1),a.splice(v++,0,c),null!==d&&a.splice(v++,0,d),null!==p&&a.splice(v++,0,p)}function ku(a){return-1!==a}function ya(a){return 32767&a}function _a(a,u){let c=function Dr(a){return a>>16}(a),d=u;for(;c>0;)d=d[15],c--;return d}let yo=!0;function an(a){const u=yo;return yo=a,u}let pd=0;function ba(a,u){const c=Ya(a,u);if(-1!==c)return c;const d=u[1];d.firstCreatePass&&(a.injectorIndex=u.length,Za(d.data,a),Za(u,null),Za(d.blueprint,null));const p=vi(a,u),v=a.injectorIndex;if(ku(p)){const E=ya(p),x=_a(p,u),D=x[1].data;for(let U=0;U<8;U++)u[v+U]=x[E+U]|D[E+U]}return u[v+8]=p,v}function Za(a,u){a.push(0,0,0,0,0,0,0,0,u)}function Ya(a,u){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===u[a.injectorIndex+8]?-1:a.injectorIndex}function vi(a,u){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let c=0,d=null,p=u;for(;null!==p;){const v=p[1],E=v.type;if(d=2===E?v.declTNode:1===E?p[6]:null,null===d)return-1;if(c++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function Qa(a,u,c){!function Jr(a,u,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(yt)&&(d=c[yt]),null==d&&(d=c[yt]=pd++);const p=255&d;u.data[a+(p>>5)]|=1<<p}(a,u,c)}function Mu(a,u,c){if(c&Vt.Optional)return a;Pe(u,"NodeInjector")}function Uo(a,u,c,d){if(c&Vt.Optional&&void 0===d&&(d=null),0==(c&(Vt.Self|Vt.Host))){const p=a[9],v=zn(void 0);try{return p?p.get(u,d,c&Vt.Optional):Xi(u,d,c&Vt.Optional)}finally{zn(v)}}return Mu(d,u,c)}function Pu(a,u,c,d=Vt.Default,p){if(null!==a){const v=function eu(a){if("string"==typeof a)return a.charCodeAt(0)||0;const u=a.hasOwnProperty(yt)?a[yt]:void 0;return"number"==typeof u?u>=0?255&u:Ja:u}(c);if("function"==typeof v){if(!ic(u,a,d))return d&Vt.Host?Mu(p,c,d):Uo(u,c,d,p);try{const E=v(d);if(null!=E||d&Vt.Optional)return E;Pe(c)}finally{sc()}}else if("number"==typeof v){let E=null,x=Ya(a,u),D=-1,U=d&Vt.Host?u[16][6]:null;for((-1===x||d&Vt.SkipSelf)&&(D=-1===x?vi(a,u):u[x+8],-1!==D&&md(d,!1)?(E=u[1],x=ya(D),u=_a(D,u)):x=-1);-1!==x;){const G=u[1];if(ei(v,x,G.data)){const te=gd(x,u,c,E,d,U);if(te!==Ta)return te}D=u[x+8],-1!==D&&md(d,u[1].data[x+8]===U)&&ei(v,x,u)?(E=G,x=ya(D),u=_a(D,u)):x=-1}}}return Uo(u,c,d,p)}const Ta={};function Ja(){return new Ea(dr(),mt())}function gd(a,u,c,d,p,v){const E=u[1],x=E.data[a+8],G=yl(x,E,c,null==d?Th(x)&&yo:d!=E&&0!=(3&x.type),p&Vt.Host&&v===x);return null!==G?Bo(u,E,G,x):Ta}function yl(a,u,c,d,p){const v=a.providerIndexes,E=u.data,x=1048575&v,D=a.directiveStart,G=v>>20,Te=p?x+G:a.directiveEnd;for(let Ge=d?x:x+G;Ge<Te;Ge++){const ct=E[Ge];if(Ge<D&&c===ct||Ge>=D&&ct.type===c)return Ge}if(p){const Ge=E[D];if(Ge&&ho(Ge)&&Ge.type===c)return D}return null}function Bo(a,u,c,d){let p=a[c];const v=u.data;if(function oc(a){return a instanceof Du}(p)){const E=p;E.resolving&&function Xe(a,u){const c=u?`. Dependency path: ${u.join(" > ")} > ${a}`:"";throw new Je(-200,`Circular dependency in DI detected for ${a}${c}`)}(Oe(v[c]));const x=an(E.canSeeViewProviders);E.resolving=!0;const D=E.injectImpl?zn(E.injectImpl):null;ic(a,d,Vt.Default);try{p=a[c]=E.factory(void 0,v,a,d),u.firstCreatePass&&c>=d.directiveStart&&function q_(a,u,c){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:v}=u.type.prototype;if(d){const E=Tu(u);(c.preOrderHooks||(c.preOrderHooks=[])).push(a,E),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,E)}p&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-a,p),v&&((c.preOrderHooks||(c.preOrderHooks=[])).push(a,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,v))}(c,v[c],u)}finally{null!==D&&zn(D),an(x),E.resolving=!1,sc()}}return p}function ei(a,u,c){return!!(c[u+(a>>5)]&1<<a)}function md(a,u){return!(a&Vt.Self||a&Vt.Host&&u)}class Ea{constructor(u,c){this._tNode=u,this._lView=c}get(u,c,d){return Pu(this._tNode,this._lView,u,d,c)}}function _r(a){return xn(()=>{const u=a.prototype.constructor,c=u[$e]||vs(u),d=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==d;){const v=p[$e]||vs(p);if(v&&v!==c)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function vs(a){return rt(a)?()=>{const u=vs(re(a));return u&&u()}:pi(a)}function tu(a){return function Xa(a,u){if("class"===u)return a.classes;if("style"===u)return a.styles;const c=a.attrs;if(c){const d=c.length;let p=0;for(;p<d;){const v=c[p];if(ms(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<d&&"string"==typeof c[p];)p++;else{if(v===u)return c[p+1];p+=2}}}return null}(dr(),a)}const _o="__parameters__";function Vs(a,u,c){return xn(()=>{const d=function kr(a){return function(...c){if(a){const d=a(...c);for(const p in d)this[p]=d[p]}}}(u);function p(...v){if(this instanceof p)return d.apply(this,v),this;const E=new p(...v);return x.annotation=E,x;function x(D,U,G){const te=D.hasOwnProperty(_o)?D[_o]:Object.defineProperty(D,_o,{value:[]})[_o];for(;te.length<=G;)te.push(null);return(te[G]=te[G]||[]).push(E),D}}return c&&(p.prototype=Object.create(c.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class wr{constructor(u,c){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=St({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const jp=new wr("AnalyzeForEntryComponents");function Ai(a,u){void 0===u&&(u=a);for(let c=0;c<a.length;c++){let d=a[c];Array.isArray(d)?(u===a&&(u=a.slice(0,c)),Ai(d,u)):u!==a&&u.push(d)}return u}function Bi(a,u){a.forEach(c=>Array.isArray(c)?Bi(c,u):u(c))}function bl(a,u,c){u>=a.length?a.push(c):a.splice(u,0,c)}function Ru(a,u){return u>=a.length-1?a.pop():a.splice(u,1)[0]}function Ho(a,u){const c=[];for(let d=0;d<a;d++)c.push(u);return c}function Di(a,u,c){let d=Fu(a,u);return d>=0?a[1|d]=c:(d=~d,function Nu(a,u,c,d){let p=a.length;if(p==u)a.push(c,d);else if(1===p)a.push(d,a[0]),a[0]=c;else{for(p--,a.push(a[p-1],a[p]);p>u;)a[p]=a[p-2],p--;a[u]=c,a[u+1]=d}}(a,d,u,c)),d}function Tl(a,u){const c=Fu(a,u);if(c>=0)return a[1|c]}function Fu(a,u){return function $o(a,u,c){let d=0,p=a.length>>c;for(;p!==d;){const v=d+(p-d>>1),E=a[v<<c];if(u===E)return v<<c;E>u?p=v:d=v+1}return~(p<<c)}(a,u,1)}const Ca={},ju="__NG_DI_FLAG__",El="ngTempTokenPath",O=/\n/gm,le="__source",Ue=ce({provide:String,useValue:ce});let Ke;function at(a){const u=Ke;return Ke=a,u}function Ht(a,u=Vt.Default){if(void 0===Ke)throw new Je(203,"");return null===Ke?Xi(a,void 0,u):Ke.get(a,u&Vt.Optional?null:void 0,u)}function Yt(a,u=Vt.Default){return(function qn(){return Zr}()||Ht)(re(a),u)}const Rn=Yt;function pn(a){const u=[];for(let c=0;c<a.length;c++){const d=re(a[c]);if(Array.isArray(d)){if(0===d.length)throw new Je(900,"");let p,v=Vt.Default;for(let E=0;E<d.length;E++){const x=d[E],D=li(x);"number"==typeof D?-1===D?p=x.token:v|=D:p=x}u.push(Yt(p,v))}else u.push(Yt(d))}return u}function Hr(a,u){return a[ju]=u,a.prototype[ju]=u,a}function li(a){return a[ju]}const Gs=Hr(Vs("Inject",a=>({token:a})),-1),ki=Hr(Vs("Optional"),8),xa=Hr(Vs("SkipSelf"),4);let wd;function fc(a){var u;return(null===(u=function ef(){if(void 0===wd&&(wd=null,Sn.trustedTypes))try{wd=Sn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return wd}())||void 0===u?void 0:u.createHTML(a))||a}class su{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class tv extends su{getTypeName(){return"HTML"}}class Sd extends su{getTypeName(){return"Style"}}class W_ extends su{getTypeName(){return"Script"}}class K_ extends su{getTypeName(){return"URL"}}class Z_ extends su{getTypeName(){return"ResourceURL"}}function _s(a){return a instanceof su?a.changingThisBreaksApplicationSecurity:a}function Ia(a,u){const c=pc(a);if(null!=c&&c!==u){if("ResourceURL"===c&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===u}function pc(a){return a instanceof su&&a.getTypeName()||null}function nv(a){return new tv(a)}function zp(a){return new Sd(a)}function Y_(a){return new W_(a)}function Cd(a){return new K_(a)}function Q_(a){return new Z_(a)}class rv{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const c=(new window.DOMParser).parseFromString(fc(u),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(u):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class iv{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(u){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=fc(u),c;const d=this.inertDocument.createElement("body");return d.innerHTML=fc(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(u){const c=u.attributes;for(let p=c.length-1;0<p;p--){const E=c.item(p).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&u.removeAttribute(E)}let d=u.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const X_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function gc(a){return(a=String(a)).match(X_)||a.match(wl)?a:"unsafe:"+a}function wo(a){const u={};for(const c of a.split(","))u[c]=!0;return u}function xd(...a){const u={};for(const c of a)for(const d in c)c.hasOwnProperty(d)&&(u[d]=!0);return u}const af=wo("area,br,col,hr,img,wbr"),uf=wo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ou=wo("rp,rt"),Id=xd(af,xd(uf,wo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xd(ou,wo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xd(ou,uf)),Zp=wo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yp=wo("srcset"),ov=xd(Zp,Yp,wo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vc=wo("script,style,template");class Ad{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let c=u.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let p=this.checkClobberedElement(c,c.nextSibling);if(p){c=p;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(u){const c=u.nodeName.toLowerCase();if(!Id.hasOwnProperty(c))return this.sanitizedSomething=!0,!vc.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=u.attributes;for(let p=0;p<d.length;p++){const v=d.item(p),E=v.name,x=E.toLowerCase();if(!ov.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let D=v.value;Zp[x]&&(D=gc(D)),Yp[x]&&(a=D,D=(a=String(a)).split(",").map(u=>gc(u.trim())).join(", ")),this.buf.push(" ",E,'="',Dd(D),'"')}var a;return this.buf.push(">"),!0}endElement(u){const c=u.nodeName.toLowerCase();Id.hasOwnProperty(c)&&!af.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(u){this.buf.push(Dd(u))}checkClobberedElement(u,c){if(c&&(u.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return c}}const e0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,av=/([^\#-~ |!])/g;function Dd(a){return a.replace(/&/g,"&amp;").replace(e0,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(av,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yc;function uv(a,u){let c=null;try{yc=yc||function Wp(a){const u=new iv(a);return function sf(){try{return!!(new window.DOMParser).parseFromString(fc(""),"text/html")}catch(a){return!1}}()?new rv(u):u}(a);let d=u?String(u):"";c=yc.getInertBodyElement(d);let p=5,v=d;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,d=v,v=c.innerHTML,c=yc.getInertBodyElement(d)}while(d!==v);return fc((new Ad).sanitizeChildren(kd(c)||c))}finally{if(c){const d=kd(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function kd(a){return"content"in a&&function os(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Mr=(()=>((Mr=Mr||{})[Mr.NONE=0]="NONE",Mr[Mr.HTML=1]="HTML",Mr[Mr.STYLE=2]="STYLE",Mr[Mr.SCRIPT=3]="SCRIPT",Mr[Mr.URL=4]="URL",Mr[Mr.RESOURCE_URL=5]="RESOURCE_URL",Mr))();function Sl(a){const u=function _c(){const a=mt();return a&&a[12]}();return u?u.sanitize(Mr.URL,a)||"":Ia(a,"URL")?_s(a):gc(Ee(a))}const ff="__ngContext__";function _i(a,u){a[ff]=u}function Jp(a){const u=function bc(a){return a[ff]||null}(a);return u?Array.isArray(u)?u:u.lView:null}function gf(a){return a.ngOriginalError}function l0(a,...u){a.error(...u)}class mf{constructor(){this._console=console}handleError(u){const c=this._findOriginalError(u),d=function u0(a){return a&&a.ngErrorLogger||l0}(u);d(this._console,"ERROR",u),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(u){let c=u&&gf(u);for(;c&&gf(c);)c=gf(c);return c||null}}const ig=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Sn))();function b(a){return a instanceof Function?a():a}var Z=(()=>((Z=Z||{})[Z.Important=1]="Important",Z[Z.DashCase=2]="DashCase",Z))();function it(a,u){return undefined(a,u)}function on(a){const u=a[3];return lo(u)?u[3]:u}function Ts(a){return sg(a[13])}function Tc(a){return sg(a[4])}function sg(a){for(;null!==a&&!lo(a);)a=a[4];return a}function Il(a,u,c,d,p){if(null!=d){let v,E=!1;lo(d)?v=d:rs(d)&&(E=!0,d=d[0]);const x=Fn(d);0===a&&null!==c?null==p?Aw(u,c,x):Sc(u,c,x,p||null,!0):1===a&&null!==c?Sc(u,c,x,p||null,!0):2===a?function Rw(a,u,c){const d=wv(a,u);d&&function Ev(a,u,c,d){Jn(a)?a.removeChild(u,c,d):u.removeChild(c)}(a,d,u,c)}(u,x,E):3===a&&u.destroyNode(x),null!=v&&function nD(a,u,c,d,p){const v=c[7];v!==Fn(c)&&Il(u,a,d,v,p);for(let x=10;x<c.length;x++){const D=c[x];lg(D[1],D,a,u,d,v)}}(u,a,v,c,p)}}function Or(a,u,c){if(Jn(a))return a.createElement(u,c);{const d=null!==c?function td(a){const u=a.toLowerCase();return"svg"===u?"http://www.w3.org/2000/svg":"math"===u?"http://www.w3.org/1998/MathML/":null}(c):null;return null===d?a.createElement(u):a.createElementNS(d,u)}}function Cw(a,u){const c=a[9],d=c.indexOf(u),p=u[3];1024&u[2]&&(u[2]&=-1025,Cu(p,-1)),c.splice(d,1)}function bv(a,u){if(a.length<=10)return;const c=10+u,d=a[c];if(d){const p=d[17];null!==p&&p!==a&&Cw(p,d),u>0&&(a[c-1][4]=d[4]);const v=Ru(a,10+u);!function og(a,u){lg(a,u,u[11],2,null,null),u[0]=null,u[6]=null}(d[1],d);const E=v[19];null!==E&&E.detachView(v[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function xw(a,u){if(!(256&u[2])){const c=u[11];Jn(c)&&c.destroyNode&&lg(a,u,c,3,null,null),function Vu(a){let u=a[13];if(!u)return Tv(a[1],a);for(;u;){let c=null;if(rs(u))c=u[13];else{const d=u[10];d&&(c=d)}if(!c){for(;u&&!u[4]&&u!==a;)rs(u)&&Tv(u[1],u),u=u[3];null===u&&(u=a),rs(u)&&Tv(u[1],u),c=u&&u[4]}u=c}}(u)}}function Tv(a,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function h0(a,u){let c;if(null!=a&&null!=(c=a.destroyHooks))for(let d=0;d<c.length;d+=2){const p=u[c[d]];if(!(p instanceof Du)){const v=c[d+1];if(Array.isArray(v))for(let E=0;E<v.length;E+=2){const x=p[v[E]],D=v[E+1];try{D.call(x)}finally{}}else try{v.call(p)}finally{}}}}(a,u),function Iw(a,u){const c=a.cleanup,d=u[7];let p=-1;if(null!==c)for(let v=0;v<c.length-1;v+=2)if("string"==typeof c[v]){const E=c[v+1],x="function"==typeof E?E(u):Fn(u[E]),D=d[p=c[v+2]],U=c[v+3];"boolean"==typeof U?x.removeEventListener(c[v],D,U):U>=0?d[p=U]():d[p=-U].unsubscribe(),v+=2}else{const E=d[p=c[v+1]];c[v].call(E)}if(null!==d){for(let v=p+1;v<d.length;v++)d[v]();u[7]=null}}(a,u),1===u[1].type&&Jn(u[11])&&u[11].destroy();const c=u[17];if(null!==c&&lo(u[3])){c!==u[3]&&Cw(c,u);const d=u[19];null!==d&&d.detachView(a)}}}function JA(a,u,c){return function wc(a,u,c){let d=u;for(;null!==d&&40&d.type;)d=(u=d).parent;if(null===d)return c[0];if(2&d.flags){const p=a.data[d.directiveStart].encapsulation;if(p===Dn.None||p===Dn.Emulated)return null}return gi(d,c)}(a,u.parent,c)}function Sc(a,u,c,d,p){Jn(a)?a.insertBefore(u,c,d,p):u.insertBefore(c,d,p)}function Aw(a,u,c){Jn(a)?a.appendChild(u,c):u.appendChild(c)}function Dw(a,u,c,d,p){null!==d?Sc(a,u,c,d,p):Aw(a,u,c)}function wv(a,u){return Jn(a)?a.parentNode(u):u.parentNode}function kw(a,u,c){return Mw(a,u,c)}let Mw=function f0(a,u,c){return 40&a.type?gi(a,c):null};function yf(a,u,c,d){const p=JA(a,d,u),v=u[11],x=kw(d.parent||u[6],d,u);if(null!=p)if(Array.isArray(c))for(let D=0;D<c.length;D++)Dw(v,p,c[D],x,!1);else Dw(v,p,c,x,!1)}function Sv(a,u){if(null!==u){const c=u.type;if(3&c)return gi(u,a);if(4&c)return Cv(-1,a[u.index]);if(8&c){const d=u.child;if(null!==d)return Sv(a,d);{const p=a[u.index];return lo(p)?Cv(-1,p):Fn(p)}}if(32&c)return it(u,a)()||Fn(a[u.index]);{const d=Ow(a,u);return null!==d?Array.isArray(d)?d[0]:Sv(on(a[16]),d):Sv(a,u.next)}}return null}function Ow(a,u){return null!==u?a[16][6].projection[u.projection]:null}function Cv(a,u){const c=10+a+1;if(c<u.length){const d=u[c],p=d[1].firstChild;if(null!==p)return Sv(d,p)}return u[7]}function Nw(a,u,c,d,p,v,E){for(;null!=c;){const x=d[c.index],D=c.type;if(E&&0===u&&(x&&_i(Fn(x),d),c.flags|=4),64!=(64&c.flags))if(8&D)Nw(a,u,c.child,d,p,v,!1),Il(u,a,p,x,v);else if(32&D){const U=it(c,d);let G;for(;G=U();)Il(u,a,p,G,v);Il(u,a,p,x,v)}else 16&D?pe(a,u,d,c,p,v):Il(u,a,p,x,v);c=E?c.projectionNext:c.next}}function lg(a,u,c,d,p,v){Nw(c,d,a.firstChild,u,p,v,!1)}function pe(a,u,c,d,p,v){const E=c[16],D=E[6].projection[d.projection];if(Array.isArray(D))for(let U=0;U<D.length;U++)Il(u,a,p,D[U],v);else Nw(a,u,D,E[3],p,v,!0)}function Aa(a,u,c){Jn(a)?a.setAttribute(u,"style",c):u.style.cssText=c}function g0(a,u,c){Jn(a)?""===c?a.removeAttribute(u,"class"):a.setAttribute(u,"class",c):u.className=c}function bn(a,u,c){let d=a.length;for(;;){const p=a.indexOf(u,c);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const v=u.length;if(p+v===d||a.charCodeAt(p+v)<=32)return p}c=p+1}}const _f="ng-template";function Mt(a,u,c){let d=0;for(;d<a.length;){let p=a[d++];if(c&&"class"===p){if(p=a[d],-1!==bn(p.toLowerCase(),u,0))return!0}else if(1===p){for(;d<a.length&&"string"==typeof(p=a[d++]);)if(p.toLowerCase()===u)return!0;return!1}}return!1}function Lw(a){return 4===a.type&&a.value!==_f}function rD(a,u,c){return u===(4!==a.type||c?a.value:_f)}function iD(a,u,c){let d=4;const p=a.attrs||[],v=function xv(a){for(let u=0;u<a.length;u++)if(ms(a[u]))return u;return a.length}(p);let E=!1;for(let x=0;x<u.length;x++){const D=u[x];if("number"!=typeof D){if(!E)if(4&d){if(d=2|1&d,""!==D&&!rD(a,D,c)||""===D&&1===u.length){if(Da(d))return!1;E=!0}}else{const U=8&d?D:u[++x];if(8&d&&null!==a.attrs){if(!Mt(a.attrs,U,c)){if(Da(d))return!1;E=!0}continue}const te=sD(8&d?"class":D,p,Lw(a),c);if(-1===te){if(Da(d))return!1;E=!0;continue}if(""!==U){let Te;Te=te>v?"":p[te+1].toLowerCase();const Ge=8&d?Te:null;if(Ge&&-1!==bn(Ge,U,0)||2&d&&U!==Te){if(Da(d))return!1;E=!0}}}}else{if(!E&&!Da(d)&&!Da(D))return!1;if(E&&Da(D))continue;E=!1,d=D|1&d}}return Da(d)||E}function Da(a){return 0==(1&a)}function sD(a,u,c,d){if(null===u)return-1;let p=0;if(d||!c){let v=!1;for(;p<u.length;){const E=u[p];if(E===a)return p;if(3===E||6===E)v=!0;else{if(1===E||2===E){let x=u[++p];for(;"string"==typeof x;)x=u[++p];continue}if(4===E)break;if(0===E){p+=4;continue}}p+=v?1:2}return-1}return function aD(a,u){let c=a.indexOf(4);if(c>-1)for(c++;c<a.length;){const d=a[c];if("number"==typeof d)return-1;if(d===u)return c;c++}return-1}(u,a)}function m0(a,u,c=!1){for(let d=0;d<u.length;d++)if(iD(a,u[d],c))return!0;return!1}function uD(a,u){e:for(let c=0;c<u.length;c++){const d=u[c];if(a.length===d.length){for(let p=0;p<a.length;p++)if(a[p]!==d[p])continue e;return!0}}return!1}function v0(a,u){return a?":not("+u.trim()+")":u}function Fw(a){let u=a[0],c=1,d=2,p="",v=!1;for(;c<a.length;){let E=a[c];if("string"==typeof E)if(2&d){const x=a[++c];p+="["+E+(x.length>0?'="'+x+'"':"")+"]"}else 8&d?p+="."+E:4&d&&(p+=" "+E);else""!==p&&!Da(E)&&(u+=v0(v,p),p=""),d=E,v=v||!Da(d);c++}return""!==p&&(u+=v0(v,p)),u}const _n={};function jw(a){y0(kn(),mt(),ai()+a,!1)}function y0(a,u,c,d){if(!d)if(3==(3&u[2])){const v=a.preOrderCheckHooks;null!==v&&jo(u,v,c)}else{const v=a.preOrderHooks;null!==v&&Wa(u,v,0,c)}za(c)}function Av(a,u){return a<<17|u<<2}function Ko(a){return a>>17&32767}function _0(a){return 2|a}function Al(a){return(131068&a)>>2}function Cc(a,u){return-131069&a|u<<2}function b0(a){return 1|a}function A0(a,u){const c=a.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const p=c[d],v=c[d+1];if(-1!==v){const E=a.data[v];Rh(p),E.contentQueries(2,u[v],v)}}}function dg(a,u,c,d,p,v,E,x,D,U){const G=u.blueprint.slice();return G[0]=p,G[2]=140|d,mo(G),G[3]=G[15]=a,G[8]=c,G[10]=E||a&&a[10],G[11]=x||a&&a[11],G[12]=D||a&&a[12]||null,G[9]=U||a&&a[9]||null,G[6]=v,G[16]=2==u.type?a[16]:G,G}function Dl(a,u,c,d,p){let v=a.data[u];if(null===v)v=function Ov(a,u,c,d,p){const v=Xl(),E=ad(),D=a.data[u]=function TD(a,u,c,d,p,v){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?v:v&&v.parent,c,u,d,p);return null===a.firstChild&&(a.firstChild=D),null!==v&&(E?null==v.child&&null!==D.parent&&(v.child=D):null===v.next&&(v.next=D)),D}(a,u,c,d,p),function cd(){return dn.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=c,v.value=d,v.attrs=p;const E=function $a(){const a=dn.lFrame,u=a.currentTNode;return a.isParent?u:u.parent}();v.injectorIndex=null===E?-1:E.injectorIndex}return ps(v,!0),v}function Tf(a,u,c,d){if(0===c)return-1;const p=u.length;for(let v=0;v<c;v++)u.push(d),a.blueprint.push(d),a.data.push(null);return p}function jd(a,u,c){qa(u);try{const d=a.viewQuery;null!==d&&B0(1,d,c);const p=a.template;null!==p&&Sf(a,u,p,1,c),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&A0(a,u),a.staticViewQueries&&B0(2,a.viewQuery,c);const v=a.components;null!==v&&function Kw(a,u){for(let c=0;c<u.length;c++)RD(a,u[c])}(u,v)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{u[2]&=-5,is()}}function Ef(a,u,c,d){const p=u[2];if(256!=(256&p)){qa(u);try{mo(u),function Jl(a){return dn.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==c&&Sf(a,u,c,2,d);const E=3==(3&p);if(E){const U=a.preOrderCheckHooks;null!==U&&jo(u,U,null)}else{const U=a.preOrderHooks;null!==U&&Wa(u,U,0,null),Xr(u,0)}if(function di(a){for(let u=Ts(a);null!==u;u=Tc(u)){if(!u[2])continue;const c=u[9];for(let d=0;d<c.length;d++){const p=c[d],v=p[3];0==(1024&p[2])&&Cu(v,1),p[2]|=1024}}}(u),function OD(a){for(let u=Ts(a);null!==u;u=Tc(u))for(let c=10;c<u.length;c++){const d=u[c],p=d[1];Lo(d)&&Ef(p,d,p.template,d[8])}}(u),null!==a.contentQueries&&A0(a,u),E){const U=a.contentCheckHooks;null!==U&&jo(u,U)}else{const U=a.contentHooks;null!==U&&Wa(u,U,1),Xr(u,1)}!function eN(a,u){const c=a.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const p=c[d];if(p<0)za(~p);else{const v=p,E=c[++d],x=c[++d];tc(E,v),x(2,u[v])}}}finally{za(-1)}}(a,u);const x=a.components;null!==x&&function $s(a,u){for(let c=0;c<u.length;c++)F0(a,u[c])}(u,x);const D=a.viewQuery;if(null!==D&&B0(2,D,d),E){const U=a.viewCheckHooks;null!==U&&jo(u,U)}else{const U=a.viewHooks;null!==U&&Wa(u,U,2),Xr(u,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),u[2]&=-73,1024&u[2]&&(u[2]&=-1025,Cu(u[3],-1))}finally{is()}}}function wf(a,u,c,d){const p=u[10],E=Ga(u);try{!E&&p.begin&&p.begin(),E&&jd(a,u,d),Ef(a,u,c,d)}finally{!E&&p.end&&p.end()}}function Sf(a,u,c,d,p){const v=ai(),E=2&d;try{za(-1),E&&u.length>20&&y0(a,u,20,!1),c(d,p)}finally{za(v)}}function Zw(a,u,c){if(Wl(u)){const p=u.directiveEnd;for(let v=u.directiveStart;v<p;v++){const E=a.data[v];E.contentQueries&&E.contentQueries(1,c[v],v)}}}function Rv(a,u,c){!Ql()||(function CD(a,u,c,d){const p=c.directiveStart,v=c.directiveEnd;a.firstCreatePass||ba(c,u),_i(d,u);const E=c.initialInputs;for(let x=p;x<v;x++){const D=a.data[x],U=ho(D);U&&kD(u,c,D);const G=Bo(u,a,x,c);_i(G,u),null!==E&&MD(0,x-p,G,D,0,E),U&&(mi(c.index,u)[8]=G)}}(a,u,c,gi(c,u)),128==(128&c.flags)&&function xD(a,u,c){const d=c.directiveStart,p=c.directiveEnd,E=c.index,x=function dd(){return dn.lFrame.currentDirectiveIndex}();try{za(E);for(let D=d;D<p;D++){const U=a.data[D],G=u[D];fl(D),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&rS(U,G)}}finally{za(-1),fl(x)}}(a,u,c))}function D0(a,u,c=gi){const d=u.localNames;if(null!==d){let p=u.index+1;for(let v=0;v<d.length;v+=2){const E=d[v+1],x=-1===E?c(u,a):a[E];a[p++]=x}}}function Yw(a){const u=a.tView;return null===u||u.incompleteFirstPass?a.tView=Cf(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):u}function Cf(a,u,c,d,p,v,E,x,D,U){const G=20+d,te=G+p,Te=function Qw(a,u){const c=[];for(let d=0;d<u;d++)c.push(d<a?null:_n);return c}(G,te),Ge="function"==typeof U?U():U;return Te[1]={type:a,blueprint:Te,template:c,queries:null,viewQuery:x,declTNode:u,data:Te.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:D,consts:Ge,incompleteFirstPass:!1}}function k0(a,u,c,d){const p=V0(u);null===c?p.push(d):(p.push(c),a.firstCreatePass&&uS(a).push(d,p.length-1))}function M0(a,u,c){for(let d in a)if(a.hasOwnProperty(d)){const p=a[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(u,p):c[d]=[u,p]}return c}function O0(a,u,c,d){let p=!1;if(Ql()){const v=function ID(a,u,c){const d=a.directiveRegistry;let p=null;if(d)for(let v=0;v<d.length;v++){const E=d[v];m0(c,E.selectors,!1)&&(p||(p=[]),Qa(ba(c,u),a,E.type),ho(E)?(R0(a,c),p.unshift(E)):p.push(E))}return p}(a,u,c),E=null===d?null:{"":-1};if(null!==v){p=!0,N0(c,a.data.length,v.length);for(let G=0;G<v.length;G++){const te=v[G];te.providersResolver&&te.providersResolver(te)}let x=!1,D=!1,U=Tf(a,u,v.length,null);for(let G=0;G<v.length;G++){const te=v[G];c.mergedAttrs=vl(c.mergedAttrs,te.hostAttrs),iS(a,c,u,U,te),DD(U,te,E),null!==te.contentQueries&&(c.flags|=8),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(c.flags|=128);const Te=te.type.prototype;!x&&(Te.ngOnChanges||Te.ngOnInit||Te.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(c.index),x=!0),!D&&(Te.ngOnChanges||Te.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c.index),D=!0),U++}!function Jw(a,u){const d=u.directiveEnd,p=a.data,v=u.attrs,E=[];let x=null,D=null;for(let U=u.directiveStart;U<d;U++){const G=p[U],te=G.inputs,Te=null===v||Lw(u)?null:PD(te,v);E.push(Te),x=M0(te,U,x),D=M0(G.outputs,U,D)}null!==x&&(x.hasOwnProperty("class")&&(u.flags|=16),x.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=E,u.inputs=x,u.outputs=D}(a,c)}E&&function AD(a,u,c){if(u){const d=a.localNames=[];for(let p=0;p<u.length;p+=2){const v=c[u[p+1]];if(null==v)throw new Je(-301,!1);d.push(u[p],v)}}}(c,d,E)}return c.mergedAttrs=vl(c.mergedAttrs,c.attrs),p}function nS(a,u,c,d,p,v){const E=v.hostBindings;if(E){let x=a.hostBindingOpCodes;null===x&&(x=a.hostBindingOpCodes=[]);const D=~u.index;(function SD(a){let u=a.length;for(;u>0;){const c=a[--u];if("number"==typeof c&&c<0)return c}return 0})(x)!=D&&x.push(D),x.push(d,p,E)}}function rS(a,u){null!==a.hostBindings&&a.hostBindings(1,u)}function R0(a,u){u.flags|=2,(a.components||(a.components=[])).push(u.index)}function DD(a,u,c){if(c){if(u.exportAs)for(let d=0;d<u.exportAs.length;d++)c[u.exportAs[d]]=a;ho(u)&&(c[""]=a)}}function N0(a,u,c){a.flags|=1,a.directiveStart=u,a.directiveEnd=u+c,a.providerIndexes=u}function iS(a,u,c,d,p){a.data[d]=p;const v=p.factory||(p.factory=pi(p.type)),E=new Du(v,ho(p),null);a.blueprint[d]=E,c[d]=E,nS(a,u,0,d,Tf(a,c,p.hostVars,_n),p)}function kD(a,u,c){const d=gi(u,a),p=Yw(c),v=a[10],E=Mi(a,dg(a,p,null,c.onPush?64:16,d,u,v,v.createRenderer(d,c),null,null));a[u.index]=E}function uu(a,u,c,d,p,v){const E=gi(a,u);!function L0(a,u,c,d,p,v,E){if(null==v)Jn(a)?a.removeAttribute(u,p,c):u.removeAttribute(p);else{const x=null==E?Ee(v):E(v,d||"",p);Jn(a)?a.setAttribute(u,p,x,c):c?u.setAttributeNS(c,p,x):u.setAttribute(p,x)}}(u[11],E,v,a.value,c,d,p)}function MD(a,u,c,d,p,v){const E=v[u];if(null!==E){const x=d.setInput;for(let D=0;D<E.length;){const U=E[D++],G=E[D++],te=E[D++];null!==x?d.setInput(c,te,U,G):c[G]=te}}}function PD(a,u){let c=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;a.hasOwnProperty(p)&&(null===c&&(c=[]),c.push(p,a[p],u[d+1])),d+=2}else d+=2;else d+=4}return c}function sS(a,u,c,d){return new Array(a,!0,!1,u,null,0,d,c,null,null)}function F0(a,u){const c=mi(u,a);if(Lo(c)){const d=c[1];80&c[2]?Ef(d,c,d.template,c[8]):c[5]>0&&xc(c)}}function xc(a){for(let d=Ts(a);null!==d;d=Tc(d))for(let p=10;p<d.length;p++){const v=d[p];if(1024&v[2]){const E=v[1];Ef(E,v,E.template,v[8])}else v[5]>0&&xc(v)}const c=a[1].components;if(null!==c)for(let d=0;d<c.length;d++){const p=mi(c[d],a);Lo(p)&&p[5]>0&&xc(p)}}function RD(a,u){const c=mi(u,a),d=c[1];(function oS(a,u){for(let c=u.length;c<a.blueprint.length;c++)u.push(a.blueprint[c])})(d,c),jd(d,c,c[8])}function Mi(a,u){return a[13]?a[14][4]=u:a[13]=u,a[14]=u,u}function j0(a){for(;a;){a[2]|=64;const u=on(a);if(Qc(a)&&!u)return a;a=u}return null}function aS(a){!function hg(a){for(let u=0;u<a.components.length;u++){const c=a.components[u],d=Jp(c),p=d[1];wf(p,d,p.template,c)}}(a[8])}function B0(a,u,c){Rh(0),u(a,c)}const ND=(()=>Promise.resolve(null))();function V0(a){return a[7]||(a[7]=[])}function uS(a){return a.cleanup||(a.cleanup=[])}function lS(a,u){const c=a[9],d=c?c.get(mf,null):null;d&&d.handleError(u)}function cS(a,u,c,d,p){for(let v=0;v<c.length;){const E=c[v++],x=c[v++],D=u[E],U=a.data[E];null!==U.setInput?U.setInput(D,p,d,x):D[x]=p}}function kl(a,u,c){const d=ga(u,a);!function vf(a,u,c){Jn(a)?a.setValue(u,c):u.textContent=c}(a[11],d,c)}function jv(a,u,c){let d=c?a.styles:null,p=c?a.classes:null,v=0;if(null!==u)for(let E=0;E<u.length;E++){const x=u[E];"number"==typeof x?v=x:1==v?p=ve(p,x):2==v&&(d=ve(d,x+": "+u[++E]+";"))}c?a.styles=d:a.stylesWithoutHost=d,c?a.classes=p:a.classesWithoutHost=p}const dS=new wr("INJECTOR",-1);class UD{get(u,c=Ca){if(c===Ca){const d=new Error(`NullInjectorError: No provider for ${fe(u)}!`);throw d.name="NullInjectorError",d}return c}}const hS=new wr("Set Injector scope."),Bv={},uN={};let fS;function Vv(){return void 0===fS&&(fS=new UD),fS}function pS(a,u=null,c=null,d){const p=Hv(a,u,c,d);return p._resolveInjectorDefTypes(),p}function Hv(a,u=null,c=null,d){return new H0(a,c,u||Vv(),d)}class H0{constructor(u,c,d,p=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const v=[];c&&Bi(c,x=>this.processProvider(x,u,c)),Bi([u],x=>this.processInjectorType(x,[],v)),this.records.set(dS,If(void 0,this));const E=this.records.get(hS);this.scope=null!=E?E.value:null,this.source=p||("object"==typeof u?null:fe(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,c=Ca,d=Vt.Default){this.assertNotDestroyed();const p=at(this),v=zn(void 0);try{if(!(d&Vt.SkipSelf)){let x=this.records.get(u);if(void 0===x){const D=function HD(a){return"function"==typeof a||"object"==typeof a&&a instanceof wr}(u)&&Qt(u);x=D&&this.injectableDefInScope(D)?If(ws(u),Bv):null,this.records.set(u,x)}if(null!=x)return this.hydrate(u,x)}return(d&Vt.Self?Vv():this.parent).get(u,c=d&Vt.Optional&&c===Ca?null:c)}catch(E){if("NullInjectorError"===E.name){if((E[El]=E[El]||[]).unshift(fe(u)),p)throw E;return function qo(a,u,c,d){const p=a[El];throw u[le]&&p.unshift(u[le]),a.message=function Eo(a,u,c,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let p=fe(u);if(Array.isArray(u))p=u.map(fe).join(" -> ");else if("object"==typeof u){let v=[];for(let E in u)if(u.hasOwnProperty(E)){let x=u[E];v.push(E+":"+("string"==typeof x?JSON.stringify(x):fe(x)))}p=`{${v.join(", ")}}`}return`${c}${d?"("+d+")":""}[${p}]: ${a.replace(O,"\n  ")}`}("\n"+a.message,p,c,d),a.ngTokenPath=p,a[El]=null,a}(E,u,"R3InjectorError",this.source)}throw E}finally{zn(v),at(p)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((d,p)=>u.push(fe(p))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processInjectorType(u,c,d){if(!(u=re(u)))return!1;let p=ar(u);const v=null==p&&u.ngModule||void 0,E=void 0===v?u:v,x=-1!==d.indexOf(E);if(void 0!==v&&(p=ar(v)),null==p)return!1;if(null!=p.imports&&!x){let G;d.push(E);try{Bi(p.imports,te=>{this.processInjectorType(te,c,d)&&(void 0===G&&(G=[]),G.push(te))})}finally{}if(void 0!==G)for(let te=0;te<G.length;te++){const{ngModule:Te,providers:Ge}=G[te];Bi(Ge,ct=>this.processProvider(ct,Te,Ge||ge))}}this.injectorDefTypes.add(E);const D=pi(E)||(()=>new E);this.records.set(E,If(D,Bv));const U=p.providers;if(null!=U&&!x){const G=u;Bi(U,te=>this.processProvider(te,G,U))}return void 0!==v&&void 0!==u.providers}processProvider(u,c,d){let p=Ic(u=re(u))?u:re(u&&u.provide);const v=function fg(a,u,c){return BD(a)?If(void 0,a.useValue):If(gS(a),Bv)}(u);if(Ic(u)||!0!==u.multi)this.records.get(p);else{let E=this.records.get(p);E||(E=If(void 0,Bv,!0),E.factory=()=>pn(E.multi),this.records.set(p,E)),p=u,E.multi.push(u)}this.records.set(p,v)}hydrate(u,c){return c.value===Bv&&(c.value=uN,c.value=c.factory()),"object"==typeof c.value&&c.value&&function mS(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(u){if(!u.providedIn)return!1;const c=re(u.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function ws(a){const u=Qt(a),c=null!==u?u.factory:pi(a);if(null!==c)return c;if(a instanceof wr)throw new Je(204,!1);if(a instanceof Function)return function xf(a){const u=a.length;if(u>0)throw Ho(u,"?"),new Je(204,!1);const c=function Vn(a){const u=a&&(a[Ln]||a[On]);if(u){const c=function Zn(a){if(a.hasOwnProperty("name"))return a.name;const u=(""+a).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),u}return null}(a);return null!==c?()=>c.factory(a):()=>new a}(a);throw new Je(204,!1)}function gS(a,u,c){let d;if(Ic(a)){const p=re(a);return pi(p)||ws(p)}if(BD(a))d=()=>re(a.useValue);else if(function Sr(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...pn(a.deps||[]));else if(function lN(a){return!(!a||!a.useExisting)}(a))d=()=>Yt(re(a.useExisting));else{const p=re(a&&(a.useClass||a.provide));if(!function Ud(a){return!!a.deps}(a))return pi(p)||ws(p);d=()=>new p(...pn(a.deps))}return d}function If(a,u,c=!1){return{factory:a,value:u,multi:c?[]:void 0}}function BD(a){return null!==a&&"object"==typeof a&&Ue in a}function Ic(a){return"function"==typeof a}let Hu=(()=>{class a{static create(c,d){var p;if(Array.isArray(c))return pS({name:""},d,c,"");{const v=null!==(p=c.name)&&void 0!==p?p:"";return pS({name:v},c.parent,c.providers,v)}}}return a.THROW_IF_NOT_FOUND=Ca,a.NULL=new UD,a.\u0275prov=St({token:a,providedIn:"any",factory:()=>Yt(dS)}),a.__NG_ELEMENT_ID__=-1,a})();function wS(a,u){pl(Jp(a)[1],dr())}function Df(a){let u=function yg(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),c=!0;const d=[a];for(;u;){let p;if(ho(a))p=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Je(903,"");p=u.\u0275dir}if(p){if(c){d.push(p);const E=a;E.inputs=q0(a.inputs),E.declaredInputs=q0(a.declaredInputs),E.outputs=q0(a.outputs);const x=p.hostBindings;x&&CS(a,x);const D=p.viewQuery,U=p.contentQueries;if(D&&SS(a,D),U&&Pn(a,U),me(a.inputs,p.inputs),me(a.declaredInputs,p.declaredInputs),me(a.outputs,p.outputs),ho(p)&&p.data.animation){const G=a.data;G.animation=(G.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let E=0;E<v.length;E++){const x=v[E];x&&x.ngInherit&&x(a),x===Df&&(c=!1)}}u=Object.getPrototypeOf(u)}!function Co(a){let u=0,c=null;for(let d=a.length-1;d>=0;d--){const p=a[d];p.hostVars=u+=p.hostVars,p.hostAttrs=vl(p.hostAttrs,c=vl(c,p.hostAttrs))}}(d)}function q0(a){return a===Qr?{}:a===ge?[]:a}function SS(a,u){const c=a.viewQuery;a.viewQuery=c?(d,p)=>{u(d,p),c(d,p)}:u}function Pn(a,u){const c=a.contentQueries;a.contentQueries=c?(d,p,v)=>{u(d,p,v),c(d,p,v)}:u}function CS(a,u){const c=a.hostBindings;a.hostBindings=c?(d,p)=>{u(d,p),c(d,p)}:u}let $v=null;function hr(){if(!$v){const a=Sn.Symbol;if(a&&a.iterator)$v=a.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<u.length;++c){const d=u[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&($v=d)}}}return $v}function Pl(a){return!!qv(a)&&(Array.isArray(a)||!(a instanceof Map)&&hr()in a)}function qv(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Gu(a,u,c){return a[u]=c}function Ss(a,u,c){return!Object.is(a[u],c)&&(a[u]=c,!0)}function zs(a,u,c,d){const p=Ss(a,u,c);return Ss(a,u+1,d)||p}function zv(a,u,c,d){const p=mt();return Ss(p,va(),u)&&(kn(),uu(Br(),p,a,u,c,d)),zv}function Bd(a,u,c,d,p,v){const x=zs(a,function gs(){return dn.lFrame.bindingIndex}(),c,p);return Bs(2),x?u+Ee(c)+d+Ee(p)+v:_n}function Nn(a,u,c,d,p,v,E,x){const D=mt(),U=kn(),G=a+20,te=U.firstCreatePass?function DS(a,u,c,d,p,v,E,x,D){const U=u.consts,G=Dl(u,a,4,E||null,Us(U,x));O0(u,c,G,Us(U,D)),pl(u,G);const te=G.tViews=Cf(2,G,d,p,v,u.directiveRegistry,u.pipeRegistry,null,u.schemas,U);return null!==u.queries&&(u.queries.template(u,G),te.queries=u.queries.embeddedTView(G)),G}(G,U,D,u,c,d,p,v,E):U.data[G];ps(te,!1);const Te=D[11].createComment("");yf(U,D,Te,te),_i(Te,D),Mi(D,D[G]=sS(Te,D,Te,te)),co(te)&&Rv(U,D,te),null!=E&&D0(D,te,x)}function Wv(a){return go(function Oh(){return dn.lFrame.contextLView}(),20+a)}function bi(a,u=Vt.Default){const c=mt();return null===c?Yt(a,u):Pu(dr(),c,re(a),u)}function qd(){throw new Error("invalid")}function Nf(a,u,c){const d=mt();return Ss(d,va(),u)&&function Zo(a,u,c,d,p,v,E,x){const D=gi(u,c);let G,U=u.inputs;!x&&null!=U&&(G=U[d])?(cS(a,c,G,d,p),Th(u)&&function Lv(a,u){const c=mi(u,a);16&c[2]||(c[2]|=64)}(c,u.index)):3&u.type&&(d=function ED(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),p=null!=E?E(p,u.value||"",d):p,Jn(v)?v.setProperty(D,d,p):Ar(d)||(D.setProperty?D.setProperty(d,p):D[d]=p))}(kn(),Br(),d,a,u,d[11],c,!1),Nf}function ey(a,u,c,d,p){const E=p?"class":"style";cS(a,c,u.inputs[E],E,d)}function Io(a,u,c,d){const p=mt(),v=kn(),E=20+a,x=p[11],D=p[E]=Or(x,u,function Km(){return dn.lFrame.currentNamespace}()),U=v.firstCreatePass?function n1(a,u,c,d,p,v,E){const x=u.consts,U=Dl(u,a,2,p,Us(x,v));return O0(u,c,U,Us(x,E)),null!==U.attrs&&jv(U,U.attrs,!1),null!==U.mergedAttrs&&jv(U,U.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,U),U}(E,v,p,0,u,c,d):v.data[E];ps(U,!0);const G=U.mergedAttrs;null!==G&&Ui(x,D,G);const te=U.classes;null!==te&&g0(x,D,te);const Te=U.styles;return null!==Te&&Aa(x,D,Te),64!=(64&U.flags)&&yf(v,p,D,U),0===function hl(){return dn.lFrame.elementDepthCount}()&&_i(D,p),function sd(){dn.lFrame.elementDepthCount++}(),co(U)&&(Rv(v,p,U),Zw(v,U,p)),null!==d&&D0(p,U),Io}function ir(){let a=dr();ad()?ud():(a=a.parent,ps(a,!1));const u=a;!function Yl(){dn.lFrame.elementDepthCount--}();const c=kn();return c.firstCreatePass&&(pl(c,a),Wl(a)&&c.queries.elementEnd(a)),null!=u.classesWithoutHost&&function Ym(a){return 0!=(16&a.flags)}(u)&&ey(c,u,mt(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function jn(a){return 0!=(32&a.flags)}(u)&&ey(c,u,mt(),u.stylesWithoutHost,!1),ir}function cu(a,u,c,d){return Io(a,u,c,d),ir(),cu}function Rc(a,u,c){const d=mt(),p=kn(),v=a+20,E=p.firstCreatePass?function Gi(a,u,c,d,p){const v=u.consts,E=Us(v,d),x=Dl(u,a,8,"ng-container",E);return null!==E&&jv(x,E,!0),O0(u,c,x,Us(v,p)),null!==u.queries&&u.queries.elementStart(u,x),x}(v,p,d,u,c):p.data[v];ps(E,!0);const x=d[v]=d[11].createComment("");return yf(p,d,x,E),_i(x,d),co(E)&&(Rv(p,d,E),Zw(p,E,d)),null!=c&&D0(d,E),Rc}function zd(){let a=dr();const u=kn();return ad()?ud():(a=a.parent,ps(a,!1)),u.firstCreatePass&&(pl(u,a),Wl(a)&&u.queries.elementEnd(a)),zd}function US(){return mt()}function Sg(a){return!!a&&"function"==typeof a.then}function Cg(a){return!!a&&"function"==typeof a.subscribe}const ib=Cg;function ty(a,u,c,d){const p=mt(),v=kn(),E=dr();return function BS(a,u,c,d,p,v,E,x){const D=co(d),G=a.firstCreatePass&&uS(a),te=u[8],Te=V0(u);let Ge=!0;if(3&d.type||x){const Ot=gi(d,u),qt=x?x(Ot):Ot,vt=Te.length,ln=x?In=>x(Fn(In[d.index])):d.index;if(Jn(c)){let In=null;if(!x&&D&&(In=function Wd(a,u,c,d){const p=a.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const E=p[v];if(E===c&&p[v+1]===d){const x=u[7],D=p[v+2];return x.length>D?x[D]:null}"string"==typeof E&&(v+=2)}return null}(a,u,p,d.index)),null!==In)(In.__ngLastListenerFn__||In).__ngNextListenerFn__=v,In.__ngLastListenerFn__=v,Ge=!1;else{v=sb(d,u,te,v,!1);const Kn=c.listen(qt,p,v);Te.push(v,Kn),G&&G.push(p,ln,vt,vt+1)}}else v=sb(d,u,te,v,!0),qt.addEventListener(p,v,E),Te.push(v),G&&G.push(p,ln,vt,E)}else v=sb(d,u,te,v,!1);const ct=d.outputs;let Ct;if(Ge&&null!==ct&&(Ct=ct[p])){const Ot=Ct.length;if(Ot)for(let qt=0;qt<Ot;qt+=2){const Ys=u[Ct[qt]][Ct[qt+1]].subscribe(v),Bc=Te.length;Te.push(v,Ys),G&&G.push(p,d.index,Bc,-(Bc+1))}}}(v,p,p[11],E,a,u,!!c,d),ty}function ry(a,u,c,d){try{return!1!==c(d)}catch(p){return lS(a,p),!1}}function sb(a,u,c,d,p){return function v(E){if(E===Function)return d;const x=2&a.flags?mi(a.index,u):u;0==(32&u[2])&&j0(x);let D=ry(u,0,d,E),U=v.__ngNextListenerFn__;for(;U;)D=ry(u,0,U,E)&&D,U=U.__ngNextListenerFn__;return p&&!1===D&&(E.preventDefault(),E.returnValue=!1),D}}function ob(a=1){return function Fp(a){return(dn.lFrame.contextLView=function hd(a,u){for(;a>0;)u=u[15],a--;return u}(a,dn.lFrame.contextLView))[8]}(a)}function iy(a,u){let c=null;const d=function oD(a){const u=a.attrs;if(null!=u){const c=u.indexOf(5);if(0==(1&c))return u[c+1]}return null}(a);for(let p=0;p<u.length;p++){const v=u[p];if("*"!==v){if(null===d?m0(a,v,!0):uD(d,v))return p}else c=p}return c}function ti(a){const u=mt()[16][6];if(!u.projection){const d=u.projection=Ho(a?a.length:1,null),p=d.slice();let v=u.child;for(;null!==v;){const E=a?iy(v,a):0;null!==E&&(p[E]?p[E].projectionNext=v:d[E]=v,p[E]=v),v=v.next}}}function VS(a,u=0,c){const d=mt(),p=kn(),v=Dl(p,20+a,16,null,c||null);null===v.projection&&(v.projection=u),ud(),64!=(64&v.flags)&&function tD(a,u,c){pe(u[11],0,u,c,JA(a,c,u),kw(c.parent||u[6],c,u))}(p,d,v)}function Ff(a,u,c,d,p){const v=a[c+1],E=null===u;let x=d?Ko(v):Al(v),D=!1;for(;0!==x&&(!1===D||E);){const G=a[x+1];Ku(a[x],u)&&(D=!0,a[x+1]=d?b0(G):_0(G)),x=d?Ko(G):Al(G)}D&&(a[c+1]=d?_0(v):b0(v))}function Ku(a,u){return null===a||null==u||(Array.isArray(a)?a[1]:a)===u||!(!Array.isArray(a)||"string"!=typeof u)&&Fu(a,u)>=0}function cb(a,u){return function Oa(a,u,c,d){const p=mt(),v=kn(),E=Bs(2);v.firstUpdatePass&&function JS(a,u,c,d){const p=a.data;if(null===p[c+1]){const v=p[ai()],E=function xg(a,u){return u>=a.expandoStartIndex}(a,c);(function rC(a,u){return 0!=(a.flags&(u?16:32))})(v,d)&&null===u&&!E&&(u=!1),u=function eC(a,u,c,d){const p=function nc(a){const u=dn.lFrame.currentDirectiveIndex;return-1===u?null:a[u]}(a);let v=d?u.residualClasses:u.residualStyles;if(null===p)0===(d?u.classBindings:u.styleBindings)&&(c=Uf(c=uy(null,a,u,c,d),u.attrs,d),v=null);else{const E=u.directiveStylingLast;if(-1===E||a[E]!==p)if(c=uy(p,a,u,c,d),null===v){let D=function tC(a,u,c){const d=c?u.classBindings:u.styleBindings;if(0!==Al(d))return a[Ko(d)]}(a,u,d);void 0!==D&&Array.isArray(D)&&(D=uy(null,a,u,D[1],d),D=Uf(D,u.attrs,d),function Ig(a,u,c,d){a[Ko(c?u.classBindings:u.styleBindings)]=d}(a,u,d,D))}else v=function nC(a,u,c){let d;const p=u.directiveEnd;for(let v=1+u.directiveStylingLast;v<p;v++)d=Uf(d,a[v].hostAttrs,c);return Uf(d,u.attrs,c)}(a,u,d)}return void 0!==v&&(d?u.residualClasses=v:u.residualStyles=v),c}(p,v,u,d),function Ks(a,u,c,d,p,v){let E=v?u.classBindings:u.styleBindings,x=Ko(E),D=Al(E);a[d]=c;let G,U=!1;if(Array.isArray(c)){const te=c;G=te[1],(null===G||Fu(te,G)>0)&&(U=!0)}else G=c;if(p)if(0!==D){const Te=Ko(a[x+1]);a[d+1]=Av(Te,x),0!==Te&&(a[Te+1]=Cc(a[Te+1],d)),a[x+1]=function au(a,u){return 131071&a|u<<17}(a[x+1],d)}else a[d+1]=Av(x,0),0!==x&&(a[x+1]=Cc(a[x+1],d)),x=d;else a[d+1]=Av(D,0),0===x?x=d:a[D+1]=Cc(a[D+1],d),D=d;U&&(a[d+1]=_0(a[d+1])),Ff(a,G,d,!0),Ff(a,G,d,!1),function Lf(a,u,c,d,p){const v=p?a.residualClasses:a.residualStyles;null!=v&&"string"==typeof u&&Fu(v,u)>=0&&(c[d+1]=b0(c[d+1]))}(u,G,a,d,v),E=Av(x,D),v?u.classBindings=E:u.styleBindings=E}(p,v,u,c,E,d)}}(v,a,E,d),u!==_n&&Ss(p,E,u)&&function Zd(a,u,c,d,p,v,E,x){if(!(3&u.type))return;const D=a.data,U=D[x+1];Nl(function Dv(a){return 1==(1&a)}(U)?Jo(D,u,c,p,Al(U),E):void 0)||(Nl(v)||function Bw(a){return 2==(2&a)}(U)&&(v=Jo(D,null,c,p,x,E)),function Dt(a,u,c,d,p){const v=Jn(a);if(u)p?v?a.addClass(c,d):c.classList.add(d):v?a.removeClass(c,d):c.classList.remove(d);else{let E=-1===d.indexOf("-")?void 0:Z.DashCase;if(null==p)v?a.removeStyle(c,d,E):c.style.removeProperty(d);else{const x="string"==typeof p&&p.endsWith("!important");x&&(p=p.slice(0,-10),E|=Z.Important),v?a.setStyle(c,d,p,E):c.style.setProperty(d,p,x?"important":"")}}}(d,E,ga(ai(),c),p,v))}(v,v.data[ai()],p,p[11],a,p[E+1]=function Zs(a,u){return null==a||("string"==typeof u?a+=u:"object"==typeof a&&(a=fe(_s(a)))),a}(u,c),d,E)}(a,u,null,!0),cb}function uy(a,u,c,d,p){let v=null;const E=c.directiveEnd;let x=c.directiveStylingLast;for(-1===x?x=c.directiveStart:x++;x<E&&(v=u[x],d=Uf(d,v.hostAttrs,p),v!==a);)x++;return null!==a&&(c.directiveStylingLast=x),d}function Uf(a,u,c){const d=c?1:2;let p=-1;if(null!==u)for(let v=0;v<u.length;v++){const E=u[v];"number"==typeof E?p=E:p===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Di(a,E,!!c||u[++v]))}return void 0===a?null:a}function Jo(a,u,c,d,p,v){const E=null===u;let x;for(;p>0;){const D=a[p],U=Array.isArray(D),G=U?D[1]:D,te=null===G;let Te=c[p+1];Te===_n&&(Te=te?ge:void 0);let Ge=te?Tl(Te,d):G===d?Te:void 0;if(U&&!Nl(Ge)&&(Ge=Tl(D,d)),Nl(Ge)&&(x=Ge,E))return x;const ct=a[p+1];p=E?Ko(ct):Al(ct)}if(null!==u){let D=v?u.residualClasses:u.residualStyles;null!=D&&(x=Tl(D,d))}return x}function Nl(a){return void 0!==a}function sr(a,u=""){const c=mt(),d=kn(),p=a+20,v=d.firstCreatePass?Dl(d,p,1,u,null):d.data[p],E=c[p]=function Rd(a,u){return Jn(a)?a.createText(u):a.createTextNode(u)}(c[11],u);yf(d,c,E,v),ps(v,!1)}function Ll(a){return Bf("",a,""),Ll}function Bf(a,u,c){const d=mt(),p=function xo(a,u,c,d){return Ss(a,va(),c)?u+Ee(c)+d:_n}(d,a,u,c);return p!==_n&&kl(d,ai(),p),Bf}function Vf(a,u,c,d,p){const v=mt(),E=Bd(v,a,u,c,d,p);return E!==_n&&kl(v,ai(),E),Vf}const Qd=void 0;var Gf=["en",[["a","p"],["AM","PM"],Qd],[["AM","PM"],Qd,Qd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qd,"{1} 'at' {0}",Qd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hf(a){const c=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Fc={};function yb(a){const u=function Tb(a){return a.toLowerCase().replace(/_/g,"-")}(a);let c=_b(u);if(c)return c;const d=u.split("-")[0];if(c=_b(d),c)return c;if("en"===d)return Gf;throw new Error(`Missing locale data for the locale "${a}".`)}function _C(a){return yb(a)[hn.PluralCase]}function _b(a){return a in Fc||(Fc[a]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[a]),Fc[a]}var hn=(()=>((hn=hn||{})[hn.LocaleId=0]="LocaleId",hn[hn.DayPeriodsFormat=1]="DayPeriodsFormat",hn[hn.DayPeriodsStandalone=2]="DayPeriodsStandalone",hn[hn.DaysFormat=3]="DaysFormat",hn[hn.DaysStandalone=4]="DaysStandalone",hn[hn.MonthsFormat=5]="MonthsFormat",hn[hn.MonthsStandalone=6]="MonthsStandalone",hn[hn.Eras=7]="Eras",hn[hn.FirstDayOfWeek=8]="FirstDayOfWeek",hn[hn.WeekendRange=9]="WeekendRange",hn[hn.DateFormat=10]="DateFormat",hn[hn.TimeFormat=11]="TimeFormat",hn[hn.DateTimeFormat=12]="DateTimeFormat",hn[hn.NumberSymbols=13]="NumberSymbols",hn[hn.NumberFormats=14]="NumberFormats",hn[hn.CurrencyCode=15]="CurrencyCode",hn[hn.CurrencySymbol=16]="CurrencySymbol",hn[hn.CurrencyName=17]="CurrencyName",hn[hn.Currencies=18]="Currencies",hn[hn.Directionality=19]="Directionality",hn[hn.PluralCase=20]="PluralCase",hn[hn.ExtraData=21]="ExtraData",hn))();const $f="en-US";let Eb=$f;function Gb(a,u,c,d,p){if(a=re(a),Array.isArray(a))for(let v=0;v<a.length;v++)Gb(a[v],u,c,d,p);else{const v=kn(),E=mt();let x=Ic(a)?a:re(a.provide),D=gS(a);const U=dr(),G=1048575&U.providerIndexes,te=U.directiveStart,Te=U.providerIndexes>>20;if(Ic(a)||!a.multi){const Ge=new Du(D,p,bi),ct=Jf(x,u,p?G:G+Te,te);-1===ct?(Qa(ba(U,E),v,x),Sy(v,a,u.length),u.push(x),U.directiveStart++,U.directiveEnd++,p&&(U.providerIndexes+=1048576),c.push(Ge),E.push(Ge)):(c[ct]=Ge,E[ct]=Ge)}else{const Ge=Jf(x,u,G+Te,te),ct=Jf(x,u,G,G+Te),Ct=Ge>=0&&c[Ge],Ot=ct>=0&&c[ct];if(p&&!Ot||!p&&!Ct){Qa(ba(U,E),v,x);const qt=function hu(a,u,c,d,p){const v=new Du(a,c,bi);return v.multi=[],v.index=u,v.componentProviders=0,Ne(v,p,d&&!c),v}(p?du:$b,c.length,p,d,D);!p&&Ot&&(c[ct].providerFactory=qt),Sy(v,a,u.length,0),u.push(x),U.directiveStart++,U.directiveEnd++,p&&(U.providerIndexes+=1048576),c.push(qt),E.push(qt)}else Sy(v,a,Ge>-1?Ge:ct,Ne(c[p?ct:Ge],D,!p&&d));!p&&d&&Ot&&c[ct].componentProviders++}}}function Sy(a,u,c,d){const p=Ic(u),v=function VD(a){return!!a.useClass}(u);if(p||v){const D=(v?re(u.useClass):u).prototype.ngOnDestroy;if(D){const U=a.destroyHooks||(a.destroyHooks=[]);if(!p&&u.multi){const G=U.indexOf(c);-1===G?U.push(c,[d,D]):U[G+1].push(d,D)}else U.push(c,D)}}}function Ne(a,u,c){return c&&a.componentProviders++,a.multi.push(u)-1}function Jf(a,u,c,d){for(let p=c;p<d;p++)if(u[p]===a)return p;return-1}function $b(a,u,c,d){return ep(this.multi,[])}function du(a,u,c,d){const p=this.multi;let v;if(this.providerFactory){const E=this.providerFactory.componentProviders,x=Bo(c,c[1],this.providerFactory.index,d);v=x.slice(0,E),ep(p,v);for(let D=E;D<x.length;D++)v.push(x[D])}else v=[],ep(p,v);return v}function ep(a,u){for(let c=0;c<a.length;c++)u.push((0,a[c])());return u}function Fl(a,u=[]){return c=>{c.providersResolver=(d,p)=>function Yu(a,u,c){const d=kn();if(d.firstCreatePass){const p=ho(a);Gb(c,d.data,d.blueprint,p,!0),Gb(u,d.data,d.blueprint,p,!1)}}(d,p?p(a):a,u)}}class qb{}class N1{resolveComponentFactory(u){throw function tp(a){const u=Error(`No component factory found for ${fe(a)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=a,u}(u)}}let Ng=(()=>{class a{}return a.NULL=new N1,a})();function L1(){return La(dr(),mt())}function La(a,u){return new Lg(gi(a,u))}let Lg=(()=>{class a{constructor(c){this.nativeElement=c}}return a.__NG_ELEMENT_ID__=L1,a})();function BC(a){return a instanceof Lg?a.nativeElement:a}class zb{}let Wb=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function HC(){const a=mt(),c=mi(dr().index,a);return function Kb(a){return a[11]}(rs(c)?c:a)}(),a})(),GC=(()=>{class a{}return a.\u0275prov=St({token:a,providedIn:"root",factory:()=>null}),a})();class Zb{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const $C=new Zb("13.3.10"),Yb={};function Fg(a,u,c,d,p=!1){for(;null!==c;){const v=u[c.index];if(null!==v&&d.push(Fn(v)),lo(v))for(let x=10;x<v.length;x++){const D=v[x],U=D[1].firstChild;null!==U&&Fg(D[1],D,U,d)}const E=c.type;if(8&E)Fg(a,u,c.child,d);else if(32&E){const x=it(c,u);let D;for(;D=x();)d.push(D)}else if(16&E){const x=Ow(u,c);if(Array.isArray(x))d.push(...x);else{const D=on(u[16]);Fg(D[1],D,x,d,!0)}}c=p?c.projectionNext:c.next}return d}class np{constructor(u,c){this._lView=u,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,c=u[1];return Fg(c,u,c.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(lo(u)){const c=u[8],d=c?c.indexOf(this):-1;d>-1&&(bv(u,d),Ru(c,d))}this._attachedToViewContainer=!1}xw(this._lView[1],this._lView)}onDestroy(u){k0(this._lView[1],this._lView,null,u)}markForCheck(){j0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function U0(a,u,c){const d=u[10];d.begin&&d.begin();try{Ef(a,u,a.template,c)}catch(p){throw lS(u,p),p}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ug(a,u){lg(a,u,u[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Je(902,"");this._appRef=u}}class jg extends np{constructor(u){super(u),this._view=u}detectChanges(){aS(this._view)}checkNoChanges(){}get context(){return null}}class Qb extends Ng{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const c=Hn(u);return new Ug(c,this.ngModule)}}function qC(a){const u=[];for(let c in a)a.hasOwnProperty(c)&&u.push({propName:a[c],templateName:c});return u}class Ug extends qb{constructor(u,c){super(),this.componentDef=u,this.ngModule=c,this.componentType=u.type,this.selector=function lD(a){return a.map(Fw).join(",")}(u.selectors),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return qC(this.componentDef.inputs)}get outputs(){return qC(this.componentDef.outputs)}create(u,c,d,p){const v=(p=p||this.ngModule)?function zC(a,u){return{get:(c,d,p)=>{const v=a.get(c,Yb,p);return v!==Yb||d===Yb?v:u.get(c,d,p)}}}(u,p.injector):u,E=v.get(zb,ll),x=v.get(GC,null),D=E.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",G=d?function Xw(a,u,c){if(Jn(a))return a.selectRootElement(u,c===Dn.ShadowDom);let d="string"==typeof u?a.querySelector(u):u;return d.textContent="",d}(D,d,this.componentDef.encapsulation):Or(E.createRenderer(null,this.componentDef),U,function F1(a){const u=a.toLowerCase();return"svg"===u?"svg":"math"===u?"math":null}(U)),te=this.componentDef.onPush?576:528,Te=function vg(a,u){return{components:[],scheduler:a||ig,clean:ND,playerHandler:u||null,flags:0}}(),Ge=Cf(0,null,null,1,0,null,null,null,null,null),ct=dg(null,Ge,Te,te,null,null,E,D,x,v);let Ct,Ot;qa(ct);try{const qt=function ES(a,u,c,d,p,v){const E=c[1];c[20]=a;const D=Dl(E,20,2,"#host",null),U=D.mergedAttrs=u.hostAttrs;null!==U&&(jv(D,U,!0),null!==a&&(Ui(p,a,U),null!==D.classes&&g0(p,a,D.classes),null!==D.styles&&Aa(p,a,D.styles)));const G=d.createRenderer(a,u),te=dg(c,Yw(u),null,u.onPush?64:16,c[20],D,d,G,v||null,null);return E.firstCreatePass&&(Qa(ba(D,c),E,u.type),R0(E,D),N0(D,c.length,1)),Mi(c,te),c[20]=te}(G,this.componentDef,ct,E,D);if(G)if(d)Ui(D,G,["ng-version",$C.full]);else{const{attrs:vt,classes:ln}=function Iv(a){const u=[],c=[];let d=1,p=2;for(;d<a.length;){let v=a[d];if("string"==typeof v)2===p?""!==v&&u.push(v,a[++d]):8===p&&c.push(v);else{if(!Da(p))break;p=v}d++}return{attrs:u,classes:c}}(this.componentDef.selectors[0]);vt&&Ui(D,G,vt),ln&&ln.length>0&&g0(D,G,ln.join(" "))}if(Ot=yr(Ge,20),void 0!==c){const vt=Ot.projection=[];for(let ln=0;ln<this.ngContentSelectors.length;ln++){const In=c[ln];vt.push(null!=In?Array.from(In):null)}}Ct=function mg(a,u,c,d,p){const v=c[1],E=function wD(a,u,c){const d=dr();a.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),iS(a,d,u,Tf(a,u,1,null),c));const p=Bo(u,a,d.directiveStart,d);_i(p,u);const v=gi(d,u);return v&&_i(v,u),p}(v,c,u);if(d.components.push(E),a[8]=E,p&&p.forEach(D=>D(E,u)),u.contentQueries){const D=dr();u.contentQueries(1,E,D.directiveStart)}const x=dr();return!v.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(za(x.index),nS(c[1],x,0,x.directiveStart,x.directiveEnd,u),rS(u,E)),E}(qt,this.componentDef,ct,Te,[wS]),jd(Ge,ct,null)}finally{is()}return new j1(this.componentType,Ct,La(Ot,ct),ct,Ot)}}class j1 extends class Qu{}{constructor(u,c,d,p,v){super(),this.location=d,this._rootLView=p,this._tNode=v,this.instance=c,this.hostView=this.changeDetectorRef=new jg(p),this.componentType=u}get injector(){return new Ea(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}class rp{}class xy{}const jc=new Map;class sp extends rp{constructor(u,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qb(this);const d=Qn(u);this._bootstrapComponents=b(d.bootstrap),this._r3Injector=Hv(u,c,[{provide:rp,useValue:this},{provide:Ng,useValue:this.componentFactoryResolver}],fe(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,c=Hu.THROW_IF_NOT_FOUND,d=Vt.Default){return u===Hu||u===rp||u===dS?this:this._r3Injector.get(u,c,d)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class Ay extends xy{constructor(u){super(),this.moduleType=u,null!==Qn(u)&&function Ao(a){const u=new Set;!function c(d){const p=Qn(d,!0),v=p.id;null!==v&&(function ip(a,u,c){if(u&&u!==c)throw new Error(`Duplicate module registered for ${a} - ${fe(u)} vs ${fe(u.name)}`)}(v,jc.get(v),d),jc.set(v,d));const E=b(p.imports);for(const x of E)u.has(x)||(u.add(x),c(x))}(a)}(u)}create(u){return new sp(this.moduleType,u)}}function KC(a,u,c){const d=Ii()+a,p=mt();return p[d]===_n?Gu(p,d,c?u.call(c):u()):function Mf(a,u){return a[u]}(p,d)}function ZC(a,u,c,d){return Xb(mt(),Ii(),a,u,c,d)}function YC(a,u,c,d,p){return function ky(a,u,c,d,p,v,E){const x=u+c;return zs(a,x,p,v)?Gu(a,x+2,E?d.call(E,p,v):d(p,v)):op(a,x+2)}(mt(),Ii(),a,u,c,d,p)}function op(a,u){const c=a[u];return c===_n?void 0:c}function Xb(a,u,c,d,p,v){const E=u+c;return Ss(a,E,p)?Gu(a,E+1,v?d.call(v,p):d(p)):op(a,E+1)}function ex(a,u){const c=kn();let d;const p=a+20;c.firstCreatePass?(d=function Jb(a,u){if(u)for(let c=u.length-1;c>=0;c--){const d=u[c];if(a===d.name)return d}}(u,c.pipeRegistry),c.data[p]=d,d.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(p,d.onDestroy)):d=c.data[p];const v=d.factory||(d.factory=pi(d.type)),E=zn(bi);try{const x=an(!1),D=v();return an(x),function $d(a,u,c,d){c>=a.data.length&&(a.data[c]=null,a.blueprint[c]=null),u[c]=d}(c,mt(),p,D),D}finally{zn(E)}}function eT(a,u,c){const d=a+20,p=mt(),v=go(p,d);return function Bg(a,u){return a[1].data[u].pure}(p,d)?Xb(p,Ii(),u,v.transform,c,v):v.transform(c)}function ap(a){return u=>{setTimeout(a,void 0,u)}}const fu=class tx extends h.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,c,d){var p,v,E;let x=u,D=c||(()=>null),U=d;if(u&&"object"==typeof u){const te=u;x=null===(p=te.next)||void 0===p?void 0:p.bind(te),D=null===(v=te.error)||void 0===v?void 0:v.bind(te),U=null===(E=te.complete)||void 0===E?void 0:E.bind(te)}this.__isAsync&&(D=ap(D),x&&(x=ap(x)),U&&(U=ap(U)));const G=super.subscribe({next:x,error:D,complete:U});return u instanceof ne.w0&&u.add(G),G}};function nx(){return this._results[hr()]()}class Py{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=hr(),d=Py.prototype;d[c]||(d[c]=nx)}get changes(){return this._changes||(this._changes=new fu)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,c){return this._results.reduce(u,c)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,c){const d=this;d.dirty=!1;const p=Ai(u);(this._changesDetected=!function Up(a,u,c){if(a.length!==u.length)return!1;for(let d=0;d<a.length;d++){let p=a[d],v=u[d];if(c&&(p=c(p),v=c(v)),v!==p)return!1}return!0}(d._results,p,c))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Vg=(()=>{class a{}return a.__NG_ELEMENT_ID__=Z1,a})();const K1=Vg,rx=class extends K1{constructor(u,c,d){super(),this._declarationLView=u,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(u){const c=this._declarationTContainer.tViews,d=dg(this._declarationLView,c,u,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),jd(c,d,u),new np(d)}};function Z1(){return Oy(dr(),mt())}function Oy(a,u){return 4&a.type?new rx(u,a,La(a,u)):null}let Ry=(()=>{class a{}return a.__NG_ELEMENT_ID__=Y1,a})();function Y1(){return Ny(dr(),mt())}const Q1=Ry,ix=class extends Q1{constructor(u,c,d){super(),this._lContainer=u,this._hostTNode=c,this._hostLView=d}get element(){return La(this._hostTNode,this._hostLView)}get injector(){return new Ea(this._hostTNode,this._hostLView)}get parentInjector(){const u=vi(this._hostTNode,this._hostLView);if(ku(u)){const c=_a(u,this._hostLView),d=ya(u);return new Ea(c[1].data[d+8],c)}return new Ea(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const c=sx(this._lContainer);return null!==c&&c[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,c,d){const p=u.createEmbeddedView(c||{});return this.insert(p,d),p}createComponent(u,c,d,p,v){const E=u&&!function uc(a){return"function"==typeof a}(u);let x;if(E)x=c;else{const te=c||{};x=te.index,d=te.injector,p=te.projectableNodes,v=te.ngModuleRef}const D=E?u:new Ug(Hn(u)),U=d||this.parentInjector;if(!v&&null==D.ngModule){const Te=(E?U:this.parentInjector).get(rp,null);Te&&(v=Te)}const G=D.create(U,p,void 0,v);return this.insert(G.hostView,x),G}insert(u,c){const d=u._lView,p=d[1];if(function dl(a){return lo(a[3])}(d)){const G=this.indexOf(u);if(-1!==G)this.detach(G);else{const te=d[3],Te=new ix(te,te[6],te[3]);Te.detach(Te.indexOf(u))}}const v=this._adjustIndex(c),E=this._lContainer;!function Ec(a,u,c,d){const p=10+d,v=c.length;d>0&&(c[p-1][4]=u),d<v-10?(u[4]=c[p],bl(c,10+d,u)):(c.push(u),u[4]=null),u[3]=c;const E=u[17];null!==E&&c!==E&&function Sw(a,u){const c=a[9];u[16]!==u[3][3][16]&&(a[2]=!0),null===c?a[9]=[u]:c.push(u)}(E,u);const x=u[19];null!==x&&x.insertView(a),u[2]|=128}(p,d,E,v);const x=Cv(v,E),D=d[11],U=wv(D,E[7]);return null!==U&&function ag(a,u,c,d,p,v){d[0]=p,d[6]=u,lg(a,d,c,1,p,v)}(p,E[6],D,d,U,x),u.attachToViewContainerRef(),bl(nT(E),v,u),u}move(u,c){return this.insert(u,c)}indexOf(u){const c=sx(this._lContainer);return null!==c?c.indexOf(u):-1}remove(u){const c=this._adjustIndex(u,-1),d=bv(this._lContainer,c);d&&(Ru(nT(this._lContainer),c),xw(d[1],d))}detach(u){const c=this._adjustIndex(u,-1),d=bv(this._lContainer,c);return d&&null!=Ru(nT(this._lContainer),c)?new np(d):null}_adjustIndex(u,c=0){return null==u?this.length+c:u}};function sx(a){return a[8]}function nT(a){return a[8]||(a[8]=[])}function Ny(a,u){let c;const d=u[a.index];if(lo(d))c=d;else{let p;if(8&a.type)p=Fn(d);else{const v=u[11];p=v.createComment("");const E=gi(a,u);Sc(v,wv(v,E),p,function eD(a,u){return Jn(a)?a.nextSibling(u):u.nextSibling}(v,E),!1)}u[a.index]=c=sS(d,u,p,a),Mi(u,c)}return new ix(c,a,u)}class Ly{constructor(u){this.queryList=u,this.matches=null}clone(){return new Ly(this.queryList)}setDirty(){this.queryList.setDirty()}}class rT{constructor(u=[]){this.queries=u}createEmbeddedView(u){const c=u.queries;if(null!==c){const d=null!==u.contentQueries?u.contentQueries[0]:c.length,p=[];for(let v=0;v<d;v++){const E=c.getByIndex(v);p.push(this.queries[E.indexInDeclarationView].clone())}return new rT(p)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let c=0;c<this.queries.length;c++)null!==dT(u,c).matches&&this.queries[c].setDirty()}}class ox{constructor(u,c,d=null){this.predicate=u,this.flags=c,this.read=d}}class iT{constructor(u=[]){this.queries=u}elementStart(u,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(u,c)}elementEnd(u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(u)}embeddedTView(u){let c=null;for(let d=0;d<this.length;d++){const p=null!==c?c.length:0,v=this.getByIndex(d).embeddedTView(u,p);v&&(v.indexInDeclarationView=d,null!==c?c.push(v):c=[v])}return null!==c?new iT(c):null}template(u,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(u,c)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class Fy{constructor(u,c=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(u,c){this.isApplyingToNode(c)&&this.matchTNode(u,c)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,c){this.elementStart(u,c)}embeddedTView(u,c){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,c),new Fy(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=u.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(u,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const v=d[p];this.matchTNodeWithReadOption(u,c,tk(c,v)),this.matchTNodeWithReadOption(u,c,yl(c,u,v,!1,!1))}else d===Vg?4&c.type&&this.matchTNodeWithReadOption(u,c,-1):this.matchTNodeWithReadOption(u,c,yl(c,u,d,!1,!1))}matchTNodeWithReadOption(u,c,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===Lg||p===Ry||p===Vg&&4&c.type)this.addMatch(c.index,-2);else{const v=yl(c,u,p,!1,!1);null!==v&&this.addMatch(c.index,v)}else this.addMatch(c.index,d)}}addMatch(u,c){null===this.matches?this.matches=[u,c]:this.matches.push(u,c)}}function tk(a,u){const c=a.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===u)return c[d+1];return null}function $i(a,u,c,d){return-1===c?function sT(a,u){return 11&a.type?La(a,u):4&a.type?Oy(a,u):null}(u,a):-2===c?function nk(a,u,c){return c===Lg?La(u,a):c===Vg?Oy(u,a):c===Ry?Ny(u,a):void 0}(a,u,d):Bo(a,a[1],c,u)}function oT(a,u,c,d){const p=u[19].queries[d];if(null===p.matches){const v=a.data,E=c.matches,x=[];for(let D=0;D<E.length;D+=2){const U=E[D];x.push(U<0?null:$i(u,v[U],E[D+1],c.metadata.read))}p.matches=x}return p.matches}function aT(a,u,c,d){const p=a.queries.getByIndex(c),v=p.matches;if(null!==v){const E=oT(a,u,p,c);for(let x=0;x<v.length;x+=2){const D=v[x];if(D>0)d.push(E[x/2]);else{const U=v[x+1],G=u[-D];for(let te=10;te<G.length;te++){const Te=G[te];Te[17]===Te[3]&&aT(Te[1],Te,U,d)}if(null!==G[9]){const te=G[9];for(let Te=0;Te<te.length;Te++){const Ge=te[Te];aT(Ge[1],Ge,U,d)}}}}}return d}function uT(a){const u=mt(),c=kn(),d=rc();Rh(d+1);const p=dT(c,d);if(a.dirty&&Ga(u)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const v=p.crossesNgTemplate?aT(c,u,d,[]):oT(c,u,p,d);a.reset(v,BC),a.notifyOnChanges()}return!0}return!1}function lT(a,u,c){const d=kn();d.firstCreatePass&&(lx(d,new ox(a,u,c),-1),2==(2&u)&&(d.staticViewQueries=!0)),ux(d,mt(),u)}function cT(a,u,c,d){const p=kn();if(p.firstCreatePass){const v=dr();lx(p,new ox(u,c,d),v.index),function ik(a,u){const c=a.contentQueries||(a.contentQueries=[]);u!==(c.length?c[c.length-1]:-1)&&c.push(a.queries.length-1,u)}(p,a),2==(2&c)&&(p.staticContentQueries=!0)}ux(p,mt(),c)}function ax(){return function rk(a,u){return a[19].queries[u].queryList}(mt(),rc())}function ux(a,u,c){const d=new Py(4==(4&c));k0(a,u,d,d.destroy),null===u[19]&&(u[19]=new rT),u[19].queries.push(new Ly(d))}function lx(a,u,c){null===a.queries&&(a.queries=new iT),a.queries.track(new Fy(u,c))}function dT(a,u){return a.queries.getByIndex(u)}function hT(a,u){return Oy(a,u)}function $y(...a){}const vx=new wr("Application Initializer");let ih=(()=>{class a{constructor(c){this.appInits=c,this.resolve=$y,this.reject=$y,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const v=this.appInits[p]();if(Sg(v))c.push(v);else if(ib(v)){const E=new Promise((x,D)=>{v.subscribe({complete:x,error:D})});c.push(E)}}Promise.all(c).then(()=>{d()}).catch(p=>{this.reject(p)}),0===c.length&&d(),this.initialized=!0}}return a.\u0275fac=function(c){return new(c||a)(Yt(vx,8))},a.\u0275prov=St({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const yx=new wr("AppId",{providedIn:"root",factory:function ST(){return`${xT()}${xT()}${xT()}`}});function xT(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _x=new wr("Platform Initializer"),cp=new wr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),IT=new wr("appBootstrapListener");let bx=(()=>{class a{log(c){console.log(c)}warn(c){console.warn(c)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=St({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const qy=new wr("LocaleId",{providedIn:"root",factory:()=>Rn(qy,Vt.Optional|Vt.SkipSelf)||function mk(){return"undefined"!=typeof $localize&&$localize.locale||$f}()}),vk=new wr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class _k{constructor(u,c){this.ngModuleFactory=u,this.componentFactories=c}}let AT=(()=>{class a{compileModuleSync(c){return new Ay(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),v=b(Qn(c).declarations).reduce((E,x)=>{const D=Hn(x);return D&&E.push(new Ug(D)),E},[]);return new _k(d,v)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=St({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const wx=(()=>Promise.resolve(0))();function Fa(a){"undefined"==typeof Zone?wx.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Gr{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fu(!1),this.onMicrotaskEmpty=new fu(!1),this.onStable=new fu(!1),this.onError=new fu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&c,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function ea(){let a=Sn.requestAnimationFrame,u=Sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&u){const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function xx(a){const u=()=>{!function Cx(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Sn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,DT(a),a.isCheckStableRunning=!0,zy(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),DT(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,p,v,E,x)=>{try{return Ix(a),c.invokeTask(p,v,E,x)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||a.shouldCoalesceRunChangeDetection)&&u(),Ax(a)}},onInvoke:(c,d,p,v,E,x,D)=>{try{return Ix(a),c.invoke(p,v,E,x,D)}finally{a.shouldCoalesceRunChangeDetection&&u(),Ax(a)}},onHasTask:(c,d,p,v)=>{c.hasTask(p,v),d===p&&("microTask"==v.change?(a._hasPendingMicrotasks=v.microTask,DT(a),zy(a)):"macroTask"==v.change&&(a.hasPendingMacrotasks=v.macroTask))},onHandleError:(c,d,p,v)=>(c.handleError(p,v),a.runOutsideAngular(()=>a.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Gr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,c,d){return this._inner.run(u,c,d)}runTask(u,c,d,p){const v=this._inner,E=v.scheduleEventTask("NgZoneEvent: "+p,u,Sx,$y,$y);try{return v.runTask(E,c,d)}finally{v.cancelTask(E)}}runGuarded(u,c,d){return this._inner.runGuarded(u,c,d)}runOutsideAngular(u){return this._outer.run(u)}}const Sx={};function zy(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function DT(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Ix(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Ax(a){a._nesting--,zy(a)}class Tk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fu,this.onMicrotaskEmpty=new fu,this.onStable=new fu,this.onError=new fu}run(u,c,d){return u.apply(c,d)}runGuarded(u,c,d){return u.apply(c,d)}runOutsideAngular(u){return u()}runTask(u,c,d,p){return u.apply(c,d)}}let kT=(()=>{class a{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gr.assertNotInAngularZone(),Fa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fa(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,p){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==v),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:v,updateCb:p})}whenStable(c,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,p){return[]}}return a.\u0275fac=function(c){return new(c||a)(Yt(Gr))},a.\u0275prov=St({token:a,factory:a.\u0275fac}),a})(),Ek=(()=>{class a{constructor(){this._applications=new Map,MT.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return MT.findTestabilityInTree(this,c,d)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=St({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();class wk{addToWindow(u){}findTestabilityInTree(u,c,d){return null}}function Sk(a){MT=a}let MT=new wk,sh=null;const Wg=new wr("AllowMultipleToken"),Wy=new wr("PlatformOnDestroy");class Ky{constructor(u,c){this.name=u,this.token=c}}function kx(a,u,c=[]){const d=`Platform: ${u}`,p=new wr(d);return(v=[])=>{let E=PT();if(!E||E.injector.get(Wg,!1)){const x=[...c,...v,{provide:p,useValue:!0}];a?a(x):function Dx(a){if(sh&&!sh.get(Wg,!1))throw new Je(400,"");sh=a;const u=a.get(Mx),c=a.get(_x,null);c&&c.forEach(d=>d())}(function Ak(a=[],u){return Hu.create({name:u,providers:[{provide:hS,useValue:"platform"},{provide:Wy,useValue:()=>sh=null},...a]})}(x,d))}return function Ik(a){const u=PT();if(!u)throw new Je(401,"");return u}()}}function PT(){var a;return null!==(a=null==sh?void 0:sh.get(Mx))&&void 0!==a?a:null}let Mx=(()=>{class a{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const x=function Dk(a,u){let c;return c="noop"===a?new Tk:("zone.js"===a?void 0:a)||new Gr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),D=[{provide:Gr,useValue:x}];return x.run(()=>{const U=Hu.create({providers:D,parent:this.injector,name:c.moduleType.name}),G=c.create(U),te=G.injector.get(mf,null);if(!te)throw new Je(402,"");return x.runOutsideAngular(()=>{const Te=x.onError.subscribe({next:Ge=>{te.handleError(Ge)}});G.onDestroy(()=>{RT(this._modules,G),Te.unsubscribe()})}),function kk(a,u,c){try{const d=c();return Sg(d)?d.catch(p=>{throw u.runOutsideAngular(()=>a.handleError(p)),p}):d}catch(d){throw u.runOutsideAngular(()=>a.handleError(d)),d}}(te,x,()=>{const Te=G.injector.get(ih);return Te.runInitializers(),Te.donePromise.then(()=>(function TC(a){Re(a,"Expected localeId to be defined"),"string"==typeof a&&(Eb=a.toLowerCase().replace(/_/g,"-"))}(G.injector.get(qy,$f)||$f),this._moduleDoBootstrap(G),G))})})}bootstrapModule(c,d=[]){const p=Ju({},d);return function Ck(a,u,c){const d=new Ay(c);return Promise.resolve(d)}(0,0,c).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(c){const d=c.injector.get(OT);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!c.instance.ngDoBootstrap)throw new Je(403,"");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Wy,null);null==c||c(),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(c){return new(c||a)(Yt(Hu))},a.\u0275prov=St({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function Ju(a,u){return Array.isArray(u)?u.reduce(Ju,a):Object.assign(Object.assign({},a),u)}let OT=(()=>{class a{constructor(c,d,p,v){this._zone=c,this._injector=d,this._exceptionHandler=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new V.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),x=new V.y(D=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{Gr.assertNotInAngularZone(),Fa(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const G=this._zone.onUnstable.subscribe(()=>{Gr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{U.unsubscribe(),G.unsubscribe()}});this.isStable=(0,de.T)(E,x.pipe((0,ie.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Je(405,"");let p;p=c instanceof qb?c:this._injector.get(Ng).resolveComponentFactory(c),this.componentTypes.push(p.componentType);const v=function xk(a){return a.isBoundToModule}(p)?void 0:this._injector.get(rp),x=p.create(Hu.NULL,[],d||p.selector,v),D=x.location.nativeElement,U=x.injector.get(kT,null),G=U&&x.injector.get(Ek);return U&&G&&G.registerApplication(D,U),x.onDestroy(()=>{this.detachView(x.hostView),RT(this.components,x),G&&G.unregisterApplication(D)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Je(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;RT(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(IT,[]).concat(this._bootstrapListeners).forEach(p=>p(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(c){return new(c||a)(Yt(Gr),Yt(Hu),Yt(mf),Yt(ih))},a.\u0275prov=St({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function RT(a,u){const c=a.indexOf(u);c>-1&&a.splice(c,1)}let Ox=!0,Rx=!1;function Pk(){return Rx=!0,Ox}function Nx(){if(Rx)throw new Error("Cannot enable prod mode after platform setup.");Ox=!1}let Ok=(()=>{class a{}return a.__NG_ELEMENT_ID__=Fx,a})();function Fx(a){return function Rk(a,u,c){if(Th(a)&&!c){const d=mi(a.index,u);return new np(d,d)}return 47&a.type?new np(u[16],u):null}(dr(),mt(),16==(16&a))}class Bx{constructor(){}supports(u){return Pl(u)}create(u){return new $r(u)}}const Qy=(a,u)=>u;class $r{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||Qy}forEachItem(u){let c;for(c=this._itHead;null!==c;c=c._next)u(c)}forEachOperation(u){let c=this._itHead,d=this._removalsHead,p=0,v=null;for(;c||d;){const E=!d||c&&c.currentIndex<As(d,p,v)?c:d,x=As(E,p,v),D=E.currentIndex;if(E===d)p--,d=d._nextRemoved;else if(c=c._next,null==E.previousIndex)p++;else{v||(v=[]);const U=x-p,G=D-p;if(U!=G){for(let Te=0;Te<U;Te++){const Ge=Te<v.length?v[Te]:v[Te]=0,ct=Ge+Te;G<=ct&&ct<U&&(v[Te]=Ge+1)}v[E.previousIndex]=G-U}}x!==D&&u(E,x,D)}}forEachPreviousItem(u){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)u(c)}forEachAddedItem(u){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)u(c)}forEachMovedItem(u){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)u(c)}forEachRemovedItem(u){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)u(c)}forEachIdentityChange(u){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)u(c)}diff(u){if(null==u&&(u=[]),!Pl(u))throw new Je(900,"");return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let p,v,E,c=this._itHead,d=!1;if(Array.isArray(u)){this.length=u.length;for(let x=0;x<this.length;x++)v=u[x],E=this._trackByFn(x,v),null!==c&&Object.is(c.trackById,E)?(d&&(c=this._verifyReinsertion(c,v,E,x)),Object.is(c.item,v)||this._addIdentityChange(c,v)):(c=this._mismatch(c,v,E,x),d=!0),c=c._next}else p=0,function Hi(a,u){if(Array.isArray(a))for(let c=0;c<a.length;c++)u(a[c]);else{const c=a[hr()]();let d;for(;!(d=c.next()).done;)u(d.value)}}(u,x=>{E=this._trackByFn(p,x),null!==c&&Object.is(c.trackById,E)?(d&&(c=this._verifyReinsertion(c,x,E,p)),Object.is(c.item,x)||this._addIdentityChange(c,x)):(c=this._mismatch(c,x,E,p),d=!0),c=c._next,p++}),this.length=p;return this._truncate(c),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,c,d,p){let v;return null===u?v=this._itTail:(v=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(u.item,c)||this._addIdentityChange(u,c),this._reinsertAfter(u,v,p)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(u.item,c)||this._addIdentityChange(u,c),this._moveAfter(u,v,p)):u=this._addAfter(new jT(c,d),v,p),u}_verifyReinsertion(u,c,d,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?u=this._reinsertAfter(v,u._prev,p):u.currentIndex!=p&&(u.currentIndex=p,this._addToMoves(u,p)),u}_truncate(u){for(;null!==u;){const c=u._next;this._addToRemovals(this._unlink(u)),u=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const p=u._prevRemoved,v=u._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(u,c,d),this._addToMoves(u,d),u}_moveAfter(u,c,d){return this._unlink(u),this._insertAfter(u,c,d),this._addToMoves(u,d),u}_addAfter(u,c,d){return this._insertAfter(u,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,c,d){const p=null===c?this._itHead:c._next;return u._next=p,u._prev=c,null===p?this._itTail=u:p._prev=u,null===c?this._itHead=u:c._next=u,null===this._linkedRecords&&(this._linkedRecords=new Vx),this._linkedRecords.put(u),u.currentIndex=d,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const c=u._prev,d=u._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,u}_addToMoves(u,c){return u.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vx),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,c){return u.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class jT{constructor(u,c){this.item=u,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uk{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,u))return d;return null}remove(u){const c=u._prevDup,d=u._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class Vx{constructor(){this.map=new Map}put(u){const c=u.trackById;let d=this.map.get(c);d||(d=new Uk,this.map.set(c,d)),d.add(u)}get(u,c){const p=this.map.get(u);return p?p.get(u,c):null}remove(u){const c=u.trackById;return this.map.get(c).remove(u)&&this.map.delete(c),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function As(a,u,c){const d=a.previousIndex;if(null===d)return d;let p=0;return c&&d<c.length&&(p=c[d]),d+u+p}class Bk{constructor(){}supports(u){return u instanceof Map||qv(u)}create(){return new Hx}}class Hx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let c;for(c=this._mapHead;null!==c;c=c._next)u(c)}forEachPreviousItem(u){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)u(c)}forEachChangedItem(u){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)u(c)}forEachAddedItem(u){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)u(c)}forEachRemovedItem(u){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)u(c)}diff(u){if(u){if(!(u instanceof Map||qv(u)))throw new Je(900,"")}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(u,(d,p)=>{if(c&&c.key===p)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const v=this._getOrCreateRecordForKey(p,d);c=this._insertBeforeOrAppend(c,v)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,c){if(u){const d=u._prev;return c._next=u,c._prev=d,u._prev=c,d&&(d._next=c),u===this._mapHead&&(this._mapHead=c),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(u,c){if(this._records.has(u)){const p=this._records.get(u);this._maybeAddToChanges(p,c);const v=p._prev,E=p._next;return v&&(v._next=E),E&&(E._prev=v),p._next=null,p._prev=null,p}const d=new pu(u);return this._records.set(u,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,c){Object.is(c,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=c,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,c){u instanceof Map?u.forEach(c):Object.keys(u).forEach(d=>c(u[d],d))}}class pu{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ah(){return new el([new Bx])}let el=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(null!=d){const p=d.factories.slice();c=c.concat(p)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||ah()),deps:[[a,new xa,new ki]]}}find(c){const d=this.factories.find(p=>p.supports(c));if(null!=d)return d;throw new Je(901,"")}}return a.\u0275prov=St({token:a,providedIn:"root",factory:ah}),a})();function Gx(){return new gu([new Bk])}let gu=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(d){const p=d.factories.slice();c=c.concat(p)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||Gx()),deps:[[a,new xa,new ki]]}}find(c){const d=this.factories.find(v=>v.supports(c));if(d)return d;throw new Je(901,"")}}return a.\u0275prov=St({token:a,providedIn:"root",factory:Gx}),a})();const VT=kx(null,"core",[]);let Zg=(()=>{class a{constructor(c){}}return a.\u0275fac=function(c){return new(c||a)(Yt(OT))},a.\u0275mod=fn({type:a}),a.\u0275inj=rn({}),a})()},3942:(Ze,_e,B)=>{"use strict";B.d(_e,{Z:()=>Je});var h=B(2090),ne=B(4859),V=B(9681),de=B(1877);class ie{constructor(Ee,Oe){this._delegate=Ee,this.firebase=Oe,(0,V._addComponent)(Ee,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(Ee,Oe=V._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(Ee);return!lt.isInitialized()&&"EXPLICIT"===(null===(Xe=lt.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:Oe})}_removeServiceInstance(Ee,Oe=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(Oe)}_addComponent(Ee){(0,V._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,V._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function ve(){const wt=function fe(wt){const Ee={},Oe={__esModule:!0,initializeApp:function Qe(gt,R={}){const z=V.initializeApp(gt,R);if((0,h.r3)(Ee,z.name))return Ee[z.name];const Y=new wt(z,Oe);return Ee[z.name]=Y,Y},app:lt,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Ve(gt){const R=gt.name,z=R.replace("-compat","");if(V._registerComponent(gt)&&"PUBLIC"===gt.type){const Y=(he=lt())=>{if("function"!=typeof he[z])throw me.create("invalid-app-argument",{appName:R});return he[z]()};void 0!==gt.serviceProps&&(0,h.ZB)(Y,gt.serviceProps),Oe[z]=Y,wt.prototype[z]=function(...he){return this._getService.bind(this,R).apply(this,gt.multipleInstances?he:[])}}return"PUBLIC"===gt.type?Oe[z]:null},removeApp:function Xe(gt){delete Ee[gt]},useAsService:function ot(gt,R){return"serverAuth"===R?null:R},modularAPIs:V}};function lt(gt){if(!(0,h.r3)(Ee,gt=gt||V._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:gt});return Ee[gt]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function Pe(){return Object.keys(Ee).map(gt=>Ee[gt])}}),lt.App=wt,Oe}(ie);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ee(Oe){(0,h.ZB)(wt,Oe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),wt}(),ue=new de.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=J;!function Ye(wt){(0,V.registerVersion)("@firebase/app-compat","0.1.26",wt)}()},9681:(Ze,_e,B)=>{"use strict";B.r(_e),B.d(_e,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>Ln,_DEFAULT_ENTRY_NAME:()=>Re,_addComponent:()=>kt,_addOrOverwriteComponent:()=>St,_apps:()=>pt,_clearComponents:()=>Bn,_components:()=>Nt,_getProvider:()=>rn,_registerComponent:()=>Ut,_removeServiceInstance:()=>Qt,deleteApp:()=>Vt,getApp:()=>On,getApps:()=>Er,initializeApp:()=>Qi,onLog:()=>zn,registerVersion:()=>qn,setLogLevel:()=>Xi});var h=B(5861),ne=B(4859),V=B(1877),de=B(2090),ie=B(8766);class ce{constructor($e){this.container=$e}getPlatformInfoString(){return this.container.getProviders().map(yt=>{if(function me(Ce){const $e=Ce.getComponent();return"VERSION"===(null==$e?void 0:$e.type)}(yt)){const Gt=yt.getImmediate();return`${Gt.library}/${Gt.version}`}return null}).filter(yt=>yt).join(" ")}}const fe="@firebase/app",J=new V.Yd("@firebase/app"),Re="[DEFAULT]",Fe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pt=new Map,Nt=new Map;function kt(Ce,$e){try{Ce.container.addComponent($e)}catch(yt){J.debug(`Component ${$e.name} failed to register with FirebaseApp ${Ce.name}`,yt)}}function St(Ce,$e){Ce.container.addOrOverwriteComponent($e)}function Ut(Ce){const $e=Ce.name;if(Nt.has($e))return J.debug(`There were multiple attempts to register component ${$e}.`),!1;Nt.set($e,Ce);for(const yt of pt.values())kt(yt,Ce);return!0}function rn(Ce,$e){const yt=Ce.container.getProvider("heartbeat").getImmediate({optional:!0});return yt&&yt.triggerHeartbeat(),Ce.container.getProvider($e)}function Qt(Ce,$e,yt=Re){rn(Ce,$e).clearInstance(yt)}function Bn(){Nt.clear()}const Zn=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ar{constructor($e,yt,Gt){this._isDeleted=!1,this._options=Object.assign({},$e),this._config=Object.assign({},yt),this._name=yt.name,this._automaticDataCollectionEnabled=yt.automaticDataCollectionEnabled,this._container=Gt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($e){this.checkDestroyed(),this._automaticDataCollectionEnabled=$e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($e){this._isDeleted=$e}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}const Ln="9.8.2";function Qi(Ce,$e={}){"object"!=typeof $e&&($e={name:$e});const yt=Object.assign({name:Re,automaticDataCollectionEnabled:!1},$e),Gt=yt.name;if("string"!=typeof Gt||!Gt)throw Zn.create("bad-app-name",{appName:String(Gt)});const K=pt.get(Gt);if(K){if((0,de.vZ)(Ce,K.options)&&(0,de.vZ)(yt,K.config))return K;throw Zn.create("duplicate-app",{appName:Gt})}const Q=new ne.H0(Gt);for(const qe of Nt.values())Q.addComponent(qe);const Se=new ar(Ce,yt,Q);return pt.set(Gt,Se),Se}function On(Ce=Re){const $e=pt.get(Ce);if(!$e)throw Zn.create("no-app",{appName:Ce});return $e}function Er(){return Array.from(pt.values())}function Vt(Ce){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(Ce){const $e=Ce.name;pt.has($e)&&(pt.delete($e),yield Promise.all(Ce.container.getProviders().map(yt=>yt.delete())),Ce.isDeleted=!0)})).apply(this,arguments)}function qn(Ce,$e,yt){var Gt;let K=null!==(Gt=Fe[Ce])&&void 0!==Gt?Gt:Ce;yt&&(K+=`-${yt}`);const Q=K.match(/\s|\//),Se=$e.match(/\s|\//);if(Q||Se){const qe=[`Unable to register library "${K}" with version "${$e}":`];return Q&&qe.push(`library name "${K}" contains illegal characters (whitespace or "/")`),Q&&Se&&qe.push("and"),Se&&qe.push(`version name "${$e}" contains illegal characters (whitespace or "/")`),void J.warn(qe.join(" "))}Ut(new ne.wA(`${K}-version`,()=>({library:K,version:$e}),"VERSION"))}function zn(Ce,$e){if(null!==Ce&&"function"!=typeof Ce)throw Zn.create("invalid-log-argument");(0,V.Am)(Ce,$e)}function Xi(Ce){(0,V.Ub)(Ce)}const Yn="firebase-heartbeat-store";let si=null;function so(){return si||(si=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(Ce,$e)=>{0===$e&&Ce.createObjectStore(Yn)}}).catch(Ce=>{throw Zn.create("storage-open",{originalErrorMessage:Ce.message})})),si}function Wt(){return(Wt=(0,h.Z)(function*(Ce){try{return(yield so()).transaction(Yn).objectStore(Yn).get(Si(Ce))}catch($e){throw Zn.create("storage-get",{originalErrorMessage:$e.message})}})).apply(this,arguments)}function sn(Ce,$e){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(Ce,$e){try{const Gt=(yield so()).transaction(Yn,"readwrite");return yield Gt.objectStore(Yn).put($e,Si(Ce)),Gt.done}catch(yt){throw Zn.create("storage-set",{originalErrorMessage:yt.message})}})).apply(this,arguments)}function Si(Ce){return`${Ce.name}!${Ce.options.appId}`}class jr{constructor($e){this.container=$e,this._heartbeatsCache=null;const yt=this.container.getProvider("app").getImmediate();this._storage=new xe(yt),this._heartbeatsCachePromise=this._storage.read().then(Gt=>(this._heartbeatsCache=Gt,Gt))}triggerHeartbeat(){var $e=this;return(0,h.Z)(function*(){const Gt=$e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),K=Qr();if(null===$e._heartbeatsCache&&($e._heartbeatsCache=yield $e._heartbeatsCachePromise),$e._heartbeatsCache.lastSentHeartbeatDate!==K&&!$e._heartbeatsCache.heartbeats.some(Q=>Q.date===K))return $e._heartbeatsCache.heartbeats.push({date:K,agent:Gt}),$e._heartbeatsCache.heartbeats=$e._heartbeatsCache.heartbeats.filter(Q=>{const Se=new Date(Q.date).valueOf();return Date.now()-Se<=2592e6}),$e._storage.overwrite($e._heartbeatsCache)})()}getHeartbeatsHeader(){var $e=this;return(0,h.Z)(function*(){if(null===$e._heartbeatsCache&&(yield $e._heartbeatsCachePromise),null===$e._heartbeatsCache||0===$e._heartbeatsCache.heartbeats.length)return"";const yt=Qr(),{heartbeatsToSend:Gt,unsentEntries:K}=function ge(Ce,$e=1024){const yt=[];let Gt=Ce.slice();for(const K of Ce){const Q=yt.find(Se=>Se.agent===K.agent);if(Q){if(Q.dates.push(K.date),Ae(yt)>$e){Q.dates.pop();break}}else if(yt.push({agent:K.agent,dates:[K.date]}),Ae(yt)>$e){yt.pop();break}Gt=Gt.slice(1)}return{heartbeatsToSend:yt,unsentEntries:Gt}}($e._heartbeatsCache.heartbeats),Q=(0,de.L)(JSON.stringify({version:2,heartbeats:Gt}));return $e._heartbeatsCache.lastSentHeartbeatDate=yt,K.length>0?($e._heartbeatsCache.heartbeats=K,yield $e._storage.overwrite($e._heartbeatsCache)):($e._heartbeatsCache.heartbeats=[],$e._storage.overwrite($e._heartbeatsCache)),Q})()}}function Qr(){return(new Date).toISOString().substring(0,10)}class xe{constructor($e){this.app=$e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $e=this;return(0,h.Z)(function*(){return(yield $e._canUseIndexedDBPromise)&&(yield function Dn(Ce){return Wt.apply(this,arguments)}($e.app))||{heartbeats:[]}})()}overwrite($e){var yt=this;return(0,h.Z)(function*(){var Gt;if(yield yt._canUseIndexedDBPromise){const Q=yield yt.read();return sn(yt.app,{lastSentHeartbeatDate:null!==(Gt=$e.lastSentHeartbeatDate)&&void 0!==Gt?Gt:Q.lastSentHeartbeatDate,heartbeats:$e.heartbeats})}})()}add($e){var yt=this;return(0,h.Z)(function*(){var Gt;if(yield yt._canUseIndexedDBPromise){const Q=yield yt.read();return sn(yt.app,{lastSentHeartbeatDate:null!==(Gt=$e.lastSentHeartbeatDate)&&void 0!==Gt?Gt:Q.lastSentHeartbeatDate,heartbeats:[...Q.heartbeats,...$e.heartbeats]})}})()}}function Ae(Ce){return(0,de.L)(JSON.stringify({version:2,heartbeats:Ce})).length}!function dt(Ce){Ut(new ne.wA("platform-logger",$e=>new ce($e),"PRIVATE")),Ut(new ne.wA("heartbeat",$e=>new jr($e),"PRIVATE")),qn(fe,"0.7.25",Ce),qn(fe,"0.7.25","esm2017"),qn("fire-js","")}("")},4859:(Ze,_e,B)=>{"use strict";B.d(_e,{H0:()=>fe,wA:()=>V});var h=B(5861),ne=B(2090);class V{constructor(J,ue,re){this.name=J,this.instanceFactory=ue,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const de="[DEFAULT]";class ie{constructor(J,ue){this.name=J,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const ue=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(ue)){const re=new ne.BH;if(this.instancesDeferred.set(ue,re),this.isInitialized(ue)||this.shouldAutoInitialize())try{const rt=this.getOrInitializeService({instanceIdentifier:ue});rt&&re.resolve(rt)}catch(rt){}}return this.instancesDeferred.get(ue).promise}getImmediate(J){var ue;const re=this.normalizeInstanceIdentifier(null==J?void 0:J.identifier),rt=null!==(ue=null==J?void 0:J.optional)&&void 0!==ue&&ue;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(rt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Ye){if(rt)return null;throw Ye}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function me(ve){return"EAGER"===ve.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:de})}catch(ue){}for(const[ue,re]of this.instancesDeferred.entries()){const rt=this.normalizeInstanceIdentifier(ue);try{const Ye=this.getOrInitializeService({instanceIdentifier:rt});re.resolve(Ye)}catch(Ye){}}}}clearInstance(J=de){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,h.Z)(function*(){const ue=Array.from(J.instances.values());yield Promise.all([...ue.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...ue.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=de){return this.instances.has(J)}getOptions(J=de){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:ue={}}=J,re=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const rt=this.getOrInitializeService({instanceIdentifier:re,options:ue});for(const[Ye,Je]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Ye)&&Je.resolve(rt);return rt}onInit(J,ue){var re;const rt=this.normalizeInstanceIdentifier(ue),Ye=null!==(re=this.onInitCallbacks.get(rt))&&void 0!==re?re:new Set;Ye.add(J),this.onInitCallbacks.set(rt,Ye);const Je=this.instances.get(rt);return Je&&J(Je,rt),()=>{Ye.delete(J)}}invokeOnInitCallbacks(J,ue){const re=this.onInitCallbacks.get(ue);if(re)for(const rt of re)try{rt(J,ue)}catch(Ye){}}getOrInitializeService({instanceIdentifier:J,options:ue={}}){let re=this.instances.get(J);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=J,ve===de?void 0:ve),options:ue}),this.instances.set(J,re),this.instancesOptions.set(J,ue),this.invokeOnInitCallbacks(re,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,re)}catch(rt){}var ve;return re||null}normalizeInstanceIdentifier(J=de){return this.component?this.component.multipleInstances?J:de:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const ue=this.getProvider(J.name);if(ue.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);ue.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const ue=new ie(J,this);return this.providers.set(J,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Ze,_e,B)=>{"use strict";B.d(_e,{Am:()=>ve,Ub:()=>fe,Yd:()=>me,in:()=>ne});const h=[];var ne=(()=>{return(J=ne||(ne={}))[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",ne;var J})();const V={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},de=ne.INFO,ie={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ce=(J,ue,...re)=>{if(ue<J.logLevel)return;const rt=(new Date).toISOString(),Ye=ie[ue];if(!Ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[Ye](`[${rt}]  ${J.name}:`,...re)};class me{constructor(ue){this.name=ue,this._logLevel=de,this._logHandler=ce,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in ne))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?V[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...ue),this._logHandler(this,ne.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...ue),this._logHandler(this,ne.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...ue),this._logHandler(this,ne.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...ue),this._logHandler(this,ne.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...ue),this._logHandler(this,ne.ERROR,...ue)}}function fe(J){h.forEach(ue=>{ue.setLogLevel(J)})}function ve(J,ue){for(const re of h){let rt=null;ue&&ue.level&&(rt=V[ue.level]),re.userLogHandler=null===J?null:(Ye,Je,...wt)=>{const Ee=wt.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch(Xe){return null}}).filter(Oe=>Oe).join(" ");Je>=(null!=rt?rt:Ye.logLevel)&&J({level:ne[Je].toLowerCase(),message:Ee,args:wt,type:Ye.name})}}}},8766:(Ze,_e,B)=>{"use strict";B.d(_e,{Lj:()=>Qe,X3:()=>lt});var h=B(5861);let V,de;const me=new WeakMap,fe=new WeakMap,ve=new WeakMap,J=new WeakMap,ue=new WeakMap;let Ye={get(R,z,Y){if(R instanceof IDBTransaction){if("done"===z)return fe.get(R);if("objectStoreNames"===z)return R.objectStoreNames||ve.get(R);if("store"===z)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return Oe(R[z])},set:(R,z,Y)=>(R[z]=Y,!0),has:(R,z)=>R instanceof IDBTransaction&&("done"===z||"store"===z)||z in R};function Ee(R){return"function"==typeof R?function wt(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(R)?function(...z){return R.apply(Xe(this),z),Oe(me.get(this))}:function(...z){return Oe(R.apply(Xe(this),z))}:function(z,...Y){const he=R.call(Xe(this),z,...Y);return ve.set(he,z.sort?z.sort():[z]),Oe(he)}}(R):(R instanceof IDBTransaction&&function rt(R){if(fe.has(R))return;const z=new Promise((Y,he)=>{const oe=()=>{R.removeEventListener("complete",we),R.removeEventListener("error",X),R.removeEventListener("abort",X)},we=()=>{Y(),oe()},X=()=>{he(R.error||new DOMException("AbortError","AbortError")),oe()};R.addEventListener("complete",we),R.addEventListener("error",X),R.addEventListener("abort",X)});fe.set(R,z)}(R),((R,z)=>z.some(Y=>R instanceof Y))(R,function ie(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(R,Ye):R)}function Oe(R){if(R instanceof IDBRequest)return function re(R){const z=new Promise((Y,he)=>{const oe=()=>{R.removeEventListener("success",we),R.removeEventListener("error",X)},we=()=>{Y(Oe(R.result)),oe()},X=()=>{he(R.error),oe()};R.addEventListener("success",we),R.addEventListener("error",X)});return z.then(Y=>{Y instanceof IDBCursor&&me.set(Y,R)}).catch(()=>{}),ue.set(z,R),z}(R);if(J.has(R))return J.get(R);const z=Ee(R);return z!==R&&(J.set(R,z),ue.set(z,R)),z}const Xe=R=>ue.get(R);function lt(R,z,{blocked:Y,upgrade:he,blocking:oe,terminated:we}={}){const X=indexedDB.open(R,z),se=Oe(X);return he&&X.addEventListener("upgradeneeded",ye=>{he(Oe(X.result),ye.oldVersion,ye.newVersion,Oe(X.transaction))}),Y&&X.addEventListener("blocked",()=>Y()),se.then(ye=>{we&&ye.addEventListener("close",()=>we()),oe&&ye.addEventListener("versionchange",()=>oe())}).catch(()=>{}),se}function Qe(R,{blocked:z}={}){const Y=indexedDB.deleteDatabase(R);return z&&Y.addEventListener("blocked",()=>z()),Oe(Y).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Ve=["put","add","delete","clear"],ot=new Map;function gt(R,z){if(!(R instanceof IDBDatabase)||z in R||"string"!=typeof z)return;if(ot.get(z))return ot.get(z);const Y=z.replace(/FromIndex$/,""),he=z!==Y,oe=Ve.includes(Y);if(!(Y in(he?IDBIndex:IDBObjectStore).prototype)||!oe&&!Pe.includes(Y))return;const we=function(){var X=(0,h.Z)(function*(se,...ye){const He=this.transaction(se,oe?"readwrite":"readonly");let Re=He.store;return he&&(Re=Re.index(ye.shift())),(yield Promise.all([Re[Y](...ye),oe&&He.done]))[0]});return function(ye){return X.apply(this,arguments)}}();return ot.set(z,we),we}!function Je(R){Ye=R(Ye)}(R=>O3(yw({},R),{get:(z,Y,he)=>gt(z,Y)||R.get(z,Y,he),has:(z,Y)=>!!gt(z,Y)||R.has(z,Y)}))},5861:(Ze,_e,B)=>{"use strict";function h(V,de,ie,ce,me,fe,ve){try{var J=V[fe](ve),ue=J.value}catch(re){return void ie(re)}J.done?de(ue):Promise.resolve(ue).then(ce,me)}function ne(V){return function(){var de=this,ie=arguments;return new Promise(function(ce,me){var fe=V.apply(de,ie);function ve(ue){h(fe,ce,me,ve,J,"next",ue)}function J(ue){h(fe,ce,me,ve,J,"throw",ue)}ve(void 0)})}}B.d(_e,{Z:()=>ne})},3681:Ze=>{"use strict";Ze.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.10.1","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}},Ze=>{Ze(Ze.s=9047)}]);